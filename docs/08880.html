<html>
<head>
<title>Python Up Your Code: The Ternary Operator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python Up 您的代码:三元运算符</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/python-up-your-code-the-ternary-operator-6e62dcb5a193?source=collection_archive---------7-----------------------#2022-07-16">https://blog.devgenius.io/python-up-your-code-the-ternary-operator-6e62dcb5a193?source=collection_archive---------7-----------------------#2022-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e8ac" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">展示三元运算符及其在 Python 中的用法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/57db6e5bff78aedb69df435c5948528e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UxQjCNZ_YrKRfclhvGe0FA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@zaks?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Zak </a>在<a class="ae kv" href="https://unsplash.com/s/photos/neon-abstract?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><h2 id="2ef5" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">什么是三元运算符？</h2><p id="ae83" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">Python 具有广泛的<a class="ae kv" href="https://medium.com/@deck451/python-up-your-code-operators-455164611481" rel="noopener">操作符</a>，比如算术、按位、标识、逻辑、成员、比较等等。但是一些编程语言，比如 C，或者 Java，也有我们所说的<strong class="lu ir">三元</strong>运算符。</p><p id="eac1" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">一般来说，三元运算符实现的是根据条件表达式将两个可能值中的一个赋给操作数。如果条件表达式评估为<code class="fe mq mr ms mt b">True</code>，那么前一个值将被分配给我们的操作数。相反，如果条件表达式的值为<code class="fe mq mr ms mt b">False</code>，那么后一个值将被赋给我们的操作数。</p><h2 id="1d16" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Python 中的三元运算符是什么？</h2><p id="7413" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">Python 也不例外。它也有这样一个运营商。除了不同于 C 或 Java，它们有自己的语法，在类似于<code class="fe mq mr ms mt b">condition ? value_if_true : value_if_false</code>的表达式中使用类似于<code class="fe mq mr ms mt b">?</code>和<code class="fe mq mr ms mt b">:</code>的字符，Python 不需要这些特殊字符来实现这个功能。Python 通过我们称之为<strong class="lu ir">条件语句</strong>，或者更不夸张地说，一个<strong class="lu ir">内联 if </strong>来确保三元运算符的功能。</p><h2 id="1fb5" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使用三元运算符如何简化我的代码？</h2><p id="382f" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">让我们考虑一段简单的代码:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="31b4" class="kw kx iq mt b gy my mz l na nb">a = 2</span><span id="a213" class="kw kx iq mt b gy nc mz l na nb"><strong class="mt ir">if</strong> a == 2:<br/>    b = "Yes"<br/><strong class="mt ir">else</strong>:<br/>    b = "No"</span></pre><p id="9bee" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">通过这种方式，我们确保了<code class="fe mq mr ms mt b">b</code>得到一个或另一个值，这取决于<code class="fe mq mr ms mt b">a</code>是否等于<code class="fe mq mr ms mt b">2</code>。这是 4 行代码。当然，简化它的一种方法是去掉结尾的<code class="fe mq mr ms mt b">else</code>,写成:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="a55f" class="kw kx iq mt b gy my mz l na nb">a = 2<br/>b = "No"</span><span id="4544" class="kw kx iq mt b gy nc mz l na nb"><strong class="mt ir">if</strong> a == 2:<br/>    b = "Yes"</span></pre><p id="2872" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我们会立即将<code class="fe mq mr ms mt b">b</code>初始化为<code class="fe mq mr ms mt b">No</code>的值，只有当条件评估为<code class="fe mq mr ms mt b">True</code>时，才会将值更改为<code class="fe mq mr ms mt b">Yes</code>。但是对于 Python 来说，这似乎还是有点太多了。</p><p id="e82e" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">下面是我们实现三元运算符的几种方法。</p><ul class=""><li id="b42d" class="nd ne iq lu b lv ml ly mm lf nf lj ng ln nh mk ni nj nk nl bi translated"><strong class="lu ir">条件语句/内联 if: </strong></li></ul><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="66dd" class="kw kx iq mt b gy my mz l na nb">a = 2<br/>b = "Yes" <strong class="mt ir">if</strong> a == 2 <strong class="mt ir">else</strong> "No"</span></pre><p id="2972" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">和以前一样的功能，但是对于手头的问题有一个更简洁和优雅的解决方案。这实际上是这样一个条件语句的语法:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="b0af" class="kw kx iq mt b gy my mz l na nb">operand = value_if_true <strong class="mt ir">if </strong>condition<strong class="mt ir"> else </strong>value_if_false</span></pre><p id="bb94" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">首先，对<code class="fe mq mr ms mt b">condition</code>进行评估，然后做出决定。如果评估为<code class="fe mq mr ms mt b">True</code>，则为<code class="fe mq mr ms mt b">operand = value_if_true</code>。否则，如果<code class="fe mq mr ms mt b">condition</code>被评估为<code class="fe mq mr ms mt b">False</code>，则<code class="fe mq mr ms mt b">operand = value_if_false</code>。</p><p id="d7b9" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">使用它有一些缺点:</p><ol class=""><li id="9dbc" class="nd ne iq lu b lv ml ly mm lf nf lj ng ln nh mk nm nj nk nl bi translated">像<code class="fe mq mr ms mt b">if-elif-else</code>这样的情况不能转换成三元运算符单行程序；</li><li id="514d" class="nd ne iq lu b lv nn ly no lf np lj nq ln nr mk nm nj nk nl bi translated">简单的<code class="fe mq mr ms mt b">if</code>语句也是如此。Python 中的三元运算符，以及任何支持它的编程语言中的三元运算符，都需要两个可供选择的值。这在 Python 中的意思是，条件语句确实需要采用<code class="fe mq mr ms mt b">if-else</code>的形式。简单的<code class="fe mq mr ms mt b">if</code>语句不能转换成条件表达式。例如，如果我们执行下面这行代码:<code class="fe mq mr ms mt b">b = “Yes” if a == 2</code>，Python 不会很喜欢这样，它会给我们这样的代码:</li></ol><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="c13d" class="kw kx iq mt b gy my mz l na nb">b = "Yes" if a == 2<br/>        ^^^^^^^^^^^^^^^<br/>SyntaxError: expected 'else' after 'if' expression</span></pre><ul class=""><li id="188e" class="nd ne iq lu b lv ml ly mm lf nf lj ng ln nh mk ni nj nk nl bi translated"><strong class="lu ir">从元组中挑选正确的元素:</strong></li></ul><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="07f6" class="kw kx iq mt b gy my mz l na nb">a = 2<br/>b = ("No", "Yes") [a == 2]</span></pre><p id="7090" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">请注意，元组伴随着要评估的条件。如果条件评估为<code class="fe mq mr ms mt b">True</code>，那么将选择索引<code class="fe mq mr ms mt b">1</code>处的元素，并将其值分配给<code class="fe mq mr ms mt b">b</code>。但是如果它是<code class="fe mq mr ms mt b">False</code>，那么它是索引<code class="fe mq mr ms mt b">0</code>处的元素，该元素将找到其被分配给<code class="fe mq mr ms mt b">b</code>的值。</p><ul class=""><li id="67f2" class="nd ne iq lu b lv ml ly mm lf nf lj ng ln nh mk ni nj nk nl bi translated"><strong class="lu ir">从字典中选择正确的值:</strong></li></ul><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="7a1d" class="kw kx iq mt b gy my mz l na nb">b = {<strong class="mt ir">False</strong>: "No", <strong class="mt ir">True</strong>: "Yes"} [a == 2]</span></pre><p id="88d4" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">这个甚至比元组挑选更简单。该条件显然将评估为<code class="fe mq mr ms mt b">True</code>或<code class="fe mq mr ms mt b">False</code>。这两个键在我们的字典中都是实际的键，根据条件评估结果，这个键后面的值将被分配给<code class="fe mq mr ms mt b">b</code>。</p><ul class=""><li id="e638" class="nd ne iq lu b lv ml ly mm lf nf lj ng ln nh mk ni nj nk nl bi translated"><strong class="lu ir">使用元组选择无参<em class="ns">λ</em>函数:</strong></li></ul><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="bf7c" class="kw kx iq mt b gy my mz l na nb">b = (<strong class="mt ir">lambda</strong>: "No", <strong class="mt ir">lambda</strong>: "Yes") [a == 2]()</span></pre><p id="76e2" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">同用一个<code class="fe mq mr ms mt b">tuple</code>的值一样，这次我们用了一个<code class="fe mq mr ms mt b">lambda</code> <strong class="lu ir"> </strong>的<code class="fe mq mr ms mt b">tuple</code>函数。对<code class="fe mq mr ms mt b">a == 2</code>条件的评估将是<code class="fe mq mr ms mt b">True</code>或<code class="fe mq mr ms mt b">False</code>。如果条件为<code class="fe mq mr ms mt b">True</code>，将选择第二个(index = 1)λ。如果条件是<code class="fe mq mr ms mt b">False</code>，那么第一个(index = 0) lambda 将被选中。最后一个<code class="fe mq mr ms mt b">()</code>在那里，因为我们需要实际运行 lambda 函数，而不是仅仅从元组中选择它。该λ的输出将被分配给<code class="fe mq mr ms mt b">b</code>。</p><ul class=""><li id="6d69" class="nd ne iq lu b lv ml ly mm lf nf lj ng ln nh mk ni nj nk nl bi translated"><strong class="lu ir">使用 Lambda 函数的三元运算符:</strong></li></ul><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="87cb" class="kw kx iq mt b gy my mz l na nb">b = (<strong class="mt ir">lambda</strong> a: "Yes" <strong class="mt ir">if</strong> a == 2 <strong class="mt ir">else</strong> "No")</span></pre><p id="6846" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">另一个很好的例子，来自<a class="ae kv" href="https://medium.com/@mnjteller" rel="noopener">马丁·泰勒</a>:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="1997" class="kw kx iq mt b gy my mz l na nb">b = (<strong class="mt ir">lambda</strong> a: a == 2 <strong class="mt ir">and</strong> "Yes" <strong class="mt ir">or</strong> "No")</span></pre><p id="cf99" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在这两种情况下，lambda 函数被分配给<code class="fe mq mr ms mt b">b</code>。我们只需要调用<code class="fe mq mr ms mt b">b</code>并给它提供<code class="fe mq mr ms mt b">a</code>参数(例如<code class="fe mq mr ms mt b">b(2)</code>，然后函数执行并给我们提供<code class="fe mq mr ms mt b">Yes</code>或<code class="fe mq mr ms mt b">No</code>。</p><p id="7d9c" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">下面，我为我刚才介绍的所有替代方案设置了一个合适的演示代码:</p><pre class="kg kh ki kj gt mu mt mv mw aw mx bi"><span id="ec6a" class="kw kx iq mt b gy my mz l na nb"><em class="ns"># initialize our variable</em><br/>a = 2</span><span id="67d8" class="kw kx iq mt b gy nc mz l na nb"><em class="ns"># # original code<br/># if a == 2:<br/>#     b = "Yes"<br/># else:<br/>#     b = "No"</em></span><span id="16b5" class="kw kx iq mt b gy nc mz l na nb"><em class="ns"># ternary operator using conditional statement<br/></em>b = "Yes" <strong class="mt ir">if</strong> a == 2 <strong class="mt ir">else</strong> "No"<br/><strong class="mt ir">print</strong>(b)</span><span id="3585" class="kw kx iq mt b gy nc mz l na nb"><em class="ns"># picking an element from a tuple<br/></em>b = ("No", "Yes") [a == 2]<br/><strong class="mt ir">print</strong>(b)</span><span id="130d" class="kw kx iq mt b gy nc mz l na nb"><em class="ns"># picking a value from a dictionary</em><br/>b = {<strong class="mt ir">False</strong>: "No", <strong class="mt ir">True</strong>: "Yes"} [a == 2]<br/><strong class="mt ir">print</strong>(b)</span><span id="1d82" class="kw kx iq mt b gy nc mz l na nb"><em class="ns"># using argumentless lambda functions</em><br/>b = (<strong class="mt ir">lambda</strong>: "No", <strong class="mt ir">lambda</strong>: "Yes") [a == 2]()<br/><strong class="mt ir">print</strong>(b)</span><span id="73ee" class="kw kx iq mt b gy nc mz l na nb"><em class="ns"># using lambda functions</em><br/>b = (<strong class="mt ir">lambda</strong> a: "Yes" <strong class="mt ir">if</strong> a == 2 <strong class="mt ir">else</strong> "No")(2)<br/><strong class="mt ir">print</strong>(b)</span><span id="9dbb" class="kw kx iq mt b gy nc mz l na nb">b = (<strong class="mt ir">lambda</strong> a: a == 2 <strong class="mt ir">and</strong> "Yes" <strong class="mt ir">or</strong> "No")(2)<br/><strong class="mt ir">print</strong>(b)</span><span id="3dc5" class="kw kx iq mt b gy nc mz l na nb"><br/>Output:<br/>Yes<br/>Yes<br/>Yes<br/>Yes<br/>Yes<br/>Yes</span></pre><p id="c208" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">这篇文章到此结束。希望这对你们有所帮助，我们下次<a class="ae kv" href="https://medium.com/@deck451/python-up-your-code-iterators-af5331f68ccd" rel="noopener">再见！编码快乐！</a></p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><p id="eb86" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated"><em class="ns"> Deck 是软件工程师、导师、作家，有时甚至是老师。他拥有 12 年以上的软件工程经验，现在是 Python 编程语言的真正倡导者，同时他的热情是帮助人们提高他们的 Python(以及一般的编程)技能。你可以在</em><a class="ae kv" href="https://www.linkedin.com/in/deck451/" rel="noopener ugc nofollow" target="_blank"><em class="ns">Linkedin</em></a><em class="ns">，</em> <a class="ae kv" href="https://www.facebook.com/deck451/" rel="noopener ugc nofollow" target="_blank"> <em class="ns">脸书</em> </a> <em class="ns">，</em> <a class="ae kv" href="https://twitter.com/Deck45100" rel="noopener ugc nofollow" target="_blank"> <em class="ns">推特</em> </a> <em class="ns">，以及</em> <a class="ae kv" href="https://discord.com" rel="noopener ugc nofollow" target="_blank"> <em class="ns">不和谐</em> </a> <em class="ns"> : Deck451#6188，以及跟随他在这里写作的</em> <a class="ae kv" href="https://medium.com/@deck451" rel="noopener"> <em class="ns">媒体</em></a></p></div></div>    
</body>
</html>