<html>
<head>
<title>Data Driven Dynamic UI Generation with Vue.js and Quasar</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Vue.js 和 Quasar 生成数据驱动的动态 UI</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/data-driven-ui-with-vue-js-and-quasar-fb9062899493?source=collection_archive---------2-----------------------#2022-04-15">https://blog.devgenius.io/data-driven-ui-with-vue-js-and-quasar-fb9062899493?source=collection_archive---------2-----------------------#2022-04-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6d6fc91ecb70d277d4b7e208b059ce0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*j1po-ZLGC9Tq_em7.png"/></div></div></figure><h2 id="615a" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">描述</h2><p id="0867" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">在 2020 年 3 月中旬，我们开始了动态 UI 生成的第一次尝试，基于 JSON 中的模式定义(<strong class="kt io">数据驱动 UI </strong>)，使用框架<strong class="kt io"> Vue.js + Quasar </strong>。</p><p id="03b8" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated"><strong class="kt io">数据驱动 UI </strong>概念支持有趣的解决方案，例如:</p><ul class=""><li id="becb" class="lr ls in kt b ku lm ky ln ke lt ki lu km lv ll lw lx ly lz bi translated">定义与动态生成 UI 的数据库表和视图相关的 UI 模型定义模式；</li><li id="f04a" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">创建与技术和框架无关的 UI 模型定义模式(一个可以为<strong class="kt io"> Vue+Quasar </strong>开发一个生成器，另一个在<strong class="kt io"> React+Material UI </strong>中，等等)。</li></ul><p id="6120" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">这个想法是链接到数据库模式 API，这个 API 为与数据库中的表和视图(实体)相关的表单提供 UI 定义。这些 UI 定义将以 JSON 格式构建，客户端解释器将基于 JSON 信息生成 UI(当时在<strong class="kt io">vue . js 2.0+Quasar framework 1.0</strong>)。</p><p id="3afc" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">动态生成的表单将为数据库中的每个对应实体字段呈现字段定义模式，该模式具有该字段的编辑控件组件的类型(以及其他相关属性)。这些控件将一个接一个地呈现，或者呈现在组内(选项卡、卡片、展开等)。该方案还提供了与它们相互依赖相关的查找字段(<em class="mf">例如国家、州、城市</em>)。编辑控件基于<strong class="kt io"> <em class="mf"> Quasar 框架的表单控件</em> </strong>，并做了一些调整，例如使用<strong class="kt io"> <em class="mf">事件总线</em> </strong>进行事件通信，使用<strong class="kt io"> <em class="mf">作用域插槽</em> </strong>进行表单、编辑控件和包装组件之间的属性通信。还实现了一些使用 JSON 模式中的插槽的复杂组件组合。还提供了<strong class="kt io"> <em class="mf">无渲染包装组件</em> </strong>用于与 RESTful/GraphQL API 交互，以与数据库中相应实体/查找的数据交互。</p><p id="e0df" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">出于简单的原因，大多数功能都从原始代码中排除，只关注主要组件的动态呈现，即表单、组和编辑控件(<em class="mf">，这是本文</em>的重点)。我们只保留了字段分组在选项卡中的表单的实现。</p><h2 id="b420" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">先决条件</h2><p id="83b9" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">我们假设你对<strong class="kt io"> git cli </strong>、<strong class="kt io"> javascript </strong>、<strong class="kt io"> Vue.js </strong>和<strong class="kt io"> Quasar 框架</strong>有很好的了解。您的系统上必须安装有<strong class="kt io"> Vue cli </strong>和<strong class="kt io"> quasar cli </strong>。本教程是在一个<strong class="kt io"> <em class="mf"> linux 环境</em> </strong>中运行的，但是你可以很容易地为你喜欢的操作系统进行调整。</p><h2 id="92cb" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">JSON 模式结构</h2><p id="2916" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">JSON 的结构相当简单。定义每个组项目中的组和字段列表。</p><p id="62d8" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">然而，定义字段属性可以像支持的 Quasar UI 控件所允许的那样复杂(<em class="mf">要了解支持哪些属性，请参见相应的</em><strong class="kt io"><em class="mf">Quasar</em></strong><em class="mf">控件</em>的文档)。</p><p id="3596" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">模式中的字段属性允许您为字段输入的值定义验证规则、编辑掩码、许多可视化方面等等。</p><p id="6805" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">JSON 的结构如下:</p><ul class=""><li id="b407" class="lr ls in kt b ku lm ky ln ke lt ki lu km lv ll lw lx ly lz bi translated">&gt;<strong class="kt io"><em class="mf">group model:string</em></strong>=&gt;(目前仅支持‘tab’)；</li><li id="88a1" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">&gt;<strong class="kt io"> <em class="mf">组:数组</em> </strong> = &gt;组 itens 的数组:</li><li id="0094" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">&gt;&gt;主组属性(<strong class="kt io"> <em class="mf">名称，标签，图标</em></strong>)；</li><li id="f2c9" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">&gt;&gt;其他可选的分组控制类型特定属性</li><li id="923e" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">&gt; &gt;<strong class="kt io"> <em class="mf">字段:数组</em> </strong> = &gt; UI 控件定义字段列表:</li><li id="6d07" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">&gt;&gt;&gt;主字段属性(<strong class="kt io"> <em class="mf">名称，id，字段类型</em></strong>)；</li><li id="3a0c" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">&gt;&gt;&gt;其他可选字段控件类型的特定属性。</li></ul><p id="c9e7" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">下面是本文中使用的一个 JSON 模式示例:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="a497" class="jv jw in ml b gy mp mq l mr ms">export default {<br/>  /*<br/>   * Group type: Only 'tab' is currently supported<br/>   */<br/>  groupModel: "tab",<br/>  /*<br/>   * List of group itens<br/>   */<br/>  groups: [<br/>    {<br/>      /*<br/>       * Main properties (name, label, icon)<br/>       */<br/>      name: "Group 1",<br/>      label: "Group 1",<br/>      icon: "mail",<br/><br/>      /*<br/>       * Control type specific properties<br/>       */<br/>      flat: true,<br/>      "expand-separator": true,<br/><br/>      /*<br/>           * Field list: name, id and fieldType <br/>             are the main properties, the others are <br/>             UI control specific properties.<br/>           */<br/>      fields: [<br/>        {<br/>          /*<br/>           * Main field properties<br/>           */<br/>          name: "id",<br/>          id: "g1_id",<br/>          fieldType: "inputtext",<br/>          /*<br/>           * Control type specific properties<br/>           */<br/>          label: "id",<br/>          dense: false,<br/>          readonly: true,<br/>          hidden: true,<br/>        },<br/>        /*<br/>         * Other fields definitions...<br/>         */<br/>        {<br/>          name: "name",<br/>          id: "g1_name",<br/>          fieldType: "inputtext",<br/>          label: "Name",<br/>          placeholder: "Name...",<br/>          hint: "Inform the name...",<br/>          dense: true,<br/>          clearable: true,<br/>          "clear-icon": "close",<br/>          /*<br/>           * Validation rules can be defined as in the example below<br/>           */<br/>          rules: [<br/>            {<br/>              params: ["val"],<br/>              exp: '!!val || "Name is required!"',<br/>            },<br/>          ],<br/>        },<br/>        {<br/>          name: "on",<br/>          id: "g1_on",<br/>          fieldType: "btntoggle",<br/>          label: "On?",<br/>          hint: "Report if ON or OFF...",<br/>          dense: false,<br/>          clearable: true,<br/>          "stack-label": true,<br/>          filled: false,<br/>          options: [<br/>            { label: "On", value: "on" },<br/>            { label: "Off", value: "off" },<br/>          ],<br/>        },<br/>        {<br/>          name: "onoff",<br/>          id: "g1_onoff",<br/>          fieldType: "checkbox",<br/>          "outer-label": "On or Off?",<br/>          label: "On/Off",<br/>          hint: "Report if ON or OFF...",<br/>          "indeterminate-value": null,<br/>          "true-value": "on",<br/>          "false-value": "off",<br/>          dense: false,<br/>          clearable: true,<br/>          "stack-label": true,<br/>          filled: false,<br/>        },<br/>        {<br/>          name: "alive",<br/>          id: "g1_alive",<br/>          fieldType: "radio",<br/>          "outer-label": "Is alive?",<br/>          label: "Alive",<br/>          hint: "let me know if you're alive...",<br/>          val: "alive",<br/>          dense: false,<br/>          clearable: true,<br/>          "stack-label": true,<br/>          filled: false,<br/>        },<br/>        {<br/>          name: "birthday",<br/>          id: "g1_birthday",<br/>          fieldType: "datepicker",<br/>          label: "Birthday",<br/>          hint: "enter your birthday...",<br/>          mask: "YYYY-MM-DD",<br/>          titleFormat: "ddd., DD [de] MMM.",<br/>          dense: false,<br/>          clearable: true,<br/>          "stack-label": true,<br/>          filled: false,<br/>        },<br/>        {<br/>          name: "time",<br/>          id: "g1_time",<br/>          fieldType: "timepicker",<br/>          label: "Time",<br/>          hint: "Inform the time...",<br/>          format24h: true,<br/>          dense: false,<br/>          clearable: true,<br/>          "stack-label": true,<br/>          filled: false,<br/>        },<br/>        {<br/>          name: "date",<br/>          id: "g1_date",<br/>          fieldType: "inputdate",<br/>          label: "Date",<br/>          placeholder: "Date...",<br/>          dateMask: "DD/MM/YYYY",<br/>          mask: "##/##/####",<br/>          hint: "Inform the date...",<br/>          titleFormat: "ddd., DD [de] MMM.",<br/>          dense: true,<br/>          clearable: true,<br/>        },<br/>        {<br/>          name: "time2",<br/>          id: "g1_time2",<br/>          fieldType: "inputtime",<br/>          label: "Time",<br/>          placeholder: "Time...",<br/>          timeMask: "HH:mm:ss",<br/>          mask: "##:##:##",<br/>          hint: "Inform the time...",<br/>          format24h: true,<br/>          withSeconds: true,<br/>          dense: true,<br/>          clearable: true,<br/>        },<br/>        {<br/>          name: "date_time",<br/>          id: "g1_date_time",<br/>          fieldType: "inputdatetime",<br/>          label: "Date/Time",<br/>          placeholder: "Date/Time...",<br/>          dateMask: "DD/MM/YYYY HH:mm:ss",<br/>          mask: "##/##/#### ##:##:##",<br/>          hint: "Inform the date and time...",<br/>          dateTitleFormat: "ddd., DD [de] MMM.",<br/>          format24h: true,<br/>          withSeconds: true,<br/>          dense: true,<br/>          clearable: true,<br/>        },<br/>        {<br/>          name: "options",<br/>          id: "g1_options",<br/>          fieldType: "select",<br/>          label: "Options",<br/>          hint: "Inform the option...",<br/>          dense: true,<br/>          clearable: true,<br/>          transitionShow: "flip-up",<br/>          transitionHide: "flip-down",<br/>          options: ["Google", "Facebook", "Twitter", "Apple", "Oracle"],<br/>        },<br/>        {<br/>          name: "word",<br/>          id: "g1_word",<br/>          fieldType: "editor",<br/>          label: "Editor",<br/>          hint: "Spills the beans...",<br/>          clearable: true,<br/>          "stack-label": true,<br/>          "min-height": "5rem",<br/>        },<br/>        {<br/>          name: "range",<br/>          id: "g1_range",<br/>          fieldType: "range",<br/>          outerLabel: "Range",<br/>          hint: "Inform the range...",<br/>          clearable: true,<br/>          "stack-label": true,<br/>          min: 0,<br/>          max: 50,<br/>          label: true,<br/>        },<br/>        {<br/>          name: "track",<br/>          id: "g1_track",<br/>          fieldType: "slider",<br/>          outerLabel: "Track",<br/>          hint: "Drag...",<br/>          clearable: true,<br/>          "stack-label": true,<br/>          min: 0,<br/>          max: 50,<br/>          step: 5,<br/>          label: true,<br/>        },<br/>        {<br/>          name: "evaluate",<br/>          id: "g1_evaluate",<br/>          fieldType: "rating",<br/>          label: "Rating",<br/>          hint: "Do the evaluation...",<br/>          clearable: true,<br/>          "stack-label": true,<br/>          max: 5,<br/>          size: "2em",<br/>          color: "primary",<br/>        },<br/>        {<br/>          name: "open_close",<br/>          id: "g1_open_close",<br/>          fieldType: "toggle",<br/>          "outer-label": "Open?",<br/>          label: "Open",<br/>          hint: "Open or closed report...",<br/>          dense: false,<br/>          clearable: true,<br/>          "stack-label": true,<br/>          filled: false,<br/>          color: "primary",<br/>          "true-value": "on",<br/>          "false-value": "off",<br/>        },<br/>        {<br/>          name: "files",<br/>          id: "g1_files",<br/>          fieldType: "uploader",<br/>          "outer-label": "Send files",<br/>          label: "Select the files",<br/>          hint: "Select the files...",<br/>          dense: false,<br/>          clearable: true,<br/>          multiple: true,<br/>          "stack-label": true,<br/>        },<br/>      ],<br/>    },<br/>    {<br/>      name: "Group 2",<br/>      label: "Group 2",<br/>      icon: "alarm",<br/><br/>      flat: true,<br/>      "expand-separator": true,<br/>    },<br/>    {<br/>      name: "Group 3",<br/>      label: "Group 3",<br/>      icon: "movie",<br/><br/>      flat: true,<br/>      "expand-separator": true,<br/>    },<br/>  ],<br/>};</span></pre><h2 id="c4d5" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">神奇是如何发生的</h2><h2 id="c0d5" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">框架中所需的资源</h2><p id="aef6" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">为了让它工作，框架必须支持动态地、有条件地创建组件的可能性，并且还支持在一系列定义上的迭代。好在<strong class="kt io"> Vue.js </strong>很擅长这些东西！</p><p id="785d" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated"><strong class="kt io"> Vue.js </strong>支持<a class="ae mt" href="https://vuejs.org/guide/essentials/conditional.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kt io">条件渲染—(v-if/v-else/v-else-if)</strong></a>，<a class="ae mt" href="https://vuejs.org/guide/essentials/list.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kt io">列表渲染— (v-for) </strong> </a>。这些特性允许您迭代 JSON 模式，并有条件地呈现 UI 组件。</p><p id="f4f1" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">对于一些类型的控件来说，有条件的重新呈现是可以的，但是当你有很多这样的控件时，这就不是最好的选择了(在本文中，我们定义了大约 20 种不同类型的表单控件作为奖励！)</p><p id="50d8" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">对于这种类型的挑战<strong class="kt io"> Vue.js </strong>支持<a class="ae mt" href="https://v2.vuejs.org/v2/guide/components-dynamic-async.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kt io">动态组件创建— (:is) </strong> </a>。此功能允许您引用动态导入的组件实例。</p><p id="5309" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">还记得上一节我们提到的每个控件类型都有不同的属性集。为了工作，<strong class="kt io"> Vue.js </strong>需要允许批量链接一个对象的所有属性。Vue.js 对此也有解决方案:<a class="ae mt" href="https://v2.vuejs.org/v2/guide/components-props.html#Passing-the-Properties-of-an-Object" rel="noopener ugc nofollow" target="_blank"> <strong class="kt io">传递一个对象的所有属性— (v-bind) </strong> </a>。</p><p id="8397" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">在下一节中，我们将看到如何在<strong class="kt io"> FormGenerator.vue </strong>的<code class="fe mu mv mw ml b">template</code>部分中使用上述所有功能，以创建一个简洁明了的问题解决方案。</p><h2 id="3d23" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">组件基础设施</h2><p id="a61d" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated"><strong class="kt io"><em class="mf">src/components</em></strong>文件夹有一系列源代码。让我们分析它们，以了解整个事情是如何实现的:</p><h2 id="4e6b" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">_ component map 01 . js</strong></h2><p id="9f7f" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">这个<a class="ae mt" href="https://v2.vuejs.org/v2/guide/mixins.html?redirect=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kt io"> mixin 对象</strong> </a>被注入到<strong class="kt io"> FormGenerator.vue </strong>中。它的功能是提供一个数据字典(<strong class="kt io"> componentMap[] </strong>)，其中每个组件名解析为一个工厂，该工厂动态导入并返回该名称的组件实例:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="9140" class="jv jw in ml b gy mp mq l mr ms">/**<br/> * A mixin object that mantain a dictionary de components<br/> */<br/><br/>export default {<br/>  data() {<br/>    return {<br/>      componentMap: {},<br/>    };<br/>  },<br/>  methods: {<br/>    initComponentsMap() {<br/>      this.componentMap = {<br/>        // Group components<br/>        card: () =&gt; import("./Card01"),<br/>        tabs: () =&gt; import("./Tabs01"),<br/>        tab: () =&gt; import("./Tab01"),<br/>        tabpanel: () =&gt; import("./TabPanel01"),<br/>        expansion: () =&gt; import("./Expansion01"),<br/><br/>        // Form component<br/>        form: () =&gt; import("./Form01"),<br/><br/>        // From field components<br/>        inputtext: () =&gt; import("./Input01"),<br/>        inputdate: () =&gt; import("./DateInput01"),<br/>        inputtime: () =&gt; import("./TimeInput01"),<br/>        inputdatetime: () =&gt; import("./DateTimeInput01"),<br/>        select: () =&gt; import("./Select01"),<br/>        checkbox: () =&gt; import("./CheckBox01"),<br/>        radio: () =&gt; import("./Radio01"),<br/>        toggle: () =&gt; import("./Toggle01"),<br/>        btntoggle: () =&gt; import("./ButtonToggle01"),<br/>        optgroup: () =&gt; import("./OptionGroup01"),<br/>        range: () =&gt; import("./Range01"),<br/>        slider: () =&gt; import("./Slider01"),<br/>        datepicker: () =&gt; import("./DatePicker01"),<br/>        timepicker: () =&gt; import("./TimePicker01"),<br/>        rating: () =&gt; import("./Rating01"),<br/>        uploader: () =&gt; import("./Uploader01"),<br/>        editor: () =&gt; import("./Editor01"),<br/><br/>        // Other<br/>        icon: () =&gt; import("./Icon01"),<br/>      };<br/>    },<br/>  },<br/>};</span></pre><p id="5b4b" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">之后，该字典用于在<code class="fe mu mv mw ml b">template</code>中创建动态组件，其名称如下:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="c56c" class="jv jw in ml b gy mp mq l mr ms">&lt;!-- Create a dynamica TABS type component --&gt;<br/>&lt;component :is="componentMap['tabs']"&gt;&lt;/component&gt;</span></pre><h2 id="9af7" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak"> FormGenerator.vue </strong></h2><p id="89a1" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">它完成了基于 JSON 模式动态组装 UI 的大部分工作。</p><p id="832c" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">它有一系列用于内部服务的功能，所以让我们把重点放在真正重要的部分。</p><ul class=""><li id="5fb0" class="lr ls in kt b ku lm ky ln ke lt ki lu km lv ll lw lx ly lz bi translated">首先，它导入 componetMap，这样它就可以作为 mixin 注入，并且可以在模板中访问；</li><li id="8eca" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">创建并提供事件总线，以便与组件生态系统进行通信；</li><li id="a173" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">定义将接收 JSON 架构的属性；</li><li id="cc61" class="lr ls in kt b ku ma ky mb ke mc ki md km me ll lw lx ly lz bi translated">定义 formData 数据以维护输入字段内容。</li></ul><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="433d" class="jv jw in ml b gy mp mq l mr ms">...<br/><br/>import componentMap from "./_componentMap01";<br/><br/>...<br/><br/>export default {<br/>  name: "FormGenerator",<br/><br/>  mixins: [componentMap],<br/><br/>  provide() {<br/>    return {<br/>      // The event bus to comunicate with components<br/>      eventBus: this.eventBus,<br/>    };<br/>  },<br/>  props: {<br/>    // The schema placeholder property<br/>    schema: {<br/>      type: Object,<br/>    },<br/>  },<br/>  data() {<br/>    return {<br/>      // The event bus instance<br/>      eventBus: new Vue(),<br/>...<br/>      // Form data with input field contents<br/>      formData: {},<br/>...<br/>    }<br/>  }<br/><br/>...<br/><br/>}</span></pre><p id="98fa" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">最后是创建动态组件的<code class="fe mu mv mw ml b">template</code>——模板中的注释清楚地解释了<strong class="kt io"> Vue.js </strong>功能是如何协同工作的:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="62a3" class="jv jw in ml b gy mp mq l mr ms">&lt;template&gt;<br/>  &lt;!--<br/>        Dynamic wrapper `form` component<br/>        `fixedSchema` is the ajusted version of property `schema`<br/>      --&gt;<br/>  &lt;component v-if="fixedSchema" :is="componentMap['form']" ref="form"&gt;<br/>    &lt;!--<br/>        ==================  <br/>        Groups with fields<br/>        ==================<br/>        --&gt;<br/>    &lt;div v-if="fixedSchema.groups &amp;&amp; fixedSchema.groups.length &gt; 0"&gt;<br/>      &lt;!--<br/>          ==========<br/>          TAB Model<br/>          ==========<br/>          --&gt;<br/>      &lt;!--<br/>            Dynamic `tabs` component<br/>          --&gt;<br/>      &lt;component<br/>        v-if="fixedSchema.groupModel == 'tab'"<br/>        :is="componentMap['tabs']"<br/>        v-model="selectedGroup"<br/>        dense<br/>      &gt;<br/>        &lt;!--<br/>              Dynamic `tab itens` components  <br/>            --&gt;<br/>        &lt;component<br/>          v-for="(group, index) in fixedSchema.groups"<br/>          :is="componentMap['tab']"<br/>          :key="index"<br/>          v-bind="group"<br/>        &gt;<br/>        &lt;/component&gt;<br/>      &lt;/component&gt;<br/><br/>      &lt;q-separator /&gt;<br/><br/>      &lt;!--<br/>            Dynamic `tabpanel` component<br/>          --&gt;<br/>      &lt;component<br/>        v-for="(group, index) in fixedSchema.groups"<br/>        :is="componentMap['tabpanel']"<br/>        :key="index"<br/>        :selected="selectedGroup"<br/>        v-bind="group"<br/>      &gt;<br/>        &lt;div v-if="group.fields &amp;&amp; group.fields.length &gt; 0"&gt;<br/>          &lt;!--<br/>                And finally all UI field controls:<br/>                - Component type specified by `componentMap[field.fieldType]`<br/>                - Data contents linked to `formData[field.name]` by `v-model`<br/>                - All `field` properties linked by `v-bind`<br/>              --&gt;<br/>          &lt;component<br/>            v-for="(field, index) in validFieldComps(group.fields)"<br/>            :key="index"<br/>            :is="componentMap[field.fieldType]"<br/>            v-model="formData[field.name]"<br/>            v-bind="field"<br/>            v-show="!field.hidden"<br/>          &gt;<br/>          &lt;/component&gt;<br/>        &lt;/div&gt;<br/>      &lt;/component&gt;<br/>    &lt;/div&gt;<br/>  &lt;/component&gt;<br/>&lt;/template&gt;</span></pre><h2 id="375a" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">其他”。/src/components 中的 vue "文件</strong></h2><p id="17ae" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">其他组件基本上封装了一个或多个原始的<strong class="kt io">类星体组件</strong>，以提供所需的功能。它们通过<code class="fe mu mv mw ml b">event bus</code>将事件传递回<strong class="kt io"> FormGenerator.vue </strong>，并通过<code class="fe mu mv mw ml b">v-on="$listners"</code>和<code class="fe mu mv mw ml b">v-bind="$attrs"</code>从父节点接收事件处理程序和数据。</p><p id="fd7c" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">例如，我们有来自<strong class="kt io"> input.vue </strong>的以下源代码:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="72bb" class="jv jw in ml b gy mp mq l mr ms">&lt;template&gt;<br/>  &lt;q-input<br/>    v-bind="$attrs"<br/>    v-on="$listeners"<br/>    @input="onInput"<br/>    @clear="onClear"<br/>    @focus="onFocus"<br/>    @blur="onBlur"<br/>  &gt;<br/>    &lt;template<br/>      v-for="(_, slot) of $scopedSlots"<br/>      v-slot:[slot]="scope"<br/>    &gt;<br/>      &lt;slot<br/>        :name="slot"<br/>        v-bind="scope"<br/>      /&gt;<br/>    &lt;/template&gt;<br/>  &lt;/q-input&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>import compInfo from './_compInfo'<br/><br/>export default {<br/>  mixins: [compInfo],<br/>  inject: ['eventBus'],<br/>  methods: {<br/>    onInput (value) {<br/>      this.eventBus.$emit('input', this, value)<br/>    },<br/>    onClear (value) {<br/>      this.eventBus.$emit('clear', this, value)<br/>    },<br/>    onFocus (evt) {<br/>      this.eventBus.$emit('focus', this, evt)<br/>    },<br/>    onBlur (evt) {<br/>      this.eventBus.$emit('blur', this, evt)<br/>    }<br/>  },<br/>  inheritAttrs: false<br/>}<br/>&lt;/script&gt;</span></pre><h2 id="94a2" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">如何使用表单生成器</h2><p id="d054" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">现在简单的部分来了，在<code class="fe mu mv mw ml b">src/pages/FormTest.vue</code>中，我们有了加载 JSON 模式并将其传递给<strong class="kt io"> FormGenerator </strong>组件的页面——就这样！</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="b5bb" class="jv jw in ml b gy mp mq l mr ms">&lt;template&gt;<br/>  &lt;form-generator :schema="schema" /&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>import FormGenerator from "../components/FormGenerator";<br/>import jsonSchema from "../data/schema.js";<br/><br/>export default {<br/>  components: { FormGenerator },<br/>  data() {<br/>    return {<br/>      schema: {},<br/>    };<br/>  },<br/>  created() {<br/>    this.schema = jsonSchema;<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="d794" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">通过使用以下命令运行示例:</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="e208" class="jv jw in ml b gy mp mq l mr ms"># Run the Quasar/Vue application<br/>$ yarn quasar dev</span></pre><p id="b662" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">然后在您的首选浏览器中输入以下 URL:</p><p id="c353" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated"><a class="ae mt" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"><strong class="kt io"><em class="mf">http://localhost:8080</em></strong></a></p><p id="5875" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">你会得到这个令人印象深刻的结果:</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/fd9006126e387c6d766e6b0e59401c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/0*eAI46tHvG3KWVutd.png"/></div></figure><h2 id="74ce" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">运行本教程中的示例</h2><h2 id="21c8" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">装置</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="35b2" class="jv jw in ml b gy mp mq l mr ms"># Clone tutorial repository<br/>$ git clone https://github.com/maceto2016/VueDataDrivenUI<br/><br/># access the project folder through the terminal<br/>$ cd VueDataDrivenUI<br/><br/># Install dependencies<br/>$ npm install</span></pre><h2 id="dfe8" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">运行应用程序(从 NestJSDynLoad 文件夹)</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="2639" class="jv jw in ml b gy mp mq l mr ms"># Run the Quasar/Vue application<br/>$ yarn quasar dev</span></pre><h2 id="83ec" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">测试应用程序</h2><p id="7cea" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">在您的首选浏览器中输入以下 URL</p><p id="4936" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated"><a class="ae mt" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank"><strong class="kt io"><em class="mf">http://localhost:8080</em></strong></a></p><h2 id="fe8a" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">结论</h2><p id="0846" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">在本文中，我们提出了<strong class="kt io">数据驱动 UI </strong>的概念，它只不过是基于定义数据中的信息动态创建 UI。本文展示了定义一个<strong class="kt io"> JSON 模式</strong>并使用<strong class="kt io"> Vue.js + Quasar 框架</strong>创建一个基础设施来动态创建组件是多么容易。作为<strong class="kt io">的额外奖励</strong>，我们基于<strong class="kt io"> Quasar 框架 UI </strong>组件提供了大约<strong class="kt io"> 20 个 UI 组件</strong>。</p><p id="f341" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">请随意使用这里提供的源代码和思想。有巨大的改进空间，包括迁移到<strong class="kt io"> Vue.js 3、Quasar 2 和 Typescript </strong>。现在就看你的了！</p><p id="d085" class="pw-post-body-paragraph kr ks in kt b ku lm kw kx ky ln la lb ke lo ld le ki lp lg lh km lq lj lk ll ig bi translated">感谢您的阅读。我很高兴听到你的反馈！</p></div></div>    
</body>
</html>