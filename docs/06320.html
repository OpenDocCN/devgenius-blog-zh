<html>
<head>
<title>Run Jenkins With Docker image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Docker 图像运行 Jenkins</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/run-jenkins-with-docker-image-ba999cba8975?source=collection_archive---------5-----------------------#2021-12-30">https://blog.devgenius.io/run-jenkins-with-docker-image-ba999cba8975?source=collection_archive---------5-----------------------#2021-12-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/11168f9ab2a496738b911e8a8103956f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dCuDEckDaWZVSb8haCwqXQ.jpeg"/></div></div></figure><h2 id="9190" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">简介:</h2><p id="fb49" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">在本文中，我将詹金斯作为一个 docker 映像运行，但您必须阅读<a class="ae lm" href="https://medium.com/@abdalrhmanalkraien/what-is-jenkins-bc8bebcc05cf" rel="noopener"> <strong class="kt io">什么是詹金斯</strong> </a> <strong class="kt io"> </strong>并阅读什么是<strong class="kt io"> </strong> <a class="ae lm" href="https://medium.com/@abdalrhmanalkraien/what-is-ci-cd-concept-375cb226cf3d" rel="noopener"> <strong class="kt io"> CI/CD 概念</strong> </a></p><p id="8c67" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated">在未来，我想使用詹金斯建立管道，并通过我的管道处理我与詹金斯的项目。我将更新这篇文章的所有链接，关于詹金斯的文章，你可以在下面的部分找到任何更新</p><h2 id="94ef" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">阅读本文前必须阅读的重要文章</h2><ul class=""><li id="6768" class="ls lt in kt b ku kv ky kz ke lu ki lv km lw ll lx ly lz ma bi translated">从这个链接你可以看到一个什么样的詹金斯</li><li id="4ca9" class="ls lt in kt b ku mb ky mc ke md ki me km mf ll lx ly lz ma bi translated">您可以通过此链接了解什么是 CI/CD</li></ul><h2 id="646b" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">好了，现在让我们运行一下詹金斯图像，以便在其他时间使用:</h2><blockquote class="mg mh mi"><p id="8312" class="kr ks mj kt b ku ln kw kx ky lo la lb mk lp ld le ml lq lg lh mm lr lj lk ll ig bi translated"><strong class="kt io"> <em class="in">非常重要的注意:</em> </strong></p><p id="9fb4" class="kr ks mj kt b ku ln kw kx ky lo la lb mk lp ld le ml lq lg lh mm lr lj lk ll ig bi translated"><strong class="kt io"> <em class="in">你的机器里必须有 docker 才能跟我申请</em> </strong></p></blockquote><p id="4994" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated">第一步，我想创建一个与 jenkines 一起使用的 docker 网络</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="5190" class="jv jw in ms b gy mw mx l my mz">docker  network create jenkins</span></pre><p id="4d63" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated">第二步，我想创建我的 docker 文件</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="6edb" class="jv jw in ms b gy mw mx l my mz">docker run \</span><span id="6499" class="jv jw in ms b gy na mx l my mz">--name myjenkins \ 1</span><span id="2e7e" class="jv jw in ms b gy na mx l my mz">--rm \ 2</span><span id="2559" class="jv jw in ms b gy na mx l my mz">--detach \ 3</span><span id="f731" class="jv jw in ms b gy na mx l my mz">-p 8088:8080 -p 50000:50000 \ 4</span><span id="72d3" class="jv jw in ms b gy na mx l my mz">-v ~/project/Jenkins_Test/CD-CD-deployment/volume/:/var/jenkins_home \ 5</span><span id="8606" class="jv jw in ms b gy na mx l my mz">jenkins/jenkins:lts\ 6</span></pre><p id="b6c9" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated"><strong class="kt io">现在我想解释一下上面的代码:</strong></p><ol class=""><li id="af76" class="ls lt in kt b ku ln ky lo ke nb ki nc km nd ll ne ly lz ma bi translated">(<em class="mj">可选</em>)因为在运行 docker 时默认取任何容器特定的名称。</li><li id="df65" class="ls lt in kt b ku mb ky mc ke md ki me km mf ll ne ly lz ma bi translated">(<em class="mj">可选</em>)当关闭詹金斯镜像时，那么 docker 会自动删除 Docker 容器</li><li id="3ff1" class="ls lt in kt b ku mb ky mc ke md ki me km mf ll ne ly lz ma bi translated">(<em class="mj">可选</em>)在后台运行 docker 镜像如果你想停止 docker 容器你可以写这个命令<code class="fe nf ng nh ms b">docker stop container-name or container-id</code></li><li id="09bd" class="ls lt in kt b ku mb ky mc ke md ki me km mf ll ne ly lz ma bi translated">(可选)在端口 8088 运行 Jenkins，默认情况下 docker 将在端口 8080 运行 Jenkins</li><li id="c13a" class="ls lt in kt b ku mb ky mc ke md ki me km mf ll ne ly lz ma bi translated">将容器内的目录<code class="fe nf ng nh ms b">/var/jenkins_home</code>映射到名为<code class="fe nf ng nh ms b">jenkins-data</code>的 Docker 卷。这将允许由这个 Docker 容器的 Docker 守护进程控制的其他 Docker 容器从 Jenkins 装载数据。</li><li id="ef8d" class="ls lt in kt b ku mb ky mc ke md ki me km mf ll ne ly lz ma bi translated">将容器内的/~/project/Jenkins _ Test/CD-CD-deployment/volume 目录映射到名为 jenkins-data 的 Docker 卷。这将允许由这个 Docker 容器的 Docker 守护进程控制的其他 Docker 容器从 Jenkins 装载数据。</li><li id="de15" class="ls lt in kt b ku mb ky mc ke md ki me km mf ll ne ly lz ma bi translated">选择将使用的 Jenkins 版本。</li></ol><blockquote class="mg mh mi"><p id="0cf2" class="kr ks mj kt b ku ln kw kx ky lo la lb mk lp ld le ml lq lg lh mm lr lj lk ll ig bi translated">您可以使用下面的代码运行 Jenkins，没有任何问题</p></blockquote><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="a587" class="jv jw in ms b gy mw mx l my mz">docker run --name myjenkins --rm --detach  -p 8088:8080 -p 50000:50000 -v /home/abed/project/Jenkins_Test/CD-CD-deployment/volume/:/var/jenkins_home jenkins/jenkins:lts</span></pre><blockquote class="mg mh mi"><p id="39c0" class="kr ks mj kt b ku ln kw kx ky lo la lb mk lp ld le ml lq lg lh mm lr lj lk ll ig bi translated">如果<strong class="kt io">在 Jenkins 内部运行 docker</strong>有问题，在上面的命令中你可以使用下面的命令稳定，如果你想在 Jenkins 内部运行 docker 镜像。但是在本文中，您可以毫无问题地使用上面的命令。</p></blockquote><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="9aa3" class="jv jw in ms b gy mw mx l my mz">docker run --name myjenkins --rm -u 0 -d   -p 8088:8080 -p 50000:50000 -v $(which docker):/usr/bin/docker  -v /home/abed/project/Jenkins_Test/CD-CD-deployment/volume/:/var/jenkins_home -v /var/run/docker.sock:/var/run/docker.sock  -e JAVA_OPTS:-Djava.awt.headless=true  jenkins/jenkins:ltsafter that you must go to this link to check Jenkins if already exist or not please open this link <strong class="ms io">http://localhost:8088</strong></span><span id="daa9" class="jv jw in ms b gy na mx l my mz">if the Jenkins is already run you must input Jenkins password you can found it in the Jenkins Volume we are already defined it when run Jenkins image</span></pre><p id="64a1" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated">之后，您必须进入此链接检查詹金斯是否已经存在，请打开此链接<code class="fe nf ng nh ms b"><a class="ae lm" href="http://localhost:8088" rel="noopener ugc nofollow" target="_blank"><strong class="kt io">http://localhost:8088</strong></a></code></p><p id="cc95" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated">如果 Jenkins 已经运行，您必须输入 Jenkins 密码，您可以在 Jenkins 卷中找到它，我们已经在运行 Jenkins 映像时定义了它</p><blockquote class="mg mh mi"><p id="4107" class="kr ks mj kt b ku ln kw kx ky lo la lb mk lp ld le ml lq lg lh mm lr lj lk ll ig bi translated"><strong class="kt io">在我的情况下，我选择了卷，我可以找到我的密码时，执行以下命令在终端</strong></p><p id="21e5" class="kr ks mj kt b ku ln kw kx ky lo la lb mk lp ld le ml lq lg lh mm lr lj lk ll ig bi translated"><code class="fe nf ng nh ms b"><strong class="kt io">cat Jenkins_Test/CD-CD-deployment/volume/secrets/initialAdminPassword</strong></code></p><p id="9cc0" class="kr ks mj kt b ku ln kw kx ky lo la lb mk lp ld le ml lq lg lh mm lr lj lk ll ig bi translated">这个密码提供者由詹金斯来运行你的图像</p></blockquote><p id="a784" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated">当设置完成后，你可以点击这个链接<a class="ae lm" href="http://localhost:8088" rel="noopener ugc nofollow" target="_blank"><strong class="kt io">http://localhost:8088</strong></a>当打开这个链接时，你可以看到如下的图片，这意味着 Jenkins 已经在你的机器上运行了</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/dc80142bbc8eaa96a7e4a0384848e761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kcg4Tq2I8hsDtjPpFzjyCQ.png"/></div></div></figure><h2 id="3fe5" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">现在我想在金斯做第一份工作</h2><p id="2746" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">这是一个简单的工作，只是我想创建一个名为<strong class="kt io">测试 1 </strong>的工作，我想打印消息时，建立这个工作</p><ul class=""><li id="6ca4" class="ls lt in kt b ku ln ky lo ke nb ki nc km nd ll lx ly lz ma bi translated">在第一步中，我想点击上面的创建新的工作按钮看看下面的图像</li></ul><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/dc80142bbc8eaa96a7e4a0384848e761.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kcg4Tq2I8hsDtjPpFzjyCQ.png"/></div></div></figure><ul class=""><li id="d92f" class="ls lt in kt b ku ln ky lo ke nb ki nc km nd ll lx ly lz ma bi translated">之后，我想为我的新工作选择一个名称，在我的例子中称为“test1 ”,并选择自由风格项目</li></ul><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/043141ba24c3c0735bdf42c63f71c491.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G8bY6rFBjnQjJQZHGESTtA.png"/></div></div></figure><ul class=""><li id="f825" class="ls lt in kt b ku ln ky lo ke nb ki nc km nd ll lx ly lz ma bi translated">现在我在<strong class="kt io">配置中</strong>到我想要的新作业，转到<strong class="kt io">构建</strong>部分，选择<strong class="kt io">执行 Shell </strong>并写入 Shell 内部，然后点击<strong class="kt io">应用</strong>和<strong class="kt io">保存</strong></li></ul><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/4e03cf8b562bac2b4b18315972ef4131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WXrfDAtl2sqsNISL_kPV0A.png"/></div></div></figure><ul class=""><li id="8982" class="ls lt in kt b ku ln ky lo ke nb ki nc km nd ll lx ly lz ma bi translated">现在我有了新的工作，但我想测试我的工作，我想<strong class="kt io">建立</strong>我的工作表单工作仪表板，在进行此操作之前，我想点击<strong class="kt io">立即建立</strong></li></ul><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/3c9e5cbbf274fefed13b9d4200e2aa4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EzCbplYMWlZ97nTkIdSVDg.png"/></div></div></figure><ul class=""><li id="b704" class="ls lt in kt b ku ln ky lo ke nb ki nc km nd ll lx ly lz ma bi translated">现在，我想显示作业状态，以及是否执行我的命令来执行此操作，我需要转到<strong class="kt io">构建历史</strong>部分，然后我想选择我的构建，在我的情况下，我的构建编号是<strong class="kt io"> #1 </strong>，我需要单击它</li></ul><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/3a7f431e7041040bd6f61b31d37bbb27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gn1EYhqW5tIQmIuiM_8M7g.png"/></div></div></figure><ul class=""><li id="5f56" class="ls lt in kt b ku ln ky lo ke nb ki nc km nd ll lx ly lz ma bi translated">之后，我将转到<strong class="kt io">控制台输出</strong>并查看输出内容</li></ul><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/90b066bb0ac345e4b8809a9c73c6ebab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OUk0zMECUd7Zl8x58GcHYw.png"/></div></div></figure><h1 id="c4aa" class="nj jw in bd jx nk nl nm ka nn no np kd nq nr ns kh nt nu nv kl nw nx ny kp nz bi translated">结论</h1><p id="2a3d" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">在本文中，我解释了如何通过 docker 运行 Jenkins 映像，在构建映像时使用什么属性，以及如何在进入 Jenkins 端口时运行映像，在哪里可以找到 Jenkins 密码以及如何获取密码。</p><p id="cee6" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated">我解释了如何和詹金斯一起创造新的工作机会</p><p id="30fa" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated">感谢阅读，你可以问我任何关于詹金斯的事情</p><h1 id="7c8e" class="nj jw in bd jx nk nl nm ka nn no np kd nq nr ns kh nt nu nv kl nw nx ny kp nz bi translated">参考</h1><p id="b387" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated"><a class="ae lm" href="https://www.jenkins.io/doc/book/installing/docker/" rel="noopener ugc nofollow" target="_blank">https://www.jenkins.io/doc/book/installing/docker/</a></p><p id="9b7b" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated"><a class="ae lm" href="https://hub.docker.com/_/jenkins" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/_/jenkins</a></p><p id="7638" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated"><a class="ae lm" href="https://github.com/jenkinsci/docker/issues/785" rel="noopener ugc nofollow" target="_blank">https://github.com/jenkinsci/docker/issues/785 </a></p><p id="fc28" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated"><a class="ae lm" href="https://github.com/jenkinsci/docker/issues/785" rel="noopener ugc nofollow" target="_blank">https://github.com/jenkinsci/docker/issues/785 </a></p><p id="5f2c" class="pw-post-body-paragraph kr ks in kt b ku ln kw kx ky lo la lb ke lp ld le ki lq lg lh km lr lj lk ll ig bi translated"><a class="ae lm" href="https://hub.docker.com/r/jenkins/jenkins/" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/r/jenkins/jenkins/</a></p></div></div>    
</body>
</html>