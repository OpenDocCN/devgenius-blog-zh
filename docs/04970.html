<html>
<head>
<title>Xdebug Laravel Sail project in VS Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">VS代码中的Xdebug Laravel Sail项目</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/xdebug-laravel-sail-project-in-vs-code-b7b73e3dedf7?source=collection_archive---------0-----------------------#2021-05-29">https://blog.devgenius.io/xdebug-laravel-sail-project-in-vs-code-b7b73e3dedf7?source=collection_archive---------0-----------------------#2021-05-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0389" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您不是PHP新手，您可能听说过Xdebug——一个PHP扩展，它为您提供了强大的调试和分析功能。</p><p id="9242" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">也许…你是<code class="fe ki kj kk kl b">dd()</code>、<code class="fe ki kj kk kl b">var_dump()</code>或<code class="fe ki kj kk kl b">print_r()</code>的粉丝，但是Xdebug为你提供了更强大的IDE工具来捕获讨厌的bug！(也许还能让你从不眠之夜中解脱出来)</p><p id="869d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我想你已经开始了你的项目。如果没有，你可以阅读<a class="ae km" href="https://dogcomp.medium.com/kickstart-your-laravel-web-app-using-laravel-sail-30276265e588" rel="noopener"> Kickstart你的Laravel Web App使用Laravel Sail </a>。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/cdc6abd913871c43d6faa6e7f7e67a78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uSIvSVS1AHZs-4X6e7blsw.png"/></div></div></figure><p id="11a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">遗憾的是，你不能选择直接添加Xdebug包，就像你在官方文档<a class="ae km" href="https://laravel.com/docs/8.x/installation#choosing-your-sail-services" rel="noopener ugc nofollow" target="_blank">中看到的那样。在</a><a class="ae km" href="https://github.com/laravel/sail/pull/48" rel="noopener ugc nofollow" target="_blank"> laravel/sail </a> repo中有一个关于Xdebug支持的争论；有兴趣的可以看看。</p><blockquote class="kz la lb"><p id="0a2c" class="jk jl lc jm b jn jo jp jq jr js jt ju ld jw jx jy le ka kb kc lf ke kf kg kh ig bi translated"><strong class="jm io">更新:</strong>Larave Sail的新版本(&gt; v1.9.0)包含了Xdebug 3.0。不过，如果你想定制你的<code class="fe ki kj kk kl b">Dockerfile</code>，还是可以按照教程来做。或者，你可以使用xDebug而不用定制你的docker镜像。</p></blockquote></div><div class="ab cl lg lh hr li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ig ih ii ij ik"><p id="4dce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是，它不能阻止你定制你的Docker容器！让我们一步步地将Xdebug添加到我们的项目中。</p><h1 id="7682" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">🐳编辑Docker配置</h1><p id="80e2" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated"><strong class="jm io"> 1。在我们开始之前确定你是T4。</strong></p><p id="0baa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2。</strong>执行<code class="fe ki kj kk kl b">sail artisan sail:publish</code>发布配置文件。<br/>你会看到<code class="fe ki kj kk kl b">docker</code>文件夹和<code class="fe ki kj kk kl b">docker-compose.yml</code>文件。</p><p id="ff07" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3。现在，当我们正在编辑docker配置文件时，您可以。</strong></p><p id="4d15" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4。</strong>增加<code class="fe ki kj kk kl b">docker-compose.yml</code>中Xdebug on/off开关(<code class="fe ki kj kk kl b">XDEBUG</code>)和端口号(<code class="fe ki kj kk kl b">XDEBUG_PORT</code>)的<strong class="jm io">行10 </strong> &amp; <strong class="jm io">行11 </strong>。您的<code class="fe ki kj kk kl b">.env</code>文件也应该将<code class="fe ki kj kk kl b">APP_DEBUG</code>设置为<code class="fe ki kj kk kl b">true</code>。</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">如果。env不包含变量，它们将回到右边的默认值。</figcaption></figure><p id="7544" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 5。</strong>接下来，我们编辑由<code class="fe ki kj kk kl b">docker-compose.yml</code>文件指向的<code class="fe ki kj kk kl b">Dockerfile</code>(<strong class="jm io">行6</strong>)——<code class="fe ki kj kk kl b">&lt;project root&gt;/docker/8.0/Dockerfile</code><br/>在<strong class="jm io">行44 </strong>下面添加这些行，就在<code class="fe ki kj kk kl b">RUN pecl channel-update</code>之前</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="787b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">6。使用<code class="fe ki kj kk kl b">sail up --build -d</code>重新组装&amp;你的容器</p><blockquote class="kz la lb"><p id="2060" class="jk jl lc jm b jn jo jp jq jr js jt ju ld jw jx jy le ka kb kc lf ke kf kg kh ig bi translated">可以用<code class="fe ki kj kk kl b">sail build --no-cache</code>重建，重建后用<code class="fe ki kj kk kl b">sail up -d</code>。</p></blockquote><p id="69fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">7.使用<code class="fe ki kj kk kl b">sail php -v</code>成功安装测试Xdebug</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/7ce505df774ef0acbc736b7ce0132d48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*sgTFyLB75T77JeqpU1kRbg.png"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">Xdebug 3已安装</figcaption></figure><h1 id="fac6" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">🌟使用Laravel Sail提供的现成Xdebug</h1><p id="98d5" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated"><strong class="jm io"> 1。使用<code class="fe ki kj kk kl b">sail php -v</code>确保包含Xdebug</strong></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/61472e16a72f7ad6b97b51e2b75a3e7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*BfaWOfWn-EigvWax1AYVzA.png"/></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">Xdebug 3附带Laravel Sail ( &gt; v1.9.0)</figcaption></figure><p id="6287" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2。</strong>在<code class="fe ki kj kk kl b">.env</code>文件中添加<code class="fe ki kj kk kl b">SAIL_XDEBUG_MODE=develop,debug</code></p><p id="2ed0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3。</strong> <code class="fe ki kj kk kl b">sail down</code>然后<code class="fe ki kj kk kl b">sail up -d</code>应用配置</p><p id="4e94" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">📖<strong class="jm io"> <em class="lc">参考资料:Laravel官方文档:</em> </strong> <a class="ae km" href="https://laravel.com/docs/8.x/sail#debugging-with-xdebug" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lc">调试用Xdebug </em> </strong> </a></p><h1 id="65d2" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">💾配置VS代码</h1><p id="9b4e" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated"><strong class="jm io"> 1。</strong>在终端用命令<code class="fe ki kj kk kl b">code .</code>启动VS代码。<br/>确保你的VS代码安装了<a class="ae km" href="https://marketplace.visualstudio.com/items?itemName=felixfbecker.php-debug" rel="noopener ugc nofollow" target="_blank"> PHP调试</a>扩展。</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi my"><img src="../Images/e77414c87f29b669f76335ce09a5dde9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V3bcWOAPf9GY9VgQSALNGw.png"/></div></div><figcaption class="ms mt gj gh gi mu mv bd b be z dk translated">点击“安装在WSL: Ubuntu中”</figcaption></figure><blockquote class="kz la lb"><p id="ccf6" class="jk jl lc jm b jn jo jp jq jr js jt ju ld jw jx jy le ka kb kc lf ke kf kg kh ig bi translated"><em class="in">💡</em>对于有用的扩展，请看一下<a class="ae km" href="https://dogcomp.medium.com/here-is-my-vs-code-for-laravel-2021-6e816d997607" rel="noopener">这里是我的VS代码为Laravel【2021】</a></p></blockquote><p id="c41f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2。</strong>点击<strong class="jm io">运行</strong> &gt; <strong class="jm io">添加配置</strong></p><blockquote class="kz la lb"><p id="4712" class="jk jl lc jm b jn jo jp jq jr js jt ju ld jw jx jy le ka kb kc lf ke kf kg kh ig bi translated">或者，<strong class="jm io"> Ctrl + Shift + D </strong> &gt; <strong class="jm io">创建一个launch.json文件</strong></p></blockquote><p id="dadd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3。</strong>选择<strong class="jm io"> PHP </strong></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/26052d00f21ecf47d7ffeec8aac9af21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*wLsFMr5DaqItdbY5yUTlsQ.png"/></div></figure><p id="41c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4 </strong>。你可以看到两个默认的<code class="fe ki kj kk kl b">configurations</code>，就像下面这样替换它们</p><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="mq mr l"/></div></figure><h1 id="5092" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">🐛开始调试！</h1><p id="3869" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated"><strong class="jm io"> 1。</strong>点击行号左侧设置断点</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi na"><img src="../Images/3b99126f15a792f66ec11e6a2877d44c.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*ewRXP12FHQSBaDar_Z-mbQ.png"/></div></figure><p id="a4cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2。</strong>点击<strong class="jm io"> F5 </strong> ( <strong class="jm io">运行</strong> &gt; <strong class="jm io">开始调试</strong>)</p><p id="aa09" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3。</strong>输入触发控制器的路线</p><p id="5eaa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4。</strong>安装<a class="ae km" href="https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc" rel="noopener ugc nofollow" target="_blank"> Xdebug助手扩展</a> (Chrome)</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/3a53943004572b4c46f434ef52f4bfca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*RhzTlgBvTOXAU1EFSTcG5A.png"/></div></figure><p id="b19d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 5。</strong>想抓虫子的时候就启用吧！</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/975d56ce10d615a9d08773cde578c394.png" data-original-src="https://miro.medium.com/v2/resize:fit:276/format:webp/1*DvCPf6gr1GijxmrFxmdEvA.png"/></div></figure><p id="e938" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 6。</strong>您现在可以调试了！</p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi nd"><img src="../Images/5616753809e2e34dd41fda2262372072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*FP3LAoT7zROTvjBM9dCYPw.gif"/></div></div></figure><p id="506e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您遇到任何问题，请随时在下面留下评论！</p></div></div>    
</body>
</html>