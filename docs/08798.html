<html>
<head>
<title>Ansible troubleshooting — Destination does not exist rc 257</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可行的故障排除—目的地不存在 rc 257</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ansible-troubleshooting-destination-does-not-exist-rc-257-4679eb5d0b72?source=collection_archive---------13-----------------------#2022-07-11">https://blog.devgenius.io/ansible-troubleshooting-destination-does-not-exist-rc-257-4679eb5d0b72?source=collection_archive---------13-----------------------#2022-07-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ab18" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何解决错误“目标不存在”，返回代码 257 使用 Ansible lineinfile 模块为 SSH 启用 PasswordAuthentication。</h2></div><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="kk kl l"/></div></figure><p id="e8b3" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">今天我们将讨论 Ansible 故障排除，特别是关于“目的地不存在”消息，“返回代码 257”。</p><p id="1793" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">当我们试图编辑目标文件系统上不存在的文件时，会出现这个致命的错误消息。根本原因可能是文件拼写错误或根本不存在。</p><p id="bf3f" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这些情况通常与可行的剧本或可行的配置有关。</p><p id="b7f5" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我是卢卡·伯尔顿，欢迎来到今天的《神秘飞行员》节目。</p><h1 id="5e2b" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">演示</h1><p id="2f69" class="pw-post-body-paragraph km kn iq ko b kp ma jr kr ks mb ju ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">谈论 Ansible 故障排除的最佳方式是进行现场演示，向您实际展示“目的地不存在”，返回代码 257，以及如何解决它！</p><p id="c3d2" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这个演示将尝试在我们的目标系统上编辑一个拼写错误的配置文件“/etc/ssh/sshd_config”。</p><h2 id="2715" class="mf lj iq bd lk mg mh dn lo mi mj dp ls kv mk ml lu kz mm mn lw ld mo mp ly mq bi translated">错误代码</h2><pre class="kf kg kh ki gt mr ms mt mu aw mv bi"><span id="b9e3" class="mf lj iq ms b gy mw mx l my mz">---<br/>- name: PasswordAuthentication enabled<br/>  hosts: all<br/>  become: true<br/>  gather_facts: false<br/>  tasks:<br/>    - name: ssh PasswordAuthentication<br/>      ansible.builtin.lineinfile:<br/>        dest: <strong class="ms ir">/etc/ssh/sshd_config2</strong><br/>        regexp: '^PasswordAuthentication'<br/>        line: "PasswordAuthentication yes"<br/>        state: present<br/>      notify: ssh restart</span><span id="490a" class="mf lj iq ms b gy na mx l my mz">  handlers:<br/>    - name: ssh restart<br/>      ansible.builtin.service:<br/>        name: sshd<br/>        state: restarted</span></pre><h2 id="2b25" class="mf lj iq bd lk mg mh dn lo mi mj dp ls kv mk ml lu kz mm mn lw ld mo mp ly mq bi translated">错误执行</h2><pre class="kf kg kh ki gt mr ms mt mu aw mv bi"><span id="4b83" class="mf lj iq ms b gy mw mx l my mz">$ ansible-playbook -i virtualmachines/demo/inventory edit\ single-line\ text/enable_password_auth.yml</span><span id="5a72" class="mf lj iq ms b gy na mx l my mz">PLAY [PasswordAuthentication enabled] *************************************************************</span><span id="daef" class="mf lj iq ms b gy na mx l my mz">TASK [ssh PasswordAuthentication] *****************************************************************<br/>fatal: [demo.example.com]: FAILED! =&gt; {"ansible_facts": {"discovered_interpreter_python": "/usr/libexec/platform-python"}, "changed": false, "msg": "Destination <strong class="ms ir">/etc/ssh/sshad_config2</strong> does not exist !", "rc": 257}</span><span id="461e" class="mf lj iq ms b gy na mx l my mz">PLAY RECAP ****************************************************************************************<br/>demo.example.com           : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0</span></pre><h2 id="2df7" class="mf lj iq bd lk mg mh dn lo mi mj dp ls kv mk ml lu kz mm mn lw ld mo mp ly mq bi translated">修复代码</h2><pre class="kf kg kh ki gt mr ms mt mu aw mv bi"><span id="411f" class="mf lj iq ms b gy mw mx l my mz">---<br/>- name: PasswordAuthentication enabled<br/>  hosts: all<br/>  become: true<br/>  gather_facts: false<br/>  tasks:<br/>    - name: ssh PasswordAuthentication<br/>      ansible.builtin.lineinfile:<br/>        dest: <strong class="ms ir">/etc/ssh/sshd_config</strong><br/>        regexp: '^PasswordAuthentication'<br/>        line: "PasswordAuthentication yes"<br/>        state: present<br/>      notify: ssh restart</span><span id="b7f7" class="mf lj iq ms b gy na mx l my mz">   handlers:<br/>    - name: ssh restart<br/>      ansible.builtin.service:<br/>        name: sshd<br/>        state: restarted</span></pre><h2 id="80f3" class="mf lj iq bd lk mg mh dn lo mi mj dp ls kv mk ml lu kz mm mn lw ld mo mp ly mq bi translated">修复执行</h2><pre class="kf kg kh ki gt mr ms mt mu aw mv bi"><span id="82ec" class="mf lj iq ms b gy mw mx l my mz">$ ansible-playbook -i virtualmachines/demo/inventory edit\ single-line\ text/enable_password_auth.yml</span><span id="3ce0" class="mf lj iq ms b gy na mx l my mz">PLAY [PasswordAuthentication enabled] *************************************************************</span><span id="d5cc" class="mf lj iq ms b gy na mx l my mz">TASK [ssh PasswordAuthentication] *****************************************************************<br/>changed: [demo.example.com]</span><span id="1874" class="mf lj iq ms b gy na mx l my mz">RUNNING HANDLER [ssh restart] *********************************************************************<br/>changed: [demo.example.com]</span><span id="6042" class="mf lj iq ms b gy na mx l my mz">PLAY RECAP ****************************************************************************************<br/>demo.example.com           : ok=2    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span></pre><h2 id="1c77" class="mf lj iq bd lk mg mh dn lo mi mj dp ls kv mk ml lu kz mm mn lw ld mo mp ly mq bi translated">确认</h2><pre class="kf kg kh ki gt mr ms mt mu aw mv bi"><span id="9d66" class="mf lj iq ms b gy mw mx l my mz">$ ssh <a class="ae nb" href="mailto:devops@demo.example.com" rel="noopener ugc nofollow" target="_blank">devops@demo.example.com</a><br/>[devops@demo ~]$ sudo su<br/>[root@demo devops]# grep 'PasswordAuthentication yes' /etc/ssh/sshd_config <br/>#PasswordAuthentication yes<br/>PasswordAuthentication yes<br/>[root@demo devops]# systemctl status sshd<br/>● sshd.service - OpenSSH server daemon<br/>   Loaded: loaded (/usr/lib/systemd/system/sshd.service; enabled; vendor preset: enabled)<br/>   Active: active (running) since Mon 2022-07-11 08:49:05 UTC; 56s ago<br/>     Docs: man:sshd(8)<br/>           man:sshd_config(5)<br/> Main PID: 5106 (sshd)<br/>    Tasks: 1 (limit: 4952)<br/>   Memory: 2.8M<br/>   CGroup: /system.slice/sshd.service<br/>           └─5106 /usr/sbin/sshd -D -u0 -<a class="ae nb" href="mailto:oCiphers=aes256-gcm@openssh.com" rel="noopener ugc nofollow" target="_blank">oCiphers=aes256-gcm@openssh.com</a>,chacha20-poly1305@openssh&gt;</span><span id="ee8e" class="mf lj iq ms b gy na mx l my mz">Jul 11 08:49:05 demo.example.com systemd[1]: sshd.service: Succeeded.<br/>Jul 11 08:49:05 demo.example.com systemd[1]: Stopped OpenSSH server daemon.<br/>Jul 11 08:49:05 demo.example.com systemd[1]: Starting OpenSSH server daemon...<br/>Jul 11 08:49:05 demo.example.com sshd[5106]: Server listening on 0.0.0.0 port 22.<br/>Jul 11 08:49:05 demo.example.com sshd[5106]: Server listening on :: port 22.<br/>Jul 11 08:49:05 demo.example.com systemd[1]: Started OpenSSH server daemon.<br/>Jul 11 08:49:29 demo.example.com sshd[5123]: Accepted publickey for devops from 192.168.43.5 port &gt;<br/>Jul 11 08:49:29 demo.example.com sshd[5123]: pam_unix(sshd:session): session opened for user devop&gt;<br/>[root@demo devops]#</span></pre><div class="nc nd gp gr ne nf"><a href="https://github.com/lucab85/ansible-pilot" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">GitHub-lucab 85/ansi ble-Pilot:ansi ble Pilot YouTube 频道代码库</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">github.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt nu nf"/></div></div></a></div><h1 id="8c91" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">概述</h1><p id="bfd7" class="pw-post-body-paragraph km kn iq ko b kp ma jr kr ks mb ju ku kv mc kx ky kz md lb lc ld me lf lg lh ij bi translated">现在您更好地了解了如何对 ansi ble“Destination is not exist”消息(返回代码 257)进行故障诊断。</p><p id="43bc" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我希望你喜欢读这篇文章。如果你愿意支持我成为一名作家，考虑注册<a class="ae nb" href="https://ansiblepilot.medium.com/membership" rel="noopener">成为一名媒体成员</a>。每月只需 5 美元，你就可以无限制地使用 Medium。</p><p id="b51e" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">订阅<a class="ae nb" href="https://www.youtube.com/channel/UC5MNbTYRHSCu9vAki3z9SmA" rel="noopener ugc nofollow" target="_blank"> YouTube 频道</a>、<a class="ae nb" href="https://ansiblepilot.medium.com/" rel="noopener"> Medium </a>和<a class="ae nb" href="https://www.ansiblepilot.com/" rel="noopener ugc nofollow" target="_blank">网站</a>，不要错过 Ansible 试播的下一集。</p><h1 id="7152" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">Ansible 的最佳资源</h1><h1 id="84c8" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">视频课程</h1><ul class=""><li id="8336" class="nv nw iq ko b kp ma ks mb kv nx kz ny ld nz lh oa ob oc od bi translated"><a class="ae nb" href="https://www.udemy.com/course/ansible-by-examples-devops/?referralCode=8E065F6D6F8622A3DEC8" rel="noopener ugc nofollow" target="_blank">通过 200 多个示例学习 Ansible Automation&amp;实践课程:通过一些真实的例子学习 Ansible，了解如何使用最常见的模块和 ansi ble 行动手册</a></li></ul><h1 id="20b2" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">书</h1><ul class=""><li id="1e57" class="nv nw iq ko b kp ma ks mb kv nx kz ny ld nz lh oa ob oc od bi translated"><a class="ae nb" href="https://leanpub.com/ansiblebyexamples" rel="noopener ugc nofollow" target="_blank">可通过示例回答:针对 Linux 和 Windows 系统管理员和开发人员的 200 多个自动化示例</a></li><li id="1304" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B09VCTP1L4" rel="noopener ugc nofollow" target="_blank">适用于 Windows 的示例:针对 Windows 系统管理员和开发人员的 30 多个自动化示例</a></li><li id="1d80" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B09VCX4CVD" rel="noopener ugc nofollow" target="_blank">ansi ble For Linux by Examples:100 多个针对 Linux 系统管理员和开发人员的自动化示例</a></li><li id="b26c" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B09X4TF8P8" rel="noopener ugc nofollow" target="_blank"> Ansible Linux 文件系统示例:30 多个针对现代 IT 基础设施的 Linux 文件和目录操作自动化示例</a></li><li id="4ea7" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B09XVDWD4W" rel="noopener ugc nofollow" target="_blank">通过示例负责容器和 Kubernetes:10 多个自动化示例来自动化容器、Kubernetes 和 OpenShift </a></li><li id="821a" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B09VHFLSPP" rel="noopener ugc nofollow" target="_blank">负责安全示例:100 多个自动化示例，用于自动化现代 IT 基础设施的安全和验证合规性</a></li><li id="16fc" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B09ZJ4GYM2" rel="noopener ugc nofollow" target="_blank">可行的技巧和窍门:10 多个可行的例子来节省时间和自动化更多的任务</a></li><li id="c3e5" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B09X6BYY8W" rel="noopener ugc nofollow" target="_blank"> Ansible Linux 用户&amp;按示例分组:20 多个关于现代 IT 基础设施的 Linux 用户和分组操作的自动化示例</a></li><li id="c920" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B0B18QG44S" rel="noopener ugc nofollow" target="_blank">ansi ble For VMware by Examples:10 多个自动化您的 VMware 基础架构的示例(Ansible by Examples) </a></li><li id="98c3" class="nv nw iq ko b kp oe ks of kv og kz oh ld oi lh oa ob oc od bi translated"><a class="ae nb" href="https://www.amazon.com/dp/B0B3RZZQVG" rel="noopener ugc nofollow" target="_blank">Ansible For PostgreSQL by Examples:10 多个自动化 PostgreSQL 数据库的示例</a></li></ul><h1 id="2b07" class="li lj iq bd lk ll lm ln lo lp lq lr ls jw lt jx lu jz lv ka lw kc lx kd ly lz bi translated">捐赠</h1><div class="nc nd gp gr ne nf"><a href="https://patreon.com/lucaberton" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">卢卡·伯尔顿正在为 Ansible | Patreon 创建软件开源</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">今天就成为卢卡·伯尔顿的赞助人:获得世界上最大会员的独家内容和体验…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">patreon.com</p></div></div><div class="no l"><div class="oj l nq nr ns no nt nu nf"/></div></div></a></div><div class="nc nd gp gr ne nf"><a href="https://github.com/sponsors/lucab85" rel="noopener  ugc nofollow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">GitHub 赞助商上的赞助商@lucab85</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">我是一个活跃的开源贡献者，参与到了 Ansible 社区中，尽管我到处都是。@lucab85 的…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">github.com</p></div></div><div class="no l"><div class="ok l nq nr ns no nt nu nf"/></div></div></a></div><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="om on di oo bf op"><div class="gh gi ol"><img src="../Images/376f5c3eb35945e4fb9ac55ff704fe0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFlv9HxVRtkyHFyfaAbJZg.png"/></div></div></figure></div></div>    
</body>
</html>