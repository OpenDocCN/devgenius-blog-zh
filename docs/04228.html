<html>
<head>
<title>Pandas Datetime objects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫日期时间对象</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/pandas-and-dates-be3e67931e6b?source=collection_archive---------7-----------------------#2021-02-12">https://blog.devgenius.io/pandas-and-dates-be3e67931e6b?source=collection_archive---------7-----------------------#2021-02-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="471d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何选择熊猫日期时间对象</h2></div><p id="e0b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Pandas 是用于数据分析和操作的最常用的 Python 库。基本的熊猫实体是一个数据框。这篇文章研究了我们如何处理数据框架中的日期。我们着眼于可能的混淆点及其解决方案。</p><p id="a72a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我写了另一篇文章，研究了熊猫的时间序列数据。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/ad21bd05e8adc798290e9a04cdcd7fb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PXRuoPqoyEWEh2nr"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">熊猫电子表格(由<a class="ae lb" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马库斯·斯皮斯克</a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄)</figcaption></figure><h2 id="1013" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">使用 Python 日期时间加载熊猫数据框</h2><p id="c601" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">当我们加载数据帧时，无论是通过<strong class="kh ir"> <em class="mq"> read_csv </em> </strong>还是<strong class="kh ir"> <em class="mq"> read_excel </em> </strong>，我们都可以指定哪个字段包含日期，以便可以立即将字符串解析为 datetime 对象。我们用属性<strong class="kh ir"> <em class="mq"> parse_dates </em> </strong>来做这件事。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">加载熊猫数据框</figcaption></figure><p id="2de9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将把列的值转换为 datetime 对象。该操作假设日期是以<strong class="kh ir"> ISO 8601 </strong>日期格式(YYYY-MM-DD)或类似格式书写的，即月份在日期之前。让我们看看这个属性是如何导致我们出错的。</p><pre class="ld le lf lg gt mt mu mv mw aw mx bi"><span id="47ca" class="ls lt iq mu b gy my mz l na nb">0 07/09/2020 </span><span id="10b2" class="ls lt iq mu b gy nc mz l na nb">1 09/10/2020 </span><span id="9a99" class="ls lt iq mu b gy nc mz l na nb">2 05/11/2020 </span><span id="2949" class="ls lt iq mu b gy nc mz l na nb">3 06/11/2020 </span><span id="26a8" class="ls lt iq mu b gy nc mz l na nb">4 22/11/2020</span></pre><p id="6177" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些是解析之前的日期的文本值。在前 4 行中，第一个值小于 12，这意味着它可以表示一个月的值。然而，在第五行中，我们看到第一个值是 22，因此我们最初的理解是错误的。第一个值是日，这意味着我们需要调整预期的日期格式。如果观察到的行中没有一行包含任何大于 12 的值，那么这个例子可能会特别棘手，在这种情况下，您可能甚至没有注意到解析是以错误的顺序进行的。因此，如果有一个日期优先的格式，应该将属性<strong class="kh ir"> dayfirst </strong>设置为 true。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">使用 Python 日期时间解析加载 pandas 数据框</figcaption></figure><p id="01b9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果数据格式完全不同，您可以通过设置属性<strong class="kh ir"> date_parser </strong>来定义一个自定义解析器。</p><h2 id="2f8a" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">基于 Python 日期的过滤</h2><p id="678e" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">假设我们想从足球数据集中过滤掉 2 月 7 日的所有比赛。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">将 Python 日期时间与字符串进行比较</figcaption></figure><p id="ae7c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个命令完成了工作，但是让我们看看需要不同类型命令的情况。如果我们有一个包含小时和分钟信息的 datetime 字段，上面的例子就不会起作用。</p><p id="253a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要将<strong class="kh ir">日期时间</strong>对象的日期属性与一个新的<strong class="kh ir">日期时间</strong>对象进行比较。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">与 Python 日期时间对象中的特定日期进行比较</figcaption></figure><p id="7f0f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以进行比较，以筛选出特定年、月、周或日的所有示例。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk translated">将 Python 日期时间与特定月份进行比较</figcaption></figure><h2 id="6a07" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">更多熊猫日期时间操作</h2><p id="aaa1" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">知道如何在熊猫数据框中使用日期可以证明是非常宝贵的。将来，我们将看一些例子，在这些例子中，我们可以使用日期时间作为时间序列的索引。</p></div></div>    
</body>
</html>