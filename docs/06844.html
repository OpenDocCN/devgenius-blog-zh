<html>
<head>
<title>SwiftUI Tutorial: Working with Sheet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI 教程:使用工作表</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/swiftui-tutorial-working-with-sheet-6c9b97822e10?source=collection_archive---------12-----------------------#2022-02-07">https://blog.devgenius.io/swiftui-tutorial-working-with-sheet-6c9b97822e10?source=collection_archive---------12-----------------------#2022-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1d2d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何使用工作表显示模态视图</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9b196982b7203001e1bd31755a754bff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGDukDqvnCGaZac1Yr9NHQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图一。</figcaption></figure><p id="1957" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">SwiftUI 中的 Sheet modifier 用于在当前视图上弹出一个新视图，但仍可拖动以关闭。</p><blockquote class="lr ls lt"><p id="c423" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated"><em class="iq">本文是我的</em> <a class="ae ly" href="https://arc-sosangyo.medium.com/list/swiftui-tutorial-03734e631240" rel="noopener"> <em class="iq"> SwiftUI 教程</em> </a> <em class="iq">系列的一部分。</em></p></blockquote><p id="4a7c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们将制作一个简单的应用程序，当按钮被按下时，它将显示一个模态视图。然后我们可以在弹出的新视图中写下一些东西。内容也会出现在我们的主视图上。所以让我们开始吧。</p><p id="c677" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，让我们创建将弹出的工作表视图。在 ContentView 之外写下这段代码:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="bd38" class="me mf iq ma b gy mg mh l mi mj">struct SheetView: View {<br/>    <br/>    @Binding var mainText: String<br/>    <br/>    var body: some View {<br/>        <br/>        TextEditor(text: $mainText)<br/>            .padding()<br/>        <br/>    } //body<br/>    <br/>} //SheetView</span></pre><p id="b291" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">SheetView 包含一个<a class="ae ly" href="https://medium.com/geekculture/swiftui-tutorial-working-with-texteditor-a059eb899084" rel="noopener"><em class="lu">text editor</em></a><em class="lu"/>，我们将在其中输入一些字符串。那么它将被绑定到 ContentView。</p><p id="cfed" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，我们将创建一个浮动的动作按钮<a class="ae ly" href="https://medium.com/dev-genius/swiftui-tutorial-how-to-make-a-floating-action-button-fab-867d3183375" rel="noopener"> fab </a>，作为显示工作表的触发器。在 ContentView 之外写下这段代码:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="55a5" class="me mf iq ma b gy mg mh l mi mj">struct newNoteButton: View {<br/>    <br/>    var action: () -&gt; Void<br/>    <br/>    var body: some View {<br/>        Button(action: action) {<br/>            Image(systemName: "square.and.pencil")<br/>                .resizable()<br/>                .scaledToFill()<br/>                .frame(width: 50, height: 50)<br/>                .padding(30)<br/>        }<br/>        .background(.blue)<br/>        .foregroundColor(.white)<br/>        .cornerRadius(.infinity)<br/>        .padding()<br/>    }<br/>    <br/>}</span></pre><p id="336a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因为我们的外部结构已经创建。是时候编写内容视图了。</p><p id="a41f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该应用程序的功能是将字符串从工作表视图传递到主视图。所以让我们创建一个状态变量来处理这个值。在 ContentView 中编写以下代码:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="089a" class="me mf iq ma b gy mg mh l mi mj">@State private var mainText: String = ""</span></pre><p id="6ff5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来是 UI。像这样修改 ContentView 的主体:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="8587" class="me mf iq ma b gy mg mh l mi mj">var body: some View {<br/><br/>    ZStack(alignment: .bottom) {<br/><br/>        ScrollView {<br/>            Text(mainText)<br/>                .padding()<br/>        }<br/>        <br/>        newNoteButton {</span><span id="90c3" class="me mf iq ma b gy mk mh l mi mj">        }<br/><br/>    } //ZStack<br/><br/>} //body</span></pre><p id="c578" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在用户界面看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/7c12f44d34c665d84ce905ba79750756.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*c1Q5dlc2McCwlVOtyfsgxg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图二。实践应用程序用户界面</figcaption></figure><h1 id="ab27" class="mm mf iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">如何让一张表发挥作用？</h1><p id="30d5" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">要使工作表工作，需要一个<a class="ae ly" href="https://medium.com/geekculture/swiftui-tutorial-state-and-binding-b7e80b4de622" rel="noopener">状态</a>变量<a class="ae ly" href="https://arc-sosangyo.medium.com/swift-programming-tutorial-variables-670ceea20bd1" rel="noopener">来存储显示和不显示状态。因此，它将是一个布尔类型，将绑定传递给的<em class="lu"> isPresented </em>参数。<em class="lu">纸张</em>修改者。在 ContentView 中写下以下代码:</a></p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="4867" class="me mf iq ma b gy mg mh l mi mj">@State private var showSheet: Bool = false</span></pre><p id="e94a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还没有一个<em class="lu">工作表</em>修改器。它将被固定在<a class="ae ly" href="https://medium.com/better-programming/swiftui-tutorial-working-with-stacks-vstack-hstack-and-zstack-2b0070be18d7" rel="noopener"> ZStack </a>上，这样它就能为其内部的每个视图固定板材。将此修改器附加到 ZStack 上:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="f2b6" class="me mf iq ma b gy mg mh l mi mj">.sheet(isPresented: $showSheet) {<br/>    SheetView(mainText: $mainText)<br/>}</span></pre><p id="761a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里发生的是 sheet 修饰符的参数被绑定到 showSheet 变量上。这将告诉修改器是否基于布尔值显示工作表。然后内部是我们放置 SheetView 的地方，它将会弹出。它的正文是相互绑定的。</p><p id="4aad" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们需要的最后一件事是将成为控件的切换。让我们把它放在我们先前创建的按钮中。</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="c0c1" class="me mf iq ma b gy mg mh l mi mj">newNoteButton {<br/>    showSheet.toggle()<br/>}</span></pre><p id="81a1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是源代码的截图，以防你迷失了方向:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/ac26028b7b0453b534e64a22cd59181f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*UOzc4vNnaRSI4AndLAUrcQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 3。内容视图源代码</figcaption></figure><p id="9949" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">立即运行应用程序。试着按下按钮。会出现一张纸，你可以在上面写些东西。向下滑动屏幕将关闭表单。您会注意到，无论您在 SheetView 上键入什么，都会出现在主视图上。</p><h1 id="f108" class="mm mf iq bd mn mo mp mq mr ms mt mu mv jw mw jx mx jz my ka mz kc na kd nb nc bi translated">创建解散按钮</h1><p id="231e" class="pw-post-body-paragraph kv kw iq kx b ky nd jr la lb ne ju ld le nf lg lh li ng lk ll lm nh lo lp lq ij bi translated">不是每个 iOS 用户都知道如何关闭表单(向下滑动)。让我们的应用程序尽可能的用户友好是我们的责任。因此，让我们以编程方式创建一个如下所示的“解散”按钮:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/afbc1a1fe4adb51a1e03ad286c14bc87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*dk0cYP5aML3soAUiLn9O6w.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 4。带有消除按钮的工作表</figcaption></figure><p id="85cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用相同的代码库，我们将修改<em class="lu"> SheetView。</em>我们首先需要的是从视图环境中读取值的东西。这将用于关闭纸张。在<em class="lu">工作表视图</em>中写下这个变量:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="1bc6" class="me mf iq ma b gy mg mh l mi mj">@Environment(\.dismiss) var dismiss</span></pre><p id="d4e2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">好歹做几个 UI 改进也不会差。在 SheetView 的主体中，使用 VStack 嵌入 TextEditor，如下所示:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="e869" class="me mf iq ma b gy mg mh l mi mj">var body: some View {<br/>    <br/>    VStack {<br/>        <br/>        TextEditor(text: $mainText)<br/>            .padding(.horizontal)<br/>        <br/>    } //VStack<br/>    <br/>} //body</span></pre><p id="dfb0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后在文本编辑器的上方是我们将要放置按钮的地方。我们希望按钮位于右侧，因此使用 Spacer()结构的 HStack 可以达到这个目的。将此代码放在 VStack 内 TextEditor 之上:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="a7e4" class="me mf iq ma b gy mg mh l mi mj">HStack {<br/>    <br/>    Spacer()<br/>    <br/>    Button(action: {<br/>        <br/>    }) {<br/>        Text("Done")<br/>    }<br/>    .padding()<br/>    <br/>} //HStack</span></pre><p id="3a8b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在按钮还没有任何动作。在按钮内部，放置我们之前编写的解散函数，如下所示:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="8c91" class="me mf iq ma b gy mg mh l mi mj">Button(action: {<br/>    dismiss()<br/>}) {<br/>    Text("Done")<br/>}<br/>.padding()</span></pre><p id="e528" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是源代码的截图，以防你迷路:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/fbb56cd48d17dff5ea39a4a4e37de633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*57T3iDkpnOo7NaXVeuAU1g.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 5。SheetView 的最终源代码</figcaption></figure><p id="d3d3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">运行应用程序。现在，您有了一个按钮，当按下该按钮时，它将执行消除功能。这个应用程序现在更加用户友好了。干得好！</p><p id="0340" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我在 github 上传了完整的源代码。点击这个<a class="ae ly" href="https://github.com/athurion/SwiftUI-Tutorial-Working-with-Sheet/blob/main/ContentViewSheet.swift" rel="noopener ugc nofollow" target="_blank">链接</a>就可以了。</p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="0cd9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">愿法典与你同在，</p><p id="07f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">-电弧</p></div></div>    
</body>
</html>