<html>
<head>
<title>Monitoring vs. Observability: Can You Tell The Difference?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">监控与可观察性:你能看出区别吗？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/monitoring-vs-observability-can-you-tell-the-difference-f29f855580e3?source=collection_archive---------1-----------------------#2021-01-28">https://blog.devgenius.io/monitoring-vs-observability-can-you-tell-the-difference-f29f855580e3?source=collection_archive---------1-----------------------#2021-01-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ab31" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你的监控系统能被观察到吗？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fc325a2261283f3dc99a5a627b7e1e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bIutOYmVmf2V4MzoFGY_Q.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://www.pexels.com/@scottwebb?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Scott Webb </a>从<a class="ae kv" href="https://www.pexels.com/photo/two-gray-bullet-security-cameras-430208/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a> | <a class="ae kv" href="https://www.annageller.com/disclosure" rel="noopener ugc nofollow" target="_blank">内容披露</a></figcaption></figure><p id="b702" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated">近年来，可观察性已经变得非常流行。现代 DevOps 范例鼓励通过合并自动化、基础设施即代码和敏捷开发来构建健壮的应用程序。为了评估 IT 系统的健康和“健壮性”，工程团队通常使用日志、度量和<a class="ae kv" href="https://en.wikipedia.org/wiki/Tracing_%28software%29" rel="noopener ugc nofollow" target="_blank">跟踪</a>，这些被各种开发工具用来促进可观察性。但是究竟什么是可观察性，它与监控有什么不同？</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="7937" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">维基百科对可观察性的定义</h1><blockquote class="na"><p id="7929" class="nb nc iq bd nd ne nf ng nh ni nj lr dk translated"><strong class="ak">“可观测性</strong>是一种度量标准，用于衡量系统的内部状态可以从其外部输出的知识中推断出来的程度。”— <a class="ae kv" href="https://en.wikipedia.org/wiki/Observability" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="c9ae" class="pw-post-body-paragraph kw kx iq ky b kz nk jr lb lc nl ju le lf nm lh li lj nn ll lm ln no lp lq lr ij bi translated">一个可观察的系统允许我们在不干扰甚至不与之互动的情况下评估系统如何工作。简单地通过查看系统的输出(<em class="np">如日志、度量、跟踪</em>)，我们可以评估这个系统的表现如何。</p><h1 id="47fa" class="mi mj iq bd mk ml nq mn mo mp nr mr ms jw ns jx mu jz nt ka mw kc nu kd my mz bi translated">监控与可观察性</h1><p id="8410" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">我所见过的关于监控和可观察性的最好解释之一是在线课程<em class="np">“在 AWS 上构建现代 Python 应用”，</em>由 AWS 的高级云技术专家 Morgan Willis 提供。</p><blockquote class="oa ob oc"><p id="a0bd" class="kw kx np ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated"><strong class="ky ir">监控是收集数据的行为</strong>。我们收集什么类型的数据，我们用这些数据做什么，以及这些数据是否容易分析或可用，则是另一回事。这就是可观察性发挥作用的地方。可观察性不是一个动词，也不是你做的事情。相反，<strong class="ky ir">可观测性</strong>更多的是系统的<strong class="ky ir">属性摩根·威利斯</strong></p></blockquote><p id="df7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按照这种解释，像<a class="ae kv" href="https://dashbird.io/blog/dashbird-vs-aws-cloudwatch/" rel="noopener ugc nofollow" target="_blank"> CloudWatch </a>或者 X 射线这样的工具，可以看作是监控或者追踪工具。它们允许我们收集有关系统的日志和指标，并发送有关错误和事件的警报。<strong class="ky ir">因此，监控是</strong> <strong class="ky ir">收集</strong> <strong class="ky ir">数据</strong>的活跃部分，这些数据将帮助我们评估我们系统的健康状况及其不同组件如何协同工作。一旦我们建立了持续收集日志、系统输出、指标和跟踪的监控，我们的<strong class="ky ir">系统就变得可观察</strong>。</p><p id="73ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一名数据工程师，我喜欢将监控视为 ETL(提取、转换、加载)的数据摄取部分——您从多个来源(<em class="np">日志、跟踪、指标</em>)收集数据，并将它们放入数据湖。一旦所有这些数据都可用，一个熟练的分析师就可以从这些数据中获得洞察力，并构建漂亮的仪表板来讲述这些数据所传达的故事。这就是可观察性部分——从收集的数据中获得洞察力。而<strong class="ky ir">可观察性平台</strong>如<a class="ae kv" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank">dash bird</a>T16】则扮演着熟练分析师的角色。它们为您提供了关于系统健康状况的可视化和洞察力。</p><p id="075f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">监控是可观察性的先决条件。我们不监控的系统是不可观察的。</p><h1 id="2057" class="mi mj iq bd mk ml nq mn mo mp nr mr ms jw ns jx mu jz nt ka mw kc nu kd my mz bi translated">举例说明可观察性和监控之间的区别</h1><h2 id="386b" class="og mj iq bd mk oh oi dn mo oj ok dp ms lf ol om mu lj on oo mw ln op oq my or bi translated">监视</h2><p id="1b45" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">监控的最终目的是通过<strong class="ky ir">主动收集</strong>错误日志和系统指标来控制系统的健康状况，然后利用这些来发出事故警报。这意味着:</p><ul class=""><li id="35ac" class="os ot iq ky b kz la lc ld lf ou lj ov ln ow lr ox oy oz pa bi translated">跟踪<strong class="ky ir">错误</strong>和<strong class="ky ir">一旦错误发生就向</strong>发出警报，</li><li id="2f93" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">跟踪关于<strong class="ky ir"> CPU 利用率</strong>或<strong class="ky ir">网络流量</strong>的<strong class="ky ir">指标</strong>以便稍后观察特定计算资源是否健康，</li><li id="4480" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">通过警告、警报和通知对<strong class="ky ir">中断</strong>和<strong class="ky ir">安全事故</strong>做出反应。</li></ul><p id="f0b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管监控是一个主动的过程，但当我们使用 CloudWatch 或 X-Ray 时，AWS 会自动完成这项工作。</p><h2 id="885e" class="og mj iq bd mk oh oi dn mo oj ok dp ms lf ol om mu lj on oo mw ln op oq my or bi translated">可观察性</h2><p id="3669" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">可观察性的目的是<strong class="ky ir">使用系统的输出</strong> <strong class="ky ir">来收集见解并对其采取行动</strong>。示例:</p><ul class=""><li id="d0ec" class="os ot iq ky b kz la lc ld lf ou lj ov ln ow lr ox oy oz pa bi translated">确定所有函数或容器调用的错误百分比，</li><li id="cd45" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">通过观察显示单个函数调用之间的延迟和组件之间的转换的轨迹，识别微服务中的瓶颈。</li><li id="01ae" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">识别错误或瓶颈发生时的<strong class="ky ir">模式</strong>,并使用洞察采取行动，以防止将来出现这种情况。</li><li id="ef1e" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">测量和评估整个应用程序的<strong class="ky ir">性能</strong>，</li><li id="7200" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">识别<strong class="ky ir">冷启动</strong>，</li><li id="6796" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">确定您的应用程序消耗了多少内存，</li><li id="24a1" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">确定您的代码何时运行以及运行多长时间，</li><li id="e238" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">确定每个特定资源发生了多少<strong class="ky ir">成本</strong>，</li><li id="b792" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">识别<strong class="ky ir">异常值</strong> —例如。比平常花费更多时间的特定函数调用，</li><li id="d15f" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">确定一个组件的<strong class="ky ir">变化</strong>如何影响系统的其他部分，</li><li id="b975" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">识别并排除流经我们微服务的<strong class="ky ir">流量流</strong>，</li><li id="8ef2" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">确定<strong class="ky ir">系统在一段时间内如何执行</strong>——每天、每周或每月<strong class="ky ir">我们会看到多少次对每个函数的调用</strong>，其中有多少次是成功的。</li></ul></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="0215" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">无服务器微服务的可观测性</h1><p id="9157" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">尽管无服务器微服务在解耦、减少单个组件之间的依赖性以及整体更快的开发周期方面提供了无数的好处，但最大的挑战是<strong class="ky ir">确保所有那些小的“移动部件”一起良好地工作</strong>。通过手动查找分散在不同云服务中的日志、指标和跟踪来跟踪所有微服务是非常不切实际的，甚至是不可能的。</p><p id="5f92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在查看 AWS 时，您必须去 AWS 查看日志，找到您的 Lambda 函数的日志组，然后找到您真正感兴趣的日志。然后，要查看相应的 API 跟踪，您可以使用 X-Ray 或 CloudTrail，再次搜索可能有数百个组件，以找到您想要研究的组件。如您所见，查找和访问每个组件的日志和跟踪非常耗时。此外，调试单个部件并不能让您对这些组件如何协同工作有一个“宏观”的了解。</p><p id="d810" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着微服务架构的不断发展，我们需要一种更简单(<em class="np">自动化</em>)的方式来增加无服务器生态系统的可观察性。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="cd09" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">Twitter 是如何做到的？</h1><p id="815e" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">这里有一个我们都太熟悉的服务的例子——Twitter。正如你可能想象的那样，像 Twitter 这样的产品有很多活动部件，当某个部件出现故障时，很难理解为什么会出现问题或者 T2 是什么导致了问题。想象一下，有 3.5 亿活跃用户通过你的系统相互交流，发微博、点赞、发微博、转发等等。当处理成千上万个彼此异步通信的小服务时，<strong class="ky ir">越来越难以找到错误的根本原因</strong>，比如为什么一条推文没有被发布，或者为什么一条消息比平时花了更长的时间才被传递。Twitter 写了他们在 2013 年迁移到微服务，你可以在这里找到帖子<a class="ae kv" href="https://blog.twitter.com/engineering/en_us/a/2013/observability-at-twitter.html" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="faf6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着分布式系统或微服务的规模化，<strong class="ky ir">可观察性成为一种必要</strong>。你需要一个为你提供正确信息的系统来采取行动。Twitter 的可观察性系统非常庞大，花了数年时间才发展成今天这样运转良好的机器。</p><blockquote class="oa ob oc"><p id="2553" class="kw kx np ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated">“我们的时间序列指标接收服务每分钟处理超过 28 亿个写请求，存储 4.5 的时间序列数据，每分钟处理 25，000 个查询请求。”<em class="iq"> — Antony Asta 在 2016 年发表的关于他们的可观测性系统的范围—更多信息，参见第</em> <a class="ae kv" href="https://blog.twitter.com/engineering/en_us/a/2016/observability-at-twitter-technical-overview-part-i.html" rel="noopener ugc nofollow" target="_blank"> <em class="iq">部分一</em> </a> <em class="iq">和第</em> <a class="ae kv" href="https://blog.twitter.com/engineering/en_us/a/2016/observability-at-twitter-technical-overview-part-ii.html" rel="noopener ugc nofollow" target="_blank"> <em class="iq">部分二</em> </a> <em class="iq">。</em></p></blockquote></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="d892" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">无服务器的可观测性平台能有什么帮助？</h1><p id="e2d6" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">可以理解的是，并不是所有的企业都有 Twitter 的规模，他们可能没有资源和时间来建立自己的可观察性系统。所以，我想演示一个简单直观的可观测性平台。只需 2 分钟的设置，你就可以注册<a class="ae kv" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>并立即为你的无服务器 AWS 架构添加可观察性。您的 AWS 帐户中的每个无服务器组件(您在其上启用了 CloudWatch 日志和 X 射线或 CloudTrail 跟踪)都将被这些工具自动<strong class="ky ir">监控</strong>。但是在你对这些收集到的数据做些什么之前，还看不到它。</p><p id="c4f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Dashbird 的真正好处是它<strong class="ky ir">不需要</strong>任何代码更改，也不需要<strong class="ky ir">你方的任何努力</strong>——它只需要<strong class="ky ir">使用已经存在的数据</strong>，也就是说，你已经通过为此目的设计的 AWS 原生服务启用了监控的数据。</p><p id="ff79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">作为一个可观察性平台，Dashbird 允许您在讨论从可观察系统收集的洞察示例时完成所有要点:</p><ul class=""><li id="1afe" class="os ot iq ky b kz la lc ld lf ou lj ov ln ow lr ox oy oz pa bi translated">当<strong class="ky ir">事件、冷启动、</strong>和<strong class="ky ir">错误</strong>发生时，通过自定义<strong class="ky ir">报警、</strong>得到通知</li><li id="0181" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">观察所有调用的<strong class="ky ir">错误百分比</strong>并识别潜在的异常值，</li><li id="0e0e" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">找出您的应用程序消耗了多少内存，以及您的代码何时运行以及运行多长时间，</li><li id="0dda" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">确定每个特定资源发生了多少成本，</li><li id="da0d" class="os ot iq ky b kz pb lc pc lf pd lj pe ln pf lr ox oy oz pa bi translated">…还有更多。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pg"><img src="../Images/0fa5442f0c5cde9842dc93a559f010e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fpQJprqy5BkShgrp66Y_Dw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Dashbird 项目视图—图片由作者提供</figcaption></figure></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h1 id="7d2f" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">结论</h1><p id="0c58" class="pw-post-body-paragraph kw kx iq ky b kz nv jr lb lc nw ju le lf nx lh li lj ny ll lm ln nz lp lq lr ij bi translated">虽然监控工具允许您收集应用程序日志以及关于资源利用和网络流量的指标，或者对特定服务的 HTTP 请求的跟踪，但可观察性是系统的一个<strong class="ky ir">属性，它分析并可视化收集的数据，</strong>从而允许您通过收集关于底层系统的见解来改进应用程序的生命周期。</p><p id="c8a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">资源:</strong></p><p id="33ed" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[1] <a class="ae kv" href="https://en.wikipedia.org/wiki/Observability" rel="noopener ugc nofollow" target="_blank">维基百科</a></p><p id="5314" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[2]“在 AWS 上构建现代 Python 应用程序”<em class="np"> — </em> <a class="ae kv" href="https://www.edx.org/course/building-modern-python-applications-on-aws" rel="noopener ugc nofollow" target="_blank">摩根·威利斯</a></p><p id="3f46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">[3]“监控与可观察性:有什么区别？”— <a class="ae kv" href="https://www.logicmonitor.com/blog/monitoring-vs-observability-whats-the-difference" rel="noopener ugc nofollow" target="_blank">詹姆斯·亚里亚</a></p></div></div>    
</body>
</html>