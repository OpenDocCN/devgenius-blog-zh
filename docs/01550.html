<html>
<head>
<title>Builder Design Pattern in Modern C++</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç°ä»£C++ä¸­çš„ç”Ÿæˆå™¨è®¾è®¡æ¨¡å¼</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/builder-design-pattern-in-modern-c-7ca0e259e1b4?source=collection_archive---------11-----------------------#2020-07-06">https://blog.devgenius.io/builder-design-pattern-in-modern-c-7ca0e259e1b4?source=collection_archive---------11-----------------------#2020-07-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c77d9887234379f0373529f0acd74219.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pp2y5VBnp_JiLT7xwcf4YA.png"/></div></div></figure><p id="c232" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œåˆ›é€ æ€§çš„è®¾è®¡æ¨¡å¼å¤„ç†å¯¹è±¡åˆ›å»ºæœºåˆ¶ï¼Œè¯•å›¾ä»¥é€‚åˆæƒ…å†µçš„æ–¹å¼åˆ›å»ºå¯¹è±¡ã€‚å¯¹è±¡åˆ›å»ºçš„åŸºæœ¬æˆ–æ™®é€šå½¢å¼ä¼šå¯¼è‡´è®¾è®¡é—®é¢˜æˆ–å¢åŠ è®¾è®¡çš„å¤æ‚æ€§ã€‚C++ä¸­çš„Builderè®¾è®¡æ¨¡å¼é€šè¿‡<strong class="ka ir"> <em class="kw">å°†å¤æ‚å¯¹è±¡çš„æ„é€ ä¸å…¶è¡¨ç¤º</em> </strong>åˆ†ç¦»æ¥è§£å†³è¿™ä¸ªå…·ä½“é—®é¢˜ã€‚</p><blockquote class="kx ky kz"><p id="7286" class="jy jz kw ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><em class="iq"> /ï¼\:è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨åœ¨æˆ‘çš„åšå®¢ä¸Šã€‚å¦‚æœä½ æœ‰å…´è¶£æ¥æ”¶æˆ‘çš„æœ€æ–°æ–‡ç« ï¼Œ</em> <a class="ae ld" href="http://eepurl.com/gDNybv" rel="noopener ugc nofollow" target="_blank"> <em class="iq">è¯·æŠ¥åå‚åŠ æˆ‘çš„ç®€è®¯</em> </a> <em class="iq">ã€‚</em></p></blockquote><p id="2855" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡æˆ‘å…³äºåˆ›é€ æ€§è®¾è®¡æ¨¡å¼çš„å…¶ä»–æ–‡ç« ï¼Œé‚£ä¹ˆä¸‹é¢æ˜¯åˆ—è¡¨:</p><ol class=""><li id="fc96" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lj lk ll lm bi translated"><a class="ae ld" href="http://www.vishalchovatiya.com/factory-design-pattern-in-modern-cpp/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">å·¥å‚</strong> </a></li><li id="b841" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lj lk ll lm bi translated"><a class="ae ld" href="http://www.vishalchovatiya.com/builder-design-pattern-in-modern-cpp/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">å»ºé€ è€…</strong> </a></li><li id="2149" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lj lk ll lm bi translated"><a class="ae ld" href="http://www.vishalchovatiya.com/prototype-design-pattern-in-modern-cpp/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">åŸå‹</strong> </a></li><li id="ea18" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lj lk ll lm bi translated"><a class="ae ld" href="http://www.vishalchovatiya.com/singleton-design-pattern-in-modern-cpp/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">å•èƒ</strong> </a></li></ol><p id="e8b1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‚¨åœ¨è¿™ä¸€ç³»åˆ—æ–‡ç« ä¸­çœ‹åˆ°çš„ä»£ç ç‰‡æ®µæ˜¯ç®€åŒ–çš„ï¼Œè€Œä¸æ˜¯å¤æ‚çš„ã€‚æ‰€ä»¥ä½ ç»å¸¸çœ‹åˆ°æˆ‘ä¸ä½¿ç”¨åƒ<code class="fe ls lt lu lv b">override</code>ã€<code class="fe ls lt lu lv b">final</code>ã€<code class="fe ls lt lu lv b">public</code>(åŒæ—¶ç»§æ‰¿)è¿™æ ·çš„å…³é”®å­—ï¼Œåªæ˜¯ä¸ºäº†è®©ä»£ç ç´§å‡‘&amp;å¯æ¶ˆè€—(å¤§éƒ¨åˆ†æ—¶é—´)åœ¨å•ä¸€æ ‡å‡†å±å¹•å°ºå¯¸ã€‚æˆ‘ä¹Ÿæ›´å–œæ¬¢<code class="fe ls lt lu lv b">struct</code>è€Œä¸æ˜¯<code class="fe ls lt lu lv b">class</code>ï¼Œåªæ˜¯ä¸ºäº†èŠ‚çœä»£ç è¡Œï¼Œæœ‰æ—¶ä¸å†™<code class="fe ls lt lu lv b">public:</code>ï¼Œä¹Ÿæ•…æ„å¿½ç•¥<a class="ae ld" href="http://www.vishalchovatiya.com/part-3-all-about-virtual-keyword-in-c-how-virtual-destructor-works/" rel="noopener ugc nofollow" target="_blank">è™šææ„å‡½æ•°</a>ï¼Œæ„é€ å‡½æ•°<a class="ae ld" href="http://www.vishalchovatiya.com/all-about-copy-constructor-in-cpp-with-example/" rel="noopener ugc nofollow" target="_blank">ï¼Œå¤åˆ¶æ„é€ å‡½æ•°</a>ï¼Œå‰ç¼€<code class="fe ls lt lu lv b">std::</code>ï¼Œåˆ é™¤åŠ¨æ€å†…å­˜ã€‚æˆ‘ä¹Ÿè®¤ä¸ºè‡ªå·±æ˜¯ä¸€ä¸ªåŠ¡å®çš„äººï¼Œå¸Œæœ›ç”¨å°½å¯èƒ½ç®€å•çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯æ ‡å‡†çš„æ–¹å¼æˆ–ä½¿ç”¨æœ¯è¯­æ¥ä¼ è¾¾ä¸€ä¸ªæƒ³æ³•ã€‚</p><p id="1a1d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="kw">æ³¨:</em>T42ã€‘</strong></p><ul class=""><li id="9018" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lw lk ll lm bi translated">å¦‚æœä½ ç›´æ¥æ¥åˆ°è¿™é‡Œï¼Œé‚£ä¹ˆæˆ‘å»ºè®®ä½ æµè§ˆä¸€ä¸‹<a class="ae ld" href="http://www.vishalchovatiya.com/what-is-design-pattern/" rel="noopener ugc nofollow" target="_blank">ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ</a>ç¬¬ä¸€ï¼Œå“ªæ€•æ˜¯å¾®ä¸è¶³é“çš„å°äº‹ã€‚ç›¸ä¿¡ä¼šé¼“åŠ±ä½ å¯¹è¿™ä¸ªè¯é¢˜è¿›è¡Œæ›´å¤šçš„æ¢ç´¢ã€‚</li><li id="9562" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">æ‚¨åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­é‡åˆ°çš„æ‰€æœ‰è¿™äº›ä»£ç éƒ½æ˜¯ä½¿ç”¨C++20ç¼–è¯‘çš„(å°½ç®¡æˆ‘åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨äº†C++17çš„<a class="ae ld" href="http://www.vishalchovatiya.com/21-new-features-of-modern-cpp-to-use-in-your-project/" rel="noopener ugc nofollow" target="_blank">ç°ä»£C++ </a>ç‰¹æ€§)ã€‚æ‰€ä»¥å¦‚æœä½ æ²¡æœ‰æœ€æ–°çš„ç¼–è¯‘å™¨ï¼Œä½ å¯ä»¥ä½¿ç”¨å·²ç»é¢„è£…äº†booståº“çš„https://wandbox.org/ã€‚</li></ul><h1 id="44ca" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">ç›®çš„</h1><blockquote class="kx ky kz"><p id="374b" class="jy jz kw ka b kb kc kd ke kf kg kh ki la kk kl km lb ko kp kq lc ks kt ku kv ij bi translated"><strong class="ka ir">é€šè¿‡åœ¨å•ç‹¬çš„å®ä½“ä¸­æä¾›APIï¼Œç®€æ´åœ°åˆ›å»º/å®ä¾‹åŒ–å¤æ‚çš„&amp;å¤æ‚çš„å¯¹è±¡åˆ†æ®µ&amp;ã€‚</strong></p></blockquote><ul class=""><li id="26d5" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lw lk ll lm bi translated">å½“æˆ‘ä»¬æƒ³è¦æ„é€ ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡æ—¶ï¼Œä½¿ç”¨æ„å»ºå™¨è®¾è®¡æ¨¡å¼ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æœ‰ä¸€ä¸ªå¤æ‚çš„æ„é€ å‡½æ•°æˆå‘˜æˆ–è€…ä¸€ä¸ªéœ€è¦å¾ˆå¤šå‚æ•°çš„æˆå‘˜ã€‚</li><li id="b2c7" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">æ„å»ºå™¨è®¾è®¡æ¨¡å¼é€æ­¥æ„å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡&amp;æœ€åä¸€æ­¥å°†è¿”å›è¯¥å¯¹è±¡ã€‚æ„é€ ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥åœ¨å„ç§æ–¹æ³•çš„å¸®åŠ©ä¸‹åˆ›å»ºåŒä¸€å¯¹è±¡çš„ä¸åŒè¡¨ç¤ºã€‚</li></ul><h1 id="9832" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">æ²¡æœ‰å»ºè®¾è€…çš„ç”Ÿæ´»</h1><ul class=""><li id="77fc" class="le lf iq ka b kb mv kf mw kj mx kn my kr mz kv lw lk ll lm bi translated">å‡è®¾æ‚¨å¿…é¡»ä½¿ç”¨C++åˆ›å»ºHTMLç”Ÿæˆå™¨ï¼Œé‚£ä¹ˆéå¸¸ç®€å•çš„æ–¹æ³•å°±æ˜¯:</li></ul><pre class="na nb nc nd gt ne lv nf ng aw nh bi"><span id="ac66" class="ni ly iq lv b gy nj nk l nl nm">// &lt;p&gt;hello&lt;/p&gt;<br/>auto text = "hello";<br/>string output;<br/>output += "&lt;p&gt;";<br/>output += text;<br/>output += "&lt;/p&gt;";<br/>printf("&lt;p&gt;%s&lt;/p&gt;", text);</span><span id="80ab" class="ni ly iq lv b gy nn nk l nl nm">// &lt;ul&gt;&lt;li&gt;hello&lt;/li&gt;&lt;li&gt;world&lt;/li&gt;&lt;/ul&gt;<br/>string words[] = {"hello", "world"};<br/>ostringstream oss;<br/>oss &lt; "&lt;ul&gt;";<br/>for (auto w : words)<br/>    oss &lt; "  &lt;li&gt;" &lt; w &lt; "&lt;/li&gt;";<br/>oss &lt; "&lt;/ul&gt;";<br/>printf(oss.str().c_str());</span></pre><ul class=""><li id="89c1" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lw lk ll lm bi translated">ä¸€ä¸ªæˆç†Ÿçš„å¼€å‘äººå‘˜ä¼šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸€å †æ„é€ å‡½æ•°å‚æ•°å’Œæ–¹æ³•çš„ç±»æ¥æ·»åŠ ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ï¼Œä½†æ˜¯å®ƒå¯èƒ½ä¼šä½¿å¯¹è±¡è¡¨ç¤ºå¤æ‚åŒ–ã€‚</li><li id="0300" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰äº›å¯¹è±¡å¾ˆç®€å•&amp;å¯ä»¥åœ¨ä¸€æ¬¡æ„é€ å‡½æ•°è°ƒç”¨ä¸­åˆ›å»ºï¼Œè€Œå…¶ä»–å¯¹è±¡åˆ™éœ€è¦å¤§é‡çš„åˆ›å»ºè¿‡ç¨‹ã€‚</li><li id="3f41" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">æ‹¥æœ‰ä¸€ä¸ªæœ‰10ä¸ªæ„é€ å‡½æ•°å‚æ•°çš„å¯¹è±¡æ˜¯æ²¡æœ‰æ•ˆç‡çš„ã€‚ç›¸åï¼Œæˆ‘ä»¬åº”è¯¥é€‰æ‹©åˆ†æ®µæ–½å·¥ã€‚</li><li id="a363" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">Builderæä¾›äº†ä¸€ä¸ªAPIï¼Œç”¨äºä¸€æ­¥ä¸€æ­¥åœ°æ„é€ å¯¹è±¡ï¼Œè€Œä¸æ˜¾ç¤ºå®é™…çš„å¯¹è±¡è¡¨ç¤ºã€‚</li></ul><h1 id="283f" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">ç°ä»£C++ä¸­çš„ç”Ÿæˆå™¨è®¾è®¡æ¨¡å¼ç¤ºä¾‹</h1><pre class="na nb nc nd gt ne lv nf ng aw nh bi"><span id="ce4a" class="ni ly iq lv b gy nj nk l nl nm">class HtmlBuilder;</span><span id="b8b0" class="ni ly iq lv b gy nn nk l nl nm">class HtmlElement {<br/>    string                      m_name;<br/>    string                      m_text;<br/>    vector&lt;HtmlElement&gt;         m_childs;<br/>    constexpr static size_t     m_indent_size = 4;</span><span id="a6f7" class="ni ly iq lv b gy nn nk l nl nm">    HtmlElement() = default;<br/>    HtmlElement(const string &amp;name, const string &amp;text) : m_name(name), m_text(text) {}<br/>    friend class HtmlBuilder;</span><span id="bbb5" class="ni ly iq lv b gy nn nk l nl nm">public:<br/>    string str(int32_t indent = 0) {<br/>        ostringstream oss;<br/>        oss &lt;&lt; string(m_indent_size * indent, ' ') &lt;&lt; "&lt;" &lt;&lt; m_name &lt;&lt; "&gt;" &lt;&lt; endl;</span><span id="2c9d" class="ni ly iq lv b gy nn nk l nl nm">        if (m_text.size()) oss &lt;&lt; string(m_indent_size * (indent + 1), ' ') &lt;&lt; m_text &lt;&lt; endl;</span><span id="51dd" class="ni ly iq lv b gy nn nk l nl nm">        for (auto &amp;element : m_childs)<br/>            oss &lt;&lt; element.str(indent + 1);</span><span id="7f3a" class="ni ly iq lv b gy nn nk l nl nm">        oss &lt;&lt; string(m_indent_size * indent, ' ') &lt;&lt; "&lt;/" &lt;&lt; m_name &lt;&lt; "&gt;" &lt;&lt; endl;<br/>        return oss.str();<br/>    }<br/>    static unique_ptr&lt;HtmlBuilder&gt; build(string root_name) { return make_unique&lt;HtmlBuilder&gt;(root_name); }<br/>};</span><span id="295f" class="ni ly iq lv b gy nn nk l nl nm">class HtmlBuilder {<br/>    HtmlElement     m_root;</span><span id="8899" class="ni ly iq lv b gy nn nk l nl nm">public:<br/>    HtmlBuilder(string root_name) { m_root.m_name = root_name; }<br/>    HtmlBuilder *add_child(string child_name, string child_text) {<br/>        m_root.m_childs.emplace_back(HtmlElement{child_name, child_text});<br/>        return this;<br/>    }<br/>    string str() { return m_root.str(); }<br/>    operator HtmlElement() { return m_root; }<br/>};</span><span id="3302" class="ni ly iq lv b gy nn nk l nl nm">int main() {<br/>    auto builder = HtmlElement::build("ul");<br/>    builder-&gt;add_child("li", "hello")-&gt;add_child("li", "world");</span><span id="b25e" class="ni ly iq lv b gy nn nk l nl nm">    cout &lt;&lt; builder-&gt;str() &lt;&lt; endl;<br/>    return EXIT_SUCCESS;<br/>}<br/>/*<br/>&lt;ul&gt;<br/>    &lt;li&gt;<br/>        hello<br/>    &lt;/li&gt;<br/>    &lt;li&gt;<br/>        world<br/>    &lt;/li&gt;<br/>&lt;/ul&gt;<br/>*/</span></pre><ul class=""><li id="66ba" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lw lk ll lm bi translated">æˆ‘ä»¬é€šè¿‡å°†<code class="fe ls lt lu lv b">HtmlElements</code>çš„æ•°æ®æˆå‘˜è®¾ä¸ºç§æœ‰æ¥å¼ºåˆ¶ç”¨æˆ·ä½¿ç”¨builderã€‚</li><li id="4d44" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å·²ç»åœ¨åŒä¸€ä¸ªæ–‡ä»¶&amp;ä¸­å£°æ˜äº†<code class="fe ls lt lu lv b">HtmlBuilder</code> &amp; <code class="fe ls lt lu lv b">HtmlElement</code>è¿™æ ·åšï¼Œæˆ‘ä»¬éœ€è¦å‘å‰å£°æ˜ï¼Œå³<code class="fe ls lt lu lv b">class HtmlBuilder;</code>ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ª<a class="ae ld" href="https://docs.microsoft.com/en-us/cpp/c-language/incomplete-types" rel="noopener ugc nofollow" target="_blank">ä¸å®Œæ•´ç±»å‹</a>ã€‚åœ¨ç¼–è¯‘å™¨è§£æå®ƒçš„å®é™…å£°æ˜ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸èƒ½åˆ›å»ºä¸å®Œæ•´ç±»å‹çš„å¯¹è±¡ã€‚åŸå› å¾ˆç®€å•ï¼Œç¼–è¯‘å™¨éœ€è¦ä¸€ä¸ªå¯¹è±¡çš„å¤§å°æ¥ä¸ºå®ƒåˆ†é…å†…å­˜ã€‚å› æ­¤æŒ‡é’ˆæ˜¯å”¯ä¸€çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡å–äº†<code class="fe ls lt lu lv b"><a class="ae ld" href="http://www.vishalchovatiya.com/understanding-unique-ptr-with-example-in-cpp11/" rel="noopener ugc nofollow" target="_blank">unique_ptr</a>.</code></li></ul><h1 id="4781" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">å¤æ‚è€Œæµç•…çš„æ„å»ºå™¨è®¾è®¡æ¨¡å¼ç¤ºä¾‹</h1><ul class=""><li id="d9e8" class="le lf iq ka b kb mv kf mw kj mx kn my kr mz kv lw lk ll lm bi translated">ä¸‹é¢æ˜¯æ„å»ºå™¨è®¾è®¡æ¨¡å¼çš„æ›´å¤æ‚çš„ä¾‹å­ï¼Œå®ƒè¢«ç»„ç»‡åœ¨å››ä¸ªä¸åŒçš„æ–‡ä»¶ä¸­(å³<code class="fe ls lt lu lv b">Person.h</code>ã€<code class="fe ls lt lu lv b">Person.cpp</code>ã€<code class="fe ls lt lu lv b">PersonBuilder.h</code>ã€<code class="fe ls lt lu lv b">PersonBuilder.cpp</code>)ã€‚</li></ul><p id="cbf2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ls lt lu lv b"><strong class="ka ir">Person.h</strong></code></p><pre class="na nb nc nd gt ne lv nf ng aw nh bi"><span id="d5c7" class="ni ly iq lv b gy nj nk l nl nm">#pragma once<br/>#include &lt;iostream&gt;<br/>using namespace std;</span><span id="4c77" class="ni ly iq lv b gy nn nk l nl nm">class PersonBuilder;</span><span id="c4f8" class="ni ly iq lv b gy nn nk l nl nm">class Person<br/>{<br/>    std::string m_name, m_street_address, m_post_code, m_city;  // Personal Detail<br/>    std::string m_company_name, m_position, m_annual_income;    // Employment Detail</span><span id="ee5e" class="ni ly iq lv b gy nn nk l nl nm">    Person(std::string name) : m_name(name) {}</span><span id="45e5" class="ni ly iq lv b gy nn nk l nl nm">public:<br/>    friend class PersonBuilder;<br/>    friend ostream&amp; operator&lt;&lt;(ostream&amp;  os, const Person&amp; obj);<br/>    static PersonBuilder create(std::string name);<br/>};</span></pre><p id="40b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ls lt lu lv b"><strong class="ka ir">Person.cpp</strong></code></p><pre class="na nb nc nd gt ne lv nf ng aw nh bi"><span id="a6f4" class="ni ly iq lv b gy nj nk l nl nm">#include &lt;iostream&gt;<br/>#include "Person.h"<br/>#include "PersonBuilder.h"</span><span id="350d" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder Person::create(string name) { return PersonBuilder{name}; }</span><span id="c7ba" class="ni ly iq lv b gy nn nk l nl nm">ostream&amp; operator&lt;&lt;(ostream&amp; os, const Person&amp; obj)<br/>{<br/>    return os &lt;&lt; obj.m_name<br/>              &lt;&lt; std::endl<br/>              &lt;&lt; "lives : " &lt;&lt; std::endl<br/>              &lt;&lt; "at " &lt;&lt; obj.m_street_address<br/>              &lt;&lt; " with postcode " &lt;&lt; obj.m_post_code<br/>              &lt;&lt; " in " &lt;&lt; obj.m_city<br/>              &lt;&lt; std::endl<br/>              &lt;&lt; "works : " &lt;&lt; std::endl<br/>              &lt;&lt; "with " &lt;&lt; obj.m_company_name<br/>              &lt;&lt; " as a " &lt;&lt; obj.m_position<br/>              &lt;&lt; " earning " &lt;&lt; obj.m_annual_income;<br/>}</span></pre><ul class=""><li id="5030" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lw lk ll lm bi translated">ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡º<code class="fe ls lt lu lv b">Person</code>å¯èƒ½æœ‰å¾ˆå¤šç±»ä¼¼ä¸ªäºº&amp;çš„ä¸“ä¸šç»†èŠ‚ã€‚æ•°æ®æˆå‘˜çš„è®¡æ•°ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</li><li id="0794" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæœ‰7ä¸ªæ•°æ®æˆå‘˜ã€‚ä¸ºé€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªäººæ‰€éœ€çš„æ‰€æœ‰æ“ä½œåˆ›å»ºä¸€ä¸ªç±»å¯èƒ½ä¼šä½¿æˆ‘ä»¬çš„ç±»å˜å¾—è‡ƒè‚¿&amp;å¤±å»å®ƒæœ€åˆçš„ç›®çš„ã€‚æ­¤å¤–ï¼Œåº“ç”¨æˆ·éœ€è¦æ³¨æ„æ‰€æœ‰é‚£äº›æ„é€ å‡½æ•°å‚æ•°åºåˆ—ã€‚</li></ul><p id="26c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ls lt lu lv b"><strong class="ka ir">PersonBuilder.h</strong></code></p><pre class="na nb nc nd gt ne lv nf ng aw nh bi"><span id="79ed" class="ni ly iq lv b gy nj nk l nl nm">#pragma once<br/>#include "Person.h"</span><span id="5c64" class="ni ly iq lv b gy nn nk l nl nm">class PersonBuilder<br/>{<br/>    Person person;</span><span id="49aa" class="ni ly iq lv b gy nn nk l nl nm">public:<br/>    PersonBuilder(string name) : person(name) {}</span><span id="83b2" class="ni ly iq lv b gy nn nk l nl nm">    operator Person() const { return move(person); }</span><span id="bf2a" class="ni ly iq lv b gy nn nk l nl nm">    PersonBuilder&amp;  lives();<br/>    PersonBuilder&amp;  at(std::string street_address);<br/>    PersonBuilder&amp;  with_postcode(std::string post_code);<br/>    PersonBuilder&amp;  in(std::string city);<br/>    PersonBuilder&amp;  works();<br/>    PersonBuilder&amp;  with(string company_name);<br/>    PersonBuilder&amp;  as_a(string position);<br/>    PersonBuilder&amp;  earning(string annual_income);<br/>};</span></pre><p id="9f2b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ls lt lu lv b"><strong class="ka ir">PersonBuilder.cpp</strong></code></p><pre class="na nb nc nd gt ne lv nf ng aw nh bi"><span id="e162" class="ni ly iq lv b gy nj nk l nl nm">#include "PersonBuilder.h"</span><span id="7e9f" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder&amp;  PersonBuilder::lives() { return *this; }</span><span id="f0c8" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder&amp;  PersonBuilder::works() { return *this; }</span><span id="6a9a" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder&amp;  PersonBuilder::with(string company_name) {<br/>    person.m_company_name = company_name; <br/>    return *this;<br/>}</span><span id="c375" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder&amp;  PersonBuilder::as_a(string position) {<br/>    person.m_position = position; <br/>    return *this;<br/>}</span><span id="65ea" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder&amp;  PersonBuilder::earning(string annual_income) {<br/>    person.m_annual_income = annual_income; <br/>    return *this;<br/>}</span><span id="6197" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder&amp;  PersonBuilder::at(std::string street_address) {<br/>    person.m_street_address = street_address; <br/>    return *this;<br/>}</span><span id="c8c5" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder&amp;  PersonBuilder::with_postcode(std::string post_code) {<br/>    person.m_post_code = post_code; <br/>    return *this;<br/>}</span><span id="2164" class="ni ly iq lv b gy nn nk l nl nm">PersonBuilder&amp;  PersonBuilder::in(std::string city) {<br/>    person.m_city = city; <br/>    return *this;<br/>}</span></pre><ul class=""><li id="d745" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lw lk ll lm bi translated">æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰è¿™äº›ä¸æ„é€ ç›¸å…³çš„APIå¡è¿›<code class="fe ls lt lu lv b">Person</code>ï¼Œå°†ä»»åŠ¡å§”æ‰˜ç»™å•ç‹¬çš„å®ä½“ï¼Œå³<code class="fe ls lt lu lv b">PersonBuilder</code>ã€‚</li></ul><p id="c41d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ls lt lu lv b"><strong class="ka ir">Main.cpp</strong></code></p><pre class="na nb nc nd gt ne lv nf ng aw nh bi"><span id="3bf8" class="ni ly iq lv b gy nj nk l nl nm">#include &lt;iostream&gt;<br/>#include "Person.h"<br/>#include "PersonBuilder.h"<br/>using namespace std;</span><span id="4afc" class="ni ly iq lv b gy nn nk l nl nm">int main()<br/>{<br/>    Person p = Person::create("John")<br/>                                .lives()<br/>                                    .at("123 London Road")<br/>                                    .with_postcode("SW1 1GB")<br/>                                    .in("London")<br/>                                .works()<br/>                                    .with("PragmaSoft")<br/>                                    .as_a("Consultant")<br/>                                    .earning("10e6");</span><span id="6b1f" class="ni ly iq lv b gy nn nk l nl nm">    cout &lt;&lt; p &lt;&lt; endl;<br/>    return EXIT_SUCCESS;<br/>}</span></pre><ul class=""><li id="6547" class="le lf iq ka b kb kc kf kg kj lg kn lh kr li kv lw lk ll lm bi translated">ä¸Šé¢çš„ç»“æ„çœ‹èµ·æ¥ä¸æ˜¯æ›´ç›´è§‚ã€è‡ªç„¶&amp;ç®€å•æ˜äº†å—ï¼Ÿ</li><li id="249f" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">å¦‚æœä½ å…³æ³¨çš„æ˜¯<code class="fe ls lt lu lv b">lives()</code> &amp; <code class="fe ls lt lu lv b">works()</code>è¿™æ ·çš„ç©ºç™½æ–¹æ³•ï¼Œé‚£ä¹ˆä¸ç”¨æ‹…å¿ƒï¼Œå®ƒä¼šåœ¨ä¼˜åŒ–ä¸­è¢«æ·˜æ±°ã€‚</li><li id="89a3" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">ä½ è¿˜å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œæˆ‘ä»¬é€šè¿‡å°†æ„é€ å‡½æ•°ç§æœ‰&amp;åªæš´éœ²<code class="fe ls lt lu lv b">create<strong class="ka ir">(</strong>std::string name<strong class="ka ir">)</strong></code> APIï¼Œè¿«ä½¿ç”¨æˆ·ä½¿ç”¨æ„å»ºå™¨è€Œä¸æ˜¯æ„é€ å‡½æ•°ã€‚</li><li id="cf8c" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">é™¤ééœ€è¦ï¼Œå¦åˆ™ä¸è¦é€šè¿‡è®¾è®¡æ¥å£æˆ–æŠ½è±¡ç±»æ¥ä½¿äº‹æƒ…è¿‡äºå¤æ‚ã€‚æˆ‘åœ¨ç½‘ä¸Šçš„è®¸å¤šæ„å»ºå™¨è®¾è®¡æ¨¡å¼ä¾‹å­ä¸­çœ‹åˆ°è¿‡è¿™ä¸€ç‚¹ã€‚</li></ul><h1 id="5d72" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">ç”Ÿæˆå™¨è®¾è®¡æ¨¡å¼çš„å¥½å¤„</h1><ul class=""><li id="fbf8" class="le lf iq ka b kb mv kf mw kj mx kn my kr mz kv lw lk ll lm bi translated">åœ¨æ„å»ºå™¨æ¨¡å¼ä¸­ï¼Œä»£ç è¡Œæ•°è‡³å°‘å¢åŠ äº†ä¸€å€ã€‚ä½†æ˜¯è¿™ç§åŠªåŠ›åœ¨è®¾è®¡çµæ´»æ€§ã€æ„é€ å‡½æ•°çš„å‚æ•°æ›´å°‘æˆ–æ²¡æœ‰å‚æ•°ä»¥åŠå¯è¯»æ€§æ›´é«˜çš„ä»£ç æ–¹é¢å¾—åˆ°äº†å›æŠ¥ã€‚</li><li id="57d2" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">æ„å»ºå™¨è®¾è®¡æ¨¡å¼è¿˜æœ‰åŠ©äºæœ€å°åŒ–æ„é€ å™¨ä¸­çš„å‚æ•°æ•°é‡&amp;å› æ­¤ä¸éœ€è¦ä¸ºæ„é€ å™¨çš„å¯é€‰å‚æ•°ä¼ é€’ç©ºå€¼ã€‚</li><li id="dce6" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">åœ¨å¯¹è±¡æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä¸å¯å˜å¯¹è±¡çš„æ„å»ºä¸éœ€è¦å¤ªå¤šå¤æ‚çš„é€»è¾‘ã€‚</li><li id="e41b" class="le lf iq ka b kb ln kf lo kj lp kn lq kr lr kv lw lk ll lm bi translated">å°†æ„é€ ä¸<a class="ae ld" href="http://www.vishalchovatiya.com/memory-layout-of-cpp-object/" rel="noopener ugc nofollow" target="_blank">å¯¹è±¡è¡¨ç¤º</a>åˆ†ç¦»ä½¿å¾—å¯¹è±¡è¡¨ç¤ºåˆ‡ç‰‡&amp;ç²¾ç¡®ã€‚æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ„å»ºå™¨å®ä½“æä¾›äº†åˆ›å»ºå®ä¾‹åŒ–ä¸åŒå¯¹è±¡è¡¨ç¤ºçš„çµæ´»æ€§ã€‚</li></ul><h1 id="59fa" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">å¸¸è§é—®é¢˜æ±‡æ€»</h1><p id="4d50" class="pw-post-body-paragraph jy jz iq ka b kb mv kd ke kf mw kh ki kj no kl km kn np kp kq kr nq kt ku kv ij bi translated"><strong class="ka ir">ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨æ„å»ºå™¨è®¾è®¡æ¨¡å¼ï¼Ÿ</strong></p><p id="cf52" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ¯å½“åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œéœ€è¦è®¾ç½®è®¸å¤šå‚æ•°ï¼Œå…¶ä¸­ä¸€äº›(æˆ–å…¨éƒ¨)æ˜¯å¯é€‰çš„ã€‚</p><p id="7796" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨å®ç°æ„å»ºå™¨è®¾è®¡æ¨¡å¼æ—¶éœ€è¦ä¸€ä¸ªæ„å»ºå™¨ç±»ï¼Ÿ</strong></p><p id="edac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯è¿™æ ·åšæœ‰ä¸€äº›å¥½å¤„:<br/> -æ ¹æ®<a class="ae ld" href="http://www.vishalchovatiya.com/single-responsibility-principle-in-cpp-solid-as-a-rock/" rel="noopener ugc nofollow" target="_blank"> SRP </a>ï¼Œæ„å»ºå¯¹è±¡çš„å…³æ³¨ç‚¹åº”è¯¥åœ¨å•ç‹¬çš„å®ä½“ä¸­ã€‚<br/> -åŸç‰©ä¸ä¼šè‡ƒè‚¿ã€‚<br/> -æ˜“ç»´æŠ¤ä»£ç &amp;ã€‚<br/> -æµ‹è¯•&amp;ç†è§£ä¸€ä¸ªæœ‰è®¸å¤šè¾“å…¥å‚æ•°çš„æ„é€ å‡½æ•°å˜å¾—æ›´åŠ å¤æ‚ã€‚</p><p id="d528" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">å»ºç­‘è®¾è®¡æ¨¡å¼çš„æœ€å¤§ä¼˜åŠ¿ï¼</strong></p><p id="83c3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ›´æœ‰è¡¨ç°åŠ›çš„ä»£ç ã€‚<br/><code class="fe ls lt lu lv b">MyClass o = new MyClass(5, 5.5, 'A', var, 1000, obj9, "hello");</code><br/>â€”â€”æ”¹ä¸º<br/><code class="fe ls lt lu lv b">MyClass o = MyClass.builder().a(5).b(5.5).c('A').d(var).e(1000).f(obj9).g("hello");</code><br/>â€”â€”ä½ å¯ä»¥çœ‹åˆ°å“ªä¸ªæ•°æ®æˆå‘˜æ­£åœ¨è¢«ä»€ä¹ˆ&amp;èµ‹å€¼ç”šè‡³æ”¹å˜èµ‹å€¼çš„é¡ºåºã€‚</p><p id="0393" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae ld" href="http://www.vishalchovatiya.com/contact-2/" rel="noopener ugc nofollow" target="_blank">æœ‰ä»€ä¹ˆå»ºè®®ã€ç–‘é—®æˆ–è€…æƒ³è¯´</a> <code class="fe ls lt lu lv b"><a class="ae ld" href="http://www.vishalchovatiya.com/contact-2/" rel="noopener ugc nofollow" target="_blank">Hi</a></code> <a class="ae ld" href="http://www.vishalchovatiya.com/contact-2/" rel="noopener ugc nofollow" target="_blank">ï¼Ÿå‡è½»å‹åŠ›ï¼Œåªéœ€ç‚¹å‡»ä¸€ä¸‹é¼ æ ‡ã€‚</a> ğŸ–±ï¸</p></div></div>    
</body>
</html>