<html>
<head>
<title>ECMAScript 2022 Is Officially Released, What Should We Pay Attention To?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ECMAScript 2022 正式发布，需要注意什么？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ecmascript-2022-is-officially-released-what-should-we-pay-attention-to-5e207ed61a46?source=collection_archive---------0-----------------------#2022-06-26">https://blog.devgenius.io/ecmascript-2022-is-officially-released-what-should-we-pay-attention-to-5e207ed61a46?source=collection_archive---------0-----------------------#2022-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="15c6" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">有没有带来什么有趣的东西？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bdcee44ce0d8d1358c97c4723e4ef9a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CY8aeWPXcIqlLOZX"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@craftedbygc?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">绿色变色龙</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5289" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ECMA 大会于 2022 年 6 月 22 日批准了 ECMAScript 2022 语言规范，这意味着它现在正式成为一个标准。我们很快就能在 JavaScript 中使用这些新特性。下面将一一介绍:</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="96fb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">引入顶级<code class="fe mr ms mt mu b"><strong class="ak">await</strong></code></h1><p id="2db9" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">在此之前，<code class="fe mr ms mt mu b">await</code>关键字只能在<code class="fe mr ms mt mu b">async</code>函数中使用，如果强行使用就会出现语法错误:<code class="fe mr ms mt mu b">await is only valid in async functions and the top level bodies of modules</code></p><p id="153c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在可以在文件的顶层使用<code class="fe mr ms mt mu b">await</code>，它将被视为一个 ECMAScript 模块。下面是官方的例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/da160e76375ec7c91b5dbdd16bfa2ef1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2xSBd4NsS3OzJ9inb9MT3w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://github.com/tc39/proposal-top-level-await#solution-top-level-await" rel="noopener ugc nofollow" target="_blank"> GitHub </a></figcaption></figure><p id="c913" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe mr ms mt mu b">awaiting.mjs</code>中的<code class="fe mr ms mt mu b">await</code>的承诺得到解决之前，<code class="fe mr ms mt mu b">usage.mjs</code>中的任何语句都不会执行。</p><p id="12dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这在某些情况下很有用，比如动态依赖路径、资源初始化、依赖回退、WebAssembly 模块等。</p><h1 id="f61a" class="lz ma iq bd mb mc nb me mf mg nc mi mj jw nd jx ml jz ne ka mn kc nf kd mp mq bi translated">正则表达式通过<code class="fe mr ms mt mu b">/d</code>标志匹配索引</h1><p id="4953" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">这个特性允许我们使用<code class="fe mr ms mt mu b">d</code>字符来表示我们想要匹配的字符串的开始和结束索引。以前，在字符串匹配操作中，只能获得包含提取的字符串和索引信息的数组。在某些情况下，这是不够的。因此，如果您设置了标志<code class="fe mr ms mt mu b">/d</code>，您将额外获得一个具有开始和结束索引的数组。</p><p id="fe30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是官方的例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/62c4f8bb9b685f58da61c64fc90eca52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sVCo9OB8zxDPrWM8LfQyVg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://github.com/tc39/proposal-regexp-match-indices#examples" rel="noopener ugc nofollow" target="_blank"> GitHub </a></figcaption></figure><h1 id="7d2d" class="lz ma iq bd mb mc nb me mf mg nc mi mj jw nd jx ml jz ne ka mn kc nf kd mp mq bi translated"><code class="fe mr ms mt mu b">Error</code>对象上的<code class="fe mr ms mt mu b">cause</code>属性</h1><p id="39ef" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">在<code class="fe mr ms mt mu b">new Error()</code>中可以使用<code class="fe mr ms mt mu b">cause</code>属性来记录错误中的因果链。</p><p id="a18d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是官方的例子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/ab2f28958fee1cdc5a7383db31bca632.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IoDg3qS67tlWG2qtXbKiuA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://github.com/tc39/proposal-error-cause#chaining-errors" rel="noopener ugc nofollow" target="_blank"> GitHub </a></figcaption></figure><h1 id="02e3" class="lz ma iq bd mb mc nb me mf mg nc mi mj jw nd jx ml jz ne ka mn kc nf kd mp mq bi translated">用于字符串、数组和类型数组的<code class="fe mr ms mt mu b">at</code>方法</h1><p id="c52e" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated"><code class="fe mr ms mt mu b">at()</code>方法解决了一个非常实际的问题，即所有基本的可索引类(Array、String、TypedArray)都可以“负索引”，就像在 Python 中一样。这是一种更通用的方法，允许相对索引。</p><pre class="kg kh ki kj gt ni mu nj nk aw nl bi"><span id="4bb0" class="nm ma iq mu b gy nn no l np nq">const arr = ['1', '2', '3'];</span><span id="78bf" class="nm ma iq mu b gy nr no l np nq">// '3'<br/>console.log(arr.at(-1));<br/>// '2'<br/>console.log(arr.at(-2));</span></pre><p id="e4dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是 GitHub 给出的一个简单粗糙的 polyfill:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/7982d674f4359dcd7dede334e7f97bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X8zgR2ys9wyUuwcOS-Cdig.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图片来自<a class="ae kv" href="https://github.com/tc39/proposal-relative-indexing-method#polyfill" rel="noopener ugc nofollow" target="_blank"> GitHub </a></figcaption></figure><h1 id="06da" class="lz ma iq bd mb mc nb me mf mg nc mi mj jw nd jx ml jz ne ka mn kc nf kd mp mq bi translated">Object.hasOwn()</h1><p id="d570" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated"><code class="fe mr ms mt mu b">Object.hasOwn</code>是<code class="fe mr ms mt mu b">Object.prototype.hasOwnProperty</code>的便捷替代。我在以前的一篇文章中详细介绍了这一点:</p><div class="nt nu gp gr nv nw"><a href="https://javascript.plainenglish.io/in-vs-hasown-vs-hasownproperty-in-javascript-885771d2d100" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">在 JavaScript 的“与‘hasOwn’和‘hasOwnProperty’中</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">你真的知道区别吗？</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><h1 id="e356" class="lz ma iq bd mb mc nb me mf mg nc mi mj jw nd jx ml jz ne ka mn kc nf kd mp mq bi translated">结论</h1><p id="9287" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">此外，class 元素中还添加了一些新特性，我将在下面的文章中介绍这些特性:</p><div class="nt nu gp gr nv nw"><a href="https://medium.com/@islizeqiang/new-features-in-ecmascript-2022-for-class-elements-b4a8f4a26659" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">ECMAScript 2022 中针对类元素的新功能</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">它带来了什么便利？</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kp nw"/></div></div></a></div><p id="be04" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你对今天介绍的内容有什么想法和疑问，欢迎留下评论。</p><h1 id="29ed" class="lz ma iq bd mb mc nb me mf mg nc mi mj jw nd jx ml jz ne ka mn kc nf kd mp mq bi translated">参考</h1><p id="bb6f" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">[1]<a class="ae kv" href="https://www.ecma-international.org/publications-and-standards/standards/ecma-262/" rel="noopener ugc nofollow" target="_blank">https://www . ECMA-international . org/publications-and-standards/standards/ECMA-262/</a></p><p id="fcb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/tc39/proposal-top-level-await" rel="noopener ugc nofollow" target="_blank">https://github.com/tc39/proposal-top-level-await</a></p><p id="3d7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/tc39/proposal-regexp-match-indices" rel="noopener ugc nofollow" target="_blank">https://github.com/tc39/proposal-regexp-match-indices</a></p><p id="21ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/tc39/proposal-error-cause" rel="noopener ugc nofollow" target="_blank">https://github.com/tc39/proposal-error-cause</a></p><p id="9434" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/tc39/proposal-relative-indexing-method" rel="noopener ugc nofollow" target="_blank">https://github.com/tc39/proposal-relative-indexing-method</a></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="8f3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="om">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="om">中等会员</em> </a> <em class="om">。每月 5 美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="om">我的链接</em> </a> <em class="om">报名，我会得到一点佣金。</em></p><p id="a74b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的支持对我来说非常重要——谢谢。</p></div></div>    
</body>
</html>