<html>
<head>
<title>Code Smell 82 — Tests Violating Encapsulation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码气味 82 —违反封装的测试</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/code-smell-82-tests-violating-encapsulation-aa10f5e02445?source=collection_archive---------6-----------------------#2021-06-25">https://blog.devgenius.io/code-smell-82-tests-violating-encapsulation-aa10f5e02445?source=collection_archive---------6-----------------------#2021-06-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4af7" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">对象工作良好，并实现业务目标。但是我们需要测试它们。让我们打破他们。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/4eb1808f298bde177227c6f90328c8ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zi_3J4-U8Q5l2A8BYbgsmg.jpeg"/></div></div></figure><blockquote class="ko kp kq"><p id="58a1" class="kr ks kt ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">TL；DR:不要仅仅为了在你的测试中使用而编写方法。</p></blockquote><h1 id="41ac" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">问题</h1><ul class=""><li id="130c" class="mg mh in ku b kv mi ky mj mk ml mm mn mo mp ln mq mr ms mt bi translated">封装冲突。</li><li id="4719" class="mg mh in ku b kv mu ky mv mk mw mm mx mo my ln mq mr ms mt bi translated">不良接口</li><li id="f99b" class="mg mh in ku b kv mu ky mv mk mw mm mx mo my ln mq mr ms mt bi translated">连接</li></ul><h1 id="1d96" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">解决方法</h1><p id="9f57" class="pw-post-body-paragraph kr ks in ku b kv mi jo kx ky mj jr la mk mz ld le mm na lh li mo nb ll lm ln ig bi translated">1.不要破坏封装。</p><p id="39a2" class="pw-post-body-paragraph kr ks in ku b kv kw jo kx ky kz jr la mk lc ld le mm lg lh li mo lk ll lm ln ig bi translated">2.测试必须完全受控。</p><p id="3dc4" class="pw-post-body-paragraph kr ks in ku b kv kw jo kx ky kz jr la mk lc ld le mm lg lh li mo lk ll lm ln ig bi translated">3.如果你不能控制你的对象，你是耦合的。解耦！</p><h1 id="fbb2" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">示例代码</h1><h2 id="9a0b" class="nc lp in bd lq nd ne dn lu nf ng dp ly mk nh ni ma mm nj nk mc mo nl nm me nn bi translated">错误的</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="4ae4" class="nc lp in bd lq nd ne dn lu nf ng dp ly mk nh ni ma mm nj nk mc mo nl nm me nn bi translated">对吧</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="no np l"/></div></figure><h1 id="2e0d" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">侦查</h1><p id="f9fa" class="pw-post-body-paragraph kr ks in ku b kv mi jo kx ky mj jr la mk mz ld le mm na lh li mo nb ll lm ln ig bi translated">这是一种设计气味。</p><p id="dce5" class="pw-post-body-paragraph kr ks in ku b kv kw jo kx ky kz jr la mk lc ld le mm lg lh li mo lk ll lm ln ig bi translated">我们可以发现我们需要一个方法来测试。</p><h1 id="2900" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">标签</h1><ul class=""><li id="ba75" class="mg mh in ku b kv mi ky mj mk ml mm mn mo mp ln mq mr ms mt bi translated">信息隐蔽</li></ul><h1 id="8329" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">结论</h1><p id="230a" class="pw-post-body-paragraph kr ks in ku b kv mi jo kx ky mj jr la mk mz ld le mm na lh li mo nb ll lm ln ig bi translated">白盒测试是脆弱的。他们测试实现而不是行为。</p><h1 id="1623" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">关系</h1><div class="nq nr gp gr ns nt"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-52-fragile-tests-b917de33fd53"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd io gy z fp ny fr fs nz fu fw im bi translated">代码气味 52 —易碎测试</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">测试是我们的安全网。如果我们不信任他们的正直，我们将处于极大的危险之中。</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">blog.devgenius.io</p></div></div><div class="oc l"><div class="od l oe of og oc oh km nt"/></div></div></a></div><div class="nq nr gp gr ns nt"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-28-setters-5b0e764049aa"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd io gy z fp ny fr fs nz fu fw im bi translated">气味代码 28 —设定器</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">初级程序员做的第一个练习。ide、教程和高级开发人员不断教他们这种反模式。</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">blog.devgenius.io</p></div></div><div class="oc l"><div class="oi l oe of og oc oh km nt"/></div></div></a></div><h1 id="1d73" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">更多信息</h1><ul class=""><li id="1ef7" class="mg mh in ku b kv mi ky mj mk ml mm mn mo mp ln mq mr ms mt bi translated">我应该测试私有方法吗</li></ul><h1 id="e06c" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">信用</h1><p id="0d8c" class="pw-post-body-paragraph kr ks in ku b kv mi jo kx ky mj jr la mk mz ld le mm na lh li mo nb ll lm ln ig bi translated">这种气味的灵感来自<a class="ok ol ep" href="https://medium.com/u/ea9fb9a703df?source=post_page-----aa10f5e02445--------------------------------" rel="noopener" target="_blank">罗德里哥姆</a></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="om np l"/></div></figure></div><div class="ab cl on oo hr op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ig ih ii ij ik"><blockquote class="ko kp kq"><p id="50d8" class="kr ks kt ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">没有什么比一套测试更能让系统变得灵活。</p></blockquote><p id="6070" class="pw-post-body-paragraph kr ks in ku b kv kw jo kx ky kz jr la mk lc ld le mm lg lh li mo lk ll lm ln ig bi translated"><em class="kt">罗伯特·马丁</em></p><div class="nq nr gp gr ns nt"><a rel="noopener  ugc nofollow" target="_blank" href="/software-engineering-great-quotes-3af63cea6782"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd io gy z fp ny fr fs nz fu fw im bi translated">软件工程名言</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">有时一个简短的想法可以带来惊人的想法。</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">blog.devgenius.io</p></div></div><div class="oc l"><div class="ou l oe of og oc oh km nt"/></div></div></a></div></div><div class="ab cl on oo hr op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ig ih ii ij ik"><p id="e04d" class="pw-post-body-paragraph kr ks in ku b kv kw jo kx ky kz jr la mk lc ld le mm lg lh li mo lk ll lm ln ig bi translated">本文是 CodeSmell 系列的一部分。</p><div class="nq nr gp gr ns nt"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd io gy z fp ny fr fs nz fu fw im bi translated">如何找到你的代码中有问题的部分</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">代码很难闻。让我们看看如何改变香味。</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">blog.devgenius.io</p></div></div><div class="oc l"><div class="ov l oe of og oc oh km nt"/></div></div></a></div></div></div>    
</body>
</html>