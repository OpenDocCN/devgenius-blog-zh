<html>
<head>
<title>Useful JavaScript Tips — Object Properties and Copying</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有用的 JavaScript 提示—对象属性和复制</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/useful-javascript-tips-object-properties-and-copying-760b65dce256?source=collection_archive---------31-----------------------#2020-06-28">https://blog.devgenius.io/useful-javascript-tips-object-properties-and-copying-760b65dce256?source=collection_archive---------31-----------------------#2020-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/75d13f7d64c29c5f781ed57ab68347f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U_dtVlR9ksX45oKP"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@pafuxu?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Kouji 鹤</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="74ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript 应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些应该遵循的技巧，以便更快更好地编写 JavaScript 代码。</p><h1 id="30c6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将 2 个对象与 Object.is()进行比较</h1><p id="87f2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">比较两个对象的另一种方法是使用<code class="fe me mf mg mh b">Object.is</code>方法。</p><p id="14c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和<code class="fe me mf mg mh b">===</code>操作符差不多。</p><p id="9cfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，<code class="fe me mf mg mh b">NaN</code>同它本身是一样的。</p><p id="f130" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="77d5" class="mq lc iq mh b gy mr ms l mt mu">Object.is(a, b)</span></pre><p id="0586" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以比较两个变量<code class="fe me mf mg mh b">a</code>和<code class="fe me mf mg mh b">b</code>。</p><h1 id="b8b2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取对象的原型</h1><p id="33df" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">Object.getPrototypeOf</code>方法得到一个物体的原型。</p><p id="a0ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以如下获得一个对象的原型:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4aef" class="mq lc iq mh b gy mr ms l mt mu">const animal = {<br/>  name: 'james',<br/>  age: 7<br/>};</span><span id="aee8" class="mq lc iq mh b gy mv ms l mt mu">const dog = Object.create(animal);</span></pre><p id="c403" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">Object.create</code>创建了一个<code class="fe me mf mg mh b">dog</code>对象，这样<code class="fe me mf mg mh b">dog</code>将继承<code class="fe me mf mg mh b">animal</code>。</p><p id="b545" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们用它调用<code class="fe me mf mg mh b">Object.gerPrototypeOf</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="20dc" class="mq lc iq mh b gy mr ms l mt mu">const prot = Object.getPrototypeOf(dog);</span></pre><p id="eb03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3f84" class="mq lc iq mh b gy mr ms l mt mu">prot === animal</span></pre><p id="082b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">会是<code class="fe me mf mg mh b">true</code>，因为<code class="fe me mf mg mh b">animal</code>是<code class="fe me mf mg mh b">dog</code>的原型。</p><h1 id="fcea" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取对象的非继承符号</h1><p id="ed66" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.getOwnPropertySymbols</code>返回一个对象的所有非继承符号键。</p><p id="dd47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有以下对象:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e5ba" class="mq lc iq mh b gy mr ms l mt mu">const name = Symbol('name')<br/>const age = Symbol('age')<br/>const dog = {<br/>  [name]: 'james',<br/>  [age]: 7<br/>}</span></pre><p id="e46f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以调用<code class="fe me mf mg mh b">getOwnPropertySymbols</code>如下:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="43d0" class="mq lc iq mh b gy mr ms l mt mu">const syms = Object.getOwnPropertySymbols(dog);</span></pre><p id="6e6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们得到<code class="fe me mf mg mh b">syms</code>是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4f28" class="mq lc iq mh b gy mr ms l mt mu">[Symbol(name), Symbol(age)]</span></pre><h1 id="447e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取对象的非继承字符串键</h1><p id="6321" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.getOwnPropetyNames</code>方法让我们获得一个对象的字符串键数组。</p><p id="4e4e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回的键不是从任何原型继承的。</p><p id="1420" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f1b6" class="mq lc iq mh b gy mr ms l mt mu">const dog = {<br/>  breed: 'poodle'<br/>}</span><span id="317f" class="mq lc iq mh b gy mv ms l mt mu">const keys = Object.getOwnPropertyNames(dog);</span></pre><p id="a83f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到<code class="fe me mf mg mh b">[“breed”]</code>作为<code class="fe me mf mg mh b">keys</code>的值。</p><h1 id="60e0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取对象的键值对</h1><p id="b3a6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">方法返回一个对象的键值对数组。</p><p id="5a3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0ef1" class="mq lc iq mh b gy mr ms l mt mu">const person = { name: 'james', age: 18 }<br/>const pairs = Object.entries(person);</span></pre><p id="9def" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">pairs</code>就会是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9691" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  [<br/>    "name",<br/>    "james"<br/>  ],<br/>  [<br/>    "age",<br/>    18<br/>  ]<br/>]</span></pre><p id="0f7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中，内部数组的第一项是键名，第二项是值。</p><h1 id="61be" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">向对象添加单个属性</h1><p id="2d83" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在一个对象上调用<code class="fe me mf mg mh b">Object.defineProperty</code>来创建一个新的属性。</p><p id="54da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b7e4" class="mq lc iq mh b gy mr ms l mt mu">const dog = {};<br/>Object.defineProperty(dog, 'breed', {<br/>  value: 'poodle'<br/>})</span></pre><p id="d2da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">defineProperty</code>方法将<code class="fe me mf mg mh b">breed</code>属性添加到<code class="fe me mf mg mh b">dog</code>中。</p><h1 id="6585" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">一次向一个对象添加多个属性</h1><p id="0970" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">除了<code class="fe me mf mg mh b">Object.defineProperty</code>，还有一个<code class="fe me mf mg mh b">Object.defineProperties</code>方法可以给一个对象添加多个属性。</p><p id="44c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e4da" class="mq lc iq mh b gy mr ms l mt mu">const dog = {};<br/>Object.defineProperty(dog, {<br/>  breed: {<br/>    value: 'poodle'<br/>  },<br/>  name: {<br/>    value: 'james'<br/>  },<br/>})</span></pre><p id="0bb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">dog</code>就是<code class="fe me mf mg mh b"> {breed: “poodle”, name: “james”}</code>。</p><p id="b02f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一种一次向一个对象添加多个属性的便捷方式。</p><h1 id="54a9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 Object.create 创建对象</h1><p id="dd51" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.create</code>让我们用原型创建一个对象。</p><p id="6734" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a556" class="mq lc iq mh b gy mr ms l mt mu">const animal = {<br/>  name: 'james',<br/>  age: 7<br/>};</span><span id="a7e4" class="mq lc iq mh b gy mv ms l mt mu">const dog = Object.create(animal);</span></pre><p id="6518" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">dog</code>就是以<code class="fe me mf mg mh b">animal</code>为原型的。</p><p id="3654" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将继承来自<code class="fe me mf mg mh b">animal</code>的所有属性。</p><p id="fea9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe me mf mg mh b">dog.name</code>就是<code class="fe me mf mg mh b">'james'</code>。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/4b9db7c540e7a27421e069923f63fba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sQzFm76p9o496kKB"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@malyushev?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">维克托·马尔尤舍夫</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="6390" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 Object.assign 复制和组合对象</h1><p id="83f8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.assign</code>让我们将多个对象合并成一个或复制它们。</p><p id="e4f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要复制一个对象，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1893" class="mq lc iq mh b gy mr ms l mt mu">const copy = Object.assign({}, original)</span></pre><p id="d334" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们复制了一个<code class="fe me mf mg mh b">original</code>对象，并将其赋给了<code class="fe me mf mg mh b">copy</code>变量。</p><p id="b836" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">{}</code>应该是第一个参数，这样我们就不会修改任何现有的对象并将它们复制到一个空对象中。</p><p id="d10c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要组合多个对象，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fd6c" class="mq lc iq mh b gy mr ms l mt mu">const merged  = Object.assign({}, obj1, obj2)</span></pre><p id="aaad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将所有自己的字符串属性从<code class="fe me mf mg mh b">obj1</code>和<code class="fe me mf mg mh b">obj2</code>复制到第一个参数中的空对象中。</p><p id="7961" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此<code class="fe me mf mg mh b">merged</code>将拥有两者的所有属性。</p><h1 id="3ee6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6878" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用静态的<code class="fe me mf mg mh b">Object</code>方法来比较和复制对象。</p><p id="be27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以用它们定义对象的属性。</p><p id="dab6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以用<code class="fe me mf mg mh b">Object.assign</code>方法复制和合并对象。</p><p id="1ee6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它进行浅层复制，以便复制顶层。</p></div></div>    
</body>
</html>