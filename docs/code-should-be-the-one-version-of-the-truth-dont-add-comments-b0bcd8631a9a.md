# 代码应该是事实的一个版本，不要添加注释

> 原文：<https://blog.devgenius.io/code-should-be-the-one-version-of-the-truth-dont-add-comments-b0bcd8631a9a?source=collection_archive---------0----------------------->

![](img/41bb664151b2db3ac4285307561fe869.png)

> “代码从不说谎；评论有时候会。”—罗恩·杰弗里斯

代码应该是自我记录的，类、方法和变量的目的应该是显而易见的，你可以在六个月的时间里理解它。

我不喜欢代码中的注释的原因是因为你必须维护代码和注释。我见过开发人员修改代码而不修改注释的例子。当代码和注释不同步时，读者不确定是代码还是注释错了。在大多数情况下，可以为变量和方法命名，以清楚它在做什么，这样注释就多余了。

人们很容易低估创建明显的命名所需要的努力，第一次尝试通常不尽如人意，你不应该发布你的初稿。命名要清楚，这样那些没有编写过代码的人就可以阅读并理解它。

您应该向类和公共方法添加描述，因为这可以生成文档。当你写了一些不寻常的代码，做了一些奇怪的事情，人们很想重构它，你应该记录代码。

> “不要重复自己。每一项知识都必须在一个系统中有一个单一的、明确的、权威的表示。”—安迪·亨特和迪夫·托马斯

添加评论打破了 DRY 原则，因为它创建了事实的两个版本，当您创建了事实的两个版本时，结果是维护开销逐渐分散。

# **命名出错**

类、方法和变量的命名应该使其目的显而易见，不需要注释。

代码的清晰命名依赖于对代码应用单一责任原则(SRP)。SRP 意味着每个类、方法和变量都应该有一个职责。 [Robert C. Martin](https://en.wikipedia.org/wiki/Robert_Cecil_Martin) 很好地概括了这一点，他说 SRP 应该意味着一个类应该有一个改变的理由。

阅读更多关于 SRP 的信息

*   [单一责任原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)
*   [扎实设计单一责任原则— SRP](https://blog.ndepend.com/solid-design-the-single-responsibility-principle-srp/)

违反 SRP 和方法/类做得太多的常见迹象是当它很难命名时，因为它做了不止一件事。名字就像。

*   更新和保存
*   联系人号码或电子邮件
*   CreateReportAndUpdate

难以命名的方法是因为类或方法在做多种事情。这段代码有多种改变的理由，难以测试，难以理解。不好的代码很难命名。

> 代码的真实性可能会被评论中的谎言所混淆——HoskWisdom

# **总结**

开发人员认为添加注释有助于理解代码。我的经验是注释很少给代码添加任何东西，或者他们写了注释而没有正确地应用 SRP 和命名。

注释就像注释掉的代码，它增加了混乱并增加了维护成本。每一行代码都有维护成本和产生 bug 的可能性，代码和注释越少越好。

直觉上，注释看起来很有用，但并不是许多开发人员认为的那样。赋予评论力量的品质也是它最大的弱点。注释创造了事实的两个版本，一个维护开销，并鼓励开发人员在命名上投入更少的精力。大多数开发人员把时间花在重构代码和改进命名上会更有成效。

代码中的大多数注释是由初级开发人员编写的，他们认为这样做是有帮助的，或者是由糟糕的开发人员编写的，他们试图解释他们糟糕的代码。