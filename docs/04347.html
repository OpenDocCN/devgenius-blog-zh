<html>
<head>
<title>Laravel Data-Driven Strategies #3: improve your UX using heat maps and click maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel 数据驱动策略#3:使用热图和点击地图提高 UX</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/laravel-data-driven-strategies-3-improve-your-ux-using-heat-maps-and-click-maps-b5f2d7370959?source=collection_archive---------2-----------------------#2021-03-04">https://blog.devgenius.io/laravel-data-driven-strategies-3-improve-your-ux-using-heat-maps-and-click-maps-b5f2d7370959?source=collection_archive---------2-----------------------#2021-03-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b3be9022826bd7e606250acac2037c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BTG1XY2Dr3JpIzpw"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@halacious?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">HalGatewood.com</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><blockquote class="ka kb kc"><p id="cb8d" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ig bi translated">“可用性是关于人们以及他们如何理解和使用事物，而不是技术”~史蒂夫·克鲁格</p></blockquote><p id="3fe9" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">在我和我的一个队友的最后一次会议上，我们开始为一个项目构建一个原型。我们使用原型的目的是研究关于项目的特定目的的流程，收集和分析一些分析，并概述我们的下一步行动。作为一名开发人员，我想剖析原型，但显然，我的观点并不是唯一的。所以我问是否有人需要分析，答案是“<em class="kf">热图</em>？”。</p><h1 id="92b7" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">什么是和使用什么</h1><p id="40aa" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">热图是一种可视化关于某人如何使用服务或功能的数据的方式。对于一个网页，热图可以显示用户如何移动鼠标或触摸页面。他们通常使用颜色梯度来表示数据。</p><p id="587e" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated"><strong class="kg io">那么，我为什么需要热图呢？热图可以帮助 UX 分析师更好地了解用户关注的焦点。</strong></p><p id="b5b6" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">一个很棒的库是<a class="ae jz" href="https://www.patrick-wied.at/static/heatmapjs/" rel="noopener ugc nofollow" target="_blank"> heatmap.js </a>:开源，可以在<a class="ae jz" href="https://github.com/pa7/heatmap.js" rel="noopener ugc nofollow" target="_blank"> Github </a>上获得，并有麻省理工学院的许可。</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mi"><img src="../Images/34fcc2be0e0512f9745275004204a360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ZSRX1uEPFRIfN6qYtmRvA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">带有实时热图跟踪的 Heatmap.js 网站</figcaption></figure><h1 id="1cfc" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">构建您的第一个热图</h1><p id="3ad9" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">Heatmap.js 有很棒的<a class="ae jz" href="https://www.patrick-wied.at/static/heatmapjs/docs.html" rel="noopener ugc nofollow" target="_blank">文档</a>，里面有很多例子。</p><p id="5fa7" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">要开始构建您的第一个热图，请访问网页并收集要绘制的事件。为了收集数据，我目前正在使用 RRWeb，因为我正在编写的包(你可以通过阅读<a class="ae jz" href="https://kalizi.medium.com/laravel-package-development-part-1-projecting-a-user-session-recording-package-19f0a9868f0f" rel="noopener">这个</a>或查看<a class="ae jz" href="http://github.com/kalizi/laravel-spyhole" rel="noopener ugc nofollow" target="_blank"> Github </a>了解更多信息)，或者你可以使用任何你喜欢的包，比如<em class="kf"> Cimice </em>(我在<a class="ae jz" href="https://kalizi.medium.com/laravel-data-driven-strategies-2-setup-user-session-recording-in-your-application-ca79de4acc8d" rel="noopener">写了一篇关于如何使用它的文章</a>或者再次在<a class="ae jz" href="https://github.com/artf/cimice" rel="noopener ugc nofollow" target="_blank"> Github </a>上查看)。</p><p id="15d9" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">收集完所有数据后，以 heatmap.js 可用的方式对其进行格式化:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="23ff" class="ms lg in mo b gy mt mu l mv mw">{<br/>    x: 10,<br/>    y: 10,<br/>    value: 15<br/>}</span></pre><p id="36fd" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">Heatmap.js 将根据坐标的点击数和点之间的接近度来构建热图。热图的好坏与数据密切相关，所以如果数据很少，你的地图不会真正反映用户的行为。</p><p id="3ada" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">让我们看看它是如何工作的。该库可通过 CDN 或手动下载文件获得。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="f510" class="ms lg in mo b gy mt mu l mv mw">&lt;script type="text/javascript" src="<a class="ae jz" href="https://cdn.jsdelivr.net/npm/heatmap.js@2.0.5/build/heatmap.min.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/heatmap.js@2.0.5/build/heatmap.min.js</a>"&gt;&lt;/script&gt;</span></pre><p id="fbe1" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">初始化非常简单:选择 heatmap 容器，轮询数据和格式，然后告诉 heatmap.js 构建地图！对于第一个例子，我将使用整个 DOM 作为地图容器:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="2623" class="ms lg in mo b gy mt mu l mv mw">&lt;body style="min-height:100vh"&gt;<br/>    &lt;script type="text/javascript" src="<a class="ae jz" href="https://cdn.jsdelivr.net/npm/heatmap.js@2.0.5/build/heatmap.min.js" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/heatmap.js@2.0.5/build/heatmap.min.js</a>"&gt;&lt;/script&gt;</span><span id="c887" class="ms lg in mo b gy mx mu l mv mw">    &lt;script type="text/javascript"&gt;<br/>      <strong class="mo io">const config = {<br/>        container: document.documentElement,<br/>      };<br/>      const heatmap = h337.create(config);<br/>      // Set data here</strong><br/>    &lt;/script&gt;<br/>&lt;/body&gt;</span></pre><p id="9a9e" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">现在收集数据，您可以从数据库(或任何数据源)轮询它们。我使用收集大量数据的 RRWeb，所以它们必须是未序列化的，并且像前面指出的那样结构化。我只有一些数据，所以我把处理放在前端:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="fc60" class="ms lg in mo b gy mt mu l mv mw">const rawData = /* data from RRWeb as array */;<br/>const data = <br/> rawData<br/>  .filter(v =&gt; v.type === 3 &amp;&amp; v.data.hasOwnProperty('positions'))<br/>  .map(v =&gt; v.data.positions)<br/>  .flat()<br/>  .map(v =&gt; { return {x: v.x, y: v.y, value: 1}; })<br/>  .reduce((acc, v) =&gt; {<br/>      let position = acc.filter(el =&gt; el.x === v.x &amp;&amp; el.y === v.y);<br/>      if (position.length &gt; 0) {<br/>          position = position[0];<br/>          let idx = acc.indexOf(position);<br/>          ++position.value;<br/>          acc.splice(idx, 1, position);<br/>      } else {<br/>          acc.push(v);<br/>      }<br/>      return acc;<br/>  }, []);</span></pre><p id="c762" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">出于测试目的，我非常快速地编写了这段代码，所以它根本没有经过优化。RRWeb 存储大量数据，因此:</p><ul class=""><li id="a3c8" class="my mz in kg b kh ki kl km lc na ld nb le nc lb nd ne nf ng bi translated"><em class="kf">过滤器</em>为类型 3 过滤器用于鼠标事件保持位置，</li><li id="90e0" class="my mz in kg b kh nh kl ni lc nj ld nk le nl lb nd ne nf ng bi translated"><em class="kf">地图</em>取位置，</li><li id="ff13" class="my mz in kg b kh nh kl ni lc nj ld nk le nl lb nd ne nf ng bi translated">一个记录可以保存多个位置，所以只需<em class="kf"> flat，</em></li><li id="3e0a" class="my mz in kg b kh nh kl ni lc nj ld nk le nl lb nd ne nf ng bi translated"><em class="kf">映射</em>将内容重新格式化为所需的格式，</li><li id="03ca" class="my mz in kg b kh nh kl ni lc nj ld nk le nl lb nd ne nf ng bi translated"><em class="kf">减少</em>具有相同位置数据的聚合记录，更新它们的值。</li></ul><p id="b47f" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">一旦有了数据，您只需:</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="55ac" class="ms lg in mo b gy mt mu l mv mw"><strong class="mo io">heatmap.setData({<br/>    min: 0, <br/>    max: 100,<br/>    data: data<br/>});</strong></span></pre><p id="f301" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">我的测试数据集很小，只有 2370 条记录(几分钟的用户会话),所以在这种情况下,<code class="fe nm nn no mo b">min</code>和<code class="fe nm nn no mo b">max</code>值很小。</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/fb784a1cc2018cdfc8e07c863024e6ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-AkM9tDeBhb8JepfcH6oDw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">生成的热图</figcaption></figure><p id="0fe5" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这似乎完全没有意义。但是，如果你在收集数据的页面上重复这一点，就开始有意义了。</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/52d0e8bf43d3200bdc3bf2b3c3688735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sy272bXzHncmo-gr3jMt0Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">生成的热图</figcaption></figure><p id="40d4" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">请记住，要真实再现用户行为，您应该以正确的比例报告数据:如果您想要构建 1920x1080 的热图，而您的数据是 1280x720，您应该考虑使用 1.5 倍的缩放系数，或者基于数据构建不同的热图。</p><h1 id="35fc" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">用数据改善您的数据驱动型决策</h1><p id="7fb5" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">我们只是对这个热图略知一二，您可以将它们与会议记录结合使用，将它们导出为图像或 PDF，将它们与其他分析结合使用，以便更好地了解系统。您甚至可以跟踪任何页面变化如何反映用户行为，检查热图随时间的变化！</p><p id="9c08" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">现在该由你来创造伟大的东西了！🥂</p><p id="b249" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">请继续关注其他数据驱动的策略，如果你愿意，花一点时间️️to 留下评论，谈谈你如何做出由工具支持的数据驱动的决策！☕️</p></div></div>    
</body>
</html>