<html>
<head>
<title>How to Iterate Over a TypeScript Map</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何迭代 TypeScript 映射</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-iterate-over-a-typescript-map-c62ca11cc69c?source=collection_archive---------7-----------------------#2022-06-22">https://blog.devgenius.io/how-to-iterate-over-a-typescript-map-c62ca11cc69c?source=collection_archive---------7-----------------------#2022-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a025" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">并在不使用 forEach 循环的情况下返回值</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8d3d8a46ffeac3a6ad64e365caf959f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7DI0O80dgft8DUe5nysvsw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@cdd20?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">愚木混株 cdd20</a> on <a class="ae kv" href="https://unsplash.com/s/photos/escher?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="74cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi ls translated"><span class="l lt lu lv bm lw lx ly lz ma di"> H </span> ello world，欢迎回来，这是“为什么 TypeScript 和 PHP 是好朋友”系列中的另一篇文章，在这里我们来看看这两种编程语言是如何相似的。不要错过了解更多相关信息的机会，点击下面的链接。</p><div class="mb mc gp gr md me"><a href="https://medium.com/geekculture/why-typescript-and-php-are-good-friends-964360fb75f6" rel="noopener follow" target="_blank"><div class="mf ab fo"><div class="mg ab mh cl cj mi"><h2 class="bd ir gy z fp mj fr fs mk fu fw ip bi translated">为什么 TypeScript 和 PHP 是好朋友</h2><div class="ml l"><h3 class="bd b gy z fp mj fr fs mk fu fw dk translated">完整指南</h3></div><div class="mm l"><p class="bd b dl z fp mj fr fs mk fu fw dk translated">medium.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms kp me"/></div></div></a></div><p id="75f6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在许多其他事情中，我们已经知道 TypeScript 错误等同于 PHP 异常，并且我们还实现了一种变通方法，使 TypeScript Chess 和 PHP Chess 看起来非常相似。</p><div class="mb mc gp gr md me"><a href="https://github.com/chesslablab/php-chess" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fo"><div class="mg ab mh cl cj mi"><h2 class="bd ir gy z fp mj fr fs mk fu fw ip bi translated">GitHub-chess lab/PHP-chess:PHP 的国际象棋库。</h2><div class="ml l"><h3 class="bd b gy z fp mj fr fs mk fu fw dk translated">PHP 国际象棋库。via composer:$ composer require chess lab/PHP-chess 对$game-&gt;play 方法的调用…</h3></div><div class="mm l"><p class="bd b dl z fp mj fr fs mk fu fw dk translated">github.com</p></div></div><div class="mn l"><div class="mt l mp mq mr mn ms kp me"/></div></div></a></div><div class="mb mc gp gr md me"><a href="https://github.com/chesslablab/ts-chess" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fo"><div class="mg ab mh cl cj mi"><h2 class="bd ir gy z fp mj fr fs mk fu fw ip bi translated">GitHub-chess lab/ts-chess:一个用于 TypeScript 的国际象棋库。</h2><div class="ml l"><h3 class="bd b gy z fp mj fr fs mk fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mm l"><p class="bd b dl z fp mj fr fs mk fu fw dk translated">github.com</p></div></div><div class="mn l"><div class="mu l mp mq mr mn ms kp me"/></div></div></a></div><p id="abf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">毕竟，让两个代码库看起来相似并没有那么复杂，因为 TypeScript 和 PHP 都是现代的面向对象编程语言。</p><h1 id="3d9b" class="mv mw iq bd mx my mz na nb nc nd ne nf jw ng jx nh jz ni ka nj kc nk kd nl nm bi translated">数据结构呢？</h1><p id="c635" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">PHP 和 TypeScript 提供了数据结构，如果使用得当，肯定会使开发人员的生活更加轻松。</p><p id="c76a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">PHP 附带了<a class="ae kv" href="https://www.php.net/manual/en/class.splobjectstorage.php" rel="noopener ugc nofollow" target="_blank"> SplObjectStorage </a>类，而 TypeScript 提供了开箱即用的 Map 类。两者的目的是一样的，都是用来存储对象的，所以我想可以说 TypeScript 的 Map 相当于 PHP 的 SplObjectStorage。</p><p id="d7d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将 PHP Chess 转录为 TypeScript Chess 的原因是为了在协作环境中练习软件开发技能——OOP、软件设计模式等等——以便您可以将这些技能转移到理想的工作中！</p><p id="0077" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">需要注意的重要一点是，这两个代码库依赖于一个名为<code class="fe ns nt nu nv b">Board</code>的对象存储的概念，其中包含了以前用面向对象方法设计的棋子。</p><p id="4815" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据<a class="ae kv" href="https://php-chess.readthedocs.io/en/latest/board/" rel="noopener ugc nofollow" target="_blank">文件</a>:</p><blockquote class="nw nx ny"><p id="d9db" class="kw kx nz ky b kz la jr lb lc ld ju le oa lg lh li ob lk ll lm oc lo lp lq lr ij bi translated">国际象棋\棋盘是一种棋盘表示，允许以可移植游戏符号(PGN)格式下棋。但不仅如此，它还是创建多个特性的基石:FEN 字符串处理、ASCII 表示、PNG 图像创建、位置评估等。</p></blockquote><p id="8ae4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在开发过程的某个时候，您可能会以下面的代码结束。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/3861e2c7fdef8a6ec007870ac06267c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Yrcrdfeyq6c90kuuv0xJA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd mx">图一</strong>。<a class="ae kv" href="https://github.com/chesslablab/php-chess/blob/master/src/Board.php" rel="noopener ugc nofollow" target="_blank"> src/Board.php </a></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/01d5c1134b57f16a5d487557aca37ec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*lSqZWsjOC6JbUs1TedAFYg.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd mx">图二</strong>。<a class="ae kv" href="https://github.com/chesslablab/ts-chess/blob/master/src/Board.ts" rel="noopener ugc nofollow" target="_blank"> src/Board.ts </a></figcaption></figure><p id="fe09" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，<code class="fe ns nt nu nv b">Board.php</code>一方面扩展了<code class="fe ns nt nu nv b">SplObjectStorage</code>类，而<code class="fe ns nt nu nv b">Board.ts</code>另一方面扩展了<code class="fe ns nt nu nv b">Map</code>类。到目前为止一切顺利。现在让我们写一个名为<code class="fe ns nt nu nv b">getPieceBySq()</code>的方法来返回一个给定了代数符号的正方形。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/f298f9ae9f4a473f2da890a7a8fd1694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*zuZXjcd6pKfoHCwAEPw2jw.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd mx">图 3 </strong>。在 src/Board.php 中实现的 getPieceBySq()</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/0771a7bdf5f82629e2863456ee2c5ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*bznnXZCw2aA52WAwnT1MJw.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd mx">图 4 </strong>。在 src/Board.ts 中实现的 getPieceBySq()</figcaption></figure><p id="a421" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这两种情况下，都需要遍历容器的对象(棋盘上的棋子)来搜索占据指定方格的棋子，这意味着调用适当的 API 方法。</p><p id="dc53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有几种不同的方法可以循环键值对的 TypeScript 映射:</p><pre class="kg kh ki kj gt oh nv oi oj aw ok bi"><span id="63d0" class="ol mw iq nv b gy om on l oo op">let board = new Board();</span></pre><ul class=""><li id="15f0" class="oq or iq ky b kz la lc ld lf os lj ot ln ou lr ov ow ox oy bi translated"><code class="fe ns nt nu nv b">board.keys()</code>在按键上循环</li><li id="5990" class="oq or iq ky b kz oz lc pa lf pb lj pc ln pd lr ov ow ox oy bi translated"><code class="fe ns nt nu nv b">board.values()</code>在值上循环</li><li id="db28" class="oq or iq ky b kz oz lc pa lf pb lj pc ln pd lr ov ow ox oy bi translated"><code class="fe ns nt nu nv b">board.entries()</code>在条目上循环</li></ul><p id="a2f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有趣的是，您知道在 TypeScript 版本中,<code class="fe ns nt nu nv b">forEach</code>循环不能用于返回值吗？事情不应该是这样的。</p><p id="bac9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">根据<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach?v=example" rel="noopener ugc nofollow" target="_blank"> MDN 网络文档</a>:</p><blockquote class="nw nx ny"><p id="860d" class="kw kx nz ky b kz la jr lb lc ld ju le oa lg lh li ob lk ll lm oc lo lp lq lr ij bi translated">除了抛出异常之外，没有其他方法可以停止或中断 forEach()循环。如果您需要这样的行为，forEach()方法是错误的工具。</p></blockquote><p id="14d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不知道这一点，最初在<code class="fe ns nt nu nv b">Board.ts</code>中写了下面的<code class="fe ns nt nu nv b">getPieceBySq()</code>方法，它并不像单元测试报告的那样正常工作。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/a03a2952c81d716c35952e52d15d43a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*bJcY6djeBRTaBEwl3jnZSQ.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd mx">图 5 </strong>。在 src/Board.ts 中错误地实现了 getPieceBySq()</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pe"><img src="../Images/2d1dc60295a5b13eb167bfda92f4302f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*0fTlgiu2a2LWp47AdMcEJQ.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><strong class="bd mx">图六</strong>。board.getPieceBySq()中的测试最初失败是因为在 forEach()循环中返回值。</figcaption></figure><p id="6c92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而,<code class="fe ns nt nu nv b">for...of</code>语句成功了。</p><h1 id="dca8" class="mv mw iq bd mx my mz na nb nc nd ne nf jw ng jx nh jz ni ka nj kc nk kd nl nm bi translated">结论</h1><p id="dcb7" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">TypeScript 的 Map 相当于 PHP 的 SplObjectStorage。两者都是数据结构，帮助您将对象存储在集合中，以供进一步处理，如检索或删除数据。</p><p id="a3b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">PHP Chess 和 TypeScript Chess 依赖于名为<code class="fe ns nt nu nv b">Board</code>的包含面向对象棋子的对象存储的思想。</p><p id="6675" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">棋盘的 TypeScript 版本是扩展了<code class="fe ns nt nu nv b">Map</code>类的键值对的映射。今天，我们实现了名为<code class="fe ns nt nu nv b">getPieceBySq()</code>的第一个方法，它返回一个给定了代数符号中的正方形的棋子。</p><p id="f604" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有必要迭代一个类型脚本映射来搜索一个特定的对象，<code class="fe ns nt nu nv b">for...of</code>语句拯救了这个对象。记住，除了抛出异常之外，没有其他方法可以停止<code class="fe ns nt nu nv b">forEach</code>循环。</p></div></div>    
</body>
</html>