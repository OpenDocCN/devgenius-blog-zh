<html>
<head>
<title>Storybook for React â€” Globals and Addons and Stories</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Reactçš„æ•…äº‹ä¹¦â€”å…¨å±€ã€æ’ä»¶å’Œæ•…äº‹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/storybook-for-react-globals-and-addons-and-stories-36bb00af116f?source=collection_archive---------4-----------------------#2021-01-10">https://blog.devgenius.io/storybook-for-react-globals-and-addons-and-stories-36bb00af116f?source=collection_archive---------4-----------------------#2021-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/97a57bbad6dc4a3d37ad7aefd8b63be8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eUd7-PFaX2Q9Dcjl"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@alekonpictures?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Alekon pictures </a>æ‹æ‘„äº<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="517c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Storybookè®©æˆ‘ä»¬å¯ä»¥ç”¨å„ç§å‚æ•°è½»æ¾åœ°æ„å»ºç»„ä»¶åŸå‹ã€‚</p><p id="aeb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•ä½¿ç”¨Storybookæ¥å¤„ç†globalsã€‚</p><h1 id="6ca2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">åœ¨æ•…äº‹ä¸­ä½¿ç”¨å…¨å±€å˜é‡</h1><p id="11f3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ•…äº‹é‡Œæ¶ˆè´¹å…¨å±€ã€‚</p><p id="b930" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä»storyå‡½æ•°ä¸­è·å–<code class="fe me mf mg mh b">globals</code>å±æ€§ã€‚</p><p id="4dbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å†™:</p><p id="c41e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">.storybook/preview.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="edc2" class="mq lc iq mh b gy mr ms l mt mu">export const globalTypes = {<br/>  locale: {<br/>    name: 'Locale',<br/>    description: 'locale',<br/>    defaultValue: 'en',<br/>    toolbar: {<br/>      icon: 'globe',<br/>      items: [<br/>        { value: 'en', right: 'ğŸ‡ºğŸ‡¸', title: 'English' },<br/>        { value: 'fr', right: 'ğŸ‡«ğŸ‡·', title: 'FranÃ§ais' },<br/>        { value: 'zh', right: 'ğŸ‡¨ğŸ‡³', title: 'ä¸­æ–‡' },<br/>      ],<br/>    },<br/>  },<br/>};</span></pre><p id="7bf5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">src/stories/Button.stories.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c14a" class="mq lc iq mh b gy mr ms l mt mu">import React from 'react';</span><span id="2f56" class="mq lc iq mh b gy mv ms l mt mu">import { Button } from './Button';</span><span id="6760" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  title: 'Example/Button',<br/>  component: Button,<br/>  argTypes: {<br/>    backgroundColor: { control: 'color' },<br/>  },<br/>};</span><span id="8c4f" class="mq lc iq mh b gy mv ms l mt mu">const getCaptionForLocale = (locale) =&gt; {<br/>  switch (locale) {<br/>    case 'en': return 'Hello';<br/>    case 'fr': return 'Bonjour';<br/>    case 'zh': return 'ä½ å¥½';<br/>    default:<br/>      return 'Hello'<br/>  }<br/>}</span><span id="7e2c" class="mq lc iq mh b gy mv ms l mt mu">const Template = (args, { globals: { locale } }) =&gt; &lt;Button {...{ ...args, label: getCaptionForLocale(locale) }} /&gt;;</span></pre><p id="2076" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬ç”¨<code class="fe me mf mg mh b">.storybook/preview.js</code>æ–‡ä»¶å®šä¹‰äº†<code class="fe me mf mg mh b">locale</code>å…¨å±€å˜é‡ã€‚</p><p id="8b67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç„¶ååœ¨<code class="fe me mf mg mh b">src/stories/Button.stories.js</code>æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ç”¨å‚æ•°çš„<code class="fe me mf mg mh b">globals.locale</code>å±æ€§è·å¾—äº†<code class="fe me mf mg mh b">locale</code>å…¨å±€å±æ€§ã€‚</p><p id="c897" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">right</code>å±æ€§æ˜¯å½“æˆ‘ä»¬å°†å®ƒè¿æ¥åˆ°è£…é¥°å™¨æ—¶ï¼Œæ˜¾ç¤ºåœ¨å·¥å…·æ èœå•å³ä¾§çš„æ–‡æœ¬ã€‚</p><h1 id="a6bf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">åœ¨æ’ä»¶ä¸­ä½¿ç”¨å…¨å±€å˜é‡</h1><p id="ed3b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªé™„åŠ æ–‡ä»¶ä¸­ä½¿ç”¨å…¨å±€å˜é‡ã€‚</p><p id="7a0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å†™:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f9b4" class="mq lc iq mh b gy mr ms l mt mu">import React from 'react';<br/>import { useGlobals } from '@storybook/api';<br/>import { addons, types } from '@storybook/addons';<br/>import { AddonPanel, Spaced, Title } from '@storybook/components';</span><span id="8c4b" class="mq lc iq mh b gy mv ms l mt mu">const LocalePanel = props =&gt; {<br/>  const [{ locale }] = useGlobals();</span><span id="4995" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;style&gt;<br/>        {`<br/>        #panel-tab-content &gt; div &gt; div[hidden] {<br/>          display: flex !important<br/>        }<br/>      `}<br/>      &lt;/style&gt;<br/>      &lt;AddonPanel {...props}&gt;<br/>        &lt;Spaced row={3} outer={1}&gt;<br/>          &lt;Title&gt;{locale}&lt;/Title&gt;<br/>        &lt;/Spaced&gt;<br/>      &lt;/AddonPanel&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</span><span id="20a7" class="mq lc iq mh b gy mv ms l mt mu">const ADDON_ID = 'locale-panel';<br/>const PANEL_ID = `${ADDON_ID}/panel`;</span><span id="5612" class="mq lc iq mh b gy mv ms l mt mu">addons.register(ADDON_ID, (api) =&gt; {<br/>  addons.add(PANEL_ID, {<br/>    type: types.PANEL,<br/>    title: 'Locale',<br/>    render: ({ active, key }) =&gt; {<br/>      return &lt;AddonPanel active={active} key={key}&gt;<br/>        &lt;LocalePanel /&gt;<br/>      &lt;/AddonPanel&gt;<br/>    },<br/>  });<br/>});</span></pre><p id="2535" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ·»åŠ ä¸€ä¸ªæ’ä»¶ï¼Œç”¨<code class="fe me mf mg mh b">useGlobal</code>é’©å­è·å¾—å…¨å±€å±æ€§ã€‚</p><p id="177e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ä»¬ä½¿ç”¨<code class="fe me mf mg mh b">AddonPanel</code>ã€<code class="fe me mf mg mh b">Spaced</code>å’Œ<code class="fe me mf mg mh b">Title</code>å±æ€§æ¥æ˜¾ç¤ºaddoné¢æ¿ä¸­çš„å†…å®¹ã€‚</p><p id="da83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ–¹æ³•æ³¨å†Œäº†é™„åŠ ç»„ä»¶ï¼Œè¿™æ ·å®ƒå°±ä¼šæ˜¾ç¤ºåœ¨æ•…äº‹ä¹¦çš„é™„åŠ ç»„ä»¶é¢æ¿ä¸­ã€‚</p><p id="6cd5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ­¤å¤–ï¼Œæˆ‘ä»¬æœ‰<code class="fe me mf mg mh b">AddonPanel</code>æ¥æ¸²æŸ“é¢æ¿ã€‚</p><p id="7f6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å½“æˆ‘ä»¬æ˜¾ç¤ºå¸¦æœ‰<code class="fe me mf mg mh b">style</code>æ ‡ç­¾çš„é¢æ¿æ—¶ï¼Œæˆ‘ä»¬è®©å®ƒæ˜¾ç¤ºå‡ºæ¥ã€‚</p><h1 id="4499" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">æ•…äº‹æ¸²æŸ“</h1><p id="7067" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æˆ‘ä»¬å¯ä»¥æ”¹å˜æ•…äº‹çš„å‘ˆç°æ–¹å¼ã€‚</p><p id="39f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸ºäº†æ·»åŠ åˆ°<code class="fe me mf mg mh b">head</code>æ ‡ç­¾ï¼Œæˆ‘ä»¬å°†HTMLä»£ç æ·»åŠ åˆ°<code class="fe me mf mg mh b">.storybook/preview-head.html</code>æ–‡ä»¶ä¸­:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="46cd" class="mq lc iq mh b gy mr ms l mt mu">&lt;link rel="stylesheet"<br/>    href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"<br/>    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"<br/>    crossorigin="anonymous"&gt;</span></pre><p id="f202" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ç„¶åå®ƒä»¬ä¼šæ˜¾ç¤ºåœ¨iframeå†…éƒ¨çš„headæ ‡ç­¾ä¸­ã€‚</p><h1 id="ae39" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ç»“è®º</h1><p id="3199" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">æˆ‘ä»¬å¯ä»¥ç”¨æ•…äº‹ä¹¦æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„æ’ä»¶é¢æ¿ã€‚</p><p id="a8e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨iframeçš„headæ ‡ç­¾ä¸­æ·»åŠ æ ‡ç­¾ã€‚</p></div></div>    
</body>
</html>