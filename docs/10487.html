<html>
<head>
<title>Mainframe Database Programming Fundamentals 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">大型机数据库编程基础 1</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/mainframe-database-programming-fundamentals-b34fd88acf6e?source=collection_archive---------5-----------------------#2022-11-05">https://blog.devgenius.io/mainframe-database-programming-fundamentals-b34fd88acf6e?source=collection_archive---------5-----------------------#2022-11-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="dcfc" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">结构化编程方法</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ed76d88a99bcf29886d6deb4d1a9e568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o6EL_ISipRuUBxbO"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">莱尼·屈尼在 Unsplash 的照片</figcaption></figure><p id="d8e4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe lp lq lr ls b">Structured Programming</code>方法是一种提高程序代码可靠性和清晰性的技术(参见<a class="ae ks" href="https://link.springer.com/article/10.3758/BF03205654" rel="noopener ugc nofollow" target="_blank"> Hunt 1979 </a>)。这就涉及到<code class="fe lp lq lr ls b">Program Control Structures</code>的使用，比如<code class="fe lp lq lr ls b">Sequential</code>、<code class="fe lp lq lr ls b">Selection</code>、<code class="fe lp lq lr ls b">Loop</code>。此外，程序代码被分解成小的可管理的块，即<code class="fe lp lq lr ls b">modularization</code>。这篇文章描述了结构化编程方法在使用 ADABAS 数据库和自然编程语言构建大型机数据库程序中的应用。代码示例摘自 Nat914win 官方文档(参考<a class="ae ks" href="https://documentation.softwareag.com/natural/nat914win/firststeps/fs-about.htm" rel="noopener ugc nofollow" target="_blank"> Nat914win fs-about </a>)。</p><pre class="kd ke kf kg gt lt ls lu lv aw lw bi"><span id="5280" class="lx ly in ls b gy lz ma l mb mc">PRE-REQUISITE:<br/>(1) ADABAS and NATURAL Server Community Edition (Docker Version). <br/>(2) NaturalONE IDE.<br/>(refer <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-1-6597688406ad" rel="noopener">here</a> to read the <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-1-6597688406ad" rel="noopener">setup guide</a> for the above items).<br/>(3) Adabas DDM for EMPLOYEES and VEHICLES database files.<br/>(refer <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-6-48b4b2fd3e6d" rel="noopener">here</a> to get <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-6-48b4b2fd3e6d" rel="noopener">Natural NSD format files</a> for the above items).</span></pre><h1 id="a7b4" class="md ly in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">(1)程序控制结构</h1><p id="baa4" class="pw-post-body-paragraph kt ku in kv b kw mu jo ky kz mv jr lb lc mw le lf lg mx li lj lk my lm ln lo ig bi translated"><strong class="kv io"> (1.1)顺序控制结构</strong></p><p id="6cf8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">默认情况下，大多数程序从顺序控制结构开始，即指令语句一个接一个地排列。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mz"><img src="../Images/b0a90e91c43a03e20f92e7f76b1e9405.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bNz7g8Mcfy-VuJlh"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">照片由<a class="ae ks" href="https://unsplash.com/@siora18?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Siora 摄影</a>在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="a9f2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一个简单的例子就是经典的 Hello World！程序如下(参考<a class="ae ks" href="https://documentation.softwareag.com/natural/nat914win/firststeps/fs-hello.htm" rel="noopener ugc nofollow" target="_blank"> Nat914win fs-hello </a>)。这里，指令语句从顶部开始执行，然后向下移动到底部。*符号表示计算机在执行过程中将跳过的行。显示语句指示计算机向用户输出一些内容，例如<code class="fe lp lq lr ls b">Hello world!</code>。END 语句标志着程序执行的结束。</p><pre class="kd ke kf kg gt lt ls lu lv aw lw bi"><span id="c181" class="lx ly in ls b gy lz ma l mb mc">* The "Hello world!" example in Natural.<br/>*<br/>DISPLAY "Hello world!"<br/>END /* End of program</span></pre><p id="0de4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> (1.2)选择控制结构</strong></p><p id="87a1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">该控制结构指示计算机从可用分支中选择一个代码块分支。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi na"><img src="../Images/fb31d2edb102708305047d6c3f387ed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-etq73SoPRWtHsKG"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由<a class="ae ks" href="https://unsplash.com/@edgr?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">edu·格兰德</a>在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="ba8f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面的例子(参考<a class="ae ks" href="https://documentation.softwareag.com/natural/nat911win/sm/if.htm" rel="noopener ugc nofollow" target="_blank"> Nat914win if </a>)演示了选择控制结构的使用。在本例中，程序被指示查找位于城市“法兰克福”的雇员，如果他们的工资高于 40，000，并且他们的出生日期在 1945 年 1 月 1 日之后，则打印他们的姓名、出生日期、工资和他们的汽车品牌。这个程序应用一个嵌套的 IF-ELSE 结构来支持其复杂的查询条件分支。</p><pre class="kd ke kf kg gt lt ls lu lv aw lw bi"><span id="a6ee" class="lx ly in ls b gy lz ma l mb mc">** Example 'IFEX1S': IF (structured mode)                               <br/>************************************************************************<br/>DEFINE DATA LOCAL                                                       <br/>1 EMPLOY-VIEW VIEW OF EMPLOYEES                                         <br/>  2 PERSONNEL-ID                                                        <br/>  2 NAME                                                                <br/>  2 FIRST-NAME                                                          <br/>  2 SALARY (1)                                                          <br/>  2 BIRTH                                                               <br/>1 VEHIC-VIEW VIEW OF VEHICLES                                           <br/>  2 PERSONNEL-ID                                                        <br/>  2 MAKE                                                                <br/>*                                                                       <br/>1 #BIRTH (D)                                                            <br/>END-DEFINE                                                              <br/>*                                                                       <br/>MOVE EDITED '19450101' TO #BIRTH (EM=YYYYMMDD)                          <br/>SUSPEND IDENTICAL SUPPRESS                                              <br/>LIMIT 20                                                                <br/>*                                                            <br/>FND. FIND EMPLOY-VIEW WITH CITY = 'FRANKFURT'                <br/>          SORTED BY NAME BIRTH                               <br/>  IF SALARY (1) LT 40000                                     <br/>    WRITE NOTITLE '*****' NAME 30X 'SALARY LT 40000'         <br/>  ELSE                                                       <br/>    IF BIRTH GT #BIRTH                                       <br/>      FIND VEHIC-VIEW WITH PERSONNEL-ID = PERSONNEL-ID (FND.)<br/>        DISPLAY (IS=ON)                                      <br/>                NAME BIRTH (EM=YYYY-MM-DD)                   <br/>                SALARY (1) MAKE (AL=8)                       <br/>      END-FIND                                               <br/>    END-IF                                                   <br/>  END-IF                                                  <br/>END-FIND                                                     <br/>END</span></pre><p id="cdbb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> (1.3)回路控制结构</strong></p><p id="6467" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">循环控制结构用于重复执行某些指令语句。重复结构有助于优化指令语句的安排，即消除不必要的语句冗余。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/fb1bc91adbb076fb4eb4b07bf55b4b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JWDT8naB_GnXzu3M"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">照片由<a class="ae ks" href="https://unsplash.com/@ruben_christen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ruben Christen </a>在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d1df" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面的例子(参考<a class="ae ks" href="https://documentation.softwareag.com/natural/nat914win/sm/repeat.htm" rel="noopener ugc nofollow" target="_blank"> Nat914win repeat </a>)演示了使用循环结构来重复某些计算机处理任务。这里，要求计算机用户输入计算机的雇员号，以便它可以启动数据库搜索任务。搜索任务将一直重复，直到计算机用户决定终止它，即通过输入一个<code class="fe lp lq lr ls b">SPACE</code>字符。</p><pre class="kd ke kf kg gt lt ls lu lv aw lw bi"><span id="9cb1" class="lx ly in ls b gy lz ma l mb mc">** Example 'RPTEX1S': REPEAT (structured mode)                          <br/>************************************************************************<br/>DEFINE DATA LOCAL                                                       <br/>1 EMPLOY-VIEW VIEW OF EMPLOYEES                                         <br/>  2 PERSONNEL-ID                                                        <br/>  2 NAME                                                                <br/>*                                                                       <br/>1 #PERS-NR (A8)                                                         <br/>END-DEFINE                                                              <br/>*                                                                       <br/>REPEAT                                                            <br/>  INPUT 'ENTER A PERSONNEL NUMBER:' #PERS-NR                            <br/>  IF #PERS-NR = ' '                                                     <br/>    ESCAPE BOTTOM                                                       <br/>  END-IF                                                                <br/>  /*                                                                    <br/>  FIND EMPLOY-VIEW WITH PERSONNEL-ID = #PERS-NR                         <br/>    IF NO RECORD FOUND                                                  <br/>      REINPUT 'NO RECORD FOUND'                                         <br/>    END-NOREC           <br/>    DISPLAY NOTITLE NAME<br/>  END-FIND              <br/>END-REPEAT          <br/>*                       <br/>END</span></pre><h1 id="a95e" class="md ly in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">(2)程序模块化</h1><p id="296a" class="pw-post-body-paragraph kt ku in kv b kw mu jo ky kz mv jr lb lc mw le lf lg mx li lj lk my lm ln lo ig bi translated">程序模块化是将程序分解成具有特定目标的更小的可管理的代码组的过程。通过这种方式，诸如编码和调试之类的开发工作将会更加容易。这提高了编程效率。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nc"><img src="../Images/1725af1db3872855b46df6ce23448e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*__4Z3sIKxY56n97m"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">照片由<a class="ae ks" href="https://unsplash.com/@tstudio_lv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> TStudio_lv </a>在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="ac7a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面的例子(参考<a class="ae ks" href="https://documentation.softwareag.com/natural/nat914win/firststeps/fs-inlinesub" rel="noopener ugc nofollow" target="_blank"> Nat914win inlinesub </a>)演示了一种叫做<code class="fe lp lq lr ls b">SUBROUTINE</code>的代码块的使用。它有一个特定的目标，即标记一个特殊的员工。为了实现这一目标，它分配了一个带有值' * '的数据#标记。假设在将来，如果开发人员计划用不同的方法来标记数据，他们可以只修改子程序，而不必关心程序的其他部分。这节省了他们的编码时间，同时最小化了代码变更的风险。</p><pre class="kd ke kf kg gt lt ls lu lv aw lw bi"><span id="c571" class="lx ly in ls b gy lz ma l mb mc">DEFINE DATA<br/>LOCAL<br/>  1 #NAME-START        (A20)<br/>  1 #NAME-END          (A20)<br/>  1 #MARK              (A1)<br/>  1 EMPLOYEES-VIEW VIEW OF EMPLOYEES<br/>    2 FULL-NAME<br/>      3 NAME (A20)<br/>    2 DEPT (A6)<br/>    2 LEAVE-DATA<br/>      3 LEAVE-DUE (N2)<br/>END-DEFINE<br/>*<br/>RP1. REPEAT<br/>*<br/>INPUT (AD=MT)<br/>  "Start:" #NAME-START /<br/>  "End:  " #NAME-END</span><span id="2bb5" class="lx ly in ls b gy nd ma l mb mc">*<br/>  IF #NAME-START = '.' THEN<br/>    ESCAPE BOTTOM (RP1.)<br/>  END-IF<br/>*<br/>  IF #NAME-END = ' ' THEN<br/>    MOVE #NAME-START TO #NAME-END<br/>  END-IF<br/>*<br/>  RD1. READ EMPLOYEES-VIEW BY NAME<br/>    STARTING FROM #NAME-START<br/>    ENDING AT #NAME-END<br/>*    <br/>    IF LEAVE-DUE &gt;= 20 THEN<br/>      PERFORM MARK-SPECIAL-EMPLOYEES<br/>    ELSE<br/>      RESET #MARK<br/>    END-IF<br/>*<br/>    DISPLAY NAME 3X DEPT 3X LEAVE-DUE 3X '&gt;=20' #MARK<br/>*<br/>  END-READ<br/>*<br/>  IF *COUNTER (RD1.) = 0 THEN<br/>    REINPUT 'No employees meet your criteria.'<br/>  END-IF<br/>*<br/>END-REPEAT<br/>*<br/>DEFINE SUBROUTINE MARK-SPECIAL-EMPLOYEES<br/>  MOVE '*' TO #MARK<br/>END-SUBROUTINE<br/>*<br/>END</span></pre><p id="a9dd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面讨论的例子展示了关于大型机数据库编程的结构化编程的基本方面。在自然语言编程中，还有多种类型的程序控制结构和程序模块化策略。</p><p id="b043" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">未完待续<a class="ae ks" href="https://medium.com/@mohamad.razzi.my/mainframe-database-programming-27803b92a3a3" rel="noopener">下篇</a>。</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="c82f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">本帖是“Adabas &amp; Natural 入门”系列的一部分，该系列包括:<br/> (1) <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-1-6597688406ad" rel="noopener">设置 Adabas &amp; Natural 社区版(Docker 版)</a>。<br/> (2) <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-2-34621e576fa4" rel="noopener">通过 Adabas REST Web app 访问 Adabas 数据库</a>。<br/> (3) <a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/getting-started-with-adabas-natural-part-3-a334822db12"> Adabas“周期组”和“多值”以 JSON 数据格式表示</a>。<br/> (4) <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-4-728e6977ad4f" rel="noopener">使用 Adabas TCP-IP 节点包访问 Adabas 数据库</a>。<br/> (5) <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-5-1665a0be42ab" rel="noopener">使用 NaturalONE IDE 的大型机编程(Natural)介绍</a>。<br/> (6) <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/getting-started-with-adabas-natural-part-6-48b4b2fd3e6d" rel="noopener">使用自然编程和自然 IDE 访问 Adabas 数据库</a>。<br/> (7) <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/mainframe-database-programming-fundamentals-b34fd88acf6e" rel="noopener">大型机数据库编程基础</a>。<br/> (8) <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/mainframe-database-programming-27803b92a3a3" rel="noopener">大型机数据库编程中级</a>。<br/> (9) <a class="ae ks" href="https://medium.com/@mohamad.razzi.my/developing-ajax-web-pages-e270eb59fc92" rel="noopener">使用自然 AJAX 框架开发 AJAX 网页</a>。<br/>(10)<a class="ae ks" href="https://medium.com/@mohamad.razzi.my/how-does-ajax-actually-work-2f57cf4ddc55" rel="noopener">AJAX 实际上是如何工作的</a>？<br/> (11) <a class="ae ks" href="https://medium.com/dev-genius/how-does-ajax-actually-work-2f57cf4ddc55" rel="noopener">向 ADABAS REST Web app 发送带有 JWT 令牌的 AJAX 请求</a>。<br/> (12)通过 Java Servlets 和 Java Web Services (SOAP)向 ADABAS REST 服务发送 HTTP 请求。</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><h1 id="bd79" class="md ly in bd me mf nl mh mi mj nm ml mm jt nn ju mo jw no jx mq jz np ka ms mt bi translated">参考资料:</h1><p id="112a" class="pw-post-body-paragraph kt ku in kv b kw mu jo ky kz mv jr lb lc mw le lf lg mx li lj lk my lm ln lo ig bi translated">亨特，K.P. (1979)。结构化编程导论。行为研究方法&amp;仪器，11，229–233。</p><p id="f09d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe lp lq lr ls b">Nat914win fs-about</code>:<br/><a class="ae ks" href="https://documentation.softwareag.com/natural/nat914win/firststeps/fs-about.htm" rel="noopener ugc nofollow" target="_blank">https://documentation . software ag . com/natural/NAT 914 win/first steps/fs-about . htm</a></p><p id="fb44" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe lp lq lr ls b">Nat914win fs-hello</code>:<br/>T5】https://documentation . software ag . com/natural/NAT 914 win/first steps/fs-hello . htm</p><p id="2419" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe lp lq lr ls b">Nat914win if</code>:<a class="ae ks" href="https://documentation.softwareag.com/natural/nat911win/sm/if.htm" rel="noopener ugc nofollow" target="_blank"><br/>https://documentation . software ag . com/natural/NAT 911 win/sm/if . htm</a></p><p id="da63" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe lp lq lr ls b">Nat914win repeat</code>:<br/><a class="ae ks" href="https://documentation.softwareag.com/natural/nat914win/sm/repeat.htm" rel="noopener ugc nofollow" target="_blank">https://documentation . software ag . com/natural/NAT 914 win/sm/repeat . htm</a></p><p id="e713" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe lp lq lr ls b">Nat914win inlinesub</code>:<br/><a class="ae ks" href="https://documentation.softwareag.com/natural/nat914win/firststeps/fs-inlinesub" rel="noopener ugc nofollow" target="_blank">https://documentation . software ag . com/natural/NAT 914 win/first steps/fs-inline sub</a></p></div></div>    
</body>
</html>