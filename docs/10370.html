<html>
<head>
<title>What Is a Cron and How to Set up Your First One in a Few Simple steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是 Cron 以及如何通过几个简单的步骤建立您的第一个 Cron</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-is-a-cron-and-how-to-create-your-first-one-9560d229bf5a?source=collection_archive---------9-----------------------#2022-10-27">https://blog.devgenius.io/what-is-a-cron-and-how-to-create-your-first-one-9560d229bf5a?source=collection_archive---------9-----------------------#2022-10-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="0dfe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我使用 crons 已经有一段时间了，但是我总是想花些时间阅读一下它们或者从头开始创建一个。这篇文章正是如此，记录了我创建第一个 cron 的过程以及我在这个过程中学到的东西。<br/> <em class="kl">我正在使用 Linux Ubuntu 22，所以如果你使用另一个系统，你在这篇文章中看到的一些东西/命令/日志可能会有所不同。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/3b497471cf3b0de4df952439eaf12849.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eLUor3rJEY9T-ZZ0If0aXA.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">照片由<a class="ae lc" href="https://unsplash.com/@agebarros?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">阿格巴洛斯</a>在<a class="ae lc" href="https://unsplash.com/s/photos/time?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="63f9" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">什么是<strong class="ak"> cron </strong>？🧐</h1><p id="1214" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">名字<strong class="jp ir"> cron </strong>来源于希腊语 hronos(希腊语χρόνος)，意思是时间。你可能也知道这个词叫克罗诺斯或克罗诺斯，他是希腊神话中的时间之神和泰坦之王。</p><p id="bfc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">cron 是一个守护进程，这意味着它是一个进程——一个程序的实例——在一个类似 Unix 的操作系统的后台持续运行。它通常与系统一起启动，并在系统关闭时停止。<br/> <br/>守护进程名称的后缀是字母<strong class="jp ir"> d </strong>，表示我们指的是一个守护进程。这就是为什么你可能会看到 cron 被称为<strong class="jp ir"> crond </strong>，而不仅仅是<strong class="jp ir"> cron </strong>。</p><h1 id="a8de" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">典型的克朗日</h1><p id="b6ae" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">如果一个 cron 连续运行，那么它在运行时做什么？</p><p id="6b54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">📆一个 cron 典型的一天可能是这样的:</p><p id="6c19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">每天的每一分钟</strong></p><ol class=""><li id="3d1c" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk ml mm mn mo bi translated">检查一下你现在有什么事情要做，<strong class="jp ir">这</strong>分钟。</li><li id="3877" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">如果你有事情要做，那就去做。</li><li id="c054" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">回去睡一分钟。</li><li id="5d38" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk ml mm mn mo bi translated">醒醒，回到第一步。</li></ol><p id="0a11" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有所进展，所以这是一个检查每一分钟是否有事情要做的过程，在那个特定的分钟。但是它住在哪里呢？我们能看看吗？</p><p id="ba96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们打开终端，输入</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="5e9b" class="mz le iq mv b gy na nb l nc nd">sudo systemctl status cron.service</span></pre><p id="877a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ℹ️ <code class="fe ne nf ng mv b">systemctl</code>命令是一个实用程序- <em class="kl">一个助手命令</em> -它帮助我们控制系统守护进程<code class="fe ne nf ng mv b">systemd</code>。(<code class="fe ne nf ng mv b">ctl</code>后缀代表控制)</p><p id="e364" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ℹ️ <code class="fe ne nf ng mv b">systemd</code> -是一个系统守护进程，用于管理其他守护进程。</p><p id="9c83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">执行此命令会显示以下信息</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="a317" class="mz le iq mv b gy na nb l nc nd">● cron.service - Regular background program processing daemon<br/>     Loaded: loaded (/lib/systemd/system/cron.service; enabled; vendor preset: &gt;<br/>     Active: active (running) since Mon 2022-10-24 19:16:33 EEST; 3 days ago<br/>       Docs: man:cron(8)<br/>   Main PID: 981 (cron)<br/>      Tasks: 1 (limit: 38136)<br/>     Memory: 1.1M<br/>        CPU: 1.491s<br/>     CGroup: /system.slice/cron.service<br/>             └─981 /usr/sbin/cron -f -P</span></pre><p id="6d40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">向您系统内部的这个小进程问好！这是一个克朗！这让我想起了阿尔·帕西诺的一句名言😎)</p><p id="d355" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这条信息包含了很多信息，我不太熟悉其中的术语。现在重要的是，这是关于我们的<code class="fe ne nf ng mv b">cron.service</code>，它是处于<code class="fe ne nf ng mv b">active</code>状态的<code class="fe ne nf ng mv b">Regular background program processing daemon currently</code>，并且从<code class="fe ne nf ng mv b">Mon 2022-10-24 19:16:35 EE</code>开始运行。</p><p id="c176" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太棒了。我们现在知道了克朗长什么样，以及它是如何度过一天的。</p><h1 id="e147" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">雇佣一个 cron 来做我们的工作</h1><p id="b085" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">一个 cron 可以被设定为做任何你可以想象的事情，<em class="kl"> ooh strong word right </em>？😯<em class="kl">举例，请</em>？<em class="kl">很公平</em> …🤓</p><p id="ecc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以使用 cron 来:</p><ul class=""><li id="e03a" class="mg mh iq jp b jq jr ju jv jy mi kc mj kg mk kk nh mm mn mo bi translated">给你的客户发邮件</li><li id="5d9a" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk nh mm mn mo bi translated">对系统中的特定文件进行备份</li><li id="0e0b" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk nh mm mn mo bi translated">提醒自己一项必须完成的特定任务</li><li id="f5e7" class="mg mh iq jp b jq mp ju mq jy mr kc ms kg mt kk nh mm mn mo bi translated">当你的机器资源使用最少的时候，指派一个 cron 来做繁重的工作。</li></ul><p id="9e92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是等等…这说不通。为什么我需要每分钟给我的客户发一封电子邮件？</p><p id="fd07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，我说了一个 cron 毕竟每分钟都检查<strong class="jp ir"/>不是吗？</p><p id="ac9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">真的，那是正确的，它会(大概！)没有意义，但我也没说我们<strong class="jp ir">每</strong>分钟都要做点什么<strong class="jp ir">。我刚才说 cron 会每分钟检查它<strong class="jp ir">是否有</strong>事情要做。我们可以安排它做某事，无论何时，每分钟，每小时，每个月底，每年一次，等等。</strong></p><h1 id="8807" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">为我们的 cron 作业设置时间</h1><p id="ea0a" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">在添加 cron 作业时，用来声明我们希望任务何时执行的格式是:<code class="fe ne nf ng mv b">&lt;when&gt; &lt;what&gt;</code>。</p><p id="de0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当的时候:当我们希望某事发生的时候。</p><p id="2d5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">什么:我们希望我们的 cron 在那个时间点做什么。</p><p id="0a0b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们发现在哪里编写 cron 作业之前，让我们更详细地了解一下 cron 作业的格式。</p><p id="931b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了让我们的 cron 了解什么时候应该发生什么，我们需要添加以下信息:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ni"><img src="../Images/bd3269adb934652c68d871d3236a590c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hLD6kfDO5CCnP5ACHEmBBQ.png"/></div></div></figure><p id="6b09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">什么？这是什么？😩很好，我们会解决的。我们需要找到一种方法来非常详细地、毫无疑问地描述一项工作(cron 的任务)何时应该被执行。为此，我们应该填写上表中描述的信息。通过组合这些列，我们可以定义我们的 cron 作业将运行的任何时间点。</p><p id="6b5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们通过下面的例子了解更多。🧐</p><p id="8136" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们想让一个 cron 每分钟做一件事，我们应该这样写:</p><h2 id="70ac" class="mz le iq bd lf nj nk dn lj nl nm dp ln jy nn no lr kc np nq lv kg nr ns lz nt bi translated">每一分钟</h2><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/a14024e0d2f1e05a8c53ca797947716f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0yjkMxbdnBTiuhtACx_55A.png"/></div></div></figure><p id="cfc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<code class="fe ne nf ng mv b">*</code>等同于说，一个月中每天每小时的每一分钟...</p><h2 id="6a96" class="mz le iq bd lf nj nk dn lj nl nm dp ln jy nn no lr kc np nq lv kg nr ns lz nt bi translated">每天 10 点</h2><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/181c48e93de3fc05da6c17634f0f602e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1i5jDwb85RmwyRrp12N01g.png"/></div></div></figure><p id="9164" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看到我们把小时列设为<code class="fe ne nf ng mv b">10</code>分钟设为<code class="fe ne nf ng mv b">0</code>了吗？这意味着我们的任务将只在第 10 个小时的第一分钟运行。如果我们希望我们的任务在第 10 个小时的每一分钟都运行，我们应该将分钟列设置为<code class="fe ne nf ng mv b">*</code>。</p><h2 id="c018" class="mz le iq bd lf nj nk dn lj nl nm dp ln jy nn no lr kc np nq lv kg nr ns lz nt bi translated">每周六 10 点</h2><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/7ff08aa8f07dbd6ee1f500a62f266fec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*idUaq0Wo3h3VsbuUPbdFRg.png"/></div></div></figure><p id="d2c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">星期六是一周的第六天，因此我们通过在一周的第<strong class="jp ir">天</strong>列添加一个<code class="fe ne nf ng mv b">6</code>来定义它。</p><h2 id="412a" class="mz le iq bd lf nj nk dn lj nl nm dp ln jy nn no lr kc np nq lv kg nr ns lz nt bi translated">每月第一天的 15:30</h2><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/370728f866f073fc8bc7088b31023bc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9Gc82wKtdeTuI7JRIYxbQ.png"/></div></div></figure><h2 id="8cbe" class="mz le iq bd lf nj nk dn lj nl nm dp ln jy nn no lr kc np nq lv kg nr ns lz nt bi translated">每月前 7 天的 00:00</h2><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/6e4abad7e75dfc14df99010e0fbc51d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PbUNDaaJ7KKdwPhoJyXcbg.png"/></div></div></figure><p id="8496" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们也可以使用持续时间，在这种情况下，<code class="fe ne nf ng mv b">1-7</code>用于从 1 号到 7 号的所有日子。</p><h2 id="00af" class="mz le iq bd lf nj nk dn lj nl nm dp ln jy nn no lr kc np nq lv kg nr ns lz nt bi translated">工作时间每 30 分钟</h2><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nu"><img src="../Images/21ea953ea67be6e786ef1769de34e913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddPo2Kmbnf7gQVFF9E17RQ.png"/></div></div></figure><p id="58b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想玩玩，看看更复杂的 cron 时间设置，有一个很棒的网站叫做<a class="ae lc" href="https://crontab.guru/" rel="noopener ugc nofollow" target="_blank"> crontab.guru </a>。我建议你检查并保存它，它肯定会派上用场。</p><h1 id="9d8d" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">探索 crontab 文件</h1><p id="2ba4" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">现在我们对为 cron 作业设置时间的方式更加熟悉了，让我们看看<strong class="jp ir"> where </strong>部分。</p><p id="82fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的系统中有一个名为<strong class="jp ir"> crontab </strong>的文件。crontab 这个词来自于单词<strong class="jp ir"> cron </strong> + <strong class="jp ir"> table </strong>的组合。这是一个文件，我们将在其中添加我们希望我们的 cron 做什么以及我们希望什么时候发生的指令。</p><p id="e231" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在<code class="fe ne nf ng mv b">/var/spool/cron/crontabs</code>文件夹中找到 crontab 文件。在<code class="fe ne nf ng mv b">crontabs</code>文件夹中，您会发现每个系统用户都有一个 crontab 文件，在我的例子中，我的 crontab 文件名是<code class="fe ne nf ng mv b">george</code>。<strong class="jp ir">不要通过</strong>直接编辑这个文件 <strong class="jp ir">，如果你想编辑你分配的文件，请在你的终端中键入</strong></p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="4b9e" class="mz le iq mv b gy na nb l nc nd">crontab -e</span></pre><p id="6a63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ℹ️ <strong class="jp ir"> -e </strong>代表编辑。</p><p id="d58f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果这是你第一次打开<code class="fe ne nf ng mv b">crontab</code>，你可能会被要求选择你喜欢的编辑器，我更喜欢 vim，你可以选择任何你喜欢的。</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="c568" class="mz le iq mv b gy na nb l nc nd">Select an editor.  To change later, run 'select-editor'.<br/>  1. /bin/nano        &lt;---- easiest<br/>  2. /usr/bin/vim.basic<br/>  3. /usr/bin/vim.tiny<br/>  4. /bin/ed</span></pre><p id="ff07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的例子中，通过按下<code class="fe ne nf ng mv b">2</code>并点击<code class="fe ne nf ng mv b">Enter</code>，我的 crontab 打开了。</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="7fbc" class="mz le iq mv b gy na nb l nc nd"># Edit this file to introduce tasks to be run by cron.<br/># <br/># Each task to run has to be defined through a single line<br/># indicating with different fields when the task will be run<br/># and what command to run for the task<br/># <br/># To define the time you can provide concrete values for<br/># minute (m), hour (h), day of month (dom), month (mon),<br/># and day of week (dow) or use '*' in these fields (for 'any').<br/># <br/># Notice that tasks will be started based on the cron's system<br/># daemon's notion of time and timezones.<br/># <br/># Output of the crontab jobs (including errors) is sent through<br/># email to the user the crontab file belongs to (unless redirected).<br/># <br/># For example, you can run a backup of all your user accounts<br/># at 5 a.m every week with:<br/># 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/<br/># <br/># For more information see the manual pages of crontab(5) and cron(8)<br/># <br/># m h  dom mon dow   command<br/>~                                                                               <br/>~</span></pre><p id="d076" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个文件的最后一行，(<code class="fe ne nf ng mv b"># m h dom mon dow command</code>)让我们编写第一个实际的 cron！🥳🥳🥳</p><h1 id="e95e" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">编写我们的第一个 cron</h1><p id="59d2" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">我们的第一个克隆人将每分钟都在运行，这样我们就可以尽快开始我们的胜利之舞🤭</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="8249" class="mz le iq mv b gy na nb l nc nd"># m h  dom mon dow   command<br/><br/># my first cron instructions                                                                               <br/>* * * * * echo "This is my FIRST CRON!!! :)" &gt; /dev/pts/1</span></pre><p id="fe73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们分解一下这个命令</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="ed7f" class="mz le iq mv b gy na nb l nc nd"># my first cron instructions</span></pre><p id="e96f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以<code class="fe ne nf ng mv b">#</code>开始一行表示这是一个注释。例如，如果您有多个 crons，并且很难理解每个 crons 做什么，那么添加注释会有所帮助。<br/>注意不要在 cron 命令中添加注释，因为它们会被认为是命令的一部分。<br/>这个文件中的空格和空行被忽略，所以你可以随意设置格式。</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="5693" class="mz le iq mv b gy na nb l nc nd">* * * * *  echo "This is my FIRST CRON!!! :)" &gt; /dev/pts/1</span></pre><p id="6777" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mv b">* * * * *</code>这些是我们在上一节中描述的列的 5 个值。不要忘记在每个<code class="fe ne nf ng mv b">*</code>之间添加空格。</p><p id="2648" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mv b">echo "This is my FIRST CRON!!! :)"</code>显示消息<em class="kl">“这是我的第一个 CRON！！！:)".</em></p><p id="3ee0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ℹ️ <code class="fe ne nf ng mv b">echo</code>是一个 Linux 命令，用于在终端上打印字符串/文本。</p><p id="1053" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mv b">&gt;</code>是一个符号，用于获取命令的输出并将其重定向到其他地方。所以在这种情况下,<code class="fe ne nf ng mv b">echo</code>命令的结果——echo<code class="fe ne nf ng mv b">command</code>将在 cron 的终端中输出——将被重定向到下一个参数👇</p><p id="6ba2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe ne nf ng mv b">/dev/pts/1</code> #%$#@？😟哦，对不起，我想我在搜索的时候不小心写下了我的真实想法🤓。我试图创建一个 cron，它只是在终端中打印/显示一条消息。问题是 cron 有自己的控制台，所以我需要明确地要求我们的 cron 在我使用的终端中显示一条消息。<br/>为了找到我正在使用的终端，我输入了我的终端，<code class="fe ne nf ng mv b">tty</code>，得到了以下响应</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="cad6" class="mz le iq mv b gy na nb l nc nd">~ tty<br/>/dev/pts/1</span></pre><p id="36f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以我在 cron 命令中添加了这个终端的描述。</p><p id="c7f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总结一下，我们说我们要求第一个 cron 向当前打开的终端显示消息<code class="fe ne nf ng mv b">This is my FIRST CRON!!! :)</code>。</p><p id="059f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过保存并关闭<code class="fe ne nf ng mv b">crontab</code>文件，您应该会看到一条消息<code class="fe ne nf ng mv b">crontab: installing new crontab</code>，通知您添加到 crontab 文件的所有更改都已保存。</p><p id="a3b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下一分钟开始时，您应该在终端中看到您的第一个 cron 正在运行。</p><p id="11ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">等着吧…等待 waaaaaaaait waiiit(<em class="kl">唤起《勇敢的心》的记忆！</em>)现在！你看到了吗？？？？？🥳🥳🥳🥳</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="8042" class="mz le iq mv b gy na nb l nc nd">This is my FIRST CRON!!! :)</span></pre><p id="ed5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这条消息将永远每分钟出现一次，所以您可能需要编辑您的 crontab 并删除这个 cron，毕竟，这只是为了学习！🤭</p><p id="0404" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">(<em class="kl">只需键入</em> <code class="fe ne nf ng mv b"><em class="kl">crontab -e</em></code> <em class="kl">并删除您添加的 cron 作业。</em>)</p><h1 id="0598" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">Cron 日志</h1><p id="0d97" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">如果您没有修改系统设置，那么默认情况下，所有系统日志都保存在<code class="fe ne nf ng mv b">/var/logs/systemlog</code>文件中。在您的终端中键入以下命令将获得您系统中所有与 CRON 相关的日志</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="31ec" class="mz le iq mv b gy na nb l nc nd">grep CRON /var/log/syslog</span></pre><p id="dcc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ℹ️ <code class="fe ne nf ng mv b">grep</code>命令搜索文件中的模式</p><p id="4497" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我的例子中，它的结果看起来像</p><pre class="kn ko kp kq gt mu mv mw mx aw my bi"><span id="db57" class="mz le iq mv b gy na nb l nc nd">Oct 24 20:18:01 george CRON[224509]: (george) CMD (echo "This is my FIRST CRON!!! :)" &gt; /dev/pts/5)<br/>Oct 24 20:19:01 george CRON[224892]: (george) CMD (echo "This is my FIRST CRON!!! :)" &gt; /dev/pts/5)<br/>Oct 24 20:20:01 george CRON[225143]: (george) CMD (echo "This is my FIRST CRON!!! :)" &gt; /dev/pts/5)<br/>Oct 24 20:21:01 george CRON[225356]: (george) CMD (echo "This is my FIRST CRON!!! :)" &gt; /dev/pts/5)</span></pre><p id="9818" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想，这是一种可以用来检查 crons 发生了什么以及它们何时运行的方法。</p><h1 id="d6f4" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结束了</h1><p id="23a6" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">当我写帖子的时候，我从来不是为了教东西，因为我认为自己是学生而不是老师。我这样做只是因为我喜欢分享我的笔记，或者是和我未来的自己，我想是一种日记，或者是和任何其他感兴趣的人。</p><p id="edb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">👏感谢阅读！如果你觉得这个故事有趣或有帮助，请鼓掌让我知道。别忘了关注更多类似的精彩内容。</p><p id="4940" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">🛎有问题或评论吗？让我们在<a class="ae lc" href="https://twitter.com/FreakingCode" rel="noopener ugc nofollow" target="_blank">的 Twitter </a>或<a class="ae lc" href="https://www.linkedin.com/in/georgelinardis/" rel="noopener ugc nofollow" target="_blank">的 LinkedIn </a>上保持联系，继续对话吧！</p><p id="3cf2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下次见。🤓</p></div></div>    
</body>
</html>