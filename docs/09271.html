<html>
<head>
<title>Parallax Effect in ReactJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应中的视差效应</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/parallax-effect-in-reactjs-b304fd5f9a67?source=collection_archive---------0-----------------------#2022-08-11">https://blog.devgenius.io/parallax-effect-in-reactjs-b304fd5f9a67?source=collection_archive---------0-----------------------#2022-08-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/abde2fd8e398638410f46ab5706aa9d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0mvljbKg6JpjF_Yp92hAKQ.gif"/></div></div></figure><div class=""/><p id="0e63" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi kt translated">你可能打开了 Firewatch 游戏网站或苹果网站，想知道这些网站的滚动效果是如何制作的。你今天很幸运，因为我将向你展示如何创造这些效果，叫做视差效果。</p><h2 id="ffa3" class="lc ld iy bd le lf lg dn lh li lj dp lk kg ll lm ln kk lo lp lq ko lr ls lt lu bi translated"><strong class="ak">项目</strong></h2><p id="d601" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">是一个简单的网页，在页面中间有一个按钮，如果你点击按钮，你会回到底部，如果你再次点击，你会回到顶部。当背景移动时，视差效果开始发挥作用，所以你可以看到效果，用鼠标滚动或点击按钮。</p><p id="0b34" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个简单的技术很有趣，因为你可以在常规网站的几乎任何类型的交互中应用它。</p><h2 id="bf7f" class="lc ld iy bd le lf lg dn lh li lj dp lk kg ll lm ln kk lo lp lq ko lr ls lt lu bi translated"><strong class="ak">什么是视差效应？</strong></h2><p id="ed85" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">基本上是一个有一个或多个物体或背景的效果，每个物体或背景有不同的运动速度。</p><p id="9341" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">视差效果的一些例子…</p><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ma"><img src="../Images/f69720f09dce566072135a6684118b2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2b0G8-Z0giJBoRvs-He8NA.gif"/></div></div></figure><p id="b619" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">显然，苹果不只是在物体中使用不同的速度运动，而是超越了这一点。</p><p id="2be1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是 Firewatch 是一个简单视差效果的完美例子。你有多个图像作为背景，每个背景以多种速度移动。</p><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ma"><img src="../Images/5c482baca8f51b83918f87b44b2f1eb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nmMC7uUknbdo1t93YYvWOw.gif"/></div></div></figure></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="f3ff" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了创建这个项目，我将使用 React、Typescript、react-spring 和 tailwind。React-spring 包支持视差，它将为我们做艰苦的工作，tailwind 是一个 CSS 库，它使用实用优先的基本原则，我们可以用它来快速设计我们的项目。</p><p id="96b9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们开始之前，让我们看看最终的项目。</p><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/abde2fd8e398638410f46ab5706aa9d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0mvljbKg6JpjF_Yp92hAKQ.gif"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">期末项目。</figcaption></figure><h2 id="cd53" class="lc ld iy bd le lf lg dn lh li lj dp lk kg ll lm ln kk lo lp lq ko lr ls lt lu bi translated">项目</h2><p id="9c90" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">首先，我们需要创建一个 React 项目:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="11b8" class="lc ld iy mr b gy mv mw l mx my">➜ yarn create vite react-parallax</span></pre><p id="fc86" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择 React 作为框架，然后选择 react-ts 作为变体:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="16bb" class="lc ld iy mr b gy mv mw l mx my">✔ Select a framework: › react<br/>✔ Select a variant: › react-ts</span></pre><p id="25b4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要的唯一套件是反作用弹簧/视差:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="4d54" class="lc ld iy mr b gy mv mw l mx my">➜ yarn add <a class="ae mz" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-spring/parallax</span></pre><p id="0bbf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们还需要顺风，但我们可以只使用 CDN 链接，而不是安装 throw yarn，因为这个项目不需要顺风的全部潜力。</p><p id="a803" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要使用 CDN 添加 tailwind，您必须打开文件<code class="fe na nb nc mr b">index.html</code>，并在<code class="fe na nb nc mr b">&lt;header&gt;</code>中添加以下标签:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="bc1d" class="lc ld iy mr b gy mv mw l mx my">&lt;script src="<a class="ae mz" href="https://cdn.tailwindcss.com" rel="noopener ugc nofollow" target="_blank">https://cdn.tailwindcss.com</a>"&gt;&lt;/script&gt;</span></pre><p id="500b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">整个文件看起来应该完全像这样:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="4108" class="lc ld iy mr b gy mv mw l mx my">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>    &lt;link rel="icon" type="image/svg+xml" href="/src/favicon.svg" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;<br/>    &lt;script src="<a class="ae mz" href="https://cdn.tailwindcss.com" rel="noopener ugc nofollow" target="_blank">https://cdn.tailwindcss.com</a>"&gt;&lt;/script&gt;<br/>    &lt;title&gt;Vite App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="root"&gt;&lt;/div&gt;<br/>    &lt;script type="module" src="/src/main.tsx"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="aade" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">还有一件事，在项目的根目录下创建一个<code class="fe na nb nc mr b">.editorconfig</code>文件:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="d517" class="lc ld iy mr b gy mv mw l mx my">➜ touch .editorconfig # To create the file</span></pre><p id="579a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将以下内容添加到文件<code class="fe na nb nc mr b">.editorconfig</code>:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="20a8" class="lc ld iy mr b gy mv mw l mx my">root = true</span><span id="36bc" class="lc ld iy mr b gy nd mw l mx my">[*]<br/>charset = utf-8<br/>end_of_line = lf<br/>indent_size = 2<br/>indent_style = space<br/>insert_final_newline = false<br/>max_line_length = 120<br/>tab_width = 2</span></pre><p id="7a15" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Editorconfig 用一个简单的文件帮助我们定义项目的格式样式。如果你想了解更多关于<strong class="jx iz"> Editorconfig </strong>的信息，请访问<a class="ae mz" href="https://editorconfig.org/" rel="noopener ugc nofollow" target="_blank">https://editorconfig.org/</a>网站。</p><p id="2be5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要完成项目设置:</p><ul class=""><li id="aa73" class="ne nf iy jx b jy jz kc kd kg ng kk nh ko ni ks nj nk nl nm bi translated">删除<code class="fe na nb nc mr b"><strong class="jx iz">index.css</strong></code>和<code class="fe na nb nc mr b"><strong class="jx iz">App.css</strong></code>文件，因为我们将在 HTML 中使用 Tailwind direct。</li></ul><p id="e3f7" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装完<strong class="jx iz">反作用弹簧</strong>和<strong class="jx iz">尾翼</strong>后，您需要的最后一样东西就是我们将要使用的资产。有 7 个图像被分层。</p><p id="7207" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它们被分成几层，所以我们可以用不同的值来制作每层的速度动画。</p><p id="d35f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要下载资产，您只需从<a class="ae mz" href="https://github.com/itsbetma/react-tree-parallax/tree/main" rel="noopener ugc nofollow" target="_blank"> <strong class="jx iz"> github </strong> </a>下载资产，或者克隆完整的<a class="ae mz" href="https://github.com/itsbetma/react-tree-parallax/tree/main" rel="noopener ugc nofollow" target="_blank"> <strong class="jx iz"> github </strong> </a>存储库并签出到分支<code class="fe na nb nc mr b">start-here</code>以跟随教程。</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="50a1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">仅资产:</strong></p><div class="im in gp gr io nn"><a href="https://github.com/itsbetma/react-tree-parallax/tree/main/src/assets" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iz gy z fp ns fr fs nt fu fw ix bi translated">react-tree-parallax/src/assets at main its betema/react-tree-parallax</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">使用 react-spring/parallax 的 ReactJS 项目。通过创建一个……</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">github.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob iu nn"/></div></div></a></div><p id="2b5d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">完整知识库:</strong></p><div class="im in gp gr io nn"><a href="https://github.com/itsbetma/react-tree-parallax" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iz gy z fp ns fr fs nt fu fw ix bi translated">GitHub-its betma/react-tree-parallax:使用 react-spring/parallax 的 ReactJS 项目。</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">github.com</p></div></div><div class="nw l"><div class="oc l ny nz oa nw ob iu nn"/></div></div></a></div><p id="8581" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">克隆存储库后，您的项目应该如下所示:</p><figure class="mb mc md me gt ip gh gi paragraph-image"><div class="gh gi od"><img src="../Images/93f1eeacf0f2435237f08eca09a07498.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*LAJmLJ7DiFmIsLDBbYouww.png"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">文件</figcaption></figure><p id="516d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，让我们导入依赖项:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="a072" class="lc ld iy mr b gy mv mw l mx my">import layer1 from './assets/layer-01.png';<br/>import layer2 from './assets/layer-02.png';<br/>import layer3 from './assets/layer-03.png';<br/>import layer4 from './assets/layer-04.png';<br/>import layer5 from './assets/layer-05.png';<br/>import layer6 from './assets/layer-06.png';<br/>import layer7 from './assets/layer-07.png';<br/>import { IParallax, Parallax, ParallaxLayer } from "<a class="ae mz" href="http://twitter.com/react" rel="noopener ugc nofollow" target="_blank">@react</a>-spring/parallax";<br/>import { useState } from 'react';</span><span id="bee9" class="lc ld iy mr b gy nd mw l mx my">function App() {</span><span id="fb5f" class="lc ld iy mr b gy nd mw l mx my">return (<br/>    &lt;div className={'w-full h-full'}&gt;<br/>      App<br/>    &lt;/div&gt;<br/>  )<br/>}</span><span id="d9dc" class="lc ld iy mr b gy nd mw l mx my">export default App</span></pre><p id="b4ce" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe na nb nc mr b">className={'w-full h-full'}</code>用于定义两个 T <strong class="jx iz"> ailwindcss </strong>类。</p><ul class=""><li id="7667" class="ne nf iy jx b jy jz kc kd kg ng kk nh ko ni ks nj nk nl nm bi translated"><strong class="jx iz"> w-full </strong>:同<code class="fe na nb nc mr b">width:100%</code>；</li><li id="4235" class="ne nf iy jx b jy oe kc of kg og kk oh ko oi ks nj nk nl nm bi translated"><strong class="jx iz"> h 满</strong>:同<code class="fe na nb nc mr b">height:100%</code>；</li></ul><p id="36ed" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们需要添加我们的第一层。第一层是<strong class="jx iz">层 7 </strong>因为动画中的顺序颠倒了，第一层显示在背景中，最后一层显示在前面。</p><p id="e04a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加以下代码:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="fccd" class="lc ld iy mr b gy mv mw l mx my">function App() {</span><span id="c5a2" class="lc ld iy mr b gy nd mw l mx my">return (<br/>    &lt;div&gt;<br/>      &lt;Parallax pages={1.45}&gt;<br/>        &lt;ParallaxLayer<br/>          offset={0}<br/>          speed={0.5}<br/>          factor={2}<br/>          style={{<br/>            backgroundImage: `url(${layer7})`,<br/>            backgroundSize: 'cover',<br/>            backgroundPosition: 'center'<br/>          }}<br/>        &gt;&lt;/ParallaxLayer&gt;</span><span id="5d44" class="lc ld iy mr b gy nd mw l mx my">      &lt;/Parallax&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="bd93" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">代码解释:</strong></p><ul class=""><li id="e522" class="ne nf iy jx b jy jz kc kd kg ng kk nh ko ni ks nj nk nl nm bi translated"><code class="fe na nb nc mr b">&lt;Parallax pages={1.45}&gt;</code> —定义页数，本例中为<strong class="jx iz"> 1.45 页</strong>；</li><li id="8747" class="ne nf iy jx b jy oe kc of kg og kk oh ko oi ks nj nk nl nm bi translated"><code class="fe na nb nc mr b">&lt;ParallaxLayer</code> —定义图层属性；</li></ul><p id="8588" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">图层属性:</strong></p><ul class=""><li id="8017" class="ne nf iy jx b jy jz kc kd kg ng kk nh ko ni ks nj nk nl nm bi translated"><code class="fe na nb nc mr b">offset</code> —当层的相应页面完全可见时层的偏移(例如:0 = &gt;第一页的顶部，1 = &gt;第二页的顶部，等等)。默认值为 0。</li><li id="c88b" class="ne nf iy jx b jy oe kc of kg og kk oh ko oi ks nj nk nl nm bi translated"><code class="fe na nb nc mr b">speed</code> —层相对于滚动移动的速率。可以是正的，也可以是负的。默认值为 0。</li><li id="8f0f" class="ne nf iy jx b jy oe kc of kg og kk oh ko oi ks nj nk nl nm bi translated"><code class="fe na nb nc mr b">factor</code> —相对于页面大小的图层大小(例如:1 = &gt; 100%，1.5 = &gt; 150%，等等)。默认为 1。</li><li id="4ebb" class="ne nf iy jx b jy oe kc of kg og kk oh ko oi ks nj nk nl nm bi translated"><code class="fe na nb nc mr b">style</code> —层 css 属性。</li></ul><p id="8552" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在运行:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="68d7" class="lc ld iy mr b gy mv mw l mx my">yarn dev</span></pre><p id="bca3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并查看它是否显示月亮图像。<code class="fe na nb nc mr b">localhost:3000</code></p><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oj"><img src="../Images/6a5270617e94860200898ff3555f141f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8HnEOpoRDkecTcrPcZ3Oqw.gif"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">只有月亮。</figcaption></figure><p id="914b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们添加<strong class="jx iz">星星</strong>层。在文件<code class="fe na nb nc mr b">App.tsx</code>中，在<strong class="jx iz">层 7 </strong>下添加以下代码:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="428b" class="lc ld iy mr b gy mv mw l mx my">&lt;ParallaxLayer<br/>          offset={0}<br/>          speed={0.8}<br/>          factor={2}<br/>          style={{<br/>            backgroundImage: `url(${layer6})`,<br/>            backgroundSize: 'cover',<br/>            backgroundPosition: 'center'<br/>          }}<br/>&gt;&lt;/ParallaxLayer&gt;</span></pre><p id="26ef" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加<strong class="jx iz">星星</strong>的结果。</p><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ok"><img src="../Images/f1b1f606ddfee9a8f206249fe8c4eb2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HtouKgQBL-ZjROumsUOkWQ.gif"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">明星</figcaption></figure><p id="992b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">已经可以看到视差效应在起作用。为了继续和不浪费时间，让我们添加更多的动画层。</p><p id="c3ed" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面的代码添加了更多的三层图像:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="af37" class="lc ld iy mr b gy mv mw l mx my">&lt;ParallaxLayer<br/>          offset={0.9999}<br/>          speed={1.5}<br/>          factor={1.1}<br/>          style={{<br/>            backgroundImage: `url(${layer5})`,<br/>            backgroundSize: 'cover',<br/>            backgroundPosition: 'center'<br/>          }}<br/>&gt;&lt;/ParallaxLayer&gt;<br/>&lt;ParallaxLayer<br/>          offset={0.9999}<br/>          speed={3}<br/>          factor={2.1}<br/>          style={{<br/>            backgroundImage: `url(${layer4})`,<br/>            backgroundSize: 'cover',<br/>            backgroundPosition: 'center'<br/>          }}<br/>&gt;&lt;/ParallaxLayer&gt;<br/>&lt;ParallaxLayer<br/>          offset={0}<br/>          speed={2}<br/>          factor={4}<br/>          style={{<br/>            backgroundImage: `url(${layer3})`,<br/>            backgroundSize: 'contain',<br/>            backgroundPosition: 'center'<br/>          }}<br/>&gt;&lt;/ParallaxLayer&gt;</span></pre><p id="1dfa" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加这三个层后，您可以在动画中看到显示的树:</p><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ok"><img src="../Images/ae44ae58c64cd90d8b62fcc2a6029b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Y1BNDu_vaG_1V6CSC4EPyQ.gif"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">树</figcaption></figure><p id="1957" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最终的动画正在成形，你可以看到每个图像有不同的延伸和速度。比如月亮，从开始一直延伸到结束，树只在最后阶段出现。</p><p id="07cf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">只剩下两张图像，您可以添加倒数第二张<strong class="jx iz">图像:</strong></p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="f09b" class="lc ld iy mr b gy mv mw l mx my">&lt;ParallaxLayer<br/>          offset={0.87}<br/>          speed={1}<br/>          factor={1}<br/>          style={{<br/>            backgroundImage: `url(${layer2})`,<br/>            backgroundSize: 'cover',<br/>            backgroundPosition: 'center'<br/>          }}<br/>&gt;&lt;/ParallaxLayer&gt;</span></pre><p id="428e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">检查<code class="fe na nb nc mr b">localhost:3000</code>可以看到动画中的<strong class="jx iz">干灌木</strong>。</p><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ol"><img src="../Images/bb8f30b18cbb1675a10dc439f9eb7de9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rentmqqEs3U5Wlf-86_odw.gif"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">干燥的灌木。</figcaption></figure><p id="fe90" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们可以添加<strong class="jx iz">地</strong>:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="9fcd" class="lc ld iy mr b gy mv mw l mx my">&lt;ParallaxLayer<br/>          offset={0.9}<br/>          speed={1}<br/>          factor={1}<br/>          style={{<br/>            backgroundImage: `url(${layer1})`,<br/>            backgroundSize: 'cover',<br/>            backgroundPosition: 'center'<br/>          }}<br/>&gt;&lt;/ParallaxLayer&gt;</span></pre><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/ceeb4c5a23574ce3242a6abe092227ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3VjjnoEUQfAQqILtFFUdzw.gif"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">地面。</figcaption></figure><p id="e3b3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">滚动动画已经准备好了，但是我们需要添加最后的润色。对于最后的触摸，我们可以创建一个按钮，从动画的开始到结束，反之亦然。</p><p id="6e77" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于这个特性，我们可以使用 React <strong class="jx iz"> useState </strong>和 React-spring/parallax<strong class="jx iz">ref</strong>来控制页面索引。</p><p id="b31f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加一个变量来存储反作用弹簧/视差参考:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="268b" class="lc ld iy mr b gy mv mw l mx my">...</span><span id="b48c" class="lc ld iy mr b gy nd mw l mx my">function App() {<br/>  let element: IParallax | null</span><span id="df20" class="lc ld iy mr b gy nd mw l mx my">...</span></pre><p id="4469" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了存储按钮的值，添加下面的<strong class="jx iz">使用状态</strong>:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="ea71" class="lc ld iy mr b gy mv mw l mx my">...</span><span id="469b" class="lc ld iy mr b gy nd mw l mx my">function App() {<br/>  let element: IParallax | null</span><span id="918d" class="lc ld iy mr b gy nd mw l mx my">  const [buttonMessage, setButtonMessage] = useState('Down')</span><span id="79ec" class="lc ld iy mr b gy nd mw l mx my">...</span></pre><p id="5cd8" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要处理该按钮，请单击下面的添加功能:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="c5ee" class="lc ld iy mr b gy mv mw l mx my">...</span><span id="515e" class="lc ld iy mr b gy nd mw l mx my">const handleClick = () =&gt; {<br/>    if (buttonMessage === 'Down') {<br/>      setButtonMessage('Up')<br/>      element?.scrollTo(2)<br/>    }<br/>    if (buttonMessage === 'Up') {<br/>      setButtonMessage('Down')<br/>      element?.scrollTo(0)<br/>    }<br/>  }</span><span id="c26b" class="lc ld iy mr b gy nd mw l mx my">...</span></pre><p id="2a5c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，创建以下 JSX 代码:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="a316" class="lc ld iy mr b gy mv mw l mx my">.<br/>.<br/>.<br/>.<br/>// Layer 2<br/>// Layer 1</span><span id="9589" class="lc ld iy mr b gy nd mw l mx my">&lt;ParallaxLayer<br/>          sticky={{ start: 0, end: 1 }}<br/>          speed={10}<br/>          factor={1}<br/>          onClick={() =&gt; handleClick()}<br/>        &gt;<br/>          &lt;div className='w-screen h-screen   flex font-bold items-center justify-center'&gt;<br/>            &lt;div className='w-2/6 py-8 text-center rounded backdrop-blur-sm backdrop-grayscale bg-violet/30 border-2 border-white cursor-pointer'&gt;<br/>              &lt;h1 className='text-6xl text-violet-600'&gt;<br/>                 {buttonMessage}<br/>              &lt;/h1&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>&lt;/ParallaxLayer&gt;</span></pre><p id="ef8e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里我们为这个层使用了一个不同的属性，<code class="fe na nb nc mr b">sticky</code>属性。<code class="fe na nb nc mr b">sticky</code>用于定义一个层的开始和结束位置，这对于向下/向上按钮很有用，因为我希望它在相同的位置。</p><p id="e9fa" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将<code class="fe na nb nc mr b">&lt;Parallax&gt;</code>组件更新为:</p><pre class="mb mc md me gt mq mr ms mt aw mu bi"><span id="c1e4" class="lc ld iy mr b gy mv mw l mx my">&lt;Parallax pages={1.45} ref={ref =&gt; element = ref}&gt;</span></pre><p id="7812" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最终结果:</p><figure class="mb mc md me gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/abde2fd8e398638410f46ab5706aa9d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0mvljbKg6JpjF_Yp92hAKQ.gif"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">期末项目。</figcaption></figure><p id="97f2" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">至此，您已经构建了一个具有视差效果的全功能网页。</p><p id="adda" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你想要一篇关于别的东西的文章吗？别等了，在下面留下评论，我会努力的。</p><p id="9795" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">如果你喜欢关于 Git、Linux、生产力技巧、Typescript 和 Python 的内容，请在 Medium 上关注我</strong><a class="ae mz" href="https://medium.com/u/d708e403f9f9?source=post_page-----4829a118eb2-----------------------------------" rel="noopener"><strong class="jx iz">Marco Antonio Bet</strong></a><strong class="jx iz">。</strong></p><p id="0efd" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你觉得这篇文章有用，请与你的朋友分享，留着以后用，并给👏。</p><p id="1248" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">回头见。</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><h1 id="6ada" class="om ld iy bd le on oo op lh oq or os lk ot ou ov ln ow ox oy lq oz pa pb lt pc bi translated">开源代码库</h1><div class="im in gp gr io nn"><a href="https://github.com/itsbetma/react-tree-parallax/tree/main" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iz gy z fp ns fr fs nt fu fw ix bi translated">GitHub-itsbetma/react-tree-parallax:React-spring/parallax 教程的 React 项目。</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">github.com</p></div></div><div class="nw l"><div class="pd l ny nz oa nw ob iu nn"/></div></div></a></div></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="0af5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在软件工程师的生活中，Git 非常重要，考虑到这一点，我写了一些关于它的文章:</p><div class="im in gp gr io nn"><a rel="noopener  ugc nofollow" target="_blank" href="/productivity-with-git-aliases-4829a118eb2"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iz gy z fp ns fr fs nt fu fw ix bi translated">使用 Git 别名提高工作效率</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">从我开始实际工作到现在已经一年了，这是我第一次需要使用 git…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">blog.devgenius.io</p></div></div><div class="nw l"><div class="pe l ny nz oa nw ob iu nn"/></div></div></a></div><div class="im in gp gr io nn"><a rel="noopener  ugc nofollow" target="_blank" href="/git-advanced-topics-part-one-5443ff7c9f1b"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iz gy z fp ns fr fs nt fu fw ix bi translated">Git 高级主题第一部分</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">我开始使用 git 已经一年了，在这篇文章中，我想教一些我的高级 git 技术。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">blog.devgenius.io</p></div></div><div class="nw l"><div class="pf l ny nz oa nw ob iu nn"/></div></div></a></div><div class="im in gp gr io nn"><a rel="noopener  ugc nofollow" target="_blank" href="/git-advanced-topics-part-two-1833a5f690bf"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iz gy z fp ns fr fs nt fu fw ix bi translated">Git 高级主题第二部分</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">继续高级主题，我们将讨论 reflog、二分法、search、find，最后是 git 子模块。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">blog.devgenius.io</p></div></div><div class="nw l"><div class="pg l ny nz oa nw ob iu nn"/></div></div></a></div></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><h2 id="fcb8" class="lc ld iy bd le lf lg dn lh li lj dp lk kg ll lm ln kk lo lp lq ko lr ls lt lu bi translated">别忘了查看我的媒体页面:</h2><div class="im in gp gr io nn"><a href="https://medium.com/@itsbetma" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd iz gy z fp ns fr fs nt fu fw ix bi translated">马可·安东尼奥赌注-中等</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">阅读马可·安东尼奥写的赌中等。Web 开发人员。每天，马可·安东尼奥和成千上万的其他人打赌…</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="ph l ny nz oa nw ob iu nn"/></div></div></a></div></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="6c55" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要了解更多信息:</p><ul class=""><li id="898d" class="ne nf iy jx b jy jz kc kd kg ng kk nh ko ni ks nj nk nl nm bi translated">【https://react-spring.dev/components/parallax T2】号</li><li id="b47f" class="ne nf iy jx b jy oe kc of kg og kk oh ko oi ks nj nk nl nm bi translated">【https://reactjs.org/docs/hooks-state.html T4】</li><li id="80d0" class="ne nf iy jx b jy oe kc of kg og kk oh ko oi ks nj nk nl nm bi translated"><a class="ae mz" href="https://yarnpkg.com/getting-started/usage" rel="noopener ugc nofollow" target="_blank">https://yarnpkg.com/getting-started/usage</a></li></ul></div></div>    
</body>
</html>