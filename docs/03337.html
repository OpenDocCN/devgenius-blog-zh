<html>
<head>
<title>React Bootstrap — Accordion</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应引导—手风琴</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/react-bootstrap-accordion-be1de3eefd25?source=collection_archive---------2-----------------------#2020-10-24">https://blog.devgenius.io/react-bootstrap-accordion-be1de3eefd25?source=collection_archive---------2-----------------------#2020-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/78288bdc4f6443968bfbde611ad31d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eQRmhbAaAPgFHOdm"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@johannsiemens?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">约翰·西门子</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="cfeb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React Bootstrap是为React开发的Bootstrap的一个版本。</p><p id="b124" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一组具有引导风格的React组件。</p><p id="1a24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何在React组件中使用React Bootstrap的手风琴。</p><h1 id="019a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">手风琴</h1><p id="e63a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">手风琴让我们限制卡片组件一次只能打开一个。</p><p id="5c8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用它，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c7c3" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Accordion from "react-bootstrap/Accordion";<br/>import Card from "react-bootstrap/Card";<br/>import Button from "react-bootstrap/Button";<br/>import "bootstrap/dist/css/bootstrap.min.css";</span><span id="3ad2" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Accordion defaultActiveKey="0"&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;Accordion.Toggle as={Button} variant="link" eventKey="0"&gt;<br/>              title 1<br/>            &lt;/Accordion.Toggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="0"&gt;<br/>            &lt;Card.Body&gt;body 1&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;Accordion.Toggle as={Button} variant="link" eventKey="1"&gt;<br/>              title 2<br/>            &lt;/Accordion.Toggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="1"&gt;<br/>            &lt;Card.Body&gt;body 2&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>      &lt;/Accordion&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="3fde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们导入了<code class="fe mt mu mv mj b">Accordion</code>和<code class="fe mt mu mv mj b">Card</code>组件。</p><p id="e579" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面有<code class="fe mt mu mv mj b">defaultActionKey</code>为默认卡的钥匙。</p><p id="0902" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Accordion.Toggle</code>是打开卡的拨动开关。</p><p id="b3b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">as</code>是一个道具，让我们指定将切换渲染为哪个组件。</p><p id="19cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">variant</code>是我们想要呈现的样式。</p><p id="cc3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">eventKey</code>是给定卡的密钥。</p><h1 id="f1cb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">完全折叠状态</h1><p id="1d8d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们不指定<code class="fe mt mu mv mj b">defaultActiveKey</code>，那么所有的卡片都将被折叠。</p><p id="6554" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9a77" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Accordion from "react-bootstrap/Accordion";<br/>import Card from "react-bootstrap/Card";<br/>import Button from "react-bootstrap/Button";<br/>import "bootstrap/dist/css/bootstrap.min.css";</span><span id="4342" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Accordion&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;Accordion.Toggle as={Button} variant="link" eventKey="0"&gt;<br/>              title 1<br/>            &lt;/Accordion.Toggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="0"&gt;<br/>            &lt;Card.Body&gt;body 1&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;Accordion.Toggle as={Button} variant="link" eventKey="1"&gt;<br/>              title 2<br/>            &lt;/Accordion.Toggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="1"&gt;<br/>            &lt;Card.Body&gt;body 2&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>      &lt;/Accordion&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><h1 id="61a0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使整个标题可点击</h1><p id="41dc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过将标题呈现为一个<code class="fe mt mu mv mj b">Card.Header</code>来使整个标题可点击。</p><p id="8224" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9421" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Accordion from "react-bootstrap/Accordion";<br/>import Card from "react-bootstrap/Card";<br/>import "bootstrap/dist/css/bootstrap.min.css";</span><span id="632c" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Accordion&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;Accordion.Toggle as={Card.Header} variant="link" eventKey="0"&gt;<br/>              title 1<br/>            &lt;/Accordion.Toggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="0"&gt;<br/>            &lt;Card.Body&gt;body 1&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;Accordion.Toggle as={Card.Header} variant="link" eventKey="1"&gt;<br/>              title 2<br/>            &lt;/Accordion.Toggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="1"&gt;<br/>            &lt;Card.Body&gt;body 2&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>      &lt;/Accordion&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="b490" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过将<code class="fe mt mu mv mj b">as</code>改为<code class="fe mt mu mv mj b">Card.Header</code>使文本之外的部分可点击。</p><h1 id="1494" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">自定义开关</h1><p id="abc3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b">useAccordionToggle</code>钩子创建我们的自定义切换组件。</p><p id="28f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它采用了<code class="fe mt mu mv mj b">eventKey</code>和一个在roggle被点击时运行的回调函数。</p><p id="3129" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="bfd5" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Accordion from "react-bootstrap/Accordion";<br/>import Card from "react-bootstrap/Card";<br/>import { useAccordionToggle } from "react-bootstrap/AccordionToggle";<br/>import "bootstrap/dist/css/bootstrap.min.css";</span><span id="3108" class="mn lc iq mj b gy ms mp l mq mr">function CustomToggle({ children, eventKey }) {<br/>  const decoratedOnClick = useAccordionToggle(eventKey, () =&gt;<br/>    console.log("toggle clicked")<br/>  );</span><span id="2d25" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;button<br/>      type="button"<br/>      style={{ backgroundColor: "orange" }}<br/>      onClick={decoratedOnClick}<br/>    &gt;<br/>      {children}<br/>    &lt;/button&gt;<br/>  );<br/>}</span><span id="e0c3" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Accordion&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;CustomToggle eventKey="0"&gt;title 1&lt;/CustomToggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="0"&gt;<br/>            &lt;Card.Body&gt;body 1&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;CustomToggle eventKey="0"&gt;title 2&lt;/CustomToggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="1"&gt;<br/>            &lt;Card.Body&gt;body 2&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>      &lt;/Accordion&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="2eb6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有自己创建的<code class="fe mt mu mv mj b">CustomToggle</code>组件。</p><p id="7f15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它需要<code class="fe mt mu mv mj b">children</code>和<code class="fe mt mu mv mj b">eventKey</code>道具。</p><p id="e11a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">children</code>让我们显示在组件标签中传递的内容。</p><p id="4a12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">useAccordingToggle</code>返回一个点击处理程序，用给定的<code class="fe mt mu mv mj b">eventKey</code>打开卡片。</p><p id="6a57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是一个回调函数，它允许我们在点击开关时运行任何东西。</p><p id="8789" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe mt mu mv mj b">CustomToggle</code>来代替React Bootstrap附带的toggle来切换我们的卡。</p><h1 id="9df2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">具有扩展意识的自定义开关</h1><p id="ea85" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们还可以检查当它被点击时，开关是否展开了卡片。</p><p id="81ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们使用上下文API来监听手风琴到<code class="fe mt mu mv mj b">AccordionContext</code>的声音。</p><p id="519c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ba5e" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Accordion from "react-bootstrap/Accordion";<br/>import AccordionContext from "react-bootstrap/AccordionContext";<br/>import Card from "react-bootstrap/Card";<br/>import { useAccordionToggle } from "react-bootstrap/AccordionToggle";<br/>import "bootstrap/dist/css/bootstrap.min.css";</span><span id="8c3b" class="mn lc iq mj b gy ms mp l mq mr">function CustomToggle({ children, eventKey, callback }) {<br/>  const currentEventKey = React.useContext(AccordionContext);</span><span id="2df8" class="mn lc iq mj b gy ms mp l mq mr">const decoratedOnClick = useAccordionToggle(<br/>    eventKey,<br/>    () =&gt; callback &amp;&amp; callback(eventKey)<br/>  );</span><span id="0bb0" class="mn lc iq mj b gy ms mp l mq mr">const isCurrentEventKey = currentEventKey === eventKey;</span><span id="b87c" class="mn lc iq mj b gy ms mp l mq mr">return (<br/>    &lt;button<br/>      type="button"<br/>      style={{ backgroundColor: isCurrentEventKey ? "orange" : "pink" }}<br/>      onClick={decoratedOnClick}<br/>    &gt;<br/>      {children}<br/>    &lt;/button&gt;<br/>  );<br/>}</span><span id="e79b" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Accordion&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;CustomToggle eventKey="0"&gt;title 1&lt;/CustomToggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="0"&gt;<br/>            &lt;Card.Body&gt;body 1&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>        &lt;Card&gt;<br/>          &lt;Card.Header&gt;<br/>            &lt;CustomToggle eventKey="1"&gt;title 2&lt;/CustomToggle&gt;<br/>          &lt;/Card.Header&gt;<br/>          &lt;Accordion.Collapse eventKey="1"&gt;<br/>            &lt;Card.Body&gt;body 2&lt;/Card.Body&gt;<br/>          &lt;/Accordion.Collapse&gt;<br/>        &lt;/Card&gt;<br/>      &lt;/Accordion&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="d76c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用我们的<code class="fe mt mu mv mj b">CustomToggle</code>得到<code class="fe mt mu mv mj b">eventKey</code>道具，这样我们就可以和我们上下文中的<code class="fe mt mu mv mj b">currentEventKey</code>进行比较。</p><p id="e215" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们有了<code class="fe mt mu mv mj b">useAccordionToggle</code>,就像之前的例子一样。</p><p id="01fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回一个点击处理程序，我们将它传递给<code class="fe mt mu mv mj b">onClick</code>来扩展卡片。</p><p id="0e81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">isCurrentKey</code>的结果是将toggle的<code class="fe mt mu mv mj b">eventKey</code>与上下文中打开的toggle进行比较。</p><p id="b2c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当卡片打开或关闭时，我们可以用它来设计我们喜欢的切换方式。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/561069a382b39911d09c5b66c6c0dec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tV26kVEJ_O7_8jY_"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@mahkeo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马赫凯奥</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="8d90" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="7400" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">手风琴让我们限制卡片组件一次只能打开一个。</p><p id="fa32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以自定义切换和卡片内容。</p></div></div>    
</body>
</html>