<html>
<head>
<title>Debugging Angular Applications Like A Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专家一样调试角度应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/debugging-angular-applications-like-a-pro-514e7bff95f6?source=collection_archive---------4-----------------------#2020-10-27">https://blog.devgenius.io/debugging-angular-applications-like-a-pro-514e7bff95f6?source=collection_archive---------4-----------------------#2020-10-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c3002a7a1e73042d0cd2ec077e60cba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iq2Ea6wOBGuP5XTP"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><strong class="bd jz">通过</strong> <a class="ae ka" href="https://unsplash.com/@nubelsondev" rel="noopener ugc nofollow" target="_blank"> <strong class="bd jz">努贝尔森·费尔南德斯</strong> </a>调试来自 Unsplash 的图像</figcaption></figure><p id="2ab3" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我们时不时会遇到 angular 组件的奇怪问题，调试的一种方法当然是在 DevTools 或 IDE 中使用断点。但是它们可以帮助你检查一段被调用的代码，比如方法等等。</p><p id="7ef9" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">但是，假设我想查看一个属性的当前值，并重新呈现一个使用 OnPush 策略的 Angular 组件，以查看调用 applyChanges 是否会在 ui 上呈现实际值。是的，您可以在代码中使用控制台日志，并尝试将 applyChanges 放入代码中，然后查看更新。但是，如果我们可以从浏览器本身做这些事情，难道不会花费更少的时间吗？</p><p id="20fa" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">举个例子，你在 ngFor 中渲染一个组件，所以同一个组件有多个实例。例如:-</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="de24" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">因此，呈现了 10 个 employee 组件，您希望只看到 id 为 emp-4 的组件的 employee 属性值。从元素中找到组件实例，然后在浏览器控制台中查看属性值，而不是一次又一次地更改代码，并通过控制台日志进行调试，特别是当您处理许多集成在一起的组件时，这样不是更容易吗？</p></div><div class="ab cl lf lg hr lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ig ih ii ij ik"><p id="e7f4" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">让我们看看如何用 Angular 实现这一点。</p><p id="82ff" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">从 Angular 9 开始，Angular 公开了一个名为<strong class="kd io"> ng </strong>的名称空间，其中有一些方法可以帮助我们轻松调试，而不会因为有控制台日志而有太多麻烦和代码更改。让我们看看官方文档是怎么说的。</p><blockquote class="lm ln lo"><p id="fa03" class="kb kc lp kd b ke kf kg kh ki kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx ky ig bi translated">在全局命名空间中公开一组函数，这些函数对于调试应用程序的当前状态非常有用。当您从<code class="fe lt lu lv lw b">@angular/core</code>导入并在开发模式下运行您的应用程序时，这些函数通过全局<code class="fe lt lu lv lw b">ng</code>“namespace”变量自动公开。当应用程序在生产模式下运行时，这些函数不会公开。</p></blockquote><p id="3ee1" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">名称空间包含以下函数:-</p><ol class=""><li id="e1cb" class="lx ly in kd b ke kf ki kj km lz kq ma ku mb ky mc md me mf bi translated"><strong class="kd io"> ng.getComponent </strong></li></ol><p id="4322" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">检索与给定 DOM 元素关联的组件实例。例如，在我们的例子中，当我们想要 id 为 emp-4 的元素的组件实例并读取它的 employee 属性时。我们可以在浏览器控制台中编写以下内容。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="f786" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我们也可以从浏览器控制台本身调用该组件中的任何方法。</p><p id="9ded" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io"> 2。ng.applyChanges </strong></p><p id="0fc3" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">将组件标记为检查(如果是 OnPush 组件),并对该组件所属的应用程序同步执行更改检测。因此，假设我们想在我们刚刚通过 getComponent 获得的 emp4Comp 上调用 applyChanges，我们可以像下面这样做。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="71b6" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io"> 3。ng.getOwningComponent </strong></p><p id="3323" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">检索其视图包含 DOM 元素的组件实例。因此，在我们的例子中，如果我在 emp4Comp 上调用它，它会给我 AppComponent 的实例，如果我在 employee 组件内的 div 上调用它，它会给我 employee component 的实例。可以这样用。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="6c19" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io"> 4。ng.getContext </strong></p><p id="d63c" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">如果在嵌入式视图中(如<strong class="kd io"> *ngIf </strong>或<strong class="kd io"> *ngFor </strong>)，检索元素所属的嵌入式视图的上下文。否则检索其视图拥有该元素的组件的实例(在这种情况下，结果与调用<strong class="kd io"> getOwningComponent </strong>相同)。</p><p id="2915" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io"> 5。ng.getDirectives </strong></p><p id="6015" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">检索与给定 DOM 元素关联的指令实例。不包括组件实例。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="3a2c" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io"> 6。ng.getHostElement </strong></p><p id="e002" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">检索组件或指令实例的宿主元素。host 元素是与指令的选择器匹配的 DOM 元素。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="746c" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io"> 7。ng.getInjector </strong></p><p id="af22" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">检索与元素、组件或指令实例相关联的<strong class="kd io">注入器</strong>。可以像下面这样使用。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="59d9" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io"> 8。ng.getListeners </strong></p><p id="27be" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">检索与 DOM 元素关联的事件侦听器列表。该列表包括主机侦听器，但不包括在角度上下文之外定义的事件侦听器(例如，通过 addEventListener)。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="3953" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io"> 9。ng.getRootComponents </strong></p><p id="b892" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">检索与 DOM 元素、指令或组件实例关联的所有根组件。根组件是那些由 Angular 引导的组件。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><blockquote class="lm ln lo"><p id="6a8c" class="kb kc lp kd b ke kf kg kh ki kj kk kl lq kn ko kp lr kr ks kt ls kv kw kx ky ig bi translated">这些是 Angular 公开的 API，对于开发模式下的调试非常有用。如果使用得当，我们可以从浏览器控制台调试几乎所有东西，访问我们的 angular 应用程序的不同部分，并使用它们的方法和属性。</p></blockquote><p id="3dbd" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">祝你即将到来的错误和容易调试好运。</p></div></div>    
</body>
</html>