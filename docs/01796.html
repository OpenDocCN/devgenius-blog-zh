<html>
<head>
<title>Build and Handle Editable Form with React.JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React构建和处理可编辑的表单。射流研究…</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/reactjs-form-editable-473e48fb6c9e?source=collection_archive---------3-----------------------#2020-07-12">https://blog.devgenius.io/reactjs-form-editable-473e48fb6c9e?source=collection_archive---------3-----------------------#2020-07-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f6d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们构建的大多数应用程序都有一个维护表单字段，供用户操作数据。在这里，我将分享用React.js和Formik构建的表单切换可编辑。</p><p id="b8a2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我自己构建了一个项目，我发现这对于构建维护表单很有用。在文章的结尾，我们将有一个带有编辑、保存和取消按钮的表单。用户可以随时通过取消按钮恢复修改后的数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c7684ade9ba08da75d856d3b8610b58c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4CK48tIy6W8Bd7_C3r8-mA.png"/></div></div></figure><p id="58b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你也可以在这里用登录表单查看简单的formik解释。该链接还将解释为什么我在构建表单时更喜欢使用formik库。</p><p id="7b8c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ku" href="https://medium.com/@ekaleonardo/basic-login-form-with-react-hooks-and-formik-c069de5b5f0b" rel="noopener">https://medium . com/@ eka Leonardo/basic-log in-form-with-react-hooks-and-formik-c 069 de 5b 5f 0b</a></p></div><div class="ab cl kv kw hr kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ig ih ii ij ik"><p id="fd37" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您希望找到完整的代码，您可以在本文的底部找到github代码。</p><p id="cb9e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我们将使用<strong class="jm io"> Bootstrap 4 </strong>和F <strong class="jm io"> ormik </strong>库来实现我们的目标。决不，让我们通过创建我们的react项目并安装我们需要的所有模块来开始我们的小项目</p><pre class="kj kk kl km gt lc ld le lf aw lg bi"><span id="dd32" class="lh li in ld b gy lj lk l ll lm">npx create-react-app formik-advance<br/>cd formik-advance<br/>npm install bootstrap formik</span></pre><p id="4cad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">完成所有模块后，让我们通过修改App.js将引导程序包含到我们的应用程序中</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="9d69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们将创建维护表单。稍后会有解释</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="d078" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，我们在formik的帮助下使用<strong class="jm io"> withFormik </strong>构建表单。这个Formik将处理我们以前从头开始编写的所有样板文件。Formik将自动处理所有事情，如处理更改和存储的值。我们用Formik 在<strong class="jm io">中应用了一些参数。</strong></p><p id="418c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">1.mapPropToStatus</p><p id="421a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此参数允许我们的用户指定表单的状态。Formik会将其结果转换为可更新的表单状态，并使这些值在我们的组件中作为<code class="fe lp lq lr ld b">props.status</code>可访问。在这种情况下，我们存储编辑标志，以确定是否应该更新。</p><p id="93f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.mapPropsToValues</p><p id="1e96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">值，这些值将用于将我们的输入保持为可更新的表单状态。每一个输入都会相应地存储在<code class="fe lp lq lr ld b">&lt;Field&gt;</code>组件中，以其自己的名字命名。用户也可以手动初始化输入或通过道具。</p><p id="25fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3 .启用重新初始化</p><p id="2691" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果包装的组件属性已更改，允许Formik重置表单。提醒一下，如果表单被重置，<code class="fe lp lq lr ld b">props.status</code>将被重置为初始值(该功能将重新运行)。</p><p id="3216" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">4 .提交</p><p id="5cab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当提交表单时，分配给<code class="fe lp lq lr ld b">mapPropsToValues</code>的任何值都将进入这个方法。用户可以根据需要处理数据。</p><p id="6a0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们渲染和设计的形式分为3类；<code class="fe lp lq lr ld b">_renderFormView</code> <code class="fe lp lq lr ld b">_renderAction</code>，和<code class="fe lp lq lr ld b">_renderFormInput</code>。</p><p id="e386" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">RenderFormView一个类别，用于呈现组件的仅查看模式。正如您所注意到的，我们用<code class="fe lp lq lr ld b">props.fields</code>填充数据作为我们的值。这些值是从父组件获得的，作为我们的初始值。</p><p id="8371" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">RenderFormInput用于呈现组件的编辑模式。在这里，我们用<code class="fe lp lq lr ld b">props.values</code>设置我们的<Field/>。这些值将在我们提交表单时用到。</p><p id="c6d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">RenderAction是组件的标题按钮。在这里，我们有编辑，取消和保存按钮。具有<code class="fe lp lq lr ld b">editOnClick</code>功能的编辑按钮将通过调用<code class="fe lp lq lr ld b">props.setStatus()</code>将formik编辑状态更新为真。至于取消<code class="fe lp lq lr ld b">cancelOnClick</code>，我们将使用formik内置函数<code class="fe lp lq lr ld b">props.resetForm()</code>将<code class="fe lp lq lr ld b">props.values</code>初始化为来自父组件的原始值，并将formik编辑状态设置为false。最后是保存按钮，这将自动转到handleSubmit函数，我们从父组件父组件传递函数来更新表单的状态。</p><p id="a4c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">完成表单组件的设计后，将维护表单包含到我们的App.js中</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="a20f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在App.js中，我们可以设置初始值，并按照上面的例子传递给我们的维护表单。这个初始值通常是从REST API服务器获得的。在这里，我们还传递函数updateFields，以便在用户提交表单时更新表单数据。就这样，你已经完成了可以用React.js编辑的表单，希望你觉得有用:')。</p></div><div class="ab cl kv kw hr kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="ig ih ii ij ik"><p id="89f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢您的阅读。我希望我能分享一些对你有用的东西。为这个故事鼓掌，帮助我提高我的媒体形象。本文是为开发社区目的而写的。</p><p id="7b45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更多formik文档:<a class="ae ku" href="https://jaredpalmer.com/formik/docs/overview" rel="noopener ugc nofollow" target="_blank">https://jaredpalmer.com/formik/docs/overview</a></p><p id="417b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Github代码</p><div class="ls lt gp gr lu lv"><a href="https://github.com/ekaleonardo619/form-toggle-edit-formik" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd io gy z fp ma fr fs mb fu fw im bi translated">ekaleonardo 619/表单-切换-编辑-formik</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">在GitHub上创建一个帐户，为ekaleonardo 619/form-toggle-edit-formik开发做出贡献。</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">github.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj ks lv"/></div></div></a></div><p id="f0b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">示例运行代码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mk lo l"/></div></figure></div></div>    
</body>
</html>