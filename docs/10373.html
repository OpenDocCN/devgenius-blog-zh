<html>
<head>
<title>Simple-DataTables, A Vanilla JS Alternative To DataTables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简单数据表，数据表的普通 JS 替代品</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/simple-datatables-a-vanilla-js-alternative-to-datatables-72f116565e39?source=collection_archive---------0-----------------------#2022-10-28">https://blog.devgenius.io/simple-datatables-a-vanilla-js-alternative-to-datatables-72f116565e39?source=collection_archive---------0-----------------------#2022-10-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/638dfc8a51a2f1b7a99382d6dcaa92bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1k2RT0wLCaQPm9hJ"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jz" href="https://unsplash.com/@kmuza?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Carlos Muza </a>拍摄的照片</figcaption></figure><p id="71a1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简单数据表是一个简单而强大的表格插件，类似于更流行的<a class="ae jz" href="https://datatables.net/" rel="noopener ugc nofollow" target="_blank">数据表</a>插件。在他们的知识库中，创建者将<a class="ae jz" href="https://github.com/fiduswriter/Simple-DataTables" rel="noopener ugc nofollow" target="_blank">简单数据表</a>描述为:</p><blockquote class="ky kz la"><p id="b2a7" class="ka kb lb kc b kd ke kf kg kh ki kj kk lc km kn ko ld kq kr ks le ku kv kw kx ig bi translated">一个轻量级的，可扩展的，无依赖性的 javascript HTML 表格插件。类似于现代浏览器中使用的 jQuery 数据表<strong class="kc io"/>，但是没有 jQuery 依赖。</p></blockquote><p id="9d47" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如上所述，两者之间的主要区别是简单数据表不需要 jQuery 就能工作。因此，对于那些出于这样或那样的原因想要避免 jQuery 但是需要一个表格插件的人来说，可以看看简单的数据表。</p><h2 id="24d3" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">简单数据表功能</h2><p id="5d33" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">Simple-DataTables 提供了其他 HTML 表格插件共有的特性，例如<em class="lb">可排序的列、分页、搜索特性、可定制的布局、可定制的标签、可定制的列呈现、导入和导出</em>等等。</p><h2 id="6c4a" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">基本用法</h2><p id="f807" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">简单数据表可以通过 CDN 或 JS 包获得，可以通过 npm 或 yarn 安装。为了尽可能简单，本教程将使用 CDN 选项。</p><p id="2542" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简单数据表的第一种实例化方式是在现有的表上，即不动态获取数据的表。表格已经被渲染，然后插件在上面被实例化，如下所示。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="3998" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二种方法是从 json 文件或者更可能是从 api 导入数据。与配备了 jQuery Ajax 特性的数据表相反，简单数据表不能自己执行 api 调用。因此，您需要使用 fetch 或您选择的客户机从 api 获取数据，并在实例化表时将数据传递给 Simple-DataTables 对象，如下所示。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="ec86" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面显示的两种方法将产生以下输出:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/d67ac8001960e98a9f0aa92cdfd4fae0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5LClssAxFLkX4Y0IUC6dYg.png"/></div></div></figure><p id="024b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在表实例化过程中传递给 Simple-DataTables 对象的数据需要采用特定的格式。它需要是一个具有两个属性的对象，一个是列标题的数组，一个是包含数据值的数组。如果</p><blockquote class="ky kz la"><p id="0004" class="ka kb lb kc b kd ke kf kg kh ki kj kk lc km kn ko ld kq kr ks le ku kv kw kx ig bi translated">注意:如果标题数组的长度和包含数据值的数组的长度不匹配，库将抛出一个异常。</p></blockquote><p id="d1da" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">插件的创建者已经提供了一种将关联对象从 api 转换成合适格式的方法。在这个例子中，代码被包装到了<code class="fe mk ml mm mn b">convertObject(dataObject)</code>函数中。下面的例子演示了这一转换过程。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="20f9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">处理数据变量时，它会产生如下所示的输出:</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><h2 id="d5f2" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">将简单数据表发挥到极致</h2><p id="b95d" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">简单数据表可以无视它的名字，因为它可以完成相当多的事情。本教程将介绍一些值得注意的特性，主要围绕 columns 选项和 columns 方法。它们包括:</p><ol class=""><li id="94e0" class="mo mp in kc b kd ke kh ki kl mq kp mr kt ms kx mt mu mv mw bi translated">列重新排序</li><li id="a374" class="mo mp in kc b kd mx kh my kl mz kp na kt nb kx mt mu mv mw bi translated">特定列的删除</li><li id="3fda" class="mo mp in kc b kd mx kh my kl mz kp na kt nb kx mt mu mv mw bi translated">隐藏列</li><li id="1ba3" class="mo mp in kc b kd mx kh my kl mz kp na kt nb kx mt mu mv mw bi translated">定制渲染</li><li id="a6f6" class="mo mp in kc b kd mx kh my kl mz kp na kt nb kx mt mu mv mw bi translated">隐藏表格标题</li></ol><p id="da22" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mk ml mm mn b">columns</code>选项接受一个对象数组，数组中的每个对象都是由<code class="fe mk ml mm mn b">select</code>属性中列的索引指定的列的配置。<code class="fe mk ml mm mn b">select</code>属性接受单个列的整数和涉及多个列的整数数组。</p><p id="0fa5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mk ml mm mn b">columns()</code>方法提供了对 columns api 的访问，这有助于快速操作对表列的访问。</p><h2 id="f1d5" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">列重新排序和删除</h2><p id="f345" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">考虑到上面的例子，如果需要在职位之前显示公司名称，可以使用 DataTable 对象的 columns 方法来实现。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><blockquote class="ky kz la"><p id="705c" class="ka kb lb kc b kd ke kf kg kh ki kj kk lc km kn ko ld kq kr ks le ku kv kw kx ig bi translated">重要的是要注意，无论何时使用<code class="fe mk ml mm mn b"><em class="in">remove()</em></code>方法删除列，都会按照它们被呈现的顺序对列进行重新索引，并且在对列进行重新索引之后对列执行的操作必须考虑新的索引，这可以在上面涉及<code class="fe mk ml mm mn b"><em class="in">order()</em></code>方法的操作中看到。</p></blockquote><p id="fa45" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">瞧，就像柱子被调换了一样。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/25b4ffcc3feb9aea4fc609e101f7828d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6ZvhVWf_QWqbuY9BdhrO0g.png"/></div></div></figure><p id="e032" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mk ml mm mn b">swap</code>方法也可用于<code class="fe mk ml mm mn b">columns</code>方法。<code class="fe mk ml mm mn b">swap</code>方法接受一个参数，即应该切换的列的索引数组。</p><h2 id="f02d" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">隐藏列</h2><p id="7679" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">可以在实例化期间使用 Columns 选项和在实例化之后使用 columns 方法来切换列的可见性。这两种方法都利用了列的索引。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="694f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mk ml mm mn b">show()</code>方法也可用于<code class="fe mk ml mm mn b">columns()</code>方法，并可用于使隐藏的列可见。</p><h2 id="b742" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">自定义呈现和隐藏表头</h2><p id="be61" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">要隐藏表头，可以在实例化过程中使用<code class="fe mk ml mm mn b">header</code>选项。它接受一个布尔值。如果设置为 false，则隐藏标题。</p><p id="0409" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过接受回调的 render 属性，可以在 columns 选项中使用自定义呈现。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="c44c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">render 属性中的回调接受三个参数。<code class="fe mk ml mm mn b">data</code>参数包含单元格的内容。<code class="fe mk ml mm mn b">cell</code>是 HTMLTableCellElement。<code class="fe mk ml mm mn b">row</code>引用单元格的父级 HTMLTableRowElement。</p><p id="2741" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要访问特定行中的数据，可以使用一种变通方法，即使用包含表数据的变量，并使用可以通过<code class="fe mk ml mm mn b">row</code>参数获得的索引来访问该行的数据源，如上所示。</p><p id="4087" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面的例子产生了下面的卡片:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/4e60318409fb11df08cf43da7daa2df0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZvSGIyQPp5jgt2c5PJxQ5Q.png"/></div></div></figure><h2 id="0161" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">提示和技巧</h2><p id="5da9" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">将对象转换成插件指定的格式的功能应该被提取到一个可重用的函数中，并且可以在各种情况下使用。这将防止代码重复。</p><p id="acf0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果从对象键中提取的标题是 snake_case 格式的，那么最好用空格替换连字符，使表格标题对用户来说更加易读和友好。对于 camelCase，可以使用 regex 来转换头。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="6aea" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您还可以更进一步，为<code class="fe mk ml mm mn b">&lt;th&gt;</code>元素添加样式，以大写标题中的每个单词。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="ed2b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果 DataTable 已经在函数中初始化，如本教程中所做的那样，并且您需要稍后在代码中自定义它或者在初始化函数的范围之外操作它，有一种方法可以解决这个问题。</p><p id="e805" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以创建一个将被初始化为 null 的全局变量，并在初始化时将 DataTable 对象赋给该全局变量。我确信将来会有工作来防止这样的变通，这个用例以及其他的用例将被原生地覆盖。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="1364" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">columns 选项中使用的对象可用的属性可以用作 th 元素中的数据属性，方式类似:</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><h2 id="1006" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">隐藏和删除列的区别</h2><p id="ca27" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">虽然这两个功能在视觉上可能服务于相同的目的，但在它们的底层机制中，它们以不同的方式工作并产生不同的结果。主要区别在于，一旦删除了列，除非删除实例并重新初始化表，否则删除是不可逆的。</p><p id="b144" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">同样，一旦删除了一个或多个列，您就可以基于该列进行模糊搜索。如果一列只是隐藏的，您可以搜索，隐藏的列将在过滤过程中被考虑。</p><h2 id="e9df" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">结论</h2><p id="4d00" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">数据表的 jQuery 风格有许多不同语言和框架的服务器端库。然而，简单数据表目前还不支持服务器端呈现。</p><p id="2575" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">尽管这个插件确实有一些小缺点，但它仍然非常强大，涵盖了日常 web 应用程序可能以表格形式呈现的大多数用例。对于那些避免使用 jQuery 但是仍然需要管理他们的表的人，你可以考虑这个插件。</p><p id="d898" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里讨论的特性只是众所周知的冰山一角，关于这个插件还有很多需要学习的，比如固定列宽<em class="lb">，固定表格高度，页脚定制</em>等等。关于这一切的材料可以在该项目的<a class="ae jz" href="https://github.com/fiduswriter/Simple-DataTables/wiki" rel="noopener ugc nofollow" target="_blank"> github wiki </a>中找到。这个教程的完整代码也可以在<a class="ae jz" href="https://github.com/kiptoo-korir/simple-datatables-tut" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="6ad2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> PS:实际上有一个关于添加自定义类到头文件的</strong> <a class="ae jz" href="https://github.com/fiduswriter/Simple-DataTables/issues/135" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">问题</strong> </a> <strong class="kc io">。公共关系也可能正在进行中，从该特定问题的评论。</strong></p></div></div>    
</body>
</html>