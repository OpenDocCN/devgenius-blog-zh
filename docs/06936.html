<html>
<head>
<title>Laravel user roles and permissions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel 用户角色和权限</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/laravel-user-roles-and-permissions-6dbfd4abfcf8?source=collection_archive---------1-----------------------#2022-02-13">https://blog.devgenius.io/laravel-user-roles-and-permissions-6dbfd4abfcf8?source=collection_archive---------1-----------------------#2022-02-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c5be" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Laravel 从头开始创建管理面板——第 3 部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bf42b4fb2acc0cb8c02060c3a26854af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ABHn0bICBeBNAFC5"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@drice22?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹尼尔·赖斯</a>拍摄的照片</figcaption></figure><p id="fd22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在最后的<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/laravel-create-an-admin-panel-from-scratch-part-2-authentication-f0eb0bbd6139">部分</a>，我们完成了管理面板的用户认证。在这一部分，我们将实现用户角色和权限。</p><ul class=""><li id="5c1b" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">第 1 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/laravel-create-an-admin-panel-from-scratch-part-1-installation-8c11dae7e684">安装</a></li><li id="fd03" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 2 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/laravel-create-an-admin-panel-from-scratch-part-2-authentication-f0eb0bbd6139">认证</a></li><li id="f52f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">第 3 部分—用户角色和权限</strong></li><li id="2356" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 4 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/basic-laravel-admin-panel-basic-laravel-crud-creation-for-permission-management-6bd93fb0e1a2">权限管理的基本 Laravel CRUD 创建</a></li><li id="4bef" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 5 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/laravel-crud-access-control-based-on-role-and-permission-f190d03f1fa2">基于角色和权限的 CRUD 访问控制</a></li><li id="2a77" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 6 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/implements-a-basic-search-filter-and-column-sort-with-pagination-in-laravel-crud-5e3c70fb12ac">带分页的基本搜索过滤器和列排序</a></li><li id="4421" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 7 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/create-ui-for-role-management-to-laravel-admin-panel-dce72b09d2ea">为角色管理创建 UI</a></li><li id="231a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 8 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/basic-laravel-admin-panel-user-management-crud-45f694ef60cc"> Laravel 用户管理 CRUD </a></li><li id="6313" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 9 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/laravel-create-an-account-update-page-for-admin-users-e123cd88f24b">创建账户更新页面</a></li><li id="a9c8" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 10 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/restructuring-a-laravel-controller-using-form-request-validation-e546fe22c298">使用表单请求验证重构 Laravel 控制器</a></li><li id="430d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 11 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/restructuring-a-laravel-controller-using-services-action-classes-288b802122b5">使用服务&amp;动作类</a>重构 Laravel 控制器</li><li id="3afd" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 12 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/create-reusable-blade-components-in-laravel-5607d8f306a6">在 Laravel 中创建可重用的刀片组件</a></li><li id="6060" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 13 部分— <a class="ae kv" href="https://balajidharma.medium.com/implement-delete-confirmation-in-laravel-crud-2180f93b5a87" rel="noopener">在 Laravel CRUD </a>中实施删除确认</li><li id="9bb0" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 14 部分— <a class="ae kv" href="https://balajidharma.medium.com/how-to-migrating-from-laravel-mix-to-vite-fbb912237844" rel="noopener">从 Laravel Mix 迁移到 Vite </a></li><li id="9280" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 15 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/laravel-enable-user-registration-email-verification-and-customize-email-templates-b994299ab27d">验证电子邮件并定制电子邮件模板</a></li><li id="8e00" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 16 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-debug-laravel-app-using-laravel-debugbar-ec51a8587786">如何使用 Laravel Debugbar </a>调试 Laravel 应用</li><li id="285d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 17 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-upgrade-the-laravel-breeze-on-the-existing-application-8f742b48b632">如何在现有应用程序上升级 Laravel Breeze</a></li><li id="4e09" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 18 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/browser-testing-with-laravel-dusk-aeef2e8b30f8">使用 Laravel Dusk 进行浏览器测试</a></li><li id="ca13" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 19 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-create-your-own-laravel-packages-2b68da22506a">如何创建自己的 Laravel 包</a></li><li id="d3cf" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">第 20 部分— <a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/how-to-publish-your-own-laravel-package-on-packagist-ac9a084502ab">如何在 Packagist 上发布自己的 Laravel 包</a></li></ul><p id="76cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">多用户角色和权限控制是管理面板的必备功能。</p><h1 id="69e2" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">斯帕蒂·拉勒维尔许可套餐</h1><p id="2530" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">Spatie<a class="ae kv" href="https://github.com/spatie/laravel-permission" rel="noopener ugc nofollow" target="_blank">Laravel-permission</a>是管理数据库中用户权限和角色的最佳包。在这一部分，我们为我们的管理面板安装和使用这个包。</p><p id="ba4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下步骤涉及到为我们的 Laravel 管理面板设置角色和权限。</p><ul class=""><li id="192a" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">1.安装 Spatie Laravel-权限包</li><li id="4b87" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">2.发布配置和迁移文件</li><li id="0e5f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">3.运行迁移</li></ul><h2 id="4dc3" class="nd mh iq bd mi ne nf dn mm ng nh dp mq lf ni nj ms lj nk nl mu ln nm nn mw no bi translated">1.安装 Spatie Laravel-权限包</h2><p id="32c4" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">使用 composer 命令安装软件包</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="95b6" class="nd mh iq nq b gy nu nv l nw nx">sail composer require spatie/laravel-permission</span></pre><h2 id="91f4" class="nd mh iq bd mi ne nf dn mm ng nh dp mq lf ni nj ms lj nk nl mu ln nm nn mw no bi translated">2.发布配置和迁移文件</h2><p id="6358" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><code class="fe ny nz oa nq b">vendor:publish</code> artisan 命令用于将包配置发布到 config 文件夹。此外，将迁移文件复制到迁移文件夹。</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="11ea" class="nd mh iq nq b gy nu nv l nw nx">sail artisan vendor:publish --provider="Spatie\Permission\PermissionServiceProvider"</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/62e4667789aef308330e3495fe08fafb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dDOTAIg8jO6Mvv0E0PLqFQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><code class="fe ny nz oa nq b">Laravel artisan vendor:publish</code></figcaption></figure><h2 id="3348" class="nd mh iq bd mi ne nf dn mm ng nh dp mq lf ni nj ms lj nk nl mu ln nm nn mw no bi translated">3.运行迁移</h2><p id="a301" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">使用<code class="fe ny nz oa nq b">artisan migrate</code>运行迁移</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="5ea9" class="nd mh iq nq b gy nu nv l nw nx">sail artisan migrate</span></pre></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><p id="dd9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们成功地将 Spatie Laravel-permission 包安装到我们的管理面板中。软件包没有附带 UI。</p><p id="1a63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在接下来的部分中，我们将在 Laravel 创建我们的第一个 CRUD。</p><h1 id="e3f4" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">将管理面板升级到 Laravel 9</h1><p id="fdf4" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">Laravel 9 已经发布。我们将把我们的管理面板升级到 Laravel 9。</p><p id="3573" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://laravel.com/docs/9.x/upgrade" rel="noopener ugc nofollow" target="_blank"> Laravel 文档</a>中提供的所有升级信息</p><p id="5297" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开<code class="fe ny nz oa nq b">composer.json</code>文件并更新以下依赖关系</p><ul class=""><li id="55bb" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><code class="fe ny nz oa nq b">laravel/framework</code>到<code class="fe ny nz oa nq b">^9.0</code></li><li id="084d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><code class="fe ny nz oa nq b">nunomaduro/collision</code>到<code class="fe ny nz oa nq b">^6.1</code></li><li id="4da8" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><code class="fe ny nz oa nq b">php</code>至<code class="fe ny nz oa nq b">^8.0.2</code></li></ul><p id="a62b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，请在您的应用程序的<code class="fe ny nz oa nq b">composer.json</code>文件中将<code class="fe ny nz oa nq b">facade/ignition</code>替换为<code class="fe ny nz oa nq b">"spatie/laravel-ignition": "^1.0"</code>。</p><p id="14a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请参考 Laravel <a class="ae kv" href="https://github.com/laravel/laravel/blob/v9.0.0/composer.json" rel="noopener ugc nofollow" target="_blank"> composer.json </a>文件</p><p id="74e4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的最终版本<code class="fe ny nz oa nq b">composer.json</code></p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="5dd6" class="nd mh iq nq b gy nu nv l nw nx">"keywords": ["framework", "laravel"],<br/>     "license": "MIT",<br/>     "require": {<br/>-        "php": "^7.3|^8.0",<br/>-        "fruitcake/laravel-cors": "^2.0",<br/>-        "guzzlehttp/guzzle": "^7.0.1",<br/>-        "laravel/framework": "^8.75",<br/>-        "laravel/sanctum": "^2.11",<br/>-        "laravel/tinker": "^2.5",<br/>+        "php": "^8.0.2",<br/>+        "fruitcake/laravel-cors": "^2.0.5",<br/>+        "guzzlehttp/guzzle": "^7.2",<br/>+        "laravel/framework": "^9.0",<br/>+        "laravel/sanctum": "^2.14",<br/>+        "laravel/tinker": "^2.7",<br/>         "spatie/laravel-permission": "^5.5"<br/>     },<br/>     "require-dev": {<br/>-        "facade/ignition": "^2.5",<br/>         "fakerphp/faker": "^1.9.1",<br/>         "laravel/breeze": "^1.7",<br/>         "laravel/sail": "^1.0.1",<br/>         "mockery/mockery": "^1.4.4",<br/>-        "nunomaduro/collision": "^5.10",<br/>-        "phpunit/phpunit": "^9.5.10"<br/>+        "nunomaduro/collision": "^6.1",<br/>+        "phpunit/phpunit": "^9.5.10",<br/>+        "spatie/laravel-ignition": "^1.0"<br/>     },<br/>     "autoload": {<br/>         "psr-4": {</span></pre><p id="d4ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">文件更新后运行<code class="fe ny nz oa nq b">composer update</code></p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="339f" class="nd mh iq nq b gy nu nv l nw nx">sail composer update</span></pre><p id="02a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用下面的命令检查 Laravel 版本</p><pre class="kg kh ki kj gt np nq nr ns aw nt bi"><span id="0eba" class="nd mh iq nq b gy nu nv l nw nx">sail artisan --version</span><span id="b3e1" class="nd mh iq nq b gy oj nv l nw nx">// Laravel Framework 9.0.2</span></pre><p id="96d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们成功地将管理面板升级到了 Laravel 9</p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h1 id="f0dd" class="mg mh iq bd mi mj ok ml mm mn ol mp mq jw om jx ms jz on ka mu kc oo kd mw mx bi translated">GitHub 知识库</h1><p id="d596" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">“基本 Laravel 管理面板”GitHub 库<a class="ae kv" href="https://github.com/balajidharma/basic-laravel-admin-panel" rel="noopener ugc nofollow" target="_blank">https://github.com/balajidharma/basic-laravel-admin-panel</a></p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><p id="61b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上一部分— <strong class="ky ir"> </strong>第 2 部分:<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/laravel-create-an-admin-panel-from-scratch-part-2-authentication-f0eb0bbd6139">向 Laravel 应用程序添加用户认证的步骤</a></p><p id="6f84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一部分—第 4 部分:<a class="ae kv" rel="noopener ugc nofollow" target="_blank" href="/basic-laravel-admin-panel-basic-laravel-crud-creation-for-permission-management-6bd93fb0e1a2">用于权限管理的 Laravel CRUD 创建</a></p></div></div>    
</body>
</html>