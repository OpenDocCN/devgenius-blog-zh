<html>
<head>
<title>Script to run git commands across multiple repos</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">跨多个回购运行 git 命令的脚本</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/script-to-run-git-commands-across-multiple-repos-8e2a1199aa2?source=collection_archive---------4-----------------------#2020-07-10">https://blog.devgenius.io/script-to-run-git-commands-across-multiple-repos-8e2a1199aa2?source=collection_archive---------4-----------------------#2020-07-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b3be7888d16b12c091b2011b20e9f098.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcAnKVO48IfnzyTSZvPhkw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">由<a class="ae jz" href="https://unsplash.com/@goran_ivos?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Goran Ivos </a>在<a class="ae jz" href="https://unsplash.com/s/photos/code-in-laptop?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片组合而成<a class="ae jz" href="https://piktochart.com/" rel="noopener ugc nofollow" target="_blank"> Piktochart </a>的图形</figcaption></figure><p id="2697" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">GitHub 是一个非常流行的 Git 存储库托管服务，被许多组织和软件开发者使用。如果您的日常工作涉及编写代码或与代码交互，那么在 GitHub 上运行多个共享 Git 存储库(repos)是很正常的。</p><p id="dc4c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我曾在团队中工作过，在任何给定的时间点，至少有 20 个人同时将他们的代码推送到多个 repos 中。不。我没有夸大其词！！这使得很难保持所有这些回购与变化同步。</p><p id="0595" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了解决这个问题，我使用这个简单的脚本循环遍历当前目录中的所有 Git repos，它将命令(在这些目录中运行)作为参数/输入。我在<code class="fe ky kz la lb b">Steps to run the script</code>部分列举了一个例子。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><h1 id="1e22" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">运行脚本的步骤</strong></h1><p id="c3de" class="pw-post-body-paragraph ka kb in kc b kd mg kf kg kh mh kj kk kl mi kn ko kp mj kr ks kt mk kv kw kx ig bi translated"><em class="ml">注意:这里提到的所有命令和例子都只适用于 macOS。对于任何其他基于 Unix 的系统，可以对脚本进行简单的调整，以确保它能够工作。我创建了这个 shell 脚本。但是，这也很容易成为 Ruby 脚本。</em></p><ol class=""><li id="ef85" class="mm mn in kc b kd ke kh ki kl mo kp mp kt mq kx mr ms mt mu bi translated">进入有多个回购的目录。使用<code class="fe ky kz la lb b">cd</code>命令来完成此操作。</li><li id="2103" class="mm mn in kc b kd mv kh mw kl mx kp my kt mz kx mr ms mt mu bi translated">使用<code class="fe ky kz la lb b">touch </code>和/或您选择的任何其他编辑器将 gist 中的代码复制到这个目录下的一个 shell 脚本中。我个人比较喜欢<code class="fe ky kz la lb b">vim</code>。</li><li id="e692" class="mm mn in kc b kd mv kh mw kl mx kp my kt mz kx mr ms mt mu bi translated">创建脚本后，更改权限以确保您可以执行该脚本。</li></ol><p id="6207" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">示例:您可以使用<code class="fe ky kz la lb b">chmod</code>向脚本添加执行权限，如下所示:</p><pre class="lc ld le lf gt na lb nb nc aw nd bi"><span id="23cc" class="ne lj in lb b gy nf ng l nh ni">chmod +x pull_from_git.sh</span></pre><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/aa8ecb2a079428fda4647202a98c7aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IdxFWoBlqrwz8bIpxHmUsA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">将“cd”放入目录，创建脚本并更改权限…</figcaption></figure><p id="bc8a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.现在它已经准备好运行您想要的任何 git 命令，针对该目录中列出的所有 repos。</p><p id="5ce5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以下列格式运行脚本:<code class="fe ky kz la lb b">./pull_from_git.sh &lt;command_to_run&gt;</code></p><p id="e9fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">示例:</p><pre class="lc ld le lf gt na lb nb nc aw nd bi"><span id="e749" class="ne lj in lb b gy nf ng l nh ni">./pull_from_git.sh git pull --rebase</span></pre><p id="7678" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，它将遍历当前文件夹中的所有存储库，并运行<code class="fe ky kz la lb b">git pull --rebase</code>命令。</p><p id="15c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这可以在开始编码之前每天运行，以确保所有最新的更改都从 git 中下载。</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/42a3ce969511b2a9999bbeaa3cd95ab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KISH9p49IF1OwvW8l9FegQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">对所有仓库运行“git pull — rebase”</figcaption></figure><p id="4abc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">运筹学</p><p id="9089" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">检查回购的状态:</p><pre class="lc ld le lf gt na lb nb nc aw nd bi"><span id="b311" class="ne lj in lb b gy nf ng l nh ni">./pull_from_git.sh git status</span></pre><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/9ec33e96ca71bc408da81a19cf3bd723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*zVMlueh0z08x7ggzxju10w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">为所有的回复运行“git 状态”…</figcaption></figure><p id="3545" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于在修改代码时经常使用的所有其他 Git 命令，可以遵循相同的过程。</p><p id="2407" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，基本上这个脚本可以用来对所有本地克隆的回购文件运行任何这样的命令，在当前目录中，不需要进入每个回购文件的本地目录并单独下载代码。</p><p id="e97c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">只是一个简单的脚本，带走一点痛苦。</p></div></div>    
</body>
</html>