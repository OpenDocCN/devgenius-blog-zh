<html>
<head>
<title>Smooth and easy animations on Android Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android应用程序上流畅简单的动画</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/smooth-and-easy-animations-on-android-apps-e7541c5ded78?source=collection_archive---------9-----------------------#2020-06-08">https://blog.devgenius.io/smooth-and-easy-animations-on-android-apps-e7541c5ded78?source=collection_archive---------9-----------------------#2020-06-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9569deb0932b17eda407f750e9a432a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X8Eo8GKV_h_SlNB2"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@christianw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯蒂安·威迪格</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="3d1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将学习在Android应用程序中创建流畅的动画，同时编写最少的代码行。我确信我不必解释应用程序中动画的重要性。它们是UX设计师的最爱。它们提升了用户的体验。但是创造它们并不容易。</p><p id="6591" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要进一步理解内容，你必须对<code class="fe lb lc ld le b">ConstraintLayout</code>有所了解。网上有很多文章，但为了完整起见:<a class="ae kc" href="https://developer.android.com/training/constraint-layout" rel="noopener ugc nofollow" target="_blank">https://developer.android.com/training/constraint-layout</a>。</p><p id="c374" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意:我不赞成任何写代码的方式。此处的代码只是为了进行说明，并给出演练的概念。你可以随意组织。</p><p id="5075" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个动画都有一个开始场景和结束场景。我们必须尽可能平稳地从开始场景过渡到结束场景。对于这个实例，我们将尝试在单击图像(是的，屏幕上的绿点)时，从场景1(左侧的图像)过渡到场景2(右侧的图像)。</p><div class="lf lg lh li gt ab cb"><figure class="lj jr lk ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/4ecea1dbb0baee506c28fa1ec1919d89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*qcgfY0EOjwT3AH9rMh9KeQ.png"/></div></figure><figure class="lj jr lk ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><img src="../Images/5ae3e4c4fd554ef242dbec42770634e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*UnzWwn4DqZPtGS0tUdmR0w.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk lp di lq lr translated">左边的图像:场景1。右边的图像:场景2</figcaption></figure></div><p id="cc65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是场景1的布局。不要看<code class="fe lb lc ld le b">id(s)</code>而是看约束。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ls"><img src="../Images/937b58a41db9ec458d1824103a47dcd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fGCv6Rd8zEdlU_9eVR8mNA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">活动_主要_v1</figcaption></figure><p id="1026" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是场景2的布局。做<code class="fe lb lc ld le b">id(s)</code>还要看约束。万一你错过了，<code class="fe lb lc ld le b">id(s)</code>是相同的，但是约束是不同的。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ls"><img src="../Images/dd78384bd86d428cd767de3590440577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1y7-bF0YMdjEGsRVXv7ThA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">活动_主要_v2</figcaption></figure><p id="ce76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦你创建了这两个场景，是时候进行过渡了。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lt"><img src="../Images/3f9b816e953189d50541bd2a7d05f6c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fC3ozlZLT2M_3LVjtUPnsg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">进行转换的代码</figcaption></figure><p id="f175" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们一行一行的演练代码:<br/> 1。首先，我们创建<code class="fe lb lc ld le b">ConstraintSet</code>，它允许您以编程方式定义一组与<code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.android.com/reference/androidx/constraintlayout/widget/ConstraintLayout" rel="noopener ugc nofollow" target="_blank">ConstraintLayout</a></code>一起使用的约束，我们从场景2【activity _ main _ v2】克隆约束。<br/> 2。然后，我们在图像上注册一个<code class="fe lb lc ld le b">clickListener</code>，它将作为过渡的触发器。<br/> 3。在被点击时，我们告诉<code class="fe lb lc ld le b">TransitionManager</code>在调用这个方法和下一个渲染帧之间，动画到一个由给定场景根内的所有变化定义的新场景。调用此方法会导致TransitionManager捕获场景根中的当前值，然后提交请求以在下一帧运行过渡。<br/> 4。最后，我们对原始布局应用新的约束。</p><p id="9f29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一段代码中缺失的部分是<code class="fe lb lc ld le b">createTransition()</code>。下面是代码的样子。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/e16e760c85f3d6b9a0274b0a196ba2ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*NFXKy7eWul8c1R4sDD8l3A.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">简单过渡</figcaption></figure><p id="fd39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建一个过渡并指定各种可用的参数来相应地调整动画。比如我把<code class="fe lb lc ld le b">duration</code>指定为3000ms。所有这一切之后的结果将类似于gif中所示</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/002974fe7470008380e3aa4d716d8b7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*9C5yEqqMLLSfs_tZQbUTRw.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">更改界限转换</figcaption></figure><p id="896d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以一起使用各种过渡来创建多种效果。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/eab970b2081057891ed9aaea8b107a6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*s8kpcFL6tV2ktd6wBUUoeQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">多个过渡协同工作示例</figcaption></figure><p id="c0ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码片段会产生类似下面的gif。仅供参考，我已经将<code class="fe lb lc ld le b">no_use_motivation</code>的可见性标记为在场景1中消失，在场景2中可见。</p><figure class="lf lg lh li gt jr gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/521566fb9f6a48ec1e1565037b195863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*OC-z8BiRHjzJVWLonIZa-A.gif"/></div></figure><p id="b97d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有各种各样的过渡可用，它们可以组合起来创建漂亮的用户体验。</p><p id="12e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里也提到了一些限制。应用于<code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.android.com/reference/android/view/SurfaceView" rel="noopener ugc nofollow" target="_blank">SurfaceView</a></code>的动画可能无法正确显示。<code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.android.com/reference/android/view/SurfaceView" rel="noopener ugc nofollow" target="_blank">SurfaceView</a></code>实例从非UI线程更新，因此更新可能与其他视图的动画不同步。<br/> 2。某些特定的过渡类型在应用到<code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.android.com/reference/android/view/TextureView" rel="noopener ugc nofollow" target="_blank">TextureView</a></code>时可能不会产生想要的动画效果。<br/> 3。扩展了<code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.android.com/reference/android/widget/AdapterView" rel="noopener ugc nofollow" target="_blank">AdapterView</a></code>的类，比如<code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.android.com/reference/android/widget/ListView" rel="noopener ugc nofollow" target="_blank">ListView</a></code>，以与转换框架不兼容的方式管理孩子的视图。如果您尝试基于<code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.android.com/reference/android/widget/AdapterView" rel="noopener ugc nofollow" target="_blank">AdapterView</a></code>制作视图动画，设备显示可能会挂起。<br/> 4。如果您试图用动画调整<code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.android.com/reference/android/widget/TextView" rel="noopener ugc nofollow" target="_blank">TextView</a></code>的大小，在对象完全调整大小之前，文本将弹出到一个新的位置。为避免此问题，请不要对包含文本的视图进行动画调整。</p></div></div>    
</body>
</html>