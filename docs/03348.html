<html>
<head>
<title>React Tips — Sorting Arrays, Handling Clicks and Inputs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React 提示—排序数组、处理点击和输入</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/react-tips-sorting-arrays-handling-clicks-and-inputs-d12e3a66460d?source=collection_archive---------2-----------------------#2020-10-25">https://blog.devgenius.io/react-tips-sorting-arrays-handling-clicks-and-inputs-d12e3a66460d?source=collection_archive---------2-----------------------#2020-10-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8db0b02c16bc18445e8c4564db3f3036.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8W9e5acUnmQoa5NZ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Luiza Sayfullina 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="8f23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React 是一个用于创建 web 应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些编写更好的 React 应用程序的技巧。</p><h1 id="cc89" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">对 React 中的对象数组进行排序并渲染</h1><p id="8f3e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">sort</code>方法对一组对象进行排序。</p><p id="f7a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以调用<code class="fe me mf mg mh b">map</code>来呈现排序后的条目。</p><p id="3014" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，在<code class="fe me mf mg mh b">render</code>方法或函数组件中，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cf38" class="mq lc iq mh b gy mr ms l mt mu">const myData = this.state.data<br/>  .sort((a, b) =&gt; a.name &gt; b.name ? 1 : -1)<br/>  .map((item) =&gt; (<br/>     &lt;div key={item.id}&gt; {item.name}&lt;/div&gt;<br/>  ));</span></pre><p id="84d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">sort</code>方法按照<code class="fe me mf mg mh b">name</code>属性对数据进行排序。</p><p id="f66a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查<code class="fe me mf mg mh b">a.name &gt; b.name</code>是否是<code class="fe me mf mg mh b">true</code>。</p><p id="05e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">字符串可以直接比较。</p><h1 id="2111" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在 React 中使用 onClick 和 div</h1><p id="4c03" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们给它提供一个尺寸，我们可以用 div 来使用<code class="fe me mf mg mh b">onClick</code>。</p><p id="8a2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6c14" class="mq lc iq mh b gy mr ms l mt mu">class App extends React.component {<br/>  constructor() {<br/>    this.state = {<br/>      color: 'black'<br/>    };<br/>  },</span><span id="09f2" class="mq lc iq mh b gy mv ms l mt mu">  changeColor() {<br/>    const newColor = this.state.color == 'white' ? 'black' : 'white';<br/>    this.setState({<br/>      color: newColor<br/>    });<br/>  },</span><span id="9981" class="mq lc iq mh b gy mv ms l mt mu">  render() {<br/>    return (<br/>       &lt;div&gt;<br/>          &lt;div<br/>             style = {{<br/>                background: this.state.color,<br/>                width: 100,<br/>                height: 100<br/>             }}<br/>             onClick = {this.changeColor}<br/>          &gt;<br/>          &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="5fe8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过传入一个带有<code class="fe me mf mg mh b">style</code>属性中样式的对象来创建一个带有背景的 div。</p><p id="0fda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">width</code>和<code class="fe me mf mg mh b">height</code>设置为 100px，这样我们就可以显示一个内部空无一物的 div。</p><p id="f1d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以向<code class="fe me mf mg mh b">onClick</code>道具传递一个点击处理程序。</p><p id="1fdf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">changeColor</code>方法中，我们只是在<code class="fe me mf mg mh b">color</code>状态的白色和黑色之间切换。</p><h1 id="df80" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在两个字符串之间添加一个<br/>标签</h1><p id="e4d9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在字符串中添加一个换行符来添加一个换行符。</p><p id="1400" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe me mf mg mh b">white-space: pre-line</code>样式来显示它们。</p><p id="f06b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2b4a" class="mq lc iq mh b gy mr ms l mt mu">render() {<br/>   message = `Hello \n World.`;<br/>   return (<br/>       &lt;div className='new-line'&gt;{message}&lt;/div&gt;<br/>   );<br/>}</span></pre><p id="af4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的组件中。</p><p id="5d8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以添加下面的 CSS:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7292" class="mq lc iq mh b gy mr ms l mt mu">.new-line {<br/>  white-space: pre-line;<br/>}</span></pre><h1 id="3d40" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在 React 组件中提交表单后清除输入值</h1><p id="488c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在表单提交后在 React 组件中清除输入值。</p><p id="2cfc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e1be" class="mq lc iq mh b gy mr ms l mt mu">onHandleSubmit(e) {<br/>  e.preventDefault();<br/>  const name = this.state.name;<br/>  this.props.searchByName(name);<br/>  this.setState({<br/>    name: ''<br/>  });<br/>}</span></pre><p id="1c6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">preventDefault</code>来停止默认的提交行为。</p><p id="5af5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从我们输入的<code class="fe me mf mg mh b">state</code>中得到<code class="fe me mf mg mh b">name </code>。</p><p id="6d92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用搜索函数。</p><p id="39f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们通过给输入值分配一个空字符串来清除<code class="fe me mf mg mh b">name</code>状态，从而清除输入值。</p><h1 id="78b6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在 React 中编辑多个输入控制组件</h1><p id="1305" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过提供自己的变更处理程序来编辑多个输入控制的组件。</p><p id="9c96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7dbf" class="mq lc iq mh b gy mr ms l mt mu">class Form extends React.Component {<br/>  constructor() {<br/>    this.state = {};<br/>  }</span><span id="73b0" class="mq lc iq mh b gy mv ms l mt mu">  changeFirstName(event) {<br/>    const contact = this.state.contact;<br/>    contact.firstName = event.target.value;<br/>    this.setState({ contact });<br/>  }</span><span id="a719" class="mq lc iq mh b gy mv ms l mt mu">  changeLastName(event) {<br/>    const contact = this.state.contact;<br/>    contact.lastName = event.target.value;<br/>    this.setState({ contact });<br/>  }</span><span id="2d02" class="mq lc iq mh b gy mv ms l mt mu">  changePhone(event) {<br/>    const contact = this.state.contact;<br/>    contact.phone = event.target.value;<br/>    this.setState({ contact });<br/>  }</span><span id="09c7" class="mq lc iq mh b gy mv ms l mt mu">  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;input type="text" onChange={this.changeFirstName.bind(this)} value={this.state.contact.firstName}/&gt;<br/>        &lt;input type="text" onChange={this.changeLastName.bind(this)} value={this.state.contact.lastName}/&gt;<br/>        &lt;input type="text" onChange={this.changePhone.bind(this)} value={this.state.contact.phone}/&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="273d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有 3 个输入，一个用于名，一个用于姓，一个用于电话号码。</p><p id="f8b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，在每个处理程序中，我们用<code class="fe me mf mg mh b">event.target.value</code>获取值，然后将其分配给状态。</p><p id="efc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个处理程序都被传递到每个输入的<code class="fe me mf mg mh b">onChange</code>属性中。</p><p id="1f48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须调用<code class="fe me mf mg mh b">bind(this)</code>来返回一个函数，该函数将组件实例作为<code class="fe me mf mg mh b">this</code>的值。</p><p id="4c44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">value</code>设置为事件处理程序改变的状态。</p><p id="e085" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，将显示输入的值。</p><p id="3e7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更好的方法是用计算出的属性键动态设置名称。</p><p id="7f59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ac61" class="mq lc iq mh b gy mr ms l mt mu">class Form extends React.Component {<br/>  constructor() {<br/>    this.state = {};<br/>  }<br/>  </span><span id="f0de" class="mq lc iq mh b gy mv ms l mt mu">  handleChange(propertyName, event) {<br/>    const contact = this.state.contact;<br/>    contact[propertyName] = event.target.value;<br/>    this.setState({ contact: contact });<br/>  }</span><span id="6816" class="mq lc iq mh b gy mv ms l mt mu">  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;input type="text" onChange={this.handleChange.bind(this, 'firstName')} value={this.state.contact.firstName}/&gt;<br/>        &lt;input type="text" onChange={this.handleChange.bind(this, 'lastName')} value={this.state.contact.lastName}/&gt;<br/>        &lt;input type="text" onChange={this.handleChange.bind(this, 'phone')} value={this.state.contact.phone}/&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="c76e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个用于所有 3 个输入的变更处理程序。</p><p id="593d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以将该字段作为<code class="fe me mf mg mh b">bind</code>的第二个参数传入，将其设置为处理程序的第一个参数。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/1db37ddd8149222b77cf8abafd3b978f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CdgpIqZf4ctKeX9f"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@boney?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">александргоссс</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="5427" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="726a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以为每个输入添加更改处理程序，这样我们就可以将它们的输入值更新为新的状态值。</p><p id="0021" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以对数组进行排序并呈现它们。</p><p id="5e0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，如果我们为它设置一个大小，我们可以使空的 div 可点击。</p></div></div>    
</body>
</html>