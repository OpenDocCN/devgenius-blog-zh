<html>
<head>
<title>Dockerize Django application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Dockerize Django 应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/dockerize-django-application-b74712d0d7f2?source=collection_archive---------14-----------------------#2022-09-19">https://blog.devgenius.io/dockerize-django-application-b74712d0d7f2?source=collection_archive---------14-----------------------#2022-09-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/df16070ec141717b49000a4ce380d40d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AJnmCv_t3fgb4C_sRk1mNg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来源:<a class="ae jz" href="https://bit.ly/3R3JL2E" rel="noopener ugc nofollow" target="_blank">https://bit.ly/3R3JL2E</a></figcaption></figure><p id="b3a2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你是 docker 的新手，想知道如何将你的 django 应用程序进行 docker 化，那么你就进入了正确的页面。这篇博客文章将完全集中在 dockerizing django 应用上。</p><p id="965d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，我将对我以前的博客克隆应用程序进行归档。如果你还没有阅读，那么我会建议你在继续阅读之前先阅读<a class="ae jz" href="https://himanshugarg81.medium.com/django-blog-clone-app-using-rest-framework-688df99e65e3" rel="noopener"/>。如果你有自己的项目，那也没关系。</p><p id="c94f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那么，我们开始吧。</p><h2 id="1faf" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">系统上的 Docker 安装</h2><p id="88ae" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">如果你的系统中已经安装了 docker，那么你可以跳过这一部分。你可以根据你的系统(windows/ubuntu/macOS)使用<a class="ae jz" href="https://docs.docker.com/engine/install/" rel="noopener ugc nofollow" target="_blank">这个</a>链接下载并安装 docker。如果你仍然面临任何关于 docker 安装的问题，请在评论中告诉我。</p><h2 id="08d9" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">让我们开始做一个文档吧</h2><p id="06fc" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">在创建<code class="fe lw lx ly lz b"><strong class="kc io">Dockerfile</strong></code>之前，我们将首先创建一个包含运行项目所需的所有模块的<code class="fe lw lx ly lz b">requirements.txt</code>文件。要创建一个<code class="fe lw lx ly lz b">requirements.txt</code>，只需使用下面的命令</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="2a5d" class="ky kz in lz b gy mi mj l mk ml">pip freeze &gt; requirements.txt</span></pre><p id="f6ac" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将创建一个文件<code class="fe lw lx ly lz b">requirements.txt</code>,并将虚拟 env 的所有预装模块粘贴到其中。</p><p id="2491" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，让我们在项目基础目录中创建一个<code class="fe lw lx ly lz b"><strong class="kc io">Dockerfile</strong></code>，并开始编写它。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="1c51" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们来了解一下这个<code class="fe lw lx ly lz b">dockerfile</code>。这里，首先我们从 docker hub 注册表中拉出一个<code class="fe lw lx ly lz b"><em class="mo">python3.7 image</em></code>。之后，我们安装一些工具，如<code class="fe lw lx ly lz b">curl</code>、<code class="fe lw lx ly lz b">git</code>和<code class="fe lw lx ly lz b">vim</code>。我们将当前项目添加到<code class="fe lw lx ly lz b">src/</code>路径中的 docker 中。现在，我们更新了现有的<code class="fe lw lx ly lz b">pip</code>版本，然后在<code class="fe lw lx ly lz b">requirements.txt</code>文件中安装所有的模块</p><h2 id="47ce" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated"><strong class="ak">运行这个 Dockerfile </strong></h2><p id="130b" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我们首先将使用最近创建的<code class="fe lw lx ly lz b"><strong class="kc io">Dockerfile</strong></code>为 django 代码创建一个本地 docker 映像。使用下面的命令创建一个 docker 镜像，使用你创建的<code class="fe lw lx ly lz b"><strong class="kc io">Dockerfile</strong></code></p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="edfa" class="ky kz in lz b gy mi mj l mk ml">docker build -t blogs-docker:latest .</span></pre><p id="54d3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，<code class="fe lw lx ly lz b"><strong class="kc io">docker build</strong></code>是建立形象的命令<code class="fe lw lx ly lz b"><strong class="kc io">“-t”</strong></code>表示标签的意思是<code class="fe lw lx ly lz b">what name you have given to this image</code>，最后是<code class="fe lw lx ly lz b"><strong class="kc io">“.”</strong></code>。这个<code class="fe lw lx ly lz b"><strong class="kc io">“.”</strong></code>表明我们正在建立一个名为<code class="fe lw lx ly lz b"><strong class="kc io">Dockerfile</strong></code>的文件。</p><p id="08a1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦你击中这个命令，码头工人将开始建立你的形象，你会看到必要的步骤，如哪个步骤目前正在执行。</p><p id="3ff8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">成功完成此步骤后，您可以使用以下命令验证 docker 映像</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="6dae" class="ky kz in lz b gy mi mj l mk ml">docker images</span></pre><p id="12fb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用此命令，您将看到系统中所有预先存在的码头工人图像，以及您新创建的图像<code class="fe lw lx ly lz b"><strong class="kc io">“blogs-docker”</strong></code>🎉 🎉。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="mp mn l"/></div></figure><h2 id="a651" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">让我们创建一个合成文件</h2><p id="201c" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">现在，我们将创建一个<code class="fe lw lx ly lz b">docker-compose</code>文件。此撰写文件用于创建<code class="fe lw lx ly lz b">docker containers</code>以运行上面创建的<code class="fe lw lx ly lz b">image</code>。本<code class="fe lw lx ly lz b">docker-compose</code>文件为<code class="fe lw lx ly lz b"><strong class="kc io">yml</strong></code>文件。让我们创建我们的<code class="fe lw lx ly lz b"><strong class="kc io">docker-compose.yml</strong></code>文件。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="0b58" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们首先在<code class="fe lw lx ly lz b">services</code>部分<code class="fe lw lx ly lz b"><strong class="kc io">blog</strong></code>中定义了我们的码头集装箱的名称。然后我们指定我们上面刚刚构建的<code class="fe lw lx ly lz b">django app</code>的图像。我们还将在<code class="fe lw lx ly lz b">docker-container</code>上运行服务器所需的<code class="fe lw lx ly lz b">port</code>与<code class="fe lw lx ly lz b">host machine</code>进行了映射，最后，我们编写了<code class="fe lw lx ly lz b">command</code>，这意味着给定的一行将在我们的容器启动后运行。</p><h2 id="95b8" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">让我们运行这个合成文件</h2><p id="a75e" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">要运行此撰写文件，只需编写以下命令</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="b2b4" class="ky kz in lz b gy mi mj l mk ml">docker-compose up -d blog</span></pre><p id="8b38" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，<code class="fe lw lx ly lz b"><strong class="kc io">-d</strong></code>表示我们希望在分离模式下运行这个容器。</p><p id="70a0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，如果一切工作正常，那么您的 docker 容器将会启动并运行，您可以使用下面的命令来检查这一点</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="bc78" class="ky kz in lz b gy mi mj l mk ml">docker ps</span></pre><p id="77c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">还可以使用下面的命令查看容器的日志</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="177a" class="ky kz in lz b gy mi mj l mk ml">docker logs {{container ID}}</span></pre><p id="a612" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">只需粘贴你的容器的<code class="fe lw lx ly lz b"><strong class="kc io">container ID</strong></code>，你就可以查看你的服务器的日志。</p><h2 id="b92f" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">结论</h2><p id="fc87" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">在这篇博客中，我们了解了如何 dockerize 一个 django 应用程序，以及如何通过 docker-compose 运行它。我整理了这个博客中使用的所有代码，你可以在这里找到它们。如果你在整理申请时遇到困难，请在这里告诉我😀。</p></div></div>    
</body>
</html>