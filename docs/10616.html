<html>
<head>
<title>Observability-Landscape-as-Code in Practice</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可观察性——实践中的景观代码</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/observability-landscape-as-code-in-practice-732743e201b2?source=collection_archive---------7-----------------------#2022-11-16">https://blog.devgenius.io/observability-landscape-as-code-in-practice-732743e201b2?source=collection_archive---------7-----------------------#2022-11-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a868cb63a5e7e99adc556ac2a6470c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AfqbFvheCe4bUFNlpZUjxw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">激光灯。摄于<a class="ae jz" href="https://legendsofhorror.ca" rel="noopener ugc nofollow" target="_blank">卡萨罗马的恐怖传说</a>。由<a class="ae jz" href="https://adri-v.medium.com" rel="noopener">阿德里·维勒拉</a>拍摄。</figcaption></figure><p id="2750" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky">同</em> </strong> <a class="ae jz" href="https://lightstep.com/blog/authors/ana-margarita-medina" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">阿娜玛格麦地那</em> </strong> </a></p><p id="0ee0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你阅读了阿德里亚娜关于可观察性的文章，你可能会想起六月份的一篇文章，介绍了可观察性-景观作为代码(OLaC)的概念。</p><p id="416e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">可观察性景观由以下部分组成:</p><ul class=""><li id="1255" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">应用仪表</li><li id="5dd3" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">收集和存储应用遥测数据</li><li id="49cc" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">可观察性后端</li><li id="dee4" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">一组有意义的 SLO</li><li id="b698" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">针对待命工程师的警报</li></ul><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ln"><img src="../Images/5dd0f1f2ca78e1c28586a30c6f01dcb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*royFtT-JdO3eva7E"/></div></div></figure><p id="2499" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">记住这一点，OLaC 仅仅是你的可观察性景观的编码，从而确保一致性、可维护性和可再现性。</p><p id="0413" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那当然很好，但是看看这个东西的运行怎么样？好吧，我的朋友，你来对地方了，因为今天，你将看到一个教程，里面有很多实际操作的 OLaC 实践。</p><ol class=""><li id="6e94" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx ls lf lg lh bi translated"><a class="ae jz" href="https://lightstep.com/blog/observability-mythbusters-observability-landscape-as-code#use-the-otel-collector--codify-its-deployment" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">采集&amp;存储应用遥测</strong> <strong class="kc io">采集&amp;存储应用遥测</strong> </a></li><li id="4abb" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx ls lf lg lh bi translated"><strong class="kc io">方式:</strong><a class="ae jz" href="https://docs.lightstep.com/otel/quick-start-collector" rel="noopener ugc nofollow" target="_blank">open telemetry Collector open telemetry Collector</a>通过代码(Helm chart)部署，旁边是构成<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-demo" rel="noopener ugc nofollow" target="_blank">open telemetry Demo App open telemetry Demo App</a>的各种服务。</li><li id="0ccd" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx ls lf lg lh bi translated"><a class="ae jz" href="https://lightstep.com/blog/observability-mythbusters-observability-landscape-as-code#codify-observability-back-end-configuration" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">整理您的可观测性后端配置</strong> <strong class="kc io">整理您的可观测性后端配置</strong> </a></li><li id="c7ba" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx ls lf lg lh bi translated"><strong class="kc io">如何:</strong>使用<a class="ae jz" href="https://registry.terraform.io/providers/lightstep/lightstep/latest/docs" rel="noopener ugc nofollow" target="_blank">light step terra form Provider light step terra form Provider</a>在<a class="ae jz" href="https://app.lightstep.com/" rel="noopener ugc nofollow" target="_blank"> Lightstep </a>中创建仪表板。</li></ol><p id="cdf1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们希望通过一个使用现代云原生工具的真实例子来展示 OLaC 原则…这意味着将<a class="ae jz" href="https://kubernetes.io" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>用于我们的云基础设施和<a class="ae jz" href="https://cloud.google.com/gcp" rel="noopener ugc nofollow" target="_blank"> Google Cloud Google Cloud 的</a> Kubernetes 产品。现在，因为我们是 OLaC 和 SRE 的好实践者，我们不会仅仅通过 UI 的点击来设置东西。不，先生。相反，我们将使用<a class="ae jz" href="https://hashicorp.com/" rel="noopener ugc nofollow" target="_blank">hashi corp</a><a class="ae jz" href="https://terraform.io/" rel="noopener ugc nofollow" target="_blank">terra form</a>来# automatingAllTheThings。Terraform 允许我们进行基础设施即代码(IaC ),并为我们带来大量额外的好处，如更好地控制我们的资源和标准化。这些是《拉丁美洲和加勒比地区行动计划》和《临时行政理事会》的关键原则。</p><p id="3b34" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将把<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-demo" rel="noopener ugc nofollow" target="_blank"> OpenTelemetry 演示应用</a>部署到我们的集群。演示应用程序已使用<a class="ae jz" href="https://opentelemetry.io" rel="noopener ugc nofollow" target="_blank">open telemetry open telemetry</a>进行测试，并将通过<a class="ae jz" href="https://docs.lightstep.com/otel/quick-start-collector" rel="noopener ugc nofollow" target="_blank">open telemetry Collector open telemetry Collector</a>向 Lightstep 发送和。</p><p id="03b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你准备好了吗？？？我们开始吧！</p><h1 id="9fdd" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">辅导的</h1><h2 id="dfe4" class="mr lu in bd lv ms mt dn lz mu mv dp md kl mw mx mh kp my mz ml kt na nb mp nc bi translated">先决条件</h2><p id="141e" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated">开始之前，您需要以下材料:</p><ul class=""><li id="eb39" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">一个<a class="ae jz" href="https://app.lightstep.com/signup/developer?signup_source=docs" rel="noopener ugc nofollow" target="_blank"> Lightstep 账户</a>，这样你就可以看到应用程序跟踪和度量仪表板</li><li id="371a" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">您想要使用的<a class="ae jz" href="https://app.lightstep.com/" rel="noopener ugc nofollow" target="_blank"> Lightstep </a>项目的<a class="ae jz" href="https://docs.lightstep.com/docs/create-and-manage-access-tokens#create-an-access-token" rel="noopener ugc nofollow" target="_blank"> Lightstep 访问令牌</a></li><li id="372e" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">一个<a class="ae jz" href="https://docs.lightstep.com/docs/create-and-manage-api-keys" rel="noopener ugc nofollow" target="_blank"> Lightstep API 键</a>，用于在<a class="ae jz" href="https://app.lightstep.com/" rel="noopener ugc nofollow" target="_blank"> Lightstep </a>中创建仪表板。</li><li id="f0b0" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">运行 Terraform 脚本的 Terraform CLI</li><li id="15bb" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">一个<a class="ae jz" href="https://cloud.google.com/gcp" rel="noopener ugc nofollow" target="_blank">谷歌云</a>账户，这样你就可以创建一个 Kubernetes 集群(<a class="ae jz" href="https://cloud.google.com/kubernetes-engine" rel="noopener ugc nofollow" target="_blank"> GKE </a>)</li><li id="8aab" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><a class="ae jz" href="https://cloud.google.com/sdk/docs/install-sdk" rel="noopener ugc nofollow" target="_blank"> gcloud CLI </a>与谷歌云互动</li><li id="40c2" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">与 Kubernetes 互动</li></ul><h1 id="f01e" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">步伐</h1><p id="63f0" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated"><strong class="kc io"> 1-复制示例回购</strong></p><p id="5e79" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们从复制示例回购开始:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="97e7" class="nn lu in nj b be no np l nq nr">git clone https://github.com/lightstep/unified-observability-k8s-kubecon.git</span></pre><p id="e6ca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 2-初始化子模块</strong></p><p id="6d84" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个项目使用了几个[Git 子模块](<a class="ae jz" href="https://git-scm.com/book/en/v2/Git-Tools-Submodules" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/book/en/v2/Git-Tools-Submodules</a>)，所以为了确保事情顺利进行，你需要把它们拉进来:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="e3f3" class="nn lu in nj b be no np l nq nr">cd unified-observability-k8s-kubecon<br/>git submodule init &amp;&amp; git submodule update</span></pre><p id="4628" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 3-谷歌云登录</strong></p><p id="99a7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们创建 GKE 集群之前，您必须验证您的 Google Cloud 帐户:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="8174" class="nn lu in nj b be no np l nq nr">gcloud auth application-default login --no-launch-browser</span></pre><p id="5eb0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您将看到一个链接，您需要在浏览器中打开该链接来验证您的 Google ID。通过身份验证后，浏览器将显示一个授权令牌，供您粘贴到命令行中，如下所示:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/4d22fa79e51dd72b0e27434c685302fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AK7zbAKEauOkygf-wP9hTg.png"/></div></div></figure><p id="0a2d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 4-创建 terraform.tfvars </strong></p><p id="dcee" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在你已经通过认证了，让我们准备好登陆吧！在这样做之前，我们需要创建一个<code class="fe nt nu nv nj b">terraform.tfvars</code>文件。</p><p id="84f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">幸运的是，我们有一个非常方便的模板供您使用:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="e89e" class="nn lu in nj b be no np l nq nr">cd k8s-cluster-with-otel-demo/terraform<br/>cp terraform.tfvars.template terraform.tfvars</span></pre><p id="b1b1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，在文件中填充以下值:</p><ul class=""><li id="32c2" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated"><code class="fe nt nu nv nj b">&lt;your_gcp_project&gt;</code>:你的谷歌云项目的名称。不知道你的项目名称？没问题！只需运行<code class="fe nt nu nv nj b">gcloud config get-value project</code>来找出它是什么！</li><li id="0d48" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><code class="fe nt nu nv nj b">&lt;your_gke_cluster_name&gt;</code>:您希望为您的 GKE 集群命名。确保它遵循 Kubernetes 集群命名约定(即没有下划线<code class="fe nt nu nv nj b">_</code>或特殊字符)。</li><li id="170f" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><code class="fe nt nu nv nj b">&lt;your_lightstep_access_token&gt;</code>:你的<a class="ae jz" href="https://docs.lightstep.com/docs/create-and-manage-access-tokens#create-an-access-token" rel="noopener ugc nofollow" target="_blank">轻步访问令牌轻步访问令牌</a>。这用于向您的<a class="ae jz" href="https://docs.lightstep.com/docs/create-projects-for-your-environments" rel="noopener ugc nofollow" target="_blank"> Lightstep 项目 Lightstep 项目</a>发送跟踪。</li><li id="470b" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><code class="fe nt nu nv nj b">&lt;your_lightstep_api_key&gt;</code>:你的<a class="ae jz" href="https://docs.lightstep.com/docs/create-and-manage-api-keys" rel="noopener ugc nofollow" target="_blank">轻步 API 键轻步 API 键</a>。这用于创建我们的指标仪表板。</li><li id="ff35" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><code class="fe nt nu nv nj b">&lt;your_lightstep_org_name&gt;</code>:你的 Lightstep 机构名称。不确定你的组织叫什么？没问题！登录 Lightstep，点击屏幕左下方的人物图标。这会弹出一个小菜单。可以在“帐户管理”标题下找到组织名称，如下所示:</li></ul><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/6711eacc4b989b379d31a3d001e5908e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MM3PVK1VlUFRufA7s0bhNg.png"/></div></div></figure><p id="2337" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请注意，我的组织名为“LightStep”。你的将会不同。另请注意，组织名称区分大小写。</p><blockquote class="nx ny nz"><p id="893a" class="ka kb ky kc b kd ke kf kg kh ki kj kk oa km kn ko ob kq kr ks oc ku kv kw kx ig bi translated"><strong class="kc io">注意:</strong> <em class="in"> </em> <code class="fe nt nu nv nj b"><em class="in">terraform.tfvars</em></code> <em class="in">在</em> <code class="fe nt nu nv nj b"><em class="in">.gitignore</em></code> <em class="in">中，不会被纳入版本控制。</em></p></blockquote><p id="06cb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 5 道地形</strong></p><p id="34b8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此步骤将初始化 Terraform(在本地安装提供程序)，然后将应用 Terraform 计划。</p><p id="8b5c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它将:</p><ul class=""><li id="654b" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">创建一个 Kubernetes 集群</li><li id="a2d3" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">使用<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-helm-charts/tree/main/charts/opentelemetry-demo" rel="noopener ugc nofollow" target="_blank"> OpenTelemetry 演示舵图</a>部署<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-demo" rel="noopener ugc nofollow" target="_blank"> OpenTelemetry 演示应用</a></li><li id="f7fc" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">在 Lightstep 中创建仪表板</li></ul><p id="8098" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在运行下面的命令之前，确保你已经在<code class="fe nt nu nv nj b">k8s-cluster-with-otel-demo/terraform</code>文件夹中。</p><p id="11ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请注意，这一步可能需要 30 分钟，这取决于 GKE 的处置。耐心点。😄</p><p id="6c36" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 6-更新您的 kubeconfig </strong></p><p id="915a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在集群已经创建好了，您可以将它添加到您的<code class="fe nt nu nv nj b">kubeconfig</code>文件中了！默认情况下，文件保存在<code class="fe nt nu nv nj b">$HOME/.kube/config</code>。</p><p id="2908" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在你更新你的<code class="fe nt nu nv nj b">kubeconfig</code>之前，你首先需要确保你已经安装了<a class="ae jz" href="https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-access-for-kubectl#install_plugin" rel="noopener ugc nofollow" target="_blank">gke-g cloud-auth-plugin gke-g cloud-auth-plugin</a>:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="8703" class="nn lu in nj b be no np l nq nr">gcloud components install gke-gcloud-auth-plugin<br/>gke-gcloud-auth-plugin --version<br/>echo "export USE_GKE_GCLOUD_AUTH_PLUGIN=True" &gt;&gt; ~/.bashrc</span></pre><p id="ad3d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们可以将集群添加到<code class="fe nt nu nv nj b">kubeconfig</code>:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="6ffd" class="nn lu in nj b be no np l nq nr">gcloud container clusters get-credentials $(terraform output -raw kubernetes_cluster_name) --region $(terraform output -raw region)</span></pre><p id="f338" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将从 Terraform 获得<code class="fe nt nu nv nj b">kubernetes_cluster_name</code>和<code class="fe nt nu nv nj b">region</code>输出值(这是<code class="fe nt nu nv nj b">terraform output -raw</code>的内容)，并将它们放入您的<code class="fe nt nu nv nj b">gcloud container clusters get-credentials</code>命令中。</p><p id="8064" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">或者，如果您关闭了运行 Terraform 的终端并丢失了输出值，您也可以这样做:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="13a4" class="nn lu in nj b be no np l nq nr">gcloud container clusters get-credentials &lt;cluster_name&gt; --region &lt;region&gt;</span></pre><p id="3268" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">其中<code class="fe nt nu nv nj b">&lt;cluster_name&gt;</code>和<code class="fe nt nu nv nj b">&lt;region&gt;</code>对应于您在步骤 3 中在<code class="fe nt nu nv nj b">terraform.tfvars</code>文件中输入的值。</p><p id="6124" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 7-查看 OTel 演示应用</strong></p><p id="b57c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您运行<code class="fe nt nu nv nj b">kubectl get ns</code>，您会注意到现在有了一个名为<code class="fe nt nu nv nj b">otel-demo</code>的新名称空间:</p><p id="5473" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我们部署 OTel 演示应用程序的地方。让我们看看这个名称空间，看看我们创建了什么。首先，我们来看看带有<code class="fe nt nu nv nj b">kubectl get pods -ns otel-demo</code>的吊舱:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi od"><img src="../Images/fe70edf5d2eb86e0448a6b851989c990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zEYADaK-IlxeTtKsc1MbHQ.png"/></div></div></figure><p id="03c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请注意我们是如何部署了一系列不同的服务来组成 OTel 演示应用程序的，包括<code class="fe nt nu nv nj b">adservice</code>、<code class="fe nt nu nv nj b">cartservice</code>、<code class="fe nt nu nv nj b">recommendationservice</code>等。</p><p id="ec61" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们还部署了一个<a class="ae jz" href="https://docs.lightstep.com/otel/quick-start-collector" rel="noopener ugc nofollow" target="_blank"> OTel 收集器 OTel 收集器</a>。其配置 YAML 存储在配置图中。我们可以通过运行<code class="fe nt nu nv nj b">kubectl describe configmap otel-demo-app-otelcol -n otel-demo</code>来查看一下:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oe"><img src="../Images/2d986225e869076fe94a205de37ad157.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VmsSyCAVkFKOOhHnVkM9zw.png"/></div></div></figure><p id="cd4a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以看到我们还引用了一个名为<code class="fe nt nu nv nj b">${LS_TOKEN}</code>的变量，它代表你在<code class="fe nt nu nv nj b">terraform.tfvars</code>中设置的<a class="ae jz" href="https://docs.lightstep.com/docs/create-and-manage-access-tokens#create-an-access-token" rel="noopener ugc nofollow" target="_blank">光步访问令牌光步访问令牌</a>。但是它在哪里呢？这个秘密作为一个名为<code class="fe nt nu nv nj b">otel-collector-secret</code>的秘密安装到 OTel 收集器容器实例中。让我们通过运行<code class="fe nt nu nv nj b">kubectl describe secret otel-collector-secret -n otel-demo</code>来看看这个秘密:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi of"><img src="../Images/73defc93d1393340449e3c638e0667c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UAIfDhvYB9Sfxu5tv4y1gQ.png"/></div></div></figure><p id="1737" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这一切的神奇都发生在<a class="ae jz" href="https://github.com/lightstep/unified-observability-k8s-kubecon/blob/main/gke-otel-demo/terraform/configs/otel-demo-app-values.yaml" rel="noopener ugc nofollow" target="_blank">otel-demo-app-values-ls . YAML otel-demo-app-values-ls . YAML</a>。这是来自<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-helm-charts/blob/main/charts/opentelemetry-demo" rel="noopener ugc nofollow" target="_blank"> OTel 演示应用掌舵图 OTel 演示应用掌舵图</a>的<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-helm-charts/blob/main/charts/opentelemetry-demo/values.yaml" rel="noopener ugc nofollow" target="_blank"> values.yaml values.yaml </a>版本，更新了收集器配置，以便我们可以配置 OTel 收集器向 Lightstep 发送跟踪。</p><p id="8f40" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 8-运行 OTel 演示应用</strong></p><p id="f403" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">好了……库伯内特说的够多了。再来看看<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-demo" rel="noopener ugc nofollow" target="_blank"> OpenTelemetry 演示 App </a>！您可以通过 Kubernetes port-forward 访问演示应用程序:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="2169" class="nn lu in nj b be no np l nq nr">kubectl port-forward -n otel-demo svc/otel-demo-app-frontend 8080:8080</span></pre><p id="aacb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要访问前端，请访问<a class="ae jz" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi og"><img src="../Images/b361a285263e5361bdf792727be967b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z23Mk3RJZGfZKtfA1TSTMg.png"/></div></div></figure><p id="96b1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">继续探索令人惊叹的望远镜和配件的选择，并购买一些。😉🔭</p><p id="8761" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 9-参见 Lightstep </strong>中的轨迹</p><p id="0b64" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在可以去 Lightstep 看看。让我们通过创建一个<a class="ae jz" href="https://docs.lightstep.com/docs/use-notebooks" rel="noopener ugc nofollow" target="_blank">笔记本</a>来做到这一点。</p><p id="080f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，点击左侧导航栏上的小页面图标(下面以蓝色突出显示)。这将显示以下页面:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi og"><img src="../Images/482e3f15b082faefeeb519e1c9a1d89f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C9TId5CGkig6dlaIH0jF-Q.png"/></div></div></figure><p id="198c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们为我们的踪迹建立我们的查询。让我们看看来自<code class="fe nt nu nv nj b">recommendationservice</code>的痕迹。我们将在“所有遥测”旁边的字段中输入<code class="fe nt nu nv nj b">recommendationservice</code>。因为这是一项服务，所以从下拉列表中选择第二个值，即“使用‘推荐服务’作为服务值”，如下所示:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oh"><img src="../Images/806623bee4156446174e15f3b94ac03a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IP-8gYSXxtQYzqO3T8pThA.png"/></div></div></figure><p id="7f22" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">选择该值后，您将看到如下图表:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oi"><img src="../Images/433a16ccc2b9b2acf113b45bc3c81844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qcAs6dlRd3UmHGF67f_XSA.png"/></div></div></figure><p id="2df2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">小绿点代表该服务的跟踪样本。将鼠标悬停在其中一个上，亲自查看！</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oj"><img src="../Images/37a223a397e39b32b758faa69519d347.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sM8xpOopoLwLfwuCn59oPQ.png"/></div></div></figure><p id="9493" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你点击这些点中的一个，你将被带到跟踪视图。在您单击之前，请确保先保存您的笔记本(不要担心，在您离开该页面之前，您会收到提醒)！</p><p id="4c40" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里是我们点击上面的<code class="fe nt nu nv nj b">get_product_list</code>点(操作)时看到的轨迹视图:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ok"><img src="../Images/55d43c1484ff562bc2aa265992188e3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w49AKaVmMgQRDpc2hCQofA.png"/></div></div></figure><p id="87bd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">很酷吧，阿米利特？</p><p id="6370" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 10-参见 Lightstep </strong>中的 Kubernetes 指标</p><p id="bfab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">还记得你跑<code class="fe nt nu nv nj b">terraform apply</code>的时候吗？它不仅创建了一个 Kubernetes 集群，部署了 OTel 演示应用程序(和 OTel Collector)，还为我们创建了一些方便的度量仪表板。</p><p id="184d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以通过转到左侧导航栏上的仪表板图标(带有 4 个小方块的图标)来查看新创建的指标仪表板:</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ol"><img src="../Images/3af20701266df4a56bdb3673b124e8df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EBiLrr6z0nMfdfq7hRdpNw.png"/></div></div></figure><p id="de89" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，让我们看看<strong class="kc io">Kubernetes/Compute Resources/Cluster</strong>仪表盘。该控制面板允许您查看集群的状态。</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi om"><img src="../Images/aa4b1d564fcc6bac34b1b95d044cd8b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TWGcug_fVEUMvkOF6oeH0w.png"/></div></div></figure><p id="227d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们有各种其他指标，称为<strong class="kc io"> Kubernetes 工作负载指标</strong>。这些控制面板的名称以“<strong class="kc io"> Kubernetes /计算资源/工作负载</strong>开头。这些仪表板特定于您正在运行的服务。它们使用<a class="ae jz" href="https://github.com/kubernetes/kube-state-metrics" rel="noopener ugc nofollow" target="_blank">kube-state-metrics kube-state-metrics</a>，考虑了您的各种名称空间中的 Kubernetes 工作负载。仔细看看<a class="ae jz" href="https://github.com/lightstep/unified-observability-k8s-kubecon/blob/main/gke-otel-demo/terraform/modules/lightstep/otel_demo_app_k8s_dashboard.tf" rel="noopener ugc nofollow" target="_blank">otel _ demo _ app _ k8s _ dashboard . TF otel _ demo _ app _ k8s _ dashboard . TF</a>。</p><p id="53c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们使用<a class="ae jz" href="https://github.com/lightstep/prometheus-k8s-opentelemetry-collector" rel="noopener ugc nofollow" target="_blank"> Lightstep 的 Prometheus Kubernetes open telemetry Collector</a>将这些指标导入 Lightstep。这张头盔图的灵感来自于<a class="ae jz" href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack" rel="noopener ugc nofollow" target="_blank">库贝-普罗米修斯-斯塔克库贝-普罗米修斯-斯塔克</a>，但是有一个关键的不同——没有普罗米修斯！我们能够使用最近对<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-operator" rel="noopener ugc nofollow" target="_blank">open telemetry Operator for Kubernetes open telemetry Operator for Kubernetes</a>的增强功能，例如支持服务监视器，以便从 pod、系统组件等获取 Prometheus 指标。</p><blockquote class="nx ny nz"><p id="6e06" class="ka kb ky kc b kd ke kf kg kh ki kj kk oa km kn ko ob kq kr ks oc ku kv kw kx ig bi translated"><strong class="kc io"> <em class="in">注:</em> </strong> <em class="in">您可以通过查看文档了解更多关于</em><a class="ae jz" href="https://github.com/lightstep/prometheus-k8s-opentelemetry-collector" rel="noopener ugc nofollow" target="_blank"><em class="in">Prometheus Kubernetes open telemetry Collector Prometheus Kubernetes open telemetry Collector</em></a><em class="in">的信息。</em></p></blockquote><p id="40c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，<strong class="kc io">Kubernetes/Compute Resources/Workload/OTel-Demo-App-cartservice</strong>仪表盘显示 OTel Demo 应用的 cart service 指标。在其中，我们可以看到我们的容器和 pod 是如何基于 CPU 和内存等指标运行的。</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi on"><img src="../Images/1afa7a7d5ff079f5ac1709d0d7765ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0BXSJRl5sLpFx_HE5IhHDw.png"/></div></div></figure><h1 id="4dc9" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">11-参见 Lightstep 中的应用指标</h1><p id="98ac" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated">啊…但是我们还没有完成指标！如果您返回到仪表板视图并滚动到列表的最末尾，您将看到<strong class="kc io"> OTel 演示应用——应用指标</strong>仪表板。</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ol"><img src="../Images/3af20701266df4a56bdb3673b124e8df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EBiLrr6z0nMfdfq7hRdpNw.png"/></div></div></figure><p id="7519" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们点击它来快速浏览一下！</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oo"><img src="../Images/e5e9897f74f8e043df83b72592817379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ddigPbjlXYY4qWiW36gV1Q.png"/></div></div></figure><p id="cf46" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">OTel 演示应用程序的最新版本发出自动测量和手动测量的指标。在今天的演示中，我们想重点介绍一些来自<code class="fe nt nu nv nj b">recommendationservice</code>的。</p><p id="a826" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们有自动检测的 Python 指标，这些指标是从 Python 运行时捕获的:</p><ul class=""><li id="60a6" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated"><code class="fe nt nu nv nj b">runtime.cpython.cpu_time</code>:跟踪 CPU 处于不同状态所花费的时间。这包括用户(运行应用程序代码的时间)和系统(在操作系统中花费的时间)。该指标以总运行时间(秒)表示。</li><li id="67c3" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><code class="fe nt nu nv nj b">runtime.cpython.memory</code>:内存利用率</li><li id="97e4" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><code class="fe nt nu nv nj b">runtime.cpython.gc_count</code>:垃圾收集器被调用的次数。</li></ul><p id="c95a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们还有一个手动测量的指标:</p><p id="0119" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更多关于<code class="fe nt nu nv nj b">recommendationservice</code>的信息，请查看。有关其他服务捕获的更多信息，请查看<a class="ae jz" href="https://github.com/open-telemetry/opentelemetry-demo/tree/main/docs/services" rel="noopener ugc nofollow" target="_blank"> OTel 演示应用服务文档 OTel 演示应用服务文档</a>。</p><p id="c003" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 12-拆卸</strong></p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="f0e6" class="nn lu in nj b be no np l nq nr">terraform destroy -auto-approve</span></pre><p id="7af6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你不再使用这个环境，不要忘记拆除它的资源，以避免运行一个巨大的云账单。不客气😉</p><p id="4ab1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这一步可能需要 30 分钟，所以请耐心等待！此外，您可能会注意到，在第一次运行时，您会看到以下错误:</p><pre class="lo lp lq lr gt ni nj nk bn nl nm bi"><span id="6d48" class="nn lu in nj b be no np l op nr">Error: uninstall: Release not loaded: otel-operator: release not found</span></pre><blockquote class="nx ny nz"><p id="e547" class="ka kb ky kc b kd ke kf kg kh ki kj kk oa km kn ko ob kq kr ks oc ku kv kw kx ig bi translated"><strong class="kc io">不要慌！</strong> <em class="in">如果再次运行</em> <code class="fe nt nu nv nj b"><em class="in">terraform destroy -auto-approve</em></code> <em class="in">，将完成所有的事情。</em></p></blockquote><h1 id="f18c" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">最后的想法</h1><p id="b926" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated">今天我们看到了可观察性-景观-代码(OLaC)在实践中的一些方面！具体来说，我们研究了以下要素:</p><ul class=""><li id="c130" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">带<a class="ae jz" href="https://opentelemetry.io/" rel="noopener ugc nofollow" target="_blank">打开遥测</a>的应用仪表</li><li id="36c7" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">通过 OTel 收集器收集和存储应用遥测数据</li><li id="7048" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">通过代码配置可观测性后端(即<a class="ae jz" href="https://app.lightstep.com/" rel="noopener ugc nofollow" target="_blank"> Lightstep </a></li></ul><p id="62b5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们通过使用 Terraform 来展示这一点:</p><ul class=""><li id="fe4e" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated"><strong class="kc io">将 OpenTelemetry 演示应用部署到 Kubernetes。</strong>Otel 演示应用展示了使用 OpenTelemetry 的不同语言的不同服务的<a class="ae jz" href="https://opentelemetry.io/docs/concepts/observability-primer/#understanding-distributed-tracing" rel="noopener ugc nofollow" target="_blank">跟踪</a>和<a class="ae jz" href="https://opentelemetry.io/docs/concepts/observability-primer/#reliability--metrics" rel="noopener ugc nofollow" target="_blank">度量</a>工具。</li><li id="60c6" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><strong class="kc io">将 OpenTelemetry 收集器部署到 Kubernetes(演示应用程序部署的一部分)。</strong>收集器用于向 Lightstep 发送应用程序跟踪和指标。</li><li id="ea33" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated"><strong class="kc io">配置 Lightstep 仪表盘。</strong>light step terra form 提供商允许我们对此进行整理。</li></ul><p id="e9a0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">整理我们的可观察性景观意味着我们可以根据需要拆除并重新创建我们的应用程序、收集器和仪表板，因为我们知道我们每次都将保持全面的一致性。此外，这意味着我们可以对它进行版本控制，这样它就不会丢失在以太网的某个地方，或者位于 Bob 桌子下面的秘密服务器中。奖金！</p><p id="9a21" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望这能让你对 OLaC 的力量有一点小小的了解，并激励你也去那里开始 OLaC！(我刚造了一个新动词。不客气)</p><p id="9067" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">咻！这是一个需要思考和理解的问题！给自己一个鼓励，因为我们已经做了很多！现在，请欣赏这张阿德里亚娜的老鼠兔子正在吃杏仁的照片！</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9ca4374eead70b9fa10c97e3098845a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PfJ05UalvKMYoPfxWgmYAQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">兔子老鼠享受杏仁。遗憾的是，这张照片拍摄后不久，我们就失去了邦妮。😭由<a class="ae jz" href="https://adri-v.medium.com" rel="noopener">阿德里·维勒拉</a>拍摄。</figcaption></figure><p id="6b03" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">和平、爱和准则。🦄 🌈 💫</p></div><div class="ab cl oq or hr os" role="separator"><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov"/></div><div class="ig ih ii ij ik"><p id="78ea" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">OpenTelemetry 演示应用程序 OpenTelemetry 演示应用程序一直在寻找反馈和贡献者。请考虑加入<a class="ae jz" href="https://github.com/open-telemetry/community/blob/main/community-membership.md#member" rel="noopener ugc nofollow" target="_blank"> OTel 社区 OTel 社区</a>帮助 OpenTelemetry 变得更棒！</p></div><div class="ab cl oq or hr os" role="separator"><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov"/></div><div class="ig ih ii ij ik"><p id="8c20" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有关于可观察性-风景-代码的问题吗？告诉我们！请随时通过<a class="ae jz" href="http://devrel@lightstep.com" rel="noopener ugc nofollow" target="_blank">电子邮件</a>与我们联系，或者:</p><ul class=""><li id="c982" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">在<a class="ae jz" href="https://twitter.com/adrianamvillela" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae jz" href="https://hachyderm.io/@adrianamvillela" rel="noopener ugc nofollow" target="_blank">乳齿象</a>或<a class="ae jz" href="https://www.linkedin.com/in/adrianavillela" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与阿德里亚娜联系</li><li id="2abe" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">在<a class="ae jz" href="https://twitter.com/Ana_M_Medina" rel="noopener ugc nofollow" target="_blank"> Twitter </a>、<a class="ae jz" href="https://hachyderm.io/web/@anamedina#" rel="noopener ugc nofollow" target="_blank">乳齿象</a>或<a class="ae jz" href="https://www.linkedin.com/in/anammedina" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与 Ana 联系。</li></ul><p id="68f0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望收到你们的来信！</p></div><div class="ab cl oq or hr os" role="separator"><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov ow"/><span class="ot bw bk ou ov"/></div><div class="ig ih ii ij ik"><p id="8bad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">最初发表于</em><a class="ae jz" href="https://lightstep.com/blog/observability-as-code-with-kubernetes-and-lightstep" rel="noopener ugc nofollow" target="_blank"><em class="ky">https://lightstep.com</em></a><em class="ky">。</em></p></div></div>    
</body>
</html>