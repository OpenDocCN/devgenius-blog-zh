<html>
<head>
<title>7 JavaScript Coding Tips You Might Ignore</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你可能忽略的 7 个 JavaScript 编码技巧</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/7-javascript-coding-tips-you-might-ignore-2d44a1f3788a?source=collection_archive---------8-----------------------#2022-07-20">https://blog.devgenius.io/7-javascript-coding-tips-you-might-ignore-2d44a1f3788a?source=collection_archive---------8-----------------------#2022-07-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a9ff" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">它们很简单，但是很容易忘记</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8be80d37529bf9d601bf5a22016a460f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0i_IX-i0Ygbe1GIk"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="eeba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有很多文章告诉你 JavaScript 的编码技巧，这篇文章也不例外。但是这篇文章可能是你忽略或者忘记的东西。我们一起快速看一下，真的很简单。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="94de" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">1.同时履行承诺</h1><p id="7dc7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><code class="fe mw mx my mz b">async...await</code>大大提高了 JavaScript 的异步处理能力。我们可以像编写同步代码一样编写异步代码，而不用关心内部实现。但是如果两个或多个异步任务彼此不相关，那么我们可以使用<code class="fe mw mx my mz b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" rel="noopener ugc nofollow" target="_blank">Promise.all</a></code>或<code class="fe mw mx my mz b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled" rel="noopener ugc nofollow" target="_blank">Promise.allSettled</a></code>来并发执行它们，并在返回中获得它们各自的值。</p><h1 id="259e" class="lz ma iq bd mb mc na me mf mg nb mi mj jw nc jx ml jz nd ka mn kc ne kd mp mq bi translated">2.<code class="fe mw mx my mz b">Object.keys</code>对<code class="fe mw mx my mz b">Object.values</code>对<code class="fe mw mx my mz b">Object.entries</code></h1><p id="326c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">一些开发者一直在使用<code class="fe mw mx my mz b">Object.keys</code>来获取对象自身的可枚举属性，然后使用 key 来访问相应的值。这种情况其实可以换成<code class="fe mw mx my mz b">Object.entries</code>。所以合理使用这三种方法，让我们的编码更好。</p><pre class="kg kh ki kj gt nf mz ng nh aw ni bi"><span id="3933" class="nj ma iq mz b gy nk nl l nm nn">const obj = {<br/>  a: 'some',<br/>  b: 42,<br/>};</span><span id="6bb1" class="nj ma iq mz b gy no nl l nm nn">// [ 'a', 'b' ]<br/>console.log(Object.keys(obj));</span><span id="f8bb" class="nj ma iq mz b gy no nl l nm nn">// [ 'some', 42 ]<br/>console.log(Object.values(obj));</span><span id="cd44" class="nj ma iq mz b gy no nl l nm nn">// [ [ 'a', 'some' ], [ 'b', 42 ] ]<br/>console.log(Object.entries(obj));</span></pre><h1 id="4da2" class="lz ma iq bd mb mc na me mf mg nb mi mj jw nc jx ml jz nd ka mn kc ne kd mp mq bi translated">3.使用<code class="fe mw mx my mz b">Array.prototype.at()</code>或<code class="fe mw mx my mz b">String.prototype.at()</code></h1><p id="dacb" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">ECMAScript 2022 中新的<code class="fe mw mx my mz b">at()</code>方法解决了一个非常实际的问题，即所有基本的可索引类(Array、String、TypedArray)都可以“负索引”，就像 Python 中一样。这是一种更通用的方法，允许相对索引。</p><pre class="kg kh ki kj gt nf mz ng nh aw ni bi"><span id="32a9" class="nj ma iq mz b gy nk nl l nm nn">const arr = ['1', '2', '3'];</span><span id="9d32" class="nj ma iq mz b gy no nl l nm nn">// '3'<br/>console.log(arr[arr.length - 1]);</span><span id="1966" class="nj ma iq mz b gy no nl l nm nn">// '3'<br/>console.log(arr.at(-1));</span></pre><p id="e58c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更多 ECMAScript 2022 新特性:</p><div class="np nq gp gr nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/ecmascript-2022-is-officially-released-what-should-we-pay-attention-to-5e207ed61a46"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd ir gy z fp nx fr fs ny fu fw ip bi translated">ECMAScript 2022 正式发布，需要注意什么？</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">有没有带来什么有趣的东西？</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">blog.devgenius.io</p></div></div><div class="ob l"><div class="oc l od oe of ob og kp ns"/></div></div></a></div><h1 id="6ffd" class="lz ma iq bd mb mc na me mf mg nb mi mj jw nc jx ml jz nd ka mn kc ne kd mp mq bi translated">4.<code class="fe mw mx my mz b">||</code>或<code class="fe mw mx my mz b">??</code></h1><p id="e654" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这两者是有区别的。<code class="fe mw mx my mz b">||</code>是判断左侧值是否为<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noopener ugc nofollow" target="_blank">falsy</a>,<code class="fe mw mx my mz b">??</code>是判断左侧值是否为<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Glossary/Nullish" rel="noopener ugc nofollow" target="_blank"> nullish </a>。所以<code class="fe mw mx my mz b">??</code>可以看作是<code class="fe mw mx my mz b">||</code>的一个特例。</p><p id="7f22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您在判断中使用高频<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noopener ugc nofollow" target="_blank"> falsy </a>值，如<code class="fe mw mx my mz b">''</code>或<code class="fe mw mx my mz b">0</code>，一定要注意这一点，以避免意想不到的结果。</p><p id="ae07" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">??</code>具有第五低的<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" rel="noopener ugc nofollow" target="_blank">运算符优先级</a>，直接低于<code class="fe mw mx my mz b">||</code>并直接高于<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" rel="noopener ugc nofollow" target="_blank">条件(三元)运算符(条件？exprIfTrue : exprIfFalse) </a>。</p><p id="b04c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_nullish_assignment" rel="noopener ugc nofollow" target="_blank">??=</a></code>或<code class="fe mw mx my mz b"><a class="ae kv" href="https://developer.mozilla%20.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR_assignment" rel="noopener ugc nofollow" target="_blank">||=</a></code>类似，只是有一个赋值操作。</p><h1 id="bc77" class="lz ma iq bd mb mc na me mf mg nb mi mj jw nc jx ml jz nd ka mn kc ne kd mp mq bi translated">5.使用命名参数</h1><p id="6786" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在定义一个函数时，如果你传递了太多的参数，比如超过 4 个项，为了更好的维护，最好对参数进行分类。</p><pre class="kg kh ki kj gt nf mz ng nh aw ni bi"><span id="354f" class="nj ma iq mz b gy nk nl l nm nn">// NO<br/>function example(arg0, arg1, arg2, arg3, arg4) {}</span><span id="cca0" class="nj ma iq mz b gy no nl l nm nn">// YES<br/>function example(arg0, arg1, arg2, relatedParam = { arg3: 3, arg4: 4 }) {}</span></pre><h1 id="7091" class="lz ma iq bd mb mc na me mf mg nb mi mj jw nc jx ml jz nd ka mn kc ne kd mp mq bi translated">6.使用<code class="fe mw mx my mz b">padStart</code>和<code class="fe mw mx my mz b">padEnd</code></h1><p id="f32e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这两个方法可以将字符串填充到原始字符串，并使其达到指定的长度。<code class="fe mw mx my mz b">padStart</code>从开始垫起，<code class="fe mw mx my mz b">padEnd</code>从结束垫起。</p><p id="5fbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，当我们想用<code class="fe mw mx my mz b">0</code>填充日期时:</p><pre class="kg kh ki kj gt nf mz ng nh aw ni bi"><span id="f687" class="nj ma iq mz b gy nk nl l nm nn">const fakeTimestamp = 1657040882000;</span><span id="5e0f" class="nj ma iq mz b gy no nl l nm nn">// 2022-07-05T17:08:02.000Z<br/>const date = new Date(fakeTimestamp);</span><span id="e204" class="nj ma iq mz b gy no nl l nm nn"><strong class="mz ir">// NO<br/>function padZero(e) {<br/>  if (String(e).length === 1) {<br/>    return `0${e}`;<br/>  }<br/>  return e;<br/>}</strong></span><span id="17cb" class="nj ma iq mz b gy no nl l nm nn"><strong class="mz ir">// YES<br/>function padZero(e) {<br/>  return String(e).padStart(2, '0');<br/>}</strong></span><span id="35ff" class="nj ma iq mz b gy no nl l nm nn">const month = date.getMonth() + 1;<br/>const day = date.getDay();<br/>const hours = date.getHours();<br/>const minutes = date.getMinutes();</span><span id="d7f6" class="nj ma iq mz b gy no nl l nm nn">console.log(<br/>  `${padZero(month)}/${padZero(day)} ${padZero(date.getHours(hours))}:${padZero(minutes)}`,<br/>);</span></pre><h1 id="1f2b" class="lz ma iq bd mb mc na me mf mg nb mi mj jw nc jx ml jz nd ka mn kc ne kd mp mq bi translated">7.<code class="fe mw mx my mz b">toString</code>的一些提示</h1><p id="d434" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">比较两个数组前后是否相同时，常规的做法是遍历每一项，然后依次比较。例如:</p><pre class="kg kh ki kj gt nf mz ng nh aw ni bi"><span id="4d34" class="nj ma iq mz b gy nk nl l nm nn">const isEqual = (prev, cur) =&gt; prev.every((e, i) =&gt; e === cur[i]);</span><span id="ff7c" class="nj ma iq mz b gy no nl l nm nn">// false<br/>console.log(isEqual([1, 2, 3], [1, 2, 5]));<br/>// true<br/>console.log(isEqual([1, 2, 3], [1, 2, 3]));</span></pre><p id="56dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们也可以用<code class="fe mw mx my mz b">Array.prototype.toString</code>把数组转换成字符串然后直接比较，这样在数组内部级别不变的情况下，也能高效的得到预期的结果。</p><pre class="kg kh ki kj gt nf mz ng nh aw ni bi"><span id="8b8d" class="nj ma iq mz b gy nk nl l nm nn">const isEqual = (prev, cur) =&gt; prev.toString() === cur.toString();</span><span id="3dea" class="nj ma iq mz b gy no nl l nm nn">// false<br/>console.log(isEqual([1, 2, 3], [1, 2, 5]));<br/>// true<br/>console.log(isEqual([1, 2, 3], [1, 2, 3]));</span></pre><p id="5a0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，我们还可以使用<code class="fe mw mx my mz b">Number.prototype.toString([radix])</code>中的可选参数<code class="fe mw mx my mz b">radix</code>将数字转换为指定的基数。<code class="fe mw mx my mz b">radix</code>的取值范围是 2 到 36。</p><p id="f3f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们可以快速地将十进制转换成二进制或十六进制:</p><pre class="kg kh ki kj gt nf mz ng nh aw ni bi"><span id="8022" class="nj ma iq mz b gy nk nl l nm nn">// 1010<br/>console.log(Number(10).toString(2));<br/>// a<br/>console.log(Number(10).toString(16));</span></pre><p id="59ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们也可以结合<code class="fe mw mx my mz b">Math.random</code>来生成十六进制的随机值:</p><pre class="kg kh ki kj gt nf mz ng nh aw ni bi"><span id="f6a4" class="nj ma iq mz b gy nk nl l nm nn">// 0.2b9f3601ffc91<br/>console.log(Math.random().toString(16));</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="c3a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oh">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="oh">中等会员</em> </a> <em class="oh">。每月 5 美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="oh">我的链接</em> </a> <em class="oh">报名，我会得到一点佣金。</em></p><p id="8214" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的支持对我来说非常重要——谢谢。</p></div></div>    
</body>
</html>