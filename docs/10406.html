<html>
<head>
<title>How to Git Better — 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何变得更好— 3</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-git-better-3-3ae705d1355e?source=collection_archive---------6-----------------------#2022-10-31">https://blog.devgenius.io/how-to-git-better-3-3ae705d1355e?source=collection_archive---------6-----------------------#2022-10-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="35f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">…所以在接下来的项目中，你可以成为一个更体面的人:-)</p><p id="3c51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请确保您已经阅读了我以前的文章:</p><div class="kl km gp gr kn ko"><a href="https://yamaceay.medium.com/how-to-git-better-1-ef996cb86a23" rel="noopener follow" target="_blank"><div class="kp ab fo"><div class="kq ab kr cl cj ks"><h2 class="bd ir gy z fp kt fr fs ku fu fw ip bi translated">如何变得更好— 1</h2><div class="kv l"><h3 class="bd b gy z fp kt fr fs ku fu fw dk translated">…这样你就能在接下来的项目中成为一个更体面的人:-)</h3></div><div class="kw l"><p class="bd b dl z fp kt fr fs ku fu fw dk translated">yamaceay.medium.com</p></div></div><div class="kx l"><div class="ky l kz la lb kx lc ld ko"/></div></div></a></div><div class="kl km gp gr kn ko"><a href="https://yamaceay.medium.com/how-to-git-better-2-16182a6c0d2e" rel="noopener follow" target="_blank"><div class="kp ab fo"><div class="kq ab kr cl cj ks"><h2 class="bd ir gy z fp kt fr fs ku fu fw ip bi translated">如何变得更好— 2</h2><div class="kv l"><h3 class="bd b gy z fp kt fr fs ku fu fw dk translated">…所以在接下来的项目中，你可以成为一个更体面的人:-)</h3></div><div class="kw l"><p class="bd b dl z fp kt fr fs ku fu fw dk translated">yamaceay.medium.com</p></div></div><div class="kx l"><div class="le l kz la lb kx lc ld ko"/></div></div></a></div><h2 id="5917" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">重设基础≠将更改应用到分支</h2><p id="ea09" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">我讨厌承认，但我低估了 rebase 一点点。</p><p id="6a85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们之前已经讨论过分支类似于过程/工作流，所以理解分支是理解其他人在做什么的关键。</p><p id="7270" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最佳实践是保持一个分支简短、可解释、切中要点，就像任何工作流描述一样。</p><p id="b1a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是你不能真的为每个分支创建一个巨大的提交，那会产生反效果。</p><p id="d257" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">相反，您可以在完成分支上的更新后重写历史。</p><p id="3cf7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是为什么在打开一个拉请求之前，您需要在您的分支上执行交互式 rebase。</p><h2 id="2f31" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">使用 Visual Studio 代码的交互式基础变更</h2><p id="e547" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">当您想要以一种时尚的方式编辑提交历史时，交互式的重新基础就很方便了。</p><p id="239d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，您需要在计算机上设置 VSCode。</p><p id="2ed8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我创建了一个<a class="ae md" href="https://github.com/yamaceay/git-example" rel="noopener ugc nofollow" target="_blank">样本项目</a>用于实验。我故意把代码写得乱七八糟，这样我们可以清理提交历史。让我们看一个例子:</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi me"><img src="../Images/c28edb69608c9b248cea5b74c296e019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YK59OoJfkI2JFD7c04bnLw.png"/></div></div></figure><p id="77ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从交互式重新设定基础开始:</p><ol class=""><li id="82c0" class="mp mq iq jp b jq jr ju jv jy mr kc ms kg mt kk mu mv mw mx bi translated">克隆存储库:</li><li id="0a57" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">确保您已经在终端上安装了代码路径(视图-&gt;命令面板-&gt; Shell 命令:在 P 中安装' Code '命令…)</li><li id="d930" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">确保您位于目标分支“丰富-文章”中。如果没有，使用<code class="fe nd ne nf ng b">git checkout enrich-posts</code></li><li id="883e" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">输入<code class="fe nd ne nf ng b">git rebase -i HEAD~6</code>`其中 6 是您想要影响的提交数量，<code class="fe nd ne nf ng b">-i</code>代表交互。</li><li id="b774" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk mu mv mw mx bi translated">正确配置选项后(参见下一节)，单击 Start Rebase。</li></ol><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nh"><img src="../Images/33e081465fe7293148b42c505a4c440c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S_GryArr1PMnHGQV8bVMyg.png"/></div></div></figure><h2 id="b4a8" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">提交编辑消息</h2><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi ni"><img src="../Images/813cfb68911bc5ff83f607e51426161f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2I6TsV57G5NzunihghLNwQ.png"/></div></div></figure><p id="33cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意:如果您在交互式 rebase 中选择了一个选项，那么至少一个提交消息会受到影响，COMMIT_EDITMSG 文件会在您的侧边选项卡中弹出。在编写了新的提交消息之后，您只需关闭选项卡来应用提交消息。</p><h2 id="11b8" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">执行标志</h2><p id="f00a" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated"><code class="fe nd ne nf ng b">--continue</code>:应用当前问题的新变化，再次执行 rebase。</p><p id="a32d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe nd ne nf ng b">--skip</code>:忽略当前问题，再次执行 rebase。</p><p id="71b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe nd ne nf ng b">--abort</code>:中止重设基础，返回重设基础前的原始状态。</p><p id="a73d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe nd ne nf ng b">--quit</code>:在重置过程中，在当前情况下退出重置。</p><h2 id="df4c" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">提交顺序</h2><p id="27ad" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">您知道可以通过上下拖动提交来改变提交的顺序吗？</p><p id="e3bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">听起来可能很酷，但在某些用例中它确实很方便。</p><p id="f17b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，如果您想要挤压两个相距很远的类似提交，您可以简单地将提交拖到另一个上，然后挤压它们。</p><p id="8a87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我看来，改变提交的顺序而不是改变提交消息是一个坏习惯，但是这取决于你。</p><h2 id="89b2" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">操作类型</h2><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nj"><img src="../Images/e476d0513cc721cf35231a6ba96093c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c9cxJAXlohvzRXugDGgFoQ.png"/></div></div></figure><p id="befe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nk">选择</em>:将提交包含在历史中，默认选项无效。</p><p id="c2c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nk"> drop </em>:从历史中排除提交，与从提交历史中删除相应的提交消息相同。</p><p id="0a29" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nk">改写</em>:重写提交消息，不改变内容。</p><p id="38a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nk">编辑</em>:暂停 rebase，编辑代码，准备变更，提交描述性消息，然后继续 rebase。</p><p id="7083" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nk">挤压</em>:将所选的和之前的提交挤压到一个新的提交中，并在新的提交消息中使用这两个消息(如果是最后一个提交，则不允许)。</p><p id="fa37" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nk"> fixup </em>:将选中的前一次提交压缩到新的提交中，但新的提交消息中只包含前一次提交的消息(如果是最后一次提交则不允许)。</p><h2 id="73e7" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">与 Rebase 一起使用的其他命令</h2><p id="cc65" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated"><code class="fe nd ne nf ng b">git commit --amend</code>:相当于提交新的变更作为一个提交，然后对最后两个提交执行交互式 rebase，其中最上面的提交标记为<code class="fe nd ne nf ng b">fixup</code>。</p><p id="9fae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe nd ne nf ng b">git push --force-with-lease</code>:用于将远程分支的提交历史强制替换为本地分支的提交历史。</p><p id="eb44" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我不推荐使用<code class="fe nd ne nf ng b">git push --force</code>，因为它会让你删除其他人最近提交的内容，而<code class="fe nd ne nf ng b">git push --force-with-lease</code>不允许你这么做。</p><p id="2ba9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是为什么<code class="fe nd ne nf ng b">git push --force-with-lease</code>几乎总是更好的选择。</p><p id="5199" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们执行一个示例性的重置基础操作！</p><h2 id="ab73" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">成功重定基数的一个例子</h2><p id="d75a" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">首先，我想看看变化是什么样的。让我们看看第二次提交(绿色)与第三次提交(红色)有什么不同，第三次提交不仅仅是添加了封送函数。</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nl"><img src="../Images/8b9ffad53a5f009a5b97f887665fe6af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6qbWkO_juxXOVaSvnCRZtA.png"/></div></div></figure><p id="cd65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，这是我想做的:</p><ul class=""><li id="c4c4" class="mp mq iq jp b jq jr ju jv jy mr kc ms kg mt kk nm mv mw mx bi translated"><em class="nk">修正</em>第一次提交到第二次提交，因为它们做的正好相反。</li><li id="62e1" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk nm mv mw mx bi translated">将第二次提交分成两次提交:第二次提交包括实现自定义封送函数，最上面的第一次提交应该包括所有其他内容。我们可以通过暂停提交、重置所有更改和分两部分提交所有更改来做到这一点。</li><li id="d281" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk nm mv mw mx bi translated"><em class="nk">挤压</em> / <em class="nk">修正</em>第三次提交到第四次提交上，因为在清理历史的时候写重构提交不一定是个好主意。</li><li id="74e3" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk nm mv mw mx bi translated">选择第四个提交，因为这是一个必要且有用的提交。</li><li id="d3e1" class="mp mq iq jp b jq my ju mz jy na kc nb kg nc kk nm mv mw mx bi translated">将第五个提交压缩到第六个提交，因为我们不想知道发生了哪些冲突。</li></ul><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi nn"><img src="../Images/deb349dcc515ecce0b9315380f524e25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*04klhPmtxIwv65YfmEnd7w.png"/></div></div></figure><p id="64f7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后看起来更好理解。谢谢饭桶！</p><figure class="mf mg mh mi gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi no"><img src="../Images/3f597da3445847af918eb1e4516a3c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IHnBswMsyuz3i8du0NGHyw.png"/></div></div></figure><p id="d236" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望你喜欢我的文章！</p><p id="887d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我写这些文章的主要原因是记录我在工作中学到的关于 Git 的东西，以及我自己的经历。我在 24 小时之内写完了这 3 篇文章，以免忘记它们。所以如果你看到有什么不对的地方，提前谢谢你让我知道！</p><h2 id="b62b" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">来源</h2><p id="6345" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated"><a class="ae md" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwinovWxnYv7AhXGW_EDHZNaBf4QFnoECA0QAQ&amp;url=https%3A%2F%2Fgit-scm.com%2Fdocs%2Fgit-rebase&amp;usg=AOvVaw0pILjN3yKHcTKX5tTP-ctx" rel="noopener ugc nofollow" target="_blank">文档— Git-Rebase </a>用于双重检查执行标志的使用。</p><p id="5bf5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae md" href="https://github.com/yamaceay/git-example" rel="noopener ugc nofollow" target="_blank">源代码</a> —一个可以用来做实验的 Git 项目示例。</p><p id="4db9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有的影像都是我捕捉的。</p></div></div>    
</body>
</html>