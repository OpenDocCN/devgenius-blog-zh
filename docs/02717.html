<html>
<head>
<title>Monitor Temperatures With Telegraf On macOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 macOS 上使用 Telegraf 监控温度</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/monitor-temperatures-with-telegraf-on-macos-4a0eae03549d?source=collection_archive---------1-----------------------#2020-08-23">https://blog.devgenius.io/monitor-temperatures-with-telegraf-on-macos-4a0eae03549d?source=collection_archive---------1-----------------------#2020-08-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="9a56" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">温度| macOS | Telegraf | InfluxDB |监控</h2><div class=""/><div class=""><h2 id="bd9e" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">在 macOS 上使用 Telegraf 可以监控的内容:适用于书呆子、开发人员和 devops 初学者…</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0e6ae2d00c5716ba696388882370b595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tr-FOyYJzfWLgczc2YSCxg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Mac Book Pro 的 CPU 和 GPU 温度以及风扇使用情况</figcaption></figure><h1 id="575b" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">这本小指南将涵盖</h1><ul class=""><li id="2dfd" class="lw lx iq ly b lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">安装 Telegraf</li><li id="b5b7" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">配置 Telegraf(假设 InfluxDB 为输出)</li><li id="29e2" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">配置高级插件<code class="fe mt mu mv mw b">procstat</code>和自定义脚本</li><li id="6147" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">监控 macOS 温度和风扇</li><li id="25dc" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">监控 macOS 电池状态</li></ul><h1 id="93a8" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">安装 Telegraf</h1><p id="7c16" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">基本上有两种安装 Telegraf 的方法:</p><ul class=""><li id="0602" class="lw lx iq ly b lz nk mb nl md nm mf nn mh no mj mk ml mm mn bi translated">从 Telegraf 下载或发布页面下载<code class="fe mt mu mv mw b">tar.gz</code>:<a class="ae np" href="https://portal.influxdata.com/downloads/" rel="noopener ugc nofollow" target="_blank">https://portal.influxdata.com/downloads/</a><br/><a class="ae np" href="https://github.com/influxdata/telegraf/releases" rel="noopener ugc nofollow" target="_blank">https://github.com/influxdata/telegraf/releases</a></li><li id="770d" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated"><strong class="ly ja">(首选)</strong>通过<a class="ae np" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">自制</a> : <code class="fe mt mu mv mw b">brew install telegraf</code>安装</li></ul><p id="3233" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">无论哪种方式，您都应该得到一个包含示例<code class="fe mt mu mv mw b">telegraf.conf</code>文件的现成安装。</p><h1 id="2318" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">配置电话嫁接</h1><h2 id="0f60" class="nt lf iq bd lg nu nv dn lk nw nx dp lo md ny nz lq mf oa ob ls mh oc od lu iw bi translated">基本设置</h2><p id="144a" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">您可以添加自己的<code class="fe mt mu mv mw b">[global_tags]</code>,然后添加到发送到 InfluxDB 的所有指标中。</p><p id="4de0" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">除此之外，您只需在<code class="fe mt mu mv mw b">[agent]</code>类别中更改几项设置:</p><pre class="kp kq kr ks gt oe mw of og aw oh bi"><span id="9174" class="nt lf iq mw b gy oi oj l ok ol">[agent]<br/>  interval = "30s" # may want to lower it from default 10s...<br/>  metric_buffer_limit = 10000 # if your InfluxDB can be aways for a few minutes, increase the local metrics buffer<br/>  collection_jitter = "2s" # spread plugin execution randomly within 0-2 seconds<br/>  debug = true # useful for the first run to check what gets sent<br/>  logfile = "/usr/local/var/log/telegraf.log" # check here for errors<br/>  hostname = host # value of the `host` tag</span></pre><p id="4978" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">啊！不要忘记配置您的输出，在我们的例子中是一个本地运行的 docker InfluxDB 容器:</p><pre class="kp kq kr ks gt oe mw of og aw oh bi"><span id="d643" class="nt lf iq mw b gy oi oj l ok ol">[[outputs.influxdb]]<br/>  urls = ["http://localhost:8086"]</span></pre><p id="2eef" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">我的前一篇文章介绍了如何在几分钟内设置和运行 InfluxDB 和 Grafana:</p><div class="om on gp gr oo op"><a href="https://medium.com/dev-genius/monitoring-your-machine-s-with-tig-a9ef39cd0eec" rel="noopener follow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ja gy z fp ou fr fs ov fu fw iz bi translated">使用 TIG 监控您的机器</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">TIG = Telegraf，InfluxDB，Grafana。受众:开发人员、书呆子、devops 初学者…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">medium.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ky op"/></div></div></a></div><h2 id="a5f1" class="nt lf iq bd lg nu nv dn lk nw nx dp lo md ny nz lq mf oa ob ls mh oc od lu iw bi translated">标准输入插件</h2><p id="00dc" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">首先，打开你想要的标准插件:</p><ul class=""><li id="5e54" class="lw lx iq ly b lz nk mb nl md nm mf nn mh no mj mk ml mm mn bi translated"><code class="fe mt mu mv mw b">cpu, mem, disk, diskio, processes, swap, system, net, netstat</code></li></ul><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pe"><img src="../Images/32be4471dadd8f715fba141d6394721f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jPWSgIlFjeglyTNPuHKRvw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">来自标准输入插件的图形。</figcaption></figure><h2 id="c89b" class="nt lf iq bd lg nu nv dn lk nw nx dp lo md ny nz lq mf oa ob ls mh oc od lu iw bi translated">高级输入插件</h2><p id="b7ed" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">还包括一些需要配置的插件，比如<code class="fe mt mu mv mw b">procstat</code>。</p><p id="77ee" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">我这里有一个<em class="pf">不寻常的</em>例子，它展示了你<strong class="ly ja">可以</strong>做什么，但是也会导致很大的负载。监控<strong class="ly ja">所有</strong>进程！</p><blockquote class="pg"><p id="1f01" class="ph pi iq bd pj pk pl pm pn po pp mj dk translated">你不应该这样做！</p></blockquote><pre class="pq pr ps pt pu oe mw of og aw oh bi"><span id="6a3a" class="nt lf iq mw b gy oi oj l ok ol">[[input.procstat]]<br/>  interval = "120s" # only every 2 minutes!<br/>  exe = "." # EVERY program<br/>  pid_finder = "native"</span></pre><p id="c416" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">这个指标将有一个很高的基数(下面会有更多)，因为它将把曾经在我的机器上运行过的每一个程序名作为一个标记值写入<code class="fe mt mu mv mw b">procstat</code>数据库……但是我想尝试一下，并检查哪些程序使用了我的 MAC 的大部分功能。原来 Telegraf 是一个重要的贡献者(由于这个插件！)</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pv"><img src="../Images/6a35d107e3010301e2ae73b322d30c3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DC5ux0TMNgVs73urAxRTGg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Procstats —每隔几分钟收集一次！</figcaption></figure><h2 id="b82c" class="nt lf iq bd lg nu nv dn lk nw nx dp lo md ny nz lq mf oa ob ls mh oc od lu iw bi translated">自定义脚本或二进制执行</h2><p id="ee8d" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">这就是有趣的地方，因为你几乎可以做任何你想做的事情。根据我的经验，你需要考虑几件事:</p><ul class=""><li id="cd76" class="lw lx iq ly b lz nk mb nl md nm mf nn mh no mj mk ml mm mn bi translated">该命令必须<strong class="ly ja">只返回指标</strong>。对于<code class="fe mt mu mv mw b">influxdb</code>协议，每行一个。</li><li id="b08e" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">该命令应<strong class="ly ja">快速退出或失败</strong>。确保在任何网络调用中配置合理的超时！例如:五秒钟对于一个 API 或 HTTP 调用的返回来说已经足够了(通常情况下)。</li><li id="1557" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">因此，在收集指标时，不要试图做复杂的事情。<strong class="ly ja">保持简单</strong>或“离线”收集指标，并在 Telegraf 执行命令时返回。</li><li id="bcc6" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated"><strong class="ly ja">不要混合度量</strong>，创建通用度量(例如每秒请求数)或使用专用度量。</li><li id="2537" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated">保持低基数。基数基本上就是标签不同组合的数量。这个数字越大，你的测量变得越大越慢，查询也越多。比较一下这两种情况:<br/> a) <code class="fe mt mu mv mw b">host</code>标签:10 个值* <code class="fe mt mu mv mw b">cpu-core</code>标签:~16 个值= <strong class="ly ja"> 160 个</strong>组合<br/> b) <code class="fe mt mu mv mw b">host</code>标签:10 个值* <code class="fe mt mu mv mw b">pid</code>标签:~2000 = <strong class="ly ja"> 20000 </strong>组合(如果不是更多)<br/> → <strong class="ly ja">标签不使用唯一值。</strong> <code class="fe mt mu mv mw b">Pid</code>(进程 ID)是个坏主意，UUIDs 和生成的 docker 容器名也是——基本上是可以有很多不同值的任何东西。只对标签使用“类别”。</li><li id="c99d" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated"><strong class="ly ja">规格化标签值</strong>。小写或大写或任何其他已定义的大小写，不要混合大小写</li></ul><p id="39d9" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">我将在另一篇文章中介绍更多关于 InfluxDB 维护和有用查询的内容...</p><h2 id="37f1" class="nt lf iq bd lg nu nv dn lk nw nx dp lo md ny nz lq mf oa ob ls mh oc od lu iw bi translated">示例配置</h2><pre class="kp kq kr ks gt oe mw of og aw oh bi"><span id="59fc" class="nt lf iq mw b gy oi oj l ok ol">[[inputs.exec]]<br/>  commands = ["/my/script/metrics"]<br/>  timeout = "5s"<br/>  data_format = "influx"</span></pre><h2 id="a14d" class="nt lf iq bd lg nu nv dn lk nw nx dp lo md ny nz lq mf oa ob ls mh oc od lu iw bi translated">示例指标输出:</h2><pre class="kp kq kr ks gt oe mw of og aw oh bi"><span id="ca87" class="nt lf iq mw b gy oi oj l ok ol">my_measurement,host=foo,mytag=measure onevalue=5,val2=3234.34 1609459200000000000</span></pre><ul class=""><li id="eb42" class="lw lx iq ly b lz nk mb nl md nm mf nn mh no mj mk ml mm mn bi translated"><code class="fe mt mu mv mw b">my_measurement</code>是一个“表格”(InfluxDB 称之为“测量”)，在这个表格中可以写入指标</li><li id="5211" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated"><code class="fe mt mu mv mw b">host=foo,mytag=measure</code>是可以用来分组和过滤的标签</li><li id="11df" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated"><code class="fe mt mu mv mw b">onevalue=5,val2=3234.34</code>是数值，可以用图形显示</li><li id="4546" class="lw lx iq ly b lz mo mb mp md mq mf mr mh ms mj mk ml mm mn bi translated"><code class="fe mt mu mv mw b">1609459200000000000</code>是当前的 unix 时间戳+9x“0”——使它成为一个纳秒时间戳。现在是<code class="fe mt mu mv mw b">01/01/2021</code> UTC。</li></ul><p id="7475" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">关于 InfluxDB 文档中协议的更多信息:</p><div class="om on gp gr oo op"><a href="https://docs.influxdata.com/influxdb/v1.8/write_protocols/line_protocol_reference/" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ja gy z fp ou fr fs ov fu fw iz bi translated">InfluxDB 线路协议参考| InfluxData 文档</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">InfluxDB 线路协议是一种基于文本的格式，用于向 InfluxDB 写入指针。线路协议接受换行符…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">docs.influxdata.com</p></div></div><div class="oy l"><div class="pw l pa pb pc oy pd ky op"/></div></div></a></div><h1 id="9f98" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">监控 macOS 温度和风扇</h1><p id="7449" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">为此，我写了一个小脚本。它使用<code class="fe mt mu mv mw b">osx-cpu-temp</code>从 macOS SMC 读取数据。有一些其他的程序也可以做到这一点，但是我喜欢<code class="fe mt mu mv mw b">osx-cpu-temp</code>的简单性，这是这种情况下的理想选择。</p><div class="om on gp gr oo op"><a href="https://github.com/lavoiesl/osx-cpu-temp" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ja gy z fp ou fr fs ov fu fw iz bi translated">lavoeisl/OS x-CPU-temp</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">输出 OSX 的当前 CPU 温度。在…上创建一个帐户，为 lavoeisl/OS x-CPU-temp 开发做贡献</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">github.com</p></div></div><div class="oy l"><div class="px l pa pb pc oy pd ky op"/></div></div></a></div><p id="b130" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">用<code class="fe mt mu mv mw b">brew install osx-cpu-temp</code>安装。</p><p id="b10b" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">在<code class="fe mt mu mv mw b">/usr/local/bin/osx_stats</code>中创建文件并使其可执行:<code class="fe mt mu mv mw b">chmod +x /usr/local/bin/mymetrics</code>。</p><p id="3686" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">然后在里面粘贴以下脚本:</p><pre class="kp kq kr ks gt oe mw of og aw oh bi"><span id="2ac9" class="nt lf iq mw b gy oi oj l ok ol">#!/bin/bash</span><span id="bfac" class="nt lf iq mw b gy py oj l ok ol">timestamp=$(date +%s)000000000<br/>hostname=$(hostname | tr "[:upper:]" "[:lower:]")</span><span id="3731" class="nt lf iq mw b gy py oj l ok ol">cpu=$(osx-cpu-temp -c | sed -e 's/\([0-9.]*\).*/\1/')<br/>fans=$(osx-cpu-temp -f | grep '^Fan' | sed -e 's/^Fan \([0-9]\) - \([a-zA-Z]*\) side *at \([0-9]*\) RPM (\([0-9]*\)%).*/\1,\2,\3,\4/')</span><span id="38c4" class="nt lf iq mw b gy py oj l ok ol">echo "cpu_temp,tag=$hostname temp=$cpu $timestamp"</span><span id="204e" class="nt lf iq mw b gy py oj l ok ol">for f in $fans; do<br/>  side=$(echo "$f" | cut -d, -f2 | tr "[:upper:]" "[:lower:]")<br/>  rpm=$(echo "$f" | cut -d, -f3)<br/>  pct=$(echo "$f" | cut -d, -f4)<br/>  echo "fan_speed,host=$hostname,side=$side rpm=$rpm,percent=$pct $timestamp"<br/>done</span></pre><p id="2af9" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">现在，您可以通过执行脚本来测试它:</p><pre class="kp kq kr ks gt oe mw of og aw oh bi"><span id="a59b" class="nt lf iq mw b gy oi oj l ok ol">/usr/local/bin/osx_stats</span><span id="9e9a" class="nt lf iq mw b gy py oj l ok ol">cpu_temp,host=host temp=52.6 <!-- -->1609459200000000000<br/>fan_speed,host=host,side=left rpm=1500,percent=43 <!-- -->1609459200000000000<br/>fan_speed,host=host,side=right rpm=1500,percent=43 <!-- -->1609459200000000000<!-- --> </span></pre><h2 id="5ebf" class="nt lf iq bd lg nu nv dn lk nw nx dp lo md ny nz lq mf oa ob ls mh oc od lu iw bi translated">你的作业(DIY)</h2><ul class=""><li id="1b1f" class="lw lx iq ly b lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">扩展脚本，使其也报告 GPU 温度…</li></ul><h2 id="e18d" class="nt lf iq bd lg nu nv dn lk nw nx dp lo md ny nz lq mf oa ob ls mh oc od lu iw bi translated">更多温度、功率、电流…</h2><p id="4e07" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">我已经为<code class="fe mt mu mv mw b">osx-cpu-temp</code>库创建了一个拉请求。它允许您传递一个“SMC 键”来查询 SMC 中的单个值，以探索您的机器可以报告什么。给它一个👍如果你想看到它被合并(通过自制程序变得可用)。</p><p id="9509" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">如果你想试一试，你可以下载并自己构建它:</p><pre class="kp kq kr ks gt oe mw of og aw oh bi"><span id="0dcf" class="nt lf iq mw b gy oi oj l ok ol">git clone <a class="ae np" href="https://github.com/lavoiesl/osx-cpu-temp.git" rel="noopener ugc nofollow" target="_blank">https://github.com/lavoiesl/osx-cpu-temp.git</a><br/>cd osx-cpu-temp<br/>git fetch origin pull/36/head:add-options<br/>git checkout add-options<br/>make<br/>./osx-cpu-temp -c TCXC</span></pre><div class="om on gp gr oo op"><a href="https://github.com/lavoiesl/osx-cpu-temp/pull/36" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ja gy z fp ou fr fs ov fu fw iz bi translated">添加选项，允许通过 DrPsychick Pull 请求# 36 lavoeisl/OS x-CPU-temp 传递 SMC 密钥</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">保持默认行为允许可选传递 SMC 键添加选项转储所有或个别 SMC 键推理:有…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">github.com</p></div></div><div class="oy l"><div class="pz l pa pb pc oy pd ky op"/></div></div></a></div><h1 id="bceb" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">监控电池状态</h1><p id="4482" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">我还不能用像<code class="fe mt mu mv mw b">osx-cpu-temp</code>这样简单的控制台命令来解决这个问题。帮我一下，我会更新文章与大家分享。使用<code class="fe mt mu mv mw b">osx-cpu-temp</code>似乎只能查询电池的功耗。</p><ul class=""><li id="201b" class="lw lx iq ly b lz nk mb nl md nm mf nn mh no mj mk ml mm mn bi translated">你知道一个在 macOS 上报告电池状态的简单(快速)控制台程序吗？</li></ul><p id="e8f0" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">如果没有，而你正在寻找类似的东西，伸出手。我开始使用这个名为<code class="fe mt mu mv mw b">sensei</code>的小工具，我非常感谢大家的帮助:</p><div class="om on gp gr oo op"><a href="https://github.com/DrPsychick/homebrew-sensei" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ja gy z fp ou fr fs ov fu fw iz bi translated">心理学博士/家酿大师</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">在 macOS 上读取传感器信息。通过在…上创建帐户，为 DrPsychick/homebrew-sensei 开发做出贡献</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">github.com</p></div></div><div class="oy l"><div class="qa l pa pb pc oy pd ky op"/></div></div></a></div><h1 id="f341" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">你得到了什么</h1><p id="6de9" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">如果你不想自己设置一个仪表板，你可以简单地导入我从 Grafana 制作的仪表板，然后从那里开始。</p><div class="om on gp gr oo op"><a href="https://grafana.com/grafana/dashboards/12918" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ja gy z fp ou fr fs ov fu fw iz bi translated">Grafana 的 macOS 主机仪表板</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">温度的 macOS telegraf 指标和 osx-cpu-temp</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">grafana.com</p></div></div><div class="oy l"><div class="qb l pa pb pc oy pd ky op"/></div></div></a></div><p id="1b2a" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">运行您的 Telegraf，当安装了 Homebrew 时，您可以将它作为服务运行(并且它会在机器启动时启动)。</p><pre class="kp kq kr ks gt oe mw of og aw oh bi"><span id="7839" class="nt lf iq mw b gy oi oj l ok ol">brew services (re)start telegraf</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/0e6ae2d00c5716ba696388882370b595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tr-FOyYJzfWLgczc2YSCxg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">Mac Book Pro 的 CPU 和 GPU 温度以及风扇使用情况</figcaption></figure><h1 id="f5fd" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">快乐监控！</h1><p id="dfc2" class="pw-post-body-paragraph mx my iq ly b lz ma ka mz mb mc kd na md nb nc nd mf ne nf ng mh nh ni nj mj ij bi translated">…感谢您的阅读！</p><p id="558d" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated">请在评论中告诉我，我应该在下一篇文章中涵盖哪些内容。<br/>或者用 macOS 上的自定义脚本分享你正在监控的内容！</p><p id="d50f" class="pw-post-body-paragraph mx my iq ly b lz nk ka mz mb nl kd na md nq nc nd mf nr nf ng mh ns ni nj mj ij bi translated"><a class="ae np" href="https://www.civo.com/learn/using-civo-kubernetes-to-gamify-twitter-with-prometheus-and-grafana" rel="noopener ugc nofollow" target="_blank">也很酷:监控推特粉丝</a></p><div class="om on gp gr oo op"><a href="https://www.civo.com/learn/using-civo-kubernetes-to-gamify-twitter-with-prometheus-and-grafana" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ja gy z fp ou fr fs ov fu fw iz bi translated">使用 Civo Kubernetes 与普罗米修斯和格拉法纳-Civo.com 一起游戏化 Twitter</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">这是从朱利安·皮沃托(@roidelapluie)的一条推文开始的:他创建了一个系统，可以让你绘制你的…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">www.civo.com</p></div></div><div class="oy l"><div class="qc l pa pb pc oy pd ky op"/></div></div></a></div></div></div>    
</body>
</html>