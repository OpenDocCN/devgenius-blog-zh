<html>
<head>
<title>How to Fix the “Cannot redeclare block-scoped variable” Error in TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复 TypeScript 中的“无法重新声明块范围的变量”错误</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/typescript-cannot-redeclare-block-scoped-variable-8f7036182355?source=collection_archive---------10-----------------------#2022-09-02">https://blog.devgenius.io/typescript-cannot-redeclare-block-scoped-variable-8f7036182355?source=collection_archive---------10-----------------------#2022-09-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/eb9bad0d7eb83fd1f2ed99956033c4dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Opzkzpzf3wd1cu54prohQA.png"/></div></div></figure><p id="2430" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您在 TypeScript 中遇到过“无法重新声明块范围的变量”错误吗？出现此错误有两个原因:</p><ol class=""><li id="61c9" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">使用与 TypeScript 全局类型冲突的变量名。</li><li id="8752" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">在同一块范围内重新声明变量。</li></ol><figure class="li lj lk ll gt jo gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/828ebb7a16a12ba80abdf0ecfcf13052.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/0*rp1kDn4P0-k-xIpZ.png"/></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk translated">VS 代码中出现“无法重新声明块范围的变量”错误。</figcaption></figure><p id="0b6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我们将探讨这些可能原因的解决方案。</p><h1 id="696d" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">修复:使用与 TypeScript 全局类型冲突的变量名</h1><p id="ec90" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">如果您声明的变量名称与 TypeScript 全局类型中声明的名称冲突，则会出现“无法重新声明块范围的变量”错误。</p><p id="41b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">索引. ts </strong></p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="cdd2" class="my lr in mu b gy mz na l nb nc">// ❌ Cannot re-declare block-scoped variable "name".<br/>const name = 'Coding Beauty';</span><span id="9892" class="my lr in mu b gy nd na l nb nc">console.log(name);</span></pre><p id="f2c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要修复这种情况下的错误，请将您的文件转换为一个<a class="ae ne" href="https://www.typescriptlang.org/docs/handbook/modules.html" rel="noopener ugc nofollow" target="_blank"> ES 模块</a>，如下所示:</p><p id="02a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">索引. ts </strong></p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="6199" class="my lr in mu b gy mz na l nb nc">// ✅ variable declared successfully<br/>const name = 'Coding Beauty';</span><span id="9bc7" class="my lr in mu b gy nd na l nb nc">console.log(name); // Coding Beauty</span><span id="0266" class="my lr in mu b gy nd na l nb nc">export {};</span></pre><p id="d3f0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nf ng nh mu b">export {}</code>语句表明该文件是一个 es 模块。在 TypeScript 中，任何包含顶级<code class="fe nf ng nh mu b">import</code>或<code class="fe nf ng nh mu b">export</code>的文件都被认为是一个模块。</p><p id="0393" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果没有顶级的<code class="fe nf ng nh mu b">import</code>或<code class="fe nf ng nh mu b">export</code>声明，该文件将被视为一个脚本，其内容在全局范围内(以及其他模块)都是可用的。这就是导致我们的<code class="fe nf ng nh mu b">name</code>变量和 TypeScript 全局类型中声明的<code class="fe nf ng nh mu b">name</code>变量之间的名称冲突的原因。</p><p id="dff3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">解决这个问题的另一种方法是使用另一个名称来声明不与全局类型冲突的变量。</p><p id="6f81" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">索引. ts </strong></p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="018a" class="my lr in mu b gy mz na l nb nc">// ✅ variable declared successfully<br/>const theName = 'Coding Beauty';</span><span id="8f86" class="my lr in mu b gy nd na l nb nc">console.log(theName); // Coding Beauty</span><span id="6fe2" class="my lr in mu b gy nd na l nb nc">export {};</span></pre><h1 id="9359" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">修复:在同一块范围内重新声明变量</h1><p id="8bba" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">如果您尝试使用以前在同一块范围内使用的名称来声明变量，也会出现“无法重新声明块范围内的变量”错误。</p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="fb99" class="my lr in mu b gy mz na l nb nc">const language = 'JavaScript';</span><span id="4134" class="my lr in mu b gy nd na l nb nc">// ❌ Cannot redeclare block-scoped variable 'language'.<br/>const language = 'PHP';</span></pre><p id="cbf5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过对新变量使用不同的名称，可以很容易地修复这种情况下的错误。</p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="8ca7" class="my lr in mu b gy mz na l nb nc">const language = 'JavaScript';</span><span id="56b5" class="my lr in mu b gy nd na l nb nc">// ✅ variable declared successfully<br/>const language2 = 'PHP';</span></pre><p id="c080" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你想给这个变量赋一个新值，正确的方法是用<code class="fe nf ng nh mu b">let</code>关键字声明这个变量，并在不重新声明的情况下改变它的值。</p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="7b93" class="my lr in mu b gy mz na l nb nc">// declare with "let" keyword<br/>let language = 'JavaScript';</span><span id="7944" class="my lr in mu b gy nd na l nb nc">// reassign without redeclaring<br/>language = 'PHP';</span><span id="04a4" class="my lr in mu b gy nd na l nb nc">console.log(language); // PHP</span></pre><h2 id="4801" class="my lr in bd ls ni nj dn lw nk nl dp ma kg nm nn me kk no np mi ko nq nr mm ns bi translated">注意</h2><p id="fb2e" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">与<code class="fe nf ng nh mu b">const</code>或<code class="fe nf ng nh mu b">let</code>不同，<code class="fe nf ng nh mu b">var</code>关键字不会抱怨重新声明的变量。</p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="1b58" class="my lr in mu b gy mz na l nb nc">var language = 'JavaScript';</span><span id="5ef2" class="my lr in mu b gy nd na l nb nc">// No error thrown<br/>var language = 'PHP';</span></pre><p id="4737" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">重新声明变量会导致代码中出现棘手的错误，这也是避免使用<code class="fe nf ng nh mu b">var</code>关键字的一个原因。</p><p id="2a46" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">可以在嵌套块中声明同名的变量。嵌套块中的变量与外部范围中声明的变量是分开的。</p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="cfd4" class="my lr in mu b gy mz na l nb nc">let color = 'red';</span><span id="19b6" class="my lr in mu b gy nd na l nb nc">if (true) {<br/>  let color = 'yellow';</span><span id="2f10" class="my lr in mu b gy nd na l nb nc">  console.log(color); // yellow<br/>}</span><span id="8cec" class="my lr in mu b gy nd na l nb nc">console.log(color); // red</span></pre><h2 id="2120" class="my lr in bd ls ni nj dn lw nk nl dp ma kg nm nn me kk no np mi ko nq nr mm ns bi translated">注意</h2><p id="e617" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">如果你使用<code class="fe nf ng nh mu b">var</code>关键字来做这件事，它将覆盖外部作用域中变量的值。</p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="bf21" class="my lr in mu b gy mz na l nb nc">var color = 'red';</span><span id="8226" class="my lr in mu b gy nd na l nb nc">if (true) {<br/>  var color = 'yellow';</span><span id="5ae4" class="my lr in mu b gy nd na l nb nc">  console.log(color); // yellow<br/>}</span><span id="2b53" class="my lr in mu b gy nd na l nb nc">console.log(color); // yellow</span></pre><p id="5cfd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">避免使用<code class="fe nf ng nh mu b">var</code>的另一个原因。</p><p id="69de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它不一定是一个<code class="fe nf ng nh mu b">if</code>块，我们可以在任何用花括号(<code class="fe nf ng nh mu b">{</code>和<code class="fe nf ng nh mu b">}</code>)指定的嵌套块中这样做。</p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="29fe" class="my lr in mu b gy mz na l nb nc">let color = 'red';</span><span id="e123" class="my lr in mu b gy nd na l nb nc">{<br/>  let color = 'yellow';</span><span id="93de" class="my lr in mu b gy nd na l nb nc">  console.log(color); // yellow<br/>}</span><span id="7e93" class="my lr in mu b gy nd na l nb nc">console.log(color); // red</span></pre><h1 id="f4a8" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">解决方法:利用生活</h1><p id="b9e9" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">另一种修复错误的方法是用一个<a class="ae ne" href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE" rel="noopener ugc nofollow" target="_blank">立即调用函数表达式(life)</a>包装包含变量的代码。IIFEs 是一定义就运行的函数，它们有助于避免导致此错误的名称冲突。</p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="6e75" class="my lr in mu b gy mz na l nb nc">const fruit = 'Apple';</span><span id="c6bb" class="my lr in mu b gy nd na l nb nc">(() =&gt; {<br/>  const fruit = 'Banana';</span><span id="31dd" class="my lr in mu b gy nd na l nb nc">  // ✅ variable declared successfully<br/>  console.log(fruit); // Banana<br/>})();</span><span id="754b" class="my lr in mu b gy nd na l nb nc">console.log(fruit); // Apple</span></pre><p id="e7f3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此修复还解决了我们之前看到的 TypeScript 全局类型冲突问题。</p><p id="c117" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> index.ts </strong></p><pre class="li lj lk ll gt mt mu mv mw aw mx bi"><span id="49a5" class="my lr in mu b gy mz na l nb nc">(() =&gt; {<br/>  const name = 'Coding Beauty';</span><span id="a762" class="my lr in mu b gy nd na l nb nc">  console.log(name); // Coding Beauty<br/>})();</span></pre></div><div class="ab cl nt nu hr nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ig ih ii ij ik"><p id="5dc0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="oa">最初发表于</em><a class="ae ne" href="https://cbdev.link/d44ade" rel="noopener ugc nofollow" target="_blank"><em class="oa">codingbeautydev.com</em></a></p><h1 id="14d7" class="lq lr in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">JavaScript 做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph jv jw in jx b jy mo ka kb kc mp ke kf kg mq ki kj kk mr km kn ko ms kq kr ks ig bi translated">一本关于 JavaScript 微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="li lj lk ll gt jo gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae ne" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank">报名</a>立即免费领取一份。</p></div></div>    
</body>
</html>