<html>
<head>
<title>Self-hosted Linux Agent on Azure DevOps in 5 minutes!!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure DevOps上的自托管Linux代理只需5分钟！！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/self-hosted-linux-agent-on-azure-devops-in-5-minutes-2e43b4f26f69?source=collection_archive---------3-----------------------#2021-12-31">https://blog.devgenius.io/self-hosted-linux-agent-on-azure-devops-in-5-minutes-2e43b4f26f69?source=collection_archive---------3-----------------------#2021-12-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1257" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">是啊！您不必为Microsoft托管的代理付费，也不必购买新的服务器来工作/实践。用自己的Linux机器代替！</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/1f8354fb7d6918004c26ee26ff71ded7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lqB2ngrkv_bApi6zeJmW7g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">Azure Devops +你的Linux机器</figcaption></figure><p id="ecee" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果你像我一样，想学习Azure DevOps，你需要一台机器来构建代码，执行发布等。但是你说我租不到服务器？你不需要我的朋友。</p><p id="6468" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果你在Azure、Azure VMSS或任何Linux机器上有一个VM，并且想在你的Azure DevOps中使用它作为代理，过程是相同的。</p><p id="854a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">让我们看看我们能做些什么。</p><p id="31b2" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">先决条件:</p><ul class=""><li id="3828" class="lo lp in ku b kv kw ky kz lb lq lf lr lj ls ln lt lu lv lw bi translated">一台Linux机器</li><li id="22de" class="lo lp in ku b kv lx ky ly lb lz lf ma lj mb ln lt lu lv lw bi translated">Azure DevOps帐户。</li></ul><h1 id="76ee" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">1.设置代理池</h1><p id="85a3" class="pw-post-body-paragraph ks kt in ku b kv mu jo kx ky mv jr la lb mw ld le lf mx lh li lj my ll lm ln ig bi translated">转到您的Azure DevOps帐户-&gt;组织设置，然后转到管道中的代理池</p><p id="49d6" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">点击添加池</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/7e3213731008598e1157e1bb5316351e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/0*W7e1q6u47ssOz3L4.png"/></div></figure><p id="4c28" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">选择自托管，并为其命名和描述</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi na"><img src="../Images/74fc637eb01dee775413198bfbc04c58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/0*GYwyLXk1SyiV256I.png"/></div></figure><p id="0234" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您也可以选择授予对特定管道的访问权限。如果需要，取消选中该选项。</p><p id="a7ba" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">打开创建的代理池，单击“代理”，然后单击“新建代理”</p><p id="6850" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">选择Linux和“x64 ”,这是目前许多人使用的。如果需要，还可以选择RHEL6或其他ARM架构</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/88d24699b41ec182baecce5695da7fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vywp4e41IhIjIE24.png"/></div></div></figure><h1 id="44f7" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">2.安装代理</h1><p id="1fb0" class="pw-post-body-paragraph ks kt in ku b kv mu jo kx ky mv jr la lb mw ld le lf mx lh li lj my ll lm ln ig bi translated">检查文件的下载位置，以确保万无一失。我在下载里有我的</p><p id="ada6" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">使用终端中的<code class="fe nc nd ne nf b">cd Downloads</code>将您的工作目录更改为下载目录，然后创建一个新目录，并使用<code class="fe nc nd ne nf b">mkdir myagent &amp;&amp; cd myagent</code>将该目录更改为下载目录</p><p id="1693" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">使用<code class="fe nc nd ne nf b">tar zxvf ~/Downloads/vsts-agent-linux-x64-2.195.2.tar.gz</code>检查版本。相反，你可以使用Azure DevOps提供的命令</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/26cc288dbdcaf6e6d96af2beb724e592.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mRwVUl80od5DQADJ.png"/></div></div></figure><p id="927b" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">检查完协议后运行<code class="fe nc nd ne nf b">./config.sh</code>和<code class="fe nc nd ne nf b">Y</code>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nh"><img src="../Images/db00b0d452ce7111cdb74cd7083fb89e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xRA1wj5iXbGfNmQN.png"/></div></div></figure><p id="e255" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">服务器网址是<a class="ae ni" href="https://dev.azure.com/YourOrganizationName" rel="noopener ugc nofollow" target="_blank">dev.azure.com/YourOrganizationName</a>在你的Azure DevOps上找到它</p><p id="d669" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">按“Enter ”,因为我们将使用PAT令牌进行身份验证。</p><h1 id="1809" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">3.生成PAT令牌</h1><p id="d09f" class="pw-post-body-paragraph ks kt in ku b kv mu jo kx ky mv jr la lb mw ld le lf mx lh li lj my ll lm ln ig bi translated">要获取PAT令牌，请转到您的Azure DevOps帐户</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/59aea114ba7866d42cf583e4908ca377.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/0*U2d30kWQlz64Fmkz.png"/></div></figure><p id="7521" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">单击“新令牌”</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/de48ec7362374804cf50e0d757f2fbb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/0*ln1ipz2zbQnCED8i.png"/></div></div></figure><p id="dc80" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">给令牌一个名称和完全访问权限。如果您知道不需要什么，可以选择自定义范围。</p><p id="93aa" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">创建新令牌。<strong class="ku io">此令牌一旦消失，以后就无法找回。所以确保你复制它以防你以后需要它。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nk"><img src="../Images/c9a388ffdd6721b8531be1f7aa182a1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3ELNDJ1KCINAQYDr.png"/></div></div></figure><h1 id="7329" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">4.最后的步骤</h1><p id="21c2" class="pw-post-body-paragraph ks kt in ku b kv mu jo kx ky mv jr la lb mw ld le lf mx lh li lj my ll lm ln ig bi translated">输入代理池名称，对我来说是“newAgent ”,对您的代理来说是一个名称。对我来说是R2D2。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nl"><img src="../Images/611db4c084a6f8201269d81d9ada6110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uhibl5KAlSEMbB5h.png"/></div></div></figure><p id="da17" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">下一次运行<code class="fe nc nd ne nf b">./run.sh</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/798523f7db7180de773eb4f4e858cc62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1114/format:webp/0*djkWmrrLlEmgc-X1.png"/></div></figure><h1 id="f914" class="mc md in bd me mf mg mh mi mj mk ml mm jt mn ju mo jw mp jx mq jz mr ka ms mt bi translated">5.尽情享受吧！</h1><p id="9199" class="pw-post-body-paragraph ks kt in ku b kv mu jo kx ky mv jr la lb mw ld le lf mx lh li lj my ll lm ln ig bi translated">现在检查您的代理，我们有它，我们的新代理开始运行</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/b6d195ceac687362097e3fce130ca779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8lsIJm7n7bHC0SOu.png"/></div></div></figure><p id="34e1" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">感谢您的阅读您可以在<a class="ae ni" href="https://twitter.com/pavangudiwada_" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上找到我，或者在<a class="ae ni" href="https://pavangudiwada.hashnode.dev/" rel="noopener ugc nofollow" target="_blank"> Hashnode </a>和<a class="ae ni" href="https://pavangudiwada.medium.com/" rel="noopener"> Medium </a>上阅读我的博客</p></div></div>    
</body>
</html>