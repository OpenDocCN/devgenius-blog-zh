<html>
<head>
<title>Creating a Simple Web App with HarperDB, Express, and Vue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 HarperDB、Express 和 Vue 创建简单的 Web 应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-a-simple-web-app-with-harperdb-express-and-vue-edecd136c554?source=collection_archive---------30-----------------------#2020-07-13">https://blog.devgenius.io/creating-a-simple-web-app-with-harperdb-express-and-vue-edecd136c554?source=collection_archive---------30-----------------------#2020-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b8add8cd0345224152a8047d56540dc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hhnUSKAm8bfP3UVq"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9e55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">HarperDB 是一个可伸缩的 SQL 和 NoSQL 数据库，我们可以用它来存储数据。</p><p id="14df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以进行查询，包括更复杂的查询，如连接。</p><p id="4245" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">利用其 API 的多功能性，它对于创建报告和数据分析非常有用。</p><p id="c44b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它让我们通过 HTTP 请求而不是直接查询来控制数据库。</p><p id="00d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用 HarperDB、Express 和 Vue 创建一个简单的 web 应用程序。</p><h1 id="b203" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">入门指南</h1><p id="44c4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们首先安装邮差 HTTP 客户端。</p><p id="63e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从 https://examples.harperdb.io/?version=latest 下载邮差合集。</p><p id="9647" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它让我们了解哪些特性是可用的，以及如何发出命令来使用它们。</p><p id="76bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过安装节点 12.16.1 来安装 HarperDB。</p><p id="76bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果用 nvm，可以运行<code class="fe me mf mg mh b">nvm install 12.16.1</code>。</p><p id="4a80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过运行以下命令切换到该版本:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9852" class="mq lc iq mh b gy mr ms l mt mu">nvm use 12.16.1</span></pre><p id="6032" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们通过运行以下命令来安装 HarperDB:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3b44" class="mq lc iq mh b gy mr ms l mt mu">npm install -g harperdb</span></pre><p id="930d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过运行来运行它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1b41" class="mq lc iq mh b gy mr ms l mt mu">harperdb run</span></pre><h1 id="f991" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建我们的应用</h1><p id="d0a5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">接下来，我们用 Express 和 Vue 创建我们的项目。</p><p id="e1ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它能让我们读取、创建、更新和删除关于狗的数据。</p><p id="ea79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了做到这一点，我们创建了一个包含<code class="fe me mf mg mh b">backend</code>和<code class="fe me mf mg mh b">frontend</code>文件夹的项目文件夹。</p><p id="e219" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">backend</code>文件夹中，我们运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="56ba" class="mq lc iq mh b gy mr ms l mt mu">npx express-generator</span></pre><p id="fdb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">backend</code>文件夹里。</p><p id="1054" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们安装<code class="fe me mf mg mh b">cors</code>中间件，让我们的前端使用 API 和<code class="fe me mf mg mh b">axios</code>与 HarperDB 对话，方法是运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4bbb" class="mq lc iq mh b gy mr ms l mt mu">npm i cors axios</span></pre><p id="0159" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在同一个文件夹中。</p><p id="deb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">frontend</code>文件夹中，我们运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="90b3" class="mq lc iq mh b gy mr ms l mt mu">npx vue create .</span></pre><p id="3fab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建 Vue 项目。</p><p id="cec8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是用默认选项。</p><h1 id="562b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">后端</h1><p id="4353" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">现在我们可以在后端工作了。</p><p id="0563" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要与 HarperDB 交互，我们只需发出 HTTP 请求。</p><p id="7095" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们首先将<code class="fe me mf mg mh b">routes</code>文件夹中的<code class="fe me mf mg mh b">user.js</code>重命名为<code class="fe me mf mg mh b">dog.js</code>。</p><p id="c227" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">app.js</code>中，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9ed9" class="mq lc iq mh b gy mr ms l mt mu">`var createError = require('http-errors');<br/>var express = require('express');<br/>var path = require('path');<br/>var cookieParser = require('cookie-parser');<br/>var logger = require('morgan');<br/>var cors = require('cors')</span><span id="051d" class="mq lc iq mh b gy mv ms l mt mu">var indexRouter = require('./routes/index');<br/>var dogsRouter = require('./routes/dogs');</span><span id="c1be" class="mq lc iq mh b gy mv ms l mt mu">var app = express();</span><span id="eaf3" class="mq lc iq mh b gy mv ms l mt mu">// view engine setup<br/>app.set('views', path.join(__dirname, 'views'));<br/>app.set('view engine', 'jade');</span><span id="a108" class="mq lc iq mh b gy mv ms l mt mu">app.use(logger('dev'));<br/>app.use(express.json());<br/>app.use(express.urlencoded({ extended: false }));<br/>app.use(cookieParser());<br/>app.use(express.static(path.join(__dirname, 'public')));<br/>app.use(cors())</span><span id="1921" class="mq lc iq mh b gy mv ms l mt mu">app.use('/', indexRouter);<br/>app.use('/dogs', dogsRouter);</span><span id="71b5" class="mq lc iq mh b gy mv ms l mt mu">// catch 404 and forward to error handler<br/>app.use(function(req, res, next) {<br/>  next(createError(404));<br/>});</span><span id="7eed" class="mq lc iq mh b gy mv ms l mt mu">// error handler<br/>app.use(function(err, req, res, next) {<br/>  // set locals, only providing error in development<br/>  res.locals.message = err.message;<br/>  res.locals.error = req.app.get('env') === 'development' ? err : {};</span><span id="3d2b" class="mq lc iq mh b gy mv ms l mt mu">// render the error page<br/>  res.status(err.status || 500);<br/>  res.render('error');<br/>});</span><span id="2a8f" class="mq lc iq mh b gy mv ms l mt mu">module.exports = app;</span></pre><p id="bf97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加<code class="fe me mf mg mh b">dogs</code>路线:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="39c4" class="mq lc iq mh b gy mr ms l mt mu">var dogsRouter = require('./routes/dogs');</span></pre><p id="dd7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b5fe" class="mq lc iq mh b gy mr ms l mt mu">app.use('/dogs', dogsRouter);</span></pre><p id="beab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了 CORS 中间件:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7c0d" class="mq lc iq mh b gy mr ms l mt mu">var cors = require('cors')</span></pre><p id="6629" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8b6e" class="mq lc iq mh b gy mr ms l mt mu">app.use('/dogs', dogsRouter);</span></pre><p id="1095" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来在<code class="fe me mf mg mh b">dog.js</code>中，我们创建路线。</p><p id="e511" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们添加:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cf78" class="mq lc iq mh b gy mr ms l mt mu">var express = require('express');<br/>var router = express.Router();<br/>const axios = require('axios');</span><span id="2cd8" class="mq lc iq mh b gy mv ms l mt mu">const HDB_ENDPOINT = 'http://localhost:9925';<br/>const TOKEN = 'Basic SERCX0FETUlOOnBhc3N3b3Jk';<br/>const headers = {<br/>  Authorization: TOKEN,<br/>  Accept: '*/*',<br/>  'Accept-Encoding': 'gzip, deflate, br',<br/>  'Connection': 'keep-alive',<br/>  'Content-Type': 'application/json'<br/>}</span><span id="b613" class="mq lc iq mh b gy mv ms l mt mu">router.get('/', async (req, res) =&gt; {<br/>  try {<br/>    const { data } = await axios.post(HDB_ENDPOINT, {<br/>      "operation": "sql",<br/>      "sql": `SELECT * FROM dev.dog`<br/>    }, {<br/>      headers<br/>    })<br/>    res.json(data);<br/>  } catch (error) {<br/>    console.log(error)<br/>  }</span><span id="27ca" class="mq lc iq mh b gy mv ms l mt mu">});</span><span id="508a" class="mq lc iq mh b gy mv ms l mt mu">router.get('/:id', async (req, res) =&gt; {<br/>  const { id } = req.params;<br/>  const { data } = await axios.post(HDB_ENDPOINT, {<br/>    "operation": "sql",<br/>    "sql": `SELECT * FROM dev.dog where id = ${id}`<br/>  }, {<br/>    headers<br/>  })<br/>  res.json(data);<br/>});</span><span id="f133" class="mq lc iq mh b gy mv ms l mt mu">router.post('/', async (req, res) =&gt; {<br/>  const { dog_name, owner_name, age, weight_lbs } = req.body;<br/>  const { data } = await axios.post(HDB_ENDPOINT, {<br/>    "operation": "insert",<br/>    "schema": "dev",<br/>    "table": "dog",<br/>    "records": [<br/>      {<br/>        dog_name, owner_name, age, weight_lbs<br/>      }<br/>    ]<br/>  }, {<br/>    headers<br/>  })<br/>  res.json(data);<br/>});</span><span id="6a20" class="mq lc iq mh b gy mv ms l mt mu">router.put('/:id', async (req, res) =&gt; {<br/>  const { id } = req.params;<br/>  const { dog_name, owner_name, age, weight_lbs } = req.body;<br/>  const { data } = await axios.post(HDB_ENDPOINT, {<br/>    "operation": "update",<br/>    "schema": "dev",<br/>    "table": "dog",<br/>    "records": [<br/>      {<br/>        id,<br/>        dog_name, owner_name, age, weight_lbs<br/>      }<br/>    ]<br/>  }, {<br/>    headers<br/>  })<br/>  res.json(data);<br/>});</span><span id="0bc1" class="mq lc iq mh b gy mv ms l mt mu">router.delete('/:id', async (req, res) =&gt; {<br/>  try {<br/>    const { id } = req.params;<br/>    const { data } = await axios.post(HDB_ENDPOINT, {<br/>      "operation": "sql",<br/>      "sql": `DELETE FROM dev.dog WHERE id = '${id}'`<br/>    }, {<br/>      headers<br/>    })<br/>    res.json(data);<br/>  } catch (error) {<br/>    res.json(error)<br/>  }<br/>});</span><span id="9b46" class="mq lc iq mh b gy mv ms l mt mu">module.exports = router;</span></pre><p id="ffa7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">到文件。</p><p id="f9b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有发出选择命令的<code class="fe me mf mg mh b">get</code>路由。</p><p id="befd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">头包含令牌、编码和<code class="fe me mf mg mh b">content-type</code>头。</p><p id="fe5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">令牌来自 Postman 示例，我们可以用它来与 HarperDB 的本地版本进行交互。</p><p id="ebdb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用令牌向数据库进行身份验证。</p><p id="662e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在生产中使用它，那么我们必须使令牌可配置。</p><p id="c57f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们发出命令，用 SQL 命令发出 HTTP 请求来检索和删除数据。</p><p id="2548" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了创建和更新，我们只需发送我们想要添加或更新的数据。</p><p id="68cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请求负载中的<code class="fe me mf mg mh b">operation</code>属性将告诉 HarperDB 做什么。</p><h1 id="14e4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">前端</h1><p id="ad2f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了构建前端，我们将<code class="fe me mf mg mh b">DogForm.vue</code>文件添加到<code class="fe me mf mg mh b">components</code>文件夹中。</p><p id="6643" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在代码中添加表单。</p><p id="e818" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们补充:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8afe" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;form @submit.prevent="submit"&gt;<br/>      &lt;div&gt;<br/>        &lt;label&gt;Dog Name&lt;/label&gt;<br/>        &lt;input v-model="dog.dog_name" name="dogName" type="text" /&gt;<br/>      &lt;/div&gt;<br/>      &lt;div&gt;<br/>        &lt;label&gt;Owner Name&lt;/label&gt;<br/>        &lt;input v-model="dog.owner_name" name="ownerName" type="text" /&gt;<br/>      &lt;/div&gt;<br/>      &lt;div&gt;<br/>        &lt;label&gt;Age&lt;/label&gt;<br/>        &lt;input v-model="dog.age" name="age" type="number" /&gt;<br/>      &lt;/div&gt;<br/>      &lt;div&gt;<br/>        &lt;label&gt;Weight&lt;/label&gt;<br/>        &lt;input v-model="dog.weight_lbs" name="weight" type="number" /&gt;<br/>      &lt;/div&gt;<br/>      &lt;div&gt;<br/>        &lt;input type="submit" value="save" /&gt;<br/>        &lt;button type="button" @click="remove"&gt;remove&lt;/button&gt;<br/>      &lt;/div&gt;<br/>    &lt;/form&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="3c6c" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>const axios = require("axios");<br/>const APIURL = "http://localhost:3000/dogs";</span><span id="be21" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  name: "DogForm",<br/>  props: {<br/>    dog: {<br/>      type: Object,<br/>      default: () =&gt; ({})<br/>    }<br/>  },<br/>  data() {<br/>    return {};<br/>  },<br/>  methods: {<br/>    async submit() {<br/>      const { dog_name, owner_name, age, weight_lbs, id } = this.dog;<br/>      if (!id) {<br/>        await axios.post(APIURL, {<br/>          dog_name,<br/>          owner_name,<br/>          age,<br/>          weight_lbs<br/>        });<br/>      } else {<br/>        await axios.put(`${APIURL}/${id}`, {<br/>          dog_name,<br/>          owner_name,<br/>          age,<br/>          weight_lbs<br/>        });<br/>      }<br/>      this.$emit("submitted");<br/>    },</span><span id="fc79" class="mq lc iq mh b gy mv ms l mt mu">    async remove() {<br/>      const { id } = this.dog;<br/>      await axios.delete(`${APIURL}/${id}`);<br/>      this.$emit("submitted");<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="e15f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加表单来添加、编辑或删除狗的数据条目。</p><p id="50b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">props</code>有一个<code class="fe me mf mg mh b">type</code>对象，默认值是一个对象。</p><p id="70f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们需要一个返回对象的函数来指定对象的默认值。</p><p id="772d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们有我们的<code class="fe me mf mg mh b">submit</code>方法，如果没有<code class="fe me mf mg mh b">id</code>，它就发出 post 请求，这意味着它是新的。</p><p id="7d07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它是一个生产应用程序，那么我们应该添加一些表单验证。</p><p id="ebbd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有一个<code class="fe me mf mg mh b">id</code>，那么我们更新现有的条目。</p><p id="f7e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们有<code class="fe me mf mg mh b">remove</code>方法来删除一个条目。</p><p id="1c02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击移除时它被调用。</p><p id="5238" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有方法都发出提交事件，我们在<code class="fe me mf mg mh b">App.vue</code>中监听这个事件。</p><p id="3d42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">App.vue</code>中，我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1c87" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;DogForm @submitted="getDogs" /&gt;<br/>    &lt;DogForm v-for="dog of dogs" :key="dog.id" :dog="dog" @submitted="getDogs" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="130e" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import DogForm from "./components/DogForm.vue";<br/>const axios = require("axios");<br/>const APIURL = "http://localhost:3000/dogs";</span><span id="a47c" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  name: "App",<br/>  components: {<br/>    DogForm<br/>  },<br/>  data() {<br/>    return {<br/>      dogs: []<br/>    };<br/>  },<br/>  beforeMount() {<br/>    this.getDogs();<br/>  },<br/>  methods: {<br/>    async getDogs() {<br/>      const { data } = await axios.get(APIURL);<br/>      this.dogs = data;<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="3913" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">DogForm</code>来输入和编辑条目。</p><p id="b18c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们监听<code class="fe me mf mg mh b">submitted</code>事件，因此新数据将被检索。</p><p id="2c06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">getDogs</code>方法通过 get 请求获取数据。</p><h1 id="075b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">运行我们的应用</h1><p id="7875" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们转到 Postman 集合，创建 Dog 模式和表。</p><p id="32a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们转到集合中的 QuickStart Examples 文件夹，并按列出的顺序运行“创建开发模式”和“创建 do 表”请求。</p><p id="d0a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们运行<code class="fe me mf mg mh b">backend</code>文件夹中的<code class="fe me mf mg mh b">npm start</code>来启动 Express app。</p><p id="19ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且我们运行<code class="fe me mf mg mh b">frontend</code>文件夹中的<code class="fe me mf mg mh b">npm run dev</code>来运行前端 app。</p><p id="587f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们得到了这样的结果:</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/7e4e892ec8517d0cd240749f33bfe53e.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*w0EqqiyeJpQ5t4JXPDR3Ng.png"/></div></figure><p id="3e85" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以输入我们想要的。</p><h1 id="7efb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="5cee" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用 HarperDB 轻松创建数据库驱动的应用程序。</p><p id="599d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">唯一的区别是，我们用 HTTP 请求向数据库发送命令，而不是直接发出命令。</p></div></div>    
</body>
</html>