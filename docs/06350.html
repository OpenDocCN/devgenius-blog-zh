<html>
<head>
<title>Easy Audio Visualization (Python)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简易音频可视化(Python)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/easy-audio-visualization-python-d3c6aa935212?source=collection_archive---------1-----------------------#2022-01-02">https://blog.devgenius.io/easy-audio-visualization-python-d3c6aa935212?source=collection_archive---------1-----------------------#2022-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="090b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">读取音频数据、更新图表、使用多重处理:开始用 Python 进行音频可视化所需要知道的一切。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/68365853f16537ed014ae9eff6bcbf10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1sb7ESun_EhZaX3kmQNog.png"/></div></div></figure><p id="ea3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你肯定已经遇到过很多不同的软件，这些软件可以让你跟踪你正在听的音频的进程。<strong class="jp ir">然而，你有没有想过这样的软件是如何工作的？</strong></p><p id="e6bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天是你的幸运日。我已经用 Python 做了一些音频处理，但是我从来没有可视化过我处理的音频文件，所以我决定尝试一下，用 Python 实现音频可视化。</p><p id="9e43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我将与你分享我是如何用 Python 可视化音频数据的，并且实现非常简单。</p></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><h2 id="bed1" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">目标</h2><p id="eeae" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">首先，我们来定义一个目标。这里的目标是<strong class="jp ir">播放一个音频文件，同时可视化音频数据</strong>，并在音频播放时让一条红线沿着图形移动。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi md"><img src="../Images/d3ab8c0b1868fd8614e0f7cb88f065d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gc020JxF24aj2YC61Ar8hA.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">预期产出</figcaption></figure><p id="500c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在开始写一些代码之前，我应该指出，代码应该写在 Python 文件中，而不是笔记本中，以确保一切正常，因为我们将以一种非常简单的方式使用多处理。</p><h2 id="956c" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">步骤 1:导入包</h2><p id="5429" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">首先，您应该导入几个包，因为我们稍后会用到它们。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="5b81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了快速概述，我们使用:</p><ul class=""><li id="df6a" class="mk ml iq jp b jq jr ju jv jy mm kc mn kg mo kk mp mq mr ms bi translated"><strong class="jp ir"> soundfile </strong>读取音频数据。</li><li id="248d" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir"> numpy </strong>处理数组中包含的音频数据。</li><li id="7b6d" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir"> matplotlib.pyplot </strong>显示音轨。</li><li id="5eb5" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir"> pydub </strong>播放音频文件。</li><li id="154a" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir"> time </strong>优化音轨的显示方式。</li><li id="26a3" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><strong class="jp ir">多重处理</strong>让两个进程同时运行。这里我们想在显示音轨的同时播放一个音频文件。</li></ul><h2 id="0018" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">步骤 2:准备音频数据</h2><p id="d52e" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">让我们准备音频数据，我们将使用可视化的音频。数据存储在两个包含表示气压变化的浮子的数组中。</p><p id="7ddf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">检索音频数据的采样率(<strong class="jp ir"> Fs </strong>)也很重要，它对应于每秒的样本数。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><h2 id="45c3" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">步骤 3:播放音频文件</h2><p id="c94e" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">这一步可能是最有挑战性的(开个玩笑)。您只需要定义一个两行函数来播放音频。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="be23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为什么要为此定义一个函数呢？嗯，在使用多处理时，这是一种分离不同进程的便捷方式。当你看到第五步时，这一点可能会变得更清楚。</p><h2 id="80f3" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">步骤 4:显示音轨</h2><p id="1753" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">这一次，这一步是真正最具挑战性的。您想要显示音轨，并按照您听到的音频进行播放。</p><p id="0474" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以挑战是:</p><ol class=""><li id="2831" class="mk ml iq jp b jq jr ju jv jy mm kc mn kg mo kk my mq mr ms bi translated">持续更新绘图。</li><li id="23af" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk my mq mr ms bi translated">适时更新剧情。</li></ol><p id="6228" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">显示音轨的代码如下所示:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="3233" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，该图每 2 秒更新一次。事实上，由于采样数量很大，绘制音频数据需要时间，因此我建议您首先以大于或等于 2 秒的周期更新图形。否则，可能会有一些滞后。</p><h2 id="5bdc" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">第五步:多重处理(最后一步)</h2><p id="190e" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">要在播放音频时可视化音频数据，需要让 Python 同时执行两项任务。因此我们将使用<strong class="jp ir">多重处理</strong>来同时运行两个进程。</p><p id="84d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是一个实现:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="ebbf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Python 脚本中需要“if __name__=="__main__ ":"行，以确保多处理正常工作，因此不应该省略它。</p><h2 id="150c" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">评论</h2><p id="2ad8" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">请注意，这里提供的实现非常简单，而且肯定可以改进。尤其是:</p><ul class=""><li id="c4fe" class="mk ml iq jp b jq jr ju jv jy mm kc mn kg mo kk mp mq mr ms bi translated">你可以想象让音轨可视化更吸引人的方法。</li><li id="c316" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated">该图仅每 2 秒更新一次，但您可能更喜欢定期更新。在这种情况下，您可以减少显示的音频数据中的样本数量，以便更快地显示图形。</li><li id="1e56" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated">在某些情况下，你仍然会面临滞后。(例如，如果情节全屏显示，那么你将有更多的机会面对滞后)</li><li id="4bf7" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated">此处没有提供暂停音频的功能。</li></ul><h2 id="bfe5" class="lf lg iq bd lh li lj dn lk ll lm dp ln jy lo lp lq kc lr ls lt kg lu lv lw lx bi translated">结论</h2><p id="1c71" class="pw-post-body-paragraph jn jo iq jp b jq ly js jt ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk ij bi translated">我在这里用 Python 给出了一个简单的音频可视化实现。您可能已经注意到了，也可能没有注意到，这里的一些代码可能对其他项目非常有用。通常，<strong class="jp ir">读取音频数据</strong>，或者<strong class="jp ir">更新图表</strong>，或者<strong class="jp ir">同时运行进程</strong>，这些都是复杂的事情，几乎不费吹灰之力就能完成。</p><p id="96f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这可能给你一些其他项目的想法！:)</p></div><div class="ab cl ky kz hu la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ij ik il im in"><p id="c1d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在下面找到对个人<a class="ae mz" href="https://github.com/jmpion/easy-audio-visualization" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> GithHub </strong>资源库</a>的访问，其中包含与本文相关的代码和音频文件:</p><div class="na nb gp gr nc nd"><a href="https://github.com/jmpion/easy-audio-visualization" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">GitHub-jmp ion/简易音频可视化</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">github.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr kw nd"/></div></div></a></div></div></div>    
</body>
</html>