<html>
<head>
<title>Helm 3.7 Changes To OCI Registry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">掌舵3.7更改OCI注册</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/helm-3-7-changes-to-oci-registry-16f2887e0704?source=collection_archive---------0-----------------------#2021-10-25">https://blog.devgenius.io/helm-3-7-changes-to-oci-registry-16f2887e0704?source=collection_archive---------0-----------------------#2021-10-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="529c" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">掌舵| OCI |注册表|变更日志| CI/CD |管道</h2><div class=""/><p id="21b0" class="pw-post-body-paragraph jw jx iq jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ij bi translated">我想通了——也许这能节省你的时间。</p><figure class="kv kw kx ky gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ku"><img src="../Images/d18d6cb46d753f64a6311391ac9f2027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KgJf1U1HBdrpGRRm0YlAKw.jpeg"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">照片由<a class="ae lk" href="https://unsplash.com/@syhussaini?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Syed Hussaini </a>在<a class="ae lk" href="https://unsplash.com/s/photos/helm?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><blockquote class="ll lm ln"><p id="5e74" class="jw jx lo jy b jz ka kb kc kd ke kf kg lp ki kj kk lq km kn ko lr kq kr ks kt ij bi translated">由于这不是一个“故事”，我将开门见山，不做过多解释。<br/>这都是基于使用<code class="fe ls lt lu lv b">HELM_EXPERIMENTAL_OCI=1</code></p></blockquote><h1 id="64db" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">将图表推送到注册表</h1><h2 id="7a28" class="mu lx iq bd ly mv mw dn mc mx my dp mg kh mz na mk kl nb nc mo kp nd ne ms iw bi translated">之前:(掌舵&lt; 3.7)</h2><pre class="kv kw kx ky gt nf lv ng nh aw ni bi"><span id="2a96" class="mu lx iq lv b gy nj nk l nl nm"># CHART_REPO_URL=my.registry.name:port<br/>echo "$REGISTRY_PASS" | helm registry login --username ${REGISTRY_USER} --password-stdin ${CHART_REPO_URL}</span><span id="96a0" class="mu lx iq lv b gy nn nk l nl nm">helm chart list<br/>version=$(grep "^version:" $name/Chart.yaml | cut -d: -f2 | tr -d " ")</span><span id="8098" class="mu lx iq lv b gy nn nk l nl nm">helm chart save $name ${CHART_REPO_URL}/$name<br/>helm chart push ${CHART_REPO_URL}/$name:$version</span></pre><h2 id="f23f" class="mu lx iq bd ly mv mw dn mc mx my dp mg kh mz na mk kl nb nc mo kp nd ne ms iw bi translated">After: (Helm ≥ 3.7)</h2><p id="3148" class="pw-post-body-paragraph jw jx iq jy b jz no kb kc kd np kf kg kh nq kj kk kl nr kn ko kp ns kr ks kt ij bi translated">Documentation still needs updating: <a class="ae lk" href="https://github.com/helm/helm-www/issues/1196" rel="noopener ugc nofollow" target="_blank">https://github.com/helm/helm-www/issues/1196</a></p><pre class="kv kw kx ky gt nf lv ng nh aw ni bi"><span id="7a89" class="mu lx iq lv b gy nj nk l nl nm"># CHART_REPO_URL=my.registry.name:port<br/>echo "$REGISTRY_PASS" | helm registry login --username ${REGISTRY_USER} --password-stdin ${CHART_REPO_URL}</span><span id="58e1" class="mu lx iq lv b gy nn nk l nl nm"># `helm chart list` no longer exists!<br/>version=$(grep "^version:" $name/Chart.yaml | cut -d: -f2 | tr -d " ")</span><span id="ab0c" class="mu lx iq lv b gy nn nk l nl nm">helm package $name<br/>helm push $name-$version.tgz oci://${CHART_REPO_URL}</span></pre></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="5e53" class="lw lx iq bd ly lz oa mb mc md ob mf mg mh oc mj mk ml od mn mo mp oe mr ms mt bi translated">从注册表中提取并解压缩图表</h1><h2 id="5ae7" class="mu lx iq bd ly mv mw dn mc mx my dp mg kh mz na mk kl nb nc mo kp nd ne ms iw bi translated">之前:</h2><pre class="kv kw kx ky gt nf lv ng nh aw ni bi"><span id="f688" class="mu lx iq lv b gy nj nk l nl nm"># CHART_REPO_URL=my.registry.name:port<br/>helm chart pull ${CHART_REPO_URL}/${CHART}:${CHART_VERSION}<br/>helm chart export ${CHART_REPO_URL}/${CHART}:${CHART_VERSION}</span></pre><h2 id="ce90" class="mu lx iq bd ly mv mw dn mc mx my dp mg kh mz na mk kl nb nc mo kp nd ne ms iw bi translated">之后:</h2><pre class="kv kw kx ky gt nf lv ng nh aw ni bi"><span id="39f9" class="mu lx iq lv b gy nj nk l nl nm"># CHART_REPO_URL=my.registry.name:port<br/>helm pull --untar oci://${CHART_REPO_URL}/${CHART} --version ${CHART_VERSION}</span></pre></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="62cc" class="lw lx iq bd ly lz oa mb mc md ob mf mg mh oc mj mk ml od mn mo mp oe mr ms mt bi translated">舵变更日志</h1><p id="5497" class="pw-post-body-paragraph jw jx iq jy b jz no kb kc kd np kf kg kh nq kj kk kl nr kn ko kp ns kr ks kt ij bi translated">已更改的舵命令:</p><ul class=""><li id="c19a" class="of og iq jy b jz ka kd ke kh oh kl oi kp oj kt ok ol om on bi translated"><code class="fe ls lt lu lv b">helm chart [export|list|remove]</code> —已移除</li><li id="e535" class="of og iq jy b jz oo kd op kh oq kl or kp os kt ok ol om on bi translated"><code class="fe ls lt lu lv b">helm chart [pull|push]</code> —变更为<code class="fe ls lt lu lv b">helm [pull|push]</code></li><li id="cea2" class="of og iq jy b jz oo kd op kh oq kl or kp os kt ok ol om on bi translated"><code class="fe ls lt lu lv b">helm chart save</code> —变更为<code class="fe ls lt lu lv b">helm package</code></li><li id="166d" class="of og iq jy b jz oo kd op kh oq kl or kp os kt ok ol om on bi translated">OCI注册表的网址需要以<code class="fe ls lt lu lv b">oci://</code>开头</li></ul><div class="ot ou gp gr ov ow"><a href="https://github.com/helm/helm/releases/tag/v3.7.0" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd ja gy z fp pb fr fs pc fu fw iz bi translated">释放舵3.7.0舵/舵</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">Helm v3.7.0是一个功能版本。鼓励用户升级以获得最佳体验。社区在不断发展…</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">github.com</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk le ow"/></div></div></a></div><h1 id="4768" class="lw lx iq bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">支持或关注我</h1><p id="83b5" class="pw-post-body-paragraph jw jx iq jy b jz no kb kc kd np kf kg kh nq kj kk kl nr kn ko kp ns kr ks kt ij bi translated">感谢阅读或鼓掌。如果你想让我继续，做更多或简单地表示你喜欢它，请考虑主演我的repos或关注我，这样我的贡献会得到更多的关注。</p><div class="ot ou gp gr ov ow"><a href="https://drpsychick.org/drpsychick-on-the-web-a9ccfb0df17e" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab fo"><div class="oy ab oz cl cj pa"><h2 class="bd ja gy z fp pb fr fs pc fu fw iz bi translated">网上心理咨询</h2><div class="pd l"><h3 class="bd b gy z fp pb fr fs pc fu fw dk translated">我所在的所有网站的一个简单的“登陆页”。</h3></div><div class="pe l"><p class="bd b dl z fp pb fr fs pc fu fw dk translated">drpsychick.org</p></div></div><div class="pf l"><div class="pl l ph pi pj pf pk le ow"/></div></div></a></div></div></div>    
</body>
</html>