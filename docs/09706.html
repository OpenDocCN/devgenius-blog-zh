<html>
<head>
<title>Promises in Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript 中的承诺</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/promises-in-javascript-2992d371938d?source=collection_archive---------5-----------------------#2022-09-06">https://blog.devgenius.io/promises-in-javascript-2992d371938d?source=collection_archive---------5-----------------------#2022-09-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b685fe7289ae131b2a20a695661d1e33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_jLMsU1kyQ2EZXFg7b7PQQ.png"/></div></div></figure><p id="8a5f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">关于 Javascript 中的承诺、承诺的概念、状态、方法和示例的介绍性文章。</p><h1 id="b7a6" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Javascript 中的异步</h1><p id="725b" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">Javascript 依靠非阻塞异步模型实现网络上的多种操作，处理用户交互，同时保持界面流畅。这就是为什么处理多个异步操作有时很难做到的原因。</p><p id="7f32" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">几年前处理异步最常见的方式是通过回调函数，但是随着 ES6 的开始，他们增加了额外的机制。</p><h1 id="17d5" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">承诺</h1><p id="a8d8" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">承诺是表示异步操作最终完成或失败的对象。在<strong class="jx io"> ECMAScript 2015 (ES6) </strong>中，这个新对象被添加到 Javascript 语言中，以更好地支持异步管理。</p><p id="c92d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">承诺的运作由两个主要机制组成:</p><ul class=""><li id="7e64" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated"><strong class="jx io">状态</strong>:承诺的内部属性，表示承诺可以采用的当前或未来的情况。</li><li id="ec18" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><strong class="jx io">控制器</strong>:它们是由承诺的状态触发的方法，用来捕获最终的流程和条件。</li></ul><h1 id="c3b1" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">承诺状态</h1><p id="6e68" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">承诺由以下三种状态组成:</p><ul class=""><li id="0679" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated"><strong class="jx io">待定</strong>:承诺执行时的初始状态。</li><li id="31b4" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><strong class="jx io">已完成(</strong>成功解析<strong class="jx io"> ) </strong>:表示异步操作成功完成的状态。</li><li id="d975" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><strong class="jx io">拒绝</strong>:表示异步运行失败的状态。</li></ul><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/4d6a380db2478e41c3970b9ee5b7279a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*ydK0FF-noHsMzMtnTTlDXQ.png"/></div></figure><h1 id="57f0" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">控制器</h1><ul class=""><li id="11ff" class="lw lx in jx b jy lr kc ls kg mp kk mq ko mr ks mb mc md me bi translated"><strong class="jx io"> Then </strong>:解决状态为“<em class="ms">履行”</em>的承诺时执行的方法。此方法接收流连续性的执行回调。</li><li id="a4c2" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><strong class="jx io"> Catch </strong>:拒绝状态为“<em class="ms">Rejected”</em>的承诺时执行的方法。此方法接收一个因错误而执行的回调。</li></ul><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/bbf38dbe3e15e13bb4d46ad261d349fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0xv_E34lF_dvwL_nbuTvaQ.png"/></div></div></figure><h1 id="b3eb" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">用 Javascript 实现承诺</h1><p id="f380" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">接下来，我们将创建一个承诺，在内部我们将通过 setTimeout 方法模拟对 API 的调用(这是为了模拟异步调用)。</p><pre class="ml mm mn mo gt mu mv mw mx aw my bi"><span id="a269" class="mz ku in mv b gy na nb l nc nd"><strong class="mv io">const</strong> fetchPokemon <strong class="mv io">=</strong> (name) <strong class="mv io">=&gt;</strong> <strong class="mv io">new</strong> Promise((resolve, reject) <strong class="mv io">=&gt;</strong> {</span><span id="51d1" class="mz ku in mv b gy ne nb l nc nd">setTimeout(() <strong class="mv io">=&gt;</strong> {  <br/>    <strong class="mv io">const</strong> pokemon <strong class="mv io">=</strong> ["Pikachu"];<br/>    <strong class="mv io">const</strong> search <strong class="mv io">=</strong> pokemon.find((poke) <strong class="mv io">=&gt;</strong> poke <strong class="mv io">===</strong> name);<br/>    <strong class="mv io">if</strong>(search){<br/>      resolve("Resolve: Pokemon encountered")<br/>    }<br/>    reject("Reject: Pokemon not found");<br/>  }, 2000);</span><span id="57da" class="mz ku in mv b gy ne nb l nc nd">});</span></pre><p id="7315" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的代码中:</p><ul class=""><li id="6eb6" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated">异步操作将负责在数组中按名称查找神奇宝贝。</li><li id="dfe4" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">如果神奇宝贝存在，则执行由<code class="fe nf ng nh mv b">then</code>捕获的<code class="fe nf ng nh mv b">resolve</code>状态。</li><li id="d4d9" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">如果神奇宝贝不存在，则执行由<code class="fe nf ng nh mv b">catch</code>捕获的<code class="fe nf ng nh mv b">reject</code>状态。</li></ul><pre class="ml mm mn mo gt mu mv mw mx aw my bi"><span id="d42e" class="mz ku in mv b gy na nb l nc nd">fetchPokemon("Pikachu")<br/>  .then(response <strong class="mv io">=&gt;</strong> console.log(response))<br/>  .<strong class="mv io">catch</strong>(error <strong class="mv io">=&gt;</strong> console.log(error));</span><span id="ac17" class="mz ku in mv b gy ne nb l nc nd">// Resolve: The Pokemon Pikachu is found</span><span id="42bd" class="mz ku in mv b gy ne nb l nc nd">fetchPokemon("Bulbasaur")<br/>  .then(response <strong class="mv io">=&gt;</strong> console.log(response))<br/>  .<strong class="mv io">catch</strong>(error <strong class="mv io">=&gt;</strong> console.log(error));</span><span id="a788" class="mz ku in mv b gy ne nb l nc nd">// Reject: The Pokemon Bulbasaur is not found</span></pre><h1 id="5489" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">完整代码</h1><figure class="ml mm mn mo gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h1 id="08b1" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结局</h1><p id="19a4" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">承诺是为了更好地处理 Javascript 中的异步操作，增加对这些操作的更好控制和跟踪。许多浏览器 API 都是建立在承诺之上的，其中最著名的是<strong class="jx io"> fetch() </strong>。强调承诺可以与其他语言功能如<strong class="jx io"> Async/Await </strong>完美结合，以提高他们的阅读和顺序。</p></div><div class="ab cl nk nl hr nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ig ih ii ij ik"><p id="3cd1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢你远道而来，如果你觉得这很有用，别忘了鼓掌👏。订阅以接收更多内容🔔。</p><p id="532c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你需要额外的帮助，请联系我🤠。</p><ul class=""><li id="60b4" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated">✉️ <a class="ae nr" href="mailto:dcortes.net@gmail.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">给我发邮件</strong> </a></li><li id="323a" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">🤝<a class="ae nr" href="https://www.linkedin.com/in/dcortesnet/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">在 LinkedIn 上联系我</strong> </a></li><li id="cbe1" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">📮<a class="ae nr" href="https://twitter.com/dcortes_net" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">在 Twitter 上联系我</strong> </a></li></ul><p id="3336" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">非常感谢您的阅读，我感谢您的时间。</p></div></div>    
</body>
</html>