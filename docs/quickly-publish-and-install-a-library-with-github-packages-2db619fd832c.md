# ä½¿ç”¨ GitHub åŒ…å¿«é€Ÿå‘å¸ƒå’Œå®‰è£…åº“

> åŸæ–‡ï¼š<https://blog.devgenius.io/quickly-publish-and-install-a-library-with-github-packages-2db619fd832c?source=collection_archive---------12----------------------->

![](img/b7539eb6fa20c89525c09f06d384078d.png)

# ä»‹ç»

Github é™„å¸¦äº†ä¸€äº›éå¸¸æœ‰ç”¨çš„å†…ç½®ç‰¹æ€§ï¼Œæ¯”å¦‚åˆ›å»ºè‡ªå·±çš„åŒ…çš„èƒ½åŠ›ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•è®¾ç½® Github åŒ…åº“ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç®€å•çš„ React é’©å­ï¼Œå‘å¸ƒå®ƒï¼Œç„¶åå®‰è£…åˆ°å¦ä¸€ä¸ªé¡¹ç›®ä¸­ã€‚

å…è´£å£°æ˜:æœ¬æ•™ç¨‹å‡è®¾ React çš„ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼

# ä»€ä¹ˆæ˜¯åŒ…ï¼Ÿ

ä¸€ä¸ª**åŒ…**æ˜¯ä¸€ä¸ªç§æœ‰æˆ–å…¬å…±å¯ç”¨çš„æ–‡ä»¶æˆ–ä»£ç ç›®å½•ã€‚é€šå¸¸ï¼Œè¿™äº›æ–‡ä»¶ä¼šä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºå¢åŠ åŠŸèƒ½ã€‚

ä¾‹å¦‚ï¼Œä¸–ç•Œä¸Šæœ€å—æ¬¢è¿çš„è½¯ä»¶åŒ…ä¹‹ä¸€æ˜¯ [lodash](https://lodash.com/) ï¼Œå®ƒæ˜¯ä¸€ä¸ªâ€œæä¾›æ¨¡å—åŒ–ã€é«˜æ€§èƒ½ã€& extras çš„ JavaScript å®ç”¨ç¨‹åºåº“â€ï¼Œå³æœ€å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå®ƒæä¾›çš„åŠŸèƒ½ä½¿æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´åŠ è½»æ¾ã€‚

åœ¨æœ¬åœ°å®‰è£…æ—¶ï¼Œè¿™äº›åŒ…é€šå¸¸ä½äºåä¸º **node_modules** çš„æ–‡ä»¶å¤¹ä¸­ã€‚*æ˜¯çš„ï¼Œé‚£ä¸ªé‡è¾¾ä¸€å¨çš„æ–‡ä»¶å¤¹ï¼Œåƒä¸‡ä¸è¦æäº¤ç»™ Github åº“ã€‚*

# å¥½å§ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ GitHub åŒ…å‘¢ï¼Ÿ

GitHub Packages å…è®¸æˆ‘ä»¬ç›´æ¥æ‰˜ç®¡è‡ªå·±åˆ›å»ºçš„åŒ…ã€‚è¿™å¸¦æ¥äº†ä¸€å¤§å †åŠŸèƒ½ï¼Œå› ä¸ºå®ƒä¸ GitHub ç”Ÿæ€ç³»ç»Ÿç´§å¯†ç›¸è¿ï¼Œæ¯”å¦‚ä¸ GitHub APIsã€GitHub Actions å’Œ webhooks çš„é›†æˆã€‚

æˆ‘ä»¬å°†æŠŠ React ç»„ä»¶åº“åˆ›å»ºä¸ºä¸€ä¸ªåŒ…ï¼Œæ‰˜ç®¡åœ¨ Github åŒ…ä¸­ã€‚

# GitHub åŒ…è®¾ç½®

é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç»§ç»­åˆ›å»ºä¸€ä¸ªæ–°çš„å­˜å‚¨åº“ã€‚GitHub å·²ç»åŒ…å«äº†è¿™æ ·åšçš„å®Œæ•´æŒ‡å—ã€‚[é“¾æ¥æ­¤å¤„](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-new-repository)ã€‚å¯¹äºä¸Šä¸‹æ–‡æ¥è¯´ï¼Œ[è¿™ä¸ª](https://docs.github.com/en/packages/quickstart)ä¹Ÿæ˜¯ GitHub å…³äºè®¾ç½®è½¯ä»¶åŒ…ä»“åº“çš„å®˜æ–¹æŒ‡å—ã€‚

![](img/a3c9d7b51357cac3a89d684c8022241d.png)

è¿™æ ·ä¸€æ¥ï¼Œè®©æˆ‘ä»¬æ‰“å¼€ Visual Studio ä»£ç æˆ–æ‚¨é€‰æ‹©çš„ IDEï¼Œå¹¶åœ¨æœ¬åœ°å…‹éš†å®ƒã€‚åœ¨å›è´­ç‚¹å‡»ä»£ç ï¼Œå¹¶æŠ“ä½å…‹éš†é“¾æ¥ã€‚

![](img/2d47511c061dedc019cf69d441b2b902.png)

å¹¶å…‹éš†åˆ°æˆ‘ä»¬çš„æœ¬åœ°æœºå™¨ä¸Šã€‚

![](img/09e0e07e0d1d758e429f70021c444b25.png)

å¤ªæ£’äº†ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆå§‹åŒ– npm æ¥ç”Ÿæˆæˆ‘ä»¬çš„ package.json

ä¼šé—®ä½ å‡ ä¸ªå…³äºæ–°å¥—é¤çš„é—®é¢˜ã€‚è¯·è®°ä½å°†åç§°ä¿ç•™ä¸º:

```
@YOUR-USERNAME/YOUR-REPOSITORY 
... 
test command: exit 0 
...
```

![](img/1019d5e7a5e9c1a7b9368b78a98e7687.png)

è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
npm install 
git add . 
git commit -m "initialize npm package" 
git push
```

# æ„å»º React æŒ‚é’©

æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„ React åŒ…ã€‚æ­£å¦‚ä½ å¯èƒ½å·²ç»çœ‹åˆ°çš„ï¼Œæˆ‘æŠŠæˆ‘çš„åŒ…å‘½åä¸º`useless-hooks`ã€‚æ‰€ä»¥æˆ‘åŠ ä¸€ä¸ªé€šç”¨çš„æ— ç”¨é’©å­ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒuseKonamiCode åªæ˜¯ä¸ºç”¨æˆ·è¾“å…¥æ·»åŠ äº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚å¦‚æœç”¨æˆ·è¿ç»­è¾“å…¥ç‰¹å®šçš„ç»„åˆé”®ï¼Œå°±ä¼šè§¦å‘å›è°ƒã€‚

è¿™é‡Œçš„è¦ç‚¹æ˜¯åˆ›å»ºæ‚¨çš„é’©å­å¹¶å°†å…¶æ”¾åœ¨`src`æ–‡ä»¶å¤¹ä¸­:

![](img/df11baf5951ab6b1344b8b9bf7575592.png)

# åœ¨ Github åŒ…ä¸­å‘å¸ƒ

æˆ‘ä»¬å°†ä½¿ç”¨ GitHub åŠ¨ä½œæ¥ç¡®ä¿æˆ‘ä»¬å¯ä»¥å‘å¸ƒæˆ‘ä»¬çš„åŒ…ã€‚è¿™ç¯‡æ–‡ç« ä¸ä¼šæ·±å…¥è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘ç¡®å®æœ‰ä¸€äº›åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½çš„æ–¹æ³•ã€‚

é‡è¦çš„æ˜¯è¦çŸ¥é“ GitHub ä¼šæ£€æŸ¥ä½ çš„åº“æ˜¯å¦åœ¨ä½ çš„æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ª`.github`æ–‡ä»¶å¤¹å’Œä¸€ä¸ª`workflows`å­æ–‡ä»¶å¤¹ã€‚

# ä»€ä¹ˆæ˜¯ YAMLï¼Ÿ

è¿™é‡Œæœ‰ä¸€ä¸ªç›´æ¥æ¥è‡ªä»–ä»¬ç½‘ç«™çš„å®šä¹‰:

> å¯¹äºæ‰€æœ‰ç¼–ç¨‹è¯­è¨€æ¥è¯´ï¼ŒYAML æ˜¯ä¸€ç§å¯¹äººç±»å‹å¥½çš„æ•°æ®åºåˆ—åŒ–è¯­è¨€
> 
> [*https://yaml.org/*](https://yaml.org/)

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯æ¬¡æˆ‘ä»¬åœ¨ GitHub ä¸­åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬ï¼Œå®ƒéƒ½ä¼šæŒ‰ç…§æ–‡ä»¶ä¸­çš„å·¥ä½œæµç¨‹ä¸ºæˆ‘ä»¬å‘å¸ƒè¿™ä¸ªåŒ…ã€‚

åœ¨ç›®å½•çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä»¥ä¸‹æ–‡ä»¶å¤¹å’Œæ–‡ä»¶:

![](img/5421089327b1c8a7382d16c650d65af2.png)

å¹¶åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œ:

![](img/1c4f04ca33664e99dc181f910fb9f04a.png)

# å°†å®ƒè¿æ¥åˆ° npm

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`.npmrc`æ–‡ä»¶å¹¶æ·»åŠ ä¸‹é¢ä¸€è¡Œ(å¹¶ç”¨æ‚¨çš„ GitHub ç”¨æˆ·åæ›¿æ¢æ‚¨çš„-USERNAME:

```
@YOUR-USERNAME:registry=https://npm.pkg.github.com
```

æˆ–è€…åœ¨ package.json ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®

```
"publishConfig": { 
    "registry": "https://npm.pkg.github.com" 
},
```

æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å°†æŠŠæˆ‘ä»¬æ‰€æœ‰çš„æ›´æ”¹æ¨é€åˆ°å­˜å‚¨åº“:

```
git add . 
git commit -m "workflow to publish package" 
git push
```

# åˆ›å»ºç‰ˆæœ¬

åœ¨ GitHub ä¸Šåˆ›å»º release head åˆ°ä½ çš„ repoï¼Œåœ¨å³è¾¹ä½ ä¼šçœ‹åˆ°ä¸€ä¸ª **Releases** éƒ¨åˆ†ã€‚ç»§ç»­åˆ›å»ºä¸€ä¸ªæ–°ç‰ˆæœ¬ã€‚

![](img/557c0948a433596a009fae8be0d2a48a.png)

ä¹‹åï¼Œåœ¨æ–°å±å¹•ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ·»åŠ æ ‡ç­¾ã€æ ‡é¢˜å’Œæè¿°æ¥åˆ›å»ºå‘å¸ƒï¼Œç„¶åç‚¹å‡» **Publish Releaseã€‚**

![](img/e53044eef68d56bf31d6e20c9d22a1b3.png)

ç°åœ¨ï¼Œåœ¨ GitHub Actions é€‰é¡¹å¡ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°æˆ‘ä»¬çš„å·¥ä½œæµæ­£åœ¨è¿è¡Œï¼(*ä½ å¯èƒ½ä¼šçœ‹åˆ°ç‰ˆæœ¬ä¸º 1.0.1ï¼Œæˆ‘å¿˜äº†ä¸Šä¼  YAML æ–‡ä»¶çš„ä»»ä½•å†…å®¹â€¦*ğŸ˜…)

![](img/1b3c61f40d106aa97ed61e49c5bed25b.png)

æˆåŠŸï¼

![](img/943e911c4df3c77e326c5d0b5bc40711.png)

# å®‰è£… GitHub è½¯ä»¶åŒ…åº“

å‡ºäºç¤ºä¾‹ç›®çš„ï¼Œæˆ‘å°†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¼•å¯¼ä¸€ä¸ªåº”ç”¨ç¨‹åº:

```
npx create-react-app my-app 
cd my-app
```

é€šå¸¸ï¼Œæˆ‘å¯ä»¥ç›´æ¥ä½¿ç”¨`npm install useless-hooks`ï¼Œä½†æ˜¯é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»å°†æˆ‘ä»¬çš„åº”ç”¨æŒ‡å‘ GitHub åŒ…ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»å¯¹ GitHub åŒ…è¿›è¡Œè®¤è¯ã€‚æˆ‘å°†æŠŠè¿™ä¸ªæŒ‡å—æ”¾åœ¨è¿™é‡Œï¼Œç”± GitHub è‡ªå·±åˆ¶ä½œ:[é“¾æ¥](https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-npm-registry#authenticating-to-github-packages)

åœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`.npmrc`æ–‡ä»¶ã€‚

![](img/87d10893cfda7914102c2619bef1f45c.png)

ç”¨æ‚¨çš„ GitHub ç”¨æˆ·åæˆ–æ‚¨ç”¨æ¥åˆ›å»ºåŒ…çš„ç”¨æˆ·åæ›¿æ¢@diballesterosã€‚

åœ¨æˆ‘ä»¬çš„ package.json ä¸­ï¼Œæˆ‘ä»¬å°†åŒ…å«æ–°çš„ä¾èµ–é¡¹:

```
"dependencies": { 
    ...other dependencies, 
    "@diballesteros/useless-hooks": "^1.0.1" 
}
```

å¹¶è¿è¡Œ:

```
npm install
```

# ä½¿ç”¨ GitHub åŒ…åº“

ç»ˆäºå¯ä»¥ç”¨æˆ‘ä»¬çš„åŒ…äº†ï¼

åœ¨æˆ‘ä»¬çš„ App.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åƒå¯¼å…¥ä»»ä½•å…¶ä»–åº“ä¸€æ ·å¯¼å…¥å®ƒ:

![](img/18799190b3af783a0a2cabcf8e7cb1cf.png)

# ç»“è®º

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°åº“ã€‚æœ‰æ¯”è¿™ç¯‡æ–‡ç« æ›´å¤šçš„å‘å¸ƒï¼Œå› ä¸ºæˆ‘åœ¨è®¤è¯æ—¶é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚

å¦‚æœä½ å¯¹ GitHub åŒ…æœ‰ä»»ä½•å…¶ä»–çš„å»ºè®®ï¼Œè¯·åœ¨ä¸‹é¢çš„è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚

æ›´å¤šå†…å®¹è¯·ç‚¹å‡»[ç›¸å…³ä»£ç ](https://relatablecode.com)

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªï¼Œè¯·éšæ—¶åœ¨ [LinkedIn](https://www.linkedin.com/in/relatablecode) æˆ– [Twitter](https://twitter.com/relatablecoder) ä¸Šä¸æˆ‘è”ç³»

åœ¨æˆ‘çš„[æ—¶äº‹é€šè®¯](https://relatablecode.substack.com/)ä¸­æŸ¥çœ‹æˆ‘çš„å…è´¹å¼€å‘è€…è·¯çº¿å›¾å’Œæ¯å‘¨ç§‘æŠ€è¡Œä¸šæ–°é—»ã€‚

*åŸè½½äº 2022 å¹´ 4 æœˆ 4 æ—¥ https://relatablecode.com*[](https://relatablecode.com/quickly-publish-and-install-a-library-with-github-packages/)**ã€‚**