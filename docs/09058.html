<html>
<head>
<title>Heads up! Quarto is here to stay. Immediately combine R &amp; Python in your next document: An extension on a recent post.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">抬头！四开在这里停留。在你的下一篇文档中立即结合 R &amp; Python:对最近一篇文章的扩展。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/heads-up-quarto-is-here-to-stay-aa861ef87491?source=collection_archive---------5-----------------------#2022-07-27">https://blog.devgenius.io/heads-up-quarto-is-here-to-stay-aa861ef87491?source=collection_archive---------5-----------------------#2022-07-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="96c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个帖子也可以在 ds-econ.com 上找到。T29】</p><p id="f889" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在最近的一篇文章中，<a class="ae ki" href="https://www.ds-econ.com/write-your-whole-paper-in-r-it-is-better/" rel="noopener ugc nofollow" target="_blank">我展示了我用 R </a>写学术论文的设置。今天，我们通过<code class="fe kk kl km kn b">Python</code>和其他语言扩展这个设置。</p><p id="f6c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们看两个选项:第一个，是使用<code class="fe kk kl km kn b">R Markdown</code>的<code class="fe kk kl km kn b">reticulate</code>包，第二个选项是移动到<code class="fe kk kl km kn b">Quarto</code>。</p><p id="2e2d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe kk kl km kn b">Quarto</code>是同一<a class="ae ki" href="https://quarto.org/docs/faq/" rel="noopener ugc nofollow" target="_blank">核心开发者</a>对<code class="fe kk kl km kn b">R Markdown</code>的概括。这个框架允许你将<code class="fe kk kl km kn b">R</code>、<code class="fe kk kl km kn b">Python</code>、<code class="fe kk kl km kn b">Julia</code>和<code class="fe kk kl km kn b">OJS</code>与代码的输出和你的写作编织在一起。</p><h1 id="dd15" class="ko kp in bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">R Markdown 中的 Python 使用<code class="fe kk kl km kn b">reticulate</code>包</h1><p id="d816" class="pw-post-body-paragraph jk jl in jm b jn lm jp jq jr ln jt ju jv lo jx jy jz lp kb kc kd lq kf kg kh ig bi translated"><code class="fe kk kl km kn b"><a class="ae ki" href="https://rstudio.github.io/reticulate/" rel="noopener ugc nofollow" target="_blank">reticulate</a></code>包装<code class="fe kk kl km kn b">R</code>和<code class="fe kk kl km kn b">Python</code>之间的中间产品。</p><p id="631a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">除了编写包含两种语言的混合脚本，它还允许你在<code class="fe kk kl km kn b">R Markdown</code>中使用<code class="fe kk kl km kn b">Python</code>代码块。</p><p id="b19b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此，您需要加载<code class="fe kk kl km kn b">reticulate</code>，并在您的<code class="fe kk kl km kn b">r setup</code>代码块中设置您的<code class="fe kk kl km kn b">Python</code>解释器。</p><p id="5a4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在你可以像使用<code class="fe kk kl km kn b">R</code>代码一样使用<code class="fe kk kl km kn b">Python</code>:你只需要将块的标签从<code class="fe kk kl km kn b">r</code>改为<code class="fe kk kl km kn b">python</code>。甚至像<code class="fe kk kl km kn b">echo</code>或<code class="fe kk kl km kn b">warnings</code>这样的块选项仍然可以像预期的那样工作。</p><p id="8f7b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您想简单地通过偶尔的代码块扩展您当前的工作流，这是一个很好的选择。</p><h1 id="ef46" class="ko kp in bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">通过转换到 Quarto 来拥抱混合文档</h1><p id="333e" class="pw-post-body-paragraph jk jl in jm b jn lm jp jq jr ln jt ju jv lo jx jy jz lp kb kc kd lq kf kg kh ig bi translated"><code class="fe kk kl km kn b">Quarto</code><strong class="jm io"/><strong class="jm io">能从一个普通<em class="kj">生成任何东西</em></strong>。docx 或<em class="kj">。pdf </em>，来个全互动网站。它可以编译降价文件(<em class="kj">)。qmd </em>)，引擎也将<em class="kj"> Jupyter 笔记本</em>渲染成文档。你可以在 quarto.org 找到例子和大量的文档。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lr"><img src="../Images/de7a8f2447fdb3ac6c2616dec6d2e3ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xkjbXvcqFVmQY_jW.png"/></div></div></figure><h1 id="b968" class="ko kp in bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">我喜欢 R Markdown——为什么我要换成 Quarto？</h1><p id="43f2" class="pw-post-body-paragraph jk jl in jm b jn lm jp jq jr ln jt ju jv lo jx jy jz lp kb kc kd lq kf kg kh ig bi translated">首先，切换成本<em class="kj">低</em>:只有语法上的微小差异，工作流程是一样的。<strong class="jm io">知道</strong> <code class="fe kk kl km kn b"><strong class="jm io">R Markdown</strong></code> <strong class="jm io">就基本知道</strong> <code class="fe kk kl km kn b"><strong class="jm io">Quarto</strong></code> <strong class="jm io">。</strong></p><p id="d9fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然而，<code class="fe kk kl km kn b">Quarto</code>是一个更“通用”的框架，因为它不太特定于<code class="fe kk kl km kn b">R</code>:它与其他编程语言的集成是自然的，并且它没有一个“最喜欢的”IDE。<code class="fe kk kl km kn b">Quarto</code>在<em class="kj"> Jupyter </em>、<em class="kj"> R Studio </em>，或者<a class="ae ki" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> <em class="kj"> VS Code </em> </a> <em class="kj">中很容易上手。</em></p><p id="9a38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe kk kl km kn b"><strong class="jm io">Quarto</strong></code> <strong class="jm io">还可以将<em class="kj"> Jupyter 笔记本</em>渲染成完整的文档</strong>，使其成为<code class="fe kk kl km kn b">R</code> <em class="kj">和</em> <code class="fe kk kl km kn b">Python</code>社区之间的中介。</p><h1 id="69c3" class="ko kp in bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">在 VS 代码中设置 Quarto</h1><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi md"><img src="../Images/0f60d60eaa9d521d9d6f22e52cbb7843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zhVpj7-U1xZfHn26.png"/></div></div></figure><p id="9f51" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我开始使用 VS 代码，因为我想要一个可以用于任何编码项目的 IDE。</p><p id="e3fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我对 VS 代码进行了全新的安装，只从<code class="fe kk kl km kn b">R Extension</code>、<code class="fe kk kl km kn b">Python Extension</code>和<code class="fe kk kl km kn b">Quarto Extension</code>开始。</p><p id="0617" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> VS 代码的</strong> <code class="fe kk kl km kn b"><strong class="jm io">Quarto Extension</strong></code> <strong class="jm io">让使用</strong> <code class="fe kk kl km kn b"><strong class="jm io">Quarto</strong></code> <strong class="jm io">工作变得毫不费力。有块选项的代码建议，文档预览，等等。</strong></p><p id="5035" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">起初，我以为<code class="fe kk kl km kn b">Quarto</code>会为不同的编码语言使用不同的解释器，但事实上<strong class="jm io">利用了现有的引擎</strong>，可以将<code class="fe kk kl km kn b">R</code>和<code class="fe kk kl km kn b">Python</code>结合起来。标准设置是，<code class="fe kk kl km kn b">Quarto</code>对<code class="fe kk kl km kn b">.qmd</code>文件使用<code class="fe kk kl km kn b">knitr</code> + <code class="fe kk kl km kn b">reticulate</code>，对<em class="kj">笔记本使用<code class="fe kk kl km kn b">R kernel</code></em>。</p><p id="0fc3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意这些默认值，以防您在使用这些引擎时遇到问题。简单地将文档的 YAML 中的<code class="fe kk kl km kn b">engine: knitr</code>改为<code class="fe kk kl km kn b">engine: jupyter</code>可能会创造奇迹。点击阅读更多关于引擎绑定选项<a class="ae ki" href="https://quarto.org/docs/computations/execution-options.html#engine-binding" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><h1 id="6d40" class="ko kp in bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">M1 Mac 用户:确保 R 和 Python 使用 arm64</h1><p id="be2d" class="pw-post-body-paragraph jk jl in jm b jn lm jp jq jr ln jt ju jv lo jx jy jz lp kb kc kd lq kf kg kh ig bi translated"><strong class="jm io">M1 苹果电脑的用户请注意</strong> : <a class="ae ki" href="https://github.com/rstudio/reticulate/issues/1019" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">当你在同一个脚本中使用不同的语言时，你可能会遇到麻烦！</strong> </a></p><p id="84a2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果一个解释器(例如<code class="fe kk kl km kn b">R</code>解释器)将您的 CPU 识别为一个<em class="kj"> arm64 </em>芯片，而您的<code class="fe kk kl km kn b">Python</code>会话将它作为一个标准的<em class="kj"> x64 </em>芯片来处理，就会发生这个问题。</p><p id="9293" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不出所料，这会导致冲突，因为同一台计算机上的两个解释器假设他们使用的是不同类型的 CPU。</p><p id="f436" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">重要的是，你的</strong> <code class="fe kk kl km kn b"><strong class="jm io">R</strong></code> <strong class="jm io">和你的</strong> <code class="fe kk kl km kn b"><strong class="jm io">Python</strong></code> <strong class="jm io">都采用同一类型的处理器。</strong>因此，要么让<em class="kj">的两个</em>解释器都采用标准的英特尔芯片(<em class="kj"> x64 </em>)，要么将两者都设置为 M1 芯片(<em class="kj"> arm64 </em>)。</p><p id="89a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你通过<code class="fe kk kl km kn b">reticulate</code>安装<code class="fe kk kl km kn b">miniconda</code>应该没问题，因为如果你的<code class="fe kk kl km kn b">R</code>在<em class="kj"> arm64 </em>上运行，它会得到一个<em class="kj">arm 64</em>T16，否则会得到一个<em class="kj"> x64 </em>版本。这对于设置很重要，因为当使用<code class="fe kk kl km kn b">knitr</code>引擎时<code class="fe kk kl km kn b">Quarto</code>在后台调用<code class="fe kk kl km kn b">reticulate</code>。</p><p id="0edc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，这是一个全新的环境，您还需要安装带有<code class="fe kk kl km kn b">reticulate</code>的<code class="fe kk kl km kn b">Python</code>模块。</p><p id="b9a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然默认情况下<code class="fe kk kl km kn b">reticulate</code>应该使用这个<code class="fe kk kl km kn b">Python</code>解释器，但是显式定义你的解释器并没有坏处。</p></div><div class="ab cl me mf hr mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ig ih ii ij ik"><h1 id="4d90" class="ko kp in bd kq kr ml kt ku kv mm kx ky kz mn lb lc ld mo lf lg lh mp lj lk ll bi translated">你读到这里了吗？—祝贺你🎉</h1><p id="46bf" class="pw-post-body-paragraph jk jl in jm b jn lm jp jq jr ln jt ju jv lo jx jy jz lp kb kc kd lq kf kg kh ig bi translated"><strong class="jm io">🔓授予</strong>到<a class="ae ki" href="https://www.ds-econ.com/#/portal/signup/free" rel="noopener ugc nofollow" target="_blank">的访问权限，加入</a> <code class="fe kk kl km kn b"><a class="ae ki" href="https://www.ds-econ.com/#/portal/signup/free" rel="noopener ugc nofollow" target="_blank">get_update()</a></code> <a class="ae ki" href="https://www.ds-econ.com/#/portal/signup/free" rel="noopener ugc nofollow" target="_blank">邮件列表！</a></p></div></div>    
</body>
</html>