<html>
<head>
<title>How to divide webpack into development and production</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将 webpack 分为开发和生产</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-divide-webpack-into-development-and-production-8d1027b03666?source=collection_archive---------1-----------------------#2022-01-13">https://blog.devgenius.io/how-to-divide-webpack-into-development-and-production-8d1027b03666?source=collection_archive---------1-----------------------#2022-01-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/309bf4df203e5be5f9c6d5f433057e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*GnLQHDnuK6NxUPvU00_zMw.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">图片来自<a class="ae jv" href="https://en.wikipedia.org/wiki/Webpack" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Webpack</a></figcaption></figure><p id="17c8" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io">目的</strong></p><p id="f448" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">我将 webpack.file 分成两部分(开发和生产，因为它更智能)，因此我将分享这些知识。</p><p id="6aca" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io">步骤</strong></p><ol class=""><li id="6c57" class="ku kv in jy b jz ka kd ke kh kw kl kx kp ky kt kz la lb lc bi translated">在 package.json 的依赖项中安装 webpack-merge(命令行中的“NPM install web pack-merge—save-dev ”)</li></ol><p id="b0e7" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">2.创建 3 个文件 webpack.common.js、webpack.prod.js 和 webpack.dev.js(文件名由你决定)而不是 webpack.config.js。</p><p id="e28f" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">3.像下面这样写 3 个文件。Webpack.merge 用于合并用于开发和生产的 Webpack 通用文件。</p><p id="1483" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">第一个文件</p><pre class="ld le lf lg gt lh li lj lk aw ll bi"><span id="97f3" class="lm ln in li b gy lo lp l lq lr">webpack.common.js</span><span id="806d" class="lm ln in li b gy ls lp l lq lr">NOTICE: almost all webpack.config is here.</span><span id="4c26" class="lm ln in li b gy ls lp l lq lr">const path = require("path");<br/>module.exports = {<br/>  entry: "./src/app.tsx",<br/>  output: {<br/>    path: path.join(__dirname, "public", "dist"),<br/>    filename: "bundle.js",<br/>  },<br/>  performance: {<br/>    hints: false,<br/>    maxEntrypointSize: 512000,<br/>    maxAssetSize: 512000,<br/>  },<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.tsx?$/,<br/>        loader: "ts-loader",<br/>        exclude: /node_modules/,<br/>        options: {<br/>          configFile: path.resolve(__dirname, "./ts.config.json"),<br/>        },<br/>      },<br/>      {<br/>        test: /\.svg$/,<br/>        use: [<br/>          {<br/>            loader: "svg-url-loader",<br/>            options: {<br/>              limit: 10000,<br/>            },<br/>          },<br/>        ],<br/>      },<br/>      {<br/>        test: /\.s?css$/,<br/>        use: ["style-loader", "css-loader", "sass-loader"],<br/>      },<br/>    ],<br/>  },<br/>  resolve: {<br/>    modules: ["node_modules"],<br/>    extensions: [".ts", ".tsx", ".js", "jsx", "json"],<br/>  },<br/>  target: ["web", "es5"],<br/>};</span></pre><p id="8d8c" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">第二个文件</p><pre class="ld le lf lg gt lh li lj lk aw ll bi"><span id="bda5" class="lm ln in li b gy lo lp l lq lr">webpack.dev.js</span><span id="3337" class="lm ln in li b gy ls lp l lq lr">const path = require("path");<br/>const { merge } = require("webpack-merge");<br/>const common = require("./webpack.common.js");<br/>module.exports = merge(common, {<br/>  mode: "development",<br/>  devtool: "cheap-source-map",<br/>  devServer: {<br/>    static: {<br/>      directory: path.join(__dirname, "public"),<br/>    },<br/>    historyApiFallback: true,<br/>  },<br/>});</span></pre><p id="89e0" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">第三个文件</p><pre class="ld le lf lg gt lh li lj lk aw ll bi"><span id="1d9c" class="lm ln in li b gy lo lp l lq lr">webpack.prod.js</span><span id="2ee3" class="lm ln in li b gy ls lp l lq lr">//NOTICE: you can write much simpler webpack file for production before separating because production file doesn’t need “devtool” and “devServer”.</span><span id="a7f5" class="lm ln in li b gy ls lp l lq lr">const { merge } = require("webpack-merge");<br/>const common = require("./webpack.common.js");<br/>module.exports = merge(common, {<br/>  mode: "production",<br/>});</span></pre><p id="796c" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">4.在包 json 的脚本中添加带有— config 的独立文件。</p><pre class="ld le lf lg gt lh li lj lk aw ll bi"><span id="bd2e" class="lm ln in li b gy lo lp l lq lr">"scripts": {<br/>    "build": "webpack --config webpack.prod.js",<br/>    "start": "webpack-dev-server --hot --config webpack.dev.js"<br/>  },<br/>* you don't need to have --hot in scripts.</span></pre><p id="6f6b" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">5.完成了。正如我所写的，您可以为生产编写一个简单得多的文件。</p><p id="f2ec" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io">结论</strong></p><p id="5579" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">如果你把文件分开，会多花一点时间。然而，这对于通过省略仅使用开发环境来为生产创建更快的应用程序是有用的。</p><p id="2053" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io">参考</strong></p><p id="60a6" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">生产用网络包:<a class="ae jv" href="https://webpack.js.org/guides/production/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/guides/production/</a></p><p id="190f" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">感谢您的阅读！！</p></div></div>    
</body>
</html>