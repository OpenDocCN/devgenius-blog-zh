<html>
<head>
<title>How to use useLastCall hook in your react project.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨ react é¡¹ç›®ä¸­ä½¿ç”¨ useLastCall é’©å­ï¼Ÿ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/how-to-use-uselastcall-hook-in-your-react-project-af096e37871c?source=collection_archive---------13-----------------------#2022-02-28">https://blog.devgenius.io/how-to-use-uselastcall-hook-in-your-react-project-af096e37871c?source=collection_archive---------13-----------------------#2022-02-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/b985391f251e9374d596c921c2b3d731.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qTVn09QrncZ11RpOSngWYw.png"/></div></figure><p id="5841" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">æ˜¯çš„ï¼Œæˆ‘ä»¬èµ°å§ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨ useLastCall é’©å­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨ã€‚é¦–å…ˆè¿™é‡Œæ˜¯çŸ¥è¯†åº“æ›´å¥½ç†è§£:<a class="ae kp" href="https://github.com/HubertRyanOfficial/react-lastcall-hook" rel="noopener ugc nofollow" target="_blank">https://github.com/HubertRyanOfficial/react-lastcall-hook</a></p><h1 id="aee0" class="kq kr in bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">æœ€åä¸€æ¬¡å‘¼å«æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Ÿ</h1><p id="92c9" class="pw-post-body-paragraph jr js in jt b ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ls km kn ko ig bi translated"><strong class="jt io"> useLastCall </strong>åˆ›å»ºåº“æ˜¯ä¸ºäº†é¿å…è°ƒç”¨æ•°æ®åº“ï¼Œè€Œä¸éœ€è¦ç¼“å­˜æœ¬èº«ï¼Œé€šè¿‡æ¯”è¾ƒæ•°æ®åº“ä¸­æœ€åä¸€æ¬¡è°ƒç”¨ä¸æ‰§è¡Œç›¸åŒåŠŸèƒ½çš„æ—¶é—´ä¹‹é—´çš„æ—¶é—´å·®æ¥ç¡®å®šåº”è¯¥å¤šé•¿æ—¶é—´è°ƒç”¨ä¸€æ¬¡ã€‚å½“ç„¶ï¼Œå¯¹äºæ‚¨çš„ reacts å’Œ react æœ¬åœ°é¡¹ç›®ã€‚</p><p id="ca68" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">ç”±äºæˆ‘ä»¬ä½¿ç”¨ react è‡ªå·±çš„é’©å­ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ react 16.8 ä»¥åçš„ç‰ˆæœ¬ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ useEffect å’Œ useState é’©å­ã€‚</p><h1 id="00f6" class="kq kr in bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">å¦‚ä½•ç”³è¯·</h1><p id="7bbc" class="pw-post-body-paragraph jr js in jt b ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ls km kn ko ig bi translated">å…¶ä¸­ä¸€ä¸ªä¾‹å­æ˜¯ä½¿ç¡®å®šçš„æœ€åä¸€æ¬¡å‘¼å«ä¹‹é—´çš„æ—¶é—´å·®è¶…è¿‡ 1 åˆ†é’Ÿã€‚å› æ­¤ï¼Œæ£€æŸ¥ä»æ‰§è¡Œæˆ–è°ƒç”¨æ•°æ®åº“å¼€å§‹æ˜¯å¦å·²ç»è¿‡äº† 1 åˆ†é’Ÿã€‚æ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼</p><p id="c35c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">è®©æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œæˆ‘ä»¬å°†è¿›è¡Œä¸€ä¸ªä¸€æµçš„ api è°ƒç”¨æ¥è·å–æˆ‘ä»¬çš„å¸–å­ï¼Œçœ‹çœ‹æœ‰å¤šç®€å•ã€‚ğŸ˜ğŸ˜Š</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="3591" class="mc kr in ly b gy md me l mf mg">$ yarn add react-lastcall-hook<br/><br/>or<br/><br/>$ npm install react-lastcall-hook --save</span></pre></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><pre class="lx ly lz ma aw mb bi"><span id="5b42" class="mc kr in ly b gy mo mp mq mr ms me l mf mg">import useLastCall from "react-lastcall-hook";<br/><br/>function ExampleComponent() {<br/><br/>  const callPosts = useLastCall(ms,lastCallTime, functionToCall);<br/><br/>  useEffect(() =&gt; {<br/>    if(callPosts) {<br/>      callPosts()<br/>    }<br/>  }, [callPosts])<br/><br/>  return (...)<br/>}</span></pre><p id="1abd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">è®°ä½<a class="ae kp" href="https://github.com/HubertRyanOfficial/react-lastcall-hook" rel="noopener ugc nofollow" target="_blank">ä»“åº“</a>æœ‰æ›´å¤šçš„ç»†èŠ‚</p><h1 id="77c2" class="kq kr in bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">ä¾‹å­</h1><p id="24a5" class="pw-post-body-paragraph jr js in jt b ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ls km kn ko ig bi translated">ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´çœŸå®çš„ä¾‹å­ã€‚</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="7cca" class="mc kr in ly b gy md me l mf mg">...<br/><br/>import useLastCall from "react-lastcall-hook";<br/><br/>function ExampleComponent() {<br/><br/>  const callPosts = useLastCall(1000 * 64, new Date().valueOf, getPosts);<br/><br/>  useEffect(() =&gt; {<br/>    if(callPosts) {<br/>      callPosts()<br/>    }<br/>  }, [callPosts]);<br/><br/><br/>  async function getPosts() {<br/>    await fetch(...)<br/>  }<br/><br/>  return (...)<br/>}</span></pre><h2 id="eea3" class="mc kr in bd ks mt mu dn kw mv mw dp la kc mx my le kg mz na li kk nb nc lm nd bi translated">Yumpï¼Œè€¶ï¼ï¼ï¼</h2><p id="f3a4" class="pw-post-body-paragraph jr js in jt b ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ls km kn ko ig bi translated">ç°åœ¨ï¼Œåªæœ‰ä»æœ€åä¸€æ¬¡è°ƒç”¨åˆ°æ–°è°ƒç”¨çš„æ—¶é—´è¶…è¿‡ 1 åˆ†é’Ÿï¼Œæ‰ä¼šè°ƒç”¨è·å–å¸–å­çš„åŠŸèƒ½ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘å°†å®ƒæ”¾åœ¨ ms ä¸­ï¼Œä»¥ä¾¿äºæˆ‘ä»¬çš„å®šåˆ¶ã€‚æˆ‘ä»¬çœ‹åˆ°æœ€åä¸€æ¬¡è°ƒç”¨çš„æ—¶é—´æ˜¯æˆ‘ä»¬çš„<strong class="jt io">æ—¥æœŸ</strong>ï¼Œè¿™æ„å‘³ç€å‡½æ•°å°†è¢«è°ƒç”¨ä¸ºä»»ä½•<strong class="jt io"> useEffect </strong>ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªæ—¶é—´ä¸ä¸ºå½“å‰å°æ—¶æ·»åŠ çš„æ—¶é—´æ²¡æœ‰åŒºåˆ«ã€‚</p><p id="915d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">å­˜å‚¨ä¸Šæ¬¡è°ƒç”¨è¯¥å‡½æ•°çš„å€¼çš„ä¸€ä¸ªéå¸¸å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Context æˆ– reduxã€‚æˆ‘å°†å±•ç¤ºä¸€ä¸ªä¾‹å­ï¼Œå…¶ä¸­<strong class="jt io"> redux </strong>æ€»æ˜¯ç”¨æ—¶é—´æˆ³ä¸­æœ€åä¸€æ¬¡è°ƒç”¨çš„å€¼æ¥æ›´æ–° reducerã€‚ç°åœ¨è·å–å¹¶æ€»æ˜¯ä¿å­˜åˆ°ä¸€ä¸ªåä¸º<strong class="jt io"> callPostsLastTime </strong>çš„ reducer æˆ–ä¸Šä¸‹æ–‡ä¸­çš„å±æ€§ã€‚å¦‚æœä½ æœ‰å…¶ä»–æ”¹è¿›çš„æ–¹æ³•ï¼Œè¯·ä¸æˆ‘ä»¬åˆ†äº«ã€‚</p><pre class="lt lu lv lw gt lx ly lz ma aw mb bi"><span id="0ab0" class="mc kr in ly b gy md me l mf mg">...<br/><br/>import {useDisptach, connect} from "react-redux";<br/><br/>import useLastCall from "react-lastcall-hook";<br/><br/>function ExampleComponent({callPostLastTime = new Date().valueOf}) {<br/>  const disptach = useDisptach();<br/><br/>  const callPosts = useLastCall(1000 * 64, callPostLastTime, updateCallPostLastTime);<br/><br/>  useEffect(() =&gt; {<br/>    if(callPosts) {<br/>      callPosts()<br/>    }<br/>  }, [callPosts]);<br/><br/>  function updateCallPostLastTime() {<br/><br/>    disptach({<br/>      type: "UPDATE_CALLPOSTS_LASTTIME",<br/>      payload: new Date().valueOf();<br/>    })<br/>    getPosts()<br/>  }<br/><br/>  async function getPosts() {<br/>    await fetch(...)<br/>  }<br/><br/>  return (...)<br/>}<br/><br/>const mapStateToProps = store =&gt; ({<br/>  callPostLastTime: store.postsReducer.lastTime<br/>});<br/><br/>export default connect(mapStateToProps, null)(ExampleComponent);</span></pre><p id="839f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">æ˜¯çš„ï¼Œç°åœ¨ä½¿ç”¨æ¥è‡ª<strong class="jt io"> react-redux </strong>çš„<strong class="jt io">used dispatch</strong>é’©å­ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨ redux å†…æ›´æ–°æˆ‘ä»¬çš„å‡é€Ÿå™¨ä¸­çš„å€¼ã€‚å¦‚æœä½ å¯¹ Redux æ¶æ„ä¸å¤ªäº†è§£ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé“¾æ¥å¯ä»¥è®©ä½ äº†è§£æ›´å¤š:<a class="ae kp" href="https://redux.js.org/introduction/getting-started" rel="noopener ugc nofollow" target="_blank">https://redux.js.org/introduction/getting-started</a></p></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><h1 id="bd77" class="kq kr in bd ks kt ne kv kw kx nf kz la lb ng ld le lf nh lh li lj ni ll lm ln bi translated">ä½ çŒœå¯¹äº†ï¼ğŸ‘ğŸ˜</h1><p id="c107" class="pw-post-body-paragraph jr js in jt b ju lo jw jx jy lp ka kb kc lq ke kf kg lr ki kj kk ls km kn ko ig bi translated">å¦‚æœä½ æƒ³åœ¨ä½¿ç”¨ä¸Šä¸‹æ–‡çš„æ¶æ„ä¸­ä½¿ç”¨å®ƒï¼Œå®ƒä¹Ÿéå¸¸æœ‰ç”¨ã€‚è®°ä½è¿™æ˜¯ä¸ºäº†æˆ‘ä»¬å¯ä»¥å­˜å‚¨æœ€åä¸€æ¬¡è°ƒç”¨å‡½æ•°çš„æ—¶é—´ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¼€å§‹æ‰§è¡Œçš„æ—¶é—´å·®ã€‚</p><p id="eec5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae kp" href="https://github.com/HubertRyanOfficial/react-lastcall-hook" rel="noopener ugc nofollow" target="_blank">å‚¨å­˜åº“</a></p><p id="c84a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae kp" href="https://github.com/HubertRyanOfficial" rel="noopener ugc nofollow" target="_blank"> GitHub </a></p><p id="f7a0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">å¡”æ™®ä¸:</strong>@ä¼‘ä¼¯ç‰¹é‡Œå®‰</p><p id="070f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae kp" href="https://twitter.com/hubertryanoff" rel="noopener ugc nofollow" target="_blank">æ¨ç‰¹</a></p><p id="6dc1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae kp" href="https://www.instagram.com/hubertryanofficial" rel="noopener ugc nofollow" target="_blank"> Instagram </a></p><p id="0819" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">éå¸¸æ„Ÿè°¢ï¼Œå¸Œæœ›å¯¹ä¼Ÿå¤§çš„ React ç¤¾åŒºæœ‰æ‰€å¸®åŠ©ã€‚â¤ğŸ™Œ</p><figure class="lt lu lv lw gt jo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/5449d80e7221e0f8479e9ed9396abdb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*wa8vJzdSKCkajwyJL4nbIQ.png"/></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated">ä¼‘ä¼¯ç‰¹Â·ç‘æ©æ ‡å¿—</figcaption></figure></div></div>    
</body>
</html>