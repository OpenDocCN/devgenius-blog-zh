<html>
<head>
<title>Add Charts into Our React App with Victory — Data Processing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将图表添加到我们的 Victory React 应用程序中—数据处理</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/add-charts-into-our-react-app-with-victory-data-processing-ea3270a4da33?source=collection_archive---------4-----------------------#2021-04-13">https://blog.devgenius.io/add-charts-into-our-react-app-with-victory-data-processing-ea3270a4da33?source=collection_archive---------4-----------------------#2021-04-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/de7e8416fb5e05665e6ae6a7aacfd109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I0Gm_0dnAthT4Rtd"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@jasonhogan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰森·霍根</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d40e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">胜利让我们能够将图表和数据可视化添加到 React 应用程序中。</p><p id="35db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用 Victory 将图表添加到 React 应用程序中。</p><h1 id="8c16" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">指定 x 和 y 数据</h1><p id="d892" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有一个对象数组作为数据，我们可以用属性名指定<code class="fe me mf mg mh b">x</code>和<code class="fe me mf mg mh b">y</code>轴的数据。</p><p id="7e3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9d9e" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { VictoryBar, VictoryChart } from "victory";</span><span id="6327" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;VictoryChart domainPadding={50}&gt;<br/>      &lt;VictoryBar<br/>        data={[<br/>          { employee: "Jane Doe", salary: 65000 },<br/>          { employee: "John Doe", salary: 62000 }<br/>        ]}<br/>        x="employee"<br/>        y="salary"<br/>      /&gt;<br/>    &lt;/VictoryChart&gt;<br/>  );<br/>}</span></pre><p id="12e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们分别用 x 轴和 y 轴的数据将<code class="fe me mf mg mh b">x</code>和<code class="fe me mf mg mh b">y</code>属性设置为属性名。</p><p id="a678" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有一个数组的数组，我们可以用我们要为 x 轴和 y 轴显示的数据指定索引:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0d6d" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { VictoryBar, VictoryChart } from "victory";</span><span id="15e2" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;VictoryChart domainPadding={50}&gt;<br/>      &lt;VictoryBar<br/>        data={[<br/>          [1, 1],<br/>          [2, 3],<br/>          [3, 1]<br/>        ]}<br/>        x={0}<br/>        y={1}<br/>      /&gt;<br/>    &lt;/VictoryChart&gt;<br/>  );<br/>}</span></pre><p id="4e8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有一个嵌套对象的数组，我们也可以指定路径字符串或字符串数组，以形成包含我们要显示的数据的属性路径:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b97c" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { VictoryBar, VictoryChart } from "victory";</span><span id="8e9d" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;VictoryChart domainPadding={50}&gt;<br/>      &lt;VictoryBar<br/>        data={[<br/>          {<br/>            employee: { firstName: "Jane", lastName: "Doe" },<br/>            salary: { base: 65000, bonus: 2000 }<br/>          },<br/>          {<br/>            employee: { firstName: "John", lastName: "Doe" },<br/>            salary: { base: 62000, bonus: 6000 }<br/>          }<br/>        ]}<br/>        x="employee.firstName"<br/>        y={["salary", "base"]}<br/>      /&gt;<br/>    &lt;/VictoryChart&gt;<br/>  );<br/>}</span></pre><h1 id="12dc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">处理数据</h1><p id="ffa9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过为<code class="fe me mf mg mh b">x</code>和<code class="fe me mf mg mh b">y</code>道具传入函数来处理数据:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a9b2" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { VictoryAxis, VictoryBar, VictoryChart } from "victory";</span><span id="5cb8" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;VictoryChart domainPadding={{ x: 40 }}&gt;<br/>      &lt;VictoryBar<br/>        data={[<br/>          { experiment: "trial 1", expected: 3.95, actual: 3.21 },<br/>          { experiment: "trial 2", expected: 3.95, actual: 3.38 },<br/>          { experiment: "trial 3", expected: 3.95, actual: 2.05 },<br/>          { experiment: "trial 4", expected: 3.95, actual: 3.71 }<br/>        ]}<br/>        x="experiment"<br/>        y={(d) =&gt; (d.actual / d.expected) * 100}<br/>      /&gt;<br/>      &lt;VictoryAxis<br/>        label="experiment"<br/>        style={{<br/>          axisLabel: { padding: 30 }<br/>        }}<br/>      /&gt;<br/>      &lt;VictoryAxis<br/>        dependentAxis<br/>        label="percent yield"<br/>        style={{<br/>          axisLabel: { padding: 40 }<br/>        }}<br/>      /&gt;<br/>    &lt;/VictoryChart&gt;<br/>  );<br/>}</span></pre><p id="95aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传入一个函数来计算用函数显示的<code class="fe me mf mg mh b">y</code>的值。</p><p id="715b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">d</code>有我们要计算的数据条目。</p><h1 id="1186" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">分类数据</h1><p id="c64b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">sortKey</code>道具对数据进行排序:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="133f" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { VictoryChart, VictoryLine } from "victory";<br/>import { range } from "lodash";</span><span id="5bef" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;VictoryChart domainPadding={{ x: 40 }}&gt;<br/>      &lt;VictoryLine<br/>        data={range(0, 2 * Math.PI, 0.01).map((t) =&gt; ({ t }))}<br/>        sortKey="t"<br/>        x={({ t }) =&gt; Math.sin(3 * t + 2 * Math.PI)}<br/>        y={({ t }) =&gt; Math.sin(2 * t)}<br/>      /&gt;<br/>    &lt;/VictoryChart&gt;<br/>  );<br/>}</span></pre><p id="b9df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于<code class="fe me mf mg mh b">sortKey</code>被设置为<code class="fe me mf mg mh b">t</code>，我们按<code class="fe me mf mg mh b">t</code>值排序。</p><h1 id="ad5d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="3fbb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用各种方式处理数据，用 React Victory 创建我们想要的图表。</p></div></div>    
</body>
</html>