<html>
<head>
<title>How to Format a Number with Commas as Thousands Digit Separators in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 JavaScript 中用逗号作为千位分隔符来格式化一个数字？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-format-a-number-with-commas-as-thousands-digit-separators-in-javascript-ce6ff8475192?source=collection_archive---------0-----------------------#2021-05-18">https://blog.devgenius.io/how-to-format-a-number-with-commas-as-thousands-digit-separators-in-javascript-ce6ff8475192?source=collection_archive---------0-----------------------#2021-05-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7e1f12c994895af425df37765622a653.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bR8wmKs-7MTD0WUK"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@mrthetrain?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Joshua Hoehne </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="2458" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用逗号作为千位分隔符来格式化一个数字是为了让数字更容易阅读。</p><p id="0ad6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何在 JavaScript 中用逗号将数字格式化为千位分隔符。</p><h1 id="8fad" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">替换为正则表达式</h1><p id="f3be" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用带有正则表达式的<code class="fe me mf mg mh b">replace</code>方法，每三位数添加一个逗号。</p><p id="0fed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c96b" class="mq lc iq mh b gy mr ms l mt mu">const str = (1234567890).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");<br/>console.log(str)</span></pre><p id="305e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b"> \B(?=(\d{3})+</code>查找小数点前 3 位数的组。</p><p id="fe15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">\B</code>防止<code class="fe me mf mg mh b">replace</code>在字符串的开头添加逗号。</p><p id="7908" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">?=</code>是一个前瞻断言。</p><p id="472f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着如果 3 位数模式后面有非单词边界，我们只匹配 3 位数。</p><p id="6b32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">?!</code>是一个否定的前瞻断言。</p><p id="d001" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着只有在一位数模式前面有三位数模式时，我们才匹配它。</p><p id="a871" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们确保只有在 3 位数字后面跟着另一位数字时才插入逗号。</p><p id="474c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们得到<code class="fe me mf mg mh b">‘1,234,567,890’</code>作为<code class="fe me mf mg mh b">str</code>的值</p><h1 id="d318" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe me mf mg mh b">The toLocaleString Method</code></h1><p id="47c4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">toLocaleString</code>方法让我们自动将一个数字格式化成一个字符串，用逗号作为千位分隔符。</p><p id="2845" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a4b8" class="mq lc iq mh b gy mr ms l mt mu">const str = (1234567890).toLocaleString()<br/>console.log(str)</span></pre><p id="d4ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在想要格式化的数字上直接调用<code class="fe me mf mg mh b">toLocaleString</code>。</p><p id="bf62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们得到<code class="fe me mf mg mh b">‘1,234,567,890’</code>作为<code class="fe me mf mg mh b">str</code>的值</p><p id="8b78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以设置区域设置，以保证格式化后的值总是包含逗号:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e86c" class="mq lc iq mh b gy mr ms l mt mu">const str = (1234567890).toLocaleString('en-US')<br/>console.log(str)</span></pre><h1 id="b3cd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">数字格式构造函数</h1><p id="bdeb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们也可以使用一个<code class="fe me mf mg mh b">NumberFormat</code>实例的<code class="fe me mf mg mh b">format</code>方法。</p><p id="5a80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使用它，我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d103" class="mq lc iq mh b gy mr ms l mt mu">const nf = new Intl.NumberFormat();<br/>const str = nf.format(1234567890);<br/>console.log(str)</span></pre><p id="51a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建一个<code class="fe me mf mg mh b">Intl.NumberFormat</code>实例。</p><p id="d879" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用一个数字调用实例上的<code class="fe me mf mg mh b">format</code>。</p><p id="3245" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到和其他例子一样的结果。</p><h1 id="232c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="f5eb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用正则表达式替换来添加逗号作为千位分隔符，或者我们可以使用格式化程序函数来做同样的事情。</p></div></div>    
</body>
</html>