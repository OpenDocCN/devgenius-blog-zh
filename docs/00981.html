<html>
<head>
<title>PHP — P7: Floats/Doubles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PHP — P7:浮点/双精度</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/php-7-x-p7-floats-doubles-cc29425f313e?source=collection_archive---------13-----------------------#2020-06-21">https://blog.devgenius.io/php-7-x-p7-floats-doubles-cc29425f313e?source=collection_archive---------13-----------------------#2020-06-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e9032bd3853b045fe7561575e070e7d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uq0N-K1E3yp9Z1-Y4kXyHg.jpeg"/></div></div></figure><p id="b0b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">浮点和双精度在PHP中是一回事。下列数字被认为是浮点数。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="087b" class="lf lg iq lb b gy lh li l lj lk">&lt;?php<br/>$a = 1.234;<br/>$b = 1.2e3;<br/>$c = 7E-10;<br/>?&gt;</span></pre><p id="6e59" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">PHP中的浮点精度最高可达14位。这包括句点之前和之后的累积位数。我们将创建两个总共14位的变量和一个15位的变量。我们将它们相加，看看我们得到的结果。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="7d23" class="lf lg iq lb b gy lh li l lj lk">&lt;?php<br/>// 14 digits<br/>$a = 1.0000000000001;<br/>$b = 0.0000000000001;</span><span id="f6e7" class="lf lg iq lb b gy ll li l lj lk">// 15 digits<br/>$c = 0.00000000000001;</span><span id="ab67" class="lf lg iq lb b gy ll li l lj lk">echo "A: " . $a . "&lt;br&gt;";<br/>echo "A + B: " . $a + $b . "&lt;br&gt;";<br/>echo "A + C: " . $a + $c . "&lt;br&gt;";</span><span id="4066" class="lf lg iq lb b gy ll li l lj lk">?&gt;</span></pre><p id="5353" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们得到的结果是:</p><p id="3e38" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答:1.0000000000001；<br/>A+B:1.000000000002；<br/>A+C:1.000000000001；</p><p id="2ce2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">前两个结果正确，最后一个A + C不正确。结果应该是:1.0000000000011，但最后一个1被剪掉了。因为浮点数的最大精度是14，所以第15个数字会被截断。</p><p id="14cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们将变量$c中的最后一个数字修改为等于6而不是1，那么新的结果A + C将等于1.000000000002。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="8f0c" class="lf lg iq lb b gy lh li l lj lk">&lt;?php<br/>// 14 digits<br/>$a = 1.0000000000001;<br/>$b = 0.0000000000001;</span><span id="fe44" class="lf lg iq lb b gy ll li l lj lk">// 15 digits<br/>$c = 0.00000000000006;</span><span id="e3c4" class="lf lg iq lb b gy ll li l lj lk">echo "A: " . $a . "&lt;br&gt;";<br/>echo "A + B: " . $a + $b . "&lt;br&gt;";<br/>echo "A + C: " . $a + $c . "&lt;br&gt;";</span><span id="12f7" class="lf lg iq lb b gy ll li l lj lk">?&gt;</span></pre><p id="cbb9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">答:1.0000000000001；<br/>A+B:1.000000000002；<br/>A+C:1.000000000002；</p><p id="8c80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当涉及浮点比较时，也有不一致的地方。最好用一个例子来说明这一点。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="9350" class="lf lg iq lb b gy lh li l lj lk">&lt;?php</span><span id="69e6" class="lf lg iq lb b gy ll li l lj lk">$x = 8 - 6.4; // Should be 1.6<br/>$y = 1.6;</span><span id="56aa" class="lf lg iq lb b gy ll li l lj lk">if ($x == $y) {<br/>  echo "They equal";<br/>} else {<br/>  echo "They don't equal";<br/>}</span><span id="764b" class="lf lg iq lb b gy ll li l lj lk">?&gt;</span></pre><p id="0c39" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们运行代码，它会显示“它们不相等”他们应该，因为8减6.4等于1.6。这不是PHP的问题；一般来说，浮点数在计算机中的存储方式有问题。</p></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><p id="773f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我知道我们还没有讨论函数，但是我觉得有必要简单讨论一下，因为这是一篇关于浮点数的文章。稍后将会有一系列关于函数的文章。</p><p id="109f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">PHP 7允许类型提示。在参数声明中，可以通过参数指定函数将接受的数据类型。Float是PHP中允许的可接受的类型提示声明；double被视为类名。如果你尝试用double输入提示，你会得到一个错误。下面是一个使用浮点数进行类型提示的例子。</p><pre class="kw kx ky kz gt la lb lc ld aw le bi"><span id="4b4c" class="lf lg iq lb b gy lh li l lj lk">&lt;?php</span><span id="559f" class="lf lg iq lb b gy ll li l lj lk">function does_if_float( float $a ) {<br/>  var_dump( $a );<br/>}</span><span id="f1cc" class="lf lg iq lb b gy ll li l lj lk">does_it_float(1.0001);</span><span id="043d" class="lf lg iq lb b gy ll li l lj lk">?&gt;</span></pre><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="lv lu l"/></div></figure></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><div class="kw kx ky kz gt lw"><a href="https://github.com/dinocajic/php-7-youtube-tutorials" rel="noopener  ugc nofollow" target="_blank"><div class="lx ab fo"><div class="ly ab lz cl cj ma"><h2 class="bd ir gy z fp mb fr fs mc fu fw ip bi translated">dinocajic/PHP-7-YouTube-教程</h2><div class="md l"><h3 class="bd b gy z fp mb fr fs mc fu fw dk translated">PHP 7.x YouTube教程的代码。</h3></div><div class="me l"><p class="bd b dl z fp mb fr fs mc fu fw dk translated">github.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk jw lw"/></div></div></a></div></div><div class="ab cl lm ln hu lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ij ik il im in"><figure class="kw kx ky kz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6b010532fe53bfcabe976f9672c5f520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*97Xf6R-i4vDtvzkF.jpeg"/></div></div></figure><p id="50b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">迪诺·卡伊奇目前是<a class="ae ml" href="https://www.lsbio.com/" rel="noopener ugc nofollow" target="_blank"> LSBio(生命周期生物科学公司)</a>、<a class="ae ml" href="https://absoluteantibody.com/" rel="noopener ugc nofollow" target="_blank">绝对抗体</a>、<a class="ae ml" href="https://www.kerafast.com/" rel="noopener ugc nofollow" target="_blank"> Kerafast </a>、<a class="ae ml" href="https://everestbiotech.com/" rel="noopener ugc nofollow" target="_blank">珠穆朗玛生物</a>、<a class="ae ml" href="https://www.nordicmubio.com/" rel="noopener ugc nofollow" target="_blank">北欧MUbio </a>和<a class="ae ml" href="https://www.exalpha.com/" rel="noopener ugc nofollow" target="_blank"> Exalpha </a>的IT主管。他还担任我的自动系统的首席执行官。他有十多年的软件工程经验。他拥有计算机科学学士学位，辅修生物学。他的背景包括创建企业级电子商务应用程序、执行基于研究的软件开发，以及通过写作促进知识的传播。</p><p id="78aa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在<a class="ae ml" href="https://www.linkedin.com/in/dinocajic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系他，在<a class="ae ml" href="https://instagram.com/think.dino" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上关注他，或者<a class="ae ml" href="https://dinocajic.medium.com/subscribe" rel="noopener">订阅他的媒体出版物</a>。</p><p id="3346" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae ml" href="https://dinocajic.medium.com/membership" rel="noopener"> <em class="mm">阅读迪诺·卡吉克(以及媒体上成千上万其他作家)的每一个故事。你的会员费直接支持迪诺·卡吉克和你阅读的其他作家。你也可以在媒体上看到所有的故事。</em> </a></p></div></div>    
</body>
</html>