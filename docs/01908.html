<html>
<head>
<title>The quick, lazy but effective way to create unique keys for React elements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为 React 元素创建唯一键的快速、简单但有效的方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-quicky-lazy-but-effective-way-to-create-unique-keys-for-react-elements-e45d574028a3?source=collection_archive---------1-----------------------#2020-07-14">https://blog.devgenius.io/the-quicky-lazy-but-effective-way-to-create-unique-keys-for-react-elements-e45d574028a3?source=collection_archive---------1-----------------------#2020-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f8d53d4b6d9f2762f98adb084a0794df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NWmlZQvisgRo7-Fn"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">弗洛里安·伯杰在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="02f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lb">如果你和我一样，你可能已经多次看到并忽略了这个错误。</em></p><figure class="ld le lf lg gt jr gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/65503becc7f566f7ec13b190e3799f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*JnWydkTxj-ckfn03U2BMZA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">你好，老朋友。</figcaption></figure></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><h1 id="79d4" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">唯一键是怎么回事？</h1><p id="ab14" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">那么问题出在哪里？这个错误仅仅是隐藏在控制台中的一个警告，它似乎并不影响程序的运行。这个错误到底告诉了我们什么？本质上，如果我们返回一个元素列表，React 需要一种方法来<strong class="kf ir">尝试区分我们刚刚返回的所有元素</strong>。当 React 试图决定哪些元素需要更新或者元素是否需要以某种方式修改时，这很有帮助(想想 CRUD)。本质上，给一个元素一个稳定的标识可以让 React 工作得更好，这也是我加入的充分理由。</p><p id="8b31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然很容易忽略这一点，但修复它几乎同样容易。让我们看看我们有什么选择。</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><h1 id="81e5" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">我们能做些什么呢？</h1><p id="526b" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">第一步是承认我们有问题，我们现在可以继续前进，看看如何解决它。以下是几种方式；</p><blockquote class="mr ms mt"><p id="aae3" class="kd ke lb kf b kg kh ki kj kk kl km kn mu kp kq kr mv kt ku kv mw kx ky kz la ij bi translated">1.让它保持原样</p><p id="8611" class="kd ke lb kf b kg kh ki kj kk kl km kn mu kp kq kr mv kt ku kv mw kx ky kz la ij bi translated">2.使用数组样式索引</p><p id="de8e" class="kd ke lb kf b kg kh ki kj kk kl km kn mu kp kq kr mv kt ku kv mw kx ky kz la ij bi translated">3.编写自定义 id 生成器</p><p id="65e0" class="kd ke lb kf b kg kh ki kj kk kl km kn mu kp kq kr mv kt ku kv mw kx ky kz la ij bi translated">4.使用 UUID</p></blockquote><p id="3b0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">哦，亲爱的，我以为我们真的有所进展了。回到本文开头。</p><p id="6d27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 2- </strong>这似乎是一种直观的方法，但是 React 文档本身声明<a class="ae kc" href="https://reactjs.org/docs/lists-and-keys.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">不要这样做</strong> </a>。所以那也是不可能的。</p><p id="03b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 3 - </strong>好主意，我们可以生成唯一的密钥 id。然而，随机函数并不完美，确实会产生两次相同的结果，当我们可以使用…</p><p id="1041" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> 4 - </strong>丁丁！我们有赢家了！UUID 是一个通用的唯一标识符，这意味着我们不应该有任何问题来确保我们的键是唯一的。此外，在 React 项目中有一个超级简单的方法来实现这一点。</p></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><h1 id="0b10" class="lo lp iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">实现 UUID 生成器</h1><p id="1db5" class="pw-post-body-paragraph kd ke iq kf b kg mm ki kj kk mn km kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">很好，我们决定使用 UUID，就像 Javascript 中的任何东西一样，它有一个库。我将使用 Node 中可用的<a class="ae kc" href="https://www.npmjs.com/package/uuidv4" rel="noopener ugc nofollow" target="_blank"> uuidv4 库</a>。正如我之前提到的，我很懒，所以让我们用最简单的方式实现它。</p><p id="a8de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个功能组件，它有一个返回一些 JSX 的歌曲列表。超级简单的东西:</p><figure class="ld le lf lg gt jr"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Songlist.js —显示歌曲列表的功能组件</figcaption></figure><p id="5ce3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们甚至有一个很好的按钮来添加一首新歌，可爱。<br/>如果按原样运行这段代码，我们会得到我们之前看到的错误:</p><figure class="ld le lf lg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/283a8c4f4bc7f3261a3e46831bfb807d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2qc7PD6pZknPr_aj7Mh2GQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我们的应用程序遇到了错误。</figcaption></figure><p id="9d5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">我们需要给&lt;Li&gt;T24】/Li&gt;元素添加一个 UUID 键。一般来说，无论你在哪里看到一个<code class="fe na nb nc nd b">array.map()</code>，我们都需要使用一个唯一的密钥。</strong></p><p id="703c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先让我们运行<code class="fe na nb nc nd b">npm i uuidv4</code>来下载并安装 uuidv4 节点包。我们现在可以用<code class="fe na nb nc nd b">import { uuid } from uuid4</code>来导入它。<br/>最后我们可以给&lt; li &gt;元素添加一个关键道具，然后简单地调用函数<code class="fe na nb nc nd b">uuid()</code>。该函数返回一个 UUID 字符串。</p><p id="d9f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样。这就是全部了。</p><p id="3cfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们再次运行该应用程序时，我们将看到我们不再有这个错误！</p><figure class="ld le lf lg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/f575174a3eeb309a59d09aeecdcc5417.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qBpE6jHzGNecb92S9ghptQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">不再有错误！</figcaption></figure></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="81b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢阅读，这里是更新后的代码！🎉🎉🎉</p><figure class="ld le lf lg gt jr"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">更改在第 2 行和第 19 行。</figcaption></figure></div><div class="ab cl lh li hu lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ij ik il im in"><p id="18f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您喜欢这篇文章或觉得它有用，请随意操作。或者，你可以在 Medium  <a class="ae kc" href="https://jamesmbrightman.medium.com/membership" rel="noopener"> <em class="lb">这里</em> </a> <em class="lb">支持我或者给我买一杯</em> <a class="ae kc" href="https://ko-fi.com/jamesbrightman" rel="noopener ugc nofollow" target="_blank"> <em class="lb">咖啡</em> </a> <em class="lb">！非常感谢所有的支持。</em></p></div></div>    
</body>
</html>