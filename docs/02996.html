<html>
<head>
<title>Paxos Algorithm Explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Paxos算法解释</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/paxos-algorithm-explained-a3cc147af20?source=collection_archive---------0-----------------------#2020-09-19">https://blog.devgenius.io/paxos-algorithm-explained-a3cc147af20?source=collection_archive---------0-----------------------#2020-09-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="e334" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">自从写了上一篇关于CAP定理的文章后，我开始意识到我可能误解了CAP定理，一致性和可用性是有可能实现的(？).</p><p id="d86f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然CAP定理断言在分布式系统中一致性和可用性不能同时实现，但是CAP定理用严格的二进制术语定义了可用性和一致性。术语“可用性”被定义为一个连续体，一致性可以分为不同的级别，例如弱一致性、强一致性、读写一致性和最终一致性。通俗地说，CAP定理认为<em class="kl">强一致性</em>和<em class="kl">终极可用性</em>不能同时实现。</p><p id="283c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了解决这些限制，图灵奖获奖的<strong class="jp ir"> Paxos协议</strong>被引入，以最大化此类系统中的可用性和一致性的效率。Paxos算法帮助系统在存在网络错误和节点故障(可用性)的情况下工作，同时确保一致性。</p><blockquote class="km"><p id="3efd" class="kn ko iq bd kp kq kr ks kt ku kv kk dk translated">Paxos是一系列分布式算法，用于在不可靠或易出错的处理器网络中解决一致性问题。</p></blockquote><p id="cfe4" class="pw-post-body-paragraph jn jo iq jp b jq kw js jt ju kx jw jx jy ky ka kb kc kz ke kf kg la ki kj kk ij bi translated">Paxos算法基于<em class="kl">简单多数规则</em>，该规则能够确保只能获得一致的结果值。该协议提出，如果系统中的大多数节点可用，那么系统作为一个整体是可用的，并且可以保证强数据一致性，这对于可用性是一个很大的改进。</p><h2 id="0b2a" class="lb lc iq bd ld le lf dn lg lh li dp lj jy lk ll lm kc ln lo lp kg lq lr ls lt bi translated">&gt;&gt;工作原理</h2><p id="33d0" class="pw-post-body-paragraph jn jo iq jp b jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk ij bi translated">本质上，Paxos协议将每个写请求与一个提议进行比较。就实体而言，Paxos协议有以下实体:</p><ol class=""><li id="18e0" class="lz ma iq jp b jq jr ju jv jy mb kc mc kg md kk me mf mg mh bi translated">提议者:接受客户的要求(价值观/提议),并试图说服接受者接受他们提议的价值观</li><li id="c5ae" class="lz ma iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated"><strong class="jp ir">接受者:</strong>接受提议者提出的某些值，并让提议者知道是否接受了其他值。响应代表对特定提议的投票</li><li id="e080" class="lz ma iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated"><strong class="jp ir">学员:</strong>宣布结果</li></ol><p id="cf5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个提案可以分为两个阶段:<em class="kl">第一阶段(准备&amp;承诺)</em>和<em class="kl">第二阶段(接受&amp;接受)。</em>提议者与接受者两次互动。</p><ol class=""><li id="2e37" class="lz ma iq jp b jq jr ju jv jy mb kc mc kg md kk me mf mg mh bi translated"><strong class="jp ir">阶段1: </strong>提议者选择一个提议号<em class="kl"> n </em>，并要求所有接受者接受该<em class="kl">准备请求。</em>如果接受者接收到编号为n的准备请求，并且n的值大于其已经响应的所有<em class="kl">准备请求</em>的数量，则它将保证不接受编号小于n的提议。</li><li id="df1a" class="lz ma iq jp b jq mi ju mj jy mk kc ml kg mm kk me mf mg mh bi translated"><strong class="jp ir">阶段2: </strong>如果提议者收到大多数接受者对其准备请求的响应(也称为n ),则它向接受者发送对编号为n、值为v的提议的<em class="kl">接受请求</em>,其中v是收到的响应中编号最高的提议的值。如果接受者接收到一个编号为n的<em class="kl">接受请求</em>，只要它没有响应编号大于n的<em class="kl">准备请求</em>，它就可以接受建议</li></ol><figure class="mo mp mq mr gt ms gh gi paragraph-image"><div role="button" tabindex="0" class="mt mu di mv bf mw"><div class="gh gi mn"><img src="../Images/427af14d828589185c3bfea77ecc0974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ff2lLukW5kTIFeXGWTrvjA.png"/></div></div></figure><p id="4ed9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然Paxos协议因为协议的完备性而显得复杂，但是协议的主要思想是:提议者首先从大多数接受者那里学习提议的最新内容，然后基于学习到的数量最多的提议形成新的提议(接受请求)。如果提议被大多数接受者接受/投票，它就通过了。因此，它也被称为<em class="kl">多数协议</em>。</p><p id="ae90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Paxos协议有其自身的缺点，可以使用ZooKeeper的核心算法或ZAB协议来解决，但值得自己写一整篇文章。</p><p id="04bf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">TL；DR—</strong>CAP定理声称网络分区在分布式系统中是不可避免的，并导致一致性和可用性之间的折衷。Paxos并不一定否定CAP定理，而是提出了一个简单的算法来最大化可用性，同时保证一致性。</p><p id="d26f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi">—</p><p id="0502" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">参考资料:</p><ul class=""><li id="1d5c" class="lz ma iq jp b jq jr ju jv jy mb kc mc kg md kk mz mf mg mh bi translated"><a class="ae na" href="https://lamport.azurewebsites.net/pubs/paxos-simple.pdf" rel="noopener ugc nofollow" target="_blank">https://lamport.azurewebsites.net/pubs/paxos-simple.pdf</a></li><li id="e291" class="lz ma iq jp b jq mi ju mj jy mk kc ml kg mm kk mz mf mg mh bi translated"><a class="ae na" href="https://hackernoon.com/exploring-distributed-system-theory-availability-and-consistency-e8c59e0875cd" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/exploring-distributed-system-theory-avail ability-and-consistency-e8c 59 e 0875 CD</a></li><li id="ef1b" class="lz ma iq jp b jq mi ju mj jy mk kc ml kg mm kk mz mf mg mh bi translated"><a class="ae na" href="https://youtu.be/d7nAGI_NZPk" rel="noopener ugc nofollow" target="_blank">https://youtu.be/d7nAGI_NZPk</a></li></ul></div></div>    
</body>
</html>