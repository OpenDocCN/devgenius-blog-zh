<html>
<head>
<title>Run and Stop Ansible AWX in Docker containers — Ansible AWX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在码头集装箱中运行和停止 ansi ble AWX-ansi ble AWX</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/run-and-stop-ansible-awx-in-docker-containers-ansible-awx-5959bd72aae5?source=collection_archive---------2-----------------------#2022-09-21">https://blog.devgenius.io/run-and-stop-ansible-awx-in-docker-containers-ansible-awx-5959bd72aae5?source=collection_archive---------2-----------------------#2022-09-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f009" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在 Docker 容器中启动和停止 Ansible AWX modern web-UI 和 API 接口及要求 PostgreSQL 和 Redis？</h2></div><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="kk kl l"/></div></figure><h1 id="1550" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">如何在 Docker 容器中运行和停止 Ansible AWX？</h1><p id="926d" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我将向您展示如何在 Docker 容器中启动和停止 Ansible AWX。您可以利用 AWX 现代网络用户界面和 API 接口。<br/>仅推荐有经验的用户和开发者在 Docker 容器中运行。我是卢卡·伯尔顿，欢迎来到今天的《神秘飞行员》节目。</p><h1 id="9b2e" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">链接</h1><ul class=""><li id="7e5a" class="ma mb iq lg b lh li lk ll ln mc lr md lv me lz mf mg mh mi bi translated"><a class="ae mj" href="https://github.com/ansible/awx/blob/devel/tools/docker-compose/README.md#run-awx" rel="noopener ugc nofollow" target="_blank">https://github . com/ansi ble/awx/blob/devel/tools/docker-compose/readme . MD # run-awx</a></li></ul><h1 id="e052" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">演示</h1><p id="7d53" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如何在 Docker 容器中运行和停止 Ansible AWX？<br/>这需要在上一课中为 Docker 容器从头构建一个可解析的 AWX。</p><h2 id="197b" class="mk kn iq bd ko ml mm dn ks mn mo dp kw ln mp mq ky lr mr ms la lv mt mu lc mv bi translated">密码</h2><p id="0ae4" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦为 Docker 容器成功构建了 Ansible AWX，就可以使用下面的命令运行 AWX 容器。</p><p id="d9e8" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">这个过程也在旋转 PostgreSQL 和 Redis 容器的需求。</p><pre class="kf kg kh ki gt nb nc nd ne aw nf bi"><span id="0171" class="mk kn iq nc b gy ng nh l ni nj">$ make docker-compose</span></pre><p id="6acf" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">您的会话将附加到 AWX 容器，并在容器启动时开始实时观察日志消息和事件。</p><p id="c23d" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">第一次启动环境时，运行数据库迁移以构建 PostgreSQL 初始数据库模式和数据。</p><p id="4427" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">默认情况下，您的机器上运行着六个 Docker 容器:<code class="fe nk nl nm nc b">tools_awx_1</code>、<code class="fe nk nl nm nc b">tools_postgres_1</code>、<code class="fe nk nl nm nc b">tools_redis_1</code>、<code class="fe nk nl nm nc b">tools_receptor_hop</code>、<code class="fe nk nl nm nc b">tools_receptor_1</code>、<code class="fe nk nl nm nc b">tools_receptor_2</code>。</p><p id="1b7d" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">您可以使用<code class="fe nk nl nm nc b">docker ps</code>命令验证系统中运行的容器:</p><pre class="kf kg kh ki gt nb nc nd ne aw nf bi"><span id="34b2" class="mk kn iq nc b gy ng nh l ni nj">[lberton@ansible awx]$ docker ps <br/>CONTAINER ID   IMAGE                            COMMAND                  CREATED        STATUS         PORTS                                                                                                                                                                                                                                                                                                                                                                                NAMES<br/>bce34be76a94   ghcr.io/ansible/awx_devel:HEAD   "/entrypoint.sh rece…"   14 hours ago   Up 2 minutes   22/tcp, 8013/tcp, 8043/tcp, 8080/tcp                                                                                                                                                                                                                                                                                                                                                 tools_receptor_2<br/>c11c7c1114f1   ghcr.io/ansible/awx_devel:HEAD   "/entrypoint.sh rece…"   14 hours ago   Up 2 minutes   22/tcp, 8013/tcp, 8043/tcp, 8080/tcp                                                                                                                                                                                                                                                                                                                                                 tools_receptor_1<br/>05589a6b6185   quay.io/ansible/receptor:devel   "/usr/local/bin/dumb…"   14 hours ago   Up 3 minutes   0.0.0.0:5555-&gt;5555/tcp, :::5555-&gt;5555/tcp, 7323/tcp                                                                                                                                                                                                                                                                                                                                  tools_receptor_hop<br/>d9570e9d9027   ghcr.io/ansible/awx_devel:HEAD   "/entrypoint.sh laun…"   14 hours ago   Up 3 minutes   0.0.0.0:2222-&gt;2222/tcp, :::2222-&gt;2222/tcp, 0.0.0.0:6899-&gt;6899/tcp, :::6899-&gt;6899/tcp, 0.0.0.0:7899-7999-&gt;7899-7999/tcp, :::7899-7999-&gt;7899-7999/tcp, 0.0.0.0:8013-&gt;8013/tcp, :::8013-&gt;8013/tcp, 0.0.0.0:8043-&gt;8043/tcp, :::8043-&gt;8043/tcp, 0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp, 22/tcp, 0.0.0.0:8888-&gt;8888/tcp, :::8888-&gt;8888/tcp, 0.0.0.0:3000-&gt;3001/tcp, :::3000-&gt;3001/tcp   tools_awx_1<br/>c39fe279ecb2   postgres:12                      "docker-entrypoint.s…"   14 hours ago   Up 3 minutes   5432/tcp                                                                                                                                                                                                                                                                                                                                                                             tools_postgres_1<br/>820ebdc15a10   redis:latest                     "redis-server /usr/l…"   14 hours ago   Up 3 minutes   6379/tcp                                                                                                                                                                                                                                                                                                                                                                             tools_redis_1<br/>[lberton@ansible awx]$</span></pre><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nn"><img src="../Images/1602b410082b181bd4837622ab587209.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Dskb-85PIgzzYs1f.png"/></div></div></figure><h1 id="b5cf" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">访问 Ansible AWX 网站用户界面</h1><p id="5a10" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">可在 URL<a class="ae mj" href="https://localhost:8043/." rel="noopener ugc nofollow" target="_blank">https://localhost:8043/获得 Ansible AWX Web-UI。</a></p><p id="5562" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">与您的浏览器成功连接将会显示以下登录屏幕(<a class="ae mj" href="https://localhost:8043/#/login" rel="noopener ugc nofollow" target="_blank">https://localhost:8043/#/log in</a>)。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nn"><img src="../Images/7019836cf8c0fd68afefe632cfc2a640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9tdREiQlJXFCEWwh.png"/></div></div></figure><h1 id="e511" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">访问 Ansible AWX Web API</h1><p id="24db" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">可在 URL<a class="ae mj" href="https://localhost:8043/api/." rel="noopener ugc nofollow" target="_blank">https://localhost:8043/API/获得 Ansible AWX API。</a></p><p id="4e7e" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">与浏览器的成功连接将向您显示以下 API 端点(https://localhost:8043/api/)。Ansible AWX API 是一个可浏览的 API，所以很容易通过浏览器导航。请注意，一些 API 端点需要认证。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nn"><img src="../Images/0fffab83b8b768b3b2790e01d93ba594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ygh_qB5epo76Txna.png"/></div></div></figure><h1 id="1db7" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">概述</h1><p id="1abd" class="pw-post-body-paragraph le lf iq lg b lh li jr lj lk ll ju lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">现在您知道了如何在 Docker 容器中运行和停止 Ansible AWX。</p><p id="7099" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">我希望你喜欢读这个。如果你想支持我成为一名作家，考虑注册<a class="ae mj" href="https://ansiblepilot.medium.com/membership" rel="noopener">成为一名中等会员</a>。每月仅需 5 美元，您即可无限制地使用 Medium。</p><p id="e21c" class="pw-post-body-paragraph le lf iq lg b lh mw jr lj lk mx ju lm ln my lp lq lr mz lt lu lv na lx ly lz ij bi translated">订阅<a class="ae mj" href="https://www.youtube.com/channel/UC5MNbTYRHSCu9vAki3z9SmA" rel="noopener ugc nofollow" target="_blank"> YouTube 频道</a>、<a class="ae mj" href="https://ansiblepilot.medium.com/" rel="noopener">media</a>、<a class="ae mj" href="https://ansiblepilot.substack.com/" rel="noopener ugc nofollow" target="_blank"> Substack </a>和<a class="ae mj" href="https://www.ansiblepilot.com/" rel="noopener ugc nofollow" target="_blank">网站</a>不要错过下一集的 Ansible Pilot。</p><h1 id="8a69" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">可移植的最佳资源</h1><h2 id="b1d4" class="mk kn iq bd ko ml mm dn ks mn mo dp kw ln mp mq ky lr mr ms la lv mt mu lc mv bi translated">视频课程</h2><ul class=""><li id="f6b0" class="ma mb iq lg b lh li lk ll ln mc lr md lv me lz mf mg mh mi bi translated"><a class="ae mj" href="https://click.linksynergy.com/deeplink?id=euGmLrdj*Ec&amp;mid=39197&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Fansible-by-examples-devops%2F%3FreferralCode%3D8E065F6D6F8622A3DEC8" rel="noopener ugc nofollow" target="_blank">通过 200 多个例子学习可移植自动化&amp;实践课:通过一些如何使用最常见模块的真实例子和可移植行动手册</a>学习可移植自动化。</li></ul><h2 id="f7db" class="mk kn iq bd ko ml mm dn ks mn mo dp kw ln mp mq ky lr mr ms la lv mt mu lc mv bi translated">书</h2><ul class=""><li id="6cf4" class="ma mb iq lg b lh li lk ll ln mc lr md lv me lz mf mg mh mi bi translated"><a class="ae mj" href="https://www.amazon.com/Ansible-VMware-Examples-Step-Step/dp/1484288785/" rel="noopener ugc nofollow" target="_blank">可通过示例用于 VMware:VMware 基础架构自动化分步指南</a></li><li id="8168" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansiblebyexamples" rel="noopener ugc nofollow" target="_blank">可举例:Linux 和 Windows 系统管理员和 DevOps 的 200 多个自动化示例</a></li><li id="51c2" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansibleforwindowsbyexamples" rel="noopener ugc nofollow" target="_blank">适用于 Windows 示例:Windows 系统管理员和 DevOps 50+自动化示例</a></li><li id="c599" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansibleforlinuxbyexamples" rel="noopener ugc nofollow" target="_blank">可通过示例移植到 Linux:Linux 系统管理员和 DevOps 的 100 多个自动化示例</a></li><li id="e6fb" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/linuxfileanddirectorybyansibleexamples" rel="noopener ugc nofollow" target="_blank">示例可移植的 Linux 文件系统:现代 IT 基础设施的 Linux 文件和目录操作的 40 多个自动化示例</a></li><li id="a2e1" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansible-for-kubernetes-by-examples" rel="noopener ugc nofollow" target="_blank">可通过示例用于容器和 Kubernetes:20+自动化示例用于自动化容器、Kubernetes 和 OpenShift </a></li><li id="cbbc" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansibleforsecuritybyexamples" rel="noopener ugc nofollow" target="_blank">可通过示例实现安全性:自动化 IT 现代基础架构的安全性和合规性的 100 多个自动化示例</a></li><li id="50d2" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansible-tips-and-tricks" rel="noopener ugc nofollow" target="_blank">可行的技巧和窍门:10 多个可行的例子来节省时间和自动化更多的任务</a></li><li id="70e8" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansiblelinuxusersandgroupsbyexamples" rel="noopener ugc nofollow" target="_blank"> Ansible Linux 用户&amp;按示例分组:20 多个关于现代 IT 基础设施的 Linux 用户和组操作的自动化示例</a></li><li id="94fb" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansible-for-postgresql-by-examples" rel="noopener ugc nofollow" target="_blank">Ansible For PostgreSQL by Examples:10+个自动化 PostgreSQL 数据库的示例</a></li><li id="f201" class="ma mb iq lg b lh nu lk nv ln nw lr nx lv ny lz mf mg mh mi bi translated"><a class="ae mj" href="https://leanpub.com/ansible-for-aws-by-examples" rel="noopener ugc nofollow" target="_blank">ansi ble For Amazon Web Services AWS By Examples:10 多个自动化 AWS 现代基础设施的示例</a></li></ul><h1 id="3d1a" class="km kn iq bd ko kp kq kr ks kt ku kv kw jw kx jx ky jz kz ka la kc lb kd lc ld bi translated">捐赠</h1><div class="nz oa gp gr ob oc"><a href="https://patreon.com/lucaberton" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">卢卡·伯尔顿正在为 Ansible | Patreon 创建软件开源</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">今天就成为卢卡·伯尔顿的赞助人:获得世界上最大会员的独家内容和体验…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">patreon.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ns oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a href="https://github.com/sponsors/lucab85" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">GitHub 赞助商上的赞助商@lucab85</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">我是一个活跃的开源贡献者，参与到了 Ansible 社区中，尽管我到处都是。@lucab85 的…</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">github.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq ns oc"/></div></div></a></div><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi os"><img src="../Images/79d704bac7e33d7b30cad864f4da1a79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gVzqiw_x6Mbd97h69U5vDg.png"/></div></div></figure></div></div>    
</body>
</html>