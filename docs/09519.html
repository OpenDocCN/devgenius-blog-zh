<html>
<head>
<title>SQL | Insert, Update &amp; Delete</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL |插入、更新和删除</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sql-insert-update-delete-e6cf88e1ddc6?source=collection_archive---------17-----------------------#2022-08-25">https://blog.devgenius.io/sql-insert-update-delete-e6cf88e1ddc6?source=collection_archive---------17-----------------------#2022-08-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/bc0f4dd030b2240380c57e94bfc64da3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*NjMo1CGoG-xeOPsm"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">扭转局势|来源:<a class="ae jv" href="https://giphy.com/gifs/perfect-flip-table-5saWnCIJL7nmU" rel="noopener ugc nofollow" target="_blank">吉菲</a></figcaption></figure><p id="4e7d" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">在进入插入、更新和删除之前，让我们先定义一些东西</p><blockquote class="ku kv kw"><p id="b93b" class="jw jx kx jy b jz ka kb kc kd ke kf kg ky ki kj kk kz km kn ko la kq kr ks kt ig bi translated"><strong class="jy io">定义</strong></p></blockquote><ol class=""><li id="44a3" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lg lh li lj bi translated"><strong class="jy io">什么是数据库？</strong></li></ol><ul class=""><li id="749a" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated">保存表和与这些表相关的其他 SQL 结构的容器/圆柱体。</li><li id="d4f1" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated"><em class="kx">数据库名称不应有空格，可以使用下划线。</em></li><li id="700d" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated"><em class="kx">无法重新创建现有数据库。</em></li></ul><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/bc34e4069088b266d92ccdbb1d0c4fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*HB2Rbt0QkHnf_M37wRUAKg.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">数据库|来源:来源:Head First SQL:您的大脑在 SQL 上</figcaption></figure><p id="b89a" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 2。什么是查询？</strong></p><ul class=""><li id="3f58" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated">从数据库中询问信息被称为查询。</li></ul><p id="3b67" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 3。什么是桌子？</strong></p><ul class=""><li id="7fea" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated">它是数据库内部的一种结构，由数据组成，按行和列组织。</li><li id="9359" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated">表格由行和列组合而成。</li><li id="eb00" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated">数据库中的所有表都应该以某种方式连接起来。</li></ul><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/a31f7b6a03f7f585e425cae6e206a4c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*UVkTrP6QpLLj3Ly355qFBw.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">数据库中的表| Source : Source : Head First SQL:您的大脑在 SQL 上</figcaption></figure><p id="ab39" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 4。什么是专栏？</strong></p><ul class=""><li id="b5f0" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated">列/字段由存储在表中的一段数据组成。</li><li id="0baa" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated">列是指表中的特定类别。</li></ul><p id="f46e" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 5。什么是行？</strong></p><ul class=""><li id="ae29" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated">行/记录是描述单个项目属性的一组列。</li></ul><blockquote class="ku kv kw"><p id="ee5e" class="jw jx kx jy b jz ka kb kc kd ke kf kg ky ki kj kk kz km kn ko la kq kr ks kt ig bi translated"><strong class="jy io">创建、插入、更新、删除&amp;删除</strong></p></blockquote><ol class=""><li id="6189" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lg lh li lj bi translated"><strong class="jy io">创建数据库</strong></li></ol><p id="ee53" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><code class="fe lw lx ly lz b">CREATE DATABASE database_name;</code></p><p id="fe55" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注意:不能重新创建现有的数据库。</em></p></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="15ad" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 2。使用数据库</strong></p><p id="11d0" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><code class="fe lw lx ly lz b">USE database_name;</code></p><p id="e87a" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注:</em></p><ul class=""><li id="65f3" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated">从现在开始，任何事情都发生在数据库内部。</li><li id="a761" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated">SQL 要求所有的表都在一个数据库中。</li><li id="2fe2" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated">SQL 是不区分大小写的，但是最好用它们各自的大小写敏感性来编写代码。</li></ul></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="8da5" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 3。创建表格</strong></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/70d421ab864b15fee97f1286f98bd827.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*2BLGH788N2zAXgii"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">创建* 5 |来源:<a class="ae jv" href="https://giphy.com/gifs/consultingcup-create-consulting-cup-thkjYkt6nMYd0LY823" rel="noopener ugc nofollow" target="_blank"> Giphy </a></figcaption></figure><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="8efc" class="mm mn in lz b gy mo mp l mq mr">CREATE TABLE table_name <br/>(column_name1 DATATYPE(SIZE),      <br/> column_name2 DATATYPE(SIZE));</span></pre></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="4a81" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 4。将数据插入表格</strong></p><p id="7ccc" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">单引号适用于 CHAR、VARCHAR、DATE、BLOB，但不适用于 toe INT、DEC. </em></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="0ef3" class="mm mn in lz b gy mo mp l mq mr">INSERT INTO table_name <br/>(column_name1 DATATYPE(SIZE),      <br/>column_name2 DATATYPE(SIZE)) <br/>VALUES('value1', 'value2');</span></pre><p id="0f6b" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">变体 1:一次添加所有数据</p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="0caf" class="mm mn in lz b gy mo mp l mq mr">INSERT INTO table_name <br/>(column_name1 DATATYPE(SIZE),      <br/>column_name2 DATATYPE(SIZE)) <br/>VALUES('value1','value2','value3'), <br/>('valuex','valuey',valuez'), <br/>('valuea','valueb','valuec');</span></pre><p id="7661" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">变体 2:更改列的顺序</p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="6486" class="mm mn in lz b gy mo mp l mq mr">INSERT INTO table_name <br/>(column_name2 DATATYPE(SIZE)      <br/>column_name1 DATATYPE(SIZE)) <br/>VALUES ( 'value2','value1');</span></pre><p id="7f16" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注意:在更改列顺序的同时，我们还应该记住更改值的顺序。</em></p><p id="c6b0" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">变体 3:省略列名</p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="4b08" class="mm mn in lz b gy mo mp l mq mr">INSERT INTO table_name <br/>VALUES ( 'value2', 'value1' );</span></pre><p id="0cd8" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注意:确保所有值的输入顺序与列的初始化顺序相同。</em></p><p id="e32a" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">变体 4:仅插入几个值</p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="37ae" class="mm mn in lz b gy mo mp l mq mr">INSERT INTO table_name <br/>(column_name2 DATATYPE(SIZE)) <br/>VALUES ( 'value2' );</span></pre><p id="d57f" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注意:根据需要输入的值，这里必须提到列名。</em></p></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="92e0" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 5。控制表中某列的空值</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="d39c" class="mm mn in lz b gy mo mp l mq mr">CREATE TABLE table_name <br/>(column_name1 DATATYPE(SIZE) NOT NULL,      <br/>column_name2 DATATYPE(SIZE) NOT NULL);</span></pre></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="2206" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 6。将默认值添加到表格中的一列</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="b0c4" class="mm mn in lz b gy mo mp l mq mr">CREATE TABLE table_name (      column_name1 DATATYPE(SIZE) NOT NULL,      column_name2 DATATYPE(SIZE) NOT NULL DEFAULT value_x );</span></pre><p id="db97" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注:</em></p><ul class=""><li id="4331" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated"><em class="kx">如果指定了默认值，则每当创建新行时，该特定值将被添加到列中</em> <strong class="jy io"> <em class="kx">当且仅当未指定其他值时</em> </strong> <em class="kx">。</em></li><li id="e664" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated"><em class="kx">默认值应与所提供的数据类型相匹配。</em></li></ul></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="ae20" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 7。描述一个表</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="6197" class="mm mn in lz b gy mo mp l mq mr">DESC table_name;  <br/>DESCRIBE table_name;</span></pre><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/0a3c1172f1e3bf85fc5f5b72ecb55f15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*krl_a0vqUHuX4K3pnIfUDg.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">表格描述如下所示</figcaption></figure></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="e3b3" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 8。从表</strong>中删除一条记录</p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="912f" class="mm mn in lz b gy mo mp l mq mr">DELETE FROM table_name   <br/>WHERE column_name1='value1';</span></pre><p id="970b" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注:</em></p><ul class=""><li id="6a60" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated"><em class="kx">在搜索时也可以用双引号给出值。</em></li><li id="c436" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated"><em class="kx">INT/DEC 值可以用引号引起来。这个特定的查询是不正确的，但是 RDBMS 是宽容的。</em></li><li id="0e30" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated"><em class="kx">我们不能使用 DELETE 从单个列或列表中删除值。</em></li><li id="c1cb" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated">根据 WHERE 子句，我们可以使用 DELETE 删除单行或多行。</li><li id="09d1" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated"><em class="kx">我们可以使用</em> <code class="fe lw lx ly lz b"><em class="kx">DELETE FROM table_name;</em></code> <em class="kx">删除表中的所有行，但如果 SQL 在安全模式下运行，这种情况不会发生。</em></li></ul><h1 id="46b1" class="mt mn in bd mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np bi translated"><strong class="ak">现在让我们学习更新表中的记录</strong></h1><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/59c35828d2cbf15b86cf73e50457f468.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*wfCkjpt01fDXzROt"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">坚持住学完会很好玩|来源:<a class="ae jv" href="https://giphy.com/gifs/coffee-monday-first-SRr4hnysDxRQxhwfC9" rel="noopener ugc nofollow" target="_blank"> Giphy </a></figcaption></figure></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="f650" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 9。更新表中的一条记录(而不是删除旧数据并添加新数据)</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="f876" class="mm mn in lz b gy mo mp l mq mr">UPDATE table_name   <br/>SET column_name1 = 'value1'   <br/>WHERE column_name2='value2'   <br/>AND column_name3='value3';</span></pre><p id="f669" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注:</em></p><ul class=""><li id="f736" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated">可以使用 Update 语句来代替删除已经存在的旧数据，然后更新新数据。</li><li id="a271" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated"><em class="kx">SET 关键字告诉 RDBMS，它需要将等号前的列的名称改为等号后的值。</em></li></ul></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="fa14" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 10。更新表中的多条记录</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="b367" class="mm mn in lz b gy mo mp l mq mr">SELECT table_name   <br/>SET column_name1 = 'value1',   <br/>column_name2 = 'value2';</span></pre></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="ec4c" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 11。删除一个表格</strong></p><p id="ab86" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><code class="fe lw lx ly lz b">DROP TABLE table_name;</code></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/984abf59d35b47c83410dd1d9581444d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*scrV3Q0VMLHmfLX0"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">辛辛苦苦删了你的表？来源:<a class="ae jv" href="https://giphy.com/gifs/black-and-white-jim-carrey-edited-vohOR29F78sGk" rel="noopener ugc nofollow" target="_blank"> Giphy </a></figcaption></figure><p id="a328" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">使用 ALTER 子句可以进行各种可能的更改。请记住，更改数据类型可能会导致该列中现有数据的丢失。</p><p id="438b" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 12。使用 ALTER 语句</strong>添加新列</p><ul class=""><li id="8839" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated">如果语句中没有提到 after，那么 SQL 会自动在表的末尾插入数据。</li><li id="1126" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated">可以用来提及需要输入的新列的位置的关键字<strong class="jy io">第一个</strong>和<strong class="jy io">在 your_column 之后，</strong>在之前<strong class="jy io"> your_column </strong>和<strong class="jy io">最后，第二个</strong>，第三个<strong class="jy io">在</strong>等等。</li></ul><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="7a1b" class="mm mn in lz b gy mo mp l mq mr">ALTER TABLE table_name <br/>ADD COLUMN column_name datatype(size) DEFAULT(NULL/ NOT NULL), AFTER pre_existing_column_name;  </span><span id="2404" class="mm mn in lz b gy nq mp l mq mr">#Becareful while using alter because changing data type of an existing column can lead to loss of data</span></pre><p id="de0d" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 13。重命名表格</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="0f66" class="mm mn in lz b gy mo mp l mq mr">ALTER TABLE table_name <br/>RENAME TO new_table_name;</span></pre><p id="17e2" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 14。重命名列</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="2f49" class="mm mn in lz b gy mo mp l mq mr">ALTER TABLE table_name <br/>CHANGE COLUMN old_column_name1 new_column_name1 datatype(size) DEFAULT(NULL/NOT NULL) AUTO_INCREMENT(ifneeded), <br/>CHANGE COLUMN old_column_name2 new_column_name2 datatype(size) DEFAULT(NULL/NOT NULL) AUTO_INCREMENT(ifneeded), <br/>ADD PRIMARY KEY (new_column_name1);</span></pre><p id="c20b" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="kx">注:</em></p><ul class=""><li id="c76d" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lk lh li lj bi translated"><em class="kx">auto _ increment 确保每输入一个数据，值就增加一个，因此它维护主键的规则，其中呈现一个不为空的唯一数字。</em></li><li id="a2cd" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated">每个表只能有一个 auto_increment 字段，它必须是整数，并且不能包含 null。</li><li id="711f" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lk lh li lj bi translated"><em class="kx">添加主键表示系统认为这个特定的列应该被认为是新的主键列。</em></li></ul><p id="20e6" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">15。更改列的数据类型</p><p id="3f40" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">我们可以使用 ALTER-MODIFY 来代替对现有列使用 ALTER-CHANGE</p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="6289" class="mm mn in lz b gy mo mp l mq mr">ALTER TABLE table_name MODIFY COLUMN column_name datatype(size) DEFAULT(NULL/NOT NULL) AUTO_INCREMENT(ifneeded);</span></pre><p id="3e4d" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">16。掉一列</p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="0cce" class="mm mn in lz b gy mo mp l mq mr">ALTER TABLE table_name <br/>DROP COLUMN column_name;</span></pre><p id="22cf" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io">例子</strong></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/39142d8d98875694485bb4b7b6431c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*JuQzFvABds1V1opWiKzGBQ.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">来源:Head First SQL:您的大脑在 SQL 上</figcaption></figure><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="95d7" class="mm mn in lz b gy mo mp l mq mr">ALTER TABLE hooptie<br/>ADD COLUMN car_id INT NOT NULL AUTO_INCREMENT FIRST, <br/>ADD COLUMN VIN varchar(20) AFTER car_id,<br/>MODIFY COLUMN make AFTER VIN,<br/>CHANGE COLUMN  mo model varchar(20),<br/>MODIFY COLUMN color AFTER model,<br/>MODIFY COLUMN year SIXTH,<br/>CHANGE COLUMN howmuch price DECIMAL(7,2)<br/>RENAME TO car_table;</span></pre><blockquote class="ku kv kw"><p id="7388" class="jw jx kx jy b jz ka kb kc kd ke kf kg ky ki kj kk kz km kn ko la kq kr ks kt ig bi translated"><strong class="jy io">备忘单</strong></p></blockquote><ol class=""><li id="55bb" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lg lh li lj bi translated">ALTER-ADD:用于添加表的名称、数据类型或顺序。</li><li id="667f" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lg lh li lj bi translated">ALTER-CHANGE:用于更改表的名称、数据类型或顺序。</li><li id="ca1f" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lg lh li lj bi translated">ALTER-MODIFY:用于改变列的数据类型和顺序。</li><li id="575a" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lg lh li lj bi translated">ALTER-RENAME TO:用于更改表名。</li><li id="572f" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lg lh li lj bi translated">ALTER- DROP COLUMN:用于从表中删除任何列。</li><li id="a1f3" class="lb lc in jy b jz ll kd lm kh ln kl lo kp lp kt lg lh li lj bi translated">第一，最后，第二，第三，第四，…，在 column_name 之后，在 column_name 之前可以用来指定列的顺序。</li></ol><p id="4bc4" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">*请注意，在某些 RDBMS 中，我们只能在将列添加到表中时更改它们的顺序。</p><blockquote class="ku kv kw"><p id="1fc6" class="jw jx kx jy b jz ka kb kc kd ke kf kg ky ki kj kk kz km kn ko la kq kr ks kt ig bi translated"><strong class="jy io">附加信息</strong></p></blockquote><p id="754f" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io">要点</strong></p><ol class=""><li id="7fba" class="lb lc in jy b jz ka kd ke kh ld kl le kp lf kt lg lh li lj bi translated">不能保证表中的最后一行是添加到表中的最新一行。</li></ol><p id="491c" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">2.重复记录总是不好的，需要消除，因为随着表变得越来越大，它们会占用空间并降低 RDBMS 的速度。</p><p id="a519" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">3.可以在 INSERT 语句中省略列列表。但是，如果没有列出目标列，则必须插入到表中的所有列中，并注意值列表中值的顺序；您必须按照数据库响应选择查询时显示列的顺序来提供值。无论哪种方式，您都应该注意列约束，因为如果您不插入到每一列中，您将创建一个某些值为空的行。如果存在被约束为不接受空值的列，这可能会导致错误。</p><p id="c42e" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">4.在分析所有可用数据后，应谨慎使用带有 where 子句的 Delete 语句。</p><p id="bc0a" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">5.如果对表不确定，请始终使用带有 where 子句的 select 语句，在该语句之后我们可以删除不需要的记录。</p><p id="178d" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">6.UPPER()和 LOWER()函数可用于将文本分别转换为大写和小写。</p><blockquote class="ku kv kw"><p id="503a" class="jw jx kx jy b jz ka kb kc kd ke kf kg ky ki kj kk kz km kn ko la kq kr ks kt ig bi translated"><strong class="jy io">食谱中的例子</strong></p></blockquote><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="a0b1" class="mm mn in lz b gy mo mp l mq mr">#1.1 Creating a database, using it to create a table and insert values into it</span><span id="060a" class="mm mn in lz b gy nq mp l mq mr">CREATE DATABASE learning;<br/>USE learning;<br/>CREATE TABLE emp<br/>(<br/>EMPNO int,<br/>ENAME varchar(10),<br/>JOB varchar(20),<br/>MGR int,<br/>HIREDATE varchar(20),<br/>SAL int,<br/>COMM int,<br/>DEPTNO int<br/>);<br/>INSERT INTO emp<br/>(<br/>EMPNO,<br/>ENAME,<br/>JOB,<br/>MGR,<br/>HIREDATE,<br/>SAL,<br/>COMM,<br/>DEPTNO<br/>)<br/>VALUES<br/>(7369,'SMITH','CLERK',7902,'2005-12-17',800,NULL,20),<br/>(749, 'ALLEN', 'SALESMAN' ,7698, '20-FEB-2006',1600,300,30),<br/>(7521, 'WARD', 'SALESMAN', 7698,'22-FEB-2006', 1250, 500, 30),<br/>(7566,'JONES','MANAGER', 7839, '02-APR-2006', 2975,NULL, 20),<br/>(7654,'MARTIN', 'SALESMAN', 7698, '28-SEP-2006', 1250, 1400, 30),<br/>(7698, 'BLAKE', 'MANAGER' ,7839, '01-MAY-2006', 2850,NULL, 30),<br/>(7782, 'CLARK', 'MANAGER', 7566, '09-JUN-2006', 2450,NULL, 10),<br/>(7788, 'SCOTT', 'ANALYST', 7839, '09-DEC-2007', 3000,NULL, 20),<br/>(7839, 'KING', 'PRESIDENT', NULL, '17-NOV-2006', 5000,NULL, 10),<br/>(7844, 'TURNER', 'SALESMAN' ,7698, '08-SEP-2006', 1500, 0, 30),<br/>(7876, 'ADAMS', 'CLERK', 7788, '12-JAN-2008', 1100, NULL, 20),<br/>(7900, 'JAMES', 'CLERK', 7698, '03-DEC-2006', 950,NULL, 30),<br/>(7902, 'FORD', 'ANALYST', 7566, '03-DEC-2006', 3000, NULL, 20),<br/>(7934, 'MILLER', 'CLERK', 7782, '23-JAN-2007', 1300, NULL, 10);</span></pre><p id="3fd2" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">ℹ️可以在 INSERT 语句中省略列列表:但是，如果没有列出目标列，则必须插入到表中的所有列中，并注意值列表中值的顺序；您必须按照数据库响应 SELECT *查询时显示列的顺序来提供值。无论哪种方式，您都应该注意列约束，因为如果您不插入到每一列中，您将创建一个某些值为空的行。如果存在被约束为不接受空值的列，这可能会导致错误。</p><p id="5733" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 1.2 将表初始化期间指定的默认值插入表中</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="5294" class="mm mn in lz b gy mo mp l mq mr">INSERT INTO dept<br/>(<br/>DEPTNO,<br/>DNAME,<br/>LOC<br/>)<br/>VALUES();<br/><br/># This will enter the default values of all the columns that were declared while creating the table.</span></pre><p id="7656" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 1.3 将空值插入到已经用默认值初始化的列中</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="0c53" class="mm mn in lz b gy mo mp l mq mr"><br/>INSERT INTO dept<br/>(<br/>DEPTNO,<br/>DNAME,<br/>LOC<br/>)<br/>VALUES(null,'tom','c_block');<br/><br/>#This will enter a null value although there is a default that is specified for DEPTNO.</span></pre><p id="33d5" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 1.4 创建具有相同结构的表，另一列的数据类型</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="70ba" class="mm mn in lz b gy mo mp l mq mr">INSERT INTO dept_copy<br/>SELECT *<br/>FROM dept<br/>WHERE 1=0;</span></pre><p id="833f" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 1.5 将数据/数据行从一个表复制到另一个表</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="e4e9" class="mm mn in lz b gy mo mp l mq mr">#1.5 Copying data/rows of data from one table to another table<br/>INSERT INTO dept_east<br/>SELECT deptno,dname,loc<br/>FROM dept<br/>WHERE loc='Newyork' OR loc='London';</span></pre><p id="c9b9" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 1.6 通过使用 create view 语句阻塞特定表中的插入</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="a829" class="mm mn in lz b gy mo mp l mq mr">CREATE VIEW dept_copy AS<br/>SELECT empname,empid,loc<br/>FROM dept<br/><br/>#By doing so and providing access to the dept_copy we can limit the users to only access the 3 columns in the table, it will be seen as follows</span><span id="c87d" class="mm mn in lz b gy nq mp l mq mr">INSERT INTO dept_copy<br/>VALUES ('Tom','149','India')<br/>#This above statment will be synonymous to<br/>INSERT into dept<br/>(empname, empid, loc)<br/>VALUES ('Tom','149','India')</span></pre><p id="8a09" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 2.1 更新表格中的值，以便所有工程师将获得 10%的加薪</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="5098" class="mm mn in lz b gy mo mp l mq mr">UPDATE dept<br/>SET sal = sal*1.1<br/>WHERE job = 'engineer';</span></pre><p id="dbca" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 2.2 当更新值的条件在另一个表中时，使用算术运算符更新表中的值</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="71c8" class="mm mn in lz b gy mo mp l mq mr">UPDATE dept<br/>SET sal = sal*1.1<br/>WHERE empid in (SELECT empid from bept_bonus_eligible);</span></pre><p id="fd1a" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 2.3 当更新值的条件在另一个表中时，更新一个表中的值</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="c491" class="mm mn in lz b gy mo mp l mq mr">UPDATE dept d<br/>SET d.sal = b.sal<br/>WHERE emp_id in (SELECT emp_id from bept_bonus_eligible b);</span><span id="5c45" class="mm mn in lz b gy nq mp l mq mr">UPDATE dept d, new_sal ns<br/>SET d.sal = ns.sal<br/>WHERE d.emp_id=ns.emp_id;</span></pre><p id="f9e4" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 3.1 从表格中删除所有记录</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="7b32" class="mm mn in lz b gy mo mp l mq mr">#3.1 Delete all record from the table<br/>DELETE from emp;<br/><br/>#`TRUNCATE` can be used to delete all the rows in the table and it is faster than the delete statement, but read more about it before using it for deleting tables.</span></pre><p id="be47" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 3.2 从表格中删除具体记录</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="670b" class="mm mn in lz b gy mo mp l mq mr">#3.2 Delete specific records from table<br/>DELETE from emp WHERE dept_no =10;</span></pre><p id="e48e" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 3.3 从一个表中删除另一个表中不存在的特定记录</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="f85a" class="mm mn in lz b gy mo mp l mq mr">DELETE FROM emp WHERE NOT EXISTS( SELECT * FROM dept WHERE dept.dept_id = emp.deptid);<br/><br/>#or we can also use<br/>DELETE FROM emp WHERE dept_id not in (SELECT dept_id FROM dept);<br/><br/>#MYsql users cannot reference the same table twice in a delete statement</span></pre><p id="fc35" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 3.4 使用同一表格的序号删除表格中的重复项</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="4b26" class="mm mn in lz b gy mo mp l mq mr">DELETE FROM emp<br/>WHERE emp_id<br/>NOT IN (SELECT MIN(serialno)<br/>				FROM (SELECT serialno,emp_id FROM emp) temps<br/>				GROUP BY emp_id);</span></pre><p id="fc5f" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> 3.5 基于一个表中的记录多于另一个表中的 x 个计数的条件，删除一个表中的记录</strong></p><pre class="lr ls lt lu gt mi lz mj mk aw ml bi"><span id="d11b" class="mm mn in lz b gy mo mp l mq mr">#Here the count is the number of accidents<br/><br/>DELETE FROM emp<br/>WHERE dept_id<br/>NOT IN (SELECT dept_id FROM (SELECT dept_id<br/>				COUNT(*) as total<br/>				FROM dept_accidents<br/>				GROUP BY dept_id)<br/>				WHERE	total&gt;=3);</span><span id="ad67" class="mm mn in lz b gy nq mp l mq mr"><br/>DELETE FROM emp<br/>WHERE dept_id<br/>NOT IN  (SELECT dept_id<br/>	 FROM dept_accidents<br/>	 GROUP BY dept_id)<br/>	 HAVING COUNT(*)&gt;=3);</span></pre></div></div>    
</body>
</html>