<html>
<head>
<title>How to implement simple onScroll animations in your React applications with intersectionObserver.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 intersectionObserver 在 React 应用程序中实现简单的 onScroll 动画。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-implement-simple-onscroll-animations-in-your-react-applications-with-intersectionobserver-96ffb3e95482?source=collection_archive---------13-----------------------#2022-01-23">https://blog.devgenius.io/how-to-implement-simple-onscroll-animations-in-your-react-applications-with-intersectionobserver-96ffb3e95482?source=collection_archive---------13-----------------------#2022-01-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="990a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这在开发任何 web 应用程序时都是普遍存在的，当用户滚动时创建动画。</p><p id="392d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">根据 sofware craftmanship 手册，理想情况是使用尽可能少的第三方模块来设计您的功能，使用健壮可靠的代码，随着项目的进展，您可以简单地重用这些代码。</p><p id="df30" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本教程中，我将解释如何使用自定义钩子和一些 css 关键帧来制作页面动画。</p><p id="887d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我在我所有的项目中使用这种技术，它工作得非常好，并且被所有的浏览器和移动设备支持。</p><p id="67bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个 tuto 的最终结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/18746d3df27a65350a0dc12d30c4c7e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*cr830BC4ex2EQzzrRwfIjw.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">现场演示:<a class="ae ky" href="https://intersectionobserver-demo.netlify.app/" rel="noopener ugc nofollow" target="_blank">https://intersectionobserver-demo.netlify.app/</a></figcaption></figure><p id="5723" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你准备好了…我们走吧！</p><p id="f459" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，转到我为本教程创建的存储库…在 startTemplate 分支，您会发现一个没有任何动画的 SPA React 模板，以便一步一步地按照步骤克隆或下载源文件。</p><p id="1913" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ky" href="https://github.com/rodolphe37/intersection_observer_animation_tuto/tree/startTemplate" rel="noopener ugc nofollow" target="_blank">https://github . com/rodolphe 37/intersection _ observer _ animation _ tuto/tree/start template</a></p><p id="17cc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后在代码编辑器中打开项目，对于这个项目，我使用 VScode。</p><p id="854b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">像其他经典的 react 应用程序一样，在你的控制台中安装依赖项。</p><p id="886f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过纱线启动(或 npm 启动)启动项目。</p><p id="9858" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你眼前有这个(带任何动画):</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/395213afba010a590c229a5ec75a6642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*sYTptYZqGa35V205_Kz89g.gif"/></div></figure><p id="df94" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个项目的结构非常简单，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi kz"><img src="../Images/d72f080eb48578b99d8ec701b14ff82c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yi87eIOcAO3JNnoTZyNj6g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">包含一些组件的 React 项目(CRA)的基本结构。</figcaption></figure><p id="8dba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在/src 文件夹中，创建一个 hooks 文件夹，然后在这个新文件夹中创建一个 useIsInViewport.js 文件。</p><p id="e376" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个文件中，我们将创建一个定制钩子，包含在你的项目中运行 css 动画所需的逻辑。</p><p id="9b19" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">定制钩子是实践“关注点分离”的好方法(另一种干净的代码范例——将逻辑与返回 jsx 的组件分离。)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi la"><img src="../Images/163875f5f1c82810e4d8ae77e6a1af0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vC04i7et8Wh6g_gpV6BrSg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">动画的所有逻辑</figcaption></figure><p id="8dc4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之后，转到 App.js 文件</p><p id="cbd1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您需要调用自定义挂钩，以便 react 考虑它。</p><p id="4845" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此，我们调用了非结构化数据的定制钩子<br/>，然后我们创建了一个 useLayoutEffect 函数来实例化逻辑和需要动画的 html 元素之间的链接。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lb"><img src="../Images/52ab40421b8542bc0b8b3332b24669c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qFcp6vaOqsb_V6TyszrDqw.png"/></div></div></figure><p id="c51c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一步中，我们将添加本教程其余部分所需的 css 代码。</p><p id="9a94" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我实现了场景图，当元素可见或不可见时，有不同的延迟和不同的动画。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lc"><img src="../Images/c5da307d03530ae0bbdb92dca2a88bf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vUgdmeBGn0A91Ubf7QAXw.png"/></div></div></figure><p id="c94b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我创建这个例子需要的关键帧。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ld"><img src="../Images/d29c76813032c66993c1f0589b97eb26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lfExgnPxNfEB50YYVirF7w.png"/></div></div></figure><p id="0838" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当然，你可以放你想要的关键帧/动画，一旦你明白了其中的逻辑，你就可以根据你的意愿自定义这个方法。</p><p id="6589" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，在最后一步，我将在选定的元素上实现动画。</p><p id="fe06" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们从组件 HeroComponent.jsx 开始</p><p id="74e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我在具有“hero-inner”类的 div 上放置了一个 data-inViewport= "所需的关键帧"。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi le"><img src="../Images/c2767c30da9011c28ccaf564db27c4b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rz8swKV5F9VvHlRhDt5SmQ.png"/></div></div></figure><p id="835d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，FeaturesComponent.jsx，<br/>我将 data-inViewport 设置为每个具有类名“feature text-center”的 div。<br/>然而，我为每个块设置了不同的延迟，第一个和第四个块的延迟为 0.2s，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lf"><img src="../Images/60e4320595736bbf10e5ad5fc4a36090.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zFrVisGY7K530-s75ZVpgA.png"/></div></div></figure><p id="a129" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第二个和第五个具有 0.5 秒的延迟，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lg"><img src="../Images/b583caf5fe1dbb43eb9c79b4fb222f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hzTsM56KJFZG6hpHoRtHsQ.png"/></div></div></figure><p id="ea65" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">并且第三和第六块具有 0.8s 的延迟，以便具有轻微的瀑布效果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lh"><img src="../Images/175bb622fda2df93817ff91e75633d7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1n_yy80U33_2tIFyGNyB3g.png"/></div></div></figure><p id="3629" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后是 pricingComponent.jsx，<br/>我为标题和段落添加了一个动画，为 pricing-tables-wrap 元素添加了另一个动画。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi li"><img src="../Images/d1c669e8a1e315c795040a90f841912d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n_onRMREPz7YkKdNNPEURA.png"/></div></div></figure><p id="df7d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，来了 CTA component . jsx……</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lj"><img src="../Images/449e5b2670a5f8579947cbd226c61348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BuH3jcSE2Id4lYglgb2fkA.png"/></div></div></figure><p id="6cb9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后是 FooterComponent.jsx</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lk"><img src="../Images/1eb99b61970792382a4d5f7dae13682f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RR1_H0ZQV9BpnHOb90mlug.png"/></div></div></figure><p id="dc54" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有了它，你就会理解这个解决方案的逻辑和简单性。</p><p id="5b2a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这件芭蕾舞裙成品的存放处:</p><p id="083c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ky" href="https://github.com/rodolphe37/intersection_observer_animation_tuto/tree/main" rel="noopener ugc nofollow" target="_blank">https://github . com/rodolphe 37/intersection _ observer _ animation _ tuto/tree/main</a></p><p id="5d47" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">享受这个世界。</p></div></div>    
</body>
</html>