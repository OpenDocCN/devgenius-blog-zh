<html>
<head>
<title>Adding Animations to A rigged Character In Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Unity中给一个被操纵的角色添加动画</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/adding-animations-to-a-rigged-character-in-unity-c47b291a829f?source=collection_archive---------0-----------------------#2021-06-20">https://blog.devgenius.io/adding-animations-to-a-rigged-character-in-unity-c47b291a829f?source=collection_archive---------0-----------------------#2021-06-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2ddc" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用Mixamo动画</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3c10f2f51387244fa912a9fa345b3897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GF6nnLDjUJl6CpwkScKcBw.gif"/></div></div></figure><p id="1783" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Mixamo是一个为你的游戏获取角色和动画的好地方。他们已经准备好使用角色，你可以上传一个模型，让它自动装配。他们也有运动捕捉动画，你可以使用任何人形装备的角色，最好是装备设置与他们的装备相同。</p><div class="lk ll gp gr lm ln"><a href="https://www.mixamo.com/#/" rel="noopener  ugc nofollow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd io gy z fp ls fr fs lt fu fw im bi translated">米夏莫</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">编辑描述</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">www.mixamo.com</p></div></div></div></a></div><p id="ad92" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我已经有一个角色可以使用Mixamo的动画。所以我不需要角色。目前他们有3页的字符。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lw"><img src="../Images/6827ea4a4cea763316356b90355fb53f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pGDyg1JTXTs8k7BpQmIeng.gif"/></div></div></figure><h1 id="0d1f" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">获取动画</h1><p id="951f" class="pw-post-body-paragraph ko kp in kq b kr mp jo kt ku mq jr kw kx mr kz la lb ms ld le lf mt lh li lj ig bi translated">他们有接近2500个动画，你可以从中选择，缩小范围的最好方法是使用搜索栏来搜索。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/650020f9bf492fd48ad57a1afd806714.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*N0PHwRCv8MzO_MuccsnZug.gif"/></div></div></figure><p id="b9ca" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我建议通过单词包搜索，得到一个符合你需求的动画包。你可以在左边的窗口预览。我想我会选择动作冒险套装，因为我喜欢跳跃/坠落的动画</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mv"><img src="../Images/2870b35aefa40b555a8c8a6336f5503f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jszwpygnUGyHiqrt8Sk-wA.gif"/></div></div></figure><p id="e899" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">一旦你有了你想要的动画，就下载它。有几种不同的选择。我不需要一个角色，所以我把姿势设置为无角色(使用T型姿势或皮肤以获得更好的效果)，对于格式，我将使用统一的FBX。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mw"><img src="../Images/5b263800f5976d3d0adc9099ea87f810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PIkytPiKrwRs4LmX5JRayw.gif"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mx"><img src="../Images/7d117409a0d470765f6dcc9e31d7c442.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hlBAnevwVFoSVM2VzZ5FXw.gif"/></div></div></figure><p id="6620" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">下载完成后，我将zip文件解压到我的项目文件夹中。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi my"><img src="../Images/f40e0fef817ee7c64fb612b540b8b747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cmdpA09qI9jzYZh4Pc7e9g.gif"/></div></div></figure><p id="99f7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">接下来在Unity中，我确保将动画类型设置为人形。为了预览动画，我把我的角色拖到预览面板上。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mz"><img src="../Images/10ebbeefa358af6b8e7bce3329ed8303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yxaVFOQpXRLX4irCNg6UMQ.gif"/></div></div></figure><h1 id="eb0d" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">使用动画</h1><p id="0131" class="pw-post-body-paragraph ko kp in kq b kr mp jo kt ku mq jr kw kx mr kz la lb ms ld le lf mt lh li lj ig bi translated">我需要创建一个可以在我的播放器上使用的控制器。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi na"><img src="../Images/dc3610d9a55893d189858e63c70374c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Ky1EqwN0qAPfa4nh7QiEMQ.gif"/></div></div></figure><p id="90bd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我需要做的就是把我的动画拖到控制器上。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/576be7301f59f6ae01f4192e43e54c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YrkmmfFjDm3URP-wZlOLTQ.gif"/></div></div></figure><p id="fdb4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">角色空闲，但动画播放一次。为了解决这个问题，我需要编辑动画循环的时间。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nc"><img src="../Images/5163491dc55afc0a52db7712985c60df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xV58UvM77_nS_Wr64m0gPw.gif"/></div></div></figure><h1 id="f33a" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">根运动</h1><p id="aaa2" class="pw-post-body-paragraph ko kp in kq b kr mp jo kt ku mq jr kw kx mr kz la lb ms ld le lf mt lh li lj ig bi translated">动画带有根部运动。当我将动画速度设置为1时，玩家开始奔跑。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/8b5f7b404d87b165a913b5d78a24d034.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9zR7GkhiIl31947dDkTkjQ.gif"/></div></div></figure><p id="2779" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果我想让动画控制玩家角色的运动，这是很棒的，很多角色控制器都是这样做的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ne"><img src="../Images/d3618bd78244f8c6df1aea74fb1004bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*q6aOGfRUL1gZPgoj1N4eJw.gif"/></div></div></figure><p id="22a1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这不是我想要的行为。我希望从行为中控制一切。动画师将只用于显示动画。</p><p id="cb07" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要解决这个问题，我有两个选择。一种选择是回到Maximo，通过选择“就位”选项下载我想要使用的动画。下载包时，此选项不可用。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nf"><img src="../Images/fe7a8aad119bc6cafc6ef2e737a430c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GAiWav2maPdA__xOQQIS7A.gif"/></div></div></figure><p id="176c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">通过这个动画</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/b9cab23e0d1919a8612052dcc6df96ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*A2-TSMhqDd9USbhYO6S2nA.gif"/></div></div></figure><p id="7568" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当然，我必须将装备设置为人形，动画设置为循环。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nh"><img src="../Images/21a69eb20eaf4cac53bd94d341cb2afc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*H8eEOIL8qLMKiP4hOKuLvQ.gif"/></div></div></figure><p id="3c52" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">另一个选项是设置动画不应用根运动。现在，即使动画中有根部运动，它也不会影响我的角色。这就是我想要的。即使我选择下载没有应用根运动的单个动画，我也可能有一些带有根运动的动画，比如空闲动画。另外，我不必下载每一个单独的议案。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/94077536ae9307c8cf87054c0b7db9a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*G2HT4mRJgzm_mhrv3AEpCw.gif"/></div></div></figure><h1 id="9ee9" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">控制动画师</h1><p id="66ba" class="pw-post-body-paragraph ko kp in kq b kr mp jo kt ku mq jr kw kx mr kz la lb ms ld le lf mt lh li lj ig bi translated">现在我需要做的就是在玩家移动的时候把这个信息传递给动画师。为此，我将为动画和<a class="ae nj" rel="noopener ugc nofollow" target="_blank" href="/script-communication-in-unity-using-scriptable-objects-ad2ef0d99c59"> <strong class="kq io">脚本对象变量</strong> </a>使用单独的行为。我使用包管理器  <strong class="kq io"> </strong>安装了我的<a class="ae nj" rel="noopener ugc nofollow" target="_blank" href="/creating-custom-packages-for-use-in-unity-7dfbaa49e4b4"> <strong class="kq io">核心框架</strong></a></p><p id="9058" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我将玩家动画组件添加到玩家模型中。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nk"><img src="../Images/1addb78bf4c813f0fdffe3d89dfddccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*D1RYNtd0AIRLUnLWRPgkbg.gif"/></div></div></figure><p id="6acc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我需要一个给动画师的参考来传递需要的信息。</p><p id="d32e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我的动画器中唯一的参数是速度浮动，当我添加更多的动画时，我会添加更多的参数。我必须使用ScriptableObject引用的值来设置动画师的速度浮动。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nl"><img src="../Images/6f4ed76f0fe8228ddd30ca98137e6f1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3zs6DfRyY0N9by-Sy_kmZA.gif"/></div></div></figure><p id="803c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我创建了我的播放器速度变量，并将其添加到播放器动画组件中。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nm"><img src="../Images/5f89ee3621b2af23c2ea0d9c085af613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wCNq0VD4W9do86WJGQNiNw.gif"/></div></div></figure><p id="34cd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，更改变量的值会使动画师播放正确的动画。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/b9fc4209d45794ed0cffa0a0a104c229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mTt0_y8KhPOH9h7_XDyTTQ.gif"/></div></div></figure><p id="2de0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我需要在玩家行为中设置这个值。我将它设置为移动方向的绝对值，因为动画师正在寻找一个大于0.1的值来切换到正在运行的动画，并且输入被设置为-1，0，0r 1。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi no"><img src="../Images/305ef221fa9163cd5f77e81e71ef2c96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QU486mm6GJhjEAplGQSYEw.gif"/></div></div></figure><p id="e24e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在检查器中设置参数后，当我移动时，我的播放器现在播放正确的动画。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mw"><img src="../Images/a60c26740be0f88e9485356eb130bb0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*EEEtlYL5F25tfO0Rh9RYkQ.gif"/></div></div></figure><h1 id="41a3" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">跑步、跳跃和空闲的动画</h1><p id="bf72" class="pw-post-body-paragraph ko kp in kq b kr mp jo kt ku mq jr kw kx mr kz la lb ms ld le lf mt lh li lj ig bi translated">我完成了控制器。如果跳转为真，它将从任何状态跳转到运行状态。I跳跃时根据速度切换回怠速或运行为假。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nc"><img src="../Images/e802c511d360fce370b501ceb1b8164d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Bc8GjrTe-1kBlbzKBLN8eQ.gif"/></div></div></figure><h2 id="1f12" class="np ly in bd lz nq nr dn md ns nt dp mh kx nu nv mj lb nw nx ml lf ny nz mn oa bi translated">这些行为</h2><p id="e939" class="pw-post-body-paragraph ko kp in kq b kr mp jo kt ku mq jr kw kx mr kz la lb ms ld le lf mt lh li lj ig bi translated">在玩家动画行为中，我添加了设置:如果跳转引用的值改变，动画师会跳转。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/b8606e80ec117273d5b919e531c09e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jRjdISfdRhOQwBYOJuNlbg.png"/></div></div></figure><p id="7bbb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在玩家行为中，如果控制器接地，我将Bool引用设置为false，如果玩家跳跃，我将它设置为true。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/9c5896e348d3e197b6c9f8c8e87f9bb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5wmdDA5NFUd0w12Pw5T5XQ.png"/></div></div></figure><p id="33ab" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我的玩家可以在游戏中正确地跑和跳了。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/bd43e41f5234d05fda4b91501c8c69ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eRJ9rQ_Ri_HL6J4-WrTFAA.gif"/></div></div></figure></div></div>    
</body>
</html>