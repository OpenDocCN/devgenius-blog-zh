<html>
<head>
<title>Compiling C files with gcc</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 gcc 编译 C 文件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/compiling-c-files-with-gcc-62f3849c524a?source=collection_archive---------0-----------------------#2020-02-06">https://blog.devgenius.io/compiling-c-files-with-gcc-62f3849c524a?source=collection_archive---------0-----------------------#2020-02-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/d9f41fccbcf06fb20f66dc3f1aee0403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*Ca2_nhBvXPqnMp9VrYisXQ.png"/></div></figure><p id="4493" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在这篇文章中，我将解释什么是 C 语言，以及在达到 C 语言的每一步中会发生什么，这就是编译。</p><h1 id="6563" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">编程语言 C </strong></h1><p id="1244" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">c 是一种通用编程语言，它提供了语法经济性、流控制和简单的结构以及一组很好的操作符。它不是一种非常高级的语言，而是一种小而简单的语言，不专门用于任何类型的应用。这使它成为一种强大的语言，有无限的应用领域，最重要的是，你学得很快。在很短的时间内，一个程序员可以使用整个语言。</p><p id="10a6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">与解释语言相反，C 也是一种编译语言，这意味着用 C 编写的源文件应该被编译才能执行。</p><h1 id="0673" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">咱们<strong class="ak">的明星</strong></h1><p id="cbbe" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">我们需要一个类似 Unix 的操作系统，还可以访问<a class="ae ls" href="https://es.wikipedia.org/wiki/Shell_(inform%C3%A1tica)" rel="noopener ugc nofollow" target="_blank"> <em class="lt">外壳</em> </a>，<br/>，为此，我们使用一个终端，或终端仿真器，它只是一个窗口，允许我们与外壳进行交互。在终端内部，我们应该看到 shell 提示符，它包含您的用户名和机器名，后面是 PS1 环境变量，通常是“$”字符。<br/>最后，我们需要一个文本编辑器，比如 vi 或 emacs，来创建一个源文件。</p><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/6a65e09464399203e9b704d71fa8a4c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*tahz1qQuQQfM7Uxz61C2bQ.png"/></div></figure><h1 id="ef55" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">汇编</h1><p id="2645" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">编译是将一种语言的代码转换成另一种语言，在执行之前的一个步骤。通常，当我们想到编译时，我们谈论的是它最实际的版本，它给我们一个可执行的二进制文件作为输出。</p><p id="2180" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">gcc 编译过程有四个不同的步骤:</p><ul class=""><li id="fda0" class="lz ma in jt b ju jv jy jz kc mb kg mc kk md ko me mf mg mh bi translated">预处理</li><li id="7fcf" class="lz ma in jt b ju mi jy mj kc mk kg ml kk mm ko me mf mg mh bi translated">编译</li><li id="54fe" class="lz ma in jt b ju mi jy mj kc mk kg ml kk mm ko me mf mg mh bi translated">组装</li><li id="427d" class="lz ma in jt b ju mi jy mj kc mk kg ml kk mm ko me mf mg mh bi translated">链接</li></ul><p id="0152" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在我们的编辑器 vi 中，我们创建了一个所谓的 main.c，它包含以下内容:</p><pre class="lv lw lx ly gt mn mo mp mq aw mr bi"><span id="b74a" class="ms kq in mo b gy mt mu l mv mw">#include &lt;stdio.h&gt;<br/><br/>/**<br/> * main - Entry point<br/> *<br/> * Return: Always 0 (Success)<br/> */<br/>int main(void)<br/>{<br/>    puts("Hello, World");<br/>    <!-- -->return (0);<br/>}</span></pre><p id="af2d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">为了使我们的 main.c 代码可执行，我们需要输入命令“gcc main.c ”,编译过程将经历它包含的所有四个步骤。当然 gcc 有选项允许我们在每一步之后停止编译过程。让我们来看看它们。</p><h2 id="d8c0" class="ms kq in bd kr mx my dn kv mz na dp kz kc nb nc ld kg nd ne lh kk nf ng ll nh bi translated">1.<strong class="ak">预处理器</strong></h2><p id="9e48" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">在这个阶段，指令被解释给预处理器。其中，用#define 初始化的变量在代码中所有出现它们名字的地方都被替换为它们的值。</p><p id="6b45" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这一步的输出将存储在一个带有“.”的文件中。I "扩展名，所以这里将它放在 main.i. <br/>中，为此我们使用以下命令:</p><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/6c4f5bca9231e42b02fca44f61b08e57.png" data-original-src="https://miro.medium.com/v2/resize:fit:368/format:webp/1*9JOcGrpsV8WDIhOHv_LQ0Q.png"/></div></figure><h2 id="460c" class="ms kq in bd kr mx my dn kv mz na dp kz kc nb nc ld kg nd ne lh kk nf ng ll nh bi translated">2.编译器</h2><p id="a4d7" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">编译将 C 代码转换成我们机器处理器的汇编语言。在这一步之后，我们可以在 gcc 命令中使用“-S”选项，然后按 enter 键。</p><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/638efa647f1bbea1bd9e7dce36525e14.png" data-original-src="https://miro.medium.com/v2/resize:fit:374/format:webp/1*KejY5j94wA_rDQu-7kIL2A.png"/></div></figure><h2 id="fb4a" class="ms kq in bd kr mx my dn kv mz na dp kz kc nb nc ld kg nd ne lh kk nf ng ll nh bi translated">3.装配工</h2><p id="63f2" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">汇编将汇编语言编写的程序转换成目标代码，目标代码是处理器可执行的机器语言的二进制文件。这将生成一个以“.”结尾的文件。o”。</p><p id="8eb3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在这一步之后，我们可以通过在 gcc 命令中使用选项"-c "并按 enter 键来停止编译过程。</p><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/3bc957420f934855a5448e23e3e8bbf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:364/format:webp/1*2Aq0HdV3itx1qnEDqHh8Vg.png"/></div></figure><h2 id="6f42" class="ms kq in bd kr mx my dn kv mz na dp kz kc nb nc ld kg nd ne lh kk nf ng ll nh bi translated">4.链接器</h2><p id="871d" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">我们的代码中包含的 C / C ++函数，比如示例中的 printf()，已经在系统中的现有库中编译和汇编了。有必要以某种方式将这些函数的二进制代码合并到我们的可执行文件中。这是链接阶段，目标代码中的一个或多个模块与库中的现有代码相遇。</p><p id="45f6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">默认情况下，在第四步也是最后一步之后，也就是当您键入完整的“gcc main.c”命令而没有任何选项时，编译器将创建一个名为 a.out 的可执行程序，我们可以通过键入。/a .out"。</p><p id="c6f4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们也可以选择用我们想要的名字来创建一个可执行程序，方法是在 gcc 命令中添加"-o "选项，将<em class="lt">放在我们正在编译的一个或多个文件的名称</em>之后，然后按 enter 键:</p><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/a2ac71cdc86904df7afb151f64cefc94.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*ANezm1jN0Pi6kRRaMlfy4g.png"/></div></figure><h1 id="7fa5" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">一步到位。</h1><p id="4fdf" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">在只有一个源文件的程序中，上述过程可以一步完成:</p><p id="b7aa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">$ gcc -o main main.c</p><p id="9c23" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">未创建 main.o 文件；中间目标代码在操作员看不见的情况下被创建和销毁，但可执行程序出现在那里并工作。</p></div></div>    
</body>
</html>