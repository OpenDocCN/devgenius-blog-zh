<html>
<head>
<title>Hidden Onion Service using Tor, nftables and NGINX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Tor、nftables 和 NGINX 的隐藏洋葱服务</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/hidden-onion-service-using-tor-nftables-and-nginx-de0cf02527e0?source=collection_archive---------0-----------------------#2022-05-22">https://blog.devgenius.io/hidden-onion-service-using-tor-nftables-and-nginx-de0cf02527e0?source=collection_archive---------0-----------------------#2022-05-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/46837ce70cc4502a274d8454fe4a2d84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HFoXKB0sK049JcYubM9i6Q.jpeg"/></div></div></figure><p id="6d6c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Tor 提供了额外的隐私保护。在这篇文章中，我们将在 NGINX 服务器上使用 Tor 建立一个隐藏的洋葱服务。</p><p id="f8b9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我假设您已经知道如何在云提供商或 VPS 上设置 GNU/Linux 服务器，并且知道如何使用您喜欢的 shell。我们将集中在 Debian 衍生的系统上安装它。</p><h1 id="3588" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">更新系统</h1><p id="2b03" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">所以我们首先要做的是更新系统。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="a8b5" class="mf ku in mb b gy mg mh l mi mj">sudo apt update<br/>sudo apt upgrade</span></pre><h1 id="47d2" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">安装防火墙</h1><p id="e068" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">现在我们将安装 nftables。如果你从未听说过它，它基本上与 iptables (legacy)非常相似，但却是一个更新的版本(自 2014 年以来)。与 iptables 相比，nftables 的优点是代码重复较少，并且更容易扩展到新协议。</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/665f1b1c58aa24f648ec088c573f99cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tK2gsfwQbElLi5KUurFRMA.jpeg"/></div></div></figure><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="d0da" class="mf ku in mb b gy mg mh l mi mj">sudo apt install -y nftables<br/>sudo systemctl enable nftables<br/>sudo systemctl start nftables</span></pre><p id="aa0a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们现在已经安装了 nftables，我们将添加一个表和一个链，我们将把规则附加到其中。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="133f" class="mf ku in mb b gy mg mh l mi mj">sudo nft add table inet tor_table<br/>sudo nft add chain inet tor_table tor_chain</span></pre><p id="db84" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建一个规则来接受所有相关的和已建立的流量。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="1e43" class="mf ku in mb b gy mg mh l mi mj">sudo nft add rule inet filter tor_chain ct state related,established counter accept</span></pre><p id="e3bc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们添加一条规则来接受环回接口流量。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="8700" class="mf ku in mb b gy mg mh l mi mj">sudo nft add rule inet filter tor_chain iif lo counter accept</span></pre><p id="412a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们还添加了对端口 22 的开放访问，这是我们的 VM/VPS 的 SSH 端口。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="06bd" class="mf ku in mb b gy mg mh l mi mj">sudo nft add rule inet filter tor_chain tcp dport 22 counter accept</span></pre><p id="3714" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">丢弃所有其他传入流量。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="208b" class="mf ku in mb b gy mg mh l mi mj">sudo nft add rule inet filter tor_chain counter drop</span></pre><p id="3a3b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意，我们不需要打开端口 80，即 HTTP 端口。这是因为洋葱服务通过集合点与客户端通信的方式。</p><p id="afd4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">重启后保留防火墙。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="ecc4" class="mf ku in mb b gy mg mh l mi mj">sudo nft list ruleset &gt; /etc/nftables.conf</span></pre><h1 id="b273" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">安装 NGINX 服务器</h1><p id="12b4" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">现在我们要安装 web 服务器 NGINX，这样我们就可以处理 web 请求了。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="b748" class="mf ku in mb b gy mg mh l mi mj">sudo apt -y install nginx</span></pre><p id="4e43" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">编辑主 NGINX 配置文件。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="fd0d" class="mf ku in mb b gy mg mh l mi mj">sudo vim /etc/nginx/nginx.conf</span></pre><p id="967d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在主 http 块中，取消阻止显示泄露信息的行的注释。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="33c2" class="mf ku in mb b gy mg mh l mi mj">server_tokens off;</span></pre><p id="fbba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加一行以防止有人在其他网站的框架中显示您网站的内容。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="4bf6" class="mf ku in mb b gy mg mh l mi mj">add_header X-Frame-Options "SAMEORIGIN";</span></pre><p id="f2c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加一行以减少跨站脚本的可能性。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="baac" class="mf ku in mb b gy mg mh l mi mj">add_header X-XSS-Protection "1; mode=block";</span></pre><p id="8422" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加行来限制缓冲区大小，从而减少缓冲区溢出攻击的可能性。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="1388" class="mf ku in mb b gy mg mh l mi mj">client_body_buffer_size 1k;<br/>client_header_buffer_size 1k;<br/>client_max_body_size 1k;<br/>large_client_header_buffers 2 1k;</span></pre><p id="782a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将 NGINX 配置文件写入磁盘，并退出编辑器。</p><p id="b464" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">编辑默认主机配置文件。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="6ef1" class="mf ku in mb b gy mg mh l mi mj">sudo vim /etc/nginx/sites-available/default</span></pre><p id="e43e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注释掉服务器块中让 NGINX 监听 TCP 端口 80 的行，并添加一行让 NGINX 监听 Unix 套接字的行:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="c570" class="mf ku in mb b gy mg mh l mi mj">#listen 80 default_server;<br/>#listen [::]:80 default_server;<br/>listen unix:/var/run/nginx.sock;</span></pre><p id="6807" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">仍然在服务器块中，通过添加以下行来限制不必要的 HTTP 请求类型。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="885c" class="mf ku in mb b gy mg mh l mi mj">if ($request_method !~ ^(GET|HEAD|POST)$ )<br/>{<br/>    return 405;<br/>}</span></pre><p id="e96b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将默认主机配置文件写入磁盘，并退出编辑器。</p><p id="f3f7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">编辑系统服务文件。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="0fce" class="mf ku in mb b gy mg mh l mi mj">sudo vim /lib/systemd/system/nginx.service</span></pre><p id="672c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<strong class="jx io">【业务】</strong>块中，添加一行包含 NGINX 在自己的私网内，只有一个环回接口。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="0934" class="mf ku in mb b gy mg mh l mi mj">PrivateNetwork=yes</span></pre><p id="64ae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将 NGINX 服务文件写入磁盘，并退出编辑器。</p><p id="7921" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用新配置重启 NGINX。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="f068" class="mf ku in mb b gy mg mh l mi mj">systemctl daemon-reload<br/>systemctl restart nginx<br/>systemctl status nginx</span></pre><h1 id="acd6" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">安装 Tor</h1><p id="bafb" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">现在我们安装 Tor 并创建隐藏服务。</p><p id="9ab7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装必备软件包。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="3af1" class="mf ku in mb b gy mg mh l mi mj">sudo apt install -y apt-transport-https</span></pre><p id="d865" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将 Tor 库添加到您的高级打包工具(APT)源列表中。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="a763" class="mf ku in mb b gy mg mh l mi mj">sudo vim /etc/apt/sources.list</span></pre><p id="ae32" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 Tor 项目存储库的底部添加行。这可能会因您的操作系统而异。注意，jammy Ubuntu 22.04 LTS 版没有对 Tor 可用的依赖，所以你可能会遇到麻烦。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="56f4" class="mf ku in mb b gy mg mh l mi mj">deb https://deb.torproject.org/torproject.org <!-- -->focal<!-- --> main<br/>deb-src https://deb.torproject.org/torproject.org <!-- -->focal<!-- --> main</span></pre><p id="095c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将文件写入磁盘，并退出编辑器。</p><p id="b603" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加用于签署 Tor 包的 GNU 隐私保护(GPG)密钥。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="8e62" class="mf ku in mb b gy mg mh l mi mj">sudo apt install -y gpg curl</span><span id="e386" class="mf ku in mb b gy mm mh l mi mj">curl https://deb.torproject.org/torproject.org/A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89.asc | gpg --import</span><span id="df29" class="mf ku in mb b gy mm mh l mi mj">gpg --export A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89 | apt-key add -</span></pre><p id="3879" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">更新您的套餐列表:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="be7a" class="mf ku in mb b gy mg mh l mi mj">apt update</span></pre><p id="7f0d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">从 Tor 项目存储库中安装 Tor:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="47fa" class="mf ku in mb b gy mg mh l mi mj">sudo apt install -y tor deb.torproject.org-keyring</span></pre><p id="c490" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">编辑主 Tor 配置文件:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="69a1" class="mf ku in mb b gy mg mh l mi mj">sudo vim /etc/tor/torrc</span></pre><p id="2b4c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用以下内容完全替换其原始内容:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="9160" class="mf ku in mb b gy mg mh l mi mj">Log notice file /var/log/tor/log<br/>RunAsDaemon 1<br/>DataDirectory /var/lib/tor<br/>HiddenServiceDir /var/lib/tor/<em class="ml">hiddenservicename</em>/<br/>HiddenServicePort 80 unix:/var/run/nginx.sock</span></pre><p id="753a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不要把<em class="ml"> hiddenservicename </em>放在上面，你应该自己选择一个有意义的名字。</p><p id="7fd2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将文件写入磁盘，并退出编辑器。</p><p id="b06c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为此更改重启 Tor。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="15d6" class="mf ku in mb b gy mg mh l mi mj">sudo systemctl restart tor</span></pre><p id="4dc9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">检查 Tor 是否启动并运行。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="3c55" class="mf ku in mb b gy mg mh l mi mj">tail /var/log/tor/log</span></pre><p id="db32" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您应该会看到一条消息。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="35ec" class="mf ku in mb b gy mg mh l mi mj">Bootstrapped 100% (done): Done</span></pre><p id="1c7e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要确定您的洋葱 URL，发出命令。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="064e" class="mf ku in mb b gy mg mh l mi mj">cat /var/lib/tor/<em class="ml">hiddenservicename</em>/hostname</span></pre><p id="8c7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你应该把你之前选择的名字放在上面，而不是字面上写<em class="ml"> hiddenservicename </em>。</p><p id="89a2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您将得到一个包含 56 个字符的域名的响应，后缀是<strong class="jx io">。洋葱</strong>。它看起来会像这样:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="431f" class="mf ku in mb b gy mg mh l mi mj">uvbmrlw3vmbvz3q7cmf3pff777mavz3o4gwtgc6xu7zsvgvfuslcoryd.onion</span></pre><p id="6cac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你也应该把钥匙放在安全的地方，只有你能拿到。文件名为<strong class="jx io"> hs_ed25519_public_key </strong>和<strong class="jx io"> hs_ed25519_secret_key </strong>。</p><p id="add9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过编辑默认站点配置文件来更改服务器名称:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="2734" class="mf ku in mb b gy mg mh l mi mj">sudo vim /etc/nginx/sites-available/default</span></pre><p id="e84c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">修改<strong class="jx io">服务器名称；</strong>行读:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="878f" class="mf ku in mb b gy mg mh l mi mj">server_name uvbmrlw3vmbvz3q7cmf3pff777mavz3o4gwtgc6xu7zsvgvfuslcoryd.onion;</span></pre><p id="2551" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将文件写入磁盘，并退出编辑器。</p><p id="f73c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">重启 NGINX。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="eedb" class="mf ku in mb b gy mg mh l mi mj">systemctl stop nginx<br/>rm /var/run/nginx.sock<br/>systemctl start nginx</span></pre><h1 id="61db" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">测试配置</h1><p id="17e3" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">您可能需要等待 10 分钟左右，您的隐藏服务洋葱地址才能通过网络传播。</p><p id="47b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，为了测试您到目前为止的配置，从位于<a class="ae mn" href="https://www.torproject.org/" rel="noopener ugc nofollow" target="_blank">https://www.torproject.org</a>的 Tor 项目站点下载并安装 Tor 浏览器。</p><p id="a155" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 Tor 浏览器中，使用 http 协议和洋葱地址访问洋葱站点。例如:</p><p id="f736" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mo mp mq mb b"><a class="ae mn" href="http://uvbmrlw3vmbvz3q7cmf3pff777mavz3o4gwtgc6xu7zsvgvfuslcoryd.onion" rel="noopener ugc nofollow" target="_blank">http://uvbmrlw3vmbvz3q7cmf3pff777mavz3o4gwtgc6xu7zsvgvfuslcoryd.onion</a></code></p><p id="e8da" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您应该看到<strong class="jx io">欢迎使用 Nginx！</strong>页。太好了！</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/d76bc5d126850499b1aa656cbbeb0797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zLf664TAFrU9YmMPvShcxw.png"/></div></div></figure><p id="2a68" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你看不到任何东西，也无法连接。您可能需要通过执行以下操作来更改 tor 服务的所有权。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="5557" class="mf ku in mb b gy mg mh l mi mj">sudo chown -R root /var/lib/tor<br/>sudo service tor restart </span></pre><p id="39c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过启动 tor to 和来确认一切正常。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="9915" class="mf ku in mb b gy mg mh l mi mj">tor</span></pre><h1 id="9c83" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">摘要</h1><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/fabf96e5a6e4519c7dcf4c72de844458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wRRhVx4iCxJ1uExd5Oh_Vw.png"/></div></div></figure><p id="f207" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在你应该知道如何使用<em class="ml"> nftables </em>设置防火墙，以及如何使用<em class="ml"> NGINX </em>配置网络服务器来处理通过<em class="ml"> Tor </em>网络的流量，这样我们就可以确保我们的隐私得到维护。我希望你觉得这篇文章有用/有趣。如果是这样，请在 Medium 上关注我，以获取更多即将发布的文章。干杯！</p><h1 id="11ab" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">参考</h1><ul class=""><li id="7b3e" class="mt mu in jx b jy lr kc ls kg mv kk mw ko mx ks my mz na nb bi translated"><a class="ae mn" href="https://wiki.nftables.org/wiki-nftables/index.php/Main_Page" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Nftables</a></li><li id="304a" class="mt mu in jx b jy nc kc nd kg ne kk nf ko ng ks my mz na nb bi translated"><a class="ae mn" href="https://nginx.org/en/docs/" rel="noopener ugc nofollow" target="_blank">https://nginx.org/en/docs/</a></li><li id="6a81" class="mt mu in jx b jy nc kc nd kg ne kk nf ko ng ks my mz na nb bi translated"><a class="ae mn" href="https://2019.www.torproject.org/docs/documentation.html.en" rel="noopener ugc nofollow" target="_blank">https://2019.www.torproject.org/docs/documentation.html.en</a></li></ul></div></div>    
</body>
</html>