<html>
<head>
<title>Add Charts into Our React App with Victory — Gradient and Image Background, and Animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Victory将图表添加到我们的React应用程序中，包括渐变、图像背景和动画</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/add-charts-into-our-react-app-with-victory-gradient-and-image-background-and-animations-8aa110867baa?source=collection_archive---------4-----------------------#2021-04-15">https://blog.devgenius.io/add-charts-into-our-react-app-with-victory-gradient-and-image-background-and-animations-8aa110867baa?source=collection_archive---------4-----------------------#2021-04-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0d2c40c822335f3752646a33f4a4223d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gzC_iT6KFQq4XdwQ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@kattrinnaaaaa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Katrina Berban </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5cad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">胜利让我们能够将图表和数据可视化添加到React应用程序中。</p><p id="35db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用Victory将图表添加到React应用程序中。</p><h1 id="0041" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">极坐标图的渐变背景</h1><p id="9d50" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">radialGradient</code>组件为极坐标图添加渐变/</p><p id="12b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b47e" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { VictoryChart, VictoryPolarAxis, VictoryScatter } from "victory";</span><span id="0286" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;svg&gt;<br/>        &lt;defs&gt;<br/>          &lt;radialGradient id="radial_gradient"&gt;<br/>            &lt;stop offset="10%" stopColor="red" /&gt;<br/>            &lt;stop offset="95%" stopColor="gold" /&gt;<br/>          &lt;/radialGradient&gt;<br/>        &lt;/defs&gt;<br/>      &lt;/svg&gt;<br/>      ​<br/>      &lt;VictoryChart<br/>        polar<br/>        style={{<br/>          background: { fill: "url(#radial_gradient)" }<br/>        }}<br/>      &gt;<br/>        &lt;VictoryScatter /&gt;<br/>        &lt;VictoryPolarAxis<br/>          style={{<br/>            tickLabels: { angle: 0 }<br/>          }}<br/>          tickValues={[0, 90, 180, 270]}<br/>        /&gt;<br/>      &lt;/VictoryChart&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="ca10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe me mf mg mh b">stop</code>组件和<code class="fe me mf mg mh b">offset</code>道具来设置渐变中的颜色数量。</p><p id="0e33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">VictoryPolarAxis</code>组件让我们为图表添加轴。</p><p id="9bb4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">VictoryChart</code>组件有<code class="fe me mf mg mh b">polar</code>道具添加极坐标图/</p><h1 id="f0a8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">带有图像的图表</h1><p id="3d31" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过设置<code class="fe me mf mg mh b">VictoryChart</code>的<code class="fe me mf mg mh b">backgroundComponent</code>道具来添加带有背景图片的图表。</p><p id="f588" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f6cb" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { VictoryAxis, VictoryChart, VictoryLine } from "victory";</span><span id="2d3b" class="mq lc iq mh b gy mv ms l mt mu">const CustomBackground = (props) =&gt; {<br/>  return &lt;image href={"https://picsum.photos/id/906/525/300.jpg"} {...props} /&gt;;<br/>};</span><span id="e6b9" class="mq lc iq mh b gy mv ms l mt mu">const Matterhorn = (props) =&gt; {<br/>  return (<br/>    &lt;VictoryChart<br/>      domain={{ y: [2000, 5000] }}<br/>      style={{ background: { opacity: 0.8 } }}<br/>      backgroundComponent={&lt;CustomBackground /&gt;}<br/>    &gt;<br/>      &lt;VictoryLine<br/>        data={[<br/>          { x: 0, y: 2500 },<br/>          { x: 1.25, y: 2600 },<br/>          { x: 1.8, y: 3000 },<br/>          { x: 2.7, y: 3300 },<br/>          { x: 3.1, y: 3800 },<br/>          { x: 3.25, y: 4000 },<br/>          { x: 3.5, y: 4000 },<br/>          { x: 4, y: 4478, label: "4,478m" },<br/>          { x: 4.5, y: 4300 },<br/>          { x: 5.1, y: 4200 },<br/>          { x: 6.3, y: 3500 },<br/>          { x: 6.75, y: 3400 },<br/>          { x: 7, y: 3300 },<br/>          { x: 7.25, y: 3200 },<br/>          { x: 9, y: 2900 },<br/>          { x: 12, y: 2000 }<br/>        ]}<br/>        style={{<br/>          data: { strokeWidth: 4 }<br/>        }}<br/>      /&gt;<br/>      &lt;VictoryAxis dependentAxis /&gt;<br/>    &lt;/VictoryChart&gt;<br/>  );<br/>};</span><span id="778d" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return &lt;Matterhorn /&gt;;<br/>}</span></pre><p id="0077" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe me mf mg mh b">CustomBackground</code>组件，并将其设置为<code class="fe me mf mg mh b">backgroundComponent</code>的值，以将图像显示为背景图像。</p><h1 id="4fc5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动画片</h1><p id="f625" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">animate</code>道具给胜利图表添加动画。</p><p id="0900" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="347c" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect, useState } from "react";<br/>import { VictoryChart, VictoryScatter } from "victory";</span><span id="fe1b" class="mq lc iq mh b gy mv ms l mt mu">const random = (min, max) =&gt; Math.floor(min + Math.random() * max);</span><span id="8267" class="mq lc iq mh b gy mv ms l mt mu">const getScatterData = () =&gt; {<br/>  const colors = [<br/>    "violet",<br/>    "cornflowerblue",<br/>    "gold",<br/>    "orange",<br/>    "turquoise",<br/>    "tomato",<br/>    "greenyellow"<br/>  ];<br/>  const symbols = [<br/>    "circle",<br/>    "star",<br/>    "square",<br/>    "triangleUp",<br/>    "triangleDown",<br/>    "diamond",<br/>    "plus"<br/>  ];<br/>  return Array(25)<br/>    .fill()<br/>    .map((index) =&gt; {<br/>      const scaledIndex = Math.floor(index % 7);<br/>      return {<br/>        x: random(10, 50),<br/>        y: random(2, 100),<br/>        size: random(8) + 3,<br/>        symbol: symbols[scaledIndex],<br/>        fill: colors[random(0, 6)],<br/>        opacity: 0.6<br/>      };<br/>    });<br/>};</span><span id="e963" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [data, setData] = useState([]);<br/>  useEffect(() =&gt; {<br/>    const timer = setInterval(() =&gt; {<br/>      setData(getScatterData());<br/>    }, 3000);<br/>    return () =&gt; clearInterval(timer);<br/>  }, []);</span><span id="ebcb" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;VictoryChart animate={{ duration: 2000, easing: "bounce" }}&gt;<br/>      &lt;VictoryScatter<br/>        data={data}<br/>        style={{<br/>          data: {<br/>            fill: ({ datum }) =&gt; datum.fill,<br/>            opacity: ({ datum }) =&gt; datum.opacity<br/>          }<br/>        }}<br/>      /&gt;<br/>    &lt;/VictoryChart&gt;<br/>  );<br/>}</span></pre><p id="816b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设置<code class="fe me mf mg mh b">animate</code>道具来设置动画的<code class="fe me mf mg mh b">duration</code>和<code class="fe me mf mg mh b">easing</code>。</p><p id="7d99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当我们更改<code class="fe me mf mg mh b">data</code>状态时，图表将使用新的<code class="fe me mf mg mh b">data </code>值重新呈现。</p><p id="3db6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">getScatterData</code>只返回散点图的数组值。</p><h1 id="412d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="18b0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在我们的React with Victory应用程序中为极坐标图和图表动画添加渐变。</p></div></div>    
</body>
</html>