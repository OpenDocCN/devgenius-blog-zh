# Ruby 选择和转换

> 原文：<https://blog.devgenius.io/ruby-selection-e12ec35ba79e?source=collection_archive---------7----------------------->

![](img/c4f8c5633b647d77e9676348edabc1df.png)

[粘土堤](https://unsplash.com/@claybanks?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照

除了迭代之外，对集合最常见的两种操作是选择和转换。

选择是基于某种标准从集合中选择特定元素的过程。例如，从一个数组中选择所有奇数。相反，转换指的是操作集合中的每个元素。例如，将所有数组元素的值增加 1。如果集合包含`n`元素，选择返回`n`或更少，而转换总是返回正好`n`元素。使用这两个操作，我们几乎可以对集合做任何事情。因此，不仅要了解如何执行这些操作，还要提高熟练程度，以便能够快速、流畅地使用收藏，这一点至关重要。

选择和转换都利用了循环的基本原理:一个循环、一个计数器、一个检索当前值的方法和一个退出循环的方法。记住这四点。此外，选择和转化都需要一些标准；选择使用这些标准来确定选择哪些元素，而转换使用这些标准来确定如何执行转换。

> “我把这个原则叫做自然选择，根据这个原则，每一个细微的变化，如果有用的话，都会被保存下来。”
> 
> **—查尔斯·达尔文**

# 选择

Ruby 中的`select`方法可以用来过滤对象数组。例如，在一个列表中，您可以找到所有偶数。没有 `select`，看起来是这样的:

## 选择方法

使用 select 时需要一个块。您必须在块中返回计算结果为 true 或 false 的值，select 将使用该值来过滤您的数组。

这将做与第一个例子相同的事情，但是代码要少得多。

您也可以将`select`与哈希一起使用:

其中`k`代表键& `v`代表值。

## 用索引选择

您可以将 select 方法与任何其他可枚举方法结合使用。

最显著的是`with_index`。

这使您能够使用索引而不是对象(在本例中为字符串)进行筛选。

## 破坏性选择

当您在数组上使用 select 时，它总是会创建一个新数组。

相反，您可以使用`select!`方法来修改原始数组。

## 选择与查找

当你想过滤一个列表并得到一组结果时,`select`是很有用的。但是如果只需要找一个对象呢？可以用`find`的方法。

查找给出第一个匹配，如果找不到，则返回`nil`。

## 拒绝

您可以删除不需要的元素，而不是选择需要的元素。

您不会获得任何技术优势，无论是在性能方面还是其他方面，但是它会提高代码的质量。

# 转换

Ruby 中的`map`方法可以用于数组、散列和范围。`map`的主要功能是转换数据。

## 地图语法

`map`的语法如下:

你从一个数组开始，但它也可以是一个散列或一个范围。然后你用一个块调用`map`。块是在方括号`{…}`之间的东西，在块中，你指定你想要如何变换数组的每个元素。本质上是一个函数。用`map`会怎么样？`map`返回包含结果的新数组，但不改变原始数组。如果要修改原始数组，使用`map!`。

哈希的语法略有不同，因为它既有键又有值:

## 地图与每个

`map` 和`each`有什么区别？`each`是`map`的更原始版本。它为您提供了所有的元素，以便您可以使用它们，但是它不收集结果。`each`方法总是返回原始的、未改变的对象。而`map`执行相同的功能，但它返回一个包含已转换元素的新数组。

## 带索引的地图

如果您需要包含您的值的索引，您可以使用`with_index`方法。

# 摘要

我们已经讨论了在 Ruby 中使用像`arrays`或`hashes`这样的对象集合最有用的方法之一`select`。我们已经展示了`select`方法允许您搜索、过滤或查找集合中的内容。最后，知道这些方法可用于任何包含可枚举模块的对象是很有用的。我们还谈到了转型，以`map`为例。转换同样重要，同样适用于任何包含可枚举模块的对象。