<html>
<head>
<title>Simple AI Face and emotion Recognition With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç®€å•çš„äººå·¥æ™ºèƒ½äººè„¸å’Œæƒ…æ„Ÿè¯†åˆ«ä¸ååº”</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/simple-ai-face-and-emotion-recognition-with-react-da2921e6075e?source=collection_archive---------0-----------------------#2022-04-06">https://blog.devgenius.io/simple-ai-face-and-emotion-recognition-with-react-da2921e6075e?source=collection_archive---------0-----------------------#2022-04-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/853bc0edba13bdbf00d53f6e79cd2cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x1JZIt-6lSDI5UPjP7Hdxw.jpeg"/></div></div></figure><div class=""/><p id="2aa0" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½ å–œæ¬¢è‰¾å—ï¼Ÿå› ä¸ºæˆ‘ç¡®å®çŸ¥é“ã€‚ä»Šå¤©ï¼Œä½ å°†ä½¿ç”¨äººå·¥æ™ºèƒ½å’Œé¢éƒ¨è¯†åˆ«æ¥é€šè¿‡ç½‘ç»œæ‘„åƒå¤´å®æ—¶ç¡®å®šä½ çš„æƒ…ç»ªã€‚</p><p id="f2a3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¸ºäº†å®Œæˆè¿™ä¸ªäººè„¸è¯†åˆ«ï¼Œæ‚¨å°†ä½¿ç”¨ä¸€ä¸ªåä¸º<a class="ae kt" href="https://www.npmjs.com/package/face-api.js" rel="noopener ugc nofollow" target="_blank"> face-api.js </a>çš„åº“ï¼Œå®ƒæ˜¯ tensor-flow çš„åŒ…è£…å™¨ï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„æœºå™¨å­¦ä¹ åº“ä¹‹ä¸€(æˆªè‡³æœ¬æ–‡å‘è¡¨æ—¶)ã€‚åœ¨æµè§ˆå™¨ä¸­è®¾ç½®å’Œè¿è¡Œå®ƒçœŸçš„å¾ˆå®¹æ˜“ã€‚</p><p id="400f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™æ˜¯æœ¬æ–‡ GitHub åº“çš„<a class="ae kt" href="https://github.com/Exclusiveideas/ai-face-detection" rel="noopener ugc nofollow" target="_blank">é“¾æ¥ã€‚</a></p><p id="3b74" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å½“ä½ åœ¨æˆ‘çš„ä»“åº“æ—¶ï¼Œè¯·ç•™ä¸‹ä¸€é¢—æ˜Ÿæ˜Ÿâœ¨ã€‚</p><h1 id="673b" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">æˆ‘ä»¬å¼€å§‹å§</h1><p id="9bcd" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Bootstrap ä¸€ä¸ªæ–°çš„ react åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚äººå·¥æ™ºèƒ½-äººè„¸æ£€æµ‹</p><p id="e63f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lx ly lz ma b">npx create-react-app ai-face-detection</code></p><p id="fde2" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨ react åº”ç”¨ç¨‹åºä¸­ä¸‹è½½<a class="ae kt" href="https://www.npmjs.com/package/face-api.js" rel="noopener ugc nofollow" target="_blank"> face-api.js </a>åº“</p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="da6c" class="mj kv iy ma b gy mk ml l mm mn">//using npm<br/>npm i face-api.js</span><span id="d1d7" class="mj kv iy ma b gy mo ml l mm mn">//using yarn<br/>yarn add face-api.js</span></pre><p id="1d69" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™ä¸ªé¡¹ç›®éœ€è¦çš„æ‰€æœ‰æ¨¡å‹éƒ½å¯ä»¥åœ¨æˆ‘çš„<a class="ae kt" href="https://github.com/Exclusiveideas/ai-face-detection/tree/main/public/models" rel="noopener ugc nofollow" target="_blank">èµ„æºåº“</a>ä¸­æ‰¾åˆ°ã€‚</p><p id="bfa1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å°†æ‚¨ä»æˆ‘çš„<a class="ae kt" href="https://github.com/Exclusiveideas/ai-face-detection/tree/main/public/models" rel="noopener ugc nofollow" target="_blank">å­˜å‚¨åº“</a>è·å¾—çš„æ¨¡å‹æ–‡ä»¶å¤¹æ”¾åœ¨ react åº”ç”¨ç¨‹åºçš„ public æ–‡ä»¶å¤¹ä¸‹ã€‚ä½ çš„<strong class="jx iz"> app ç»“æ„</strong>åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="cb23" class="mj kv iy ma b gy mk ml l mm mn">AI-FACE-DETECTION<br/>|- public<br/>   |- models<br/>|- src<br/>   |- App.css<br/>   |- App.js<br/>   |- index.css<br/>   |- index.js</span></pre><p id="71bf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿è¡Œ<code class="fe lx ly lz ma b">npm start</code>å¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºã€‚</p><p id="20af" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è®©æˆ‘ä»¬ç»™æˆ‘ä»¬çš„<strong class="jx iz"> index.css </strong>æ·»åŠ ä¸€äº›æ ·å¼:</p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="806b" class="mj kv iy ma b gy mk ml l mm mn">body {<br/>  margin: 0;<br/>  padding: 0;<br/>  width: 100vw;<br/>  height: 100vh;<br/>  display: flex;<br/>  justify-content: center;<br/>  align-items: center;<br/>}</span></pre><p id="c407" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬çš„ App.js æ–‡ä»¶å°†æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚ç°åœ¨åœ¨ App é‡Œ<strong class="jx iz">ã€‚js </strong>ï¼Œæˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªæ ‡é¢˜å’Œè§†é¢‘å…ƒç´ ã€‚</p><p id="cc6f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> App.js </strong></p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="f3a2" class="mj kv iy ma b gy mk ml l mm mn">import { useEffect, useRef } from 'react';</span><span id="66c7" class="mj kv iy ma b gy mo ml l mm mn">const App = () =&gt; {<br/>  const videoRef = useRef();</span><span id="5ae5" class="mj kv iy ma b gy mo ml l mm mn">return (<br/>    &lt;div&gt;<br/>       &lt;video crossOrigin='anonymous' ref={videoRef} autoPlay&gt;  <br/>       &lt;/video&gt;<br/>    &lt;/div&gt;<br/>  )<br/>};</span><span id="5927" class="mj kv iy ma b gy mo ml l mm mn">export default App;</span></pre><p id="d503" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘æ·»åŠ äº†ä¸€ä¸ª<em class="mp"> useRef </em>é’©å­æ¥è·Ÿè¸ªè§†é¢‘æµã€‚æˆ‘ä»¬éœ€è¦è®¿é—®ç½‘ç»œæ‘„åƒå¤´å¹¶è¾“å‡ºè§†é¢‘ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå‡½æ•°<em class="mp"> startVideo </em>ï¼Œå®ƒå°†åŒ…å«è®¿é—®ç½‘ç»œæ‘„åƒå¤´å¹¶å°†æµå­˜å‚¨åœ¨<em class="mp"> videoRefã€</em>ä¸­çš„è¯­æ³•</p><p id="7568" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> App.js </strong></p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="c29e" class="mj kv iy ma b gy mk ml l mm mn">useEffect(() =&gt; {<br/>  startVideo();<br/>}, []);</span><span id="0393" class="mj kv iy ma b gy mo ml l mm mn">const startVideo = () =&gt; {<br/>   navigator.mediaDevices.getUserMedia({ video: true    })<br/>   .then((currentStream) =&gt; {<br/>           videoRef.current.srcObject = currentStream;<br/>        }).catch((err) =&gt; {<br/>           console.error(err)<br/>   });<br/>}</span></pre><p id="9447" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mp">useeffecthhook</em>åœ¨åº”ç”¨å®‰è£…åè¿è¡Œï¼Œå¹¶é€šè¿‡è°ƒç”¨<em class="mp"> startVideo </em>å‡½æ•°åˆå§‹åŒ–è§†é¢‘æµã€‚ç°åœ¨ï¼Œå¦‚æœä½ ä¿å­˜ï¼Œä½ åº”è¯¥å¯ä»¥åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°ä½ çš„æ‘„åƒå¤´è¾“å‡ºã€‚</p><p id="8e03" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹ä½¿ç”¨æˆ‘ä»¬çš„ face-api.js åº“ã€‚</p><p id="5f66" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å°† face-api.js åº“å¯¼å…¥åˆ° index.js ä¸­ï¼Œå¹¶ä» models æ–‡ä»¶å¤¹ä¸­åŠ è½½æ¨¡å‹</p><p id="20b9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> App.js </strong></p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="b5ea" class="mj kv iy ma b gy mk ml l mm mn">useEffect(() =&gt; {<br/>   startVideo();</span><span id="eff5" class="mj kv iy ma b gy mo ml l mm mn">   videoRef &amp;&amp; loadModels();<br/>}, []);</span><span id="f675" class="mj kv iy ma b gy mo ml l mm mn">const loadModels = () =&gt; {<br/>   Promise.all([<br/>     faceapi.nets.tinyFaceDetector.loadFromUri('/models'),<br/>     faceapi.nets.faceLandmark68Net.loadFromUri('/models'),<br/>     faceapi.nets.faceRecognitionNet.loadFromUri('/models'),<br/>     faceapi.nets.faceExpressionNet.loadFromUri('/models'),<br/>   ]).then(() =&gt; {<br/>    faceDetection();<br/>   })<br/>};</span><span id="2162" class="mj kv iy ma b gy mo ml l mm mn">const faceDetection = () =&gt; {<br/>   const detections = await faceapi.detectAllFaces <br/>       (videoRef.current, new faceapi.TinyFaceDetectorOptions())<br/>        .withFaceLandmarks()<br/>        .withFaceExpressions();<br/>   console.log(detections);<br/>}</span></pre><p id="207a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¥½å§ï¼Œè®©æˆ‘è§£é‡Šä¸€ä¸‹ï¼Œ</p><ul class=""><li id="0e35" class="mq mr iy jx b jy jz kc kd kg ms kk mt ko mu ks mv mw mx my bi translated">åœ¨æ·»åŠ åˆ°<em class="mp"> useEffect </em>é’©å­çš„ä»£ç ç‰‡æ®µä¸­ï¼Œ</li></ul><p id="b430" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe lx ly lz ma b">videoRef &amp;&amp; loadModels();</code></p><p id="639e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åªæœ‰å½“ç½‘ç»œæ‘„åƒå¤´è¢«åŠ è½½æ—¶ï¼Œæˆ‘ä»¬æ‰è°ƒç”¨<em class="mp"> loadModels </em>å‡½æ•°</p><ul class=""><li id="b4b4" class="mq mr iy jx b jy jz kc kd kg ms kk mt ko mu ks mv mw mx my bi translated"><em class="mp"> loadModels </em>å‡½æ•°ä½¿ç”¨ä¸€ä¸ª<em class="mp"> Promise.all ä»æˆ‘ä»¬çš„æ¨¡å‹æ–‡ä»¶å¤¹ä¸­åŠ è½½æ‰€æœ‰éœ€è¦çš„æ¨¡å‹(ç”¨äºè¿è¡Œå¤šä¸ªæ‰¿è¯ºå¹¶è¿”å›ä¸€ä¸ªåŒ…å«è¾“å…¥æ‰¿è¯ºç»“æœçš„æ‰¿è¯º)ã€‚</em></li><li id="b8d7" class="mq mr iy jx b jy mz kc na kg nb kk nc ko nd ks mv mw mx my bi translated">åŠ è½½æ¨¡å‹åï¼Œå®ƒè°ƒç”¨<em class="mp"> faceDetection </em>å‡½æ•°ï¼Œè¯¥å‡½æ•°æ£€æµ‹æ‘„åƒå¤´è§†å›¾ä¸­çš„ä»»ä½•äººè„¸ï¼Œå¹¶å°†å…¶æ£€æµ‹å€¼æ‰“å°åˆ°æ§åˆ¶å°ã€‚</li></ul><p id="a2bf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç°åœ¨ï¼Œå¦‚æœæ‚¨å°†æ‚¨çš„è„¸æ”¾åœ¨ç½‘ç»œæ‘„åƒå¤´è§†å›¾ä¸­ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä¸€ä¸ªæ—¥å¿—ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³æ£€æµ‹åˆ°çš„è„¸çš„ä¿¡æ¯ã€‚</p><p id="3729" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ³¨æ„:ä¸ºäº†æ­£ç¡®æ£€æµ‹ï¼Œä½ åº”è¯¥åœ¨ä¸€ä¸ªå…‰çº¿å……è¶³çš„ç¯å¢ƒä¸­ã€‚</p><p id="bda8" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¸ºäº†åœ¨è§†é¢‘è¾“å‡ºä¸­æ˜¾ç¤ºæ£€æµ‹ç»“æœï¼Œæˆ‘ä»¬å°†åœ¨ App.js ä¸­æ·»åŠ ä¸€ä¸ª canvas å…ƒç´ ï¼Œä»¥è·Ÿè¸ªæ£€æµ‹åˆ°çš„äººè„¸çš„ä½ç½®ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª<em class="mp"> canvasRef </em>æ¥è·Ÿè¸ªç”»å¸ƒã€‚</p><p id="0288" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> App.js </strong></p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="229c" class="mj kv iy ma b gy mk ml l mm mn">const canvasRef = useRef();</span><span id="0187" class="mj kv iy ma b gy mo ml l mm mn">return (<br/>  &lt;div  className="app"&gt;<br/>    &lt;h1&gt; AI FACE DETECTION&lt;/h1&gt;<br/>    &lt;div className='app__video'&gt; <br/>       &lt;video crossOrigin='anonymous' ref={videoRef} autoPlay &gt;<br/>       &lt;/video&gt;<br/>    &lt;/div&gt; <br/>    &lt;canvas ref={canvasRef} width="940" height="650"<br/>     className='app__canvas' /&gt;<br/>&lt;/div&gt;<br/>);</span></pre><p id="4620" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¯¹äºä½ç½®çš„æ ·å¼ï¼Œæˆ‘ä»¬å°†ç¼–è¾‘æˆ‘ä»¬çš„ App.css</p><p id="b51c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> App.css </strong></p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="b11b" class="mj kv iy ma b gy mk ml l mm mn">.app {<br/>   display: flex;<br/>   width: 100vw; <br/>   height: 100vh;<br/>   flex-direction: column;<br/>   align-items: center;<br/>   justify-content: space-between;<br/>}</span><span id="ada3" class="mj kv iy ma b gy mo ml l mm mn">.app__video {<br/>   display: flex;<br/>   align-items: center;<br/>}</span><span id="8fd6" class="mj kv iy ma b gy mo ml l mm mn">.app__canvas {<br/>   position: absolute;<br/>   top: 100px;<br/>}</span></pre><p id="33c9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç°åœ¨ï¼Œä¸ºäº†å°†æ¥è‡ªæ£€æµ‹çš„æ•°æ®ä¼ è¾“åˆ°ç”»å¸ƒä¸Šï¼Œæˆ‘ä»¬å°†æŠŠæˆ‘ä»¬çš„<em class="mp"> faceDetection </em>å‡½æ•°ç¼–è¾‘æˆ:</p><p id="dd02" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> App.js </strong></p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="ecb6" class="mj kv iy ma b gy mk ml l mm mn">const faceDetection = async () =&gt; {<br/>   setInterval(async() =&gt; {<br/>   const detections = await faceapi.detectAllFaces<br/>         (videoRef.current,new faceapi.TinyFaceDetectorOptions())<br/>          .withFaceLandmarks()<br/>          .withFaceExpressions();</span><span id="9d80" class="mj kv iy ma b gy mo ml l mm mn">canvasRef.current.innerHtml = faceapi.createCanvasFromMedia<br/>                              (videoRef.current);</span><span id="0dc9" class="mj kv iy ma b gy mo ml l mm mn">faceapi.matchDimensions(canvasRef.current, {<br/>  width: 940,<br/>  height: 650,<br/>})</span><span id="3230" class="mj kv iy ma b gy mo ml l mm mn">const resized = faceapi.resizeResults(detections, {<br/>  width: 940,<br/>  height: 650,<br/>});</span><span id="a7b5" class="mj kv iy ma b gy mo ml l mm mn">// to draw the detection onto the detected face i.e the box<br/>faceapi.draw.drawDetections(canvasRef.current, resized);</span><span id="2eb9" class="mj kv iy ma b gy mo ml l mm mn">//to draw the the points onto the detected face<br/>faceapi.draw.drawFaceLandmarks(canvasRef.current, resized);</span><span id="8d5f" class="mj kv iy ma b gy mo ml l mm mn">//to analyze and output the current expression by the detected face<br/>faceapi.draw.drawFaceExpressions(canvasRef.current, resized);</span><span id="5cfd" class="mj kv iy ma b gy mo ml l mm mn">}, 1000);</span><span id="be1b" class="mj kv iy ma b gy mo ml l mm mn">};</span></pre><p id="a98a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†äººè„¸å’Œè¡¨æƒ…è¯†åˆ« appï¼Œä½ å¯ä»¥åœ¨<strong class="jx iz"> <em class="mp"> App.css </em> </strong>æ–‡ä»¶ä¸­ä¿®æ”¹ç”»å¸ƒçš„ä½ç½®ã€‚</p><p id="c516" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‰€ä»¥æˆ‘ä»¬å®Œæ•´çš„<strong class="jx iz"> App.js </strong>æ–‡ä»¶åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="mb mc md me gt mf ma mg mh aw mi bi"><span id="ca04" class="mj kv iy ma b gy mk ml l mm mn">import { useRef, useEffect } from 'react';<br/>import './App.css';<br/>import * as faceapi from "face-api.js";</span><span id="eb3d" class="mj kv iy ma b gy mo ml l mm mn">function App() {<br/>  const videoRef = useRef();<br/>  const canvasRef = useRef();<br/>  <br/>  useEffect(() =&gt; {<br/>    startVideo();</span><span id="169a" class="mj kv iy ma b gy mo ml l mm mn">    videoRef &amp;&amp; loadModels();<br/>}, []);</span><span id="ffe9" class="mj kv iy ma b gy mo ml l mm mn">  const loadModels = () =&gt; {<br/>     Promise.all([<br/>         faceapi.nets.tinyFaceDetector.loadFromUri('/models'),<br/>         faceapi.nets.faceLandmark68Net.loadFromUri('/models'),<br/>         faceapi.nets.faceRecognitionNet.loadFromUri('/models'),<br/>         faceapi.nets.faceExpressionNet.loadFromUri('/models'),<br/>     ]).then(() =&gt; {<br/>         faceDetection();<br/>        })<br/>};</span><span id="8666" class="mj kv iy ma b gy mo ml l mm mn">  const startVideo = () =&gt; {<br/>     navigator.mediaDevices.getUserMedia({ video: true })<br/>     .then((currentStream) =&gt; {<br/>          videoRef.current.srcObject = currentStream;<br/>      }).catch((err) =&gt; {<br/>         console.error(err)<br/>         });<br/>}</span><span id="da3c" class="mj kv iy ma b gy mo ml l mm mn">  const faceDetection = async () =&gt; {<br/>    setInterval(async() =&gt; {<br/>      const detections = await faceapi.detectAllFaces<br/>           (videoRef.current, new faceapi.TinyFaceDetectorOptions())<br/>           .withFaceLandmarks().withFaceExpressions();</span><span id="9e19" class="mj kv iy ma b gy mo ml l mm mn">canvasRef.current.innerHtml = faceapi.<br/>     createCanvasFromMedia(videoRef.current);</span><span id="3d17" class="mj kv iy ma b gy mo ml l mm mn">faceapi.matchDimensions(canvasRef.current, {<br/>    width: 940,<br/>    height: 650,<br/>})</span><span id="a8d8" class="mj kv iy ma b gy mo ml l mm mn">const resized = faceapi.resizeResults(detections, {<br/>    width: 940,<br/>    height: 650,<br/>});</span><span id="794d" class="mj kv iy ma b gy mo ml l mm mn">// to draw the detection onto the detected face i.e the box<br/>faceapi.draw.drawDetections(canvasRef.current, resized);</span><span id="0401" class="mj kv iy ma b gy mo ml l mm mn">//to draw the the points onto the detected face<br/>faceapi.draw.drawFaceLandmarks(canvasRef.current, resized);</span><span id="5966" class="mj kv iy ma b gy mo ml l mm mn">//to analyze and output the current expression by the detected face<br/>faceapi.draw.drawFaceExpressions(canvasRef.current, resized);</span><span id="4a47" class="mj kv iy ma b gy mo ml l mm mn">}, 1000)</span><span id="05fa" class="mj kv iy ma b gy mo ml l mm mn">}</span><span id="5d03" class="mj kv iy ma b gy mo ml l mm mn">return (<br/>  &lt;div  className="app"&gt;<br/>     &lt;h1&gt; AI FACE DETECTION&lt;/h1&gt;<br/>     &lt;div className='app__video'&gt;<br/>        &lt;video crossOrigin='anonymous' ref={videoRef} autoPlay <br/>        &lt;/video&gt;<br/>     &lt;/div&gt;<br/>     &lt;canvas ref={canvasRef} width="940" height="650"<br/>     className='app__canvas' /&gt;<br/> &lt;/div&gt;<br/>);<br/>}</span><span id="e19d" class="mj kv iy ma b gy mo ml l mm mn">export default App;</span></pre><h1 id="987c" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">ç»“è®º</h1><p id="2a1d" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä½¿ç”¨<a class="ae kt" href="https://www.npmjs.com/package/face-api.js" rel="noopener ugc nofollow" target="_blank"> face-api.js </a>åº“æ¥è®¾ç½®äººè„¸è¯†åˆ«åº”ç”¨ç¨‹åºæ˜¯å¤šä¹ˆå®¹æ˜“ã€‚æ‚¨å¯ä»¥é€šè¿‡é˜…è¯»å®ƒä»¬çš„æ–‡æ¡£æ¥é€‰æ‹©å®ç°æ›´å¤šçš„ç‰¹æ€§ã€‚</p><p id="2ea8" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ„Ÿè°¢é˜…è¯»ï¼Œåˆ«å¿˜äº†é¼“æŒğŸ‘å¹¶åœ¨æˆ‘çš„ä»“åº“é‡Œç•™ä¸‹ä¸€é¢—âœ¨æ˜Ÿã€‚</p></div></div>    
</body>
</html>