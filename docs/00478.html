<html>
<head>
<title>Merry mathematics at the interfaces</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">界面上的快乐数学</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/merry-mathematics-at-the-interfaces-3e6baaf720f5?source=collection_archive---------28-----------------------#2020-06-08">https://blog.devgenius.io/merry-mathematics-at-the-interfaces-3e6baaf720f5?source=collection_archive---------28-----------------------#2020-06-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b459079172bdc1e9b8015cb02b6b3ca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0oU6UzY6ZQ7JgEOS"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@jeshoots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="ca37" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在将我的 iOS 应用程序<a class="ae jz" href="https://www.bodich.me/to-the-shop/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">发布到商店</em> </strong> </a>后，我有一种愿望，想分享开发过程中出现的问题的有趣解决方案。尤其是因为这种元素非常常见且经常使用。但是我希望这个方法可以对其他人有用，甚至对其他任务有用，或者启发改进，所以我决定分享这个方法如何工作的详细解释。</p><p id="a0f3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在为 iOS 编写自己的应用程序的过程中，我需要创建一个自定义页面控件，以圆圈的形式显示卡片列表中的当前位置。</p><p id="8369" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我将解释问题的本质。页面控件的最简单版本看起来像下面的第一个动画:</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kz"><img src="../Images/a732c3ade373858a8ed282cb20827d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S7UU9fJYv-wqZK9N"/></div></div></figure><p id="363f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">问题是我们有一个宽度限制，在某一点上，元素的数量达到这样一个水平，页面控件的整体宽度将超出指定的限制。由于我没有找到我喜欢的现成解决方案，我画了几个选项，选择了我认为可以接受的一个。拒绝所有带有空格元素(如三个点)的选项，或者转换为滑块，用户可以清楚快速地意识到位置，分配如下:</p><ol class=""><li id="2f04" class="le lf in kc b kd ke kh ki kl lg kp lh kt li kx lj lk ll lm bi translated">缩小所有项目的尺寸，以满足宽度限制(但当前元素在小尺寸下看不清楚)。</li><li id="0b40" class="le lf in kc b kd ln kh lo kl lp kp lq kt lr kx lj lk ll lm bi translated">保留原始大小的一个元素，并平均减少所有其他元素。</li><li id="ff17" class="le lf in kc b kd ln kh lo kl lp kp lq kt lr kx lj lk ll lm bi translated">通过指定数量的步骤，从元素的原始大小平滑过渡到较小的大小。</li></ol><p id="7e64" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我选择选项#3，因为它给出了最有趣和最吸引人的外观，而且我们可以清楚地看到当前页面是最突出显示的项目。此外，为了实现谐波过渡，决定通过余弦函数进行过渡。</p><p id="e410" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果清楚地显示在下面的动画中。</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kz"><img src="../Images/2ea64ad56e20ab9c796bd23c69af660b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dy3SFysmqvrdb8sA"/></div></div></figure><h2 id="ab54" class="ls lt in bd lu lv lw dn lx ly lz dp ma kl mb mc md kp me mf mg kt mh mi mj mk bi translated">1.计算步数</h2><p id="8a45" class="pw-post-body-paragraph ka kb in kc b kd ml kf kg kh mm kj kk kl mn kn ko kp mo kr ks kt mp kv kw kx ig bi translated">让我们把元素的基本尺寸为<strong class="kc io"> <em class="ky"> w </em> </strong>并在图上标出。计算的最终目标是找到最小元素的大小。一个余弦波之外的所有元素将与该波末端的最小元素大小相同。</p><p id="96b0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">问题的主要条件和本质是保持整个页面控件的宽度不变，即所有元素的总和必须是常数。</p><p id="9815" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky"> *对于较少的元素，您可以手动输入元素大小限制，如上面动画中所应用的。没有限制，在缺少元素的情况下，边元素反而会变大。此外，如果宽度非常小，尺寸可以取负值。在本文中，我不会强加这些限制，以免使文章变得复杂。</em>T3】</strong></p><p id="ff24" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，让我们构建所需的图表:</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/2a29e787ca5bb69048c9aae89ebb377f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qJBGIhHIB4AwURCw"/></div></div></figure><p id="2afc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们设计一个能给出适当图形的函数。下面的函数给出了从<strong class="kc io"> <em class="ky"> 0 </em> </strong>到<strong class="kc io"> <em class="ky"> 1 </em> </strong>范围内的结果，这对于计算 reduction <strong class="kc io"> <em class="ky"> w </em> </strong>基值的相对系数是很有用的，通过它我们可以计算出最小元素的大小。</p><p id="b19a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"><em class="ky">0.5 cos(p)+0.5</em></strong>，其中<strong class="kc io"> <em class="ky"> p </em> </strong>是以弧度为单位的角度。</p><p id="008d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">记住这个公式，在下面的计算中会用到它。图表:</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/3523d72bf0e9d39806da5dc347609ae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8ct617eQqNM4j2g9"/></div></div></figure><p id="7ac7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下一步是输入计算每个元素大小所需的值。</p><p id="8651" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky"> l </em> </strong> —页面控件的总宽度(所有元素的总和)</p><p id="389c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky"> w </em> </strong> —一个元素的基本尺寸</p><p id="c07f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky"> c </em> </strong> —页面控件中的元素总数</p><p id="6f2b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky"> s </em> </strong> —最小元素的期望尺寸</p><p id="de63" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky"> x </em> </strong> —反比系数<strong class="kc io"> <em class="ky"> w </em> </strong>尺寸缩小，从<strong class="kc io"> <em class="ky"> 0 </em> </strong>到<strong class="kc io"> <em class="ky"> 1 </em> </strong>。例如，当<strong class="kc io"> <em class="ky"> x = 0.2，</em></strong><strong class="kc io"><em class="ky">s = w * 0.8</em></strong></p><p id="247f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"><em class="ky">α</em></strong>——是与系数<strong class="kc io"> <em class="ky"> x </em> </strong>成正比的缩减系数</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/53bd6c9475efcd1704995022f151f8b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y8-YJaq9z42N3VUe"/></div></div></figure><p id="34b9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设基数大小为<strong class="kc io"> <em class="ky"> w </em> </strong>。由于较小的尺寸将被<strong class="kc io">T5【x】T6</strong>缩小，最小元素通过公式<strong class="kc io"><em class="ky">s = w(1–x)</em></strong>计算。为了计算中间尺寸，使用<strong class="kc io"> <em class="ky"> x </em> </strong>是不够的，所以我们引入了一个附加系数<strong class="kc io"> <em class="ky"> α </em> </strong>，它将在从<strong class="kc io"><em class="ky"/></strong>到<strong class="kc io"> <em class="ky"> 1 </em> </strong>的范围内取部分<strong class="kc io"> <em class="ky"> x </em> </strong>。所以现在任何尺寸都可以用公式<strong class="kc io"><em class="ky">s = w(1–xα)</em></strong>计算。根据该公式，对于每个元素，只有<strong class="kc io"> <em class="ky"> α </em> </strong>将被改变，因此所有元素的总和将被计算如下:</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/d1892151555ec99537edfe8a770f46e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TQ71WXJ-9x65Od8ySUN8dQ@2x.png"/></div></div></figure><p id="7262" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">其中<strong class="kc io"> <em class="ky"> c </em> </strong>这是元素的个数<em class="ky">(见最后一个索引)</em>。因此，要找到总宽度，我们可以推导出以下最终公式:</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/c7fc7c64819864bb1085bcd5d4a591d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*N9o2vKOJCiWHQR5lAUbU1g@2x.png"/></div></figure><p id="c176" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">其中<strong class="kc io"> <em class="ky"> α </em> </strong> ‾是从<strong class="kc io"> <em class="ky"> 1 </em> </strong>到<strong class="kc io"> <em class="ky"> c </em> </strong>所有<em class="ky"> α </em> 的算术平均值。</p><p id="2576" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">由于我们的目标是找到元素的大小，我们需要从这个公式中推导出<strong class="kc io"> <em class="ky"> x </em> </strong>，我们将这样做。为了便于计算和防止错误，我使用了 WolframAlpha 服务(原谅我的数学老师)。</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/c7eba3bfc6036a8c4ee98a7c3034a0d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*VV3v9PL07iTw6yN9LzaG6g@2x.png"/></div></figure><h2 id="9033" class="ls lt in bd lu lv lw dn lx ly lz dp ma kl mb mc md kp me mf mg kt mh mi mj mk bi translated">2.画波浪</h2><p id="fe04" class="pw-post-body-paragraph ka kb in kc b kd ml kf kg kh mm kj kk kl mn kn ko kp mo kr ks kt mp kv kw kx ig bi translated">我们现在要做的就是计算每个元素的所有<strong class="kc io"> <em class="ky"> α </em> </strong>并求它们的算术平均值。记得我们的余弦函数吗？</p><p id="9229" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"><em class="ky">. 5 cos(p)+0.5</em></strong>。向左移动角度 rad，使其相对于具有元素大小的图形反转，得到公式:</p><p id="e77d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"><em class="ky">α= 0.5 cos(p–π)+0.5</em></strong>，其中<strong class="kc io"> <em class="ky"> p </em> </strong>为以弧度为单位的角度(或距中心元素的距离)。</p><p id="fa06" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们建立一个指示所需值的图表:</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/60c5dad9ce6223ca6320da31d443a980.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y_I2GsKVdqowuON-"/></div></div></figure><p id="070b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你注意到了吗？当然啦！未知范围<strong class="kc io"> <em class="ky"> x </em> </strong>:)中的前一幅图像的相同倒置图</p><p id="02af" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们记住上面开发的规则，它决定了页面控件的外观。过渡的最后一个元素的<strong class="kc io"> <em class="ky"> p </em> </strong>的值总是落在<strong class="kc io"> <em class="ky"> π </em> </strong>弧度上。因此，对于一个波之外的所有元素，我们确定<strong class="kc io"> <em class="ky"> p = π </em> </strong>，这将在图上给出一条直线，并且对于所有后续元素具有相同的大小。</p><p id="227f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">示例图上的半波分为 4 个部分<em class="ky">(在下面的代码示例中，它将被确定为半波中的 5 个元素，最大和最小的)</em>。因此，对于最大元素，计算采用以下形式:</p><p id="ff23" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"><em class="ky">α= 0.5 cos(0–π)+0.5 = 0</em></strong>，因此</p><p id="267a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"><em class="ky">s = w(1–x * 0)= w</em></strong></p><p id="5749" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">即全尺寸。对于波的最后一个元素，我们将进行下一个计算:</p><p id="6688" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"><em class="ky">α= 0.5 cos(π–π)+0.5 = 1</em></strong>，因此</p><p id="b57c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"><em class="ky">s = w(1–x * 1)= w(1–x)</em></strong></p><p id="41f9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">即基数减去 x，这是最小的元素。</p><p id="100c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下一步是什么？然后我们为每个元素计算<strong class="kc io"> <em class="ky"> α </em> </strong>，代入上一段推导的公式。</p><h2 id="cc1d" class="ls lt in bd lu lv lw dn lx ly lz dp ma kl mb mc md kp me mf mg kt mh mi mj mk bi translated">3.构建结果</h2><p id="0210" class="pw-post-body-paragraph ka kb in kc b kd ml kf kg kh mm kj kk kl mn kn ko kp mo kr ks kt mp kv kw kx ig bi translated">理论当然很有趣，但更有趣的是创造出有用的东西。让我们用代码总结所有的计算。我用的是 Swift 语言，但我确信用你使用的任何语言重写都不会很难，语法很容易理解。</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mv"><img src="../Images/ec445bf3ff0fe5d67d0bd72ee94b3cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5WpxcM8bXyq7UNvj"/></div></div></figure><p id="82fb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一切正常，计算正确。在测试代码的最后检查产生期望的 160 点的宽度。</p><p id="e60f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">基于上述计算，复制真实界面元素的变体。看起来更好的动画和真实的 60 帧/秒；)</p><figure class="la lb lc ld gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="4fbf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那么从这篇文章中可以学到什么呢？事实上，我更加坚信，至少偶尔锻炼创造力和发明创造性的解决方案会更有趣。它不会让你感到无聊，并给你享受工作成果的理由。我们当中有谁不想感受一点审美的愉悦呢…</p><p id="0f0b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你怎么想呢?请在评论中添加您感兴趣的解决方案。</p></div></div>    
</body>
</html>