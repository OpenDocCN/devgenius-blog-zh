<html>
<head>
<title>How to use API Request in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Python 中使用 API 请求</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-use-api-request-in-python-6ef370f9f771?source=collection_archive---------3-----------------------#2022-03-16">https://blog.devgenius.io/how-to-use-api-request-in-python-6ef370f9f771?source=collection_archive---------3-----------------------#2022-03-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="43a8" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">API 请求 GitHub 使用 Python 获取用户的存储库。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/330e3e27e46b58131d3f0581746d310b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3TG_Y50hafOKoxPYCmC3sw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">照片由<a class="ae ks" href="https://unsplash.com/@altumcode?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> AltumCode </a>在<a class="ae ks" href="https://unsplash.com/s/photos/python?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="4a93" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本文中，我将一步一步地解释处理从 GitHub 获取数据的 API 请求的过程。首先，您需要在计算机上安装 Python。使用下面的链接将 Python 下载到您的本地机器。</p><div class="lp lq gp gr lr ls"><a href="https://www.python.org/downloads/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd io gy z fp lx fr fs ly fu fw im bi translated">下载 Python</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">关于特定端口的信息、开发人员信息来源和二进制可执行文件由发布经理或……</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">www.python.org</p></div></div><div class="mb l"><div class="mc l md me mf mb mg km ls"/></div></div></a></div></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="7e51" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下载并设置好开发环境后，创建您的<code class="fe mo mp mq mr b">main.py</code>文件。对于本练习，您需要一个名为'<strong class="kv io"> requests </strong>'的第三方 python 包来处理 HTTP 请求。您可以通过下面的命令<em class="ms">安装这个包【使用</em><a class="ae ks" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"><em class="ms">PyPI</em></a><em class="ms">查找第三方 python 包】</em>。</p><pre class="kd ke kf kg gt mt mr mu mv aw mw bi"><span id="3ec5" class="mx my in mr b gy mz na l nb nc">$ pip install requests</span></pre><p id="db24" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">继续之前，请确保您已经在计算机上安装了<code class="fe mo mp mq mr b">pip</code>。如果您使用的是 Mac，请使用下面的命令在您的 Mac 电脑上安装<code class="fe mo mp mq mr b">pip</code>。</p><pre class="kd ke kf kg gt mt mr mu mv aw mw bi"><span id="8451" class="mx my in mr b gy mz na l nb nc">$ curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py  </span><span id="4e04" class="mx my in mr b gy nd na l nb nc">$ python get-pip.py  </span><span id="41cc" class="mx my in mr b gy nd na l nb nc">$ pip --version</span></pre></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="9d7d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然后，您可以使用下面的命令将包导入到您的<code class="fe mo mp mq mr b">main.py</code>文件中。</p><pre class="kd ke kf kg gt mt mr mu mv aw mw bi"><span id="5681" class="mx my in mr b gy mz na l nb nc">import requests</span></pre><p id="9658" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本练习中，我将获取 GitHub 用户<strong class="kv io">库名</strong>和<strong class="kv io">库 URL</strong>。为了处理 HTTP 请求，我们可以在包中使用<strong class="kv io"> get() </strong>函数。使用下面的命令，并将其分配给一个变量，如下所示。</p><pre class="kd ke kf kg gt mt mr mu mv aw mw bi"><span id="3725" class="mx my in mr b gy mz na l nb nc">response = requests.get('https://api.github.com/user/repos', auth=('&lt;user&gt;', '&lt;pass&gt;'))</span><span id="7e67" class="mx my in mr b gy nd na l nb nc"><br/>&lt;user&gt; : GitHub username<br/>&lt;pass&gt; : GitHub personal access token</span></pre><p id="0ff6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可以通过下面给定的路径生成 GitHub 个人访问令牌。</p><p id="db91" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">转到您的 GitHub 配置文件<strong class="kv io"> &gt; </strong> <strong class="kv io">的<strong class="kv io">设置</strong>(左侧面板中)<strong class="kv io"> &gt; </strong> <strong class="kv io">个人访问令牌</strong>&gt;&gt;<strong class="kv io">生成新令牌</strong>。</strong></p><p id="47c8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">提供一个令牌名称，并根据您的偏好赋予权限，最后，您将能够生成一个访问令牌。在<pass>字段中使用那个令牌<strong class="kv io"> <em class="ms">【不要使用&lt; &gt;标签】</em> </strong>。</pass></p></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="f1a4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可以将这个响应作为 JSON 输出，然后将它分配给一个变量，如下所示。</p><pre class="kd ke kf kg gt mt mr mu mv aw mw bi"><span id="1eef" class="mx my in mr b gy mz na l nb nc">my_projects = response.json()<br/></span><span id="399a" class="mx my in mr b gy nd na l nb nc"># print(type(my_projects)) = &lt;class 'list'&gt;</span></pre><p id="4782" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦你打印了<code class="fe mo mp mq mr b">my_projects</code>变量类型，你会看到它是一个列表。然后使用一个简单的 python <code class="fe mo mp mq mr b">for loop</code>就可以获得用户的 GitHub 库名称和 web URLs，如下所示。</p><pre class="kd ke kf kg gt mt mr mu mv aw mw bi"><span id="b1c8" class="mx my in mr b gy mz na l nb nc">for project in my_projects:<br/>    print(f"Project Name: {project['name']}\nProject URL    {project['html_url']}\n")</span></pre><p id="7306" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里，<code class="fe mo mp mq mr b">[‘name’ ]</code>是返回回购名称的字段，<code class="fe mo mp mq mr b">[‘html_url’]</code>是从 HTTP 响应<em class="ms">返回回购 web URL 的字段【您可以使用</em> <a class="ae ks" href="https://www.postman.com/downloads/" rel="noopener ugc nofollow" target="_blank"> <em class="ms"> POSTMAN </em> </a> <em class="ms">应用程序来检查 HTTP 响应及其输出。].</em></p></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="eaad" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，完整的代码将如下所示。</p><pre class="kd ke kf kg gt mt mr mu mv aw mw bi"><span id="d9cd" class="mx my in mr b gy mz na l nb nc">import requests</span><span id="a4a4" class="mx my in mr b gy nd na l nb nc">response = requests.get('https://api.github.com/user/repos', auth=('&lt;user&gt;', '&lt;pass&gt;'))</span><span id="8365" class="mx my in mr b gy nd na l nb nc">my_projects = response.json()</span><span id="3924" class="mx my in mr b gy nd na l nb nc">for project in my_projects:<br/>    print(f"Project Name: {project['name']}\nProject URL: {project['html_url']}\n")</span></pre></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="a787" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>