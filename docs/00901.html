<html>
<head>
<title>Crafting Perfect Interface For A CRUD In Angular With Utility Types</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用实用程序类型为 Angular 中的 CRUD 制作完美的接口</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/crafting-perfect-interface-for-a-crud-in-angular-with-utility-types-44873e516a1e?source=collection_archive---------7-----------------------#2020-06-19">https://blog.devgenius.io/crafting-perfect-interface-for-a-crud-in-angular-with-utility-types-44873e516a1e?source=collection_archive---------7-----------------------#2020-06-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9c8b29c6d70e1b097ca5de09ab07539c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RVSh_LNSkngacBh1"/></div></div></figure><blockquote class="jy jz ka"><p id="ff6d" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">大多数应用程序需要 CRUD 操作来管理应用程序内部的各种活动和操作。在 Angular 中，我们创建接口/类来为我们的请求和响应提供类型，以便在客户端发送、接收和管理这些数据。</p></blockquote><p id="dcd9" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">让我们看一个非常基本的用户管理场景。我们希望在那里执行以下活动。</p><ol class=""><li id="d884" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated">添加用户</li><li id="76a9" class="ld le iq ke b kf lm kj ln la lo lb lp lc lq kz li lj lk ll bi translated">获取用户</li><li id="eb89" class="ld le iq ke b kf lm kj ln la lo lb lp lc lq kz li lj lk ll bi translated">修改用户</li><li id="de7f" class="ld le iq ke b kf lm kj ln la lo lb lp lc lq kz li lj lk ll bi translated">删除用户</li></ol><p id="6ec6" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">让我们创建一个包含用户信息的用户界面，然后讨论如何使用这个界面来处理每个操作。这是我们的基本用户界面。</p><figure class="lr ls lt lu gt jr"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="36a0" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">现在，让我们讨论一下上面提到的操作。</p><ol class=""><li id="948e" class="ld le iq ke b kf kg kj kk la lf lb lg lc lh kz li lj lk ll bi translated"><strong class="ke ir">添加用户</strong></li></ol><p id="42bb" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">添加用户时，我们将无法访问任何 Id。因为 id 将由后端创建。用户只需输入他/她的用户名、城市名、姓名和密码。为了将我们的用户数据发送到后端，我们现在通常会选择两个选项，即</p><p id="be8e" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">a.将空值赋予 id。</p><p id="ba89" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">b.使 Id 成为用户界面中的可选参数。</p><p id="a494" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">c.为没有 Id 的用户添加创建一个新界面。</p><p id="e2de" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">所有的都可以，但是如果有更多这样的领域呢？我们的添加功能可能会包含更多我们在添加数据时想要忽略或包含的字段。对于我们的更新和删除操作，我们仍然希望 id 是必填字段。</p><p id="800c" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">我们可以利用与实用程序类型相同的用户界面。假设我们有一个名为<strong class="ke ir">用户</strong>的属性，对于添加操作，我们可以这样初始化它</p><figure class="lr ls lt lu gt jr"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="cc98" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">Omit 是帮助我们在这种情况下省略一些属性的实用程序类型之一。现在我们的代码不会再抱怨没有给出 id。</p><p id="6e0b" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">2.<strong class="ke ir">获得一个用户</strong></p><p id="e2b0" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">在获取用户时，在正常情况下我们永远不会收到密码。对于这种情况，我们也可以使用 Omit，并在获取数据时排除用户对象的密码字段。</p><p id="5283" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><strong class="ke ir"> 3。修改用户</strong></p><p id="4a65" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">在这种情况下，修改量取决于用户对象中更改的数据。假设用户只更改了城市名。在 PUT 请求的标准 API 中，用户 Id 将在 URL 中发送，URL 如下所示。</p><p id="01a6" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><a class="ae lx" href="http://localhost:8080/api/users/1" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/API/users/1</a></p><p id="9023" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">其中 1 是用户 id。所以在请求体中，我们只需要在对象中发送 cityName。在更新的情况下，所有属性都变成可选的，因为我们只需要发送被修改的数据。</p><p id="30ca" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">想象一个更大的对象，如果你一次又一次地发送整个对象，你会消耗更多的网络带宽，因为 JSON 在内存大小方面会更大。最佳方式是只发送更新的数据。但是我们的用户界面要求所有字段都是必填的。在这种情况下，我们需要它们都是可选的。</p><p id="44ce" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">让我们看看实现这一点的另一种实用程序类型。</p><figure class="lr ls lt lu gt jr"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="0d7d" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">Partial 是使用户界面中的所有字段都可选的实用程序类型。</p><p id="6210" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated"><strong class="ke ir"> 4。删除用户</strong></p><p id="de4a" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">一般来说，删除用户时，URL 中只发送该用户的 Id，而不需要任何请求体。</p><blockquote class="jy jz ka"><p id="293d" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是一个非常基本的例子，我们利用 Typescript 的实用程序类型来重用我们的一个完整 CRUD 接口。如果正确使用 typescript 的实用程序类型，我们不需要为同一对象的不同属性集重新创建相同的接口。</p></blockquote><p id="73be" class="pw-post-body-paragraph kb kc iq ke b kf kg kh ki kj kk kl km la ko kp kq lb ks kt ku lc kw kx ky kz ij bi translated">typescript 提供了更多这样的实用程序类型，可以根据具体情况使用。这可以在<a class="ae lx" href="https://www.typescriptlang.org/docs/handbook/utility-types.html" rel="noopener ugc nofollow" target="_blank">实用类型</a>中找到。</p><blockquote class="jy jz ka"><p id="e40a" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">实用程序类型不仅允许我们在发送数据时决定属性。想一个在代码或模板中使用这个对象的例子。如果您使用实用程序类型给它一个合适的类型。您将不再尝试访问不属于您的数据的属性，并将在 IDE 中接收正确的 intellisense，这些属性可用于该对象。</p><p id="87ac" class="kb kc kd ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">Typescript 的实用工具类型并不特定于 Angular。它们可以与任何使用 Typescript 的框架一起使用。</p></blockquote></div></div>    
</body>
</html>