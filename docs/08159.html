<html>
<head>
<title>Let's build a Sorting Visualizer using React — Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们使用 React 构建一个排序可视化工具——第一部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/lets-build-a-sorting-visualizer-using-react-part-i-91259271e9f?source=collection_archive---------2-----------------------#2022-05-22">https://blog.devgenius.io/lets-build-a-sorting-visualizer-using-react-part-i-91259271e9f?source=collection_archive---------2-----------------------#2022-05-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/92ad02c94e2cb0d2c56409f7a1800ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lQQnwVAPWp7Qnsbt2lcWQw.png"/></div></div></figure><p id="1184" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">朋友们好，我带着一个新项目回来了，我们将使用 React JS 构建一个排序可视化工具，我将使用 Chakra UI 来加速 UI 开发。排序可视化是一个惊人的项目，以加强你的反应技能。我们还可以了解算法。所以让我们开始吧。</p><p id="b0e7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用创建新的 React 项目</p><blockquote class="kt ku kv"><p id="51c4" class="jv jw kw jx b jy jz ka kb kc kd ke kf kx kh ki kj ky kl km kn kz kp kq kr ks ig bi translated"><em class="in"> npx 创建-反应-应用排序-可视化工具-反应</em></p></blockquote><p id="8b8a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建后，清理 App.js 中的基本代码并删除 App.css</p><p id="9cdb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如前所述，我将使用 chakra ui 来加速 ui 开发，所以我们将使用</p><blockquote class="kt ku kv"><p id="515d" class="jv jw kw jx b jy jz ka kb kc kd ke kf kx kh ki kj ky kl km kn kz kp kq kr ks ig bi translated"><em class="in">NPM I @ chakra-ui/react @ emotion/react @ @ emotion/styled @framer-motion@⁶</em></p></blockquote><p id="9392" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要了解更多关于查克拉用户界面和安装指南，你可以参考下面的文件。</p><div class="la lb gp gr lc ld"><a href="https://chakra-ui.com/guides/first-steps" rel="noopener  ugc nofollow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd io gy z fp li fr fs lj fu fw im bi translated">第一步</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">你好，欢迎来到查克拉界面😄。如果你是新来的，请观看我们下面的免费课程。无论您是哪种框架或工具…</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">chakra-ui.com</p></div></div><div class="lm l"><div class="ln l lo lp lq lm lr jt ld"/></div></div></a></div><p id="4b8c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们从代码开始。</p><p id="4c78" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 index.js 中，我们将在 ChakraProvider 中包装我们的应用程序组件，以使用 chakra UI 组件。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="68c8" class="mb mc in lx b gy md me l mf mg">...<br/>import { ChakraProvider } from "@chakra-ui/react";<br/>const root = ReactDOM.createRoot(document.getElementById("root"));<br/>root.render(<br/>  &lt;React.StrictMode&gt;<br/>    &lt;ChakraProvider&gt;<br/>      &lt;App /&gt;<br/>    &lt;/ChakraProvider&gt;<br/>  &lt;/React.StrictMode&gt;<br/>);<br/>....</span></pre><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mh"><img src="../Images/6e4b86e537d6777e6382ddc8989b9b55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rwt44GiOEsYE_J1Q"/></div></div></figure><p id="8b08" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以上是我们将作为这个应用程序的基础版本开发的用户界面。我们有两个组件侧栏和可视化组件。因此，在 src 下创建一个组件文件夹，并创建两个组件侧栏和可视化工具。</p><p id="2ccf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在侧边栏中，我们有一个选择数组大小的表单元素滑块，一个选择算法的下拉菜单，以及两个按钮，一个用于生成新数组，另一个用于对数组排序。我们已经利用了 chakra UI 滑块组件来选择数组大小，以及下拉列表的选择组件。我们有 generateArr 和 sort 作为 props，这是一个函数，当分别点击 generate array 和 sort 按钮时会被调用。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="98ed" class="mb mc in lx b gy md me l mf mg">import {<br/>  Box,<br/>Button,Flex,FormControl,FormLabel,Select,Slider,SliderFilledTrack,SliderThumb,<br/>  SliderTrack } from "@chakra-ui/react";<br/>import React, { useState } from "react";</span><span id="ec3a" class="mb mc in lx b gy mi me l mf mg">const Sidebar = ({ generateArr, sort }) =&gt; {<br/>  const [formState, setFormState] = useState({<br/>    size: 10,<br/>    algorithm: "linear",<br/>  });<br/> <br/>  return (<br/>    &lt;Box minW="xs" bg="gray.100" p={"4"} borderRadius="lg" overflow="hidden"&gt;</span><span id="88c1" class="mb mc in lx b gy mi me l mf mg">      &lt;FormControl&gt;<br/>        &lt;FormLabel htmlFor="size"&gt;{`Array Size (${formState.size})`}&lt;/FormLabel&gt;<br/>        &lt;Slider<br/>          onChangeEnd={(v) =&gt; setFormState({ ...formState, size: v })}<br/>          aria-label={"10"}<br/>          min={10}<br/>          max={200}<br/>          defaultValue={10}<br/>        &gt;<br/>          &lt;SliderTrack&gt;<br/>            &lt;SliderFilledTrack /&gt;<br/>          &lt;/SliderTrack&gt;<br/>          &lt;SliderThumb /&gt;<br/>        &lt;/Slider&gt;<br/>      &lt;/FormControl&gt;<br/>      &lt;FormControl&gt;<br/>        &lt;FormLabel htmlFor="algorithm"&gt;Algorithm&lt;/FormLabel&gt;<br/>        &lt;Select<br/>          onChange={(v) =&gt; setFormState({ ...formState, algorithm: v })}<br/>          bg={"white"}<br/>          id="algorithm"<br/>          variant={"outline"}<br/>        &gt;<br/>          &lt;option value="simple"&gt;Simple&lt;/option&gt;<br/>          &lt;option value="select"&gt;Selection&lt;/option&gt;<br/>          &lt;option value="insert"&gt;Insertion&lt;/option&gt;<br/>        &lt;/Select&gt;<br/>      &lt;/FormControl&gt;<br/>      &lt;Flex gap={"3"} mt={"5"} direction="row"&gt;<br/>        &lt;Button</span><span id="1f10" class="mb mc in lx b gy mi me l mf mg">          onClick={() =&gt; {<br/>            generateArr(formState);<br/>          }}</span><span id="e5b6" class="mb mc in lx b gy mi me l mf mg">          colorScheme="purple"<br/>        &gt;<br/>          Generate Array<br/>        &lt;/Button&gt;</span><span id="aad8" class="mb mc in lx b gy mi me l mf mg">        &lt;Button</span><span id="9410" class="mb mc in lx b gy mi me l mf mg">          onClick={sort}<br/>          colorScheme="purple"<br/>          variant="outline"<br/>        &gt;<br/>          Sort<br/>        &lt;/Button&gt;<br/>      &lt;/Flex&gt;<br/>    &lt;/Box&gt;<br/>  );<br/>};</span><span id="9c5c" class="mb mc in lx b gy mi me l mf mg">export default Sidebar;</span></pre><p id="c281" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于 Visualizer 组件，我们需要将数据作为 props 传递，这是一个数组，我们将通过它进行映射，并显示自动列网格下的可视条。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="e23f" class="mb mc in lx b gy md me l mf mg">import { Box } from "@chakra-ui/react";<br/>import React from "react";</span><span id="47c6" class="mb mc in lx b gy mi me l mf mg">const Visualiser = ({ data }) =&gt; {<br/>  return (<br/>    &lt;Box<br/>      rounded={"lg"}<br/>      display="grid"<br/>      gridAutoFlow={"column"}<br/>      gridAutoColumns={"auto"}<br/>      bg="gray.100"<br/>      minH={"full"}<br/>      overflow={"auto"}<br/>      flex="1"<br/>    &gt;<br/>      {data.map((d) =&gt; {<br/>        return (<br/>          &lt;Box<br/>            display={"flex"}<br/>            justifyContent="flex-end"<br/>            textAlign="center"<br/>            flexDirection="column"<br/>          &gt;<br/>            &lt;p&gt;{d}&lt;/p&gt;<br/>            &lt;Box<br/>              roundedTop={"sm"}<br/>              border={"1px"}<br/>              borderColor={"purple.200"}<br/>              bg={"purple.300"}<br/>              style={{ height: `${d}px` }}<br/>            &gt;&lt;/Box&gt;<br/>          &lt;/Box&gt;<br/>        );<br/>      })}<br/>    &lt;/Box&gt;<br/>  );<br/>};</span><span id="1221" class="mb mc in lx b gy mi me l mf mg">export default Visualiser;</span></pre><p id="750b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在在 App.js 中，我们将把这两个组件放在 row flex 下返回。现在我们将创建需要传递给侧栏和可视化组件的状态变量。创建一个 arr 变量来存储需要排序的数字，生成(布尔变量检查一个新数组是否正在生成)，排序(布尔变量检查一个数组是否正在排序)。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="b03f" class="mb mc in lx b gy md me l mf mg">...<br/>function App() {<br/>  const [arr, setArr] = useState([]);<br/>  const [generating, setGenerating] = useState(false);<br/>  const [sorting, setSorting] = useState(false);<br/>...<br/>  return (<br/>    &lt;Box p={"4"}&gt;<br/>      &lt;Flex gap={"4"}&gt;<br/>        &lt;Sidebar<br/>          generateArr={generateArr}</span><span id="2a4c" class="mb mc in lx b gy mi me l mf mg">          sort={sort}<br/>        /&gt;<br/>        &lt;Visualiser data={arr} /&gt;<br/>      &lt;/Flex&gt;<br/>    &lt;/Box&gt;<br/>}</span></pre><p id="37c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在对于函数，我们需要创建一个函数来生成一个随机数组初始化一个空数组，我们将循环直到长度变成我们通过 form 得到的大小，我们将添加一个随机数，在添加之前，我们将检查该数是否存在。将此函数作为道具传递给侧栏组件，当单击生成数组按钮时，我们将调用此函数，并传递包含数组大小和所选算法的格式。我们还将在组件挂载时调用 generate 数组，因此创建一个带有空依赖数组的 useEffect 并调用 generate array()。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="52ab" class="mb mc in lx b gy md me l mf mg">...<br/>const generateArr = (formState) =&gt; {<br/>    <br/>      let newArr = [];<br/>      while (newArr.length &lt;= formState.size) {<br/>        let random = Math.floor(Math.random() * (200 - 10) + 10);<br/>        if (newArr.indexOf(random) === -1) {<br/>          newArr.push(random);<br/>        }<br/>      }<br/>      setArr([...newArr]);</span><span id="36fa" class="mb mc in lx b gy mi me l mf mg">  };<br/>useEffect(() =&gt; {<br/>    generateArr({ size: 10 });<br/>  }, []);<br/>...</span></pre><p id="f6ce" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">到目前为止，对于排序函数，我们有一个简单的排序算法，其中我们使用一个嵌套的 For 循环来迭代数组，并检查当前元素是否大于下一个元素，如果大于，则与该元素交换。再次将它作为侧栏组件的道具传递给排序函数，并在单击排序按钮时调用它。在这一点上，你可以看到一切都很好，但所有发生在一个单一的过程中，如果我们这样做，我们不能做到可视化或实现任何动画或其他功能，我们将包括在未来的职位。所以我们将使用 setTimeout 来延迟 for 循环的外部和内部，这样外部的延迟就比内部的多。我在尝试不同的计时器后设置了这个延迟时间，所以我建议你尝试调整和尝试。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="a05e" class="mb mc in lx b gy md me l mf mg">const sort = () =&gt; {<br/>    setTimeout(() =&gt; {<br/>      let newArr = [...arr];<br/>      for (let i = 0; i &lt; arr.length - 1; i++) {<br/>        setTimeout(() =&gt; {<br/>          for (let j = i + 1; j &lt; arr.length; j++) {<br/>            if (newArr[i] &gt; newArr[j]) {<br/>              let temp = newArr[i];<br/>              newArr[i] = newArr[j];<br/>              newArr[j] = temp;<br/>              let newStep = [...newArr];</span><span id="a5f7" class="mb mc in lx b gy mi me l mf mg">              setTimeout(() =&gt; {<br/>                setArr([...newStep]);<br/>              }, j * 100);<br/>            }<br/>            <br/>          }<br/>        }, i * 1000);<br/>      }<br/>    }, 500);<br/>  };</span></pre><p id="6ea7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，为了一些小的改进，我们将在调用生成数组函数时将生成设置为真，并在函数完成时再次将其设置为假。这里，当我将更改设置得如此之快，以至于它立即设置为 true 并设置为 false 时，我们将再次使用 setTimeout 来延迟生成设置为 true 后的时间。同样，我们将把排序设置为 true 或 false。基于此，我们在脉轮 UI 按钮组件的 isLoading &amp; disabled 属性的帮助下显示了加载或禁用按钮。您可以通过使用不同的计时器进行测试来调整延迟。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="2f35" class="mb mc in lx b gy md me l mf mg">...<br/>const generateArr = (formState) =&gt; {<br/>    setGenerating(true);<br/>    setTimeout(() =&gt; {<br/>      ...<br/>      setGenerating(false);<br/>    }, 500);<br/>  };<br/>...<br/>const sort = () =&gt; {<br/>    setSorting(true);<br/>    setTimeout(() =&gt; {<br/>      ...<br/>    }, 500)<br/>}</span><span id="88ee" class="mb mc in lx b gy mi me l mf mg">...</span></pre><p id="ae74" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于现场演示，您可以查看下面的链接。</p><div class="la lb gp gr lc ld"><a href="https://codewithmarish-sorting-visualizer.vercel.app/" rel="noopener  ugc nofollow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd io gy z fp li fr fs lj fu fw im bi translated">React 应用</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">使用 create-react-app 创建的网站</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">codewithmarish-sorting-visualizer . vercel . app</p></div></div></div></a></div><p id="9466" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以尝试添加其他算法。这只是该应用程序的初始版本，我们将在接下来的帖子中实现更多的功能。</p><p id="1805" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以在我们的网站上阅读这篇文章来获得代码和探索更多。</p><div class="la lb gp gr lc ld"><a href="https://codewithmarish.com/post/sorting-visualizer-using-react-part1" rel="noopener  ugc nofollow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd io gy z fp li fr fs lj fu fw im bi translated">让我们使用 React 构建一个排序可视化工具——第一部分</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">朋友们好，我带着一个新项目回来了，我们将使用 React JS 构建一个排序可视化工具，我将使用…</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">codewithmarish.com</p></div></div><div class="lm l"><div class="mj l lo lp lq lm lr jt ld"/></div></div></a></div><p id="67e1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢阅读这篇文章，如果你觉得这篇文章有帮助，请分享最大，感谢阅读😊敬请关注。</p><p id="c365" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您有任何问题，请通过我们的联系部门联系我们。</p><div class="la lb gp gr lc ld"><a href="https://codewithmarish.com/contact" rel="noopener  ugc nofollow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd io gy z fp li fr fs lj fu fw im bi translated">联系我们| CodeWithMarish</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">我们很乐意回答您的问题，并请随时张贴您的建议，因为您的建议可以帮助我们…</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">codewithmarish.com</p></div></div><div class="lm l"><div class="mk l lo lp lq lm lr jt ld"/></div></div></a></div><p id="4b1a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">另外，请不要忘记订阅我们的 youtube 频道 codewithmarish，了解所有与网络开发相关的挑战。</p><div class="la lb gp gr lc ld"><a href="https://www.youtube.com/channel/UCkPYmdVz8aGRH6qCdKMRYpA" rel="noopener  ugc nofollow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd io gy z fp li fr fs lj fu fw im bi translated">和玛丽莎一起编码</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">我是 Fullstack 开发者，博客作者&amp; Youtuber。我喜欢做挑战和项目，因为我相信通过学习…</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">www.youtube.com</p></div></div><div class="lm l"><div class="ml l lo lp lq lm lr jt ld"/></div></div></a></div><p id="1593" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在地球上的某个地方和❤️一起发布</p></div></div>    
</body>
</html>