<html>
<head>
<title>iOS library support both Cocoapods and Swift Package Manager</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS库支持Cocoapods和Swift包管理器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ios-library-support-both-cocoapods-and-swift-package-manager-983c81b35080?source=collection_archive---------3-----------------------#2022-01-08">https://blog.devgenius.io/ios-library-support-both-cocoapods-and-swift-package-manager-983c81b35080?source=collection_archive---------3-----------------------#2022-01-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c6683492965ba7bd8cd46837d949ffb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*inPWoPOH82PnlrpI5A_DJw.png"/></div></div></figure><p id="96c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Cocoapods和SwiftPM是一些最受欢迎的包管理器。通过在你的开源库中支持这两者，你潜在地增加了使用它的开发者。</p><p id="8891" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">🚨记住，所有包管理者想要知道的最重要的事情是<strong class="jx io">源文件</strong>在哪里，以便分发它们。每个包管理器都有自己的配置方式。</p><p id="285f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，让我们直接跳到一些实际的例子，以便了解如何支持这两者。为此，我们将以我最近构建的名为FancyGradient的开源库为例。</p><div class="kt ku gp gr kv kw"><a href="https://github.com/Nikoloutsos/fancyGradient" rel="noopener  ugc nofollow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">GitHub-Nikoloutsos/fancy gradient:swift中强大的动画gradientView🌈</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">FancyGradient是一个UIView子类，可以让你在你的iOS应用中制作渐变动画。它纯粹是用Swift写的…</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">github.com</p></div></div><div class="lf l"><div class="lg l lh li lj lf lk jt kw"/></div></div></a></div></div><div class="ab cl ll lm hr ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ig ih ii ij ik"><p id="f9e5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> Swift软件包管理器🔥</strong></p><p id="705d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">配置发生在名为<code class="fe ls lt lu lv b">Package.swift </code>(又名清单)的文件上。<br/>这是我们需要编辑的文件，以便让SPM知道要包含哪些文件。</p><blockquote class="lw lx ly"><p id="38a2" class="jv jw lz jx b jy jz ka kb kc kd ke kf ma kh ki kj mb kl km kn mc kp kq kr ks ig bi translated">注意:每个SPM库必须包含一个名为<strong class="jx io"> Package.swift </strong>的清单文件</p></blockquote><figure class="me mf mg mh gt jo gh gi paragraph-image"><div class="gh gi md"><img src="../Images/8a83ae7f72a43f0e8266708afadf3ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*ogpbBFds_RCyjPKzRFQJVQ.png"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">文件夹中的EPackage.swift</figcaption></figure><p id="7813" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">默认情况下，SPM预计开发人员会将:</p><ul class=""><li id="193b" class="mm mn in jx b jy jz kc kd kg mo kk mp ko mq ks mr ms mt mu bi translated">他的源代码放入→ <code class="fe ls lt lu lv b">Sources &gt;&gt; {{target Name}}</code>文件夹📁</li><li id="9f6c" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi translated">他的测试(XCTests) → <code class="fe ls lt lu lv b">Sources &gt;&gt; {{testTarget Name}</code>文件夹📁</li></ul><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/53a82fc2fc37e182047d361378ca3494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KvvXEElVLyi_Nhaabb_4ow.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">红色下划线显示了<strong class="bd nb">目标</strong>和<strong class="bd nb">测试目标</strong>的名称。</figcaption></figure><blockquote class="lw lx ly"><p id="fad5" class="jv jw lz jx b jy jz ka kb kc kd ke kf ma kh ki kj mb kl km kn mc kp kq kr ks ig bi translated">注意:如果我把文件夹名<code class="fe ls lt lu lv b">Sources &gt;&gt; FancyGradient</code>改成别的名字，库将无法编译。当然，因为SPM不知道如何找到文件🚨</p></blockquote><p id="8fe1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是如果您想要不同的结构或不同的文件夹名称呢？不要担心SPM的开发者会支持你💪</p><p id="12ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了改变SPM的默认行为，您需要篡改<code class="fe ls lt lu lv b">Package.swift</code>清单。</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/ed77d2b44acf837e87ba13d09988c3e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Awx3Ct2d_tG0KR7VYDCa1w.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">我们把默认目录改成了Foo</figcaption></figure><p id="f9c7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ls lt lu lv b">path</code>target中的参数使您能够更改SPM尝试查找文件的路径。(在这种情况下是源代码)。👀</p><p id="963b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以现在我们知道了SPM如何定位我们的文件，以便与其他开发人员共享这个库。✅</p><blockquote class="lw lx ly"><p id="8faf" class="jv jw lz jx b jy jz ka kb kc kd ke kf ma kh ki kj mb kl km kn mc kp kq kr ks ig bi translated">注意:在将这个推送到github之后，记得添加一个标签版本的库，然后推它。这样当有人使用你的库时，他就会知道他拥有的版本或者决定得到什么版本。</p></blockquote><figure class="me mf mg mh gt jo gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/077b0ce2a2e9e314a2ce896045dd1e5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*UlT2ujE-Q2QqugILfN19Rw.png"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">FancyGradient的版本</figcaption></figure><p id="d86d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">椰子🔥</strong></p><p id="49f2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Cocoapods有一个名为<code class="fe ls lt lu lv b">{{LibraryName}}.podspec</code>的配置文件</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/b9f1a89d69f5d24a115304af5a44fcd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nCfotNA8HcP8jhjNFfirXA.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">FancyGradient.podspec</figcaption></figure><p id="27a2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">红色下划线的行让Cocoapods知道在哪里搜索源代码。我们当然可以像在SPM清单中那样更改文件夹结构的名称。</p><blockquote class="lw lx ly"><p id="3240" class="jv jw lz jx b jy jz ka kb kc kd ke kf ma kh ki kj mb kl km kn mc kp kq kr ks ig bi translated">注:<code class="fe ls lt lu lv b"> Sources/FancyGradient/**/*.{h,m,swift} </code>将包括所有。装运库中的h .m .swift文件。</p></blockquote><p id="7771" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">椰子+ SPM🚀</strong></p><p id="a7e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以现在我们已经知道了每个包管理器配置是如何工作的，我们可以同时支持它们。✅</p><p id="ed30" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您已经支持Cocoapods但不支持SPM，您可以遵循以下步骤。👇</p><ol class=""><li id="3597" class="mm mn in jx b jy jz kc kd kg mo kk mp ko mq ks nf ms mt mu bi translated">创建新的空SPM包</li><li id="49ac" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks nf ms mt mu bi translated">(可选)重命名文件夹结构(正如我们在上面看到的)</li><li id="606b" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks nf ms mt mu bi translated">将源代码文件从当前库复制到<code class="fe ls lt lu lv b">sources &gt;&gt; {{Library Name }}.</code>中，对测试做同样的操作(如果你只是创建库，不要复制任何东西😄)</li><li id="57fe" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks nf ms mt mu bi translated">在目前的结构下，添加可可豆荚(如果你已经有了，不用担心)</li><li id="e729" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks nf ms mt mu bi translated">改变可可豆荚源文件。podspec文件(让它知道搜索源代码的路径)</li><li id="a6dd" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks nf ms mt mu bi translated">向Github添加并推送库的新标签版本。</li><li id="a874" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks nf ms mt mu bi translated">发布Cocoapods(您将使用命令行)并将所有内容推送到GitHub</li></ol><p id="547f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在你的图书馆同时支持cocoa pods和SPM。</p><blockquote class="lw lx ly"><p id="1ea6" class="jv jw lz jx b jy jz ka kb kc kd ke kf ma kh ki kj mb kl km kn mc kp kq kr ks ig bi translated">注意:如果你忘记或对如何做有任何疑问，只需打开另一个支持两个包管理器的github库，看看它是如何做的。你不必重新发明轮子👀</p></blockquote><h2 id="0c3e" class="ng nh in bd nb ni nj dn nk nl nm dp nn kg no np nq kk nr ns nt ko nu nv nw nx bi translated">给那些来❤️的人额外的小贴士</h2><p id="7a04" class="pw-post-body-paragraph jv jw in jx b jy ny ka kb kc nz ke kf kg oa ki kj kk ob km kn ko oc kq kr ks ig bi translated">对于那些即将结束的人，这里有一个从<strong class="jx io"> pointfreeco </strong>学到的有用技巧。假设你想在你的库中添加一个演示项目，你会得到这个。</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div class="gh gi od"><img src="../Images/208c9165c9fa34ba9cb79938f87fbdc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*ZR1enlxwFZw-CauUmJbylw.png"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">演示文件夹在中不好看</figcaption></figure><p id="593d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以通过在演示⭐️中手动创建一个空文件<code class="fe ls lt lu lv b">Package.swift</code>来删除包中的演示文件夹</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oe"><img src="../Images/6eea402254a39f6bd7416c862fdfb60f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aMbCVWrweHuieUxi-6VBww.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">在演示中添加空Package.swift</figcaption></figure><figure class="me mf mg mh gt jo gh gi paragraph-image"><div class="gh gi of"><img src="../Images/0fbd752fddedbfd257012dbacf40e84c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*zsOBfOZ51bLkCEIAOdIgxw.png"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">SPM忽略了演示。</figcaption></figure><p id="89e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">同样，如果你不想要docs文件夹，只需在里面添加一个空清单，然后砰的一声🎉。</p><h2 id="56fd" class="ng nh in bd nb ni nj dn nk nl nm dp nn kg no np nq kk nr ns nt ko nu nv nw nx bi translated">额外资源:</h2><div class="kt ku gp gr kv kw"><a href="https://www.raywenderlich.com/7242045-swift-package-manager-for-ios" rel="noopener  ugc nofollow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">iOS版Swift软件包管理器</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">了解如何使用Swift包管理器(SwiftPM)创建、更新和加载本地和远程Swift包…</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">www.raywenderlich.com</p></div></div><div class="lf l"><div class="og l lh li lj lf lk jt kw"/></div></div></a></div><div class="kt ku gp gr kv kw"><a href="https://medium.com/@jeantimex/create-your-own-cocoapods-library-da589d5cd270" rel="noopener follow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">创建自己的CocoaPods库</h2><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">medium.com</p></div></div><div class="lf l"><div class="oh l lh li lj lf lk jt kw"/></div></div></a></div><p id="1cd9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢你学到了不要忘记留下一个👏</p></div></div>    
</body>
</html>