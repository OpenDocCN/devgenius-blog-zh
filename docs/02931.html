<html>
<head>
<title>TikTok Api Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">抖音 Api Python</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/tiktok-api-python-41d76c67a833?source=collection_archive---------0-----------------------#2020-09-13">https://blog.devgenius.io/tiktok-api-python-41d76c67a833?source=collection_archive---------0-----------------------#2020-09-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0007a837cc9c82e72a480e1f3955e018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NR80xKtLOYziBh8f"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com/@solenfeyissa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">索伦·费伊萨</a>在<a class="ae jz" href="https://unsplash.com/s/photos/tiktok?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="329b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我将展示如何用 python 轻松地从抖音 API 中检索信息。有两种不同的方法可以访问这个 API。一个将使用我开发的开源免费 python 包。另一个选择是使用 RapidAPI 将这个 API 作为一个服务，它运行我的 python 包，但是你不必担心服务器托管。</p><p id="10d9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你更喜欢视觉学习，看看我为使用这个 API 制作的视频。我将在那个频道发布更多与逆向工程网站相关的内容，如果你对此感兴趣，请订阅。此外，请随意查看我的另一个<a class="ae jz" href="https://www.youtube.com/c/davidteather" rel="noopener ugc nofollow" target="_blank"> YouTube 频道</a>，这是与编程和工程相关的更有趣的内容:)</p><h1 id="511c" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用免费的 TikTokApi Python 包</h1><p id="3c6c" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在本节中，我们将使用我的免费开源 python 包来检索信息。如果您只是在本地运行脚本，而不是在服务器应用程序中运行，那么这个解决方案是理想的。</p><p id="1e75" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">设置 TikTokApi 包</strong></p><p id="ee76" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要设置这个包，你必须运行<code class="fe mb mc md me b">pip install TikTokApi</code>然后<code class="fe mb mc md me b">python -m playwright install</code>来安装这个包和允许这个包在后台运行 chrome 的脚本</p><p id="cc54" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们将创建一个简单的脚本来确保 API 正常工作。我们需要找到 verifyFp 值。要做到这一点，去 tiktok.com 在你的浏览器。</p><p id="43ae" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">点击 url 旁边的挂锁，如下图所示</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/dce2df33853f7e316fdf2bd230660121.png" data-original-src="https://miro.medium.com/v2/resize:fit:268/format:webp/1*rEn2IxFHat8-fEQ_xaOnjQ.png"/></div></figure><p id="4d79" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后点击 cookies 显示你当前的 cookies</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/792c9be8bb2a2c1ce5d147da0c57271e.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*p5Ne70epNAN5HL8s107sWQ.png"/></div></figure><p id="a68a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">转到<a class="ae jz" href="http://www.tiktok.com" rel="noopener ugc nofollow" target="_blank">www.tiktok.com</a>-&gt;cookie-&gt;s _ v _ webid，然后复制 s_v_webid cookie 的内容并粘贴到 verifyFp 中</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/9d74e543e2c8c32e7db92b8eef7299c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*j9PtIeHuopnQ2QJarq4qpw.png"/></div></figure><pre class="mg mh mi mj gt mm me mn mo aw mp bi"><span id="575e" class="mq kz in me b gy mr ms l mt mu">from TikTokApi import TikTokApi<br/>verifyFp="<!-- -->verify_YOUR_S_V_WEB_ID_COOKIE<!-- -->"<br/>api = TikTokApi.get_instance(custom_verifyFp=verifyFp)<br/>print(api.trending(count=1))</span></pre><p id="7527" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你把字典打印到屏幕上，那么你就可以继续了。如果你开始遇到问题，检查一下<a class="ae jz" href="https://github.com/davidteather/tiktok-api" rel="noopener ugc nofollow" target="_blank">项目主页</a>在某个地方的问题标签中肯定会有人有你的问题。</p><blockquote class="mv mw mx"><p id="ceeb" class="ka kb my kc b kd ke kf kg kh ki kj kk mz km kn ko na kq kr ks nb ku kv kw kx ig bi translated">verifyFp 令牌似乎在大约 2 小时后过期，如果你在一个 verifyFp 下做了太多，它可能会抑制你的请求。目前，你可以通过做<code class="fe mb mc md me b">api = TikTokApi.get_instance(custom_verifyFp=verifyFp, use_test_endpoints=True</code>来规避这个问题，但是我不能保证这在将来会有效</p></blockquote><p id="d98e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">示例脚本</strong></p><p id="8c21" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们已经正确地设置了这个包，接下来将会有一些你可以用它做什么的演示。</p><blockquote class="mv mw mx"><p id="2b33" class="ka kb my kc b kd ke kf kg kh ki kj kk mz km kn ko na kq kr ks nb ku kv kw kx ig bi translated">终点的完整文档可在<a class="ae jz" href="https://github.com/davidteather/TikTok-Api/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">此处</a>获得</p></blockquote><p id="1d72" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一个例子是一个生成抖音汇编的脚本。这是一个由我维护的官方项目，你可以在这里找到<a class="ae jz" href="https://github.com/davidteather/TikTokBot" rel="noopener ugc nofollow" target="_blank">的代码</a></p><p id="b8d4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以下所有脚本都假设您已经在它们上面附加了以下几行。</p><pre class="mg mh mi mj gt mm me mn mo aw mp bi"><span id="a0a5" class="mq kz in me b gy mr ms l mt mu">from TikTokApi import TikTokApi<br/>verifyFp="<!-- -->verify_YOUR_S_V_WEB_ID_COOKIE<!-- -->"<br/>api = TikTokApi.get_instance(custom_verifyFp=verifyFp)<br/>print(api.trending(count=1))</span></pre><p id="730a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">流行音乐<code class="fe mb mc md me b">api.discoverMusic()</code></p><p id="6d35" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">流行标签<code class="fe mb mc md me b">api.discoverHashtags()</code></p><p id="1ca0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">趋势 TikToks <code class="fe mb mc md me b">api.trending()</code></p><p id="409a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">用户的 TikToks <code class="fe mb mc md me b">api.byUsername('therock')</code></p><p id="6bcb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">标签 TikToks<code class="fe mb mc md me b">api.byHashtag('funny')</code></p><p id="fd14" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个包中还有很多方法，但是这些是用户最常用的方法。</p><h1 id="fed6" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">抖音 API 即服务</strong></h1><p id="3dca" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在这一节中，我将演示如何使用 RapidAPI 将这个包作为服务使用，RapidAPI 是一个允许轻松使用 API 的网站。如果你不想在你的服务器上处理抖音 API 或者你不能让它在服务器上工作(或者如果你只是想支持我)，这个设置是最理想的。</p><p id="d8d7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，你需要去<a class="ae jz" href="https://rapidapi.com/" rel="noopener ugc nofollow" target="_blank">RapidAPI.com</a>你需要创建一个账户来使用 API。</p><p id="fd39" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，访问 RapidAPI 上的<a class="ae jz" href="https://rapidapi.com/rapidapideveloper/api/tiktok2" rel="noopener ugc nofollow" target="_blank"> TikTokApi </a></p><blockquote class="mv mw mx"><p id="6cb4" class="ka kb my kc b kd ke kf kg kh ki kj kk mz km kn ko na kq kr ks nb ku kv kw kx ig bi translated">为了尽可能透明，我是这个 API 的创建者，并收取访问它的费用来支付服务器费用(但是有一个免费层)</p></blockquote><p id="2e1e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您需要订阅 API 来测试它。单击顶部的定价选项卡，可以查看不同的计划。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/a4f5c67703143fc97889fef9f9c155f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vqxvhHLWy6GxGArBUI9fA.png"/></div></div></figure><p id="ec5b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后会有一些不同的计划可供选择，但我建议现在只做基本的计划，除非你需要更多的请求。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/de0de686dca17c42eca54a50f46a3879.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ovXr0_EgEIk6BPKwmBmptA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">免责声明:计划定价、每月请求和超额收费在未来可能会有所不同。</figcaption></figure><p id="891a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您将需要添加一张信用卡，以确保 RapidAPI 可以向您收取费用。如果您超过免费层每月 50 个请求的配额，它将向您收取超额费用。</p><p id="824b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">RapidAPI 为您提供了大量有用的示例，可以使用您需要的任何语言。如果您转到 API 的<a class="ae jz" href="https://rapidapi.com/rapidapideveloper/api/tiktok2/endpoints" rel="noopener ugc nofollow" target="_blank">端点</a>部分，您可以看到您可以发出的所有不同请求。</p><p id="6af4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将使用趋势抖音端点作为示例。您可以从浏览器测试这些请求。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/5b07c50eac5eb0deb41e263d3e2fd877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*MjvQi38XUNZAVXdQ8N35SQ.png"/></div></figure><p id="f45d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后结果会出现在页面的右下角。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/92c8794f2b24df7c40dcf45111550592.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q5DfmCsCWNrLbpdApTbcmA.png"/></div></div></figure><p id="e987" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您还可以使用代码片段部分生成 python、node.js、PHP 和更多语言，这样您就不必自己编写任何代码。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/aaeb2d12a5f0bc54a52016588276ac13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RHphRsnSak9AaA39cHJcIw.png"/></div></div></figure><p id="c3e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以切换你的语言，只是复制所有的代码。</p><p id="18fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望这篇教程能帮到你，如果你喜欢的话，可以考虑看看我的其他文章，关于你能用 TikTokApi 做的更多事情，你可以在这里找到<a class="ae jz" href="https://medium.com/@david.teather" rel="noopener"/>。我迫不及待地想看到人们能够使用这个 API 完成的所有项目。</p></div></div>    
</body>
</html>