<html>
<head>
<title>Room database using kotlin Coroutines Flow to insert, get and remove values from database with android architecture Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 kotlin 协同程序流的房间数据库，通过 android 架构组件插入、获取和删除数据库中的值</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/roomdatabase-a-simple-data-entry-application-using-kotlin-coroutines-coroutine-flow-and-viewmodels-ce2621a75a71?source=collection_archive---------6-----------------------#2022-09-17">https://blog.devgenius.io/roomdatabase-a-simple-data-entry-application-using-kotlin-coroutines-coroutine-flow-and-viewmodels-ce2621a75a71?source=collection_archive---------6-----------------------#2022-09-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1920" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个使用 roomDatabase 的简单数据输入应用程序，用户可以使用协程和主安全线程在 SQlite 数据库中插入、获取和删除值。当数据库更新时，协程流用于实时更新更改。</p><p id="8805" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">框架和库:</strong></p><p id="7d9d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">RoomDatabase，ViewModel，ViewModelFactory，LiveData，Flow，Coroutines，ListAdapter，ViewBinding。</p><p id="b6eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">依赖:</strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="d686" class="kr ks in kn b gy kt ku l kv kw">// Room components<br/>def room_version = "2.4.3"<br/>implementation "androidx.room:room-ktx:$room_version"<br/>kapt "android.arch.persistence.room:compiler:1.0.0"<br/>implementation("androidx.room:room-runtime:$room_version")<br/>// optional - Kotlin Extensions and Coroutines support for Room<br/>kapt("androidx.room:room-compiler:$room_version")<br/>// optional - Test helpers<br/>testImplementation("androidx.room:room-testing:$room_version")<br/><br/><br/><br/>def lifecycle_version = "2.4.0"<br/>// Lifecycle components<br/>implementation "androidx.lifecycle:lifecycle-livedata-ktx:$lifecycle_version"<br/>implementation "androidx.lifecycle:lifecycle-common-java8:$lifecycle_version"<br/>implementation "androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version"<br/>implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.3.2'<br/>implementation "androidx.lifecycle:lifecycle-extensions:2.2.0"</span></pre><p id="ce79" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">项目结构及流程:</strong></p><p id="3ae9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在进入代码之前，让我们从项目结构开始，在这个项目中有 5 个不同的包适配器、存储库、房间、ui 和视图模式，见图。1 用于项目结构。</p><figure class="ki kj kk kl gt ky gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/128681d601a6251ca83a27aa75eaa430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*zCvVElEtaWqGhq4Al8gc1Q.png"/></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">图一。项目结构</figcaption></figure><p id="db65" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了更好地理解，请查看图中的项目流程。2、它显示了不同阶级之间的关系。</p><figure class="ki kj kk kl gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi lf"><img src="../Images/0123fac5c129ca8570086c3ca4bc02c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLbgmdOocn2LAVg_7Sa25Q.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">图。2 项目流程</figcaption></figure><p id="6c5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">房间数据库:</strong></p><p id="d6ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们从使用 room 创建数据库开始代码。Room 是 Jetpack 的一部分，它在 SQLite 数据库上提供了一个抽象层，用于在本地保存和执行数据操作。</p><ol class=""><li id="20ba" class="lk ll in jm b jn jo jr js jv lm jz ln kd lo kh lp lq lr ls bi translated"><strong class="jm io">房间</strong></li></ol><p id="36c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 1.1 UserInfoEntity.kt </strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="9676" class="kr ks in kn b gy kt ku l kv kw">@Entity(tableName = "user_info", indices = [Index(value = ["email","name"], unique = true)])<br/>data class UserInfoEntity(<br/>    @PrimaryKey(autoGenerate = true) @ColumnInfo(name = "user_id")<br/>    val id : Int = 0,<br/>    val name: String,<br/>    val email: String,<br/>)</span></pre><p id="25d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">UserInfoEntity.kt 包含数据库中<strong class="jm io"> user_info </strong>表中每一列的字段。下面的代码是一个定义用户表的实体，该表包含 id(主键)、name 和 email 列。</p><p id="109c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 1.2 UserInfoDao.kt </strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="2a30" class="kr ks in kn b gy kt ku l kv kw">@Dao<br/>interface DataEntryDao {<br/><br/>    @Insert(onConflict = OnConflictStrategy.<em class="lt">REPLACE</em>)<br/>    suspend fun insert(userInfo: UserInfoEntity)<br/><br/>    @Query("SELECT * FROM user_info")<br/>    fun getAllUsers(): Flow&lt;List&lt;UserInfoEntity&gt;&gt;<br/><br/>    @Query("delete from user_info where user_id = :u_id")<br/>    suspend fun deleteById(u_id : Int)<br/>}</span></pre><p id="ed72" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">kt 是一个定义数据库交互的数据访问对象接口类。它包括我们对插入、获取和删除用户的查询。类应该用 Dao 标记。</p><p id="6f1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的代码中，流是一个值的异步序列，它一次产生一个值(而不是一次产生所有的值)，可以从网络请求、数据库调用或其他异步代码等异步操作中产生值。<br/>它通过其 API 支持协程，因此您也可以使用协程来转换流。</p><p id="5528" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 1.3 UserInfoDatabase.kt </strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="d211" class="kr ks in kn b gy kt ku l kv kw">@Database(entities = [UserInfoEntity::class], version = 1, exportSchema = false)<br/>abstract class UserInfoDatabase : RoomDatabase() {<br/><br/>    abstract fun dataEntryDao(): DataEntryDao<br/><br/>    companion object {<br/><br/>        @Volatile<br/>        private var INSTANCE: UserInfoDatabase? = null<br/><em class="lt"><br/>        </em>fun getDatabase(ctx: Context, scope: CoroutineScope): UserInfoDatabase {<br/>            return when (val temp = INSTANCE) {<br/>                null -&gt; <em class="lt">synchronized</em>(this) <strong class="kn io">{<br/>                    </strong>Room.databaseBuilder(<br/>                        ctx.<em class="lt">applicationContext</em>, UserInfoDatabase::class.<em class="lt">java</em>,<br/>                        "user_info"<br/>                    )<br/>                        .fallbackToDestructiveMigration()<br/>                        .build()<br/>                <strong class="kn io">}<br/>                </strong>else -&gt; temp<br/>            }<br/>        }<br/>    }<br/>}</span></pre><p id="fd7d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是 UserInfo 数据库的抽象类，它扩展了 RoomDatabase 并创建了它的单例实例。<em class="lt">注意:当您修改数据库模式时，您需要更新版本号并定义一个迁移策略。</em></p><p id="af2a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2。储存库</strong></p><p id="f01f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.1 <strong class="jm io">用户信息仓库. kt </strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="5023" class="kr ks in kn b gy kt ku l kv kw">class UserInfoRepository(private val dataEntryDao: DataEntryDao) {<br/><br/>   <em class="lt"><br/>    </em>var allUsers: Flow&lt;List&lt;UserInfoEntity&gt;&gt; = dataEntryDao.getAllUsers()<br/><br/>    suspend fun insert(userInfo: UserInfoEntity) {<br/>        dataEntryDao.insert(userInfo)<br/>    }<br/><br/>   suspend fun deleteById(u_id : Int){<br/>        dataEntryDao.deleteById(u_id)<br/>    }<br/>}</span></pre><p id="fb0c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们的 UserInfoRepository.kt 中，我们使用协程流来实时获取更改，注意:Room 在一个单独的线程上执行所有查询。<br/>观察到的流量会在数据发生变化时通知观察者。</p><p id="c453" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3。viewmodel </strong></p><p id="93bd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3.1 UserViewModel.kt </strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="6466" class="kr ks in kn b gy kt ku l kv kw">class UserViewModel(private val repository: UserInfoRepository) : ViewModel() {<br/><br/>    val allWords: LiveData&lt;List&lt;UserInfoEntity&gt;&gt; = repository.allUsers.<em class="lt">asLiveData</em>()<br/><em class="lt"><br/>    </em>fun insert(userInfo: UserInfoEntity) = <em class="lt">viewModelScope</em>.<em class="lt">launch </em><strong class="kn io">{<br/>        </strong>repository.insert(userInfo)<br/>    <strong class="kn io">}<br/><br/>    </strong>fun delete(userid : Int){<br/>        <em class="lt">viewModelScope</em>.<em class="lt">launch </em><strong class="kn io">{<br/>            </strong>repository.deleteById(userid)<br/>        <strong class="kn io">}<br/>    </strong>}<br/>}</span></pre><p id="23ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的视图模型类 UserViewModel 负责以生命周期意识的方式存储和管理 UI 相关的数据。<strong class="jm io"> ViewModel </strong>类允许数据在配置后继续存在。</p><p id="db32" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lt">请注意:<br/> </em>不要引用生命周期比你的视图模型短的上下文！例如:Activity、Fragment、View <br/>保持引用会导致内存泄漏，例如，ViewModel 引用了一个被破坏的 Activity！所有这些对象都可以被操作系统销毁，并在配置发生变化时重新创建，这在视图模型的生命周期中会发生很多次</p><p id="081f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3.2 用户视图模型工厂. kt </strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="ca65" class="kr ks in kn b gy kt ku l kv kw">class UserViewModelFactory(private val repository: UserInfoRepository): ViewModelProvider.Factory {<br/>    override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;): T {<br/>        if (modelClass.isAssignableFrom(UserViewModel::class.<em class="lt">java</em>)) {<br/>            @Suppress("UNCHECKED_CAST")<br/>            return UserViewModel(repository) as T<br/>        }<br/>        throw IllegalArgumentException("Unknown ViewModel class")<br/>    }<br/>}</span></pre><p id="27eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lt">如果您自己正在创建一个新项目，并且对 ViewModelFactory 有问题，请在 android{}块</em>内的 build.gradle 模块级别中添加这一行</p><p id="b9dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lt">kotlinOptions {<br/>freeCompilerArgs+=[<br/>"-Xjvm-default = all "，<br/> ] <br/> } </em></p><p id="a1b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4。UserApplication.kt </strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="df34" class="kr ks in kn b gy kt ku l kv kw">class UserApplication : Application(){<br/><br/>   private val applicationScope = <em class="lt">CoroutineScope</em>(<em class="lt">SupervisorJob</em>())<em class="lt"><br/>  </em>private val database by <em class="lt">lazy </em><strong class="kn io">{ </strong>UserInfoDatabase.getDatabase(this,  applicationScope) <strong class="kn io">}</strong></span><span id="35fc" class="kr ks in kn b gy lu ku l kv kw"><strong class="kn io"> </strong>val repository by <em class="lt">lazy </em><strong class="kn io">{ </strong>UserInfoRepository(database.dataEntryDao()) <br/> <strong class="kn io">}</strong></span><span id="5ea6" class="kr ks in kn b gy lu ku l kv kw">}</span></pre><p id="9ae2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 5。适配器</strong></p><p id="e929" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 5.1 用户信息适配器</strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="a5b5" class="kr ks in kn b gy kt ku l kv kw">class UserInfoAdapter : ListAdapter&lt;UserInfoEntity, UserInfoViewHolder&gt;(UserInfoComparator()) {<br/><br/>     var itemClickListener: (UserInfoEntity) -&gt; Unit = <strong class="kn io">{}<br/>    </strong>lateinit var binding : RecyclerviewItemBinding<br/><br/>    inner class UserInfoViewHolder(private val binding:   RecyclerviewItemBinding)  : RecyclerView.ViewHolder(binding.<em class="lt">root</em>){<br/><br/>        init {<br/>            binding.deleteIcon.setOnClickListener <strong class="kn io">{<br/>               </strong>itemClickListener(getItem(<em class="lt">layoutPosition</em>))<br/>            <strong class="kn io">}<br/>        </strong>}<br/><br/>        fun bind(userInfoEntity: UserInfoEntity) {<br/>            binding.itemName.<em class="lt">text </em>= userInfoEntity.name<br/>            binding.itemEmail.<em class="lt">text </em>= userInfoEntity.email<br/>        }<br/>    }<br/><br/><br/>    class UserInfoComparator : DiffUtil.ItemCallback&lt;UserInfoEntity&gt;() {<br/>        override fun areItemsTheSame(oldItem: UserInfoEntity, newItem: UserInfoEntity): Boolean {<br/>            return oldItem === newItem<br/>        }<br/><br/>        override fun areContentsTheSame(oldItem: UserInfoEntity, newItem: UserInfoEntity): Boolean {<br/>            return oldItem.id == newItem.id<br/>        }<br/>    }<br/><br/>    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): UserInfoViewHolder {<br/>        val inflater = LayoutInflater.from(parent.<em class="lt">context</em>)<br/>        binding = RecyclerviewItemBinding.inflate(inflater, parent, false)<br/>        return UserInfoViewHolder(binding)<br/>    }<br/><br/>    override fun onBindViewHolder(holder: UserInfoViewHolder, position: Int) {<br/>        holder.bind(getItem(position))<br/>    }<br/>}</span></pre><p id="653f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">6。ui </p><p id="cca6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 6.1 MainFragment.kt </strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="4565" class="kr ks in kn b gy kt ku l kv kw">class MainFragment : Fragment() {<br/><br/>    private var _binding: FragmentMainBinding? = null<br/><br/>    private val wordViewModel: UserViewModel by <em class="lt">viewModels </em><strong class="kn io">{<br/>        </strong>UserViewModelFactory((<em class="lt">activity</em>?.<em class="lt">application </em>as UserApplication).repository)<br/>    <strong class="kn io">}<br/><br/>    </strong>val userAdapter = UserInfoAdapter()<br/><br/>    private val binding get() = _binding!!<br/><br/>    override fun onCreateView(<br/>        inflater: LayoutInflater, container: ViewGroup?,<br/>        savedInstanceState: Bundle?<br/>    ): View? {<br/><br/>        _binding = FragmentMainBinding.inflate(inflater, container, false)<br/>        return binding.<em class="lt">root<br/><br/>    </em>}<br/><br/>    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {<br/>        super.onViewCreated(view, savedInstanceState)<br/><br/>        binding.buttonSave.setOnClickListener <strong class="kn io">{<br/><br/>            </strong>wordViewModel.insert(UserInfoEntity(name =binding.userName.<em class="lt">text</em>.toString(), email =  binding.email.<em class="lt">text</em>.toString()))<br/>        <strong class="kn io">}<br/><br/>        </strong>//To check if the email is valid or not<br/>        binding.email.<em class="lt">addTextChangedListener </em><strong class="kn io">{<br/>            </strong>validateField()<br/>        <strong class="kn io">}<br/>        </strong>binding.userName.<em class="lt">addTextChangedListener </em><strong class="kn io">{<br/>            </strong>validateField()<br/>        <strong class="kn io">}<br/><br/>        </strong>userAdapter.itemClickListener = <strong class="kn io">{<br/>            </strong>wordViewModel.delete(<strong class="kn io">it</strong>.id)<br/>            Snackbar.make(view,<br/>                <strong class="kn io">it</strong>.email + " is removed", Snackbar.<em class="lt">LENGTH_LONG</em>).show();<br/>        <strong class="kn io">}<br/><br/>        </strong>binding.recyclerview.<em class="lt">adapter </em>= userAdapter<br/>        wordViewModel.allWords.observe(<em class="lt">viewLifecycleOwner</em>, <em class="lt">Observer </em><strong class="kn io">{ </strong>userInfo <strong class="kn io">-&gt;<br/>            </strong>Collections.reverse(userInfo)<br/>            userAdapter.submitList(userInfo)<br/>        <strong class="kn io">}</strong>)<br/>    }<br/><br/>    override fun onDestroyView() {<br/>        super.onDestroyView()<br/>        _binding = null<br/>    }<br/><br/>    private fun isValidEmail(email: String): Boolean {<br/>        val pattern: Pattern = Patterns.<em class="lt">EMAIL_ADDRESS<br/>        </em>return pattern.matcher(email).matches()<br/>    }<br/><br/>    private fun validateField(){<br/>        binding.buttonSave.<em class="lt">isEnabled </em>= isValidEmail(binding.email.<em class="lt">text</em>.toString()) &amp;&amp; binding.userName.<em class="lt">text</em>.<em class="lt">isNotEmpty</em>()<br/><br/>    }<br/>}</span></pre><p id="d9f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">6.2 MainActivity.kt </p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="1975" class="kr ks in kn b gy kt ku l kv kw">class MainActivity : AppCompatActivity() {<br/><br/>    private lateinit var appBarConfiguration: AppBarConfiguration<br/>    private lateinit var binding: ActivityMainBinding<br/><br/>    override fun onCreate(savedInstanceState: Bundle?) {<br/>        WindowCompat.setDecorFitsSystemWindows(<em class="lt">window</em>, false)<br/>        super.onCreate(savedInstanceState)<br/><br/>        binding = ActivityMainBinding.inflate(<em class="lt">layoutInflater</em>)<br/>        setContentView(binding.<em class="lt">root</em>)<br/><br/>        val navHostFragment =<br/>            <em class="lt">supportFragmentManager</em>.findFragmentById(R.id.<em class="lt">nav_host_fragment_content_main</em>) as NavHostFragment<br/>        val navController = navHostFragment.<em class="lt">navController<br/>        </em>navController.navigate(R.id.<em class="lt">MainFragment</em>)<br/>    }<br/><br/>    override fun onCreateOptionsMenu(menu: Menu): Boolean {<br/>        <em class="lt">menuInflater</em>.inflate(R.menu.<em class="lt">menu_main</em>, menu)<br/>        return true<br/>    }<br/><br/>    override fun onOptionsItemSelected(item: MenuItem): Boolean {<br/>        return when (item.<em class="lt">itemId</em>) {<br/>            R.id.<em class="lt">action_settings </em>-&gt; true<br/>            else -&gt; super.onOptionsItemSelected(item)<br/>        }<br/>    }<br/><br/>    override fun onSupportNavigateUp(): Boolean {<br/>        val navController = <em class="lt">findNavController</em>(R.id.<em class="lt">nav_host_fragment_content_main</em>)<br/>        return navController.<em class="lt">navigateUp</em>(appBarConfiguration)<br/>                || super.onSupportNavigateUp()<br/>    }<br/>}<br/></span></pre><p id="0f89" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">7。XML 布局</p><p id="4c47" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以在这里的<a class="ae lv" href="https://github.com/abdulqadirtr/RoomDatabase-Data-Entry-App" rel="noopener ugc nofollow" target="_blank"> github </a> repo 中找到 xml 布局文件。</p><h1 id="b23a" class="lw ks in bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">输出</h1><figure class="ki kj kk kl gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="gh gi mt"><img src="../Images/548e70fd86fa901eadff020c20d93f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UXhNPIpdMuQe1p4V5--vNw.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">图 3。输出</figcaption></figure><p id="1b56" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">源代码:</strong></p><p id="041e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lv" href="https://github.com/abdulqadirtr/RoomDatabase-Data-Entry-App" rel="noopener ugc nofollow" target="_blank"> Github 链接</a>获取源代码</p><p id="3277" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">abdulqadirtr/RoomDatabase-Data-Entry-App:一个简单的数据输入应用程序，使用 room database 和协程来插入、获取和删除值。(github.com)</p></div></div>    
</body>
</html>