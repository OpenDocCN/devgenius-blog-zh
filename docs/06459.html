<html>
<head>
<title>How I can make ssh from server to Jenkins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何从服务器到Jenkins进行ssh</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-i-can-make-ssh-from-server-to-jenkins-8dcc34647c6b?source=collection_archive---------1-----------------------#2022-01-10">https://blog.devgenius.io/how-i-can-make-ssh-from-server-to-jenkins-8dcc34647c6b?source=collection_archive---------1-----------------------#2022-01-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/77630ca34d54c385cde57ca8b4cb3d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*gXKwRdLMuG5mlS1Ry6y7wQ.png"/></div></figure><h2 id="d680" class="jr js in bd jt ju jv dn jw jx jy dp jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">简介:</h2><p id="1ee7" class="pw-post-body-paragraph kn ko in kp b kq kr ks kt ku kv kw kx ka ky kz la ke lb lc ld ki le lf lg lh ig bi translated">在本文中，我将解释如何通过ssh命令行从Jenkins服务器登录到另一个服务器</p><p id="451e" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">我们可以在Jenkins中创建新的凭据，以使用不同的<strong class="kp io"> IP地址</strong>访问另一台服务器来部署项目，但不能使用传统方式的用户名和密码创建凭据。不，当我想使用不同的IP地址访问另一台服务器时，这是不正确的。解决方案是为用户创建公钥和私钥，并将它们作为机器注入Jenkins和Jenkins服务器。</p><p id="eeb1" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">我建议在开始阅读本文之前先阅读这篇文章:</p><ul class=""><li id="1c49" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">如果不知道什么是詹金斯，你可以阅读这篇文章。</li><li id="54c7" class="ln lo in kp b kq lw ku lx ka ly ke lz ki ma lh ls lt lu lv bi translated">如果您不知道什么是CI/CD概念，请阅读本文。</li><li id="9d1c" class="ln lo in kp b kq lw ku lx ka ly ke lz ki ma lh ls lt lu lv bi translated">如果你不知道什么是詹金斯管道阅读这篇文章。</li><li id="b128" class="ln lo in kp b kq lw ku lx ka ly ke lz ki ma lh ls lt lu lv bi translated">如果你不知道如何运行詹金斯作为一个docker图像阅读这篇文章。</li></ul><p id="e7b6" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">我可以从Jenkins直接登录到我们的服务器，因为这不安全，但Jenkins会用他的方式在您的服务器中部署您的项目</p><p id="183c" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">在本文中，我想解释如何使用管道在我们的服务器内部部署我的项目。</p><blockquote class="mb mc md"><p id="b2a6" class="kn ko me kp b kq li ks kt ku lj kw kx mf lk kz la mg ll lc ld mh lm lf lg lh ig bi translated"><em class="in">你一定知道</em> <a class="ae mi" rel="noopener ugc nofollow" target="_blank" href="/what-is-ci-cd-concept-375cb226cf3d"> <em class="in">什么是CI/CD概念？</em> </a> <em class="in">，</em> <a class="ae mi" href="https://medium.com/@abdalrhmanalkraien/what-is-jenkins-bc8bebcc05cf" rel="noopener"> <em class="in">詹金斯是什么？</em> </a> <em class="in">，</em> <a class="ae mi" href="https://medium.com/@abdalrhmanalkraien/ci-cd-concept-with-pipeline-3408d2fff38" rel="noopener"> <em class="in"> CI/CD概念用管道</em></a>T22<a class="ae mi" rel="noopener ugc nofollow" target="_blank" href="/what-is-jenkins-pipeline-and-jenkinsfile-96f30f3a29c"><em class="in">什么是Jenkins管道和JenkinsFile？</em> </a> <em class="in">为理解本文</em></p></blockquote><h1 id="b91a" class="mj js in bd jt mk ml mm jw mn mo mp jz mq mr ms kd mt mu mv kh mw mx my kl mz bi translated">让我们来处理它:</h1><p id="059a" class="pw-post-body-paragraph kn ko in kp b kq kr ks kt ku kv kw kx ka ky kz la ke lb lc ld ki le lf lg lh ig bi translated">我有Jenkins作为docker镜像运行在本地机器上，我有<strong class="kp io">云服务器</strong>。</p><p id="f5dd" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">我将把我的项目部署到我的<strong class="kp io">云服务器</strong>上，但是从<strong class="kp io">本地机器</strong>使用<strong class="kp io"> CI/CD概念使用Jenkins管道</strong>。</p><p id="d330" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">在这种情况下，我们遇到了一个问题，因为Jenkins无法使用用户名和密码在云服务器内部进行部署。</p><p id="edaa" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">在这篇文章中，我将解决这个问题。让詹金斯登录我的云服务器。</p><p id="2edd" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">我们将在这里应用另一种安全方法，称为<strong class="kp io"> ssh安全密钥</strong>，这种方法依赖于两个文件，称为<strong class="kp io">公钥</strong>和<strong class="kp io">私钥</strong></p><p id="4538" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">将把来自云服务器的<strong class="kp io">公钥文件</strong>放入本地机器中，并将来自云服务器的<strong class="kp io">私钥</strong>放入Jenkins凭证中，以制作新凭证。</p><blockquote class="mb mc md"><p id="2655" class="kn ko me kp b kq li ks kt ku lj kw kx mf lk kz la mg ll lc ld mh lm lf lg lh ig bi translated"><em class="in">我正在使用Ubuntu 20.4LTS作为云服务器的操作系统，我想在操作系统中制作</em> <strong class="kp io"> <em class="in"> ssh安全密钥</em> </strong> <em class="in">，windows有不同的方法来制作ssh安全代码</em></p></blockquote></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><ul class=""><li id="6154" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">第一步，我将从我的终端登录云服务器:</li></ul><p id="9938" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">在这一步中，我可以使用下面的命令来访问我的云服务器</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="b4d1" class="jr js in nm b gy nq nr l ns nt">ssh -l root my-ip-address</span></pre><p id="98f8" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">在这里，我将通过<strong class="kp io"> root </strong>用户登录我的云服务器。按enter键后，您必须输入正确的<strong class="kp io">密码</strong>才能登录您的服务器。</p></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><ul class=""><li id="da9e" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">好的，现在我会写一些命令，如果你需要的话，但是我认为在这篇文章中你不需要这些</li></ul><p id="de5a" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">下面的命令可以看出现在登录的是什么用户</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="424b" class="jr js in nm b gy nq nr l ns nt">whoami</span></pre><ul class=""><li id="344f" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">你一定会看到这样的结果</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="c0f7" class="jr js in nm b gy nq nr l ns nt">root@ubuntu-16gb-hel1-1:~# whoami</span><span id="eee4" class="jr js in nm b gy nu nr l ns nt">root</span></pre><ul class=""><li id="f888" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">如果我需要查看什么是IP地址或其他重要信息，我可以编写以下命令</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="9ccc" class="jr js in nm b gy nq nr l ns nt">iconfig</span></pre><p id="9704" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">或者相当于</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="510f" class="jr js in nm b gy nq nr l ns nt">ip addr show</span></pre><ul class=""><li id="e37d" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">如果您想创建一个新用户，您可以使用以下命令</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="0d9e" class="jr js in nm b gy nq nr l ns nt">sudo adduser newUserName</span></pre><p id="40e1" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">在上面的命令中，您必须编写密码和其他信息来创建用户</p><ul class=""><li id="9c05" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">好了，现在我想在我的服务器上创建shh key，下面的命令将创建shh key</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="e479" class="jr js in nm b gy nq nr l ns nt">ssh-keygen</span></pre><p id="04a7" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">上述命令将在<strong class="kp io">内生成两个文件的私钥和公钥。操作系统中的ssh </strong>目录</p><p id="b7f4" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated"><code class="fe nv nw nx nm b">ssh-keygen</code>使用<strong class="kp io"> SHA256 </strong>算法公开您的安全密钥。</p><p id="a803" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">按回车键后你可以看到如下输出</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="2d47" class="jr js in nm b gy nq nr l ns nt">Generating public/private rsa key pair.</span><span id="1708" class="jr js in nm b gy nu nr l ns nt">Enter file in which to save the key (/root/.ssh/id_rsa):</span><span id="f12d" class="jr js in nm b gy nu nr l ns nt">Enter passphrase (empty for no passphrase):</span><span id="4544" class="jr js in nm b gy nu nr l ns nt">Enter same passphrase again:</span><span id="c835" class="jr js in nm b gy nu nr l ns nt">Your identification has been saved in /root/.ssh/id_rsa</span><span id="4afb" class="jr js in nm b gy nu nr l ns nt">Your public key has been saved in /root/.ssh/id_rsa.pub</span><span id="5f7c" class="jr js in nm b gy nu nr l ns nt">The key fingerprint is:</span><span id="ec63" class="jr js in nm b gy nu nr l ns nt">SHA256:n8/vqeJTUa8AUsDat4gsuluxaWnRTbN4UjOgMacwJ+o root@abed-Inspiron-5593</span><span id="3f98" class="jr js in nm b gy nu nr l ns nt">The key's randomart image is:</span><span id="f438" class="jr js in nm b gy nu nr l ns nt">+---[RSA 3072]----+</span><span id="4a4b" class="jr js in nm b gy nu nr l ns nt">|  + + +..o.      |</span><span id="54de" class="jr js in nm b gy nu nr l ns nt">| . = - .+     .  |</span><span id="105c" class="jr js in nm b gy nu nr l ns nt">|.   o  =*+   . . |</span><span id="8c11" class="jr js in nm b gy nu nr l ns nt">|.    .o=*=  o    |</span><span id="7f7f" class="jr js in nm b gy nu nr l ns nt">| E  o.+oS    o   |</span><span id="463b" class="jr js in nm b gy nu nr l ns nt">|   ..= o . . ..  |</span><span id="1ef3" class="jr js in nm b gy nu nr l ns nt">|    =.o   o.     |</span><span id="98ce" class="jr js in nm b gy nu nr l ns nt">|   ... .  o    . |</span><span id="3fb5" class="jr js in nm b gy nu nr l ns nt">|    ..   ..o++   |</span><span id="fca0" class="jr js in nm b gy nu nr l ns nt">+----[SHA256]-----+</span></pre><ul class=""><li id="9df7" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">现在我想转到公钥和私钥目录，我可以使用以下命令转到目录</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="462e" class="jr js in nm b gy nq nr l ns nt">cd /root/.ssh/</span></pre><ul class=""><li id="b172" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">之后如果我想看什么？/ssh文件具有我可以编写的以下命令。</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="b4f9" class="jr js in nm b gy nq nr l ns nt">ls</span></pre><ul class=""><li id="6086" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">我可以在按下回车键后看到这个结果</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="e1be" class="jr js in nm b gy nq nr l ns nt">id_rsa  id_rsa.pub  known_hosts</span></pre><p id="7964" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">在上述结果中，我可以找到3个文件，我只需要上述文件中的两个文件</p><p id="2681" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated"><code class="fe nv nw nx nm b">id_rsa</code>它是一个私钥</p><p id="06e9" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated"><code class="fe nv nw nx nm b">id_rsa.pub</code>它是一个公钥</p><ul class=""><li id="c2f5" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">在这一步中，我将把公钥复制到我的本地服务器，这是同一个Jenkins服务器</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="fd84" class="jr js in nm b gy nq nr l ns nt">ssh-copy-id -i id_rsa.pub user@ip.address.here</span></pre><ul class=""><li id="6165" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">现在，如果你想从本地服务器登录到云服务器，你可以写这个命令，你可以注意云服务器不希望从你写云服务器密码。</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="d982" class="jr js in nm b gy nq nr l ns nt">ssh user@ip.address.here</span></pre><p id="8996" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated"><strong class="kp io">为什么现在云服务器不需要写密码？还有云服务器怎么保证你有没有权限？</strong></p><p id="71ec" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">因为has本地机器有一个公钥，而云服务器有私钥，在这种情况下，当你想登录并提取密码并检查是否匹配时，私钥将解密公钥。</p><ul class=""><li id="ebaf" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">好了，现在我们想从云服务器中提取我们的私钥，我们可以使用这个命令来提取它，</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="4098" class="jr js in nm b gy nq nr l ns nt">cat id_rsa</span></pre><ul class=""><li id="e5fc" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">按回车键后，可以看到这个结果</li></ul><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="6bf6" class="jr js in nm b gy nq nr l ns nt">-----BEGIN OPENSSH PRIVATE KEY-----</span><span id="32a7" class="jr js in nm b gy nu nr l ns nt">b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn</span><span id="70d7" class="jr js in nm b gy nu nr l ns nt">NhAAAAAwEAAQAAAYEAxVsChxM8CXeb6ZmoOA1OpGMrLSzDHoCqinsdmanGnGNNHQ0+j8q+</span><span id="f6dc" class="jr js in nm b gy nu nr l ns nt">JVKvc9EZxkjfmVDYPUp1VF99bc9ZrZUDzOspmpl/3Vgu8mW2ZDxVoEqJzLkDS5ZK4rQpYL</span><span id="c4d0" class="jr js in nm b gy nu nr l ns nt">Ogw7+LWA8EGtgpFmIVfPssG79itFiNF4PPJWbzoUSk0dRW3v8vS/joApkuvTOyis8viKUy</span><span id="198e" class="jr js in nm b gy nu nr l ns nt">TbT7Dii1eEhRklQVPj+g02u2nK0baHDBqoZfyDJTmA/X4EuxPW5wieojM23Ze0Nf9Gkv+j</span><span id="ad0d" class="jr js in nm b gy nu nr l ns nt">vGDW+jsP6FFKaMA2VmeEAPeyfsx1YqqBh/T7MES8bYrXUnhfCDcj60MzrLSxgUbmUPDxi6</span><span id="fc19" class="jr js in nm b gy nu nr l ns nt">Ts/pk3X8Rt4Ms+mjYmps8SodAXZ8g2D007T2xcQPTmxGGuJf6gi7AvTdv9Uc7AWfU7uqpJ</span><span id="9829" class="jr js in nm b gy nu nr l ns nt">zDmtWy+ECqhOqetpPKweMR0t4pf79bkVe/eqIVFpNBKOqH/23NwnKrGoaTvtfI5syWg7JP</span><span id="d01b" class="jr js in nm b gy nu nr l ns nt">OL3eVr4Q2ZEPorXYmW22cvEujBBXyq29YUdZcm+fAAAFkBtGxtYbRsbWAAAAB3NzaC1yc2</span><span id="a55d" class="jr js in nm b gy nu nr l ns nt">EAAAGBAMVbAocTPAl3m+mZqDgNTqRjKy0swx6Aqop7HZmpxpxjTR0NPo/KviVSr3PRGcZI</span><span id="9d14" class="jr js in nm b gy nu nr l ns nt">35lQ2D1KdVRffW3PWa2VA8zrKZqZf91YLvJltmQ8VaBKicy5A0uWSuK0KWCzoMO/i1gPBB</span><span id="2f1b" class="jr js in nm b gy nu nr l ns nt">rYKRZiFXz7LBu/YrRYjReDzyVm86FEpNHUVt7/L0v46AKZLr0zsorPL4ilMk20+w4otXhI</span><span id="a2b6" class="jr js in nm b gy nu nr l ns nt">//// other code here</span><span id="a090" class="jr js in nm b gy nu nr l ns nt">-----END OPENSSH PRIVATE KEY-----</span></pre></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><ul class=""><li id="7e66" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">我们将复制该密钥，并将其放入Jenkins凭据中。</li><li id="03b5" class="ln lo in kp b kq lw ku lx ka ly ke lz ki ma lh ls lt lu lv bi translated">现在，我们将转到**Jenkins UI**查看以下图片以了解步骤:</li><li id="c5b8" class="ln lo in kp b kq lw ku lx ka ly ke lz ki ma lh ls lt lu lv bi translated">-打开Jenkins仪表板时，我们将转到管理Jenkins</li></ul><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi ny"><img src="../Images/f59062fe044b9be8fe9f58a13aa2c31d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NhWyO7Em7FJI4hqtReIo_A.png"/></div></div></figure><ul class=""><li id="73a7" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">表格<strong class="kp io">管理詹金斯</strong>我们将前往<strong class="kp io">管理凭证</strong></li></ul><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi ny"><img src="../Images/f5abd0049425e37095416601bc498c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fJKu-tsvzvQFLnJ5oEad9w.png"/></div></div></figure><ul class=""><li id="b51b" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">从<strong class="kp io">管理凭证</strong>我们将创建新凭证</li></ul><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi ny"><img src="../Images/e0b713b9d3418f66f66c281c34ecbe30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wtqqoyXbGfTfA546b-ANZw.png"/></div></div></figure><p id="e3e6" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">上图中是一个创建新凭据</p><ul class=""><li id="b8ca" class="ln lo in kp b kq li ku lj ka lp ke lq ki lr lh ls lt lu lv bi translated">我选择了一种叫做**SSH用户名的凭证，带有私钥</li><li id="cf99" class="ln lo in kp b kq lw ku lx ka ly ke lz ki ma lh ls lt lu lv bi translated">我为这个名为<strong class="kp io"> Login_Cloud_Server </strong>的凭证写了Id，我将在JenkinsFile中使用它</li><li id="b183" class="ln lo in kp b kq lw ku lx ka ly ke lz ki ma lh ls lt lu lv bi translated">在我的例子中选择用户名是<strong class="kp io">根</strong></li><li id="d71f" class="ln lo in kp b kq lw ku lx ka ly ke lz ki ma lh ls lt lu lv bi translated">最后，我在Jenkins内部放了一个云服务器的私钥</li></ul><p id="3344" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">按“确定”后，我们将拥有一个名为<strong class="kp io"> Login_Cloud_Server </strong>的新凭据</p><p id="c07a" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">您可以看到下面的图像</p><p id="e56b" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">按下“确定”后，我们将拥有名为<strong class="kp io">登录_云_服务器</strong>的新凭据</p><p id="9456" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">您可以看到下面的图像</p><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nz oa di ob bf oc"><div class="gh gi od"><img src="../Images/61691da082b03c50b4f14b5687003fb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTltH4yoF5wXd_JxkqSZMw.png"/></div></div></figure></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><h2 id="eadc" class="jr js in bd jt ju jv dn jw jx jy dp jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">我如何在詹金斯文件中使用它？</h2><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="c83e" class="jr js in nm b gy nq nr l ns nt">pipeline{</span><span id="9d85" class="jr js in nm b gy nu nr l ns nt">   agent any</span><span id="c549" class="jr js in nm b gy nu nr l ns nt">   stages{</span><span id="bc41" class="jr js in nm b gy nu nr l ns nt">      stage('login server'){</span><span id="eaab" class="jr js in nm b gy nu nr l ns nt">         steps{<br/>            sshagent(credentials:['Login_Cloud_Server']){</span><span id="d5d9" class="jr js in nm b gy nu nr l ns nt">               sh 'ssh  -o StrictHostKeyChecking=no  root@135.181.203.3 uptime "whoami"'</span><span id="a5ac" class="jr js in nm b gy nu nr l ns nt">          }</span><span id="9433" class="jr js in nm b gy nu nr l ns nt">        echo "success lgoin"</span><span id="811b" class="jr js in nm b gy nu nr l ns nt">         }</span><span id="edb1" class="jr js in nm b gy nu nr l ns nt">       }</span><span id="3c19" class="jr js in nm b gy nu nr l ns nt">   }</span><span id="babe" class="jr js in nm b gy nu nr l ns nt">}</span></pre><p id="50f3" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">运行管道后，您必须在输出中看到</p><pre class="nh ni nj nk gt nl nm nn no aw np bi"><span id="7ca9" class="jr js in nm b gy nq nr l ns nt">.....</span><span id="a36f" class="jr js in nm b gy nu nr l ns nt">root // from server</span><span id="285c" class="jr js in nm b gy nu nr l ns nt">success lgoin // from pipeline stage</span><span id="4632" class="jr js in nm b gy nu nr l ns nt">.....</span></pre><h1 id="8851" class="mj js in bd jt mk ml mm jw mn mo mp jz mq mr ms kd mt mu mv kh mw mx my kl mz bi translated">结论</h1><p id="84bc" class="pw-post-body-paragraph kn ko in kp b kq kr ks kt ku kv kw kx ka ky kz la ke lb lc ld ki le lf lg lh ig bi translated">在本文中，我解释了如何通过私钥创建新的ssh凭证。</p><p id="0ff5" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">当您有两台服务器时，您可以使用这种方式第一台服务器负责Jenkins管理，第二台服务器负责您的项目。</p><p id="5745" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">而且两个服务器对它没有任何依赖。</p><p id="6ab9" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">如果你想应用<strong class="kp io"> CI/CD概念</strong>并且在你的项目中使用docker和kubernetes，这种方式是非常重要的。</p><p id="e9ff" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated">你可以看这篇文章了解什么是<strong class="kp io"> CI/CD概念</strong>，你也可以看这篇文章了解什么是<strong class="kp io"> Jenkins </strong>作为一个项目</p><h1 id="4338" class="mj js in bd jt mk ml mm jw mn mo mp jz mq mr ms kd mt mu mv kh mw mx my kl mz bi translated">参考</h1><p id="98d5" class="pw-post-body-paragraph kn ko in kp b kq kr ks kt ku kv kw kx ka ky kz la ke lb lc ld ki le lf lg lh ig bi translated">https://medium . com/edu reka/what-is-continuous-integration-40 e 75 e 8326 e 8</p><p id="52d2" class="pw-post-body-paragraph kn ko in kp b kq li ks kt ku lj kw kx ka lk kz la ke ll lc ld ki lm lf lg lh ig bi translated"><a class="ae mi" href="https://jenkins-x.io/about/concepts/" rel="noopener ugc nofollow" target="_blank">https://jenkins-x.io/about/concepts/</a></p></div></div>    
</body>
</html>