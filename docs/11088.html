<html>
<head>
<title>Connect Polkadot to a Next.js website with @polkadot/extension-dapp</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用@polkadot/extension-dapp 将 Polkadot 连接到 Next.js 网站</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/connect-polkadot-to-a-next-js-website-with-polkadot-extension-dapp-e422e7e363a6?source=collection_archive---------14-----------------------#2022-12-17">https://blog.devgenius.io/connect-polkadot-to-a-next-js-website-with-polkadot-extension-dapp-e422e7e363a6?source=collection_archive---------14-----------------------#2022-12-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8c7a574bffdd85c16cb243c87562c7f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pTmo7hlfEwbSYMBE_d8q5Q.png"/></div></div></figure><h1 id="ea48" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">🔗链接</h1><ul class=""><li id="552f" class="kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated"><a class="ae ll" href="https://github.com/andriishupta" rel="noopener ugc nofollow" target="_blank">andriishupta/polkadot-extension-dapp-example | GitHub</a></li><li id="b077" class="kt ku in kv b kw lm ky ln la lo lc lp le lq lg lh li lj lk bi translated"><a class="ae ll" href="https://polkadot-extension-dapp-example.vercel.app/" rel="noopener ugc nofollow" target="_blank">polkadot-extension-dapp-example |部署在 Vercel 上</a></li><li id="1ff4" class="kt ku in kv b kw lm ky ln la lo lc lp le lq lg lh li lj lk bi translated"><a class="ae ll" href="https://polkadot.js.org/docs/extension/" rel="noopener ugc nofollow" target="_blank">延期文件</a></li><li id="33ae" class="kt ku in kv b kw lm ky ln la lo lc lp le lq lg lh li lj lk bi translated"><a class="ae ll" href="https://subwallet.app/" rel="noopener ugc nofollow" target="_blank">子波</a></li><li id="3b5a" class="kt ku in kv b kw lm ky ln la lo lc lp le lq lg lh li lj lk bi translated">PolkaVerse | GitHub </li><li id="b3b1" class="kt ku in kv b kw lm ky ln la lo lc lp le lq lg lh li lj lk bi translated"><a class="ae ll" href="https://github.com/andriishupta/subtips-app" rel="noopener ugc nofollow" target="_blank"> Subtips | Github </a></li><li id="0f32" class="kt ku in kv b kw lm ky ln la lo lc lp le lq lg lh li lj lk bi translated">🌴<a class="ae ll" href="https://linktr.ee/andriishupta" rel="noopener ugc nofollow" target="_blank">我的链接</a></li></ul><h1 id="f387" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">📰发布于</h1><ul class=""><li id="ef53" class="kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated"><a class="ae ll" href="https://blog.andriishupta.dev/" rel="noopener ugc nofollow" target="_blank">哈希节点💻</a></li><li id="2578" class="kt ku in kv b kw lm ky ln la lo lc lp le lq lg lh li lj lk bi translated"><a class="ae ll" href="https://andriishupta.medium.com/" rel="noopener">中型✍️ </a></li><li id="c829" class="kt ku in kv b kw lm ky ln la lo lc lp le lq lg lh li lj lk bi translated"><a class="ae ll" href="https://dev.to/andriishupta" rel="noopener ugc nofollow" target="_blank">开发社区👩‍💻👨‍💻</a></li></ul><h1 id="4f28" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">🤓介绍</h1><p id="522d" class="pw-post-body-paragraph lr ls in kv b kw kx lt lu ky kz lv lw la lx ly lz lc ma mb mc le md me mf lg ig bi translated">作为一名开发人员，有必要了解各种区块链平台之间的差异，以选择适合您需求的平台。一个关键的区别(对我来说)是开发者可以获得技术资源和教程。以太坊有许多文章和教程演示如何将钱包连接到网站，而 Polkadot 上的信息较少。这可能会让刚接触以太坊的开发者更容易入门，并学习如何在该平台上构建应用。</p><p id="9bc0" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">对于开发人员来说，熟悉 Polkadot 以及如何在它的平台上构建也很重要，因为它有独特的特性和潜在的应用。</p><p id="1f27" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">如今，对于 web3 社区来说，开发人员在文档之外的体验非常重要。</p><p id="80ab" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">在本文中，我将展示一个如何将<a class="ae ll" href="https://subwallet.app" rel="noopener ugc nofollow" target="_blank"> SubWallet </a>(这就是我所使用的)连接到 Next.js 网站的例子。</p><h1 id="5b30" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">技术</h1><p id="838d" class="pw-post-body-paragraph lr ls in kv b kw kx lt lu ky kz lv lw la lx ly lz lc ma mb mc le md me mf lg ig bi translated">在以太坊上，我们有 web3.js 和 ethers.js 用于连接到一个网站和许多建立在它上面的不同的库。例如，我见过的许多项目将<a class="ae ll" href="https://wagmi.sh/" rel="noopener ugc nofollow" target="_blank"> wagmi </a>与 React.js 一起使用。这只是一个福音，例如它包括了您需要与区块链交互的完整功能列表:“连接钱包”显示 ENS 和平衡信息、签署消息、与合同交互等等——所有这些都具有缓存、请求重复数据删除和持久性。</p><p id="fdbb" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">Polkadot 有现成的库和工具可以和区块链一起工作，其中之一就是<code class="fe ml mm mn mo b">@polkadot/extension-dapp</code>。这就是我们用来“连接钱包”的东西。</p><h1 id="05df" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">🧑‍💻编码</h1><p id="6cbe" class="pw-post-body-paragraph lr ls in kv b kw kx lt lu ky kz lv lw la lx ly lz lc ma mb mc le md me mf lg ig bi translated">我们将使用默认的 Next.js 应用程序，所以这里没有什么新东西。查看<a class="ae ll" href="https://nextjs.org/docs/getting-started" rel="noopener ugc nofollow" target="_blank">入门</a>提醒自己 Next.js。</p><p id="12c8" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">使用<code class="fe ml mm mn mo b">@polkadot/extension-dapp</code>最关键的一点是它需要一个浏览器来运行，所以使用 Next.js，我们只需要在客户端渲染时渲染“连接”按钮。为此，我们将使用<a class="ae ll" href="https://nextjs.org/docs/advanced-features/dynamic-import" rel="noopener ugc nofollow" target="_blank">动态导入</a>。</p><p id="36bc" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated"><a class="ae ll" href="https://github.com/andriishupta/polkadot-extension-dapp-example/blob/main/pages/index.tsx" rel="noopener ugc nofollow" target="_blank">🔗源代码</a></p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/9c485d7f718ef044c7f3289c88f99362.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tiYAyP4OooCyZ4xu"/></div></div></figure><p id="0226" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">在主页上，我们动态加载我们的<code class="fe ml mm mn mo b">Connect</code>组件。连接组件是所有奇迹发生的地方。</p><p id="b011" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated"><a class="ae ll" href="https://github.com/andriishupta/polkadot-extension-dapp-example/blob/main/components/Connect.tsx" rel="noopener ugc nofollow" target="_blank">🔗源代码</a></p><p id="839c" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">先说进口:</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mu"><img src="../Images/13bc27cb11579e761feda8384b6e7ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kFe4S-nw-2Vk7ipQ"/></div></div></figure><p id="62fe" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated"><code class="fe ml mm mn mo b">InjectedAccountWithMeta</code>是我们将获得的一种账户。我是为了打字稿导入的。</p><p id="cea1" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">这里我们主要关注的是<code class="fe ml mm mn mo b">web3Enable</code>和<code class="fe ml mm mn mo b">web3Accounts</code>。</p><p id="6b8c" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated"><em class="mv">我在下面使用了承诺链，但是如果你更喜欢</em><code class="fe ml mm mn mo b">try-catch</code><em class="mv">+</em><code class="fe ml mm mn mo b">async / await</code><em class="mv">——那就来吧！</em></p><h1 id="2f68" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><code class="fe ml mm mn mo b">web3Enable</code></h1><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/c3c21d56d4d495106e6210bcdb0603f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YYT-AElllNstzNR-"/></div></div></figure><p id="4818" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">最初的功能是调用 even 来检查我们的浏览器是否有钱包可以使用。如果我们没有任何东西可以处理，扩展会在控制台中显示它，我们还应该抛出一个错误，告诉用户他应该使用有效的钱包来使用浏览器。</p><h1 id="7647" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><code class="fe ml mm mn mo b">web3Accounts</code></h1><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/ea1a4b2d9380569916cb9f69bcca14fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wpAJAyV3m3C6e8YZ"/></div></div></figure><p id="dcd5" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">与<code class="fe ml mm mn mo b">web3Accounts</code>相同——如果你是第一次打开网站，它会加载已连接的账户或提示你连接到网站——这对于 web3 用户来说是非常熟悉的体验。</p><p id="17fa" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">您可以在部署在 Vercel 上的<a class="ae ll" href="https://polkadot-extension-dapp-example.vercel.app" rel="noopener ugc nofollow" target="_blank">polkadot-extension-dapp-example |上尝试这个流程，它看起来是这样的:</a></p><p id="a5cf" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated"><em class="mv">免责声明:我只在有 1 个钱包的时候试过，但举个简单的例子，应该够用了。</em></p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/c35aeb286010e0360995bdcf65d8562a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WgTn5dpLWwbkfOKB"/></div></div></figure><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/6e92f5c4d317e6fddda1149495558570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ha6I1wdENbyM_tu9"/></div></div></figure><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/d1629d380087d0dc593fe05f5a219529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IbI-pw9I6kNYuquD"/></div></div></figure><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/e1da764154435437b350b1d1ed09e17d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z2B-E4-7ELDTQtg8"/></div></div></figure><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/22328141b779f74eb299692477e736a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QvUlhEVG5k1mlS3I"/></div></div></figure><h1 id="984f" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">🧑‍🏫后续步骤和更多示例</h1><p id="efc8" class="pw-post-body-paragraph lr ls in kv b kw kx lt lu ky kz lv lw la lx ly lz lc ma mb mc le md me mf lg ig bi translated">使用连接的钱包和可用帐户，您可以做任何您想做的事情:查看如何创建和签署交易，显示<code class="fe ml mm mn mo b">&lt;Identicon/&gt;</code>等:</p><p id="03cc" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated"><a class="ae ll" href="https://polkadot.js.org/docs" rel="noopener ugc nofollow" target="_blank">https://polkadot.js.org/docs</a></p><p id="751d" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">使用<code class="fe ml mm mn mo b">@polkadot/api</code>、<code class="fe ml mm mn mo b">@polkadot/ui-keyring</code>等更成熟的例子是<a class="ae ll" href="https://github.com/dappforce/polkaverse" rel="noopener ugc nofollow" target="_blank">波尔卡舞</a>。它是一个建立在<a class="ae ll" href="https://subsocial.network/" rel="noopener ugc nofollow" target="_blank">sub Social</a>——“社交金融的区块链”之上的去中心化社交网络。</p><p id="b54b" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">此外，我还有另一个项目，我试图使用 Subsocial API——这是 raw-raw-raw，因为我可以连接到 Subsocial API 和 Polkadot 来体验事情是如何工作的。随意看看:<a class="ae ll" href="https://github.com/andriishupta/subtips-app" rel="noopener ugc nofollow" target="_blank">https://github.com/andriishupta/subtips-app</a></p><p id="0bb3" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated">感谢阅读！🙇</p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="3135" class="pw-post-body-paragraph lr ls in kv b kw mg lt lu ky mh lv lw la mi ly lz lc mj mb mc le mk me mf lg ig bi translated"><em class="mv">原发布于</em><a class="ae ll" href="https://blog.andriishupta.dev/connect-polkadot-to-a-nextjs-website-with-polkadotextension-dapp" rel="noopener ugc nofollow" target="_blank"><em class="mv">https://blog . andriishupta . dev</em></a><em class="mv">。</em></p></div></div>    
</body>
</html>