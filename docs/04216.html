<html>
<head>
<title>CI/CD for Azure Functions with GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GitHub实现Azure功能的CI/CD</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ci-cd-for-azure-functions-with-github-47711cf6f912?source=collection_archive---------2-----------------------#2021-02-11">https://blog.devgenius.io/ci-cd-for-azure-functions-with-github-47711cf6f912?source=collection_archive---------2-----------------------#2021-02-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/f8c5921abe028715cf4608b27c3bc87b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IkzxBNZO14ERk-cUGMPMsQ.png"/></div></div></figure><p id="8ddd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">CI/CD通常是一个被低估的概念，大多数时候我们没有意识到它给你的产品带来的巨大价值。</p><p id="068a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这篇文章的动机来自于我为一个大型企业项目开发、维护和迁移一个完全无服务器的工作流基础设施的经验。</p><p id="2621" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">无论是拥有30多个功能应用和150多个功能的大型企业项目，还是小型企业项目，拥有一个可管理的工作流来维护代码并随时更新功能应用都是非常重要的。</p><p id="b9b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">幸运的是，Azure提供了一种简单的方式来实现这个工作流。</p><p id="aa72" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了简单起见，我假设您对GitHub和Azure函数有基本的了解。对于本文，我使用一个简单的基于HttpTrigger的Azure函数。如果你还没有接触过Azure的函数，我强烈推荐你阅读我下面的文章，学习如何创建一个函数。</p><div class="kt ku gp gr kv kw"><a href="https://medium.com/analytics-vidhya/azure-functions-for-dummies-part-1-http-trigger-a95cd000bc62" rel="noopener follow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">Azure虚拟函数—第1部分— http触发器</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">这是我计划撰写的关于Azure函数的系列文章的第1部分。从标题来看，这是一本傻瓜指南。而我…</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">medium.com</p></div></div><div class="lf l"><div class="lg l lh li lj lf lk jt kw"/></div></div></a></div><p id="6215" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们使用GitHub设置新部署的函数应用程序，使其具有CI/CD管道。</p><p id="2818" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了做到这一点，你需要一个GitHub帐户，并把功能代码放入一个你可以链接到的存储库中。</p><p id="7a04" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以使用包含简单Azure HTTP Trigger函数的示例存储库并开始使用。</p><div class="kt ku gp gr kv kw"><a href="https://github.com/rajeshr6r/testazurefunctions" rel="noopener  ugc nofollow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">rajeshr6r/testazurefunctions</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">在GitHub上创建一个帐户，为rajeshr6r/testazurefunctions开发做贡献。</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">github.com</p></div></div><div class="lf l"><div class="ll l lh li lj lf lk jt kw"/></div></div></a></div><p id="40e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">假设你已经有了部署在Azure中的功能App，我们再进一步。</p><p id="bb87" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于本文，我试图创建一个空的函数应用程序，并将其与我的GitHub库链接起来，以获得函数。<strong class="jx io">在你的案例中，如果你按照我的文章从上面创建了一个函数应用程序，你就已经有了这个函数，并且会用你存储库中的代码替换它。</strong></p><p id="d179" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我的空功能App是这样的</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lm"><img src="../Images/e7867d8e8efd7ec53c5af99ab2021651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S5lFJB1F1bn5SomMX82S4w.png"/></div></div></figure><p id="17fd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们链接包含函数App代码的GitHub库。</p><p id="38c1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第一步</strong>:点击部署中心</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/bccb379d66068d8117720f5e2444bbd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*94aaRuhPkoNoeklHtuxJSQ.png"/></div></figure><p id="43b7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第二步</strong>:配置GitHub凭证和资源库</p><p id="a0af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意:你应该在这里使用你的GitHub账户(<strong class="jx io">我的截图显示了我的账户</strong>)</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ls"><img src="../Images/c6ed829f72d92801d61d1de644039beb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XjdTsiHH8L3EnjWC4IbrLQ.png"/></div></div></figure><p id="3ba3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第三步:</strong>点击保存按钮，给Azure几分钟时间来完成这项工作。</p><p id="be66" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">步骤4 : </strong>让我们验证一下功能代码现在是否部署正确。它是</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/b8033cc796c51b0a6cb53a4a815b8971.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PdG_QGSCIye-_RuNwIS6Fg.png"/></div></div></figure><p id="929e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您还可以在这里验证函数下的Python代码。</p><p id="0110" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意第19行，这是HTTPTrigger函数的锅炉板代码。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lu"><img src="../Images/d694e75e3e2a92f682c38b3d58743f07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYMRHYF4OhMLymr0uJKlng.png"/></div></div></figure><p id="e11c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第5步:</strong>现在让我们在你最喜欢的代码编辑器或最好的代码编辑器(我喜欢VS Code)上修改代码，如果你想了解更多，可以看看下面的文章。</p><div class="kt ku gp gr kv kw"><a href="https://medium.com/@rajesh.r6r/is-visual-studio-code-the-coolest-ide-ever-80a59579612f" rel="noopener follow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">Visual Studio代码是有史以来最酷的IDE吗</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">我可能对VS代码有点固执己见。这是经过多年的开源和可能鄙视微软…</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">medium.com</p></div></div><div class="lf l"><div class="lv l lh li lj lf lk jt kw"/></div></div></a></div><p id="abb5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第六步:进行git推送</strong></p><p id="4edb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这种推送确保了你的代码被更新到存储库，而不是停留在那里，它还向Azure发送信号，要求它刷新功能代码。</p><p id="d560" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">出于我们的目的，我将第19行修改为</p><pre class="ln lo lp lq gt lw lx ly lz aw ma bi"><span id="9c4d" class="mb mc in lx b gy md me l mf mg">return func.HttpResponse(f"Hello, {name}. For Second Commit function executed successfully.")</span></pre><p id="1b05" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">第7步:让我们验证一下推送是否有效。请看第19行。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mh"><img src="../Images/6569c39240406bb39810177e63d0fb7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SGrJ1Df81EU8BGPrnIq6sA.png"/></div></div></figure><p id="d2b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您的无服务器工作流有了一个可靠的CI/CD管道。感谢GitHub，您现在可以放心了，您的功能总是可靠的，并且拥有最好的版本控制。</p><p id="cc69" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，如果您订阅了Azure Pipelines，也可以实现这一点。但我觉得这太复杂了，但这只是我的想法。我肯定很快会写一篇关于Azure Pipelines的CI/CD的文章。</p><p id="3ced" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">如果你有兴趣，可以考虑跟随我。</strong></p></div></div>    
</body>
</html>