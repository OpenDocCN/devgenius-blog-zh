<html>
<head>
<title>What is a shelve in Python?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的shelve是什么？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-is-a-shelve-in-python-dbf8561d014f?source=collection_archive---------7-----------------------#2020-08-16">https://blog.devgenius.io/what-is-a-shelve-in-python-dbf8561d014f?source=collection_archive---------7-----------------------#2020-08-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="4c76" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如何使用搁置对象？</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/c2f3f45201adc7264969fa1e357dd117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*okLcbGk0DTXZ5FuxmMcD1w.png"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk translated">搁置对象</figcaption></figure></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="1b37" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">幸运的是，对于这个问题，我们有一个简单的答案，shelve对象非常类似于Python中的字典，但唯一的区别是shelve将其数据存储在磁盘上的文件中，而不是内存中。</p><h1 id="8256" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">有什么好处？</h1><p id="a8e1" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">其中一些是:</p><ul class=""><li id="5b49" class="mi mj in jm b jn jo jr js jv mk jz ml kd mm kh mn mo mp mq bi translated">首先，您没有可用RAM数量的限制。</li><li id="5ada" class="mi mj in jm b jn mr jr ms jv mt jz mu kd mv kh mn mo mp mq bi translated">第二，你可以像在字典里一样方便地使用一个键。</li><li id="5d03" class="mi mj in jm b jn mr jr ms jv mt jz mu kd mv kh mn mo mp mq bi translated">第三，你可以在大文件中读写数据，而不用读写整个文件。</li></ul><p id="d184" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这些方面在对大文件执行多次访问的应用程序中非常有用，因为节省的时间是惊人的。</p><h1 id="1365" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">如何使用搁置对象？</h1><p id="1d8a" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">在Python中使用shelve对象非常简单，我们只需在需要时遵循以下步骤:</p><h2 id="7a4f" class="mw lg in bd lh mx my dn ll mz na dp lp jv nb nc lt jz nd ne lx kd nf ng mb nh bi translated">1.导入搁置模块</h2><p id="a0e6" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">这是一个简单的步骤，我们只用一行代码就可以完成:</p><pre class="kq kr ks kt gt ni nj nk nl aw nm bi"><span id="9a3a" class="mw lg in nj b gy nn no l np nq">import shelve</span></pre><h2 id="dc17" class="mw lg in bd lh mx my dn ll mz na dp lp jv nb nc lt jz nd ne lx kd nf ng mb nh bi translated">2.打开搁置对象</h2><p id="c057" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">该操作允许我们打开或创建(如果文件不存在)shelve对象或文件，我们可以使用<em class="nr"> shelve.open </em>函数执行该任务，将文件名作为参数发送。</p><pre class="kq kr ks kt gt ni nj nk nl aw nm bi"><span id="9dda" class="mw lg in nj b gy nn no l np nq">repos = shelve.open("github_repos")</span></pre><h2 id="fb0b" class="mw lg in bd lh mx my dn ll mz na dp lp jv nb nc lt jz nd ne lx kd nf ng mb nh bi translated">3.添加数据条目</h2><p id="a19f" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">现在，我们需要向之前创建的shelve对象(repos对象)添加数据。然而，在这一步我们有一个<em class="nr">限制</em>，不像字典，shelve键不能是任何数据类型，在这个例子中<em class="nr">我们必须使用字符串作为键</em>。</p><pre class="kq kr ks kt gt ni nj nk nl aw nm bi"><span id="782f" class="mw lg in nj b gy nn no l np nq">repos['SimpleBuy'] = ('hgodinez89', 'Online store', '1.0')</span><span id="ee3d" class="mw lg in nj b gy ns no l np nq">repos['login-app'] = ('hgodinez89', 'Login', '1.0')</span></pre><h2 id="bcec" class="mw lg in bd lh mx my dn ll mz na dp lp jv nb nc lt jz nd ne lx kd nf ng mb nh bi translated">4.检索数据条目</h2><p id="802b" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">要检索以前创建的数据条目，我们只需要用特定的键访问它。</p><pre class="kq kr ks kt gt ni nj nk nl aw nm bi"><span id="9090" class="mw lg in nj b gy nn no l np nq">repos['login-app']</span><span id="6563" class="mw lg in nj b gy ns no l np nq">Output:</span><span id="c7ce" class="mw lg in nj b gy ns no l np nq">('hgodinez89', 'Login', '1.0')</span></pre><h2 id="fb08" class="mw lg in bd lh mx my dn ll mz na dp lp jv nb nc lt jz nd ne lx kd nf ng mb nh bi translated">5.更新数据条目</h2><p id="2e41" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">当我们需要更新以前创建的数据条目时，我们只需用特定的键访问它。</p><pre class="kq kr ks kt gt ni nj nk nl aw nm bi"><span id="e714" class="mw lg in nj b gy nn no l np nq">repos['login-app'] = ('hgodinez89', 'Login with Firebase', '1.0')</span></pre><h2 id="a40a" class="mw lg in bd lh mx my dn ll mz na dp lp jv nb nc lt jz nd ne lx kd nf ng mb nh bi translated">6.关闭搁置对象</h2><p id="1ba3" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">最后，我们不能忘记关闭我们正在处理的shelve对象(<em class="nr"> repos </em> object)，原因是有时需要关闭shelve对象，以便将您所做的更改写回磁盘。</p><pre class="kq kr ks kt gt ni nj nk nl aw nm bi"><span id="b3b0" class="mw lg in nj b gy nn no l np nq">repos.close()</span></pre><p id="da21" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里你可以找到之前写的<a class="ae nt" href="https://gist.github.com/hgodinez89/c2f6cfd298d046282335fc5ccf99d20f" rel="noopener ugc nofollow" target="_blank">代码的要点。</a></p><p id="46d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">需要记住的是，shelve对象允许基本的字典操作、键分配或查找、<em class="nr"> del </em>、中的<em class="nr">以及<em class="nr"> keys </em>方法。</em></p><p id="78f1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">到目前为止，shelve对象看起来非常酷，但是，我们有一个限制，听起来可能不好，<em class="nr"> shelve对象不适合多用户</em>数据库，因为<em class="nr">它们不提供对并发访问的控制</em>。</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="4e6d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我认为shelve对象对于那些工作涉及存储或访问大文件中的数据片段的人来说是有用的，其好处是无需整个文件即可读取或写入数据片段。同时改善程序的执行，因为有更多的内存可用于程序的其余部分。</p><p id="7e7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请在本文中随意评论任何没有提到的细节。</p><p id="0990" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">非常感谢你来到这里。😊 👈</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="67c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这篇文章是受这本书的启发📖"<a class="ae nt" href="https://books.google.co.cr/books/about/The_Quick_Python_Book.html?id=urVEzQEACAAJ&amp;source=kp_book_description&amp;redir_esc=y" rel="noopener ugc nofollow" target="_blank">快速Python之书</a>"📖如果你想了解这门语言的基本概念，同时想了解其他高级主题，我向你广泛推荐。</p></div></div>    
</body>
</html>