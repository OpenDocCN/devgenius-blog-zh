<html>
<head>
<title>How to use spring boot togglz library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 spring boot togglz 库</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-use-spring-boot-togglz-library-d333286aee15?source=collection_archive---------2-----------------------#2022-11-06">https://blog.devgenius.io/how-to-use-spring-boot-togglz-library-d333286aee15?source=collection_archive---------2-----------------------#2022-11-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/0d3b139fd1bf6143dd99afd38654ec1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/0*yLIBtncORZq0Gerz.png"/></div></figure><blockquote class="jr js jt"><p id="d0a4" class="ju jv jw jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">什么是 Togglz 库</strong></p></blockquote><p id="5c94" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">Togglz 是 Java 的<a class="ae kw" href="http://martinfowler.com/bliki/FeatureToggle.html" rel="noopener ugc nofollow" target="_blank">特性切换</a>模式的实现。在持续部署和交付的环境中，特性切换是一种非常常见的敏捷开发实践。基本思想是将切换与您正在处理的每个新功能相关联。这允许您在应用程序运行时启用或禁用这些功能，甚至是针对单个用户。</p><p id="a487" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">参考:【https://www.togglz.org/ T4】</p><blockquote class="jr js jt"><p id="1b60" class="ju jv jw jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用弹簧靴的简单示例</p></blockquote><ol class=""><li id="9501" class="kx ky in jx b jy jz kc kd kt kz ku la kv lb ks lc ld le lf bi translated">让我们从添加所需的库开始</li></ol><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="89ee" class="lp lq in ll b gy lr ls l lt lu">implementation 'org.togglz:togglz-spring-boot-starter:3.0.0'<br/>implementation 'org.springframework.boot:spring-boot-starter-actuator'</span></pre><p id="f7e1" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">我们将需要执行器库来检查和修改切换值</p><p id="c349" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">2.创建实现功能的枚举</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lv"><img src="../Images/fa790f4774009180e19729a833e9406e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b9PXCWmbtkdCZFNHrQIY-Q.png"/></div></div></figure><p id="5158" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">3.现在用 bean 创建一个配置类来获取我们的特性值</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi ma"><img src="../Images/9218634aa65d8d94a5c3f1a1a55d046a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3v13qk4rwK2ZvtALIrsUZA.png"/></div></div></figure><p id="20be" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">4.现在，让我们在 application.properties 文件中添加我们的配置(让我们将标志的默认值设为 false)</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi ma"><img src="../Images/0b6cd1861d0a265d8d0c854bbc7439bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FEpJ4NjsVxC9FO9FwFrbNg.png"/></div></div></figure><p id="d1f3" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">5.是时候在我们的实现中使用我们的特性标志了，下面是示例代码</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mb"><img src="../Images/7f4242ccf9c0a845e6c275ffdf3351fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vQYcb8FSylOKdMz8V2_iCg.png"/></div></div></figure><p id="8c19" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">搞定了。！！</p><p id="8633" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">是的，我们已经完成了我们的实现，是时候测试我们的特性了</p><p id="a4ec" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated"><strong class="jx io">卷曲以检查开关</strong>的值</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="9c02" class="lp lq in ll b gy lr ls l lt lu">curl --location --request GET '<a class="ae kw" href="http://localhost:9092/actuator/togglz/'" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/actuator/togglz/'</a> \<br/>--header 'Content-Type: application/json'</span></pre><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mc"><img src="../Images/41f13fd692f1034a1ce935a021ebaec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AYC__rcrmop-By0ITCtMZA.png"/></div></div></figure><p id="cabb" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">注意:请记住，我们将特性的默认值设置为 false</p><p id="7f43" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">现在让我们检查这个特性是否在我们的代码中工作</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mc"><img src="../Images/b045e9d93f0f1fa30f1d0bd07db4740f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X27X9wqZ92CIQmsBZcTI2A.png"/></div></div></figure><p id="8df0" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated"><strong class="jx io">卷曲来改变你的特征值</strong></p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="6ed4" class="lp lq in ll b gy lr ls l lt lu">curl --location --request POST '<a class="ae kw" href="http://localhost:9092/actuator/togglz/FLAG'" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/actuator/togglz/FLAG'</a> \<br/>--header 'Content-Type: application/json' \<br/>--data-raw '{<br/>   "enabled": "true"<br/>}'</span></pre><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi mc"><img src="../Images/70bbed2039048dbd9f525b0b4c0087dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rZI3xOIxic9WjhrKJZihoA.png"/></div></div></figure><p id="e052" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">既然我们已经更改了标志的值，让我们测试一下我们的逻辑</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi md"><img src="../Images/bad67f1e0ef7bb8b09074afbdb486314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jkRC9_xHBtPGQUIUeMMUnQ.png"/></div></div></figure><p id="d3ed" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">Yayyy！！按预期工作</p><p id="e016" class="pw-post-body-paragraph ju jv in jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">在 spring boot 中实现特性 togglz 就是这么简单</p></div></div>    
</body>
</html>