<html>
<head>
<title>Guide to go_router (Flutter)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">go_router 指南(Flutter)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/guide-to-go-router-flutter-1ddcfa56d39c?source=collection_archive---------0-----------------------#2022-09-14">https://blog.devgenius.io/guide-to-go-router-flutter-1ddcfa56d39c?source=collection_archive---------0-----------------------#2022-09-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d68daa9042e19e19e92d018a2d21b38c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BBYtKviI7ac_KHnC"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Javier Allegue Barros 在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="8f73" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Go_router 是现在 flutter 官方支持的最新最流行的路由包。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="ec01" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">设置和基本使用案例。</h2><ol class=""><li id="229c" class="ly lz in kc b kd ma kh mb kl mc kp md kt me kx mf mg mh mi bi translated">在您的 pubspec.yaml 中添加 go_router</li></ol><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="74a0" class="lf lg in mo b gy ms mt l mu mv">flutter pub add go_router</span></pre><p id="2b64" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.配置路线</p><p id="e59e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这样定义路由器。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ee0a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">像这样使用 MaterialApp 中的路由器。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="ebbc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">并使用 go_router 导航到不同的页面，如下所示。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="aff5" class="lf lg in mo b gy ms mt l mu mv">GoRouter.of(context).go('/article');</span></pre><p id="de72" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">瞧啊。你完成了，这是用例的最简单形式。但是你们中的许多人都知道这对于一个更大的应用程序来说是不够的。因此，我们将对此进行更深入的研究。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="446b" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">在路由中传递参数</h2><p id="85f8" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl my kn ko kp mz kr ks kt na kv kw kx ig bi translated">大多数时候我们需要将数据从一个路由传递到另一个路由。而 go_router 提供了一个简单的方法来做到这一点。这样定义 go_route。这里我们使用了来自[GoRouterState]的[extra]属性。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="a9eb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">像这样使用它。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="0ace" class="lf lg in mo b gy ms mt l mu mv">GoRouter.of(context).go(AppRouter.singleArticle, extra: blog);</span></pre><p id="1d38" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里您可能已经注意到 go_router 只允许一个额外的参数。如果您需要向路由器传递多个值，请考虑使用 Map 或自定义类。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="2622" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">在路线中传递参数</h2><p id="13ed" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl my kn ko kp mz kr ks kt na kv kw kx ig bi translated">仅使用参数导航，URL 看起来像这样。从这里，我们不能只看网址就知道是哪篇文章。为了让 URL 看起来更好，我们需要传递参数。</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/35e202c950d4346a7f1d9b916072427b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*Q0OsvqvxitZrCV-7mPeDBA.png"/></div></figure><p id="7f27" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以这样实现。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="b5a9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">像这样使用它。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="e41b" class="lf lg in mo b gy ms mt l mu mv">GoRouter.of(context).go('article/${blog.id}');</span></pre><p id="ef26" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，URL 将看起来像这样。</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/51fe5f6cba78d2c663684d883a24e20b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*uXehuPB4XjH9z7oBVhOhHg.png"/></div></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="9500" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">未找到页面</h2><p id="f3cd" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl my kn ko kp mz kr ks kt na kv kw kx ig bi translated">当用户输入一个无效的 URL 时，我们需要显示一个错误页面。对 web 非常有用，用户可以明确地输入 URL。Go_router 已经默认提供了一个未找到的页面，但是我们可以修改并使用我们的小部件作为错误页面。而这样做的方法就是<strong class="kc io"> <em class="nd"> error_widget </em> </strong>和<strong class="kc io"> <em class="nd"> errorPageBuilder。</em> </strong>我们可以这样用。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7dc5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请记住，我们只需要使用一个。如果同时使用<strong class="kc io"> <em class="nd"> error_widget </em> </strong>和<strong class="kc io"><em class="nd">errorPageBuilder</em></strong>，error page builder 将生效。</p><p id="70db" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">go_router 的默认错误页面:</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/fed1336958a32234f245641879ae7146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oEk7vHcvTFePiq0FT0r48A.png"/></div></div></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="da45" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">URL 策略。</h2><p id="add7" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl my kn ko kp mz kr ks kt na kv kw kx ig bi translated">现在你可能已经注意到了 URL 上烦人的#号。我们可以通过在 runApp 函数之前的 main.dart 中添加下面一行来轻松地删除它。</p><pre class="mj mk ml mm gt mn mo mp mq aw mr bi"><span id="9f52" class="lf lg in mo b gy ms mt l mu mv">GoRouter.setUrlPathStrategy(UrlPathStrategy.path);</span></pre></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="3a5b" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">写干净的代码</strong></h2><p id="b8ec" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl my kn ko kp mz kr ks kt na kv kw kx ig bi translated">你可能已经注意到 go_router 有点冗长。我们需要使用字符串作为路径，这在大型应用程序中可能会变得难以管理。下面是我在 go_router 中管理路由的方法。</p><ol class=""><li id="0631" class="ly lz in kc b kd ke kh ki kl nf kp ng kt nh kx mf mg mh mi bi translated">在<strong class="kc io"><em class="nd">lib/config/routes/app _ routes . dart</em></strong>中创建文件</li><li id="6c6d" class="ly lz in kc b kd ni kh nj kl nk kp nl kt nm kx mf mg mh mi bi translated">编写以下代码(示例代码)</li></ol><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="99a4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里你可能已经注意到了获取字符串路径的<strong class="kc io"><em class="nd">singletarticwithparams</em></strong>方法。这是为了确保我们不使用错误的路径。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="56fb" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">TabBarView 上的嵌套路线</h2><p id="bee5" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl my kn ko kp mz kr ks kt na kv kw kx ig bi translated">对于嵌套路由，我们需要用不同的参数或数据调用相同的路由。</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/1c6a7d82230a23c8e958ce31d6e293e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EcTEmK61ujhZWBL3PWhXqA.png"/></div></div></figure><p id="9976" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">像这样配置路由。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="1fe6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，<strong class="kc io"><em class="nd">_ homePageRouteBuilder</em></strong>就是拿一个类型的文章来展示。可以是<strong class="kc io"> <em class="nd"> CurrentTab.blogs </em> </strong>或者<strong class="kc io"><em class="nd">current tab . favorite .</em></strong>根据这种类型构建首页。</p><p id="f9c7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nd">首页</em> </strong>代码会是这样的。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="65fc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">同样，我们可以创造一条嵌套的欲望之路。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="e3c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以在下面的资源库中找到所有这些代码。</p><div class="no np gp gr nq nr"><a href="https://github.com/stha-ums/go_router_example.git" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd io gy z fp nw fr fs nx fu fw im bi translated">GitHub-stha-ums/go _ router _ 示例</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">github.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of jt nr"/></div></div></a></div></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="9ec6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢您花时间阅读这篇文章。</p></div></div>    
</body>
</html>