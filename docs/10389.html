<html>
<head>
<title>How to find the number of days between two dates in PHP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 PHP 中找到两个日期之间的天数</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-find-the-number-of-days-between-two-dates-in-php-1404748b1e84?source=collection_archive---------0-----------------------#2022-10-30">https://blog.devgenius.io/how-to-find-the-number-of-days-between-two-dates-in-php-1404748b1e84?source=collection_archive---------0-----------------------#2022-10-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d8f0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">获取两个日期之间的天数</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/4969249f8eb6bbe62db32fe27c99cf36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FVhISbL8G313tDo0"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@esteejanssens?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃斯特扬森斯</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a57f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇博客中，我们将探索用 PHP 获取两个日期之间的天数的不同方法。</p><h2 id="ac69" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">方法 1-使用 DateTime::diff</h2><p id="3b3b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在这个方法中，我们将创建两个<a class="ae kv" href="https://www.php.net/manual/en/class.datetimeinterface.php" rel="noopener ugc nofollow" target="_blank">日期时间</a>对象。并通过使用<a class="ae kv" href="https://www.php.net/manual/en/datetime.diff.php" rel="noopener ugc nofollow" target="_blank"> diff </a>函数找出差异。</p><p id="26e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">DateTime::diff 返回两个 DateTime 对象之间的差异</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="7ea3" class="ls lt iq mr b gy mv mw l mx my">&lt;?php<br/>  $origin = new DateTime('2020-11-13');<br/>  $target = new DateTime('2020-11-25');<br/>  $interval = $origin-&gt;diff($target);<br/>  echo $interval-&gt;format('%R%a days'); // Output: +12 days<br/>?&gt;</span><span id="4b88" class="ls lt iq mr b gy mz mw l mx my">&lt;?php<br/>  $origin = new DateTime('now');<br/>  $target = new DateTime('+4days');<br/>  $interval = $origin-&gt;diff($target);<br/>  echo $interval-&gt;format('%R%a days'); // Output: +4 days<br/>?&gt;</span></pre></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h2 id="b2a9" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">方法 2-使用 date_diff()函数</h2><p id="46ec" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们将使用 PHP <a class="ae kv" href="https://www.php.net/manual/en/ref.datetime.php" rel="noopener ugc nofollow" target="_blank"> Date/Time </a>的内置<a class="ae kv" href="https://www.php.net/manual/en/function.date-diff.php" rel="noopener ugc nofollow" target="_blank"> date_diff </a>函数来找出两个日期之间的差异。这是第一种方法的过程风格。</p><p id="f3df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">函数的作用是:返回两个日期时间对象之间的差值。<a class="ae kv" href="https://www.php.net/manual/en/function.date-create" rel="noopener ugc nofollow" target="_blank"> date_create </a>函数用于创建日期时间对象。</p><p id="a104" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的例子将返回两个日期之间的天数。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="03fc" class="ls lt iq mr b gy mv mw l mx my">&lt;?php<br/>  $origin = date_create('2020-11-13');<br/>  $target = date_create('2020-11-25');<br/>  $interval = date_diff($origin, $target);<br/>  echo $interval-&gt;format('%R%a days');<br/>?&gt;</span><span id="68b7" class="ls lt iq mr b gy mz mw l mx my">// Output: +12 days</span></pre><p id="5921" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的例子中，我们使用了带有破折号日期格式的年、月和日。更多有效格式请参考 PHP <a class="ae kv" href="https://www.php.net/manual/en/datetime.formats.date.php" rel="noopener ugc nofollow" target="_blank">日期格式</a>。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h2 id="b253" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">方法 3 —使用<code class="fe nh ni nj mr b">strtotime()</code>功能</h2><p id="3988" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当使用夏令时区时，建议使用前两种方法来获得两个日期之间的准确差异。</p><p id="ab61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nh ni nj mr b"><a class="ae kv" href="https://www.php.net/manual/en/function.strtotime" rel="noopener ugc nofollow" target="_blank">strtotime()</a></code>将把英文文本日期时间描述解析成一个 Unix 时间戳(自 1970 年 1 月 1 日 00:00:00 GMT 以来的秒数)。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="3f83" class="ls lt iq mr b gy mv mw l mx my">&lt;?php<br/>  <br/>  $days = (strtotime('2020-11-25') - strtotime('2020-11-13')) / (60 * 60 * 24); <br/>  echo floor($days); // Output: 12<br/>  <br/>  <br/>  $days = (strtotime('+4days') - strtotime('now')) / (60 * 60 * 24); <br/>  echo floor($days); // Output: 4</span><span id="d974" class="ls lt iq mr b gy mz mw l mx my">?&gt;</span></pre><p id="8988" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">60 * 60 * 24 是 1 天 86400 秒。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h2 id="757c" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">为什么不能用 strtotime()来求日期差？</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/5fd29d9f07c6ca7c9cced0e79eb92793.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OT9StxyS0seiHodz"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/ja/@jasonstrull?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰森·斯特鲁尔</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="5744" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在夏令时，时间会增加或减少。所以<code class="fe nh ni nj mr b">strtotime</code> diff 的结果会返回错误的值。</p><p id="62a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在下面的例子中，我们将比较不同时区的<code class="fe nh ni nj mr b">strtotime</code>和 DateTime 的结果。</p><p id="452f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们已经知道<code class="fe nh ni nj mr b">strtotime</code>将在没有时区或非夏令时区返回正确的值。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="eab0" class="ls lt iq mr b gy mv mw l mx my">&lt;?php<br/>  // without timezone<br/>  $days  = (strtotime('2020-03-15') - strtotime('2020-03-08')) / (60 * 60 * 24);<br/>  echo floor($days); // Output: -7<br/>  echo "&lt;br&gt;";<br/>  <br/>  $origin = new DateTime('2020-03-15');<br/>  $target = new DateTime('2020-03-08');<br/>  $interval = $origin-&gt;diff($target);<br/>  echo $interval-&gt;format('%R%a days'); // Output: -7 days</span><span id="0bfc" class="ls lt iq mr b gy mz mw l mx my">?&gt;</span><span id="46f4" class="ls lt iq mr b gy mz mw l mx my">&lt;?php<br/>  // With timezone<br/>  $timezone = 'Asia/Kolkata';<br/>  date_default_timezone_set($timezone);<br/>  $days  = (strtotime('2020-03-15') - strtotime('2020-03-08')) / (60 * 60 * 24);<br/>  echo floor($days); // Output: -7<br/>  echo "&lt;br&gt;";<br/>  <br/>  $origin = new DateTime('2020-03-15');<br/>  $target = new DateTime('2020-03-08');<br/>  $interval = $origin-&gt;diff($target);<br/>  echo $interval-&gt;format('%R%a days'); // Output: -7 days</span><span id="1797" class="ls lt iq mr b gy mz mw l mx my">?&gt;</span></pre><p id="5e8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“亚洲/加尔各答”没有日光节约时间。所以结果是一样的。</p><p id="c792" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下一个例子，我们将使用“美国/纽约”时区测试相同的日期。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="bcb8" class="ls lt iq mr b gy mv mw l mx my">&lt;?php<br/>  $timezone = 'America/New_York';<br/>  date_default_timezone_set($timezone);<br/>  $days  = (strtotime('2020-03-15') - strtotime('2020-03-08')) / (60 * 60 * 24);<br/>  echo floor($days); // Output: -6<br/>  echo "&lt;br&gt;";<br/>  <br/>  $origin = new DateTime('2020-03-15');<br/>  $target = new DateTime('2020-03-08');<br/>  $interval = $origin-&gt;diff($target);<br/>  echo $interval-&gt;format('%R%a days'); // Output: -7 days</span><span id="d0cb" class="ls lt iq mr b gy mz mw l mx my">?&gt;</span></pre><p id="d928" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">夏令时从 2020 年 3 月 8 日周日开始。所以，你得到了 2020 年 3 月 8 日到 2020 年 3 月 15 日之间“美国/纽约”时区的错误天数。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h2 id="07a2" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">结论</h2><p id="ad18" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">避免使用<code class="fe nh ni nj mr b">strtotime</code>来寻找两个日期之间的差异。所以总是使用<code class="fe nh ni nj mr b">DateTime</code>对象，你有一个更复杂的场景意味着使用 PHP <a class="ae kv" href="https://carbon.nesbot.com/" rel="noopener ugc nofollow" target="_blank"> Carbon </a>库。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="884d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读。</p><p id="da22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">敬请关注更多内容！</p><p id="e998" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nl">跟我来</em><a class="ae kv" href="https://balajidharma.medium.com/" rel="noopener"><strong class="ky ir"><em class="nl">balajidharma.medium.com</em></strong></a>。</p></div></div>    
</body>
</html>