<html>
<head>
<title>5 Habits Experienced Developers Like for Smooth Java Code Review</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有经验的开发人员喜欢的 5 个习惯</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/5-habits-experienced-developers-like-for-smooth-java-code-review-c5e5ae683df7?source=collection_archive---------0-----------------------#2022-10-25">https://blog.devgenius.io/5-habits-experienced-developers-like-for-smooth-java-code-review-c5e5ae683df7?source=collection_archive---------0-----------------------#2022-10-25</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="19a5" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">【Java 开发人员应该知道的加快代码审查的 5 个技巧</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/b0e6016908b12edafab5ac9faa04e2ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2IFWFrC4-r_DtTDunlbQbA.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk translated">由<a class="ae kw" href="https://www.pexels.com/@tima-miroshnichenko?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">马体·米罗什尼琴科</a>拍摄，来自<a class="ae kw" href="https://www.pexels.com/photo/man-person-people-woman-6914069/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>——由作者编辑</figcaption></figure><p id="2075" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">大多数经验丰富的 Java 开发人员喜欢在你的简历上看到以下内容。T11】</p><p id="3608" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">Java 开发人员会在 PR 上盖上橡皮图章，然后继续前进。橡皮图章忽略了代码审查的要点。<strong class="kz is"> <em class="lt">重点是得到一个内聚的代码库。</em>T15】</strong></p><p id="6948" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果我们对代码有一个共同的理解，我们将来会更容易地修改它。</p><p id="ae27" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> <em class="lt">你能在代码评审中发现什么？为什么这些实践首先对您的代码库有好处？什么可以提高可读性，让代码评审更快？</em>T19】</strong></p><p id="a4aa" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们深入了解一下经验丰富的开发人员喜欢在你的公关中看到的 5 个习惯。 </p><h1 id="ab6b" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">1.喜欢唱片胜过龙目岛</h1><p id="4529" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated"><strong class="kz is"> <em class="lt">为什么沟龙目为首辅？</em> </strong></p><p id="54e6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">不需要额外的依赖。可以用记录代替<code class="fe mr ms mt mu b">@Value</code>。有了 Java 17，这将使你的代码更简洁，更适合重构。 </p><p id="9d8d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">龙目岛做了很多见不得人的背景材料。如<code class="fe mr ms mt mu b">SneakyThrows</code>实现哪个<a class="ae kw" href="https://github.com/projectlombok/lombok/blob/master/src/core/lombok/Lombok.java#L30" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="lt">【停止 javac 的牢骚】</em> </strong> </a> <strong class="kz is"> <em class="lt">。</em> </strong>去龙目岛后头脑中如此光秃秃。</p><p id="3c31" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">不要误解我的意思，如果你使用的是较低版本的 Java，Lombok 是你的朋友。而且事半功倍。<strong class="kz is"> <em class="lt">但是如果你有记录，就用它们代替龙目。</em>T45】</strong></p></div><div class="ab cl mv mw hv mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ik il im in io"><p id="da50" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> <em class="lt">龙目岛拿不到你的福利记录却可以。</em>T49】</strong></p><p id="9eea" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> <em class="lt">举个例子，一个</em> </strong> <a class="ae kw" href="https://openjdk.org/jeps/405#Record-patterns-and-exhaustive-switch" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="lt">穷尽将来的开关</em> </strong> </a> <strong class="kz is"> <em class="lt">。有了记录，这将是本机的，而对于 Lombok 注释的类，它们不会马上出现。</em></strong></p><p id="d3ef" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe mr ms mt mu b">@Data</code>或<code class="fe mr ms mt mu b">@Value</code>哪一个把我们带到<em class="lt">不可变的</em>对象？</p><p id="b06c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于 Lombok，您有两种选择。一个生成不可变的对象，另一个生成可变的对象。我说的不可变是指浅不变性，引用字段仍然是可变的。默认情况下，记录是不可变的，所以你不必为此争论。</p><h1 id="f567" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">2.根据需要使用<code class="fe mr ms mt mu b">Optional</code></h1><p id="d3d5" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">大多数人会弄错可选用法。</p><p id="7142" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">并且可能有可选的或其他的控制流。该类旨在显示潜在的值缺失，而不是空检查。有些人甚至完全不喜欢 Optional，不在他们的代码库中使用它。</p><p id="5907" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> <em class="lt">大多数会滥用可选，或者给它赋值 null。</em> </strong></p><p id="d5f9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">更加注意<code class="fe mr ms mt mu b">Optional</code>的用法，质疑不寻常的用法。如果你包装了很多选项或者包装了列表，这是应该避免的。</p><p id="6566" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">知道在哪里应用<code class="fe mr ms mt mu b">Optional</code>有助于提高代码的可读性。</p><p id="295f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">正确使用静态<code class="fe mr ms mt mu b">Optional</code>方法很有帮助。</p><ul class=""><li id="e12d" class="nc nd ir kz b la lb ld le lg ne lk nf lo ng ls nh ni nj nk bi translated"><code class="fe mr ms mt mu b">Optional#of</code> —告知包装的对象必须为非空</li><li id="d022" class="nc nd ir kz b la nl ld nm lg nn lk no lo np ls nh ni nj nk bi translated"><code class="fe mr ms mt mu b">Optional#ofNullable</code> —告知包装的对象可为空</li><li id="9fcd" class="nc nd ir kz b la nl ld nm lg nn lk no lo np ls nh ni nj nk bi translated"><code class="fe mr ms mt mu b">Optional#empty</code> —告诉我们被包装的对象不存在。缺失不同于可空性</li></ul></div><div class="ab cl mv mw hv mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ik il im in io"><p id="c1ea" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> <em class="lt">亦作</em> </strong> <code class="fe mr ms mt mu b"><strong class="kz is"><em class="lt">Optional</em></strong></code> <strong class="kz is"> <em class="lt">将来会享受瓦尔哈拉的改进。</em> </strong></p><p id="8cf0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你不会使用<code class="fe mr ms mt mu b">OptionalInt</code>，而是使用<code class="fe mr ms mt mu b">Optional&lt;int&gt;</code>。此外，Valhalla 将把这些转化为值类型，这将改善内存占用。所以多了解一些可选的正确用法对以后会有帮助。</p><p id="518d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">同样重要的一点是，即使在瓦尔哈拉之后，可选也是一样的。</p><p id="c2a1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">是的，我们知道。向后兼容，咄。<strong class="kz is"> <em class="lt">是的，所以可空可选大概是留到以后吧。</em> </strong>不是我们喜欢的东西，而是为了源码兼容需要的东西。</p><h1 id="4d0a" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">3.不要硬编码实例</h1><p id="4d9b" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">大多数人会瞬间瞥见。</p><p id="509b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">他们会使用它并继续前进。</p><p id="a5c9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">尽管这使得代码难以测试。您可以模仿静态方法，但是有更好的方法来测试时间。</p><p id="353b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你可以使用<code class="fe mr ms mt mu b">InstantSource</code>，传入不同的时钟。这样你就可以在测试中控制时间，而不是模仿静态的<code class="fe mr ms mt mu b">Instant#now</code>方法。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nq nr l"/></div></figure><p id="f168" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这是相关的测试。我们可以传入时钟，改变时区，在一个单元测试中做所有的事情。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nq nr l"/></div></figure><h1 id="bb33" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">4.您应该在 API 中使用枚举</h1><p id="a3c3" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">例如，<a class="ae kw" href="https://github.com/spring-projects/spring-framework/issues/26842" rel="noopener ugc nofollow" target="_blank"> Spring Boot 遇到了 HttpStatus 枚举的问题。</a></p><p id="5f71" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">他们使用了一个枚举作为响应，并陷入了内存问题。这种整数状态码的解析给<code class="fe mr ms mt mu b">HttpStatus</code>分配了大量的内存。</p><p id="e9a2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这是用那些枚举值的缓存<a class="ae kw" href="https://github.com/spring-projects/spring-framework/commit/7f1062159ee9926d5abed7cadc2b36b6b7fc242e" rel="noopener ugc nofollow" target="_blank">解决的。</a></p></div><div class="ab cl mv mw hv mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ik il im in io"><p id="978b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你应该在 API 响应中避免枚举。T12】</p><p id="abb4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于响应，如果表示的值有限，则使用枚举。比如常数，或者很少变化的东西。这里有一个<a class="ae kw" href="https://developers.google.com/people/api/rest/v1/people#agerange" rel="noopener ugc nofollow" target="_blank">错误枚举</a>的例子，它因为某种原因而被弃用。</p><p id="6703" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> <em class="lt">在代码内使用枚举是可以的，也可以作为 API 输入。</em> </strong></p><p id="a2c3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">例如，您可以将 enum 与实体连接，并存储一些配置属性。此外，您可以在数据库中存储枚举，因为也有对它的支持。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nq nr l"/></div></figure></div><div class="ab cl mv mw hv mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ik il im in io"><p id="f5d6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">另一种响应方法是使用预定义的值。类似于<a class="ae kw" href="https://developers.google.com/people/api/rest/v1/people#address" rel="noopener ugc nofollow" target="_blank">地址响应是如何表示的</a>。这使得在消费端处理值变得更加容易。</p><h1 id="c027" class="lu lv ir bd lw lx ly lz ma mb mc md me jx mf jy mg ka mh kb mi kd mj ke mk ml bi translated">5.你如何在函数接口中定义默认方法？</h1><p id="e5ec" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">假设您需要以下内容:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nq nr l"/></div></figure><p id="c6e1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这是不可能的，因为<code class="fe mr ms mt mu b">FunctionalInterface</code>期望单个方法声明。所以这留给我们以下的解决方案。不太好，但这个也可以。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nq nr l"/></div></figure><p id="86f6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你需要随时创建这个<code class="fe mr ms mt mu b">DefaultMyInterfaceImplementation</code>来使用它。如果这是默认实现，我们能不能把它移到接口上？毕竟我们可以在需要的时候参考使用。</p><p id="9670" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">下面是<a class="ae kw" href="https://stackoverflow.com/a/30165602/5999670" rel="noopener ugc nofollow" target="_blank">霍尔格为此提出的</a>。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nq nr l"/></div></figure><p id="68d6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这样我们得到了 lambda 的默认实现，所以没有类实例化。此外，我们可以为特定的用例覆盖<code class="fe mr ms mt mu b">authorize</code>。更少的代码和更简洁的解决方案。</p><p id="80bf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">所以即使我们在<code class="fe mr ms mt mu b">FunctionalInterface</code>中没有默认的方法，我们也不会放弃这个想法。只需寻找一条不同的道路来完成你所需要的。</p></div></div>    
</body>
</html>