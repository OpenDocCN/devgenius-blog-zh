<html>
<head>
<title>Managing multiple environment file in NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">管理 NodeJS 中的多个环境文件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/managing-multiple-environment-file-in-nodejs-4d3be879c2f9?source=collection_archive---------1-----------------------#2022-09-16">https://blog.devgenius.io/managing-multiple-environment-file-in-nodejs-4d3be879c2f9?source=collection_archive---------1-----------------------#2022-09-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/f831ac8c8e645a9665b2ffb97fd87477.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5Of5vJbtSdgIMe9B.jpg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Pic 信用代码动作</figcaption></figure><h2 id="2bda" class="jz ka in bd kb kc kd dn ke kf kg dp kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">问题</h2><p id="1d48" class="pw-post-body-paragraph kv kw in kx b ky kz la lb lc ld le lf ki lg lh li km lj lk ll kq lm ln lo lp ig bi translated">在编写 NodeJS 应用程序时，我发现很难管理不同的环境变量。对于阅读环境变量是使用 dotenv 作为其余的开发人员。我的方法是只创建一个。env 文件并写下其中的所有变量文件。所以问题就在这里，我在一个文件中提到了所有的东西，这真的很难管理。</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="70cf" class="jz ka in lv b gy lz ma l mb mc">NODE_ENV=development<br/>PORT=3000</span><span id="2095" class="jz ka in lv b gy md ma l mb mc"># Database<br/>DB_HOST=<br/>DB_USER=<br/>DB_PASS=<br/>DB_NAME=</span></pre><p id="8ddd" class="pw-post-body-paragraph kv kw in kx b ky me la lb lc mf le lf ki mg lh li km mh lk ll kq mi ln lo lp ig bi translated">然后，我开始根据环境创建不同的文件，例如对于开发，我的文件名将是. env.development，对于其他环境也是如此，我开始将. env. <env>文件复制到。基于环境的 env 文件。假设我正在开发环境中工作，那么我将把. env.development 文件复制到。env 并更改变量值，然后开始工作。环境的其他部分也是如此。但是这里仍然需要人工干预。假设有人忘记更改/复制变量值，那么您可能会得到不同的内容/应用程序可能会中断。</env></p><h2 id="4ded" class="jz ka in bd kb kc kd dn ke kf kg dp kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">问题的解决方案</h2><p id="7f7b" class="pw-post-body-paragraph kv kw in kx b ky kz la lb lc ld le lf ki lg lh li km lj lk ll kq lm ln lo lp ig bi translated">我发现了一个非常好的包，<a class="ae mj" href="https://www.npmjs.com/package/env-cmd" rel="noopener ugc nofollow" target="_blank"> env-cmd </a>。这是一个简单的节点程序，用于使用 env 文件中的环境执行命令。</p><h2 id="9e76" class="jz ka in bd kb kc kd dn ke kf kg dp kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">如何安装<a class="ae mj" href="https://www.npmjs.com/package/env-cmd" rel="noopener ugc nofollow" target="_blank"> env-cmd </a>？</h2><p id="163a" class="pw-post-body-paragraph kv kw in kx b ky kz la lb lc ld le lf ki lg lh li km lj lk ll kq lm ln lo lp ig bi translated">您可以运行以下命令在项目中安装 env-cmd。在这里，我将 env-cmd 作为 devDependencies 安装</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="df6a" class="jz ka in lv b gy lz ma l mb mc">npm install env-cmd --save-dev</span></pre><p id="a096" class="pw-post-body-paragraph kv kw in kx b ky me la lb lc mf le lf ki mg lh li km mh lk ll kq mi ln lo lp ig bi translated">要使用这个包，您必须做的是，为每个环境创建环境文件。比如对于开发环境，你可以创建<em class="mk"> .env.development </em>或者对于生产环境，你可以创建<em class="mk"> .env.production </em>等等。</p><p id="e34d" class="pw-post-body-paragraph kv kw in kx b ky me la lb lc mf le lf ki mg lh li km mh lk ll kq mi ln lo lp ig bi translated">这里我为开发创建了一个 env 文件。文件名<strong class="kx io"> .env.development </strong></p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="73e2" class="jz ka in lv b gy lz ma l mb mc">NODE_ENV=development<br/>PORT=3000<br/>DB_HOST=<br/>DB_USER=<br/>DB_PASS=<br/>DB_NAME=</span></pre><h2 id="073f" class="jz ka in bd kb kc kd dn ke kf kg dp kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">如何在 package.json 命令中添加 env-cmd？</h2><p id="c9cf" class="pw-post-body-paragraph kv kw in kx b ky kz la lb lc ld le lf ki lg lh li km lj lk ll kq lm ln lo lp ig bi translated">现在，您可以在 package.json 中创建的命令中传递 env 文件名，如下所示</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="adc8" class="jz ka in lv b gy lz ma l mb mc">{<br/>  "name": "env-tuts",<br/>  "version": "1.0.1-RC1",<br/>  "description": "Env Tuts",<br/>  "private": true,<br/>  "scripts": {<br/>    "development": "npx env-cmd -f .env.development node index.js",<br/>    "production": "npx env-cmd -f .env.production node index.js",<br/>    "uat": "npx env-cmd -f .env.uat node index.js"<br/>  },<br/>  "dependencies": {<br/>    "express": "^4.17.1"<br/>  },<br/>  "devDependencies": {<br/>    "env-cmd": "^10.1.0"<br/>  },<br/>  "license": "Apache v2.0"<br/>}</span></pre><p id="c959" class="pw-post-body-paragraph kv kw in kx b ky me la lb lc mf le lf ki mg lh li km mh lk ll kq mi ln lo lp ig bi translated">在脚本部分，您可以看到我添加了 npx env-cmd <env-file-name> node index.js。这个命令将帮助我们根据环境获取环境变量。</env-file-name></p><blockquote class="ml mm mn"><p id="80af" class="kv kw mk kx b ky me la lb lc mf le lf mo mg lh li mp mh lk ll mq mi ln lo lp ig bi translated"><strong class="kx io">请注意</strong>，您可以根据需要用任何其他命令替换 node index.js。比如，如果你想用 nodemon 运行你的应用程序，只需用 nodemon index.js 替换 node index.js。</p></blockquote><h2 id="dec0" class="jz ka in bd kb kc kd dn ke kf kg dp kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">测试应用程序</h2><p id="6d09" class="pw-post-body-paragraph kv kw in kx b ky kz la lb lc ld le lf ki lg lh li km lj lk ll kq lm ln lo lp ig bi translated">现在，一旦你完成了上面提到的步骤，你就可以试着运行你的应用程序了。在这里，我给出了运行开发模式的应用程序的例子</p><pre class="lq lr ls lt gt lu lv lw lx aw ly bi"><span id="7dd6" class="jz ka in lv b gy lz ma l mb mc">npm run development</span></pre><h2 id="4744" class="jz ka in bd kb kc kd dn ke kf kg dp kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论</h2><p id="c80f" class="pw-post-body-paragraph kv kw in kx b ky kz la lb lc ld le lf ki lg lh li km lj lk ll kq lm ln lo lp ig bi translated">在这篇博客中，我们看到了如何根据环境在应用程序中集成不同的 env 文件。如果你知道任何更好的方法，请随意评论。如果你喜欢这篇文章，请分享。感谢阅读。快乐编码。</p><p id="efe2" class="pw-post-body-paragraph kv kw in kx b ky me la lb lc mf le lf ki mg lh li km mh lk ll kq mi ln lo lp ig bi translated">你喜欢这篇文章吗？如果是这样，通过<a class="ae mj" href="https://www.youtube.com/channel/UCvEB7wXUEXGFE9lCx0USR3Q" rel="noopener ugc nofollow" target="_blank"> <strong class="kx io">订阅解码获得更多类似内容，我们的 YouTube 频道</strong> </a> <strong class="kx io">！</strong></p><p id="571d" class="pw-post-body-paragraph kv kw in kx b ky me la lb lc mf le lf ki mg lh li km mh lk ll kq mi ln lo lp ig bi translated">同样的博客也将在<a class="ae mj" href="https://ajaykrp.me/" rel="noopener ugc nofollow" target="_blank">ajaykrp.me/</a>推出。</p></div></div>    
</body>
</html>