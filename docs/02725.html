<html>
<head>
<title>Configuring Travis CI for Xcode projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为 Xcode 项目配置 Travis CI</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/configuring-travis-ci-for-xcode-projects-6a87d4375827?source=collection_archive---------2-----------------------#2020-08-24">https://blog.devgenius.io/configuring-travis-ci-for-xcode-projects-6a87d4375827?source=collection_archive---------2-----------------------#2020-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a063" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用 CocoaPods 运行多个脚本并为项目配置</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/df3250bddc34b8e5fdfd438e0f944565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_LAWZt4pZCmU-n9P41VGg.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Travis CI 徽标取自<a class="ae lb" href="https://docs.travis-ci.com/user/for-beginners/" rel="noopener ugc nofollow" target="_blank">文档</a></figcaption></figure><p id="a306" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗨，</p><p id="10f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将分享如何配置？yml 文件，使其自动运行应用程序的测试套件，运行多个脚本，并构建和测试使用 CocoaPods 的项目。</p><blockquote class="lc ld le"><p id="b19f" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">注意:本文假设您已经在存储库中设置了 travis，并且拥有. travis.yml 文件</p></blockquote><h1 id="ab9f" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">1.出发点</h1><p id="940b" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">最初，您的. travis.yml 文件可能看起来像这样—</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="1ece" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个 Travis 配置足以构建您的 Xcode 项目并运行测试。然而，我们想考虑和解决一些额外的使用案例，例如—</p><ol class=""><li id="0d92" class="mo mp iq jp b jq jr ju jv jy mq kc mr kg ms kk mt mu mv mw bi translated">让 Travis 运行一些其他的脚本(例如 Swiftlint)</li><li id="d8ac" class="mo mp iq jp b jq mx ju my jy mz kc na kg nb kk mt mu mv mw bi translated">让 Travis 工作，以防项目使用依赖管理器(例如 CocoaPods)</li></ol><p id="1ccd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在接下来的章节中，我们将逐一解决这两种常见的用例—</p><h1 id="954e" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">2.在 Travis 中运行多个脚本</h1><p id="8e3e" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">要运行多个脚本，例如 Swiftlint + Build Xcode 和 Test Suite，我们可以像这样配置. travis.yml 文件—</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="4d8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的 Travis 配置中，我们添加了运行多个脚本的能力，例如:运行 Swiftlint 脚本和默认的 xcodebuild 测试脚本。</p><p id="ed7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">需要注意的是，虽然之前 xcodebuild 脚本是由 Travis 默认运行的，但现在我们需要在显式声明“script”后自己指定它(连同 Swiftlint，第 9-10 行)。</p><p id="15d0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了能够使用 Swiftlint，我们首先安装它。这可以在“install”声明中完成(第 1 行)。</p><h1 id="ee33" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">3.使用 CocoaPods 为项目配置 Travis</h1><p id="c6e8" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">到目前为止，我们告诉 Travis 构建 xcode_project(上面代码中的第 5 行)。然而，如果我们在项目中使用像 CocoaPods 这样的依赖管理器，它通常会创建一个新的 xcworkspace 文件，然后用于开发，而不是 xcodeproj 文件。</p><p id="7dcc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，我们还需要告诉 Travis 使用工作区文件。这可以这样做—</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="3b6e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的代码中，我们做了一些修改，以便能够使用 CocoaPods 和 Travis 构建我们的项目。</p><ol class=""><li id="5aa7" class="mo mp iq jp b jq jr ju jv jy mq kc mr kg ms kk mt mu mv mw bi translated">我们将项目更改为工作区(第 8，13 行)。</li><li id="df83" class="mo mp iq jp b jq mx ju my jy mz kc na kg nb kk mt mu mv mw bi translated">为项目安装 CocoaPods 和 pod(第 1-5 行)。</li></ol></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="3454" class="lj lk iq bd ll lm nj lo lp lq nk ls lt lu nl lw lx ly nm ma mb mc nn me mf mg bi translated">感谢您的阅读！</h1><p id="cb1e" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated"><em class="lf">请随时与我联系并联系，查看我们的项目，或者加入我们的开源社区:<br/></em><a class="ae lb" href="https://www.linkedin.com/in/yugantar-jain-1a7820158/" rel="noopener ugc nofollow" target="_blank"><em class="lf">LinkedIn</em></a><em class="lf">，</em><a class="ae lb" href="http://github.com/yugantarjain" rel="noopener ugc nofollow" target="_blank"><em class="lf">GitHub</em></a><em class="lf">，</em> <a class="ae lb" href="https://github.com/anitab-org/mentorship-ios" rel="noopener ugc nofollow" target="_blank"> <em class="lf">导师 iOS </em> </a> <em class="lf">，</em><a class="ae lb" href="https://anitab-org.zulipchat.com" rel="noopener ugc nofollow" target="_blank"><em class="lf">AnitaB.org 社区</em> </a></p></div></div>    
</body>
</html>