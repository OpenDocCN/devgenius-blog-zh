<html>
<head>
<title>Maintainable JavaScript — Throwing Errors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可维护的 JavaScript —抛出错误</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/maintainable-javascript-throwing-errors-e6c2ccf90c71?source=collection_archive---------2-----------------------#2020-09-29">https://blog.devgenius.io/maintainable-javascript-throwing-errors-e6c2ccf90c71?source=collection_archive---------2-----------------------#2020-09-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e8ce0dda99077917d9870c6892714be8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4fdCmF5q14lLvQlF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@napr0tiv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">瓦西里·科洛达</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="aadb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果想继续使用代码，创建可维护的 JavaScript 代码很重要。</p><p id="9221" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将通过查看抛出错误的方法来了解创建可维护的 JavaScript 代码的基础。</p><h1 id="b97f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">错误</h1><p id="563e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当我们的程序遇到一些意外时，我们抛出错误。</p><p id="72fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">可能传递给函数或操作的值不正确。</p><p id="e1cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">编程语言定义了规则，当我们偏离规则时，就会抛出错误。</p><p id="cb5e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果不抛出错误并报告给我们，调试几乎是不可能的。</p><p id="1dba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果一切都悄无声息地失败了，那么要花很长时间才能发现我们的程序出了什么问题。</p><p id="32d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">错误会帮助我们。</p><p id="49f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的问题是错误可能会在意想不到的时间和地点出现。</p><p id="e825" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认的错误消息可能不会给我们提供足够的信息来解决问题。</p><p id="2f9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为失败做计划总是一个好主意，这样我们就可以在失败发生之前处理它们。</p><h1 id="71b9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript 中抛出错误</h1><p id="4d08" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了在 JavaScript 中抛出错误，我们使用带有<code class="fe me mf mg mh b">Error</code>实例的<code class="fe me mf mg mh b">throw</code>关键字。</p><p id="7140" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1d60" class="mq lc iq mh b gy mr ms l mt mu">throw new Error("an error occurred.")</span></pre><p id="a02e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传入一条我们希望显示错误的消息。</p><p id="8717" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">内置的<code class="fe me mf mg mh b">Error</code>类型在所有 JavaScript 实现中都可用。</p><p id="4815" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">构造函数接受一个参数，即错误消息。</p><p id="1796" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当一个错误被抛出并且没有被 try-catch 块捕获时，浏览器以浏览器的方式显示消息。</p><p id="80fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数浏览器都有一个显示错误的开发控制台。</p><p id="cda5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们抛出的错误被视为与我们没有抛出的错误相同。</p><p id="d8ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe me mf mg mh b">throw</code>关键字的一个不好的方法是将它与非<code class="fe me mf mg mh b">Error</code>实例一起使用。</p><p id="2523" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bf94" class="mq lc iq mh b gy mr ms l mt mu">throw "error";</span></pre><p id="6e58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很糟糕，因为浏览器对此可能不会有同样的反应。</p><p id="cd7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们丢弃了有用的信息，如堆栈跟踪。</p><p id="e081" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们可以扔任何我们喜欢的东西。</p><p id="4523" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没有任何东西禁止这样做。</p><p id="0e8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Firefox、Opera 和 Chrome 在抛出时会将非错误对象转换为字符串。</p><p id="194f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而 IE 没有。</p><h1 id="5227" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">投掷失误的优势</h1><p id="d58b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">抛出我们自己的错误允许我们提供浏览器显示的确切文本。</p><p id="b395" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">除了行号和列号，我们还可以包含成功调试错误所需的任何信息。</p><p id="c1ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b00d" class="mq lc iq mh b gy mr ms l mt mu">function getSpans(element) {<br/>  if (element &amp;&amp; element.getElementsByTagName) {<br/>    return element.getElementsByTagName("span");<br/>  } else {<br/>    throw new Error("argument not a DOM element");<br/>  }<br/>}</span></pre><p id="3076" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果一个对象不是 DOM 元素，我们就会抛出一个错误。</p><p id="4cc1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，如果我们看到错误消息，我们就知道没有传入 DOM 元素。</p><p id="c483" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过这种设置，我们可以看到错误消息，它可以帮助我们在不太费力的情况下调试代码中的错误。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/a92ce4f5eb1e1180c53249b842898b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*doR0V6xqihbY-GGB"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">凯利·西克玛在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="ecdb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1f73" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当我们遇到问题时，抛出错误让我们知道哪里出了问题。</p><p id="5c5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没有它们，当我们的代码做了一些我们没有预料到的事情时，我们就不会知道哪里出了问题。</p></div></div>    
</body>
</html>