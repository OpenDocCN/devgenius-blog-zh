<html>
<head>
<title>The Data Integrity Constraints (RDBMS Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据完整性约束(RDBMS 第 2 部分)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-data-integrity-constraints-rdbms-part-2-19e0cd10d6dd?source=collection_archive---------4-----------------------#2022-06-17">https://blog.devgenius.io/the-data-integrity-constraints-rdbms-part-2-19e0cd10d6dd?source=collection_archive---------4-----------------------#2022-06-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="eba0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">《打造分层微服务 之书<a class="ae ki" href="https://learnbackend.dev/books/build-layered-microservices" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">现已在 https://learnbackend.dev/<a class="ae ki" href="https://learnbackend.dev/" rel="noopener ugc nofollow" target="_blank"/>接受预购。</strong></a></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/c8a107d029375d64edfb2f05114c7006.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j1ID3mengvJQSEs-exR3ig.jpeg"/></div></div></figure><p id="73e9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">数据完整性</strong>是在数据的整个生命周期中维护和保证数据的准确性和一致性。</p><p id="5a37" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它由三个完整性约束组成，称为:<strong class="jm io">实体</strong>完整性、<strong class="jm io">引用</strong>完整性和<strong class="jm io">域</strong>完整性。</p><p id="717d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果应用得当，这些约束可以确保所有数据都可以被跟踪、连接、恢复和搜索，从而提高数据库的稳定性、性能和可维护性。</p><h1 id="d2da" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">域完整性</h1><p id="ab17" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">域完整性约束声明关系的所有属性必须在定义的域上声明。</p><p id="6651" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">事实上，每当在关系中创建新属性时，必须定义一定数量的属性，以便控制可以存储在其中的数据类型，例如:</p><ul class=""><li id="0be2" class="ly lz in jm b jn jo jr js jv ma jz mb kd mc kh md me mf mg bi translated">数据类型</li><li id="b312" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh md me mf mg bi translated">长度</li><li id="919b" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh md me mf mg bi translated">接受或不接受空值</li><li id="f61a" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh md me mf mg bi translated">允许值的集合</li><li id="3b7d" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh md me mf mg bi translated">默认值</li></ul><p id="579e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，如果我们要创建一个包含一个人的婚姻状况的属性，我们可以将其定义如下:一个长度为 1 的字符串，它只允许字母<em class="mm"> M </em>中的一个表示已婚，<em class="mm"> S </em>表示单身，或者如果状况未知，则默认为<em class="mm"> null </em>值。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mn"><img src="../Images/1554e48329afb2a3863040d9087bb1e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FxA1hSTF3B3-C4lusZRE0Q.png"/></div></div></figure><h1 id="3c68" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">实体完整性</h1><p id="b2f9" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">实体完整性约束规定关系必须有一个唯一且不为空的主键。</p><p id="b3dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">简而言之，主键是一个指定的属性或一组属性，它有助于在关系中唯一地标识一条记录。</p><h2 id="ecb0" class="mo kw in bd kx mp mq dn lb mr ms dp lf jv mt mu lj jz mv mw ln kd mx my lr mz bi translated">候选键</h2><p id="cad2" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">为了选择主键，我们必须首先识别与主键标准匹配的关系的所有可能属性，然后这些属性被称为<strong class="jm io">候选键</strong>。</p><p id="e5ea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，像电子邮件地址或社会保险号这样的属性通常是很好的候选关键字，因为我们可以确定它的值对于每个关系记录都是唯一的和非空的。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi na"><img src="../Images/195f3691391ada55555c92fa2393dc32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kEiZZbUu6zw3fFdSSDjr9A.png"/></div></div></figure><p id="3b26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">相反，选择一个人的名字作为候选关键字会与实体完整性约束相矛盾，因为在数据库中搜索“John”或“Alice”不会得到一个特定的记录，而可能会得到几十个记录。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nb"><img src="../Images/8fa4de47ba87d445acd4663f25cb00d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U7reRfZ-qAQmjU6dRzn5rw.png"/></div></div></figure><p id="451b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦候选键被选择成为关系的主键，剩下的所有其他候选键被指定为<strong class="jm io">备用键</strong>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nc"><img src="../Images/62ba5ee4ac85899ac603608916e0f40b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*po5XbAw7zb2qpGDOKvxl1w.png"/></div></div></figure><h2 id="b05c" class="mo kw in bd kx mp mq dn lb mr ms dp lf jv mt mu lj jz mv mw ln kd mx my lr mz bi translated">主键</h2><p id="b31d" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">主键可以有两种类型:<strong class="jm io">自然</strong>或<strong class="jm io">代理</strong>。</p><p id="e6a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当主键的值基于现实世界的可观察值时，例如电子邮件地址、社会保险号或电话号码，主键将被称为<strong class="jm io">自然主键</strong>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nd"><img src="../Images/7995de43e149dc3d83f22f59c0c25f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEvMWc_u6NpkZf_YD3zc5Q.png"/></div></div></figure><p id="9772" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">另一方面，当它的值基于一个专门创建的属性时，它将被称为<strong class="jm io">代理</strong>，该属性被用作数据库边界内的一个键，并且在现实世界中没有任何意义。</p><p id="bdd3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这种类型的键通常是一个整数，每当在一个关系中创建新记录时，它就会由数据库自动递增。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ne"><img src="../Images/0867d47fb1f6f9539ab663b69dc3b257.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H3qEOqtVdVyEqgHxN7kuJQ.png"/></div></div></figure><p id="9a7f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后值得一提的是，也可以组合两个或更多属性，当单独考虑时，这些属性可能不是唯一的，但当一起考虑时，它们肯定是不确定唯一的，这种组合被称为<strong class="jm io">组合键</strong>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nf"><img src="../Images/b39ec8f939673ca860d136b823d75a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xOf9rczBO-06QVGY-zqC6A.png"/></div></div></figure><h1 id="bb4d" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">参照完整性</h1><p id="e381" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">参照完整性约束规定任何外键都必须是对现有主键的有效引用。</p><p id="3e2e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">实际上，每当在另一个关系中引用主键时，它就被称为<strong class="jm io">外键</strong>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ng"><img src="../Images/afb44cb3608785eee2c3b29256c02409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4z2xmLZ2kuf4bL7Fs08rWg.png"/></div></div></figure><p id="3261" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了保证数据的一致性，我们必须确保外键所指向的记录确实存在，因为如果不先删除引用该记录的记录，就会破坏引用完整性。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nh"><img src="../Images/92beead0df20f1e366da8f207bc5bcc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H9TUSGNnTaIkcBZbZwX_hA.png"/></div></div></figure><h1 id="82d4" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">下一步是什么？</h1><p id="dfb1" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">不要忘记👏🏻x50 如果你喜欢读我的作品！</p><p id="ad79" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">👉你喜欢这种内容？请查看 https://learnbackend.dev 上的书籍<a class="ae ki" href="https://learnbackend.dev/books/build-layered-microservices" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Build Layered micro services</strong></a>了解如何使用 Express framework 构建生产就绪的分层认证微服务，从第一行代码到最后一行文档，该服务在开发实践和软件架构方面符合行业标准。</p></div></div>    
</body>
</html>