<html>
<head>
<title>Let’s build a video sharing app with Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们和 Django 一起建立一个视频分享应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/lets-build-a-video-sharing-app-with-django-dacde3660a7d?source=collection_archive---------1-----------------------#2022-02-12">https://blog.devgenius.io/lets-build-a-video-sharing-app-with-django-dacde3660a7d?source=collection_archive---------1-----------------------#2022-02-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0053" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个使用 Django 构建的视频共享应用，支持认证和授权。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9a3755826e344aba4a79bba76f6bc64d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*35cQKzxEKRfRGuqbrjq2Yw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">来自 unsplash 的 Thomas Russel 的照片</figcaption></figure><p id="2751" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本教程中，我们将构建一个具有高级功能的视频共享应用程序，如配置文件创建、身份验证和授权。</p><p id="176f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以下是我们最终应用的几张截图。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ky"><img src="../Images/c163bfce9dce56258bf889dd002a9f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrqMhqFxGrWKESSlWqjLgQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">这是显示由不同用户创建的所有视频的主页</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ky"><img src="../Images/b8d085c7a0e4dd3a28af2e615e4199cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NGTRjWZus9RP_-SWOvLGyQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">这是搜索页面</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ky"><img src="../Images/2919a259024277e9d584a7c4ca9dc7ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zcaYyzX4kU6ZMdn1O_jThA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">这是我们的用户页面，包含他们上传的所有视频</figcaption></figure><p id="aeb7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">希望你现在对我们将要构建的内容有所了解。坚持到最后，因为我会分享我对这个项目的最终想法。</p><p id="ecf8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">免责声明！！！这个项目的用户界面不是很吸引人，因为我更像是一个后端的家伙，我的主要焦点是后端逻辑。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://bytexplain.com/how-to-create-a-news-app-using-flask/"><div class="gh gi kz"><img src="../Images/666f36ed4f120fbc530cc804f2f42974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wEZQ6jmF1RF6seIjOduz5Q.png"/></div></a></figure><p id="8beb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">当前应用功能</strong></p><ol class=""><li id="3988" class="la lb in jm b jn jo jr js jv lc jz ld kd le kh lf lg lh li bi translated">用户创建</li><li id="c71d" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">视频上传</li><li id="9103" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">视频删除</li><li id="97cd" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">视频搜索</li><li id="7aa0" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">视频上传</li><li id="88a9" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">登录注销功能</li><li id="3a2b" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">查看某个用户上传的视频</li><li id="f4bc" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">更多</li></ol><p id="faf2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">即将推出的功能</strong></p><ol class=""><li id="cb03" class="la lb in jm b jn jo jr js jv lc jz ld kd le kh lf lg lh li bi translated">喜欢</li><li id="1069" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">不喜欢</li><li id="205c" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">帐户删除</li><li id="ea23" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">重新定义的 UI</li><li id="1d77" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">更多的</li></ol><p id="145c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们开始吧。</p><p id="c04a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">要求</strong></p><ol class=""><li id="aa35" class="la lb in jm b jn jo jr js jv lc jz ld kd le kh lf lg lh li bi translated">姜戈</li><li id="7e34" class="la lb in jm b jn lj jr lk jv ll jz lm kd ln kh lf lg lh li bi translated">枕头</li></ol><p id="1207" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要安装这些软件包，请运行<code class="fe lo lp lq lr b">pip3 install &lt;package name&gt;</code></p><p id="988f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">安装后，现在打开您的终端并运行以下</p><p id="8203" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lo lp lq lr b">django-admin startproject video_app</code></p><p id="0b5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将创建一个名为<code class="fe lo lp lq lr b">video_app</code>的文件夹</p><p id="7e0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Cd 放入文件夹，并运行以下程序；</p><p id="4510" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lo lp lq lr b">python3 manage.py startapp stream</code></p><p id="96cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是将处理视频的应用程序，接下来让我们创建一个将处理用户的应用程序。在这个项目中，我们的用户将被称为<code class="fe lo lp lq lr b">streamers</code></p><p id="b946" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在运行下面的代码来创建 streamers 应用程序</p><p id="9d75" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lo lp lq lr b">python3 manage.py startapp streamers</code></p><p id="c350" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在这就是应用程序的创建，这是我们整个项目的目录结构。</p><p id="05a8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">数据库. sqlite3</p><p id="0073" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">manage.py</p><p id="d0ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">媒体</p><p id="ff85" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">└──简介-图片</p><p id="f7b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">溪流</p><p id="53e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">├──移民</p><p id="f83e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">│ └── __pycache__</p><p id="3322" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">├──__ 皮切奇 _ _</p><p id="dfe4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">├──静电</p><p id="60a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">│ ├──</p><p id="7479" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">│ └── js</p><p id="8f43" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">└──模板</p><p id="d3cd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">└──河</p><p id="16e3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">飘带</p><p id="cd48" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">├──移民</p><p id="c770" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">│ └── __pycache__</p><p id="18fc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">├──__ 皮切奇 _ _</p><p id="d2a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">└──模板</p><p id="7474" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">└──飘带</p><p id="5b31" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">视频 _ 应用</p><p id="cdd1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">└──__ 皮切奇 _ _</p><p id="dd03" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们在<strong class="jm io"> settings.py </strong>中配置我们的应用程序，以便我们的应用程序被识别。</p><p id="acfd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 settings.py 文件中添加以下内容；</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="e954" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们现在将首先开始构建我们的流应用程序。首先让我们创建我们的模型，在<code class="fe lo lp lq lr b">stream/models.py</code>文件中添加以下内容；</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="2c46" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，我们已经定义了数据库中需要的项目，换句话说，我们将拥有作为用户的 streamer。</p><p id="916f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们需要创建我们的视图。先说<code class="fe lo lp lq lr b">video-create</code>视图。在<code class="fe lo lp lq lr b">views<strong class="jm io">.py</strong></code> <strong class="jm io"> </strong>文件中添加以下几行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="2a81" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里我们有从泛型<code class="fe lo lp lq lr b">CreateView</code>继承而来的基于类的<code class="fe lo lp lq lr b">VideoCreateView</code>。我们还增加了<code class="fe lo lp lq lr b">loginrequiredmixin </code>，这将确保只有登录的用户可以访问上传视频路径。我们还增加了一个<code class="fe lo lp lq lr b">form_valid</code>功能，确保登录的用户就是上传视频的人。</p><p id="f868" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来是我们的视频创作模板。我们整个项目的所有模板都将从<code class="fe lo lp lq lr b">base.html</code>模板继承。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="0fa6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来是我们的<code class="fe lo lp lq lr b"> video_list</code>视图，它将在主页中列出所有用户的所有视频。这是它的视图。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="ec19" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们按上传日期排列视频，最新的视频会最先出现。接下来，我们有我们的视频列表模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="0d3f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们转到我们的<code class="fe lo lp lq lr b">video_update</code>视图。在<code class="fe lo lp lq lr b"><strong class="jm io">stream/views.py</strong> </code>中插入以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="c3b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里我们插入了<strong class="jm io">userpasseststmixin</strong>，这将确保只有视频所有者可以更新视频。我们还定义了一个表单有效函数，它将确保在保存表单之前添加用户，从而避免完整性错误。我们还定义了一个<strong class="jm io"> test_func </strong>函数，它将确保只有视频的登录用户和所有者可以更新表单。</p><p id="30ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们有视频更新模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="1b94" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们转到详细视图，这将有助于我们看到每篇文章的细节。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="6b97" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里是<code class="fe lo lp lq lr b">video-detail</code>模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="8371" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在细节模板中，我们将显示 streamer <code class="fe lo lp lq lr b">profile picture</code>、<code class="fe lo lp lq lr b">username, video title , description </code>和<code class="fe lo lp lq lr b">video</code>本身。我们还创建了一个条件语句，只有当您是该视频的所有者时，该语句才会显示更新和删除按钮。</p><p id="eec4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们转到搜索视图。我们将根据它们的标题查询视频。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="f090" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们创建搜索模板，我们将有我们的搜索栏。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="5034" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的模板中，我们将搜索栏命名为<code class="fe lo lp lq lr b">title</code>，它将在搜索视图中用于查询视频。然后，输出将呈现在搜索栏下方，如图所示。</p><p id="6b5a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来我们移动到<code class="fe lo lp lq lr b">delete view</code>，它将用于删除视频。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="e4d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，我们将<strong class="jm io">登录所需的</strong>和<strong class="jm io">用户密码测试</strong>混合插入到我们的删除视图中，这将分别限制登录用户和上述视频作者的删除功能。<code class="fe lo lp lq lr b">test_func</code>函数意在声明。</p><p id="5a6e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们需要创建一个模板来确认我们的删除活动。当用户或更确切地说是 streamers 按照我的项目定义按下删除按钮，他们将被引导到这个页面，以确认删除特定的视频</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="d39b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们需要创建一个视图来查询属于某个用户的所有视频。如果你点击某个视频的用户名，你将被引导到一个包含某个用户曾经上传的所有内容的页面。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="3c6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们为上面的视图创建一个模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="55e3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们为我们的<code class="fe lo lp lq lr b">stream</code>应用程序创建路线。在<code class="fe lo lp lq lr b">stream/urls.py</code>文件中添加以下内容。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="8a3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是我们的 stream 应用程序，现在我们需要转移到包含用户创建功能的 streamers 应用程序。</p></div><div class="ab cl lu lv hr lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ig ih ii ij ik"><p id="1653" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们首先为我们的概要文件创建模型。然后，我们导入了枕头库，这将帮助我们调整上传的个人资料图片的大小。然后，我们创建了图像模型，它的缺省值是一个图像。然后，我们为上传的照片定义了路径，这些照片将存储在<code class="fe lo lp lq lr b">project directory</code>内的<code class="fe lo lp lq lr b">profile-pics</code>文件夹中。然后，我们创建了一个 save 函数，它将覆盖默认的 save 函数，以便保存一个小得多的图像，从而节省文件系统中的空间并提高页面加载速度。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="949d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来我们需要创建一个<code class="fe lo lp lq lr b">forms.py </code>文件来存储我们的<code class="fe lo lp lq lr b">registration, userupdate and profileupdate</code>表单。</p><p id="2ccc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先让我们创建一个注册功能。在<code class="fe lo lp lq lr b">forms.py</code>中，我们导入了 django 内置的<code class="fe lo lp lq lr b">usercreationform</code>。然后，我们创建了一个从<code class="fe lo lp lq lr b">usercreationform</code>继承而来的注册表单。还会创建一个电子邮件字段。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="3d77" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们为注册创建一个模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="1898" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们转到配置文件更新功能。这是个人资料图片字段以及用户名和电子邮件的表单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="21e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是档案更新的模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="4d11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们需要创建我们的登录和注销功能。为了启用这些功能，我们首先需要导入 django 内置的登录/注销功能。</p><p id="1f5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此，我们需要转到主项目<code class="fe lo lp lq lr b">video_app</code>中的<code class="fe lo lp lq lr b">urls.py </code></p><p id="257b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe lo lp lq lr b">urls.py </code>内添加以下内容</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">登录和注销 URL</figcaption></figure><p id="459a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们为各自的功能创建模板。这是登录模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="55c8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们创建注销模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="376d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们需要为整个项目创建路线。在<code class="fe lo lp lq lr b">video_app</code>内，将以下内容添加到<code class="fe lo lp lq lr b">urls.py </code>文件中。在这里，我们已经注册了整个项目的所有路线。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="14d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当用户注册一个帐户时，我们需要将他重定向到一个登录页面，以确认他的凭据。为此，我们需要在<code class="fe lo lp lq lr b">video_app/settings.py</code>文件中添加这一行。</p><p id="a379" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lo lp lq lr b">LOGIN_URL = 'login'</code></p><p id="ebcd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将调出<code class="fe lo lp lq lr b">video_app/urls.py</code>中定义的登录页面，启动登录功能。</p><p id="3055" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们需要在用户登录后将他重定向到主页。为此，我们将在<code class="fe lo lp lq lr b">video_app/settings.py</code>中添加以下行</p><p id="1d74" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lo lp lq lr b">LOGIN_REDIRECT_URL = '/'</code></p><p id="401d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，在我们结束项目之前，我们需要配置一些东西。</p><p id="356e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了让我们的应用程序能够存储和检索媒体文件，如个人资料图片和视频，我们需要首先设置访问它们的路径和位置。</p><p id="e500" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe lo lp lq lr b">settings.py</code>中添加以下内容；</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="6228" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们需要配置我们的<code class="fe lo lp lq lr b">urls.py</code>文件。添加以下内容</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="6cbf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了在每次成功注册后创建一个配置文件，我们需要创建信号。首先我们需要在<code class="fe lo lp lq lr b">streamers</code>目录中创建一个名为<code class="fe lo lp lq lr b">signals.py </code>的文件。在<code class="fe lo lp lq lr b">signals.py</code>文件中，我们添加以下内容。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="a9ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先我们有<code class="fe lo lp lq lr b">create_profile</code>函数，它接收一个参数<code class="fe lo lp lq lr b">User</code>作为发送方，然后创建配置文件。然后我们有一个<code class="fe lo lp lq lr b">save_profile </code>函数，它也接受一个参数<code class="fe lo lp lq lr b">User</code>作为发送者，但是现在保存而不是创建。为了结束信号，我们需要将它们导入到<code class="fe lo lp lq lr b">streamers/apps.py</code>文件中，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="6104" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我们最终需要在<code class="fe lo lp lq lr b">admin.py</code>文件中注册我们的<code class="fe lo lp lq lr b">streamers</code>模型，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="9349" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的项目终于要结束了，但我们需要做一件事。在<code class="fe lo lp lq lr b">video_app </code>项目文件夹中，我们需要创建一个名为<code class="fe lo lp lq lr b">media</code>的文件夹，并在其中插入一张名为<code class="fe lo lp lq lr b">mountain.jpg</code>的照片，如<code class="fe lo lp lq lr b">stream</code>模型中所定义的。每当有人创建帐户时，这将作为我们的默认个人资料照片。</p><p id="ea26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们需要创建表并迁移所有数据。为了完成第一次运行<code class="fe lo lp lq lr b">python3 manage.py makemigrations</code>，在成功运行之后，将创建两个表<code class="fe lo lp lq lr b">stream</code>和<code class="fe lo lp lq lr b">streamers</code>。现在我们需要迁移所有的数据。为了做到这一点，运行<code class="fe lo lp lq lr b">python3 manage.py migrate</code>完成后，我们需要让我们的服务器运行<code class="fe lo lp lq lr b">python3 manage.py runserver</code>。如果<strong class="jm io"> runserver </strong>命令成功运行，现在我们可以创建一个新帐户并开始上传视频。</p></div><div class="ab cl lu lv hr lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ig ih ii ij ik"><p id="8b3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">最终想法</strong></p><p id="ba7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个项目仍然缺乏很多功能，但我仍在努力与前面提到的一些即将到来的功能的下一个版本。敬请关注。你可以在这里获得这个项目<a class="ae mb" href="https://github.com/bunnythecompiler/video_app/tree/master" rel="noopener ugc nofollow" target="_blank">的源代码。一如既往地感谢您的阅读。你可以在这里捐款来支持我们。谢谢你。</a></p><div class="mc md gp gr me mf"><a href="https://www.paypal.com/donate/?hosted_button_id=ERQPL5YQWQX6J" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd io gy z fp mk fr fs ml fu fw im bi translated">捐赠给 bunnythecompiler</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">通过捐赠或与朋友分享来帮助支持 bunnythecompiler。</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">www.paypal.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt ks mf"/></div></div></a></div></div></div>    
</body>
</html>