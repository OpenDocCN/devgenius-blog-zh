<html>
<head>
<title>Auditing with Lighthouse - Quality Assurance Checkpoint for WebApp!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Lighthouse审计WebApp的质量保证检查点！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/auditing-with-lighthouse-quality-assurance-checkpoint-for-webapp-9a41de8bd511?source=collection_archive---------2-----------------------#2020-11-12">https://blog.devgenius.io/auditing-with-lighthouse-quality-assurance-checkpoint-for-webapp-9a41de8bd511?source=collection_archive---------2-----------------------#2020-11-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="5363" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">花一分钟了解性能、可访问性、最佳实践、SEO、PWA指标。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d4e4e598913133d58609704acbddae56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hqt3SkEfOYqX3kkEdDYipQ.png"/></div></div></figure><p id="36d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Lighthouse是一款<a class="ae ku" href="https://github.com/GoogleChrome/lighthouse" rel="noopener ugc nofollow" target="_blank">开源</a>，用于审计和提高网页质量和性能的自动化工具。</p><p id="833e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个受欢迎的选择，因为它的多功能性和衡量不同指标的能力，如最佳实践、SEO搜索引擎优化等...</p><p id="d4b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在开始讨论如何使用Lighthouse之前，这里的基本问题是:</p><h1 id="79ac" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">为什么是灯塔？</h1><ul class=""><li id="8f67" class="lt lu in jm b jn lv jr lw jv lx jz ly kd lz kh ma mb mc md bi translated">关注网站的网络标准。</li><li id="e356" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated">Lighthouse不仅提供指标，还生成一个可操作的报告，涉及特定的DOM元素、CSS选择器或基础设施设置。</li><li id="a878" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated">与等待项目完成不同，lighthouse有助于在早期阶段进行审计，并且可以提前解决令人担忧的问题。</li><li id="8844" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated">Lighthouse可以在使用其他性能工具(如Gatling、JMeter、BlazeMeter等)开始广泛的性能测试之前使用。</li></ul><p id="3d74" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi">.</p><h1 id="5e04" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">运行灯塔</h1><ul class=""><li id="7429" class="lt lu in jm b jn lv jr lw jv lx jz ly kd lz kh ma mb mc md bi translated">在Chrome DevTools中</li><li id="26d5" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated">作为Chrome的扩展</li><li id="9673" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated">通过灯塔CLI</li></ul><p id="3d9c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:</strong>要预装Chrome浏览器。</p><div class="mj mk gp gr ml mm"><a href="https://www.google.com/chrome/" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd io gy z fp mr fr fs ms fu fw im bi translated">谷歌浏览器-从谷歌下载快速、安全的浏览器</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">下载Chrome下载后按照说明安装。适用于Windows 10/8.1/8/7 32位。对于Windows…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">www.google.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na ks mm"/></div></div></a></div></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h2 id="c17f" class="ni kw in bd kx nj nk dn lb nl nm dp lf jv nn no lj jz np nq ln kd nr ns lr nt bi translated">从Chrome DevTools运行Lighthouse</h2><p id="8ac8" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv nu jx jy jz nv kb kc kd nw kf kg kh ig bi translated">内置以来最简单的一个。</p><ul class=""><li id="d53d" class="lt lu in jm b jn jo jr js jv nx jz ny kd nz kh ma mb mc md bi translated">只需在浏览器中打开Chrome DevTools(快捷键:F12)。</li><li id="1160" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated">点击生成报告。仅此而已！你的工作完成了。等待审核完成，报告将在几秒钟内生成。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/2891167ce66f5f489e5e2919cf0c84df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*W_a19EkZV_jYUuFvfFUzcw.gif"/></div></div><figcaption class="ob oc gj gh gi od oe bd b be z dk translated">Chrome DevTools中的灯塔</figcaption></figure><h2 id="dc8b" class="ni kw in bd kx nj nk dn lb nl nm dp lf jv nn no lj jz np nq ln kd nr ns lr nt bi translated">审计时实际发生了什么？</h2><p id="f7ba" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv nu jx jy jz nv kb kc kd nw kf kg kh ig bi translated">针对站点运行将模拟移动设备，降低连接速度以确保如果有人在移动设备上查看站点，性能数字与真实世界相符。并在此期间重新加载页面以检查站点是否脱机工作。然后将运行性能审核和可访问性审核。</p><p id="ad1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，将生成报告，该报告基本上显示了根据反馈改进情况得出的分数。</p><p id="b652" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi">.</p><h2 id="e6f9" class="ni kw in bd kx nj nk dn lb nl nm dp lf jv nn no lj jz np nq ln kd nr ns lr nt bi translated">将Lighthouse作为Chrome扩展运行</h2><p id="4f74" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv nu jx jy jz nv kb kc kd nw kf kg kh ig bi translated">但首先，为lighthouse安装chrome扩展</p><div class="mj mk gp gr ml mm"><a href="https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd io gy z fp mr fr fs ms fu fw im bi translated">灯塔</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">Lighthouse是一个开源的自动化工具，用于提高web应用程序的性能、质量和正确性…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">chrome.google.com</p></div></div><div class="mv l"><div class="of l mx my mz mv na ks mm"/></div></div></a></div><ul class=""><li id="841f" class="lt lu in jm b jn jo jr js jv nx jz ny kd nz kh ma mb mc md bi translated">转到需要审计的网页。</li><li id="b12f" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated">点击<strong class="jm io">灯塔</strong>图标。应该在Chrome地址栏旁边。如果没有，打开Chrome的主菜单，在菜单顶部访问。点击后，灯塔菜单展开。</li></ul><p id="57db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:</strong>选择所需的审计指标。此外，还要选择可以运行audit的平台(桌面或移动)。</p><ul class=""><li id="2fb2" class="lt lu in jm b jn jo jr js jv nx jz ny kd nz kh ma mb mc md bi translated">点击生成报告。将打开一个新选项卡，等待审核完成，几秒钟后将生成报告。</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/660cb4601b39ea16447844a14224c6ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xnGfTZjR-mJj0lV9dtzaAA.gif"/></div></div><figcaption class="ob oc gj gh gi od oe bd b be z dk translated">灯塔镀铬扩展</figcaption></figure><p id="ec83" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi">.</p><h1 id="4878" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">灯塔CLI</h1><p id="4f77" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv nu jx jy jz nv kb kc kd nw kf kg kh ig bi translated">通过允许通过命令行或编程方式运行审计，它提供了更多的灵活性和高级用途。</p><p id="4029" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:</strong>节点和npm需要预装。</p><p id="ab64" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">步骤1: </strong>打开终端，使用下面的命令在本地机器上全局安装lighthouse。</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="6517" class="ni kw in oh b gy ol om l on oo">npm install -g <!-- -->lighthouse</span></pre><p id="27f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">步骤2: </strong>安装后，通过指定URL运行以下命令</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="0c4a" class="ni kw in oh b gy ol om l on oo">lighthouse &lt;url&gt;</span></pre><p id="0a92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">或者，也可以使用以下命令指定audit more:</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="b350" class="ni kw in oh b gy ol om l on oo">lighthouse &lt;url&gt; --emulated-form-factor="desktop" --view</span></pre><p id="4aff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">其他参数可以通过使用以下命令来查看:</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="aeba" class="ni kw in oh b gy ol om l on oo">lighthouse --help</span></pre><p id="ab2c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">等待审计完成。并在浏览器中打开审核报告的链接。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oa"><img src="../Images/2a3d8a4168597f646af75e982ec78b64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9KPQxeqWh4LEBBR-wL54kg.gif"/></div></div><figcaption class="ob oc gj gh gi od oe bd b be z dk translated">灯塔CLI</figcaption></figure><p id="5d7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:</strong> Lighthouse可以生成JSON或HTML格式的报告。使用<code class="fe op oq or oh b">--output=json</code>标志运行Lighthouse会生成一个JSON转储。</p><pre class="kj kk kl km gt og oh oi oj aw ok bi"><span id="0f2c" class="ni kw in oh b gy ol om l on oo">lighthouse <a class="ae ku" href="https://www.google.com" rel="noopener ugc nofollow" target="_blank">https://www.google.com</a> --output=json --output-path=./Desktop/audit.json</span></pre><p id="56e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi">.</p><h2 id="e386" class="ni kw in bd kx nj nk dn lb nl nm dp lf jv nn no lj jz np nq ln kd nr ns lr nt bi translated">还有一种方法…</h2><h1 id="38de" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">将Lighthouse与基于Cypress JS的框架相集成</h1><p id="9a88" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv nu jx jy jz nv kb kc kd nw kf kg kh ig bi translated">可以使用Lighthouse插件在e2e测试中生成审计-</p><div class="mj mk gp gr ml mm"><a href="https://github.com/mfrachet/cypress-audit" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd io gy z fp mr fr fs ms fu fw im bi translated">MFR achet/cypress-审计</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">我们有机会能够使用强大的工具来自动化和防止不同类型的倒退…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">github.com</p></div></div><div class="mv l"><div class="os l mx my mz mv na ks mm"/></div></div></a></div><p id="7a1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="ot">注:</em></strong><em class="ot">Jest和Puppeteer也有插件。</em></p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="4a20" class="kv kw in bd kx ky ou la lb lc ov le lf lg ow li lj lk ox lm ln lo oy lq lr ls bi translated">GITHUB操作</h1><p id="a073" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv nu jx jy jz nv kb kc kd nw kf kg kh ig bi translated">Lighthouse也可以被添加为推送提交的安全网。下面的代码片段可以添加到workflow.yml文件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oz"><img src="../Images/ed52b8f1516efb899d0a71a7ca28e617.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IKGBOJ-iyKKgtq3mBICEig.png"/></div></div></figure></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="dcba" class="kv kw in bd kx ky ou la lb lc ov le lf lg ow li lj lk ox lm ln lo oy lq lr ls bi translated">分数的计算</h1><div class="mj mk gp gr ml mm"><a href="https://web.dev/performance-scoring/" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd io gy z fp mr fr fs ms fu fw im bi translated">灯塔绩效评分</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">Lighthouse如何计算您的总体绩效得分一般来说，只有指标对您的Lighthouse有贡献…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">网络开发</p></div></div><div class="mv l"><div class="pa l mx my mz mv na ks mm"/></div></div></a></div></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="0a1b" class="kv kw in bd kx ky ou la lb lc ov le lf lg ow li lj lk ox lm ln lo oy lq lr ls bi translated">参考</h1><ul class=""><li id="10ef" class="lt lu in jm b jn lv jr lw jv lx jz ly kd lz kh ma mb mc md bi translated"><strong class="jm io">文档链接:</strong><a class="ae ku" href="https://developers.google.com/web/tools/lighthouse#integrate" rel="noopener ugc nofollow" target="_blank">https://developers . Google . com/web/tools/light house # integrate</a></li><li id="01b0" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated"><strong class="jm io"> Github链接:</strong>【https://github.com/GoogleChrome/lighthouse T21】</li><li id="ddd4" class="lt lu in jm b jn me jr mf jv mg jz mh kd mi kh ma mb mc md bi translated"><strong class="jm io">灯塔插件链接:</strong>参考‘相关项目’章节-<a class="ae ku" href="https://github.com/GoogleChrome/lighthouse#plugins" rel="noopener ugc nofollow" target="_blank">https://github.com/GoogleChrome/lighthouse#plugins</a></li></ul><p id="1038" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi">.</p><h1 id="4544" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">感谢阅读！</h1></div></div>    
</body>
</html>