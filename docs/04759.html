<html>
<head>
<title>Start Behavior-Driven Development (BDD) for Java SpringBoot REST API Using Cucumber</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cucumber开始Java SpringBoot REST API的行为驱动开发(BDD)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/start-behavior-driven-development-bdd-for-java-springboot-rest-api-using-cucumber-f6b1754d93b1?source=collection_archive---------0-----------------------#2021-05-03">https://blog.devgenius.io/start-behavior-driven-development-bdd-for-java-springboot-rest-api-using-cucumber-f6b1754d93b1?source=collection_archive---------0-----------------------#2021-05-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8538" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为自动化的端到端测试创建人类可读的测试用例</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b88adbfc4b5ec105334824f247fdb882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAdQe_fuZ8Sy9uF90EYzLA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Alexander Duncan 在<a class="ae kv" href="https://unsplash.com/s/photos/cucumber?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="84e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">测试自动化是一个迷人的想法，因为您可以让计算机程序为您运行测试用例，节省您手动执行琐碎和平凡测试步骤的时间和精力。由于测试用例是使用程序代码实现的，最终用户很难理解，更不用说他们自己调整测试用例的机会了。</p><p id="f437" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事实上，在将用户故事转化为技术实现时，业务领域和技术领域之间存在差距，导致误解和遗漏用户需求。</p><p id="7fea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着行为驱动开发(BDD)的出现，这种情况得到了极大的改善，因为它允许用户故事作为验证系统行为的测试用例。</p><p id="5d14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，您将找到通过使用Cucumber实现BDD来提高SpringBoot REST API开发的生产率和质量的方法。</p><h1 id="c7a9" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是BDD？</h1><p id="d428" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">BDD的概念是基于以用户故事格式编写的系统特性来构建自动化测试用例。开发完成得越多，通过的测试用例就越多，最终所有的测试用例都会在开发完成时通过。</p><p id="3564" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关键元素是由用户和业务分析师创建的特征文件，它用自然的人类语言描述系统特征。然后，开发人员在程序代码中构建测试逻辑，并映射到特性文件中的每个语句，以形成自动化测试用例。</p><p id="a8c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了执行测试用例，我们可以利用Cucumber，这是一个流行的BDD测试框架，将特征文件和程序代码绑定在一起并运行测试用例。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/215490505b58ce10f2a4770ddfb99e92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cgwivn4bJnw0fWhYFYsUQw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">黄瓜测试自动化</figcaption></figure><h2 id="d4b8" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">特征定义</h2><p id="c878" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">特征文件中的系统需求采用<strong class="ky ir">的模式</strong>。该模式基于名为<a class="ae kv" href="https://cucumber.io/docs/gherkin/" rel="noopener ugc nofollow" target="_blank">小黄瓜</a>的语法，它定义了给定语句的<strong class="ky ir">中的前提条件，当</strong>语句时在<strong class="ky ir">中采取的动作，以及在<strong class="ky ir">然后</strong>语句中的预期系统行为。</strong></p><p id="f5ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有一个简单的例子来说明谷歌搜索功能的行为。这种格式用自然的人类可读语言清楚地描述了系统特征。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">示例特征定义</figcaption></figure><p id="0b0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想提供更多示例数据，那么您可以将它们放在<strong class="ky ir">示例</strong>部分。Cucumber然后将为<strong class="ky ir">示例</strong>部分下的每个记录行运行测试用例(除了第一个标题行)。下面的例子将对<strong class="ky ir">示例</strong>部分中的每一行运行测试用例三次。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">带有示例数据的示例特征定义</figcaption></figure><p id="9ebf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<strong class="ky ir"> Given-When-Then </strong>模式有利于开发过程，因为它使所有用户需求保持一致的格式，并使需求易于理解。</p><p id="30df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦特性文件准备好了，开发人员就可以开始为需求中的每一步构建技术实现。例如，开发人员可能会编写代码，指示Chrome浏览器根据给定的和<strong class="ky ir"> When </strong>子句使用Selenium执行步骤，然后按照<strong class="ky ir"> Then </strong>子句中指定的方式验证搜索结果。</p><p id="3700" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在接下来的几节中，让我们详细看看如何为Java SpringBoot REST API实现BDD。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="541a" class="ls lt iq bd lu lv nl lx ly lz nm mb mc jw nn jx me jz no ka mg kc np kd mi mj bi translated">用例</h1><p id="05cf" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">示例应用程序是一个REST API，它提供了两个端点:</p><ul class=""><li id="d9a3" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated">获取特定基础货币的最新货币汇率。</li><li id="3eec" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">为货币对保留汇率。这是外币交易过账之前的一个步骤。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/5f948e9f97fefd7380b024447a87c4b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*sebWpJDcQPpI8lRRDE0Txw.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">示例应用程序的REST API</figcaption></figure><p id="9ef1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有黄瓜测试案例的SpringBoot API可以参考这个<a class="ae kv" href="https://github.com/gavinklfong/reactive-spring-forex-trade" rel="noopener ugc nofollow" target="_blank"> GitHub项目</a>。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="1729" class="ls lt iq bd lu lv nl lx ly lz nm mb mc jw nn jx me jz no ka mg kc np kd mi mj bi translated">Maven依赖性</h1><p id="9d34" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们需要Cucumber测试框架的以下Maven依赖项</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">黄瓜Maven依赖</figcaption></figure></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="dd40" class="ls lt iq bd lu lv nl lx ly lz nm mb mc jw nn jx me jz no ka mg kc np kd mi mj bi translated">特征定义</h1><p id="e6f5" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">对于两个API端点，我们有一个小黄瓜文件<strong class="ky ir"><em class="of">rate-API . feature</em></strong>用于系统特性的定义。</p><h2 id="8502" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">获取最新的外汇汇率</h2><p id="773e" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">前提条件是API已经准备好服务。当调用API获取基础货币的最新汇率时。然后，预计API应该返回一个货币汇率列表。在<strong class="ky ir">示例</strong>部分提供了样本基础货币(英镑、美元),以便可以针对不同的基础货币执行相同的测试案例。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">汇率检索API的功能定义</figcaption></figure><h2 id="b000" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">进行价格预订</h2><p id="f770" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">当子句包含请求提交的参数时，汇率预订请求由5个数据字段组成，如<strong class="ky ir">中的声明。您可以看到<strong class="ky ir">示例</strong>部分中的数据包含许多示例请求。那么，预期结果应该是具有将来到期时间的费率预订。</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">汇率登记API的功能定义</figcaption></figure><h1 id="6eb8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">测试步骤实现</h1><p id="5069" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">特征文件中的每个语句都有一个到程序代码实现的映射，用于自动测试。程序代码可以是Java、Node JS、Python等不同的语言。这里的例子使用Java来实现自动化测试的逻辑。要创建到特征文件中语句的映射，可以在Java方法中添加注释<strong class="ky ir"><em class="of">@给定</em> </strong>、<strong class="ky ir"><em class="of">@当</em> </strong>和<strong class="ky ir"><em class="of">@然后</em> </strong>来建立联动。</p><p id="2e2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先我们创建一个Java类，定义跨步骤数据共享的类变量，SpringBoot的URL和报表的场景对象。这个Java类将包含用于步骤实现的Java方法。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="a389" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">“给定”语句的分步实现</h2><p id="d537" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><strong class="ky ir">给定的</strong>语句是前提条件。例如，在特定网站打开浏览器，用户登录。对于REST API，前提条件只是准备好API服务。</p><pre class="kg kh ki kj gt og oh oi oj aw ok bi"><span id="f6e7" class="mq lt iq oh b gy ol om l on oo"><strong class="oh ir">Given</strong> API Service is started</span></pre><p id="85bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该语句绑定到下面的Java方法签名</p><pre class="kg kh ki kj gt og oh oi oj aw ok bi"><span id="9f1e" class="mq lt iq oh b gy ol om l on oo"><strong class="oh ir"><em class="of">@Given</em></strong>("^API Service is started$")<br/>public void api_service_is_started()</span></pre><p id="058d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注释“<strong class="ky ir"> @ <em class="of">给定</em> </strong>”将Java方法映射到特征文件中与文本匹配的语句。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="235a" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">“When”语句的分步实现</h2><p id="b958" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated"><strong class="ky ir">当</strong>报表提交后外汇汇率预约请求</p><pre class="kg kh ki kj gt og oh oi oj aw ok bi"><span id="b995" class="mq lt iq oh b gy ol om l on oo"><strong class="oh ir">When</strong> I request for a rate booking with parameters: '&lt;tradeAction&gt;', '&lt;baseCurrency&gt;', '&lt;counterCurrency&gt;', &lt;baseCurrencyAmount&gt;, &lt;customerId&gt;</span></pre><p id="1a7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该语句绑定到下面的Java方法签名</p><pre class="kg kh ki kj gt og oh oi oj aw ok bi"><span id="5276" class="mq lt iq oh b gy ol om l on oo"><strong class="oh ir">@When</strong>("I request for a rate booking with parameters: {string}, {string}, {string}, {long}, {long}")</span><span id="a04a" class="mq lt iq oh b gy op om l on oo">public void i_request_for_a_rate_booking_with_parameters(String tradeAction, String base, String counter, Long amount, Long customerId)</span></pre><p id="5e03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注释“<strong class="ky ir"> @When </strong>”将Java方法映射到特征文件中与文本匹配的语句。</p><p id="3526" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以看到语句中有两种类型的参数——String和Long。特征文件中用单引号括起来的参数是字符串数据类型，而用单引号括起来的其他参数是长数据类型。</p><p id="1d78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦有了参数输入，开发就很简单了，因为要构造请求数据并将请求提交给REST API。由于响应数据将在下一步的<strong class="ky ir"> Then </strong>语句中得到验证，因此这一步将HTTP response和其他参数设置为类变量，以便下一步可以获得值以进行进一步处理。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="fad7" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">“Then”语句的分步实现</h2><p id="b66c" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">然后，是时候验证速率预留的响应了。<strong class="ky ir"> @Then </strong>注释有助于建立到Java方法的映射。由于<strong class="ky ir"> Then </strong>语句中没有参数，所以Java方法不接受任何参数。</p><pre class="kg kh ki kj gt og oh oi oj aw ok bi"><span id="4436" class="mq lt iq oh b gy ol om l on oo"><strong class="oh ir">Then</strong> I should receive a rate booking with expiry time in the future</span></pre><p id="f7c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该语句绑定到下面的Java方法签名</p><pre class="kg kh ki kj gt og oh oi oj aw ok bi"><span id="91e8" class="mq lt iq oh b gy ol om l on oo"><strong class="oh ir">@Then</strong>("I should receive a rate booking with expiry time in the future")</span><span id="9163" class="mq lt iq oh b gy op om l on oo">public void i_should_receive_a_valid_rate_booking()</span></pre><p id="a3d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注释“<strong class="ky ir"> @Then </strong>”将Java方法映射到特征文件中与文本匹配的语句。</p><p id="1394" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该方法从类变量获取HTTP响应，并验证字段值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="5b02" class="ls lt iq bd lu lv nl lx ly lz nm mb mc jw nn jx me jz no ka mg kc np kd mi mj bi translated">黄瓜测试配置</h1><p id="240a" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">最后，您需要通知Cucumber特性文件的位置和绑定设置的步骤实现逻辑。另外，cucumber的自动化测试用例需要配置才能被JUnit触发。</p><p id="d2d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们用以下注释定义了一个空的Java类:</p><ul class=""><li id="cd7a" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated"><strong class="ky ir"><em class="of">@ run with(cuc mber . class)</em></strong>—是将黄瓜注册为JUnit测试用例。</li><li id="10be" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><strong class="ky ir"><em class="of">@ cucumber options</em></strong>—指定特征文件的位置、步骤执行和测试结果数据文件输出。</li></ul><p id="0bb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了使用<strong class="ky ir"> <em class="of"> @RunWith </em> </strong>和<strong class="ky ir"><em class="of">@Cucumber options</em></strong>之外，JUnit5还有一个新的注释@ Cucumber，它具有自动发现特征文件和步骤实现的能力，如果您对该注释感兴趣，可以了解更多。</p><p id="5be9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"><em class="of">@ CucmberOptions</em>—plugin</strong>中指定的位置是测试结果输出。该文件可用于生成报告。可以参考后面一节的详细内容。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="8e14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">IDE工作区的屏幕截图显示了相应的文件位置</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/daddc98c9e42e7409476e8f2cd7b0cec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kj1Um4g6pcLd6QrQAmk-Zw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">工作区中的黄瓜文件</figcaption></figure></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="1910" class="ls lt iq bd lu lv nl lx ly lz nm mb mc jw nn jx me jz no ka mg kc np kd mi mj bi translated">测试用例执行的设置</h1><p id="1383" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">有不同的方式来运行测试用例，例如，使用测试启动器作为一个单独的进程，并通过maven插件(如maven-surefile和maven-failsafe)来运行测试。这个例子将展示如何配置Maven来运行Cucumber测试，作为maven-failsafe集成测试的一部分。</p><p id="ce32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了避免与同一台机器上的其他应用程序发生冲突，第一步是为SpringBoot预留一个随机的网络端口。然后，在测试预集成测试阶段使用保留的端口启动SpringBoot，然后执行cucumber测试。集成测试完成后，在集成后测试阶段关闭SpringBoot。</p><p id="a5be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将测试执行作为Maven生命周期的一部分嵌入是一种方便的方法，因为开发人员只需一个Maven命令就可以编译、执行单元测试和cucumber端到端测试。此外，在CI/CD管道中实现该过程也很容易。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/46089f81112b6cb65748a843e88cabaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QUPNLA5cMVm7DjzhWYZ9OQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Maven集成测试执行的生命周期</figcaption></figure><p id="c290" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的执行流程可以通过下面的Maven配置来实现</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="d027" class="ls lt iq bd lu lv nl lx ly lz nm mb mc jw nn jx me jz no ka mg kc np kd mi mj bi translated">测试结果报告</h1><p id="4919" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在测试执行的最后，我们将得到一个HTML格式的报告。该报告提供了测试执行的总体统计数据，以及每个步骤的输出细节。</p><h2 id="da76" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated"><strong class="ak">概述</strong></h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/199d780a63c0f154153d1926abcc2d57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wca9V69VicFMKjTCogGOng.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">黄瓜测试结果概述</figcaption></figure><h2 id="e863" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">报告详细信息—成功案例</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/f2588051eeff258e1d6d561713d53023.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I6yR9uJbOmDNZA16a_gs3Q.jpeg"/></div></div></figure><h2 id="06c5" class="mq lt iq bd lu mr ms dn ly mt mu dp mc lf mv mw me lj mx my mg ln mz na mi nb bi translated">报告详细信息—失败的案例</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/d09658d06f2a40d7757f9e55d65256c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J45nFvQt2S64TsPLcKXrHA.jpeg"/></div></div></figure><p id="eb7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">报告的生成依赖于maven插件net . master think/maven-cucumber-reporting。只需在pom.xml中添加这个配置，就可以生成报告</p><p id="b14e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为这个插件从cucumber获取测试结果作为报告生成的输入，所以请确保插件被正确配置，以便它指向从CucumberTestRunner输出的测试结果文件的位置</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h1 id="64e2" class="ls lt iq bd lu lv nl lx ly lz nm mb mc jw nn jx me jz no ka mg kc np kd mi mj bi translated">最后的想法</h1><p id="e0bf" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">BDD有助于用户需求过程，因为Gherkin语法接近自然语言，并且<strong class="ky ir"> Given-When-Then </strong>模式易于理解，以一致的格式创建用户需求。此外，Cucumber测试框架支持基于用户需求验证系统行为的测试自动化。</p><p id="5508" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，BDD为用户验收测试的自动化铺平了道路。随着step实现和自动化管道的准备就绪，用户可以在没有技术团队支持的情况下，立即调整特征文件中的示例数据并运行自动化测试用例。</p></div></div>    
</body>
</html>