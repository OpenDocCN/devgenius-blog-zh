<html>
<head>
<title>How to Setup SSMTP Server on Linux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Linux 上设置 SSMTP 服务器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-setup-ssmtp-server-on-linux-3dba2e2a7cd1?source=collection_archive---------1-----------------------#2022-06-03">https://blog.devgenius.io/how-to-setup-ssmtp-server-on-linux-3dba2e2a7cd1?source=collection_archive---------1-----------------------#2022-06-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="2e2d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">脚本和自动化</p><p id="b2d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">假设您被要求在服务器上自动执行每天、每周或每月的任务。为了确保任务成功完成，您希望您的自动化脚本向团队中的某些人或您自己发送电子邮件通知或报告。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6774f744c184c5a274d9b4368d1c92d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ALJHrcRzyWUi29ir6umyMw.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片来源:<a class="ae ky" href="https://dribbble.com/shots/2055709-Send-Email-GIF" rel="noopener ugc nofollow" target="_blank">dribbble.com</a></figcaption></figure><p id="c926" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，本质上你是在尝试做以下事情之一:</p><ul class=""><li id="6124" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">从您的终端发送电子邮件</li><li id="eec6" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">当服务器重新启动时得到通知</li><li id="b2f4" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">从服务器上运行的自动化脚本发送电子邮件通知</li><li id="e44c" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">等等。</li></ul><blockquote class="ln lo lp"><p id="2771" class="jk jl lq jm b jn jo jp jq jr js jt ju lr jw jx jy ls ka kb kc lt ke kf kg kh ig bi translated">有各种各样的工具和库可以安装，以便从终端或运行在 Linux 服务器上的脚本发送电子邮件。 </p></blockquote><p id="9649" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，在本教程中，我们将使用两个流行的库来演示如何在 Linux 机器上发送或接收电子邮件:</p><ul class=""><li id="ee23" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">SSMTP</li><li id="49e0" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">迈卢蒂尔</li></ul><p id="b8f8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">SMTP <strong class="jm io">(简单邮件传输协议)</strong>或<strong class="jm io"> </strong> SMTP <strong class="jm io">(安全简单邮件传输协议)</strong>用于<strong class="jm io">收发邮件</strong>。它有时与其他库(如 Mailutil、IMAP 等)成对使用。它处理邮件的检索，而 SMTP 主要将邮件发送到服务器进行转发。</p><h1 id="a202" class="lu lv in bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">确认</h1><p id="fd11" class="pw-post-body-paragraph jk jl in jm b jn ms jp jq jr mt jt ju jv mu jx jy jz mv kb kc kd mw kf kg kh ig bi translated">首先，您希望通过运行以下命令来检查是否已经在该 Linux 机器上设置了 SMTP:</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="38a6" class="nc lv in my b gy nd ne l nf ng">&gt; mail -V</span><span id="8c71" class="nc lv in my b gy nh ne l nf ng">&gt; echo "Hello world" | mail -s "Test Email" your_email@gmail.com</span></pre><p id="f8d4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">检查 your_email@gmail.com 的收件箱或者你的垃圾邮件箱</p><p id="43e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您没有收到电子邮件或得到一个错误，那么 SMTP 没有设置，您可以继续设置。</p><h1 id="1afc" class="lu lv in bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">安装库</h1><p id="ceaa" class="pw-post-body-paragraph jk jl in jm b jn ms jp jq jr mt jt ju jv mu jx jy jz mv kb kc kd mw kf kg kh ig bi translated">使用以下命令安装 Mailutils 和 SSMTP 库软件包:</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="58b7" class="nc lv in my b gy nd ne l nf ng">&gt; apt-get install mailutils</span></pre><ul class=""><li id="aa72" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">在安装过程中→保留所有默认设置并选择“无配置”</li></ul><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="b2b8" class="nc lv in my b gy nd ne l nf ng">&gt; apt-get install ssmtp</span></pre><p id="321e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">成功安装 Mailutils 和 SSMTP 后，验证并确保发送邮件所需的所有全局配置都设置正确:</p><ul class=""><li id="0e41" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">检查邮件工具→邮件-V</li><li id="5508" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">打开并编辑以下文件:</li></ul><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="0c4e" class="nc lv in my b gy nd ne l nf ng">&gt; nano /etc/ssmtp/ssmtp.conf</span></pre><p id="9f9b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">编辑上面的文件，并确保 M <strong class="jm io"> <em class="lq"> ailhub </em> </strong>设置为您的 SMTP 服务器。</p><p id="658c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您想要 Gmail 的 SMTP 服务器，您需要调整要使用的 Gmail 帐户的安全设置。进入<a class="ae ky" href="https://www.google.com/settings/u/1/security" rel="noopener ugc nofollow" target="_blank">谷歌账户设置</a>，启用选项<strong class="jm io">允许不太安全的应用</strong>，默认关闭:</p><p id="ac8b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">那么您的 ssmtp.conf 内容应该包含以下内容:</p><ul class=""><li id="fb68" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated"><strong class="jm io">发送邮件服务器(SMTP 服务器)或 mailhub: </strong> <code class="fe ni nj nk my b">smtp.gmail.com</code></li><li id="bdcc" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated"><strong class="jm io">用户名:</strong>您的 Gmail 帐户 ID(例如，如果您的电子邮件是<code class="fe ni nj nk my b">your_email@gmail.com</code>，则为<code class="fe ni nj nk my b">your_email</code></li><li id="742e" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated"><strong class="jm io">密码:</strong>您的 Gmail 密码</li><li id="4b71" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated"><strong class="jm io">使用认证:</strong>是</li><li id="75b4" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated"><strong class="jm io">使用安全连接:</strong>是</li><li id="ba92" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated"><strong class="jm io">端口:</strong> <code class="fe ni nj nk my b">587</code> (TLS)或<code class="fe ni nj nk my b">465</code> (SSL)</li></ul><p id="3840" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您使用的是自己的 SMTP 服务器，那么按如下方式设置您的<em class="lq">邮件中心</em>:</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="82ad" class="nc lv in my b gy nd ne l nf ng">mailhub=your.ssmtpserver.example:port_used</span></pre><p id="b2b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">和</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="1127" class="nc lv in my b gy nd ne l nf ng">FromLineOverride=YES</span></pre><p id="8f31" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您可以从命令行发送电子邮件了。通过再次运行以下命令来测试它:</p><pre class="kj kk kl km gt mx my mz na aw nb bi"><span id="82d0" class="nc lv in my b gy nd ne l nf ng">&gt; echo "Hello Friend" | mail -s "Test Email" your_friend_email@gmail.com</span></pre><blockquote class="ln lo lp"><p id="7a91" class="jk jl lq jm b jn jo jp jq jr js jt ju lr jw jx jy ls ka kb kc lt ke kf kg kh ig bi translated"><strong class="jm io"> <em class="in">如果出现错误，请查找、调查并排除故障</em> </strong></p></blockquote><h1 id="f08f" class="lu lv in bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">从脚本发送电子邮件</h1><p id="1449" class="pw-post-body-paragraph jk jl in jm b jn ms jp jq jr mt jt ju jv mu jx jy jz mv kb kc kd mw kf kg kh ig bi translated">如果您正在设置某种自动化脚本，并希望在脚本运行或任务完成时发送电子邮件通知；<br/>您也可以使用相同的 SMTP 从 shell 脚本发送邮件。您的代码可能如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nl nm l"/></div></figure><blockquote class="ln lo lp"><p id="863e" class="jk jl lq jm b jn jo jp jq jr js jt ju lr jw jx jy ls ka kb kc lt ke kf kg kh ig bi translated">如果你喜欢这篇文章，你可能也会喜欢；<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/cron-logrotate-how-to-use-cron-to-automate-tasks-a93069d9185c"> Cron &amp; logrotate:如何使用 Cron 自动化任务</a></p></blockquote><blockquote class="nn"><p id="d87c" class="no np in bd nq nr ns nt nu nv nw kh dk translated">干杯！！！</p></blockquote></div></div>    
</body>
</html>