<html>
<head>
<title>Learn SQL The Right Way Part 4: Normalisation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">正确学习 SQL 第 4 部分:规范化</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/learn-sql-the-right-way-part-4-normalisation-45bda607f3bd?source=collection_archive---------17-----------------------#2022-08-29">https://blog.devgenius.io/learn-sql-the-right-way-part-4-normalisation-45bda607f3bd?source=collection_archive---------17-----------------------#2022-08-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="6df7" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">学习成果</h1><ul class=""><li id="5ac0" class="ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">第一范式</li><li id="5e17" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">第二范式</li><li id="329c" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">第三范式</li></ul><p id="f7fc" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">这是一个非常重要的话题，但很多初学者选择忽略它。标准化是一个好的数据库和一个很差的数据库之间的区别。这些规则应该应用于所有数据库。有许多形式，但将只涵盖前三种，因为它们是所有数据库的基础。</p><h1 id="84cd" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第一范式</h1><p id="ae0c" class="pw-post-body-paragraph lf lg in kk b kl km li lj kn ko ll lm kp lw lo lp kr lx lr ls kt ly lu lv kv ig bi translated">当所有数据都是原子数据时，就实现了第一范式。我们所说的原子是什么意思？这是指每个属性下的所有数据都只有一个值。例如，让我们以这个带有属性“全名”的表为例。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/1b3d762d3f8d5f49a24490464e1fe89e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WDEg5poQCPncK5EXLP2NyQ.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">用于跟踪学生成绩的表</figcaption></figure><p id="4b5d" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">在全名下，没有任何数据是原子的，因为它包含名和姓。为了使这个原子化，我们必须把全名分成两个属性，名和姓。最大的问题是为什么这会有所不同？其中一个原因是，如果你要更新姓氏，你也必须更新名字，总的来说，第一范式更容易插入、更新和读取数据。</p><h1 id="b578" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第二范式</h1><p id="8dd5" class="pw-post-body-paragraph lf lg in kk b kl km li lj kn ko ll lm kp lw lo lp kr lx lr ls kt ly lu lv kv ig bi translated">为了达到第二范式，我们必须已经达到了第一范式。第二范式是移除<strong class="kk io">部分依赖项、</strong>并使所有功能仅依赖于主键的过程。让我们看看下表中的例子。</p><p id="740c" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">首先，我们需要理解“部分依赖”是什么意思。这是指非主键仅依赖于主键的一部分。</p><blockquote class="mp"><p id="c99f" class="mq mr in bd ms mt mu mv mw mx my kv dk translated">注意:组合键是组合了一个或多个属性的主键</p></blockquote><figure class="mz na nb nc nd me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/ab3a33a2fc151d00bd94d471141ebd4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WRxMnFdgNQS7vUBzONGSOQ.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">第一范式中的等级表</figcaption></figure><p id="d34c" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">乍一看，ID 似乎是主键，但仔细观察后，您会发现实际的主键是学生的 ID 和课程标题的组合。</p><p id="233d" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">正如您所看到的，名字只依赖于 ID，而 ID 是主键的一部分，这会导致部分依赖。</p><p id="e80a" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">部分依赖的最大问题是试图更新数据。如果我们想更新 Kevin 的姓氏，我们必须更改包含不正确姓氏的每一行。为了解决这个问题，我们需要拆分这些表</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/ca3627156174dfff961992a18354a524.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XCh-iomxg1rEhJ2dV-6ozw.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">学生桌</figcaption></figure><p id="d53e" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">这个表现在只存储学生数据。所有数据现在都依赖于 ID。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/e95b21dbe35dc0587e78dde2b248652b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OGeWU6ZXFq-K29n4bp8DhQ.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">课程表</figcaption></figure><p id="7c17" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">现在，表中的数据取决于课程标题。虽然我们已经将表格分开，但我们不确定每个学生的成绩。如果你还记得回到<a class="ae ne" rel="noopener ugc nofollow" target="_blank" href="/learn-sql-the-right-way-part-3-relationships-c421eb2c6738"> <strong class="kk io"> part 3 </strong> </a>，多对多表跨三个表拆分。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/a1c4e6ab0d0339c3d71de8f55a3bb716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y7VUJY8PrLBC-PqIFkrKtA.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">等级表</figcaption></figure><p id="5fd1" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">这个表格现在只记录每个学生学习的课程，以及他们取得的成绩。正如您所看到的，这里的主键是 ID 和课程名称，但是分数总是取决于键的两个属性。</p><h1 id="c881" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">第三范式</h1><p id="316c" class="pw-post-body-paragraph lf lg in kk b kl km li lj kn ko ll lm kp lw lo lp kr lx lr ls kt ly lu lv kv ig bi translated">要达到第三范式，就必须达到第一范式和第二范式。他们必须确保没有可传递的函数依赖。那么，什么是传递函数依赖呢？</p><p id="6d82" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">让我们看另一个例子。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/51720ef44e59d9e3ad05a8ff0ae449d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2o9APzr6nE4ZGC-Q3hUfhw.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">课程表</figcaption></figure><p id="e769" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">这在技术上是第二范式。费用和资格取决于课程名称，教师姓名取决于教师 ID，教师 ID 取决于课程名称。我们可以这样写出来，这样更简单。</p><p id="4865" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">费用-&gt;课程名称</p><p id="3343" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">资格-&gt;课程名称</p><p id="c4cb" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">教师 ID -&gt;课程名称</p><p id="ba1e" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">教师姓名-&gt;教师 ID</p><p id="2d0a" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">如您所见，没有部分依赖关系。那么，什么是传递函数依赖呢？这是非主键间接依赖于主键的情况。</p><p id="63ed" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">比如教师姓名-&gt;教师 Id -&gt;课程名称。老师的名字并不直接取决于课程名称。这导致传递函数依赖。</p><p id="505e" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">传递性函数依赖的问题是，如果你选择为某门课程更换老师，你将需要更新老师 Id 和老师姓名，这并不理想。</p><p id="8066" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">请记住，您必须更改这两者，因为教师 ID 用于标识教师。为了实现第三范式，我们需要拆分表。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/d1a898a5ee30d0d0bc02fb986b0a90a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_7q-xdP3u9LDzugzYxxZLA.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">课程表</figcaption></figure><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/7e482de3a29ecfc8edc55bb8f1ab6c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ntcHQihPOgDknAJI8ihK_w.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">教师桌</figcaption></figure><p id="9b57" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">现在我们已经实现了第三范式</p><h1 id="76f9" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">摘要</h1><p id="17e0" class="pw-post-body-paragraph lf lg in kk b kl km li lj kn ko ll lm kp lw lo lp kr lx lr ls kt ly lu lv kv ig bi translated">正如您所看到的，这三个简单的规则对数据库布局和您的思维方式有很大的影响。它只是显示了规划数据库和花时间有多大的不同，因此以正确的方式学习 SQL 是很重要的。你还应该记住，还有第四个法线等等，但是作为一个经验法则，实现前三个应该是最少的。</p><ul class=""><li id="72a0" class="ki kj in kk b kl lh kn lk kp nf kr ng kt nh kv kw kx ky kz bi translated">第一范式—确保表中的所有数据都是原子的</li><li id="2db3" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">第二范式—确保没有部分依赖</li><li id="dfc6" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">第三范式—确保没有函数依赖</li></ul><p id="af8c" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">暂时够了。</p><p id="e760" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">在最后一部分，我将介绍一些 SQL 语法，因为我们现在已经知道了所有需要的关键原则。</p><p id="749b" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated">接下来:正确学习 SQL 第 5 部分:语法</p><p id="8565" class="pw-post-body-paragraph lf lg in kk b kl lh li lj kn lk ll lm kp ln lo lp kr lq lr ls kt lt lu lv kv ig bi translated"><em class="ni">如果你喜欢这个，点击</em>👏<em class="ni">在下面，所以其他人会在媒体上看到这个。欢迎任何反馈或意见。祝你愉快</em></p></div></div>    
</body>
</html>