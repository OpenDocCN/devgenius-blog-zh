<html>
<head>
<title>Preact — Checkboxes, Radio Buttons, and Refs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预动作—复选框、单选按钮和引用</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/preact-checkboxes-radio-buttons-and-refs-36867912ae0e?source=collection_archive---------4-----------------------#2021-02-18">https://blog.devgenius.io/preact-checkboxes-radio-buttons-and-refs-36867912ae0e?source=collection_archive---------4-----------------------#2021-02-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/535dfabe111181d271b94e1ed1a3090f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Rd-QN5WW7GP7Nz3o"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@naadirshah?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">纳迪尔·沙胡尔</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="b2ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Preact是一个前端web框架，类似于react。</p><p id="cee5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它比React小，也不复杂。</p><p id="ced6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何开始使用Preact进行前端开发。</p><h1 id="635b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">复选框和单选按钮</h1><p id="ef65" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加复选框或单选按钮，并获取它们的选定值。</p><p id="9136" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="550e" class="mn lc iq mj b gy mo mp l mq mr">import { Component, render } from "preact";</span><span id="dfb6" class="mn lc iq mj b gy ms mp l mq mr">export default class App extends Component {<br/>  toggle = (e) =&gt; {<br/>    let checked = !this.state.checked;<br/>    this.setState({ checked });<br/>  };</span><span id="1070" class="mn lc iq mj b gy ms mp l mq mr">  render(_, { checked }) {<br/>    return (<br/>      &lt;label&gt;<br/>        &lt;input type="checkbox" checked={checked} onClick={this.toggle} /&gt;<br/>      &lt;/label&gt;<br/>    );<br/>  }<br/>}<br/>if (typeof window !== "undefined") {<br/>  render(&lt;App /&gt;, document.getElementById("root"));<br/>}</span></pre><p id="5bd2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了<code class="fe mt mu mv mj b">checked</code>状态。</p><p id="3131" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将它传递给<code class="fe mt mu mv mj b">checked</code> prop。</p><p id="e1ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe mt mu mv mj b">onClick</code>道具设置为<code class="fe mt mu mv mj b">toggle</code>方法。</p><p id="2278" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe mt mu mv mj b">setState</code>来设置<code class="fe mt mu mv mj b">checked</code>状态。</p><p id="016d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过编写以下内容来添加单选按钮:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a9e6" class="mn lc iq mj b gy mo mp l mq mr">import { Component, render } from "preact";</span><span id="039a" class="mn lc iq mj b gy ms mp l mq mr">export default class App extends Component {<br/>  constructor() {<br/>    super();<br/>    this.state = {<br/>      fruit: "apple"<br/>    };<br/>  }</span><span id="9b11" class="mn lc iq mj b gy ms mp l mq mr">onChangeValue = (event) =&gt; {<br/>    this.setState({ fruit: event.target.value });<br/>  };</span><span id="e209" class="mn lc iq mj b gy ms mp l mq mr">render(_, { fruit }) {<br/>    return (<br/>      &lt;div onChange={this.onChangeValue}&gt;<br/>        &lt;input<br/>          checked={fruit === "apple"}<br/>          type="radio"<br/>          value="apple"<br/>          name="fruit"<br/>        /&gt;{" "}<br/>        apple<br/>        &lt;input<br/>          checked={fruit === "orange"}<br/>          type="radio"<br/>          value="orange"<br/>          name="fruit"<br/>        /&gt;{" "}<br/>        orange<br/>        &lt;input<br/>          checked={fruit === "grape"}<br/>          type="radio"<br/>          value="grape"<br/>          name="fruit"<br/>        /&gt;{" "}<br/>        grape<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}<br/>if (typeof window !== "undefined") {<br/>  render(&lt;App /&gt;, document.getElementById("root"));<br/>}</span></pre><p id="465b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加单选按钮。</p><p id="507f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过<code class="fe mt mu mv mj b">onChange</code>回调来观察单选按钮选择的变化。</p><p id="2006" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">onChangeValue</code>方法中，我们调用<code class="fe mt mu mv mj b">setState</code>来设置<code class="fe mt mu mv mj b">fruit</code>状态。</p><p id="2511" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">input</code>中，我们设置<code class="fe mt mu mv mj b">checked</code>属性来设置单选按钮的选中状态。</p><p id="ba99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe mt mu mv mj b">render</code>方法中获取<code class="fe mt mu mv mj b">fruit</code>状态，并对照它进行检查以设置检查状态。</p><h1 id="5b5b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe mt mu mv mj b">createRef</code></h1><p id="c003" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们调用<code class="fe mt mu mv mj b">createRef</code>函数来返回一个带有<code class="fe mt mu mv mj b">current</code>属性的普通对象。</p><p id="ef41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当调用<code class="fe mt mu mv mj b">render</code>方法时，Preact都会将DOM节点或组件分配给<code class="fe mt mu mv mj b">current</code>。</p><p id="d65a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="af4f" class="mn lc iq mj b gy mo mp l mq mr">import { Component, createRef, render } from "preact";</span><span id="2bc2" class="mn lc iq mj b gy ms mp l mq mr">export default class App extends Component {<br/>  ref = createRef();</span><span id="ed7b" class="mn lc iq mj b gy ms mp l mq mr">  componentDidMount() {<br/>    console.log(this.ref.current);<br/>  }</span><span id="0881" class="mn lc iq mj b gy ms mp l mq mr">  render() {<br/>    return &lt;div ref={this.ref}&gt;foo&lt;/div&gt;;<br/>  }<br/>}<br/>if (typeof window !== "undefined") {<br/>  render(&lt;App /&gt;, document.getElementById("root"));<br/>}</span></pre><p id="4b58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将我们的<code class="fe mt mu mv mj b">ref</code>分配给div。</p><p id="cd8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以当我们记录<code class="fe mt mu mv mj b">this.ref.current</code>时，我们会看到div被记录。</p><h1 id="cb62" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">回调参考</h1><p id="c72a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们还可以通过传入一个回调函数来获取对元素的引用。</p><p id="0c58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="010b" class="mn lc iq mj b gy mo mp l mq mr">import { Component, render } from "preact";</span><span id="9686" class="mn lc iq mj b gy ms mp l mq mr">export default class App extends Component {<br/>  ref = null;<br/>  setRef = (dom) =&gt; (this.ref = dom);</span><span id="71fb" class="mn lc iq mj b gy ms mp l mq mr">  componentDidMount() {<br/>    console.log(this.ref);<br/>  }</span><span id="0b58" class="mn lc iq mj b gy ms mp l mq mr">  render() {<br/>    return &lt;div ref={this.setRef}&gt;foo&lt;/div&gt;;<br/>  }<br/>}<br/>if (typeof window !== "undefined") {<br/>  render(&lt;App /&gt;, document.getElementById("root"));<br/>}</span></pre><p id="ece3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有带<code class="fe mt mu mv mj b">dom</code>参数的<code class="fe mt mu mv mj b">setRef</code>函数，它有我们将这个函数作为<code class="fe mt mu mv mj b">ref</code>的值传递给的DOM节点。</p><p id="b831" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们将它作为div中的<code class="fe mt mu mv mj b">ref</code>属性的值传入，所以div就是<code class="fe mt mu mv mj b">dom</code>的值。</p><p id="b4b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将它分配给<code class="fe mt mu mv mj b">this.ref</code>，以便我们可以访问它。</p><p id="3205" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">componentDidMount</code>钩子中，我们记录了<code class="fe mt mu mv mj b">this.ref</code>的值，我们看到它的值是div。</p><h1 id="6088" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="7c0b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Preact轻松添加复选框和单选按钮。</p><p id="094a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用refs得到DOM元素。</p></div></div>    
</body>
</html>