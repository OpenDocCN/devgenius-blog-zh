<html>
<head>
<title>Learning Moments Creating a React Calendar Component: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习时刻创建 React 日历组件:第 1 部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/learning-moments-creating-a-react-calendar-component-part-1-e7a95a3f5b1?source=collection_archive---------7-----------------------#2020-07-07">https://blog.devgenius.io/learning-moments-creating-a-react-calendar-component-part-1-e7a95a3f5b1?source=collection_archive---------7-----------------------#2020-07-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e548491b4be6954939300fb60f88a92b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7y5Jy7dM8Esgr_TE"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">埃里克·罗瑟梅尔在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure></div><div class="ab cl ka kb hr kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="ig ih ii ij ik"><p id="061e" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">在最近与我的一位同事的讨论中，我们谈到了我们投资组合的项目主题。对话最终触及到一个想法，即你不需要创建庞大的功能程序来展示你的知识。迷你项目足以展示一套特定的技能，这是我在做下一个项目时一直记在心里的。</p><p id="cb8b" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">在我的日常工作中，我主要是一名后端开发人员，使用 NodeJs 和无服务器框架。每隔一段时间，我会做前端代码，但总是发现自己很难掌握我的同事对我们的产品做出的最新变化。考虑到这一点，我开始创建自己的组件，同时用 React 复习我的知识。因此，在这个由 3 部分组成的系列文章中，我将展示如何在 React 中创建一个日历组件。</p><p id="c6ab" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">请注意，我将不会深入到项目的设置和直接进入过程。如果你想要更多的知识或者一个简单的方法来启动你自己的 React 应用，看看<a class="ae jz" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank">创建 React 应用</a>。</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/2879d52e7a713f20a108ea485d155afc.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*BJchIMGOR95wmcCTcs9_wg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">使用 React、Javascript 和 MomentJs 创建</figcaption></figure><p id="c53b" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">在本文(第 1 部分)中，我们将严格审视生成一个月中的日期以及前一个月和后一个月的溢出日期的逻辑。如果你将来选择创建自己的组件，我希望这篇文章能为你提供一些知识和有趣的读物。</p><p id="145b" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">乍一看，日历似乎简单明了。让我们抓住一堆日期，拍在屏幕上！当然，事情并不像我们希望的那样简单，在编写任何代码之前，必须考虑几件事情:</p><ol class=""><li id="3e8c" class="lk ll in kj b kk kl ko kp ks lm kw ln la lo le lp lq lr ls bi translated">如何获得给定月份的天数？</li><li id="33d1" class="lk ll in kj b kk lu ko lv ks lw kw lx la ly le lp lq lr ls bi translated">如何知道给定月份中一周的第一天？</li><li id="8473" class="lk ll in kj b kk lu ko lv ks lw kw lx la ly le lp lq lr ls bi translated"><em class="lt">如何获取前/后几个月的溢出日期？</em></li></ol><p id="656a" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">在继续前进之前，我鼓励你花点时间想想你会怎么做。毕竟，脑力锻炼让你保持健康！</p></div><div class="ab cl ka kb hr kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="ig ih ii ij ik"><p id="93f3" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">挑战 1:我如何获得给定月份的天数？</p><p id="4ee1" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">日期在编程中是一件棘手的事情，Javascript 和 NodeJs 社区在他们心中有一个特殊的位置。这个挑战很简单，因为这个库提供了惊人的功能，我们将利用这个功能，用<code class="fe lz ma mb mc b">npm install --save moment</code>把这个包安装到我们的项目根目录中。</p><p id="2897" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">MomentJs 具有功能<code class="fe lz ma mb mc b">daysInMonth()</code>。问题解决了！让我们看看当你给它一个月的时候它会给你什么。</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="d9b3" class="mh mi in mc b gy mj mk l ml mm">import moment from 'moment';</span><span id="11cd" class="mh mi in mc b gy mn mk l ml mm">const getDaysInMonth = (month) =&gt; {<br/>  return moment(month, 'MM').daysInMonth();<br/>}</span><span id="6606" class="mh mi in mc b gy mn mk l ml mm">// '01' = January...<br/>console.log(getDaysInMonth('01'))</span></pre><p id="ebc2" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">控制台应该返回 31 作为结果。简单吧？这是可行的，但是有一些挑战。默认情况下，Moment 通过从当前日期获取信息来假设任何缺失的信息，这意味着即使我们不直接传递年份，也会获取 2020 年 1 月的日期。当然，2020 年是一个独特的年份…你已经猜到了，是闰年！</p><p id="6ca0" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">如果我传入<code class="fe lz ma mb mc b">getDaysInMonth('02') // 29</code>这个函数就可以了，但是如果我想要 2019 年 2 月的日子呢？幸运的是，MomentJs 有能力为我们处理这个问题。</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="9d2e" class="mh mi in mc b gy mj mk l ml mm">import moment from 'moment';</span><span id="18ec" class="mh mi in mc b gy mn mk l ml mm">const getDaysInMonth = (month, year) =&gt; {<br/>  return moment(`${month}-${year}`, 'MM-YYYY').daysInMonth();<br/>}</span><span id="34c8" class="mh mi in mc b gy mn mk l ml mm">console.log(getDaysInMonth(2, 2019))</span></pre><p id="d749" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">哒哒！挑战解决。该函数现在可以接受月份和年份作为其参数，并正确地确定特定年份的月份<em class="lt">中的天数。</em></p></div><div class="ab cl ka kb hr kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="ig ih ii ij ik"><p id="ad55" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">挑战 2:我如何知道给定月份的第一天是星期几？</p><p id="e2a7" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">这个挑战相对来说比较简单，所以我不会在这上面花太多时间。然而，让我们花些时间来弄清楚为什么我们需要这些信息。如果您见过 Javascript 中的大多数日期对象，您会看到类似这样的内容:</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="8379" class="mh mi in mc b gy mj mk l ml mm">new Date() // 2020-07-07T05:00:00:000Z</span></pre><p id="2e25" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">有两种方法可以做到这一点。首先，让我们看看普通的 Javascript 方式:</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="4297" class="mh mi in mc b gy mj mk l ml mm">const getFirstWeekdayOfMonth = (month, year) =&gt; {<br/>  return new Date(year, month, 1).getDay()<br/>}</span><span id="0639" class="mh mi in mc b gy mn mk l ml mm">// Note, the month and result is 0-indexed<br/>console.log(getFirstWeekdayOfMonth(0, 2020))</span></pre><p id="775d" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">月份被表示为等于一月的<code class="fe lz ma mb mc b">0</code>，因此 2020 年一月的第一个工作日是星期三，其索引在<code class="fe lz ma mb mc b">3</code>。如果你对索引感到困惑，<code class="fe lz ma mb mc b">[0, 1, 2, 3, 4, 5, 6] = Sunday — Saturday</code>。解决方案很简单，并且在很大程度上是可行的，但是处理日期是一件痛苦的事情，这里那里的一些警告会带来一些挑战。不过，知道这一点还是很好的，所以如果你感兴趣，可以学习更多关于<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" rel="noopener ugc nofollow" target="_blank"> Javascript 日期</a>的知识。</p><p id="e084" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">现在，让我们利用这个机会做同样的事情！</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="1862" class="mh mi in mc b gy mj mk l ml mm">const getFirstWeekdayOfMonth = (month, year) =&gt; {<br/>  return moment(<br/>    `${month}-${year}`, <br/>    'MM-YYYY'<br/>  ).startOf('month').weekday()<br/>}</span><span id="5dee" class="mh mi in mc b gy mn mk l ml mm">// Note, since we use MomentJs's formatting, we do not index the month. This is getting the first weekday of the month for January 2020. Result is 0-indexed<br/>console.log(getFirstWeekdayOfMonth(1, 2020))</span></pre><p id="bb2a" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">简单，结果与<code class="fe lz ma mb mc b">3!</code>相同</p></div><div class="ab cl ka kb hr kc" role="separator"><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf kg"/><span class="kd bw bk ke kf"/></div><div class="ig ih ii ij ik"><p id="33ee" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated"><strong class="kj io">挑战 3:我如何获得前几个月/后几个月的溢出日期？</strong></p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/2879d52e7a713f20a108ea485d155afc.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*BJchIMGOR95wmcCTcs9_wg.png"/></div></figure><p id="3a8a" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">最后一个挑战是计算出我们需要在前几个月和后几个月中显示多少天。看这张成品组件的图片，我们需要灰色的日期信息。</p><p id="538c" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">但在我们开始之前，让我们做一些快速逻辑。</p><p id="60fb" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">我们知道一个月中可能有 28-31 天。一周有 7 天。假设一个月的第一天可以是任何给定的工作日，我们想知道给定的一个月可以是几周的一部分。看看上面的图片，我们知道 2020 年 7 月将在 5 周之后到来。但是，等等…如果这个月的第一天是星期六呢？</p><p id="6088" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">如果一个月的第一天是星期六，那么一个月可以是 6 周的一部分。假设一个月最多有 31 天，那么一个月最多有 6 周。这是考虑到在我们的有生之年不会出现新的日期约定。当开发人员需要开始处理跨多个星球的日期时，我希望我不在身边！</p><p id="eebd" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">因为我们知道 6 周是任何给定月份可以包含的最大周数，假设我们的日历需要显示总共 42 个日期(7 * 6 = 42)。</p><p id="db3a" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">现在，让我们算出上个月的溢出日期。为此，我们需要使用上面创建的函数知道当前月份和第一个工作日。首先，让我们在使用 MomentJs 构造日期之后，将第一个月添加到一个数组中。</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="c5d9" class="mh mi in mc b gy mj mk l ml mm">const getDatesInMonthDisplay = (month, year) =&gt; {<br/>  const daysInMonth = getDaysInMonth(month, year);<br/>  const firstWeekday = getFirstWeekdayOfMonth(month, year);<br/>  const result = [];</span><span id="2fb8" class="mh mi in mc b gy mn mk l ml mm">  for (let i = 1; i &lt;= daysInMonth; i++) {<br/>    result.push(<br/>      moment(`${month}-${i}-${year}`, 'MM-DD-YYYY').toDate()<br/>    )<br/>  }</span><span id="40d1" class="mh mi in mc b gy mn mk l ml mm">  return result;<br/>}</span><span id="a210" class="mh mi in mc b gy mn mk l ml mm">// July 2020</span><span id="23ed" class="mh mi in mc b gy mn mk l ml mm">// Note, since we use MomentJs's formatting, we do not index the month. This is getting the first weekday of the month for January 2020. Result is 0-indexed</span><span id="73a1" class="mh mi in mc b gy mn mk l ml mm">console.log(getDatesInMonthDisplay(7, 2020))</span></pre><p id="5e61" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">结果应该由表示 2020 年 7 月的每一天的 date 对象数组组成。</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="b13b" class="mh mi in mc b gy mj mk l ml mm">[ 2020-07-01T07:00:00.000Z,<br/>  2020-07-02T07:00:00.000Z,<br/>  2020-07-03T07:00:00.000Z,<br/>  2020-07-04T07:00:00.000Z,<br/>  2020-07-05T07:00:00.000Z,<br/>  ...<br/>]</span></pre><p id="5cef" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">看一下<code class="fe lz ma mb mc b">firstWeekday</code>变量，我们可以确定上个月有多少天需要溢出。对于 2020 年 7 月，正如我们上面所确定的，第一个工作日是星期三或指数 3。因此，我们知道我们需要上个月的 3 天才能在月显示开始时完成一整周… [0，1，2…]。</p><p id="1eee" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">首先，让我们添加两个快速助手功能来确定前/后月份和年份！</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="bc0a" class="mh mi in mc b gy mj mk l ml mm">const getPrevMonthYear = (month, year) =&gt; {<br/>  // If it is January... prev month is Dec of the previous year<br/>  if (month === 1) { <br/>    return {<br/>      month: 12,<br/>      year: year - 1<br/>    }<br/>  }</span><span id="6d2e" class="mh mi in mc b gy mn mk l ml mm">  // Otherwise, same year, but month - 1<br/>  return {<br/>    month: month - 1,<br/>    year<br/>  }<br/>}</span><span id="4f24" class="mh mi in mc b gy mn mk l ml mm">const getNextMonthYear = (month, year) =&gt; {<br/>  // If it is January... prev month is Dec of the previous year<br/>  if (month === 1) { <br/>    return {<br/>      month: month + 1,<br/>      year<br/>    }<br/>  }</span><span id="9847" class="mh mi in mc b gy mn mk l ml mm">// Otherwise, same year, but month - 1<br/>  return {<br/>    month: 12,<br/>    year: year + 1<br/>  }<br/>}</span></pre><p id="624b" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">现在，使用助手功能…</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="d2ae" class="mh mi in mc b gy mj mk l ml mm">const getDatesInMonthDisplay = (month, year) =&gt; {<br/>  const daysInMonth = getDaysInMonth(month, year);<br/>  const firstWeekday = getFirstWeekdayOfMonth(month, year);<br/>  const result = [];</span><span id="dfd9" class="mh mi in mc b gy mn mk l ml mm">  const prev = getPrevMonthYear(month, year);<br/>  const prevDaysInMonth = getDaysInMonth(<br/>    prev.month, <br/>    prev.year<br/>  );</span><span id="bc14" class="mh mi in mc b gy mn mk l ml mm">  // Add prev overflow dates... <br/>  for (let j = firstWeekday - 1; j &gt;= 0; j--) {<br/>    result.push(<br/>      moment(<br/>        `${prev.month}-${prevDaysInMonth - j}-${prev.year}`, <br/>        'MM-DD-YYYY'<br/>      ).toDate()<br/>    )<br/>  }</span><span id="6ae5" class="mh mi in mc b gy mn mk l ml mm">  // Add current month's dates<br/>  for (let i = 1; i &lt;= daysInMonth; i++) {<br/>    result.push(<br/>      moment(`${month}-${i}-${year}`, 'MM-DD-YYYY').toDate()<br/>    )<br/>  }</span><span id="923b" class="mh mi in mc b gy mn mk l ml mm">  return result;<br/>}</span><span id="60b4" class="mh mi in mc b gy mn mk l ml mm">// July 2020</span><span id="a527" class="mh mi in mc b gy mn mk l ml mm">// Note, since we use MomentJs's formatting, we do not index the month. This is getting the first weekday of the month for January 2020. Result is 0-indexed</span><span id="ac55" class="mh mi in mc b gy mn mk l ml mm">console.log(getDatesInMonthDisplay(7, 2020))</span></pre><p id="e898" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">现在，我们应该让数组正确地从上个月的日期开始，直到显示当前活动月份的第一个工作日。让我们用下个月的溢出日期来填满其余的！</p><p id="7dfc" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">使用助手<code class="fe lz ma mb mc b">getNextMonthYear</code> …</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="5f22" class="mh mi in mc b gy mj mk l ml mm">const getDatesInMonthDisplay = (month, year) =&gt; {<br/>  const daysInMonth = getDaysInMonth(month, year);<br/>  const firstWeekday = getFirstWeekdayOfMonth(month, year);<br/>  const result = [];</span><span id="d5f1" class="mh mi in mc b gy mn mk l ml mm">const prev = getPrevMonthYear(month, year);<br/>  const prevDaysInMonth = getDaysInMonth(<br/>    prev.month, <br/>    prev.year<br/>  );</span><span id="7e96" class="mh mi in mc b gy mn mk l ml mm">  // Add prev overflow dates... <br/>  for (let j = firstWeekday - 1; j &gt;= 0; j--) {<br/>    result.push(<br/>      moment(<br/>        `${prev.month}-${prevDaysInMonth - j}-${prev.year}`, <br/>        'MM-DD-YYYY'<br/>      ).toDate()<br/>    )<br/>  }</span><span id="f0d7" class="mh mi in mc b gy mn mk l ml mm">  // Add current month's dates<br/>  for (let i = 1; i &lt;= daysInMonth; i++) {<br/>    result.push(<br/>      moment(`${month}-${i}-${year}`, 'MM-DD-YYYY').toDate()<br/>    )<br/>  }</span><span id="7b2f" class="mh mi in mc b gy mn mk l ml mm">  // Overflow dates for next month to meet 42 days per month display   requirement<br/>  if (result.length &lt; 42) {<br/>    const daysToAdd = 42 - result.length;<br/>    const next = getNextMonthYear(month, year);</span><span id="1647" class="mh mi in mc b gy mn mk l ml mm">    for (let k = 1; k &lt;= daysToAdd; k++) {<br/>      result.push(<br/>        moment(<br/>          `${next.month}-${k}-${next.year}`, <br/>          'MM-DD-YYYY'<br/>        ).toDate()<br/>      )<br/>    }<br/>  }</span><span id="d474" class="mh mi in mc b gy mn mk l ml mm">  return result;<br/>}</span><span id="eb8b" class="mh mi in mc b gy mn mk l ml mm">// July 2020</span><span id="c4fa" class="mh mi in mc b gy mn mk l ml mm">// Note, since we use MomentJs's formatting, we do not index the month. This is getting the first weekday of the month for January 2020. Result is 0-indexed</span><span id="0dab" class="mh mi in mc b gy mn mk l ml mm">console.log(getDatesInMonthDisplay(7, 2020))</span></pre><p id="bcb0" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">还有…维奥拉！我们将日期对象中的总天数传递到日历组件中的月份显示中，包括当前月份以及之前和之后的溢出日期！这个<code class="fe lz ma mb mc b">result.length</code>就是<code class="fe lz ma mb mc b">42</code>确保第一个索引是星期天，最后一个索引是星期六。</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="9ee0" class="mh mi in mc b gy mj mk l ml mm">[ 2020-06-28T07:00:00.000Z,<br/>  2020-06-29T07:00:00.000Z,<br/>  ...,<br/>  2020-08-07T07:00:00.000Z,<br/>  2020-08-08T07:00:00.000Z ]</span></pre><p id="b65d" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">在我们结束之前，让我们添加一些快速信息，以便更容易地确定哪些日期是显示的当前月份的一部分。</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="1e19" class="mh mi in mc b gy mj mk l ml mm">const getDatesInMonthDisplay = (month, year) =&gt; {<br/>  const daysInMonth = getDaysInMonth(month, year);<br/>  const firstWeekday = getFirstWeekdayOfMonth(month, year);<br/>  const result = [];</span><span id="91e8" class="mh mi in mc b gy mn mk l ml mm">const prev = getPrevMonthYear(month, year);<br/>  const prevDaysInMonth = getDaysInMonth(<br/>    prev.month, <br/>    prev.year<br/>  );</span><span id="45b0" class="mh mi in mc b gy mn mk l ml mm">  // Add prev overflow dates... <br/>  for (let j = firstWeekday - 1; j &gt;= 0; j--) {<br/>    result.push({<br/>      date: moment(<br/>        `${prev.month}-${prevDaysInMonth - j}-${prev.year}`, <br/>        'MM-DD-YYYY'<br/>      ).toDate(),<br/>      currentMonth: false<br/>    })<br/>  }</span><span id="5387" class="mh mi in mc b gy mn mk l ml mm">  // Add current month's dates<br/>  for (let i = 1; i &lt;= daysInMonth; i++) {<br/>    result.push({<br/>      date:moment(`${month}-${i}-${year}`, 'MM-DD-YYYY').toDate(),<br/>      currentMonth: true<br/>    })<br/>  }</span><span id="d55a" class="mh mi in mc b gy mn mk l ml mm">  // Overflow dates for next month to meet 42 days per month display   requirement<br/>  if (result.length &lt; 42) {<br/>    const daysToAdd = 42 - result.length;<br/>    const next = getNextMonthYear(month, year);</span><span id="8349" class="mh mi in mc b gy mn mk l ml mm">for (let k = 1; k &lt;= daysToAdd; k++) {<br/>      result.push({<br/>        date: moment(<br/>          `${next.month}-${k}-${next.year}`, <br/>          'MM-DD-YYYY'<br/>        ).toDate(),<br/>        currentMonth: false<br/>      })<br/>    }<br/>  }</span><span id="bdc6" class="mh mi in mc b gy mn mk l ml mm">  return result;<br/>}</span><span id="3bd0" class="mh mi in mc b gy mn mk l ml mm">// July 2020</span><span id="1b8c" class="mh mi in mc b gy mn mk l ml mm">// Note, since we use MomentJs's formatting, we do not index the month. This is getting the first weekday of the month for January 2020. Result is 0-indexed</span><span id="c202" class="mh mi in mc b gy mn mk l ml mm">console.log(getDatesInMonthDisplay(7, 2020))</span></pre><p id="5312" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">当我们把它传递给组件时，像这样的小细节会使它变得更容易，它们比你想象的更有帮助。这是一个新结果的例子。</p><pre class="lg lh li lj gt md mc me mf aw mg bi"><span id="d7ff" class="mh mi in mc b gy mj mk l ml mm">[ { date: 2020-06-28T07:00:00.000Z, currentMonth: false },<br/>  { date: 2020-06-29T07:00:00.000Z, currentMonth: false },<br/>  { date: 2020-06-30T07:00:00.000Z, currentMonth: false },<br/>  { date: 2020-07-01T07:00:00.000Z, currentMonth: true },<br/>  ...,<br/>  { date: 2020-08-07T07:00:00.000Z, currentMonth: false },<br/>  { date: 2020-08-08T07:00:00.000Z, currentMonth: false } ]</span></pre><p id="9862" class="pw-post-body-paragraph kh ki in kj b kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le ig bi translated">接下来，在<a class="ae jz" href="https://medium.com/@elbert.bae/creating-a-react-calendar-component-part-2-8992af1426fb" rel="noopener">第 2 部分</a>中，我们将看看 React 的渲染逻辑，使用这个函数来构造为我们显示的日期。</p></div></div>    
</body>
</html>