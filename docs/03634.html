<html>
<head>
<title>Building friendliness into Backend Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将友好融入后端服务</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/building-friendliness-into-apis-a776adb2ab21?source=collection_archive---------3-----------------------#2020-11-27">https://blog.devgenius.io/building-friendliness-into-apis-a776adb2ab21?source=collection_archive---------3-----------------------#2020-11-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="7789" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使后端 API 服务易于使用和工作！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7e2d3b36ca1d796059a644a88eac4e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OowNi-f-V01I9YZGwpFWYg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">杰斯·贝利在<a class="ae ky" href="https://unsplash.com/s/photos/blog?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="cda4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">是什么让后端服务(以 ReSTful APIs 的形式公开功能)变得有趣？不仅仅是为服务工作的开发人员，也为使用它的每个人，包括但不限于使用这些 API 的开发人员。我认为这个问题反过来更有价值:是什么让后端服务成为一场噩梦？什么感觉像是你在代码中的每一点都在与服务作斗争？</p><p id="27ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇文章中，我想利用我构建 API 服务的经验，谈谈我在构建后端服务时喜欢考虑的一些问题。其中一些可以由框架本身提供，而另一些可能是值得构建的功能！</p><h2 id="54b3" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">一致的 API</h2><p id="5593" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">一致的 API 命名，包括所有与 API 相关的东西:路径、请求、响应和头！这使得使用 API 更加容易，并且为所有新的 API 设置了一个很好的一致模式。使用这个 API 的团队将会看到一个更加可预测的模式，使得使用 API 变得更加容易。</p><h2 id="013d" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">一致的错误结构</h2><p id="7913" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">我专门用了一整节来讨论错误响应，因为这可能是一个领域，我希望更多的 API 优先考虑一致性！很难使用不能为所有 API 传回一致错误响应的服务。根据特定的错误，错误响应中的某些字段可能不存在或存在，但是在所有结构中具有相同的字段使得使用这些 API 变得非常容易，因为 API 的消费者可以将一个中心位置专用于处理错误，而不是必须处理 API 特定的错误。类似地，构建这些服务的开发人员可以在全局级别创建和使用错误处理，而不是让不同的错误响应来自后端服务的不同部分。</p><h2 id="fe14" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">记录</h2><p id="5f5b" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">日志是任何软件应用程序的核心。后端服务也不例外！确定所有需要记录日志的位置并选择正确的日志级别非常重要，这样可以在 Splunk 等工具中轻松读取日志(与调试日志等相比，更容易过滤所有错误级别的日志)。按照这些思路，更重要的是确保记录的内容不包含任何类型的敏感信息。这包括(但不限于)个人身份信息，也称为 PII、API 密钥、认证凭证等。确保这些值没有以纯文本的形式记录是非常重要的，因为这是一个很容易陷入的陷阱，可能会带来不受欢迎的后果。</p><h2 id="3ca5" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">描摹</h2><p id="f7d0" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">当出现问题时，更常见的情况是，了解请求的整个过程是有帮助的:它来自哪里，进入了什么，请求是什么时候收到的，后端服务做了什么来处理该请求，调用了什么其他 API 服务(如果有的话)等等。从收到请求到发回请求全程跟踪请求的能力有助于跟踪请求处理和调试。</p><h2 id="cee0" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">支持秘密</h2><p id="3f63" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">您的应用程序至少需要一个秘密，除非您正在构建一个“Hello World”应用程序。当我说秘密的时候，我指的是不应该暴露给整个世界的任何敏感的东西，任何你永远不会签入源代码控制的东西。API 密钥、访问其他服务/应用的秘密值、签名密钥、到期时间、用户名/密码凭证等。构建后端服务时，确保应用程序或应用程序和主机提供商(如果您的应用程序将部署到互联网上)对秘密有某种支持是很重要的。这包括能够以只有授权人员才能管理这些机密的方式托管和存储机密。一些平台更进一步，还提供了定期轮换秘密的能力。这是非常强大的，因为这是你的后台服务，而不是链条中最薄弱的一环。值得注意的是，当我们谈到秘密的时候，永远不要将你的秘密提交给源代码控制。如果发生这种情况，有工具可以恢复这些提交，并将其从源代码控制中删除，但在某些情况下，重新生成该秘密可能更容易，使旧的秘密无效。</p><h2 id="bea1" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">支持 API 文档</h2><p id="d7ec" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">文档是每个使用后端服务的人和世界其他地方之间的桥梁语言。当选择一个框架来构建您的服务时，或者当您正在构建您的服务时，考虑如何记录所有的 API 是很重要的。任何想要使用您的 API 的团队都应该可以使用它。Swagger hub 是一个非常流行和广泛使用的工具。其他选项包括 Spring Rest 文档，如果您是在 Spring 栈上构建服务的话。如果文档的生成与代码本身紧密相关，这意味着对代码的任何新的更新都会自动更新文档，这将是一个额外的好处，因为它使开发人员不必经常保持代码和文档不变。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><p id="0b07" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">软件解决方案是由人来为人们构建的。确保您的应用程序简单易用，不仅对最终用户，而且对同事也是如此，这对于确保一个可靠的产品大有帮助，如果正确的模式尽早到位，该产品可以成功地迭代。</p></div></div>    
</body>
</html>