<html>
<head>
<title>Ansible : Hello World</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你好，世界</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ansible-hello-world-8d37627758a9?source=collection_archive---------2-----------------------#2021-09-28">https://blog.devgenius.io/ansible-hello-world-8d37627758a9?source=collection_archive---------2-----------------------#2021-09-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="bd67" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><strong class="ak">入门指南</strong></h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/cd5ce478a6a14770ce66fc53ca7e439b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uGvq4a-MTHTF989PUmWlRA.png"/></div></div></figure><p id="8204" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">等级——初级</strong></p><p id="1d4b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> Ansible </strong>是一款软件配置管理工具，用于在不同类型的云托管+传统数据中心上自动化基础设施供应。它基于<strong class="kq io"> ssh 连接</strong>工作，因此不需要任何代理设置。<strong class="kq io">无代理</strong>特性与<strong class="kq io"> yaml </strong>语法的易用性相结合，使其成为开发人员/操作人员社区中的流行语言。</p><p id="2835" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">从<strong class="kq io"> Ansible </strong>常用术语开始阅读的好材料可以在这里找到:<a class="ae lk" href="https://www.digitalocean.com/community/cheatsheets/how-to-use-ansible-cheat-sheet-guide" rel="noopener ugc nofollow" target="_blank">备忘单</a>。我们将在以后的博客中讨论该架构，并与其他可用的自动化工具进行比较。</p><h1 id="74e2" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">我的第一次 Nginx 部署</h1><p id="3dd6" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">下面详细介绍了使用 ansible 在远程服务器上设置 nginx 部署的步骤。在本教程中，我们将使用<em class="mi"> MacOSX </em>作为操作系统。</p><h1 id="26c1" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">先决条件</h1><p id="9cd5" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated"><strong class="kq io"> Python: </strong></p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="d52c" class="mo lm in mk b gy mp mq l mr ms">brew install python3</span></pre><p id="44ea" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">可回答的:</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="f03a" class="mo lm in mk b gy mp mq l mr ms">brew install ansible</span></pre><p id="c66c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">虚拟机:</strong></p><p id="0057" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">公共/私有云上的虚拟机，使用 ssh 私有/公共密钥在端口 22 上进行访问。</p><h1 id="4d48" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">安装步骤:</h1><p id="a715" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">按照步骤，用户可以克隆<a class="ae lk" href="https://github.com/amit894/ansible-examples" rel="noopener ugc nofollow" target="_blank">https://github.com/amit894/ansible-examples</a>。我们将在代码库中创建一个类似于<strong class="kq io"> <em class="mi"> nginx-vm </em> </strong>的剧本。</p><h2 id="cefe" class="mo lm in bd ln mt mu dn lr mv mw dp lv kx mx my lx lb mz na lz lf nb nc mb nd bi translated"><strong class="ak"> i)更新主机文件</strong></h2><p id="5308" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">在根目录下，创建一个名为<strong class="kq io"> hosts </strong>的清单文件</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="57fb" class="mo lm in mk b gy mp mq l mr ms">[server-name]<br/>&lt;vm-ip&gt; ansible_user=&lt;ssh_user_name&gt; ansible_ssh_private_key_file=&lt;location of_private_key&gt;</span></pre><h2 id="a936" class="mo lm in bd ln mt mu dn lr mv mw dp lv kx mx my lx lb mz na lz lf nb nc mb nd bi translated"><strong class="ak"> ii)创建剧本/角色文件:</strong></h2><p id="a39b" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">使用命令添加角色</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="dee3" class="mo lm in mk b gy mp mq l mr ms">ansible-galaxy init &lt;role-name&gt;</span></pre><p id="4337" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">角色可以在剧本文件和宿主文件中被引用，如下所示:</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="c071" class="mo lm in mk b gy mp mq l mr ms">- name: &lt;role-name&gt;<br/>  hosts: &lt;server-name&gt;<br/>  roles:<br/>    - role: &lt;role-folder-location&gt;</span></pre><h2 id="b6c3" class="mo lm in bd ln mt mu dn lr mv mw dp lv kx mx my lx lb mz na lz lf nb nc mb nd bi translated"><strong class="ak"> iii)添加任务:</strong></h2><p id="c029" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">每个可承担的角色可以分为四个基本的设置任务，用于模块的逻辑分离:</p><p id="6c31" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">先决条件</strong>:更新虚拟机的 yum/apt-get 存储库。<br/> <strong class="kq io">安装</strong>:包括为角色安装二进制文件的步骤。<br/> <strong class="kq io">配置:</strong>包括配置设置所需路径/目录的步骤。<br/> <strong class="kq io">服务</strong>:包括设置服务的步骤，如<em class="mi">服务重启、配置测试</em>等。</p><p id="be66" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">可以为 nginx 安装角色中的任务克隆存储库中的文件。所有这些任务都可以在 main.yml 中引用，如下所示。</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="83a0" class="mo lm in mk b gy mp mq l mr ms">---<br/># tasks file for nginx<br/>- import_tasks: prereqs.yml<br/>- import_tasks: install.yml<br/>- import_tasks: configure.yml<br/>- import_tasks: service.yml</span></pre><h2 id="d388" class="mo lm in bd ln mt mu dn lr mv mw dp lv kx mx my lx lb mz na lz lf nb nc mb nd bi translated"><strong class="ak"> iv)配置模板文件:</strong></h2><p id="0469" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">任何需要模板化的附加文件都可以放在<strong class="kq io"> <em class="mi">角色/模板</em> </strong>文件夹中。对于 nginx 的安装，其中一些文件可以是 index.html 的<strong class="kq io"> <em class="mi">、nginx.conf 的</em> </strong> <em class="mi"> </em>等。</p><p id="7519" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">可以为 nginx 安装角色中的任务克隆存储库中的文件</p><h2 id="1394" class="mo lm in bd ln mt mu dn lr mv mw dp lv kx mx my lx lb mz na lz lf nb nc mb nd bi translated">测试你的代码:</h2><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="c666" class="mo lm in mk b gy mp mq l mr ms">ansible-playbook ./playbooks/&lt;playbook-name&gt; -i hosts</span></pre><h1 id="82fd" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">反馈:</h1><p id="e52c" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">我们正试图为 devops 领域的初学者创建基本内容。因此，请将您的反馈发送至以下任一邮箱:</p><p id="557b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">I)媒体中的评论<br/> ii) Github 知识库中的问题<br/> iii)发送电子邮件至<strong class="kq io"><em class="mi">Amit[dot]894【at】Gmail[dot]com</em></strong></p></div></div>    
</body>
</html>