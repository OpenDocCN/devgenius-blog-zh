<html>
<head>
<title>Solving Common Vue Problems — Loading Images, Events, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解决常见的Vue问题—加载图像、事件等</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/solving-common-vue-problems-reloading-components-and-more-c633e204a7b0?source=collection_archive---------5-----------------------#2020-06-25">https://blog.devgenius.io/solving-common-vue-problems-reloading-components-and-more-c633e204a7b0?source=collection_archive---------5-----------------------#2020-06-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4e508a7d523d531c037d1fc70b6e57cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NbH_tCAs1RX4q384"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@mbenna?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迈克·本纳</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="9bfc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js让开发前端应用变得简单。然而，我们仍有可能遇到问题。</p><p id="0df2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看一些常见的问题，并看看如何解决它们。</p><h1 id="27b2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">从孙组件向祖组件发出事件</h1><p id="34e2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过从孙子调用<code class="fe me mf mg mh b">this.$emit</code>来从孙子向祖父母发出事件。</p><p id="a3b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后它的父节点可以将它传递给模板中带有<code class="fe me mf mg mh b">v-on="$listeners"</code>代码的祖父节点。</p><p id="0874" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后祖父母可以用通常的<code class="fe me mf mg mh b">v-on</code>或<code class="fe me mf mg mh b">@</code>监听器代码来监听它。</p><p id="7741" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4dc0" class="mq lc iq mh b gy mr ms l mt mu">Vue.component('grand-child', {<br/>  template: '&lt;button @click="emitEvent"&gt;emit value&lt;/button&gt;',<br/>  methods: {<br/>    emitEvent() { this.$emit('event', 'value') }<br/>  }<br/>})</span></pre><p id="b101" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当按钮被点击时，我们发出一个<code class="fe me mf mg mh b">event</code>事件。</p><p id="9dec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">child</code>组件中，我们编写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9d3a" class="mq lc iq mh b gy mr ms l mt mu">Vue.component('child', {<br/>  template: '&lt;grand-child v-on="$listeners"&gt;&lt;/grand-child&gt;'<br/>})</span></pre><p id="2d38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">child</code>中引用了<code class="fe me mf mg mh b">grand-child</code>组件。为了将由<code class="fe me mf mg mh b">grand-child</code>发出的事件传递给祖父组件，我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4fb2" class="mq lc iq mh b gy mr ms l mt mu">v-on="$listeners"</span></pre><p id="068c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来冒充他们。</p><p id="7151" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，为了创建祖父母，我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cf42" class="mq lc iq mh b gy mr ms l mt mu">Vue.component('parent', {<br/>  template: '&lt;child @event="value = $event"&gt;&lt;/child&gt;',<br/>  data(){<br/>    return {<br/>      value: undefined<br/>    }<br/>  },<br/>})</span></pre><p id="f04d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">value</code>将被分配给<code class="fe me mf mg mh b">'value'</code>，因为那是我们从<code class="fe me mf mg mh b">grand-child</code>传入的。</p><p id="ff3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">$event</code>具有在<code class="fe me mf mg mh b">$emit</code>的第二个参数中随事件发出的值。</p><h1 id="df17" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">更新数组</h1><p id="1bc5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了更新数组，我们可以通过编写以下代码来调用<code class="fe me mf mg mh b">Vue.set</code>方法:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="75cf" class="mq lc iq mh b gy mr ms l mt mu">Vue.set(object, prop, value)</span></pre><p id="f3b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">object</code>是任何对象，包括数组。</p><p id="323d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">prop</code>是属性值，也可以是数组索引。</p><p id="7b93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">value</code>是我们要用来更新对象属性或数组条目的值。</p><p id="d435" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在组件中，我们也可以使用带有相同参数的<code class="fe me mf mg mh b">this.$set</code>方法。</p><p id="2a95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="749b" class="mq lc iq mh b gy mr ms l mt mu">this.$set(object, prop, val)</span></pre><p id="bd3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们调用以下数组方法时，需要调用<code class="fe me mf mg mh b">Vue.set</code>或<code class="fe me mf mg mh b">this.$set</code>:</p><ul class=""><li id="5584" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated"><code class="fe me mf mg mh b">push()</code></li><li id="920f" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">pop()</code></li><li id="98d0" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">shift()</code></li><li id="f866" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">unshift()</code></li><li id="37a5" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">splice()</code></li><li id="a1e7" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">sort()</code></li><li id="d6c3" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe me mf mg mh b">reverse()</code></li></ul><p id="e4f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue无法跟踪这些方法的变化。</p><p id="fbca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想从一个对象或数组中删除一个条目，我们使用<code class="fe me mf mg mh b">Vue.delete</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3888" class="mq lc iq mh b gy mr ms l mt mu">Vue.delete(obj, 'foo')</span></pre><p id="f50a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们移除<code class="fe me mf mg mh b">obj.foo</code>属性。</p><h1 id="4378" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将参数传递给计算的属性</h1><p id="85f1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们的计算属性函数返回一个函数，我们可以将值传递给计算属性。</p><p id="d2f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6153" class="mq lc iq mh b gy mr ms l mt mu">computed: {<br/>   salutation() {<br/>      return greeting =&gt; `${greeting} ${this.firstName} ${this.lastName}`<br/>   }<br/>}</span></pre><p id="b00c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有返回函数的<code class="fe me mf mg mh b">salutation</code>计算属性。</p><p id="f4d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过调用它来引用它，而不仅仅是访问属性值。</p><p id="bd55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9ff6" class="mq lc iq mh b gy mr ms l mt mu">this.salutation('hi');</span></pre><p id="418b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回我们想要的字符串。</p><p id="9062" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以只用一种方法。</p><p id="db67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="074c" class="mq lc iq mh b gy mr ms l mt mu">methods: {<br/>  greet(greeting){<br/>    return `${greeting} ${this.firstName} ${this.lastName}`<br/>  }<br/>}</span></pre><h1 id="c47f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在单个文件组件中使用图像</h1><p id="595c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要在单个文件组件中使用图像，我们可以导入或需要它。</p><p id="99e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ad3c" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;img :src="image" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="3a0e" class="mq lc iq mh b gy nj ms l mt mu">&lt;script&gt;<br/>import image from "./assets/pic.png"</span><span id="79e2" class="mq lc iq mh b gy nj ms l mt mu">export default {<br/>  data() {<br/>    return {<br/>      image: image<br/>    }<br/> }<br/>}<br/>&lt;/script&gt;</span></pre><p id="d8b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="09dd" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;img :src="require('./assets/pic.png')" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="8e3b" class="mq lc iq mh b gy nj ms l mt mu">&lt;script&gt;<br/>export default {<br/>}<br/>&lt;/script&gt;</span></pre><p id="09a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">import</code>或<code class="fe me mf mg mh b">require</code>返回的对象传入<code class="fe me mf mg mh b">src</code>道具。</p><h1 id="be5a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">定义全局数据</h1><p id="8304" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们在传递给<code class="fe me mf mg mh b">Vue</code>构造函数的对象中放入一个<code class="fe me mf mg mh b">data</code>属性，我们就可以在Vue应用程序中定义全局数据。</p><p id="986e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d5bf" class="mq lc iq mh b gy mr ms l mt mu">new Vue({<br/>  data:{<br/>    shared<br/>  }<br/>})</span></pre><p id="30f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">shared</code>是我们要做全局的数据。</p><p id="826a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">data</code>是公开数据的属性。</p><h1 id="7bc4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">模板应该只包含一个根元素'错误</h1><p id="a9ae" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vue组件只能包含一个根元素。</p><p id="579d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们必须把所有东西都包装在根元素中。</p><h1 id="d533" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">404重新加载应用程序时</h1><p id="80c5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们打开了<code class="fe me mf mg mh b">html5</code>模式，那么我们必须确保所有路径都指向我们的Vue应用，而不是服务器上的某个文件。</p><p id="b5d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为在URL中没有区别来指示我们想要去的地方。</p><p id="9390" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在URL前有一个散列，那么我们就不会有这个问题。</p><p id="bf1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不想在我们的网址散列，那么我们必须配置我们的服务器重定向所有的网址到Vue应用程序。</p><p id="6c80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2101" class="mq lc iq mh b gy mr ms l mt mu">&lt;ifModule mod_rewrite.c&gt;<br/>    RewriteEngine On<br/>  RewriteBase /<br/>  RewriteRule ^index\.html$ - [L]<br/>  RewriteCond %{REQUEST_FILENAME} !-f<br/>  RewriteCond %{REQUEST_FILENAME} !-d<br/>  RewriteRule . /index.html [L]<br/>&lt;/ifModule&gt;</span></pre><p id="6b42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用以下内容将所有URL重定向到<code class="fe me mf mg mh b">index.html</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f3d8" class="mq lc iq mh b gy mr ms l mt mu">RewriteRule ^index\.html$ - [L]</span></pre><p id="0a39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是Apache服务器的配置。它应该是<code class="fe me mf mg mh b">.htaccess</code>文件的一部分。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/e10ceddc4d19667b750cf82dadfe426b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QSHdY8qhvLZbUvsR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@marliesebrandsma?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Marliese Streefland </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="3a74" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="4c9a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">v-on='$listener'</code>从孙辈传给祖辈。</p><p id="3253" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，如果我们对URL使用HTML5模式，我们需要重定向到<code class="fe me mf mg mh b">index.html</code>。</p><p id="8812" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">图像可以导入或需要。</p></div></div>    
</body>
</html>