<html>
<head>
<title>Did u know a PILLOW can do much more than just give you a sound sleep?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你知道枕头不仅仅能让你睡个好觉吗？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/did-u-know-a-pillow-can-do-much-more-than-just-give-you-a-sound-sleep-932bcc80952c?source=collection_archive---------24-----------------------#2020-06-09">https://blog.devgenius.io/did-u-know-a-pillow-can-do-much-more-than-just-give-you-a-sound-sleep-932bcc80952c?source=collection_archive---------24-----------------------#2020-06-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/f267d9df1780b630622bac17ed954101.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*It3iZFiqZiKLVXyMVVkrVw.jpeg"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi jr"><img src="../Images/5e5e64e9b7535d61a25401b7ebfbc5e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/1*Id3HYavsBgoFTI69RDTDMg.png"/></div></figure><p id="fd21" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi ku translated">在软件测试的世界里，我们的目标是捕捉错误。我们编写测试，自动化测试——我们捕捉错误。你的测试发现的错误越多，人们对你的测试就越有信心。人们执行不同类型的测试——UI测试、API测试、性能测试、安全测试等等。我们经常使用“回归”这个术语。人们经常问QA团队——你的回归套件有多强？".嗯，这是个很难回答的问题。作为一名QA，我们编写手动测试用例，确定它们执行的优先级，然后根据优先级自动化它们。在这个过程中，我们有时会忽略UI/UX组件——网页中出现的文本、不太重要的按钮、超链接、由于CSS选择器的任何改变而导致的组件错位等等。那么我们如何避免呢？编写多个测试来验证页面中每个web元素的存在？或者编写一个单独的测试来验证每个UI组件，这当然是不可行的。然而，错过了页面中错综复杂的细节？为了解决这个问题，出现了一种叫做“视觉回归”的东西</p><figure class="js jt ju jv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ld"><img src="../Images/1627732e84e0918733a23398de91f97d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g6ymUULPxcWETzGbnncvLw.png"/></div></div><figcaption class="li lj gj gh gi lk ll bd b be z dk translated">通过像素查找网页中的差异</figcaption></figure><ul class=""><li id="53e5" class="lm ln in jy b jz ka kd ke kh lo kl lp kp lq kt lr ls lt lu bi translated"><em class="lv">首先也是最重要的需要是理解能够服务于你的目的的工具(也许是开源的？)而不偏离您现有的自动化框架。因为我们的框架是Python中的Selenium，所以Pillow是最合适的。</em></li><li id="9113" class="lm ln in jy b jz lw kd lx kh ly kl lz kp ma kt lr ls lt lu bi translated"><em class="lv">其次，对于任何视觉回归工具，你都需要有基线图像来进行比较。对于我们的执行，我们将生产图像作为我们的基线图像。</em></li><li id="1dfd" class="lm ln in jy b jz lw kd lx kh ly kl lz kp ma kt lr ls lt lu bi translated">第三，确定您到底想要在哪个环境中执行这些测试。对于我们的执行，我们采用了一个低于生产的环境。因此，我们在这个环境中运行测试，并将从这个环境中捕获的图像与从生产环境中捕获的图像进行比较</li><li id="7e91" class="lm ln in jy b jz lw kd lx kh ly kl lz kp ma kt lr ls lt lu bi translated">第四，了解你想在哪里执行。对于我们的执行，我们使用BrowserStack，因为我们已经有一个为其配置的Jenkins作业(阅读: <a class="ae mb" href="https://medium.com/@sanjukta.hazarika/how-to-configure-a-jenkins-job-to-run-selenium-python-tests-using-browserstack-73c2b933be85" rel="noopener"> <em class="lv">此处为</em> </a> <em class="lv"> ) </em></li></ul><h2 id="76cd" class="mc md in bd me mf mg dn mh mi mj dp mk kh ml mm mn kl mo mp mq kp mr ms mt mu bi translated"><strong class="ak">使用枕头我们获得了什么？</strong></h2><ul class=""><li id="4cdf" class="lm ln in jy b jz mv kd mw kh mx kl my kp mz kt lr ls lt lu bi translated">首先，我们在生产中捕获图像的截图，并将其作为基础图像<em class="lv">【我们在Jenkins pipeline中的一个阶段捕获了它，并复制了工件，然后将它们传递给下一个阶段；下面添加了相同的声明性语法] </em></li><li id="c443" class="lm ln in jy b jz lw kd lx kh ly kl lz kp ma kt lr ls lt lu bi translated">然后，我们在我们想要测试的较低环境中捕获图像的屏幕截图，然后将这两个图像作为参数进行比较<em class="lv">[我们在Jenkins pipeline的另一个阶段捕获了这一点。将从上一步复制的图像(构建工件)与此阶段生成的图像进行比较] </em></li><li id="e5c2" class="lm ln in jy b jz lw kd lx kh ly kl lz kp ma kt lr ls lt lu bi translated">使用Pillow的图像模块(image.getpixel ),我们得到两幅图像的像素</li><li id="d2a7" class="lm ln in jy b jz lw kd lx kh ly kl lz kp ma kt lr ls lt lu bi translated">使用Pillow的ImageDraw模块，如果两个图像之间有任何差异，我们就画出正方形。</li><li id="70d3" class="lm ln in jy b jz lw kd lx kh ly kl lz kp ma kt lr ls lt lu bi translated">最后，如果有任何差异，我们保存图像结果，并在差异周围加上彩色方框[管道执行在此之后完成，并生成结果-，基准图像、测试图像和结果图像(如果有任何差异)被保存为构建工件。因此，如果你有一个结果图像和其他截图，你就知道你的测试失败了。]</li></ul><blockquote class="na nb nc"><p id="df72" class="jw jx lv jy b jz ka kb kc kd ke kf kg nd ki kj kk ne km kn ko nf kq kr ks kt ig bi translated">在视觉回归中遇到一类假阳性是常见的问题。当有预测性的UI变化要被部署时，视觉回归测试可能会失败，因为随着新UI的引入，你的基础必须改变。</p></blockquote><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="0eca" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><strong class="jy io"> Jenkins声明性管道语法，用于在BrowserStack中从Jenkins管道运行我们的测试。</strong></p><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><h2 id="42cf" class="mc md in bd me mf mg dn mh mi mj dp mk kh ml mm mn kl mo mp mq kp mr ms mt mu bi translated"><strong class="ak">为什么视觉回归应该是你的交付管道的重要组成部分？</strong></h2><p id="cce9" class="pw-post-body-paragraph jw jx in jy b jz mv kb kc kd mw kf kg kh ni kj kk kl nj kn ko kp nk kr ks kt ig bi translated">自动化的可视化回归构建带来了好处，比如减少手工的重复测试工作，并且在更高质量的发布中增加灵活性和信心。</p><p id="0b88" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">自动化的视觉回归构建旨在验证正确的数据和内容是否显示在应用程序的前端，它还验证用户界面和整个UI上每个视觉元素的布局和外观。</p><p id="4534" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">自动化的可视化回归构建总是可以成为你的功能回归套件的助推器。</p><p id="c20c" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">在我担任QA期间，我遇到了很多“关注细节”这个术语。因此，有了自动化的可视化回归构建，您可以始终关注交付的细节方面。</p><p id="f8f0" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">说到底，谁不想交付像素完美的产品呢？</p><blockquote class="na nb nc"><p id="9ba2" class="jw jx lv jy b jz ka kb kc kd ke kf kg nd ki kj kk ne km kn ko nf kq kr ks kt ig bi translated">完美是通过缓慢的程度达到的；它需要时间之手。</p><p id="f135" class="jw jx lv jy b jz ka kb kc kd ke kf kg nd ki kj kk ne km kn ko nf kq kr ks kt ig bi translated"><em class="in">——伏尔泰</em></p></blockquote><p id="7892" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">感谢阅读！！！！！</p></div></div>    
</body>
</html>