# 预测心脏病发作——EDA 和 ML、Datapane 和 Python

> 原文：<https://blog.devgenius.io/predicting-heart-attack-eda-ml-datapane-pyth-5b28a992d437?source=collection_archive---------8----------------------->

心脏病发作是一种疾病的俗称，即心肌梗塞，其特征是通过冠状动脉流向心脏肌肉的血液减少，导致组织损伤和随后的组织死亡。在美国大约有 150 万例心脏病发作，冠状动脉疾病导致的死亡是美国和欧洲的主要死亡原因。

早期发现和及时治疗有助于预防死亡，同时早期识别风险并采取其他预防措施，如改变生活方式、治疗共病和药物干预。症状包括胸痛、疲劳、头晕、晕厥、呼吸急促等。

![](img/5209f54fab5290c1e79f9582abcef85a.png)

这个在 [kaggle](https://www.kaggle.com/datasets/rashikrahmanpritom/heart-attack-analysis-prediction-dataset) 上获得的数据集引起了我的兴趣，不仅因为它的流行，还因为心脏病发作有时可能没有症状，导致“无声的心脏病发作”，这在 45%的[病例中可见](https://www.health.harvard.edu/heart-health/the-danger-of-silent-heart-attacks)。使用该历史数据集，我们可以识别与心脏病发作相关的风险，预测在识别处于风险中的人时哪些因素是最重要的，并可能增加反应和怀疑指数，这可能导致冠状动脉疾病引起的死亡率降低。

我将使用数据集来回答以下问题

*   ***在有记录的人群中，患冠心病*** 的频率是多少
*   ***这些变量与冠状动脉疾病*** 有什么关系
*   ***决定冠心病发病率最重要的因素是什么***

**数据介绍:**数据集包含 13 个自变量和一个记录为“输出”的因变量，代表冠状动脉疾病的诊断。

**数据清理:**为了便于理解，更改了列名的缩写。删除了一个重复数据，没有记录丢失的值。我还确保没有异常值和/或格式错误的值。

通过使用这种交互媒介，我提供了数据集、所用术语的定义和数据的描述。

## **在记录的人口中，冠心病的发病率是多少**

## **测量的变量与冠状动脉疾病之间有什么关系**

在这些数据中，记录了两种独立变量:定量变量和分类/定性变量

定量变量取**数值**值，代表某种**度量**。它们可以进一步分为子类:连续的和离散的

分类变量采用**类别**或**标签**值，并将个体放入几个**组**中的一个。

**单变量分析**

1.  大多数患者年龄在 50-60 岁之间。其中年龄为 56 岁的患者数量最多。
2.  大约 68.2% (207 人)是男性患者，31.8% (96 人)是女性患者。
3.  大多数患者有类型值 1 胸痛，这是典型的心绞痛值。
4.  大多数病人的血压都在这个范围内(120-140)。
5.  大多数患者的血清胆固醇水平介于 200-250 之间。
6.  大多数患者的最大心率在这个范围(155-165)之间
7.  大多数患者(48.5%)心电图结果正常

多变量分析

1.  虽然冠状动脉疾病的发生在特定的年龄组中是最高的，但是数据显示在相同的年龄中有更多的患者没有患任何冠状动脉疾病。
2.  较高的静息血压与冠状动脉疾病的发病率有很高的相关性。
3.  高血清胆固醇(200-300)与冠状动脉疾病的发病率密切相关。
4.  较高的最大心率(150-200)对应着较高的冠状动脉疾病可能性
5.  旧峰(运动相对于静息诱发的 ST 段压低)与冠心病发病率呈负相关

## **决定冠状动脉疾病发病率的最重要因素是什么**

为了使用机器学习方法回答这个问题，我们分 3 步转换数据

*   缩放比例
*   测试列车分裂
*   计算预测分数

比例:数据特征的不同比例会对数据集的建模产生不利影响。就错误分类误差和准确率而言，它会导致有偏差的预测结果。因此，有必要在建模之前缩放数据。由于数据还包含定量数据和分类数据，因此将创建分类数据的虚拟数据，以将其转换为模型易于理解的数值

测试序列分割:模型验证的一种方法，其中给模型一个小的随机数据子集(在本例中为总数的 0.3)来观察模型的表现

计算预测分数:分数帮助我们清楚地看到哪些模型使用被调用的数据准确地做出了最好的预测。

随机森林分类器得分最高，将用于进一步计算

**混淆矩阵**

混淆矩阵可视化并总结了分类算法的性能(在本例中为随机森林分类器)。例如，在这种情况下，随机森林分类器预测了 46 次心脏病发作的高风险，其中 37 次预测正确(真阳性)，5 次预测不准确(假阳性)。

数据集中确定的各种特征可以根据重要性进行分类，以预测心脏病发作的可能性，如表中所示，并在图表中显示

您可以编写一个 SQL 查询来过滤数据！

有了从这一分析中得出的见解，我们可以用下面的**战略建议**来回答“那又怎样”的问题

*   *男性患心脏病的风险更高，因此医疗筛查应该针对(而不是限制)这一性别，以便更容易地选择病例。*
*   *在大多数情况下，胸痛是第一个警告信号，应该让更多的患者意识到在看医生时提及胸痛的必要性，即使他们一天中的每个小时都不觉得疼痛。*
*   *护理人员和老人院的工作人员应接受培训，学习如何每天在家检查心率和血压。结果也可以被记录下来，并在医生预约时展示。该数据可用于给出个人心率和血压的精确表示。*
*   *静息心电图，尤其是根据 Estes 标准代表可能或明确左心室肥大的值 2 也是高风险，因此建议进行年度心电图检查以检测任何心电图异常，尤其是当存在其他风险因素时。*
*   *空腹血糖升高也是一个确定的风险，因此建议采取措施控制空腹血糖，如定期锻炼、治疗糖尿病(如果存在)和限制糖类饮食。*

**附注**:虽然可视化中包含了源代码，但是这个项目的整个编程方面都可以在 [kaggle](https://www.kaggle.com/code/sanmioduntan/predicting-heart-attack-occurrence) 和 [Github](https://github.com/Shespeaks-data/Predicting-Heart-attack--EDA-ML) 上获得。可视化是在 python 上完成的，并使用 [datapane](https://datapane.com) 进行交互，我在大约 2 周的时间里学会了如何广泛使用它，它非常令人满意，能够呈现你可以轻松交互的数据。

感谢您的阅读！！！！！