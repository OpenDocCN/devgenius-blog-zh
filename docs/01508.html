<html>
<head>
<title>GraphQL with golang clean architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有golang clean架构的GraphQL</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/graphql-with-golang-clean-architecture-29e328dae58b?source=collection_archive---------7-----------------------#2020-07-05">https://blog.devgenius.io/graphql-with-golang-clean-architecture-29e328dae58b?source=collection_archive---------7-----------------------#2020-07-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fe39740b7f26b5160eaa5135decd64e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X19YeQPTIsTKb0mrFlcgSQ.png"/></div></div></figure></div><div class="ab cl jv jw hr jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="ig ih ii ij ik"><h2 id="804e" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">干净的建筑</h2><p id="f8ba" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ig bi translated">Clean architecture是一种软件设计哲学，它将设计的元素分成环形层次。干净架构的主要规则是代码依赖只能来自外部层次。内层的代码可能不知道外层的功能。它通常包含交付、用例、存储库。</p><h2 id="e486" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">GraphQL</h2><p id="0359" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ig bi translated">GraphQL是API的一种查询语言，也是一种服务器端运行时，通过使用您为数据定义的类型系统来执行查询。GraphQL不依赖于任何特定的数据库或存储引擎，而是由您现有的代码和数据提供支持。</p><p id="23e8" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">GraphQL服务是通过定义类型和这些类型上的字段，然后为每个类型上的每个字段提供函数来创建的。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><h2 id="5d67" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">我们的目标</h2><p id="ea21" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ig bi translated">在本练习中，我们将在clean architecture中使用go编程语言创建graphql服务器。我们的目标是从我们的服务器获取文章数据，也就是post数据。</p><p id="9908" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">我们的请求主体:</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="7292" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">回应:</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="d159" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated"><strong class="la io">设置GraphQL Clean架构</strong></p><p id="b71e" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">我们的清洁建筑目录</p><pre class="ly lz ma mb gt me mf mg mh aw mi bi"><span id="bfad" class="kc kd in mf b gy mj mk l ml mm">graphql-go-clean<br/>└── src<br/>    ├──graphql<br/>    │  ├── posts<br/>    |  │  ├── usecase<br/>    │  |  ├── resolver<br/>    │  │  ├── serializer<br/>    │  │  ├── repository<br/>    │  │  ├── domain<br/>├──main.go<br/>├──schema.go</span></pre><p id="60e7" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated"><strong class="la io">域</strong></p><p id="0236" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">在结构中创建graphql架构</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="6b88" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated"><strong class="la io">储存库</strong></p><p id="9b63" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">在文件夹存储库中，创建接口以将数据提取到数据库或其他涉及CRUD数据库的操作。在本练习中，我们只创建将文章提取到数据库的接口。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="7b01" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated"><strong class="la io">用例</strong></p><p id="6749" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">在用例中创建接口以获取所有数据文章。在此文件夹中，您可以为您的特定业务规则添加更多逻辑</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="6efe" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated"><strong class="la io">解析器</strong></p><p id="8fb8" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">在这一层，我们为我们查询的字段创建解析器</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="9f29" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated"><strong class="la io">模式</strong></p><p id="7a49" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">这是graphql模式初始化的地方。我们有一个名为Query的方法来处理所有的graphql查询。在新架构初始化中，我们包括了postResolver接口。所以我们可以在查询模式中称之为解析器</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="f2f2" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated"><strong class="la io"> Main.go </strong></p><p id="f1d4" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">在main.go中，我们首先在schema.go文件中初始化graphql模式。然后我们使用GraphQL HTTP处理程序，将处理程序传递给echo WrapHandler函数，然后运行echo服务器。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure><h2 id="49a8" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">测试我们的服务器</strong></h2><p id="762a" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ig bi translated">为了测试我们的服务器，我们可以使用postman或其他graphql工具。<br/>运行服务器并尝试测试graphql查询</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/06cfda4124272c10c6cde27bbd1d0d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FzmZKy2v92kuCl8a-IAkhw.png"/></div></div></figure><h2 id="17d0" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h2><p id="31f0" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li kl lj lk ll kp lm ln lo kt lp lq lr ls ig bi translated">Clean architecture现在是编程中流行的架构，graphQL是构建新API的新概念。我们仍然可以用干净的架构实现graphQL，而不会失去干净架构的基本原则，即每一层都有自己的依赖关系。</p><p id="f85d" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">使用golang clean architecture的graphQL服务器进行更深入的研究。添加更多用例来获取数据。</p><p id="cf02" class="pw-post-body-paragraph ky kz in la b lb lt ld le lf lu lh li kl lv lk ll kp lw ln lo kt lx lq lr ls ig bi translated">你可以在这里看到我的Github的完整代码:</p><div class="mo mp gp gr mq mr"><a href="https://github.com/hardyantz/go-graphql-clean" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd io gy z fp mw fr fs mx fu fw im bi translated">hardyantz/go-graphql-clean</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">在clean架构中使用golang的GraphQL服务器。为hardyantz/go-graphql-clean开发做出贡献，创建一个…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">github.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf jt mr"/></div></div></a></div></div></div>    
</body>
</html>