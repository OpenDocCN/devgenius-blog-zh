<html>
<head>
<title>Socket Programming in C â€” Client</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">C-Client ä¸­çš„å¥—æ¥å­—ç¼–ç¨‹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/socket-programming-in-c-client-4408231f9e65?source=collection_archive---------14-----------------------#2022-12-11">https://blog.devgenius.io/socket-programming-in-c-client-4408231f9e65?source=collection_archive---------14-----------------------#2022-12-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4434e19ca3c409bef0a98206cacd383f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vGUFG2jRrpS8MEryrb0GyA.png"/></div></div></figure><p id="a628" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨å‰é¢çš„<a class="ae kt" href="https://yashpaneliya.medium.com/socket-programming-in-c-server-ca86486f6b49" rel="noopener">éƒ¨åˆ†</a>ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å¥—æ¥å­—åˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡å™¨ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç›¸åŒçš„å¥—æ¥å­—åˆ›å»ºå®¢æˆ·æœºï¼Œè¿™äº›å®¢æˆ·æœºå°†ç®€å•åœ°å‘æœåŠ¡å™¨å‘é€ä¸€äº›å­—ç¬¦ä¸²ï¼Œå¹¶ä»æœåŠ¡å™¨æ¥æ”¶å­—ç¬¦ä¸²ã€‚</p><h1 id="9a97" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—</h1><p id="e639" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">å› ä¸ºæˆ‘ä»¬åœ¨è¿™ä¸ªå®Œæ•´çš„ä¾‹å­ä¸­ä½¿ç”¨äº† TCP å¥—æ¥å­—ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯å¿…é¡»æ‹¥æœ‰ä¸æœåŠ¡å™¨å¥—æ¥å­—ç›¸åŒç±»å‹çš„å¥—æ¥å­—(å³ SOCK_STREAM)ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæ‰€æœ‰å…¶ä»–å‚æ•°ä¹Ÿå°†ä¿æŒä¸å˜ã€‚</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="ca8f" class="mg kv in mc b be mh mi l mj mk">int sockfd;<br/>/* Opening a socket is exactly similar to the server process */<br/>if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)<br/>{<br/>  printf("Unable to create socket\n");<br/>  return 0;<br/>}</span></pre><h1 id="68d4" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">æŒ‡å®šæœåŠ¡å™¨</h1><p id="398a" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">ä¸ºäº†å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ‰˜ç®¡æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£å·æ˜¯å¿…éœ€çš„ã€‚ä¸ºäº†æŒ‡å®šåœ°å€å’Œç«¯å£å·ï¼Œå°†ä½¿ç”¨ sockaddr_in ç±»å‹çš„ç›¸åŒç»“æ„ã€‚<br/>è¿™é‡Œçš„å˜åŒ–æ˜¯ï¼Œä½ éœ€è¦æä¾›æœåŠ¡å™¨çš„ç¡®åˆ‡åœ°å€(ä¸æ˜¯ INADDR_ANY-like server)ï¼Œå¦åˆ™è¯·æ±‚å¯èƒ½ä¼šè½¬åˆ°æŸä¸ªæ²¡æœ‰æˆ‘ä»¬çš„æœåŠ¡å™¨çš„éšæœºåœ°å€ã€‚<br/>å¯¹äºæœ¬ä¾‹ï¼ŒæœåŠ¡å™¨å°†æ‰˜ç®¡åœ¨æœ¬åœ°æœºå™¨ä¸Šã€‚è¦è·å¾—æœ¬åœ°æœºå™¨çš„ IP åœ°å€ï¼Œåœ¨ç»ˆç«¯ä¸­ä½¿ç”¨â€œ<strong class="jx io">IP addrâ€</strong>å‘½ä»¤(å¯¹äº Linux)ã€‚</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="a6fe" class="mg kv in mc b be mh mi l mj mk">serv_addr.sin_family = AF_INET;<br/>serv_addr.sin_addr.s_addr = inet_addr("&lt;YOUR_IP_ADDRESS&gt;"); // FORMAT: XXX.XXX.XXX.XXX<br/>serv_addr.sin_port = 6000; // Must be same as server</span></pre><h1 id="da2f" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">è¿æ¥åˆ°æœåŠ¡å™¨</h1><p id="7ad6" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">ä¸ºäº†å‘æŒ‡å®šçš„æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä½¿ç”¨ connect()å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å— socket FDã€æŒ‡å‘ sockaddr_in ç»“æ„çš„æŒ‡é’ˆä»¥åŠè¯¥ç»“æ„çš„å¤§å°ã€‚</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="e696" class="mg kv in mc b be mh mi l mj mk">if (connect(sockfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) &lt; 0)<br/>{<br/>   printf("Unable to connect to server\n");<br/>   return 0;<br/>}</span></pre><p id="ecbf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿æ¥åï¼Œå®¢æˆ·ç«¯å¯ä»¥å‘é€æˆ–æ¥æ”¶æ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œå½“æœåŠ¡å™¨ä¸å‘é€æ—¶ï¼Œrecv()ä¼šé˜»å¡è¿›ç¨‹ï¼ŒåŒæ ·ï¼Œå½“æœåŠ¡å™¨ä¸æ¥æ”¶æ—¶ï¼Œsend()ä¹Ÿä¼šé˜»å¡ã€‚</p><h1 id="b6a1" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">å‘é€å’Œæ¥æ”¶æ•°æ®</h1><p id="6133" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">å¯¹äºæ•°æ®ä¼ è¾“ï¼Œä½¿ç”¨ send()å’Œ recv()å‡½æ•°ã€‚</p><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="3777" class="mg kv in mc b be mh mi l mj mk">for (i = 0; i &lt; 100; i++)<br/>    buf[i] = '\0';<br/>recv(sockfd, buf, 100, 0);<br/>printf("%s\n", buf);<br/>for (i = 0; i &lt; 100; i++)<br/>    buf[i] = '\0';<br/>while (1)<br/>{<br/>    strcpy(buf, "Message from client");<br/>    send(sockfd, buf, 100, 0);<br/>}<br/>close(sockfd);</span></pre><p id="9f2c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å·¥ä½œå®Œæˆåéœ€è¦å…³é—­æ’åº§ã€‚å¦åˆ™ä¸ä¼šè¢«å…¶ä»–è¿›ç¨‹ä½¿ç”¨ã€‚</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="4176" class="ku kv in bd kw kx ms kz la lb mt ld le lf mu lh li lj mv ll lm ln mw lp lq lr bi translated">æœ€ç»ˆä»£ç </h1><pre class="lx ly lz ma gt mb mc md bn me mf bi"><span id="8f35" class="mg kv in mc b be mh mi l mj mk">int sockfd;<br/>struct sockaddr_in serv_addr;<br/>int i;<br/>char buf[100];<br/>/* Opening a socket is exactly similar to the server process */<br/>if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)<br/>{<br/>    printf("Unable to create socket\n");<br/>    return 0;<br/>}<br/>serv_addr.sin_family = AF_INET;<br/>serv_addr.sin_addr.s_addr = inet_addr("&lt;YOUR_IP_ADDRESS&gt;");<br/>serv_addr.sin_port = 6000;<br/><br/>if (connect(sockfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) &lt; 0)<br/>{<br/>    printf("Unable to connect to server\n");<br/>    return 0;<br/>}<br/><br/>for (i = 0; i &lt; 100; i++)<br/>    buf[i] = '\0';<br/>recv(sockfd, buf, 100, 0);<br/>printf("%s\n", buf);<br/>for (i = 0; i &lt; 100; i++)<br/>    buf[i] = '\0';<br/>close(sockfd);</span></pre><h2 id="8b27" class="mx kv in bd kw my mz dn la na nb dp le kg nc nd li kk ne nf lm ko ng nh lq ni bi translated">æŸ¥çœ‹è¿è¡Œä¸­çš„ä»£ç :</h2><p id="9e71" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œåœ¨ä¸€ä¸ªç»ˆç«¯ä¸Šè¿è¡ŒæœåŠ¡å™¨ä»£ç ï¼Œåœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸Šè¿è¡Œå®¢æˆ·ç«¯ä»£ç ã€‚</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/b95c1b96fe931b7391596b97bf38202e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*73PfGKzg92FxG7MiOEivUQ.png"/></div></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated">æœåŠ¡å™¨è¾“å‡º</figcaption></figure><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/8d98b704dc98a781277a8a7c9e96cf8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_CkZ36AhZD9H0Pk1J_MOKA.png"/></div></div><figcaption class="nk nl gj gh gi nm nn bd b be z dk translated">å®¢æˆ·ç«¯è¾“å‡º</figcaption></figure></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><p id="618a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™é‡Œå®Œæˆäº†ä¸€ä¸ªéå¸¸ç®€å•çš„ä½¿ç”¨å¥—æ¥å­—çš„æœåŠ¡å™¨-å®¢æˆ·ç«¯é€šä¿¡çš„å®ç°ã€‚åœ¨ä¸‹ä¸€ä¸ªä¹Ÿæ˜¯æœ€åä¸€ä¸ª<a class="ae kt" href="https://medium.com/@yashpaneliya/socket-programming-in-c-bonus-d794a0dc6f7" rel="noopener">éƒ¨åˆ†</a>ï¼Œæˆ‘å°†æ¼”ç¤ºå¦‚ä½•å¤„ç†æ¥è‡ªæµè§ˆå™¨çš„è¯·æ±‚ã€‚å®ƒå°†æ›´åŠ å®ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä»æµè§ˆå™¨å‘é€è¯·æ±‚ã€‚</p><p id="182d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœä½ åœ¨æœ¬åšå®¢ä¸­å‘ç°ä»»ä½•é—®é¢˜æˆ–é”™è¯¯ä¿¡æ¯ï¼Œè¯·å‘è¡¨è¯„è®ºã€‚è¿™å°†æœ‰åŠ©äºæˆ‘å’Œè®¸å¤šå…¶ä»–å­¦ä¹ è€…ç†è§£è¿™ä¸ªæ¦‚å¿µã€‚</p><p id="390b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¡¨ç°å‡ºä¸€äº›æ¬£èµğŸ‘ğŸ‘å¦‚æœä½ è§‰å¾—è¿™ä¸ªåšå®¢æœ‰å¸®åŠ©ï¼Œè¯·ä¸ä½ çš„åŒäº‹åˆ†äº«ã€‚</p><p id="65a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ›´äº†è§£æˆ‘:<a class="ae kt" href="https://linktr.ee/yashpaneliya" rel="noopener ugc nofollow" target="_blank">https://linktr.ee/yashpaneliya</a></p></div></div>    
</body>
</html>