<html>
<head>
<title>Overriding Laravel’s Default Models Folder using Artisan Command</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Artisan命令覆盖Laravel的默认模型文件夹</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/overriding-laravels-default-models-folder-using-artisan-command-a362f5d77765?source=collection_archive---------5-----------------------#2020-07-17">https://blog.devgenius.io/overriding-laravels-default-models-folder-using-artisan-command-a362f5d77765?source=collection_archive---------5-----------------------#2020-07-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="2ecd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">几周前，Laravel的创建者Taylor Otwell进行了一项调查，询问该框架的用户如何在应用程序文件夹中排列他们的模型文件。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="e197" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">框架默认将所有模型直接存储在app文件夹中，但是大多数开发人员(包括我在内)更喜欢有一个特定的models文件夹来存放所有模型。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kp"><img src="../Images/8b3cf3bde023ee3b39b2e46ba13c5b36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FeKKecKWXvuMRBXZcSRBcw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">默认的Laravel模型排列。</figcaption></figure><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi la"><img src="../Images/d5d342dde18fd3844deaf1fcc5c392bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bvuDOwGl5Cu_7FRVB33SOw.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">我安排模特的方式。</figcaption></figure><p id="0a87" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">遵循这种排列模型的方法有点繁琐，因为在使用artisan命令创建模型时，必须将文件夹名称指定为名称空间。要以默认方式创建模型，您可以在终端中运行以下命令:</p><blockquote class="lb lc ld"><p id="b30a" class="jk jl le jm b jn jo jp jq jr js jt ju lf jw jx jy lg ka kb kc lh ke kf kg kh ig bi translated">php工匠制作:模型库</p></blockquote><p id="176f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该命令将创建一个新的银行模型类，并将文件直接放在app文件夹中。</p><p id="e03b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要将模型直接创建到任何其他文件夹中，对于我来说，就是Models文件夹，这必须在运行命令时指定，见下面:</p><blockquote class="lb lc ld"><p id="1921" class="jk jl le jm b jn jo jp jq jr js jt ju lf jw jx jy lg ka kb kc lh ke kf kg kh ig bi translated">php工匠制作:模型模型\ \银行</p></blockquote><p id="18cb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然在您想要创建一个新模型的任何时候这样做可能看起来没什么大不了的，但是在项目中有不止一个开发人员或者随着时间的推移创建了许多模型，您可能会忘记每次都添加<em class="le"> Models\\ </em>前缀，这会将模型创建到默认的应用程序文件夹中，这不是我们想要的。</p><p id="697c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要解决这个问题，我们可以扩展Laravel的默认模型创建artisan命令并编辑默认的名称空间/文件夹，这样我们就不必在创建新模型时预先考虑名称空间/文件夹名称。</p><p id="22bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="le">注意:文件夹名，也是名称空间名。</em></p><p id="f291" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，创建一个新的artisan命令:</p><blockquote class="lb lc ld"><p id="9ad5" class="jk jl le jm b jn jo jp jq jr js jt ju lf jw jx jy lg ka kb kc lh ke kf kg kh ig bi translated">php artisan make:命令模型make命令</p></blockquote><p id="6938" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将在app\Console\Commands文件夹中创建一个新的命令类/文件，其内容为:</p><pre class="ki kj kk kl gt li lj lk ll aw lm bi"><span id="d2cb" class="ln lo in lj b gy lp lq l lr ls">&lt;?php<br/><br/>namespace App\Console\Commands;<br/><br/>use Illuminate\Console\Command;<br/><br/>class ModelMakeCommand extends Command<br/>{<br/>    <em class="le">/**<br/>     * The name and signature of the console command.<br/>     *<br/>     * </em><strong class="lj io"><em class="le">@var </em></strong><em class="le">string<br/>     */<br/>    </em>protected $signature = 'command:name';<br/><br/>    <em class="le">/**<br/>     * The console command description.<br/>     *<br/>     * </em><strong class="lj io"><em class="le">@var </em></strong><em class="le">string<br/>     */<br/>    </em>protected $description = 'Command description';<br/><br/>    <em class="le">/**<br/>     * Create a new command instance.<br/>     *<br/>     * </em><strong class="lj io"><em class="le">@return </em></strong><em class="le">void<br/>     */<br/>    </em>public function __construct()<br/>    {<br/>        parent::<em class="le">__construct</em>();<br/>    }<br/><br/>    <em class="le">/**<br/>     * Execute the console command.<br/>     *<br/>     * </em><strong class="lj io"><em class="le">@return </em></strong><em class="le">int<br/>     */<br/>    </em>public function handle()<br/>    {<br/>        return 0;<br/>    }<br/>}</span></pre><p id="cf95" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">其次，我们将我们的ModelMakeClass扩展的类从<em class="le">Illuminate \ Console \ Command</em>改为<em class="le">Illuminate \ Foundation \ Console \ model make Command</em></p><p id="57b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第三，我们将清空ModelMakeClass的默认方法，并在该类中创建一个名为<em class="le"> getDefaultNamespace </em>的新方法来处理我们希望它执行的任务(该方法覆盖了我们正在扩展的中的<em class="le">Illuminate \ Foundation \ Console \ model make command中的方法)。</em></p><p id="1af7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ModelMakeClass变成:</p><pre class="ki kj kk kl gt li lj lk ll aw lm bi"><span id="f496" class="ln lo in lj b gy lp lq l lr ls">&lt;?php<br/><br/>namespace App\Console\Commands;<br/><br/>use Illuminate\Foundation\Console\ModelMakeCommand as Command;<br/><br/><br/>class ModelMakeCommand extends <em class="le">Command<br/></em>{<br/><br/>    <em class="le">/**<br/>     * Get the default namespace for the class.<br/>     *<br/>     * </em><strong class="lj io"><em class="le">@param </em></strong><em class="le">string $rootNamespace<br/>     * </em><strong class="lj io"><em class="le">@return </em></strong><em class="le">string<br/>     */<br/>    </em>protected function getDefaultNamespace($rootNamespace)<br/>    {<br/>        //logic to change default behaviour<br/>    }<br/>    <br/>}</span></pre><p id="df54" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">添加到我们刚刚创建的新命令类的最后一件事是使我们的文件夹成为放置模型文件的默认文件夹的逻辑，在我的例子中是Models文件夹。</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi lt"><img src="../Images/f06e0cd3995b687ace9f5c132306a8c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zS6JkDth1F-bWfJFblLUjQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">getDefaultNamespace方法的两个不同版本。</figcaption></figure><p id="c7d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的新命令类现在变成了:</p><pre class="ki kj kk kl gt li lj lk ll aw lm bi"><span id="4d6c" class="ln lo in lj b gy lp lq l lr ls">&lt;?php<br/><br/>namespace App\Console\Commands;<br/><br/>use Illuminate\Foundation\Console\ModelMakeCommand as Command;<br/><br/>class ModelMakeCommand extends <em class="le">Command<br/></em>{<br/>    <em class="le">/**<br/>     * Get the default namespace for the class.<br/>     *<br/>     * </em><strong class="lj io"><em class="le">@param </em></strong><em class="le">string $rootNamespace<br/>     * </em><strong class="lj io"><em class="le">@return </em></strong><em class="le">string<br/>     */<br/>    </em>protected function getDefaultNamespace($rootNamespace)<br/>    {<br/>        return "{$rootNamespace}\Models";<br/>    }<br/>}</span></pre><p id="7825" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，运行artisan命令创建一个新模型，默认情况下会将模型放在<em class="le"> app\Models </em>文件夹中🙂。</p><p id="467d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">TL；博士:</p><p id="c279" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要更改Laravel应用程序中的默认模型文件夹</p><ul class=""><li id="f9c2" class="lu lv in jm b jn jo jr js jv lw jz lx kd ly kh lz ma mb mc bi translated">创建名为ModelMakeCommand的新artisan命令</li><li id="ce99" class="lu lv in jm b jn md jr me jv mf jz mg kd mh kh lz ma mb mc bi translated">扩展<em class="le">照明\基础\控制台\模型制作命令</em>类，而不是<em class="le">照明\控制台\命令</em>类。</li><li id="8e62" class="lu lv in jm b jn md jr me jv mf jz mg kd mh kh lz ma mb mc bi translated">从该类中删除其他方法和属性，然后创建一个名为<em class="le"> getDefaultNamespace </em>的新方法，其内容为:</li></ul><pre class="ki kj kk kl gt li lj lk ll aw lm bi"><span id="f002" class="ln lo in lj b gy lp lq l lr ls"><em class="le">/**<br/>     * Get the default namespace for the class.<br/>     *<br/>     * </em><strong class="lj io"><em class="le">@param </em></strong><em class="le">string $rootNamespace<br/>     * </em><strong class="lj io"><em class="le">@return </em></strong><em class="le">string<br/>     */<br/>    </em>protected function getDefaultNamespace($rootNamespace)<br/>    {<br/>        return "{$rootNamespace}\Models";<br/>    }</span></pre><ul class=""><li id="828f" class="lu lv in jm b jn jo jr js jv lw jz lx kd ly kh lz ma mb mc bi translated">整个班级变成了:</li></ul><pre class="ki kj kk kl gt li lj lk ll aw lm bi"><span id="b5ce" class="ln lo in lj b gy lp lq l lr ls">&lt;?php<br/><br/>namespace App\Console\Commands;<br/><br/>use Illuminate\Foundation\Console\ModelMakeCommand as Command;<br/><br/>class ModelMakeCommand extends <em class="le">Command<br/></em>{<br/>    <em class="le">/**<br/>     * Get the default namespace for the class.<br/>     *<br/>     * </em><strong class="lj io"><em class="le">@param </em></strong><em class="le">string $rootNamespace<br/>     * </em><strong class="lj io"><em class="le">@return </em></strong><em class="le">string<br/>     */<br/>    </em>protected function getDefaultNamespace($rootNamespace)<br/>    {<br/>        return "{$rootNamespace}\Models";<br/>    }<br/>}</span></pre><ul class=""><li id="2316" class="lu lv in jm b jn jo jr js jv lw jz lx kd ly kh lz ma mb mc bi translated">运行模型创建artisan命令，模型将出现在app\Models文件夹中。</li></ul><blockquote class="lb lc ld"><p id="0d6c" class="jk jl le jm b jn jo jp jq jr js jt ju lf jw jx jy lg ka kb kc lh ke kf kg kh ig bi translated">在推特上关注我:【https://twitter.com/drumzminister T2】</p></blockquote></div></div>    
</body>
</html>