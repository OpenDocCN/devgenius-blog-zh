# 在 Azure 数据工厂中使用参数的示例

> 原文：<https://blog.devgenius.io/examples-of-using-parameters-in-azure-data-factory-58f3d002a265?source=collection_archive---------1----------------------->

您可以使用参数将外部值传递到管道、数据集、链接服务和数据流中。一旦参数被传递到资源中，就不能更改。通过参数化资源，您可以每次以不同的值重用它们。这减少了 ETL 管道中的冗余，提高了灵活性。

在本文中，我们将研究如何在四个不同的场景中使用参数，并对每个场景进行详细的解释。

**数据集参数**

每个管道和数据流都需要数据集，如果您有一个包含多个表的数据库，可以使用数据集参数在运行时传递表名，而不是创建新的数据集来使用每个表。

1.  您将需要在创建数据集时不提及表名
2.  需要在参数选项卡中添加参数。在下面创建 azure sql 数据集的例子中，我添加了两个参数，一个用于模式名，另一个用于表名。

![](img/0632f84cca9b28d19fb1d84e56accd47.png)

3.您必须点击表格下方的编辑

![](img/7ed4a0ebd19ab2c70ce7b84009b8665f.png)

4.然后，您可以点击添加动态内容，它将出现在表格下方。点击后，您将能够看到我们添加的参数。

![](img/69a660d71567c3a7ab6362812eec049b.png)

5.您可以点击想要添加的参数。它会看起来像这样

![](img/c590e80dba97a2e18de6aa7adc820c79.png)

6.保存该数据集后，可以在管道中传递表名和模式名参数，如下所示。当您触发/调试管道时，ADF 将要求这些值。

![](img/b132edb1cb35d1d823a4b281deeef241.png)

**联动服务参数**

链接的服务参数可用于参数化数据库的域名、数据库名称(生产/qa)、用户名和密码。

1.  在下面的例子中，我正在创建一个新的 Azure sql 数据库。我必须转到 ADF 的 monitor 选项卡中的链接服务，并创建一个新的链接服务。创建新的链接服务时，向下滚动到底部会看到参数选项。您可以在那里添加连接参数。

![](img/7447f66b1c1548bb1dd594d252270bdb.png)

2.它们可以用于链接的服务连接，如下所示。

![](img/9c6cd53c6ccd76c1752bc885a8c8f60b.png)

3.为了在创建新数据集时使用这些参数，可以在创建数据集时创建数据集参数或将这些值硬编码到数据集中。

4.下面，我在创建 Azure sql 数据集时添加了参数，以将值传递给链接的服务

![](img/21cf2602b5f2aa02ef404dcba3cb8a5d.png)

5.在链接服务本身中，如果选择包含参数的链接服务，将会看到链接服务属性，您可以在其中硬编码值或传递数据集参数以在运行时使用它们。

![](img/359236de438a4adf1cd0cf4a98990bfb.png)

6.如果您没有决定硬编码它们，而是像我上面所做的那样使用数据集参数来传递它们，那么您将在可以传递值的管道中看到数据集属性。

![](img/07663e9df18a38db21e7224cadc0a83f.png)

**管道参数**

1.  可通过单击管线中的空白区域来创建管线参数

![](img/056f8a90ea3c7fa48b503ea8adc62879.png)

2.可以使用下面的语法来访问它们，(您可以通过单击具有添加动态内容的任何部分来访问它们)

![](img/d491274171215c15191550e8aa756fa3.png)

**在数据流中传递参数**

1.  数据流是 ADF 管道中的活动之一，因此向其传递参数的方式与上面传递管道参数的方式相同。
2.  当您创建数据流时，您可以选择任何参数化数据集，例如，我已经从下面的数据集参数部分选择了数据集。

![](img/a2b4769f55ca2dd64f4826936ed9883a.png)

3.现在，当您在管道中添加数据流活动并选择上述数据流时，您将看到 source1 parameters 选项在第一部分传递表名和模式名参数。

![](img/f14ec70d8357a938b24dcad5ab388473.png)

4.但是，如果您想在调试数据流时访问它，而不是在管道中访问它，该怎么办呢？

5.当你打开数据流中的调试选项时，你会看到旁边的调试设置。在设置中，您可以选择定义参数。

![](img/53f4f0b704c0fc700cb5bce821f93fa8.png)

我希望这篇文章是有帮助的，如果有任何问题，请随时联系我在 sujaykhandek@gmail.com**。**

****参考文献**:**

**[](https://docs.microsoft.com/en-us/azure/data-factory/how-to-expression-language-functions) [## 如何在 Azure 数据工厂中使用参数和表达式- Azure 数据工厂

### 适用于:Azure 数据工厂 Azure Synapse 分析在本文档中，我们将主要关注学习…

docs.microsoft.com](https://docs.microsoft.com/en-us/azure/data-factory/how-to-expression-language-functions)**