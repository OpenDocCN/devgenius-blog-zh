<html>
<head>
<title>Financial Data Extraction Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 进行金融数据提取</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/financial-data-extraction-using-python-710fb03df71b?source=collection_archive---------7-----------------------#2022-08-15">https://blog.devgenius.io/financial-data-extraction-using-python-710fb03df71b?source=collection_archive---------7-----------------------#2022-08-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="18ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每天都有越来越多的金融信息被创造出来并在网上公开。在许多与经济如何运行相关的场景中，分析金融信息并将其纳入数据科学分析是一种典型的做法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ebf7f79b5924e0fec57b1c5b7541e70c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iYmSFNz1WYTi-Vcd1LN_Bg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">图片作者<a class="ae ky" href="https://unsplash.com/@seanpollock" rel="noopener ugc nofollow" target="_blank"> @seanpollock </a></figcaption></figure><p id="6f96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过 python 提取金融数据还有其他几种方法，今天我们将探索 python 库 yfinance</p><h1 id="e53a" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">方案</h1><p id="5662" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">1-加载特定公司的历史股票价格，如苹果、AMD 等<br/>2-以分钟、小时、周、月和年的形式下载更多基于时间的数据。</p><p id="9d3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">安装:</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><h2 id="f852" class="me la in bd lb mf mg dn lf mh mi dp lj jv mj mk ln jz ml mm lr kd mn mo lv mp bi translated">Yfinance 库的股票数据提取方法</h2><p id="9a0f" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">我们可以构建一个对象，让我们能够使用 Ticker 模块访问数据提取方法。为了实现这一点，我们必须提供股票的代码，在本例中，AAPL 代表苹果公司。因此，要了解更多信息，我们可以从雅虎下载市场统计数据！金融。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="b8ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们可以使用属性 info 创建股票信息的 Python 字典。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="17aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用关键市值，我们可以获得“市值”。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><h2 id="a837" class="me la in bd lb mf mg dn lf mh mi dp lj jv mj mk ln jz ml mm lr kd mn mo lv mp bi translated">获取股价</h2><p id="097c" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">你可以购买的股票的最小单位是一股，这些股票的价格会随着时间而变化。我们可以使用 history()方法获得股票在特定时间段内的股价。period 参数允许我们选择要检索过去多长时间的数据。1 天(1d)、5 天、1 个月(1mo)、3 个月、6 个月、1 年(1y)、2 年、5 年、10 年、YTD 和 max 是该期间可用的可能性。</p><p id="e73f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们来看看过去 7 天的股票</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/e9656a9a54db81eabbae7050d033f62b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MFKKFtjY8St3acsf0LYbnA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">结果</figcaption></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/1c493daeace702cafd823af7083bb5cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JpUUDGWP1agc4nZW4fnJXw.png"/></div></div></figure><p id="b7a3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">熊猫数据帧是返回数据的格式。使用日期作为索引，提供每天的股票开盘、盘高、盘低、收盘、成交量和股票分割。重置索引功能允许我们重置数据帧的索引。此外，我们将就地参数设置为 True，以直接更新数据帧。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/10ffbc681c22a0c3512772feb4ae635d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OCIPvT_EDf8C0yqhg0B47w.png"/></div></div></figure><h2 id="f9e6" class="me la in bd lb mf mg dn lf mh mi dp lj jv mj mk ln jz ml mm lr kd mn mo lv mp bi translated">图形分析</h2><p id="463b" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">图表是分析数据的一种非常好的方式</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/0baa04426a19168214422f9526f8a582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7CEEJLF77CZk3MrwMPAyUQ.png"/></div></div></figure><h2 id="2247" class="me la in bd lb mf mg dn lf mh mi dp lj jv mj mk ln jz ml mm lr kd mn mo lv mp bi translated">收回股息</h2><p id="a7e0" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">公司向股东转移利润被称为股利。在这种情况下，它们被描述为投资者每持有一份股票所获得的金额。我们可以通过使用可变红利来获得数据的数据帧。“历史”功能中指定的时间段决定了数据的时间范围。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><div class="kj kk kl km gt ab cb"><figure class="mu kn mv mw mx my mz paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/ba7fc1522c2e03a0688f9fa91e2fd90e.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*5txmUQL6ruYf-GPAAYXhaw.png"/></div></figure><figure class="mu kn na mw mx my mz paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><img src="../Images/7c5afc20adf39a504b1a76c352accbce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*w6feA07xrCoEL84jPevtVw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk nb di nc nd translated">结果</figcaption></figure></div><h1 id="6868" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">加载过去的每日股票价格</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ne"><img src="../Images/4914d924ef8ce97fe32706fd924e145f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k1kXLvAlrvrBI5Vpu4mliw.png"/></div></div></figure><p id="1eac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">获取特定列</p></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nm"><img src="../Images/00823779d7aebe9682b434cd9bd0d721.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pFPDvN7f-1gQisWW2EqoSQ.png"/></div></div></figure><h2 id="0b40" class="me la in bd lb mf mg dn lf mh mi dp lj jv mj mk ln jz ml mm lr kd mn mo lv mp bi translated">下载额外的定期数据，如分钟、小时、周、月和年的数据</h2><p id="d8a9" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">如果每日数据不是你要找的，yfinance 还提供 1 米、2 米、5 米、15 米、30 米、60 米、90 米、1 小时、1 天、5 天、1 周、1 个月和 3 个月的时间间隔(m 指分钟，h 指小时，d 指天，wk 指周，mo 指月)。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/51568513f401ee395cf324586e075b6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s0VLiMK6GB157dyXRBJv3Q.png"/></div></div></figure><p id="2d26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">类似地，对于 1m，您每次只能获得最大长度为 7 天的数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="c2ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然不可能使用上面的代码从过去 30 天中提取分钟数据，但是您可以单独加载过去 7 天中每一天的数据，或者更聪明地，您可以使用 for 循环来替换重复的代码，如下所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="ced0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">希望你喜欢这篇 python 金融入门教程，请继续关注更多与 python 和大数据相关的内容</p><p id="5431" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一如既往，欢迎分享您的想法和反馈。</p><p id="5395" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Syeda Marium Faheem。</p></div></div>    
</body>
</html>