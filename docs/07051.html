<html>
<head>
<title>Dark Mode Switch With Tailwind CSS &amp; Nuxt 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带顺风 CSS 和 Nuxt 3 的黑暗模式开关</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/dark-mode-switch-with-tailwind-css-nuxt-3-2a8f313a3925?source=collection_archive---------12-----------------------#2022-02-21">https://blog.devgenius.io/dark-mode-switch-with-tailwind-css-nuxt-3-2a8f313a3925?source=collection_archive---------12-----------------------#2022-02-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1b7d07361e25f5ad3ccec81a783fa5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2EHpbHcR5oW_0tK-5WOxaA.jpeg"/></div></div></figure><p id="aaf9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我目前正在用仍处于测试阶段的 Nuxt 3 重写我的作品集网站。在这篇文章中，我想向你展示我是如何使用<a class="ae kt" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"> Tailwind CSS </a>在 Nuxt 3 中实现黑暗模式切换的，我将在我的新作品集网站中使用它。</p><h1 id="b7eb" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">创建 Nuxt 3 项目</h1><p id="1f7c" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">要创建一个新的 Nuxt 3 项目，我们需要在终端中运行这个命令:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="f6c8" class="mg kv in mc b gy mh mi l mj mk">npx nuxi init nuxt3-app</span></pre><h1 id="85ed" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">添加顺风 CSS 3</h1><p id="81bc" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">接下来，我们添加了<a class="ae kt" href="https://tailwindcss.nuxtjs.org" rel="noopener ugc nofollow" target="_blank"> nuxt/tailwind </a>模块，它提供了一个支持 Nuxt 3 和 Tailwind CSS v3 的<a class="ae kt" href="https://tailwindcss.nuxtjs.org/releases/#Nuxt%203%20and%20Tailwindcss%203%20support" rel="noopener ugc nofollow" target="_blank">预发布版本</a>:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="a72c" class="mg kv in mc b gy mh mi l mj mk">npm install --save-dev @nuxtjs/tailwindcss@5.0.0-4</span></pre><p id="ee1c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我们需要将这个模块添加到<code class="fe ml mm mn mc b">nuxt.config.js</code>中的<code class="fe ml mm mn mc b">buildModules</code>部分:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="8e02" class="mg kv in mc b gy mh mi l mj mk">import { defineNuxtConfig } from 'nuxt3';<br/><br/>// https://v3.nuxtjs.org/docs/directory-structure/nuxt.config<br/>export default defineNuxtConfig({<br/>  // highlight-next-line<br/>  buildModules: ['@nuxtjs/tailwindcss'],<br/>});</span></pre><p id="139d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们可以通过运行以下命令来创建顺风配置文件<code class="fe ml mm mn mc b">tailwind.config.js</code>:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="b682" class="mg kv in mc b gy mh mi l mj mk">npx tailwindcss init</span></pre><p id="15fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们在<code class="fe ml mm mn mc b">./assets/css/tailwind.css</code>添加一个基本的 CSS 文件(更多配置选项参见<a class="ae kt" href="https://tailwindcss.nuxtjs.org/setup#tailwind-files" rel="noopener ugc nofollow" target="_blank">正式文档</a>):</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="d809" class="mg kv in mc b gy mh mi l mj mk">@tailwind base;<br/>@tailwind components;<br/>@tailwind utilities;<br/><br/>.theme-light {<br/>  --background: #f8f8f8;<br/>  --text: #313131;<br/>}<br/><br/>.theme-dark {<br/>  --background: #313131;<br/>  --text: #f8f8f8;<br/>}</span></pre><p id="225b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们为黑暗和光明主题定义了两个 CSS 类。<a class="ae kt" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" rel="noopener ugc nofollow" target="_blank"> CSS 变量</a>(用<code class="fe ml mm mn mc b">--</code>表示)用于根据选择的主题动态改变 CSS 值。</p><p id="fd15" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，我们需要在我们的<code class="fe ml mm mn mc b">tailwind.conf.js</code>中定义这些颜色:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="d886" class="mg kv in mc b gy mh mi l mj mk">module.exports = {<br/>  content: [<br/>    `components/**/*.{vue,js,ts}`,<br/>    `layouts/**/*.vue`,<br/>    `pages/**/*.vue`,<br/>    `app.vue`,<br/>    `plugins/**/*.{js,ts}`,<br/>    `nuxt.config.{js,ts}`,<br/>  ],<br/>  theme: {<br/>    extend: {<br/>      colors: {        themeBackground: 'var(--background)',        themeText: 'var(--text)',      },    },<br/>  },<br/>  plugins: [],<br/>};</span></pre><h1 id="ac53" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">实现主题切换</h1><p id="add4" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">让我们开始实现一个主题切换，将这个简单的模板添加到我们的<code class="fe ml mm mn mc b">app.vue</code>组件中:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="ac2a" class="mg kv in mc b gy mh mi l mj mk">&lt;template&gt;<br/>  &lt;div<br/>    :class="{<br/>      'theme-light': !darkMode,<br/>      'theme-dark': darkMode,<br/>    }"<br/>    class="h-screen bg-themeBackground p-5"<br/>  &gt;<br/>    &lt;h1 class="text-themeText"&gt;Nuxt 3 Tailwind Dark Mode Demo&lt;/h1&gt;<br/>    &lt;Toggle v-model="darkMode" off-label="Light" on-label="Dark" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="59ce" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<code class="fe ml mm mn mc b">div</code>容器元素上，我们基于反应性<code class="fe ml mm mn mc b">darkMode</code>变量值动态设置<code class="fe ml mm mn mc b">theme-light</code>或<code class="fe ml mm mn mc b">theme-dark</code> CSS 类，我们将在组件的<code class="fe ml mm mn mc b">script</code>部分稍后实现。</p><p id="338c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ml mm mn mc b">h1</code>和容器<code class="fe ml mm mn mc b">div</code>元素使用我们的 Tailwind CSS 类<code class="fe ml mm mn mc b">bg-themeBackground</code>和<code class="fe ml mm mn mc b">text-themeText</code>来使用特定于主题的颜色作为背景和文本颜色。</p><p id="7d82" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，我们使用<a class="ae kt" href="https://github.com/vueform/toggle" rel="noopener ugc nofollow" target="_blank"> Vue 3 Toggle </a>库在我们的主题之间切换。</p><p id="47d0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们来看看<code class="fe ml mm mn mc b">app.vue</code>的<code class="fe ml mm mn mc b">script</code>部分:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="fc6c" class="mg kv in mc b gy mh mi l mj mk">&lt;script setup lang="ts"&gt;<br/>import Toggle from '@vueform/toggle';<br/>import { useState } from '#app';<br/>import { onMounted, watch } from '@vue/runtime-core';<br/><br/>type Theme = 'light' | 'dark';<br/><br/>const LOCAL_STORAGE_THEME_KEY = 'theme';<br/><br/>const darkMode = useState('theme', () =&gt; false);<br/><br/>const setTheme = (newTheme: Theme) =&gt; {<br/>  localStorage.setItem(LOCAL_STORAGE_THEME_KEY, newTheme);<br/>  darkMode.value = newTheme === 'dark';<br/>};<br/><br/>onMounted(() =&gt; {<br/>  const isDarkModePreferred = window.matchMedia(<br/>    '(prefers-color-scheme: dark)'<br/>  ).matches;<br/><br/>  const themeFromLocalStorage = localStorage.getItem(<br/>    LOCAL_STORAGE_THEME_KEY<br/>  ) as Theme;<br/><br/>  if (themeFromLocalStorage) {<br/>    setTheme(themeFromLocalStorage);<br/>  } else {<br/>    setTheme(isDarkModePreferred ? 'dark' : 'light');<br/>  }<br/>});<br/><br/>watch(darkMode, selected =&gt; {<br/>  setTheme(selected ? 'dark' : 'light');<br/>});<br/>&lt;/script&gt;</span></pre><p id="ed7c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将选定的主题值存储在本地存储器<a class="ae kt" href="https://developer.mozilla.org/en-US/docs/Tools/Storage_Inspector/Local_Storage_Session_Storage" rel="noopener ugc nofollow" target="_blank">中，并使用</a><a class="ae kt" href="https://v3.nuxtjs.org/docs/usage/state" rel="noopener ugc nofollow" target="_blank">使用状态</a>来定义一个名为<code class="fe ml mm mn mc b">darkMode</code>的反应变量:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="57e5" class="mg kv in mc b gy mh mi l mj mk">const darkMode = useState('theme', () =&gt; false);</span></pre><p id="33bf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果组件已安装，我们首先通过使用<a class="ae kt" href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme" rel="noopener ugc nofollow" target="_blank">CSS 媒体功能“prefers-color-scheme”</a>检测用户请求的是浅色还是深色主题:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="6e02" class="mg kv in mc b gy mh mi l mj mk">const isDarkModePreferred = window.matchMedia(<br/>  '(prefers-color-scheme: dark)'<br/>).matches;</span></pre><p id="bafb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们根据本地存储值设置主题值:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="38a9" class="mg kv in mc b gy mh mi l mj mk">const setTheme = (newTheme: Theme) =&gt; {<br/>  localStorage.setItem(LOCAL_STORAGE_THEME_KEY, newTheme);<br/>  darkMode.value = newTheme === 'dark';<br/>};<br/><br/>onMounted(() =&gt; {<br/>  const isDarkModePreferred = window.matchMedia(<br/>    '(prefers-color-scheme: dark)'<br/>  ).matches;<br/><br/>  const themeFromLocalStorage = localStorage.getItem(    LOCAL_STORAGE_THEME_KEY  ) as Theme;  if (themeFromLocalStorage) {    setTheme(themeFromLocalStorage);  } else {    setTheme(isDarkModePreferred ? 'dark' : 'light');  }});</span></pre><p id="b16a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是完整的<code class="fe ml mm mn mc b">app.vue</code>组件代码:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="acfc" class="mg kv in mc b gy mh mi l mj mk">&lt;template&gt;<br/>  &lt;div<br/>    :class="{<br/>      'theme-light': !darkMode,<br/>      'theme-dark': darkMode,<br/>    }"<br/>    class="h-screen bg-themeBackground p-5"<br/>  &gt;<br/>    &lt;h1 class="text-themeText"&gt;Nuxt 3 Tailwind Dark Mode Demo&lt;/h1&gt;<br/>    &lt;Toggle v-model="darkMode" off-label="Light" on-label="Dark" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script setup lang="ts"&gt;<br/>import Toggle from '@vueform/toggle';<br/>import { useState } from '#app';<br/>import { onMounted, watch } from '@vue/runtime-core';<br/><br/>type Theme = 'light' | 'dark';<br/><br/>const LOCAL_STORAGE_THEME_KEY = 'theme';<br/><br/>const darkMode = useState('theme', () =&gt; false);<br/><br/>const setTheme = (newTheme: Theme) =&gt; {<br/>  localStorage.setItem(LOCAL_STORAGE_THEME_KEY, newTheme);<br/>  darkMode.value = newTheme === 'dark';<br/>};<br/><br/>onMounted(() =&gt; {<br/>  const isDarkModePreferred = window.matchMedia(<br/>    '(prefers-color-scheme: dark)'<br/>  ).matches;<br/><br/>  const themeFromLocalStorage = localStorage.getItem(<br/>    LOCAL_STORAGE_THEME_KEY<br/>  ) as Theme;<br/><br/>  if (themeFromLocalStorage) {<br/>    setTheme(themeFromLocalStorage);<br/>  } else {<br/>    setTheme(isDarkModePreferred ? 'dark' : 'light');<br/>  }<br/>});<br/><br/>watch(darkMode, selected =&gt; {<br/>  setTheme(selected ? 'dark' : 'light');<br/>});<br/>&lt;/script&gt;<br/><br/>&lt;style src="@vueform/toggle/themes/default.css"&gt;&lt;/style&gt;</span></pre><p id="1531" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们可以使用运行以下命令在开发模式下启动我们的 Nuxt 应用程序:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="5a9c" class="mg kv in mc b gy mh mi l mj mk">npm run dev</span></pre><p id="f70b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们可以在<code class="fe ml mm mn mc b"><a class="ae kt" href="http://localhost:3000:" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code> <a class="ae kt" href="http://localhost:3000:" rel="noopener ugc nofollow" target="_blank"> : </a>测试我们的黑暗模式主题开关</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/21294a4cee301c5d5f34433316b9689a.png" data-original-src="https://miro.medium.com/v2/resize:fit:552/0*1oD_RVpHMrGcH_zQ.gif"/></div></figure><h1 id="5e5b" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">StackBlitz 演示</h1><p id="22c8" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我的简单演示是交互式 StackBlitz 演示:</p><p id="5b50" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://stackblitz.com/github/bnmipwkmo?embed=1&amp;file=package-lock.json" rel="noopener ugc nofollow" target="_blank">https://stackblitz.com/github/bnmipwkmo?embed=1</a></p><p id="7538" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">或者，您也可以使用支持 Nuxt Bridge 和 Nuxt 3 的<a class="ae kt" href="https://color-mode.nuxtjs.org/" rel="noopener ugc nofollow" target="_blank">颜色模式</a>模块。</p><h1 id="877c" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="c759" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">本文向您展示了如何使用 Tailwind CSS v3 在 Nuxt 3 中创建一个简单的黑暗模式开关。在接下来的几个月里，你可以期待更多的 Nuxt 3 帖子，因为我计划写一些我重写作品集网站时发现的有趣话题。</p><p id="caf0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢这篇文章，请在 Twitter 上关注我，从我这里获得关于新博客文章和更多内容的通知。</p><p id="5cdb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">或者(或者另外)，你也可以<a class="ae kt" href="https://mokkapps.de/newsletter" rel="noopener ugc nofollow" target="_blank">订阅我每周的 Vue.js 简讯</a>。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="941a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mw">原载于</em><a class="ae kt" href="https://mokkapps.de/blog/dark-mode-switch-with-tailwind-css-and-nuxt-3/" rel="noopener ugc nofollow" target="_blank"><em class="mw">https://mokkapps . de</em></a><em class="mw">。</em></p></div></div>    
</body>
</html>