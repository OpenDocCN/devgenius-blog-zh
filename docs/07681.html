<html>
<head>
<title>Easily Manage your Application Shipment With Differentiated Configuration in Multi-Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å€ŸåŠ©å¤šé›†ç¾¤ä¸­çš„å·®å¼‚åŒ–é…ç½®ï¼Œè½»æ¾ç®¡ç†æ‚¨çš„åº”ç”¨äº¤ä»˜</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/easily-manage-your-application-shipment-with-differentiated-configuration-in-multi-cluster-cc6f9a2312a9?source=collection_archive---------11-----------------------#2022-04-14">https://blog.devgenius.io/easily-manage-your-application-shipment-with-differentiated-configuration-in-multi-cluster-cc6f9a2312a9?source=collection_archive---------11-----------------------#2022-04-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="aa34" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">ç”±æ®µå¨@BinaryHB åœ¨æ¨ç‰¹ä¸Šå‘å¸ƒ</em></p><p id="b554" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨å½“ä»Šçš„å¤šé›†ç¾¤ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™äº›å…¸å‹çš„éœ€æ±‚:åˆ†å¸ƒåˆ°å¤šä¸ªç‰¹å®šçš„é›†ç¾¤ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œç‰¹å®šçš„åˆ†ç»„åˆ†å¸ƒï¼Œä»¥åŠé’ˆå¯¹å¤šé›†ç¾¤çš„å·®å¼‚åŒ–é…ç½®ã€‚</p><p id="f546" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">KubeVela v1.3 åœ¨ä¹‹å‰å¤šé›†ç¾¤åŠŸèƒ½çš„åŸºç¡€ä¸Šè¿›è¡Œè¿­ä»£ã€‚æœ¬æ–‡å°†æ­ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒè¿›è¡Œå¿«é€Ÿçš„å¤šé›†ç¾¤éƒ¨ç½²å’Œç®¡ç†ï¼Œä»¥è§£å†³æ‚¨çš„æ‰€æœ‰ç„¦è™‘ã€‚</p><h1 id="f76c" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">å¼€å§‹å‰</h1><ol class=""><li id="2680" class="lh li in jm b jn lj jr lk jv ll jz lm kd ln kh lo lp lq lr bi translated">å‡†å¤‡ä¸€ä¸ª Kubernetes é›†ç¾¤ä½œä¸º KubeVela çš„æ§åˆ¶å¹³é¢ã€‚</li><li id="aaa5" class="lh li in jm b jn ls jr lt jv lu jz lv kd lw kh lo lp lq lr bi translated">ç¡®ä¿å·²ç»æˆåŠŸå®‰è£…äº†<a class="ae lx" href="https://github.com/oam-dev/kubevela/releases/tag/v1.3.0" rel="noopener ugc nofollow" target="_blank"> KubeVela v1.3 </a>å’Œ KubeVela CLI v1.3.0ã€‚</li><li id="7904" class="lh li in jm b jn ls jr lt jv lu jz lv kd lw kh lo lp lq lr bi translated">æ‚¨æƒ³è¦ç®¡ç†çš„å­é›†ç¾¤ä¸­çš„ Kubeconfig åˆ—è¡¨ã€‚æˆ‘ä»¬å°†ä»¥å‘½åä¸ºåŒ—äº¬-1ã€åŒ—äº¬-2 å’Œç¾å›½-è¥¿æ–¹-1 çš„ä¸‰ä¸ªé›†ç¾¤ä¸ºä¾‹ã€‚</li><li id="df75" class="lh li in jm b jn ls jr lt jv lu jz lv kd lw kh lo lp lq lr bi translated">ä¸‹è½½å¹¶ç»“åˆ<a class="ae lx" href="https://github.com/oam-dev/samples/tree/master/12.Multi_Cluster_Demo" rel="noopener ugc nofollow" target="_blank">å¤šé›†ç¾¤-æ¼”ç¤º</a>ä»¥æ›´å¥½åœ°ç†è§£å¦‚ä½•ä½¿ç”¨ KubeVela å¤šé›†ç¾¤åŠŸèƒ½ã€‚</li></ol><h1 id="03d1" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">åˆ†å‘åˆ°å¤šä¸ªæŒ‡å®šçš„é›†ç¾¤</h1><p id="bebf" class="pw-post-body-paragraph jk jl in jm b jn lj jp jq jr lk jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">åˆ†å¸ƒå¤šä¸ªæŒ‡å®šé›†ç¾¤æ˜¯æœ€åŸºæœ¬çš„å¤šé›†ç¾¤ç®¡ç†æ“ä½œã€‚åœ¨ KubeVela ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨åä¸º<code class="fe mb mc md me b">topology</code>çš„ç­–ç•¥æ¥å®ç°å®ƒã€‚è¯¥é›†ç¾¤å°†åœ¨å±æ€§<code class="fe mb mc md me b">clusters</code>ä¸­åˆ—å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</p><p id="86d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç¡®ä¿å°† kubeconfig åˆ‡æ¢åˆ°æ§åˆ¶å¹³é¢é›†ç¾¤ï¼Œä½¿ç”¨<code class="fe mb mc md me b">vela cluster join</code>å°†å…¶åŒ…æ‹¬åœ¨åŒ—äº¬-1ã€åŒ—äº¬-2 å’Œç¾å›½-è¥¿æ–¹-1 çš„ 3 ä¸ªé›†ç¾¤ä¸­:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="5348" class="mn kk in me b gy mo mp l mq mr">âœ   vela cluster join beijing-1.kubeconfig --name beijing-1<br/>âœ   vela cluster join beijing-2.kubeconfig --name beijing-2<br/>âœ   vela cluster join us-west-1.kubeconfig --name us-west-1<br/>âœ   vela cluster list<br/>CLUSTER        	TYPE           	ENDPOINT                 	ACCEPTED	LABELS<br/>beijing-1      	X509Certificate	https://47.95.22.71:6443 	true<br/>beijing-2      	X509Certificate	https://47.93.117.83:6443	true<br/>us-west-1      	X509Certificate	https://47.88.31.118:6443	true</span></pre><p id="2032" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç„¶åæ‰“å¼€ multi-cluster-demoï¼ŒæŸ¥çœ‹<code class="fe mb mc md me b">Basic.yaml</code>:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="79a1" class="mn kk in me b gy mo mp l mq mr">apiVersion: core.oam.dev/v1beta1<br/>kind: Application<br/>metadata:<br/>  name: example-app<br/>  namespace: default<br/>spec:<br/>  components:<br/>    - name: hello-world-server<br/>      type: webservice<br/>      properties:<br/>        image: crccheck/hello-world<br/>        port: 8000<br/>      traits:<br/>        - type: scaler<br/>          properties:<br/>            replicas: 3<br/>        - type: gateway<br/>          properties:<br/>            domain: testsvc-mc.example.com<br/>            # classInSpec : true   If the sub clusters has Kubernetes versions below v1.20 installed, please add this field<br/>            http:<br/>              "/": 8000<br/>  policies:<br/>    - type: topology<br/>      name: beijing-clusters<br/>      properties:<br/>        clusters: ["beijing-1","beijing-2"]</span></pre><p id="6abc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ª app ä½¿ç”¨äº†<code class="fe mb mc md me b">webservice</code>ç±»å‹çš„ç»„ä»¶ï¼Œé€šè¿‡<code class="fe mb mc md me b">topology</code>ç­–ç•¥å°† 3 ä¸ªéƒ¨ç½²åˆ†å‘ç»™åŒ—äº¬-1 å’ŒåŒ—äº¬-2 é›†ç¾¤ã€‚</p><p id="fc30" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¯·æ³¨æ„ï¼Œå°†èµ„æºæˆåŠŸåˆ†é…åˆ°å—ç®¡é›†ç¾¤çš„å‰ææ˜¯ï¼Œå®ƒå¿…é¡»åŒ…å«ä¸æ§åˆ¶å¹³é¢å®Œå…¨ç›¸åŒçš„å‘½åç©ºé—´ã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªé›†ç¾¤éƒ½æœ‰<code class="fe mb mc md me b"><strong class="jm io">default</strong></code>åç§°ç©ºé—´ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒã€‚ä½†æ˜¯å‡è®¾æˆ‘ä»¬å°†<code class="fe mb mc md me b"><strong class="jm io">basic.yaml</strong></code>ä¸­çš„åç§°ç©ºé—´æ”¹ä¸º<code class="fe mb mc md me b"><strong class="jm io">multi-cluster</strong></code>ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°ä¸€ä¸ªé”™è¯¯:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="a2cf" class="mn kk in me b gy mo mp l mq mr">... <br/> Status:    	runningWorkflow</span><span id="42b6" class="mn kk in me b gy ms mp l mq mr">Workflow:</span><span id="6d7f" class="mn kk in me b gy ms mp l mq mr">  mode: DAG<br/>  finished: false<br/>  Suspend: false<br/>  Terminated: false<br/>  Steps<br/>  - id:9fierfkhsc<br/>    name:deploy-beijing-clusters<br/>    type:deploy<br/>    phase:failed<br/>    message:step deploy: step deploy: run step(provider=oam,do=components-apply): Found 1 errors. [(failed to apply component beijing-1-multi-cluster-0: HandleComponentsRevision: failed to create componentrevision beijing-1/multi-cluster/hello-world-server-v1: namespaces "multi-cluster" not found)]</span><span id="8c38" class="mn kk in me b gy ms mp l mq mr">Services:<br/>...</span></pre><p id="7912" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">åœ¨ KubeVela çš„æœªæ¥ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è®¡åˆ’æ”¯æŒä¸€ä¸ªå…¨é¢çš„è®¤è¯ç³»ç»Ÿï¼Œæ›´æ–¹ä¾¿ã€æ›´å®‰å…¨åœ°:é€šè¿‡ hub cluster ä»¥å¿«é€Ÿç§»åŠ¨çš„æ–¹å¼åœ¨æ‰˜ç®¡é›†ç¾¤ä¸­åˆ›å»ºåç§°ç©ºé—´ã€‚</strong></p><p id="0f86" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åˆ›å»ºå­é›†ç¾¤çš„å‘½åç©ºé—´åï¼Œè¿”å›æ§åˆ¶å¹³é¢é›†ç¾¤ï¼Œåˆ›å»ºåº”ç”¨ç¨‹åºå¹¶åˆ†å‘èµ„æº:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="98f6" class="mn kk in me b gy mo mp l mq mr">âœ   vela up -f basic.yaml<br/>Applying an application in vela K8s object format...<br/>"patching object" name="example-app" resource="core.oam.dev/v1beta1, Kind=Application"<br/>âœ… App has been deployed ğŸš€ğŸš€ğŸš€<br/>    Port forward: vela port-forward example-app<br/>             SSH: vela exec example-app<br/>         Logging: vela logs example-app<br/>      App status: vela status example-app<br/>  Service status: vela status example-app --svc hello-world-server</span></pre><p id="8b01" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘ä»¬ä½¿ç”¨<code class="fe mb mc md me b">vela status &lt;App Name&gt;</code>æŸ¥çœ‹è¯¥åº”ç”¨çš„è¯¦ç»†ä¿¡æ¯:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="1577" class="mn kk in me b gy mo mp l mq mr">âœ   vela status example-app<br/>About:</span><span id="2c7a" class="mn kk in me b gy ms mp l mq mr">  Name:      	example-app<br/>  Namespace: 	default<br/>  Created at:	2022-03-25 17:42:33 +0800 CST<br/>  Status:    	running</span><span id="53b3" class="mn kk in me b gy ms mp l mq mr">Workflow:</span><span id="82b9" class="mn kk in me b gy ms mp l mq mr">  mode: DAG<br/>  finished: true<br/>  Suspend: false<br/>  Terminated: false<br/>  Steps<br/>  - id:wftf9d4exj<br/>    name:deploy-beijing-clusters<br/>    type:deploy<br/>    phase:succeeded<br/>    message:</span><span id="cd00" class="mn kk in me b gy ms mp l mq mr">Services:</span><span id="1faa" class="mn kk in me b gy ms mp l mq mr">  - Name: hello-world-server<br/>    Cluster: beijing-1  Namespace: default<br/>    Type: webservice<br/>    Healthy Ready:3/3<br/>    Traits:<br/>      âœ… scaler      âœ… gateway: Visiting URL: testsvc-mc.example.com, IP: 60.205.222.30<br/>  - Name: hello-world-server<br/>    Cluster: beijing-2  Namespace: default<br/>    Type: webservice<br/>    Healthy Ready:3/3<br/>    Traits:<br/>      âœ… scaler      âœ… gateway: Visiting URL: testsvc-mc.example.com, IP: 182.92.222.128</span></pre><p id="7bfe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åŒ—äº¬-1 å’ŒåŒ—äº¬-2 éƒ½å‘å¸ƒäº†ç›¸åº”çš„èµ„æºï¼Œå®ƒä»¬ä¹Ÿæ˜¾ç¤ºäº†å¤–éƒ¨è®¿é—® IP åœ°å€ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†å…¶å…¬å¼€ç»™æ‚¨çš„ç”¨æˆ·ã€‚</p><h1 id="dac1" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">ä½¿ç”¨åˆ†ç±»æ ‡ç­¾è¿›è¡Œåˆ†ç»„</h1><p id="e4c6" class="pw-post-body-paragraph jk jl in jm b jn lj jp jq jr lk jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">é™¤äº†ä¸Šè¿°åŸºæœ¬éœ€æ±‚ï¼Œæˆ‘ä»¬è¿˜ç»å¸¸ä¼šé‡åˆ°å…¶ä»–æƒ…å†µ:è·¨åŒºåŸŸéƒ¨ç½²åˆ°æŸäº›é›†ç¾¤ï¼ŒæŒ‡å®šå“ªä¸ªäº‘æä¾›å•†çš„é›†ç¾¤ç­‰ã€‚ä¸ºäº†å®ç°ç±»ä¼¼çš„ç›®æ ‡ï¼Œå¯ä»¥ä½¿ç”¨<code class="fe mb mc md me b">labels</code>åŠŸèƒ½ã€‚</p><p id="bf4a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¿™é‡Œï¼Œå‡è®¾ us-west-1 é›†ç¾¤æ¥è‡ª AWSï¼Œæˆ‘ä»¬å¿…é¡»é¢å¤–åº”ç”¨äº AWS é›†ç¾¤ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe mb mc md me b">vela cluster labels add</code>å‘½ä»¤æ¥æ ‡è®°é›†ç¾¤ã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰æ›´å¤šä¸ AWS ç›¸å…³çš„é›†ç¾¤ï¼Œå¦‚ us-west-2ï¼Œä¹Ÿå°†åœ¨å®ƒä»¬è¢«æ ‡è®°åè¿›è¡Œå¤„ç†:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="1c79" class="mn kk in me b gy mo mp l mq mr">âœ  ~ vela cluster labels add us-west-1 provider=AWS<br/>Successfully update labels for cluster us-west-1 (type: X509Certificate).<br/>provider=AWS<br/>âœ  ~ vela cluster list<br/>CLUSTER        	TYPE           	ENDPOINT                 	ACCEPTED	LABELS<br/>beijing-1      	X509Certificate	https://47.95.22.71:6443 	true<br/>beijing-2      	X509Certificate	https://47.93.117.83:6443	true<br/>us-west-1      	X509Certificate	https://47.88.31.118:6443	true    	provider=AWS</span></pre><p id="bb7b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ›´æ–°<code class="fe mb mc md me b">basic.yaml</code>ä»¥æ·»åŠ åº”ç”¨ç¨‹åºç­–ç•¥<code class="fe mb mc md me b">topology-aws</code>:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="abaa" class="mn kk in me b gy mo mp l mq mr">...<br/>  policies:<br/>    - type: topology<br/>      name: beijing-clusters<br/>      properties:<br/>        clusters: ["beijing-1","beijing-2"]<br/>    - type: topology<br/>      name: topology-aws<br/>      properties:<br/>        clusterLabelSelector:<br/>          provider: AWS</span></pre><p id="a8b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸ºäº†èŠ‚çœæ‚¨çš„æ—¶é—´ï¼Œè¯·ç›´æ¥éƒ¨ç½²<code class="fe mb mc md me b">intermediate.yaml</code>:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="7706" class="mn kk in me b gy mo mp l mq mr">âœ  ~ vela up -f intermediate.yaml</span></pre><p id="82a8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å†æ¬¡æ£€æŸ¥åº”ç”¨ç¨‹åºçš„çŠ¶æ€:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="a304" class="mn kk in me b gy mo mp l mq mr">âœ   vela status example-app</span><span id="5aaa" class="mn kk in me b gy ms mp l mq mr">...</span><span id="dcbf" class="mn kk in me b gy ms mp l mq mr">  - Name: hello-world-server<br/>    Cluster: us-west-1  Namespace: default<br/>    Type: webservice<br/>    Healthy Ready:3/3<br/>    Traits:<br/>      âœ… scaler      âœ… gateway: Visiting URL: testsvc-mc.example.com, IP: 192.168.40.10</span></pre><h1 id="ecbc" class="kj kk in bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">å·®å¼‚åŒ–é…ç½®</h1><p id="85ca" class="pw-post-body-paragraph jk jl in jm b jn lj jp jq jr lk jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">é™¤äº†ä¸Šè¿°åœºæ™¯ï¼Œæˆ‘ä»¬å€¾å‘äºæœ‰æ›´å¤šçš„åº”ç”¨ç¨‹åºæˆ˜ç•¥éœ€æ±‚ï¼Œä¾‹å¦‚å¸Œæœ›åˆ†å‘ 5 ä¸ªå‰¯æœ¬çš„é«˜å¯ç”¨æ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code class="fe mb mc md me b">override</code>ç­–ç•¥:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="e5f5" class="mn kk in me b gy mo mp l mq mr">...        <br/>        clusterLabelSelector:<br/>          provider: AWS<br/>    -  type: override<br/>       name: override-high-availability<br/>       properties:<br/>          components:<br/>            - type: webservice<br/>              traits:<br/>              - type: scaler<br/>                properties:<br/>                  replicas: 5</span></pre><p id="5163" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åŒæ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›åªæœ‰ AWS é›†ç¾¤æ‰èƒ½è·å¾—é«˜å¯ç”¨æ€§ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥æœŸå¾… KubeVela çš„å·¥ä½œæµç¨‹å¸®æˆ‘ä»¬ä¸€æŠŠã€‚æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å·¥ä½œæµç¨‹:å®ƒæ—¨åœ¨é€šè¿‡ä»¥ä¸‹æ–¹å¼éƒ¨ç½²æ­¤åº”ç”¨ç¨‹åºï¼Œé¦–å…ˆé€šè¿‡<code class="fe mb mc md me b">deploy-beijing</code>ç­–ç•¥åˆ†å‘åˆ°åŒ—äº¬çš„é›†ç¾¤ï¼Œç„¶åå‘æ ‡è®°ä¸º AWS çš„é›†ç¾¤åˆ†å‘ 5 ä¸ªå‰¯æœ¬:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="967b" class="mn kk in me b gy mo mp l mq mr">...                <br/>                properties:<br/>                  replicas: 5<br/>  workflow:<br/>    steps:<br/>      - type: deploy<br/>        name: deploy-beijing<br/>        properties:<br/>          policies: ["beijing-clusters"]<br/>      - type: deploy<br/>        name: deploy-aws<br/>        properties:<br/>          policies: ["override-high-availability","topology-aws"]</span></pre><p id="3c7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç„¶åï¼Œæˆ‘ä»¬å°†ä¸Šè¿°ç­–ç•¥å’Œå·¥ä½œæµé™„åŠ åˆ°<code class="fe mb mc md me b">intermediate.yaml</code>å¹¶ä½¿å…¶æˆä¸º<code class="fe mb mc md me b">advanced.yaml</code>:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="6b50" class="mn kk in me b gy mo mp l mq mr">...<br/>  policies:<br/>    - type: topology<br/>      name: beijing-clusters<br/>      properties:<br/>        clusters: ["beijing-1","beijing-2"]<br/>    - type: topology<br/>      name: topology-aws<br/>      properties:<br/>        clusterLabelSelector:<br/>          provider: AWS<br/>    -  type: override<br/>       name: override-high-availability<br/>       properties:<br/>          components:<br/>            - type: webservice<br/>              traits:<br/>              - type: scaler<br/>                properties:<br/>                  replicas: 5<br/>  workflow:<br/>    steps:<br/>      - type: deploy<br/>        name: deploy-beijing<br/>        properties:<br/>          policies: ["beijing-clusters"]<br/>      - type: deploy<br/>        name: deploy-aws<br/>        properties:<br/>          policies: ["override-high-availability","topology-aws"]</span></pre><p id="405c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç„¶åéƒ¨ç½²å®ƒï¼ŒæŸ¥çœ‹åº”ç”¨ç¨‹åºçš„çŠ¶æ€:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="0de2" class="mn kk in me b gy mo mp l mq mr">âœ   vela up -f advanced.yaml<br/>Applying an application in vela K8s object format...<br/>"patching object" name="example-app" resource="core.oam.dev/v1beta1, Kind=Application"<br/>âœ… App has been deployed ğŸš€ğŸš€ğŸš€<br/>    Port forward: vela port-forward example-app<br/>             SSH: vela exec example-app<br/>         Logging: vela logs example-app<br/>      App status: vela status example-app<br/>  Service status: vela status example-app --svc hello-world-serverapplication.core.oam.dev/podinfo-app configured<br/>  <br/>âœ   vela status example-app</span><span id="5431" class="mn kk in me b gy ms mp l mq mr">...</span><span id="4946" class="mn kk in me b gy ms mp l mq mr">  - Name: hello-world-server<br/>    Cluster: us-west-1  Namespace: default<br/>    Type: webservice<br/>    Healthy Ready:5/5<br/>    Traits:<br/>      âœ… scaler      âœ… gateway: Visiting URL: testsvc-mc.example.com, IP: 192.168.40.10</span></pre><p id="8cfa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä»¥ä¸Šæ˜¯æˆ‘ä»¬è¿™æ¬¡æƒ³ä¸ä½ åˆ†äº«çš„ï¼Œè°¢è°¢ä½ é˜…è¯»å’Œå°è¯•ã€‚</p><p id="98ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lx" href="https://kubevela.io/docs/install" rel="noopener ugc nofollow" target="_blank">æˆ‘ä»¬é‚€è¯·æ‚¨è¿›ä¸€æ­¥æ¢ç´¢ KubeVela v1.3ï¼Œä»¥æ»¡è¶³æ›´å¤æ‚çš„ä¸šåŠ¡éœ€æ±‚ï¼Œä¾‹å¦‚æ·±å…¥æŒ–æ˜å·®å¼‚åŒ–é…ç½®ï¼Œä½¿ç”¨<code class="fe mb mc md me b">override</code>åº”ç”¨ç¨‹åºç­–ç•¥è¦†ç›–ä¸€ç§ç±»å‹çš„æ‰€æœ‰èµ„æºæˆ–ä»…è¦†ç›–æŸäº›ç‰¹å®šç»„ä»¶ã€‚</a></p></div></div>    
</body>
</html>