<html>
<head>
<title>How to use Android Bottom Sheet in android project using Kotlin? Explanation with Example.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在使用 Kotlin 的 android 项目中使用 Android 底层表？举例说明。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-use-android-bottom-sheet-in-android-project-using-kotlin-explanation-with-example-afd322db0184?source=collection_archive---------2-----------------------#2022-12-21">https://blog.devgenius.io/how-to-use-android-bottom-sheet-in-android-project-using-kotlin-explanation-with-example-afd322db0184?source=collection_archive---------2-----------------------#2022-12-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6caa3ce5613bfdd8a2d3d3c4a4eb221a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SPEMUmSIeGLBYX4FwC0yNg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">来源:谷歌</figcaption></figure><p id="157a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要在使用 Kotlin 的 Android 项目中使用底层表单，您可以遵循以下步骤:</p><ol class=""><li id="501f" class="kx ky in kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">将设计库添加到项目的 build.gradle 文件中:</li></ol><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="8be4" class="lp lq in ll b be lr ls l lt lu">dependencies {<br/>    implementation 'com.google.android.material:material:1.3.0'<br/>}</span></pre><p id="b30d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">2.将<code class="fe lv lw lx ll b">CoordinatorLayout</code>添加到活动的布局中。<code class="fe lv lw lx ll b">CoordinatorLayout</code>将用于将底部薄板固定到屏幕底部。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="60ee" class="lp lq in ll b be lr ls l lt lu">&lt;androidx.coordinatorlayout.widget.CoordinatorLayout<br/>    xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<br/>    android:id="@+id/coordinator_layout"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"&gt;<br/><br/>&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;</span></pre><p id="53e3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3.添加一个<code class="fe lv lw lx ll b">com.google.android.material.bottomsheet.BottomSheetBehavior</code>到你的底部工作表的布局。这种行为将允许底板上下滑动。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="0b8e" class="lp lq in ll b be lr ls l lt lu">&lt;LinearLayout<br/>    android:id="@+id/bottom_sheet"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:background="@color/colorAccent"<br/>    app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"&gt;<br/><br/>    &lt;!-- Add content to the Bottom Sheet --&gt;<br/><br/>&lt;/LinearLayout&gt;</span></pre><p id="0763" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">4.在您的活动代码中，找到底部的工作表，并将其状态设置为<code class="fe lv lw lx ll b">BottomSheetBehavior.STATE_COLLAPSED</code>或<code class="fe lv lw lx ll b">BottomSheetBehavior.STATE_EXPANDED</code>，以分别显示或隐藏底部的工作表。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="5c29" class="lp lq in ll b be lr ls l lt lu">val bottomSheet = findViewById&lt;LinearLayout&gt;(R.id.bottom_sheet)<br/>val bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet)<br/><br/>// Show the Bottom Sheet<br/>bottomSheetBehavior.state = BottomSheetBehavior.STATE_EXPANDED<br/><br/>// Hide the Bottom Sheet<br/>bottomSheetBehavior.state = BottomSheetBehavior.STATE_COLLAPSED</span></pre><p id="01cc" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下面是一个完整的例子，说明如何在使用 Kotlin 的 Android 项目中使用底层表单:</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="5228" class="lp lq in ll b be lr ls l lt lu">import androidx.appcompat.app.AppCompatActivity<br/>import android.os.Bundle<br/>import android.view.View<br/>import androidx.coordinatorlayout.widget.CoordinatorLayout<br/>import com.google.android.material.bottomsheet.BottomSheetBehavior<br/>import kotlinx.android.synthetic.main.activity_main.*<br/><br/>class MainActivity : AppCompatActivity() {<br/><br/>    private lateinit var bottomSheetBehavior: BottomSheetBehavior&lt;*&gt;<br/><br/>    override fun onCreate(savedInstanceState: Bundle?) {<br/>        super.onCreate(savedInstanceState)<br/>        setContentView(R.layout.activity_main)<br/><br/>        val bottomSheet = bottom_sheet<br/>        bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet)<br/>        bottomSheetBehavior.state = Bottom</span></pre></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><p id="0d98" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下面是一些你可以用 Kotlin 在 Android 中做的事情:</p><ol class=""><li id="eb7e" class="kx ky in kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">您可以设置一个<code class="fe lv lw lx ll b">BottomSheetCallback</code>来监听底部料板的状态变化。例如，当底部工作表显示或隐藏时，您可以使用这个回调来更新 UI。</li></ol><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="1f39" class="lp lq in ll b be lr ls l lt lu">val bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet)<br/><br/>bottomSheetBehavior.setBottomSheetCallback(object : BottomSheetBehavior.BottomSheetCallback() {<br/>    override fun onStateChanged(bottomSheet: View, newState: Int) {<br/>        // Update the UI when the state of the Bottom Sheet changes<br/>    }<br/><br/>    override fun onSlide(bottomSheet: View, slideOffset: Float) {<br/>        // Update the UI while the Bottom Sheet is being dragged<br/>    }<br/>})</span></pre><p id="6987" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">2.您可以通过设置<code class="fe lv lw lx ll b">peekHeight</code>和<code class="fe lv lw lx ll b">hideable</code>属性自定义底部板材的外观。<code class="fe lv lw lx ll b">peekHeight</code>属性决定了底层工作表折叠时的高度，<code class="fe lv lw lx ll b">hideable</code>属性决定了底层工作表是否可以完全隐藏。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="9670" class="lp lq in ll b be lr ls l lt lu">&lt;LinearLayout<br/>    android:id="@+id/bottom_sheet"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:background="@color/colorAccent"<br/>    app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"<br/>    app:behavior_peekHeight="100dp"<br/>    app:behavior_hideable="true"&gt;<br/><br/>    &lt;!-- Add content to the Bottom Sheet --&gt;<br/><br/>&lt;/LinearLayout&gt;</span></pre><p id="e96e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3.您还可以使用<code class="fe lv lw lx ll b">BottomSheetDialogFragment</code>在您的应用程序中显示模态底部表单。如果你想显示一个覆盖整个屏幕的底部表单，并阻止用户与应用程序的其余部分进行交互，直到它被关闭，这是很有用的。</p><p id="4ec9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要使用<code class="fe lv lw lx ll b">BottomSheetDialogFragment</code>，您可以创建一个扩展<code class="fe lv lw lx ll b">BottomSheetDialogFragment</code>的新类，并覆盖<code class="fe lv lw lx ll b">onCreateView()</code>方法来扩展底部工作表的布局。然后，您可以通过在您的<code class="fe lv lw lx ll b">BottomSheetDialogFragment</code>类的实例上调用<code class="fe lv lw lx ll b">show()</code>来显示底部的工作表。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="2099" class="lp lq in ll b be lr ls l lt lu">class MyBottomSheetDialogFragment : BottomSheetDialogFragment() {<br/><br/>    override fun onCreateView(<br/>        inflater: LayoutInflater,<br/>        container: ViewGroup?,<br/>        savedInstanceState: Bundle?<br/>    ): View? {<br/>        return inflater.inflate(R.layout.fragment_bottom_sheet, container, false)<br/>    }<br/>}<br/><br/>val bottomSheetDialogFragment = MyBottomSheetDialogFragment()<br/>bottomSheetDialogFragment.show(supportFragmentManager, "bottomSheetDialogFragment")</span></pre><p id="5a65" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">4.通过调用<code class="fe lv lw lx ll b">BottomSheetDialogFragment</code>中<code class="fe lv lw lx ll b">getView()</code>返回的<code class="fe lv lw lx ll b">View</code>上的<code class="fe lv lw lx ll b">setBottomSheetCallback()</code>，可以自定义<code class="fe lv lw lx ll b">BottomSheetDialogFragment</code>的<code class="fe lv lw lx ll b">BottomSheetBehavior</code>。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="0e97" class="lp lq in ll b be lr ls l lt lu">class MyBottomSheetDialogFragment : BottomSheetDialogFragment() {<br/><br/>    override fun onCreateView(<br/>        inflater: LayoutInflater,<br/>        container: ViewGroup?,<br/>        savedInstanceState: Bundle?<br/>    ): View? {<br/>        val view = inflater.inflate(R.layout.fragment_bottom_sheet, container, false)<br/><br/>        val bottomSheetBehavior = BottomSheetBehavior.from(view.parent as View)<br/>        bottomSheetBehavior.setBottomSheetCallback(object : BottomSheetBehavior.BottomSheetCallback() {<br/>            override fun onStateChanged(bottomSheet: View, newState: Int) {<br/>                // Update the UI when the state of the Bottom Sheet changes<br/>            }<br/><br/>            override fun onSlide(bottomSheet: View, slideOffset: Float) {<br/>                // Update the UI while the Bottom Sheet is being dragged<br/>            }<br/>        })<br/><br/>        return view<br/>    }<br/>}</span></pre><p id="3101" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">5.您也可以通过在底部表单的布局中设置<code class="fe lv lw lx ll b">peekHeight</code>和<code class="fe lv lw lx ll b">hideable</code>属性来自定义<code class="fe lv lw lx ll b">BottomSheetDialogFragment</code>的外观。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="2182" class="lp lq in ll b be lr ls l lt lu">&lt;LinearLayout<br/>    xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:background="@color/colorAccent"<br/>    app:layout_behavior="com.google.android.material.bottomsheet.BottomSheetBehavior"<br/>    app:behavior_peekHeight="100dp"<br/>    app:behavior_hideable="true"&gt;<br/><br/>    &lt;!-- Add content to the Bottom Sheet --&gt;<br/><br/>&lt;/LinearLayout&gt;</span></pre><p id="21b9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">6.你还可以使用<code class="fe lv lw lx ll b">BottomNavigationView</code>在屏幕底部显示一个导航栏，可以用来在你的应用程序的不同屏幕或部分之间切换。<code class="fe lv lw lx ll b">BottomNavigationView</code>是一个专门的<code class="fe lv lw lx ll b">ViewGroup</code>，它显示底部导航栏，每个项目代表你应用程序中的一个目的地。</p><p id="3f61" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要使用一个<code class="fe lv lw lx ll b">BottomNavigationView</code>，您可以将它添加到您的布局中，并设置一个<code class="fe lv lw lx ll b">OnNavigationItemSelectedListener</code>来监听项目选择。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="f165" class="lp lq in ll b be lr ls l lt lu">&lt;com.google.android.material.bottomnavigation.BottomNavigationView<br/>    android:id="@+id/bottom_navigation_view"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    app:menu="@menu/bottom_navigation_menu"/&gt;<br/><br/>val bottomNavigationView = findViewById&lt;BottomNavigationView&gt;(R.id.bottom_navigation_view)<br/>bottomNavigationView.setOnNavigationItemSelectedListener { menuItem -&gt;<br/>    when (menuItem.itemId) {<br/>        R.id.menu_item_</span></pre><p id="a563" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">7.您可以通过设置布局中的<code class="fe lv lw lx ll b">app:itemIconTint</code>和<code class="fe lv lw lx ll b">app:itemTextColor</code>属性来自定义<code class="fe lv lw lx ll b">BottomNavigationView</code>中项目的外观。您还可以设置<code class="fe lv lw lx ll b">app:itemBackground</code>属性来自定义项目的背景。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="d215" class="lp lq in ll b be lr ls l lt lu">&lt;com.google.android.material.bottomnavigation.BottomNavigationView<br/>    android:id="@+id/bottom_navigation_view"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    app:menu="@menu/bottom_navigation_menu"<br/>    app:itemIconTint="@color/colorPrimary"<br/>    app:itemTextColor="@color/colorPrimary"<br/>    app:itemBackground="@color/colorAccent"/&gt;</span></pre><p id="c7b1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">8.您还可以使用<code class="fe lv lw lx ll b">BottomAppBar</code>在您的应用程序中显示底部应用程序栏。<code class="fe lv lw lx ll b">BottomAppBar</code>是固定在屏幕底部的专用<code class="fe lv lw lx ll b">Toolbar</code>，可用于显示导航和行动项目。</p><p id="50d6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要使用一个<code class="fe lv lw lx ll b">BottomAppBar</code>，您可以将它添加到您的布局中，并设置一个<code class="fe lv lw lx ll b">OnMenuItemClickListener</code>来监听菜单项的点击。</p><pre class="lg lh li lj gt lk ll lm bn ln lo bi"><span id="04e8" class="lp lq in ll b be lr ls l lt lu">&lt;com.google.android.material.bottomappbar.BottomAppBar<br/>    android:id="@+id/bottom_app_bar"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:backgroundTint="@color/colorPrimary"<br/>    app:menu="@menu/bottom_app_bar_menu"/&gt;<br/><br/>val bottomAppBar = findViewById&lt;BottomAppBar&gt;(R.id.bottom_app_bar)<br/>bottomAppBar.setOnMenuItemClickListener { menuItem -&gt;<br/>    when (menuItem.itemId) {<br/>        R.id.menu_item_action -&gt; {<br/>            // Handle menu item action<br/>            true<br/>        }<br/>        else -&gt; false<br/>    }<br/>}</span></pre><p id="e320" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">希望这有帮助！谢谢大家！</p></div></div>    
</body>
</html>