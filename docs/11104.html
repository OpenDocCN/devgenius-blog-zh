<html>
<head>
<title>Database Role V/S Account Role in Snowflake</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">雪花中的数据库角色 V/S 帐户角色</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/database-role-v-s-account-role-in-snowflake-49e960b3924a?source=collection_archive---------1-----------------------#2022-12-19">https://blog.devgenius.io/database-role-v-s-account-role-in-snowflake-49e960b3924a?source=collection_archive---------1-----------------------#2022-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7a41adc81304ec9a6b8350fd244f9d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ekxUIzFVztQJeDuS8OUw7w.png"/></div></div></figure><p id="2b9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">今天我们将讨论直接来自雪花烤箱的新鲜出炉的<strong class="ka ir">所有版本</strong>功能，即<strong class="ka ir">数据库角色。</strong></p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/f8ed34f96831c2fac9d5684c08f3bd37.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/format:webp/0*e-VFzTzZedZRVYOO.png"/></div></figure><p id="1289" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个功能很热…真的很热…！</p><p id="8ed2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望你们都知道雪花的作用。与帐户级角色相比，数据库级角色的概念略有不同。</p><p id="5cec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">目前，<strong class="ka ir">数据库的角色是一个</strong></p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/316ee2182039b38fd78733345a2d7c18.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/0*l5Rc5OB486GWIXVb.jpeg"/></div></figure><p id="13e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们详细讨论一下这个问题。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="9dcc" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">雪花里的角色是什么？</h1><p id="314f" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">在雪花中，您只能将任何对象的权限授予角色。权限不能直接授予任何用户，权限可以授予角色，角色可以授予用户。可以将角色授予其他角色，以创建角色层次结构和角色继承。雪花中几乎没有预先创建标准角色。要了解更多关于雪花和其他访问控制框架中的标准角色的信息，请参阅我最近的博客  <strong class="ka ir"> </strong>。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="fc27" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">我们在雪花中有角色类型吗？</h1><p id="b4d2" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">我们在雪花中有以下角色类型:</p><ol class=""><li id="ad74" class="mn mo iq ka b kb kc kf kg kj mp kn mq kr mr kv ms mt mu mv bi translated">预先创建的<strong class="ka ir">标准角色</strong>，如帐户管理员、系统管理员等。</li><li id="9bf8" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">在雪花中创建的任何其他<strong class="ka ir">自定义角色</strong>都是<strong class="ka ir">账户级</strong>角色。这些角色是使用“创建角色&lt;角色名称&gt;创建的”</li><li id="7fed" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated"><strong class="ka ir">数据库角色</strong>是新引入的，旨在进一步加强数据库级别的安全性要求。这些角色是使用“创建数据库角色&lt;角色名&gt;创建的。</li></ol></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="9407" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">帐户角色和数据库角色有什么区别？</h1><figure class="kx ky kz la gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7a41adc81304ec9a6b8350fd244f9d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ekxUIzFVztQJeDuS8OUw7w.png"/></div></div></figure><ol class=""><li id="b540" class="mn mo iq ka b kb kc kf kg kj mp kn mq kr mr kv ms mt mu mv bi translated">帐户级角色驻留在任何数据库之外，而数据库角色驻留在特定的指定数据库内。</li><li id="3484" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">帐户级角色可以对帐户中的任何或所有对象授予权限，而数据库级角色只能访问数据库级对象。</li><li id="df32" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">帐户级角色可以出现在上下文中，或者可以使用“使用角色<role_name>选择，或者可以通过客户端连接请求传递，而数据库角色不能像普通帐户级角色一样使用。数据库角色只能授予帐户级角色。</role_name></li><li id="a80a" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">帐户角色可以授予用户，而数据库角色只能授予帐户角色，而不能授予用户。</li><li id="ac31" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">帐户级角色范围是整个帐户，而数据库角色范围仅限于指定的数据库。</li><li id="d2c6" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">帐户级角色可以分配给其他帐户角色以创建角色层次结构，而数据库角色不能授予同一数据库之外的其他数据库角色。数据库角色只能授予帐户级别的角色，以创建角色层次结构。</li><li id="ae7f" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated"><strong class="ka ir">账户级角色</strong>不能授予<strong class="ka ir">数据库角色</strong>，而数据库角色可以授予账户角色。</li><li id="f8e6" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">数据库角色所有权只能由帐户角色持有，而帐户级别的角色所有权不能由任何数据库角色持有。</li></ol></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="155a" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">数据库角色的用例是什么？</h1><ol class=""><li id="ea46" class="mn mo iq ka b kb mh kf mi kj nb kn nc kr nd kv ms mt mu mv bi translated"><strong class="ka ir">轻松管理数据库级访问— </strong>数据库所有者可以轻松管理各自数据库内的数据库级访问。数据库中所有安全对象都可以被授予数据库角色，然后这些角色可以被分配给帐户角色。</li><li id="ec31" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated"><strong class="ka ir">增强安全性— </strong>现在有了数据库角色，可以更安全地设置安全边界，因为数据库角色可以在数据库外部访问，除非明确授予帐户角色。此外，它可以被授予当前数据库之外的其他数据库角色，这减少了由于任何雪花帐户中的角色授予管理失误而造成的角色爆炸或角色混乱。</li><li id="ed88" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated"><strong class="ka ir">细粒度共享雪花数据库— </strong>账户预配置雪花时提前共享雪花数据库。当你想从雪花数据库中分享使用信息时，没有办法限制每个人都必须导入整个雪花数据库。现在，有了共享数据库角色，数据使用者可以将每个共享数据库角色授予他们自己帐户中的一个或多个帐户级角色。随着共享数据库角色的引入，我们可以为使用消费者提供自定义窗口访问，而不是整个数据库访问。</li></ol></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="554f" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">如何创建或删除数据库角色？</h1><p id="bf43" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">为了创建数据库角色，雪花引入了新的语法。不能使用旧的“CREATE ROLE <role_name>”语法创建数据库角色。</role_name></p><pre class="kx ky kz la gt ne nf ng bn nh ni bi"><span id="dfa5" class="nj lk iq nf b be nk nl l nm nn">--Create Database role<br/>CREATE OR REPLACE DATABASE ROLE RBACSCH_READ_ONLY;<br/><br/>--Drop Database role<br/>DROP DATABASE ROLE RBACSCH_READ_ONLY;</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="06e5" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">如何列出数据库角色？</h1><p id="63a9" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">要在雪花中列出任何特定数据库所有数据库角色，您必须使用新语法。您不能使用旧“SHOW ROLES <role_name>”语法列出数据库角色。</role_name></p><pre class="kx ky kz la gt ne nf ng bn nh ni bi"><span id="041b" class="nj lk iq nf b be nk nl l nm nn">SHOW DATABASE ROLES IN DATABASE DBROLE_DEMO;</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="fed4" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">如何管理雪花中数据库角色的权限？</h1><p id="4c1a" class="pw-post-body-paragraph jy jz iq ka b kb mh kd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv ij bi translated">下面是如何将数据库角色授予帐户角色或同一数据库中的其他数据库角色的语法。</p><pre class="kx ky kz la gt ne nf ng bn nh ni bi"><span id="543b" class="nj lk iq nf b be nk nl l nm nn">--Grant database role to account role<br/>GRANT DATABASE ROLE DBROLE_DEMO.RBACSCH_READ_ONLY to role ROLE_ENV_ADMIN;<br/><br/>--Grant database role to another database role<br/>GRANT DATABASE ROLE DBROLE_DEMO.RBACSCH_READ_ONLY TO <br/>DATABASE ROLE DBROLE_DEMO.RBACSCH_READ_WRITE;<br/><br/>--Grant securable object grant to database role<br/>GRANT SELECT ON ALL TABLES IN SCHEMA DBROLE_DEMO.PUBLIC <br/>TO DATABASE ROLE RBACSCH_READ_ONLY;</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="b33c" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">要记住的事情:</h1><ol class=""><li id="d218" class="mn mo iq ka b kb mh kf mi kj nb kn nc kr nd kv ms mt mu mv bi translated">有关授予数据库角色的更多详细信息，请参见此处的<a class="ae mm" href="https://docs.snowflake.com/en/sql-reference/sql/grant-database-role.html#grant-database-role" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"/></a><strong class="ka ir">。</strong></li><li id="f8e3" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">有关对象级授权到数据库级授权的更多详细信息，请参见此处的<a class="ae mm" href="https://docs.snowflake.com/en/sql-reference/sql/grant-privilege.html#database-roles" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">。</strong> </a></li><li id="88b1" class="mn mo iq ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated">由于这是预览版，我们可以预计到正式发布时行为会有一些变化。</li></ol><p id="aace" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">敬请关注数据库角色的用例演示…！</strong></p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="cc95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望这篇博客能帮助你深入了解<strong class="ka ir">雪花数据库的角色</strong>。如果你对此有任何疑问，欢迎在评论区提问。如果你喜欢这个博客，请鼓掌。保持联系，看到更多这样的酷东西。谢谢你的支持。</p><p id="4f01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">你可以找我:</strong></p><p id="8453" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">【https://www.youtube.com/c/RajivGuptaEverydayLearning】订阅我的 YouTube 频道:<a class="ae mm" href="https://www.youtube.com/c/RajivGuptaEverydayLearning" rel="noopener ugc nofollow" target="_blank"/></p><p id="245f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">跟我上媒:</strong><a class="ae mm" href="https://rajivgupta780184.medium.com/" rel="noopener">https://rajivgupta780184.medium.com/</a></p><p id="3a4a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">在推特上关注我:</strong><a class="ae mm" href="https://twitter.com/RAJIVGUPTA780" rel="noopener ugc nofollow" target="_blank">https://twitter.com/RAJIVGUPTA780</a></p><p id="0bd3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">在 LinkedIn 上联系我:</strong><a class="ae mm" href="https://www.linkedin.com/in/rajiv-gupta-618b0228/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/rajiv-gupta-618b0228/</a></p><figure class="kx ky kz la gt jr gh gi paragraph-image"><div class="gh gi no"><img src="../Images/f193b0c42922eb4b58fa84cee8e00b7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*Jp6A_EgGuw-jQOQe.png"/></div></figure><p id="1f6c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">#继续学习#继续分享# RajivGuptaEverydayLearning # SnowflakeDataSuperhero # RajivGupta</strong></p></div></div>    
</body>
</html>