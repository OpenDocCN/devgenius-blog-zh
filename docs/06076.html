<html>
<head>
<title>Flutter + Git Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤动+ Git 挂钩</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/flutter-git-hooks-19d8141176ac?source=collection_archive---------0-----------------------#2021-12-11">https://blog.devgenius.io/flutter-git-hooks-19d8141176ac?source=collection_archive---------0-----------------------#2021-12-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/81ccfe56a91526192bab086af5cc0807.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*akDlY98q3SlhGvUod3C7TQ.png"/></div></div></figure><p id="a81f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> → </strong> <a class="ae kt" href="http://github.com/wendreof" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">我的 GitHub 简介。</strong> </a> <strong class="jx io"> <br/> → </strong> <a class="ae kt" href="https://www.linkedin.com/in/wendreof/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">我的 LinkedIn 简介</strong> </a> <strong class="jx io">。<br/> →把</strong> <a class="ae kt" href="https://marketplace.visualstudio.com/items?itemName=wendreof.ufo" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Ufo 主题</strong> </a> <strong class="jx io">放到你的 VS 代码里。</strong></p><p id="7ec4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">怎么了，戴夫！在今天的文章中，我将向你介绍(或者不介绍)一个 Git Hook 工具，也许会用一些“快速而强大的 Git hooks manager for any type of project:”left Hook 解决你的一些编码问题。</p><p id="cfd5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">保持相同的代码格式、样式、提交消息模式等等，对一个人来说可能很容易，对另一个人来说可能很难，特别是那些在大型团队中工作的人。你的团队越大，就越难让每个人都保持一致。</p><p id="e3ad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们同意有很多方法可以做到这一点，但是使用一个工具来帮助我们做这件事怎么样呢？如果只需几分钟就能完成呢？是啊，有可能。</p><p id="71f0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">部分:</p><ul class=""><li id="9ae7" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated"><em class="ld">将 Lefthook 添加到项目中</em></li><li id="9290" class="ku kv in jx b jy le kc lf kg lg kk lh ko li ks kz la lb lc bi translated"><em class="ld">预提交设置</em></li><li id="c77e" class="ku kv in jx b jy le kc lf kg lg kk lh ko li ks kz la lb lc bi translated"><em class="ld">提交消息设置</em></li><li id="02fb" class="ku kv in jx b jy le kc lf kg lg kk lh ko li ks kz la lb lc bi translated"><em class="ld">预推送设置</em></li><li id="1a70" class="ku kv in jx b jy le kc lf kg lg kk lh ko li ks kz la lb lc bi translated"><em class="ld">完整的剧本</em></li><li id="d4bc" class="ku kv in jx b jy le kc lf kg lg kk lh ko li ks kz la lb lc bi translated"><em class="ld">目标</em></li></ul><p id="478a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们进入下一部分！</p><p id="e057" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> #1 —将 Lefthook 添加到项目</strong></p><p id="3864" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Lefthook 是一个快速而强大的 Git hooks 管理器，适用于任何类型的项目:</p><ul class=""><li id="e71a" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated"><strong class="jx io">快</strong>。这是用围棋写的。可以并行运行命令。</li><li id="53e7" class="ku kv in jx b jy le kc lf kg lg kk lh ko li ks kz la lb lc bi translated"><strong class="jx io">强大的</strong>。通过配置中的几行代码，您可以在<code class="fe lj lk ll lm b">pre-push</code>钩子上只检查已更改的文件。</li><li id="b2df" class="ku kv in jx b jy le kc lf kg lg kk lh ko li ks kz la lb lc bi translated"><strong class="jx io">简单的</strong>。它是一个独立的二进制文件，可以在任何环境下工作。</li></ul><p id="8324" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以在这里了解更多。我们可以用 npm/yarn、go、ruby、brew、snap 等来安装。<a class="ae kt" href="https://github.com/evilmartians/lefthook/blob/master/docs/full_guide.md" rel="noopener ugc nofollow" target="_blank">在此获取所有安装说明</a>。</p><p id="7714" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你和我一样是 Linux 用户，建议你用 snap:</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">左钩卡扣安装</figcaption></figure><p id="800d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，在项目内部运行以下命令:</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">lefthook 安装命令</figcaption></figure><p id="41de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该命令将在根项目上生成 lefthook.yml，并附有一些示例，请删除所有内容。</p><p id="5e81" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> #2 —预提交设置</strong></p><p id="0ba3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们用预提交脚本启动我们的配置，这样，我们将格式化所有暂存的*。dart 文件。</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">预提交</figcaption></figure><p id="b650" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对未格式化的文件执行一些提交操作会生成如下输出:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/51e14f4dfa5a9da2377407f8cfc09fe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*eL5qJvOSE5qtpOu-kG3lGQ.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">提交前输出</figcaption></figure><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="ly ls l"/></div></figure><p id="3ae5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">简单的柠檬榨汁机，对吗？耶！如果由于某种原因 format 命令失败，提交将不会完成。</p><p id="c019" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> #3—提交消息设置</strong></p><p id="5a93" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于这个例子，我们将定义一些提交消息模式，用正则表达式(Regex)验证它，并让用户知道提交的统计信息。</p><p id="91be" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们假设我们的团队使用<a class="ae kt" href="https://www.conventionalcommits.org/en/v1.0.0/" rel="noopener ugc nofollow" target="_blank">常规提交</a>来添加人类和机器可读的含义来提交消息，因此一些 ok 消息将是这样的:<strong class="jx io">docs:CHANGELOG 的正确拼写。</strong></p><p id="87d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了消息模式后，让我们创建一个正则表达式来验证:<strong class="jx io">(fix | feat | WIP | none | Jerry | refactor | docs | style | test)\:。+ <br/> </strong>我总是使用<a class="ae kt" href="https://regexr.com/" rel="noopener ugc nofollow" target="_blank">regexr.com</a>进行正则表达式验证:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/bce6711e539d094c4c390400df5e10c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*68ljPmgeV2gw48g5qMOt2A.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">Ok 消息格式</figcaption></figure><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ma"><img src="../Images/eeaa96b065f355b87d06fd2d313e43fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*YjL2BknKw3pNtso5iLwBfw.png"/></div></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">错误的消息格式</figcaption></figure><p id="0b1d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们在 Dart 端❤上创建验证类</p><p id="4f0d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在根项目中创建一个文件<strong class="jx io"><em class="ld">git _ hooks/commit message . dart</em></strong>并粘贴以下内容:</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">commitMessage.dart</figcaption></figure><p id="0733" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如您所见，该脚本将让用户了解提交消息的统计信息。现在，让我们更新 lefthook.yaml:</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">提交消息</figcaption></figure><p id="f96e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并使用无效的提交消息格式运行它:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/d96230237b668863a3b3b945886db9de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*SkbV-NEizXHrFmbPMhTAew.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">错误的消息格式输出</figcaption></figure><p id="2f08" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在它具有 ok 提交消息格式:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/3aaae2cf8ca8cbeb85a0e9e27a3fbf18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*Gg89nLTn_SuYnRgeOjiKMQ.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">Ok 消息格式输出</figcaption></figure><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="f052" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> #4 —预推送设置</strong></p><p id="4df3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在最后一个设置中，我们的脚本应该运行我们所有的测试和分析器:</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">预推</figcaption></figure><p id="2ebf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如你所见，我跳过了 v1.0.1 标签，只是为了举例，也忽略了合并和重定基础操作。</p><p id="3d49" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在推送最后一次提交:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi md"><img src="../Images/c59995870d129cb6048c68a15405e434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*OuNmwizvIjWPW3LORNbAWw.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">预推输出</figcaption></figure><p id="fc65" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> #4 —完整的脚本</strong></p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">lefthook.yaml</figcaption></figure><p id="81fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> #5 —目标</strong> <br/>我们已经达到目标了！格式化整个代码(*。dart)，用无效的提交消息阻塞提交并让用户知道统计数据，在推送之前运行所有的测试，忽略一些标签，合并和重定基础。</p><p id="290f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望你喜欢它，下一篇文章再见！</p><p id="a1de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请看看我关于 Flutter 的其他帖子:</p><div class="me mf gp gr mg mh"><a href="https://medium.com/@wendreof/updating-version-code-for-play-store-using-github-actions-d5ea0f07f6ff" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd io gy z fp mm fr fs mn fu fw im bi translated">使用 GitHub 操作更新 Play Store 的版本代码</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">怎么了，戴夫？今天的帖子我将帮助你解决一个最无聊的事情，同时提交一些新的…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv jt mh"/></div></div></a></div><div class="me mf gp gr mg mh"><a href="https://medium.com/@wendreof/how-publish-flutter-web-app-on-heroku-github-pages-f4df95bdd385" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd io gy z fp mm fr fs mn fu fw im bi translated">如何在 Heroku &amp; GitHub 页面上发布 Flutter Web 应用程序</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">你好，欢迎来到我的博客。今天的帖子是关于如何在 Heroku 和…上部署你的 Flutter Web 应用程序</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mw l ms mt mu mq mv jt mh"/></div></div></a></div><div class="me mf gp gr mg mh"><a href="https://medium.com/@wendreof/how-to-safely-build-assigned-flutter-app-with-github-actions-8860b1b6eef6" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd io gy z fp mm fr fs mn fu fw im bi translated">如何用 GitHub Actions 安全构建指定的 Flutter App</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">你好，欢迎来到我的博客。今天的帖子是关于在不损害…</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mx l ms mt mu mq mv jt mh"/></div></div></a></div><p id="67a8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢你阅读❤</p><p id="da3c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以不要为明天忧虑，因为明天自有明天的忧虑。每天都有足够多的麻烦。【马太福音 6:34】</p><p id="9548" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">错误或建议？用你的拍手留下评论吧！</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi my"><img src="../Images/58f375cd28ca4ca9f2064322b22d45ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JvkUHw6r2JT-r2Vo.png"/></div></figure><p id="5d5f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> → </strong> <a class="ae kt" href="http://github.com/wendreof" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">我的 GitHub 简介。</strong> </a> <strong class="jx io"> <br/> → </strong> <a class="ae kt" href="https://www.linkedin.com/in/wendreof/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">我的 LinkedIn 个人资料</strong> </a> <strong class="jx io">。<br/> →把</strong> <a class="ae kt" href="https://marketplace.visualstudio.com/items?itemName=wendreof.ufo" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Ufo 主题</strong> </a> <strong class="jx io">放到你的 VS 代码里。</strong></p></div></div>    
</body>
</html>