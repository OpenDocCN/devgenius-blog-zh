<html>
<head>
<title>Better JavaScript — JavaScript Versions and Numbers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更好的JavaScript——JavaScript版本和数字</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/better-javascript-javascript-versions-and-numbers-ef3778a8d5e2?source=collection_archive---------4-----------------------#2020-10-08">https://blog.devgenius.io/better-javascript-javascript-versions-and-numbers-ef3778a8d5e2?source=collection_archive---------4-----------------------#2020-10-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/333681543a928bac10f1bdb781ca48b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BolKKcr8AYeJPZ6Z"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@photoart2018?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">安德鲁·布坎南</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="f785" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与任何类型的应用程序一样，JavaScript应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究改进JavaScript代码的方法。</p><h1 id="fe8e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">了解我们使用的JavaScript版本</h1><p id="dac8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">了解我们使用的是哪个JavaScript版本很重要。</p><p id="fa5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为每个版本都有改进。</p><p id="6746" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ES6是变化最多的一个版本。</p><p id="e275" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们使用它的特性，它会使代码与旧的JavaScript非常不同。</p><p id="b586" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们要注意的非标准功能，可能会突然出现偶尔。</p><p id="03b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于新功能，浏览器支持可能有所不同。</p><p id="af1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们应该注意这些特征的变化。</p><p id="b2dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，API特性也可能随不同的JavaScript引擎而变化。</p><p id="5680" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们希望确保我们支持的浏览器能够为我们想要的特性提供支持。</p><p id="1d32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们需要像Babel和polyfill库这样的程序来运行我们的应用程序。</p><p id="176d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">严格模式是我们必须考虑的JavaScript的另一个方面。</p><p id="8a77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它可以防止我们犯错误，比如赋值给像<code class="fe me mf mg mh b">undefined</code>这样的全局值，或者意外地创建全局变量。</p><p id="28fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该与旧代码向后兼容，因此我们可以使用<code class="fe me mf mg mh b">'use strict'</code>指令在部分代码中应用严格模式。</p><p id="9fa2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以补充一点:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="81a7" class="mq lc iq mh b gy mr ms l mt mu">"use strict";</span></pre><p id="a4fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">到顶端或者我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6c77" class="mq lc iq mh b gy mr ms l mt mu">function foo(x) {<br/>  "use strict";<br/>  // ...<br/>}</span></pre><p id="09c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过打开严格模式，我们可以编写如下代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1fad" class="mq lc iq mh b gy mr ms l mt mu">function foo(x) {<br/>  "use strict";<br/>  var arguments = [];<br/>  // ...<br/>}</span></pre><p id="c68b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们得到错误“uncathed语法错误:意外的评估或严格模式中的参数”。</p><p id="ba9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，如果我们需要将具有严格模式的文件与不具有严格模式的文件连接起来，那么我们可能会遇到问题。</p><p id="ed6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在一个文件的顶部启用了严格模式，而在另一个文件的顶部为一个函数启用了严格模式，那么严格模式将应用于所有地方。</p><p id="6f3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了减少出现问题的机会，我们应该让我们的代码走出全局范围。</p><p id="188f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以这样写:</p><p id="0147" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">file1.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8ebd" class="mq lc iq mh b gy mr ms l mt mu">(function() {<br/>  "use strict";</span><span id="1f8b" class="mq lc iq mh b gy mv ms l mt mu">  function f() {<br/>    // ...<br/>  }<br/>  //...</span><span id="fb6d" class="mq lc iq mh b gy mv ms l mt mu">})()</span></pre><p id="f0cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以及:</p><p id="4fa7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">file2.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="333e" class="mq lc iq mh b gy mr ms l mt mu">(function() {<br/>  function f() {<br/>    // ...<br/>  }<br/>  //...</span><span id="4f18" class="mq lc iq mh b gy mv ms l mt mu">})()</span></pre><p id="2cfc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">file1.js</code>开启了严格模式，而<code class="fe me mf mg mh b">file2.js</code>没有。</p><p id="557c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以这个要好得多。</p><p id="f953" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">函数和变量也是私有的，这是另一个好处。</p><h1 id="59e3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript的浮点数字</h1><p id="da9c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript只有一种数字。</p><p id="139c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们都是浮点型的。</p><p id="384c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e19c" class="mq lc iq mh b gy mr ms l mt mu">typeof 27;<br/>typeof 9.6;<br/>typeof -2.1;</span></pre><p id="9046" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">全部返回<code class="fe me mf mg mh b">'number'</code>。</p><p id="0eab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript数字是双精度浮点数字。</p><p id="7030" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们是IEEE 754标准规定的数字的64位编码。</p><p id="f3d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数算术运算符处理任何类型的数字。</p><p id="e716" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以这样写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="94cf" class="mq lc iq mh b gy mr ms l mt mu">0.1 * 1.9<br/>-99 + 100;<br/>21 - 12.3;</span></pre><p id="d151" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">按位运算符仅适用于整数。</p><p id="cc33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ad98" class="mq lc iq mh b gy mr ms l mt mu">5 | 1;</span></pre><p id="9fc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到5。</p><p id="fe56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个简单的表达式可能需要多个步骤来计算。</p><p id="3592" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们将一个数字转换成二进制字符串:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3af7" class="mq lc iq mh b gy mr ms l mt mu">(5).toString(2); </span></pre><p id="cf4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">toString</code>的基数为2，这意味着我们转换为二进制。</p><p id="95ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以十进制5转换成二进制数字。</p><p id="d18d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会丢弃左边额外的0位，因为它们不会影响值。</p><p id="6c6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">按位运算符的工作方式相同。</p><p id="618f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">整数被转换成比特，这样就可以对它们进行运算。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/97e247e2d501759a8aef69a3e37d2315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rff5XRlmrfgBO34G"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">尼克·希利尔在Unsplash<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上的照片</a></figcaption></figure><h1 id="98a4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="3fcc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该检查我们支持的JavaScript版本，以便我们的应用程序可以运行。</p><p id="e322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另外，我们应该知道JavaScript只有一种数字。</p></div></div>    
</body>
</html>