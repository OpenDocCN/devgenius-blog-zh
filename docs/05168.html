<html>
<head>
<title>Ladder System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阶梯系统</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ladder-system-22ed1a5bb8a8?source=collection_archive---------2-----------------------#2021-06-26">https://blog.devgenius.io/ladder-system-22ed1a5bb8a8?source=collection_archive---------2-----------------------#2021-06-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8b40" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用动画系统使玩家看起来像在爬梯子</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/a36887c600c4872ee30a8f6cf510ddff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/1*s6ChUW7BHHhbXGY6nDJDnA.gif"/></div></figure><h1 id="952e" class="kk kl in bd km kn ko kp kq kr ks kt ku jt kv ju kw jw kx jx ky jz kz ka la lb bi translated">建立</h1><p id="d712" class="pw-post-body-paragraph lc ld in le b lf lg jo lh li lj jr lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">我首先在游戏中添加了一个梯子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ly"><img src="../Images/1676b2ee5f2376ef77fbb79609193977.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*P779NZUBPNCy8NsRT_W_aQ.gif"/></div></div></figure><p id="e8ed" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">现在我需要一种方法来防止玩家走过梯子，所以我给它添加了一个盒子碰撞器，然后调整它，使它适合我不想让玩家走过的地方。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mi"><img src="../Images/cdabcaa7f9e861a31fd2e01ea5a972f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VLMlOz0e_rQ0oAhyNveRwA.gif"/></div></div></figure><p id="6463" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">接下来，我在梯子前面添加了另一个盒子碰撞器，用来检测玩家。当玩家输入这个触发器时，我想激活爬梯动画。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mj"><img src="../Images/71c38f0bbf3165d62761acbe2cdc60ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QeeIkkLbU57-2SedG0aEjw.gif"/></div></div></figure><p id="9146" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">接下来我给梯子添加一个壁架组件，这是我为我的<a class="ae mk" rel="noopener ugc nofollow" target="_blank" href="/completing-the-ledge-grabbing-system-9a4fef94be3b"> <strong class="le io">壁架抓取系统</strong> </a>创建的行为。当任何设置了标记字段的标记进入触发器时，玩家的壁架位置被设置，玩家的壁架抓取球被设置为真。这也是我希望玩家进入天梯触发时发生的事情。我将 Bool 的 Z 偏移设置为 0.5，我使用我创建的 Player On Ladder 来激活爬梯动画。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ml"><img src="../Images/17a2b6fd81b93ff7b8ae6de23c841995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jJOcMmLRqvPOq9KTGGiv5A.gif"/></div></div></figure><p id="84cb" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">注意:我将壁架行为重命名为触发时输入 Set Position 和 Bool。</p><p id="f9e6" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">我确保我的爬梯动画设置正确。位置和旋转被烘焙到动画中，它是一个人形。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mm"><img src="../Images/4a8942ac108db4406e5f417b84a118ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cU_IjWJS0uWe2KNHC-ra8A.gif"/></div></div></figure><p id="1e91" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">接下来，我将动画添加到播放器动画控制器，并设置所有的过渡。当爬上梯子是真的时，我过渡到动画。当从梯子上爬的触发器被触发时，我就转换到自由攀登。我还添加了一个当“爬上梯子”设置为“假”时返回空闲状态的转换，以防有一次我希望能够在没有到达梯子顶部的情况下转换出梯子。我还确保了爬梯有玩家设定的位置</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mn"><img src="../Images/75bb507f040c209c9a2a7c455c005e8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3VV1aqPh71R1fho-Op9PTw.gif"/></div></div></figure><h1 id="6025" class="kk kl in bd km kn ko kp kq kr ks kt ku jt kv ju kw jw kx jx ky jz kz ka la lb bi translated">让玩家爬梯子</h1><p id="3c73" class="pw-post-body-paragraph lc ld in le b lf lg jo lh li lj jr lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">我将代码添加到我的玩家动画中，让它设置所需的动画参数，这样我的玩家就会看起来像在爬梯子。当触发器梯子向上爬设置为真时，我在动画上设置触发器，并确保设置向上爬梯子为假。我还将梯子爬上触发器重新设置为 false，这样就不会再次触发。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mo"><img src="../Images/c3bb3cfa50be806cc8ac6e9f05a510e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9kFkb2OXpWKmt1rXKFrzUw.png"/></div></div></figure><p id="598c" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">我把需要的代码添加到播放器中。如果 On Ladder Bool 引用设置为 true，我将玩家设置在梯子上，然后调用 Grab Ledge 方法。在这方面，抓壁架和爬梯子的规则是一样的。如果玩家在梯子上，我会把它移向动画位置。如果玩家不再在梯子上，我将玩家的位置设置为壁架位置。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mp"><img src="../Images/08f11b79735a2d2c83e35ca5e1348cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4DGvYqcl80txBWt6dZZ_eg.png"/></div></div></figure><p id="6e8e" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">然后，我确保向播放器和播放器动画组件添加了正确的 ScriptableObject 变量。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mq"><img src="../Images/82bd524eb43b3de768924732d294cea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ncfzEgTg64vn8G-C0Xdgwg.gif"/></div></div></figure><p id="f178" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">现在我的玩家要爬梯子了。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mr"><img src="../Images/82672d85fe69fa6c931628085b4b5419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/1*YQhcHcfzgb1qeiEcZktT2w.gif"/></div></div></figure><h2 id="329f" class="ms kl in bd km mt mu dn kq mv mw dp ku ll mx my kw lp mz na ky lt nb nc la nd bi translated">到达梯子的顶端</h2><p id="43c6" class="pw-post-body-paragraph lc ld in le b lf lg jo lh li lj jr lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">玩家没有办法知道他们什么时候到达梯子的顶端，并且将永远向上爬。</p><p id="de83" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">为了解决这个问题，我在场景中添加了一个壁架预制体，然后我让梯子成为壁架的孩子，并移动所有东西，直到所有东西在视觉上排成一行。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ne"><img src="../Images/5133ba25d9183d2b3a7ed3d379c9c355.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dIA-VIrWTEipfnfYJuJbkA.gif"/></div></div></figure><p id="d68a" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">这个壁架是为玩家搭建的。我所需要做的就是改变布尔参考触发器阶梯向上爬。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nf"><img src="../Images/435d4d31e78d4f96ff3c3edc22bafb61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wVJI6ByDtEL1sdX3XrXvlA.gif"/></div></div></figure><p id="36bc" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">现在玩家可以爬上梯子了</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ng"><img src="../Images/dfc6227e4097fd7dff2de68cdd970c23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rprAGpWJ9_bO4A9LGnEWzw.gif"/></div></div></figure><h1 id="c1cc" class="kk kl in bd km kn ko kp kq kr ks kt ku jt kv ju kw jw kx jx ky jz kz ka la lb bi translated">让它成为一个预制的</h1><p id="7553" class="pw-post-body-paragraph lc ld in le b lf lg jo lh li lj jr lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">最后，我需要做的就是把它变成一个我可以使用的预制组件。我也确保我把这个预设部分添加到我的平台预设中，这样我就可以很容易地在游戏中的任何平台上使用它。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nh"><img src="../Images/220724186afb924b210f448aca4566ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-ZjbPZQSc93Gs2aOLx2ezA.gif"/></div></div></figure><p id="3ed2" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">当然，我也需要为后边缘创建一个。为了避免几何图形出错，我还需要确保将梯子的比例设置为 Z 轴上的-7，平台的比例设置为 Z 轴上的-1，以帮助在视觉上正确排列。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi ni"><img src="../Images/13e0743a3cc94e299ca8f89c5c6cc904.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1yeZKeCnhIcXUzXz6YuhFw.gif"/></div></div></figure><p id="04d7" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">现在，我可以在游戏中的任何平台上使用梯子作为优势，只需启用游戏对象。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nj"><img src="../Images/7d74b9a243c1f8d4ce39903446825d44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*k8r79DGRZvQtey1kaNi4cA.gif"/></div></div></figure><p id="bf57" class="pw-post-body-paragraph lc ld in le b lf md jo lh li me jr lk ll mf ln lo lp mg lr ls lt mh lv lw lx ig bi translated">我现在可以爬梯子了。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nk"><img src="../Images/b24474d872c4a0255c345863c381d71b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fHqaMzJyJdFhxcKIdwHRgg.gif"/></div></div></figure></div></div>    
</body>
</html>