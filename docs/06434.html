<html>
<head>
<title>How to change react app to typescript by using webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 webpack 将 react app 改为 typescript</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-change-react-app-to-typescript-by-using-webpack-f036e73f53cb?source=collection_archive---------5-----------------------#2022-01-07">https://blog.devgenius.io/how-to-change-react-app-to-typescript-by-using-webpack-f036e73f53cb?source=collection_archive---------5-----------------------#2022-01-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/309bf4df203e5be5f9c6d5f433057e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/1*GnLQHDnuK6NxUPvU00_zMw.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">图片来自<a class="ae jv" href="https://en.wikipedia.org/wiki/Webpack" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Webpack</a></figcaption></figure><figure class="jx jy jz ka gt jo gh gi paragraph-image"><div class="gh gi jw"><img src="../Images/93eb85053d4f536fd3f0120689269940.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*F9BaLvU0OkGg0B1M14nR6g.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">图片来自<a class="ae jv" href="https://www.freecodecamp.org/news/react-js-for-beginners-props-state-explained/" rel="noopener ugc nofollow" target="_blank">https://www . freecodecamp . org/news/react-js-for-初学者-props-state-explained/ </a></figcaption></figure><p id="6c8f" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io">目的</strong></p><p id="1001" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">当我正努力用 webpack 引入 typescript 以将我的 react 应用程序改为 typescript 时，我分享了我的知识。一般来说，大多数人只使用 create-react-app 和 typescript，所以很难找到正确的解决方案。</p><p id="2871" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io">步骤</strong></p><p id="7b1e" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">1.安装 ts-loader、typescript、webpack、webpack-cli(通过 webpack v5)、webpack-dev-server @types/react、@types/react-dom、@types/webpack、@types/webpack-dev-server</p><ul class=""><li id="afd8" class="kz la in kd b ke kf ki kj km lb kq lc ku ld ky le lf lg lh bi translated">webpack-dev-server 是可选的，但是很有用</li></ul><p id="9606" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">2.如下设置 package.json 中的 webpack-dev-server。</p><pre class="jx jy jz ka gt li lj lk ll aw lm bi"><span id="ef62" class="ln lo in lj b gy lp lq l lr ls">"scripts": {<br/>    "serve": "live-server public/",<br/>    "build": "webpack",<br/>    "dev-server": "webpack-dev-server",<br/>    "start": "webpack-serve"<br/>  },</span></pre><p id="a22d" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">3.如下创建 webpack.config.js(我的代码不是最小的)。不要忘记将条目的文件扩展名改为 ts 或 tsx。</p><pre class="jx jy jz ka gt li lj lk ll aw lm bi"><span id="494e" class="ln lo in lj b gy lp lq l lr ls">const path = require("path");</span><span id="57ad" class="ln lo in lj b gy lt lq l lr ls">module.exports = {<br/>  mode: "development",<br/>  entry: "./src/app.tsx",<br/>  output: {<br/>    path: `${__dirname}/public`,<br/>    filename: "bundle.js",<br/>  },<br/>  performance: {<br/>    hints: false,<br/>    maxEntrypointSize: 512000,<br/>    maxAssetSize: 512000,<br/>  },<br/>  module: {<br/>    rules: [<br/>      {<br/>        use: ["babel-loader"],<br/>        test: /\.(js|jsx)$/,<br/>        exclude: /node_modules/,<br/>      },<br/>      {<br/>        test: /\.tsx?$/,<br/>        loader: "ts-loader",<br/>        options: {<br/>          configFile: path.resolve(__dirname, "./tsconfig.json"),<br/>        },<br/>      },<br/>      {<br/>        test: /\.svg$/,<br/>        use: [<br/>          {<br/>            loader: "svg-url-loader",<br/>            options: {<br/>              limit: 10000,<br/>            },<br/>          },<br/>        ],<br/>      },<br/>      {<br/>        test: /\.s?css$/,<br/>        use: ["style-loader", "css-loader", "sass-loader"],<br/>      },<br/>    ],<br/>  },<br/>  devtool: "source-map",<br/>  devServer: {<br/>    static: {<br/>      directory: path.join(__dirname, "public"),<br/>    },<br/>    historyApiFallback: true,<br/>  },<br/>  resolve: {<br/>    modules: ["node_modules"],<br/>    extensions: [".ts", ".tsx", ".js", "jsx", "json"],<br/>  },<br/>  target: ["web", "es5"],<br/>};</span></pre><p id="1c48" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">4.像下面这样创建 tsconfig.json。至少你要设置" sourceMap": "true "，" target": "es5 "，" module": "es2015 "，" jsx": "react "</p><pre class="jx jy jz ka gt li lj lk ll aw lm bi"><span id="39d7" class="ln lo in lj b gy lp lq l lr ls">{<br/>  "compilerOptions": {<br/>    "sourceMap": true,<br/>    "target": "es5",<br/>    "module": "es2015",<br/>    "strict": true,<br/>    "noUnusedLocals": true,<br/>    "noImplicitReturns": true,<br/>    "moduleResolution": "node",<br/>    "esModuleInterop": true,<br/>    "allowJs": true,<br/>    "allowSyntheticDefaultImports": true,<br/>    "jsx": "react",<br/>    "lib": ["es2020", "dom"]<br/>  },<br/>  "include": ["./src/**/*"]<br/>}</span></pre><p id="1a8b" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">5.搞定了。启动服务器(在我的例子中，yarn 运行 dev-server)并获得结果。</p><p id="7487" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我在努力克服哪些错误？</p><p id="5652" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">当我使用 webpack5.0.0 时，我得到</p><p id="dcd1" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">—&gt;错误:webpack.webpackError 不是构造函数。</p><p id="576d" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">虽然我谷歌了一下，但是找不到解决办法。</p><p id="dd35" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">所以我换成了 webpack 最新的 5.65.0，我得到了</p><p id="8bf5" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">—&gt;错误:配置文件“tsconfig.json”中的“文件”列表为空</p><p id="6b35" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我在 package.json 的 site rules 中添加了选项，并修复了这个错误。</p><pre class="jx jy jz ka gt li lj lk ll aw lm bi"><span id="6966" class="ln lo in lj b gy lp lq l lr ls">rules: [<br/>      {<br/>        test: /\.tsx?$/,<br/>        loader: "ts-loader",<br/>        options: {<br/>          configFile: path.resolve(__dirname, "./ts.config.json"),<br/>        },<br/>      },<br/>...</span></pre><p id="c17a" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io">结论</strong></p><p id="2dc5" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">最后，我可以在我的应用程序中引入 Typescript，但是我仍然在努力为我的应用程序分配类型。因此，当我可以将整个 react 应用程序改为 typescript 时，我将再次分享我的知识。</p><p id="4ad8" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io">参考</strong></p><p id="d9c7" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">webpack 指南打字稿:<a class="ae jv" href="https://webpack.js.org/guides/typescript/" rel="noopener ugc nofollow" target="_blank">https://webpack.js.org/guides/typescript/</a></p><p id="4425" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">关于错误配置文件' tsconfig.json '中的' Files '列表为空:<a class="ae jv" href="https://programmerall.com/article/40291153056/" rel="noopener ugc nofollow" target="_blank">https://programmerall.com/article/40291153056/</a></p><p id="7d65" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我的 github:<a class="ae jv" href="https://github.com/aujourdui/cats-community/tree/development" rel="noopener ugc nofollow" target="_blank">https://github . com/aujourdui/cats-community/tree/development</a></p><p id="5c2f" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>