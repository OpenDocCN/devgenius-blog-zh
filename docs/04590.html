<html>
<head>
<title>When Should You Stop Refactor?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么时候应该停止重构？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/when-should-you-stop-refactor-9a61036b2b3f?source=collection_archive---------4-----------------------#2021-04-07">https://blog.devgenius.io/when-should-you-stop-refactor-9a61036b2b3f?source=collection_archive---------4-----------------------#2021-04-07</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><h2 id="e61b" class="ip iq ir bd b dl is it iu iv iw ix dk iy translated" aria-label="kicker paragraph">重构</h2><div class=""/><div class=""><h2 id="ce42" class="pw-subtitle-paragraph jx ja ir bd b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dk translated">重构十字路口怎么办？</h2></div><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/7880427b4a203eb505b84efe9f7703f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bomL-fyfLAtdDHNO"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk translated">来自<a class="ae lf" href="https://www.pexels.com/photo/male-constructor-drawing-draft-on-paper-roll-3760529/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的Andrea Piacquadio 的照片</figcaption></figure><p id="0a16" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">重构很难。每个开发人员都会遇到重构的十字路口。继续重构，或者重置一切。</p><blockquote class="mc md me"><p id="6ab3" class="lg lh mf li b lj lk kb ll lm ln ke lo mg lq lr ls mh lu lv lw mi ly lz ma mb ik bi translated">你在这个十字路口徘徊了多少次？</p></blockquote><p id="d31d" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">太多次了。我们都在那里，直到今天也是。</p><p id="06f0" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">让代码保持原样，或者将当前的代码行为更改为新的行为。</p><p id="b29c" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">这里有一个何时停止的想法。为什么停下来。</p><h1 id="e1d4" class="mj mk ir bd ml mm mn mo mp mq mr ms mt kg mu kh mv kj mw kk mx km my kn mz na bi translated">refactor带来了哪些问题？</h1><p id="ffa1" class="pw-post-body-paragraph lg lh ir li b lj nb kb ll lm nc ke lo lp nd lr ls lt ne lv lw lx nf lz ma mb ik bi translated">你可能认为重构不会带来任何麻烦。嗯，可以的。重构会降低软件质量。</p><p id="0798" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">对几个质量因素进行了实证检验。可重用性、灵活性、可扩展性和有效性。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div class="gi gj ng"><img src="../Images/86cb3bf44e4160a5de40373da2d10eae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*hfXpLsYdCFeOi7TSoqg5HQ.png"/></div><figcaption class="lb lc gk gi gj ld le bd b be z dk translated">重构对质量因素的影响综述</figcaption></figure><p id="516e" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">重构改进了大部分代码，接近三分之二。我们可以注意到一些因素保持不变。</p><p id="e0b4" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">重构本身并没有好坏之分。重构会使代码在某些方面没有改进。</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj nh"><img src="../Images/b32f3ba9268c1a69734edf9128d5a2d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L4cGUsPCKRuIHfEDKSvrRA.png"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk translated">基于概率评分的Bug诱导技术</figcaption></figure></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><p id="3e4e" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">你在拿项目的健康冒险。打破现有行为。如果没有适当的测试覆盖，这种情况会经常发生。</p><blockquote class="mc md me"><p id="0c23" class="lg lh mf li b lj lk kb ll lm ln ke lo mg lq lr ls mh lu lv lw mi ly lz ma mb ik bi translated">不能保证一次重构就能提高代码的质量。⁴</p></blockquote><p id="cae5" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">票的范围越来越大。推进交货时间。</p><p id="797e" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">新人，新人，重构者。将新技术添加到项目中。添加新范例。把问题从一个转换到另一个。</p><p id="05c3" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">删除旧代码。讨论前删除。添加改变行为的新代码。</p><p id="2c43" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">重构导致分析瘫痪。想太多了。努力做到完美。不想让别人失望。</p><blockquote class="mc md me"><p id="729b" class="lg lh mf li b lj lk kb ll lm ln ke lo mg lq lr ls mh lu lv lw mi ly lz ma mb ik bi translated">没有完美的软件。</p></blockquote></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><h1 id="b1f1" class="mj mk ir bd ml mm np mo mp mq nq ms mt kg nr kh mv kj ns kk mx km nt kn mz na bi translated">开发人员如何进行重构？</h1><p id="ee79" class="pw-post-body-paragraph lg lh ir li b lj nb kb ll lm nc ke lo lp nd lr ls lt ne lv lw lx nf lz ma mb ik bi translated">我们知道重构的问题。开发者如何重构？</p><p id="e941" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">大多数重构都以快速解决方案告终。这是为了避免让学长失望。</p><p id="38c1" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">开发人员寻求快速解决方案。他们不从上下文相关的开始。难的那些。</p><blockquote class="mc md me"><p id="c1d6" class="lg lh mf li b lj lk kb ll lm ln ke lo mg lq lr ls mh lu lv lw mi ly lz ma mb ik bi translated">开发人员倾向于简单的重构。⁴</p></blockquote><p id="7f89" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">重写一件事——会引起连锁反应。现在您需要修补依赖关系。循环往复。</p><p id="76a1" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">有些甚至不重构。很快他们甚至不会编码。</p><p id="6497" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">更好的方法是逐步重构。具有返回的能力，例如通过特征开关。</p><p id="726d" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">开发人员重构，但没有测试。因为不存在测试，所以它们会影响现有的行为。</p><p id="10bc" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">重构不应该改变现有的行为。好例子:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="nu nv l"/></div></figure></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><h1 id="b1e4" class="mj mk ir bd ml mm np mo mp mq nq ms mt kg nr kh mv kj ns kk mx km nt kn mz na bi translated">何时停止重构？</h1><p id="5461" class="pw-post-body-paragraph lg lh ir li b lj nb kb ll lm nc ke lo lp nd lr ls lt ne lv lw lx nf lz ma mb ik bi translated">当项目不值得花时间的时候。没有真正的用户。没有真正的问题。</p><blockquote class="mc md me"><p id="7c1c" class="lg lh mf li b lj lk kb ll lm ln ke lo mg lq lr ls mh lu lv lw mi ly lz ma mb ik bi translated">一旦人们迷上了它，花时间把它提高到90%的正确程度。</p></blockquote><p id="5bf2" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">当即将发布时。发布前的重构会导致很多问题。如果处理不当。不过，我不建议。</p><p id="e170" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">我们都知道正确的事情。正确的做法是重构。但这并不总是正确的做法。</p></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><p id="4d83" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">有时候越糟越好。你需要简单。项目成功后会有时间进行重构。争取简单、可爱和完整的解决方案。</p><p id="6788" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">正如理查德在某些场合所说的“越差越好”。为了简单而牺牲一致性、正确性和完整性。不要添加更多的代码，没有必要。</p><p id="5449" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">牢记产品愿景。</p><p id="db87" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">你在为谁编码？什么产品推向市场？你真的需要关注重构，或者修复签出错误吗？</p></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><blockquote class="mc md me"><p id="8a28" class="lg lh mf li b lj lk kb ll lm ln ke lo mg lq lr ls mh lu lv lw mi ly lz ma mb ik bi translated">什么时候做重构？</p></blockquote><p id="61df" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">你有顾客，但很少发行。现在是重构的时候了。</p><p id="a03b" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">不要进一步延长重构。愤怒的顾客会受不了的。</p></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><blockquote class="mc md me"><p id="dfbd" class="lg lh mf li b lj lk kb ll lm ln ke lo mg lq lr ls mh lu lv lw mi ly lz ma mb ik bi translated">你是重构的合适人选吗？</p></blockquote><p id="4838" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">问问你自己。你是修理工还是制造者？</p><p id="37ca" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">开发人员喜欢修改代码。制造者，创造新的代码。修理者改善现有的。</p><p id="f1d5" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">当你进退两难时。问问你团队里的修理工。那些即时改造软件的人。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="nu nv l"/></div></figure></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><h1 id="23dd" class="mj mk ir bd ml mm np mo mp mq nq ms mt kg nr kh mv kj ns kk mx km nt kn mz na bi translated">参考</h1><p id="c232" class="pw-post-body-paragraph lg lh ir li b lj nb kb ll lm nc ke lo lp nd lr ls lt ne lv lw lx nf lz ma mb ik bi translated"><a class="ae lf" href="https://www.jwz.org/doc/worse-is-better.html" rel="noopener ugc nofollow" target="_blank">【1】</a>理查德·加百列《越糟越好》</p><p id="076f" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">[2]沙特纳维、雷德和李玮。"使用层次质量模型对重构对软件质量影响的实证评估."<em class="mf">国际软件工程及其应用杂志</em>5.4(2011):127–149。</p><p id="83f8" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">[3] Bavota，Gabriele等《重构什么时候会诱发bug？一项实证研究。”<em class="mf"> 2012 IEEE第12届源代码分析与操作国际工作会议</em>。IEEE，2012年。</p><p id="62b9" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">[4] Szoke，Gábor等人，“批量修复编码问题及其对软件质量的影响:值得重构吗？."<em class="mf"> 2014 IEEE第14届源代码分析与操纵国际工作会议</em>。IEEE，2014年。</p></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><h1 id="0573" class="mj mk ir bd ml mm np mo mp mq nq ms mt kg nr kh mv kj ns kk mx km nt kn mz na bi translated">灵感</h1><div class="nw nx gq gs ny nz"><a href="https://stackoverflow.com/questions/4760074/advice-on-working-with-legacy-code" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd jb gz z fq oe fs ft of fv fx ja bi translated">关于使用遗留代码的建议</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">我需要一些关于如何处理遗留代码的建议。不久前，我被分配了一个任务，给一个…</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">stackoverflow.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kz nz"/></div></div></a></div><div class="nw nx gq gs ny nz"><a href="https://softwareengineering.stackexchange.com/questions/200545/over-thinking-development/200606#200606" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd jb gz z fq oe fs ft of fv fx ja bi translated">过度思维发展</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">我已经做了一年半的应用程序开发人员(我知道时间不长)，我刚刚得到了我的第一个…</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">softwareengineering.stackexchange.com</p></div></div><div class="oi l"><div class="oo l ok ol om oi on kz nz"/></div></div></a></div><div class="nw nx gq gs ny nz"><a href="https://softwareengineering.stackexchange.com/questions/97985/should-i-plan-ahead-or-figure-out-programs-as-im-writing-them?noredirect=1&amp;lq=1" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd jb gz z fq oe fs ft of fv fx ja bi translated">我应该提前计划，还是在写程序的时候就想好？</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">我也会发表我的意见。开始之前在纸上写下一个完整的计划是一个“CS 101”练习…</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">softwareengineering.stackexchange.com</p></div></div><div class="oi l"><div class="op l ok ol om oi on kz nz"/></div></div></a></div><div class="nw nx gq gs ny nz"><a href="https://www.quora.com/What-mistakes-do-new-software-developers-make-when-refactoring-code" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fp"><div class="ob ab oc cl cj od"><h2 class="bd jb gz z fq oe fs ft of fv fx ja bi translated">新的软件开发人员在重构代码时会犯哪些错误？</h2><div class="og l"><h3 class="bd b gz z fq oe fs ft of fv fx dk translated">答案(3之1):1。不考虑旧程序所做的一切。开发人员可能会查看一些旧程序…</h3></div><div class="oh l"><p class="bd b dl z fq oe fs ft of fv fx dk translated">www.quora.com</p></div></div><div class="oi l"><div class="oq l ok ol om oi on kz nz"/></div></div></a></div></div></div>    
</body>
</html>