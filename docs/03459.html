<html>
<head>
<title>NodeJS — Using ES Modules Instead of CommonJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">NodeJS —使用 ES 模块而不是 CommonJS</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/nodejs-using-es-modules-instead-of-commonjs-9c6e801e7508?source=collection_archive---------0-----------------------#2020-11-07">https://blog.devgenius.io/nodejs-using-es-modules-instead-of-commonjs-9c6e801e7508?source=collection_archive---------0-----------------------#2020-11-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="9fb1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不用打包使用 es 模块，NodeJS 版正式可以使用 ES 模块了！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a5fd450e6d9d0adcebf9b1e09e1610c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWtd0ICzciQ5gl-9cDAenA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">NodeJS —使用 ES 模块而不是 CommonJS</figcaption></figure><p id="3f04" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我已经有一段时间没有写文章了，那时发生了很多事情。现在没关系了，我回来了，准备再写一些！</p><p id="2351" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我要再次告诉你关于 NodeJS，现在，我们集中在 NodeJS 代码，我们基本上要实现 ES 模块到我们的代码。为了什么？事情是这样的，如果你来自前端并加入后端，如果你来自<strong class="jm io"> ReactJS </strong>、<strong class="jm io"> AngularJS </strong>或<strong class="jm io"> VueJS </strong>，你主要在那里处理 ES 模块。你总是使用 ES 模块编码。但是，当你使用 NodeJS 到达后端时，你不能使用那种代码，比如<code class="fe ky kz la lb b">import</code>、<code class="fe ky kz la lb b">export default</code>和<code class="fe ky kz la lb b">export</code>。</p><p id="2c5a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我将向您解释如何在 NodeJS 版本 14 中实现 ES 模块。在 NodeJS 低于 14 的以前版本中，你必须设置一些东西或者安装一个第三方包来使用这个 ES 模块，我认为这有点浪费时间。</p></div><div class="ab cl lc ld hr le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ig ih ii ij ik"><p id="0076" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们进入主题之前，你总是在 NodeJS 中看到这些代码吗？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lj"><img src="../Images/7095f5b2e447dfe14c89882622aa3f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dp8Ib0bFKpIkzryxCuYjOQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">通用 JS 方法</figcaption></figure><p id="e376" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个<strong class="jm io"> CommonJS </strong>代码，我们在互联网上看到很多关于何时在 NodeJS 应用中启动代码的代码，特别是当使用<strong class="jm io"> ExpressJS </strong>框架工作时。</p><p id="e7fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您可以像这样开始键入代码:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lk"><img src="../Images/3836bea6273dc0c79eebf546882a8953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9wtTTHqmdIHlw5UdnBp8rg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">ES 模块方法</figcaption></figure><p id="b5ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果在 NodeJS 版本 14 中使用 EcmaScript 模块，您可以使用上面的典型语法，并且不需要任何第三方来设置。</p><p id="1a95" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当您来自总是使用 es 模块编码的前端时，您可以很容易地理解发生了什么。</p></div><div class="ab cl lc ld hr le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ig ih ii ij ik"><h1 id="42c1" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">遵循这篇文章的要求</h1><ol class=""><li id="aeb7" class="mj mk in jm b jn ml jr mm jv mn jz mo kd mp kh mq mr ms mt bi translated">非常基础的 JavaScript。</li><li id="d42d" class="mj mk in jm b jn mu jr mv jv mw jz mx kd my kh mq mr ms mt bi translated">非常基础的 NodeJS / ExpressJS。</li></ol><h1 id="96f9" class="ll lm in bd ln lo mz lq lr ls na lu lv lw nb ly lz ma nc mc md me nd mg mh mi bi translated">跟随这篇文章的必备工具</h1><h2 id="9f30" class="ne lm in bd ln nf ng dn lr nh ni dp lv jv nj nk lz jz nl nm md kd nn no mh np bi translated"><strong class="ak"> 1。NodeJS </strong></h2><p id="9e3d" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv nq jx jy jz nr kb kc kd ns kf kg kh ig bi translated">重要的是<strong class="jm io"> NodeJS </strong>本身，你可以在这里下载(<a class="ae nt" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/en</a>)。我推荐安装<strong class="jm io"> LTS </strong>版本，我目前用的是 v14.15.0 <em class="nu">。</em></p><h2 id="13be" class="ne lm in bd ln nf ng dn lr nh ni dp lv jv nj nk lz jz nl nm md kd nn no mh np bi translated">2.文字编辑器</h2><p id="da48" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv nq jx jy jz nr kb kc kd ns kf kg kh ig bi translated">有很多文本编辑器，我更喜欢使用可以在这里下载的<strong class="jm io">vs code</strong>(<a class="ae nt" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com</a>)。如果你想使用像<strong class="jm io"> Sublime Text </strong>或<strong class="jm io"> Atom、</strong>这样的文本编辑器，选择适合你的工具就可以了。</p></div><div class="ab cl lc ld hr le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ig ih ii ij ik"><h1 id="fbef" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">我为什么写这篇文章</h1><p id="a7c7" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv nq jx jy jz nr kb kc kd ns kf kg kh ig bi translated">当从前端移动到后端时，我遇到了一个问题，主要是如果你是一个使用 Node / ExpressJS 作为后端的全栈 javascript 开发者。当我在前端使用 es 模块而不是后端仍然使用 CommonJS 时，我会遇到一些问题，当你只是以不同的命名约定编写相同功能的代码时，这很奇怪。这就像是一个<strong class="jm io">风格的代码</strong>，如果你去个人的方式。</p></div><div class="ab cl lc ld hr le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ig ih ii ij ik"><p id="a552" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感兴趣吗？下面是使用这种代码的简单方法。我假设您已经安装了 NodeJS LTS 版本 14。</p><h2 id="423d" class="ne lm in bd ln nf ng dn lr nh ni dp lv jv nj nk lz jz nl nm md kd nn no mh np bi translated">1.初始化 package.json</h2><p id="fa4b" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv nq jx jy jz nr kb kc kd ns kf kg kh ig bi translated">创建您自己的项目文件夹，开始在您的代码中使用 ES 模块，命名您想要的任何名称，进入该文件夹，并开始在您的终端或 CMD 中键入该命令。</p><pre class="kj kk kl km gt nv lb nw nx aw ny bi"><span id="901c" class="ne lm in lb b gy nz oa l ob oc">npm init -y</span></pre><p id="69df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的代码用于为应用程序生成入口点。下面是第一次生成第一个<strong class="jm io"> package.json </strong>时的代码示例。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/75ed1b31a7e9ed99d6b34942c714f1ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wB6fzQuMFglDw8Qo4SAfnw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">新鲜包装 JSON</figcaption></figure><p id="a9a9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，开始在你的应用程序中使用 ES 模块非常简单，你只需将这段代码添加到你的<strong class="jm io">包中。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi od"><img src="../Images/af78bd4e9cf4a6cbdf36d4d9ee911d0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E_SS4XCs6jpqo--VKPhwbg.png"/></div></div></figure><p id="b460" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就这样？阿雅，你只要加上那个<code class="fe ky kz la lb b">"type": "module” </code>就可以开始了。</p><p id="a961" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里有一些值得注意的地方，请阅读下一步。</p><h2 id="44d4" class="ne lm in bd ln nf ng dn lr nh ni dp lv jv nj nk lz jz nl nm md kd nn no mh np bi translated">2.导入架构</h2><p id="09da" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv nq jx jy jz nr kb kc kd ns kf kg kh ig bi translated">在 ES 模块中导入的常用方法很简单，对吗？就像这个例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oe"><img src="../Images/0832a83a848dc5026124b447ea04e06e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CEgqBWZ8msAkCqTkhRipgw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">通用 ES 模块导入语法</figcaption></figure><p id="d0bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个代码没有任何问题。但是，当您在 NodeJS 应用程序中使用它时，您必须这样做。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lj"><img src="../Images/f353b9076b9005be7ac67540a4a8f1ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PWdqLR-5-xoQMG_rxj7OUA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">节点 Es 模块导入语法</figcaption></figure><p id="1042" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">是的，没错，你已经注意到了区别，在 NodeJS 中你必须输入<strong class="jm io">文件格式</strong>来导入 NodeJS。这有点奇怪，但这是使用它的方法。<strong class="jm io"> <em class="nu">除外，如果导入第三方模块，就不需要那个文件格式</em> </strong>。</p><p id="bf71" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:</strong>如果您没有使用文件格式的导入，您将得到一个错误！</p><h2 id="4d7d" class="ne lm in bd ln nf ng dn lr nh ni dp lv jv nj nk lz jz nl nm md kd nn no mh np bi translated">3.出口</h2><p id="86d0" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv nq jx jy jz nr kb kc kd ns kf kg kh ig bi translated">当你开始在 NodeJS 中使用这个 ES 模块时，我想告诉你的最后一件事是当使用 export 时，想象一下，如果你有一个名为<strong class="jm io"> utils 的文件夹，在 utils 文件夹中有许多文件你必须导出才能在另一个文件中使用，在这种情况下，你想让一个<strong class="jm io"> index.js </strong>开始指向所有你想导出的文件。有道理吗？如果你不明白😁，下面是简单的示例代码。</strong></p><p id="21e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我有一个<strong class="jm io"> utils </strong>文件夹，其中包含一个文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/110b891646ef23c368b654467748ae73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XgIrl8Pgw5hEC2oInDFhVA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">util 文件夹中导出的函数</figcaption></figure><p id="f3b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了使导入变得简单，你需要在 utils 文件夹中创建一个名为<strong class="jm io"> index.js </strong>的文件，这样当你想获得那些函数时，你只需指向该文件夹并获得你想要的任何东西。</p><p id="f302" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里有一个非常简单的代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/e23d170de3e433ba48216f7a91a0a37f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aV3uFibOMZDi5ruxzPSLaA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">从文件中导出所有内容</figcaption></figure><p id="b3de" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好吧，明白了吗？重点是，你想在一个文件中获得所有你已经创建的导出函数，为了使导入更容易，你只需指向<strong class="jm io"> utils </strong>文件夹并启动一切。但是，你不能这样写你的代码。当开始使用 NodeJS 中的 es 模块时，我会感到困惑😂。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/eae8a87f155b02f5e45596531c9eec83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RLAx6yTIx82ta2SXE7C-Jg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">不起作用—全部导出。</figcaption></figure><p id="4209" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您使用该代码，它将不起作用。它有什么问题？是快速猜测…是的，没错，你<strong class="jm io">必须</strong>仍然导入<strong class="jm io"> index.js </strong>文件<strong class="jm io"> </strong>来工作！我是说，什么？！😶</p><p id="7afb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了让代码工作，就像这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/64168dbc30ef8c2bec9eb2b0ea1ca456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qClHbIPudKocq1fS7LurGg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">导出所有工作</figcaption></figure><p id="ce0d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">什么时候开始搜索这个问题让我背疼😁，但你去那里。你可以从这种出口开始工作。</p></div><div class="ab cl lc ld hr le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ig ih ii ij ik"><h1 id="4cbc" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">结论</h1><p id="2bfe" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv nq jx jy jz nr kb kc kd ns kf kg kh ig bi translated">就是它的，有一个简单的实现 ES 模块到我们 NodeJS app 的例子，没有太大的区别。不同之处在于导入和导出，您必须包括您的文件格式才能开始使用它。</p><p id="854a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要获得更深入的解释，您可以在这里访问 NodeJS 文档，有很多方法可以实现，但我写这篇文章的方式是为了简单起见，当您从前端移动到后端而不使用第三方包时。</p><div class="oi oj gp gr ok ol"><a href="https://nodejs.org/dist/latest-v14.x/docs/api/packages.html#packages_determining_module_system" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd io gy z fp oq fr fs or fu fw im bi translated">Node.js v15.0.1 文档</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">包是由 package.json 文件描述的文件夹树。该包由包含…的文件夹组成</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">nodejs.org</p></div></div></div></a></div><p id="c7b3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">谢谢你，祝你愉快，下一篇文章再见！生活真美好！☕☕</p></div></div>    
</body>
</html>