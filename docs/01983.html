<html>
<head>
<title>The mystery of .setState</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">的奥秘。设置状态</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-mystery-of-setstate-bae4143b1e96?source=collection_archive---------34-----------------------#2020-07-15">https://blog.devgenius.io/the-mystery-of-setstate-bae4143b1e96?source=collection_archive---------34-----------------------#2020-07-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0883" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我开始钻研React已经四天了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/acb0828f78e362393c05a2ff72d22e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*rIvfTvJ3h6VkYTrM6Dlllw.gif"/></div></figure><p id="e8a9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我能说什么呢？这是一个真正强大的工具。强大——但一点也不容易。你肯定会纠结于语法和新概念，尤其是如果你是个新手。这些奇怪但有趣的概念之一是. setState函数。</p><p id="3700" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是，不要操之过急！首先:这种状态是什么？</p><p id="11bd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> State </strong>是React组件的普通JavaScript对象(React组件是构成用户界面(UI)的可重用代码)。这意味着，在状态中，我们可以存储属于一个组件的值。</p><p id="18fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是等等！那么<strong class="jm io">道具</strong>呢？它也是React用来存储值的JavaScript对象。不用深入黑暗深处，考虑一下这个:道具是不可改变的。这是我们需要国家的主要原因。你不能改变道具，它们是静态的。有时它对我们有用，但有时我们需要让我们的应用程序更有活力。国家队来了！</p><p id="9791" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">重要提示:</strong>你不必在每个React组件中都使用状态！只有在运行应用程序时需要可以更改的参数时，才使用它。</p><p id="b51e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">记住这一点，让我们来看看我们实际上是如何用这个神秘的. setState对值进行变异的例子。</p><p id="4faa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">。setState </strong>是一个内置的React函数。我们绝对需要它，因为新值的直接赋值对state不起作用:我们应该遵循约定。这是我的一个例子，灵感来自我最喜欢的电视节目《神秘博士》。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kq"><img src="../Images/2ccaf67b4d8a8538ec3bd503b0bcfd74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4lr4mEI7Z91D37U4ID7hhQ.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">使用示例。设置状态</figcaption></figure><p id="0167" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">类组件的代码类似于下面的伪代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kz"><img src="../Images/99d0223f62917b2a5e0ac6cc50361fac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pgRhtpVjR4uKyJJJejT6hw.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">。setState伪代码</figcaption></figure><p id="ba21" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，在一些旧代码中，您可能会遇到不同的、更复杂的语法，包括<strong class="jm io">构造函数()</strong>和<strong class="jm io">超级()</strong>。不要反应过度！它做同样的工作。不过用plain <strong class="jm io"> state = {} </strong>完全没问题。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi la"><img src="../Images/130a8ccaf2a9a03d3a26c38c7f7aa030.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gf2lVSD0ildP0Y-iCKOyrw.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">老式的。setState伪代码</figcaption></figure><p id="da41" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">重要:</strong>别忘了<strong class="jm io">。设置状态</strong>是异步的。我们在它之后写的代码不会看到我们刚刚声明的新状态。要解决这个问题，我们需要添加一个回调作为第二个参数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lb"><img src="../Images/da9498fd969a08ad3cea2df264bcc0ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPOiUCBBTIxBnGYWaG2GiQ.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">。使用回调函数设置状态</figcaption></figure><p id="9b8e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一点都不神秘，是吧？这只是一个基本的方法，但我相信它足以开始你的反应之旅。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/cb2a92124debef696e9528da48d743ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:726/1*9E-azwNjN-gd_sr7hQX7pw.gif"/></div></figure><p id="fbf6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">来源:</strong></p><ol class=""><li id="fb5f" class="ld le in jm b jn jo jr js jv lf jz lg kd lh kh li lj lk ll bi translated"><a class="ae lm" href="https://css-tricks.com/understanding-react-setstate/" rel="noopener ugc nofollow" target="_blank">理解反应过来。设置状态</a></li><li id="1574" class="ld le in jm b jn ln jr lo jv lp jz lq kd lr kh li lj lk ll bi translated"><a class="ae lm" href="https://riptutorial.com/reactjs/example/5936/setstate--" rel="noopener ugc nofollow" target="_blank">做出反应。设置状态</a></li><li id="ffee" class="ld le in jm b jn ln jr lo jv lp jz lq kd lr kh li lj lk ll bi translated"><a class="ae lm" href="https://www.freecodecamp.org/news/get-pro-with-react-setstate-in-10-minutes-d38251d1c781/" rel="noopener ugc nofollow" target="_blank">如何在10分钟内用React setState()成为pro</a>(这个比较高级但是强烈推荐！)</li><li id="1d47" class="ld le in jm b jn ln jr lo jv lp jz lq kd lr kh li lj lk ll bi translated"><a class="ae lm" href="https://github.com/uberVU/react-guide/blob/master/props-vs-state.md" rel="noopener ugc nofollow" target="_blank">道具vs状态</a></li><li id="fbf7" class="ld le in jm b jn ln jr lo jv lp jz lq kd lr kh li lj lk ll bi translated">Learn.co</li></ol></div></div>    
</body>
</html>