<html>
<head>
<title>What Are .env Files And How Should I Use Them ? And Why ?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是？env 文件以及我应该如何使用它们？为什么呢？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-are-env-files-and-how-should-i-use-them-and-why-5fdb1d228016?source=collection_archive---------0-----------------------#2022-07-10">https://blog.devgenius.io/what-are-env-files-and-how-should-i-use-them-and-why-5fdb1d228016?source=collection_archive---------0-----------------------#2022-07-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="213e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在线部署 web 应用程序/项目时，您最不希望的就是泄露敏感信息，如一些身份验证令牌或 api 密钥等</p><p id="9185" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就引出了一个问题:<strong class="jm io">我如何保护我的程序需要的敏感数据？</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a0f344158bc685080ce4bbeedb0ae754.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xF6vqnl8hdtrm9rm"/></div></div></figure><p id="b255" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在要回答你的问题我们首先需要知道什么是<strong class="jm io"> <em class="ku">环境变量</em> </strong></p><p id="320f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">环境变量</strong></p><p id="2b8f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">像往常一样，我会引用维基百科的部分内容，然后告诉你你需要了解我们的背景</p><blockquote class="kv kw kx"><p id="6fe7" class="jk jl ku jm b jn jo jp jq jr js jt ju ky jw jx jy kz ka kb kc la ke kf kg kh ig bi translated">环境变量是一个动态命名的值，它可以影响计算机上正在运行的进程的行为方式</p></blockquote><p id="1ddf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">基本上，环境变量只是你的系统需要的一个常规变量，而不是一个程序……我会进一步解释</p><p id="0e3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们知道变量只是程序需要的一段数据，例如一个存储名字的变量，这样我们就可以用这个名字来称呼它，也就是说，程序本身只需要这个变量，不需要别的，只需要一个特定的程序</p><p id="f9f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">同时，顾名思义，环境变量是环境本身也就是你的操作系统所需要的！</p><p id="ea77" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你知道一个操作系统有一个巨大的 biggggg 库和它需要运行来维护系统的软件，这些程序经常需要一些关于系统本身的信息，它们肯定会改变某个系统程序的行为</p><p id="8999" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">如何查看我的环境变量？(Linux) </strong></p><p id="9a86" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您知道可以在本地系统上查看当前的环境变量吗？举例来说，Linux 会跟踪一堆这样的文件，我们可以用命令<code class="fe lb lc ld le b">env</code>查看它们，要打印它们，我们只需使用<code class="fe lb lc ld le b">echo</code>后跟一个＄[ VARIABLE ],因此要打印当前的 shell，只需键入<code class="fe lb lc ld le b">echo $SHELL</code></p><p id="86b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意命名约定，您需要使用大写字母作为环境变量</p><p id="53e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">如何添加自己的环境变量？</strong></p><p id="1e5b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以你一定很想知道如何添加自己的环境变量，以防在你的 bash 脚本或任何东西中需要它们，这相当简单，你需要做的就是使用下面格式的<code class="fe lb lc ld le b">set</code>命令<code class="fe lb lc ld le b">export NAME=VALUE </code>，例如<code class="fe lb lc ld le b">export MEOW=simba</code></p><p id="44b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了查看它们，我们像前面一样使用<code class="fe lb lc ld le b">echo</code>命令，请注意，您以这种方式设置的那些变量将只存在于当前用户会话中，换句话说，一旦您关闭终端并再次启动它，它们就会消失</p><p id="d3c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">杰夫泄露了他的 API 密钥</strong>😱</p><p id="79a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们假设 Jeff 刚刚使用 node.js 构建了一个最恶心的不和谐机器人来告诉天气，他很兴奋地在他的 github 上展示它</p><p id="aecb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是几个小时后……这个机器人没有返回它应该返回的当前天气，嗯，很奇怪，不是吗？Jeff 访问 api 提供商网站，查看他的控制面板，看他使用了多少每日配额……..它不见了，但这是怎么发生的呢</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="e7ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当 Jeff 将项目部署到他的 Github repo 时，他忘记隐藏他的天气 api 密钥，api 密钥用于验证用户并确保他们不会过多地使用资源，因此 Jeff 允许任何查看代码的人看到他的 api 密钥并在他们自己的应用程序中使用它，最终滥用密钥并使 Jeff 无法进行日常使用</p><p id="433d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们怎样才能不像杰夫那样结束自己</p><p id="0eae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">相信我，你不想像 Jeff 一样，你必须保护你的 api 密钥或身份验证令牌或任何只应由你使用的身份验证信息，那么我们如何做到这一点？</p><p id="69f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本例中，我们将假设我们正在构建某个 node.js 应用程序，因为您无法在前端真正隐藏您的凭据，只需检查网络选项卡，您就可以看到请求标头，然后你就完蛋了</p><p id="4a4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建一个名为<code class="fe lb lc ld le b">.env</code>的文件，是的，只是一个没有文件名的扩展名，我们将添加我们的超级密钥</p><pre class="kj kk kl km gt lh le li lj aw lk bi"><span id="0a5e" class="ll lm in le b gy ln lo l lp lq">API_KEY="SUPER SECRET API KEY"<br/>CONSUMER_KEY="some other stuff here"<br/>OTHER_VERY_SECRET_TOKEN="blah blah"</span></pre><p id="1f1e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">我们如何访问这些变量</strong></p><p id="59ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好吧，我们的钥匙藏起来了，我们该怎么办？在 node 中，我们将安装一个名为<code class="fe lb lc ld le b">dotenv</code>的包，然后点击<code class="fe lb lc ld le b">npm i dotenv</code>，现在在你的脚本中，你可以像这样使用<code class="fe lb lc ld le b">process.env</code>来访问密钥</p><pre class="kj kk kl km gt lh le li lj aw lk bi"><span id="6d2c" class="ll lm in le b gy ln lo l lp lq">require('dotenv').config();</span><span id="7885" class="ll lm in le b gy lr lo l lp lq">let api_key = process.env.API_KWY;</span><span id="2d0b" class="ll lm in le b gy lr lo l lp lq">// OR YOU COULD ACCESS THEM AS AN ARRAY</span><span id="5f25" class="ll lm in le b gy lr lo l lp lq">let api_key = process.env['API_KEY']</span></pre><p id="3e26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就像这样，你可以在你的脚本中安全地使用你的凭证，但是在我们实际上可以在线共享它之前需要一个额外的安全层——例如，在 github 上作为一个完整的项目共享它的情况下</p><p id="657b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">。GITIGNORE 文件</strong></p><p id="0f26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，当我们通常共享一个项目时，比如说一个 react 应用程序，我们需要让人们能够克隆回购并开始本地开发，对吗？正如我们上面提到的，环境变量对我们的程序至关重要，因为它们只是引用我们的数据的一种安全方式，所以现在你可能会问自己……如果我将整个项目共享给我的 Github，这难道不会暴露我的凭证吗，因为我实际上也在共享<code class="fe lb lc ld le b">.env</code>文件？</p><p id="8fce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lb lc ld le b">.gitignore</code> file 是一个我们用来<em class="ku">忽略</em>文件和目录的文件，这些文件和目录被包含在我们的版本控制中，也就是被推送到我们在 Github 上的 repo 中，所以让我们创建一个文件来忽略我们的<code class="fe lb lc ld le b">.env</code>文件，并享受在 Github 上共享病态的 discord bot，而不损害我们的 api 密钥和东西</p><p id="e830" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建一个<code class="fe lb lc ld le b">.gitignore</code>文件，添加这一行<code class="fe lb lc ld le b">.env</code>，就这样🎉你现在已经成功保护了你的应用，你应该始终使用此工作流</p><p id="f757" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">快速回顾一下</strong></p><ul class=""><li id="4a19" class="ls lt in jm b jn jo jr js jv lu jz lv kd lw kh lx ly lz ma bi translated">环境变量是正常的变量，除非它们存在并被我们的系统使用</li><li id="758b" class="ls lt in jm b jn mb jr mc jv md jz me kd mf kh lx ly lz ma bi translated">我们可以在程序中创建自己的环境变量，以避免硬编码敏感信息和损害我们的应用程序</li><li id="9205" class="ls lt in jm b jn mb jr mc jv md jz me kd mf kh lx ly lz ma bi translated">文件用于存储这些变量，为了命名约定，它们应该全部大写，用下划线分隔</li><li id="a7f7" class="ls lt in jm b jn mb jr mc jv md jz me kd mf kh lx ly lz ma bi translated">在安装了<code class="fe lb lc ld le b">dotnev</code> npm 包之后，我们通过<code class="fe lb lc ld le b">process.env</code>访问这些变量</li><li id="539d" class="ls lt in jm b jn mb jr mc jv md jz me kd mf kh lx ly lz ma bi translated">当我们使用版本控制在 Github 上共享时，我们使用<code class="fe lb lc ld le b">.gitignore</code>文件来避免将我们的<code class="fe lb lc ld le b">.env</code>文件推到我们的回购协议中</li></ul></div><div class="ab cl mg mh hr mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ig ih ii ij ik"><p id="fc61" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">非常感谢您的阅读，请确保关注更多酷酷的博客，祝您在♥️度过愉快的一天/一夜</strong></p></div></div>    
</body>
</html>