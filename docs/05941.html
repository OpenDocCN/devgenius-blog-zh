<html>
<head>
<title>Refactoring 002 — Extract Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">重构 002 —提取方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/refactoring-002-extract-method-1478f421b35a?source=collection_archive---------2-----------------------#2021-11-25">https://blog.devgenius.io/refactoring-002-extract-method-1478f421b35a?source=collection_archive---------2-----------------------#2021-11-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2eac" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">找到一些可以分组并被原子调用的代码片段。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/42b0cc0e7425fe2ccf7b2bd55800e371.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z8H6IkQ1ig1NsKPNIHcdOA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">图片来自<a class="ae ks" href="https://pixabay.com/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>的<a class="ae ks" href="https://pixabay.com/users/hreisho-2216364/" rel="noopener ugc nofollow" target="_blank"> Hreisho </a></figcaption></figure><blockquote class="kt ku kv"><p id="3de1" class="kw kx ky kz b la lb jo lc ld le jr lf lg lh li lj lk ll lm ln lo lp lq lr ls ig bi translated">TL；大卫:把你的连贯句子组合在一起</p></blockquote><h1 id="8274" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">解决的问题</h1><ul class=""><li id="f4a1" class="ml mm in kz b la mn ld mo mp mq mr ms mt mu ls mv mw mx my bi translated">可读性</li><li id="7f82" class="ml mm in kz b la mz ld na mp nb mr nc mt nd ls mv mw mx my bi translated">复杂性</li><li id="d783" class="ml mm in kz b la mz ld na mp nb mr nc mt nd ls mv mw mx my bi translated">代码重用</li></ul><h1 id="7517" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">相关代码气味</h1><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-03-functions-are-too-long-accea7eb4ae9"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd io gy z fp nm fr fs nn fu fw im bi translated">代码气味 03 —函数太长</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">人类过了 10 线就烦了。</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">blog.devgenius.io</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv km nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-05-comment-abusers-feec3aeb926"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd io gy z fp nm fr fs nn fu fw im bi translated">代码气味 05 —评论滥用者</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">代码有很多注释。注释与实现联系在一起，很难维护。</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">blog.devgenius.io</p></div></div><div class="nq l"><div class="nw l ns nt nu nq nv km nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-18-static-functions-68d35c15e76"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd io gy z fp nm fr fs nn fu fw im bi translated">代码味道 18 —静态函数</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">又一个全球接入加上懒惰。</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">blog.devgenius.io</p></div></div><div class="nq l"><div class="nx l ns nt nu nq nv km nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-22-helpers-1d5057137ddb"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd io gy z fp nm fr fs nn fu fw im bi translated">代码气味 22 —助手</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">你需要帮助吗？你要给谁打电话？</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">blog.devgenius.io</p></div></div><div class="nq l"><div class="ny l ns nt nu nq nv km nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-74-empty-lines-66d8d41d83e4"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd io gy z fp nm fr fs nn fu fw im bi translated">代码气味 74 —空行</h2><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">blog.devgenius.io</p></div></div><div class="nq l"><div class="nz l ns nt nu nq nv km nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-78-callback-hell-aeb4a3010270"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd io gy z fp nm fr fs nn fu fw im bi translated">代码气味 78 —回调地狱</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">将算法作为一系列嵌套回调来处理并不明智。</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">blog.devgenius.io</p></div></div><div class="nq l"><div class="oa l ns nt nu nq nv km nh"/></div></div></a></div><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-102-arrow-code-3e9301e83269"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd io gy z fp nm fr fs nn fu fw im bi translated">代码气味 102 —箭头代码</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">嵌套的 if 和 Elses 很难阅读和测试</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">blog.devgenius.io</p></div></div><div class="nq l"><div class="ob l ns nt nu nq nv km nh"/></div></div></a></div><h1 id="97d4" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">步伐</h1><p id="9807" class="pw-post-body-paragraph kw kx in kz b la mn jo lc ld mo jr lf mp oc li lj mr od lm ln mt oe lq lr ls ig bi translated">1.将代码片段移到一个单独的新方法中</p><p id="64c4" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mp lh li lj mr ll lm ln mt lp lq lr ls ig bi translated">2.用对最近创建的方法的调用替换旧代码。</p><h1 id="5e33" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">示例代码</h1><h2 id="59aa" class="of lu in bd lv og oh dn lz oi oj dp md mp ok ol mf mr om on mh mt oo op mj oq bi translated">以前</h2><pre class="kd ke kf kg gt or os ot ou aw ov bi"><span id="e281" class="of lu in os b gy ow ox l oy oz">object Ingenuity {<br/> fun moveFollowingPerseverance() {<br/>   //take Off<br/>   raiseTo(10 feet)<br/> <br/> //move forward to perseverance<br/>   while (distanceToPerseverance() &lt; 5 feet){<br/>     moveForward() <br/>   }<br/> <br/>   //land<br/>   raiseTo(0 feet)<br/> }</span></pre><h2 id="222d" class="of lu in bd lv og oh dn lz oi oj dp md mp ok ol mf mr om on mh mt oo op mj oq bi translated">在...之后</h2><pre class="kd ke kf kg gt or os ot ou aw ov bi"><span id="633d" class="of lu in os b gy ow ox l oy oz">object Ingenuity { <br/> //1. Move the code fragment to a separate new method <br/> private fun takeOff() {<br/>   raiseTo(10 feet)<br/> }<br/> <br/> //1. Move the code fragment to a separate new method <br/> private fun moveForwardToPerseverance() {<br/>   while (distanceToPerseverance() &lt; 5 feet){<br/>     moveForward() <br/>   }<br/> }<br/> <br/> //1. Move the code fragment to a separate new method <br/> private fun land() {<br/>  raiseTo(0 feet)<br/> }<br/> <br/> fun moveFollowingPerseverance() {<br/>   takeOff()<br/>   //2. Replace the old code with a call to the recently created   method.<br/>   moveForwardToPerseverance()<br/>   //2. Replace the old code with a call to the recently created method.<br/>   land()<br/>   //2. Replace the old code with a call to the recently created method.<br/> }<br/>}</span></pre><h1 id="0508" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">类型</h1><p id="03af" class="pw-post-body-paragraph kw kx in kz b la mn jo lc ld mo jr lf mp oc li lj mr od lm ln mt oe lq lr ls ig bi translated">许多 ide 都支持这种安全重构</p><h1 id="ecf2" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">限制</h1><p id="4ad7" class="pw-post-body-paragraph kw kx in kz b la mn jo lc ld mo jr lf mp oc li lj mr od lm ln mt oe lq lr ls ig bi translated">如果您使用元编程反模式，就不能很好地工作</p><div class="ne nf gp gr ng nh"><a href="https://codeburst.io/laziness-i-meta-programming-34ef4abdafc6" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd io gy z fp nm fr fs nn fu fw im bi translated">懒惰 I:元编程</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">元编程是神奇的。这是我们不应该使用它的主要原因。有许多可怕的后果…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">codeburst.io</p></div></div><div class="nq l"><div class="pa l ns nt nu nq nv km nh"/></div></div></a></div><h1 id="1339" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">标签</h1><ul class=""><li id="d2d2" class="ml mm in kz b la mn ld mo mp mq mr ms mt mu ls mv mw mx my bi translated">复杂性</li><li id="22e0" class="ml mm in kz b la mz ld na mp nb mr nc mt nd ls mv mw mx my bi translated">可读性</li></ul><h1 id="d0c7" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">相关重构</h1><ul class=""><li id="bbf2" class="ml mm in kz b la mn ld mo mp mq mr ms mt mu ls mv mw mx my bi translated">将方法移动到新的类中</li></ul></div><div class="ab cl pb pc hr pd" role="separator"><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg ph"/><span class="pe bw bk pf pg"/></div><div class="ig ih ii ij ik"><p id="fb96" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf mp lh li lj mr ll lm ln mt lp lq lr ls ig bi translated">本文是重构系列的一部分。</p></div></div>    
</body>
</html>