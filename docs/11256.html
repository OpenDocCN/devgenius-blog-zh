<html>
<head>
<title>Java Reflection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 反射</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/java-reflection-5545c9503f54?source=collection_archive---------4-----------------------#2022-12-28">https://blog.devgenius.io/java-reflection-5545c9503f54?source=collection_archive---------4-----------------------#2022-12-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="155d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我相信我们大多数人都听说过<strong class="jm io"> Java 反射</strong> <strong class="jm io"> API </strong>，并打算阅读或收集关于它的信息。这个博客肯定会帮助我们理解 Java 反射的一切。</p><p id="d4bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> Java 反射</strong>帮助我们在运行时读取或修改与类、字段、方法和构造函数相关的元数据。</p><p id="c9a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它允许我们获取元数据信息，如范围、修饰符、名称、参数、方法调用等。与类、字段、构造函数和方法相关。</p><p id="9379" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> java.lang.reflect </strong>包拥有<strong class="jm io">字段、方法、构造函数</strong>类，这为我们提供了获取或修改与类、字段、构造函数和方法相关的公共和私有元数据的能力。</p><p id="0ff7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">isInterface()、getSuperclass()、getName()、getClass()、getMethods()、getFields()、。getConstructors()是从<strong class="jm io"> java.lang.Class </strong>类中获取或提取元数据的一些常用和最常用的方法。</p><p id="e77d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是使用反射获取或读取元数据的步骤:</p><ol class=""><li id="4798" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">获取<strong class="jm io"> java.lang.Class </strong>类对象</li><li id="276b" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">在运行时使用类对象获取或提取类元数据。</li></ol><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi kw"><img src="../Images/767974fd41e37dcd0b6ede487a3cb314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VrHIpXI1a7tPQSK7E6y8kw.png"/></div></div></figure><p id="f9c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它需要一个<strong class="jm io"> java.lang.Class </strong>类对象来使用反射获取元数据。下面是允许我们使用反射获取元数据的方法:</p><h2 id="9d1f" class="li lj in bd lk ll lm dn ln lo lp dp lq jv lr ls lt jz lu lv lw kd lx ly lz ma bi translated">1.forName()方法:</h2><p id="353b" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated"><strong class="jm io"> forName() </strong>来自<strong class="jm io"> java.lang.Class </strong>类的静态方法允许我们创建或获取类对象。</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="81ae" class="ml lj in mh b be mm mn l mo mp">class Student { }<br/>    <br/>public class Test{    <br/><br/> public static void main(String args[]) throws Exception {<br/><br/>   // Access Student using static Student class.<br/>   Class cls = Class.forName("com.practice.core.Student");<br/> }<br/>}</span></pre><h2 id="4d93" class="li lj in bd lk ll lm dn ln lo lp dp lq jv lr ls lt jz lu lv lw kd lx ly lz ma bi translated">2.getClass()方法:</h2><p id="b071" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated"><strong class="jm io"> getClass() </strong> native final 方法从<strong class="jm io"> java.lang.Object </strong>类也允许我们获取<strong class="jm io"> java.lang.Class </strong>类对象。</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="664d" class="ml lj in mh b be mm mn l mo mp">class Student { }<br/>    <br/>public class Test{    <br/><br/> public static void main(String args[]) throws Exception {<br/>   // Create an instance of Student class<br/>   Student student = new Student();<br/>   <br/>   // getClass() method allow us to get class metadata using reflection.<br/>   Class cls = student.getClass();<br/> }<br/>}</span></pre><h2 id="a098" class="li lj in bd lk ll lm dn ln lo lp dp lq jv lr ls lt jz lu lv lw kd lx ly lz ma bi translated">3.使用。班级</h2><p id="a817" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">。类扩展还允许我们获得如下所示的<strong class="jm io"> java.lang.Class </strong>类对象:</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="1234" class="ml lj in mh b be mm mn l mo mp">class Student { }<br/>    <br/>public class Test{    <br/><br/> public static void main(String args[]) throws Exception {<br/><br/>   // .class extension also allow us to get Class class Objec.<br/>   Class cls = Student.class;<br/> }<br/>}</span></pre><h2 id="0b39" class="li lj in bd lk ll lm dn ln lo lp dp lq jv lr ls lt jz lu lv lw kd lx ly lz ma bi translated">使用反射的字段元数据</h2><p id="5823" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">下面是一个访问类字段元数据的示例，如字段名、修饰符、获取或设置值等。使用<strong class="jm io">反射</strong>。</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="6ba3" class="ml lj in mh b be mm mn l mo mp">package com.practice.core;<br/><br/>import java.lang.reflect.Field;<br/><br/>class Student {<br/> private String firstName;<br/> private String lastName;<br/> private int age;<br/>}<br/>    <br/>public class Test{    <br/><br/> public static void main(String args[]) throws Exception {<br/>  <br/>  /* <br/>    Class.forName() will return <br/>    java.lang.Class class object.<br/>  */<br/>  Class cls = Class.forName(<br/>   "com.practice.core.Student");<br/><br/>  /* <br/>    cls.getDeclaredFields() will return an <br/>    array of java.lang.reflect.Field.<br/>  */<br/>  Field[] fields = cls.getDeclaredFields();<br/><br/>  for (Field field: fields) {<br/>   System.out.println(field.getName());<br/>  }<br/> }<br/>}</span></pre><p id="59ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">输出:</strong> <br/>名字<br/>姓氏<br/>年龄</p><p id="2e25" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是从<strong class="jm io">学生</strong>类访问<strong class="jm io">私有字段名称</strong>的<strong class="jm io">反射</strong>示例。</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="ed39" class="ml lj in mh b be mm mn l mo mp">class Student {<br/>   <br/>  private String name;<br/><br/>  public Student(String name) {<br/>    this.name = name;<br/>  }<br/>}<br/>    <br/>public class Test{    <br/><br/> public static void main(String args[]) throws Exception {<br/><br/>  Student student = new Student("John");<br/><br/>  // Access name private field<br/>  Field field = Student.class.getDeclaredField("name");<br/><br/>  // set field accessible as true<br/>  field.setAccessible(true);<br/><br/>  String name = (String)field.get(student);<br/><br/>  // Print name private field as 'John'<br/>  System.out.println("Name = " + name);<br/><br/>  // Check for an interface<br/>  System.out.println("Is Interface = "+cls.isInterface());<br/> }<br/><br/>}</span></pre><p id="7248" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">输出<br/> </strong>名称=约翰<br/>接口=假</p><p id="fa58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是使用反射设置学生类的<strong class="jm io">年龄</strong>字段值的示例:</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="8a7b" class="ml lj in mh b be mm mn l mo mp">package com.practice.core;<br/><br/>import java.lang.reflect.Field;<br/><br/>class Student {<br/> public int age;<br/>}<br/>    <br/>public class Test{    <br/> <br/>  public static void main(String args[]) throws Exception {<br/>    try {<br/>     Class cls = Class.forName("com.practice.core.Student");<br/>   <br/>     // Access age field of Student class<br/>     Field field = cls.getField("age");<br/>     Student student = new Student();<br/>     System.out.println("age before = " + student.age);<br/>   <br/>     // Set 12 value as an age<br/>     field.setInt(student, 12);<br/>     System.out.println("age after = " + student.age);<br/>    } catch (Throwable e) {<br/>   System.err.println(e);<br/>  }<br/> }<br/>}</span></pre><p id="a0fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">输出</strong> <br/>年龄= 0 <br/>年龄= 12</p><h2 id="5b2e" class="li lj in bd lk ll lm dn ln lo lp dp lq jv lr ls lt jz lu lv lw kd lx ly lz ma bi translated">使用反射的方法元数据</h2><p id="971d" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">下面是一个使用<strong class="jm io">反射</strong>访问方法元数据的例子，比如方法名、参数及其类型、修饰符、方法调用。</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="ea36" class="ml lj in mh b be mm mn l mo mp">package com.practice.core;<br/><br/>import java.lang.reflect.Method;<br/><br/>class Student {<br/><br/> private void getStudentName(String name) {<br/>  System.out.println("test");<br/> }<br/><br/>}<br/>    <br/>public class Test{    <br/><br/> public static void main(String args[]) throws Exception {<br/><br/>  // Access Student class using package.<br/>  Class c = Class.forName("com.practice.core");<br/>  <br/>  // Get all declare methods inside Student class. <br/>  Method m[] = c.getDeclaredMethods();<br/>  for (int i = 0; i &lt; m.length; i++) {<br/>   <br/>   // Get method details.<br/>   System.out.println("Method: "+m[i].toString());<br/><br/>   // Get method's class name.<br/>   System.out.println("Declaring Class: "+m[i].getDeclaringClass());<br/>   <br/>   // Get parameter type.<br/>   System.out.println("Parameter Type: "+m[i].getParameterTypes().toString());<br/>   <br/>   // Get return type<br/>   System.out.println("Return Type: "+m[i].getReturnType());<br/>  }<br/> }<br/>}</span></pre><p id="3568" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">输出:</strong> <br/>方法:private void com . practice . core . student . getstudentname(Java . lang . string)<br/>声明类:com.practice.core.Student <br/>参数类型:【ljava . lang . Class；<a class="ae mq" href="http://twitter.com/246ae04d" rel="noopener ugc nofollow" target="_blank"> @246ae04d </a> <br/>返回类型:void</p><p id="ffd3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是一个使用<strong class="jm io"> Class.forName() </strong>方法调用使用<strong class="jm io">反射</strong>方法的示例:</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="22e7" class="ml lj in mh b be mm mn l mo mp">package com.practice.core;<br/><br/>import java.lang.reflect.Method;<br/><br/>class Student {<br/> <br/> public String printName() {<br/>  System.out.println("Inside PrintName() method");<br/>  return "John";<br/> }<br/> <br/>}<br/>    <br/>public class Test{ <br/>  public static void main(String args[]) throws Exception {<br/><br/>  // Access Student class using package.<br/>  Class c = Class.forName("com.practice.core.Student");<br/><br/>  // Access method printName<br/>  Method m = c.getMethod("printName");<br/><br/>  // Create Student instance<br/>  Student st = new Student();<br/><br/>  // invoke printName method from Student class<br/>  Object obj = m.invoke(st);<br/><br/>  // Print method output<br/>  System.out.println((String)obj);<br/> }<br/>}</span></pre><h2 id="a869" class="li lj in bd lk ll lm dn ln lo lp dp lq jv lr ls lt jz lu lv lw kd lx ly lz ma bi translated">使用反射的构造函数元数据</h2><p id="c867" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">下面是一个使用<strong class="jm io">反射</strong>访问<strong class="jm io">构造函数</strong>并获取其元数据的示例，例如构造函数名称、参数及其类型、修饰符。</p><pre class="kx ky kz la gt mg mh mi bn mj mk bi"><span id="8629" class="ml lj in mh b be mm mn l mo mp">package com.practice.core;<br/><br/>import java.lang.reflect.Constructor;<br/>import java.lang.reflect.Parameter;<br/><br/>class Student {<br/> private Student(String name) { }<br/>}<br/>    <br/>public class Test{    <br/><br/> public static void main(String args[]) throws Exception {<br/><br/>  // Access Student class using package.<br/>  Class c = Class.forName("com.practice.core.Student");<br/><br/>  // Get all declare methods inside Student class.<br/>  Constructor[] constructors = c.getDeclaredConstructors();<br/>  for (int i = 0; i &lt; constructors.length; i++) {<br/><br/>   // Get constructor details.<br/>   System.out.println("Constructors: "+constructors[i].toString());<br/><br/>   // Get constructor's class name.<br/>   System.out.println("Constructors Class: "+constructors[i].getDeclaringClass());<br/><br/>   // Get constructor parameter type.<br/>   System.out.println("Constructors Type: "+constructors[i].getParameterTypes().toString());<br/><br/>   // Access all constructor parameters<br/>   Parameter[] parameters = constructors[i].getParameters();<br/>   for (Parameter parameter: parameters) {<br/>    System.out.println(parameter.getType().getName());<br/>   }<br/>  }<br/> }<br/>}</span></pre><p id="2168" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">输出</strong></p><figure class="kx ky kz la gt lb gh gi paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="gh gi mr"><img src="../Images/bebf25a8f37bd5b6a5622e138e9b5438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*onjO0QLl_w1mdKDJma0FaA.png"/></div></div></figure><h2 id="9214" class="li lj in bd lk ll lm dn ln lo lp dp lq jv lr ls lt jz lu lv lw kd lx ly lz ma bi translated">反射 API 的缺点:</h2><p id="0893" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">下面是使用反射 API 的一些缺点:</p><ol class=""><li id="1359" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">它使系统变慢。</li><li id="7115" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">当类名绑定在运行时发生时，它可能会导致或结束意外错误。</li><li id="bdcc" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">它可能是应用程序的安全威胁，因为反射允许我们访问私有和公共的字段和方法。</li></ol><p id="a611" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望你发现这篇文章有趣且内容丰富。请鼓掌分享给你的朋友，传播知识。</p><p id="22eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以<a class="ae mq" href="https://medium.com/@toimrank" rel="noopener">关注</a>我的博客。谢谢你！</p></div></div>    
</body>
</html>