<html>
<head>
<title>Use nodemailer to Send Email in NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 nodemailer 在 NodeJS 中发送电子邮件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/use-nodemailer-to-send-email-in-nodejs-3902e3b43d00?source=collection_archive---------1-----------------------#2022-06-27">https://blog.devgenius.io/use-nodemailer-to-send-email-in-nodejs-3902e3b43d00?source=collection_archive---------1-----------------------#2022-06-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1785" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在<a class="ae kc" href="https://yumingchang1991.medium.com/technical-article-structure-on-medium-954850e1ef4d" rel="noopener">我的技术文章</a>中查看我所有的其他帖子</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/8a76d16f827eb3ecde1fc7fe231d9439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gvunE2yXAlo8kXDj"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@brett_jordan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">布雷特·乔丹</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="d72f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">作为后端开发人员，我们都需要从服务器向客户端发送电子邮件。在本文中，我将向您展示如何在 Node.js 中使用<code class="fe lp lq lr ls b">nodemailer</code>来实现这一点。</p><p id="20e9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦您掌握了这些知识，将所学知识应用到您的 Express 服务器上应该是小菜一碟。(剧透:只需将代码放在 express route 中的一个即可)</p><h1 id="d03f" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">什么是<code class="fe lp lq lr ls b">nodemailer</code>？</h1><p id="7697" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated"><code class="fe lp lq lr ls b">nodemailer</code>是一个 node 包，使得在 Node 中发送邮件变得更加容易。</p><h1 id="c938" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">首先，我们来谈谈礼仪</h1><p id="fb9f" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">正如 web 服务器遵循 HTTP 来传递消息一样，也有用于电子邮件通信的协议:</p><ul class=""><li id="191d" class="mq mr in kv b kw kx kz la lc ms lg mt lk mu lo mv mw mx my bi translated">SMTP ，简单邮件传输协议，是<em class="mz">通过互联网发送</em>电子邮件的指南集合。这是我们将在本文中使用的协议</li><li id="76fb" class="mq mr in kv b kw na kz nb lc nc lg nd lk ne lo mv mw mx my bi translated"><strong class="kv io"> IMAP </strong>，互联网消息访问协议，是<em class="mz">从服务器接收</em>电子邮件的指南集合。日期、发件人和主题最初从服务器下载，而内容仅在用户打开邮件时下载</li><li id="d891" class="mq mr in kv b kw na kz nb lc nc lg nd lk ne lo mv mw mx my bi translated"><strong class="kv io"> POP3 </strong>，邮局协议，是从服务器接收电子邮件的指南集合。3 代表版本三，这是该标准最广泛使用的版本。POP3 以其对互联网连接的低依赖性而闻名。它将电子邮件从服务器传输到客户端，这样即使我们没有连接到互联网，我们也可以阅读电子邮件</li></ul><p id="ef32" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你对更详细的比较感兴趣，看看<a class="ae kc" href="https://www.courier.com/guides/imap-vs-pop3-vs-smtp/" rel="noopener ugc nofollow" target="_blank"><em class="mz">IMAP vs pop 3 vs SMTP——终极比较</em> </a>。</p><h1 id="4f45" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">履行</h1><p id="016c" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">我发现 nodemailer 的实现非常简单。所以直接看一下代码:</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="b416" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">没那么可怕吧。</p></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><h1 id="7247" class="lt lu in bd lv lw no ly lz ma np mc md jt nq ju mf jw nr jx mh jz ns ka mj mk bi translated">值得你注意的事情</h1><h2 id="48f6" class="nt lu in bd lv nu nv dn lz nw nx dp md lc ny nz mf lg oa ob mh lk oc od mj oe bi translated">Gmail 附带免费的 SMTP 服务，但也有不好的一面</h2><p id="3e4c" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">如果你有一个 Gmail 账户，你可以直接用<code class="fe lp lq lr ls b">nodemailer</code>使用那个账户。然而，这样做有几个缺点。</p><p id="ae46" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">先说</strong>，出站邮件有限制:每天 500 封，每个收件人算 1 封出站邮件。</p><p id="a1e5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">其次</strong>，Gmail 有更安全的认证。当您将代码投入生产时，生产服务器很可能不在您现在所在的位置。它可能在一百英里之外，或者在一个不同的国家。谷歌将检测到这种位置差异，并阻止此类呼叫。因此，不建议在生产中使用 Gmail。(无论如何，我们可以用它来学习)</p><p id="8220" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在制作中，我们经常求助于提供邮件递送服务的公司，如<a class="ae kc" href="https://www.sendinblue.com/why-sendinblue/" rel="noopener ugc nofollow" target="_blank"> SendInBlue </a>和<a class="ae kc" href="https://mailchimp.com/pricing/marketing/" rel="noopener ugc nofollow" target="_blank"> MailChimp </a>。</p><p id="5285" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">最后</strong>，您可能需要从谷歌账户中心配置应用代码，以用作<code class="fe lp lq lr ls b">nodemailer</code>中的认证密码。否则，您可能会看到错误消息:<em class="mz">用户名和密码不被接受</em>。</p><h2 id="23bc" class="nt lu in bd lv nu nv dn lz nw nx dp md lc ny nz mf lg oa ob mh lk oc od mj oe bi translated">端口 25、467、587、2525 可以用作通信端点</h2><p id="6dae" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">然而，端口 467 已经过时，端口 25 经常被云服务提供商和 ISP 阻止。</p><p id="a082" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">它离开我们港口 587 &amp; 2525。前者使用最广泛，后者通常在端口 587 不可用时作为替代。</p><h2 id="a9e9" class="nt lu in bd lv nu nv dn lz nw nx dp md lc ny nz mf lg oa ob mh lk oc od mj oe bi translated">Nodemailer 可以发送 HTML 格式的内容、日历邀请、附件等等</h2><p id="8554" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated"><a class="ae kc" href="https://nodemailer.com/message/" rel="noopener ugc nofollow" target="_blank">查看他们的文档</a>了解如何在邮件选项中使用它们</p></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><p id="6443" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">祝您愉快！</p></div></div>    
</body>
</html>