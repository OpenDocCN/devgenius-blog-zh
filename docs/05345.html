<html>
<head>
<title>A beautiful python and terminal setup for your beautiful M1 Macbook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为你漂亮的M1 Macbook安装一个漂亮的python和终端</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-beautiful-python-and-terminal-setup-for-your-beautiful-m1-macbook-58486c95df4?source=collection_archive---------0-----------------------#2021-07-23">https://blog.devgenius.io/a-beautiful-python-and-terminal-setup-for-your-beautiful-m1-macbook-58486c95df4?source=collection_archive---------0-----------------------#2021-07-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/cd00f8f6a9d607c35d51ce306f88efa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0NQHnxHQeC2Tba4G"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">马丁·卡特勒在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c9c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在你已经有了一台漂亮且速度极快的M1 MacBook，让我们来确保它的设置和系统本身一样赏心悦目。这篇文章也将帮助你解决在一个相对新的M1芯片集上设置开发环境的复杂性。</p><p id="f32c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">像往常一样，第一步是安装<code class="fe ky kz la lb b">brew</code>。去<a class="ae jz" href="http://brew.sh/" rel="noopener ugc nofollow" target="_blank"> brew.sh </a>看看你是否也能捐。就是这么俏皮优雅。一定要记得把啤酒放在你的路上。这是一些人容易忘记的一步。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="23da" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦你安装了自制软件，继续安装<code class="fe ky kz la lb b">pyenv</code>。Pyenv是管理多个版本python的最佳方式，有助于简化开发过程。<a class="ae jz" href="https://realpython.com/intro-to-pyenv/#:~:text=Install%20the%20latest%20development%20version,versions%20and%20virtual%20environments%20automatically" rel="noopener ugc nofollow" target="_blank"> Real Python </a>有一篇关于这个主题的精彩文章，我鼓励你仔细阅读并跟进。不要忘记在<code class="fe ky kz la lb b">~/.zshrc</code>的启动脚本中添加<code class="fe ky kz la lb b">pyenv</code>。是的，新的操作系统都把<code class="fe ky kz la lb b">zsh</code>作为默认外壳。耶！以下是我需要添加的说明，但请检查您的<code class="fe ky kz la lb b">pyenv</code> install命令的输出，它应该会给出确切的详细信息，或者只需键入<code class="fe ky kz la lb b">pyenv init</code>即可找到您的相关版本的详细信息。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="6eb8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这一点上，我强烈建议您尝试一下<code class="fe ky kz la lb b">pyenv</code>并熟悉它。一旦完成，创建一个虚拟环境，这应该足以让你开始你的工作。我总是有一个困惑，如果在本地目录中我可以设置<code class="fe ky kz la lb b">pyenv local</code>，那么为什么需要<code class="fe ky kz la lb b">virtualenv</code>。是的，我知道利弊，但我总是思考和着迷于此。关于虚拟环境需要注意的重要一点是，虽然真正的python文章和官方文档说它应该用<code class="fe ky kz la lb b">pyenv</code>自动安装，但我不得不手动安装。下面的代码片段向您展示了安装步骤之后我得到的错误。看起来在<code class="fe ky kz la lb b">pyenv</code>确实有一个错误，并且有一张<a class="ae jz" href="https://github.com/pyenv/pyenv/issues/1340" rel="noopener ugc nofollow" target="_blank">票</a>也是一样的。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="c8ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这可能需要一些时间，尤其是如果您的brew已有一段时间没有更新；是的，我们可以直接安装软件包而不需要整个更新，但这从来都不是一个好主意。如果你想这样做，<code class="fe ky kz la lb b">HOMEBREW_NO_AUTO_UPDATE=1 brew install &lt;formula&gt;</code>是这样做的方法，但这通常是不推荐的，因为有各种安全补丁，你可能会错过。</p><p id="ad06" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们已经安装了虚拟环境，我们可以创建并激活一个。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="a84b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">是的，我正在努力提高我的离散优化技能:)。</p><p id="66c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这一点上，我非常高兴，因为python已经正确设置了轻松处理多个版本和虚拟环境的能力，并且终端向我显示了我希望在提示符中看到的虚拟环境名称。所以如果你愿意，你可以停在这里。然而，在我早期的一个组织中，我真的很认真，花了一天的时间定制提示，包括花哨的主题、github分支标识符、时间、venv python版本以及下一步要做的事情。让我们继续。第一步，安装<code class="fe ky kz la lb b">oh-my-zsh</code>。</p><blockquote class="li lj lk"><p id="17b1" class="ka kb ll kc b kd ke kf kg kh ki kj kk lm km kn ko ln kq kr ks lo ku kv kw kx ig bi translated">"<a class="ae jz" href="https://github.com/ohmyzsh/ohmyzsh" rel="noopener ugc nofollow" target="_blank">哦，我的Zsh</a>不会让你成为10倍的开发者…但你可能会觉得自己是一个开发者。",</p></blockquote><p id="edb0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">安装非常简单。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="1492" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在以前不会这样了，但是现在我所有的设置都从<code class="fe ky kz la lb b">./zshrc</code>转移到了一个新创建的文件<code class="fe ky kz la lb b">./zshrc_pre_oh_my_zsh</code>。很明显，<code class="fe ky kz la lb b">pyenv</code>和其他东西现在都不起作用了。有一段时间我对发生的事情感到困惑，然后看到了这个文件。我把这里的内容复制到顶部的<code class="fe ky kz la lb b">./zshrc</code>，它又开始工作了。我想既然文件名是这样的，它就应该有在加载<code class="fe ky kz la lb b">oh-my-zsh</code>之前运行的所有命令，但事实并非如此，我必须将内容复制并粘贴到<code class="fe ky kz la lb b">/.zshrc</code>文件中。你生活，你学习。此外，在使用zsh之前，我更喜欢安装如此多样和令人惊叹的<a class="ae jz" href="https://github.com/powerline/fonts.git" rel="noopener ugc nofollow" target="_blank">电力线字体</a>。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="3e1d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">完成后，验证字体是否已安装。打开“终端偏好设置”,前往“描述文件”,然后选择“字体”,然后选择“更改字体”。您应该会看到安装了许多电力线字体。我喜欢Fira代码字体，你可以从他们的Github下载。请务必遵循那里的说明，并为您最喜欢的编辑器启用它，对我来说它仍然是<code class="fe ky kz la lb b">sublime-text</code>。我已经试过了<code class="fe ky kz la lb b">pycharm</code>和<code class="fe ky kz la lb b">vscode</code>，虽然它们非常坚固和强大，但我敢说甚至更好，崇高在我心中占有特殊的位置。我用这个编辑器为我的创业公司、我赢得的各种黑客马拉松和我批准的采访编写了所有代码。顺便说一下，崇高文本4本身就很坚固。#升华结束</p><p id="9e83" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">别再说那些粉丝了。有一次我设置了崇高文本的字体，我注意到了一个奇怪的问题——光标的大小对我来说太大了。一个简单的谷歌搜索帮我解决了这个问题。我们只需要编辑Sublime的配置。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="2769" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们回到设置终端。安装字体后，选择一个主题。我没有最喜欢的主题。我之前用过<code class="fe ky kz la lb b">powerline10k</code>，但是想试试别的，发现<code class="fe ky kz la lb b">spaceship</code>看起来真的很酷。在<a class="ae jz" href="https://github.com/spaceship-prompt/spaceship-prompt" rel="noopener ugc nofollow" target="_blank"> readme </a>文件中有非常清楚的说明，所以请随意尝试一下。现在，我的终端看起来如下，是的，我从离散优化转移到强化CI/CD技能，因此终端中有CI。这么多东西要学，时间却这么少。当你需要的时候，TVA在哪里？</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lp"><img src="../Images/159a4b9ebea201b2c518cbcfdf3dbee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mUqe3JLV2E7Y7zIQWhlufA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">还不错！我们能改善这一点吗？</figcaption></figure><p id="b3c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">看起来很酷，传达了很多信息。然而，我更喜欢改变这一点，这样做很容易也很有趣。经过调整后，这是我的提示——主要是在您的<code class="fe ky kz la lb b">./zshrc</code>文件中为<code class="fe ky kz la lb b">spaceship</code>启用右提示。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lq"><img src="../Images/c5e3e5b0f2595c9e5fbdd52f917a1544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YO3F5R15_wUxvIJl0NDp2g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">现在我们正在谈话！</figcaption></figure><p id="59be" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦完成，我就安装一些插件，比如<code class="fe ky kz la lb b">zsh-autosuggestions, zsh-completions, zsh-syntaxhighlight and git</code>。我不是一个超级用户，我觉得我肯定可以在这里学到更多，但这将是另一天的主题和任务。不过有一点需要注意——当你试图安装<code class="fe ky kz la lb b">zsh-completions</code>时，你可能会得到一个关于权限的错误，解决这个问题的方法非常简单。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="4a8e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你有时间，请通读这篇精彩的<a class="ae jz" href="https://stackoverflow.com/questions/13762280/zsh-compinit-insecure-directories" rel="noopener ugc nofollow" target="_blank"> SO </a>帖子，它详细解释了这一点。</p><p id="2625" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">另一个问题是关于<code class="fe ky kz la lb b">zsh-autosuggestions</code>。虽然官方文件确实说我们可以为此使用<code class="fe ky kz la lb b">brew install</code>，但它对我不起作用，我不得不手动克隆回购。</p><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="60fe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">虽然插件的顺序对我来说并不重要，但对一些用户来说，只有在<code class="fe ky kz la lb b">./zsrc</code>文件中的插件末尾有了<code class="fe ky kz la lb b">autosuggestions</code>之后，它才起作用。检查此<a class="ae jz" href="https://github.com/zsh-users/zsh-autosuggestions/issues/416" rel="noopener ugc nofollow" target="_blank"> Github螺纹</a>以供参考。</p><p id="c842" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后一切都正常了。正如你在下面的截图中看到的，我刚刚输入了<code class="fe ky kz la lb b">cd</code>，而<code class="fe ky kz la lb b">zsh</code>正在向我建议目录。不错！</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/bbf0469eef3fc5c0e00eda340f3517cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NUuLsnwzYFYN7N1DACTxfg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">自动建议发挥它的魔力</figcaption></figure><p id="3c4e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">来自<a class="ae jz" href="https://github.com/zsh-users/zsh-autosuggestions" rel="noopener ugc nofollow" target="_blank">正式文件</a></p><blockquote class="li lj lk"><p id="a7ee" class="ka kb ll kc b kd ke kf kg kh ki kj kk lm km kn ko ln kq kr ks lo ku kv kw kx ig bi translated"><em class="in">如果在光标位于缓冲区末端时按下→键(前向字符部件)或End(行尾部件),它将接受建议，用建议替换命令行缓冲区的内容。如果您调用forward-word小部件，它将部分接受建议，直到光标移动到的位置。</em></p></blockquote><p id="2639" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是现在一切的样子。你可以看到自动建议非常有效。</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ls"><img src="../Images/990873963373758d444348ad358cd0b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4v9CC4yEmHW-O5TKCBgxQA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">一切就绪的终端</figcaption></figure><p id="71e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过<code class="fe ky kz la lb b">zsh-syntaxhighlight</code>语法高亮显示是另一个有用的特性。如果你在按下回车键之前输入了错误的命令，它会高亮显示。厉害！</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/124f600d5fd0147aea4c0d0fba3b9840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_5AbsH7Tj9P35_Cs_4b2w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">突出显示时出错</figcaption></figure><figure class="lc ld le lf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lu"><img src="../Images/0b5602cba21767955da295ba7d1a2864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EZqdmgbw_8QtqdN-YXKALg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">很好地展示了命令的正确性</figcaption></figure><p id="cd99" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在我阅读<a class="ae jz" href="https://github.com/zsh-users/zsh-syntax-highlighting/blob/master/INSTALL.md" rel="noopener ugc nofollow" target="_blank">的任何地方，我都发现我们需要在文件的末尾特别添加<code class="fe ky kz la lb b">source</code>语法高亮(<code class="fe ky kz la lb b">/.zshrc</code>)，但我不需要这样做，而且对我很有效。记住这一点，以防你遇到困难。</a></p><p id="42fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后一次通电是安装<code class="fe ky kz la lb b">z</code>。不用去<code class="fe ky kz la lb b">cd ../../../workspace</code>，你只要做<code class="fe ky kz la lb b">z workspace</code>，瞧，你就在那个文件夹里了。z在一个名为<code class="fe ky kz la lb b">~/.z</code>的文件中记录了你cd进入的所有文件夹，当你访问一个文件夹后，你可以通过<code class="fe ky kz la lb b">z folder name</code>直接进入那个文件夹。要了解更多，请前往他们的<a class="ae jz" href="https://github.com/rupa/z" rel="noopener ugc nofollow" target="_blank">回购</a>——他们有许多选项和配置可用。</p><p id="1944" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">仅此而已。尝试不同的主题，让我知道什么最适合你。有一件事我还没有做到——在右边的提示符下，在虚拟环境名称旁边显示python的版本。我尝试了许多事情，虽然<a class="ae jz" href="https://github.com/spaceship-prompt/spaceship-prompt/issues/410" rel="noopener ugc nofollow" target="_blank">官方文档</a>确实提到如果全球python版本和虚拟环境python版本不同，他们会在环境名称旁边显示python版本，但我无法让它工作。你能帮忙吗？拜托了。</p><p id="f16c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你想看看我的<code class="fe ky kz la lb b">/.zshrc</code>，你可以在这里找到<a class="ae jz" href="https://gist.github.com/productengineeringpod/ae59b4d2d49200da27e52e4b5ce50e20" rel="noopener ugc nofollow" target="_blank"/>。</p></div></div>    
</body>
</html>