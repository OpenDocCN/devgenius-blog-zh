# 带 Stata 的股票价格单变量时间序列模型

> 原文：<https://blog.devgenius.io/univariate-time-series-models-for-stock-prices-with-stata-a16ad30d538b?source=collection_archive---------2----------------------->

AR、MA、ARMA 和 ARIMA 模型结果的解释

数据文件 [BMW.xlsx](https://github.com/riqbal-k/Data) 可以从 GitHub 下载。

## 时间序列过程

> **由时间 t 定义的随机变量序列称为时间序列过程。时间元素通常是一个有规则间隔的指数，代表按时间顺序排列的时间段(天、月、年等)，例如，股票的每日回报或消费者价格指数(CPI)的年度值。**

**单变量时间序列模型**是一种规范，旨在仅使用金融变量自身的过去值以及误差项的当前和过去值中提供的信息来建模和预测金融变量。

自回归综合移动平均(ARIMA)模型族通常与 Box 和 Jenkins(1976)相联系，是时间序列模型的一个重要类别。

# 时间序列概念

## 一.平稳过程

协方差平稳时间序列具有常数和有限的均值、方差以及具有超前或滞后值的协方差。

> 当时间序列的均值和方差随时间保持不变时，它表现出一种**弱平稳类型。**
> 
> 当一个时间序列的分布有完全相同的波谷时间时，就有一个**强形式的平稳**存在。

**二。非平稳过程**

具有趋势或季节性的时间序列的值在整个时间内不是常数；相反，它们会根据趋势和季节性随时间而变化。

> S ***平稳检验* :** 在统计学中，单位根检验检验一个时间序列变量是否是非平稳的，是否有单位根，即 **ADF 检验**和 **KPSS 检验**。

## 三。自相关

两个变量之间的线性相关性由**相关性**来衡量，而一个时间序列变量的当前值与其先前值之间的线性相关性由**自相关性**来衡量。

偏相关(PACF)决定了时间段 *t* 和 *t-k* 之间的偏相关。没有考虑到 *t* 和 *t-k* 之间的所有时滞。

> ***ACF 图、PACF 图和 Ljung-Box 检验*** *:* 为了检验自相关系数为 0 的零假设，采用了具有检验边界的 **ACF 图**。
> **容格统计**可用于正式确定一组自相关是否具有统计显著性。

# 单变量时间序列模型

# *1。自回归(AR)模型*

在自回归模型中，使用变量先验值的线性组合来预测感兴趣的变量。它是变量对自身的回归，用“自回归”这个词来表示。

一阶自回归模型，或 AR(1)，是这种用途最直接和最流行的模型:

![](img/dc50112507bf9a9dc7bf81f633e8fe42.png)

AR(1)模型最简单的扩展是 AR(2 ),定义为:

![](img/459123d45623638ceab7c0e3ec9ecb5b.png)

# 2.*移动平均线(MA)模型*

移动平均模型捕捉到了白噪声条件下的冲击效应。意外收入、战争、袭击和其他不可预见的事件都是冲击效应的例子，会对观察过程产生影响。

与 AR()模型中预测变量的过去值相比，移动平均模型在类似回归的模型中使用过去的预测误差。
考虑一下马①的模型，即:

![](img/deacbfb1e5b506346c2a62c3d304d8fc.png)

# 3.将 AR 和 MA 组合成 ARMA 模型

自回归和移动平均模型可以结合起来形成自回归移动平均(ARMA)模型。
市场参与者效应(AR)和白噪声项中的冲击效应都试图被 ARMA 模型(MA)所捕捉

ARMA(1，1)模型采用以下形式:

![](img/d91fa4f1405b0b30440ea3aa5ea717ed.png)

一般的 ARMA(p，q)模型是:

![](img/f90494639577332459313232196a935a.png)

> **AR、MA 和 ARMA 模型的阶数由 ACF 和 PACF 图决定。**

# 四- ARIMA 模型

ARIMA 模型的缩写中的附加字母“I”与 ARMA 模型不同，代表“集成”

在这种情况下，术语“积分”是差分的反义词，因此术语“ARIMA”表示自回归积分移动平均。

原始数据的 ARIMA(p，d，q)模型的等价物是变量差分 *d* 倍的 ARMA(p，q)模型，其中

> **p** 是自回归项的个数，
> 
> **d** 是平稳性所需的非季节性差异的数量，以及
> 
> **q** 是预测方程中滞后预测误差的个数。

# *构建自回归模型:Box-Jenkins 方法*

估计 ARIMA 模型的第一个系统方法是由 Box 和 Jenkins 在 1976 年提出的。他们采取了一个三步走的、现实的、实用的策略。

1.  **识别**

分析时间序列，看看它是否是稳定的，如果不是，需要多少差异才能使它如此。

使用图形技术来确定 AR 和 MA 的顺序(绘制数据随时间的变化以及 acf 和 pacf)。

> 不要忘记使用 ADF 测试和 KPSS 来检查平稳性，以及使用 Ljung-Box 统计来寻找自相关性。

2)估算

描述模型并计算其参数。根据模型的不同，这可以通过最小二乘法或一种叫做最大似然法的不同方法来实现。

3)诊断检查

检查模型的拟合度，以确保它准确描述了您的数据。残差应该具有恒定的均值和方差，是同方差的，并且是不相关的。
如果残差不是正态分布，把你的新息分布改成一个**学生的 *t*** 。

# 【ARMA 模型选择的信息准则

在实践中，从自相关函数中确定合适的模型排序可能极具挑战性。

一种更简单的方法是选择降低**信息标准**重要性的模型阶数。阿凯克(1974)的信息准则( **AIC** )、施瓦茨(1978)的贝叶斯信息准则( **BIC** )和汉南—奎因准则( **HQIC** )是三个最常用的信息准则。

# **ARIMA 车型的特例**

![](img/20c594efcbeab3f5572c9774a1406bb4.png)

# ***在 Stata*** 中的应用

将宝马收盘价数据上传至 Stata

![](img/992bcf095cf4bb230ef518b7c1e58f1a.png)

浏览您的数据文件，然后单击确定

![](img/426185306dd0e1a1e383131ad738958f.png)

宝马的股票价格数据显示出积极的趋势以及显著的上下波动。这说明数据不是静止的。

![](img/55f198b4c2d48e23d956b3131050fcbc.png)

## 通过 ACF、PACF 和容格盒测试检查自相关性

**Ljung B** ox 自相关检验的假设:

![](img/7f57a1285f44a6fbc573b7fc2f4da83c.png)![](img/03e02680098763ccc462fd0512a38972.png)![](img/87439a993af9eab8da531adf140eebba.png)

我们可以看到前 20 个滞后，线条从阴影区域出来。有迹象表明，宝马股票价格的自相关性很高。

![](img/bfb4cd0c3618b3d040d6b76fbadde638.png)

用于提取所选时间序列中的偏自相关的图被称为偏相关图。如果时间序列显示部分自相关的存在，则采用 AR 进行进一步的研究。因此，pacf 图将提供 AR 值。

对于部分自相关，只有前 3 个滞后，线从阴影区域出来。

![](img/45fe1188f2872925a8182dac0691262b.png)

相关图是用于提取给定时间序列中自相关的图。在时间序列数据集中，自相关是一系列相关的存在。

> **股票价格的时间序列与其自身的过去值具有序列相关性。**

![](img/ddf600d65db85898b637798e39b7a115.png)

针对平稳的**增强 Dicky Fuller** 测试的假设

![](img/03948b97ba6a97ae43cf5282966c31d6.png)![](img/6afe5f09bc4cd21ccf20e0b1a830df2b.png)![](img/8b6aed5275b755bbcfe149a3a281368d.png)

## 计算平稳时间序列

现在我们将通过寻找第一个差异或简单地计算财务回报，将非平稳时间序列转换为平稳时间序列。

> 在金融领域，持续复利回报更为常见。这就是为什么我们将首先计算对数差。

我们的财务回报是弱平稳的，图中出现的尖峰是极值或异常值。

![](img/d7a7de32f1feca0f77f97768291ea0bc.png)

对退货系列应用**增强 Dick-Fuller** 或**Phillips-Perron 单位根检验**。

![](img/1703774769285dcb75f5a6ad6deec8ed.png)![](img/f07471e30385634f14a57c788aa41f74.png)![](img/da65cc10db80b785ede6df62173b01f4.png)

## 检查退货的自相关性

Retrurns 系列的容格检验

![](img/c19537d07abb3f670311ee11dc1a8611.png)![](img/87439a993af9eab8da531adf140eebba.png)

> **自相关性在时间序列变成平稳序列后仍然存在。然而，自相关的强度降低了。因此，我们使用自回归模型。**

在找到对数第一差值后，可以从相关图中观察到序列相关性显著降低。

![](img/07b9023da8ea4c109edcad5c7ad89af5.png)

在滞后 1 和滞后 2 时，收益序列与其滞后序列是自相关的，因为这些线只出现在前两个滞后的阴影区域。因此，收益序列的 ARIMA 模型的 MA 值可以有 1 到 2 个滞后。

> **MA 值由 ACF 图决定**

![](img/f7d587d12ff564e1e659f52df92a9bad.png)

在滞后 1 到 4 时，收益序列与其滞后序列是自相关的，因为这些线只是在前 4 个滞后的阴影区出现。因此，收益序列的 ARIMA 模型的 ARvalue 可能需要 1 到 4 个滞后。

> **AR 值由 PACF 图决定**

![](img/20360aaefceec074a24b4f4b4ced2f2e.png)

## 自回归模型的估计

![](img/8f296e2d972f50d4104716add9301af1.png)

AR 模型的系数对 AR(1)模型具有重要意义。

![](img/3b2cad1b466c54c90024e15cc0f89d84.png)![](img/d2fd576f116acd16dc23759c17ec66f8.png)

MA 模型的系数对 MA(1)模型具有重要意义。

![](img/8b5937128d49895c8c8726cba416208f.png)![](img/053daf3166de714b290df305500dd0f5.png)

AR 和 MA 模型的系数对 ARMA(1，1)模型有重要意义。

![](img/21f859478e0e8c29de4907e0f20ff869.png)![](img/01328c09a50eba4aa25a132e70d9bcc6.png)

对于 ARMA(1，2，2)模型，AR 系数显著，MA 系数不显著。

![](img/1758eb17fc53e1f170c82b7ba9c73b2f.png)

# 使用 AIC 和 BIC 的模型比较

首先，确定重要系数小于 1 的模型。然后选择具有最低 AIC 或 BIC 值的模型。

![](img/049e3e9cca6e6b926aa5868414d13937.png)

尽管 ARIMA(1，2，2)模型具有最低的 AIC 和 BIC 值。然而，如前所述，其具有不显著的 MA 系数。