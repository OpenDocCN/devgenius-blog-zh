<html>
<head>
<title>A Complete Guide to Using ElasticSearch with Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与Spring Boot一起使用ElasticSearch的完整指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-complete-guide-to-using-elasticsearch-with-spring-boot-f9a527b375ff?source=collection_archive---------1-----------------------#2021-08-24">https://blog.devgenius.io/a-complete-guide-to-using-elasticsearch-with-spring-boot-f9a527b375ff?source=collection_archive---------1-----------------------#2021-08-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="5948" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇文章中，我将详细介绍如何在Spring Boot上使用Elasticsearch。我还将介绍Elasticsearch的基础知识以及它在行业中的应用。</p><h1 id="da0e" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">什么是Elasticsearch？</h1><p id="6cd5" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated"><a class="ae ll" href="https://www.elastic.co/what-is/elasticsearch" rel="noopener ugc nofollow" target="_blank"> Elasticsearch </a>是一个分布式、免费和开放的搜索和分析引擎，适用于所有类型的数据，包括文本、数字、地理空间、结构化和非结构化数据。</p><p id="b0ef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它是基于Apache Lucene构建的。Elasticsearch通常是ELK堆栈(Elastic、LogStash和Kibana)的一部分。人们可以使用Elasticsearch来存储、搜索和管理以下数据</p><p id="e4e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随着数据的不断增加，搜索已经成为许多领域的中心思想。随着大多数应用程序变得数据密集型，快速灵活地搜索大量数据变得非常重要。ElasticSearch两者都有。</p><p id="5886" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本帖中，我们将关注Spring数据弹性搜索。它提供了一个简单的界面来进行搜索、存储和运行分析操作。我们将展示如何使用Spring数据来索引和搜索日志数据。</p><h1 id="21c7" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">弹性研究的关键概念</h1><p id="0f7e" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">Elasticsearch有索引、文档和字段。这个想法很简单，非常类似于数据库。Elasticsearch将数据作为<strong class="jm io">文档</strong>(行)存储在<strong class="jm io">索引</strong>(数据库表)中。用户可以使用<strong class="jm io">字段</strong>(列)搜索该数据。</p><p id="7c0f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通常，elasticsearch中的数据会经过不同的分析器来拆分这些数据。默认的分析器在标点符号如空格或逗号上分割数据。</p><p id="74b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用<code class="fe lm ln lo lp b">spring-data-elasticsearch</code>库来构建这篇文章的演示。在Spring数据中，文档只不过是一个POJO对象。我们将在同一个类中添加来自elasticsearch的不同注释。</p><p id="eab4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如前所述，elasticsearch可以存储不同类型的数据。然而，我们将在这个演示中看到简单的文本数据。</p><h1 id="c9d8" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">创建Spring Boot应用程序</h1><p id="369e" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">让我们创建一个简单的spring boot应用程序。我们将使用<code class="fe lm ln lo lp b">spring-data-elasticsearch</code>依赖关系。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="99f8" class="ly kj in lp b gy lz ma l mb mc">dependencies {  <br/>implementation 'org.springframework.boot:spring-boot-starter-data-elasticsearch'  <br/>implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'  <br/>implementation 'org.springframework.boot:spring-boot-starter-web'  testImplementation 'org.springframework.boot:spring-boot-starter-test' <br/>}</span></pre><p id="586a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随后，我们需要创建Elasticsearch客户端bean。现在有两种方法来创建这个bean。</p><p id="2aa9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">添加这个bean的简单方法是在<code class="fe lm ln lo lp b">application.properties</code>中添加属性。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="06b0" class="ly kj in lp b gy lz ma l mb mc">spring.elasticsearch.rest.uris=localhost:9200 spring.elasticsearch.rest.connection-timeout=1s spring.elasticsearch.rest.read-timeout=1m spring.elasticsearch.rest.password= spring.elasticsearch.rest.username=</span></pre><p id="1262" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是在我们的应用程序中，我们将以编程方式构建这个bean。我们将使用Java高级Rest客户端(JHLC)。JHLC是elasticsearch的默认客户。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="71ba" class="ly kj in lp b gy lz ma l mb mc"><a class="ae ll" href="http://twitter.com/Configuration" rel="noopener ugc nofollow" target="_blank">@Configuration</a><br/><a class="ae ll" href="http://twitter.com/EnableElasticsearchR" rel="noopener ugc nofollow" target="_blank">@EnableElasticsearchR</a>epositories<br/>public class ElasticsearchClientConfiguration extends AbstractElasticsearchConfiguration<br/>{</span><span id="42bd" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>    <a class="ae ll" href="http://twitter.com/Bean" rel="noopener ugc nofollow" target="_blank">@Bean</a><br/>    public RestHighLevelClient elasticsearchClient ()<br/>    {<br/>        final ClientConfiguration clientConfiguration =<br/>                ClientConfiguration.builder().connectedTo("localhost:9200").build();</span><span id="a6ce" class="ly kj in lp b gy md ma l mb mc">return RestClients.create(clientConfiguration).rest();<br/>    }<br/>}</span></pre><p id="9bed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从今以后，我们有了一个客户机配置，它也可以使用来自<code class="fe lm ln lo lp b">application.properties</code>的属性。我们用<code class="fe lm ln lo lp b">RestClients</code>创造<code class="fe lm ln lo lp b">elasticsearchClient</code>。</p><p id="c0d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，我们将使用<code class="fe lm ln lo lp b">LogData</code>作为我们的模型。基本上，我们将为<code class="fe lm ln lo lp b">LogData</code>构建一个文档以存储在索引中。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="52ef" class="ly kj in lp b gy lz ma l mb mc"><a class="ae ll" href="http://twitter.com/Document" rel="noopener ugc nofollow" target="_blank">@Document</a>(indexName = "logdataindex")<br/>public class LogData<br/>{<br/>    <a class="ae ll" href="http://twitter.com/Id" rel="noopener ugc nofollow" target="_blank">@Id</a><br/>    private String id;</span><span id="981b" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/Field" rel="noopener ugc nofollow" target="_blank">@Field</a>(type = FieldType.Text, name = "host")<br/>    private String host;</span><span id="803c" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/Field" rel="noopener ugc nofollow" target="_blank">@Field</a>(type = FieldType.Date, name = "date")<br/>    private Date date;</span><span id="66a0" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/Field" rel="noopener ugc nofollow" target="_blank">@Field</a>(type = FieldType.Text, name = "message")<br/>    private String message;</span><span id="1b9e" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/Field" rel="noopener ugc nofollow" target="_blank">@Field</a>(type = FieldType.Double, name = "size")<br/>    private double size;</span><span id="003a" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/Field" rel="noopener ugc nofollow" target="_blank">@Field</a>(type = FieldType.Text, name = "status")<br/>    private String status;</span><span id="11bf" class="ly kj in lp b gy md ma l mb mc">// Getters and Setters</span><span id="579f" class="ly kj in lp b gy md ma l mb mc">}</span></pre><ul class=""><li id="d262" class="me mf in jm b jn jo jr js jv mg jz mh kd mi kh mj mk ml mm bi translated"><code class="fe lm ln lo lp b">@Document</code> -指定我们的索引。</li><li id="943c" class="me mf in jm b jn mn jr mo jv mp jz mq kd mr kh mj mk ml mm bi translated"><code class="fe lm ln lo lp b">@Id</code> -表示文档的field _id，对于每条消息都是唯一的。</li><li id="cff3" class="me mf in jm b jn mn jr mo jv mp jz mq kd mr kh mj mk ml mm bi translated"><code class="fe lm ln lo lp b">@Field</code> -代表数据中可能存在的不同类型的字段。</li></ul><p id="e95b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有两种方法可以使用弹性搜索来搜索或创建索引-</p><ol class=""><li id="f1e3" class="me mf in jm b jn jo jr js jv mg jz mh kd mi kh ms mk ml mm bi translated">使用Spring数据仓库</li><li id="c838" class="me mf in jm b jn mn jr mo jv mp jz mq kd mr kh ms mk ml mm bi translated">使用ElasticsearchRestTemplate</li></ol><h1 id="60d2" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">带有弹性搜索的Spring数据仓库</h1><p id="3c33" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">总的来说，Spring Data Repository允许我们创建存储库，用于编写简单的CRUD方法，以便在弹性搜索中进行搜索或索引。但是如果你想更多的控制查询，你可以使用<code class="fe lm ln lo lp b">ElasticsearchRestTemplate</code>。尤其是，它允许您编写更高效的查询。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="7d41" class="ly kj in lp b gy lz ma l mb mc">public interface LogDataRepository extends ElasticsearchRepository&lt;LogData, String&gt; { </span><span id="8e19" class="ly kj in lp b gy md ma l mb mc">}</span></pre><p id="acf9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该存储库提供了Spring从实现角度处理的基本CRUD方法。</p><h1 id="d613" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">使用ElasticsearchRestTemplate</h1><p id="34aa" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">如果我们想使用聚合、建议等高级查询，可以使用<code class="fe lm ln lo lp b">ElasticsearchRestTemplate</code>。Spring数据库提供了这个模板。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="bcbf" class="ly kj in lp b gy lz ma l mb mc">public List getLogDatasByHost(String host) { <br/>    Query query = new NativeSearchQueryBuilder() .withQuery(QueryBuilders.matchQuery("host", host)).build(); <br/>    SearchHits searchHits = elasticsearchRestTemplate.search(query, LogData.class); <br/>    return SearchHits.get().map(SearchHit::getContent).collect(Collectors.toList()); </span><span id="7ecf" class="ly kj in lp b gy md ma l mb mc">}</span></pre><p id="7540" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们进行更复杂的查询时，我将进一步展示<code class="fe lm ln lo lp b">ElasticsearchRestTemplate</code>的用法。</p><p id="31ea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lm ln lo lp b">ElasticsearchRestTemplate</code>机具<code class="fe lm ln lo lp b">ElasticsearchOperations</code>。您可以使用<code class="fe lm ln lo lp b">ElasticsearchRestTemplate</code>进行一些关键查询，与Spring数据存储库相比，这些查询使用起来更方便。</p><p id="92cd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lm ln lo lp b">index()</code>或<code class="fe lm ln lo lp b">bulkIndex()</code>允许批量创建一个或多个索引。可以构建一个索引查询对象并在<code class="fe lm ln lo lp b">index()</code>方法调用中使用。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="dc63" class="ly kj in lp b gy lz ma l mb mc">private ElasticsearchRestTemplate elasticsearchRestTemplate; </span><span id="157a" class="ly kj in lp b gy md ma l mb mc">public List createLogData (final List logDataList) <br/>{ <br/>   List queries = logDataList.stream().map(logData -&gt; new IndexQueryBuilder().withId(logData.getId().toString()) .withObject(logData).build()).collect(Collectors.toList());</span><span id="d1c9" class="ly kj in lp b gy md ma l mb mc"> return elasticsearchRestTemplate.bulkIndex(queries,IndexCoordinates.of("logdataindex")); </span><span id="0c75" class="ly kj in lp b gy md ma l mb mc">}</span></pre><p id="aaa6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lm ln lo lp b">search()</code>方法帮助在索引中搜索文档。通过构建<code class="fe lm ln lo lp b">Query</code>对象可以进行搜索操作。<code class="fe lm ln lo lp b">Query</code>一个人可以建造三种类型的建筑。<code class="fe lm ln lo lp b">NativeQuery</code>、<code class="fe lm ln lo lp b">CriteriaQuery</code>和<code class="fe lm ln lo lp b">StringQuery</code>。</p><h1 id="cc2e" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">Rest Controller查询弹性搜索实例</h1><p id="597a" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">让我们创建一个rest控制器，用于在我们的弹性搜索实例中添加大量数据以及查询相同的实例。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="bb0a" class="ly kj in lp b gy lz ma l mb mc"><a class="ae ll" href="http://twitter.com/RestController" rel="noopener ugc nofollow" target="_blank">@RestController</a><br/><a class="ae ll" href="http://twitter.com/RequestMapping" rel="noopener ugc nofollow" target="_blank">@RequestMapping</a>("/v1/betterjavacode/logdata")<br/>public class LogDataController<br/>{<br/>    <a class="ae ll" href="http://twitter.com/Autowired" rel="noopener ugc nofollow" target="_blank">@Autowired</a><br/>    private LogDataService logDataService;</span><span id="7eb9" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/GetMapping" rel="noopener ugc nofollow" target="_blank">@GetMapping</a><br/>    public List searchLogDataByHost(<a class="ae ll" href="http://twitter.com/RequestParam" rel="noopener ugc nofollow" target="_blank">@RequestParam</a>("host") String host)<br/>    {<br/>        List logDataList = logDataService.getAllLogDataForHost(host);</span><span id="ff84" class="ly kj in lp b gy md ma l mb mc">return logDataList;<br/>    }</span><span id="1a41" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/GetMapping" rel="noopener ugc nofollow" target="_blank">@GetMapping</a>("/search")<br/>    public List searchLogDataByTerm(<a class="ae ll" href="http://twitter.com/RequestParam" rel="noopener ugc nofollow" target="_blank">@RequestParam</a>("term") String term)<br/>    {<br/>        return logDataService.findBySearchTerm(term);<br/>    }</span><span id="c39f" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/PostMapping" rel="noopener ugc nofollow" target="_blank">@PostMapping</a><br/>    public LogData addLogData(<a class="ae ll" href="http://twitter.com/RequestBody" rel="noopener ugc nofollow" target="_blank">@RequestBody</a> LogData logData)<br/>    {</span><span id="348c" class="ly kj in lp b gy md ma l mb mc">return logDataService.createLogDataIndex(logData);<br/>    }</span><span id="c824" class="ly kj in lp b gy md ma l mb mc"><a class="ae ll" href="http://twitter.com/PostMapping" rel="noopener ugc nofollow" target="_blank">@PostMapping</a>("/createInBulk")<br/>    public  List addLogDataInBulk(<a class="ae ll" href="http://twitter.com/RequestBody" rel="noopener ugc nofollow" target="_blank">@RequestBody</a> List logDataList)<br/>    {<br/>        return (List) logDataService.createLogDataIndices(logDataList);<br/>    }<br/>}</span></pre><h1 id="3cfc" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">运行弹性搜索实例</h1><p id="243c" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">到目前为止，我们已经展示了如何创建索引，如何使用弹性搜索客户端。但是，我们没有显示将这个客户端连接到我们的弹性搜索实例。</p><p id="1929" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用一个docker实例在本地环境中运行弹性搜索。AWS提供自己的服务来运行弹性搜索。</p><p id="d9da" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要运行您自己的elastic search docker实例，请使用以下命令</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="b39c" class="ly kj in lp b gy lz ma l mb mc">docker run -p 9200:9200 -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:7.10.0</span></pre><p id="9339" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随后，这将启动弹性搜索节点，您可以通过访问<code class="fe lm ln lo lp b"><a class="ae ll" href="http://localhost:9200" rel="noopener ugc nofollow" target="_blank">http://localhost:9200</a></code>进行验证</p><figure class="lq lr ls lt gt mu gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/947810ded7e8184fc75e8fa68acca09a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/0*vTUBkrQXqrkHNVwf"/></div></figure><h1 id="3727" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">创建索引和搜索数据</h1><p id="059c" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">总之，如果我们启动应用程序，我们将使用一个Postman来创建一个初始索引，并继续向其中添加文档。</p><figure class="lq lr ls lt gt mu gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/2c51b2aea6cedd84466e68f7d2b120b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/0*WvxVRooLAO5V-Gmf"/></div></figure><p id="9b71" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这也将创建一个索引并将文档添加到该索引中。在elasticsearch实例上，我们可以看到如下日志:</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="cc8c" class="ly kj in lp b gy lz ma l mb mc">{ <br/>"type": "server", <br/>"timestamp": "2021-08-22T18:48:46,579Z", <br/>"level": "INFO", <br/>"component": "o.e.c.m.MetadataCreateIndexService", <br/>"cluster.name": "docker-cluster", <br/>"node.name": "e5f3b8096ca3", <br/>"message": "[logdataindex] creating index, cause [api], templates [], shards [1]/[1]", <br/>"cluster.uuid": "mi1O1od7Rju1dQMXDnCuNQ", <br/>"node.id": "PErAmAWPRiCS5tv-O7HERw" <br/>}</span></pre><p id="dec2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该消息清楚地显示它已经创建了一个索引<code class="fe lm ln lo lp b">logdataindex</code>。现在如果添加更多的文档到同一个索引，它将更新那个索引。</p><p id="8732" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们运行一个搜索查询。我将运行一个简单的查询来搜索文本术语“Google”</p><figure class="lq lr ls lt gt mu gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/2385b43fbeec3b94b1922d3a1b7b96a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/0*HtdDw3tiOkdJbgNA"/></div></figure><p id="21b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个简单的搜索查询。如前所述，我们可以使用不同类型的查询编写更复杂的搜索查询——字符串、标准或原生查询。</p><h1 id="ef38" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">结论</h1><p id="2d0d" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">这个演示的代码可以在我的<a class="ae ll" href="https://github.com/yogsma/betterjavacode/tree/main/elasticsearchdemo" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>上找到。</p><p id="6525" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇文章中，我们讨论了以下内容</p><ul class=""><li id="80c2" class="me mf in jm b jn jo jr js jv mg jz mh kd mi kh mj mk ml mm bi translated">弹性搜索和弹性搜索的关键概念</li><li id="2488" class="me mf in jm b jn mn jr mo jv mp jz mq kd mr kh mj mk ml mm bi translated">Spring数据仓库和ElasticsearchRestTemplate</li><li id="68c7" class="me mf in jm b jn mn jr mo jv mp jz mq kd mr kh mj mk ml mm bi translated">与Spring Boot应用程序集成</li><li id="55ba" class="me mf in jm b jn mn jr mo jv mp jz mq kd mr kh mj mk ml mm bi translated">针对Elasticsearch执行不同的查询</li></ul><p id="6c5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你没有看过我写的关于春天安全的书，你可以在这里查看<a class="ae ll" href="https://betterjavacode.com/programming/simplifying-spring-security" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="dd53" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你觉得Gradle作为一个构建工具令人困惑吗？为什么理解起来这么复杂？我正在写一本关于Gradle的简单的新书——Gradle For Humans。<a class="ae ll" href="https://yogsma.gumroad.com/" rel="noopener ugc nofollow" target="_blank">关注我这里</a>了解更多更新。</p></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><p id="bef7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ne">原载于2021年8月24日https://betterjavacode.com</em><em class="ne">的</em> <a class="ae ll" href="https://betterjavacode.com/programming/elasticsearch-spring-boot" rel="noopener ugc nofollow" target="_blank"> <em class="ne">。</em></a></p></div></div>    
</body>
</html>