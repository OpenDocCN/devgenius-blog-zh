<html>
<head>
<title>Forgotten Jenkins Admin User/Password</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">忘记了 Jenkins 管理员用户/密码</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/forgotten-jenkins-admin-user-password-d7de780fa5bb?source=collection_archive---------0-----------------------#2022-10-21">https://blog.devgenius.io/forgotten-jenkins-admin-user-password-d7de780fa5bb?source=collection_archive---------0-----------------------#2022-10-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1930a8b2cb45be62b26f854dce7a2367.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CTN3tyVOEGBhKomo"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@thetonik_co?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">托尼克</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="62c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi ky translated"><span class="l kz la lb bm lc ld le lf lg di">如果</span>您忘记了 Jenkins 管理员用户或密码，并且无法以管理员身份登录 Jenkins 用户界面(UI ), Jenkins 不会提供一种简单的方法来重置管理员帐户密码。<br/>您可以通过 SSH 连接到 Jenkins 服务器并重置 Jenkins 管理员密码。</p><p id="d9a9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最简单的解决方案是完全禁用<code class="fe lh li lj lk b">/var/lib/jenkins/config.xml</code>文件中的安全性。</p><p id="07b3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，我们将遵循以下步骤:</p><ol class=""><li id="4986" class="ll lm in kc b kd ke kh ki kl ln kp lo kt lp kx lq lr ls lt bi translated">用 ssh 连接到您的 Jenkins 服务器。</li><li id="d51a" class="ll lm in kc b kd lu kh lv kl lw kp lx kt ly kx lq lr ls lt bi translated">让我们看看 config.xml 文件</li></ol><pre class="lz ma mb mc gt md lk me mf aw mg bi"><span id="6fa8" class="mh mi in lk b gy mj mk l ml mm">$ cd /var/lib/jenkins<br/>$ ls</span></pre><blockquote class="mn mo mp"><p id="fb03" class="ka kb mq kc b kd ke kf kg kh ki kj kk mr km kn ko ms kq kr ks mt ku kv kw kx ig bi translated">重要提示:您将看到 config.xml 文件，您必须复制一份 Jenkins 配置文件。</p></blockquote><p id="f77e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.制作 Jenkins 配置文件的备份副本。</p><pre class="lz ma mb mc gt md lk me mf aw mg bi"><span id="7533" class="mh mi in lk b gy mj mk l ml mm">$ cp /var/lib/jenkins/config.xml /var/lib/jenkins/config.xml.back<br/>$ ls</span></pre><blockquote class="mn mo mp"><p id="819c" class="ka kb mq kc b kd ke kf kg kh ki kj kk mr km kn ko ms kq kr ks mt ku kv kw kx ig bi translated">用 ls 命令检查 config.xml.back 文件。</p></blockquote><p id="536b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.打开配置文件<code class="fe lh li lj lk b">/var/lib/jenkins/config.xml</code>禁用安全性:</p><pre class="lz ma mb mc gt md lk me mf aw mg bi"><span id="a1f1" class="mh mi in lk b gy mj mk l ml mm">$ sudo vi /var/lib/jenkins/config.xml</span></pre><p id="5ebf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">按下<code class="fe lh li lj lk b">i</code>进入<strong class="kc io"> vim </strong>插入模式。修改<code class="fe lh li lj lk b">&lt;useSecurity&gt;</code>标签之间的值，并将该值设置为<code class="fe lh li lj lk b">false</code></p><blockquote class="mn mo mp"><p id="5dd3" class="ka kb mq kc b kd ke kf kg kh ki kj kk mr km kn ko ms kq kr ks mt ku kv kw kx ig bi translated">config.xml 文件中的<code class="fe lh li lj lk b">&lt;useSecurity&gt;true&lt;/useSecurity&gt;</code>将被<code class="fe lh li lj lk b">&lt;useSecurity&gt;false&lt;/useSecurity&gt;</code>改变</p></blockquote><p id="5ca0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">按<code class="fe lh li lj lk b">ESC</code>保存更改，然后输入<code class="fe lh li lj lk b">wq</code>写入更改，然后退出编辑器。</p><p id="97e0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">5.重新启动 Jenkins 服务:</p><pre class="lz ma mb mc gt md lk me mf aw mg bi"><span id="4543" class="mh mi in lk b gy mj mk l ml mm">$ systemctl restart jenkins</span></pre><blockquote class="mn mo mp"><p id="89b4" class="ka kb mq kc b kd ke kf kg kh ki kj kk mr km kn ko ms kq kr ks mt ku kv kw kx ig bi translated">重启后，您可以使用<code class="fe lh li lj lk b">sudo systemctl status jenkins</code>命令检查 Jenkins 服务是否正在运行。</p></blockquote></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><p id="1367" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">转到 Jenkins UI，这次不会要求您提供任何凭证，因为您将以匿名用户的身份登录到 Jenkins</p><p id="1e1a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">并重置管理员密码:</p><ol class=""><li id="d2cc" class="ll lm in kc b kd ke kh ki kl ln kp lo kt lp kx lq lr ls lt bi translated">导航至<code class="fe lh li lj lk b">"Manage Jenkins"</code>-&gt;-<code class="fe lh li lj lk b">"Security"</code>-&gt;-<code class="fe lh li lj lk b">"Configure Global Security"</code>-&gt;-<code class="fe lh li lj lk b">"Authentication"</code></li></ol><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/bb1a8205a0a82e32485bfa94520c25c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u4jAO0kxY5V5YSmWYh0MtA.png"/></div></div></figure><p id="5254" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.选择<code class="fe lh li lj lk b">"Security Realm"</code>(如<code class="fe lh li lj lk b">"Jenkins’ own user database"</code>)并点击<code class="fe lh li lj lk b">"Save"</code></p><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/f68a0960dbace21f47c3530e1035a952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0QuEuNWAxJ4-9nHWOrY9A.png"/></div></div></figure><p id="a390" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.进入<code class="fe lh li lj lk b">"Dashboard"</code>-&gt;-<code class="fe lh li lj lk b">"People"</code>-&gt;点击您想要更改密码的用户名(如<code class="fe lh li lj lk b">admin</code>)-&gt;-<code class="fe lh li lj lk b">"Configure"</code>-&gt;在<code class="fe lh li lj lk b">"Password"</code>和<code class="fe lh li lj lk b">"Confirm password"</code>字段输入新密码，然后点击<code class="fe lh li lj lk b">"Save"</code></p><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/6e298e0dda0614e93dee95c4d77d794f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*p-osyfsych6ocZpMFrkC2g.png"/></div></figure><p id="74b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">重置管理员密码后，恢复之前的<code class="fe lh li lj lk b">/var/lib/jenkins/config.xml</code>文件并重启 Jenkins:</p><pre class="lz ma mb mc gt md lk me mf aw mg bi"><span id="e203" class="mh mi in lk b gy mj mk l ml mm">$ mv /var/lib/jenkins/config.xml.back /var/lib/jenkins/config.xml<br/>$ systemctl restart jenkins</span></pre><h1 id="372a" class="nd mi in bd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz bi translated">感谢阅读！</h1><p id="3926" class="pw-post-body-paragraph ka kb in kc b kd oa kf kg kh ob kj kk kl oc kn ko kp od kr ks kt oe kv kw kx ig bi translated"><em class="mq">如果你喜欢我的工作并想支持我… </em></p><ol class=""><li id="3a80" class="ll lm in kc b kd ke kh ki kl ln kp lo kt lp kx lq lr ls lt bi translated"><em class="mq">最好的办法就是跟着我上媒</em> <a class="ae jz" href="https://hivelkrasniqi.medium.com/" rel="noopener"> <em class="mq">这里</em> </a> <em class="mq">。</em></li><li id="494a" class="ll lm in kc b kd lu kh lv kl lw kp lx kt ly kx lq lr ls lt bi translated">请随意鼓掌或写评论，这样我就知道这篇文章对你有多大帮助了。</li></ol></div></div>    
</body>
</html>