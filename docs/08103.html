<html>
<head>
<title>90 numpy exercises you need to know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你需要知道的 90 个数字练习</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/90-numpy-exercises-you-need-to-know-f4c032282c61?source=collection_archive---------2-----------------------#2022-05-17">https://blog.devgenius.io/90-numpy-exercises-you-need-to-know-f4c032282c61?source=collection_archive---------2-----------------------#2022-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="afc0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你将需要定期进行 Numpy 练习</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ac0ed58e61c331821c5f3defe9cc6234.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qEFEuvmyIoQ38VcE"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">莎伦·麦卡琴在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure></div><div class="ab cl kw kx hu ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ij ik il im in"><p id="388c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">日常使用中需要的有用的 numpy 练习。请看一看。</p><ol class=""><li id="26d0" class="lz ma iq lf b lg lh lj lk lm mb lq mc lu md ly me mf mg mh bi translated">在名称 np 下导入 numpy 包</li></ol><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="e22e" class="mn mo iq mj b gy mp mq l mr ms">import numpy as np</span></pre><p id="09e1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">2.打印 numpy 版本和配置</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="9b5d" class="mn mo iq mj b gy mp mq l mr ms">print(np.__version__)<br/>np.show_config()</span></pre><p id="174f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">3.创建一个大小为 10 的空向量</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="f99d" class="mn mo iq mj b gy mp mq l mr ms">Z = np.zeros(10)<br/>print(Z)</span></pre><p id="1e2c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">4.如何从命令行获取 numpy add 函数的文档？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="e1fa" class="mn mo iq mj b gy mp mq l mr ms">python -c "import numpy; numpy.info(numpy.add)"</span></pre><p id="15ca" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">5.创建一个大小为 10 的空向量，但第五个值为 1</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="dc4d" class="mn mo iq mj b gy mp mq l mr ms">Z = np.zeros(10)<br/>Z[4] = 1<br/>print(Z)</span></pre><p id="f9ce" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">6.创建一个值在 10 到 49 之间的向量</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="fdd7" class="mn mo iq mj b gy mp mq l mr ms">Z = np.arange(10,50)<br/>print(Z)</span></pre><p id="c328" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">7.反转向量(第一个元素成为最后一个)</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="64d8" class="mn mo iq mj b gy mp mq l mr ms">Z = np.arange(50)<br/>Z = Z[::-1]</span></pre><p id="cdf5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">8.创建一个 3x3 的矩阵，取值范围从 0 到 8</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="506e" class="mn mo iq mj b gy mp mq l mr ms">Z = np.arange(9).reshape(3,3)<br/>print(Z)</span></pre><p id="2a23" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">9.从[1，2，0，0，4，0]中寻找非零元素的索引</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="6a76" class="mn mo iq mj b gy mp mq l mr ms">nz = np.nonzero([1,2,0,0,4,0])<br/>print(nz)</span></pre><p id="6d50" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">10.创建一个 3x3 的身份矩阵</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="02ea" class="mn mo iq mj b gy mp mq l mr ms">Z = np.eye(3)<br/>print(Z)</span></pre><p id="2f81" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">11.用随机值创建一个 3x3x3 数组</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="b8ce" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.random((3,3,3))<br/>print(Z)</span></pre><p id="2be0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">12.用随机值创建一个 10x10 的数组，并找出最小值和最大值</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="da8f" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.random((10,10))<br/>Zmin, Zmax = Z.min(), Z.max()<br/>print(Zmin, Zmax)</span></pre><p id="887a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">13.创建一个大小为 30 的随机向量，并找出平均值</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="ee16" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.random(30)<br/>m = Z.mean()<br/>print(m)</span></pre><p id="5d4b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">14.创建一个边界为 1，内部为 0 的二维数组</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="2b3b" class="mn mo iq mj b gy mp mq l mr ms">Z = np.ones((10,10))<br/>Z[1:-1,1:-1] = 0</span></pre><p id="d4f7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">15.下面这个表达式的结果是什么？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="b0b5" class="mn mo iq mj b gy mp mq l mr ms">0 * np.nan<br/>np.nan == np.nan<br/>np.inf &gt; np.nan<br/>np.nan - np.nan<br/>0.3 == 3 * 0.1</span></pre><p id="4117" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">16.在对角线正下方创建一个值为 1，2，3，4 的 5x5 矩阵</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="a9cb" class="mn mo iq mj b gy mp mq l mr ms">Z = np.diag(1+np.arange(4),k=-1)<br/>print(Z)</span></pre><p id="6056" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">17.创建一个 8x8 的矩阵，用棋盘图案填充</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="3ec3" class="mn mo iq mj b gy mp mq l mr ms">Z = np.zeros((8,8),dtype=int)<br/>Z[1::2,::2] = 1<br/>Z[::2,1::2] = 1<br/>print(Z)</span></pre><p id="4045" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">18.考虑一个(6，7，8)形状的数组，第 100 个元素的索引(x，y，z)是多少？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="cdee" class="mn mo iq mj b gy mp mq l mr ms">print(np.unravel_index(100,(6,7,8)))</span></pre><p id="9e2a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">19.使用平铺功能创建一个 8×8 的棋盘矩阵</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="6dcc" class="mn mo iq mj b gy mp mq l mr ms">Z = np.tile( np.array([[0,1],[1,0]]), (4,4))<br/>print(Z)</span></pre><p id="858a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">20.归一化 5x5 随机矩阵</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="bc4b" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.random((5,5))<br/>Zmax, Zmin = Z.max(), Z.min()<br/>Z = (Z - Zmin)/(Zmax - Zmin)<br/>print(Z)</span></pre><p id="8fc6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">21.创建将颜色描述为四个无符号字节的自定义数据类型(RGBA)</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="a076" class="mn mo iq mj b gy mp mq l mr ms">color = np.dtype([("r", np.ubyte, 1),<br/>("g", np.ubyte, 1),<br/>("b", np.ubyte, 1),<br/>("a", np.ubyte, 1)])</span></pre><p id="0f56" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">22.将一个 5x3 矩阵乘以一个 3x2 矩阵(实数矩阵乘积)</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="deb5" class="mn mo iq mj b gy mp mq l mr ms">Z = np.dot(np.ones((5,3)), np.ones((3,2)))<br/>print(Z)</span></pre><p id="39ac" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">23.给定一个 1D 数组，就地取 3 到 8 之间的所有元素的反。</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="9941" class="mn mo iq mj b gy mp mq l mr ms"># Author: Evgeni Burovski<br/>Z = np.arange(11)<br/>Z[(3 &lt; Z) &amp; (Z &lt;= 8)] *= -1</span></pre><p id="8ac6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">24.以下脚本的输出是什么？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="1d86" class="mn mo iq mj b gy mp mq l mr ms"># Author: Jake VanderPlas<br/>print(sum(range(5),-1))<br/>from numpy import *<br/>print(sum(range(5),-1))</span></pre><p id="e6da" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">25.考虑一个整数向量 Z，这些表达式中哪些是合法的？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="48b7" class="mn mo iq mj b gy mp mq l mr ms">Z**Z<br/>2 &lt;&lt; Z &gt;&gt; 2<br/>Z &lt;- Z<br/>1j*Z<br/>Z/1/1<br/>Z&lt;Z&gt;Z</span></pre><p id="24bb" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">26.下列表达式的结果是什么？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="0fc2" class="mn mo iq mj b gy mp mq l mr ms">np.array(0) // np.array(0)<br/>np.array(0) // np.array(0.)<br/>np.array(0) / np.array(0)<br/>np.array(0) / np.array(0.)</span></pre><p id="4e3f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">27.如何从零开始舍入一个浮点数组？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="3968" class="mn mo iq mj b gy mp mq l mr ms"># Author: Charles R Harris<br/>Z = np.random.uniform(-10,+10,10)<br/>print (np.trunc(Z + np.copysign(0.5, Z)))</span></pre><p id="a8ae" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">28.使用 5 种不同的方法提取随机数组的整数部分</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="a74e" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.uniform(0,10,10)<br/>print (Z - Z%1)<br/>print (np.floor(Z))<br/>print (np.ceil(Z)-1)<br/>print (Z.astype(int))<br/>print (np.trunc(Z))</span></pre><p id="ee11" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">29.创建一个行值范围从 0 到 4 的 5x5 矩阵</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="ddc4" class="mn mo iq mj b gy mp mq l mr ms">Z = np.zeros((5,5))<br/>Z += np.arange(5)<br/>print(Z)</span></pre><p id="8dae" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">30.考虑一个生成 10 个整数的生成器函数，并用它来构建一个数组</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="6759" class="mn mo iq mj b gy mp mq l mr ms">def generate():<br/>for x in xrange(10):<br/>yield x<br/>Z = np.fromiter(generate(),dtype=float,count=-1)<br/>print(Z)</span></pre><p id="6264" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">31.创建一个大小为 10 的向量，值的范围从 0 到 1，两者都不包括</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="1adc" class="mn mo iq mj b gy mp mq l mr ms">Z = np.linspace(0,1,12,endpoint=True)[1:-1]<br/>print(Z)</span></pre><p id="d49a" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">32.创建一个大小为 10 的随机向量并排序</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="6bfb" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.random(10)<br/>Z.sort()<br/>print(Z)</span></pre><p id="ab7d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">33.如何比 np.sum 更快的对小数组求和？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="3d9a" class="mn mo iq mj b gy mp mq l mr ms"># Author: Evgeni Burovski<br/>Z = np.arange(10)<br/>np.add.reduce(Z)</span></pre><p id="361e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">34.考虑两个随机数组 A 和 B，检查它们是否相等</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="383e" class="mn mo iq mj b gy mp mq l mr ms">A = np.random.randint(0,2,5)<br/>B = np.random.randint(0,2,5)<br/>equal = np.allclose(A,B)<br/>print(equal)</span></pre><p id="9c35" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">35.使数组不可变(只读)</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="763d" class="mn mo iq mj b gy mp mq l mr ms">Z = np.zeros(10)<br/>Z.flags.writeable = False<br/>Z[0] = 1</span></pre><p id="f6d5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">36.考虑表示笛卡尔坐标的随机 10×2 矩阵，将它们转换成极坐标</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="652d" class="mn mo iq mj b gy mp mq l mr ms">X,Y = Z[:,0], Z[:,1]<br/>R = np.sqrt(X**2+Y**2)<br/>T = np.arctan2(Y,X)<br/>print(R)<br/>print(T)</span></pre><p id="3996" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">37.创建大小为 10 的随机向量，并将最大值替换为 0</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="e4b2" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.random(10)<br/>Z[Z.argmax()] = 0<br/>print(Z)</span></pre><p id="ea2b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">38.用覆盖[0，1]x[0，1]区域的 x 和 y 坐标创建一个结构化数组</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="2f22" class="mn mo iq mj b gy mp mq l mr ms">Z = np.zeros((10,10), [('x',float),('y',float)])<br/>Z['x'], Z['y'] = np.meshgrid(np.linspace(0,1,10),<br/>np.linspace(0,1,10))</span><span id="fb08" class="mn mo iq mj b gy mt mq l mr ms">print(Z)</span></pre><p id="6367" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">39.给定两个数组 X 和 Y，构造柯西矩阵 C (Cij = 1/(xi yj))</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="2f39" class="mn mo iq mj b gy mp mq l mr ms"># Author: Evgeni Burovski<br/>X = np.arange(8)<br/>Y = X + 0.5<br/>C = 1.0 / np.subtract.outer(X, Y)<br/>print(np.linalg.det(C))</span></pre><p id="6cb1" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">40.打印每个 numpy 标量类型的最小和最大可表示值</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="5b39" class="mn mo iq mj b gy mp mq l mr ms">for dtype in [np.int8, np.int32, np.int64]:<br/>print(np.iinfo(dtype).min)<br/>print(np.iinfo(dtype).max)<br/>for dtype in [np.float32, np.float64]:<br/>print(np.finfo(dtype).min)<br/>print(np.finfo(dtype).max)<br/>print(np.finfo(dtype).eps)</span></pre><p id="90ee" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">41.如何打印一个数组的所有值？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="2326" class="mn mo iq mj b gy mp mq l mr ms">np.set_printoptions(threshold=np.nan)<br/>Z = np.zeros((25,25))<br/>print(Z)</span></pre><p id="efb7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">42.如何在数组中找到最接近的值(给定标量)？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="e827" class="mn mo iq mj b gy mp mq l mr ms">Z = np.arange(100)<br/>v = np.random.uniform(0,100)<br/>index = (np.abs(Z-v)).argmin()<br/>print(Z[index])</span></pre><p id="0cd5" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">43.创建一个表示位置(x，y)和颜色(r，g，b)的结构化数组</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="8d9f" class="mn mo iq mj b gy mp mq l mr ms">Z = np.zeros(10, [ ('position', [ ('x', float, 1),<br/>('y', float, 1)]),<br/>('color', [ ('r', float, 1),<br/>('g', float, 1),<br/>('b', float, 1)])])</span><span id="60a3" class="mn mo iq mj b gy mt mq l mr ms">print(Z)</span></pre><p id="584f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">44.假设一个形状为(100，2)的随机向量表示坐标，求逐点距离</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="bba2" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.random((10,2))<br/>X,Y = np.atleast_2d(Z[:,0]), np.atleast_2d(Z[:,1])<br/>D = np.sqrt( (X-X.T)**2 + (Y-Y.T)**2)<br/>print(D)<br/># Much faster with scipy<br/>import scipy<br/># Thanks Gavin Heverly-Coulson (#issue 1)<br/>import scipy.spatial<br/>Z = np.random.random((10,2))<br/>D = scipy.spatial.distance.cdist(Z,Z)<br/>print(D)</span></pre><p id="9ec6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">45.如何将一个浮点数(32 位)数组就地转换成整数(32 位)？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="ed48" class="mn mo iq mj b gy mp mq l mr ms">Z = np.arange(10, dtype=np.int32)<br/>Z = Z.astype(np.float32, copy=False)</span></pre><p id="73b7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">46.如何阅读下面的文件？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="2517" class="mn mo iq mj b gy mp mq l mr ms"># -------------<br/>1,2,3,4,5<br/>6,,,7,8<br/>,,9,10,11<br/># -------------<br/>Z = np.genfromtxt("missing.dat", delimiter=",")</span></pre><p id="dce0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">47.numpy 数组的 enumerate 等价于什么？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="bca6" class="mn mo iq mj b gy mp mq l mr ms">Z = np.arange(9).reshape(3,3)<br/>for index, value in np.ndenumerate(Z):<br/>print(index, value)<br/>for index in np.ndindex(Z.shape):</span></pre><p id="1587" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">48.生成类似 2D 高斯的一般数组</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="a668" class="mn mo iq mj b gy mp mq l mr ms">X, Y = np.meshgrid(np.linspace(-1,1,10), np.linspace(-1,1,10))<br/>D = np.sqrt(X*X+Y*Y)<br/>sigma, mu = 1.0, 0.0<br/>G = np.exp(-( (D-mu)**2 / ( 2.0 * sigma**2 ) ) )<br/>print(G)</span></pre><p id="932e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">49.如何在 2D 数组中随机放置 p 个元素？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="2446" class="mn mo iq mj b gy mp mq l mr ms"># Author: Divakar<br/>n = 10<br/>p = 3<br/>Z = np.zeros((n,n))<br/>np.put(Z, np.random.choice(range(n*n), p, replace=False),1)</span></pre><p id="2215" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">50.减去矩阵每行的平均值</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="774e" class="mn mo iq mj b gy mp mq l mr ms"># Author: Warren Weckesser<br/>X = np.random.rand(5, 10)<br/># Recent versions of numpy<br/>Y = X - X.mean(axis=1, keepdims=True)<br/># Older versions of numpy<br/>Y = X - X.mean(axis=1).reshape(-1, 1)</span></pre><p id="3428" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">51.如何按第 n 列对数组排序？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="3573" class="mn mo iq mj b gy mp mq l mr ms"># Author: Steve Tjoa<br/>Z = np.random.randint(0,10,(3,3))<br/>print(Z)<br/>print(Z[Z[:,1].argsort()])</span></pre><p id="432e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">52.如何判断给定的 2D 数组是否有空列？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="6f03" class="mn mo iq mj b gy mp mq l mr ms"># Author: Warren Weckesser<br/>Z = np.random.randint(0,3,(3,10))<br/>print((~Z.any(axis=0)).any())</span></pre><p id="acb2" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">53.从数组中的给定值中找出最近的值</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="d835" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.uniform(0,1,10)<br/>z = 0.5<br/>m = Z.flat[np.abs(Z - z).argmin()]<br/>print(m)</span></pre><p id="6179" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">54.创建一个具有 name 属性的数组类</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="dec3" class="mn mo iq mj b gy mp mq l mr ms">class NamedArray(np.ndarray):<br/>def __new__(cls, array, name="no name"):<br/>obj = np.asarray(array).view(cls)<br/>obj.name = name<br/>return obj<br/>def __array_finalize__(self, obj):<br/>if obj is None: return<br/>self.info = getattr(obj, 'name', "no name")<br/>Z = NamedArray(np.arange(10), "range_10")<br/>print (Z.name)</span></pre><p id="e1b7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">55.考虑给定一个向量，如何给第二个向量索引的每个元素加 1(注意重复索引)？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="be5a" class="mn mo iq mj b gy mp mq l mr ms"># Author: Brett Olsen<br/>Z = np.ones(10)<br/>I = np.random.randint(0,len(Z),20)<br/>Z += np.bincount(I, minlength=len(Z))<br/>print(Z)</span></pre><p id="1b3e" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">56.如何基于索引列表(I)将一个向量(X)的元素累加到一个数组(F)？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="b962" class="mn mo iq mj b gy mp mq l mr ms"># Author: Alan G Isaac<br/>X = [1,2,3,4,5,6]<br/>I = [1,3,9,3,4,1]<br/>F = np.bincount(I,X)<br/>print(F)</span></pre><p id="5b98" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">57.考虑(dtype=ubyte)的(w，h，3)图像，计算唯一颜色的数量</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="f51a" class="mn mo iq mj b gy mp mq l mr ms"># Author: Nadav Horesh<br/>w,h = 16,16<br/>I = np.random.randint(0,2,(h,w,3)).astype(np.ubyte)<br/>F = I[...,0]*256*256 + I[...,1]*256 +I[...,2]<br/>n = len(np.unique(F))<br/>print(np.unique(I))</span></pre><p id="41a2" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">58.考虑一个四维数组，如何一次得到最后两个轴的和？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="c3e7" class="mn mo iq mj b gy mp mq l mr ms">A = np.random.randint(0,10,(3,4,3,4))<br/>sum = A.reshape(A.shape[:-2] + (-1,)).sum(axis=-1)<br/>print(sum)</span></pre><p id="c04b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">59.考虑一维向量 D，如何使用描述子集索引的相同大小的向量 S 来计算 D 的子集的平均值？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="929f" class="mn mo iq mj b gy mp mq l mr ms"># Author: Jaime Fernández del Río<br/>D = np.random.uniform(0,1,100)<br/>S = np.random.randint(0,10,100)<br/>D_sums = np.bincount(S, weights=D)<br/>D_counts = np.bincount(S)<br/>D_means = D_sums / D_counts<br/>print(D_means)</span></pre><p id="570b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">60.如何求一个点积的对角线？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="cf77" class="mn mo iq mj b gy mp mq l mr ms"># Author: Mathieu Blondel<br/># Slow version<br/>np.diag(np.dot(A, B))<br/># Fast version<br/>np.sum(A * B.T, axis=1)<br/># Faster version<br/>np.einsum("ij,ji-&gt;i", A, B).</span></pre><p id="8534" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">61.考虑向量[1，2，3，4，5]，如何构建一个新的向量，每个值之间交错 3 个连续的零？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="4425" class="mn mo iq mj b gy mp mq l mr ms"># Author: Warren Weckesser<br/>Z = np.array([1,2,3,4,5])<br/>nz = 3<br/>Z0 = np.zeros(len(Z) + (len(Z)-1)*(nz))<br/>Z0[::nz+1] = Z<br/>print(Z0)</span></pre><p id="4f51" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">62.考虑一个维数为(5，5，3)的数组，如何将其乘以维数为(5，5)的数组？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="3336" class="mn mo iq mj b gy mp mq l mr ms">A = np.ones((5,5,3))<br/>B = 2*np.ones((5,5))<br/>print(A * B[:,:,None])</span></pre><p id="5bf8" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">63.如何交换一个数组的两行？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="df07" class="mn mo iq mj b gy mp mq l mr ms"># Author: Eelco Hoogendoorn<br/>A = np.arange(25).reshape(5,5)<br/>A[[0,1]] = A[[1,0]]<br/>print(A)</span></pre><p id="3285" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">64.考虑一组描述 10 个三角形(具有共享顶点)的 10 个三元组，找出组成所有三角形的唯一线段集</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="0931" class="mn mo iq mj b gy mp mq l mr ms"># Author: Nicolas P. Rougier<br/>faces = np.random.randint(0,100,(10,3))<br/>F = np.roll(faces.repeat(2,axis=1),-1,axis=1)<br/>F = F.reshape(len(F)*3,2)<br/>F = np.sort(F,axis=1)<br/>G = F.view( dtype=[('p0',F.dtype),('p1',F.dtype)] )<br/>G = np.unique(G)<br/>print(G)</span></pre><p id="e028" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">65.给定一个数组 C 是一个 bincount，如何产生一个数组 A 使得<br/> np.bincount(A) == C？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="fc53" class="mn mo iq mj b gy mp mq l mr ms"># Author: Jaime Fernández del Río<br/>C = np.bincount([1,1,2,3,4,4,6])<br/>A = np.repeat(np.arange(len(C)), C)<br/>print(A)</span></pre><p id="3a2d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">66.如何在数组上使用滑动窗口计算平均值？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="7ef1" class="mn mo iq mj b gy mp mq l mr ms"># Author: Jaime Fernández del Río<br/>def moving_average(a, n=3) :<br/>ret = np.cumsum(a, dtype=float)<br/>ret[n:] = ret[n:] - ret[:-n]<br/>return ret[n - 1:] / n<br/>Z = np.arange(20)<br/>print(moving_average(Z, n=3))</span></pre><p id="e759" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">67.考虑一个一维数组 Z，构建一个二维数组，其第一行是(Z[0]，Z[ 1]，Z[ 2])，随后的每一行移动 1(最后一行应该是(Z[ 3]，Z[2]，Z[1])</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="890c" class="mn mo iq mj b gy mp mq l mr ms"># Author: Joe Kington / Erik Rigtorp<br/>from numpy.lib import stride_tricks<br/>def rolling(a, window):<br/>shape = (a.size - window + 1, window)<br/>strides = (a.itemsize, a.itemsize)<br/>return stride_tricks.as_strided(a, shape=shape, strides=strides)<br/>Z = rolling(np.arange(10), 3)<br/>print(Z)</span></pre><p id="2ad3" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">68.如何否定一个布尔值，或者改变一个浮点数的符号？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="f977" class="mn mo iq mj b gy mp mq l mr ms"># Author: Nathaniel J. Smith<br/>Z = np.random.randint(0,2,100)<br/>np.logical_not(arr, out=arr)<br/>Z = np.random.uniform(-1.0,1.0,100)<br/>np.negative(arr, out=arr)</span></pre><p id="c5f6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">69.考虑 2 组点 P0，P1 描述直线(2d)和一个点 p，如何<br/>计算 p 到每条直线 I 的距离(P0[i]，P1[i])？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="8a81" class="mn mo iq mj b gy mp mq l mr ms">def distance(P0, P1, p):<br/>T = P1 - P0<br/>L = (T**2).sum(axis=1)<br/>U = -((P0[:,0]-p[...,0])*T[:,0] + (P0[:,1]-p[...,1])*T[:,1]) / L<br/>U = U.reshape(len(U),1)<br/>D = P0 + U*T - p<br/>return np.sqrt((D**2).sum(axis=1))<br/>P0 = np.random.uniform(-10,10,(10,2))<br/>P1 = np.random.uniform(-10,10,(10,2))<br/>p = np.random.uniform(-10,10,( 1,2))<br/>print(distance(P0, P1, p))</span></pre><p id="0d48" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">70.考虑 2 组点 P0，P1 描述直线(2d)和一组点 P，如何计算每个点 j (P[j])到每条直线 i (P0[i]，P1[i])的距离？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="ff06" class="mn mo iq mj b gy mp mq l mr ms"># Author: Italmassov Kuanysh<br/># based on distance function from previous question<br/>P0 = np.random.uniform(-10, 10, (10,2))<br/>P1 = np.random.uniform(-10,10,(10,2))<br/>p = np.random.uniform(-10, 10, (10,2))<br/>print np.array([distance(P0,P1,p_i) for p_i in p])</span></pre><p id="c91b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">71.考虑一个任意数组，编写一个函数，提取一个形状固定的子部分，并以给定的元素为中心(必要时用 fillvalue 填充)</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="a2cd" class="mn mo iq mj b gy mp mq l mr ms"># Author: Nicolas Rougier<br/>Z = np.random.randint(0,10,(10,10))<br/>shape = (5,5)<br/>fill = 0<br/>position = (1,1)<br/>R = np.ones(shape, dtype=Z.dtype)*fill<br/>P = np.array(list(position)).astype(int)<br/>Rs = np.array(list(R.shape)).astype(int)<br/>Zs = np.array(list(Z.shape)).astype(int)<br/>R_start = np.zeros((len(shape),)).astype(int)<br/>R_stop = np.array(list(shape)).astype(int)<br/>Z_start = (P-Rs//2)<br/>Z_stop = (P+Rs//2)+Rs%2<br/>R_start = (R_start - np.minimum(Z_start,0)).tolist()<br/>Z_start = (np.maximum(Z_start,0)).tolist()<br/>R_stop = np.maximum(R_start, (R_stop - np.maximum(Z_stop-Zs,0))).tolist()<br/>Z_stop = (np.minimum(Z_stop,Zs)).tolist()<br/>r = [slice(start,stop) for start,stop in zip(R_start,R_stop)]<br/>z = [slice(start,stop) for start,stop in zip(Z_start,Z_stop)]<br/>R[r] = Z[z]<br/>print(Z)<br/>print(R)</span></pre><p id="697d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">72.考虑一个数组 Z = [1，2，3，4，5，6，7，8，9，10，11，12，13，14]，如何生成数组 R = [[1，2，3，3，4，5]，[3，4，5，6]，…，[11，12，13，14]]？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="9541" class="mn mo iq mj b gy mp mq l mr ms"># Author: Stefan van der Walt<br/>Z = np.arange(1,15,dtype=uint32)<br/>R = stride_tricks.as_strided(Z,(11,4),(4,4))<br/>print(R)</span></pre><p id="05b0" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">73.计算矩阵秩</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="19d2" class="mn mo iq mj b gy mp mq l mr ms"># Author: Stefan van der Walt<br/>Z = np.random.uniform(0,1,(10,10))<br/>U, S, V = np.linalg.svd(Z) # Singular Value Decomposition<br/>rank = np.sum(S &gt; 1e-10)</span></pre><p id="9494" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">74.如何找到一个数组中最频繁出现的值？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="865e" class="mn mo iq mj b gy mp mq l mr ms">Z = np.random.randint(0,10,50)<br/>print(np.bincount(Z).argmax())</span></pre><p id="302f" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">75.从随机的 10x10 矩阵中提取所有连续的 3x3 块</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="2b3a" class="mn mo iq mj b gy mp mq l mr ms"># Author: Chris Barker<br/>Z = np.random.randint(0,5,(10,10))<br/>n = 3<br/>i = 1 + (Z.shape[0]-3)<br/>j = 1 + (Z.shape[1]-3)<br/>C = stride_tricks.as_strided(Z, shape=(i, j, n, n), strides=Z.strides + Z.strides)<br/>print(C)</span></pre><p id="ca2d" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">76.创建一个 2D 数组子类，使得 Z[i，j] == Z[j，i]</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="e785" class="mn mo iq mj b gy mp mq l mr ms"># Author: Eric O. Lebigot<br/># Note: only works for 2d array and value setting using indices<br/>class Symetric(np.ndarray):<br/>def __setitem__(self, (i,j), value):<br/>super(Symetric, self).__setitem__((i,j), value)<br/>super(Symetric, self).__setitem__((j,i), value)<br/>def symetric(Z):<br/>return np.asarray(Z + Z.T - np.diag(Z.diagonal())).view(Symetric)<br/>S = symetric(np.random.randint(0,10,(5,5)))<br/>S[2,3] = 42<br/>print(S)</span></pre><p id="6fbd" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">77.考虑一组形状为(n，n)的 p 个矩阵和一组形状为(n，1)的 p 个向量。如何一次性计算 p 个矩阵乘积的和？(结果具有形状(n，1))</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="d05c" class="mn mo iq mj b gy mp mq l mr ms"># Author: Stefan van der Walt<br/>p, n = 10, 20<br/>M = np.ones((p,n,n))<br/>V = np.ones((p,n,1))<br/>S = np.tensordot(M, V, axes=[[0, 2], [0, 1]])<br/>print(S)<br/># It works, because:<br/># M is (p,n,n)<br/># V is (p,n,1)<br/># Thus, summing over the paired axes 0 and 0 (of M and V independently),<br/># and 2 and 1, to remain with a (n,1) vector.</span></pre><p id="3e3b" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">78.考虑一个 16x16 的数组，如何求块和(块大小为 4x4)？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="6069" class="mn mo iq mj b gy mp mq l mr ms"># Author: Robert Kern<br/>Z = np.ones(16,16)<br/>k = 4<br/>S = np.add.reduceat(np.add.reduceat(Z, np.arange(0, Z.shape[0], k), axis=0),<br/>np.arange(0, Z.shape[1], k), axis=1)</span></pre><p id="eeb6" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">79.如何用 numpy 数组实现生命的游戏？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="0a2d" class="mn mo iq mj b gy mp mq l mr ms"># Author: Nicolas Rougier<br/>def iterate(Z):<br/># Count neighbours<br/>N = (Z[0:-2,0:-2] + Z[0:-2,1:-1] + Z[0:-2,2:] +<br/>Z[1:-1,0:-2] + Z[1:-1,2:] +<br/>Z[2: ,0:-2] + Z[2: ,1:-1] + Z[2: ,2:])<br/># Apply rules<br/>birth = (N==3) &amp; (Z[1:-1,1:-1]==0)<br/>survive = ((N==2) | (N==3)) &amp; (Z[1:-1,1:-1]==1)<br/>Z[...] = 0<br/>Z[1:-1,1:-1][birth | survive] = 1<br/>return Z<br/>Z = np.random.randint(0,2,(50,50))<br/>for i in range(100): Z = iterate(Z)</span></pre><p id="c711" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">80.如何获得数组的 n 个最大值</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="9100" class="mn mo iq mj b gy mp mq l mr ms">Z = np.arange(10000)<br/>np.random.shuffle(Z)<br/>n = 5<br/># Slow<br/>print (Z[np.argsort(Z)[-n:]])<br/># Fast<br/>print (Z[np.argpartition(-Z,n)[:n]])</span></pre><p id="20c9" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">81.给定任意数量的向量，构建笛卡儿积(每个项目的每个<br/>组合)</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="21a5" class="mn mo iq mj b gy mp mq l mr ms"># Author: Stefan Van der Walt<br/>def cartesian(arrays):<br/>arrays = [np.asarray(a) for a in arrays]<br/>shape = (len(x) for x in arrays)<br/>ix = np.indices(shape, dtype=int)<br/>ix = ix.reshape(len(arrays), -1).T<br/>for n, arr in enumerate(arrays):<br/>ix[:, n] = arrays[n][ix[:, n]]<br/>return ix<br/>print (cartesian(([1, 2, 3], [4, 5], [6, 7])))</span></pre><p id="e65c" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">82.如何从常规数组创建记录数组？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="f494" class="mn mo iq mj b gy mp mq l mr ms">Z = np.array([("Hello", 2.5, 3),<br/>("World", 3.6, 2)])<br/>R = np.core.records.fromarrays(Z.T,</span><span id="01f0" class="mn mo iq mj b gy mt mq l mr ms">names='col1, col2, col3',<br/>formats = 'S8, f8, i8')</span></pre><p id="d441" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">83.考虑一个大向量 Z，用 3 种不同的方法计算 Z 的 3 次方</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="c4fa" class="mn mo iq mj b gy mp mq l mr ms">Author: Ryan G.<br/>x = np.random.rand(5e7)<br/>%timeit np.power(x,3)<br/>1 loops, best of 3: 574 ms per loop<br/>%timeit x*x*x<br/>1 loops, best of 3: 429 ms per loop<br/>%timeit np.einsum('i,i,i-&gt;i',x,x,x)<br/>1 loops, best of 3: 244 ms per loop</span></pre><p id="c9d3" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">84.考虑形状为(8，3)和(2，2)的两个数组 A 和 B。如何找到 A 中包含 B 中每行元素的行，而不考虑 B 中元素的顺序？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="d00d" class="mn mo iq mj b gy mp mq l mr ms"># Author: Gabe Schwartz<br/>A = np.random.randint(0,5,(8,3))<br/>B = np.random.randint(0,5,(2,2))<br/>C = (A[..., np.newaxis, np.newaxis] == B)<br/>rows = (C.sum(axis=(1,2,3)) &gt;= B.shape[1]).nonzero()[0]<br/>print(rows)</span></pre><p id="b910" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">85.考虑 10×3 矩阵，提取具有不相等值的行(例如[2，2，3])</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="764b" class="mn mo iq mj b gy mp mq l mr ms"># Author: Robert Kern<br/>Z = np.random.randint(0,5,(10,3))<br/>E = np.logical_and.reduce(Z[:,1:] == Z[:,:-1], axis=1)<br/>U = Z[~E]<br/>print(Z)<br/>print(U)</span></pre><p id="2e83" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">86.将整数向量转换为矩阵二进制表示形式</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="01b6" class="mn mo iq mj b gy mp mq l mr ms"># Author: Warren Weckesser<br/>I = np.array([0, 1, 2, 3, 15, 16, 32, 64, 128])<br/>B = ((I.reshape(-1,1) &amp; (2**np.arange(8))) != 0).astype(int)<br/>print(B[:,::-1])<br/># Author: Daniel T. McDonald<br/>I = np.array([0, 1, 2, 3, 15, 16, 32, 64, 128], dtype=np.uint8)<br/>print(np.unpackbits(I[:, np.newaxis], axis=1))</span></pre><p id="78c2" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">87.给定一个二维数组，如何提取唯一的行？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="e8b9" class="mn mo iq mj b gy mp mq l mr ms"># Author: Jaime Fernández del Río<br/>Z = np.random.randint(0,2,(6,3))<br/>T = np.ascontiguousarray(Z).view(np.dtype((np.void, Z.dtype.itemsize * Z.shape[1])))<br/>_, idx = np.unique(T, return_index=True)<br/>uZ = Z[idx]<br/>print(uZ)</span></pre><p id="14d4" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">88.考虑 2 个向量的 A &amp; B，写出内、外、和、乘函数的等和</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="f952" class="mn mo iq mj b gy mp mq l mr ms"># Author: Alex Riley<br/># Make sure to read: <a class="ae kv" href="http://ajcr.net/Basic-guide-to-einsum/" rel="noopener ugc nofollow" target="_blank">http://ajcr.net/Basic-guide-to-einsum/</a><br/>np.einsum('i-&gt;', A) # np.sum(A)<br/>np.einsum('i,i-&gt;i', A, B) # A * B<br/>np.einsum('i,i', A, B) # np.inner(A, B)<br/>np.einsum('i,j', A, B) # np.outer(A, B)</span></pre><p id="4691" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">89.考虑一条由两个向量(X，Y)描述的路径，如何使用<br/>等距样本对其进行采样？</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="94c0" class="mn mo iq mj b gy mp mq l mr ms"># Author: Bas Swinckels<br/>phi = np.arange(0, 10*np.pi, 0.1)<br/>a = 1<br/>x = a*phi*np.cos(phi)<br/>y = a*phi*np.sin(phi)<br/>dr = (np.diff(x)**2 + np.diff(y)**2)**.5 # segment lengths<br/>r = np.zeros_like(x)<br/>r[1:] = np.cumsum(dr) # integrate path<br/>r_int = np.linspace(0, r.max(), 200) # regular spaced path<br/>x_int = np.interp(r_int, r, x) # integrate path<br/>y_int = np.interp(r_int, r, y)</span></pre><p id="faf7" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">90.给定一个整数 n 和一个 2D 数组 X，从 X 中选择可以被<br/>解释为从 n 次多项式分布中抽取的行，即只包含整数且总和为 n 的行</p><pre class="kg kh ki kj gt mi mj mk ml aw mm bi"><span id="fc86" class="mn mo iq mj b gy mp mq l mr ms"># Author: Evgeni Burovski<br/>X = np.asarray([[1.0, 0.0, 3.0, 8.0],<br/>[2.0, 0.0, 1.0, 1.0],<br/>[1.5, 2.5, 1.0, 0.0]])</span><span id="957f" class="mn mo iq mj b gy mt mq l mr ms">n = 4<br/>M = np.logical_and.reduce(np.mod(X, 1) == 0, axis=-1)<br/>M &amp;= (X.sum(axis=-1) == n)<br/>print(X[M])</span></pre><p id="bdad" class="pw-post-body-paragraph ld le iq lf b lg lh jr li lj lk ju ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">参考:<a class="ae kv" href="https://github.com/rougier/numpy-100" rel="noopener ugc nofollow" target="_blank">https://github.com/rougier/numpy-100</a></p></div></div>    
</body>
</html>