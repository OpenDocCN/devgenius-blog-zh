<html>
<head>
<title>Enforce Swift Style and Conventions for iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对iOS实施Swift风格和惯例</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/enforce-swift-style-and-conventions-for-ios-7f5047837e82?source=collection_archive---------5-----------------------#2021-12-05">https://blog.devgenius.io/enforce-swift-style-and-conventions-for-ios-7f5047837e82?source=collection_archive---------5-----------------------#2021-12-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7462" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一种让您团队中的所有开发人员使用相同的编码标准和规则编写代码的方法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9ffaf9b0ba4968247576004241e9fc8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fbJLkoi9Fm9QmjFAIFY0fg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由来自<a class="ae kv" href="https://www.pexels.com/photo/man-in-grey-sweater-holding-yellow-sticky-note-879109/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kv" href="https://www.pexels.com/@hiteshchoudhary?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> hitesh choudhary </a>拍摄</figcaption></figure><p id="2e63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你在一个大型开发团队中工作时，保持代码整洁和更快地进行代码审查的最好方法是对所有开发人员强制执行编码标准。</p><p id="8d00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在Swift中，您可以使用SwiftLint库实现这一点。它可以通过CocoaPods使用Pod“swift lint”进行安装。关于如何安装库的更多信息，您可以访问https://github.com/realm/SwiftLint<a class="ae kv" href="https://github.com/realm/SwiftLint" rel="noopener ugc nofollow" target="_blank"/></p><p id="9e15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我们将涵盖一些重要的规则，我们应该为我们的项目设置。您需要在项目中创建一个新文件“. swiftlint.yml ”,我们将在其中包含我们的规则。该文件应该如下所示</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/d7a5e52286cacf300762fff131208044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vmfx5XjxKC-FIKBwV8tjkQ.png"/></div></div></figure><p id="6378" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您注意，您会看到每种规则类型的“警告”和“错误”变量。这是非常重要的，因为如果你违反了一些规则，或者只是给你一个警告，你可以强制编译器阻止你。</p><p id="5c01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们把重点放在我认为能对你的项目产生良好影响的一些方面。</p><p id="779a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> force_cast，force_try: </strong>这两个都是避免零值和可能的崩溃所必需的。原力投像(let URL = URL(" https://www . Google . com ")！)意味着您将强制该对象不为空，但如果为空，应用程序将会崩溃。你需要避免在你的应用程序中使用这些，而是使用“保护让”或“如果让”。对于force try也应该这样做(例如在解析json时)。有时强制转换并不一定是不好的，例如当你转换一个UITableViewCell时你可以使用它们，所以我们只是把它作为一个警告而不是一个错误。</p><p id="2a3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> function_parameter_count，function_body_length </strong>:我们需要这两者来让我们的函数尽可能的简单。我们将函数max的参数设置为5，将body length(函数行)设置为40。如果开发者需要更多，他应该拆分他的功能。(那些规则应该由整个团队决定)。万一20和200 Xcode会给你一个编译错误。</p><p id="f9b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> cyclomatic_complexity </strong>:这是一个函数的复杂度。在我们的情况下，它不应该超过20(相信我，这是很多)。检查以下复杂度为5的函数。使用这条规则，您可以避免使用多个if语句，这会使阅读代码变得非常复杂。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/233f7aa57efe5bf30d6de5950e44dd7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*jW-LWybooP-9CIbbF-kTNg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">复杂度为5的测试函数</figcaption></figure><p id="8b2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> file_length </strong>:好的，对于这个每个开发者可能都有不同的看法。在我们的项目中，我们的警告规则是400，但有时我们需要更多，因为这不是一个好主意来分隔我们的类。我们决定400是一个好数字，如果有人不得不添加超过400行，那么他可以使用<strong class="ky ir">//swift lint:disable file _ length</strong>来关闭文件警告</p><p id="e2f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> type_name，identifier_name </strong>:这里需要设置一些变量或类型的命名规则。在我们的例子中，我们将type_name的最小值设置为3，这是例如结构的名称和变量的标识符名称。通常在命名时，我们使用大写字母表示类型，小写字母表示标识符(在我们的例子中，我们没有强制这样做，但是这样做是个好主意)</p><p id="2ffb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些是SwiftLint的一些基本规则。如果你把它作为SwiftLint安装到一个大项目中，默认情况下它会用默认值启用一些规则。您需要排除这些规则，并用您自己的配置覆盖其中一些规则。</p><p id="3322" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将SwiftLint导入已经开发的应用程序的最佳方法是在开始时排除所有规则，一次删除一个规则，直到您的项目成功编译。</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="dcc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mb">更多内容尽在</em><a class="ae kv" href="http://blog.devgenius.io" rel="noopener ugc nofollow" target="_blank"><em class="mb">blog . devgenius . io</em></a><em class="mb">。</em></p></div></div>    
</body>
</html>