<html>
<head>
<title>Introduction to React Hooks — useReducer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React 挂钩简介— useReducer</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/introduction-to-react-hooks-usereducer-7b87a6cb4289?source=collection_archive---------10-----------------------#2020-06-20">https://blog.devgenius.io/introduction-to-react-hooks-usereducer-7b87a6cb4289?source=collection_archive---------10-----------------------#2020-06-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="e808" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用 React Hooks 构建 web 应用程序的快速指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/1bf691bcf7c761c9400704046d1adc3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NP4JkFI83ZR6jhl0"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">费伦茨·阿尔马西在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="eadd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">React 钩子从 React 16.8 开始可用，从版本 0.59 开始支持 React Native。在我之前的文章中讨论了关于 React 的<strong class="kv io">基本钩子</strong>。如果你是新手，点击<a class="ae ks" href="https://medium.com/dev-genius/introduction-to-react-hooks-e49738432f54" rel="noopener"> <strong class="kv io">这里的</strong> </a> <strong class="kv io"> </strong>来阅读。在本文中，我将讨论 React 上的<em class="lp"> </em>附加挂钩中的<em class="lp"> useReducer </em>。</p><p id="7b6d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">React 中有两种类型的内置挂钩，即基本挂钩和附加挂钩。</p><p id="f983" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">基本钩子</strong><br/><em class="lp">useState</em><br/><em class="lp">use effect</em><br/><em class="lp">use context</em><br/><strong class="kv io">附加钩子</strong><br/><em class="lp">useReducer</em><br/><em class="lp">use callback<br/>useMemo<br/>useRef<br/>useImperativeHandle<br/>useLayoutEffect<br/>useDebugValue</em></p><p id="30bb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">什么是 useReducer？</strong></p><blockquote class="lq lr ls"><p id="f5d9" class="kt ku lp kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">useState 的替代方案。接受(state，action) =&gt; newState 类型的 reducer，并返回当前状态和分派方法。<a class="ae ks" href="https://reactjs.org/docs/hooks-reference.html#usereducer" rel="noopener ugc nofollow" target="_blank">来源</a></p></blockquote><p id="2ea6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp"> useReducer </em>是 React 中内置的钩子，用于 React 中的状态管理。<em class="lp"> useReducer </em>是<em class="lp">使用状态</em>的替代。它与减速器功能有关。如果您对 Redux 状态管理有清晰的认识，那么您已经对它的工作原理有了足够的了解。点击<a class="ae ks" href="https://medium.com/dev-genius/getting-started-with-react-native-redux-479fb6e37be4" rel="noopener"> <strong class="kv io">此处</strong> </a> <strong class="kv io"> </strong>了解 Redux。</p><p id="6f9a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为什么我们使用 useReducer 而不是 useState？</p><p id="db1d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">使用状态</em>，当状态值是原语时，状态值只在单个组件内部使用或者逻辑简单。</p><p id="22e9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用 useReducer ，当我们有复杂的状态时，比如涉及到对象或数组，下一个状态依赖于前一个状态，组件间的数据共享和更新状态更加复杂。useReducer 针对触发深度更新的组件进行了性能优化，因为您可以向下传递分派，而不是回调。</p><p id="d7a6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我将实现一个简单的计数器 web 应用程序，并讨论<em class="lp"> useReducer 的特性。</em></p><p id="d008" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">第一步。定义初始状态和减速器功能。</strong></p><p id="ce3b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">reducer 函数接受两个参数，即当前状态和动作，然后返回一个值，即新状态。一个<em class="lp">动作</em>参数<em class="lp"> i </em>给出了执行减速器功能的指令。这里，<em class="lp">增量</em>、<em class="lp">减量</em>和<em class="lp">复位</em>是对减速器功能的给定指令(<em class="lp">动作</em>)。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="1fd2" class="mb mc in lx b gy md me l mf mg">const initialState = {<br/> value: 0<br/>}</span><span id="e31b" class="mb mc in lx b gy mh me l mf mg">const reducer = (state, action) =&gt; {<br/> switch(action.type){<br/>  case ‘INCREMENT’ :<br/>   return {value: state.value + 1 };<br/>  case ‘DECREMENT’ :<br/>   return {value: state.value — 1 };<br/>  case ‘RESET’ : <br/>   return initialState;<br/>  default:<br/>   return state; <br/> }<br/>}</span></pre><p id="856d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">第二步。useReducer 挂钩</strong></p><p id="18e1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我们需要将<em class="lp"> useReducer </em>从 React 本地状态导入到函数组件中。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="9fe2" class="mb mc in lx b gy md me l mf mg"><strong class="lx io">import </strong>React, { <strong class="lx io"><em class="lp">useReducer</em></strong>} from ‘react’;</span></pre><p id="4c5e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">状态</em>、<em class="lp">初始化器参数</em>和<em class="lp">初始化器</em>是 useReducer 的输入参数。我们可以通过两种不同的方式初始化<em class="lp"> useReducer </em>状态。</p><p id="0648" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> 2.1 指定初始状态</strong></p><p id="0a36" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">第一种方法是，将初始状态作为第二个参数传递。这是最简单的方法。这里<em class="lp"> useReducer </em>接受两个参数，即<em class="lp">减速器</em>的功能和初始状态。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="f59b" class="mb mc in lx b gy md me l mf mg"><strong class="lx io">const </strong>[count, dispatch] = <strong class="lx io"><em class="lp">useReducer</em></strong>(reducer, initialState);</span></pre><p id="df9b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp"> count.value </em>打印该值，并用动作的分派类型进行更新。完整的代码，</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">图 1 (App.js)</figcaption></figure><p id="7f29" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> 2.2 惰性初始化</strong></p><blockquote class="lq lr ls"><p id="3785" class="kt ku lp kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">React 不使用 Redux 推广的 state = initialState 参数约定。<a class="ae ks" href="https://reactjs.org/docs/hooks-reference.html#usereducer" rel="noopener ugc nofollow" target="_blank">来源</a></p></blockquote><p id="2b1c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">另一种方法是，懒洋洋地创建初始状态。在这里，传递一个<em class="lp"> init </em>函数作为第三个参数。用这种方法我们可以还原外面的初始状态。<em class="lp"> useReducer </em>接受初始渲染时调用的初始动作的可选第三个参数。</p><p id="9b91" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在下面的代码中，我将初始值 0 传递给计数器函数作为 props since App 函数组件。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">图 2 (App.js)</figcaption></figure></div><div class="ab cl mk ml hr mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ig ih ii ij ik"><p id="3c2e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">结论</strong> <br/>在本文中，我们讨论了关于<em class="lp"> useReducer </em>钩子、<em class="lp"> useState </em>和<em class="lp"> useReducer </em>的区别，并使用 React 钩子实现了简单的计数器 web 应用。我想这篇文章对那些进入 React Hooks 的人会有所帮助。</p><p id="3392" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">参考文献</strong></p><div class="mr ms gp gr mt mu"><a href="https://reactjs.org/docs/hooks-reference.html#usereducer" rel="noopener  ugc nofollow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd io gy z fp mz fr fs na fu fw im bi translated">钩子 API 参考-反应</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">钩子是 React 16.8 中的新增功能。它们允许您使用状态和其他 React 特性，而无需编写类。这个…</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">reactjs.org</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni km mu"/></div></div></a></div></div></div>    
</body>
</html>