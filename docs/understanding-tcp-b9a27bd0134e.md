# 了解 TCP

> 原文：<https://blog.devgenius.io/understanding-tcp-b9a27bd0134e?source=collection_archive---------1----------------------->

![](img/209fdf09e3ea10edee1f2b919bca6b3f.png)

本文重点解释传输控制协议(TCP)的概念以及 TCP 连接的优点和缺点。这将是一个由两部分组成的系列，其中用户数据报协议(UDP)将在下面的系列中讨论。

**什么是 TCP？**
TCP 是传输控制协议(Transmission Control Protocol)的缩写，它是一种通信协议，定义并建立了如何维持一个网络会话，应用程序可以通过这个网络会话交换数据。

**使用 TCP 的利弊
1。 ***确认***:TCP 有一种确认发送给客户端的消息的方式。当通过因特网发送连接时，总是存在不可靠性，因此，在处理这个问题时，TCP 在发送的消息中添加一些额外的东西，这是必须的，否则，它如何保证确认呢？例如，服务器 A 发出“你好”，服务器 B 通过说“嗨”作为一种确认的形式来响应。**

2. ***保证交付:*** 如果服务器没有收到任何形式的确认，TCP 会说，嘿，我没有收到任何形式的确认，因此我要重新发送这个东西。因此，TCP 有重新传输的功能，它一次又一次地发送数据，直到它被确认并且服务器已经收到数据包。在这种情况下，如果服务器没有收到数据包，或者数据包由于某种原因被破坏，其中 1 和 0 的位可能被翻转，并且已经将原始的“hello”消息转换为其他内容，则它可以保证传递。

3. ***基于连接:*** TCP 是基于连接的，这意味着客户端和服务器都必须建立唯一的连接，直到两端都保持 ***有状态*** 连接。因此，客户端保存有关连接的信息，服务器也保存有关此连接的信息。从逻辑上讲，客户机和服务器都必须保存有关这些连接的信息，否则如何保证传递。

4. ***拥塞控制:*** 有成吨的数据包发出，有很多人发送东西，服务器不堪重负。TCP 具有拥塞控制功能，有助于管理所有这些流量。这就像不停地往气球里注水，当气球达到一定程度时，就会爆裂。拥塞控制只是控制服务器上的流量，然后在服务器可以处理的任何时候发送数据。

5. ***有序数据包:*** 通过拥塞控制，一些数据包可能会在其他数据包到达之前到达服务器。例如，假设你通过 TCP 连接发送一个很长的文本，这个文本被分解成不同的小数据包。这些数据包会被发送出去，但是互联网并不能保证你会以正确的顺序收到它们。其中一个包可能穿过太平洋，另一个可能穿过欧洲。TCP 所做的是，它通过给每个数据包加标签来添加报头，这些数据包在返回到服务器时会以正确的方式排序。

**使用 TCP 的缺点**

1.  ***更大的数据包:*** 既然有确认用的数据包、保证送达的报头、拥塞控制用的数据包、顺序数据包等等；从这个意义上说，这是大量的数据。比方说，对于一个 1 字节的数据，TCP 必须向其中添加各种内容，这反过来会增加要发送的数据包的大小，以确保我们前面提到的 TCP 的特性。
2.  ***更大的带宽:*** 更大的数据包也意味着更大的带宽。由于我们通过 TCP 连接发送的数据很大，因为我们需要添加额外的数据包来确保 TCP 功能，这意味着我们将使用更多的带宽。
3.  ***慢:*** 由于所有的拥塞控制和有序数据包，这转化为大量的等待时间，从而使其变慢。我们等待确认，我们等待有保证的交付，我们等待拥塞控制，我们等待分组被排序。等待的时间太长了。
4.  ***有状态:*** 由于客户端和服务器都必须在两端保持有状态连接，所以每当服务器或客户端关闭时，连接就会关闭，如果客户端试图向服务器发送信息，就会失败。如果客户端正在发送数据，而服务器关闭，则信息会丢失。当连接关闭时，您无法轻松恢复。
5.  **这也导致了 DOS(拒绝服务)攻击，黑客用它来关闭各种服务。这是通过建立到服务器的多个 TCP 连接来实现的，然后黑客利用 TCP 的等待确认、保证传送等特性来使服务器停机。例如，黑客可以发送一个数据包，但在他们这一端，他们会确保不确认该连接，然后创建其他连接。这样做一百万次，服务器就会因为无用的连接而堆积在内存中，最终服务器会死亡。在本世纪初，雅虎就是这种情况的受害者。**

使用 TCP 的典型例子是当你想建立一个聊天应用程序时。这里需要的 TCP 特性是它提供的确认和流量控制。建立在 TCP 之上的一个流行的通信协议是建立在 HTTP 之上的 WebSocket。您可以使用 WebSocket 进行双向通信，或者在长轮询的同时使用 HTTP，这取决于您的用例。

如果这篇文章有任何帮助，请鼓掌，让我们在 Twitter 上联系 [@_kennyrich](https://twitter.com/_Kennyrich) 。