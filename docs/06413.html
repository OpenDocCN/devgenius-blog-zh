<html>
<head>
<title>SQL by steps #6 : WHERE (multi conditions)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL by steps #6 : WHERE(多条件)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sql-by-steps-6-where-multi-conditions-f15f178db562?source=collection_archive---------12-----------------------#2022-01-05">https://blog.devgenius.io/sql-by-steps-6-where-multi-conditions-f15f178db562?source=collection_archive---------12-----------------------#2022-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/dfa25e151c69df83cf6bd6d41d4a6cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FNMEdvZ-XdiPP-iEbSM19w.png"/></div></div></figure><div class=""/><p id="9cd8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">学习 SQL 的最好方法是..利用它。本系列的目标是在实践中逐步探索 SQL。级别:针对 SQL 初学者。</p><h1 id="b99c" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">介绍</h1><p id="1434" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">SQL 对于数据领域的任何工作都是必不可少的。本系列侧重于业务，而不是学术:它以渐进的方式解释 SQL，不是基于命令的复杂性(像书籍那样)，而是基于它们解决实际业务问题的效用。</p><p id="312d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我建议首先运行建议的查询，这样你就能感觉到它发生了什么，然后我们解释要记住的主要概念。</p><p id="4eaa" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个职位的方法都是一样的:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="d438" class="mi kx jb me b gy mj mk l ml mm">· <a class="ae mn" href="#77ba" rel="noopener ugc nofollow">1. Running the proposed SQL query (5'–10')</a><br/>· <a class="ae mn" href="#df12" rel="noopener ugc nofollow">2. Understanding (10'–20')</a><br/>· <a class="ae mn" href="#0f44" rel="noopener ugc nofollow">3. Practising (20'-40')</a></span></pre><p id="6070" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">链接到 SQL by Steps 系列以前的故事:</p><ul class=""><li id="92cd" class="mo mp jb ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-1-create-table-8b0dad9b9e89?source=your_stories_page----------------------------------------"> <strong class="ka jc"> SQL by steps #1:创建表</strong> </a></li><li id="cc9e" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-2-insert-ba57c972c7b7?source=your_stories_page----------------------------------------"><strong class="ka jc">SQL by steps # 2:INSERT</strong></a></li><li id="e443" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-3-select-920a97e30574?source=your_stories_page----------------------------------------"> <strong class="ka jc"> SQL by steps #3:选择</strong> </a></li><li id="1eeb" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-4-where-single-condition-791b68cf1bb?source=your_stories_page----------------------------------------"> <strong class="ka jc"> SQL by steps #4 : WHERE(单条件)</strong> </a></li><li id="8745" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-5-essential-data-types-9ff72cab0628?source=your_stories_page----------------------------------------"> <strong class="ka jc"> SQL by steps #5:基本数据类型</strong> </a></li></ul></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="77ba" class="kw kx jb bd ky kz nj lb lc ld nk lf lg lh nl lj lk ll nm ln lo lp nn lr ls lt bi translated">1.运行建议的 SQL 查询(5 英尺–10 英尺)</h1><p id="21a6" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">让我们运行代码，即使你不知道它是做什么的。</p><p id="d630" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">只需将下面的 SQL 脚本复制并粘贴到任何在线数据库(如<a class="ae mn" href="https://sqliteonline.com/" rel="noopener ugc nofollow" target="_blank">https://sqliteonline.com/</a>，或本地数据库(如 MySQL)，然后运行它。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="7bce" class="mi kx jb me b gy mj mk l ml mm">CREATE TABLE CUSTOMERS (<br/>    customerNumber INTEGER,<br/>    customerName VARCHAR(100),<br/>    birthDate DATE,<br/>    city VARCHAR(100),<br/>    state VARCHAR(100),<br/>    country VARCHAR(100),<br/>    revenue DECIMAL(15 , 2)<br/>);<br/>INSERT INTO CUSTOMERS(customerNumber,customerName,birthDate,city,state,country,revenue)<br/>VALUES <br/>(103,'Atelier graphique','19710324','Nantes',NULL,'France',21000.0),<br/>(112,'Signal Gift Stores','19801130','Las Vegas','NV','USA',71800.0),<br/>(150,'S-Store','19640507','Berlin',NULL,'Germany',54500.0);</span><span id="b01f" class="mi kx jb me b gy no mk l ml mm">SELECT *<br/>FROM CUSTOMERS AS C<br/>WHERE <br/>(REVENUE &gt; 50000 OR REVENUE IS NULL)<br/>AND COUNTRY NOT IN ('USA')<br/>AND EXISTS <br/>(SELECT 'doesnt matter' FROM CUSTOMERS AS C1 <br/> WHERE C1.customerNumber = C.customerNumber<br/> AND COUNTRY NOT IN ('USA') <br/> )</span></pre><p id="2c64" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可读性更强的版本:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi np"><img src="../Images/96c2b97f35c36e3469e715189952c6b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SZQvilJfh4zVigqNZLMpjg.png"/></div></div></figure><h1 id="45b7" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.理解(10 英尺–20 英尺)</h1><p id="c4cb" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">在实践中，用于数据分析的 SQL 查询的 WHERE 子句需要应用多个条件。典型的场景需要多达 10 个条件，这只是给你一个概念。</p><p id="9643" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在 post <a class="ae mn" href="https://maw-ferrari.medium.com/sql-by-steps-4-where-single-condition-791b68cf1bb" rel="noopener"> SQL 步骤 4 </a>中，我们构建了单条件 WHERE 子句，那么我们如何组合多个条件呢？由 4 个逻辑运算符<strong class="ka jc">与，或，存在，不:</strong></p><blockquote class="nq nr ns"><p id="8099" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated"><strong class="ka jc">和</strong>:查询结果包含满足 AND 中所有条件的行</p><p id="3830" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated"><strong class="ka jc">或</strong>:查询结果包含满足 OR 中任一条件的行</p><p id="e2c6" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated"><strong class="ka jc"> EXISTS </strong> ( <strong class="ka jc">子查询)</strong>:查询结果只包含关键字存在于子查询中的行</p><p id="bd82" class="jy jz nt ka b kb kc kd ke kf kg kh ki nu kk kl km nv ko kp kq nw ks kt ku kv ij bi translated"><strong class="ka jc">非</strong>:查询结果包含不满足条件的行</p></blockquote><p id="ebbd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们必须使用括号来建立逻辑运算符的求值顺序。默认情况下，AND 的优先级高于 OR(记住，在算术运算中，您可以将 AND /OR 与乘法/Sum 进行比较)。</p><p id="7646" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在您刚刚运行的脚本中，我们使用所有 4 个运算符应用了 4 个条件，让我们来理解它们:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/3e8080d00933f8981f146dacf2fcb02e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*Py9E669u-6o7XQcWyPxNXg.png"/></div></figure><p id="9563" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">条件#1 和#2 在 OR 中:只保留其中任何一个有效的行。</p><p id="62d4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">条件#3 和#4 进行完全相同的过滤:它们只保留与“美国”不同的国家。条件#4 在这个例子中没有用，但是我想展示它，因为它在处理跨多个表的条件时非常有用和有效。</p><p id="f950" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意到<strong class="ka jc">存在(..)</strong>只保留标识符<strong class="ka jc"> customerNumber </strong>与 EXISTS 查询<strong class="ka jc">(..)</strong>。这是由条款规定的:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2604deb42d1b74cd25e5db6c4ddd14a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*eqS7f5mVK8N9tm4EUNY7_w.png"/></div></figure><p id="29ed" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">特别是，该行:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/f983b65f0b758cfe7e99167567396d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*UfPOy1w4F361FbAkCCshlw.png"/></div></figure><p id="b6c4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">建立主查询(C 表)和 EXISTS 查询(C1 表)之间的链接。</p><p id="3780" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，请注意 EXISTS 查询中的 SELECT 子句:该查询没有从主查询中检索到任何列，事实上我只是选择了一个虚拟的“无关紧要”列，但它可能是任何列。EXISTS 查询唯一重要的部分是它的 WHERE 子句。</p><h1 id="0f44" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">3.练习(20 英尺-40 英尺)</h1><p id="e0ee" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">为了理解您刚刚学习的 SQL 语法，使用带有所有操作符的 CUSTOMERS 表，编写 5 个具有不同 WHERE 条件的查询</p><ul class=""><li id="4fb9" class="mo mp jb ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">和</li><li id="ccac" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">运筹学</li><li id="39b5" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">不</li><li id="7b2a" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">存在</li></ul><p id="32e8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读。</p></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><p id="5987" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mn" href="http://eepurl.com/humfIH" rel="noopener ugc nofollow" target="_blank">随时订阅我的<strong class="ka jc">【分享数据知识】</strong>简讯<strong class="ka jc">。</strong> </a></p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/b81f56f1291525c2d5333e8639240528.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/format:webp/0*PgA9gOnkUdU13Dnw.png"/></div></figure><p id="40a1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想订阅《灵媒》,请随意使用我的推荐链接<a class="ae mn" href="https://medium.com/@maw-ferrari/membership" rel="noopener">https://medium.com/@maw-ferrari/membership</a>:对你来说，费用是一样的，但它间接有助于我的故事。</p></div></div>    
</body>
</html>