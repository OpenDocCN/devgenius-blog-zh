<html>
<head>
<title>A Ruby CLI to Remember</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">值得记住的 Ruby CLI</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-ruby-cli-to-remember-f9f1069624fe?source=collection_archive---------19-----------------------#2020-08-09">https://blog.devgenius.io/a-ruby-cli-to-remember-f9f1069624fe?source=collection_archive---------19-----------------------#2020-08-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/27b00f3abd589b97d2348421788ab1ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hARtpU8oncNZ5U_n"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">照片由<a class="ae ja" href="https://unsplash.com/@jamesponddotco?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">詹姆斯·庞德</a>在<a class="ae ja" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><div class=""/><blockquote class="ka"><p id="7138" class="kb kc jd bd kd ke kf kg kh ki kj kk dk translated">"如果你想从零开始做一个苹果派，你必须首先发明宇宙."—卡尔·萨根</p></blockquote><p id="df4e" class="pw-post-body-paragraph kl km jd kn b ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh kk ig bi li translated"><span class="l lj lk ll bm lm ln lo lp lq di">当我头脑风暴想让我的 Ruby API 应用程序做什么的时候；我被我的项目可能出现的无限可能性吓住了。这句简单的话让这种担忧变得稍微容易了一点，“不要试图吃整只大象，而是一片一片地吃。”基本上，分解项目，使其更易于管理。考虑到这一点，我选择首先关注整体用户体验。</span></p><blockquote class="lr ls lt"><p id="3613" class="kl km lu kn b ko lv kq kr ks lw ku kv lx ly ky kz lz ma lc ld mb mc lg lh kk ig bi translated"><strong class="kn je">我希望用户能够做什么？</strong></p></blockquote><p id="6aac" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">我希望用户能够通过列表菜单轻松访问某种信息。当从菜单中选择某样东西时，需要显示信息以供使用。用户也应该有能力退出程序，如果他们愿意。</p><p id="b395" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">既然我已经决定了我希望用户做什么，我需要选择一种特定类型的信息来显示。我曾经想过使用一个专注于《指环王》的 API(我觉得这会很棒)。然而，我看到的 API 需要授权密钥，我觉得这是一个可以避免的问题。</p><p id="f659" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">很幸运，我看到了一个口袋妖怪交易卡牌游戏 API，感觉绝对会很惊艳！在浏览了开发人员文档并熟悉了可以使用 JSON 搜索的参数之后。</p><p id="7df6" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">这样做的一个小问题是，我无论如何也不能让我的 API 工作。我没有陷入泥潭，而是选择用一个新的想法和新的 API 重新开始。</p><p id="c54c" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">最终的结果是使用旧的和可靠的星球大战 API 或简称 SWAPI！我想展示关于电影和电影中生物种类的信息。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="7550" class="mk ml jd bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated"><strong class="ak">捆绑宝石&lt;文件名&gt;T9】</strong></h1><p id="5751" class="pw-post-body-paragraph kl km jd kn b ko ni kq kr ks nj ku kv kw nk ky kz la nl lc ld le nm lg lh kk ig bi translated">有了开始的所有必要信息，我首先设置了基本目录，我可以编辑这些目录来创建我的应用程序。在终端中，我运行了<em class="lu">bundle gem galaxy _ far _ away _ CLI。</em>对于像我这样的新手来说，捆绑包 gem 是一个救命稻草，因为它创建了我需要的所有文件，包括一个自述文件和一个行为准则文件！</p><p id="d5e1" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">既然基本目录已经设置好了，我就创建了一个 markdown notes 文件，这样我就可以规划出我需要创建什么来使这个应用程序起作用。</p><figure class="nn no np nq gt ip"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="5fc2" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">我知道我需要三个类来运行这个应用程序。一个获取和创建对象的 API 类，一个知道、存储和创建电影的电影类，一个做同样事情但使用物种的物种类，最后一个 CLI 类将完成我的应用程序的繁重工作。</p><h1 id="eff6" class="mk ml jd bd mm mn nt mp mq mr nu mt mu mv nv mx my mz nw nb nc nd nx nf ng nh bi translated">CLI 类</h1><p id="933d" class="pw-post-body-paragraph kl km jd kn b ko ni kq kr ks nj ku kv kw nk ky kz la nl lc ld le nm lg lh kk ig bi translated">我认为最好从 CLI 类开始。我创建了一个基本的菜单，将用于给用户选择的选项。</p><figure class="nn no np nq gt ip"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="6109" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">上面的代码片段显示了用户在使用这个应用程序时的基本体验。</p><p id="5113" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">welcome 方法应该为这个应用程序的其余部分定下基调。我使用 gem colorize 给程序添加了一点小技巧，使它看起来稍微更吸引人(或者像命令行一样吸引人)。</p><h1 id="179e" class="mk ml jd bd mm mn nt mp mq mr nu mt mu mv nv mx my mz nw nb nc nd nx nf ng nh bi translated">APIService 类</h1><figure class="nn no np nq gt ip"><div class="bz fp l di"><div class="nr ns l"/></div></figure><p id="1712" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">我使用 HTTParty gem 完成了获取 API 的大部分工作，另外它还为我节省了几行代码，额外的好处是它包含了单词 Party！因为 API 的端点需要不同的参数来返回我想要的信息，所以我必须连接到 BASE_URI 的末尾。最初我用了一种幻想。但是当我试图运行我的代码时，它会崩溃！哦，这是多么令人沮丧啊！结果是吸毒。concat 会产生一个有趣的错误，它会将两个参数加在一起，这是不可靠的。旧的尝试和正确的方法，只是使用一个简单的+是正确的做法。</p><h1 id="2de2" class="mk ml jd bd mm mn nt mp mq mr nu mt mu mv nv mx my mz nw nb nc nd nx nf ng nh bi translated">电影课</h1><pre class="nn no np nq gt ny nz oa ob aw oc bi"><span id="77a3" class="od ml jd nz b gy oe of l og oh">   def initialize(attr_hash)<br/>        attr_hash.each do |k, v|<br/>            self.send("#{k}=", v) if self.respond_to?("#{k}=")<br/>        end<br/>        # binding.pry<br/>        save<br/>    end</span></pre><p id="1e79" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">这里的这个小东西是一种更高层次的方式，对于从 API 返回的每个键和值，它将返回由 attr_accessor 指定的单个对象，但前提是它能找到为它指定的键！哦，save 方法被调用，这是一种将类创建的对象保存到一个名为@@all 的空数组中的方法。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="3c7d" class="mk ml jd bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">结论</h1><blockquote class="lr ls lt"><p id="17a9" class="kl km lu kn b ko lv kq kr ks lw ku kv lx ly ky kz lz ma lc ld mb mc lg lh kk ig bi translated">“就好像你在与夹杂着碎片的激流搏斗……”——罗伯特·海顿</p></blockquote><p id="7bdd" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">这个项目是最具挑战性也是最有趣的事情之一！我享受其中的每一个过程(包括挫折)。在这次经历的最后，我相信构建这个应用程序让我明白了一些关于编程的事情，如果我没有这样做的话，我是不会明白的。我在实验室中学到的概念在这个应用程序中得到了验证。然而，这个应用教会了我理解 ruby 中的这些概念是如何工作的。</p><p id="b284" class="pw-post-body-paragraph kl km jd kn b ko lv kq kr ks lw ku kv kw ly ky kz la ma lc ld le mc lg lh kk ig bi translated">对于那些正在经历训练营并且即将开始第一个项目的人来说，要知道这个挑战是值得的，不要放弃，最终要一直编码！</p></div></div>    
</body>
</html>