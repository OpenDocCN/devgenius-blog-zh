<html>
<head>
<title>Building a spotify knock-off with python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 python 构建 spotify 山寨版</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/building-a-spotify-knock-off-with-python-dca5f3fe0d5c?source=collection_archive---------0-----------------------#2022-03-20">https://blog.devgenius.io/building-a-spotify-knock-off-with-python-dca5f3fe0d5c?source=collection_archive---------0-----------------------#2022-03-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d030b01f14cc15b5d91e3192d6a77643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wpif-KSGfEovM8TE-tmjRg.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@thibaultpenin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Thibault Penin </a>在<a class="ae jz" href="https://unsplash.com/s/photos/spotify?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="4e03" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">截至 2022 年，Spotify 是最大的音乐流媒体服务。在本教程中，我将使用 django 构建一个山寨版。</p><p id="877d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">免责声明！！！用户界面没有那么吸引人。我们对这个项目的功能有限。更多功能即将推出。</strong></p><figure class="kz la lb lc gt jo gh gi paragraph-image"><a href="https://bytexplain.com/how-to-build-a-fruit-classifier-app-using-flask/"><div class="gh gi ky"><img src="../Images/af27c27408469ff820d349d9682b2694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mOX5Q-vy_3jHWWMSQQyeaQ.png"/></div></a></figure><figure class="kz la lb lc gt jo gh gi paragraph-image"><a href="https://bytexplain.com/how-to-build-a-flask-joke-generator/"><div class="gh gi ky"><img src="../Images/f113f4037015c0d8fd35394137f31aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mpcZAOpBUJiLlZ7srVJDwA.png"/></div></a></figure><figure class="kz la lb lc gt jo gh gi paragraph-image"><a href="https://bytexplain.com/how-to-build-a-password-generator-using-python/"><div class="gh gi ky"><img src="../Images/f84755d8a58fb4870cf0224a67bffaeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SuLVv_ktD1gggYX9xWUeXQ.png"/></div></a></figure><p id="045c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我们最终产品的一些截图。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ld"><img src="../Images/9e12abff4cd66693b4760eae257b9406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zEoz0JMM3v24VKqGnEifxw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">注册页面</figcaption></figure><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ld"><img src="../Images/0342decec0b43fb399b003cfec7b1e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mSbR4J73IcPF3PSfJM-UEg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">主页</figcaption></figure><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ld"><img src="../Images/cbd980e9aade574895dcbb0caa014481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZW28lvu1vsUUpj4VaMmWQ.png"/></div></div></figure><p id="d114" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> App 功能</strong></p><ol class=""><li id="03e3" class="le lf in kc b kd ke kh ki kl lg kp lh kt li kx lj lk ll lm bi translated">用户认证和授权</li><li id="330e" class="le lf in kc b kd ln kh lo kl lp kp lq kt lr kx lj lk ll lm bi translated">音乐上传</li><li id="585b" class="le lf in kc b kd ln kh lo kl lp kp lq kt lr kx lj lk ll lm bi translated">音乐流</li><li id="3ff5" class="le lf in kc b kd ln kh lo kl lp kp lq kt lr kx lj lk ll lm bi translated">等等</li></ol><p id="7214" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">要求</strong></p><ol class=""><li id="c0fe" class="le lf in kc b kd ke kh ki kl lg kp lh kt li kx lj lk ll lm bi translated">姜戈</li><li id="022a" class="le lf in kc b kd ln kh lo kl lp kp lq kt lr kx lj lk ll lm bi translated">大蟒</li></ol><p id="5527" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要安装 django，运行<code class="fe ls lt lu lv b">pip3 install &lt;django&gt;</code></p><p id="a861" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">项目设置</strong></p><p id="0b0c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们从建立我们的项目开始。确保安装了 django。运行<code class="fe ls lt lu lv b">django-admin startproject spotify_django</code>这将在 spotify_django 文件夹中创建一个文件夹<code class="fe ls lt lu lv b">spotify_django</code> Cd，然后运行<code class="fe ls lt lu lv b">python3 manage.py startapp spotify</code></p><p id="45aa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe ls lt lu lv b">settings.py</code>文件中，在<code class="fe ls lt lu lv b">installed_apps</code>列表中添加以下内容</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="b79d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了让我们的应用程序能够存储和检索 cover_photos 和 audio 等媒体文件，我们需要设置访问它们的路径和位置。在<code class="fe ls lt lu lv b">settings.py</code>文件中添加以下内容。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="4478" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在同一个文件夹中，在<code class="fe ls lt lu lv b">urls.py</code>文件中添加以下内容</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="2627" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，我们已经包括了我们的应用程序的路线，也为我们的静态媒体文件设置了路线。</p><p id="dcda" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">模特创作</strong></p><p id="1809" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们为我们的应用程序创建一些模型。在<code class="fe ls lt lu lv b">models.py</code>中添加以下内容</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="6f4f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的应用程序将不得不接受一个用户，注册用户将创建的歌曲作者，歌曲标题，图像和音频文件上传。音频上传的日期也将被创建。</p><p id="b889" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">认证</strong></p><p id="9450" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在继续我们的项目之前，我们需要创建我们的注册，登录，注销功能。让我们创建注册表单。</p><p id="5a5d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe ls lt lu lv b">forms.py</code>文件中添加以下内容</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="0fe2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是注册功能的视图。在<code class="fe ls lt lu lv b">views.py </code>中添加以下内容</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="bbc6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后是注册的模板。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="a7c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">登录功能</strong></p><p id="c81a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们为我们的登录功能创建一个视图。仍然在<code class="fe ls lt lu lv b">views.py</code>文件中添加以下内容:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="e1bd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们的模板<code class="fe ls lt lu lv b">spotify/login.html</code></p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="11ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">注销</strong></p><p id="e6a2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的用户登录之后，我们仍然需要一种安全离开会话的方法。为此，我们创建一个注销视图。仍然在<code class="fe ls lt lu lv b">views.py</code>文件中添加以下内容</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="957d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">创作歌曲</strong></p><p id="b9b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里我们将创作我们的歌曲。这里将创建歌曲图像、作者或出版商以及最终要共享的音频文件。首先，让我们先创建一个视图。我们将使用基于类的视图。在<code class="fe ls lt lu lv b">spotify/views.py</code>中添加以下内容</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="4601" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们增加了一个<code class="fe ls lt lu lv b">loginrequiredmixin</code> mixin，这意味着只有登录的用户才能上传歌曲。</p><p id="049b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面是它对应的模板<code class="fe ls lt lu lv b">spotify/song-create.html</code></p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="8c96" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">首页</strong></p><p id="756a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在是时候显示平台中所有已上传的歌曲了。这是我们在<code class="fe ls lt lu lv b">spotify/views.py</code>看到的</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="8360" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">模板也在<code class="fe ls lt lu lv b">spotify/home.html</code></p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="99b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">播放音频</strong></p><p id="9551" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们需要播放我们选择的音频。这是我们仍然在<code class="fe ls lt lu lv b">views.py</code>文件中的视图</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="b035" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后是模板<code class="fe ls lt lu lv b">spotify/playSong.html</code></p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="2a8c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">路线</strong></p><p id="41ac" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的应用程序需要有一些路线。要创建它们，首先在视图和模型所在的目录中创建一个文件<code class="fe ls lt lu lv b">urls.py</code>文件，在其中添加以下几行。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="087f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">最后的润色</strong></p><p id="06fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了让我们的管理页面方便放置上传的歌曲，我们需要通过添加以下内容来配置我们的<code class="fe ls lt lu lv b">admin.py</code>文件。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="3f02" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">定稿</strong></p><p id="cacc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在运行<code class="fe ls lt lu lv b">python3 manage.py makemigrations</code>制作表格。<code class="fe ls lt lu lv b">python3 manage.py migrate</code>迁移数据。现在运行<code class="fe ls lt lu lv b">python3 manage.py runserver</code>打开浏览器，输入网址<code class="fe ls lt lu lv b"><a class="ae jz" href="http://127.0.0.1:8000" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000</a></code></p><p id="d824" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以走了。创建您的帐户，登录并分享乐趣。这里有一些我们成品的截图</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ld"><img src="../Images/9e12abff4cd66693b4760eae257b9406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zEoz0JMM3v24VKqGnEifxw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">注册页面</figcaption></figure><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ld"><img src="../Images/0342decec0b43fb399b003cfec7b1e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mSbR4J73IcPF3PSfJM-UEg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">主页</figcaption></figure><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ld"><img src="../Images/cbd980e9aade574895dcbb0caa014481.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZW28lvu1vsUUpj4VaMmWQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">播放模式下的歌曲</figcaption></figure><p id="2eb0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我承认 app 还有很长的路要走，让我知道你的想法。感谢阅读。你也可以为这个项目做贡献。这里是<a class="ae jz" href="https://github.com/bunnythecompiler/spotify_django" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">源代码</strong> </a> <strong class="kc io">。</strong></p></div></div>    
</body>
</html>