# 暴力攻击:你能猜出我的密码吗？

> 原文：<https://blog.devgenius.io/brute-force-attack-can-you-guess-the-password-c7945d6973ae?source=collection_archive---------2----------------------->

由于疫情的不利影响，像我们大多数人一样，我不得不每隔一天服用一次聚合酶链式反应测试——或者至少感觉如此。一个特定的测试中心通过电子邮件把我的测试结果作为一个有密码保护的 pdf 文件发送过来。邮件结尾写道:

> 对于密码，请输入您的出生日期。格式为 **ddMMyyyy**

如果你不知道我的生日，你就不能打开报告，是吗？假设我的 covid 结果或他们发送给患者的任何报告是保密的，该密码会限制未授权用户吗？在本文中，我将介绍一些破解易受暴力攻击的系统密码的方法，如 covid 报告，以及暴力攻击如何受益于数据工程师现在广泛用于处理大量数据的并行计算。

首先，假设你有访问 covid 报告的权限，如果你知道我的生日和密码格式，你可以跳过*黑客*部分，马上查看我的 covid 结果！如果你忘记了我的生日，你可以很容易地四处打听，甚至直接问我。可怜的我可能没有意识到你会用它来打开我的 covid 结果。如果我对你来说是一个完全陌生的人，猜猜*我的生日有多容易？*

如果我们认为密码是任何 8 位数字，不管它是一个生日，我们将有 10⁸ (=1 亿)个可能的密码。如果我们要手动破解密码，坐下来尝试所有 1 亿个可能的密码，如果每次尝试需要 4 秒，我们将花费大约 4 亿秒，也就是 12 年！如果你需要在这样做的同时生活，你可能需要超过 20 年。挺好的！然而，检查我的 covid 结果是值得的，我们最终可以设法破解密码。我们可以雇人或找一些朋友加入我们的探索，在几年或几个月内完成这项工作。现在，一台计算机怎么能在这上面运行呢？

暴力破解的一个常用工具是[开膛手约翰](https://www.openwall.com/john/)，我们可以通过以下命令使用它:

运行这两个命令，我们得到这样的结果:

![](img/2ae721b2174839be11790ba427a4384c.png)

图 1 — John the Rippers 日志

我们不到一分钟就破解了密码！从开膛手约翰的报告开始 43 秒*(图 1)* 。我们只需要尝试 1 亿个可能的密码中的 8%。根据开膛手约翰的进度日志，如果我们必须全部尝试，我们最多需要 8 分钟(每 5 秒处理 1%的可能密码)。

知道这是一个特定格式的生日，我们可以极大地减少尝试的次数。我们将把我们的猜测限制在 10 年的范围内——或者如果您对目标的年龄有更好的了解，可以使用这个范围内的天数作为密码。10 年后，我们有 365 * 10 (=3 650)个可能的密码。手动操作，每 4 秒尝试一次，我们大约 4 小时后打开报告。没必要为此雇佣一大群人！如果我们还没有 4 个小时，我们可以再次用字典攻击召唤开膛手约翰。

我们将编写一个简单的函数，将前面讨论过的日期范围作为参数。该功能将在选定范围内以 *ddMMyyyy* 格式构建日期，并尝试打开 pdf。在 python 上，应该是这样的:

在我的电脑上，这需要大约 3.5 秒才能成功打开 pdf 文件并获得密码！

如果我们想使用 john the ripper，我们可以稍微修改一下这个脚本来生成一个字典(一个包含密码列表的文件),并将它传递给 John the ripper。

用我们之前生成的散列运行这个，我们在不到一秒的时间内就得到密码！

字典蛮力与开膛手约翰

如果他们做一些安全改进呢？到目前为止，我们已经可以断定 4 位数或 8 位数的 pin 码不会成功。如果是一个*实际的*密码呢？不太可能在[常用密码词典](https://www.kali.org/tools/wordlists/)中找到的密码？一组随机的字符，短到可以记忆几天直到我得到结果，长到足够安全。

让我们用 6 个字符，使用数字，大写字母和小写字母。这仍然是一个弱密码，但我们正在改善。现在我们有 62 个可能的字符(26 个小写字母和 26 个大写字母加上 10 个数字)。这给了 62⁶(= 560 亿)个可能的密码！不需要尝试手动操作。

我们可以在增量模式下运行开膛手约翰来尝试 560 亿个可能的密码:

在我的电脑上，8 核 CPU，这将需要最多 55 个小时才能完成。相当长，但非常可行。我只需要让我的电脑开两天。如果我们有 100 台像我这样的计算机并行运行，每台使用 560 亿个组合的子集，我们最多只需要 55 小时的 1/100(约 30 分钟)。现在，如果我们以黑客为生，有很多*不那么合法的*方法可以做到这一点，比如使用[僵尸网络](https://en.wikipedia.org/wiki/Botnet)。在法律方面，我们可以*‘租用’*像谷歌云这样的云服务提供商的计算资源。这里，我们将使用他们的云运行作业服务，该服务允许并行运行多达 100 个单个 vCPU 任务。

开膛手约翰在增量模式下没有现成的暴力破解选项。我们将采取字典的方法，就像我们过生日一样。

这次生成字典的函数如下所示:

该函数将云运行作业通过 *CLOUD_RUN_TASK_INDEX* 环境变量提供的我们正在运行的批处理、我们架构上的批处理数量以及密码长度作为参数。我们使用这些来指定特定作业将负责运行的密码片段的开始和结束索引。你可以从 [GitHub 库](https://github.com/Emmastro/tutorials/tree/master/cloudrun_job_bruteforce)查看更多关于云运行设置的细节。有了这个，让我们运行一个测试，设置 1 000 批，这意味着一个任务将只处理 560 亿个可能的密码的 1/1000。

![](img/4a67afa68b708b22680c8c522282e7c4.png)

图 2 —云运行作业日志

从上面*(图 2)* 的日志中，我们可以看到该任务在 1712 秒(28 分钟)内完成。我们可以并行运行多达 100 个任务，每个任务有 1 个 vCPU 和 1 个 GiB。当我们将任务分成 1000 个批处理时，我们将需要 100 个节点运行 10 次，最多 280 分钟(约 4 小时 40 分钟)。请注意，'*至多'*是重要的，因为当其中一个节点找到密码时，我们可以停止作业。

我们为此付给谷歌多少钱？

截至我撰写本文时，云运行的 1vCPU 秒为 0.000024 美元，1GiB 秒为 0.0000025 美元。虽然我们只等待大约 4 小时就能得到结果，但我们消耗了大约 475 小时的计算时间(将每个任务的计算时间加起来)。那大约是 5 美元。

有了这些数据点，我们将模拟两种极端模型:

# 恒定处理时间

这样，我们每个作业的处理时间是恒定的，同样是 4 个小时，并且由于我们可以独立运行每个作业，所以我们可以同时运行所有作业，并且保持在 4 个小时之内。然而，随着我们增加密码长度，可能的组合会呈指数增长，随之而来的是我们需要运行的并行作业的数量。虽然我们的等待时间没有因为这个设置而增加，但是计算时间却增加了。从下图中，我们可以看到我们的云基础架构的资源和成本是如何呈指数级增长的。你可以在你能在黑客上花多少钱上画一条线，我们目前的技术进步将画出我们能为并行计算提供多少硬件或者根本不提供。

![](img/294bf8a8e8427d3ca3b235df256f5bb1.png)

图 3 —(对数标度的图表)

# 恒定硬件架构

如果我们使用恒定数量的节点会怎么样？有了 62 000 个节点*(为了简化数学，方便的猜测)，我们仍然花费相同的钱，假设计算时间仍然相同。由于许多工作不会与我们有限的节点并行运行，等待时间将呈指数级增长。从一个长度为 10 的密码开始，我们的架构需要 100 年，这是如果我们有 60 亿美元的剩余*(图 4)* 。

![](img/291d6bbc8a03e7edf26b22a6b93d419c.png)

*图 4 —(对数标度的图表)*

在现实生活中，我们的“随机”密码的可预测性使得大多数成功的暴力攻击变得很容易。我们大多数人仍然使用我们的名字、猫名、生日等的组合。，而像开膛手约翰这样的暴力工具利用这一点，从检查最常用的密码开始。如果你知道一些关于目标的事情，就像我们之前对生日所做的那样，你可以做出相当聪明的猜测——用开膛手约翰，或者一个定制的脚本，如果运气好的话，破解你的密码！

现在，如果你仍然在网上的某个地方用你的猫的名字作为密码，现在是时候改变它了。尽管没有必要恐慌，我们使用的一些，也许大部分系统是相对安全的。至少，比这个 covid 报告安全。尝试了几次后，我们的 Gmail 账户被锁定了，我们被两步验证和其他安全措施所困扰。拥有强密码可能不是唯一的安全措施，但绝对是一个好的开始。如果我们都稍微更难被黑，这个世界难道不会变得更安全吗？