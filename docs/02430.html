<html>
<head>
<title>5 tips for Laravel development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel 开发的 5 个技巧</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/5-tips-for-laravel-development-e3cdde9bc235?source=collection_archive---------12-----------------------#2020-08-03">https://blog.devgenius.io/5-tips-for-laravel-development-e3cdde9bc235?source=collection_archive---------12-----------------------#2020-08-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/543483f6cb920e931fe4116e63839789.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5DMWGi8GZWZUbJWQHjcu_Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">标志设计者——<a class="ae jz" href="https://twitter.com/wottavm" rel="noopener ugc nofollow" target="_blank">沃特·范·马鲁姆</a></figcaption></figure><p id="afff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://laravel.com" rel="noopener ugc nofollow" target="_blank"> Laravel </a>是一个快速发展的 PHP 框架，以其简单著称。它的目标是让开发变得更加愉快。我想让你多学一些技巧和窍门，也许有一天能帮到你。</p><p id="fd8e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这篇文章中，我将向你展示五个你可能不知道在 Laravel 中可以做到的技巧。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="4af9" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">#1 定义关系上的列</h1><p id="78cd" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">想象一下，调用一个关系，但是只需要几个字段。通常情况下，人们不会太在意口才的作用，但是确保我们只得到我们需要的列是很有帮助的。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="5d3f" class="mr lg in mn b gy ms mt l mu mv">User::<em class="mw">with</em>('package:id,name,created_at')<br/>    -&gt;find($userId);</span></pre><p id="7bdd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面的代码做了以下事情:</p><ol class=""><li id="2347" class="mx my in kc b kd ke kh ki kl mz kp na kt nb kx nc nd ne nf bi translated">它急切地加载包关系。</li><li id="bef0" class="mx my in kc b kd ng kh nh kl ni kp nj kt nk kx nc nd ne nf bi translated">因为关系字符串包含“:”，所以它将创建一个包含以下列约束的选择。(<a class="ae jz" href="https://github.com/laravel/framework/blob/7.x/src/Illuminate/Database/Eloquent/Builder.php#L1124-L1151" rel="noopener ugc nofollow" target="_blank">引用</a> ) <br/> a. id(如果要引用正确的型号我们需要这个)<br/> b .名称<br/> c. created_at</li></ol><h1 id="e829" class="lf lg in bd lh li nl lk ll lm nm lo lp lq nn ls lt lu no lw lx ly np ma mb mc bi translated">#2 插入带有关系的模型。</h1><p id="22fb" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">插入模型是你在很短的时间内可能要做几百次或者几千次的事情。我还发现，当一个模型有多个必需的关系时，人们更经常保存同一个模型 2 或 3 次。</p><p id="7805" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这可以用一种非常聪明的方式来完成。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="fbd3" class="mr lg in mn b gy ms mt l mu mv">$action = Auth::user()-&gt;actions()-&gt;make($request-&gt;except('category_id')); <br/>$action-&gt;category()-&gt;associate($request-&gt;input('category_id'));<br/>$action-&gt;save();</span></pre><p id="0c74" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面的事情正在这里发生。</p><ol class=""><li id="88e3" class="mx my in kc b kd ke kh ki kl mz kp na kt nb kx nc nd ne nf bi translated">我们根据用户模型上的 HasMany 关系“制定”一个动作。(<a class="ae jz" href="https://laravel.com/api/7.x/Illuminate/Database/Eloquent/Relations/HasMany.html#method_make" rel="noopener ugc nofollow" target="_blank">参考</a>)</li><li id="bb38" class="mx my in kc b kd ng kh nh kl ni kp nj kt nk kx nc nd ne nf bi translated">我们把类别和已经发生的行为联系起来。</li><li id="0d75" class="mx my in kc b kd ng kh nh kl ni kp nj kt nk kx nc nd ne nf bi translated">我们保存我们的动作和它所需要的关系。</li></ol><p id="80f0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这解决了什么问题？嗯，您不需要在数据库中将“必需的”关系设置为可空，因为它将一次性保存完整的查询。</p><h1 id="6981" class="lf lg in bd lh li nl lk ll lm nm lo lp lq nn ls lt lu no lw lx ly np ma mb mc bi translated">#3 使用本地化资源路线。</h1><p id="230a" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">如果您想创建一个 web 应用程序，使用您的语言作为资源路由，而不是默认的英语，您可以通过一些“小”调整很容易地做到这一点。</p><p id="9f46" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，您需要告诉 Laravel 默认的路由动词是不同的。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="32d7" class="mr lg in mn b gy ms mt l mu mv">Route::<em class="mw">resourceVerbs</em>([<br/>    'create' =&gt; 'nieuw',<br/>    'edit' =&gt; 'bewerk',<br/>]);</span></pre><p id="65b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你现在唯一需要做的事情就是用你的语言获取你的资源路径。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="9832" class="mr lg in mn b gy ms mt l mu mv">Route::resource('gebruikers', 'UserController', ['names' =&gt; 'users'])<br/>    -&gt;parameters(['gebruikers' =&gt; 'user']);</span></pre><p id="3185" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">['names' =&gt; 'users']将改变您在<code class="fe nq nr ns mn b">route</code>功能中使用的路线名称。<br/>和` parameters([' gebruikers ' =&gt;' user '])`将模型绑定参数改回您在应用程序中最可能使用的英文单词。</p><h1 id="d04a" class="lf lg in bd lh li nl lk ll lm nm lo lp lq nn ls lt lu no lw lx ly np ma mb mc bi translated">#4 使用路由:列表命令</h1><p id="c6d1" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">我认识的许多开发人员都知道 route:list 命令的作用，但是他们没有充分利用它的潜力。</p><p id="83f3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当你有一个大的代码库时，我建议你开始养成习惯，指定你要搜索的内容，并限制屏幕上显示的信息。这可以通过下面的命令来完成。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="e661" class="mr lg in mn b gy ms mt l mu mv">php artisan route:list --name users. --columns name,uri,action</span></pre><p id="b842" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将产生以下输出。<br/><a class="ae jz" href="https://web.tinkerwell.app/#/snippets/00068866-7263-401c-9123-ff2e3bc1913e" rel="noopener ugc nofollow" target="_blank">https://web . tinker well . app/#/snippets/00068866-7263-401 c-9123-ff 2 E3 BC 1913 e</a></p><h1 id="bc75" class="lf lg in bd lh li nl lk ll lm nm lo lp lq nn ls lt lu no lw lx ly np ma mb mc bi translated">#5 运行功能测试时禁用 Mix。</h1><p id="3262" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">您很有可能在应用程序中使用 Laravel 的 Mix。更多信息参见<a class="ae jz" href="https://laravel.com/docs/7.x/mix#running-mix" rel="noopener ugc nofollow" target="_blank">参考</a>。</p><p id="e57b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个特性很棒，但是在运行特性测试时可能是一个挑战。但是幸运的是，有一种快速简单的方法可以在测试中禁用 Mix。</p><p id="a770" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这可以通过将以下内容添加到 TestCase.php 文件中的设置函数来实现。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="35eb" class="mr lg in mn b gy ms mt l mu mv"><em class="mw">// Spy mix, we don't need css/js during testing<br/></em>$this-&gt;spy(Mix::<strong class="mn io">class</strong>);</span></pre></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="f330" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">谢谢你。</h1><p id="2535" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">有了这五个小技巧，我希望你学到了一些你以前不知道自己能做到的新东西。如果你有一些建议想与他人分享，请务必发表评论。</p><p id="490c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您有任何反馈、问题或希望我写另一个与 Laravel 相关的主题，请随时发表评论。</p></div></div>    
</body>
</html>