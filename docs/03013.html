<html>
<head>
<title>Maintainable JavaScript — Declarations and Function Calls</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可维护的JavaScript —声明和函数调用</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/maintainable-javascript-declarations-and-function-calls-93f3064d3e58?source=collection_archive---------5-----------------------#2020-09-20">https://blog.devgenius.io/maintainable-javascript-declarations-and-function-calls-93f3064d3e58?source=collection_archive---------5-----------------------#2020-09-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4944634064f6b60f70a59a86855d7419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-7J2Vc05EN4M1hHH"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">克里斯·蒙哥马利在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="384f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果想继续使用代码，创建可维护的JavaScript代码很重要。</p><p id="9221" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将通过查看变量和函数来了解创建可维护JavaScript代码的基础。</p><h1 id="1f79" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">变量声明提升</h1><p id="2765" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">var</code>语句被挂起。</p><p id="f4e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着声明可以在定义之前被访问。</p><p id="5a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为声明被拉到顶部而没有值。</p><p id="365c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不希望这种情况自动发生，因为这会让我们困惑。</p><p id="cf61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">幸运的是，有块范围的<code class="fe me mf mg mh b">let</code>和<code class="fe me mf mg mh b">const</code>变量，它们没有被提升。</p><p id="4487" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很好，因为我们不会被变量在代码中的位置所迷惑。</p><p id="83a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使我们的生活更容易，我们应该把变量作为函数中的第一个语句。</p><p id="5157" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个函数不应该太长，这样我们就不必跳得太远。</p><p id="ccd2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e568" class="mq lc iq mh b gy mr ms l mt mu">function doWork(items) {<br/>  let i;<br/>  const len = items.length;<br/>  let value = 10;<br/>  let result = value + 10;<br/>  for (i = 0; i &lt; len; i++) {<br/>    console.log(items[i]);<br/>  }<br/>}</span></pre><p id="9bf1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们到处使用<code class="fe me mf mg mh b">let</code>和<code class="fe me mf mg mh b">const</code>。</p><p id="54ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与<code class="fe me mf mg mh b">for</code>循环一样，项目被迭代。</p><p id="d055" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">len</code>用<code class="fe me mf mg mh b">const</code>声明，因为它从不改变。</p><p id="ec57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">道格·克罗克福德也推荐了这种风格。</p><p id="0b1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还将所有变量声明合并为每行一个值。</p><h1 id="3596" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">函数声明</h1><p id="2a6d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">函数声明也像变量声明一样被JavaScript引擎挂起。</p><p id="6007" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以在声明之前在代码中使用函数声明。</p><p id="af2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="630c" class="mq lc iq mh b gy mr ms l mt mu">doSomething();</span><span id="29b3" class="mq lc iq mh b gy mv ms l mt mu">function doSomething() {<br/>  console.log("hello world");<br/>}</span></pre><p id="2818" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在声明函数之前调用了<code class="fe me mf mg mh b">doSomething</code>。</p><p id="caa3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为提升的缘故。</p><p id="1087" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，为了减少混乱，最好在使用函数之前声明它们。</p><p id="72e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们应该写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8f5d" class="mq lc iq mh b gy mr ms l mt mu">function doSomething() {<br/>  console.log("hello world");<br/>}</span><span id="99da" class="mq lc iq mh b gy mv ms l mt mu">doSomething();</span></pre><p id="36a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反。</p><p id="211d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ESLint和JSHint会在函数被声明之前就发出警告。</p><p id="851c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">函数声明不应出现在block语句中。</p><p id="0ab3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该编写这样的代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d4c2" class="mq lc iq mh b gy mr ms l mt mu">if (condition) {<br/>  function doSomething() {<br/>    console.log("foo");<br/>  }<br/>} else {<br/>  function doSomething() {<br/>    console.log('bar')<br/>  }<br/>}</span></pre><p id="7c53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这不是有效的语法，但是仍然被一些浏览器使用。</p><p id="fe12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，这是ES规范中应该避免的灰色区域。</p><p id="2be1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">函数声明只能在条件语句之外使用。</p><p id="b48a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这在谷歌风格指南中也是禁止的。</p><h1 id="cd36" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">函数调用间距</h1><p id="701e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">函数调用间距是一个没有太大争议的问题。</p><p id="44d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数人认为函数调用在函数名和左括号之间不应该有空格。</p><p id="d8db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样做是为了与block语句区分开来。</p><p id="6b9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4382" class="mq lc iq mh b gy mr ms l mt mu">doWork(item);</span></pre><p id="8c28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是像这样:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ae89" class="mq lc iq mh b gy mr ms l mt mu">doWork (item);</span></pre><p id="de99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是为了将其与块语句区分开来，例如:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5a34" class="mq lc iq mh b gy mr ms l mt mu">while (item) {<br/>  // ...<br/>}</span></pre><p id="0d7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">道格·克罗克福德的代码惯例指出了这一点。</p><p id="9492" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谷歌的风格指南也推荐这种风格。</p><h1 id="6176" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">即时函数调用</h1><p id="758f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript允许我们声明没有属性名的匿名函数，并将这些函数赋给变量和属性。</p><p id="03ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6490" class="mq lc iq mh b gy mr ms l mt mu">const doSomething = function() {<br/>  // ...<br/>};</span></pre><p id="ce72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将匿名函数赋给了一个变量，所以我们可以用变量名调用它。</p><p id="6aca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">调用它时函数本身没有括号是不好的。</p><p id="11cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d472" class="mq lc iq mh b gy mr ms l mt mu">const value = function() {<br/>  //...<br/>  return {<br/>    message: "hello"<br/>  }<br/>}();</span></pre><p id="9048" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很容易将它与定义函数并将其赋给变量而不调用它混淆。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b6da795f96f2e51b187df21c127bc469.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_-LbCgX4fBFKbRhr"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@berkeleycommunications?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">柏克莱通信</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h1 id="48d6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="fcfb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">var</code>和函数声明被吊起。</p><p id="5fda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以它们不应该被使用。</p><p id="470b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们不应该使用不带括号的直接函数调用。</p></div></div>    
</body>
</html>