<html>
<head>
<title>The Karma you get for not using Jest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你不使用Jest的报应</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-karma-you-get-for-not-using-jest-e928e7f6b23f?source=collection_archive---------7-----------------------#2020-06-21">https://blog.devgenius.io/the-karma-you-get-for-not-using-jest-e928e7f6b23f?source=collection_archive---------7-----------------------#2020-06-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="5284" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在Karma上使用Jest测试框架的好处</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/a5f06797ae353db3ea709477455ea3ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*RQwRLQ0yyCvYmRn_Nst5yg.png"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">Jest徽标</figcaption></figure><h2 id="0006" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">什么是玩笑？</h2><p id="56c4" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">Jest是由脸书设计的JavaScript测试框架，旨在简化JavaScript单元测试的执行。它支持多框架，可以和Angular、React、Vue.js、Node等一起使用。</p><p id="3bbe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本文的重点将放在角度上。</p><h2 id="b117" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">什么是因果报应？</h2><p id="d39c" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">我相信和Angular合作过的人都知道什么是因果报应。刷新一下，Karma是最初AngularJS团队创建的单元测试框架，在你安装Angular的时候就预装了。</p><h2 id="0f17" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">为什么要用笑话代替因果报应呢？</h2><p id="c9f7" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">根据我使用Karma的经验，我发现它非常慢，因为启动和加载web浏览器然后执行每个单元测试需要时间。</p><p id="2512" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用Jest和Karma的好处是:</p><ul class=""><li id="1770" class="ls lt in jm b jn jo jr js jv lu jz lv kd lw kh lx ly lz ma bi translated">更快的单元测试:因为Jest是一个无浏览器的测试框架，所以运行单元测试需要更少的时间。比较测试执行时间，我发现Jest运行单元测试的速度是Karma的2到3倍(T2)。随着您的项目变得越来越大，测试用例数量激增，这可能会非常激烈。</li><li id="3d11" class="ls lt in jm b jn mb jr mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jm io">简单配置</strong> : Jest被宣传为开箱即用的框架。只需下载并运行它。虽然对于我的项目，我必须进行配置(因为我正在开发的应用程序在结构上相对复杂)，但对于大多数项目来说，它在下载后可以完美运行。</li><li id="4f31" class="ls lt in jm b jn mb jr mc jv md jz me kd mf kh lx ly lz ma bi translated"><strong class="jm io">更简单的CI/CD集成</strong>:尽管Karma支持多种产品的CI/CD，但它需要一些配置，而且它并不支持所有的CI/CD产品。不可能在Bamboo (Atlassian CI/CD服务器)上使用Karma。对Jest来说幸运的是，因为它只是在命令行中运行，所以很容易与每个 CI/CD管道集成。</li><li id="435c" class="ls lt in jm b jn mb jr mc jv md jz me kd mf kh lx ly lz ma bi translated">Jest可以很容易地与Jasmine一起使用:当我将Karma改为Jest时，我担心我必须改变我编写单元测试的方式来适应这种转换。谢天谢地，我所有的单元测试都运行得很完美。</li></ul><h2 id="ef5e" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">如何从因果报应转变为笑话</h2><p id="de4a" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">在命令行中运行以下命令，将Karma替换为Jest:</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="606f" class="ku kv in mh b gy ml mm l mn mo">&gt; npm install<!-- --> <!-- -->jest @types/jest<!-- --> <!-- -->--save-dev<br/>&gt; ng add @briebug/jest-schematics</span></pre><p id="e93a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:</strong>如果您的项目中安装了不是来自node_modules的库。您必须在您的<em class="mp"> packages.json </em>文件中添加以下内容:</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="a69e" class="ku kv in mh b gy ml mm l mn mo">"jest": {<br/>    "moduleDirectories": [<br/>        "node_modules",<br/>        "lib"<br/>    ]<br/>}</span></pre><p id="7c3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">跑笑话</strong></p><p id="9ca2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您可以运行以下命令来运行具有代码覆盖率的单元测试:</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="d857" class="ku kv in mh b gy ml mm l mn mo">&gt; npm test<!-- --> <!-- -->-- --coverage</span></pre><h2 id="80fd" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">外卖食品</h2><p id="be79" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">这样做的目的是为开发人员腾出更多的时间。如果您从Karma过渡到Jest，它将在容易集成和单元测试执行速度方面带来巨大的回报。这使您能够继续提供优秀和高效的产品！</p><p id="0b1e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">希望这有所帮助！</p></div></div>    
</body>
</html>