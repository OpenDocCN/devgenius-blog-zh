<html>
<head>
<title>How to check the internet connection in an Android project?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在一个 Android 项目中检查互联网连接？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-check-the-internet-connection-in-an-android-project-4371aafa59ca?source=collection_archive---------13-----------------------#2022-12-20">https://blog.devgenius.io/how-to-check-the-internet-connection-in-an-android-project-4371aafa59ca?source=collection_archive---------13-----------------------#2022-12-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="57ef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，您需要在文件的顶部导入<code class="fe ki kj kk kl b">ConnectivityManager</code>和<code class="fe ki kj kk kl b">NetworkInfo</code>类:</p><pre class="km kn ko kp gt kq kl kr bn ks kt bi"><span id="6190" class="ku kv in kl b be kw kx l ky kz">import android.net.ConnectivityManager;<br/>import android.net.NetworkInfo;</span></pre><p id="9c7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，您需要通过调用<code class="fe ki kj kk kl b">getSystemService()</code>并传入<code class="fe ki kj kk kl b">CONNECTIVITY_SERVICE</code>常量来获取对<code class="fe ki kj kk kl b">ConnectivityManager</code>的引用。这将允许您访问有关设备网络连接的信息。</p><pre class="km kn ko kp gt kq kl kr bn ks kt bi"><span id="fc65" class="ku kv in kl b be kw kx l ky kz">ConnectivityManager cm = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);</span></pre><p id="00dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，您可以使用<code class="fe ki kj kk kl b">ConnectivityManager</code>的<code class="fe ki kj kk kl b">getActiveNetworkInfo()</code>方法来获取一个<code class="fe ki kj kk kl b">NetworkInfo</code>对象，该对象表示当前活动的网络连接，如果存在的话。</p><pre class="km kn ko kp gt kq kl kr bn ks kt bi"><span id="c8db" class="ku kv in kl b be kw kx l ky kz">NetworkInfo activeNetwork = cm.getActiveNetworkInfo();</span></pre><p id="877e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，您可以通过检查<code class="fe ki kj kk kl b">NetworkInfo</code>对象的<code class="fe ki kj kk kl b">isConnectedOrConnecting()</code>方法来检查设备是否连接到互联网。如果设备连接到互联网，该方法返回<code class="fe ki kj kk kl b">true</code>，否则返回<code class="fe ki kj kk kl b">false</code>。</p><pre class="km kn ko kp gt kq kl kr bn ks kt bi"><span id="5e67" class="ku kv in kl b be kw kx l ky kz">boolean isConnected = activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();</span></pre><p id="3132" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，您可以使用一个<code class="fe ki kj kk kl b">if</code>语句来检查<code class="fe ki kj kk kl b">isConnected</code>的值，并根据连接状态采取适当的措施。</p><pre class="km kn ko kp gt kq kl kr bn ks kt bi"><span id="7e38" class="ku kv in kl b be kw kx l ky kz">if (isConnected) {<br/>    // do something<br/>} else {<br/>    // show an error message or do something else<br/>}</span></pre><p id="33ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您还需要向 AndroidManifest.xml 文件添加<code class="fe ki kj kk kl b">ACCESS_NETWORK_STATE</code>权限，以允许您的应用程序访问有关设备网络连接的信息:</p><pre class="km kn ko kp gt kq kl kr bn ks kt bi"><span id="fb3a" class="ku kv in kl b be kw kx l ky kz">&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;</span></pre><p id="82b3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">谢谢大家！</p></div></div>    
</body>
</html>