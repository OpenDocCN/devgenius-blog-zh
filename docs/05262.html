<html>
<head>
<title>Migrating from Oracle 2 Snowflake: Part 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Oracle 2雪花迁移:第4部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/migrating-from-oracle-2-snowflake-part-4-997de45a3ec9?source=collection_archive---------2-----------------------#2021-07-10">https://blog.devgenius.io/migrating-from-oracle-2-snowflake-part-4-997de45a3ec9?source=collection_archive---------2-----------------------#2021-07-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jn jo jp jq gh gi paragraph-image"><div class="ab gu cl jr"><img src="../Images/fb389d3d5acc3029752a29d804835779.png" data-original-src="https://miro.medium.com/v2/format:webp/1*O4jGSugxAqGmNgSsh3zSRQ.png"/></div></figure><p id="8a9a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这篇博客是我上一篇博客<strong class="jw ir">从Oracle 2雪花迁移:第3部分</strong>的延续，我想继续分享我从Oracle迁移到雪花的经历。</p><p id="2822" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">注意:这更多的是为了让人们了解在Oracle到雪花迁移过程中会面临哪些挑战。所有建议都是我个人的，与我的雇主(过去/现在)无关。</strong></p><p id="f3ee" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，如果您正在关注我之前的3篇博客，那么您已经清楚我们希望如何进行对象和数据迁移。</p><p id="b4c4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在是时候为日常处理设置我们的申请流程了。因为我们应用程序依赖于在不同时间间隔从源系统传入的文件，所以我们与源应用程序是松散耦合的。即使我们几天不处理收到的文件，我们也能生存下来，因为我们不是面向客户的主动应用程序，而是我们的数据更多地用于决策。</p><p id="0517" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">正如我们所提议的，新的架构使用Azure blog和Snowflake snowpipe来处理所有的增量负载。我们用事件中心设置创建了一个输入文件夹。在雪花端，我们创建了Snowpipe来监听存储事件触发器。我们设置了文件格式、外部阶段、blob安全性，并准备好在ETL (Python)将数据放到Azure blob上时接收数据。早期的PERL脚本更多地用于文件处理和SP调用，因为业务逻辑保存在Oracle数据库中。在迁移到雪花的过程中，我们利用PYTHON编程语言将业务逻辑从数据库推到ETL层。总之，我们通过ETL层利用这个逻辑，所以我们不会面临任何行为上的差异。</p><p id="f1e5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">我们所有的代码更改都是Azure Repo GIT的一部分，我们所有的CI/CD都是使用Azure管道设置的。</p><p id="57cc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在上线当天，我们冻结了现有的应用程序处理，我们已经预先转换了表DDL，并使用Azure管道将其部署在雪花中。使用我们的本地方法加载海量数据。数据加载后开始数据验证。一旦数据得到验证，我们就安排我们的ETL(Python)脚本开始从源路径获取数据，并将其推送到Azure blob存储。</p><p id="85bc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">奇迹开始了，事情开始像我们计划的那样运转。</p><p id="4d28" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，当我写这篇博客的时候或者当你读这篇博客的时候，这可能感觉很简单，但是将需要的步骤分开并保持正确的顺序总是具有挑战性的。我必须感谢我的团队在这方面的努力工作，并帮助我完成这个项目。</p><p id="3e50" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">希望这篇博客能帮助你了解我们如何从Oracle迁移到雪花。如果你对此有任何疑问，欢迎在评论区提问。如果你喜欢这个博客，请鼓掌。保持联系，看到更多这样的酷东西。谢谢你的支持。</p><p id="5486" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">你可以找到我:</strong></p><p id="a3f9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">跟我上媒:</strong>【https://rajivgupta780184.medium.com/ T2】</p><p id="d0c7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在推特上关注我:https://twitter.com/RAJIVGUPTA780</p><p id="e53e" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">在LinkedIn跟我连线:</strong><a class="ae ks" href="https://www.linkedin.com/in/rajiv-gupta-618b0228/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/rajiv-gupta-618b0228/</a></p><p id="9ba5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">订阅我的YouTube频道:</strong><a class="ae ks" href="https://www.youtube.com/channel/UC8Fwkdf2d6-hnNvcrzovktg" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/channel/UC8Fwkdf2d6-hnNvcrzovktg</a></p><figure class="ku kv kw kx gt jq gh gi paragraph-image"><div class="gh gi kt"><img src="../Images/b6f53bd4f35a4c4b2c529865ca887f9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*sSY2iqoRn3Cdge36.png"/></div></figure><p id="99cc" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">#坚持学习#坚持分享#每天学习。</p><h1 id="a172" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">参考资料:-</h1><ul class=""><li id="b8e7" class="lw lx iq jw b jx ly kb lz kf ma kj mb kn mc kr md me mf mg bi translated"><a class="ae ks" href="https://www.snowflake.com/" rel="noopener ugc nofollow" target="_blank">https://www.snowflake.com/</a></li></ul></div></div>    
</body>
</html>