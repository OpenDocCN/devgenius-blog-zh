<html>
<head>
<title>Top React Hooks — Placeholder and Titles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">顶部反应挂钩—占位符和标题</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/top-react-hooks-placeholder-and-titles-ad973bd21e5d?source=collection_archive---------2-----------------------#2020-10-14">https://blog.devgenius.io/top-react-hooks-placeholder-and-titles-ad973bd21e5d?source=collection_archive---------2-----------------------#2020-10-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/31e945751286eccf694631f1f62e2742.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GLodEVX3zda_amRF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@kaleidico?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">万花筒</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9583" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Hooks 包含了 React 应用程序中的逻辑代码。</p><p id="4586" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建自己的钩子，使用别人提供的钩子。</p><p id="c5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看一些有用的 React 挂钩。</p><h1 id="6fec" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">react-乐观-ui-hook</h1><p id="0fb4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">react-optimistic-ui-hook 库允许我们创建一个 ui，它不等待操作完成来更新最终状态。</p><p id="bc25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当读取的数据正在加载时，它们立即切换到最终状态并显示假数据。</p><p id="ef38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过运行以下命令来安装它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0428" class="mn lc iq mj b gy mo mp l mq mr">npm install react-optimistic-ui-hook</span></pre><p id="0e58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2e21" class="mn lc iq mj b gy mo mp l mq mr">yarn add react-optimistic-ui-hook</span></pre><p id="fd42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="35ff" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { useOptimisticUI } from "react-optimistic-ui-hook";</span><span id="d9ec" class="mn lc iq mj b gy ms mp l mq mr">const USERNAME = "facebook";<br/>const PREDICTED_AVATAR_URL = "http://placekitten.com/200/200";<br/>const DELAY_IN_MS = 2000;</span><span id="3847" class="mn lc iq mj b gy ms mp l mq mr">async function getGithubAvatarURL(username) {<br/>  const response = await fetch(`https://api.github.com/users/${username}`);<br/>  const data = await response.json();</span><span id="693f" class="mn lc iq mj b gy ms mp l mq mr">  return new Promise(resolve =&gt; {<br/>    setTimeout(() =&gt; {<br/>      resolve(data.avatar_url);<br/>    }, DELAY_IN_MS);<br/>  });<br/>}</span><span id="6d7e" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const { status, result, error } = useOptimisticUI(<br/>    () =&gt; getGithubAvatarURL(USERNAME),<br/>    PREDICTED_AVATAR_URL<br/>  );</span><span id="a064" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;img src={result} alt="avatar" /&gt;<br/>      &lt;p&gt;Status: {status}&lt;/p&gt;<br/>      &lt;p&gt;Error: {JSON.stringify(error)}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="2316" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有异步获取 Github 用户头像的<code class="fe mt mu mv mj b">getGithubAvatarURL</code>函数。</p><p id="a341" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用这个和<code class="fe mt mu mv mj b">useOptimisticUI</code>挂钩来运行这个承诺。</p><p id="9350" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数具有获取数据的回调。</p><p id="28f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个是占位符的 URL，当真正的数据被下载时显示。</p><p id="1729" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">钩子返回图像加载状态的<code class="fe mt mu mv mj b">status</code>。</p><p id="b6c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">result</code>是结果，是从<code class="fe mt mu mv mj b">getGithubAvatarURL</code>返回的承诺的解析值。</p><p id="49b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">error</code>有任何错误发生。</p><h1 id="bd67" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应页面名称</h1><p id="910b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Page Name 是一个库，允许我们在 React 应用程序中更新页面标题。</p><p id="feaa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="be7b" class="mn lc iq mj b gy mo mp l mq mr">npm install react-page-name</span></pre><p id="9b40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2df2" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { usePageName } from "react-page-name";</span><span id="0b24" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  usePageName("hello world");</span><span id="9a21" class="mn lc iq mj b gy ms mp l mq mr">  return &lt;div&gt;hello world&lt;/div&gt;;<br/>}</span></pre><p id="1a38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">usePageName</code>钩子将带有页面标题的字符串作为参数。</p><p id="5583" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还带有一个高阶分量。</p><p id="1db2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9473" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { withPageName } from "react-page-name";</span><span id="ffbe" class="mn lc iq mj b gy ms mp l mq mr">let Page = () =&gt; {<br/>  return &lt;div&gt;hello world&lt;/div&gt;;<br/>};</span><span id="c3b9" class="mn lc iq mj b gy ms mp l mq mr">Page = withPageName("hello world")(Page);</span><span id="41a9" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Page /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="1d14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了<code class="fe mt mu mv mj b">Page</code>组件，并使用<code class="fe mt mu mv mj b">withPageName</code>高阶组件来设置页面标题。</p><p id="434d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">高阶组件也将使<code class="fe mt mu mv mj b">setPageName</code>方法对我们的组件可用，所以我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7923" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { withPageName } from "react-page-name";</span><span id="c760" class="mn lc iq mj b gy ms mp l mq mr">let Page = ({ setPageName }) =&gt; {<br/>  setPageName("hello world");</span><span id="11d7" class="mn lc iq mj b gy ms mp l mq mr">  return &lt;div&gt;hello world&lt;/div&gt;;<br/>};</span><span id="79e2" class="mn lc iq mj b gy ms mp l mq mr">Page = withPageName()(Page);</span><span id="4473" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Page /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/34e418fefbd1433d47aca2aab95956dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*64II7h8mJRC1SnVL"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@jentheodore?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jen Theodore </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="cce1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="aab8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">react-optimistic-ui-hook 让我们显示一个占位符，直到真正的数据被加载。</p><p id="f87d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React Page Name 允许我们用一个钩子或者更高阶的组件来改变页面标题。</p></div></div>    
</body>
</html>