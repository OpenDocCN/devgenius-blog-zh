<html>
<head>
<title>Write better Golang code by using gofmt to format your code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用gofmt格式化你的代码，写出更好的Golang代码</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/write-better-golang-code-by-using-gofmt-to-format-your-code-c9a37ad6caba?source=collection_archive---------0-----------------------#2021-10-19">https://blog.devgenius.io/write-better-golang-code-by-using-gofmt-to-format-your-code-c9a37ad6caba?source=collection_archive---------0-----------------------#2021-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9b539e207e219f52f9ceead88b216a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gP9IPvq-bIzDgJOGC-wUCg.jpeg"/></div></div></figure><p id="67f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果格式化您的Go代码是一个大难题，那么您肯定会对利用这个叫做<code class="fe kw kx ky kz b">gofmt</code>的工具感兴趣。</p><p id="c1c0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据<a class="ae la" href="https://go.dev/blog/gofmt" rel="noopener ugc nofollow" target="_blank"> go.dev </a>的一项调查，在野外有高达70%的软件包使用<code class="fe kw kx ky kz b">gofmt</code>。这个数字非常高，这是一个好迹象，表明您的代码也应该使用它，否则您将是少数。</p><p id="9b28" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">根据Go的博客:</p><blockquote class="lb lc ld"><p id="ee21" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated"><a class="ae la" href="https://golang.org/cmd/gofmt/" rel="noopener ugc nofollow" target="_blank"> Gofmt </a>是一个自动格式化Go源代码的工具。</p><p id="113d" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated">Gofmt'd代码是:</p><p id="4b60" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated">更容易<strong class="ka ir">编写</strong>:在进行编程时，永远不要担心小的格式问题，</p><p id="9f65" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated">更容易阅读:当所有代码看起来都一样时，你不需要在心里把别人的格式转换成你能理解的东西。</p><p id="84bf" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated">更容易<strong class="ka ir">维护</strong>:对源文件的机械改变不会导致文件格式的不相关改变；差异只显示真实的变化。</p><p id="16ed" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated"><strong class="ka ir">无争议的</strong>:再也不会有关于间距或括号位置的争论了！</p></blockquote><p id="1d11" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">简而言之，如果你想要一种简单的方法来格式化你的代码，并且不需要和其他人就代码的格式而不是代码的设计或结构进行风格上的争论，<code class="fe kw kx ky kz b">gofmt</code>是至关重要的。</p><p id="b424" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要真正使用<code class="fe kw kx ky kz b">gofmt</code>，有几种方法。</p><p id="ddb2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一种方法是在终端中对要格式化的Go文件运行命令:</p><pre class="li lj lk ll gt lm kz ln lo aw lp bi"><span id="9f5a" class="lq lr iq kz b gy ls lt l lu lv">gofmt -w yourfile.go</span></pre><p id="da43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">顺便说一下，如果你想知道那个<code class="fe kw kx ky kz b">-w</code>旗是做什么的，让我们看看<code class="fe kw kx ky kz b">gofmt</code>的文档，看看那里发生了什么:</p><blockquote class="lb lc ld"><p id="9ffc" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated">-w</p><p id="c16d" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated">不要将重新格式化的源打印到标准输出。<br/>如果文件的格式与gofmt不同，用gofmt的版本覆盖它<br/>。如果覆盖过程中出现错误，<br/>从自动备份中恢复原始文件。</p></blockquote><p id="d021" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以基本上，<code class="fe kw kx ky kz b">gofmt</code>将格式化的文件打印到标准输出(基本上，在您的终端中)。如果您不想看到这种情况——特别是对于非常长的文件——那么您可以使用<code class="fe kw kx ky kz b">-w</code>标志。另外，<code class="fe kw kx ky kz b">gofmt</code>将在文件格式化方面胜出，但是如果在覆盖过程中发生了什么，那么原始文件将被恢复。</p><p id="92d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您也可以使用<code class="fe kw kx ky kz b">go fmt</code>命令获得与<code class="fe kw kx ky kz b">gofmt</code>相同的结果:</p><pre class="li lj lk ll gt lm kz ln lo aw lp bi"><span id="bdeb" class="lq lr iq kz b gy ls lt l lu lv">go fmt path/to/your/file</span></pre><p id="6b9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，当使用<code class="fe kw kx ky kz b">gofmt</code>处理文件和目录时，还有一些事情。</p><p id="4884" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您提供了一个文件，<code class="fe kw kx ky kz b">gofmt</code>将格式化该文件。</p><p id="1e58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您提供一个目录，<code class="fe kw kx ky kz b">gofmt</code>足够智能，可以格式化该目录中的所有<code class="fe kw kx ky kz b">.go</code>文件。</p><p id="3869" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你还在等什么？今天就用<code class="fe kw kx ky kz b">gofmt</code>！</p><div class="lw lx gp gr ly lz"><a href="https://tremaineeto.medium.com/membership" rel="noopener follow" target="_blank"><div class="ma ab fo"><div class="mb ab mc cl cj md"><h2 class="bd ir gy z fp me fr fs mf fu fw ip bi translated">通过我的推荐链接加入媒体</h2><div class="mg l"><h3 class="bd b gy z fp me fr fs mf fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="mh l"><p class="bd b dl z fp me fr fs mf fu fw dk translated">tremaineeto.medium.com</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn jw lz"/></div></div></a></div></div></div>    
</body>
</html>