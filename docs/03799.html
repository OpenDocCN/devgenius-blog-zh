<html>
<head>
<title>Vuex 4 — Actions and Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vuex 4 —动作和组件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vuex-4-actions-and-components-89ee0c66a77d?source=collection_archive---------4-----------------------#2020-12-17">https://blog.devgenius.io/vuex-4-actions-and-components-89ee0c66a77d?source=collection_archive---------4-----------------------#2020-12-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/40beec2b739c2692f66c40d29b703ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SfLqKaB6McVS5c3l"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Ethan Elisara 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="65d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Vuex 4处于测试阶段，可能会有变化。</strong></p><p id="15d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex是一个流行的Vue状态管理库。</p><p id="a15e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex 4是专为Vue 3设计的版本。</p><p id="5bb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何将Vuex 4与Vue 3配合使用。</p><h1 id="135b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组件中的调度操作</h1><p id="93fb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">mapActions</code>方法将我们的动作映射到组件方法。</p><p id="8515" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ca69" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="increment"&gt;increment&lt;/button&gt;<br/>      &lt;p&gt;{{count}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          count: 0<br/>        },<br/>        mutations: {<br/>          increment(state) {<br/>            state.count++;<br/>          }<br/>        },<br/>        actions: {<br/>          increment({ commit }) {<br/>            commit("increment");<br/>          }<br/>        }<br/>      });<br/>      const app = Vue.createApp({<br/>        methods: {<br/>          ...Vuex.mapActions(["increment"])<br/>        },<br/>        computed: {<br/>          count() {<br/>            return this.$store.state.count;<br/>          }<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6335" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用了<code class="fe me mf mg mh b">Vuex.mapActions</code>来将我们的动作映射到一个方法中。</p><p id="8264" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以用一个不同于动作的名字把它映射到我们的方法。</p><p id="0cf0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="273d" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="add"&gt;increment&lt;/button&gt;<br/>      &lt;p&gt;{{count}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          count: 0<br/>        },<br/>        mutations: {<br/>          increment(state) {<br/>            state.count++;<br/>          }<br/>        },<br/>        actions: {<br/>          increment({ commit }) {<br/>            commit("increment");<br/>          }<br/>        }<br/>      });<br/>      const app = Vue.createApp({<br/>        methods: {<br/>          ...Vuex.mapActions({ add: "increment" })<br/>        },<br/>        computed: {<br/>          count() {<br/>            return this.$store.state.count;<br/>          }<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="e5f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们向<code class="fe me mf mg mh b">Vuex.mapActions</code>传递了一个对象，以将<code class="fe me mf mg mh b">increment</code>动作映射到<code class="fe me mf mg mh b">add</code>方法。</p><p id="5d5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关键是我们想要映射到的方法名。</p><h1 id="c04b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">撰写动作</h1><p id="8458" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">动作通常是异步的。我们可以通过返回一个承诺来检查它是否完成。</p><p id="0afc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7c92" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="increment2"&gt;increment&lt;/button&gt;<br/>      &lt;p&gt;{{count}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const store = new Vuex.Store({<br/>        state: {<br/>          count: 0<br/>        },<br/>        mutations: {<br/>          increment(state, amount) {<br/>            state.count += amount;<br/>          }<br/>        },<br/>        actions: {<br/>          async increment({ commit }) {<br/>            return commit("increment", 1);<br/>          },<br/>          async increment2({ commit }) {<br/>            await commit("increment", 1);<br/>            return commit("increment", 2);<br/>          }<br/>        }<br/>      });<br/>      const app = Vue.createApp({<br/>        methods: {<br/>          ...Vuex.mapActions(["increment2"])<br/>        },<br/>        computed: {<br/>          count() {<br/>            return this.$store.state.count;<br/>          }<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="b7a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe me mf mg mh b">increment2</code>动作，它用数量1调度<code class="fe me mf mg mh b">increment</code>动作。</p><p id="2400" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用数量2再次调度它。</p><p id="5615" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为它们是承诺，我们等待第一个，它们将按顺序运行。</p><h1 id="8c05" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="5ff2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用Vuex 4，我们可以以不同的方式调度操作。</p><p id="2d1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">动作可以用<code class="fe me mf mg mh b">Vuex.mapActions</code>映射到方法。</p></div></div>    
</body>
</html>