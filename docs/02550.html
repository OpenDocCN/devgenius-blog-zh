<html>
<head>
<title>Vue 3 new features summary</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3新功能摘要</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vue-3-new-features-summary-2c9a7360d56?source=collection_archive---------2-----------------------#2020-08-11">https://blog.devgenius.io/vue-3-new-features-summary-2c9a7360d56?source=collection_archive---------2-----------------------#2020-08-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d96c1729679105a0c596544d2666332e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*njA4pfc_jlHSIPek.png"/></div></div></figure><p id="245d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Vue-next (Vue 3)已经出了一段时间了。它现在处于发布候选阶段，这意味着开放API不会有大的变化。很高兴看到Vue已经稳定下来，并准备好进入我们的项目。</p><p id="c10b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不得不说Vue 2已经足够惊艳了。但是有了Vue 3的新特性，我们的项目很可能会升级到一个更高的水平。我猜Vue 3中最激动人心的功能是合成API。尤雨溪自己提到过，复合API是受React钩子的启发。尽管这两个API挂钩和组合非常相似，但从代码基础来看，它们是完全不同的。我们不要讨论哪个更好或更有前途，因为我真的不认为哪个框架比另一个更好。</p><p id="3143" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">总之，很高兴看到Vue也能做React做的事情。让我们仔细看看新功能。</p><p id="cbd9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">TLDR；</p><p id="785c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">访问<a class="ae kt" href="https://pitayan.com/posts/vue-next-features/?ref=medium" rel="noopener ugc nofollow" target="_blank">Pitayan.com</a>阅读原文。</p><div class="ku kv gp gr kw kx"><a href="https://pitayan.com/posts/vue-next-features/?ref=medium" rel="noopener  ugc nofollow" target="_blank"><div class="ky ab fo"><div class="kz ab la cl cj lb"><h2 class="bd io gy z fp lc fr fs ld fu fw im bi translated">Vue 3新特性总结- Pitayan</h2><div class="le l"><h3 class="bd b gy z fp lc fr fs ld fu fw dk translated">Vue-next (Vue 3)已经出了一段时间了。它现在处于发布候选阶段，这意味着不会有大的…</h3></div><div class="lf l"><p class="bd b dl z fp lc fr fs ld fu fw dk translated">pitayan.com</p></div></div><div class="lg l"><div class="lh l li lj lk lg ll jt kx"/></div></div></a></div><h1 id="c67a" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#1-vite" rel="noopener ugc nofollow" target="_blank"> 1。邀请</a></h1><p id="76e1" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">这是尤雨溪的另一个艺术作品，旨在取代Vue开发中的<a class="ae kt" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a>(目前仅适用于Vue)。正如它的法语名字所暗示的那样，它被设计得很快。</p><h1 id="9dae" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">【Vite入门</h1><p id="3774" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">官方回购为我们提供了一种通过<a class="ae kt" href="https://github.com/vitejs/vite" rel="noopener ugc nofollow" target="_blank"> Vite </a>创建Vue 3应用的简单方法。</p><h2 id="c376" class="mp ln in bd lo mq mr dn ls ms mt dp lw kg mu mv ma kk mw mx me ko my mz mi na bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#npm" rel="noopener ugc nofollow" target="_blank">国家预防机制</a></h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="142e" class="mp ln in ng b gy nk nl l nm nn">$ npm init vite-app &lt;project-name&gt;<br/>$ cd &lt;project-name&gt;<br/>$ npm install<br/>$ npm run dev</span></pre><h2 id="63d7" class="mp ln in bd lo mq mr dn ls ms mt dp lw kg mu mv ma kk mw mx me ko my mz mi na bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#yarn" rel="noopener ugc nofollow" target="_blank">纱线</a></h2><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="234e" class="mp ln in ng b gy nk nl l nm nn">$ yarn create vite-app &lt;project-name&gt;<br/>$ cd &lt;project-name&gt;<br/>$ yarn<br/>$ yarn dev</span></pre><h2 id="2543" class="mp ln in bd lo mq mr dn ls ms mt dp lw kg mu mv ma kk mw mx me ko my mz mi na bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#start-dev-server" rel="noopener ugc nofollow" target="_blank">启动开发服务器</a></h2><p id="4f21" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">这一切都发生在一眨眼的功夫。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="3556" class="mp ln in ng b gy nk nl l nm nn">❯ yarn dev<br/>yarn run v1.22.4<br/>$ vite<br/>vite v1.0.0-rc.4</span><span id="8639" class="mp ln in ng b gy no nl l nm nn">  Dev server running at:<br/>  &gt; Local:    http://localhost:3000/<br/>  &gt; Network:  http://192.168.3.2:3000/<br/>  &gt; Network:  <a class="ae kt" href="http://10.80.67.216:3000/" rel="noopener ugc nofollow" target="_blank">http://10.80.67.216:3000/</a></span></pre><p id="0d17" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开<a class="ae kt" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a></p><figure class="nb nc nd ne gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/234a70e135e3565e1fdd23117b0ff52d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2xMU6v6aRKkgMZMU.png"/></div></div></figure><h1 id="9539" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#vue-next-features" rel="noopener ugc nofollow" target="_blank"> vue-next-features </a></h1><ul class=""><li id="b7b5" class="nq nr in jx b jy mk kc ml kg ns kk nt ko nu ks nv nw nx ny bi translated"><a class="ae kt" href="https://github.com/daiyanze/vue-next-features" rel="noopener ugc nofollow" target="_blank">储存库链接</a></li><li id="bd64" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><a class="ae kt" href="https://daiyanze.com/vue-next-features/dist/" rel="noopener ugc nofollow" target="_blank">演示链接</a></li></ul><p id="1ca2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我创建了一个小应用程序来演示Vue 3的新功能。如果你看一下项目的<code class="fe oe of og ng b">package.json</code>，简单的<a class="ae kt" href="https://github.com/daiyanze/vue-next-features" rel="noopener ugc nofollow" target="_blank"> vue-next-features </a>依赖关系会让你立刻喜欢上<a class="ae kt" href="https://github.com/vitejs/vite" rel="noopener ugc nofollow" target="_blank"> Vite </a>。(我的意思是，谁不想从更简单的<code class="fe oe of og ng b">package.json</code>开始呢？)</p><p id="e5f9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">还有另外一个Vue 3“Hello World”回购(<a class="ae kt" href="https://github.com/vuejs/vue-next-webpack-preview" rel="noopener ugc nofollow" target="_blank">Vue-next-web pack-preview</a>)捆绑<a class="ae kt" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> Webpack </a>。这也是一个很好的游乐场。</p><p id="1330" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://github.com/daiyanze/vue-next-features" rel="noopener ugc nofollow" target="_blank"> vue-next-features </a></p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="3567" class="mp ln in ng b gy nk nl l nm nn">{<br/>  ...,<br/>  "dependencies": {<br/>    "vite": "^1.0.0-rc.4",<br/>    "vue": "^3.0.0-rc.5"<br/>  },<br/>  "devDependencies": {<br/>    "@vue/compiler-sfc": "^3.0.0-rc.5"<br/>  }<br/>}</span></pre><p id="2994" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://github.com/vuejs/vue-next-webpack-preview" rel="noopener ugc nofollow" target="_blank">vue-next-web pack-preview</a></p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="6a4e" class="mp ln in ng b gy nk nl l nm nn">{<br/>  ...,<br/>  "dependencies": {<br/>    "vue": "^3.0.0-beta.2"<br/>  },<br/>  "devDependencies": {<br/>    "@vue/compiler-sfc": "^3.0.0-beta.2",<br/>    "css-loader": "^3.4.2",<br/>    "file-loader": "^6.0.0",<br/>    "mini-css-extract-plugin": "^0.9.0",<br/>    "url-loader": "^4.0.0",<br/>    "vue-loader": "^16.0.0-alpha.3",<br/>    "webpack": "^4.42.1",<br/>    "webpack-cli": "^3.3.11",¥<br/>    "webpack-dev-server": "^3.10.3"<br/>  }<br/>}</span></pre><h1 id="2c6a" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#2-composition-api" rel="noopener ugc nofollow" target="_blank"> 2。组合API </a></h1><p id="5032" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">作为<a class="ae kt" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>最大的变化，组合API将成为你下一个最常用的特性。就像<a class="ae kt" href="https://reactjs.org/docs/hooks-reference.html#" rel="noopener ugc nofollow" target="_blank"> React hooks </a>一样，使用Vue组合API将有助于获得更多的可定制性。</p><p id="1af3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是Vue 3组合API的列表。(其实还有更多……)</p><h2 id="31a6" class="mp ln in bd lo mq mr dn ls ms mt dp lw kg mu mv ma kk mw mx me ko my mz mi na bi translated">反应</h2><ul class=""><li id="fcd5" class="nq nr in jx b jy mk kc ml kg ns kk nt ko nu ks nv nw nx ny bi translated"><code class="fe oe of og ng b">computed</code>T3<code class="fe oe of og ng b">ref</code>T5】</li><li id="6da2" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><code class="fe oe of og ng b">watch</code> <code class="fe oe of og ng b">watchEffect</code> <code class="fe oe of og ng b">unref</code> <code class="fe oe of og ng b">toRefs</code></li><li id="db73" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><code class="fe oe of og ng b">isRef</code> <code class="fe oe of og ng b">isProxy</code> <code class="fe oe of og ng b">isReactive</code> <code class="fe oe of og ng b">isReadonly</code></li><li id="976d" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><code class="fe oe of og ng b">customRef</code> <code class="fe oe of og ng b">markRaw</code> <code class="fe oe of og ng b">shallowReactive</code></li><li id="41d9" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><code class="fe oe of og ng b">shallowReadonly</code> <code class="fe oe of og ng b">shallowRef</code> <code class="fe oe of og ng b">toRaw</code></li></ul><h2 id="4e49" class="mp ln in bd lo mq mr dn ls ms mt dp lw kg mu mv ma kk mw mx me ko my mz mi na bi translated">生命周期挂钩</h2><ul class=""><li id="ebbf" class="nq nr in jx b jy mk kc ml kg ns kk nt ko nu ks nv nw nx ny bi translated"><code class="fe oe of og ng b">onBeforeMount</code> <code class="fe oe of og ng b">onBeforeUnmount</code> <code class="fe oe of og ng b">onBeforeUpdate</code></li><li id="2cdf" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><code class="fe oe of og ng b">onMounted</code><code class="fe oe of og ng b">onUpdated</code>T2】</li><li id="11a2" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><code class="fe oe of og ng b">onRenderTracked</code> <code class="fe oe of og ng b">onRenderTriggered</code> <code class="fe oe of og ng b">onUnmounted</code></li><li id="2b8b" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><code class="fe oe of og ng b">onActivated</code> <code class="fe oe of og ng b">onDeactivated</code></li></ul><p id="b5e0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">访问Vue 3官方文档以了解更多关于这些API的信息。<a class="ae kt" href="https://v3.vuejs.org/api/composition-api.html" rel="noopener ugc nofollow" target="_blank">https://v3.vuejs.org/api/composition-api.html</a></p><h1 id="e9ca" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#component-styles" rel="noopener ugc nofollow" target="_blank">组件样式</a></h1><h2 id="cc33" class="mp ln in bd lo mq mr dn ls ms mt dp lw kg mu mv ma kk mw mx me ko my mz mi na bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#in-vue-2" rel="noopener ugc nofollow" target="_blank">在Vue 2中</a></h2><p id="5244" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">使用配置模板定义组件内容。在Vue 3中，这种传统用法仍然可用。如果你喜欢这种风格，你可以继续使用它。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="5b31" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;button @click="count++"&gt;count: {{ count }}&lt;/button&gt;<br/>&lt;/template&gt;</span><span id="e598" class="mp ln in ng b gy no nl l nm nn">&lt;script&gt;<br/>const multiplier = 2</span><span id="a5c0" class="mp ln in ng b gy no nl l nm nn">export default {<br/>  data () {<br/>    return {<br/>      count: 0<br/>    }<br/>  },<br/>  computed: {<br/>    result () {<br/>      return this.count * multiplier<br/>    }<br/>  },<br/>  mounted () {<br/>    console.log(this.count)<br/>  },<br/>  watch: {<br/>    count (val, oldVal) {<br/>      console.log(val, oldVal)<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><h2 id="757d" class="mp ln in bd lo mq mr dn ls ms mt dp lw kg mu mv ma kk mw mx me ko my mz mi na bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#in-vue-3" rel="noopener ugc nofollow" target="_blank">在Vue 3中</a></h2><p id="4e87" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">要使用组合API，您需要在默认导出中添加一个<code class="fe oe of og ng b">setup</code>属性。下面的代码完全等同于上面的<a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#in-vue-2" rel="noopener ugc nofollow" target="_blank">代码。</a></p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="17e6" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;button @click="count++"&gt;count: {{ count }}&lt;/button&gt;<br/>&lt;/template&gt;</span><span id="09c7" class="mp ln in ng b gy no nl l nm nn">&lt;script&gt;<br/>import { computed, reactive, toRefs, onMounted, watch } from 'vue'</span><span id="f34d" class="mp ln in ng b gy no nl l nm nn">export default {<br/>  setup () {<br/>    const multiplier = 2</span><span id="51b1" class="mp ln in ng b gy no nl l nm nn">    const state = reactive({<br/>      count: 0<br/>    })</span><span id="cdcd" class="mp ln in ng b gy no nl l nm nn">    const result = computed(() =&gt; {<br/>      return state.count * multiplier<br/>    })</span><span id="e753" class="mp ln in ng b gy no nl l nm nn">    onMounted(() =&gt; {<br/>      console.log(state.count)<br/>    })</span><span id="ba54" class="mp ln in ng b gy no nl l nm nn">    watch(state.count, (val, oldVal) =&gt; {<br/>      console.log(val, oldVal)<br/>    })</span><span id="11f3" class="mp ln in ng b gy no nl l nm nn">    return {<br/>      ...toRefs(state)<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><h2 id="6b15" class="mp ln in bd lo mq mr dn ls ms mt dp lw kg mu mv ma kk mw mx me ko my mz mi na bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#go-ahead-with-the-new-api" rel="noopener ugc nofollow" target="_blank">继续使用新的API </a></h2><p id="e120" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">有4个原因可以说明为什么应该使用composition API而不是默认的Vue 2配置模板:</p><ul class=""><li id="fe9f" class="nq nr in jx b jy jz kc kd kg oh kk oi ko oj ks nv nw nx ny bi translated">为了增加源代码的可读性</li><li id="977f" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">为了避免重复或冗余的逻辑</li><li id="7ad8" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">把相似的逻辑组合起来</li><li id="e210" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">重用逻辑</li></ul><p id="4771" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">与Vue 2配置风格相比，逻辑被精确地分解成更小的部分，因此您可以很容易地将相似的逻辑组合在一起。通过这种方式，它也减少了从不相关的逻辑跳转的机会。毫无疑问，这将有助于提高生产率。</p><h1 id="46bf" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#2-advanced-reactivity-api" rel="noopener ugc nofollow" target="_blank"> 2。高级反应性API </a></h1><p id="6a2f" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">个人认为这和其他反应性API没什么区别。但是它确实提供了处理边缘情况的能力，比如定制钩子和浅层修改。根据Vue 3官方文件，它现在是<a class="ae kt" href="https://v3.vuejs.org/api/basic-reactivity.html" rel="noopener ugc nofollow" target="_blank">基本反应性API </a>的一部分。</p><p id="de16" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<a class="ae kt" href="https://composition-api.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue组合api </a>文档中(是的，有一个文档只针对组合api)，下列API被列为高级反应性API。</p><ul class=""><li id="4406" class="nq nr in jx b jy jz kc kd kg oh kk oi ko oj ks nv nw nx ny bi translated">customRef:自定义挂钩</li><li id="788f" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">马克劳:不能成为一个<code class="fe oe of og ng b">reactive</code></li><li id="1eaa" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">shallowReactive:对象的第一层<code class="fe oe of og ng b">reactive</code></li><li id="dbff" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">shallowReadonly:物体的第一层<code class="fe oe of og ng b">readonly</code></li><li id="5a27" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">shallowRef:对象的值不是<code class="fe oe of og ng b">reactive</code></li><li id="af74" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">托拉:恢复一个<code class="fe oe of og ng b">reactive</code>正常物体</li></ul><p id="3edf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你熟悉<code class="fe oe of og ng b">Debounce</code>吗？下面是<code class="fe oe of og ng b">customRef</code>的官方演示:</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="d12f" class="mp ln in ng b gy nk nl l nm nn">import { customRef } from 'vue'</span><span id="8ce5" class="mp ln in ng b gy no nl l nm nn">const useDebouncedRef = (value, delay = 200) =&gt; {<br/>  let timeout<br/>  return customRef((track, trigger) =&gt; {<br/>    return {<br/>      get() {<br/>        track()<br/>        return value<br/>      },<br/>      set(newValue) {<br/>        clearTimeout(timeout)<br/>        timeout = setTimeout(() =&gt; {<br/>          value = newValue<br/>          trigger()<br/>        }, delay)<br/>      },<br/>    }<br/>  })<br/>}</span><span id="b1a5" class="mp ln in ng b gy no nl l nm nn">export default {<br/>  setup () {<br/>    return {<br/>      text: useDebouncedRef('some text')<br/>    }<br/>  }<br/>}</span></pre><h1 id="7951" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#3-v-enter-from--v-leave-from" rel="noopener ugc nofollow" target="_blank"> 3。v-进入-离开/v-离开-离开</a></h1><p id="526d" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">在Vue 2中，<code class="fe oe of og ng b">&lt;Transition&gt;</code>组件帮助处理组件<code class="fe oe of og ng b">animation</code> / <code class="fe oe of og ng b">transition</code>。但是组件属性<code class="fe oe of og ng b">v-enter-active</code> <code class="fe oe of og ng b">v-enter</code> <code class="fe oe of og ng b">v-enter-to</code>对我来说很模糊。有时候我会搞不清楚哪种情况先发生。</p><p id="5561" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，在Vue 3中，这些转换属性名称变得更加统一和直观。</p><ul class=""><li id="b931" class="nq nr in jx b jy jz kc kd kg oh kk oi ko oj ks nv nw nx ny bi translated"><code class="fe oe of og ng b">v-enter</code> = &gt; <code class="fe oe of og ng b">v-enter-from</code></li><li id="7c05" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><code class="fe oe of og ng b">v-leave</code> = &gt; <code class="fe oe of og ng b">v-leave-from</code></li></ul><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="4601" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;transition name="fade"&gt;<br/>    &lt;div v-show="show"&gt;fade transition&lt;/div&gt;<br/>  &lt;/transition&gt;<br/>&lt;/template&gt;</span><span id="dd57" class="mp ln in ng b gy no nl l nm nn">&lt;script&gt;<br/>import { reactive, toRefs } from 'vue'<br/>export default {<br/>  setup () {<br/>    const state = reactive({<br/>      show: true<br/>    })</span><span id="db56" class="mp ln in ng b gy no nl l nm nn">    setTimeout(() =&gt; {<br/>      state.show = false<br/>    }, 1000)</span><span id="1002" class="mp ln in ng b gy no nl l nm nn">    setTimeout(() =&gt; {<br/>      state.show = true<br/>    }, 2000)</span><span id="4cc5" class="mp ln in ng b gy no nl l nm nn">    return {<br/>      ...toRefs(state)<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;</span><span id="a5f8" class="mp ln in ng b gy no nl l nm nn">&lt;style&gt;<br/>.fade-enter-from,<br/>.fade-leave-to {<br/>  opacity: 0;<br/>}</span><span id="a1b4" class="mp ln in ng b gy no nl l nm nn">.fade-enter-to,<br/>.fade-leave-from {<br/>  opacity: 1;<br/>}</span><span id="0397" class="mp ln in ng b gy no nl l nm nn">.fade-enter-active,<br/>.fade-leave-active {<br/>  transition: opacity 2000ms;<br/>}</span><span id="15ce" class="mp ln in ng b gy no nl l nm nn">&lt;/style&gt;</span></pre><p id="045d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">过渡顺序:</p><ol class=""><li id="6b4f" class="nq nr in jx b jy jz kc kd kg oh kk oi ko oj ks ok nw nx ny bi translated"><code class="fe oe of og ng b">v-enter-from</code>(回车)</li><li id="32bf" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks ok nw nx ny bi translated"><code class="fe oe of og ng b">v-enter-active</code></li><li id="025e" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks ok nw nx ny bi translated"><code class="fe oe of og ng b">v-enter-to</code></li><li id="f92a" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks ok nw nx ny bi translated"><code class="fe oe of og ng b">v-leave-from</code> (v型假)</li><li id="7414" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks ok nw nx ny bi translated"><code class="fe oe of og ng b">v-leave-active</code></li><li id="0978" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks ok nw nx ny bi translated"><code class="fe oe of og ng b">v-leave-to</code></li></ol><p id="86b7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我相信这样就好理解多了，不是吗？</p><h1 id="faa5" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#4-allow-multiple-root-element" rel="noopener ugc nofollow" target="_blank"> 4。允许多个根元素</a></h1><p id="2b06" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">Vue 2在多个根元素上抛出错误。所有元素必须嵌套在模板中的一个根元素内。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="ca09" class="mp ln in ng b gy nk nl l nm nn">&lt;!-- Error --&gt;<br/>&lt;template&gt;<br/>  &lt;div&gt;pitayan&lt;/div&gt;<br/>  &lt;div&gt;blog&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="1b83" class="mp ln in ng b gy no nl l nm nn">&lt;!-- One Root Element only --&gt;<br/>&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;div&gt;pitayan&lt;/div&gt;<br/>    &lt;div&gt;blog&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="c973" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Vue 3去掉了这个烦人的用法。我认为当你真的不想将你的元素嵌套在一个“容器”父元素中时，这是非常有用的。有时你所需要的也许只是将那些裸露的元素插入正确的位置。</p><p id="9f7f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这类似于<a class="ae kt" href="https://reactjs.org/docs/fragments.html" rel="noopener ugc nofollow" target="_blank"> React片段</a>，有助于减轻嵌套问题。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="8d2a" class="mp ln in ng b gy nk nl l nm nn">&lt;!-- Vue 3 Multiple Root Element --&gt;<br/>&lt;!-- Okay --&gt;<br/>&lt;template&gt;<br/>  &lt;div&gt;pitayan&lt;/div&gt;<br/>  &lt;div&gt;blog&lt;/div&gt;<br/>&lt;/template&gt;</span></pre><h1 id="93bd" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#5-filters-is-deprecatedremoved" rel="noopener ugc nofollow" target="_blank"> 5。“过滤器”已弃用(已删除)</a></h1><p id="b42e" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">我想很多人认为<code class="fe oe of og ng b">filters</code>可能是Vue.js的一个很棒的特性。它确实在Vue的模板引擎中工作得很好。(例如，数据格式化/计算等)。</p><p id="6605" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们看看Vue 3 doc是如何解释为什么<code class="fe oe of og ng b">filters</code>被移除的:</p><blockquote class="ol om on"><p id="1bc1" class="jv jw oo jx b jy jz ka kb kc kd ke kf op kh ki kj oq kl km kn or kp kq kr ks ig bi translated"><em class="in">虽然这看起来很方便，但它需要一个定制的语法，打破花括号内的表达式“只是JavaScript”的假设，这既有学习成本，也有实现成本。</em></p></blockquote><p id="baed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我相信没有<code class="fe oe of og ng b">filters</code>对开发没有什么不好，即使它可能会花费你额外的时间来迁移到Vue 3。在我的项目中，<code class="fe oe of og ng b">filters</code>的出现非常罕见，因为我可以很容易地用<code class="fe oe of og ng b">method</code>或<code class="fe oe of og ng b">computed</code>来替换这样的功能。因为在我看来，<code class="fe oe of og ng b">method</code> / <code class="fe oe of og ng b">computed</code>比<code class="fe oe of og ng b">filters</code>可读性更高。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="bf6b" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;!-- Deprecated (removed) &amp; Error --&gt;<br/>  &lt;span&gt;{{ count | double }}&lt;/span&gt;</span><span id="b29f" class="mp ln in ng b gy no nl l nm nn">  &lt;!-- If you have to use fiter, make it a function --&gt;<br/>  &lt;span&gt;{{ double(count) }}&lt;/span&gt;<br/>&lt;/template&gt;</span><span id="c790" class="mp ln in ng b gy no nl l nm nn">&lt;script&gt;<br/>import { ref } from 'vue'</span><span id="5a13" class="mp ln in ng b gy no nl l nm nn">export default {<br/>  // Not working<br/>  filters: {<br/>    double (val) {<br/>      return val * 2<br/>    }<br/>  },<br/>  setup () {<br/>    const count = ref(1)<br/>    return {<br/>      count,<br/>      double: val =&gt; val * 2<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><h1 id="006f" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#6-new-async-component-suspense" rel="noopener ugc nofollow" target="_blank"> 6。新异步组件:暂记</a></h1><p id="b1a3" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">这或许是Vue 3唯一一个即使正式发布后也可能改变的新特性。灵感也来自<a class="ae kt" href="https://reactjs.org/docs/concurrent-mode-suspense.html" rel="noopener ugc nofollow" target="_blank">反应悬疑</a>。所以在我看来，使用场景是一样的。</p><figure class="nb nc nd ne gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi os"><img src="../Images/5433a5165524ec50aa7695708c049a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0dR2cuM6rIUxwaGJ.png"/></div></div></figure><p id="d363" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你还记得以前在Vue 2中是如何渲染异步数据的吗？我觉得<code class="fe oe of og ng b">v-if</code> / <code class="fe oe of og ng b">v-else</code>应该是答案。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="d348" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;div v-for="i in items" :key="i"&gt;{{ i }}&lt;/div&gt;<br/>    &lt;div v-else&gt;loading...&lt;div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="ab31" class="mp ln in ng b gy no nl l nm nn">&lt;script&gt;<br/>export default {<br/>  data () {<br/>    return {<br/>      items: null<br/>    }<br/>  },<br/>  mounted () {<br/>    this.items = await new Promise(resolve =&gt; {<br/>      setTimeout(() =&gt; {<br/>        return resolve(['one', 'two'])<br/>      }, 3000)<br/>    })<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="6373" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了<code class="fe oe of og ng b">Suspense</code>组件，不需要自己处理条件也能做到。通过设置<code class="fe oe of og ng b">default</code>和<code class="fe oe of og ng b">fallback</code>插槽，<code class="fe oe of og ng b">Suspense</code>组件将自动处理异步事件。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="63b1" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;suspense&gt;<br/>    &lt;template #default&gt;<br/>      &lt;div v-for="i in items" :key="i"&gt;{{ i }}&lt;/div&gt;<br/>    &lt;/template&gt;</span><span id="eb33" class="mp ln in ng b gy no nl l nm nn">    &lt;template #fallback&gt;<br/>      Loading...<br/>    &lt;/template&gt;<br/>  &lt;/suspense&gt;<br/>&lt;/template&gt;</span><span id="57a6" class="mp ln in ng b gy no nl l nm nn">&lt;script&gt;<br/>export default {<br/>  async setup () {<br/>    const items = await new Promise(resolve =&gt; {<br/>      setTimeout(() =&gt; {<br/>        return resolve(['one', 'two'])<br/>      }, 3000)<br/>    })</span><span id="6d3e" class="mp ln in ng b gy no nl l nm nn">    return {<br/>      items<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><h1 id="a453" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">7。在别处显示:传送</h1><p id="070b" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">这是另一个基于<a class="ae kt" href="https://reactjs.org/docs/portals.html" rel="noopener ugc nofollow" target="_blank"> React Portals </a>的很酷的东西。它提供了将组件插入目标DOM节点的能力。</p><p id="2416" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在Vue 2中所做的是在<code class="fe oe of og ng b">&lt;body&gt;</code>中插入一个自定义组件(当然有一个Vue第三方插件<a class="ae kt" href="https://portal-vue.linusb.org/" rel="noopener ugc nofollow" target="_blank"> PortalVue </a>提供这样的功能):</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="12fe" class="mp ln in ng b gy nk nl l nm nn">import Vue from 'vue'</span><span id="3236" class="mp ln in ng b gy no nl l nm nn">const Ctor = Vue.extends({<br/>  template: `&lt;div&gt;hello world&lt;/div&gt;`<br/>})</span><span id="599e" class="mp ln in ng b gy no nl l nm nn">const vm = new Ctor({ ... }).$mount()</span><span id="9815" class="mp ln in ng b gy no nl l nm nn">document.body.appendChild(vm.$el)</span></pre><p id="2367" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要在Vue 3中使用这样的特性，将目标组件包装在<code class="fe oe of og ng b">&lt;Teleport&gt;</code>中，并在<code class="fe oe of og ng b">to</code>属性中定义目的节点(querySelector)。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="0c2b" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;Teleport to="body"&gt;<br/>    &lt;div&gt;Pitayan&lt;/div&gt;<br/>  &lt;/Teleport&gt;<br/>&lt;/template&gt;</span></pre><h1 id="7cec" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#8-allow-multiple-v-model" rel="noopener ugc nofollow" target="_blank"> 8。允许多个虚拟模型</a></h1><p id="be6b" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated"><code class="fe oe of og ng b">v-model</code>用于表单元素甚至自定义组件中的数据双向绑定。在Vue 2中，一个定制组件在标签中只能有一个<code class="fe oe of og ng b">v-model</code>。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="ffab" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;my-input-form v-model="input" /&gt;<br/>&lt;/template&gt;</span></pre><p id="eab0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Vue 3取消了这个限制，允许您拥有多个<code class="fe oe of og ng b">v-model</code>，这样您就可以为更多的输入元素分别指定绑定。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="9515" class="mp ln in ng b gy nk nl l nm nn">&lt;template&gt;<br/>  &lt;my-input-form<br/>    v-model:first="inputFirst"<br/>    v-model:second="inputSecond"<br/>    /&gt;<br/>&lt;/template&gt;</span></pre><h1 id="93f5" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#9-global-apis" rel="noopener ugc nofollow" target="_blank"> 9。全球API</a></h1><p id="64d3" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">Vue 3提供了一些新的API来帮助我们更好地控制组件和实例。</p><h1 id="7661" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#createapp" rel="noopener ugc nofollow" target="_blank"> createApp </a></h1><p id="7edd" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">在Vue 2中，<code class="fe oe of og ng b">Vue</code>可以作为构造函数返回实例对象。在Vue 3中，你可以使用<code class="fe oe of og ng b">createApp</code>函数来代替。行为其实是一样的。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="b873" class="mp ln in ng b gy nk nl l nm nn">// Vue 2<br/>import Vue from 'vue'<br/>import App from '@/src/App'</span><span id="71f2" class="mp ln in ng b gy no nl l nm nn">new Vue({<br/>  el: '#app',<br/>  components: {<br/>    App<br/>  }<br/>})</span><span id="8b85" class="mp ln in ng b gy no nl l nm nn">// Vue 3<br/>import { createApp } from 'vue'<br/>import App from '@/src/App'</span><span id="1b5a" class="mp ln in ng b gy no nl l nm nn">const app = createApp(App)</span></pre><p id="a8d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">那些像<code class="fe oe of og ng b">extend</code><code class="fe oe of og ng b">component</code><code class="fe oe of og ng b">mixin</code><code class="fe oe of og ng b">directive</code>这样的全局方法呢？</p><p id="cbde" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">相同，但是您需要使用实例方法。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="d686" class="mp ln in ng b gy nk nl l nm nn">// Global methods<br/>app.extend()<br/>app.component()<br/>app.mixin()<br/>app.directive()</span></pre><h1 id="5e16" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#nexttick" rel="noopener ugc nofollow" target="_blank">下一个滴答</a></h1><p id="2664" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">我认为<code class="fe oe of og ng b">nextTick</code>是一个经常使用的API，因为许多逻辑实际上是异步的，它们需要被安排到下一个DOM更新周期。</p><p id="4ce2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在Vue 2中，<code class="fe oe of og ng b">nextTick</code>是一个实例方法。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="9eeb" class="mp ln in ng b gy nk nl l nm nn">export default {<br/>  ...,<br/>  mounted () {<br/>    this.$nextTick(() =&gt; {<br/>      console.log('pitayan')<br/>    })<br/>  }<br/>}</span></pre><p id="19c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Vue 3允许你使用<code class="fe oe of og ng b">nextTick</code>作为一个独立的功能。</p><pre class="nb nc nd ne gt nf ng nh ni aw nj bi"><span id="f020" class="mp ln in ng b gy nk nl l nm nn">// nextTick function type<br/>export declare function nextTick(fn?: () =&gt; void): Promise&lt;void&gt;;</span><span id="2314" class="mp ln in ng b gy no nl l nm nn">// An official doc Example<br/>import { nextTick } from 'vue'</span><span id="30a3" class="mp ln in ng b gy no nl l nm nn">export default {<br/>  setup () {<br/>    const message = ref('Hello, Pitayan!')</span><span id="905b" class="mp ln in ng b gy no nl l nm nn">    const changeMessage = async newMessage =&gt; {<br/>      message.value = newMessage<br/>      await nextTick()<br/>      console.log('Now DOM is updated')<br/>    }<br/>  }<br/>}</span></pre><h1 id="d0ae" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#other-helper-functions" rel="noopener ugc nofollow" target="_blank">其他辅助功能</a></h1><p id="65ad" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">当您需要对更加抽象的场景进行额外的控制时，这些新的API将会非常有用。我个人认为它们可以在第三方库中频繁使用。</p><ul class=""><li id="c1a8" class="nq nr in jx b jy jz kc kd kg oh kk oi ko oj ks nv nw nx ny bi translated"><strong class="jx io"> h </strong>:返回虚拟节点</li><li id="4908" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated">createRenderer :可用于跨环境目的的自定义渲染器</li><li id="0a77" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><strong class="jx io">定义组件</strong>:键入传入的对象</li><li id="894a" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><strong class="jx io"> defineAsyncComponent </strong>:必要时加载异步组件</li><li id="d039" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><strong class="jx io"> resolveComponent </strong>:解析当前实例范围内的组件</li><li id="7a33" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><strong class="jx io">resolveDynamicComponent</strong>:解析当前实例范围内的动态组件</li><li id="bce5" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><strong class="jx io"> resolveDirective </strong>:从当前实例作用域获取一个<code class="fe oe of og ng b">directive</code></li><li id="8965" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><strong class="jx io">带指令</strong>:将<code class="fe oe of og ng b">directive</code>应用于<code class="fe oe of og ng b">VNode</code></li></ul><h1 id="9318" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#conclusions" rel="noopener ugc nofollow" target="_blank">结论</a></h1><p id="a01f" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">我很高兴也很荣幸见证了Vue.js 2.x =&gt; 3.x的成长，Vue团队总结了在Vue 2中原本不可能的事情，让它们在Vue 3中成为可能。正如我所看到的，有许多熟悉的东西来自Vue 3的代码库。</p><p id="eb15" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不难看出，Vue 3是一个更加坚实的框架。它提供了一种新的更简单的方法来组织你的源代码，同时更小更快。在<code class="fe oe of og ng b">Typescript</code>和他们的新特性比如组合API的帮助下，项目的结构会变得和以前大不相同。我认为这对前端社区是一个积极的影响。</p><p id="715f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是Vue 3的新功能。</p><p id="8c50" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你觉得这篇文章很棒。请分享到社交网络。感谢阅读。</p><h1 id="aa88" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated"><a class="ae kt" href="https://pitayan.com/posts/vue-next-features/#references" rel="noopener ugc nofollow" target="_blank">参考文献</a></h1><ul class=""><li id="cc14" class="nq nr in jx b jy mk kc ml kg ns kk nt ko nu ks nv nw nx ny bi translated"><a class="ae kt" href="https://v3.vuejs.org/" rel="noopener ugc nofollow" target="_blank">https://v3.vuejs.org</a></li><li id="ac3b" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><a class="ae kt" href="https://vuejs.org/v2/" rel="noopener ugc nofollow" target="_blank">https://vuejs.org/v2/</a></li><li id="27c6" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><a class="ae kt" href="https://composition-api.vuejs.org/" rel="noopener ugc nofollow" target="_blank">https://composition-api.vuejs.org/</a></li><li id="6337" class="nq nr in jx b jy nz kc oa kg ob kk oc ko od ks nv nw nx ny bi translated"><a class="ae kt" href="https://reactjs.org/docs/" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/</a></li></ul></div><div class="ab cl ot ou hr ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ig ih ii ij ik"><p id="fc69" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">原本在<a class="ae kt" href="https://pitayan.com/posts/vue-next-features/?ref=medium" rel="noopener ugc nofollow" target="_blank">上的Pitayan.com</a></p><div class="ku kv gp gr kw kx"><a href="https://pitayan.com/posts/vue-next-features/?ref=medium" rel="noopener  ugc nofollow" target="_blank"><div class="ky ab fo"><div class="kz ab la cl cj lb"><h2 class="bd io gy z fp lc fr fs ld fu fw im bi translated">Vue 3新特性总结- Pitayan</h2><div class="le l"><h3 class="bd b gy z fp lc fr fs ld fu fw dk translated">Vue-next (Vue 3)已经出了一段时间了。它现在处于发布候选阶段，这意味着不会有大的…</h3></div><div class="lf l"><p class="bd b dl z fp lc fr fs ld fu fw dk translated">pitayan.com</p></div></div><div class="lg l"><div class="lh l li lj lk lg ll jt kx"/></div></div></a></div></div></div>    
</body>
</html>