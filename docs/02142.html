<html>
<head>
<title>API Primer for FileMaker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">锉具的API底漆</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/api-primer-for-filemaker-72ff4198e73b?source=collection_archive---------19-----------------------#2020-07-20">https://blog.devgenius.io/api-primer-for-filemaker-72ff4198e73b?source=collection_archive---------19-----------------------#2020-07-20</a></blockquote><div><div class="fc ic id ie if ig"/><div class="ih ii ij ik il"><div class=""/><p id="635a" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">什么是API，为什么要关注它？API是FileMaker解决方案访问各种服务和与其他数据存储接口的方法。当你对此有了一点了解，系统集成的世界真的为你打开了。</p><p id="0ec1" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">API代表<strong class="jn ip">应用程序接口</strong>。它是应用程序访问服务的接口。它本质上提供了一个解释器服务，将请求翻译成服务可以理解的语言，并返回请求的结果。这意味着服务可以被视为一个<a class="ae kj" href="https://en.wikipedia.org/wiki/Black_box" rel="noopener ugc nofollow" target="_blank"> <strong class="jn ip">黑盒</strong></a>——请求进去，看不见的魔法发生，结果出来。</p><h2 id="1d94" class="kk kl io bd km kn ko dn kp kq kr dp ks jw kt ku kv ka kw kx ky ke kz la lb lc bi translated">餐馆类比</h2><p id="2991" class="pw-post-body-paragraph jl jm io jn b jo ld jq jr js le ju jv jw lf jy jz ka lg kc kd ke lh kg kh ki ih bi translated">打个比方可能有用。你是一个坐在餐馆里的顾客(<em class="li">应用程序</em>)。你饿了，想吃东西，所以你仔细阅读菜单，决定要一份牛排。</p><figure class="lk ll lm ln gu lo gi gj paragraph-image"><div class="gi gj lj"><img src="../Images/ec66c9e3071147d32570033dc9786652.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*NwNXqXNSqPV80eQ5A9ao6w.jpeg"/></div><figcaption class="lr ls gk gi gj lt lu bd b be z dk translated">服务员接受订单(API接收请求)</figcaption></figure><p id="4d4c" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">你不能进厨房自己做或者指挥厨师给你做。取而代之的是，一个服务员(<em class="li"> API </em>)帮你点菜。他或她会解释你的具体要求，比如要三分熟的，还要把调味汁放在旁边。服务员用你可能不懂的速记写下订单。然后，他们以自己理解的方式将订单发送到厨房(<em class="li">服务</em>)。厨房工作人员准备饭菜，准备好了就摇铃。</p><p id="6c90" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">你和服务员都不知道这是怎么做的。你点的饭已经送到你的桌子上了。</p><p id="6f0a" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">当支付餐费时，可能会发生相反的情况——餐厅变成了向您请求结果(付款)的应用程序。</p><h2 id="c876" class="kk kl io bd km kn ko dn kp kq kr dp ks jw kt ku kv ka kw kx ky ke kz la lb lc bi translated">API服务</h2><p id="2afd" class="pw-post-body-paragraph jl jm io jn b jo ld jq jr js le ju jv jw lf jy jz ka lg kc kd ke lh kg kh ki ih bi translated">在我们的例子中，我们对从FileMaker解决方案中访问外部服务感兴趣。这可能是简单地推或拉数据，或者为我们操纵数据。</p><p id="dba8" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">我们可能使用的服务示例:</p><ul class=""><li id="ce3a" class="lv lw io jn b jo jp js jt jw lx ka ly ke lz ki ma mb mc md bi translated">通过SMS发送文本消息</li><li id="3aa7" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">将发票数据提交给会计应用程序</li><li id="c947" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">检索一些外语文本的英文版本</li><li id="40e0" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">提交一个ISBN来获取一本书的所有数据</li><li id="6e10" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">验证信用卡进行处理</li></ul><p id="2c69" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">许多服务都属于“不要重新发明轮子”的范畴——访问一个专门设计的服务，然后尝试自己构建和维护它，这要容易得多，也更健壮。</p><h2 id="7778" class="kk kl io bd km kn ko dn kp kq kr dp ks jw kt ku kv ka kw kx ky ke kz la lb lc bi translated">发出API请求</h2><p id="864e" class="pw-post-body-paragraph jl jm io jn b jo ld jq jr js le ju jv jw lf jy jz ka lg kc kd ke lh kg kh ki ih bi translated">任何API事务的基础都是相似的:</p><ol class=""><li id="00b8" class="lv lw io jn b jo jp js jt jw lx ka ly ke lz ki mj mb mc md bi translated">建立身份和权限以提出请求</li><li id="a091" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki mj mb mc md bi translated">提出以所需格式提供数据的请求</li><li id="ca07" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki mj mb mc md bi translated">收到结果</li></ol><p id="36ba" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">有时候结果就是‘OK’这么简单。有时候是数据流。</p><h2 id="e32e" class="kk kl io bd km kn ko dn kp kq kr dp ks jw kt ku kv ka kw kx ky ke kz la lb lc bi translated">示例—发送手机短信</h2><p id="5481" class="pw-post-body-paragraph jl jm io jn b jo ld jq jr js le ju jv jw lf jy jz ka lg kc kd ke lh kg kh ki ih bi translated">在本例中，我们将使用名为<a class="ae kj" href="https://www.clicksend.com/au/" rel="noopener ugc nofollow" target="_blank"> ClickSend </a>的服务，从FileMaker数据库向给定的手机号码发送SMS文本消息。ClickSend有许多API——我们将使用的是他们的<a class="ae kj" href="https://developers.clicksend.com/docs/rest/v3/" rel="noopener ugc nofollow" target="_blank">REST API</a>——根据他们的描述，这是“最新最强大的JSON请求和响应API”</p><h2 id="0d4e" class="kk kl io bd km kn ko dn kp kq kr dp ks jw kt ku kv ka kw kx ky ke kz la lb lc bi translated">1.授权</h2><p id="44f3" class="pw-post-body-paragraph jl jm io jn b jo ld jq jr js le ju jv jw lf jy jz ka lg kc kd ke lh kg kh ki ih bi translated">要使用API，您需要创建一个免费帐户。这将为您设置一个API用户名和API密钥。这些用于验证您使用服务的身份。它还授权该服务使用您帐户中的点数发送短信。</p><p id="3896" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">我的用户名是<em class="li">大卫·海德</em>，我的API密匙的形式是<em class="li">5af 333 BF-0d 51–617d-4586-a1b 1188006 xx</em>(不是我真正的密匙)。</p><p id="3ea4" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">授权头是通过将用户名和密码组合成一个字符串来构建的— <em class="li">用户名:密码。</em>使用Base64编码和授权方法对其进行编码，并在编码字符串前添加一个空格。使用上述用户名和密钥，您将获得:</p><pre class="lk ll lm ln gu mk ml mm mn aw mo bi"><span id="2427" class="kk kl io ml b gz mp mq l mr ms">Authorization: Basic ZGF2aWRoZWFkOjVBRjMzM0JGLTBENTEtNjE3RC00NTg2LUExQjExODgwMDZYWA==</span></pre><p id="645b" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated"><em class="li">补充说明:如果您对编码文本使用FileMaker函数Base64Decode，您将看到用冒号分隔的原始用户名和密钥。</em></p><h2 id="46bc" class="kk kl io bd km kn ko dn kp kq kr dp ks jw kt ku kv ka kw kx ky ke kz la lb lc bi translated">2.提出请求</h2><p id="33d1" class="pw-post-body-paragraph jl jm io jn b jo ld jq jr js le ju jv jw lf jy jz ka lg kc kd ke lh kg kh ki ih bi translated">“发送短信”的ClickSend API文档详细说明了请求的结构，包括需要哪些数据以及数据的格式。</p><p id="5e1e" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">HTTP请求是一个<strong class="jn ip"> POST </strong> —数据被发送到服务。另一种常见的方法是GET——从资源请求数据。</p><p id="9f56" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">内容以<a class="ae kj" href="http://www.json.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jn ip"> JSON </strong> </a>格式提供。单个消息有许多可能的属性:</p><ul class=""><li id="db3a" class="lv lw io jn b jo jp js jt jw lx ka ly ke lz ki ma mb mc md bi translated">来源—发送方法，例如php</li><li id="5369" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">发件人—将显示为发件人的手机号码</li><li id="71a1" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">正文—要发送的文本消息</li><li id="a661" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">收件人—收件人的手机号码</li><li id="ccdf" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">schedule —用于安排消息发送的可选时间代码</li><li id="ea2d" class="lv lw io jn b jo me js mf jw mg ka mh ke mi ki ma mb mc md bi translated">自定义字符串—您对消息的引用</li></ul><p id="adfb" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">在FileMaker Pro中，请求是通过脚本步骤<strong class="jn ip">从URL </strong>插入来完成的。在脚本步骤中，我们可以指定要调用URL、要随调用一起发送的任何选项以及结果的目标(字段或变量)。</p><p id="f5f6" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">我们调用的URL被称为<strong class="jn ip">端点</strong>。API文档告诉我们每个服务的基本URL和端点。对于当前的点击发送API，基本URL是<a class="ae kj" href="https://rest.clicksend.com/v3/" rel="noopener ugc nofollow" target="_blank"><em class="li">https://rest.clicksend.com/v3/</em></a><em class="li"/>，发送短信服务的端点是<em class="li">短信/发送</em>。</p><p id="8b98" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">所以我们发送的网址是<a class="ae kj" href="https://rest.clicksend.com/v3/sms/send" rel="noopener ugc nofollow" target="_blank"><em class="li">https://rest.clicksend.com/v3/sms/send</em>T3】</a></p><p id="2a7b" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">随请求发送的选项是<strong class="jn ip">卷曲选项</strong>。它们是请求类型(POST)、授权头(如上所述以Base64编码)、内容头(假定内容是JSON格式的)和以JSON构造的消息属性。</p><h2 id="6e16" class="kk kl io bd km kn ko dn kp kq kr dp ks jw kt ku kv ka kw kx ky ke kz la lb lc bi translated">3.收到结果</h2><p id="bc9d" class="pw-post-body-paragraph jl jm io jn b jo ld jq jr js le ju jv jw lf jy jz ka lg kc kd ke lh kg kh ki ih bi translated">结果被接收回在从URL脚本插入步骤中定义的目标。这可能是一个字段或变量。对于ClickSend API，结果以JSON格式返回。它包含所提供的所有数据的副本，以及message_price (0.077)、status(成功)、http_code (200)等发送信息。</p><p id="53da" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">可以将结果解析到FileMaker记录中，以保存消息发送操作的结果。</p><h2 id="69a5" class="kk kl io bd km kn ko dn kp kq kr dp ks jw kt ku kv ka kw kx ky ke kz la lb lc bi translated">结论</h2><p id="40b4" class="pw-post-body-paragraph jl jm io jn b jo ld jq jr js le ju jv jw lf jy jz ka lg kc kd ke lh kg kh ki ih bi translated">这是一篇关于在FileMaker解决方案中使用API的简要介绍。在本文中，我们只考虑了一个来自FileMaker的API请求的例子。FileMaker服务器还提供了一个数据API。外部服务可以访问它，将数据推入由FileMaker服务器托管的FileMaker解决方案，或者从该解决方案中提取数据。</p></div></div>    
</body>
</html>