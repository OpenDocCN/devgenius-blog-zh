<html>
<head>
<title>Expandable UITableViewCell in Swift 5 (Simple Way)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift 5 中的可扩展 UITableViewCell(简单方式)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/easy-way-to-create-an-expandable-uitableviewcell-in-swift-5-a5c72d1361da?source=collection_archive---------0-----------------------#2021-11-16">https://blog.devgenius.io/easy-way-to-create-an-expandable-uitableviewcell-in-swift-5-a5c72d1361da?source=collection_archive---------0-----------------------#2021-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9b27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将看到如何在不使用节的情况下创建可扩展的 tableview 单元格。</p><p id="2712" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用<strong class="jp ir"> UIStackView </strong>！！！</p><p id="f51e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们首先创建我们的单元格(我们将称之为 ExpandableFaqTableViewCell)</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/5695a9b1fc8596d2eff16e33c52f4256.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gIqKQqMZy0ms_L1USu8yzA.png"/></div></div></figure><p id="fa5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这就是<strong class="jp ir">锡伯</strong>应该有的样子。现在让我们在内容视图中放置一个<strong class="jp ir"> UIStackView </strong>并添加必要的约束。</p><p id="1b7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们想要分离扩展区域，所以我们将在我们的<strong class="jp ir"> UIStackView </strong>中添加两个视图。第一个视图将只包含一个 UILabel(这是我们的标题)和一个简单的图像，它将根据单元格的状态改变为 up 或 down。第二个视图将包含一个 UIView(一个简单的行)和一个 UILabel，它是描述(它可以有多行)。</p><p id="fa77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们将第二个视图命名为 bottomView(注意在 bottom view 中你可以添加任何你想要的东西，而不仅仅是一个 UILabel。在所有视图中使用约束。</p><p id="4a18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们看看 swift 文件应该是什么样的。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kx"><img src="../Images/a83a0cd288c9270a07e6f143a3948cb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LrcXIrgwXLOpjEF7Czqdsw.png"/></div></div></figure><p id="3031" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们连接所有的<strong class="jp ir"> IBOutlets </strong>，正如你注意到的，我们应该在底部视图中添加一个 didSet。这意味着当底视图被设置时，它将被隐藏。您可以避开这一步，直接在 xib 文件中设置 hidden 属性。我们完成了 UITableViewCell 的配置。</p><p id="9562" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们看看我们的 UIViewController(我们将称它为 SupportDetailsViewController)</p><p id="f563" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将从 UIViewController 的基本配置开始</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ky"><img src="../Images/c6bc6b57e2efff0cde0040ff1fe33d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fhzi39bz_bqm5lVeaaycKg.png"/></div></div></figure><p id="9ffb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">detailsTableView 将是我们的 UITableView。我们需要注册我们的单元格，并设置数据源和<strong class="jp ir"> UITableViewDelegate </strong>和<strong class="jp ir"> UITableViewDatasource 的委托。</strong>为了方便起见，我们将在 100 处添加一个 estimatedRowHeight 和一个 RowHeight 的 automaticDimension，这样高度将等于单元格的内容。</p><p id="a43c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步是用 UITableViewDelegate 和 UITableViewDatasource 添加 SupportDetailsViewController 的扩展</p><p id="03cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们先看看<strong class="jp ir"> UITableViewDelegate </strong>:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kz"><img src="../Images/d1eb4dff0379eb51db01ad05028a52b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LiB3HT4aQjSiX7Sn5blfAQ.png"/></div></div></figure><p id="35d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们只需要实现 didSelectRowAt 方法，并且尽可能地简单。在这个例子中，我们有我们的模型数组，我们将使用它来保持可扩展单元的状态。因此，在点击单元格时，我们将反转模型上的 isHidden 值(从 true 到 false，反之亦然),这里的技巧是只调用 reloadRows 函数</p><p id="17c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="la">table view . reload rows(at:[index path]，with: UITableView。RowAnimation.automatic) </em></p><p id="2d43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们将看到扩展单元格的技巧。让我们实现<strong class="jp ir"> UITableViewDataSource </strong>的方法</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lb"><img src="../Images/a8afb8b7cce5840815b99c2fe5561d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZMNYmASdxchSBq0mzm0aw.png"/></div></div></figure><p id="8796" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">numberOfRowsInSection 将只计算我们的数组</p><p id="ccf3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们把重点放在 cellForRowAt 函数上。在配置了带有标题和描述的单元格后，我们需要配置底部视图，以便在单元格被点击时隐藏。我们简单地用数组中的值设置 bottomView 的<strong class="jp ir"> isHidden </strong>属性。如果您还需要更改图标(向上或向下)，您可以基于 isHidden 属性设置图像。</p><p id="43c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果是:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/4f119ad5b16e396d4ecd0d8e7f8319b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Co1cyU7G7RipXPnctlpbow.gif"/></div><figcaption class="ld le gj gh gi lf lg bd b be z dk translated">可扩展示例</figcaption></figure><p id="0939" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想在你的单元格中添加<strong class="jp ir">圆角和阴影</strong>你可以阅读我的帖子(正如你所见，它对可扩展的单元格也非常有效):<a class="ae lh" href="https://medium.com/p/round-corners-and-shadow-in-uitableviewcell-swift-5-8eb903bf38a1" rel="noopener">https://medium . com/p/round-corners-and-shadow-in-uitableviewcell-swift-5-8 EB 903 BF 38 a 1</a></p><p id="8f40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请支持我们成为灵媒会员</p><div class="li lj gp gr lk ll"><a href="https://simaspavlos.medium.com/membership" rel="noopener follow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd ir gy z fp lq fr fs lr fu fw ip bi translated">用我的推荐链接加入媒体</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">simaspavlos.medium.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz kv ll"/></div></div></a></div></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><p id="4808" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="la">更多内容尽在</em><a class="ae lh" href="http://blog.devgenius.io" rel="noopener ugc nofollow" target="_blank"><em class="la">blog . devgenius . io</em></a><em class="la">。</em></p></div></div>    
</body>
</html>