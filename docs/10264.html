<html>
<head>
<title>Learn how to run PostgreSQL locally</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何在本地运行 PostgreSQL</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/learn-how-to-run-postgresql-locally-c388483712e9?source=collection_archive---------8-----------------------#2022-10-19">https://blog.devgenius.io/learn-how-to-run-postgresql-locally-c388483712e9?source=collection_archive---------8-----------------------#2022-10-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="6e3a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用码头集装箱</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/41d01117892cb822c92bff6a5d2ca500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6ZCcM5-p6l-9kYfW"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">Docker 和 Postgresql 可以一起工作(使用<a class="ae lb" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>和<a class="ae lb" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL </a>徽标构建)</figcaption></figure><p id="e5e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每次 IT 专业人员需要学习新东西时，他/她都需要在他们的笔记本电脑上安装几个新程序(有些软件在机器的操作系统中可能无法正常工作)。</p><p id="8cb5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，这并不是在本地运行软件的唯一方法(<a class="ae lb" href="https://medium.com/@lgsoliveira/what-means-to-run-one-software-locally-a8b556d6f34c" rel="noopener">什么意思是“在本地运行一个软件</a>？”).在我看来，最好的方法是使用 Docker 容器，因为你只需要安装 Docker，但是你可以使用很多程序。</p><p id="bb4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将解释如何将 PostgreSQL 设置为在 Docker 容器中运行。本文基于视频<a class="ae lb" href="https://www.youtube.com/watch?v=2JM-ziJt0WI&amp;list=PL3MmuxUbc_hJed7dXYoJw8DoCuVHhGEQb" rel="noopener ugc nofollow" target="_blank">从<a class="ae lb" href="https://datatalks.club/" rel="noopener ugc nofollow" target="_blank"> DataTalksClub </a>的<a class="ae lb" href="https://github.com/DataTalksClub/data-engineering-zoomcamp" rel="noopener ugc nofollow" target="_blank">数据工程 Zoomcamp </a>摄取纽约出租车数据到 Postgres </a>。</p><p id="d0ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我会解释:</p><ul class=""><li id="4a31" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">Docker 和 PostgreSQL 简介</li><li id="48bb" class="lc ld iq jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">在 Docker 容器中运行 PostgreSQL 需要做什么？</li></ul></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="b958" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">1.PostgreSQL 和 Docker 简介</h1><h1 id="12b2" class="lx ly iq bd lz ma mv mc md me mw mg mh mi mx mk ml mm my mo mp mq mz ms mt mu bi translated">1.1.一种数据库系统</h1><p id="9ce6" class="pw-post-body-paragraph jn jo iq jp b jq na js jt ju nb jw jx jy nc ka kb kc nd ke kf kg ne ki kj kk ij bi translated">根据官方网站的说法，“PostgreSQL 是一个强大的开源对象关系数据库系统，经过 35 年的积极开发，它在可靠性、功能健壮性和性能方面赢得了良好的声誉。”。</p><p id="f9b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它最初被命名为 POSTGRES，但在 1996 年，该项目被重命名为 PostgreSQL，以反映其对 SQL 的支持。</p><p id="013b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它的特点是事务具有原子性、一致性、隔离性、持久性(ACID)属性、可自动更新的视图、物化视图、触发器、外键和存储过程。</p><p id="d02e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它旨在处理一系列工作负载，从单台机器到数据仓库或有许多并发用户的 Web 服务。(来源<a class="ae lb" href="https://en.m.wikipedia.org/wiki/PostgreSQL" rel="noopener ugc nofollow" target="_blank">维基百科</a>)</p><h1 id="e4ec" class="lx ly iq bd lz ma mv mc md me mw mg mh mi mx mk ml mm my mo mp mq mz ms mt mu bi translated">1.2.码头工人</h1><p id="8ffd" class="pw-post-body-paragraph jn jo iq jp b jq na js jt ju nb jw jx jy nc ka kb kc nd ke kf kg ne ki kj kk ij bi translated">Docker 使用操作系统级虚拟化，允许对容器中的软件进行奇妙的定制，这些容器可以轻松地与您的同事或开发环境之间共享，“并确保您共享的每个人都获得以相同方式工作的相同容器”(通过 Docker 官方网站)。</p><p id="f541" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">容器是相互隔离的，并且捆绑了它们自己的软件、库和配置文件。</p><p id="e010" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为所有容器共享单个操作系统内核的服务，所以它们比虚拟机使用更少的资源。(来源<a class="ae lb" href="https://en.m.wikipedia.org/wiki/Docker_(software)" rel="noopener ugc nofollow" target="_blank">维基百科</a>)</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="b277" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">2.在 Docker 容器上运行 PostgreSQL</h1><p id="b593" class="pw-post-body-paragraph jn jo iq jp b jq na js jt ju nb jw jx jy nc ka kb kc nd ke kf kg ne ki kj kk ij bi translated">为了使用 Docker 容器在本地运行 PostgreSQL，我们需要运行两个命令。</p><ul class=""><li id="4749" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">使用简单的 Docker 命令构建一个卷</li></ul><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="107a" class="nk ly iq ng b gy nl nm l nn no">docker volume create --name postgres_volume_local -d local</span></pre><p id="8efc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用此命令，我们将在本地创建一个名为 postgres_volume_local 的卷。</p><ul class=""><li id="a582" class="lc ld iq jp b jq jr ju jv jy le kc lf kg lg kk lh li lj lk bi translated">构建容器的更复杂的 Docker 命令</li></ul><p id="022d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们需要有强制命令来构建容器</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="52b5" class="nk ly iq ng b gy nl nm l nn no">docker run</span></pre><p id="a9e1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后我们插入一些要迭代的标志，添加一个名字并在退出时移除容器。</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="5c8d" class="nk ly iq ng b gy nl nm l nn no">-it --rm --name postgresql</span></pre><p id="a74e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来，我们添加一些 PostgreSQL 环境变量</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="aee5" class="nk ly iq ng b gy nl nm l nn no">-e POSTPostgreSQL"user_name"</span><span id="45ae" class="nk ly iq ng b gy np nm l nn no">-e POSTGRES_PASSWORD="a_cool_but_difficult_password"</span><span id="c9ad" class="nk ly iq ng b gy np nm l nn no">-e POSTGRES_DB="my_database"</span></pre><p id="3438" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们在之前创建的 Docker 卷和 PostgreSQL 设置数据的路径之间设置一个连接</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="b550" class="nk ly iq ng b gy nl nm l nn no">-v postgres_volume_local:/var/lib/postgresql/data</span></pre><p id="eec4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还需要为 PostgreSQL 设置端口。</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="edaf" class="nk ly iq ng b gy nl nm l nn no">-p 5432:5432</span></pre><p id="23cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们必须调用 PostgreSQL Docker 映像。</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="fc64" class="nk ly iq ng b gy nl nm l nn no">postgres:13</span></pre><p id="3d98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">总的来说，完整的命令是这样的</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="fc04" class="nk ly iq ng b gy nl nm l nn no">docker run -it --rm --name postgresql \</span><span id="fc40" class="nk ly iq ng b gy np nm l nn no">-e POSTGRES_USER="user_name" \</span><span id="b7f0" class="nk ly iq ng b gy np nm l nn no">-e POSTGRES_PASSWORD="a_cool_but_difficult_password" \</span><span id="e707" class="nk ly iq ng b gy np nm l nn no">-e POSTGRES_DB="my_database" \</span><span id="df5a" class="nk ly iq ng b gy np nm l nn no">-v postgres_volume_local:/var/lib/postgresql/data \</span><span id="e91f" class="nk ly iq ng b gy np nm l nn no">-p 5432:5432 \</span><span id="85bd" class="nk ly iq ng b gy np nm l nn no">postgres:13</span></pre></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><h1 id="a202" class="lx ly iq bd lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu bi translated">摘要</h1><p id="dd3b" class="pw-post-body-paragraph jn jo iq jp b jq na js jt ju nb jw jx jy nc ka kb kc nd ke kf kg ne ki kj kk ij bi translated">本文介绍了一种简单而有效的方法，在 Docker 容器中运行 PostgreSQL，并将数据保存在 Docker 卷中。</p></div><div class="ab cl lq lr hu ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ij ik il im in"><p id="f1c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你喜欢这篇文章吗？关注我更多关于<a class="ae lb" href="https://medium.com/@lgsoliveira" rel="noopener">媒体</a>的文章。</p></div></div>    
</body>
</html>