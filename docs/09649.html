<html>
<head>
<title>How to Subtract Seconds From a Date in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 JavaScript 从日期中减去秒</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-date-subtract-seconds-83b3285b7959?source=collection_archive---------19-----------------------#2022-09-02">https://blog.devgenius.io/javascript-date-subtract-seconds-83b3285b7959?source=collection_archive---------19-----------------------#2022-09-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/22d92b871e14da5e9c3d4ff0c3bce7c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ODO2OG8gDROfqh5QaYgiQ.png"/></div></div></figure><p id="f5a8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们学习如何在 JavaScript 中轻松地从一个<code class="fe kt ku kv kw b">Date</code>对象中减去任意秒数。</p><h1 id="1b21" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">1.Date setSeconds()和 getSeconds()方法</h1><p id="9c67" class="pw-post-body-paragraph jv jw in jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">从一个<code class="fe kt ku kv kw b">Date</code>中减去秒:</p><ol class=""><li id="cad2" class="ma mb in jx b jy jz kc kd kg mc kk md ko me ks mf mg mh mi bi translated">调用<code class="fe kt ku kv kw b">Date</code>上的<code class="fe kt ku kv kw b">getSeconds()</code>方法来获得秒数。</li><li id="9fda" class="ma mb in jx b jy mj kc mk kg ml kk mm ko mn ks mf mg mh mi bi translated">减去秒。</li><li id="1712" class="ma mb in jx b jy mj kc mk kg ml kk mm ko mn ks mf mg mh mi bi translated">将减法的结果传递给<code class="fe kt ku kv kw b">setSeconds()</code>方法。</li></ol><p id="b26e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如:</p><pre class="mo mp mq mr gt ms kw mt mu aw mv bi"><span id="8514" class="mw ky in kw b gy mx my l mz na">function subtractSeconds(date, seconds) {<br/>  date.setSeconds(date.getSeconds() - seconds);</span><span id="963f" class="mw ky in kw b gy nb my l mz na">  return date;<br/>}</span><span id="e87d" class="mw ky in kw b gy nb my l mz na">// July 10, 2022 at 5:35:40 pm<br/>const date = new Date('2022-07-10T17:35:40.000Z');</span><span id="db04" class="mw ky in kw b gy nb my l mz na">const newDate = subtractSeconds(date, 10);</span><span id="5136" class="mw ky in kw b gy nb my l mz na">// July 10, 2022 at 5:35:30 pm<br/>console.log(newDate); // 2022-07-10T17:35:30.000Z</span></pre><p id="104c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们的<code class="fe kt ku kv kw b">subtractSeconds()</code>函数接受一个<code class="fe kt ku kv kw b">Date</code>对象和要减去的秒数作为参数。它返回减去秒数后的同一个<code class="fe kt ku kv kw b">Date</code>对象。</p><p id="0770" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Date <a class="ae nc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getSeconds" rel="noopener ugc nofollow" target="_blank"> getSeconds() </a>方法返回一个介于<code class="fe kt ku kv kw b">0</code>和<code class="fe kt ku kv kw b">59</code>之间的数字，表示特定<code class="fe kt ku kv kw b">Date</code>的秒。</p><p id="6727" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Date <a class="ae nc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/setSeconds" rel="noopener ugc nofollow" target="_blank"> setSeconds() </a>方法将<code class="fe kt ku kv kw b">Date</code>的秒数设置为指定的数字。</p><p id="9ef4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果我们减去的秒数减少了<code class="fe kt ku kv kw b">Date</code>对象的分钟、小时、日、月或年，<code class="fe kt ku kv kw b">setHours()</code>会自动更新<code class="fe kt ku kv kw b">Date</code>信息以反映这一点。</p><pre class="mo mp mq mr gt ms kw mt mu aw mv bi"><span id="e595" class="mw ky in kw b gy mx my l mz na">function subtractSeconds(date, seconds) {<br/>  date.setSeconds(date.getSeconds() - seconds);</span><span id="1684" class="mw ky in kw b gy nb my l mz na">  return date;<br/>}</span><span id="5378" class="mw ky in kw b gy nb my l mz na">// July 10, 2022 at 5:20:00 pm<br/>const date = new Date('2022-07-10T17:20:00.000Z');</span><span id="058c" class="mw ky in kw b gy nb my l mz na">const newDate = subtractSeconds(date, 130);</span><span id="3ac1" class="mw ky in kw b gy nb my l mz na">// July 10, 2022 at 5:17:50 pm<br/>console.log(newDate); // 2022-07-10T17:17:50.000Z</span></pre><p id="99d0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本例中，将<code class="fe kt ku kv kw b">Date</code>的秒减少<code class="fe kt ku kv kw b">130</code>将分钟减少<code class="fe kt ku kv kw b">3</code>并将秒设置为<code class="fe kt ku kv kw b">50</code>。</p><h2 id="d292" class="mw ky in bd kz nd ne dn ld nf ng dp lh kg nh ni ll kk nj nk lp ko nl nm lt nn bi translated">避免副作用</h2><p id="aca6" class="pw-post-body-paragraph jv jw in jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated"><code class="fe kt ku kv kw b">setSeconds()</code>方法改变了它所调用的<code class="fe kt ku kv kw b">Date</code>对象。这给我们的<code class="fe kt ku kv kw b">subtractSeconds()</code>函数带来了一个副作用。为了避免修改传递的，并创建一个纯函数，制作一个<code class="fe kt ku kv kw b">Date</code>的副本并在这个副本上调用<code class="fe kt ku kv kw b">setSeconds()</code>，而不是原始的。</p><pre class="mo mp mq mr gt ms kw mt mu aw mv bi"><span id="e524" class="mw ky in kw b gy mx my l mz na">function subtractSeconds(date, seconds) {<br/>  // make copy with Date() constructor<br/>  const dateCopy = new Date(date);</span><span id="f29c" class="mw ky in kw b gy nb my l mz na">  dateCopy.setSeconds(date.getSeconds() - seconds);</span><span id="cf6d" class="mw ky in kw b gy nb my l mz na">  return dateCopy;<br/>}</span><span id="2dc4" class="mw ky in kw b gy nb my l mz na">// July 10, 2022 at 5:35:40 pm<br/>const date = new Date('2022-07-10T17:35:40.000Z');</span><span id="05ed" class="mw ky in kw b gy nb my l mz na">const newDate = subtractSeconds(date, 10);</span><span id="9316" class="mw ky in kw b gy nb my l mz na">// July 10, 2022 at 5:35:30 pm<br/>console.log(newDate); // 2022-07-10T17:35:30.000Z</span><span id="0ef5" class="mw ky in kw b gy nb my l mz na">// original not modified<br/>console.log(date); // 2022-07-10T17:35:40.000Z</span></pre><p id="44b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">提示:</strong>不修改外部状态的函数(即纯函数)往往更容易预测，也更容易推理，因为它们对于特定的输入总是给出相同的输出。这使得限制代码中副作用的数量成为一个很好的实践。</p><h1 id="9b71" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">2.date-fns 亚秒()函数</h1><p id="df3f" class="pw-post-body-paragraph jv jw in jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">或者，我们可以使用<a class="ae nc" href="https://www.npmjs.com/package/date-fns" rel="noopener ugc nofollow" target="_blank"> date-fns </a> NPM 包中的<code class="fe kt ku kv kw b">subSeconds()</code>函数，从<code class="fe kt ku kv kw b">Date</code>中快速减去秒。它的工作原理类似于我们的纯<code class="fe kt ku kv kw b">subtractSeconds()</code>函数。</p><pre class="mo mp mq mr gt ms kw mt mu aw mv bi"><span id="7043" class="mw ky in kw b gy mx my l mz na">import { subSeconds } from 'date-fns';</span><span id="8b44" class="mw ky in kw b gy nb my l mz na">// July 10, 2022 at 5:35:40 pm<br/>const date = new Date('2022-07-10T17:35:40.000Z');</span><span id="3568" class="mw ky in kw b gy nb my l mz na">const newDate = subSeconds(date, 10);</span><span id="95fb" class="mw ky in kw b gy nb my l mz na">// July 10, 2022 at 5:35:30 pm<br/>console.log(newDate); // 2022-07-10T17:35:30.000Z</span><span id="258c" class="mw ky in kw b gy nb my l mz na">// original not modified<br/>console.log(date); // 2022-07-10T17:35:40.000Z</span></pre></div><div class="ab cl no np hr nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ig ih ii ij ik"><p id="f69d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nv">原载于</em><a class="ae nc" href="https://cbdev.link/19df44" rel="noopener ugc nofollow" target="_blank"><em class="nv"/></a></p><h1 id="cef7" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">JavaScript 做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph jv jw in jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">一本关于 JavaScript 微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae nc" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank">报名</a>立即免费领取一份。</p></div></div>    
</body>
</html>