<html>
<head>
<title>Build Your Personal Crypto Watcher in 15 Mins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 15 分钟内建立您的个人加密监视器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/3-tools-5-steps-your-personal-crypto-watcher-heres-how-in-15-mins-c3a24ed48218?source=collection_archive---------5-----------------------#2021-12-04">https://blog.devgenius.io/3-tools-5-steps-your-personal-crypto-watcher-heres-how-in-15-mins-c3a24ed48218?source=collection_archive---------5-----------------------#2021-12-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="e6cc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你正在读这篇文章，很可能你和我一样是一个秘密投资者。我们都知道密码价格在短时间内波动很大，有时我们会错过交易的好机会。</p><p id="7795" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在撰写本文时，比特币的估值为:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/7615ea9ef5f727fb048263d98675f288.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*Df7OpT_mgHWkSyYZEZ8wBQ.png"/></div></figure><p id="ce30" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可能认为这是一个买入的机会。或者，您可能希望价格更低，例如 55，000 美元(11 月 26 日发生过一次)。但是，如果你因为价格的波动性而错过了价格再次下跌的好时机，该怎么办呢？这篇文章分享了我个人关注加密价格并尽快得到通知的方法。本文末尾的 GitHub 中的代码已经开源。如果您想复制一个，估计最多需要 15 分钟。</p><h1 id="1808" class="kq kr in bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">3 个工具</h1><p id="b65d" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">关于我自己的有趣事实，我是一个 Windows 用户，因为我出生。我使用的第一个工具是 Windows 内置的<strong class="jm io">任务调度器</strong>。因此，如果你是 MacOS 或 Linux 用户，你可能需要寻找替代品。第二，<strong class="jm io"> Python </strong>作为编程语言来开发我们的程序。如果你没有，你需要 Python 安装在<a class="ae lt" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">这里</strong> </a>。第三，<strong class="jm io"> pip </strong>是一个 Python 包助手，它帮助我们安装所有依赖的库。这里 可以安装<a class="ae lt" href="https://pip.pypa.io/en/stable/installation/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">。</strong></a></p><h1 id="1de4" class="kq kr in bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">5 个步骤</h1><h2 id="ab1b" class="lu kr in bd ks lv lw dn kw lx ly dp la jv lz ma le jz mb mc li kd md me lm mf bi translated">1 —决定密码</h2><p id="174e" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">有大量的加密货币可供你投资。对我来说，我是一个投资者，跟随主流，专注于“大”密码，包括 BTC，瑞士联邦理工学院和阿达。你可以选择任何你想要的，只要记下他们的票。</p><h2 id="9c2b" class="lu kr in bd ks lv lw dn kw lx ly dp la jv lz ma le jz mb mc li kd md me lm mf bi translated">2 —获取信息</h2><p id="b6ec" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">这是编码真正开始的地方。我们将使用 python 库<a class="ae lt" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" rel="noopener ugc nofollow" target="_blank"> Beautiful Soup </a>和<a class="ae lt" href="https://docs.python-requests.org/en/latest/" rel="noopener ugc nofollow" target="_blank">请求</a>从<a class="ae lt" href="https://sg.finance.yahoo.com/" rel="noopener ugc nofollow" target="_blank"> YahooFinance </a>中获取实时价格。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="2a13" class="lu kr in mh b gy ml mm l mn mo">def scrape(url):<br/>    r = requests.get(url, headers=headers)<br/>    data = r.content<br/>    soup = BeautifulSoup(data, 'lxml')<br/>    return soup</span><span id="5c2d" class="lu kr in mh b gy mp mm l mn mo">def find_real_time_price(crypto):<br/>    yahoo_url = f"https://sg.finance.yahoo.com/quote/{crypto}-USD?p={crypto}-USD"<br/>    soup = scrape(yahoo_url)<br/>    price = soup.find('fin-streamer', attrs={'class': 'Fw(b) Fz(36px) Mb(-4px) D(ib)'})<br/>    real_time_prices[crypto] = format_price(price.text)<br/>    print(real_time_prices)</span></pre><p id="dcad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的代码中，<em class="mq">find _ real _ time _ price(crypto)</em>接收 crypto ticker 并传递给 YahooFinance url。使用 url，我们将以“lxml”的形式抓取该页面上的所有内容。然后，为了找到价格，我们将找到一个 web 元素'<strong class="jm io"> fin-streamer </strong>，其属性'<strong class="jm io"> class </strong>'为'<strong class="jm io">Fw(b)Fz(36px)Mb(-4px)D(IB)</strong>'。你可能对此感到困惑，但这只是一个 css 选择器方法，从网页中获取所需的数据。然后，我们从这个元素的文本字段中获取价格。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/642ba6ee275854a82372893a3e50af23.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*mQB-qTiA0A5P0Xjo8RhCRg.png"/></div></div><figcaption class="mw mx gj gh gi my mz bd b be z dk translated">BTC/美元价格的 Web 元素</figcaption></figure><h2 id="2a50" class="lu kr in bd ks lv lw dn kw lx ly dp la jv lz ma le jz mb mc li kd md me lm mf bi translated">3 —决定交易逻辑</h2><p id="a671" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">我不像其他人那样有数据科学的专业知识，他们做大量的研究，计算标准偏差等复杂的术语来决定是买还是卖。我的目标是长期持有。我的策略相当简单:如果实时价格下跌到过去 7 天平均价格的一定百分比，我会考虑买入。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="4ab6" class="lu kr in mh b gy ml mm l mn mo">def decide_notification(crypto):<em class="mq"><br/>    </em>seven_day_avg = calculate_seven_day_avg(crypto)<br/>    if crypto == 'ADA':<br/>        if real_time_prices[crypto] &lt; seven_day_avg * 0.85:<br/>            send_notification(crypto, real_time_prices[crypto], seven_day_avg)<br/>    else:<br/>        if real_time_prices[crypto] &lt; seven_day_avg * 0.92:<br/>            send_notification(crypto, real_time_prices[crypto], seven_day_avg)</span></pre><p id="9b24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的代码所做的是，计算过去 7 天的平均值，如果是 ADA，并且实时价格是 7 天平均值的 85%(下降 15%)，则向我发送通知。如果是 ETH、BTC 或其他货币，现在是 7 天平均值的 92%(下跌 8%)，也给我发通知。您可以在这里自定义自己的策略。</p><h2 id="461a" class="lu kr in bd ks lv lw dn kw lx ly dp la jv lz ma le jz mb mc li kd md me lm mf bi translated">4-发送通知</h2><p id="1940" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">您可以通过多种方式向自己发送通知，包括聊天工具、电子邮件和日历事件。就我而言，我喜欢使用 Gmail 接收通知，最可爱的是 Gmail 有一个功能，你可以为你的定制应用程序生成应用程序密码。你需要在这里生成你的<a class="ae lt" href="https://support.google.com/mail/answer/185833?hl=en" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"/></a>。使用应用程序密码，您现在可以发送自定义通知:</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="59c2" class="lu kr in mh b gy ml mm l mn mo">def send_notification(crypto, current_price, seven_day_avg):<br/>    port = 465<br/>    smtp_server = 'smtp.gmail.com'<br/><br/>    drop = (seven_day_avg - current_price) / seven_day_avg<br/>    drop = '{:.2f}'.format(drop * 100)<br/><br/>    seven_day_avg_str = "{:.2f}".format(seven_day_avg)<br/><br/>    message = MIMEMultipart('mixed')<br/>    message['From'] = &lt;YourEmailAddress&gt;<br/>    message['To'] = &lt;YourEmailAddress&gt;<br/>    message['Subject'] = f'New {crypto}/USD Hits'<br/>    body = f'{crypto} has hit {current_price} USD with 7 - day average {seven_day_avg_str} USD with drop of {drop} %.'<br/>    body = MIMEText(body, 'plain')<br/>    message.attach(body)<br/>    message = message.as_string()<br/><br/>    try:<br/>        context = ssl.create_default_context()<br/>        with smtplib.SMTP_SSL(smtp_server, port, context=context) as server:<br/>            server.login(&lt;YourEmailAddress&gt;, &lt;YourAppPassword&gt;)<br/>            server.sendmail(&lt;YourEmailAddress&gt;, [&lt;YourEmailAddress&gt;], message)<br/>        print('-' * 50)<br/>        print("Email Notification -&gt; Message has been sent.")<br/>        print('-' * 50)<br/>    except Exception as e:<br/>        print(e)</span></pre><p id="affb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以下是几天前和今天我收到的一些截图，当时这些密码确实达到了预期的基准:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi na"><img src="../Images/da99dfcf8d8e7d7e7806f0c95c3d6200.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qOhmzlkRTh1xox4_CSj3Tw@2x.jpeg"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi na"><img src="../Images/f7f614a1b1ca71cd3057e4bd770ef397.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OTct3a_4rznW1LnefqBs5A@2x.jpeg"/></div></div></figure><h2 id="d50b" class="lu kr in bd ks lv lw dn kw lx ly dp la jv lz ma le jz mb mc li kd md me lm mf bi translated">5 —自动化</h2><p id="8f54" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">最后一步，Windows 用户，打开<strong class="jm io">任务调度器</strong>并选择<strong class="jm io">创建任务… </strong></p><p id="bfcd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io">常规</strong>选项卡中，您可以自定义自己的任务名称，并选择登录配置等基本配置来运行任务。我在那里没怎么改变。</p><p id="d781" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io">触发</strong>选项卡中，选择您重复任务的方式，每日、每周或每月、重复频率和重复频率。我的方法是每天间隔 30 分钟重复这个任务(如果你在监视一个更不稳定的密码，你可以相应地缩短时间)。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/2ec4aea1493f9ad1bbe13635d759370e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*BIhYGMOPot0J0-SIsekTlw.png"/></div></figure><p id="07e6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在“操作”选项卡中，选择“启动程序”。在程序/脚本中，输入您安装的<strong class="jm io">python.exe</strong>的路径。对于我自己，我把我的 python 安装在我的<em class="mq"> C:\Program Files </em>中。在“添加参数”中，输入包含上述代码的 python 文件的存储路径，例如<em class="mq">C:\ Users \ Desktop \ crypto _ watcher \ main . py .</em></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nc"><img src="../Images/b7aca76c457c6159dca0b176c70e20d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*qutmniiHtNfnPHKn1ctVeA.png"/></div></div></figure><p id="3d0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在“条件和设置”选项卡中，您也可以自定义您的设置。我选择在交流电源和睡眠时间启动程序。我在我的设置标签里没怎么改动。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nd"><img src="../Images/8b46bb4ce66e6b1dd1f17f68158c82db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*v7RZRI1cdKLk6Rdxgg_Y0Q.png"/></div></div></figure><p id="c331" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">点击确定，然后<strong class="jm io">嘣！你得到了你的实时加密价格监视器！</strong></p><h2 id="4a10" class="lu kr in bd ks lv lw dn kw lx ly dp la jv lz ma le jz mb mc li kd md me lm mf bi translated">遗言</h2><p id="2ead" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">这只是一个例子，你可以利用 Python 来实现你的交易逻辑，利用 Windows 来自动化你的程序。不仅是 cryptos，你也可以对普通股票、ETF 或其他金融产品实现同样的事情。使用 Python 的 web 抓取，您不仅可以抓取价格，还可以抓取公司描述、新闻和财务摘要，用于您的个人研究目的。这为投资者打开了一扇新的大门，他们可以获得实时信息，做出明智的决策，并转移工作量，让机器为您工作！</p><h2 id="772a" class="lu kr in bd ks lv lw dn kw lx ly dp la jv lz ma le jz mb mc li kd md me lm mf bi translated">开源代码库</h2><p id="28cb" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">此处的 为项目代码<a class="ae lt" href="https://github.com/wdn0612/crypto_watcher" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">。</strong></a></p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="b3df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望这篇文章对你有所帮助。如果你像我一样渴望学习一些与技术相关的东西，或者定期反思工作和生活，请关注我的频道，了解我在日常工作和生活中的小灵感和总结。</p><h2 id="ea5a" class="lu kr in bd ks lv lw dn kw lx ly dp la jv lz ma le jz mb mc li kd md me lm mf bi translated">放弃</h2><p id="c5a6" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">以上内容仅用于教育目的。没有什么构成专业/财务建议。</p></div></div>    
</body>
</html>