<html>
<head>
<title>Combine -101: Introduction to Basics &amp; Terms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">联合收割机-101:基础和术语介绍</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/combine-101-introduction-to-basics-terms-a21106cdd142?source=collection_archive---------4-----------------------#2022-01-30">https://blog.devgenius.io/combine-101-introduction-to-basics-terms-a21106cdd142?source=collection_archive---------4-----------------------#2022-01-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/9000a368225afab572ce015cd08b271b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bnOjJu7_RnEV71ayklI2TA.png"/></div></div></figure><div class=""/><p id="f7d8" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于这篇文章，我的目的是熟悉并学习创建组合框架的最常用术语的基础知识。当我们完成了第一步，我们将能够更容易地学习这个框架的细节。让我们从一些定义部分开始！(也许是最无聊的部分……是的，不要失去动力，继续读下去！)</p><p id="88ab" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，Combine 是苹果在 WWDC2019 上宣布的一个新框架。Combine 是苹果自己的框架，它可以处理/帮助 IOS 开发者的几乎所有任务。哇，太好了，但是什么？我的意思是，Combine 是非常动态和强大的，因为有了它，处理委托、通知、回调、闭包等变得更加容易。</p><blockquote class="kt ku kv"><p id="55f1" class="jv jw kw jx b jy jz ka kb kc kd ke kf kx kh ki kj ky kl km kn kz kp kq kr ks ig bi translated">Combine 框架提供了一个声明性的 Swift API，用于随时处理值。这些值可以表示多种异步事件。Combine 声明<em class="iy">发布者</em>公开可以随时间变化的值，声明<em class="iy">订阅者</em>从发布者那里接收这些值。来源可用<a class="ae la" href="https://developer.apple.com/documentation/combine" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></blockquote><p id="4e67" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当然，很好。为什么我们需要使用 Combine FW 而不是发送/观察通知？以下是答案:</p><figure class="lc ld le lf gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi lb"><img src="../Images/62d325a3df13b75199567c7ff2d44f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7_1aXbcOYG91MuLG5eCZEw.png"/></div></div></figure><p id="2202" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">联合有 3 个核心概念:出版商，运营商，订户。我看了很多和 Combine 框架相关的东西。作为介绍，我首先试图理解出版商、运营商和订户的术语和责任。</p><figure class="lc ld le lf gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi lg"><img src="../Images/f8a5888fffc4a7cc0c5f613561ff9a7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bhxPqVwefgKjFo9MB8MXqQ.png"/></div></div></figure><p id="1196" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如你在图表上看到的，这是对概念最简单的解释。让我们更深入:他们到底是什么，他们的责任是什么？</p><h2 id="ded9" class="lh li iy bd lj lk ll dn lm ln lo dp lp kg lq lr ls kk lt lu lv ko lw lx ly lz bi translated">出版商</h2><p id="4e77" class="pw-post-body-paragraph jv jw iy jx b jy ma ka kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated">发布者是一种协议，负责根据需求/请求随时将数据/值分发给注册方(例如一个或多个订户)。</p><p id="2ffc" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要做到这一点，要求是应该为发布者注册一个订阅。这意味着应该有请求/侦听器从发布者协议获取数据。</p><p id="771f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要定义一个发布者，需要两个相关的类型:输出和失败。</p><pre class="lc ld le lf gt mf mg mh mi aw mj bi"><span id="c351" class="lh li iy mg b gy mk ml l mm mn">AnyPublisher&lt;Output, Failure&gt;</span></pre><p id="a7c6" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> Output </strong>是一个通用的输出类型，它引用发布者发出的值。“出版商。“输出”是您发出的类型，它引用已发布的值。<br/> <strong class="jx iz">失败</strong>是发布者返回的一种错误形式。<br/> <strong class="jx iz">加成</strong>:如果用 Never 作为失败类型，表示永远不会失败。</p><p id="0bec" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">根据下面的示例，这意味着发布者将 Int 作为输出发出，并且不会失败。</p><pre class="lc ld le lf gt mf mg mh mi aw mj bi"><span id="2c23" class="lh li iy mg b gy mk ml l mm mn">Publisher&lt;Int, Never&gt;</span></pre><h2 id="f94d" class="lh li iy bd lj lk ll dn lm ln lo dp lp kg lq lr ls kk lt lu lv ko lw lx ly lz bi translated">经营者</h2><p id="56de" class="pw-post-body-paragraph jv jw iy jx b jy ma ka kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated">操作符是范围广泛的方法，它们执行某些操作，并使用发布者发出的值或事件(完成)来更改您正在处理的数据。</p><p id="a171" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">运算符总是有输入(上游)和输出(下游)。它们是“事件处理链”的基础。运算符的输入类型必须与发布者的类型匹配。</p><h2 id="e09c" class="lh li iy bd lj lk ll dn lm ln lo dp lp kg lq lr ls kk lt lu lv ko lw lx ly lz bi translated">订阅者</h2><p id="14dc" class="pw-post-body-paragraph jv jw iy jx b jy ma ka kb kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated">订阅者是从发布者接收输入的协议。每个订阅都以订阅者结束。</p><blockquote class="kt ku kv"><p id="45c0" class="jv jw kw jx b jy jz ka kb kc kd ke kf kx kh ki kj ky kl km kn kz kp kq kr ks ig bi translated">联合收割机在<code class="fe mo mp mq mg b"><a class="ae la" href="https://developer.apple.com/documentation/combine/publisher" rel="noopener ugc nofollow" target="_blank">Publisher</a></code>类型上提供<code class="fe mo mp mq mg b"><a class="ae la" href="https://developer.apple.com/documentation/combine/publisher/sink(receivecompletion:receivevalue:)" rel="noopener ugc nofollow" target="_blank">sink</a></code>和<code class="fe mo mp mq mg b"><a class="ae la" href="https://developer.apple.com/documentation/combine/publisher/assign(to:on:)" rel="noopener ugc nofollow" target="_blank">assign</a></code>用户作为操作员；</p></blockquote><ul class=""><li id="6a8f" class="mr ms iy jx b jy jz kc kd kg mt kk mu ko mv ks mw mx my mz bi translated"><code class="fe mo mp mq mg b"><a class="ae la" href="https://developer.apple.com/documentation/combine/publisher/sink(receivecompletion:receivevalue:)" rel="noopener ugc nofollow" target="_blank">sink(receiveCompletion:receiveValue:)</a></code>在你的代码上提供基于闭包的行为，这样你将能够接收值和完成。为了更好地理解，让我们检查函数的签名。</li></ul><figure class="lc ld le lf gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi na"><img src="../Images/684f53150b5b455373e961fb3bb24959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rSKpwsEY_7zzPDmiA3q8hg.png"/></div></div></figure><ul class=""><li id="61d3" class="mr ms iy jx b jy jz kc kd kg mt kk mu ko mv ks mw mx my mz bi translated"><code class="fe mo mp mq mg b"><a class="ae la" href="https://developer.apple.com/documentation/combine/publisher/assign(to:on:)" rel="noopener ugc nofollow" target="_blank">assign(to:on:)</a></code>每当订阅者收到输出属性时，它就被写入一个变量并通过 key-path 存储。例如，如果 UI 配置需要最近收到的变量，那么访问和设置 UI 就很容易。</li></ul><blockquote class="kt ku kv"><p id="95e5" class="jv jw kw jx b jy jz ka kb kc kd ke kf kx kh ki kj ky kl km kn kz kp kq kr ks ig bi translated"><a class="ae la" href="https://www.appypie.com/swift-keypath-how-to" rel="noopener ugc nofollow" target="_blank"> <strong class="jx iz"> WTF 关键路径？</strong></a><strong class="jx iz"><br/></strong>Swift 中的关键路径是一种存储对属性的引用的方式，与引用属性的值本身相反。这就像处理属性的名称，而不是它的值。</p></blockquote><p id="716e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了更好地理解，让我们检查函数的签名。</p><figure class="lc ld le lf gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nb"><img src="../Images/1f0d305260ad497cc4662e4edfa128fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4j--KZKuve6AS1BywIvPlA.png"/></div></div></figure><p id="e5b6" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您觉得自己还不熟悉联合收割机，请不要担心。这很正常，但是你应该知道这只是开始前的情况。这是关于阅读，试图理解的条款，并在所有的概念，然后尝试如何实现组合。首先，我们先来看一个概述:</p><figure class="lc ld le lf gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nc"><img src="../Images/784b2d438c372d786154663f6864d01a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zZhQxBKi85_AQWBzzKHP2A.png"/></div></div></figure><ul class=""><li id="0048" class="mr ms iy jx b jy jz kc kd kg mt kk mu ko mv ks mw mx my mz bi translated">Publisher 是一种协议，它定义需求并发布值和事件。</li><li id="7a67" class="mr ms iy jx b jy nd kc ne kg nf kk ng ko nh ks mw mx my mz bi translated">Publisher 可以发布零个或多个值，但只包含一个完成事件(错误或成功状态)。</li><li id="1956" class="mr ms iy jx b jy nd kc ne kg nf kk ng ko nh ks mw mx my mz bi translated">使用<code class="fe mo mp mq mg b">just</code>,您可以从单个值创建一个发布者。</li><li id="b043" class="mr ms iy jx b jy nd kc ne kg nf kk ng ko nh ks mw mx my mz bi translated">如果 publisher 发布完成事件，则该事件已完成，不能再发布。</li><li id="a05f" class="mr ms iy jx b jy nd kc ne kg nf kk ng ko nh ks mw mx my mz bi translated">订阅者是一种协议，它定义了能够从发布者接收输入的要求。</li><li id="d733" class="mr ms iy jx b jy nd kc ne kg nf kk ng ko nh ks mw mx my mz bi translated">Sink 是一种用闭包来附加订户的方法。</li><li id="0ee5" class="mr ms iy jx b jy nd kc ne kg nf kk ng ko nh ks mw mx my mz bi translated">您可以使用<code class="fe mo mp mq mg b">sink</code>创建一个订户。</li><li id="a52e" class="mr ms iy jx b jy nd kc ne kg nf kk ng ko nh ks mw mx my mz bi translated">只要发布者发布-&gt;称为无限制需求，接收器将继续接收值。</li></ul><p id="503b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于未来的文章，我的目的是更深入地结合 FW 的概念，写第一出版商，订户和玩主题。</p><p id="087b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读！</p></div></div>    
</body>
</html>