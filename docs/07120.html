<html>
<head>
<title>Fetch Data from a Real API — React / JS- [Complete Step By Step]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从真实的 API 获取数据—React/JS-[逐步完成]</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/fetch-data-from-a-real-api-react-js-f962da8af24a?source=collection_archive---------1-----------------------#2022-02-28">https://blog.devgenius.io/fetch-data-from-a-real-api-react-js-f962da8af24a?source=collection_archive---------1-----------------------#2022-02-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2b5f" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解我们如何使用 React/JS 从现实世界的 API 中获取真实数据</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/0591a52b22f2954169b5c2e2139e293c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*tziBPr-MQm9rjlx4.jpg"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">使用 API 从 IMDB 数据库提取图像</figcaption></figure><h2 id="1e27" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">在 TMDB 上创建 API 键</h2><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="ca4e" class="ko kp in ll b gy lp lq l lr ls"><a class="ae lt" href="https://www.themoviedb.org/signup" rel="noopener ugc nofollow" target="_blank">https://www.themoviedb.org/signup</a></span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lu"><img src="../Images/aed0c44f4082e6a5e71c0b0d8f5acb3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4BgSTWttlHx_7Tca7t6swA.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">登记</figcaption></figure><blockquote class="lz ma mb"><p id="69b8" class="mc md me mf b mg mh jo mi mj mk jr ml mm mn mo mp mq mr ms mt mu mv mw mx my ig bi translated">创建帐户后，请验证并立即登录:</p></blockquote><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="c67e" class="ko kp in ll b gy lp lq l lr ls"><a class="ae lt" href="https://www.themoviedb.org/login" rel="noopener ugc nofollow" target="_blank">https://www.themoviedb.org/login</a></span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mz"><img src="../Images/f4e5c00566c913bc8062850ba3834f83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tcdMXmMYOMKiwXytS6_H0Q.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">验证后登录帐户</figcaption></figure><blockquote class="lz ma mb"><p id="b103" class="mc md me mf b mg mh jo mi mj mk jr ml mm mn mo mp mq mr ms mt mu mv mw mx my ig bi translated">获取我们的 API 密钥:配置文件和设置&gt; API</p></blockquote><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="a2fb" class="ko kp in ll b gy lp lq l lr ls"><a class="ae lt" href="https://www.themoviedb.org/settings/api" rel="noopener ugc nofollow" target="_blank">https://www.themoviedb.org/settings/api</a></span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi na"><img src="../Images/be02bd3d67690164e4bc45c76660b751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SK9bfjR4ali7fO_o66KWxw.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">API 密钥</figcaption></figure><blockquote class="lz ma mb"><p id="663b" class="mc md me mf b mg mh jo mi mj mk jr ml mm mn mo mp mq mr ms mt mu mv mw mx my ig bi translated">现在我们得到了 API 密匙，我们将从数据库中找出<code class="fe nb nc nd ll b">popular</code>部电影。</p></blockquote><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="0634" class="ko kp in ll b gy lp lq l lr ls"><a class="ae lt" href="https://developers.themoviedb.org/3/getting-started/introduction" rel="noopener ugc nofollow" target="_blank">https://developers.themoviedb.org/3/getting-started/introduction</a></span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ne"><img src="../Images/c532d0db325ba66aede629bd60b9439a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FbSem_ZziEZbQU6ZuPv8Fg.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">获取热门类别电影</figcaption></figure><blockquote class="lz ma mb"><p id="2101" class="mc md me mf b mg mh jo mi mj mk jr ml mm mn mo mp mq mr ms mt mu mv mw mx my ig bi translated">替换为您的 API 密钥</p></blockquote><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="851f" class="ko kp in ll b gy lp lq l lr ls"><a class="ae lt" href="https://developers.themoviedb.org/3/movies/get-popular-movies" rel="noopener ugc nofollow" target="_blank">https://developers.themoviedb.org/3/movies/get-popular-movies</a></span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nf"><img src="../Images/f00e9dcb697ddac847e88cdcc7e2f2a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X8Yv0sHD8E2h6kUEphcimA.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">替换为我们的 API 密钥</figcaption></figure><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="a44c" class="ko kp in ll b gy lp lq l lr ls">E.g "https://api.themoviedb.org/3/movie/popular?api_key=19dedc791dc255XXXXXXXXXXXXXXXXXX&amp;language=en-US&amp;page=1"</span></pre><p id="d8cd" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">现在我们的目标是抓住那些<strong class="mf io">电影</strong>，所以让我们开始项目:我们将在这里创建<strong class="mf io">反应项目</strong></p><h2 id="b830" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">设置项目</h2><p id="2fb1" class="pw-post-body-paragraph mc md in mf b mg ng jo mi mj nh jr ml kx ni mo mp lb nj ms mt lf nk mw mx my ig bi translated">让我们使用命令提示符创建一个应用程序</p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="ca83" class="ko kp in ll b gy lp lq l lr ls">CMD &gt; npx create-react-app movies </span></pre><p id="0db4" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">现在转到电影文件夹…</p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="f3e1" class="ko kp in ll b gy lp lq l lr ls">cd movies</span></pre><p id="3267" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">请注意，我已经删除了我们项目不需要的文件<code class="fe nb nc nd ll b">src</code>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/6fde734ad7bb36ec13006b114e1ec6f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/1*qTQjUHOIYAbGv5ZZllPw8A.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">修改的项目</figcaption></figure><p id="df3f" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">让我们修改我们的代码:</p><p id="4bb3" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io"> index.js </strong></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="d068" class="ko kp in ll b gy lp lq l lr ls">import React from "react";<br/>import ReactDOM from "react-dom";<br/>import "./index.css";<br/>import App from "./App";</span><span id="33e9" class="ko kp in ll b gy nm lq l lr ls">ReactDOM.render(&lt;App /&gt;, document.getElementById("root"));</span></pre><p id="cda1" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io"> App.js </strong></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="701f" class="ko kp in ll b gy lp lq l lr ls">import React from 'react';</span><span id="1585" class="ko kp in ll b gy nm lq l lr ls">const App = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h1&gt;Hello App Component&lt;/h1&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="61db" class="ko kp in ll b gy nm lq l lr ls">export default App;</span></pre><p id="9929" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io">第一次运行我们修改过的项目:</strong></p><p id="9817" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><code class="fe nb nc nd ll b">npm start</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/45afec07a73b6055aa87c114d916a255.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*zeoVqwkBSuWdmV4R_LZBQA.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">输出</figcaption></figure><p id="d5d1" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">现在我们要使用 javascript 的<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" rel="noopener ugc nofollow" target="_blank"> <strong class="mf io"> fetch() </strong> </a> API 将电影提取到<strong class="mf io"> App.js </strong>组件中。我们将使用<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="noopener ugc nofollow" target="_blank"> <strong class="mf io">异步</strong> </a>和<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" rel="noopener ugc nofollow" target="_blank"> <strong class="mf io">等待</strong> </a>来处理<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous" rel="noopener ugc nofollow" target="_blank">异步</a>数据(<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank"> <strong class="mf io">承诺</strong> </a>)。</p><p id="8b11" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">让我们创建一个匿名函数来从 API 获取电影:</p><p id="be51" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">一旦流行电影被获取，它将被存储在一个名为“<strong class="mf io"> data </strong>的变量中。最后，来自 API 的数据需要转换成 JSON 格式，所以我们将把它转换成 JSON，并存储到一个名为'<strong class="mf io">电影</strong>'的变量中。请注意，来自服务器的消息不会同时处理这个问题，我们使用了<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="noopener ugc nofollow" target="_blank"> <strong class="mf io"> async </strong> </a>和<a class="ae lt" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" rel="noopener ugc nofollow" target="_blank"> <strong class="mf io"> await </strong> </a>关键字来确保等待，直到定义的任务被执行。</p><p id="4c0d" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">当页面加载您想要的 API 数据时，为了获取这些数据，我们将使用名为<a class="ae lt" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank"><strong class="mf io">use effect()</strong></a><strong class="mf io">的钩子。</strong></p><p id="0190" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">每当组件被渲染时，我们将使用 hook<a class="ae lt" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank"><strong class="mf io">use effect()</strong></a><strong class="mf io"/>，即当组件被渲染时，运行<strong class="mf io"> fetchPopular() </strong>函数<strong class="mf io">。写在 useEffect()末尾的空数组[]确保它只在第一次加载时运行，即当一部分状态被更新时，这个 useEffect 再次运行，这也有助于避免无限循环。</strong></p><blockquote class="lz ma mb"><p id="f049" class="mc md me mf b mg mh jo mi mj mk jr ml mm mn mo mp mq mr ms mt mu mv mw mx my ig bi translated">如果你熟悉 React 类生命周期方法，你可以认为 useEffect()钩子是<strong class="mf io">componentid mount</strong>、<strong class="mf io">componentid update</strong>和<strong class="mf io">componentid unmount</strong>的组合。</p></blockquote><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="8b6e" class="ko kp in ll b gy lp lq l lr ls">import React, { useEffect } from "react";<br/>import "./App.css";</span><span id="8e9d" class="ko kp in ll b gy nm lq l lr ls">const App = () =&gt; {<br/>  const url =<br/>    "<a class="ae lt" href="https://api.themoviedb.org/3/movie/popular?api_key=19dedc791dc255982eaf84be8a93012a&amp;language=en-US&amp;page=1" rel="noopener ugc nofollow" target="_blank">https://api.themoviedb.org/3/movie/popular?api_key=19dedc791dc255982eaf84be8a93012a&amp;language=en-US&amp;page=1</a>";</span><span id="f5ca" class="ko kp in ll b gy nm lq l lr ls">useEffect(() =&gt; {<br/>    fetchPopular();<br/>  },[]);</span><span id="adeb" class="ko kp in ll b gy nm lq l lr ls">const fetchPopular = async () =&gt; {<br/>    const data = await fetch(url);<br/>    const movies = await data.json();<br/>    console.log(movies);<br/>  };</span><span id="7dd7" class="ko kp in ll b gy nm lq l lr ls">return (<br/>    &lt;div className="App"&gt;<br/>      &lt;h1&gt;Hello App Component&lt;/h1&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="b95b" class="ko kp in ll b gy nm lq l lr ls">export default App;</span></pre><p id="ce2c" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">→您可以在我们浏览器的控制台中看到电影输出。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi no"><img src="../Images/f61c8096845f014acb1bc4ed9b1647f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RU3ivlsbkFsXaJ4kohufvw.png"/></div></div></figure><p id="3053" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">→现在再次将数据存储在某个地方，这里我们存储在一小段状态中，这需要一个名为<a class="ae lt" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank"><strong class="mf io">useState()</strong></a><strong class="mf io">的钩子。</strong></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="c661" class="ko kp in ll b gy lp lq l lr ls">const [popular, setPopular] = useState([]);</span></pre><p id="4db0" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">这里的<strong class="mf io">流行的</strong>是变量，<strong class="mf io">设置流行的</strong>实际上是一个可以用来修改数据的函数。我们从电影数据库中获取的数据是以对象的<strong class="mf io">数组的形式存在的(参见控制台)，所以空数组<strong class="mf io"> [] </strong>在 useState()中传递。</strong></p><blockquote class="lz ma mb"><p id="9536" class="mc md me mf b mg mh jo mi mj mk jr ml mm mn mo mp mq mr ms mt mu mv mw mx my ig bi translated">设置结果中可用的电影列表，因为结果对象拥有所有数据(参见控制台):</p></blockquote><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="5702" class="ko kp in ll b gy lp lq l lr ls">const fetchPopular = async () =&gt; {<br/>    const data = await fetch(url);<br/>    const movies = await data.json();<br/>    console.log(movies);<br/>    setPopular(movies.results);<br/>  };</span></pre><p id="0f3b" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">使用 map()循环访问热门电影以获取 movies.results 的所有数据。这将映射并逐一返回每部电影。</p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="94c8" class="ko kp in ll b gy lp lq l lr ls">return (<br/>    &lt;div className="App"&gt;<br/>      &lt;h1&gt;Movies&lt;/h1&gt;<br/>      {popular.map(movie =&gt; {<br/>        return &lt;Movie /&gt;;<br/>      })}<br/>    &lt;/div&gt;<br/>  );</span></pre><p id="e271" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">首先，让我们创建一个电影组件。</p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="625c" class="ko kp in ll b gy lp lq l lr ls">// A component that return a Movie<br/>import React from "react";</span><span id="7feb" class="ko kp in ll b gy nm lq l lr ls">const Movie = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h5&gt;Title&lt;/h5&gt;<br/>      &lt;img src="" alt="" /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="3845" class="ko kp in ll b gy nm lq l lr ls">export default Movie;</span></pre><p id="d75c" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">如果一切都正确，我们应该像这样输出:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi np"><img src="../Images/64870a676ddb2006ef4ec20563c9fb9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gFCOtgAhurui0svKcl2yA.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">电影输出</figcaption></figure><p id="39a7" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">此外，如果我们检查控制台，它有一些数据。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/0abfb00ceff6085feab24424c47db518.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*jUrj8j70KolMUCu3HkhU-w.png"/></div></figure><p id="2c44" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">现在为了得到实际的输出，我们将使用<a class="ae lt" href="https://reactjs.org/docs/components-and-props.html" rel="noopener ugc nofollow" target="_blank"> <strong class="mf io">道具</strong> </a>来将数据从父组件传递到子组件。现在，我们必须将数据从父节点(App.js)发送到子节点(Movie.jsx ),因此我们将使用道具。</p><p id="15db" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated">当我们为每部电影获取不同的 id 时，我们使用了一个键，即<code class="fe nb nc nd ll b">key={ movie.id }</code></p><p id="e994" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io">发送数据:父(App.js)到子(movie . jsx)</strong><br/>movie = { movie }</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/3e72325a27384c2d1bee95529d1db959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*KQJe1u1ZYESjYElJaTO9yA.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">将数据发送到 Movie.jsx</figcaption></figure><p id="1355" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io">接收数据:Child (Movie.jsx) </strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ns"><img src="../Images/19f74f2088ab2d0e964a159010d3100d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pSBSPKyeA3laOPNVDrPhNQ.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi nt"><img src="../Images/3205a6785175ec09eb5efce03a1d56d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q-LzRCwYdvyTQaZhd4GvWA.png"/></div></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated">最终输出:从 API 接收的电影</figcaption></figure><p id="4cc6" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><em class="me">通过这种方式，我们成功地从电影数据库中获取了数据。</em></p><h1 id="96d4" class="nu kp in bd kq nv nw nx kt ny nz oa kw jt ob ju la jw oc jx le jz od ka li oe bi translated">参考代码:-</h1><p id="3ed3" class="pw-post-body-paragraph mc md in mf b mg ng jo mi mj nh jr ml kx ni mo mp lb nj ms mt lf nk mw mx my ig bi translated"><strong class="mf io"> index.js </strong></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="0e40" class="ko kp in ll b gy lp lq l lr ls">import React from "react";<br/>import ReactDOM from "react-dom";<br/>import "./index.css";<br/>import App from "./App";</span><span id="4433" class="ko kp in ll b gy nm lq l lr ls">ReactDOM.render(&lt;App /&gt;, document.getElementById("root"));</span></pre><p id="f2f1" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io"> App.js </strong></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="f879" class="ko kp in ll b gy lp lq l lr ls">import React, { useEffect, useState } from "react";<br/>import "./App.css";<br/>import Movie from "./Movie";</span><span id="18a5" class="ko kp in ll b gy nm lq l lr ls">const App = () =&gt; {<br/>  const url =<br/>    "<a class="ae lt" href="https://api.themoviedb.org/3/movie/popular?api_key=19dedc791dc255982eaf84be8a93012a&amp;language=en-US&amp;page=1" rel="noopener ugc nofollow" target="_blank">https://api.themoviedb.org/3/movie/popular?api_key=19dedc791dc255982eaf84be8a93012a&amp;language=en-US&amp;page=1</a>";</span><span id="b9a8" class="ko kp in ll b gy nm lq l lr ls">const [popular, setPopular] = useState([]);</span><span id="b00c" class="ko kp in ll b gy nm lq l lr ls">useEffect(() =&gt; {<br/>    fetchPopular();<br/>  }, []);</span><span id="3ca7" class="ko kp in ll b gy nm lq l lr ls">const fetchPopular = async () =&gt; {<br/>    const data = await fetch(url);<br/>    const movies = await data.json();<br/>    console.log(movies);<br/>    setPopular(movies.results);<br/>  };</span><span id="7585" class="ko kp in ll b gy nm lq l lr ls">return (<br/>    &lt;div className="App"&gt;<br/>      &lt;h1&gt;Movies&lt;/h1&gt;<br/>      &lt;div className="popular-movies"&gt;<br/>        {popular.map((movie) =&gt; {<br/>          return &lt;Movie key={movie.id} movie={movie} /&gt;;<br/>        })}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="4fef" class="ko kp in ll b gy nm lq l lr ls">export default App;</span></pre><p id="18b2" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io"> Movie.jsx </strong></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="977e" class="ko kp in ll b gy lp lq l lr ls">import React from "react";</span><span id="ba43" class="ko kp in ll b gy nm lq l lr ls">const Movie = ({movie}) =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h5&gt;{movie.title}&lt;/h5&gt;<br/>      &lt;img src={"<a class="ae lt" href="https://image.tmdb.org/t/p/w500" rel="noopener ugc nofollow" target="_blank">https://image.tmdb.org/t/p/w500</a>" + movie.backdrop_path} alt={movie.path} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="8a34" class="ko kp in ll b gy nm lq l lr ls">export default Movie;</span></pre><p id="0b0d" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io"> App.css </strong></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="cc21" class="ko kp in ll b gy lp lq l lr ls">.App {<br/>  text-align: center;<br/>}</span><span id="8931" class="ko kp in ll b gy nm lq l lr ls">.popular-movies {<br/>  display: grid;<br/>  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));<br/>  grid-column-gap: 1rem;<br/>  grid-row-gap: 2rem;<br/>}</span><span id="19b5" class="ko kp in ll b gy nm lq l lr ls">img {<br/>  width: 100%;<br/>  height: 30vh;<br/>  object-fit: cover;<br/>  border-radius: 1rem;<br/>  margin-bottom: 1rem;<br/>}</span></pre><p id="bdd0" class="pw-post-body-paragraph mc md in mf b mg mh jo mi mj mk jr ml kx mn mo mp lb mr ms mt lf mv mw mx my ig bi translated"><strong class="mf io"> index.css </strong></p><pre class="kd ke kf kg gt lk ll lm ln aw lo bi"><span id="994b" class="ko kp in ll b gy lp lq l lr ls">body {<br/>  margin: 5% 20%;<br/>}</span></pre><h1 id="02d1" class="nu kp in bd kq nv nw nx kt ny nz oa kw jt ob ju la jw oc jx le jz od ka li oe bi translated">结论:</h1><p id="a060" class="pw-post-body-paragraph mc md in mf b mg ng jo mi mj nh jr ml kx ni mo mp lb nj ms mt lf nk mw mx my ig bi translated">您只需学习如何使用 fetch() API 和 React 向现实世界的 API 公开。</p></div><div class="ab cl of og hr oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ig ih ii ij ik"><h1 id="b101" class="nu kp in bd kq nv om nx kt ny on oa kw jt oo ju la jw op jx le jz oq ka li oe bi translated"><strong class="ak">第二部分:按类别过滤电影</strong></h1><p id="20bf" class="pw-post-body-paragraph mc md in mf b mg ng jo mi mj nh jr ml kx ni mo mp lb nj ms mt lf nk mw mx my ig bi translated">接下来→</p><div class="or os gp gr ot ou"><a rel="noopener  ugc nofollow" target="_blank" href="/fetch-data-from-api-part-2-8c5a57ad93fd"><div class="ov ab fo"><div class="ow ab ox cl cj oy"><h2 class="bd io gy z fp oz fr fs pa fu fw im bi translated">从 API 获取数据—第 2 部分</h2><div class="pb l"><h3 class="bd b gy z fp oz fr fs pa fu fw dk translated">了解如何根据不同的类别筛选出电影。</h3></div><div class="pc l"><p class="bd b dl z fp oz fr fs pa fu fw dk translated">blog.devgenius.io</p></div></div><div class="pd l"><div class="pe l pf pg ph pd pi ki ou"/></div></div></a></div></div></div>    
</body>
</html>