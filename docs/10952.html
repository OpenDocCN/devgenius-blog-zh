<html>
<head>
<title>SwiftUI Tutorial: Using Picker in Menu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI 教程:在菜单中使用选择器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/swiftui-tutorial-using-picker-in-menu-516d642689f8?source=collection_archive---------2-----------------------#2022-12-10">https://blog.devgenius.io/swiftui-tutorial-using-picker-in-menu-516d642689f8?source=collection_archive---------2-----------------------#2022-12-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b6c9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在菜单中当前选中的项目上放置复选标记</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/93fefe3e35c58979a04aadf693517e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLjd93xZNiDDyVwgJP-Qyg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图一。</figcaption></figure><p id="6113" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这篇文章是我过去两个教程<a class="ae lr" rel="noopener ugc nofollow" target="_blank" href="/swiftui-tutorial-working-with-menu-2d19399a8f1c">使用菜单</a>和<a class="ae lr" href="https://medium.com/geekculture/swiftui-tutorial-working-with-picker-f3e68a0c2724" rel="noopener">使用选择器</a>的延续。</p><p id="4b91" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">除了<a class="ae lr" href="https://medium.com/dev-genius/swiftui-tutorial-working-with-buttons-ee3fdcfb8337" rel="noopener">按钮</a>，你还可以在菜单视图中使用<a class="ae lr" href="https://medium.com/geekculture/swiftui-tutorial-working-with-picker-f3e68a0c2724" rel="noopener">选择器</a>。这样，您可以轻松地弹出一个与 Picker 中的行为相同的弹出窗口。但在此之前，让我们先通过编写一个使用按钮的简单菜单视图来进行比较。记下这段代码:</p><pre class="kg kh ki kj gt ls lt lu bn lv lw bi"><span id="332e" class="lx ly iq lt b be lz ma l mb mc">struct ContentView: View {<br/>    <br/>    @State var currentlySelected: Int = 1<br/><br/>    var body: some View {<br/>        <br/>        Menu {<br/>            Button("Select 1") {<br/>                currentlySelected = 1<br/>            }<br/>            Button("Select 2") {<br/>                currentlySelected = 2<br/>            }<br/>            Button("Select 3") {<br/>                currentlySelected = 3<br/>            }<br/>        } label: {<br/>            Text("\(currentlySelected)")<br/>                .font(.title)<br/>        }<br/>        <br/>    }<br/><br/>} // ContentView</span></pre><p id="de38" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">运行该应用程序将为您提供一个如图 2 所示的菜单，其中按钮标签文本根据您选择的数字而变化。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi md"><img src="../Images/8ee316389efa14772c36b93e01519dbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*2-r_eSOS8xTGPqsQtWlA4w.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图二。改变标签</figcaption></figure><p id="1c8e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">记住首先使用菜单而不是选择器的好处。这就是定制标签的能力。现在让我们改变标签的设计，如图 3 所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi me"><img src="../Images/f42ed27d3c7b5cf73cbb674531006d21.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/1*owu561ySCCRsAZxujQDVbg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 3。不同的标签设计</figcaption></figure><p id="ade8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这种设计可以通过如下编辑标签参数的代码来实现:</p><pre class="kg kh ki kj gt ls lt lu bn lv lw bi"><span id="2c09" class="lx ly iq lt b be lz ma l mb mc">HStack {<br/>    Spacer()<br/>    Text("Selected:")<br/>        .font(.title)<br/>        .foregroundColor(.white)<br/>        .padding()<br/>    Spacer()<br/>    Text("\(currentlySelected)")<br/>        .font(.title)<br/>        .foregroundColor(.white)<br/>        .padding()<br/>    Spacer()<br/>}<br/>.frame(minWidth: 0, maxWidth: .infinity)<br/>.background(Color.green)</span></pre><p id="6c90" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">再次运行应用程序。它现在应该看起来如图 3 所示。</p><h1 id="f091" class="mf ly iq bd mg mh mi mj mk ml mm mn mo jw mp jx mq jz mr ka ms kc mt kd mu mv bi translated">添加复选标记</h1><p id="2031" class="pw-post-body-paragraph kv kw iq kx b ky mw jr la lb mx ju ld le my lg lh li mz lk ll lm na lo lp lq ij bi translated">在大多数情况下，当菜单显示时，知道当前选择的选项是很好的。如<em class="nb">拾取器</em>视图中的复选标记，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/edc496f42188217a33927e90d8048e39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*bbf9fE7_i8ZuFoWWpPXZTg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 4。当前所选项上带有复选标记的菜单</figcaption></figure><p id="b252" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我并不是说没有 Picker 视图的帮助是不可能的。我唯一的观点是，既然已经有这样的视图，为什么还要从头开始编码呢？</p><p id="ab2f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要在菜单上添加复选标记，只需用选取器替换按钮。但是首先，创建一个包含选项的数组。在<em class="nb">内容视图</em>中写入这个常量属性:</p><pre class="kg kh ki kj gt ls lt lu bn lv lw bi"><span id="138c" class="lx ly iq lt b be lz ma l mb mc">let numberList = [1, 2, 3]</span></pre><p id="aec2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后编辑菜单的内容参数，用如下所示的选择器替换按钮:</p><pre class="kg kh ki kj gt ls lt lu bn lv lw bi"><span id="b798" class="lx ly iq lt b be lz ma l mb mc">Picker("", selection: $currentlySelected) {<br/>    ForEach(numberList, id: \.self) {<br/>        Text("Select \($0)")<br/>    }<br/>}</span></pre><p id="8188" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我只在第一个参数上写了空白字符串，因为它不会出现在<em class="nb">菜单</em>上。这里重要的是<a class="ae lr" href="https://medium.com/geekculture/swiftui-tutorial-state-and-binding-b7e80b4de622" rel="noopener">将</a>当前选择的<em class="nb">属性绑定到选择参数。这基本上会告诉<em class="nb">拾取器</em>查看当前选中的项目，其中会出现复选标记。然后我们使用了一个<a class="ae lr" href="https://medium.com/dev-genius/swiftui-tutorial-working-with-list-using-foreach-a4b7451fbcf0" rel="noopener"> ForEach </a>循环来避免代码重复。</em></p><p id="e06a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是源代码的截图，以防你迷路:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/25c5a5d1891f6681c4b4a6c6de30dc57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7tqVQJsJTE3F4DT3ro5k6w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 5。带有选择器的菜单的源代码</figcaption></figure><p id="e04e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">运行程序。您的菜单现在应该有一个如图 4 所示的复选标记。</p><p id="be80" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里 github <a class="ae lr" href="https://github.com/athurion/SwiftUI-Tutorial-Using-Picker-in-Menu/blob/main/ContentViewMenuPicker.swift" rel="noopener ugc nofollow" target="_blank">链接</a>为全部源代码。</p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="37f1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">愿法典与你同在，</p><p id="a4f1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">-电弧</p></div></div>    
</body>
</html>