<html>
<head>
<title>How to use Neptune.ai</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 Neptune.ai</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-use-neptune-ai-f87605e18ad3?source=collection_archive---------6-----------------------#2022-07-07">https://blog.devgenius.io/how-to-use-neptune-ai-f87605e18ad3?source=collection_archive---------6-----------------------#2022-07-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="ef78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你，小鹿机器学习工程师，大概已经知道，创建一个模型需要一些经验知识。尝试不同的模型和更改参数是您可以执行的许多操作中的一部分，但是您如何跟踪您所做的所有更改呢？</p><p id="dfaa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果这是一个简单的任务，你可能只需要记住一会儿。尽管如此，有时在团队中工作，面对复杂的问题，仅仅记住是不可能的。经常使用电子表格，但更智能、更实用的工具是实验跟踪工具，比如 Neptune！</p><p id="c15e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以这种方式不缺乏工具。尽管如此，Neptune 仍然是一个主要玩家，您会喜欢它主要是因为它有清晰、精确的文档和一些带有波兰口音的解释视频。这并不是说它很难使用，但是丰富的文档总是有助于学习新的特性，相信我，有很多这样的特性。</p><p id="caf6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这也是我们决定在 Voxar 使用它的原因之一。另一个原因是因为我们专注于该工具的学术用途，Neptune 提供了一个<a class="ae ki" href="https://neptune.ai/researchers#:~:text=Neptune%20is%20an%20experiment%20management,reinforcement%20learning%20or%20optimization%20research." rel="noopener ugc nofollow" target="_blank">学术计划</a>就是为了这个，我们可以免费获得无限的监控时间！</p></div><div class="ab cl kj kk hr kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ig ih ii ij ik"><p id="0545" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，和大多数互联网产品一样，你需要一个<a class="ae ki" href="https://ui.neptune.ai/auth/realms/neptune/protocol/openid-connect/registrations?client_id=neptune-frontend&amp;redirect_uri=https%3A%2F%2Fapp.neptune.ai%2F-%2Fonboarding&amp;state=97bc0a71-407f-4c9f-89eb-fe0a84d85359&amp;response_mode=fragment&amp;response_type=code&amp;scope=openid&amp;nonce=fe887c12-4285-4b7c-b7e6-d322662acb97" rel="noopener ugc nofollow" target="_blank">账户</a>。海王星对个人是免费的。</p><p id="8b2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在登录你的 Neptune 账户，创建一个新项目。第一次登录时，您可能会看到一些 Neptune 教程的弹出窗口，但在这种情况下，只需关闭它们，打开新的项目指南，并为您的项目命名。海王星会为你创造一把钥匙。</p><p id="bea6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，在您的机器或环境中安装 Neptune:</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="336e" class="kz la in kv b gy lb lc l ld le">pip install neptune-client</span></pre><p id="eb08" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不要忘记导入:</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="ab4c" class="kz la in kv b gy lb lc l ld le"><strong class="kv io">import</strong> neptune.new <strong class="kv io">as</strong> neptune</span></pre><p id="0f3a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们继续之前，让我解释一下海王星是如何工作的。您将实例化一个对象，在那里您可以保存“您所关心的任何模型构建元数据”。在你的项目菜单上有三个选项卡，用来组织你的项目:</p><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/fb11a615561fd37c02285da511fa1524.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o125tg7Sv2BzdD4mi5OhAw.png"/></div></div></figure><p id="8cca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要填充它们，您将为它们创建一个对象，并使用 Neptune 方法之一将您想要的数据记录到它们中:<br/>创建:</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="d994" class="kz la in kv b gy lb lc l ld le">run = neptune.init(...)<br/>model = neptune.init_model(...)<br/>project = neptune.init_project(...)</span></pre><p id="2e90" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们创建一个运行:</p><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ln"><img src="../Images/e2279b0e1b33369d754b0af7398b7e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*btcd_q9vZYAsNEQaqIyiKw.png"/></div></div></figure><p id="de22" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是创建管路的标准方式:</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="d3f8" class="kz la in kv b gy lb lc l ld le">run = neptune.init(<br/>    project="your_project",<br/>    api_token="your_api_token",<br/>)<em class="lo"># your credentials</em></span></pre><p id="5e83" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建后，有多种<a class="ae ki" href="https://docs.neptune.ai/you-should-know/logging-metadata" rel="noopener ugc nofollow" target="_blank">方法可以记录数据</a>:</p><ul class=""><li id="a9f8" class="lp lq in jm b jn jo jr js jv lr jz ls kd lt kh lu lv lw lx bi translated">" = ":唯一变量和字典。</li><li id="0441" class="lp lq in jm b jn ly jr lz jv ma jz mb kd mc kh lu lv lw lx bi translated">".log()":一系列值，通常在循环中</li><li id="f54a" class="lp lq in jm b jn ly jr lz jv ma jz mb kd mc kh lu lv lw lx bi translated">".track_files()":文件中的任何信息。</li><li id="ad3f" class="lp lq in jm b jn ly jr lz jv ma jz mb kd mc kh lu lv lw lx bi translated">".upload()":带有数据样本或混淆矩阵的文件或图形。</li><li id="1d72" class="lp lq in jm b jn ly jr lz jv ma jz mb kd mc kh lu lv lw lx bi translated">".log() + File”:连续的文件或对象，如图像。</li></ul><p id="00f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请记住在结尾使用 run.stop()，尤其是如果您使用的是笔记本，因为它们不会自动结束。</p><p id="e10f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">项目选项卡用于存储项目级元数据。它可以用来将数据集存储为工件，使得每次新运行时都可以轻松地访问它们。</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="8f77" class="kz la in kv b gy lb lc l ld le">project = neptune.init_project(<br/>  name = "your_project",<br/>  api_token = "your_api_token"<br/>)</span></pre><p id="5cfa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以存储数据集或链接到数据集。这里，我们创建了一个文件夹 general 并保存了一个字典。</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="585f" class="kz la in kv b gy lb lc l ld le">project['general'] = {<br/>        'data_link':'link_to_data', <br/>    }</span></pre><p id="f539" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，您可以保存您想要的模型，您创建的每个模型都可以有多个版本。所以首先:</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="5bdc" class="kz la in kv b gy lb lc l ld le">model = neptune.init_model(<br/>    name="Prediction model",<br/>    key="MOD", <br/>    project="your_project", <br/>    api_token="<!-- -->your_api_token<!-- -->", <em class="lo"># your credentials</em><br/>)</span></pre><p id="ae42" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个模型被创建之后，不要再次初始化它，除非你想改变这个模型。<br/>创建它的一个版本:</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="b5ed" class="kz la in kv b gy lb lc l ld le">model_version = neptune.init_model_version(<br/>        model = 'NEP-<!-- -->MOD<!-- -->',<br/>        project = '<!-- -->your_project<!-- -->',<br/>        name = 'first',<br/>        <!-- -->api_token="<!-- -->your_api_token<!-- -->",<br/>)</span></pre><p id="b7a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">模型字段需要特殊的格式化:(名称)+ "-" +(关键)<br/>这样您就可以上传模型或混淆矩阵:</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="4eb9" class="kz la in kv b gy lb lc l ld le">model_version['model'].upload('model.pth')</span></pre></div><div class="ab cl kj kk hr kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ig ih ii ij ik"><p id="965f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们尝试记录一些东西，用字典记录我们模型的参数怎么样？<br/>例如:</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="aada" class="kz la in kv b gy lb lc l ld le">params = {<br/>    'learning_rate': 0.008,<br/>    'batch_size': 128,<br/>    'epochs': 5,<br/>    'optmizer':'Adam',<br/>}</span></pre><p id="3526" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要记录它:</p><p id="3f9c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe md me mf kv b">run['parameters'] = params</code></p><p id="2014" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里我们使用“=”操作符将字典保存在名为 parameters 的文件夹中。运行之后，进入 Neptune 项目菜单，选择可视化运行。您将看到在“所有元数据”中创建的文件夹。</p><p id="2a1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是对 Neptune 用户来说，T4 的精华就在你使用“的时候。log”运算符来保存，例如，精度。</p><pre class="kq kr ks kt gt ku kv kw kx aw ky bi"><span id="c9a3" class="kz la in kv b gy lb lc l ld le">run['test_acc_epoch'].log(acc_test)</span></pre><p id="36b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">运行结束后，Neptune 会自动为您创建图表，此外，您还可以用您所做的一切制作一些个性化的仪表盘。</p><figure class="kq kr ks kt gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi mg"><img src="../Images/4f086181e7a547d1a32476980b591031.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJhBR-dWBBk6betgah-8hA.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">只要把这个给你的老板看，就能得到免费的晋升。</figcaption></figure></div><div class="ab cl kj kk hr kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ig ih ii ij ik"><p id="a150" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我相信有了它，你可以很容易地将海王星添加到你的项目中。它使用起来非常简单，您将会学到更多的特性，比如如何使用调试模式、使用正则表达式、改变模型的状态、改变运行的同步模式等等。</p></div></div>    
</body>
</html>