<html>
<head>
<title>Stop using ANY in typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止在 typescript 中使用任何</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/stop-using-any-in-typescript-24f5ead75ee0?source=collection_archive---------3-----------------------#2022-03-13">https://blog.devgenius.io/stop-using-any-in-typescript-24f5ead75ee0?source=collection_archive---------3-----------------------#2022-03-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="9ba6" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">Typescript 最佳实践</h2><div class=""/><div class=""><h2 id="ff33" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">自由可能是危险的</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/af17ca8064c25b9f23747b26a92fc563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gZDSitnVQ5lsloTn"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">照片由<a class="ae le" href="https://unsplash.com/@emrahkara?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">埃姆拉·卡拉</a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="ec89" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Typescript 是一种强大的类型化编程语言，它允许我们构建 JavaScript。</p><p id="0b6c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">一个<em class="mb">类型</em>将告诉编译器如何理解那段数据。换句话说，当你声明一个变量<strong class="lh ja">的时候，你应该添加变量</strong>的类型，比如<strong class="lh ja"> <em class="mb">字符串</em> </strong>、<strong class="lh ja"> <em class="mb">数字</em> </strong>、<strong class="lh ja"> <em class="mb">布尔</em> </strong>等等。</p><p id="65c4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">typescript 的美妙之处在于，当我们写代码时，我们能够定义自己的类型,拥有自己的规则。</p><p id="9106" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">假设您有一个接收两个数字并返回这两个数字之和的函数。<em class="mb">图 1 </em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mc"><img src="../Images/1ed6fad1616084f397ec6fd71e8a0db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8aTgKGjTtU8mKZ3s5f7CvA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图 1 求和函数定义</figcaption></figure><p id="288d" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在一个小系统中，我们可以知道我们发送给那个函数的是什么，这不是最好的做法，但我们可以处理它。但是，当我们在两三年后，甚至几天或几周后看到我们的代码时，会发生什么呢😅。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi md"><img src="../Images/d6bba5af9837e2ea53e1e78f5b69e9ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tWEC-gItjMNg_MDj"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated"><a class="ae le" href="https://unsplash.com/@heftiba?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Toa Heftiba </a>在<a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="c0ed" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们的系统将会变得太大，也许我们不记得我们到底做了什么，但是没关系，因为我们将会写很多行代码。</p><p id="4c96" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">Typescript 来帮助我们解决这个常见问题。使用 typescript 有许多方法可以达到相同的效果，其中一种方法是将类型添加到参数中，以限制每个参数的有效类型。</p><p id="10c0" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">什么？</p><p id="3955" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">让我们看看，下一个定义。<em class="mb">图 2 </em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi me"><img src="../Images/e68a6d57a0dd0c4b6f2c83eae234e4ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cTVhbY3096a4MEaoky5cPA.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图 2 类型脚本中的加法函数定义</figcaption></figure><p id="fdb7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我的函数只接受两个<strong class="lh ja"> <em class="mb">数字</em> </strong> <em class="mb">作为参数</em>，也就是说如果我要发送一个字符串，TypeScript 会在我要编译代码的时候抛出错误。</p><p id="0ca5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">例如，<em class="mb">图 3 </em>中的代码会抛出一个错误，就像我们在<em class="mb">图 4 </em>中看到的那样。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mf"><img src="../Images/4ecb124ffd346344ff0d38cbf46d9c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I8QPvFmws1h_PZhZ6Cvu1g.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图 3 错误呼叫</figcaption></figure><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mg"><img src="../Images/bc2e7bfb7653e614c600e36f5869398b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0PkIfCEXBZSfbnUi_c3RDw.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图 4“字符串”类型的参数不可分配给“数字”类型的参数</figcaption></figure><p id="60f5" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是当我们定义正确的变量类型时，我们有更有用的用法。</p><p id="50b7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">例如，如果你正在使用类型，你正在记录你的代码，并从你的编辑器中的编译器那里得到帮助(图 5)，因为正如我们所看到的，如果我们传递了错误的数据，编译器会告诉我们，"🤦🏽‍♂️老兄住手……”</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mh"><img src="../Images/207e332bb1b3cce1e2f82be78dcf60a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*pSTwp3HI0VueUCVITlWIDg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图 5 Visual studio 代码建议</figcaption></figure><p id="ab6c" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">正如你在前面的图片中注意到的，当我在 Visual Studio 代码或任何其他编辑器中开发时，编辑器会给我一个建议，告诉我哪些方法可用，哪些参数可以接受，以及我将得到什么结果。</p><p id="a79a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">类型是免费的，我们不会在最终的 javascript 中添加额外的行，这一点很重要，因为许多开发人员都很注意最终文件的大小。<em class="mb">图 6 </em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi mi"><img src="../Images/46ec5b4a1812bbe0020cd8db9632da83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dv9Hx60bjv3md_WS7B_NCg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图 6 左侧是带有类型的 typescript 函数，右侧是 typescript 编译器的结果</figcaption></figure><p id="6cd3" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如你所见，最终的结果仅仅是一个“普通的 JavaScript”。</p><h2 id="7dd4" class="mj mk iq bd ml mm mn dn mo mp mq dp mr lo ms mt mu ls mv mw mx lw my mz na iw bi translated"><strong class="ak">任何一个</strong></h2><p id="b3b7" class="pw-post-body-paragraph lf lg iq lh b li nb ka lk ll nc kd ln lo nd lq lr ls ne lu lv lw nf ly lz ma ij bi translated"><strong class="lh ja"> <em class="mb">任何</em> </strong>都是 TypeScript 中最糟糕的类型，并不是一个可能会在我们的代码中引发大问题的解决方案，因为我们可以随心所欲地使用我们的变量。</p><p id="11d4" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated"><strong class="lh ja"> <em class="mb"> any </em> </strong>所做的是关闭所有类型脚本的规则，允许我们给变量<em class="mb">(图 7) </em>赋值，这就是为什么我认为<strong class="lh ja"> <em class="mb"> any </em> </strong>类型是我们代码的银弹。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ng"><img src="../Images/cfdaa66ebc4256ffb35c6fc3c1d82af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zG1pHLBUc-4c2gsEcjUTg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图 any 类型用法示例</figcaption></figure><p id="529a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">如果你使用<strong class="lh ja"> <em class="mb">任何</em> </strong>，你就是在告诉编译器，<strong class="lh ja"> <em class="mb">“我不需要你，我太酷了，我是个成年人，我知道我在做什么”</em> </strong></p><p id="53e9" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">然而，<strong class="lh ja"> <em class="mb"> any </em> </strong>存在的原因只有一个，<strong class="lh ja">我们可以在因为不知道那个库的结果而无法确定类型的时候，对第三方库使用类型<em class="mb"> any </em>。</strong></p><p id="724a" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是在这种情况下，如果你使用 any 因为很容易，那么我推荐使用普通 JavaScript。</p><h2 id="d8a0" class="mj mk iq bd ml mm mn dn mo mp mq dp mr lo ms mt mu ls mv mw mx lw my mz na iw bi translated">未知类型</h2><p id="1484" class="pw-post-body-paragraph lf lg iq lh b li nb ka lk ll nc kd ln lo nd lq lr ls ne lu lv lw nf ly lz ma ij bi translated">不过哎，也不是什么都丢了，自从 Typescript 3 之后，就有了一个类型来代替<strong class="lh ja"> <em class="mb">任何</em> </strong>也就是<strong class="lh ja"> <em class="mb">未知</em> </strong>。</p><p id="0bdf" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">类似于<strong class="lh ja"> <em class="mb">的任何</em> </strong>但是带有一些约束来帮助我们防止灾难。</p><p id="4886" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们来看一个<strong class="lh ja"> <em class="mb">任意</em></strong>vs<strong class="lh ja"><em class="mb">未知</em> </strong>类型的用法示例。<em class="mb">图 8 </em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nh"><img src="../Images/4793c4d4ef7c4a20fa90e7f3fc4a3d2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kGIjD03ZkYI2OKYC7fO72g.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图 8 任意 vs 未知的使用</figcaption></figure><p id="7a12" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">正如你所看到的，我能够改变任何值并赋给我的<strong class="lh ja"> <em class="mb">任何</em> </strong>变量，没有任何限制，甚至我们能够调用一个不存在的方法而不出错。</p><p id="1efb" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是，对于一个<strong class="lh ja"> <em class="mb">未知的</em> </strong>变量，我们也可以赋任何值，但是我们不能调用一个不存在的方法或者把它赋给一个新的变量。</p><p id="eb50" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">有了这些规则，我们可以确保我的变量不会因为我改变了类型而表现出奇怪的行为。</p><p id="5a87" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">要使用我们的<strong class="lh ja"> <em class="mb">未知的</em> </strong>变量作为另一种类型，我们需要在赋值前对我们的变量进行强制转换。<em class="mb">图 9 </em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nh"><img src="../Images/541ac0433f346b63cfbd242f0bc4eced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ip4_X76Y2y469ggfSJNOzg.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">图九。铸造一个未知变量</figcaption></figure><p id="3c44" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">在前面的例子中，我使用关键字<strong class="lh ja"> <em class="mb">作为</em> </strong>来分配类型，并使用我的未知类型变量作为字符串和<strong class="lh ja"> <em class="mb"> CustomType </em> </strong>。</p><h2 id="d218" class="mj mk iq bd ml mm mn dn mo mp mq dp mr lo ms mt mu ls mv mw mx lw my mz na iw bi translated">结论</h2><p id="471a" class="pw-post-body-paragraph lf lg iq lh b li nb ka lk ll nc kd ln lo nd lq lr ls ne lu lv lw nf ly lz ma ij bi translated">我们需要尽可能地停止任何的用法，并开始使用<strong class="lh ja"><em class="mb"/></strong><em class="mb">类型</em>来确保我们代码的高质量，如果我们将编译器特性关闭，也许我们没有使用正确的语言来开发我们的系统。Typescript 是关于类型的，我们需要使用它们，如果我们不确定哪种类型是有效的，那么就使用未知类型。</p></div></div>    
</body>
</html>