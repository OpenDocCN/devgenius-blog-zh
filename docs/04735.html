<html>
<head>
<title>Add Form Validation to a Vue 3 App with Vuelidate 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vuelidate 2向Vue 3应用程序添加表单验证</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/add-form-validation-to-a-vue-3-app-with-vuelidate-2-972bd0782667?source=collection_archive---------5-----------------------#2021-04-28">https://blog.devgenius.io/add-form-validation-to-a-vue-3-app-with-vuelidate-2-972bd0782667?source=collection_archive---------5-----------------------#2021-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/845ffcb84ef7f86d02ecece92a0eb11c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y1DdkqYTYCFWjey1"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@llhheather?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Heather Lo </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="5286" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuelidate 2是一个为Vue 3应用程序开发的流行的表单验证库。</p><p id="baf0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用Vuelidate 2向我们的Vue 3应用程序添加表单验证。</p><h1 id="ffb7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">装置</h1><p id="6889" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要安装Vuelidate 2，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9156" class="mn lc iq mj b gy mo mp l mq mr">npm install @vuelidate/core @vuelidate/validators</span></pre><p id="afbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和NPM一起。</p><p id="d936" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们可以运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="32bd" class="mn lc iq mj b gy mo mp l mq mr">yarn add @vuelidate/core @vuelidate/validators</span></pre><p id="f4db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用纱线。</p><h1 id="33db" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">添加表单验证</h1><p id="d03b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了在我们的Vue 3应用中添加Vuelidate 2的表单验证，我们编写了:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8499" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="name" /&gt;<br/>    &lt;div v-for="error of v$.name.$silentErrors" :key="error.$message"&gt;<br/>      &lt;div&gt;{{ error.$message }}&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="contact.email" /&gt;<br/>    &lt;div v-for="error of v$.contact.email.$silentErrors" :key="error.$message"&gt;<br/>      &lt;div&gt;{{ error.$message }}&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="33c1" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import useVuelidate from "@vuelidate/core";<br/>import { required, email } from "@vuelidate/validators";</span><span id="5821" class="mn lc iq mj b gy ms mp l mq mr">export default {<br/>  name: "App",<br/>  setup() {<br/>    return { v$: useVuelidate() };<br/>  },<br/>  data() {<br/>    return {<br/>      name: "",<br/>      contact: {<br/>        email: "",<br/>      },<br/>    };<br/>  },<br/>  validations() {<br/>    return {<br/>      name: { required },<br/>      contact: {<br/>        email: { required, email },<br/>      },<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="bf39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们导入<code class="fe mt mu mv mj b">useVuelidate</code>钩子，调用它，并将返回值赋给thew <code class="fe mt mu mv mj b">v$</code> reactive属性。</p><p id="cc50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们添加<code class="fe mt mu mv mj b">name</code>无功属性，并用<code class="fe mt mu mv mj b">v-model</code>将其绑定到输入。</p><p id="20e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe mt mu mv mj b">validations</code>方法中，我们返回一个带有字段名和有效性规则的对象。</p><p id="2afa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将在<code class="fe mt mu mv mj b">validations</code>方法中返回的对象中的每个属性设置为带有我们想要设置的验证规则的属性对象。</p><p id="1ebb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到每个对象中的<code class="fe mt mu mv mj b">$silentErrors</code>属性的错误。</p><p id="77ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">error.$message</code>有每个字段的错误信息。</p><h1 id="1513" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">肮脏的国家</h1><p id="4ac4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vuelidate为每个字段提供了<code class="fe mt mu mv mj b">$dirty</code>状态，以跟踪是否对其进行了任何操作。</p><p id="d97a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="360b" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="name" @blur="v$.name.$touch" /&gt;<br/>    &lt;template v-if="v$.name.$dirty"&gt;<br/>      &lt;div v-for="error of v$.name.$silentErrors" :key="error.$message"&gt;<br/>        &lt;div&gt;{{ error.$message }}&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="contact.email" @blur="v$.contact.email.$touch" /&gt;<br/>    &lt;template v-if="v$.contact.email.$dirty"&gt;<br/>      &lt;div<br/>        v-for="error of v$.contact.email.$silentErrors"<br/>        :key="error.$message"<br/>      &gt;<br/>        &lt;div&gt;{{ error.$message }}&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="b837" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import useVuelidate from "@vuelidate/core";<br/>import { required, email } from "@vuelidate/validators";</span><span id="f710" class="mn lc iq mj b gy ms mp l mq mr">export default {<br/>  name: "App",<br/>  setup() {<br/>    return { v$: useVuelidate() };<br/>  },<br/>  data() {<br/>    return {<br/>      name: "",<br/>      contact: {<br/>        email: "",<br/>      },<br/>    };<br/>  },<br/>  validations() {<br/>    return {<br/>      name: { required },<br/>      contact: {<br/>        email: { required, email },<br/>      },<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="057b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在每个输入中，当我们将焦点从输入移开时，我们调用<code class="fe mt mu mv mj b">$touch</code>方法。</p><p id="b0ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将使<code class="fe mt mu mv mj b">$dirty</code>属性变成<code class="fe mt mu mv mj b">true</code>。</p><p id="c854" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们关注输入，然后将焦点从输入移开时，我们可以用它来显示验证错误。</p><h1 id="42fd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="652d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Vuelidate 2将基本的表单验证添加到我们的Vue 3应用中。</p><p id="d0a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以显示验证错误，并在显示时进行控制。</p></div></div>    
</body>
</html>