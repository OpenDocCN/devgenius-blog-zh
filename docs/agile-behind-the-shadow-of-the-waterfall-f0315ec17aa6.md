# 敏捷在瀑布的阴影后面

> 原文：<https://blog.devgenius.io/agile-behind-the-shadow-of-the-waterfall-f0315ec17aa6?source=collection_archive---------3----------------------->

## 也许你追随敏捷已经很多年了，但是你仍然觉得有些地方不对劲。你能感觉到，瀑布的影子在你身上。你不觉得做敏捷，你觉得做迷你瀑布。也许你是对的。

![](img/25d0b4fac4cf2cef57573e0493f68a1d.png)

约书亚·索蒂诺在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

当程序员开始编码时，没有规则。没有瀑布，没有说明，除了一张普通的纸什么都没有。在编码的最初几年，所有的东西都被发明出来。他们发明了新的编程语言，新的范例，甚至测试。如果你想感受他们当时的感受，我邀请你观看以下 Bret Victor 的视频:

bret Victor:1970 年编程的未来

如果你想一想他们当时使用的是哪种工作方法，很明显不可能是瀑布方法。一切都是新的，有待发现。计划是不可能的。所以他们基本上在短周期内工作，在每个步骤中学习和评估。我们可以说，在敏捷被定义之前，他们就是敏捷的。

如果我们回顾一下工业生产，一个多世纪以前，弗雷德里克·温斯洛·泰勒引进了一种叫做科学管理的东西。他意识到这个行业有很多效率低下的地方，他提出了一种新的方法来优化和提高这个行业的生产率。基本的想法是使用科学的方法来计划工作、任务，并为每项任务选择和培训人员。他甚至有奖励表现突出的员工的疯狂想法。

1970 年温斯顿·罗伊斯出版了《瀑布》。他将科学管理的理念应用于软件开发。他研究了软件生产过程、所涉及的角色、人员能力，并且他定义了任务和角色，在这些任务和角色中划分所有的软件开发:

![](img/27d0c1af7ee0838b0299a16b5f4703f6.png)

瀑布模型，来源[维基百科](https://en.wikipedia.org/wiki/Waterfall_model)

这些任务是瀑布的缩影，是将科学管理应用于软件开发的逻辑结论。在每一步，你都有一个专门的任务，由受过专门训练的人来完成。阶段之间的沟通主要是通过可交付成果来完成的。它看起来很像一条装配线。

不是每个人都对这个新组织感到满意，但它有一些关键点。现在，客户有了更强的控制意识，他可以监督整个过程，了解总体计划，并在决定他想要什么时有了更积极的发言权。虽然，这样的计划通常不能实现，并且充满了延迟或不希望的结果。

随着时间的推移，专业人士发现这还不够好。其他东西是必要的。软件开发过程中有太多的不确定性。你可以画并试着跟着瀑布盒子走，但是对它们有一点信心。这就是敏捷之前的方法论，如螺旋模型、极限编程，甚至 Scrum 是如何出现的。

一旦敏捷在 2001 年被提出，敏捷方法就开始蓬勃发展。其中比较著名的是 Scrum。许多公司改变了大规模的快速 Scrum 冲刺计划。但不知何故，还是少了点什么。开发者开始觉得做迷你瀑布:

![](img/3939e7f3f733e6fe4677c1a88bbf0b51.png)

迷你瀑布

有相同的阶段。采购订单收集需求并创建故事，程序员设计如何实现并将其分解为任务，一旦确定了优先级，就开始实现。最后，连黑板看起来都像:

![](img/a90b5e8c8501f32fdf23b9305c193b38.png)

带有瀑布阴影的典型“敏捷”板。

如果你在代码后看到测试，那一定是出了问题。

# 测试

我花了很长时间才注意到，许多敏捷宣言的作者正在测试倡导者。不仅如此，他们还是坚定的 TDD 追随者。即使是那些说要追随 BDD 的人，他们也说 BDD 只不过是 TDD 的一种味道。这并不奇怪，相反，完全在意料之中。拥抱变化。如果你害怕打破一些东西，你如何快速改变一个设计？

但是还有一个更大的问题。敏捷宣言背后的人们生活在如此不同的现实中，以至于他们的话和世界上其他人的话有着不同的含义。而我们，这个行业，还在努力理解它们。

我已经练习 TDD 很多年了；但直到几个月前，我才有了新的认识。这让我意识到，我终于理解了敏捷和 TDD 背后的东西。

![](img/30027169dd94a0bfd8fb586551a689da.png)

TDD:红色，绿色，重构循环。

TDD 的循环有三个主要阶段:测试、编码和清理。我喜欢称 refactor 为 clean，这样人们就能在让事情运转起来之后记得清理代码。现在我称之为设计。它一直在我面前。从马丁·福勒的[重构书](https://martinfowler.com/books/refactoring.html)，到罗伯特·马丁的[坚实原则](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)。敏捷宣言的两位作者。

这个想法是你首先编码，然后，当你确切地知道你需要什么时，你应用模式。当你有设计的时候，而不是之前，也不是之后，你才开始设计。当然，你可以利用测试来做到这一点。

如果我们将 TDD 循环应用于瀑布任务，它将转换为下图:

![](img/f36c8ee30389a46733b728106940bac8.png)

TDD 循环改造的小瀑布。

它几乎颠倒过来，但要求。

# 学习需求

科学管理是该行业的一大进步，但这还不够。它专注于任务优化，但并不试图确定什么有价值以及它的价值。如果你优化了一种没人想买的产品的生产，你最终会得到一堆非常便宜的垃圾。

1936 年，丰田开发了丰田方式，一种专注于减少浪费的新生产系统。与科学管理的主要区别，在于它把科学的方法应用于设计和生产。这个想法比生产优化更重要，利用客户的决定来创造更成功的产品。

它是如此有效，以至于在 1988 年被重新命名为精益制造(通用汽车使用丰田的方式并不好看)。

![](img/d17d4a31db1ad34da6cf0802d65c169a.png)

精益的主要特征是迭代价值和减少浪费

精益的主要焦点是识别什么有价值，什么是浪费。以前，废物仅限于生产的残留物，但精益认为废物很难出售；以及所有相关的工作。它需要一个不同的焦点:客户。

根据[维基百科](https://en.wikipedia.org/wiki/Requirements_engineering)的说法，需求工程并不像我们预期的那样工作:

> 没有证据表明需求工程有助于软件项目或系统的成功。问题结构化是需求工程的一个关键方面，它会降低设计性能。一些研究表明，软件需求通常是一种错觉，在没有真实需求的情况下，将设计决策误传为需求。

这是因为我们无法预见未来。我们可以进行研究和统计，但最终，客户的行为可能无法预测。但是，如果我们使用产品本身和客户本身，我们将肯定知道产品是否成功。

对于精益来说，需求没有任何意义。相反，你有一个想法，然后你计划一个实验来验证这个想法是否正确。你不需要在过程的开始计划一个需求，你只需要实现一个实验，然后，当用户使用它时，你决定这个想法是正确的(这是一个需求)，还是错误的(这是浪费)。

如果我们将这种变化应用到小瀑布任务中，我们会得到:

![](img/c37874785a2814f18ca3807be8daffc5.png)

精益改造的小瀑布

需求在最后。我们从实验的设计开始，我们实现它，我们验证它是否像预期的那样工作(我们没有破坏任何东西)，最后，我们决定它是一个需求(值)还是浪费。我们学习。

# 结合 TDD 和精益

至此，大概你已经想通了我们要去哪里。

TDD 对于敏捷是必不可少的。敏捷宣言中没有明确提到它，但它是确保响应变化的最佳工具。TDD 的创建者和第一批实践者在敏捷宣言的创建者之间。

精益直到 2005 年才出现在《软件工程师》杂志上，也就是敏捷宣言发表 4 年后，史蒂夫·布莱克出版了他的书《顿悟的四个步骤:赢得胜利的产品的成功策略》。我毫不怀疑，如果敏捷宣言的作者发现了精益，他们会把它包括进来。这是与顾客合作的最佳方式，和他一起学习什么是最好的产品。当然，精益需要敏捷:你不能计划任何事情，你必须快速适应和改变过程。

如果我们将 TDD 和精益结合起来，并将瀑布与 TDD+精益进行比较，我们会发现:

![](img/05b32354f5f7bfec880f7b8e06d61a97.png)

迷你瀑布与敏捷

TDD 和精益遵循完全相反的任务流程:

*   首先:写下你的一个行为的测试。
*   第二:做通过测试的最小实现。
*   第三:通过重构清理代码，创建必要的设计和架构，必要时返回测试
*   最后:了解这个想法是否好，如果足够好，就按照要求去做，如果不好，就放弃

所以下一次当你感觉你正在敏捷开发中做迷你瀑布循环时，也许你是对的。尝试相反的流程，让客户的行动引导你走向最大价值。