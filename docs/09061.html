<html>
<head>
<title>Angular Application Deployment to Azure Web App using GitHub</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 GitHub 将 Angular 应用程序部署到 Azure Web App</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/angular-application-deployment-to-azure-web-app-using-github-49a4e3a7ba87?source=collection_archive---------8-----------------------#2022-07-27">https://blog.devgenius.io/angular-application-deployment-to-azure-web-app-using-github-49a4e3a7ba87?source=collection_archive---------8-----------------------#2022-07-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0c058a0b204c5682b80e3f04b550db26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgsmKinPQ12WhsowrJglWw.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">流动</figcaption></figure><p id="b544" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在本文中，我将演示使用 GitHub 将 angular 应用程序部署到 Azure Web App 的过程</p><p id="c597" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">该演示将用于将应用程序部署到一个 web 应用程序，但是流程保持不变，并且可以用于部署多个应用程序。</p><p id="688e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">先决条件:</strong></p><ol class=""><li id="da35" class="kx ky in kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">你有一个带有角度代码的 GitHub Repo</li></ol><p id="2d55" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">请点击此处找到本演示中使用的<a class="ae lg" href="https://github.com/babula000/AzureWebApp-GitHub-Public" rel="noopener ugc nofollow" target="_blank">回购的链接</a></p><p id="75ce" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">2.您拥有有效的 Azure 订阅</p><p id="e385" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3.您已经在本地计算机中配置了 Azure CLI</p><p id="33e6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">安装 Azure CLI: </strong>按照<a class="ae lg" href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli" rel="noopener ugc nofollow" target="_blank">安装 Azure CLI </a>中提供的说明来设置您的 Azure CLI 环境。</p><h1 id="1776" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">步骤:</h1><ol class=""><li id="16c3" class="kx ky in kb b kc mf kg mg kk mh ko mi ks mj kw lc ld le lf bi translated">创建资源组</li></ol><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="cce1" class="mt li in mp b gy mu mv l mw mx">az group create --name AzureWebAppDemo --location "eastus"</span></pre><p id="280a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">2.创建应用服务计划</p><blockquote class="my mz na"><p id="73ec" class="jz ka nb kb b kc kd ke kf kg kh ki kj nc kl km kn nd kp kq kr ne kt ku kv kw ig bi translated">出于演示目的，我们正在创建一个免费层应用服务计划</p></blockquote><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="0b05" class="mt li in mp b gy mu mv l mw mx">az appservice plan create -g AzureWebAppDemo -n MyFreePlan --sku Free</span></pre><p id="4399" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3.创建 Azure Web 应用程序来托管 Angular 应用程序</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="65ac" class="mt li in mp b gy mu mv l mw mx">az webapp create -g AzureWebAppDemo --runtime "node:14LTS" -p MyFreePlan -n AzureAngualrWebApp</span></pre><p id="1dee" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">4.使用以下命令创建服务主体并保存信息</p><blockquote class="my mz na"><p id="7c6c" class="jz ka nb kb b kc kd ke kf kg kh ki kj nc kl km kn nd kp kq kr ne kt ku kv kw ig bi translated">P <!-- -->请创建具有所需适当权限的服务主体</p></blockquote><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="e01f" class="mt li in mp b gy mu mv l mw mx">az ad sp create-for-rbac --name rgContributorSP --role Contributor --scopes subscriptions/&lt;&lt;subscriptionid&gt;&gt;/resourceGroups/AzureWebAppDemo</span></pre><p id="83ca" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">5.用步骤 4 中创建的凭证创建一个 json 内容</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="9c9a" class="mt li in mp b gy mu mv l mw mx">{<br/>    "clientId": "client id valur",<br/>    "clientSecret": "client sercret",<br/>    "subscriptionId": "subscription id",<br/>    "tenantId": "tenant id"<br/>  }</span></pre><p id="0a5f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">6.创建 GitHub 秘密</p><p id="a404" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">登录 GitHub，进入 GitHub Repo →设置→秘密</p><p id="63f1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">名称:“AZURE_CREDENTIALS”</p><p id="b113" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">值:上面创建的 json</p><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/495a216f354ba8480a2132cdbfae83a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wM8cucbF0esxl6X-wrzScw.png"/></div></div></figure><p id="5bf4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">7.创建 GitHub 工作流</p><p id="d759" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">转到您的 GitHub Repo →操作</p><p id="4fc8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">点击<strong class="kb io">自行设置工作流程</strong></p><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/18cf7b18506a7b5ebf0da6447df8cf20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_CbK0QoDyxvhZAxS.jpeg"/></div></div></figure><p id="8a5b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">工作流程</p><p id="3ec4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">工作流配置详情:</strong></p><blockquote class="my mz na"><p id="6f2c" class="jz ka nb kb b kc kd ke kf kg kh ki kj nc kl km kn nd kp kq kr ne kt ku kv kw ig bi translated">可变的</p></blockquote><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="37c9" class="mt li in mp b gy mu mv l mw mx">env:<br/>  AZURE_WEBAPP_NAME: 'AzureAngualrWebApp'    <br/>  AZURE_WEBAPP_PACKAGE_PATH: '.'     <br/>  NODE_VERSION: '14.x'</span></pre><blockquote class="my mz na"><p id="3057" class="jz ka nb kb b kc kd ke kf kg kh ki kj nc kl km kn nd kp kq kr ne kt ku kv kw ig bi translated">乔布斯</p><p id="2d90" class="jz ka nb kb b kc kd ke kf kg kh ki kj nc kl km kn nd kp kq kr ne kt ku kv kw ig bi translated">构建作业</p></blockquote><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="9c2e" class="mt li in mp b gy mu mv l mw mx">build:<br/>    runs-on: ubuntu-latest<br/>    steps:<br/>    - uses: actions/checkout@v3</span><span id="47ba" class="mt li in mp b gy nh mv l mw mx">- name: Set up Node.js<br/>      uses: actions/setup-node@v3<br/>      with:<br/>        node-version: ${{ env.NODE_VERSION }}<br/>        cache: 'npm'<br/>    - name: npm install and build<br/>      run: |<br/>        npm install<br/>        npm run build --if-present<br/>    - name: Upload artifact for deployment job<br/>      uses: actions/upload-artifact@v3<br/>      with:<br/>        name: node-app<br/>        path: ./dist</span></pre><blockquote class="my mz na"><p id="6c85" class="jz ka nb kb b kc kd ke kf kg kh ki kj nc kl km kn nd kp kq kr ne kt ku kv kw ig bi translated">部署作业</p></blockquote><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="72c3" class="mt li in mp b gy mu mv l mw mx">deploy:<br/>    permissions:<br/>      contents: none<br/>    runs-on: ubuntu-latest<br/>    needs: build<br/>    environment:<br/>      name: 'Development'<br/>      url: ${{ steps.deploy-to-webapp.outputs.webapp-url }}</span><span id="3933" class="mt li in mp b gy nh mv l mw mx">steps:<br/>    - name: Download artifact from build job<br/>      uses: actions/download-artifact@v3<br/>      with:<br/>        name: node-app<br/>    - uses: azure/login@v1<br/>      name: Login to Azure<br/>      with:<br/>        creds: ${{ secrets.AZURE_CREDENTIALS }}<br/>    - name: 'Deploy to Azure WebApp'<br/>      id: deploy-to-webapp <br/>      uses: azure/webapps-deploy@v2<br/>      with:<br/>        app-name: ${{ env.AZURE_WEBAPP_NAME }}<br/>        package: ${{ env.AZURE_WEBAPP_PACKAGE_PATH }}<br/>    - name: logout<br/>      run: |<br/>        az logout</span></pre><p id="3391" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">完整的 yml 配置</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="7cd3" class="mt li in mp b gy mu mv l mw mx">on:<br/>  workflow_dispatch:</span><span id="1c7a" class="mt li in mp b gy nh mv l mw mx">env:<br/>  AZURE_WEBAPP_NAME: 'AzureAngualrWebApp'    <br/>  AZURE_WEBAPP_PACKAGE_PATH: '.'     <br/>  NODE_VERSION: '14.x'</span><span id="e9c9" class="mt li in mp b gy nh mv l mw mx">permissions:<br/>  contents: read</span><span id="0503" class="mt li in mp b gy nh mv l mw mx">jobs:<br/>  build:<br/>    runs-on: ubuntu-latest<br/>    steps:<br/>    - uses: actions/checkout@v3</span><span id="7d2b" class="mt li in mp b gy nh mv l mw mx">- name: Set up Node.js<br/>      uses: actions/setup-node@v3<br/>      with:<br/>        node-version: ${{ env.NODE_VERSION }}<br/>        cache: 'npm'<br/>    - name: npm install and build<br/>      run: |<br/>        npm install<br/>        npm run build --if-present<br/>    - name: Upload artifact for deployment job<br/>      uses: actions/upload-artifact@v3<br/>      with:<br/>        name: node-app<br/>        path: ./dist</span><span id="4a8d" class="mt li in mp b gy nh mv l mw mx">deploy:<br/>    permissions:<br/>      contents: none<br/>    runs-on: ubuntu-latest<br/>    needs: build<br/>    environment:<br/>      name: 'Development'<br/>      url: ${{ steps.deploy-to-webapp.outputs.webapp-url }}</span><span id="eb8e" class="mt li in mp b gy nh mv l mw mx">steps:<br/>    - name: Download artifact from build job<br/>      uses: actions/download-artifact@v3<br/>      with:<br/>        name: node-app<br/>    - uses: azure/login@v1<br/>      name: Login to Azure<br/>      with:<br/>        creds: ${{ secrets.AZURE_CREDENTIALS }}<br/>    - name: 'Deploy to Azure WebApp'<br/>      id: deploy-to-webapp <br/>      uses: azure/webapps-deploy@v2<br/>      with:<br/>        app-name: ${{ env.AZURE_WEBAPP_NAME }}<br/>        package: ${{ env.AZURE_WEBAPP_PACKAGE_PATH }}<br/>    - name: logout<br/>      run: |<br/>        az logout</span></pre></div><div class="ab cl ni nj hr nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ig ih ii ij ik"><p id="fcd9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">触发 GitHub 动作进行验证</p><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/2c780e2a06f29d5c33ed87997b4dec88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZYxfiuryPCzHd_hStk-9dQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">结果</figcaption></figure><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/e9d06b19fc9950086def27c9982f49a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WGgOSnZPxmk1SNMaC-BqBg.jpeg"/></div></div></figure><p id="1a1e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">其他资源:</strong></p><div class="nr ns gp gr nt nu"><a href="https://github.com/Azure/login#configure-a-service-principal-with-a-secret" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd io gy z fp nz fr fs oa fu fw im bi translated">GitHub - Azure/login:连接到 Azure</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">GitHub Actions 为您提供了构建自动化软件开发生命周期工作流的灵活性。有了 GitHub…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">github.com</p></div></div><div class="od l"><div class="oe l of og oh od oi jt nu"/></div></div></a></div><div class="nr ns gp gr nt nu"><a href="https://github.com/babula000/AzureWebApp-GitHub-Public" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd io gy z fp nz fr fs oa fu fw im bi translated">GitHub-babula 000/AzureWebApp-GitHub-Public</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">github.com</p></div></div><div class="od l"><div class="oj l of og oh od oi jt nu"/></div></div></a></div></div><div class="ab cl ni nj hr nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ig ih ii ij ik"><p id="ee20" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我希望你喜欢阅读这篇文章，随时添加你的评论、想法或反馈，不要忘记在 linkedin 上保持联系。</p></div></div>    
</body>
</html>