<html>
<head>
<title>The Singleton Pattern In Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity 中的单例模式</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-singleton-pattern-in-unity-b7b3bc051a62?source=collection_archive---------2-----------------------#2022-04-24">https://blog.devgenius.io/the-singleton-pattern-in-unity-b7b3bc051a62?source=collection_archive---------2-----------------------#2022-04-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="08a4" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">将类限制为一个“单个”实例。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7af9f754e3cbe3b5a0cde7f3b28c1049.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*_aVdWJoEF5aDWWPmfgjYdQ.png"/></div></div></figure><ul class=""><li id="37d9" class="ko kp in kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">确保该类只有一个实例。</li><li id="a173" class="ko kp in kq b kr lg kt lh kv li kx lj kz lk lb lc ld le lf bi translated">无需引用就可以从任何地方轻松访问该类。</li></ul><p id="2f88" class="pw-post-body-paragraph ll lm in kq b kr ks jo ln kt ku jr lo kv lp lq lr kx ls lt lu kz lv lw lx lb ig bi translated">关于这种模式有很多争论，因为它引入了全局状态，并且它也打破了可靠的单一责任原则(该类现在负责做两件事(该类的设计目的和确保只有一个实例)。</p><h1 id="0d94" class="ly lz in bd ma mb mc md me mf mg mh mi jt mj ju mk jw ml jx mm jz mn ka mo mp bi translated">履行</h1><p id="7fd4" class="pw-post-body-paragraph ll lm in kq b kr mq jo ln kt mr jr lo kv ms lq lr kx mt lt lu kz mu lw lx lb ig bi translated">首先，我们需要创建该类的私有静态实例，并在 Awake 方法中初始化它。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mv"><img src="../Images/b55b8df19c8623941edceee5d160961f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*T1VQz2Z0NVjVA5xc9zhyfw.gif"/></div></div></figure><p id="6a8d" class="pw-post-body-paragraph ll lm in kq b kr ks jo ln kt ku jr lo kv lp lq lr kx ls lt lu kz lv lw lx lb ig bi translated">我们还想确保在场景重新加载时不会破坏游戏对象。使用“加载时不破坏”的组件必须在父游戏对象上。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mw"><img src="../Images/1d5a80efd3d730ccb27580d5c93f8210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KUM8lFfYZWBp9_D7oTJJYg.gif"/></div></div></figure><p id="c36a" class="pw-post-body-paragraph ll lm in kq b kr ks jo ln kt ku jr lo kv lp lq lr kx ls lt lu kz lv lw lx lb ig bi translated">现在我们需要添加公共的 Get 实例方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mv"><img src="../Images/7584420afadfdf0cadbb1fd39948d74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*PmcTTNEjxVwK7Wi9nIHF2A.gif"/></div></div></figure><p id="abee" class="pw-post-body-paragraph ll lm in kq b kr ks jo ln kt ku jr lo kv lp lq lr kx ls lt lu kz lv lw lx lb ig bi translated">现在我们需要让班级播放环境音乐的音频剪辑。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mx"><img src="../Images/548cfa7e854f47fc2da547820ffc646e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hHkk5AH_5fJPIWYSGK2c3w.gif"/></div></div></figure><p id="65ef" class="pw-post-body-paragraph ll lm in kq b kr ks jo ln kt ku jr lo kv lp lq lr kx ls lt lu kz lv lw lx lb ig bi translated">现在从任何我想播放环境音乐的脚本中，我需要做的就是告诉 Singleton 播放剪辑。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi my"><img src="../Images/eb1c526f96f957f643d7563c3984bed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nEtFTI_-MBEUH3faWADsiQ.gif"/></div></div></figure><p id="039e" class="pw-post-body-paragraph ll lm in kq b kr ks jo ln kt ku jr lo kv lp lq lr kx ls lt lu kz lv lw lx lb ig bi translated">现在，当我运行游戏时，它会播放其中一段音乐。如果我按下 R 键，场景会重新载入，并且场景中只有一个环境玩家。请注意，每次场景重新加载时，我都会收到一个警告，告诉我场景中已经有一个环境玩家了。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mz"><img src="../Images/e0348d3fcd3e2b0a2b1690af6b1dc542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*q7UlsmdtpVjMzD7OhFlihw.gif"/></div></div></figure><h1 id="c8e9" class="ly lz in bd ma mb mc md me mf mg mh mi jt mj ju mk jw ml jx mm jz mn ka mo mp bi translated">结论</h1><p id="34db" class="pw-post-body-paragraph ll lm in kq b kr mq jo ln kt mr jr lo kv ms lq lr kx mt lt lu kz mu lw lx lb ig bi translated">单例模式解决了几个问题。</p><ul class=""><li id="9e6e" class="ko kp in kq b kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">确保该类只有一个实例。</li><li id="1743" class="ko kp in kq b kr lg kt lh kv li kx lj kz lk lb lc ld le lf bi translated">无需引用就可以从任何地方轻松访问该类。</li></ul><p id="75c3" class="pw-post-body-paragraph ll lm in kq b kr ks jo ln kt ku jr lo kv lp lq lr kx ls lt lu kz lv lw lx lb ig bi translated">为了在 Unity 中使用它，你也无用地让它成为一个持久的游戏对象。有更好的方法在你的游戏中拥有持久的游戏对象，也就是持久的游戏对象生成者。</p><p id="8510" class="pw-post-body-paragraph ll lm in kq b kr ks jo ln kt ku jr lo kv lp lq lr kx ls lt lu kz lv lw lx lb ig bi translated">这确实在 Unity 中造成了一些问题(你必须在至少一个场景中设置它),在使用它之前，它会将错误引入到你的项目中，它打破了坚实的原则，并且你会将全局状态引入到你的游戏中。就我个人而言，我尽量避免这种模式。</p></div></div>    
</body>
</html>