<html>
<head>
<title>This Simple Code Allows You To Use Face ID On Mac</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">这个简单的代码允许你在 Mac 上使用 Face ID</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/this-simple-code-allows-you-to-use-face-id-on-mac-29fc8334f080?source=collection_archive---------19-----------------------#2020-06-14">https://blog.devgenius.io/this-simple-code-allows-you-to-use-face-id-on-mac-29fc8334f080?source=collection_archive---------19-----------------------#2020-06-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ecf4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">iPhone，iPad，windows 笔记本电脑都有人脸识别，为什么 Mac 没有？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/bbc7d773b9936fd18c68e7dfc2e427b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZyPFqxMMmh5__8y8aKdj1A.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Kari Shea 在 Unsplash 上拍摄的照片</figcaption></figure><p id="5d60" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每次打开 mac 的盖子都要输入冗长的密码，这让我很沮丧。我的手机和 Ipad 有 Face ID，为什么 Mac 没有？</p><p id="1c79" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">每当我家里有客人/表亲时，如果我不得不在我的 Mac 上给他们看一些东西，快速键入我的密码会感觉很奇怪，这样他们就看不出我在键入什么。我们都经历过类似的情况，不是吗？。</p><p id="d369" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是我在 YouTube 上展示最终结果的有趣视频的链接。</p><h1 id="bbbe" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">让我们解决这个问题</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">来源:thedailyshow.com/<a class="ae lr" href="https://thedailyshow.com/" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><p id="6714" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你需要几样东西来开始</p><p id="78fa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用于 mac 的 Python 3 和<a class="ae lr" href="https://www.bernhard-baehr.de/" rel="noopener ugc nofollow" target="_blank">睡眠监视器</a>。此外，请确保 pip 正常工作，以便安装所需的库。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="9d45" class="ls lt iq bd lu lv mt lx ly lz mu mb mc jw mv jx me jz mw ka mg kc mx kd mi mj bi translated">收集图像</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="b983" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们需要收集图像来训练我们的模型。</p><p id="bc8b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们从导入 cv2 开始，它允许我们处理图像，并用它做很多事情。pickle 允许我们将 python 对象转换成字节流，以文件的形式存储(我们现在不需要它)。os 允许我们在这段代码中查找和检查文件和文件夹。时间允许我们暂停脚本，以便我们可以轻松地收集图像。pathlib 允许我们获得所有文件所在目录的路径。然后我们加载<a class="ae lr" href="https://github.com/opencv/opencv/tree/master/data/haarcascades" rel="noopener ugc nofollow" target="_blank"> haar_cascade </a>来检测人脸。下面的 while 循环检查图像中是否有人脸，并收集有人脸的图像，并将它们存储在名为 Images/{name}的文件夹中。姓名是用户输入的人员姓名。</p><p id="9700" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">完整的代码和所有可用的文件<a class="ae lr" href="https://github.com/patni11/Face_ID" rel="noopener ugc nofollow" target="_blank">在这里</a> :-</p><div class="my mz gp gr na nb"><a href="https://github.com/patni11/Face_ID" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">patni11/Face_ID</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">github.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np kp nb"/></div></div></a></div><p id="2087" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们已经收集了图像，我们需要训练我们的模型。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="5eed" class="ls lt iq bd lu lv mt lx ly lz mu mb mc jw mv jx me jz mw ka mg kc mx kd mi mj bi translated">训练模型</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="c8f4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们将使用 LBPH 人脸识别器。我找到了一篇由 Kelvin Salton do Prado 撰写的极好的文章，解释了这个概念。</p><div class="my mz gp gr na nb"><a href="https://towardsdatascience.com/face-recognition-how-lbph-works-90ec258c3d6b" rel="noopener follow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">人脸识别:理解 LBPH 算法</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">人类每天都在自动进行人脸识别，几乎不费吹灰之力。</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">towardsdatascience.com</p></div></div><div class="nk l"><div class="ns l nm nn no nk np kp nb"/></div></div></a></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nt"><img src="../Images/617b104c485df27eb6c897eaec677ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lu6pvG1jI8Jtfx7GGlYS3Q.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">那是我的一张非常糟糕的照片</figcaption></figure><p id="cf04" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在 for 循环中，我们首先找到存储在 images 目录中的所有图像。现在，我们使用之前创建的文件夹名称提取它们的标签。现在每张图像都被转换成灰度，然后我们得到感兴趣的区域(只有人脸存在的区域)。</p><p id="68d7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们在最后 3 行中训练 LBPH 识别器，并将面部特征数据保存在 trained.yml 文件中，将标签保存在 label.pickle 文件中。注意—请收集一个人以上的图像，因为分类器无法针对一个单独的类别进行训练。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="7c7d" class="ls lt iq bd lu lv mt lx ly lz mu mb mc jw mv jx me jz mw ka mg kc mx kd mi mj bi translated">创建面部检测器</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="5628" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是面部检测器，你可以在多个项目中使用它。它类似于 collecting_images.py 文件，不同之处在于它以图像和坐标的形式返回面部区域，而不是保存图像。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="d2e4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是项目的主要文件，它结合了我们到目前为止所做的一切。playsound 库是可选的，但它允许你一登录就播放音乐，你可以通过注释掉它。确保您安装了 pyautogui，这允许我们的代码键入密码。</p><p id="ff9c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，首先我们加载我们的 trained.yml 文件以使用所收集的关于面部的数据，然后我们使用我们在上面创建的面部检测器类来获得感兴趣的区域，即带有坐标的面部，然后我们打开我们的 labels.pickle 文件以获得我们为其保存图像的所有用户的姓名。现在，我们使用我们的识别器(rec ),并将感兴趣区域传递给它，以获得被检测人的姓名和置信度，即我们的分类器有多确定被检测人确实是那个人。如果置信度大于 80%，并且检测到的人的名字是“shubh”(即我)，那么它会键入密码(在我的情况下是“Microsoft_Sucks”，请将其更改为您的密码)，然后自动按 enter 键。你应该把那部分改成你的名字，你也可以用‘或’来允许更多的人访问。我还添加了每次欢迎我的代码，你可以根据自己的需要进行编辑。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="439c" class="ls lt iq bd lu lv mt lx ly lz mu mb mc jw mv jx me jz mw ka mg kc mx kd mi mj bi translated">还缺少一样东西</h1><p id="a247" class="pw-post-body-paragraph kv kw iq kx b ky nu jr la lb nv ju ld le nw lg lh li nx lk ll lm ny lo lp lq ij bi translated">我们还没有告诉计算机在唤醒时运行这个代码，让我们这样做。</p><p id="6242" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此我们需要使用 sleepwatcher，你可以从这里下载:<a class="ae lr" href="https://www.bernhard-baehr.de/" rel="noopener ugc nofollow" target="_blank">https://www.bernhard-baehr.de/</a>。确保你把所有的东西都放在桌面上的一个文件夹里。现在我已经准备了一个 bash 脚本来完成设置，并完成您需要做的一切。</p><p id="10b0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但在此之前，只需创建这个小文件:-</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="90c8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，这个 bash 脚本由 sleepwatcher 在登录时运行，这个脚本调用我们的 Face_ID.py 文件。我不能直接从 sleepwatcher 运行 Face_ID.py，因为我得到了权限错误，即使我给了它所有的权限，如果你知道原因，请评论。</p><p id="a366" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在让我们创建完成设置的最终文件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="2a81" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个文件完成了 sleepwatcher 的设置，开始收集 _images.py，创建 _files.py，现在可以退出代码，退出程序了。</p><p id="e25d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">打开终端并运行这段代码来启动程序。</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="1b2b" class="oe lt iq oa b gy of og l oh oi">/usr/local/sbin/sleepwatcher --verbose --wakeup ~/Desktop/Face_ID/hello.sh</span></pre><p id="37ea" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您有任何问题，请在 G <a class="ae lr" href="https://github.com/patni11/Face_ID" rel="noopener ugc nofollow" target="_blank"> itHub </a>上检查我的目录结构。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><p id="7160" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有什么改进这段代码的想法吗？下面让我知道。</p></div></div>    
</body>
</html>