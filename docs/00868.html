<html>
<head>
<title>The Optional Chaining Operator in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript 中可选的链接操作符</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-optional-chaining-operator-in-javascript-59fa7a5c7dd5?source=collection_archive---------14-----------------------#2020-06-18">https://blog.devgenius.io/the-optional-chaining-operator-in-javascript-59fa7a5c7dd5?source=collection_archive---------14-----------------------#2020-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3c7a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">和建议的支持对象析构的语法</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d20a94ddbd0eeae1238b37ea5123ef5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MWOrMgfgJMrWLiw5GV21WA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated"><a class="ae kv" href="https://unsplash.com/@_miltiadis_?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Miltiadis frakkidis</a>在<a class="ae kv" href="/s/photos/chains?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="9cbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ES2020 的这一功能允许您随意访问属性，而不必检查对象是否已定义或是否为空。想象一个<code class="fe ls lt lu lv b">user</code>物体，它包含<code class="fe ls lt lu lv b">username</code>、<code class="fe ls lt lu lv b">id</code>和<code class="fe ls lt lu lv b">name</code>。您可以像这样访问属性。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="9733" class="ma mb iq lv b gy mc md l me mf">var id = user.id</span></pre><p id="4274" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，如果<code class="fe ls lt lu lv b">user</code>因为某种原因是<code class="fe ls lt lu lv b">undefined </code>或<code class="fe ls lt lu lv b">null</code>，这将会破坏你的代码。传统上，要有条件地访问属性并将它们存储为变量，您需要编写如下代码。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="14c5" class="ma mb iq lv b gy mc md l me mf">var id = user ? user.id : null </span></pre><p id="b9d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">多亏了 ES2020 和<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank">可选链接操作符</a>，我们可以使用<code class="fe ls lt lu lv b">?.</code>缩短上面的代码。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="8bc6" class="ma mb iq lv b gy mc md l me mf">var id = user?.id</span></pre><p id="c70b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该语法将检查是否定义了<code class="fe ls lt lu lv b">user</code>。如果是，它将尝试访问属性，否则返回值是<code class="fe ls lt lu lv b">undefined</code>。这使我们不必编写上面的三元语法。酷！大多数现代浏览器支持这种语法，但也有一些不支持。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/d3958c45802d87a5f5d93d5c800eddb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EmhWNcrxiorb_eeeHGnv5Q.png"/></div></div></figure><p id="b50c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管这种语法很方便，但我注意到有一个地方可以改进。</p><h2 id="66ab" class="ma mb iq bd mh mi mj dn mk ml mm dp mn lf mo mp mq lj mr ms mt ln mu mv mw mx bi translated">与对象析构一起使用</h2><p id="fa73" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank">对象析构</a>是一个有用的简写，当试图用相同的名字将对象属性存储为变量时。在<code class="fe ls lt lu lv b">user</code>对象中，我们可以将所有属性存储在同名变量中，如下所示。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="77ce" class="ma mb iq lv b gy mc md l me mf">const {id, name, username} = user</span></pre><p id="3062" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这让我们不必在剩下的代码中编写<code class="fe ls lt lu lv b">user.KEY</code>。为了使用它并说明<code class="fe ls lt lu lv b">user</code>是<code class="fe ls lt lu lv b">undefined</code>还是<code class="fe ls lt lu lv b">null</code>，你必须编写如下代码。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="f95e" class="ma mb iq lv b gy mc md l me mf">const {id, name, username} = user ? user : {}</span></pre><p id="8d97" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然这看起来像是可选链接操作符的工作，但 ES2020 目前不支持它。当开发社区的成员在<a class="ae kv" href="https://github.com/tc39/proposal-optional-chaining/issues/74" rel="noopener ugc nofollow" target="_blank">讨论</a>关于深度嵌套对象的问题时，我只想使用对象析构来访问我的所有属性。潜在的语法可能如下所示。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="7ba1" class="ma mb iq lv b gy mc md l me mf">const {id, name, username} = user?.*</span></pre><p id="a85c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想到这个语法是因为它让人想起使用<code class="fe ls lt lu lv b">import * as A from 'abc'</code>将导入在<code class="fe ls lt lu lv b">'abc'</code>中标记为导出的所有内容。这些出口可以通过<code class="fe ls lt lu lv b">A.EXPORT_NAME</code>进入。我也觉得这可能是一个比简单地允许用户让可选的链接操作符保持开放更好的选择。</p><pre class="kg kh ki kj gt lw lv lx ly aw lz bi"><span id="ad9b" class="ma mb iq lv b gy mc md l me mf">const {id, name, username} = user?.</span></pre><p id="72a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想指出的是，我从未参与过 JavaScript 语法的更新、修改或介绍，因此也没有这方面的经验。如果这可行(或不可行),请告诉我！我很想了解更多关于特性/语法开发的知识。请随意提出您自己的可能实现这一功能的语法建议。</p></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="18d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://matt-croak.medium.com/membership" rel="noopener"> <em class="nk">在此将您的免费媒体会员升级为付费会员</em> </a> <em class="nk">，每月只需 5 美元，您就可以获得数千位作家的无限量无广告故事。这是一个附属链接，你的会员资格的一部分帮助我为我创造的内容获得奖励。谢谢大家！</em></p><h1 id="b5fc" class="nl mb iq bd mh nm nn no mk np nq nr mn jw ns jx mq jz nt ka mt kc nu kd mw nv bi translated">参考</h1><div class="nw nx gp gr ny nz"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">可选链接(？。)</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">可选的链接操作符()允许读取一个位于连接的…链深处的属性值</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">developer.mozilla.org</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kp nz"/></div></div></a></div><div class="nw nx gp gr ny nz"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">解构分配</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">析构赋值语法是一个 JavaScript 表达式，它使得从数组中解包值成为可能，或者…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">developer.mozilla.org</p></div></div><div class="oi l"><div class="oo l ok ol om oi on kp nz"/></div></div></a></div><div class="nw nx gp gr ny nz"><a href="https://github.com/tc39/proposal-optional-chaining/issues/74" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">析构语法问题# 74 tc39/建议-可选-链接</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">怎么样:const obj = { foo: { bar: { baz: 42，}，}，}；// const baz = obj？。foo？。酒吧？。巴兹；const { baz } =…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">github.com</p></div></div><div class="oi l"><div class="op l ok ol om oi on kp nz"/></div></div></a></div></div></div>    
</body>
</html>