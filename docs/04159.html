<html>
<head>
<title>How to Fix Your CI to Avoid Apple’s 2FA</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何修复你的CI避免苹果的2FA</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-fix-your-ci-to-avoid-apple-2fa-e1b101555dc1?source=collection_archive---------1-----------------------#2021-02-03">https://blog.devgenius.io/how-to-fix-your-ci-to-avoid-apple-2fa-e1b101555dc1?source=collection_archive---------1-----------------------#2021-02-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1059" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">快速简便地将通过浪子设置的配置项迁移到Appstore Connect API</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/842f8f1c470af35c73b5a53d9c020bde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UrwZQmOQkl2ctJSv"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@ffstop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Fotis Fotopoulos </a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="e5b6" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">苹果2FA</h1><p id="1fb7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你们还记得，<strong class="lq ir">2019年2月20日</strong>，苹果宣布了2FA消息</p><blockquote class="mk"><p id="cc0a" class="ml mm iq bd mn mo mp mq mr ms mt mj dk translated">为了使帐户更加安全，从2019年2月27日开始，在开发者计划中担任帐户持有人角色的开发者需要启用双因素身份验证来登录他们的苹果开发者帐户和证书、标识符和个人资料。你的Apple ID的这一额外安全层有助于确保你是唯一可以访问你的帐户的人。</p></blockquote><p id="8aaf" class="pw-post-body-paragraph lo lp iq lq b lr mu jr lt lu mv ju lw lx mw lz ma mb mx md me mf my mh mi mj ij bi translated">对于新的Apple帐户，2FA是强制性的，但以前旧帐户切换到新的2FA认证是可选的。但是最近苹果公司甚至给老账户持有人发了邮件，所以现在我们不能避免2FA，这将导致破坏你的CI，如果它是用这样的账户设置的。</p><p id="0b63" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">当我遇到这个问题时，有几篇文章用不同的方法来解决2FA问题。</p><ul class=""><li id="4456" class="ne nf iq lq b lr mz lu na lx ng mb nh mf ni mj nj nk nl nm bi translated">短信解析器使用<a class="ae kv" href="https://www.twilio.com" rel="noopener ugc nofollow" target="_blank"> Twilio </a></li><li id="04cb" class="ne nf iq lq b lr nn lu no lx np mb nq mf nr mj nj nk nl nm bi translated">2FA发电机</li><li id="f777" class="ne nf iq lq b lr nn lu no lx np mb nq mf nr mj nj nk nl nm bi translated">特定于应用程序的密码</li><li id="25b6" class="ne nf iq lq b lr nn lu no lx np mb nq mf nr mj nj nk nl nm bi translated">Appstore连接API</li></ul><p id="f1b8" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">但是最后一种<strong class="lq ir"> (Appstore Connect API) </strong>是我发现的最好的方法，它只需花费最少的精力和时间来迁移我们的CI，而不会破坏它。</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h1 id="8b2a" class="kw kx iq bd ky kz nz lb lc ld oa lf lg jw ob jx li jz oc ka lk kc od kd lm ln bi translated">先决条件</h1><p id="d3c1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">下面是使您的CI为您工作的先决条件，但是同样，如果您的CI没有以相同的方式设置，您肯定可以转到下面的方法。</p><ul class=""><li id="c139" class="ne nf iq lq b lr mz lu na lx ng mb nh mf ni mj nj nk nl nm bi translated">浪子融入您的CI</li><li id="35d8" class="ne nf iq lq b lr nn lu no lx np mb nq mf nr mj nj nk nl nm bi translated">Appstore connect帐户(Apple开发者帐户)</li></ul></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h1 id="7571" class="kw kx iq bd ky kz nz lb lc ld oa lf lg jw ob jx li jz oc ka lk kc od kd lm ln bi translated">对Appstore连接API的浪子支持</h1><p id="b303" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">浪子增加了对2018年WWDC发布的新Appstore connect API的支持。</p><p id="2e3d" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">然而，并不是所有的API都与这个新的API集成在一起。以下是支持这一新API的工具/操作，有关更多详细信息，请查看此<a class="ae kv" href="https://docs.fastlane.tools/app-store-connect-api/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">链接</strong> </a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/460fccd84124b7a68affc543fe815be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fidfC7EEfErtzVBGTRpiqg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">浪子行动支持表</figcaption></figure></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h1 id="0af8" class="kw kx iq bd ky kz nz lb lc ld oa lf lg jw ob jx li jz oc ka lk kc od kd lm ln bi translated">Appstore连接API</h1><p id="47b6" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">以下是我们在浪子整合Appstore connect API所需的3样东西</p><ul class=""><li id="a985" class="ne nf iq lq b lr mz lu na lx ng mb nh mf ni mj nj nk nl nm bi translated">密钥id</li><li id="0cb4" class="ne nf iq lq b lr nn lu no lx np mb nq mf nr mj nj nk nl nm bi translated">发行人id</li><li id="8e88" class="ne nf iq lq b lr nn lu no lx np mb nq mf nr mj nj nk nl nm bi translated">. p8文件</li></ul><p id="0511" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">你必须创建一个密钥并收集所有这些信息，点击这个<a class="ae kv" href="https://appstoreconnect.apple.com/access/api/new" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">链接</strong> </a>开始。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl of"><img src="../Images/a060ddead2dc5296949dc416513b9b83.png" data-original-src="https://miro.medium.com/v2/0*syyCKaj37YZYU0pM"/></div></figure></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h1 id="1046" class="kw kx iq bd ky kz nz lb lc ld oa lf lg jw ob jx li jz oc ka lk kc od kd lm ln bi translated">更新快速文件中的车道</h1><p id="a4ad" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">现在迁移所有上传二进制动作的通道，在我的例子中，我使用的是deliver和pilot。</p><p id="3b07" class="pw-post-body-paragraph lo lp iq lq b lr mz jr lt lu na ju lw lx nb lz ma mb nc md me mf nd mh mi mj ij bi translated">浪子不支持使用Appstore连接API的工具/操作。下面我已经分享了一个<strong class="lq ir">飞行员</strong>动作的例子。跟随此<a class="ae kv" href="https://docs.fastlane.tools/app-store-connect-api/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq ir">链接</strong> </a>查看浪子支持Appstore Connect API的动作/工具列表。</p><pre class="kg kh ki kj gt og oh oi oj aw ok bi"><span id="68db" class="ol kx iq oh b gy om on l oo op">lane :testflight_upload do<br/>  gym(… configuration params …)<br/>  api_key = app_store_connect_api_key(<br/>    key_id: “Your Key id”,<br/>    issuer_id: “Your Issuer Id”,<br/>    key_filepath: “.p8 File path”<br/>  )<br/>  pilot(api_key: api_key, <br/>        … more configuration params …<br/>  )<br/>end</span></pre></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h1 id="4bc1" class="kw kx iq bd ky kz nz lb lc ld oa lf lg jw ob jx li jz oc ka lk kc od kd lm ln bi translated">结论</h1><p id="f6e4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">就这样，搞定。我们已经成功地从Apple ID实现迁移到Appstore Connect API。下面我分享了一些帮助我做出这个决定的好的参考资料，希望这篇文章能帮助你顺利地迁移你的CI。</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><h1 id="4c1d" class="kw kx iq bd ky kz nz lb lc ld oa lf lg jw ob jx li jz oc ka lk kc od kd lm ln bi translated">参考</h1><ul class=""><li id="b115" class="ne nf iq lq b lr ls lu lv lx oq mb or mf os mj nj nk nl nm bi translated"><a class="ae kv" href="https://developer.apple.com/videos/play/wwdc2018/303/" rel="noopener ugc nofollow" target="_blank"> WWDC 2018 Appstore连接API </a></li><li id="5ed4" class="ne nf iq lq b lr nn lu no lx np mb nq mf nr mj nj nk nl nm bi translated"><a class="ae kv" href="https://docs.fastlane.tools/app-store-connect-api/" rel="noopener ugc nofollow" target="_blank">浪子应用商店连接API </a></li></ul></div></div>    
</body>
</html>