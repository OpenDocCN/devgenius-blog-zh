<html>
<head>
<title>Variadic Template C++: Implementing Unsophisticated Tuple</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¯å˜æ¨¡æ¿ C++:å®ç°ç®€å•çš„å…ƒç»„</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/variadic-template-c-implementing-unsophisticated-tuple-b5fb1cf70d0?source=collection_archive---------23-----------------------#2020-06-15">https://blog.devgenius.io/variadic-template-c-implementing-unsophisticated-tuple-b5fb1cf70d0?source=collection_archive---------23-----------------------#2020-06-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/189e17098d5fd30ad3dda315332764bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d6oNEuiiktvUYsmt0qrsIA.png"/></div></div></figure><p id="51f9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä» C++11 å¼€å§‹ï¼Œ<code class="fe kw kx ky kz b"><a class="ae la" href="https://en.cppreference.com/w/cpp/utility/tuple" rel="noopener ugc nofollow" target="_blank">std::tuple</a></code>æ˜¯å¯¹<a class="ae la" href="http://www.vishalchovatiya.com/21-new-features-of-modern-cpp-to-use-in-your-project/" rel="noopener ugc nofollow" target="_blank">ç°ä»£ C++ </a>çš„æƒŠäººæ‰©å±•ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå›ºå®šå¤§å°çš„ä¸åŒå€¼çš„é›†åˆã€‚å½“ç„¶ï¼Œç”¨ä¼ ç»Ÿçš„æ–¹å¼æ¥å¤„ç†è¿™äº›é—®é¢˜å¯èƒ½ä¼šæœ‰äº›å¯ç–‘ã€‚ä½†æ˜¯ï¼Œéšåå‘å¸ƒçš„ C++æ ‡å‡†å¼•å…¥äº†å‡ ä¸ªç‰¹æ€§&amp;åŠ©æ‰‹ï¼Œå¤§å¤§å‡å°‘äº†å¿…è¦çš„å·¥ä½œé‡ã€‚å› æ­¤ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å€ŸåŠ©ç®€å•çš„å…ƒç»„å®ç°æ¥è§£é‡Š C++ä¸­çš„å˜é‡æ¨¡æ¿ã€‚å¹¶å¸¦æ‚¨äº†è§£ tuple çš„ä¸€ä¸ªæ£˜æ‰‹éƒ¨åˆ†ï¼Œå³ tuple å…ƒç´ çš„å¾ªç¯ã€‚å°½ç®¡äº‹å®ä¸Šæˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­å·²ç»æ©ç›–äº†å¯å˜æ¨¡æ¿ï¼Œå³<a class="ae la" href="http://www.vishalchovatiya.com/cpp-template-a-quick-uptodate-look/" rel="noopener ugc nofollow" target="_blank"> C++æ¨¡æ¿:å¿«é€Ÿæ›´æ–°æŸ¥çœ‹</a>ã€‚å› æ­¤ï¼Œæˆ‘åœ¨è¿™é‡Œçš„é‡ç‚¹æ˜¯æ··åˆå¯å˜æ¨¡æ¿&amp;å…ƒç»„å®ç°å’Œæ›´å¤šæœ€æ–°çš„ C++è§„èŒƒã€‚</p><blockquote class="lb lc ld"><p id="3fee" class="jy jz le ka b kb kc kd ke kf kg kh ki lf kk kl km lg ko kp kq lh ks kt ku kv ij bi translated"><em class="iq"> /ï¼\:åŸè½½@ www.vishalchovatiya.com</em><a class="ae la" href="http://www.vishalchovatiya.com/" rel="noopener ugc nofollow" target="_blank"><em class="iq"/></a><em class="iq">ã€‚</em></p></blockquote><h1 id="f884" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">åŠ¨æœº</h1><ul class=""><li id="48f6" class="mg mh iq ka b kb mi kf mj kj mk kn ml kr mm kv mn mo mp mq bi translated">å®šä¹‰æ¥å—å¯å˜æ•°é‡å’Œç±»å‹çš„å‚æ•°çš„ç±»/ç»“æ„/è”åˆ/å‡½æ•°é€šå¸¸å¾ˆæœ‰ç”¨ã€‚</li><li id="140b" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">å¦‚æœä½ å·²ç»ä½¿ç”¨è¿‡ C è¯­è¨€ï¼Œä½ ä¼šçŸ¥é“<code class="fe kw kx ky kz b">printf</code>å‡½æ•°å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ã€‚è¿™äº›åŠŸèƒ½å®Œå…¨é€šè¿‡å®æˆ–<a class="ae la" href="https://stackoverflow.com/questions/3792761/what-is-ellipsis-operator-in-c" rel="noopener ugc nofollow" target="_blank">çœç•¥å·è¿ç®—ç¬¦</a>å®ç°ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œå®ƒæœ‰å‡ ä¸ªç¼ºç‚¹ï¼Œå¦‚<a class="ae la" href="http://www.vishalchovatiya.com/cpp-type-casting-with-example-for-c-developers/" rel="noopener ugc nofollow" target="_blank">ç±»å‹å®‰å…¨</a>ï¼Œä¸èƒ½æ¥å—å¼•ç”¨ä½œä¸ºå‚æ•°ï¼Œç­‰ç­‰ã€‚</li></ul><h1 id="eba0" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">å¯å˜ç±»æ¨¡æ¿:å®ç°å…ƒç»„ç±»</h1><ul class=""><li id="d17c" class="mg mh iq ka b kb mi kf mj kj mk kn ml kr mm kv mn mo mp mq bi translated">æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å€ŸåŠ©å˜é‡æ¨¡æ¿æ„å»ºè‡ªå·±çš„<a class="ae la" href="https://en.wikipedia.org/wiki/Abstract_data_type" rel="noopener ugc nofollow" target="_blank"> ADT </a>å’Œ<code class="fe kw kx ky kz b"><a class="ae la" href="https://en.cppreference.com/w/cpp/utility/tuple" rel="noopener ugc nofollow" target="_blank">std::tuple</a></code>ä¸€æ ·ã€‚</li><li id="2d8e" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">C++ä¸­çš„å˜é‡æ¨¡æ¿é€šå¸¸ä»é€šç”¨(ç©º)å®šä¹‰å¼€å§‹ï¼Œè¿™ä¹Ÿæ˜¯åé¢ä¸“é—¨åŒ–ä¸­æ¨¡æ¿é€’å½’ç»ˆæ­¢çš„åŸºç¡€:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="455e" class="ne lj iq kz b gy nf ng l nh ni">template &lt;typename... T&gt;<br/>struct Tuple { };</span></pre><ul class=""><li id="97d1" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">è¿™å·²ç»å…è®¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç©ºç»“æ„ï¼Œå³<code class="fe kw kx ky kz b">Tuple&lt;&gt; object;</code>ï¼Œå°½ç®¡è¿™è¿˜ä¸æ˜¯å¾ˆæœ‰ç”¨ã€‚æ¥ä¸‹æ¥æ˜¯é€’å½’æ¡ˆä¾‹ä¸“é—¨åŒ–:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="066b" class="ne lj iq kz b gy nf ng l nh ni">template&lt;<br/>            typename T, <br/>            typename... Rest    // Template parameter pack<br/>        &gt;<br/>struct Tuple&lt;T, Rest...&gt; {      // Class parameter pack<br/>    T first;<br/>    Tuple&lt;Rest...&gt; rest;        // Parameter pack expansion</span><span id="8d48" class="ne lj iq kz b gy nm ng l nh ni">    Tuple(const T&amp; f, const Rest&amp; ... r)<br/>        : first(f)<br/>        , rest(r...) {<br/>    }<br/>};</span><span id="6f2b" class="ne lj iq kz b gy nm ng l nh ni">Tuple&lt;bool&gt;                 t1(false);           // Case 1<br/>Tuple&lt;int, char, string&gt;    t2(1, 'a', "ABC");   // Case 2</span></pre><h1 id="fe8c" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">å¯å˜ç±»æ¨¡æ¿æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h1><p id="cf46" class="pw-post-body-paragraph jy jz iq ka b kb mi kd ke kf mj kh ki kj nn kl km kn no kp kq kr np kt ku kv ij bi translated">ä¸ºäº†ç†è§£å¯å˜ç±»æ¨¡æ¿ï¼Œè€ƒè™‘ä¸Šé¢çš„ç”¨ä¾‹ 2ï¼Œå³<code class="fe kw kx ky kz b">Tuple&lt;int, char, string&gt; t2(1, 'a', "ABC");</code></p><ul class=""><li id="486b" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">å£°æ˜é¦–å…ˆåŒ¹é…ä¸“é—¨åŒ–ï¼Œäº§ç”Ÿä¸€ä¸ªå…·æœ‰<code class="fe kw kx ky kz b">int first;</code>å’Œ<code class="fe kw kx ky kz b">Tuple&lt;char, string&gt; rest;</code>æ•°æ®æˆå‘˜çš„ç»“æ„ã€‚</li><li id="f463" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">rest å®šä¹‰å†æ¬¡ä¸ä¸“é—¨åŒ–åŒ¹é…ï¼Œäº§ç”Ÿä¸€ä¸ªå…·æœ‰<code class="fe kw kx ky kz b">char first;</code>å’Œ<code class="fe kw kx ky kz b">Tuple&lt;string&gt; rest;</code>æ•°æ®æˆå‘˜çš„ç»“æ„ã€‚</li><li id="9e45" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">rest å®šä¹‰å†æ¬¡åŒ¹é…è¿™ä¸ªä¸“é—¨åŒ–ï¼Œåˆ›å»ºè‡ªå·±çš„<code class="fe kw kx ky kz b">string first;</code>å’Œ<code class="fe kw kx ky kz b">Tuple&lt;&gt; rest;</code>æˆå‘˜ã€‚</li><li id="c2ea" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">æœ€åï¼Œè¿™æœ€åä¸€ä¸ª rest ä¸åŸºæœ¬ç”¨ä¾‹å®šä¹‰ç›¸åŒ¹é…ï¼Œäº§ç”Ÿä¸€ä¸ªç©ºç»“æ„ã€‚</li></ul><p id="58e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‚¨å¯ä»¥è¿™æ ·æƒ³è±¡:</p><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="9b1b" class="ne lj iq kz b gy nf ng l nh ni">Tuple&lt;int, char, string&gt;<br/>-&gt; int first<br/>-&gt; Tuple&lt;char, string&gt; rest<br/>    -&gt; char first<br/>    -&gt; Tuple&lt;string&gt; rest<br/>        -&gt; string first<br/>        -&gt; Tuple&lt;&gt; rest<br/>            -&gt; (empty)</span></pre><h1 id="c307" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">å¯å˜å‡½æ•°æ¨¡æ¿:ä¸ºå…ƒç»„ç±»å®ç° get &lt;&gt;()å‡½æ•°</h1><ul class=""><li id="64e5" class="mg mh iq ka b kb mi kf mj kj mk kn ml kr mm kv mn mo mp mq bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»è®¾è®¡äº†å…·æœ‰å¯å˜æ•°é‡å’Œç±»å‹çš„æ•°æ®æˆå‘˜çš„æ•°æ®ç»“æ„ã€‚ä½†æ˜¯ï¼Œå®ƒä»ç„¶æ²¡æœ‰ç”¨ï¼Œå› ä¸ºæ²¡æœ‰ä»æˆ‘ä»¬çš„å…ƒç»„ç±»ä¸­æ£€ç´¢æ•°æ®çš„æœºåˆ¶ã€‚æ‰€ä»¥è®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ª:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="efbc" class="ne lj iq kz b gy nf ng l nh ni">template&lt;<br/>            size_t idx, <br/>            template &lt;typename...&gt; class Tuple, <br/>            typename... Args<br/>        &gt;<br/>auto get(Tuple&lt;Args...&gt; &amp;t) {<br/>    return GetHelper&lt;idx, Tuple&lt;Args...&gt;&gt;::get(t);<br/>}</span></pre><ul class=""><li id="cceb" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">å¦‚æ‚¨æ‰€è§ï¼Œè¿™ä¸ª get å‡½æ•°åœ¨<code class="fe kw kx ky kz b">idx</code>ä¸Šè¢«æ¨¡æ¿åŒ–äº†ã€‚æ‰€ä»¥ç”¨æ³•å¯ä»¥åƒ<code class="fe kw kx ky kz b">get&lt;1&gt;(t)</code>ï¼Œç±»ä¼¼<code class="fe kw kx ky kz b"><a class="ae la" href="https://en.cppreference.com/w/cpp/utility/tuple" rel="noopener ugc nofollow" target="_blank">std::tuple</a></code>ã€‚ç„¶è€Œï¼Œå®é™…çš„å·¥ä½œæ˜¯ç”±ä¸€ä¸ªåŠ©æ‰‹ç±»ä¸­çš„é™æ€å‡½æ•°å®Œæˆçš„ï¼Œä¾‹å¦‚<code class="fe kw kx ky kz b">GetHelper</code>ã€‚</li><li id="844f" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">è¿˜è¦æ³¨æ„ C++14 é£æ ¼çš„<code class="fe kw kx ky kz b">auto</code>è¿”å›ç±»å‹çš„ä½¿ç”¨ä½¿æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—éå¸¸ç®€å•ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ªéå¸¸å¤æ‚çš„è¿”å›ç±»å‹è¡¨è¾¾å¼ã€‚</li><li id="7010" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">å¦‚æ­¤ç»§ç»­åˆ°åŠ©æ‰‹ç±»ã€‚è¿™ä¸€æ¬¡æˆ‘ä»¬å°†éœ€è¦ä¸€ä¸ªç©ºçš„ forward å£°æ˜å’Œä¸¤ä¸ªä¸“é—¨åŒ–ã€‚é¦–å…ˆæ˜¯ç©ºçš„å£°æ˜:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="b9b4" class="ne lj iq kz b gy nf ng l nh ni">template&lt;<br/>            size_t idx, <br/>            typename T<br/>        &gt;<br/>struct GetHelper;</span></pre><ul class=""><li id="9017" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">ç°åœ¨æ˜¯åŸºæœ¬æƒ…å†µ(å½“<code class="fe kw kx ky kz b">idx==0</code>)ã€‚åœ¨è¿™ä¸ªä¸“é—¨åŒ–ä¸­ï¼Œæˆ‘ä»¬åªè¿”å›ç¬¬ä¸€ä¸ªæˆå‘˜:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="7c91" class="ne lj iq kz b gy nf ng l nh ni">template&lt;<br/>            typename T, <br/>            typename... Rest<br/>        &gt;<br/>struct GetHelper&lt;0, Tuple&lt;T, Rest...&gt;&gt; {<br/>    static T get(Tuple&lt;T, Rest...&gt; &amp;data) {<br/>        return data.first;<br/>    }<br/>};</span></pre><ul class=""><li id="7371" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">åœ¨é€’å½’æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€’å‡<code class="fe kw kx ky kz b">idx</code>å¹¶ä¸º rest æˆå‘˜è°ƒç”¨<code class="fe kw kx ky kz b">GetHelper</code>:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="862e" class="ne lj iq kz b gy nf ng l nh ni">template&lt;<br/>            size_t idx, <br/>            typename T, <br/>            typename... Rest<br/>        &gt;<br/>struct GetHelper&lt;idx, Tuple&lt;T, Rest...&gt;&gt; {<br/>    static auto get(Tuple&lt;T, Rest...&gt; &amp;data) {<br/>        return GetHelper&lt;idx - 1, Tuple&lt;Rest...&gt;&gt;::get(data.rest);<br/>    }<br/>};</span></pre><ul class=""><li id="3db8" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å…ƒç»„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦<code class="fe kw kx ky kz b">get&lt;1&gt;(data)</code>ã€‚</li><li id="61cf" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">è¿™è°ƒç”¨äº†<code class="fe kw kx ky kz b">GetHelper&lt;1, Tuple&lt;T, Rest...&gt;&gt;&gt;::get(data)</code>(ç¬¬äºŒä¸ªä¸“é—¨åŒ–)ã€‚</li><li id="eb05" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">è¿›è€Œè°ƒç”¨<code class="fe kw kx ky kz b">GetHelper&lt;0, Tuple&lt;T, Rest...&gt;&gt;&gt;::get(data.rest)</code>ã€‚</li><li id="3b49" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">å¹¶ä¸”æœ€ç»ˆè¿”å›(é€šè¿‡ç¬¬ä¸€æ¬¡ç‰¹åŒ–ï¼Œå› ä¸ºç°åœ¨<code class="fe kw kx ky kz b">idx</code>æ˜¯ 0) <code class="fe kw kx ky kz b">data.rest.first</code>ã€‚</li></ul><p id="be80" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åŸæ¥å¦‚æ­¤ï¼ä¸‹é¢æ˜¯å®Œæ•´çš„åŠŸèƒ½ä»£ç ï¼Œä»¥åŠ main å‡½æ•°ä¸­çš„ä¸€äº›ä½¿ç”¨ç¤ºä¾‹:</p><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="75b5" class="ne lj iq kz b gy nf ng l nh ni">// Forward Declaration &amp; Base Case -----------------------------------------<br/>template&lt;<br/>            size_t idx,<br/>            typename T<br/>        &gt;<br/>struct GetHelper { };</span><span id="55ea" class="ne lj iq kz b gy nm ng l nh ni">template &lt;typename... T&gt;<br/>struct Tuple { };<br/>// -------------------------------------------------------------------------</span><span id="9c03" class="ne lj iq kz b gy nm ng l nh ni">// GetHelper ---------------------------------------------------------------<br/>template&lt;<br/>            typename T,<br/>            typename... Rest<br/>        &gt;<br/>struct GetHelper&lt;0, Tuple&lt;T, Rest...&gt;&gt; { // Specialization for index 0<br/>    static T get(Tuple&lt;T, Rest...&gt; &amp;data) {<br/>        return data.first;<br/>    }<br/>};</span><span id="a2ff" class="ne lj iq kz b gy nm ng l nh ni">template&lt;<br/>            size_t idx,<br/>            typename T,<br/>            typename... Rest<br/>        &gt;<br/>struct GetHelper&lt;idx, Tuple&lt;T, Rest...&gt;&gt; { // GetHelper Implementation<br/>    static auto get(Tuple&lt;T, Rest...&gt; &amp;data) {<br/>        return GetHelper&lt;idx - 1, Tuple&lt;Rest...&gt;&gt;::get(data.rest);<br/>    }<br/>};<br/>// -------------------------------------------------------------------------</span><span id="fd6f" class="ne lj iq kz b gy nm ng l nh ni">// Tuple Implementation ----------------------------------------------------<br/>template&lt;<br/>            typename T,<br/>            typename... Rest<br/>        &gt;<br/>struct Tuple&lt;T, Rest...&gt; {<br/>    T                   first;<br/>    Tuple&lt;Rest...&gt;      rest;</span><span id="121f" class="ne lj iq kz b gy nm ng l nh ni">    Tuple(const T &amp;f, const Rest &amp;... r)<br/>        : first(f)<br/>        , rest(r...) {<br/>    }<br/>};<br/>// -------------------------------------------------------------------------<br/></span><span id="12b3" class="ne lj iq kz b gy nm ng l nh ni">// get Implementation ------------------------------------------------------<br/>template&lt;<br/>            size_t idx, <br/>            template &lt;typename...&gt; class Tuple, <br/>            typename... Args<br/>        &gt;<br/>auto get(Tuple&lt;Args...&gt; &amp;t) {<br/>    return GetHelper&lt;idx, Tuple&lt;Args...&gt;&gt;::get(t);<br/>}<br/>// -------------------------------------------------------------------------<br/></span><span id="ae42" class="ne lj iq kz b gy nm ng l nh ni">int main() {<br/>    Tuple&lt;int, char, string&gt; t(500, 'a', "ABC");<br/>    cout &lt;&lt; get&lt;1&gt;(t) &lt;&lt; endl;<br/>    return 0;<br/>}</span></pre><h1 id="4e65" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">å¯å˜æ¨¡æ¿ vs æŠ˜å è¡¨è¾¾å¼</h1><ul class=""><li id="7f59" class="mg mh iq ka b kb mi kf mj kj mk kn ml kr mm kv mn mo mp mq bi translated">æœ‰ä¸¤ç§æ–¹æ³•å¤„ç† C++å‚æ•°åŒ…ï¼Œå³</li></ul><ol class=""><li id="e89b" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv nq mo mp mq bi translated">é€’å½’</li><li id="822a" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv nq mo mp mq bi translated">æŠ˜å è¡¨è¾¾å¼(æ¥è‡ª C++17)</li></ol><ul class=""><li id="c43a" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">åœ¨ä»»ä½•å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ç”¨æŠ˜å è¡¨è¾¾å¼å¤„ç†å‚æ•°åŒ…ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é€’å½’ã€‚å› ä¸ºå®ƒæœ‰ä¸€äº›å¥½å¤„:</li><li id="1f94" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">éœ€è¦ç¼–å†™çš„ä»£ç æ›´å°‘</li><li id="c6f2" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">æ›´å¿«çš„ä»£ç (æ²¡æœ‰ä¼˜åŒ–)ï¼Œå› ä¸ºä½ åªæœ‰ä¸€ä¸ªå•ä¸€çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å¤šä¸ªå‡½æ•°è°ƒç”¨</li><li id="7692" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">ç¼–è¯‘é€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºæ‚¨å¤„ç†çš„æ¨¡æ¿å®ä¾‹æ›´å°‘</li></ul><h1 id="fdcb" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">ç”¨é€’å½’å¤„ç†å‚æ•°åŒ…</h1><ul class=""><li id="5036" class="mg mh iq ka b kb mi kf mj kj mk kn ml kr mm kv mn mo mp mq bi translated">æ­£å¦‚æˆ‘ä»¬å‰é¢çœ‹åˆ°çš„ï¼Œå¯å˜æ¨¡æ¿ä»ç©ºå®šä¹‰å¼€å§‹ï¼Œå³é€’å½’çš„åŸºæœ¬æƒ…å†µã€‚</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="6c55" class="ne lj iq kz b gy nf ng l nh ni">void  print()  {}</span></pre><ul class=""><li id="cfb2" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">ç„¶åæ˜¯é€’å½’æ¡ˆä¾‹ä¸“é—¨åŒ–:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="d129" class="ne lj iq kz b gy nf ng l nh ni">template&lt;   <br/>            typename First, <br/>            typename... Rest                    // Template parameter pack<br/>        &gt;     <br/>void print(First first, Rest... rest) {         // Function parameter pack<br/>    cout &lt;&lt; first &lt;&lt; endl;<br/>    print(rest...);                             // Parameter pack expansion<br/>}</span></pre><ul class=""><li id="8c03" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">è¿™å°±è¶³ä»¥è®©æˆ‘ä»¬ä½¿ç”¨å˜é‡æ•°ç›®å’Œå˜é‡ç±»å‹çš„æ‰“å°å‡½æ•°äº†ã€‚ä¾‹å¦‚:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="1a07" class="ne lj iq kz b gy nf ng l nh ni">print(500, 'a', "ABC");</span></pre><h1 id="ead2" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">ç”¨æŠ˜å è¡¨è¾¾å¼å¤„ç†å‚æ•°åŒ…</h1><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="c46a" class="ne lj iq kz b gy nf ng l nh ni">template &lt;typename... Args&gt;<br/>void print(Args... args) {<br/>    (void(cout &lt;&lt; args &lt;&lt; endl), ...);<br/>}</span></pre><ul class=""><li id="f00d" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">çœ‹ï¼Œä¸éœ€è¦ç¥ç§˜çš„æ ·æ¿ã€‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆçœ‹èµ·æ¥ä¸æ˜¯æ›´æ•´æ´å—ï¼Ÿ</li><li id="f3a3" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">æ€»å…±æœ‰ 3 ç§æŠ˜å æ–¹å¼:ä¸€å…ƒæŠ˜å ã€äºŒå…ƒæŠ˜å å’Œé€—å·æŠ˜å ã€‚è¿™é‡Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å¯¹é€—å·çš„å·¦æŠ˜å ã€‚ä½ å¯ä»¥ç‚¹å‡»é˜…è¯»æ›´å¤šå…³äºæŠ˜å è¡¨è¾¾å¼<a class="ae la" href="https://www.codingame.com/playgrounds/2205/7-features-of-c17-that-will-simplify-your-code/fold-expressions" rel="noopener ugc nofollow" target="_blank">çš„å†…å®¹ã€‚</a></li></ul><h1 id="9d44" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">åœ¨ C++ä¸­å¾ªç¯éå†/è¿­ä»£å…ƒç»„å…ƒç´ </h1><ul class=""><li id="a2a7" class="mg mh iq ka b kb mi kf mj kj mk kn ml kr mm kv mn mo mp mq bi translated">å¦‚æœæˆ‘ç»™ä½ ä¸€ä¸ªæ‰“å°å…ƒç»„å…ƒç´ çš„ä»»åŠ¡ï¼Œä½ é¦–å…ˆæƒ³åˆ°çš„æ˜¯:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="8097" class="ne lj iq kz b gy nf ng l nh ni">template &lt;typename... Args&gt;<br/>void print(const std::tuple&lt;Args...&gt; &amp;t) {<br/>    for (const auto &amp;elem : t) // Error: no begin/end iterator<br/>        cout &lt;&lt; elem &lt;&lt; endl;<br/>}</span></pre><ul class=""><li id="bce7" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">ä½†æ˜¯ï¼Œè¿™æ ·ä¸è¡Œã€‚<code class="fe kw kx ky kz b"><a class="ae la" href="https://en.cppreference.com/w/cpp/utility/tuple" rel="noopener ugc nofollow" target="_blank">std::tuple</a></code>æ²¡æœ‰<code class="fe kw kx ky kz b">begin</code> &amp; <code class="fe kw kx ky kz b">end</code>è¿­ä»£å™¨ã€‚</li><li id="0c49" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">å¥½å§ï¼æ‰€ä»¥ï¼Œç°åœ¨ä½ å¯ä»¥å°è¯•åŸå§‹å¾ªç¯ï¼Œå¯¹å—ï¼Ÿ</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="7a19" class="ne lj iq kz b gy nf ng l nh ni">template &lt;typename... Args&gt;<br/>void print(const std::tuple&lt;Args...&gt;&amp;   t) {<br/>    for (int i = 0; i &lt; sizeof...(Args); ++i)<br/>        cout &lt;&lt; std::get&lt;i&gt;(t) &lt;&lt; endl;    // Error :( , `i` needs to be compile time constant<br/>}</span></pre><ul class=""><li id="b41d" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">ä¸è¦ï¼ä½ ä¸èƒ½ã€‚æˆ‘çŸ¥é“<code class="fe kw kx ky kz b">std::get&lt;&gt;</code>ä½¿ç”¨ä¸€ä¸ªæ•°å­—ä½œä¸º<a class="ae la" href="http://www.vishalchovatiya.com/cpp-template-a-quick-uptodate-look/#Non-Type_Template_Parameter" rel="noopener ugc nofollow" target="_blank">éç±»å‹æ¨¡æ¿å‚æ•°</a>ã€‚</li><li id="4efe" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">ä½†æ˜¯ï¼Œè¿™ä¸ªæ•°å­—å¿…é¡»åœ¨ç¼–è¯‘æ—¶ä¿æŒä¸å˜æ‰èƒ½å·¥ä½œã€‚æ‰€ä»¥æœ‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä¼šä¸€ä¸€åˆ—ä¸¾ã€‚</li></ul><h1 id="be4e" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">C++11:å¾ªç¯éå†å…ƒç»„å…ƒç´ </h1><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="c924" class="ne lj iq kz b gy nf ng l nh ni">// Template recursion<br/>template &lt;size_t i, typename... Args&gt;<br/>struct printer  {<br/>    static void print(const tuple&lt;Args...&gt; &amp;t) {<br/>        cout &lt;&lt; get&lt;i&gt;(t) &lt;&lt; endl;<br/>        printer&lt;i + 1, Args...&gt;::print(t);<br/>    }<br/>};</span><span id="abb4" class="ne lj iq kz b gy nm ng l nh ni">// Terminating template specialisation<br/>template &lt;typename... Args&gt;<br/>struct printer&lt;sizeof...(Args), Args...&gt; {<br/>    static void print(const tuple&lt;Args...&gt; &amp;) {}<br/>};</span><span id="3925" class="ne lj iq kz b gy nm ng l nh ni">template &lt;typename... Args&gt;<br/>void print(const tuple&lt;Args...&gt; &amp;t) {<br/>    printer&lt;0, Args...&gt;::print(t);<br/>}</span><span id="3311" class="ne lj iq kz b gy nm ng l nh ni">tuple&lt;int, char, string&gt; t(1, 'A', "ABC");<br/>print(t);<br/>// Note: might not work in GCC, I've used clang</span></pre><ul class=""><li id="8e94" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">ç›¸ä¿¡æˆ‘ï¼Œè¿™å¹¶æ²¡æœ‰çœ‹èµ·æ¥é‚£ä¹ˆå¤æ‚ã€‚å¦‚æœä½ çŸ¥é“é€’å½’å’Œæ¨¡æ¿ä¸“é—¨åŒ–ï¼Œä½ ä¸ä¼šèŠ±è¶…è¿‡ 30 ç§’çš„æ—¶é—´æ¥å¼„æ¸…æ¥šè¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆã€‚</li><li id="8780" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">å¯¹äºæˆ‘ä»¬çš„ä¾‹å­<code class="fe kw kx ky kz b">tuple&lt;int, char, string&gt; t(1, 'A', "ABC");</code>ï¼Œ<code class="fe kw kx ky kz b">printer::print()</code>æ¯æ¬¡ç”¨é€’å¢çš„éç±»å‹æ¨¡æ¿å‚æ•°<code class="fe kw kx ky kz b">i</code>è°ƒç”¨æ¨¡æ¿é€’å½’ï¼Œå³<code class="fe kw kx ky kz b">template&lt;size_t i, typename... Args&gt; struct printer{};</code>ã€‚å½“<code class="fe kw kx ky kz b">i == sizeof...(Args)</code>å‡ºç°æ—¶ï¼Œæˆ‘ä»¬çš„å›æ”¶é€šè¿‡è°ƒç”¨æ¨¡æ¿ç‰¹æ®ŠåŒ–å³<code class="fe kw kx ky kz b">template&lt;typename... Args&gt; struct printer&lt;sizeof...(Args), Args...&gt; { };</code>åœæ­¢ã€‚</li></ul><h1 id="f270" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">C++17:å¾ªç¯éå†å…ƒç»„å…ƒç´ </h1><ul class=""><li id="c96a" class="mg mh iq ka b kb mi kf mj kj mk kn ml kr mm kv mn mo mp mq bi translated">ç”¨ C++ 17ï¼Œç¨å¾®å¥½ä¸€ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ Fold è¡¨è¾¾å¼ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦é€’å½’äº†ã€‚</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="8074" class="ne lj iq kz b gy nf ng l nh ni">template &lt;typename... Args&gt;<br/>void print(const std::tuple&lt;Args...&gt; &amp;t) {<br/>    std::apply([](const auto &amp;... args) {<br/>        ((cout &lt;&lt; args &lt;&lt; endl), ...);<br/>    }, t);<br/>}</span></pre><ul class=""><li id="679d" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated"><code class="fe kw kx ky kz b"><a class="ae la" href="https://en.cppreference.com/w/cpp/utility/apply" rel="noopener ugc nofollow" target="_blank">std::apply</a></code>è®¾è®¡ä¸ºå…ƒç»„åŠ©æ‰‹ï¼Œæ¥å—ä»¿å‡½æ•°æˆ–<a class="ae la" href="http://www.vishalchovatiya.com/learn-lambda-function-in-cpp-with-example/" rel="noopener ugc nofollow" target="_blank"> lambda è¡¨è¾¾å¼</a>ã€‚è™½ç„¶å¦‚æœæƒ³è¦æ ¹æ®ç±»å‹åˆ†æ´¾åˆ°ä¸åŒçš„å®ç°ï¼Œæ‚¨å¯ä»¥åšå¾—æ›´å¥½ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨<code class="fe kw kx ky kz b">overloaded</code>ç±»:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="90b5" class="ne lj iq kz b gy nf ng l nh ni">template &lt;class... Ts&gt;<br/>struct overloaded : Ts... {<br/>    using Ts::operator()...;<br/>};</span><span id="90bb" class="ne lj iq kz b gy nm ng l nh ni">// Deduction guide, google `CTAD for aggregates` for more info<br/>template &lt;class... Ts&gt;<br/>overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;;   // not needed from C++20</span><span id="3676" class="ne lj iq kz b gy nm ng l nh ni">auto f = overloaded {<br/>    [](const int &amp;a)        { cout &lt;&lt; "From int: " &lt;&lt; a &lt;&lt; endl; },<br/>    [](const char &amp;b)       { cout &lt;&lt; "From char: " &lt;&lt; b &lt;&lt; endl; },<br/>    [](const string &amp;c)     { cout &lt;&lt; "From string: " &lt;&lt; c &lt;&lt; endl; },<br/>};</span><span id="c73b" class="ne lj iq kz b gy nm ng l nh ni">tuple&lt;int, char, string&gt;    t(1, 'A', "ABC");<br/>std::apply([&amp;](const auto &amp;... e) { (f(e), ...); }, t);</span></pre><h1 id="e74c" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">C++23:å¾ªç¯éå†å…ƒç»„å…ƒç´ </h1><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="f5e3" class="ne lj iq kz b gy nf ng l nh ni">template &lt;typename... Args&gt;<br/>void print(const std::tuple&lt;Args...&gt; &amp;t) {<br/>    for... (const auto &amp;elem : t)<br/>        cout &lt;&lt; elem &lt;&lt; endl;<br/>}</span></pre><ul class=""><li id="141d" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">å› æ­¤ï¼Œä» C++23 æˆ‘ä»¬å¯èƒ½æœ‰<a class="ae la" href="http://wg21.link/p1306" rel="noopener ugc nofollow" target="_blank">æ‰©å±•è¯­å¥</a>ä¹Ÿå°±æ˜¯<code class="fe kw kx ky kz b">for...()</code>ã€‚è¿™çœ‹èµ·æ¥åƒä¸€ä¸ªå¾ªç¯ï¼Œä½†å®ƒä¸æ˜¯ã€‚å®ƒåªæ˜¯ç”¨æ¨¡æ¿æ ‡å‡ºæ¯ä¸ªè°ƒç”¨èŒƒå›´ï¼Œå¦‚ä¸‹æ‰€ç¤º:</li></ul><pre class="mw mx my mz gt na kz nb nc aw nd bi"><span id="be70" class="ne lj iq kz b gy nf ng l nh ni">template &lt;typename... Args&gt;<br/>void print(const tuple&lt;Args...&gt; &amp;t) {<br/>    {<br/>        const auto &amp;elem = get&lt;0&gt;(t);<br/>        cout &lt;&lt; elem &lt;&lt; endl;<br/>    }<br/>    {<br/>        const auto &amp;elem = get&lt;1&gt;(t);<br/>        cout &lt;&lt; elem &lt;&lt; endl;<br/>    }<br/>    {<br/>        const auto &amp;elem = get&lt;2&gt;(t);<br/>        cout &lt;&lt; elem &lt;&lt; endl;<br/>    }<br/>}</span></pre><ul class=""><li id="af6e" class="mg mh iq ka b kb kc kf kg kj nj kn nk kr nl kv mn mo mp mq bi translated">è€Œä¸”å¾ˆæ˜æ˜¾ï¼Œæ²¡æœ‰<code class="fe kw kx ky kz b">break</code> &amp; <code class="fe kw kx ky kz b">continue</code>å› ä¸ºå®ƒä¸æ˜¯å¾ªç¯ã€‚</li><li id="bfda" class="mg mh iq ka b kb mr kf ms kj mt kn mu kr mv kv mn mo mp mq bi translated">å®ƒåŸºæœ¬ä¸Šé€‚ç”¨äºæ‰€æœ‰å¯ä»¥é€šè¿‡<code class="fe kw kx ky kz b">std::get&lt;&gt;()</code>è®¿é—®çš„æ ‡å‡†å®¹å™¨ã€‚ä¾‹å¦‚ï¼Œæ™®é€šæ•°ç»„ã€<code class="fe kw kx ky kz b">std::tuple</code>ã€<code class="fe kw kx ky kz b">std::pair</code>ã€<code class="fe kw kx ky kz b">std::array</code>ã€æœªå±•å¼€çš„å‚æ•°åŒ…ã€constexpr èŒƒå›´ç­‰ã€‚</li></ul><h1 id="fa15" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">ç»“æŸè¯­</h1><p id="cf7a" class="pw-post-body-paragraph jy jz iq ka b kb mi kd ke kf mj kh ki kj nn kl km kn no kp kq kr np kt ku kv ij bi translated">æˆ‘ä»¬çš„ tuple ç±»ä¸­è¿˜ç¼ºå°‘å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚<a class="ae la" href="http://www.vishalchovatiya.com/all-about-copy-constructor-in-cpp-with-example/" rel="noopener ugc nofollow" target="_blank">å¤åˆ¶æ„é€ å‡½æ•°</a>ã€<a class="ae la" href="http://www.vishalchovatiya.com/move-constructor-assignment-operator-with-shared-ptr/" rel="noopener ugc nofollow" target="_blank">ç§»åŠ¨æ„é€ å‡½æ•°</a>ï¼Œä¸€äº›æ“ä½œç¬¦å’Œ helper ç±»(æ¯”å¦‚<a class="ae la" href="https://en.cppreference.com/w/cpp/utility/tuple/tuple_size" rel="noopener ugc nofollow" target="_blank"> std::tuple_size </a>)ã€‚ä½†æ˜¯æˆ‘å¸Œæœ›ç°åœ¨ä½ æ˜ç™½äº†å¦‚ä½•ä½¿ç”¨å¯å˜æ¨¡æ¿æ¥å®ç°å®ƒã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå®ç°é‚£äº›ç¼ºå¤±çš„ä¸œè¥¿å°†æ˜¯ä½ è‡ªå·±å­¦ä¹  variadic template çš„è‰¯å¥½å¼€ç«¯ã€‚</p><p id="e34d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae la" href="http://www.vishalchovatiya.com/contact-2/" rel="noopener ugc nofollow" target="_blank">æœ‰ä»€ä¹ˆå»ºè®®ï¼ŒæŸ¥è¯¢æˆ–è€…æƒ³è¯´</a> <code class="fe kw kx ky kz b"><a class="ae la" href="http://www.vishalchovatiya.com/contact-2/" rel="noopener ugc nofollow" target="_blank">Hi</a></code> <a class="ae la" href="http://www.vishalchovatiya.com/contact-2/" rel="noopener ugc nofollow" target="_blank">ï¼Ÿå‡è½»å‹åŠ›ï¼Œåªéœ€ç‚¹å‡»ä¸€ä¸‹é¼ æ ‡ã€‚</a> ğŸ–±ï¸</p></div></div>    
</body>
</html>