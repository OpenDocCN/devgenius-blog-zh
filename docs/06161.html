<html>
<head>
<title>Deploying A React App In Kubernetes (Minikube)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Kubernetes (Minikube)中部署 React 应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploying-a-react-app-in-kubernetes-minikube-fc71f4e8da61?source=collection_archive---------0-----------------------#2021-12-18">https://blog.devgenius.io/deploying-a-react-app-in-kubernetes-minikube-fc71f4e8da61?source=collection_archive---------0-----------------------#2021-12-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9ff68b266141b8ed7982d54e5b72d7ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7J77ogT55rA9JOmwevWrTw.jpeg"/></div></div></figure><p id="5a1c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，我们将看到如何在 Kubernetes 中部署一个简单的 react 应用程序并访问它。可以把它看作是应用程序如何实时工作的一瞥。</p><p id="ec02" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们从下载我们将在教程中使用的 react 应用程序开始，我将使用。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="e2e5" class="lc ld in ky b gy le lf l lg lh">npx create-next-app — example with-typescript with-typescript-app</span></pre><blockquote class="li lj lk"><p id="4791" class="jv jw ll jx b jy jz ka kb kc kd ke kf lm kh ki kj ln kl km kn lo kp kq kr ks ig bi translated"><strong class="jx io">注意:为了让这个工作，你需要有 docker 和 Kubernetes，以及对整个主题的一些熟悉。</strong></p></blockquote><p id="2806" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们需要创建一个 Dockerfile，它使用我们的项目并构建一个相同的映像。</p><p id="9384" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请遵循以下步骤:</p><ol class=""><li id="28d6" class="lp lq in jx b jy jz kc kd kg lr kk ls ko lt ks lu lv lw lx bi translated">制作一个目录结构如下。</li></ol><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/793f0fc44d4fc47dad0227aecf1fc8a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*r-ZM_zyEyoXwP1NazpvXhA.png"/></div></figure><p id="8a7f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.创建一个包含以下内容的 Dockerfile 文件。</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lz"><img src="../Images/17a3c0760a04b49cbed21a29d7df8b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IOZV1f90YUFRazpYkNE2_Q.png"/></div></div></figure><p id="cb5f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意，公开端口非常重要，因为应用程序将在那里运行。</p><p id="1cdf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">3.现在，我们已经创建了 Dockerfile 文件，我们需要将它转移到 Kubernetes 环境中。在我的例子中，它运行在 minkube 上，minkube 有一个运行在 docker 上的节点，因此我需要手动将这个 docker 文件和项目转移到节点上，或者将 docker 文件放在 Dockerhub 中，以便 docker 可以提取图像。我们将手动将其放入节点中。</p><p id="977d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">4.运行<code class="fe ma mb mc ky b">docker ps</code>并在运行后查看容器 id</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="f02d" class="lc ld in ky b gy le lf l lg lh">docker cp test-project/ container_name:/home/</span></pre><p id="5de1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将所有文件放入容器中以供使用。</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi md"><img src="../Images/3bdffde340e5f295fd71b4b255aef5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GDJMkXW_wIGdCsmBGhzZig.png"/></div></div></figure><p id="461b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">5.最后，我们需要从节点内相应的 docker 文件构建一个图像，以便它可以在 Kubernetes YAML 文件中使用。你只需运行<code class="fe ma mb mc ky b">docker build -t typescript-app .</code></p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi me"><img src="../Images/b96101a897d973cd7352499661cc4c25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LiOrnsXJ_uRuAEw4_1KKlw.png"/></div></div></figure><p id="67d4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这之后，它将开始建立一个图像，你可以通过<code class="fe ma mb mc ky b">docker images</code>查看它</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mf"><img src="../Images/c714677073a7c0781d4f24fa47bf99e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7G7ZFXGshjEdFlCQPLcZYQ.png"/></div></div></figure><p id="8b3d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们已经完成了初始步骤！您可以专注于创建 pod 或部署，无论您喜欢什么。</p><h1 id="e098" class="mg ld in bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">使用我们刚刚创建的图像创建一个 pod</h1><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/447cc4d32fdfcf5efa131f1e2df4c785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5DIT-WKk6qnMEc2VjDwOEA.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">pod.yml</figcaption></figure><p id="055f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建这个文件后，运行<code class="fe ma mb mc ky b">kubectl apply -f pod.yml</code>来运行节点内的 pod。但你仍然无法访问该应用程序，为此，你需要创建一个服务。至于我为什么这么做，你会在这里找到答案<a class="ae ni" href="https://faun.pub/accessing-pods-outside-of-the-cluster-in-kubernetes-400be73db519" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/bf4bf1008f8d0eb1f0a30430b47ba0af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AQgYzJL3mtPGKwnszATsjA.png"/></div></div><figcaption class="ne nf gj gh gi ng nh bd b be z dk translated">service.yml</figcaption></figure><p id="381a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，使用<code class="fe ma mb mc ky b">kubectl apply -f service.yml</code>创建服务</p><p id="75f2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以使用<code class="fe ma mb mc ky b">kubectl get pods</code> &amp; <code class="fe ma mb mc ky b">kubectl get svc</code>查看 pod 和正在运行的服务</p><p id="058b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成后，您可以在<code class="fe ma mb mc ky b">http://nodeIP:30008</code>上访问您的应用程序，其中<strong class="jx io"> 30008 </strong>恰好是我们的节点端口。</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/f36562dc95e491ba352025a72c94a359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*suJKJvliOCtd07SJa91oOA.png"/></div></div></figure><p id="d4e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">欢迎在评论区提出你的疑问和建议！</p><blockquote class="nl"><p id="b58d" class="nm nn in bd no np nq nr ns nt nu ks dk translated"><em class="nv">快乐学习！:)</em></p></blockquote></div></div>    
</body>
</html>