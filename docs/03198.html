<html>
<head>
<title>Top React Hooks — Cookies, Debounce, and Clipboard</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">顶部反应挂钩—cookie、去抖和剪贴板</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/top-react-hooks-cookies-debounce-and-clipboard-ba9dfb2a75d4?source=collection_archive---------2-----------------------#2020-10-11">https://blog.devgenius.io/top-react-hooks-cookies-debounce-and-clipboard-ba9dfb2a75d4?source=collection_archive---------2-----------------------#2020-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/36628930d79de50b2e64b695da7ee1c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hGZuN7lGd3g7ZPEG"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">米莎·沃克在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="694c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Hooks 包含了 React 应用程序中的逻辑代码。</p><p id="4586" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建自己的钩子，使用别人提供的钩子。</p><p id="c5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看一些有用的 React 挂钩。</p><h1 id="ea10" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应配方</h1><p id="224c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Recipes 附带了许多钩子，我们可以用来做各种事情。</p><p id="ecfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">useCopyClipboard</code>钩子将任何字符串复制到剪贴板。</p><p id="8fe3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ae98" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useCopyClipboard } from "react-recipes";</span><span id="9f01" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [isCopied, setIsCopied] = useCopyClipboard();</span><span id="61b4" class="mq lc iq mh b gy mv ms l mt mu">  const copy = () =&gt; {<br/>    setIsCopied("copy string");<br/>  };</span><span id="9afa" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;button onClick={copy} type="button"&gt;<br/>      {isCopied ? "Copied" : "Copy"}<br/>    &lt;/button&gt;<br/>  );<br/>}</span></pre><p id="161c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建将字符串复制到剪贴板的按钮。</p><p id="1089" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useCopyClipboard</code>钩子返回一个包含<code class="fe me mf mg mh b">isCopied</code>和<code class="fe me mf mg mh b">setIsCopied</code>变量的数组。</p><p id="a51b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">isCopied</code>表示如果是<code class="fe me mf mg mh b">true</code>，字符串被复制到剪贴板。</p><p id="0e75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">setIsCopied</code>将字符串复制到剪贴板。</p><p id="c6b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useDarkMode</code>挂钩让我们可以打开和关闭黑暗模式。</p><p id="4b27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该设置将保存在本地存储中。</p><p id="bd92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="962a" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useDarkMode } from "react-recipes";</span><span id="3d51" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [darkMode, setDarkMode] = useDarkMode();</span><span id="470b" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={() =&gt; setDarkMode(!darkMode)}&gt;toggle dark mode&lt;/button&gt;<br/>      &lt;p&gt;{darkMode.toString()}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="2b56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">setDarkMode</code>功能设置黑暗模式是否开启。</p><p id="d156" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">darkMode</code>有暗模式的切换状态。</p><p id="62e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该设置将保存为本地存储器中带有关键字<code class="fe me mf mg mh b">dark-mode-enabled</code>的条目。</p><p id="75f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它没有任何样式，所以我们必须自己设置黑暗模式的样式。</p><p id="e03d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useDebounce</code>是一个钩子，让我们谴责任何快速变化的价值。</p><p id="e8d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样使用它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="da8e" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useDebounce } from "react-recipes";</span><span id="8a03" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [searchTerm, setSearchTerm] = React.useState("");<br/>  const [result, setResult] = React.useState({});</span><span id="60ec" class="mq lc iq mh b gy mv ms l mt mu">  const debouncedSearchTerm = useDebounce(searchTerm, 500);</span><span id="c678" class="mq lc iq mh b gy mv ms l mt mu">  const search = async () =&gt; {<br/>    const res = await fetch(`https://api.agify.io/?name=${debouncedSearchTerm}`);<br/>    const data = await res.json();<br/>    setResult(data);<br/>  };</span><span id="4d50" class="mq lc iq mh b gy mv ms l mt mu">  React.useEffect(() =&gt; {<br/>    if (debouncedSearchTerm) {<br/>      search();<br/>    }<br/>  }, [debouncedSearchTerm]);</span><span id="81bb" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div&gt;<br/>      &lt;input value={searchTerm} onChange={e =&gt; setSearchTerm(e.target.value)} /&gt;<br/>      &lt;p&gt;{JSON.stringify(result)}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="42c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">searchTerm</code>状态下使用<code class="fe me mf mg mh b">useDebounce</code>挂钩。</p><p id="845a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是设置<code class="fe me mf mg mh b">debouncedSearchTerm</code>值的延迟，单位为毫秒。</p><p id="c2b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将它传递到第二个参数<code class="fe me mf mg mh b">useEffect</code>的数组中，观察它的值。</p><p id="d7be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">debouncedSearchTerm </code>置位，它将运行<code class="fe me mf mg mh b">search</code>函数获取数据。</p><p id="5f1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useDimensions</code>钩子让我们获得任何元素的尺寸。</p><p id="e6d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用它，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4313" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useDimensions } from "react-recipes";</span><span id="94d1" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [wrapperRef, dimensions] = useDimensions();</span><span id="2d7b" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div ref={wrapperRef}&gt;<br/>      height: {dimensions.height}<br/>      width: {dimensions.width}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="9690" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">钩子返回我们传递的<code class="fe me mf mg mh b">wrapperRef</code>,作为我们想要查看其大小的元素的<code class="fe me mf mg mh b">ref</code>属性的值。</p><p id="622b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">dimensions</code>具有我们传递给它的 div 的维度。</p><p id="23f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们改变视窗的大小时，我们会看到尺寸的更新。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/640a9179add937fe128c1a4d7175ee8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DP2fzkArhQay0gB5"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">诺亚·西利曼在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="3cb5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="cd9d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Recipes 有用于反弹、复制到剪贴板、观察元素大小和操作 cookies 的钩子。</p></div></div>    
</body>
</html>