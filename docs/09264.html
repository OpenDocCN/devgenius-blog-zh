<html>
<head>
<title>Terraform Development Guideline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">地形开发指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/terraform-development-guideline-e21f6c6d9f6?source=collection_archive---------6-----------------------#2022-08-10">https://blog.devgenius.io/terraform-development-guideline-e21f6c6d9f6?source=collection_archive---------6-----------------------#2022-08-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9357" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">包括 Terraform 推荐的实践和模式</h2></div><p id="0511" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">本开发公约文件主要针对中小型地形开发项目(尽管对于非常大的地形项目，大多数指南仍然适用)。</p><h1 id="834d" class="ky kz in bd la lb lc ld le lf lg lh li jt lj ju lk jw ll jx lm jz ln ka lo lp bi translated">命名规格</h1><h2 id="87c1" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">一般惯例</h2><p id="4664" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">1.在任何地方(资源名、数据源名、变量名、输出等)使用 snake_case(用 _(下划线)代替—(破折号))。<br/> 2。只使用小写字母和数字。<br/> 3。名字总是用单数名词。<br/> 4。始终使用双引号。</p><h2 id="c6f9" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">资源和数据源参数</h2><p id="54ed" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">1.不要在资源名称中重复资源类型(不部分重复，也不完全重复)</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="022f" class="lq kz in mm b gy mq mr l ms mt">// Good<br/>resource "aws_route_table" "public" {}</span><span id="390f" class="lq kz in mm b gy mu mr l ms mt">// Bad<br/>resource "aws_route_table" "public_route_table" {}</span><span id="a2da" class="lq kz in mm b gy mu mr l ms mt">// Bad<br/>resource "aws_route_table" "public_aws_route_table" {}</span></pre><p id="81b8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.如果没有更具描述性的通用名称，或者如果资源模块创建了此类型的单个资源，资源名称应命名为 this(例如，在 AWS VPC 模块中，有一个 aws_nat_gateway 类型的单个资源和多个 aws_route_table 类型的资源，因此 aws_nat_gateway 应命名为 this，aws_route_table 应具有更具描述性的名称，如 private、public、database)。<br/> 3。如果资源支持，将参数标记作为最后一个实际参数，后面跟随 depends_on 和 lifecycle(如果需要)。所有这些都应该用一个空行隔开。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7b8a" class="lq kz in mm b gy mq mr l ms mt">// Good<br/>resource "aws_nat_gateway" "this" {<br/>  count = 2</span><span id="572d" class="lq kz in mm b gy mu mr l ms mt">allocation_id = "..."<br/>  subnet_id     = "..."</span><span id="b882" class="lq kz in mm b gy mu mr l ms mt">tags = {<br/>    Name = "..."<br/>  }</span><span id="1ccd" class="lq kz in mm b gy mu mr l ms mt">depends_on = [aws_internet_gateway.this]</span><span id="4179" class="lq kz in mm b gy mu mr l ms mt">lifecycle {<br/>    create_before_destroy = true<br/>  }<br/>} <br/>// Bad<br/>resource "aws_nat_gateway" "this" {<br/>  count = 2</span><span id="b08a" class="lq kz in mm b gy mu mr l ms mt">tags = "..."</span><span id="62ec" class="lq kz in mm b gy mu mr l ms mt">depends_on = [aws_internet_gateway.this]</span><span id="6b43" class="lq kz in mm b gy mu mr l ms mt">lifecycle {<br/>    create_before_destroy = true<br/>  }</span><span id="16da" class="lq kz in mm b gy mu mr l ms mt">allocation_id = "..."<br/>  subnet_id     = "..."<br/>}</span></pre><h2 id="d34d" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">变量</h2><p id="629c" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">1.不要在资源模块中重新发明轮子:使用“参数引用”一节中为您正在使用的资源定义的变量的名称、描述和默认值。<br/> 2。当 type 为 list(…)或 map(…)时，在变量名中使用复数形式。<br/> 3。如果可能，请使用特定类型。除非绝对必要，否则尽量避免使用 any 类型(这将禁用类型验证)。变量块中的关键字顺序如下:描述、类型、默认值、验证。<br/> 5。始终包括对所有变量的描述，即使你认为这是显而易见的(你将来会需要它)。<br/> 6。除非需要对每个键都有严格的约束，否则最好使用简单类型(数字、字符串、列表(…)、映射(…)、any)而不是通用类型，如 object()。<br/> 7。如果映射的所有元素都具有相同的类型(例如字符串)或可以转换为相同的类型(例如数字类型可以转换为字符串)，请使用特定的类型，如 map(map(string))。<br/> 8。值{}有时是地图，有时是对象。用 tomap(…)做地图，因为没有办法做对象。</p><h2 id="dc9d" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">输出</h2><p id="b1c7" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">1.输出的名称应该描述它包含的属性，并且不像您通常希望的那样自由。<br/> 2。如果输出返回具有插值函数和多个资源的值，则{name}和{type}应尽可能通用(应省略前缀 as)。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8192" class="lq kz in mm b gy mq mr l ms mt">// Good<br/>output "security_group_id" {<br/>  description = "The ID of the security group"<br/>  value       = try(aws_security_group.this[0].id, aws_security_group.name_prefix[0].id, "")<br/>}</span><span id="435f" class="lq kz in mm b gy mu mr l ms mt">// Bad<br/>output "this_security_group_id" {<br/>  description = "The ID of the security group"<br/>  value       = element(concat(coalescelist(aws_security_group.this.*.id, aws_security_group.web.*.id), [""]), 0)<br/>}</span></pre><p id="d238" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.如果返回值是一个列表，它应该有一个复数名称</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="c942" class="lq kz in mm b gy mq mr l ms mt">output "rds_cluster_instance_endpoints" {<br/>  description = "A list of all cluster instance endpoints"<br/>  value       = aws_rds_cluster_instance.this.*.endpoint<br/>}</span></pre><p id="95cc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.总是包括所有输出的描述，即使你认为它是显而易见的。<br/> 5。避免设置敏感参数，除非您完全控制在所有模块的所有位置使用此输出。<br/> 6。如果需要处理复杂的数据结构并且预计会出现错误，请使用 try()(从 Terraform 0.13 开始提供)。try()是一个特殊的函数，它能够捕获在计算其参数时产生的错误，这在处理复杂的数据结构(其形状在实现时并不为人所知)时特别有用。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="6f3a" class="lq kz in mm b gy mq mr l ms mt"># Try example<br/>data "http" "primary-server" {<br/>  url = "<a class="ae mv" href="https://ip-ranges.amazonaws.com/ip-ranges.json" rel="noopener ugc nofollow" target="_blank">https://ip-ranges.amazonaws.com/ip-ranges.json</a>"</span><span id="3c78" class="lq kz in mm b gy mu mr l ms mt"># Optional request headers<br/>  request_headers = {<br/>    Accept = "application/json"<br/>  }<br/>}</span><span id="2ffd" class="lq kz in mm b gy mu mr l ms mt">locals {<br/># This returns the sync token from the endpoint, the return value is of the type string.<br/>  syncToken = try(jsondecode(data.http.primary-server.body).syncToken,<br/>              "NO TOKEN AVAILABLE"<br/>              )</span><span id="a0aa" class="lq kz in mm b gy mu mr l ms mt"># This variable holds the all the unique regions returned by the endpoint. The return value is of the type list OR a string error value.<br/>  regions = try(distinct([</span><span id="3409" class="lq kz in mm b gy mu mr l ms mt">for items in jsondecode(data.http.primary-server.body).prefixes:<br/>    items.region<br/>  ]), "NO LIST PROVIDED IN LOCALS REGION VARIABLE")</span><span id="36c2" class="lq kz in mm b gy mu mr l ms mt"># This variable holds the all the unique services returned by the endpoint. The return value is of the type list OR a string error value.<br/>  services = try(distinct([</span><span id="5d4c" class="lq kz in mm b gy mu mr l ms mt">for items in jsondecode(data.http.primary-server.body).prefixes:<br/>    items.service<br/>  ]), "NO LIST PROVIDED IN LOCALS SERVICES VARIABLE")</span><span id="c4aa" class="lq kz in mm b gy mu mr l ms mt">}</span><span id="dfc9" class="lq kz in mm b gy mu mr l ms mt">output "response-json-regions" {<br/>  value = local.regions<br/>}</span><span id="37ab" class="lq kz in mm b gy mu mr l ms mt">output "response-json-services" {<br/>  value = local.services<br/>}</span></pre><h1 id="8ada" class="ky kz in bd la lb lc ld le lf lg lh li jt lj ju lk jw ll jx lm jz ln ka lo lp bi translated">主文件结构</h1><p id="ea01" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">将文件中的每个组件组合在一起</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="9a53" class="lq kz in mm b gy mq mr l ms mt"># data source arguments</span><span id="376d" class="lq kz in mm b gy mu mr l ms mt"># resource/module</span><span id="a965" class="lq kz in mm b gy mu mr l ms mt"># resource `null_resource`</span></pre><p id="fb92" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">应尽可能使用隐式依赖关系。depends_on 参数只应作为最后的手段使用。在使用它的时候，总是包括一个注释来解释为什么使用它，以帮助未来的维护者理解附加依赖的目的。</p><h1 id="b970" class="ky kz in bd la lb lc ld le lf lg lh li jt lj ju lk jw ll jx lm jz ln ka lo lp bi translated">项目结构</h1><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8b9b" class="lq kz in mm b gy mq mr l ms mt">terraform-project<br/>├─ modules<br/>│  ├─ module_1<br/>│  │  ├─ main.tf<br/>│  │  ├─ outputs.tf<br/>│  │  ├─ variables.tf<br/>│  ├─ module_2<br/>│  │  ├─ main.tf<br/>│  │  ├─ outputs.tf<br/>│  │  ├─ variables.tf<br/>│<br/>│─ variables<br/>│  │─ dev.backend.tfvars<br/>│  │─ dev.tfvars<br/>│  │─ uat.backend.tfvars<br/>│  │─ uat.tfvars<br/>│  │─ production.backend.tfvars<br/>│  │─ production.tfvars<br/>│<br/>├─ main.tf<br/>├─ outputs.tf<br/>├─ variables.tf<br/>├─ versions.tf<br/>│<br/>│<br/>└─ README.md</span></pre><p id="4ada" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">module: Module 是连接的资源的集合，这些资源一起执行共同的动作(例如:aws_vpc 创建 vpc、子网、NAT 等)<br/> main.tf:调用模块、局部变量和数据源来创建所有资源<br/>变量。tf:包含 main.tf 中使用的变量的声明</p><p id="b2c2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">outputs.tf:包含在 main.tf <br/> versions 中创建的资源的输出。tf:包含 Terraform 和 providers <br/> variables 文件夹:保存将应用于特定部署的独立变量文件，例如，dev.tfvars 将在部署我们的开发环境时使用。<br/> dev.backend.tfvars:针对特定于环境的后端的配置(用于保存状态文件)<br/> dev.tfvars:针对开发的配置(类似实例类型，…) <br/> uat.tfvars:针对 uat 的配置(类似实例类型，…) <br/> production.tfvars:针对生产的配置(类似实例类型，…)</p><p id="ebd3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">变量. tf</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="4bf7" class="lq kz in mm b gy mq mr l ms mt">variable "environment" {<br/>  type = string<br/>}</span><span id="bcbc" class="lq kz in mm b gy mu mr l ms mt">variable "region" {<br/>  description = "AWS Region"<br/>  type        = string<br/>  default     = "us-west-2"<br/>}</span></pre><p id="c37d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">outputs.tf</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="e387" class="lq kz in mm b gy mq mr l ms mt"># We add an output for the VPC's NAT EIPs, so that we can give these to<br/># a third party in case they need to add it to a firewall.<br/>output "vpc_nat_eips" {<br/>  description = "External IPs used by NAT gateways"<br/>  value       = module.prod_vpc.nat_eips<br/>}</span></pre><p id="7057" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">versions.tf</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="51c6" class="lq kz in mm b gy mq mr l ms mt">terraform {<br/>  required_version = "~&gt; 1.0"</span><span id="a784" class="lq kz in mm b gy mu mr l ms mt">backend "s3" {<br/>    bucket         = "orgname-prod-terraform-state-us-west-2"<br/>    key            = "app-my-webapp-prod/terraform.tfstate"<br/>    region         = "us-west-2"<br/>    dynamodb_table = "terraform-state-lock-dynamo"<br/>    encrypt        = "true"<br/>  }<br/>}</span><span id="df67" class="lq kz in mm b gy mu mr l ms mt">provider "aws" {<br/>  version = "~&gt; 3.0"<br/>  region  = var.region<br/>  profile = "dev-profile"<br/>}</span></pre><p id="82b3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">开发工具</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5f51" class="lq kz in mm b gy mq mr l ms mt">environment = "dev"<br/>region = "us-east-1"</span></pre><h1 id="431d" class="ky kz in bd la lb lc ld le lf lg lh li jt lj ju lk jw ll jx lm jz ln ka lo lp bi translated">最佳实践</h1><h2 id="f354" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">使用共享模块</h2><p id="19ba" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">一般来说，避免在 Terraform 存储库中放置模块。尽可能使用 Terraform 注册表中的模块。不要多此一举。<br/>始终设置模块版本。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="dcdf" class="lq kz in mm b gy mq mr l ms mt">// Good<br/>module "rds" {<br/>  source  = "terraform-aws-modules/rds/aws"<br/>  version = "2.18.0"<br/>  ...<br/>}</span><span id="6dc9" class="lq kz in mm b gy mu mr l ms mt">// Bad<br/>module "rds" {<br/>  source  = "terraform-aws-modules/rds/aws"<br/>  ...<br/>}</span></pre><h2 id="2b6c" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">国营商店</h2><p id="e48e" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">不提交状态存储(。tfstate 文件)，因为该文件未加密，可能会暴露敏感数据。请改用 terraform 远程状态管理。您可以<br/>使用 Terraform Cloud 远程状态管理功能存储状态。<br/>使用云存储存储状态，例如 Azure blob 存储</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="7c4e" class="lq kz in mm b gy mq mr l ms mt">terraform {<br/>  required_providers {<br/>    azurerm = {<br/>      source  = "hashicorp/azurerm"<br/>      version = "=2.46.0"<br/>    }<br/>  }<br/>    backend "azurerm" {<br/>        resource_group_name  = "tfstate"<br/>        storage_account_name = "&lt;storage_account_name&gt;"<br/>        container_name       = "tfstate"<br/>        key                  = "terraform.tfstate"<br/>    }<br/>}</span></pre><p id="43b9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用状态锁定来保护状态。如果你的后台支持，Terraform 将为所有写状态的操作锁定你的状态。这可以防止其他人获得锁并潜在地破坏您的状态。S3 后端还通过 dynamodb 支持状态锁定和一致性检查，这可以通过将 dynamodb_table 字段设置为现有的 Dynamo DB 表名来实现。一个 DynamoDB 表可以用来锁定多个远程状态文件。Azure 后端支持 Azure Blob 存储原生功能的状态锁定和一致性检查。GCS 后端支持状态锁定。使用版本控制或备份状态文件，以便在需要时可以回滚到以前的状态。<br/>·每个环境维护一个状态</p><h2 id="3401" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">安全性</h2><p id="dfbc" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">使用 IAM 策略限制对后端状态存储的访问。<br/>不要在 Terraform 代码或变量文件中硬编码敏感数据(密码、ssh 密钥等)，不要将其推送给 Git，动态定义敏感数据(terrafrom 计划或 terrafrom 应用，或使用环境变量作为第一步，这与 Github 操作很好地集成)或使用 Vault Provider 来处理敏感数据。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="d7a8" class="lq kz in mm b gy mq mr l ms mt">$ export AWS_ACCESS_KEY_ID=”accesskey”<br/>$ export AWS_SECRET_ACCESS_KEY=”secretkey”<br/>$ export AWS_DEFAULT_REGION=”ap-southeast-2"<br/>$ terraform plan</span></pre><h2 id="9fd0" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">评论</h2><p id="c208" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">为其他开发人员编写好的注释来理解您的代码(这里有一些好的注释准则 1、2)。Terraform 语言支持三种不同的注释语法:</p><p id="0ec6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">#开始单行注释，在行尾结束。<br/>//也开始单行注释，作为#的替代。<br/>/*和*/是可能跨越多行的注释的开始和结束分隔符。#单行注释样式是默认的注释样式，应该在大多数情况下使用。自动配置格式化工具可能会自动将// comments 转换成# comments，因为双斜线样式不是惯用的。</p><h1 id="0e9a" class="ky kz in bd la lb lc ld le lf lg lh li jt lj ju lk jw ll jx lm jz ln ka lo lp bi translated">工具作业</h1><h2 id="747a" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">格式化</h2><p id="965e" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">始终使用 terraform fmt 将 terraform 配置文件重写为规范的格式和样式，例如，如果您使用 Visual Studio 代码，则可以使用 Terraform Visual Studio 代码扩展</p><p id="06dc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过运行以下命令，检查您的配置格式并使其整洁。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="2246" class="lq kz in mm b gy mq mr l ms mt">terraform fmt -diff</span></pre><p id="0e59" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">格式化命令以规范的格式和样式重写 Terraform 配置文件。它应用了 Terraform 语言样式约定以及其他一些小的调整来提高可读性。默认情况下，该命令检查工作目录中的所有 Terraform 文件，但也可以在子目录中递归运行。查看命令帮助文本以了解更多信息</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="9032" class="lq kz in mm b gy mq mr l ms mt">terraform fmt --help</span></pre><h2 id="6b9e" class="lq kz in bd la lr ls dn le lt lu dp li kl lv lw lk kp lx ly lm kt lz ma lo mb bi translated">确认</h2><p id="49cf" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">使用“terraform validate”来验证 terraform 代码</p><h1 id="1774" class="ky kz in bd la lb lc ld le lf lg lh li jt lj ju lk jw ll jx lm jz ln ka lo lp bi translated">典型地形工作流程</h1><p id="d3dd" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">对于开发人员手动测试，您可以使用核心工作流:terraform init、terraform plan、terraform apply，它们使用本地状态存储。然而，在自动化程度更高的环境中，我们建议使用远程状态后端。<br/> 1。为环境使用特定的后端配置</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="8031" class="lq kz in mm b gy mq mr l ms mt">terraform init -backend-config="./variables/dev.backend.tfvars"</span></pre><p id="f837" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.应用 terraform 环境特定的配置</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="5130" class="lq kz in mm b gy mq mr l ms mt">terraform apply -var-file="./variables/dev.tfvars"</span></pre><h1 id="28f1" class="ky kz in bd la lb lc ld le lf lg lh li jt lj ju lk jw ll jx lm jz ln ka lo lp bi translated">参考</h1><div class="mw mx gp gr my mz"><a href="https://www.terraform-best-practices.com/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">欢迎</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">本文档试图系统地描述使用 Terraform 的最佳实践，并为…提供建议</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">www.terraform-best-practices.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn no mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://www.terraform.io/cloud-docs/guides/recommended-practices" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">索引- Terraform 推荐做法| hashi corp 的 Terraform</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">搜索 Terraform 文档本指南适用于希望从一个平台提高其 Terraform 使用的企业用户</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">www.terraform.io</p></div></div><div class="ni l"><div class="np l nk nl nm ni nn no mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://upcloud.com/community/stories/terraform-best-practices-beginners/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">面向初学者的 Terraform 最佳实践</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">Terraform 是我们最喜欢的基础设施管理工具之一，当涉及到将基础设施配置为…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">upcloud.com</p></div></div><div class="ni l"><div class="nq l nk nl nm ni nn no mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://levelup.gitconnected.com/using-terraforms-try-can-and-input-validation-eb45037af2b2" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">使用 Terraform 的 try()、can()和输入验证</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">了解如何使用 Terraform 的 can()和 try()函数。</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ni l"><div class="nr l nk nl nm ni nn no mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://javaadpatel.com/terraform-best-practices/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">面向 Azure 的 Terraform 最佳实践</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">DevOps Terraform 最佳实践，帮助您创建更易维护、更安全的 Terraform 配置。Terraform 是…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">javaadpatel.com</p></div></div><div class="ni l"><div class="ns l nk nl nm ni nn no mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://iamondemand.com/blog/how-to-use-terraform-like-a-pro-part-2/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">如何像专业人士一样使用 Terraform:第二部分</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">深入阅读我们的“像专业人士一样使用 Terraform”系列的第 2 部分，了解它可以解决的用例——从#多层…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">iamondemand.com</p></div></div><div class="ni l"><div class="nt l nk nl nm ni nn no mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://medium.com/devops-mojo/terraform-best-practices-top-best-practices-for-terraform-configuration-style-formatting-structure-66b8d938f00c" rel="noopener follow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">Terraform —最佳实践</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">使用 Terraform 的最佳实践。</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">medium.com</p></div></div><div class="ni l"><div class="nu l nk nl nm ni nn no mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://slalom-consulting-ltd.github.io/terraform-guidelines/" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">地形-指南</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">由詹姆斯伍尔芬登这是一个指南，以书面 Terraform 符合障碍伦敦风格，它遵循哈希公司…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">slalom 咨询有限公司</p></div></div><div class="ni l"><div class="nv l nk nl nm ni nn no mz"/></div></div></a></div></div></div>    
</body>
</html>