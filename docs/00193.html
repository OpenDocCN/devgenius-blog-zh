<html>
<head>
<title>Setting up JWT Bearer authentication in ASP.NET Core</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在ASP.NET核心网建立JWT承载认证</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/jwt-bearer-authentication-for-machine-to-machine-and-single-page-applications-1c8ba1211a90?source=collection_archive---------0-----------------------#2020-05-03">https://blog.devgenius.io/jwt-bearer-authentication-for-machine-to-machine-and-single-page-applications-1c8ba1211a90?source=collection_archive---------0-----------------------#2020-05-03</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="3a7e" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">顾问指南</h2></div><p id="d9c6" class="pw-post-body-paragraph kg kh ir ki b kj kk js kl km kn jv ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">如果你需要一个关于设置JWT载体认证的快速指南，请阅读这篇文章。<br/>我不会详细讨论JWT是如何工作的，甚至不会讨论你应该如何配置你的TokenValidationParameters。</p><div class="lc ld gq gs le lf"><a href="https://medium.com/@nmillard/brief-overview-of-asp-net-core-authentication-451e630bc42d" rel="noopener follow" target="_blank"><div class="lg ab fp"><div class="lh ab li cl cj lj"><h2 class="bd is gz z fq lk fs ft ll fv fx iq bi translated">认证简介</h2><div class="lm l"><h3 class="bd b gz z fq lk fs ft ll fv fx dk translated">ASP.NET核心认证的基本概念。</h3></div><div class="ln l"><p class="bd b dl z fq lk fs ft ll fv fx dk translated">medium.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt lu lf"/></div></div></a></div><h2 id="e3ba" class="lv lw ir bd lx ly lz dn ma mb mc dp md kp me mf mg kt mh mi mj kx mk ml mm mn bi translated">注册JWT承载认证处理器</h2><ol class=""><li id="df38" class="mo mp ir ki b kj mq km mr kp ms kt mt kx mu lb mv mw mx my bi translated">将<code class="fe mz na nb nc b">Microsoft.AspNetCore.Authentication.JwtBearer</code>添加到您的ASP.NET核心项目中。</li><li id="b5c1" class="mo mp ir ki b kj nd km ne kp nf kt ng kx nh lb mv mw mx my bi translated">生成一个32个字符长的密钥(如果你打算使用256位加密)并保存在你的user-secrets、KeyVault或appsettings.json中</li><li id="a251" class="mo mp ir ki b kj nd km ne kp nf kt ng kx nh lb mv mw mx my bi translated">按照下面的代码片段配置您的启动类</li></ol><figure class="nj nk nl nm gu nn gi gj paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gi gj ni"><img src="../Images/f9606610a6d8fa7ead2cd8deea1662da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9-ibnbPurWd_87jw4PLZ6w.png"/></div></div></figure><p id="e26c" class="pw-post-body-paragraph kg kh ir ki b kj kk js kl km kn jv ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">调用<code class="fe mz na nb nc b">AddAuthentication(JwtBearerDefaults.AuthenticationScheme)</code>只是启用认证，并将“承载”设置为默认方案。这意味着，当您使用<code class="fe mz na nb nc b">[Authorize]</code>而没有指定认证方案时，默认情况下，它将使用为“载体”配置的处理程序来询问用户。</p><p id="22f2" class="pw-post-body-paragraph kg kh ir ki b kj kk js kl km kn jv ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">在第7行，您添加并配置了一个身份验证处理程序，当向用户显示“Bearer”的质询时，将使用这个处理程序。</p><p id="2ae9" class="pw-post-body-paragraph kg kh ir ki b kj kk js kl km kn jv ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">第33行的方法将允许你在控制器和动作上使用<code class="fe mz na nb nc b">[Authorize]</code>。</p><h2 id="f62c" class="lv lw ir bd lx ly lz dn ma mb mc dp md kp me mf mg kt mh mi mj kx mk ml mm mn bi translated">生成JSON Web令牌</h2><p id="776d" class="pw-post-body-paragraph kg kh ir ki b kj mq js kl km mr jv ko kp nt kr ks kt nu kv kw kx nv kz la lb ik bi translated">花点时间通读下面的代码。</p><figure class="nj nk nl nm gu nn gi gj paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gi gj nw"><img src="../Images/424d2577e774e3b3950e25191f01be23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GhVaem29j2eHI0ilEv7PTw.png"/></div></div></figure><p id="39d6" class="pw-post-body-paragraph kg kh ir ki b kj kk js kl km kn jv ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">如上所示设置身份验证控制器后，您将能够生成签名的jwt并使用<code class="fe mz na nb nc b">[Authorize]</code>属性保护端点。</p><p id="cb88" class="pw-post-body-paragraph kg kh ir ki b kj kk js kl km kn jv ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">当您收到令牌时，将它存储在客户机应用程序稍后可以检索到的地方，并在后续请求中将它传递给授权头。</p></div></div>    
</body>
</html>