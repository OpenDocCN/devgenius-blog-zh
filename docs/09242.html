<html>
<head>
<title>Python try-except block</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python try-except 块</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/python-try-except-block-ec37bcf5b37?source=collection_archive---------14-----------------------#2022-08-08">https://blog.devgenius.io/python-try-except-block-ec37bcf5b37?source=collection_archive---------14-----------------------#2022-08-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="699f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Python 有许多内置的异常，当您的程序遇到错误时(程序中的某个地方出错了)，就会引发这些异常。</p><p id="36af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当这些异常发生时，Python 解释器会停止当前进程，并将它传递给调用进程，直到它得到处理。如果不处理，程序会崩溃。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="f15a" class="kr ks in kn b gy kt ku l kv kw">var = un_var<br/>print(var)<br/>Output- <br/>File "C:/Users/vivek.awasthi/PyPractice/Test.py", line 1, in &lt;module&gt;<br/>    var = un_var<br/>NameError: name 'un_var' is not defined</span></pre><p id="4824" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里我们有一个未定义的变量“un_var ”,因此我们得到了 NameError。</p><p id="8d0d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了处理这种情况，python 中有一个 try-except 块。</p><p id="566b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 try 中，我们必须编写我们怀疑会抛出 exception 和 except 的代码，我们将处理同样的问题。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="3ddc" class="kr ks in kn b gy kt ku l kv kw">try:<br/>    var = un_var<br/>    print(var)<br/>except Exception:<br/>    print("Sorry, Something went wrong")<br/>Output-<br/>Sorry, Something went wrong</span></pre><p id="5bc7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的代码中，我们已经处理了异常，所以我们得到的不是错误，而是自定义的异常消息。</p><p id="3840" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们在 python 上有多个预定义的异常，下面是相同的列表。</p><figure class="ki kj kk kl gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi kx"><img src="../Images/bd8ccb8bff60bf365260401209cebcb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*inRlj7O2UrzsjupzKzg4sg.png"/></div></div></figure><p id="da6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们可以使用 try 块定义多个异常，但是在定义异常时，顺序应该是特定于泛型的。</p><p id="271c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为如果我们在顶部定义更多的一般异常，那么下面定义的异常将永远不会被执行。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="c8ae" class="kr ks in kn b gy kt ku l kv kw">try:<br/>    var = un_var<br/>    print(var)<br/>except Exception:<br/>    print("Sorry, Something went wrong")<br/>except NameError:<br/>    print("Generic exception")<br/>Output-<br/>Sorry, Something went wrong</span></pre><p id="e756" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这段代码中，异常块将始终被执行，代码永远不会到达 NameError 块。</p><p id="be55" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将执行 else 块，当 try 块中没有出现异常时，将执行 else 块中的代码。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="202e" class="kr ks in kn b gy kt ku l kv kw">try:<br/>    var = "Hi"<br/>    print(var)<br/>except Exception:<br/>    print("Sorry, Something went wrong")<br/>else:<br/>    print("else block code is executing")<br/>Output-<br/>Hi<br/>else block executing</span></pre><p id="9005" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，块代码将总是被执行，所以当我们想要关闭一个数据库连接或者需要执行一些强制操作时，代码应该被写在 finally 块中。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="6e6e" class="kr ks in kn b gy kt ku l kv kw">try:<br/>    var = "Hi"<br/>    print(var)<br/>except Exception:<br/>    print("Sorry, Something went wrong")<br/>else:<br/>    print("else block code is executing")<br/>finally:<br/>    print("Finally")<br/>Output-<br/>Hi<br/>else block code is executing<br/>Finally</span></pre><p id="ce91" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当您想要记录异常并再次引发相同的异常时，引发异常用于手动引发异常。在这种情况下，可以使用 raise 语句而不指定 exception 对象。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="b031" class="kr ks in kn b gy kt ku l kv kw">try:<br/>    var = "Hi"<br/>    print(var)<br/>    raise("Raising manual exception")<br/>    print("after raise")<br/>except Exception:<br/>    print("Sorry, Something went wrong")<br/>Output-<br/>Hi<br/>Sorry, Something went wrong</span></pre><p id="1232" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为我们已经使用 raise 语句引发了手动异常，所以它正在执行，但块代码除外。将不会执行 print("after raise ")语句。</p></div></div>    
</body>
</html>