<html>
<head>
<title>Creating and deploying a Lambda function with CDKTF in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Go中用CDKTF创建和部署Lambda函数</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-and-deploying-a-lambda-function-with-cdktf-in-go-79779771195e?source=collection_archive---------4-----------------------#2021-11-27">https://blog.devgenius.io/creating-and-deploying-a-lambda-function-with-cdktf-in-go-79779771195e?source=collection_archive---------4-----------------------#2021-11-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/dec590aa72ac5b9a9a9c0c3022000cdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iuKHjRYAnGHTv0D6"/></div></div></figure><h1 id="963d" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍</h1><p id="0284" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我会长话短说。所以我假设您已经熟悉了开发环境。</p><p id="ee8b" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">如果你不是，看看我的另一个关于<a class="ae lw" href="https://jcdan3.medium.com/getting-started-with-terraform-cdk-f7e728403ca2" rel="noopener">开始使用CDKTF的故事。</a></p><h1 id="eddc" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">要求</h1><p id="9521" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">拥有适当的文件结构需要什么:</p><ul class=""><li id="3666" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated">你的main.go根(CDKTF main)，这段代码将描述你的基础设施。</li><li id="55b2" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">编译后的源代码在<em class="ml"> bin/main.zip </em>这个代码是lambda运行的实际代码。</li><li id="ae13" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">这里假设你的lambda函数也是用go写的。如果不是这样，只需更改LambdaFunctionConfig结构的运行时。</li></ul><p id="e55e" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">该结构应该类似于以下内容:</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/eef2a7e5d1ce5090578c384cf132e402.png" data-original-src="https://miro.medium.com/v2/resize:fit:360/format:webp/1*cbfoZ5Okw4svPdDkKM5GGQ.png"/></div></figure><p id="b674" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">以下是main.go的代码:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="938d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><em class="ml">policies/lambda_policy.json</em>中的lambda _ policy . JSON应该是这样的:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="1021" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">现在您有了一个策略，文件夹层次结构应该如下所示:</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/cfda87fa6cd4fcbacfbb1b1d0bb57081.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*Zk7p7SMXb47jFI4Gn6rViA.png"/></div></figure><h1 id="acd1" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">安装和设置AWS CLI</h1><p id="f3a6" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated"><strong class="kv io">注意:</strong>如果已经设置了AWS CLI，您可以安全地跳过这一步。</p><p id="a059" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">现在，按照这些说明安装AWS CLI。您可能希望将AWS CLI添加到路径中。</p><p id="8eca" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">然后在您的AWS帐户中，生成一个访问密钥和秘密密钥。</p><p id="a55b" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">为此，只需打开位于用户菜单(右上角)的<em class="ml">安全凭证</em>。单击创建访问键并保存这两个值。</p><p id="f277" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">现在，运行以下命令来配置AWS CLI:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="274d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">当系统提示时，添加我们刚刚生成的值。</p></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><h1 id="df7b" class="jv jw in bd jx jy nb ka kb kc nc ke kf kg nd ki kj kk ne km kn ko nf kq kr ks bi translated">部署</h1><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="827b" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">就是这样！</p></div></div>    
</body>
</html>