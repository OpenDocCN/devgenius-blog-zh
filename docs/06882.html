<html>
<head>
<title>Containers everywhere: how to run Microsoft SQL Server, SQL tools and Azure Data Studio with Docker on a low-end Chromebook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无处不在的容器:如何在低端 Chromebook 上用 Docker 运行微软 SQL Server、SQL tools 和 Azure Data Studio</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/containers-everywhere-how-to-run-microsoft-sql-server-sql-tools-and-azure-data-studio-with-8893869cfc94?source=collection_archive---------5-----------------------#2022-02-09">https://blog.devgenius.io/containers-everywhere-how-to-run-microsoft-sql-server-sql-tools-and-azure-data-studio-with-8893869cfc94?source=collection_archive---------5-----------------------#2022-02-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="64c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我想起多年前我的一位同事说过的一句有趣的话时，我仍然会微笑:“哦，表演真的很棒吗？”？我想我们需要猕猴桃。KIWI 是“用铁杀死它”的首字母缩写，这意味着如果你的软件性能不足，那么你可以通过投入更多的硬件来轻松修复它，这通常是优化的第一个方法:)</p><p id="62b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果我们想拉一个“反向猕猴桃”呢？运行完整的 SQL server 和数据库工具最少需要多少硬件？我已经在各种 IT 行业和工作了很多年，截至最近几年，我在一台非常灵活的低端 Chromebook(赛扬 N4000，4 GB RAM)上进行了所有的家庭计算。随便你怎么说谷歌，但他们在优化像这样的低端硬件以运行现代计算体验方面令人惊叹。Chromebooks 最初是只能运行 Chrome 浏览器的廉价网络设备，后来发展成为非常安全、几乎完全的 Linux 开发机器。最棒的是。这些低端设备非常便宜，并且具有被动冷却功能——没有风扇，没有移动部件，零噪音:)</p><p id="1e3d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你有一台 Windows 10 电脑，你可以很容易地开始尝试 MSSQL。但如果你像我一样只有一台廉价的 Chromebook，不用担心。在本文中，我将带您了解在这台低性能机器上开始使用 MSSQL Server &amp; tools 所需的步骤。另外，我们会在微软的官方 SQL 文档中发现一个长期存在的错误:)让我们开始吧。</p><ol class=""><li id="cc55" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">要求:最低 4GB 内存 x64 Chromebook 能够运行 Linux 容器，互联网连接，以及…时间:)2019 年起的所有 Chromebook，以及许多旧型号都可以运行它。如果你的机器比 2019 年更老，在这里检查你的运气<a class="ae kr" href="https://www.chromium.org/chromium-os/chrome-os-systems-supporting-linux/" rel="noopener ugc nofollow" target="_blank">。</a></li><li id="9ffe" class="ki kj in jm b jn ks jr kt jv ku jz kv kd kw kh kn ko kp kq bi translated">Linux 安装:在你的 Chromebook 上搜索 Terminal，当你第一次尝试启动它时，Chrome OS 会给你一个简短的向导来安装 Linux 容器。根据您的 SSD / EMC 大小和可用空间，您可以为 Linux 容器分配 10–20gb 的存储空间。选择您的用户名，这将是 sudo-ers 组的成员，这意味着您可以使用它通过“sudo”命令安装软件。注意，它不会询问密码，因为所有的认证和安全都是由顶层(Chrome OS)处理的。如果你可以使用谷歌账户登录 Chromebook，你就可以用“sudo”安装软件。运行:</li></ol><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="4271" class="lg lh in lc b gy li lj l lk ll">$ cat /etc/debian_version<br/>11.1</span></pre><p id="8e6d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">而且你会发现你刚刚得到了一个闪亮的新 Debian stable(11.1 版——“牛眼”)。因此，默认的容器是基于 Debian 11 的，这对我来说是坚如磐石的。你可以谷歌一下使用 Ubuntu 容器的方法，但是我建议你坚持使用 Debian stable。由于 MS 只支持 Ubuntu 作为本地 MSSQL Linux 安装，我们将需要使用 MSSQL Docker 容器映像。</p><p id="36ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.在 Debian 上安装 Docker 引擎:在 Linux 终端中，键入以下命令来更新 apt 包索引和安装包，以允许 apt 通过 HTTPS 使用存储库，添加 Docker 的官方 GPG 密钥，设置稳定的存储库，并最终安装 Docker 引擎:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="849f" class="lg lh in lc b gy li lj l lk ll">$ sudo apt-get update</span><span id="cc7d" class="lg lh in lc b gy lm lj l lk ll">$ sudo apt-get install \<br/>    ca-certificates \<br/>    curl \<br/>    gnupg \<br/>    lsb-release</span><span id="a552" class="lg lh in lc b gy lm lj l lk ll">$ curl -fsSL <a class="ae kr" href="https://download.docker.com/linux/debian/gpg" rel="noopener ugc nofollow" target="_blank">https://download.docker.com/linux/debian/gpg</a> | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><span id="f708" class="lg lh in lc b gy lm lj l lk ll">$ echo \<br/>  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] <a class="ae kr" href="https://download.docker.com/linux/debian" rel="noopener ugc nofollow" target="_blank">https://download.docker.com/linux/debian</a> \<br/>  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><span id="41e7" class="lg lh in lc b gy lm lj l lk ll">$ sudo apt-get update<br/>$ sudo apt-get install docker-ce docker-ce-cli containerd.io</span></pre><p id="dc4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">4.通过运行以下命令，获取并运行 MSSQL 2019 容器映像:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="30f7" class="lg lh in lc b gy li lj l lk ll">$ sudo docker pull mcr.microsoft.com/mssql/server:2019-latest</span></pre><p id="2133" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后去给自己泡杯咖啡或茶，因为即使在我非常快的 1 Gbps 光纤连接上，拉 450 MB 也要花 12 分钟。</p><p id="2023" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，要使用 Docker 运行容器映像，您应该使用以下正确的命令:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="85e9" class="lg lh in lc b gy li lj l lk ll">$ sudo docker run -e "ACCEPT_EULA=Y" -e "MSSQL_SA_PASSWORD=&lt;YourStrong@Passw0rd&gt;" \<br/>   -p 1433:1433 --name sql1 -h sql1 \<br/>   -d mcr.microsoft.com/mssql/server:2019-latest</span></pre><p id="7f57" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意:微软官方文档提到了“SA_PASSWORD”字符串来为“SA”(系统管理员用户)指定一个强密码。但这是错误的，你需要使用正确的字符串“MSSQL_SA_PASSWORD”来代替，否则你将无法使用该用户名进行连接！这个文档错误已经存在至少一年了，因为如果你在谷歌上搜索“在 Docker 容器中运行 Linux 上的 MS SQL Server 时 SA 登录失败”，你会发现很多命中结果，比如<a class="ae kr" href="https://techdailychronicle.com/how-to-fix-login-failed-for-sa-when-running-ms-sql-server-on-linux-in-a-docker-container/" rel="noopener ugc nofollow" target="_blank">2020 年 5 月 10 日</a>的这个。</p><p id="090d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您可以检查 Docker 容器映像是否已经启动并正在运行:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="81bc" class="lg lh in lc b gy li lj l lk ll">$ sudo docker ps -a</span></pre><p id="f8ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你会得到这样的结果:</p><figure class="kx ky kz la gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ln"><img src="../Images/c2617e07bdc321aa8b88824ceaef2882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_OV4hdtUfE0r3x-p"/></div></div></figure><figure class="kx ky kz la gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lv"><img src="../Images/0f04479e9757ed5fb97863d83b62c381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o4r4CbqFLttTOANZ"/></div></div></figure><p id="0a20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">(第二个截屏是来自微软在 Windows 上运行的 Docker 文档的图像，我添加了它，以便如果您看不到我的 Linux 图像，您可以了解该命令的输出。本文最初发表的地方 LinkedIn 在嵌入图形方面不是很灵活……)</p><p id="7c90" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">5.安装 Azure Data Studio 并将其连接到正在运行的 MSSQL Server Docker 映像</p><p id="71d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">SQL Server Management Studio (SSMS)还不能用于 Linux，但是 Azure Data Studio 可以。即使它不是一个嵌入式的替代品，它也是一个非常强大的 MSSQL 图形界面，并且这个工具在所有主要平台(Windows，Mac，Linux)上都可用。但是，它目前不支持 ARM 架构，所以如果你有 ARM 的 Chromebook(带有联发科、高通骁龙等公司的 SOC。)你运气不好。</p><p id="d419" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下载。在这里为你的 Debian <a class="ae kr" href="https://go.microsoft.com/fwlink/?linkid=2183341" rel="noopener ugc nofollow" target="_blank">安装 deb 包(大约 115 MB)并与你的 Linux 安装共享 Chromebook 上的下载文件夹。在 Chrome OS 文件管理器上，右击下载文件夹，选择“与 Linux 共享”。这个文件夹将会出现在 Linux 容器的“/mnt/chromeos/my files/Downloads”中</a></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="c2a8" class="lg lh in lc b gy li lj l lk ll">$ cd /mnt/chromeos/MyFiles/Downloads<br/>$ ls<br/>azuredatastudio-linux-1.34.0.deb</span></pre><p id="1811" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们需要安装 Azure Data Studio 包:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="0c50" class="lg lh in lc b gy li lj l lk ll">$ sudo dpkg -i azuredatastudio-linux-1.34.0.deb</span></pre><p id="ec24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于缺少依赖项，您将得到一个错误:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="a146" class="lg lh in lc b gy li lj l lk ll">Selecting previously unselected package azuredatastudio<br/>(Reading database ... 35082 files and directories currently installed.)<br/>Preparing to unpack azuredatastudio-linux-1.34.0.deb ...<br/>Unpacking azuredatastudio (1.34.0-1639602013) ...<br/>dpkg: dependency problems prevent configuration of azuredatastudio:<br/> azuredatastudio depends on libnss3 (&gt;= 2:3.26); however:<br/>  Package libnss3 is not installed.<br/> azuredatastudio depends on libsecret-1-0; however:<br/>  Package libsecret-1-0 is not installed.<br/></span><span id="0f39" class="lg lh in lc b gy lm lj l lk ll">dpkg: error processing package azuredatastudio (--install):<br/> dependency problems - leaving unconfigured<br/>Processing triggers for desktop-file-utils (0.26-1) ...<br/>Processing triggers for shared-mime-info (2.0-1) ...<br/>Errors were encountered while processing:<br/> azuredatastudio.</span></pre><p id="f3b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这些可以通过运行以下命令来解决:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="8a2b" class="lg lh in lc b gy li lj l lk ll">$ sudo apt -f install</span></pre><p id="09c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们现在可以通过运行以下命令来启动该程序:</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="64fc" class="lg lh in lc b gy li lj l lk ll">$ azuredatastudio</span></pre><p id="09e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Azure Data Studio 程序现在终于安装好了，它的图标可以钉在 Chrome OS dock 上了:</p><figure class="kx ky kz la gt lo gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/60fa2ea0777f9e7f9a25f729f40b2feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/0*LcgALK7clKDQeTpC"/></div></figure><p id="e90d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后一步，让我们连接到正在运行的 MSSQL Server Docker 映像。点击新连接，输入服务器和用户名及密码，然后按“连接”:</p><figure class="kx ky kz la gt lo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/fb8afa857f6c0548b0b4c894e7fe1c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/0*YhV3FkVTiFeAwEAG"/></div></figure><figure class="kx ky kz la gt lo gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/3385b8d92d58d99ed08012d21a27a8d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/0*UA6W16H3oYAxtc3E"/></div></figure><p id="2a39" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们已经连接上了，可以看到 MSSQL Server 版本的详细信息及其附带的默认数据库:</p><figure class="kx ky kz la gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lz"><img src="../Images/7cb25fddff0f90f1fd94baeae5c7d3ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qbPUlfFCgedp8keG"/></div></div></figure><figure class="kx ky kz la gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi ma"><img src="../Images/8d4c7b46d19a673b0bc57042ab95fce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rhtQ_k_yKwcAUa7f"/></div></div></figure><p id="f3f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就是这样:)</p><p id="822a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在下一集，我们将看看如何使用</p><ul class=""><li id="acc0" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh mb ko kp kq bi translated">包含 sqlcmd(命令行查询实用工具)和 bcp(大容量导入导出实用工具)的 mssql-tools 包</li><li id="3ffb" class="ki kj in jm b jn ks jr kt jv ku jz kv kd kw kh mb ko kp kq bi translated">Windows 计算机上的通用 SQL Server Management Studio (SSMS)</li></ul><p id="73e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">干杯:)</p><p id="54bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">链接/学分:</p><p id="dfd1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kr" href="https://www.chromium.org/chromium-os/chrome-os-systems-supporting-linux/" rel="noopener ugc nofollow" target="_blank">https://www . chromium . org/chromium-OS/chrome-OS-systems-supporting-Linux/</a></p><p id="674f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kr" href="https://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-docker?view=sql-server-ver15&amp;pivots=cs1-bash" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/SQL/Linux/quick start-install-connect-docker？view = SQL-server-ver 15&amp;pivots = CS1-bash</a></p><p id="51a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kr" href="https://docs.docker.com/engine/install/debian/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/engine/install/debian/</a></p><p id="2089" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kr" href="https://techdailychronicle.com/how-to-fix-login-failed-for-sa-when-running-ms-sql-server-on-linux-in-a-docker-container/" rel="noopener ugc nofollow" target="_blank">https://techdailycronicle . com/how-to-fix-log in-failed-for-sa-when-running-ms-SQL-server-on-Linux-in-a-docker-container/</a></p><p id="80aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kr" href="https://docs.microsoft.com/en-us/sql/azure-data-studio/download-azure-data-studio?view=sql-server-ver15" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/SQL/azure-data-studio/download-azure-data-studio？view=sql-server-ver15 </a></p></div></div>    
</body>
</html>