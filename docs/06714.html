<html>
<head>
<title>Docker — A Beginner’s Guide to Understanding and Building Docker Images</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker——理解和构建 Docker 图像的初学者指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/docker-a-beginners-guide-to-understanding-and-building-docker-images-41c9f53013a6?source=collection_archive---------6-----------------------#2022-01-27">https://blog.devgenius.io/docker-a-beginners-guide-to-understanding-and-building-docker-images-41c9f53013a6?source=collection_archive---------6-----------------------#2022-01-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3767e4565b237dc6ee9465f7946f81ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iAiUaeuqr4fG9-LnZeHRHg.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图像创建和管理</figcaption></figure><p id="b223" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">Docker 是一个开发人员可以运行、开发和部署基于容器的应用程序的平台。我们在 docker world 中有图像和容器。一个<strong class="kb io">映像</strong>是一个可执行的包，包括运行一个应用程序所需的一切——代码、运行时、库、环境变量和配置文件。一个<strong class="kb io">容器</strong>是镜像的运行实例，这意味着你可以从一个镜像中创建尽可能多的容器。</p><p id="3533" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这篇文章是关于图像的。</p><p id="f816" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">一旦你安装了 docker，你可以用下面的命令检查版本信息，以确保你安装正确。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="cae9" class="lg lh in lc b gy li lj l lk ll">docker --version<br/>docker info</span></pre><h1 id="b401" class="lm lh in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">议程</h1><ul class=""><li id="2241" class="mj mk in kb b kc ml kg mm kk mn ko mo ks mp kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">从哪里开始</em> </strong></li><li id="f75e" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">从 docker hub </em> </strong>拉取图像</li><li id="9618" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">清单图片</em> </strong></li><li id="d5ed" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">图像历史</em> </strong></li><li id="9ca4" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">检查图像</em> </strong></li><li id="3e85" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">创建图像</em> </strong></li><li id="348c" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu"> Dockerfile </em> </strong></li><li id="1ddc" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">移除图像</em> </strong></li><li id="4b69" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">共享图片</em> </strong></li><li id="5b9d" class="mj mk in kb b kc mv kg mw kk mx ko my ks mz kw mq mr ms mt bi translated"><strong class="kb io"> <em class="mu">推送图片</em> </strong></li></ul><h2 id="b850" class="lg lh in bd ln na nb dn lr nc nd dp lv kk ne nf lz ko ng nh md ks ni nj mh nk bi translated">从哪里开始</h2><p id="a5a9" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">一旦你在你的机器上安装了 docker，你要做的第一件事就是创建一个映像或者从 docker hub 中提取一个映像，这样你就可以在其中运行容器了。</p><h2 id="03dd" class="lg lh in bd ln na nb dn lr nc nd dp lv kk ne nf lz ko ng nh md ks ni nj mh nk bi translated">从 docker hub 提取图像</h2><p id="f866" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">使用 docker pull 命令，如果本地系统中没有映像，您可以从 docker hub 中提取映像。来拉 ubuntu 吧。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="a06e" class="lg lh in lc b gy li lj l lk ll">docker pull ubuntu<br/>docker pull ubuntu:&lt;tag&gt;</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/5c5209f28962d753c47b8dcaa5d68368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CKNap7E5LIEuJY0LF9jLpA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">码头工人拉动</figcaption></figure><p id="0755" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你在第一次拉的时候看上面的图像，它实际上从 docker hub 下载了构建图像所需的所有层。但是，从第二次开始，它实际上从本地系统中提取。</p><p id="aca3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">默认情况下，它将获取最新的标签。您可以指定想要提取的标签。让我们用另一个标签来提取图像。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/f402e1a234ea4792a7f2c550db9be13b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F2ueVxXhu9arcwvUcNOsTw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">docker pull ubuntu:宇宙</figcaption></figure><h2 id="03df" class="lg lh in bd ln na nb dn lr nc nd dp lv kk ne nf lz ko ng nh md ks ni nj mh nk bi translated">列出图像</h2><p id="7eb4" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">有两种方法可以查看系统中的图像数量。<strong class="kb io"> <em class="mu"> docker images </em> </strong>会给出关于图像的所有细节，标签，图像 id，大小，以及创建日期等。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="798d" class="lg lh in lc b gy li lj l lk ll">docker images</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/7d784c168aac6375134e3aed1d124693.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5DTeEcCisXPEWx-mKAkt0Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">docker 图像</figcaption></figure><p id="6757" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">另一种方法是使用<strong class="kb io"> <em class="mu"> docker info。</em> </strong>但是，你只能看到一些图像</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/4b83120bd1415a7d4d3b32b472d5211e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JqGkUzbvpMGyglqF7E7P0g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">码头信息</figcaption></figure><p id="d9a9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们实际上可以只列出带有-q 标志的图像 id。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="fd22" class="lg lh in lc b gy li lj l lk ll">// list only ids<br/>docker images -q</span><span id="0fd0" class="lg lh in lc b gy nr lj l lk ll">// no truncate outout<br/>docker images --no-trunc</span><span id="45db" class="lg lh in lc b gy nr lj l lk ll">// usage of format<br/>docker images --format "{{.ID}}: {{.Repository}}"</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/856edbe6db1c095aac8f1c5f68effeec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2js5dtQ1y1CjwhOZXVZt4A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">docker 图像-无中继 c</figcaption></figure><h1 id="04d8" class="lm lh in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">图像历史</h1><p id="1bd0" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">使用以下命令查找映像历史。</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="27ed" class="lg lh in lc b gy li lj l lk ll">docker history &lt;image&gt;<br/>docker history &lt;image&gt;:&lt;tag&gt;</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nt"><img src="../Images/95a6a41356fca33490608f853c18aa82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5jLsn8nGxztz39aKyP53hQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">docker 历史 ubuntu</figcaption></figure><h1 id="6ecc" class="lm lh in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">检查图像</h1><p id="fff5" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">您可以使用以下命令检查图像。你实际上可以看到很多关于图像的信息，比如图像 id 的最长版本、标签、创建日期、实例化命令等..</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="a5ab" class="lg lh in lc b gy li lj l lk ll">docker inspect &lt;image&gt;:&lt;tag&gt;</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nu"><img src="../Images/18e797c6a851048ff22247886f93a3f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3NRuIrY72HIDswvaNF0SVg.png"/></div></div></figure><p id="fd92" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您可以使用竖线(|)或 format 选项来获取特定设置</p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="2792" class="lg lh in lc b gy li lj l lk ll">docker inspect ubuntu | grep Id</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nv"><img src="../Images/c59a8332f4a300fba43bf124851962a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yCDSl1mOeY-cmNQvYzjPBA.png"/></div></div></figure><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="2a26" class="lg lh in lc b gy li lj l lk ll">docker inspect ubuntu --format "{{json .Config}}"</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/3219e1806338f8ca08a94216fc08f254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KN1cPkqDkL-ChscELiTDrg.png"/></div></div></figure><h2 id="bc24" class="lg lh in bd ln na nb dn lr nc nd dp lv kk ne nf lz ko ng nh md ks ni nj mh nk bi translated">创建图像</h2><p id="b9d0" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">我们可以从 docker hub 中提取图像，并在 Dockerfile 的帮助下自动创建 docker 图像。</p><h2 id="aa22" class="lg lh in bd ln na nb dn lr nc nd dp lv kk ne nf lz ko ng nh md ks ni nj mh nk bi translated">Dockerfile 文件</h2><p id="f568" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">Dockerfile 可用于自动创建 Docker 容器映像。这里是详细的 Dockerfile 文章。</p><div class="nx ny gp gr nz oa"><a href="https://ahmedbhl.medium.com/docker-a-beginners-guide-to-understanding-dockerfile-with-a-sample-project-f1a54eeedb0f" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd io gy z fp of fr fs og fu fw im bi translated">docker——用一个示例项目理解 Dockerfile 的初学者指南</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">理解 Dockerfile 文件的逐步指南</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">ahmedbhl.medium.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo jt oa"/></div></div></a></div><h1 id="797b" class="lm lh in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">共享图像</h1><p id="9ce1" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">我们可以像 Github 一样共享和推送对 docker hub 的修改，或者我们可以创建自己的私有注册表。有时，我们希望共享图像，而不发布到任何存储库。这是它的链接。</p><div class="nx ny gp gr nz oa"><a href="https://ahmedbhl.medium.com/how-to-share-docker-images-without-docker-hub-or-any-registry-2d747cfb07c6" rel="noopener follow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd io gy z fp of fr fs og fu fw im bi translated">如何在没有 docker hub 或任何注册表的情况下共享 Docker 图像</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">在某些情况下，你不能将你的图片发布到 docker hub 或任何私人注册中心。这个故事给了你…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">ahmedbhl.medium.com</p></div></div><div class="oj l"><div class="op l ol om on oj oo jt oa"/></div></div></a></div><h1 id="dcd2" class="lm lh in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">推送图像</h1><p id="6afd" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">我们可以将图像推送到 docker hub 或任何私有存储库。让我们看看将图像推送到 docker hub 的例子。习惯上用 docker hub 用户名<strong class="kb io"><em class="mu">&lt;docker serid&gt;/&lt;repo-name&gt;推送 docker 镜像。</em>T3】</strong></p><pre class="kx ky kz la gt lb lc ld le aw lf bi"><span id="d2d2" class="lg lh in lc b gy li lj l lk ll">// docker login<br/>docker login</span><span id="79c4" class="lg lh in lc b gy nr lj l lk ll">// build an image with <strong class="lc io"><em class="mu">&lt;dockeruserid&gt;/&lt;repo-name&gt;<br/></em></strong>docker build -t asebhl/sampledocker -f Dockerfile3 .</span><span id="7d2f" class="lg lh in lc b gy nr lj l lk ll">// list images<br/>docker images</span><span id="cf87" class="lg lh in lc b gy nr lj l lk ll">// docker push<br/>docker push asebhl/sampledocker</span></pre><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oq"><img src="../Images/0a081651461ca1bba1a1d6d91cda7e7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BELoLHaViAhDoFDWntkN_A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><strong class="bd ln"> Docker hub 账户</strong></figcaption></figure><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi or"><img src="../Images/bde222ad8d8ebf3ea9c5bdfad21650c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HcWoAG7o6XK-VPweesBHJw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><strong class="bd ln"> docker 登录</strong></figcaption></figure><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi os"><img src="../Images/db3bcc854bc07883693c9a8054be7840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fC6HgyDe_HbKLBkHl2A4Xw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><strong class="bd ln">码头工人推动</strong></figcaption></figure><h1 id="9c82" class="lm lh in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">结论</h1><p id="464c" class="pw-post-body-paragraph jz ka in kb b kc ml ke kf kg mm ki kj kk nl km kn ko nm kq kr ks nn ku kv kw ig bi translated">这对于创建和管理图像来说已经足够了。</p></div><div class="ab cl ot ou hr ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ig ih ii ij ik"><p id="6646" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> <em class="mu">感谢您的阅读，如果您发现这很有用，请为它鼓掌，并帮助其他人找到它。更多有趣的故事请关注我:)</em> </strong></p></div></div>    
</body>
</html>