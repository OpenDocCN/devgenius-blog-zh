<html>
<head>
<title>React.js State: what it is and how to use it.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React.js 状态:是什么，怎么用。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/react-js-state-what-it-is-and-how-to-use-it-ba81d1ddd3c7?source=collection_archive---------7-----------------------#2022-05-19">https://blog.devgenius.io/react-js-state-what-it-is-and-how-to-use-it-ba81d1ddd3c7?source=collection_archive---------7-----------------------#2022-05-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/7bc3583389a72836cf120ac708426893.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9nx_ILNSdzyrp9TB4SdUVw.png"/></div></div></figure><div class=""/><div class=""><h2 id="9050" class="pw-subtitle-paragraph jv ix iy bd b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dk translated">了解 React 状态管理，然后构建一个 React 计数器组件。</h2></div><p id="f0b3" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">本文是<a class="ae lk" href="https://rolandsankara.medium.com/a-responsive-landing-page-with-react-3d9282e24b74" rel="noopener">我的第一篇文章</a>的延续，第一篇文章对 React JavaScript 库进行了实用的介绍。在本文中，我将介绍 react 中状态的概念以及如何在 React 组件中实现它。</p><p id="7898" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们开始吧...</p><h1 id="31dc" class="ll lm iy bd ln lo lp lq lr ls lt lu lv ke lw kf lx kh ly ki lz kk ma kl mb mc bi translated">🤔<strong class="ak">什么是反应状态？</strong></h1><p id="8f00" class="pw-post-body-paragraph ko kp iy kq b kr md jz kt ku me kc kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated"><em class="mi">“状态只是 javaScript 数据结构的一个花哨的词”。</em></p><p id="7a03" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是 React 组件能够存储组件可以使用的数据位的一种方式。状态值可以是任何数据类型，即<em class="mi">字符串</em>、<em class="mi">数字</em>、<em class="mi">布尔</em>或 O <em class="mi">对象</em>。<br/>需要注意的是，与使用<strong class="kq iz"> <em class="mi"> let </em> </strong>或<strong class="kq iz"> <em class="mi"> const </em> </strong>在组件中定义的变量不同，状态值可以被操纵，并且在随后的组件重新渲染过程中保持不变。</p><p id="9f68" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在 react 中，状态可以是<strong class="kq iz"> <em class="mi">局部</em> </strong>或<strong class="kq iz"> <em class="mi">全局</em> </strong>。</p><p id="16af" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq iz">本地状态:<br/> </strong>这是单个 app 组件内部使用的数据。<br/>可以使用函数组件中的<strong class="kq iz"> <em class="mi"> useState </em> </strong>钩子来创建和管理。</p><p id="1b6e" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq iz">全局状态:</strong> <br/>这是 react app 中多个组件可以访问和使用的数据。在 react 中有许多创建和管理全局状态的方法，例如可以选择使用<a class="ae lk" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">上下文 API </a>或<a class="ae lk" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>。</p></div><div class="ab cl mj mk hr ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ig ih ii ij ik"><p id="5813" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本文中，我将向您展示如何使用<strong class="kq iz"><em class="mi">useState</em></strong>react 钩子在函数组件中创建和管理<strong class="kq iz"> <em class="mi">局部状态</em> </strong>。我将在后续文章中介绍全局状态管理。</p><h1 id="b9b6" class="ll lm iy bd ln lo lp lq lr ls lt lu lv ke lw kf lx kh ly ki lz kk ma kl mb mc bi translated"><strong class="ak">什么是 React 钩子？</strong></h1><p id="8971" class="pw-post-body-paragraph ko kp iy kq b kr md jz kt ku me kc kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">你可能已经问过自己这个问题了，所以我想暂停一下，解释一下 React.js 中的钩子是什么。</p><p id="a6f3" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">React 挂钩是内置的 react 函数，它使我们能够管理状态，还可以挂钩到其他 react 特性。</p><p id="7369" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">下面是基本 react 挂钩的列表；</p><ul class=""><li id="aab7" class="mq mr iy kq b kr ks ku kv kx ms lb mt lf mu lj mv mw mx my bi translated"><a class="ae lk" href="https://reactjs.org/docs/hooks-reference.html#usestate" rel="noopener ugc nofollow" target="_blank">使用状态</a></li><li id="c4a5" class="mq mr iy kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated"><a class="ae lk" href="https://reactjs.org/docs/hooks-reference.html#useeffect" rel="noopener ugc nofollow" target="_blank">使用效果</a></li><li id="9403" class="mq mr iy kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated"><a class="ae lk" href="https://reactjs.org/docs/hooks-reference.html#usecontext" rel="noopener ugc nofollow" target="_blank">使用上下文</a>。等等</li></ul><p id="dc5d" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">需要注意的是，react 挂钩只适用于 React 函数组件。函数组件基本上是一个返回反应元素(JSX)的 JavaScript/ES6 函数。</p><h1 id="74ca" class="ll lm iy bd ln lo lp lq lr ls lt lu lv ke lw kf lx kh ly ki lz kk ma kl mb mc bi translated"><strong class="ak">用 useState 钩子创建状态</strong></h1><p id="76f8" class="pw-post-body-paragraph ko kp iy kq b kr md jz kt ku me kc kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">所以要用 useState 钩子创建状态，我们需要首先从 React.js 函数组件模块的顶层<em class="mi"> react </em>导入 useState 函数，如下面的代码片段所示；</p><figure class="ne nf ng nh gt ip"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="9830" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">导入 useState 钩子/函数后，我们可以用它在函数组件内部创建状态。useState 函数采用单个参数，即<strong class="kq iz"> <em class="mi">初始状态值</em> </strong>，然后<strong class="kq iz"> <em class="mi">返回一个带有两个值的数组</em> </strong>，即:</p><pre class="ne nf ng nh gt nk nl nm nn aw no bi"><span id="92f3" class="np lm iy nl b gy nq nr l ns nt">- State value</span><span id="be36" class="np lm iy nl b gy nu nr l ns nt">- State update function.</span></pre><p id="387a" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们可以<a class="ae lk" href="https://javascript.info/destructuring-assignment" rel="noopener ugc nofollow" target="_blank">析构</a>useState 返回的数组来获取状态值和状态更新函数，这些可以在组件中使用。</p><p id="a550" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">下图说明了析构是如何完成的。</p><figure class="ne nf ng nh gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nv"><img src="../Images/2aaebda76522f9f587c84f4a7d84c210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*y9LpZO_vwrfxRglG.png"/></div></div><figcaption class="nw nx gj gh gi ny nz bd b be z dk translated">来源:<a class="ae lk" href="https://miro.medium.com/max/857/1*pEwyGLJSIlGhe068e1ojYQ.png" rel="noopener">https://miro.medium.com</a></figcaption></figure><p id="61ef" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">下面的代码片段显示了初始化状态后的样子。我认为状态是一个<strong class="kq iz"> <em class="mi">计数</em> </strong>值。</p><figure class="ne nf ng nh gt ip"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="2e08" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">看起来棒极了！</p><p id="55d7" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在让我们继续创建一个简单的计数器组件，它利用 react 中的本地状态管理。是时候实践我们所学的东西了。我建议你和我一起编码。</p><p id="5d2d" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以我们走吧…</p><h1 id="2c22" class="ll lm iy bd ln lo lp lq lr ls lt lu lv ke lw kf lx kh ly ki lz kk ma kl mb mc bi translated">🚀<strong class="ak">创建计数器组件。</strong></h1><p id="da5e" class="pw-post-body-paragraph ko kp iy kq b kr md jz kt ku me kc kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">首先，我们需要使用<strong class="kq iz"><em class="mi">create-react-app</em></strong>工具创建一个新的 react 应用。因此，请转到您的终端/cmd 窗口，然后键入以下命令。</p><pre class="ne nf ng nh gt nk nl nm nn aw no bi"><span id="55fc" class="np lm iy nl b gy nq nr l ns nt">npx create-react-app counter-app</span></pre><p id="6f14" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lk" href="https://rolandsankara.medium.com/a-responsive-landing-page-with-react-3d9282e24b74" rel="noopener">点击此处了解更多关于设置 react-app 的信息</a></p><p id="1957" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在新的 react 应用程序安装完成后，您可以在您喜欢的代码编辑器中打开项目文件夹，即<a class="ae lk" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio Code </a>，并执行以下操作:</p><p id="16c5" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq iz"> 1:创建计数器组件；</strong></p><p id="dc9b" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在 create app 的<strong class="kq iz"> <em class="mi"> src </em> </strong>文件夹中，继续创建一个名为<strong class="kq iz"> <em class="mi"> Counter.js. </em> </strong>的新文件，在该文件中创建一个名为 Counter 的函数组件，如下所示。</p><figure class="ne nf ng nh gt ip"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="ef5f" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq iz"> 2:创建计数状态值；</strong></p><p id="8c86" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用 useState 钩子，创建一个名为 count 的状态值，并用值 0(零)初始化它。然后用文本内容更新<strong class="kq iz"><em class="mi">【h1】</em></strong>元素，<strong class="kq iz"> <em class="mi">【计数值】</em> </strong>，使其保存计数状态值。您的代码应该如下所示:</p><figure class="ne nf ng nh gt ip"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="cb51" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq iz"> 3:创建两个函数；增加计数和减少计数；</strong></p><p id="1705" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">计数器组件的 JSX 中有两个按钮。一个用于增加计数状态值，另一个用于减少计数状态值。这些按钮需要 onClick 事件处理程序，用于相应地更新计数状态。</p><p id="4733" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">函数<strong class="kq iz"><em class="mi">increase count</em></strong>和<strong class="kq iz"><em class="mi">decrease count</em></strong>将被用作事件处理程序，因此它们被创建在 return 语句的正上方。</p><p id="2e48" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">每个函数都使用<strong class="kq iz"> <em class="mi"> setCount </em> </strong>函数来更新计数状态值，方法是调用 setCount 函数，根据当前的计数状态值使用新的计数值，如下所示。</p><figure class="ne nf ng nh gt ip"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="da48" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">注意增加了两个函数<strong class="kq iz"><em class="mi"/></strong>和<strong class="kq iz"> <em class="mi">减少计数</em> </strong>分别作为<strong class="kq iz"> <em class="mi">增加按钮</em> </strong>和<strong class="kq iz"> <em class="mi">减少按钮</em> </strong>的 onClick 事件处理程序。</p><p id="a735" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq iz"> 4:将计数器 App 导入 App.js 组件；</strong></p><p id="b64a" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">是时候把计数器 App 集成到主组件中了——<strong class="kq iz"><em class="mi">App . js .</em></strong><br/>这就是你的<strong class="kq iz"> <em class="mi"> App.js </em> </strong>组件应该的样子；</p><figure class="ne nf ng nh gt ip"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="1a8d" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，完成这些之后，继续在终端中使用<strong class="kq iz"> <em class="mi"> npm start </em> </strong>命令启动 react 应用程序。</p><p id="4792" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当应用程序成功启动时，您应该能够看到计数器应用程序如下所示。计数值从零开始作为初始值，可以通过点击增加按钮来增加，或者使用减少按钮来减少。</p><figure class="ne nf ng nh gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oa"><img src="../Images/cf4f6e3e2be9ccf6631e4651e94f103e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7m0djqEj80ZUf0hYFoxNMA.gif"/></div></div></figure><p id="8195" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">需要注意的是，在 react 中，当组件依赖的状态更新时，组件会被重新呈现。这对于我们的计数器组件来说是正确的，因为您会注意到当单击任何按钮时都会显示一个新的计数值，因为这些按钮会更新计数状态值，从而触发计数器组件的重新呈现。</p><p id="664b" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">好的，做得好…🎉🎉。很高兴您能看到这篇文章的结尾。</p><p id="6c70" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我希望它能帮助你理解 React 状态和它的用法。请在评论区告诉我你的想法。</p><p id="853c" class="pw-post-body-paragraph ko kp iy kq b kr ks jz kt ku kv kc kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq iz">附加资源:</strong></p><div class="im in gp gr io ob"><a href="https://reactjs.org/docs/hooks-state.html" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd iz gy z fp og fr fs oh fu fw ix bi translated">使用状态钩子-反应</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">钩子是 React 16.8 中的新增功能。它们允许您使用状态和其他 React 特性，而无需编写类。的…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">reactjs.org</p></div></div><div class="ok l"><div class="ol l om on oo ok op iu ob"/></div></div></a></div></div></div>    
</body>
</html>