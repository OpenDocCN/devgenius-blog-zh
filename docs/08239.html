<html>
<head>
<title>Optional Class in Java 8</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 8 中的可选类</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/optional-class-in-java-8-3eebe6a66f83?source=collection_archive---------10-----------------------#2022-05-29">https://blog.devgenius.io/optional-class-in-java-8-3eebe6a66f83?source=collection_archive---------10-----------------------#2022-05-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="5967" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们学习如何处理期权</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0a060a665d23cdf1467bdaeb5561abdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wfl6OSls6GV1lxTj4cATng.png"/></div></div></figure><p id="4385" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">嘿戴夫伙计们！希望你一切都好..继续我的 Java 文章系列，我想写 Java 8 的特性。那不是别人，正是 Java 8 中引入的<strong class="jm io">可选</strong>类！😎</p><h1 id="0781" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">什么时候，为什么？</h1><p id="5b83" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">通常当我们用 Java 编码时，我们必须处理异常😕。最常见的异常之一是<strong class="jm io">NullPointerException(NPE)</strong>。因此，从 java 8 开始，我们可以使用选项以更好的方式处理 NPE！😍否则我们不得不<em class="lx">在代码中执行如此多的空检查</em>。可选对象可用于表示没有值的 NULL。这是选修课的主要用途。我将在文章中详细解释。</p></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><h1 id="1924" class="ku kv in bd kw kx mf kz la lb mg ld le lf mh lh li lj mi ll lm ln mj lp lq lr bi translated">optional . of()vs optional . of nullable()</h1><p id="3c1a" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">两种方法<strong class="jm io">都接受一个元素，并返回带有指定元素的可选的</strong>。</p><blockquote class="mk ml mm"><p id="6953" class="jk jl lx jm b jn jo jp jq jr js jt ju mn jw jx jy mo ka kb kc mp ke kf kg kh ig bi translated">如果给定的<strong class="jm io"> <em class="in">元素为空</em> </strong> <em class="in">，那么 optional . of nullable()</em><strong class="jm io"><em class="in">方法返回空的可选</em> </strong>。👉可选。空</p><p id="3691" class="jk jl lx jm b jn jo jp jq jr js jt ju mn jw jx jy mo ka kb kc mp ke kf kg kh ig bi translated">但在 Optional.of()方法中，当给定元素为空时，仍会抛出 NPE。 </p></blockquote><p id="308c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果元素不为空，则两种方法执行相同的操作。</p></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><p id="0720" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">假设我们有一个<strong class="jm io"> Person </strong>类…如果人名不为空，我们需要将其转换成大写。用我们传统的方式，我们会怎么做？</p><p id="4926" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们必须做空检查…对吗？让我们写一个简单的代码…</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="387c" class="mv kv in mr b gy mw mx l my mz">class Person {<br/>    private final String name;<br/>    private final Integer age;<br/>    private final String job;<br/>    public Person(String name, Integer age, String job) {<br/>        this.name = name;<br/>        this.age = age;<br/>        this.job = job;<br/>    }<br/>    public String getName() {<br/>        return name;<br/>    }<br/>    public Integer getAge() {<br/>        return age;<br/>    }<br/>    public String getJob() {<br/>        return job;<br/>    }<br/>}</span></pre><p id="cf7b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果没有期权，我们会做这样的事情来避免 npe。</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="d7f2" class="mv kv in mr b gy mw mx l my mz">Person person = new Person("sailtha", 28, "SE");<br/>String upperCaseName = "";<br/>if (person != null) {<br/>    String name = person.getName();<br/>    if (name != null) {<br/>        upperCaseName = name.toUpperCase();<br/>    }<br/>}<br/>System.out.println(upperCaseName);</span></pre><p id="16d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你仔细看这里，我们还必须维护 ELSE 子句，这将再次产生一个冗长的代码！</p><h1 id="1fd5" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">可选方法</h1><p id="1370" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">我们将把 Person 对象包装在 optional =&gt; ofNullable()中，这对 NPE 是安全的…</p><p id="4a29" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个例子有一个空名称的对象…</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="532e" class="mv kv in mr b gy mw mx l my mz">Person person = new Person(null, 28, "SE");<br/>Optional&lt;Person&gt; personOptional = Optional.<em class="lx">ofNullable</em>(person);<br/>personOptional.ifPresent(p -&gt; {<br/>    Optional&lt;String&gt; name = Optional.<em class="lx">ofNullable</em>(p.getName());<br/>    <strong class="mr io">String upperCaseName = name.map(String::toUpperCase).orElse("Empty Name");</strong><br/>    System.out.println(upperCaseName);<br/>});</span></pre><p id="662c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们有<strong class="jm io"> isPresent() </strong>方法来检查元素的可用性…不需要空检查！😎</p><p id="604a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> orElse() </strong>方法<strong class="jm io">将返回指定的默认名称</strong>，当<em class="lx">特定值不存在</em>时。</p></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><p id="eecb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有了选项，我们可以像在流中一样访问 filter()和 map()方法..</p><pre class="kj kk kl km gt mq mr ms mt aw mu bi"><span id="f629" class="mv kv in mr b gy mw mx l my mz">List&lt;Person&gt; personList = Arrays.<em class="lx">asList</em>(<br/>        new Person("Andrew", 28, null),<br/>        new Person("John", 34, "QA"),<br/>        new Person("Peter", 43, "SE"),<br/>        new Person("Tim", 39, "TL")<br/>);<br/>List&lt;Person&gt; agedPersonsList = personList.stream()<br/>        .filter(p -&gt; p.getAge() &lt; 30)<br/>        .collect(Collectors.<em class="lx">toList</em>());<br/>Optional&lt;Person&gt; personData = Optional.<em class="lx">ofNullable</em>(agedPersonsList.get(0));<br/>personData.ifPresent(p -&gt; {<br/>    Optional&lt;String&gt; job = Optional.<em class="lx">ofNullable</em>(p.getJob());<br/>    Optional&lt;String&gt; name = Optional.<em class="lx">ofNullable</em>(p.getName());<br/>    String upperCaseJob = job.map(String::toUpperCase).orElse("Empty Job");<br/>    String nameFilter = name.filter(n -&gt; n.equals("Andrew")).map(String::toUpperCase).orElse("Empty name");<br/>    System.out.println(upperCaseJob);<br/>    System.out.println(nameFilter);<br/>});</span></pre><p id="5875" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果会是这样的..</p><p id="719b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">原因:</strong></p><ol class=""><li id="d4a4" class="na nb in jm b jn jo jr js jv nc jz nd kd ne kh nf ng nh ni bi translated">筛选条件仅返回 1 个具有空作业的对象。由于值不存在，将从 orElse 返回默认名称。</li><li id="3646" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">所选员工的名字是 Tim。然后它将被映射为大写字符串并返回。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/4967c0d7118b079c65e8f033afbc29fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AXGYShlXhiyW5mCuGJo8Aw.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk translated">结果</figcaption></figure></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><p id="35bd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这都是关于<strong class="jm io">选项</strong>…尽可能多地使用选项来避免 npe，使你的代码更加整洁。👍 💪 😎 👊</p></div></div>    
</body>
</html>