<html>
<head>
<title>CI/CD with AWS CodePipeline using GitHub and an Angular Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 GitHub 和 Angular 应用程序的带有 AWS 代码管道的 CI/CD</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ci-cd-with-aws-codepipeline-using-github-and-an-angular-application-d8936782cca8?source=collection_archive---------2-----------------------#2022-02-25">https://blog.devgenius.io/ci-cd-with-aws-codepipeline-using-github-and-an-angular-application-d8936782cca8?source=collection_archive---------2-----------------------#2022-02-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/ada0407294f29b0f1c62ac48e2e4342a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*t6AoYmibARPlaJejcrrZEg.png"/></div></figure><p id="65eb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">本指南将提供如何创建 AWS 代码管道的说明，以便为您的 Angular 应用程序自动化持续集成和持续交付。</p><p id="0670" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="kp">先决条件:</em></p><ul class=""><li id="5dfe" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">GitHub 中的角度应用源代码</li><li id="70ea" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">IAM 用户帐户</li></ul><h2 id="c1f4" class="le lf in bd lg lh li dn lj lk ll dp lm kc ln lo lp kg lq lr ls kk lt lu lv lw bi translated"><strong class="ak">步骤 1:创建一个 S3 存储桶</strong></h2><p id="e2ad" class="pw-post-body-paragraph jr js in jt b ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko ig bi translated">第一步是创建一个 S3 存储桶来托管您的应用程序。在 AWS 控制台中，点击服务并导航至<strong class="jt io"> S3 </strong>。</p><ul class=""><li id="37a1" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">点击<strong class="jt io">创建存储桶。</strong></li><li id="cbd9" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">输入一个<strong class="jt io">桶名</strong>。这必须是独一无二的。</li><li id="a510" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择一个<strong class="jt io">区域</strong>。这需要保持一致。</li><li id="74de" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">这将是一个静态网站，因此您需要取消选中<strong class="jt io">阻止所有公共访问</strong>。检查确认当前设置。</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mc"><img src="../Images/1c7dc82c9fd1155df643625c43595db9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a8jZdY7EV4tAd10c48rxRA.png"/></div></div></figure><ul class=""><li id="3a7e" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">铲斗的其余默认设置都很好。点击<strong class="jt io">创建桶</strong>。</li></ul><p id="a8b0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">导航到您新创建的 S3 存储桶。点击<strong class="jt io">属性</strong>。</p><ul class=""><li id="1d19" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">滚动到静态网站托管。单击编辑。</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi ml"><img src="../Images/3fe58f725060255538c9003162cee251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iH01Ri4ljoVMR9sQze2iRA.png"/></div></div></figure><ul class=""><li id="9685" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">启用静态网站托管。输入你的索引和错误文件。单击保存更改。</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mm"><img src="../Images/e6d2714513b1d52b9e7e8e262477f778.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-mr73vRFlVpLbWcuXj3bA.png"/></div></div></figure><p id="2b99" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">接下来，为您的 S3 存储桶单击<strong class="jt io">权限</strong>选项卡。</p><ul class=""><li id="c838" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">点击存储桶策略部分下的<strong class="jt io">编辑</strong>。</li><li id="3efc" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">清除当前策略。输入以下内容:</li></ul><pre class="md me mf mg gt mn mo mp mq aw mr bi"><span id="f840" class="le lf in mo b gy ms mt l mu mv">{<br/>    "Version": "2012-10-17",<br/>    "Statement": [<br/>        {<br/>            "Sid": "PublicReadGetObject",<br/>            "Effect": "Allow",<br/>            "Principal": "*",<br/>            "Action": [<br/>                "s3:GetObject"<br/>            ],<br/>            "Resource": [<br/>                "arn:aws:s3:::Bucket-Name/*"<br/>            ]<br/>        }<br/>    ]<br/>}</span></pre><ul class=""><li id="af05" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">用您的铲斗名称替换<strong class="jt io">铲斗名称</strong>。</li><li id="9884" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">点击<strong class="jt io">保存更改</strong>。</li></ul><h2 id="195a" class="le lf in bd lg lh li dn lj lk ll dp lm kc ln lo lp kg lq lr ls kk lt lu lv lw bi translated"><strong class="ak">步骤 2:创建代码构建项目</strong></h2><p id="4bc1" class="pw-post-body-paragraph jr js in jt b ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko ig bi translated">你可以在 AWS 代码管道中完成这一步，但是，我发现提前创建它更简单。</p><p id="e952" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在 AWS 控制台中，单击服务并导航到<strong class="jt io">代码构建</strong>。</p><ul class=""><li id="4227" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">点击<strong class="jt io">创建构建项目</strong>。</li><li id="1b1a" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">输入一个<strong class="jt io">项目名称</strong>。</li></ul><p id="196b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">向下滚动到<strong class="jt io">信号源。</strong></p><ul class=""><li id="5d7d" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">选择<strong class="jt io"> GitHub </strong>作为您的<strong class="jt io">源提供商</strong>。</li><li id="7cc9" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择<strong class="jt io">使用 OAuth </strong>连接，然后点击<strong class="jt io">连接 GitHub </strong>。输入您的 GitHub 凭据。</li><li id="2a4d" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">在我的 GitHub 帐户中选择存储库。</li><li id="6e91" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择 GitHub 存储库。</li></ul><p id="dfaa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">向下滚动到<strong class="jt io">环境</strong>。</p><ul class=""><li id="ac49" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">选择<strong class="jt io">管理图像</strong>。</li><li id="62a0" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择您的<strong class="jt io">操作系统</strong>偏好。本教程我选择了 Ubuntu。</li><li id="5968" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择<strong class="jt io">运行时</strong>。标准是目前唯一可用的选项。</li><li id="ce3f" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择最新的<strong class="jt io">图像版本</strong>。</li><li id="7a8e" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择<strong class="jt io"> Linux </strong>作为<strong class="jt io">环境类型</strong>。</li><li id="a490" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">点击<strong class="jt io">新建服务角色</strong>，允许 AWS 创建角色。</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mw"><img src="../Images/e821244d06b649e21f9e7a46865d5a0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5ofdfk_sZ2tWxchzNCZD8w.png"/></div></div></figure><p id="a2a3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">滚动到底部并点击<strong class="jt io">创建构建项目</strong>。</p><p id="9b22" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">接下来，通过点击<strong class="jt io"> Start build </strong>来测试您的项目。</p><p id="54c0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果成功了，您应该会在每个阶段旁边看到 success，如您的<strong class="jt io"> buildspec.yaml </strong>文件中所定义的。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mx"><img src="../Images/5635226c0ac3901e77696f57004b683f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WNnOGO1U9PSbS_Ux1Unicg.png"/></div></div></figure><h2 id="45b4" class="le lf in bd lg lh li dn lj lk ll dp lm kc ln lo lp kg lq lr ls kk lt lu lv lw bi translated"><strong class="ak">第三步:创建代码管道</strong></h2><p id="4147" class="pw-post-body-paragraph jr js in jt b ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko ig bi translated">在 AWS 控制台中，单击服务并导航到<strong class="jt io">代码管道</strong>。</p><ul class=""><li id="9a31" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">点击<strong class="jt io">创建管道</strong>。</li><li id="5327" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">输入一个<strong class="jt io">管道名</strong>。</li><li id="4ce6" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">点击<strong class="jt io">新建服务角色</strong>。</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi my"><img src="../Images/94dc984d0afddab05a05c2ff1313bb65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lnPn8AlZjWgjRKP9-NmLCA.png"/></div></div></figure><ul class=""><li id="c4f6" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">点击下一个的<strong class="jt io">。</strong></li><li id="390d" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择<strong class="jt io"> GitHub(版本 2) </strong>作为<strong class="jt io">源提供者</strong>。</li><li id="58b8" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">如果这是你第一次连接你的 Github 账户，点击<strong class="jt io">连接 GitHub </strong>。否则，在下拉菜单中选择您现有的 GitHub 连接。</li><li id="f9cb" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">在你的 GitHub 账户中选择<strong class="jt io">库名</strong>。</li><li id="d141" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择<strong class="jt io">分支名称</strong>。</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mz"><img src="../Images/b14cd5df0de94ed7f9d9d07a3ed9f36f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1B3DU8TAkp_2ZHpXH4gA7A.png"/></div></div></figure><ul class=""><li id="7d78" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">点击<strong class="jt io">下一步</strong>。</li><li id="c8de" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择<strong class="jt io"> AWS CodeBuild </strong>作为构建提供者。</li><li id="7afc" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">为您之前在 CodeBuild 中完成的项目选择<strong class="jt io">项目名称</strong>。</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi na"><img src="../Images/b384d0839dce33de64f15ecebac22037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KJE5EHP-gXPQyBh7F56lyw.png"/></div></div></figure><ul class=""><li id="d29a" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">点击下一个的<strong class="jt io">。</strong></li><li id="2f59" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择<strong class="jt io"> S3 </strong>作为<strong class="jt io">部署提供者</strong>。</li><li id="9f7c" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">选择您创建的 S3 存储桶。</li><li id="9838" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">在部署之前检查<strong class="jt io">提取文件。</strong></li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nb"><img src="../Images/c1d6dc66726bc195298ba48f4aed1762.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wYC-hmOznLkNE6at4J0hxQ.png"/></div></div></figure><ul class=""><li id="f310" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated">点击下一个的<strong class="jt io">。</strong></li><li id="d388" class="kq kr in jt b ju kz jy la kc lb kg lc kk ld ko kv kw kx ky bi translated">确认管道配置，然后点击<strong class="jt io">创建</strong>。</li></ul><p id="3142" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当您的 GitHub 存储库中的代码发生更新时，它会被自动检测到，您的项目也会随之更新。</p></div></div>    
</body>
</html>