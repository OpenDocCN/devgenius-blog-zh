<html>
<head>
<title>jQuery Tips — Form Values, Select, and Request Headers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">jQuery 提示—表单值、选择和请求头</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/jquery-tips-form-values-select-and-request-headers-d40d65e7b646?source=collection_archive---------4-----------------------#2020-07-31">https://blog.devgenius.io/jquery-tips-form-values-select-and-request-headers-d40d65e7b646?source=collection_archive---------4-----------------------#2020-07-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7c0ef4af23063c38b62ab911d12e86c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BccMolacFzht2JW4"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@niko_photos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> niko photos </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="30ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管年代久远，jQuery 仍然是操纵 DOM 的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些使用 jQuery 的技巧。</p><h1 id="807e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 jQuery 获取表单输入字段值</h1><p id="f54c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用各种方法获得表单字段及其值。</p><p id="f220" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一种方法是调用<code class="fe me mf mg mh b">submit</code>，然后获取所有的输入字段。</p><p id="1a72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="85c8" class="mq lc iq mh b gy mr ms l mt mu">$('form').submit(() =&gt; {<br/>  const inputs = $('form :input');<br/>  const values = {};<br/>  inputs.each(function() {<br/>    values[this.name] = $(this).val();<br/>  });<br/>});</span></pre><p id="edb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们获取表单元素并对其调用<code class="fe me mf mg mh b">submit</code>方法，</p><p id="9a3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们遍历输入，并调用<code class="fe me mf mg mh b">each</code>遍历它们的值。</p><p id="9f20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">each</code>回调中，我们用<code class="fe me mf mg mh b">this.name</code>得到字段的表单名称，用<code class="fe me mf mg mh b">$(this).val()</code>得到输入的值。</p><p id="da07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">jQuery 也有<code class="fe me mf mg mh b">serializeArray</code>方法让我们以数组的形式获取字段。</p><p id="222f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在它上面使用<code class="fe me mf mg mh b">each</code>来遍历每个字段。</p><p id="8e41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4ef1" class="mq lc iq mh b gy mr ms l mt mu">const values = {};<br/>$.each($('form').serializeArray(), (i, field) =&gt; {<br/>  values[field.name] = field.value;<br/>});</span></pre><p id="0d3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在表单元素上调用<code class="fe me mf mg mh b">serializeArray</code>来将字段转换成数组。</p><p id="4691" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们有一个回调函数来获取带有<code class="fe me mf mg mh b">field</code>参数的字段。</p><p id="2da6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过获取<code class="fe me mf mg mh b">name</code>和<code class="fe me mf mg mh b">value</code>属性来分别获取 name 和 value 属性。</p><p id="93e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以调用<code class="fe me mf mg mh b">serialize</code>来获取每个字段的值。</p><p id="2fff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="49b3" class="mq lc iq mh b gy mr ms l mt mu">$('form').submit(function() {<br/>  const values = $(this).serialize();<br/>});</span></pre><p id="5ad1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">serialize</code>方法从表单元素中获取值。</p><h1 id="9138" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用 jQuery 获取元素的渲染高度</h1><p id="f231" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过各种方法用 jQuery 获得元素的渲染高度。</p><p id="c0ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要做到这一点，我们可以编写下面的任何代码:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="82cb" class="mq lc iq mh b gy mr ms l mt mu">$('#foo').height();<br/>$('#foo').innerHeight();<br/>$('#foo').outerHeight();<br/>$('#foo').outerHeight(true);</span></pre><p id="2081" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">height</code>返回元素的高度，不包括边距、填充或边框。</p><p id="4af0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">innerHeight</code>获取有填充但没有边框或边距的 div 的高度。</p><p id="a8b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">outerHeight</code>返回元素的高度，包括填充和边框。</p><p id="4300" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">outerHeight</code>带参数<code class="fe me mf mg mh b">true</code>返回高度，包括边框、边距和填充。</p><h1 id="0077" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 jQuery 获取 Select 的所有选项</h1><p id="7720" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要使用 jQuery 获取 select 元素的所有选项，我们可以使用带有选择器的<code class="fe me mf mg mh b">$</code>方法来获取所有选项。</p><p id="6ed7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1c80" class="mq lc iq mh b gy mr ms l mt mu">$("select#id option").each(function() {<br/>  //...<br/>});</span></pre><p id="6591" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用这个选择器获得 ID 为<code class="fe me mf mg mh b">id</code>的<code class="fe me mf mg mh b">option</code>元素的 select 元素。</p><p id="a068" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们使用<code class="fe me mf mg mh b">each</code>来遍历所有的元素。</p><p id="2f3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者，我们可以使用<code class="fe me mf mg mh b">map</code>方法从选项元素中获取值:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="853d" class="mq lc iq mh b gy mr ms l mt mu">$("select#id option").map(function() {<br/>  return $(this).val();<br/>}).get();</span></pre><p id="21da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过回调获得每个选项元素的 value 属性值。</p><p id="ccfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">get</code>返回 jQuery 对象匹配的 DOM 元素。</p><p id="7d8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以使用<code class="fe me mf mg mh b">find</code>来具体获取 select 元素中的 option 子元素。</p><p id="8d07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9e23" class="mq lc iq mh b gy mr ms l mt mu">$('select#id').find('option').each(function() {<br/>   console.log($(this).val());<br/>});</span></pre><p id="6fed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">find</code>来获取 ID 为<code class="fe me mf mg mh b">id</code>的 select 的子元素。</p><p id="2902" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到回调中期权的价值。</p><h1 id="6dfc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将 jQuery 对象转换为字符串</h1><p id="3360" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过调用<code class="fe me mf mg mh b">html</code>方法将 jQuery 对象转换成字符串。</p><p id="78ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3b98" class="mq lc iq mh b gy mr ms l mt mu">$('&lt;div&gt;').append($('#foo').clone()).html();</span></pre><p id="e120" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个 div。</p><p id="5f43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将 ID 为<code class="fe me mf mg mh b">foo</code>的元素的克隆添加到其中。</p><p id="6974" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们得到 ID 为<code class="fe me mf mg mh b">foo</code>的元素的 HTML 字符串表示。</p><p id="b3a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以使用<code class="fe me mf mg mh b">outerHTML</code>属性来使我们的生活更轻松。</p><p id="d117" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e638" class="mq lc iq mh b gy mr ms l mt mu">$('#foo').prop('outerHTML');</span></pre><p id="bc6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们获取 ID 为<code class="fe me mf mg mh b">foo</code>的元素，并用<code class="fe me mf mg mh b">'outerHTML'</code>对其调用<code class="fe me mf mg mh b">prop</code>方法，以获取元素的<code class="fe me mf mg mh b">outerHTML</code>属性。</p><h1 id="0fec" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 jQuery 向请求添加请求头</h1><p id="92ab" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">setRequestHeader</code>方法给请求添加访问控制请求头。</p><p id="3579" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8e1d" class="mq lc iq mh b gy mr ms l mt mu">$.ajax({<br/>  type: "POST",<br/>  beforeSend(request) {<br/>    request.setRequestHeader("Authority", authorizationToken);<br/>  },<br/>  url: "/login",<br/>  data: JSON.stringify(request),<br/>  processData: false,<br/>  success(msg) {<br/>    alert('success');<br/>  }<br/>});</span></pre><p id="7cc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">beforeSend</code>方法调用<code class="fe me mf mg mh b">ajax</code>在请求之前运行代码，包括添加请求头。</p><p id="d23d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它带有一个<code class="fe me mf mg mh b">request</code>参数，我们可以用它来调用<code class="fe me mf mg mh b">setRequestHeader</code>。</p><p id="9814" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数是键，第二个是值。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/d43a9476847a91fd7aecc1226c30ee1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zgmuC6n6WUMAKZ_R"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Johannes Plenio 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="76a3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="5472" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">有很多方法可以得到一个元素的高度。</p><p id="6cc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">ajax</code>给请求添加请求头。</p><p id="2495" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以通过各种方式获得表单值和选项。</p></div></div>    
</body>
</html>