<html>
<head>
<title>Optimize Your Kubernetes Service Using Ingress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ingress优化您的Kubernetes服务</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/optimize-your-kubernetes-service-using-ingress-ab20ae2ec2aa?source=collection_archive---------22-----------------------#2020-06-28">https://blog.devgenius.io/optimize-your-kubernetes-service-using-ingress-ab20ae2ec2aa?source=collection_archive---------22-----------------------#2020-06-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="11e9" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">入口和入口控制器</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/227465e9abdfc31360414161ccf649a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BDdzSJh22HgoLoRI"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated"><a class="ae ks" href="https://unsplash.com/@sctgrhm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯科特·格雷厄姆</a>在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="d811" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们一直使用云负载平衡器向外界公开我们的服务。让我们看看如何使用入口控制器来优化我们的Kubernetes服务。</p><h2 id="ba74" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">进入</h2><p id="6871" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">与使用传统的云负载平衡器相比，入口是一种更加可定制的方式来公开我们的流量。对于每个服务，我们配置一个入口对象来定义如何路由流量。入口对象配置对群集外服务的访问。Ingress是一种针对web流量(主要是HTTP和HTTPS)的设计，它允许it定制路由，并提供选项来保护SSL流量，并根据主机名和URL路径路由到不同的后端服务。一旦我们定义了入口资源，我们就设置了一个入口控制器。</p><h2 id="4fbd" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">入口控制器</h2><p id="a5e5" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">入口控制器本身是基于其资源(入口定义)路由流量的实际应用。但是面向公众的前端通常只有一个云负载平衡器。尽管如此，通过使用入口控制器来管理通过它的所有流量，我们将所有的路由和服务逻辑整合到一个资源中。<br/>最受欢迎的入口控制器是Nginx入口控制器，因为它为Nginx网络服务器提供电源，帮助引导我们的流量。但是也可以使用其他入口控制器，如Istio入口、HAProxy入口等。<br/>让我们看一张图，以便更好地理解这一点。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/fd9b82e180c2535225d7f210face7920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-iELkVUhP_SHcgrZWTvwfQ.png"/></div></div></figure><p id="dc67" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在虚线的右侧，我们有我们的Kubernetes集群。我们已经有了运行我们的应用程序的pod和定义对它的访问的服务对象。然后我们询问我们的云服务提供商(AWS、GCP、Azure等。)来提供一个负载平衡器，以便向外界公开该服务。但是在这种模式下，如果我们想要添加额外的服务并向外界公开，我们会提供更多的负载平衡器。我们将在如何配置这些负载平衡器方面受到一些限制，随着我们添加更多的服务，我们将开始为更多的负载平衡器转发角色付费。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/70ae3f3a50f1e09c188447b6aaabc583.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1E-jSuXZUZaOUO595haiRw.png"/></div></div></figure><p id="9340" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">或者，通过使用入口控制器模型，我们将需要一个云负载平衡器。所有流量将首先路由到入口控制器。入口控制器然后相应地将该流量路由到我们集群中的服务。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mo"><img src="../Images/468cd76100af28503507610021be27c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TyDEPT2REhFifQkjvHsy4g.png"/></div></div></figure><p id="f20f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们仔细看看入口控制器是如何工作的！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mp"><img src="../Images/3a42e8b4cc6286cf7b5814c2ac470c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZPZOQxAUJjeZ0-fa-5O37A.png"/></div></div></figure><p id="44db" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当流量到达入口控制器时，它会检查其路由逻辑的入口资源。在这里，它可以根据主机名或URL中的路径决定将流量路由到不同的后端服务。我们甚至可以用重写规则来注释入口资源。</p><p id="e205" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> Nginx入口控制器</strong> <br/> Nginx入口控制器是一般入口控制器的普遍选择。Nginx入口控制器可作为一个稳定的头盔拍摄，可以在几分钟内安装。它支持作为常规部署或守护进程集运行。如果选择常规部署，Nginx入口控制器还支持水平pod自动扩展。Kubernetes项目本身也支持它，所以如果它符合您的需求，这是一个很好的选择。</p><p id="c543" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">仅仅通过使用一些入口控制器(或者可能是一个),您就可以节省在配置多个负载平衡器上花费的大量资金。</p></div></div>    
</body>
</html>