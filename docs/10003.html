<html>
<head>
<title>How to Subtract Days From a Date in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 JavaScript 从日期中减去天数</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-date-subtract-days-62e7c7d6b1a7?source=collection_archive---------8-----------------------#2022-09-28">https://blog.devgenius.io/javascript-date-subtract-days-62e7c7d6b1a7?source=collection_archive---------8-----------------------#2022-09-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2a23e962deb4bf6b6890fa129f5b0be4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3I2M-E1Wibl5rFKV1PGNaw.png"/></div></div></figure><h1 id="931b" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">1.Date setDate()和 getDate()方法</h1><p id="fe21" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在 JavaScript 中从<code class="fe lr ls lt lu b">Date</code>中减去天数:</p><ol class=""><li id="e98a" class="lv lw in kv b kw lx la ly le lz li ma lm mb lq mc md me mf bi translated">调用<code class="fe lr ls lt lu b">Date</code>上的<code class="fe lr ls lt lu b">getDate()</code>方法来获取天数。</li><li id="3234" class="lv lw in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">减去天数。</li><li id="3b5f" class="lv lw in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">将减法的结果传递给<code class="fe lr ls lt lu b">setDate()</code>方法。</li></ol><p id="be8c" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated">例如:</p><pre class="mo mp mq mr gt ms lu mt mu aw mv bi"><span id="78cc" class="mw jw in lu b gy mx my l mz na">function subtractDays(date, days) {<br/>  date.setDate(date.getDate() - days);</span><span id="8b0c" class="mw jw in lu b gy nb my l mz na">  return date;<br/>}</span><span id="d3ce" class="mw jw in lu b gy nb my l mz na">// May 15, 2022<br/>const date = new Date('2022-05-15T00:00:00.000Z');</span><span id="7c77" class="mw jw in lu b gy nb my l mz na">const newDate = subtractDays(date, 5);</span><span id="d244" class="mw jw in lu b gy nb my l mz na">// May 10, 2022<br/>console.log(newDate); // 2022-05-10T00:00:00.000Z</span></pre><p id="23a7" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated">我们的<code class="fe lr ls lt lu b">subtractDays()</code>函数将一个<code class="fe lr ls lt lu b">Date</code>对象和要减去的天数作为参数。它返回减去天数后的同一个<code class="fe lr ls lt lu b">Date</code>对象。</p><p id="5481" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated"><code class="fe lr ls lt lu b">Date getDate()</code>方法返回一个介于 1 和 31 之间的数字，表示特定<code class="fe lr ls lt lu b">Date</code>在一个月中的第几天。</p><p id="a184" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated"><code class="fe lr ls lt lu b">Date setDate()</code>方法将<code class="fe lr ls lt lu b">Date</code>对象中的日期更改为作为参数传递的数字。</p><p id="f79b" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated">如果您指定的日期会改变<code class="fe lr ls lt lu b">Date</code>的月份或年份，<code class="fe lr ls lt lu b">setDate()</code>会自动更新<code class="fe lr ls lt lu b">Date</code>信息以反映这一点。</p><pre class="mo mp mq mr gt ms lu mt mu aw mv bi"><span id="a502" class="mw jw in lu b gy mx my l mz na">// April 25, 2022<br/>const date = new Date('2022-04-25T00:00:00.000Z');</span><span id="7db5" class="mw jw in lu b gy nb my l mz na">date.setDate(40);</span><span id="f98c" class="mw jw in lu b gy nb my l mz na">// May 10, 2022<br/>console.log(date); // 2022-05-10T00:00:00.000Z</span><span id="b195" class="mw jw in lu b gy nb my l mz na">console.log(date.getDate()); // 10</span></pre><p id="2c38" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated">四月只有 30 天，所以在这里将<code class="fe lr ls lt lu b">40</code>传递给<code class="fe lr ls lt lu b">setDate()</code>会使月份增加 1，并将月份的日期设置为<code class="fe lr ls lt lu b">10</code>。</p><h2 id="ee48" class="mw jw in bd jx nc nd dn kb ne nf dp kf le ng nh kj li ni nj kn lm nk nl kr nm bi translated">避免副作用</h2><p id="cb80" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated"><code class="fe lr ls lt lu b">setDate()</code>方法改变了它所调用的<code class="fe lr ls lt lu b">Date</code>对象。这给我们的<code class="fe lr ls lt lu b">subtractDays()</code>函数带来了一个副作用。为了避免修改传递的<code class="fe lr ls lt lu b">Date</code>并创建一个纯函数，制作一个<code class="fe lr ls lt lu b">Date</code>的副本并在这个副本上调用<code class="fe lr ls lt lu b">setDate()</code>，而不是原始的。</p><pre class="mo mp mq mr gt ms lu mt mu aw mv bi"><span id="6f86" class="mw jw in lu b gy mx my l mz na">function subtractDays(date, days) {<br/>  // 👇 Make copy with "Date" constructor<br/>  const dateCopy = new Date(date);</span><span id="7b5b" class="mw jw in lu b gy nb my l mz na">  dateCopy.setDate(dateCopy.getDate() - days);</span><span id="e435" class="mw jw in lu b gy nb my l mz na">  return dateCopy;<br/>}</span><span id="5e8d" class="mw jw in lu b gy nb my l mz na">const date = new Date('2022-05-15T00:00:00.000Z');</span><span id="a721" class="mw jw in lu b gy nb my l mz na">const newDate = subtractDays(date, 5);</span><span id="88e5" class="mw jw in lu b gy nb my l mz na">console.log(newDate); // 2022-05-10T00:00:00.000Z</span><span id="8579" class="mw jw in lu b gy nb my l mz na">// 👇 Original not modified<br/>console.log(date); // 2022-05-15T00:00:00.000Z</span></pre><p id="21ba" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated"><strong class="kv io">提示:</strong>不修改外部状态的函数(即纯函数)往往更容易预测，也更容易推理，因为它们对于特定的输入总是给出相同的输出。这使得限制代码中副作用的数量成为一个很好的实践。</p><h1 id="4eb0" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">2.date-fns subDays()函数</h1><p id="dfa6" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">或者，我们可以使用<a class="ae nn" href="https://www.npmjs.com/package/date-fns" rel="noopener ugc nofollow" target="_blank"> date-fns </a> NPM 包中的<code class="fe lr ls lt lu b">subDays()</code>函数来快速从<code class="fe lr ls lt lu b">Date</code>中减去天数。它的工作原理类似于我们的纯<code class="fe lr ls lt lu b">subtractDays()</code>函数。</p><pre class="mo mp mq mr gt ms lu mt mu aw mv bi"><span id="e42b" class="mw jw in lu b gy mx my l mz na">import { subDays } from 'date-fns';</span><span id="e631" class="mw jw in lu b gy nb my l mz na">const date = new Date('2022-05-15T00:00:00.000Z');</span><span id="b97b" class="mw jw in lu b gy nb my l mz na">const newDate = subDays(date, 5);</span><span id="4016" class="mw jw in lu b gy nb my l mz na">console.log(newDate); // 2022-05-10T00:00:00.000Z</span><span id="1a01" class="mw jw in lu b gy nb my l mz na">// Original not modified<br/>console.log(date); // 2022-05-15T00:00:00.000Z</span></pre></div><div class="ab cl no np hr nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ig ih ii ij ik"><p id="fde7" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated"><em class="nv">原载于</em><a class="ae nn" href="https://cbdev.link/5869ce" rel="noopener ugc nofollow" target="_blank"><em class="nv">codingbeautydev.com</em></a></p><h1 id="7fee" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">JavaScript 做的每一件疯狂的事情</h1><p id="e18c" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">一本关于 JavaScript 微妙的警告和鲜为人知的部分的迷人指南。</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/143ee152ba78025ea8643ba5b9726a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*YS5Oub8REWy8vnOEqBnsyQ.png"/></div></figure><p id="7d6e" class="pw-post-body-paragraph kt ku in kv b kw lx ky kz la ly lc ld le ml lg lh li mm lk ll lm mn lo lp lq ig bi translated"><a class="ae nn" href="https://cbdev.link/d3c4eb" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">报名</strong> </a>立即免费领取一份。</p></div></div>    
</body>
</html>