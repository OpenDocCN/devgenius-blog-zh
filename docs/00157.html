<html>
<head>
<title>Google Cloud IAM and AWS IAM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌云IAM和AWS IAM</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/google-cloud-iam-and-aws-iam-similarities-and-differences-442f2e13835?source=collection_archive---------0-----------------------#2020-04-08">https://blog.devgenius.io/google-cloud-iam-and-aws-iam-similarities-and-differences-442f2e13835?source=collection_archive---------0-----------------------#2020-04-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="69da" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">异同</h2></div><p id="d528" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在有许多云提供商，提供类似的产品和服务，有时甚至为他们的产品使用类似的名称。但是这些看似相似的名字背后的概念并不总是相同的。在这篇短文中，我们将探讨来自不同供应商的两款名为IAM的产品——Google Cloud IAM和AWS IAM——的异同。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/86e7080496752b560c8f9e4583bd7278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XH-CMigIAcnN06FW"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">照片由<a class="ae lo" href="https://unsplash.com/@katetrysh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">凯特在<a class="ae lo" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上与</a>幽会</figcaption></figure><p id="4fc0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">IAM代表<em class="lp">身份和访问管理</em>，通常是指一套工具、方法和流程，用于识别和管理用户，并仅向期望的用户提供对特定资源的访问。</p><p id="639c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">云环境中的一个误解是IAM用于管理最终用户对应用程序本身的访问。GC IAM和AWS IAM用于管理对云资源的访问，而不是对在云产品上实现的应用程序的访问。对于后者，你可能应该检查一下<a class="ae lo" href="https://aws.amazon.com/cognito/" rel="noopener ugc nofollow" target="_blank"> AWS Cognito </a>和<a class="ae lo" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Google Firebase </a>。</p><h1 id="4050" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">术语</h1><p id="7021" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">AWS和GC都在使用<em class="lp">角色</em>和<em class="lp">策略</em>，但是用法不同，这甚至会让有经验的用户感到困惑。</p><p id="626f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简而言之:<strong class="ke io"> GC策略将角色链接到身份，而AWS策略是可以附加到身份的权限集合。</strong>这个简短的解释可能会令人困惑，所以这里有更多的细节来帮助你理解其中的区别:</p><p id="ccf4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Google Cloud中，您有预定义的<em class="lp">角色</em>列表，例如查看者、所有者或发布者，您可以将这些角色分配给身份(用户、组或服务帐户)——角色与身份的这种绑定被称为<em class="lp">策略</em>，然后它被绑定到资源。</p><p id="1ecc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在AWS中，您可以通过指定效果、动作和资源来创建<em class="lp">策略</em>——您可以指定自己的策略，或者从AWS管理的策略列表中找到合适的策略。然后，您可以将所需的策略附加到身份(如用户、组或角色)或资源。关于AWS政策和权限的完整信息可以在<a class="ae lo" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="3ca0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例子可能会帮助你抓住不同之处。以下是GC策略示例:</p><pre class="kz la lb lc gt mn mo mp mq aw mr bi"><span id="561b" class="ms lr in mo b gy mt mu l mv mw">{<br/>    "bindings": [<br/>    {<br/>        "members": [<br/>            "group:my-viewers@mydomain.com"<br/>        ],<br/>        "role": "roles/viewer"<br/>    },<br/>    ],<br/>    "etag": "BwUjMhCsNvY=",<br/>    "version": 1<br/>}</span></pre><p id="a408" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">AWS政策是这样的:</p><pre class="kz la lb lc gt mn mo mp mq aw mr bi"><span id="c2a7" class="ms lr in mo b gy mt mu l mv mw">{<br/>  "Version": "2012-10-17",<br/>  "Statement": {<br/>  "Effect": "Allow",<br/>  "Action": "s3:ListAllMyBuckets",<br/>  "Resource": "*"<br/>  }<br/>}</span></pre><h1 id="abe6" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">接近</h1><p id="b6f7" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">AWS和GC都允许两种类型的访问:用户访问和编程访问。这里的用户访问是指您或任何其他人可以通过键入密码手动登录到web控制台，并通过单击、拖放等手动执行一些操作。编程式访问是指使用键(直接或间接)来识别运行在其他地方的代码片段——或者在云中的另一个实例上，或者根本不在云中。</p><h2 id="afaf" class="ms lr in bd ls mx my dn lw mz na dp ma kl nb nc mc kp nd ne me kt nf ng mg nh bi translated">用户访问</h2><p id="e198" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">AWS和GC都支持来自外部提供商的帐户联盟，或者可以自己管理帐户，这对于Google Cloud来说不是真的，因为Google有自己的帐户和组系统，与GC无关，他们明智地决定在他们的云上重用它。因此，您只需在登录GC web控制台时使用Google帐户。</p><p id="1ce4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这在AWS中是不一样的，用户账号是AWS自己管理的。这意味着您拥有所谓的root帐户，它充当管理员帐户，可以完全访问您的所有云资源。使用这个root帐户，您可以创建其他IAM用户，然后通过提供用户名、密码和帐户ID登录AWS控制台。</p><p id="1213" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，这里的主要区别是:AWS IAM用于管理帐户和授予访问权限，而GC IAM仅用于授予通过其他方式管理的帐户的访问权限。</p><h2 id="0448" class="ms lr in bd ls mx my dn lw mz na dp ma kl nb nc mc kp nd ne me kt nf ng mg nh bi translated">程序化访问</h2><p id="3025" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">通过使用<strong class="ke io">服务帐户</strong>可以对谷歌云中的资源进行编程访问，这是一种由应用程序而不是个人使用的特殊类型的帐户。没有密码，你可以输入登录到这个帐户，你只有访问密钥，你可以下载和管理自己或让GC为你管理它。与用户帐户相反，服务帐户本身既是身份也是资源，这意味着您可以授予其他用户访问给定服务帐户的权限。</p><p id="d66a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">AWS方法与此类似:您应该创建新的IAM用户，该用户将由密钥而不是密码来标识。这足以识别外部运行的代码，但是如果您想要在EC2实例(AWS虚拟机)上使用编程访问，那么您需要创建一个链接到给定实例的实例概要文件，并为这个概要文件定义IAM角色。实例概要文件只不过是IAM角色的容器。</p><h1 id="8b7e" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">策略评估逻辑</h1><p id="c5d9" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">GC IAM和AWS IAM之间的另一个区别是如何确定策略的有效性，或者换句话说，当某个用户将访问某个资源时，IAM将如何确定它是否被允许？</p><p id="fe6e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Google Cloud中，策略可以附加到以下层级的任何级别:</p><ol class=""><li id="f8eb" class="ni nj in ke b kf kg ki kj kl nk kp nl kt nm kx nn no np nq bi translated">组织</li><li id="63da" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nn no np nq bi translated">文件夹</li><li id="56bd" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nn no np nq bi translated">项目</li><li id="d00a" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nn no np nq bi translated">资源</li></ol><p id="b459" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> Google Cloud将有效策略计算为在该资源上设置的策略和从其父节点</strong>继承的策略的并集，这意味着:</p><ol class=""><li id="fae7" class="ni nj in ke b kf kg ki kj kl nk kp nl kt nm kx nn no np nq bi translated">如果您在更高的层次结构级别上授予用户权限，则该权限将在所有后续级别上继承。即在项目级别授予的权限实际上是授予该项目的所有资源的权限。</li><li id="9931" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nn no np nq bi translated">更广泛的角色包括有限角色的权限，更广泛的角色将对给定资源的给定用户有效。</li></ol><p id="f5a6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">与AWS的逻辑不同。在评估策略时，明确的拒绝可以覆盖更广泛的允许策略。以下是AWS的<a class="ae lo" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_evaluation-logic.html" rel="noopener ugc nofollow" target="_blank">策略评估逻辑文档</a>中的AWS IAM逻辑:</p><ul class=""><li id="8052" class="ni nj in ke b kf kg ki kj kl nk kp nl kt nm kx nw no np nq bi translated">默认情况下，所有请求都会被拒绝，唯一的例外是拥有完全访问权限的帐户root用户。</li><li id="586b" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nw no np nq bi translated">基于身份或基于资源的策略中的显式允许会覆盖默认的拒绝。</li><li id="3def" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nw no np nq bi translated">如果存在权限边界、组织SCP或会话策略，它可能会用隐式拒绝覆盖允许。</li><li id="1b0f" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nw no np nq bi translated">任何策略中的明确拒绝都会覆盖任何允许。</li></ul><h1 id="44d9" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">结论</h1><p id="7b85" class="pw-post-body-paragraph kc kd in ke b kf mi jo kh ki mj jr kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">对我来说，谷歌提供的IAM模型看起来更优雅，更容易理解，如果与AWS IAM相比，但我想这可能只是一个个人喜好的问题。</p><p id="04d5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">AWS是公共云计算的先驱，作为先驱，他们有时会面临一些障碍和隐藏的设计问题，其他云提供商可以考虑这些问题。</p></div><div class="ab cl nx ny hr nz" role="separator"><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc od"/><span class="oa bw bk ob oc"/></div><div class="ig ih ii ij ik"><h1 id="dd56" class="lq lr in bd ls lt oe lv lw lx of lz ma jt og ju mc jw oh jx me jz oi ka mg mh bi translated">链接</h1><ul class=""><li id="5e3a" class="ni nj in ke b kf mi ki mj kl oj kp ok kt ol kx nw no np nq bi translated">谷歌云IAM文档可以在<a class="ae lo" href="https://cloud.google.com/iam/docs" rel="noopener ugc nofollow" target="_blank">这里</a>找到</li><li id="d734" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nw no np nq bi translated">AWS IAM文档可以在<a class="ae lo" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到</li><li id="2c23" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nw no np nq bi translated"><a class="ae lo" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html" rel="noopener ugc nofollow" target="_blank"> AWS IAM最佳实践</a></li><li id="eb9c" class="ni nj in ke b kf nr ki ns kl nt kp nu kt nv kx nw no np nq bi translated"><a class="ae lo" href="https://cloud.google.com/docs/compare" rel="noopener ugc nofollow" target="_blank">谷歌云与其他平台的比较</a></li></ul></div></div>    
</body>
</html>