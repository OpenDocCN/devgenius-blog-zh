<html>
<head>
<title>Download Memes And Tiktoks Using Fish Scripting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Fish 脚本下载迷因和 Tiktoks</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/download-memes-and-tiktoks-using-fish-scripting-e430fbddf744?source=collection_archive---------6-----------------------#2022-08-05">https://blog.devgenius.io/download-memes-and-tiktoks-using-fish-scripting-e430fbddf744?source=collection_archive---------6-----------------------#2022-08-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="2ac4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">问候书呆子👋今天我们将学习如何从网上下载内容，特别是 reddit，因为作为一名开发人员，它非常容易“破解”,所以如果你想下载迷因稍后发布到你的 discord 服务器或观看随机 tiktoks，这个博客是为你准备的</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/c69b4af690c05a2baeaeebb0dc21847f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/0*ckgECDbzKS43ztr1"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated"><a class="ae ku" href="https://media.istockphoto.com/photos/friends-watching-smartphone-content-in-the-street-picture-id1066622066?k=20&amp;m=1066622066&amp;s=612x612&amp;w=0&amp;h=FHqqjEfbu-qbEGZWX6Kz1OBMr5B37U_eJ3mZcaHSAvs=" rel="noopener ugc nofollow" target="_blank">https://media . istock photo . com/photos/friends-watching-smart phone-content-in-the-street-picture-id 1066622066？k = 20&amp;m = 1066622066&amp;s = 612 x612&amp;w = 0&amp;h = FHqqjEfbu-qbegzwx 6 kz 1 obm r5 b 37 u _ EJ 3 mzcahsavs =</a></figcaption></figure><p id="7475" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="kv">今日菜单上的</em> </strong></p><ul class=""><li id="6785" class="kw kx in jm b jn jo jr js jv ky jz kz kd la kh lb lc ld le bi translated">使用<code class="fe lf lg lh li b">curl</code>从 reddit 下载图片</li><li id="6211" class="kw kx in jm b jn lj jr lk jv ll jz lm kd ln kh lb lc ld le bi translated">使用惊人的<code class="fe lf lg lh li b">youtube-dl</code>下载视频</li><li id="b45c" class="kw kx in jm b jn lj jr lk jv ll jz lm kd ln kh lb lc ld le bi translated">最后使用<code class="fe lf lg lh li b">crontab</code>来安排发布到我们的服务器</li></ul><p id="17ea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">没有任何进一步的样板文件，让我们开始吧</p></div><div class="ab cl lo lp hr lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ig ih ii ij ik"><p id="9d8a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="kv">使用 curl 和 wget 从网络上下载内容</em> </strong></p><p id="4de5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在今天的终极一击中🍑我们有一个强大的命令行工具叫做<code class="fe lf lg lh li b">wget</code>，我们可以用它从网上下载视频和图像，如果我们给它提供任何 URL 或者一个带有 URL 列表的文件，很酷吧？</p><p id="0206" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你有图片链接，你可以用它从 reddit 或任何其他来源下载图片，所以我们只需从 r/memes 下载一些 memes，你会发现这很简单</p><pre class="kj kk kl km gt lv li lw lx aw ly bi"><span id="9903" class="lz ma in li b gy mb mc l md me">curl -s -A "cute bot" <a class="ae ku" href="https://reddit.com/r/memes/top.json" rel="noopener ugc nofollow" target="_blank">https://reddit.com/r/memes/top.json</a> | jq '.'</span></pre><p id="a7ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里有一个巧妙的技巧来获得 JSON 格式的任何 subreddit 内容，您也可以使用<code class="fe lf lg lh li b">/subreddit/hot.json</code>、<code class="fe lf lg lh li b">/subreddit/new.json</code>或使用<code class="fe lf lg lh li b">?limit=</code>指定一个限制，最多只返回 101 个结果，接下来我们将输出通过管道传输到<code class="fe lf lg lh li b">jq</code>进行漂亮的解析</p><p id="1fad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在在浏览器中打开链接，查看 JSON 结构，因为我将只提取包含<code class="fe lf lg lh li b">jpg</code>、<code class="fe lf lg lh li b">png</code>或<code class="fe lf lg lh li b">gif</code>的链接，因为它们是我们从响应中看到的唯一链接</p><pre class="kj kk kl km gt lv li lw lx aw ly bi"><span id="945b" class="lz ma in li b gy mb mc l md me">curl -s -A "handsome boy" <a class="ae ku" href="https://www.reddit.com/r/memes/hot.json" rel="noopener ugc nofollow" target="_blank">https://www.reddit.com/r/memes/hot.json</a> | jq -r '.data.children[].data.url_overridden_by_dest' | grep -Eoh "https:\/\/\i\.\w+\.\w+\/\w+(\.jpg|\.gif|\.png)"</span></pre><p id="ae9f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果对你来说没有任何意义，请看看我关于正则表达式的博客</p><p id="53bf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们将它包装在一个漂亮的<code class="fe lf lg lh li b">for</code>循环中，使用<code class="fe lf lg lh li b">wget</code>下载所有提取的链接，所以我们的脚本现在应该看起来像这样</p><pre class="kj kk kl km gt lv li lw lx aw ly bi"><span id="6beb" class="lz ma in li b gy mb mc l md me">#!/usr/bin/env fish<br/>for meme in (curl -s -A "handsome boy" <a class="ae ku" href="https://www.reddit.com/r/memes/hot.json" rel="noopener ugc nofollow" target="_blank">https://www.reddit.com/r/memes/hot.json</a> | jq -r '.data.children[].data.url_overridden_by_dest' | grep -Eoh "https:\/\/\i\.\w+\.\w+\/\w+(\.jpg|\.gifv|\.gif|\.png)")<br/>   wget $meme<br/>end</span></pre><p id="8e6f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就这样，我们下载了 r/memes 热门版块中的每一个 meme</p></div><div class="ab cl lo lp hr lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ig ih ii ij ik"><p id="b34d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="kv">使用 curl 和 youtube 下载视频-dl </em> </strong></p><p id="4122" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你不知道——很不幸，至少可以这么说— <a class="ae ku" href="https://github.com/ytdl-org/youtube-dl" rel="noopener ugc nofollow" target="_blank"> youtube-dl </a>是一个非常棒且非常受欢迎的命令行实用程序，用于从包括 youtube 在内的多个来源下载视频。当然，结合我们的 shell 脚本，我们将从 r/tiktokcringe 中提取视频链接，并使用<a class="ae ku" href="https://github.com/ytdl-org/youtube-dl" rel="noopener ugc nofollow" target="_blank"> youtube-dl </a>实用程序下载它们</p><p id="ec1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我们看看这些链接是什么样子的，这样我们就可以编写一个合适的正则表达式</p><pre class="kj kk kl km gt lv li lw lx aw ly bi"><span id="a4aa" class="lz ma in li b gy mb mc l md me">curl -s -A "handsome bot" <a class="ae ku" href="https://reddit.com/r/tiktokcringe/top.json?t=week" rel="noopener ugc nofollow" target="_blank">https://reddit.com/r/tiktokcringe/top.json?t=week</a> | jq '.data.children[].data.url_overridden_by_dest'</span></pre><p id="86f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将为我们带来本周的热门帖子，你可以使用<code class="fe lf lg lh li b">day</code>、<code class="fe lf lg lh li b">month</code>或<code class="fe lf lg lh li b">year</code></p><p id="7c5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">根据输出判断，在这种情况下我们似乎不需要正则表达式，因为我们不需要过滤掉任何内容，所以我们将继续下载这些链接</p><pre class="kj kk kl km gt lv li lw lx aw ly bi"><span id="7426" class="lz ma in li b gy mb mc l md me">#!/usr/bin/env fish</span><span id="53d5" class="lz ma in li b gy mf mc l md me">for video in (curl -s -A "handsome boy" <a class="ae ku" href="https://www.reddit.com/r/memes/hot.json" rel="noopener ugc nofollow" target="_blank">https://www.reddit.com/r/memes/hot.json</a> | jq -r '.data.children[].data.url_overridden_by_dest'<br/>   wget $video<br/>end</span></pre><p id="48d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您的 tiktoks 就在当前目录中了</p><p id="aff3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kv">家庭作业:通过提示用户进入输出目录，使脚本更具交互性</em></p></div><div class="ab cl lo lp hr lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ig ih ii ij ik"><p id="9cf1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天的博客到此结束，我希望你们都学到了一些东西，如果你喜欢，请点击👏在底下</p><p id="edc1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">快乐编码</p></div></div>    
</body>
</html>