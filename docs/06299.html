<html>
<head>
<title>Speed-Up Your Tests Automating Project Creation On Google Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">加速您的测试在Google Cloud上自动创建项目</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/speed-up-your-tests-automating-project-creation-on-google-cloud-e60b36923ed7?source=collection_archive---------11-----------------------#2021-12-28">https://blog.devgenius.io/speed-up-your-tests-automating-project-creation-on-google-cloud-e60b36923ed7?source=collection_archive---------11-----------------------#2021-12-28</a></blockquote><div><div class="fc ic id ie if ig"/><div class="ih ii ij ik il"><div class=""/><p id="d223" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">通过在Google Cloud中使用Terraform自动创建和删除项目来加速测试。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gi gj kj"><img src="../Images/54c5be6b595332e31959577cdbef6622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nvlCmbr-M9mE7zjZZmM6ug.jpeg"/></div></div><figcaption class="kv kw gk gi gj kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@amr_taha?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Amr Taha</a>在<a class="ae kz" href="https://unsplash.com/s/photos/headphones-on-desk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7bba" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">最近，我遇到了这样一种情况:必须尝试一些新的东西，时间被一些平凡的任务所消耗，比如创建一个测试项目，然后担心删除它或者至少删除所有使用过的服务。</p><p id="d159" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">因此，为了加快速度，我不仅开始自动化服务的设置，还开始自动化项目本身的创建。</p><p id="10c9" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">这是我一直在使用的样本模板。</p></div><div class="ab cl la lb hs lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ih ii ij ik il"><h2 id="aba3" class="lh li io bd lj lk ll dn lm ln lo dp lp jw lq lr ls ka lt lu lv ke lw lx ly lz bi translated">账单账户</h2><p id="f2a0" class="pw-post-body-paragraph jl jm io jn b jo ma jq jr js mb ju jv jw mc jy jz ka md kc kd ke me kg kh ki ih bi translated">首先，您需要一个现有的计费帐户来关联您的新项目。如果你想创建服务，谷歌不会免费提供，所以，如果没有地方收费，你就不会被允许创建服务。</p><p id="b89b" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">您需要<a class="ae kz" href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/data-sources/billing_account" rel="noopener ugc nofollow" target="_blank">Google _ billing _ account</a>terra form对象。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mf mg l"/></div></figure><p id="1c2d" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">在这里，Terraform将搜索一个名为<code class="fe mh mi mj mk b">My Billing Account</code>的<code class="fe mh mi mj mk b">OPEN</code>计费账户。</p><h2 id="7970" class="lh li io bd lj lk ll dn lm ln lo dp lp jw lq lr ls ka lt lu lv ke lw lx ly lz bi translated">项目</h2><p id="0255" class="pw-post-body-paragraph jl jm io jn b jo ma jq jr js mb ju jv jw mc jy jz ka md kc kd ke me kg kh ki ih bi translated">有了计费帐户的参考，我们可以继续创建一个<a class="ae kz" href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project" rel="noopener ugc nofollow" target="_blank"> google_project </a>。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mf mg l"/></div></figure><p id="6830" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">正如您所看到的，您可以通过在项目参数中直接硬编码计费帐户id来保存初始步骤，但是这可能会在以后引入安全问题。</p><h2 id="9797" class="lh li io bd lj lk ll dn lm ln lo dp lp jw lq lr ls ka lt lu lv ke lw lx ly lz bi translated">服务</h2><p id="f0b3" class="pw-post-body-paragraph jl jm io jn b jo ma jq jr js mb ju jv jw mc jy jz ka md kc kd ke me kg kh ki ih bi translated">如果你已经有了一些使用谷歌云的经验，你会知道有些服务开箱后就被禁用了。对于自动化项目创建的想法来说，这将是一个挫折。</p><p id="0aca" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">幸运的是，Terraform还为我们提供了<a class="ae kz" href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project_service" rel="noopener ugc nofollow" target="_blank"> google_project_service </a>，我们可以在其中维护我们的项目所使用的服务。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mf mg l"/></div></figure></div><div class="ab cl la lb hs lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ih ii ij ik il"><p id="9a9d" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">如果您正在考虑以这种方式维护生产环境，我建议将项目创建与实际服务隔离开来(分别管理它们)。</p><p id="f050" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">至于测试，对我来说，这种方法创造了奇迹，我只是在项目id中添加了一个随机字符串。</p><figure class="kk kl km kn gu ko"><div class="bz fq l di"><div class="mf mg l"/></div></figure></div></div>    
</body>
</html>