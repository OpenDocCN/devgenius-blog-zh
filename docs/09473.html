<html>
<head>
<title>Run Elasticsearch and Kibana as Docker containers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将 Elasticsearch 和 Kibana 作为 Docker 容器运行</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/run-elasticsearch-and-kibana-as-docker-containers-c5f5f5460afd?source=collection_archive---------5-----------------------#2022-08-23">https://blog.devgenius.io/run-elasticsearch-and-kibana-as-docker-containers-c5f5f5460afd?source=collection_archive---------5-----------------------#2022-08-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/456eb7c33c313c2ffd84147f2c6bb8f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BTsZ8WpBnH5jekLgobNoXA.png"/></div></div></figure><p id="fe81" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<a class="ae kt" href="https://medium.com/@mhdabdel151/elasticsearch-and-kibana-on-windows-lets-get-started-ff005f1fe2fc" rel="noopener">之前的文章</a>中，我们看到有几种方法可以创建 Elasticsearch 和 Kibana 部署，包括最简单和最快的方法，即使用 stack 提供的<a class="ae kt" href="https://cloud.elastic.co/registration" rel="noopener ugc nofollow" target="_blank">云服务</a>或在您自己的机器上进行本地部署。因此，我们介绍了 Windows 上的本地部署。今天我们将讨论第三种方式，即使用 Docker 容器。</p><p id="5728" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于那些不熟悉的人来说，<strong class="jx io"> Docker </strong>是一个在软件容器中部署特定程序的平台。<strong class="jx io">容器</strong>是预定义的单元，可以即时生成以部署某些应用程序或环境。我建议阅读<a class="ae kt" href="https://medium.com/@kmdkhadeer/docker-get-started-9aa7ee662cea" rel="noopener">这篇</a>精彩的文章来熟悉 Docker。</p><p id="265c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">容器基本上只是一个运行的进程。每个容器与其自己的私有文件系统通信，私有文件系统由 Docker <strong class="jx io">镜像</strong>提供，镜像包含运行应用程序所需的所有组件。</p><p id="29d8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Elastic Docker 注册表使<em class="ku"> Elasticsearch 和 Kibana 的 Docker 图像</em>可供下载。您可以在这里获得所有标签和发布的 Docker 图片的列表<a class="ae kt" href="https://www.docker.elastic.co/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="7a2f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你现在知道为了安装 Elasticsearch 和 Kibana，你必须首先安装适合你的系统的 Docker 版本。接下来，您必须按顺序执行以下指令，以检索 Elastic 团队在<a class="ae kt" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>上为您提供的图像:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="1395" class="le lf in la b gy lg lh l li lj">docker pull docker.elastic.co/elasticsearch/elasticsearch:8.3.3</span><span id="4c92" class="le lf in la b gy lk lh l li lj">docker pull docker.elastic.co/kibana/kibana:8.3.3</span></pre><p id="aa6d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在撰写本文时，Kibana 和 Elasticsearch 的版本是 8.3.3。下载完图片后，你需要启动 Elasticsearch。但在此之前，Docker- <em class="ku"> stans </em>会明白，我们必须首先预测我们的两个未来容器之间的通信，并创建一个<strong class="jx io"> Docker 网络</strong>，我们使用命令:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="b464" class="le lf in la b gy lg lh l li lj">docker network create elknetwork</span></pre><p id="bbd9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">随后，我们通过运行以下命令，将 Elasticsearch 容器与之前创建的网络相关联，从而启动该容器:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="432f" class="le lf in la b gy lg lh l li lj">docker run -- name esc1 -- net elknetwork -p 9200:9200 -p 9300:9300 -it docker.elastic.co/elasticsearch/elasticsearch:8.3.3</span></pre><p id="791a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">与上一篇文章中提到的过程相同，复制为<em class="ku">弹性客户端</em>生成的<em class="ku">密码</em>，以及为 Kibana 生成的<em class="ku">注册令牌</em>。为了检查容器是否已经启动，以及 Elasticsearch 是否正在运行，您可以通过进入<a class="ae kt" href="https://localhost:9200" rel="noopener ugc nofollow" target="_blank"><em class="ku">https://localhost:9200</em></a>来尝试与默认完成部署的界面进行交互。您应该会看到这样的响应:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="3502" class="le lf in la b gy lg lh l li lj">{</span><span id="9903" class="le lf in la b gy lk lh l li lj">  name: "DESKTOP-8LF96KY",</span><span id="df2e" class="le lf in la b gy lk lh l li lj">  cluster_name: "elasticsearch",</span><span id="1ebd" class="le lf in la b gy lk lh l li lj">  cluster_uuid: "MsnI8_QEVRSSPKc-6Tw2XQ",</span><span id="02e1" class="le lf in la b gy lk lh l li lj">  version: {</span><span id="df07" class="le lf in la b gy lk lh l li lj">    number: "8.3.3",</span><span id="5349" class="le lf in la b gy lk lh l li lj">    build_flavor: "default",</span><span id="3439" class="le lf in la b gy lk lh l li lj">    build_type: "zip",</span><span id="49a9" class="le lf in la b gy lk lh l li lj">    build_hash: "801fed28df74dbe527f89b71b098ccaff89d2c56",</span><span id="c3a0" class="le lf in la b gy lk lh l li lj">    build_date: "2022-07-23T19:30:09.227964828Z",</span><span id="6301" class="le lf in la b gy lk lh l li lj">    build_snapshot: false,</span><span id="5aee" class="le lf in la b gy lk lh l li lj">    lucene_version: "9.2.0",</span><span id="e99a" class="le lf in la b gy lk lh l li lj">    minimum_wire_compatibility_version: "7.17.0",</span><span id="d5cb" class="le lf in la b gy lk lh l li lj">    minimum_index_compatibility_version: "7.0.0"</span><span id="b630" class="le lf in la b gy lk lh l li lj">  },</span><span id="e241" class="le lf in la b gy lk lh l li lj">  tagline: "You Know, for Search"</span><span id="6fc7" class="le lf in la b gy lk lh l li lj">}</span></pre><p id="440c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">既然 Elasticsearch 已经上线，那就让我们来照顾一下 Kibana 吧。既然我们已经提取了相应的图像，我们只需要为 Kibana 创建另一个容器，将它连接到运行 Elasticsearch 的同一个网络<em class="ku">上，瞧。这可以通过运行以下命令来完成:</em></p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="33f7" class="le lf in la b gy lg lh l li lj">docker run --name kibc1 --net elknetwork -p 5601:5601 docker.elastic.co/kibana/kibana:8.3.3</span></pre><p id="b878" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">屏幕上会返回一个唯一的链接，你所要做的就是输入首次启动 Elasticsearch 时获得的<em class="ku">注册</em> <em class="ku">令牌</em>并与之前生成的信息连接，就这样。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/4354d73b18b6ebbfa91c2c1294e51eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3NVSLrLCA2jsyG3UOrqV5A.png"/></div></div></figure><p id="53e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果出于某种原因，您想要重置<em class="ku"> elastic </em>用户密码，没有什么比这更简单的了，您只需使用以下命令启动<a class="ae kt" href="https://www.elastic.co/guide/en/elasticsearch/reference/8.3/reset-password.html" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">elastic search-reset-password</strong></a>工具:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="cfe0" class="le lf in la b gy lg lh l li lj">docker exec -it esc1 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic</span></pre><p id="e363" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，在某些情况下，您可能需要生成一个新的 Kibana 注册令牌，因为这些令牌仅在创建后的 30 分钟内有效。这是通过运行<a class="ae kt" href="https://www.elastic.co/guide/en/elasticsearch/reference/8.3/create-enrollment-token.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">弹性搜索-创建-注册-令牌</strong> </a>工具来完成的:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="be23" class="le lf in la b gy lg lh l li lj">docker exec -it esc1 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s node</span></pre><p id="6160" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了使事情更加集中，我们可以使用<strong class="jx io"><em class="ku">【docker-compose】</em></strong>，但不要担心，这可能是未来文章的主题。</p><p id="1454" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">今天到此为止，请随意查看官方文档了解更多细节和配置。感谢您的阅读，如果您对本文有任何问题或评论，请在下面留下您的评论。</p><p id="caad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们下次再见，看更多的帖子。</p><p id="483d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">阿卜杜尔-巴吉</p></div></div>    
</body>
</html>