<html>
<head>
<title>How To Convert Laravel Query To SQL Query</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将 Laravel 查询转换成 SQL 查询</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-convert-laravel-query-to-sql-query-2dd2208309ff?source=collection_archive---------4-----------------------#2022-12-16">https://blog.devgenius.io/how-to-convert-laravel-query-to-sql-query-2dd2208309ff?source=collection_archive---------4-----------------------#2022-12-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="8f3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我们将了解如何将 laravel 查询转换为 SQL 查询。很多时候，我们需要 laravel query builder 将其原始 SQL 查询作为一个字符串。</p><p id="c258" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Laravel 提供了不同的方法来获取原始 SQL 查询。您可以使用 toSql()查询构建器方法获得 SQL 查询。</p><p id="edd0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，您可以使用 laravel 查询日志来获取 laravel 中的 SQL 查询。为了获取查询日志，我们将使用 enableQueryLog()方法。</p><p id="423f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，让我们看看如何从一个 laravel 中获取原始 SQL 查询。</p><p id="d150" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">toSql()函数:</strong></p><p id="473b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个例子中，我们将使用 toSql()方法来获取原始 Sql 查询。toSql()获取查询的 Sql 表示并返回字符串值。如果您的查询更复杂或者有子查询，这个方法不会显示整个查询。</p><p id="9f2e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> SQL 查询示例:</strong></p><pre class="ki kj kk kl gt km kn ko bn kp kq bi"><span id="a98e" class="kr ks in kn b be kt ku l kv kw">SELECT * FROM articles WHERE status='published';</span></pre><p id="bb1e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> Laravel 查询示例:</strong></p><pre class="ki kj kk kl gt km kn ko bn kp kq bi"><span id="adc1" class="kr ks in kn b be kt ku l kv kw">$articles = Article::where('status', 'published')-&gt;get();</span></pre><p id="3047" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<code class="fe kx ky kz kn b">toSql()</code>方法，您可以用<code class="fe kx ky kz kn b">toSql().</code>更改上面查询中的<code class="fe kx ky kz kn b">get()</code>部分</p><pre class="ki kj kk kl gt km kn ko bn kp kq bi"><span id="6b69" class="kr ks in kn b be kt ku l kv kw">$article = Article::where('status', 'published')-&gt;toSql();</span></pre><p id="5c28" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">输出:</strong></p><pre class="ki kj kk kl gt km kn ko bn kp kq bi"><span id="6d2c" class="kr ks in kn b be kt ku l kv kw">"select * from `articles` where `status` = ?"</span></pre></div><div class="ab cl la lb hr lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ig ih ii ij ik"><p id="7a7f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">另请阅读:</strong> <a class="ae lh" href="https://websolutionstuff.com/post/how-to-get-client-ip-address-in-laravel-9" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何获取 Laravel 9 </strong> </a>中的客户端 IP 地址</p></div><div class="ab cl la lb hr lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ig ih ii ij ik"><p id="452c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">enableQueryLog()函数:</strong></p><p id="08cc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Laravel 可以有选择地将针对当前请求运行的所有查询记录到内存中。您可以使用<strong class="jm io"> enableQueryLog()方法来启用日志。</strong></p><pre class="ki kj kk kl gt km kn ko bn kp kq bi"><span id="4e04" class="kr ks in kn b be kt ku l kv kw">public function store(Request $request){<br/>    \DB::enableQueryLog();<br/>    Post::where('is_active', '=', '1')        <br/>        -&gt;orderBy('publish_date', 'desc')<br/>        -&gt;limit(15)<br/>        -&gt;get();<br/>        dd(\DB::getQueryLog());<br/>}</span></pre><p id="1159" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">输出:</strong></p><pre class="ki kj kk kl gt km kn ko bn kp kq bi"><span id="d65f" class="kr ks in kn b be kt ku l kv kw">array:1 [▼<br/>  0 =&gt; array:3 [▼<br/>    "query" =&gt; "select * from `posts` where `is_active` = ? order by `publish_date` desc limit 15"<br/>    "bindings" =&gt; array:1 [▶]<br/>    "time" =&gt; 7.03<br/>  ]<br/>]</span></pre><p id="a4b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以，你可以用数组格式得到查询和查询的执行时间。</p><pre class="ki kj kk kl gt km kn ko bn kp kq bi"><span id="f657" class="kr ks in kn b be kt ku l kv kw">\DB::enableQueryLog(); // Enable query log<br/><br/>// Your Eloquent query executed by using get()<br/><br/>dd(\DB::getQueryLog()); // Show results of log</span></pre></div><div class="ab cl la lb hr lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ig ih ii ij ik"><p id="46cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">你可能也会喜欢:</strong></p><ul class=""><li id="3eb8" class="li lj in jm b jn jo jr js jv lk jz ll kd lm kh ln lo lp lq bi translated"><strong class="jm io">阅读也:</strong> <a class="ae lh" href="https://websolutionstuff.com/post/how-to-get-last-15-days-records-in-mysql" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何在 MySQL </strong> </a>中获取最近 15 天的记录</li><li id="def2" class="li lj in jm b jn lr jr ls jv lt jz lu kd lv kh ln lo lp lq bi translated"><strong class="jm io">阅读另:</strong> <a class="ae lh" href="https://websolutionstuff.com/post/how-to-import-csv-file-in-mysql-using-node-js" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何在 MySQL 中使用 Node.js </strong> </a>导入 CSV 文件】</li><li id="572d" class="li lj in jm b jn lr jr ls jv lt jz lu kd lv kh ln lo lp lq bi translated"><strong class="jm io">阅读也:</strong> <a class="ae lh" href="https://websolutionstuff.com/post/how-to-use-json-data-field-in-mysql-database" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何使用 MySQL 数据库中的 JSON 数据字段</strong> </a></li><li id="f305" class="li lj in jm b jn lr jr ls jv lt jz lu kd lv kh ln lo lp lq bi translated"><strong class="jm io">阅读也:</strong> <a class="ae lh" href="https://websolutionstuff.com/post/how-to-fix-mysql-shutdown-unexpectedly-in-xampp" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何修复 MySQL 在 XAMPP 意外关机</strong> </a></li></ul></div><div class="ab cl la lb hr lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ig ih ii ij ik"><p id="ea6f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果这篇文章有帮助，请点击拍手👏下面的按钮。</p></div></div>    
</body>
</html>