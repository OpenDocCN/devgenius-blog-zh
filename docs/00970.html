<html>
<head>
<title>How to use multiple environments in .Net Core</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨ä¸­ä½¿ç”¨å¤šç§ç¯å¢ƒï¼Ÿç½‘ç»œæ ¸å¿ƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/how-to-use-multiple-environments-in-net-core-b3441612e8bd?source=collection_archive---------2-----------------------#2020-06-21">https://blog.devgenius.io/how-to-use-multiple-environments-in-net-core-b3441612e8bd?source=collection_archive---------2-----------------------#2020-06-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5314" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä¸­ç®¡ç†å¤šä¸ªå¼€å‘ç¯å¢ƒçš„ç»¼åˆæ–¹æ³•ã€‚ç½‘èŠ¯ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/4cee75be9dc897b3f37233affbd252aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f3WXZr5TimCxd8Nld9xQ8g.jpeg"/></div></div></figure><h1 id="761f" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">æ¦‚è§‚</h1><p id="124b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">éšç€â€¦â€¦çš„å¼•å…¥ã€‚Net Coreå¸¦æ¥äº†ä¸€ç³»åˆ—çš„æ”¹è¿›ï¼ŒåŒ…æ‹¬ä¸ªäººå’Œä¼ä¸šè§£å†³æ–¹æ¡ˆã€‚å¼€å§‹å­¦çš„æ—¶å€™ã€‚Net Coreæ²¡æœ‰å¿…è¦äº†è§£å¤šç§å¼€å‘ç¯å¢ƒå’Œéƒ¨ç½²ç®¡é“ï¼Œå› ä¸ºåœ¨è½¬å‘ç”Ÿäº§å°±ç»ªå‹åº”ç”¨ç¨‹åºæ—¶ï¼Œæ•™ç¨‹å’Œåœ¨çº¿è¯¾ç¨‹ä¸ä¼šæ¶µç›–è¿™äº›é‡è¦ä¿¡æ¯ã€‚</p><p id="f691" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•æ­£ç¡®åœ°è®¾ç½®å¤šä¸ªã€‚Netæ ¸å¿ƒåº”ç”¨ç¨‹åºç¯å¢ƒï¼Œå¹¶åˆ©ç”¨ä¸åŒçš„appsetting.jsonæ–‡ä»¶ã€‚</p><h1 id="fbc3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">å…ˆå†³æ¡ä»¶</h1><p id="4456" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">æˆ‘å¸Œæœ›ä½ å¯¹é¢å‘å¯¹è±¡ç¼–ç¨‹æ¦‚å¿µæœ‰åŸºæœ¬çš„äº†è§£ã€‚</p><ul class=""><li id="62e0" class="ma mb iq jp b jq jr ju jv jy mc kc md kg me kk mf mg mh mi bi translated"><a class="ae mj" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studioä»£ç </a>(æˆ–ä»»ä½•å…¶ä»–ä»£ç ç¼–è¾‘å™¨)</li><li id="dd36" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated"><a class="ae mj" href="https://dotnet.microsoft.com/download" rel="noopener ugc nofollow" target="_blank">ã€‚ç½‘èŠ¯3.1 SDK </a></li><li id="10f2" class="ma mb iq jp b jq mk ju ml jy mm kc mn kg mo kk mf mg mh mi bi translated"><a class="ae mj" href="https://azure.microsoft.com/en-us/free/" rel="noopener ugc nofollow" target="_blank">è”šè“è´¦æˆ·</a></li></ul><h1 id="eb0b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">æ­¥éª¤1 â€”åˆ›å»ºAPI</h1><p id="4b94" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºã€‚Netæ ¸å¿ƒweb APIã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ç”¨äºè¿™ä¸ªç›®çš„çš„SDKã€‚é€‰æ‹©å¸Œæœ›åº”ç”¨ç¨‹åºé©»ç•™çš„æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€å‘½ä»¤ç»ˆç«¯å¹¶é”®å…¥ä»¥ä¸‹å‘½ä»¤:</p><pre class="km kn ko kp gt mp mq mr ms aw mt bi"><span id="63bf" class="mu ky iq mq b gy mv mw l mx my">mkdir mkdir multi_environment_webapi<br/>cd multi_environment_webapi<br/>dotnet new webapi<br/>code . // If using VS Code</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mz"><img src="../Images/83788d5878ae296868684fd0a3495fcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*GTdBvVSZ4tK5kxLQy-zhJg.gif"/></div></div></figure><p id="c697" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœä¸€åˆ‡æŒ‰é¢„æœŸè¿›è¡Œï¼Œæ‚¨åº”è¯¥æ‰“å¼€ä»£ç ç¼–è¾‘å™¨ï¼Œå·¥ä½œç›®å½•ä¸­çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi na"><img src="../Images/b74f0cd920445561943f9d44a89865bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:716/format:webp/1*TBqnNd3ShL098RjxqZ8pbw.png"/></div></figure><h1 id="76f5" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">æ­¥éª¤2-æ·»åŠ å¤šä¸ªappsetting.jsonæ–‡ä»¶</h1><p id="9d3a" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">ç°åœ¨ï¼Œä¸ºäº†ä¿æŒæ•´æ´æœ‰åºï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªç‰¹å®šäºç¯å¢ƒçš„appsettingæ–‡ä»¶ã€‚ä¸ºäº†æˆ‘ä»¬çš„å‘å±•ï¼ŒRecetteå’Œç”Ÿäº§åº”è¯¥æ˜¯å……è¶³çš„ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nb"><img src="../Images/bb841beb22a1eb0088c2f8f5c3372b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pj_Zr0b-3dZJ3HhS6VzFwQ.gif"/></div></div></figure><p id="b860" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">é»˜è®¤æƒ…å†µä¸‹ã€‚Net coreå·²ç»æ”¯æŒå¤šç§ç¯å¢ƒï¼Œä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒåªåŠ è½½ç‰¹å®šç¯å¢ƒçš„è®¾ç½®ã€‚æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯æ‹¥æœ‰ä¸€ä¸ªå…±äº«çš„appsettings.jsonæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ç¯å¢ƒä¸å˜çš„é…ç½®å’Œç”¨äºç‰¹å®šäºç¯å¢ƒçš„é…ç½®çš„å•ç‹¬æ–‡ä»¶ã€‚</p><p id="e439" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æˆ‘ä»¬æ¥æ·»åŠ ä¸€äº›é…ç½®ã€‚</p><p id="215e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨â€œappsettingsã€‚Recette.jsonâ€œæˆ‘ä»¬è¡¥å……ä¸€ä¸‹</p><pre class="km kn ko kp gt mp mq mr ms aw mt bi"><span id="35d0" class="mu ky iq mq b gy mv mw l mx my">{<br/>   "Message": "Hello from Recette environment file"<br/>}</span></pre><p id="fa95" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¯¹å…¶ä»–ç¯å¢ƒä¹ŸåšåŒæ ·çš„äº‹æƒ…ã€‚</p><p id="afd4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æœ€åï¼Œæ˜¯æ—¶å€™æ·»åŠ å¯¹åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶çš„æ”¯æŒäº†ã€‚æˆ‘ä»¬å°†å¯¹ç¨‹åºåšä¸€äº›ä¿®æ”¹</p><pre class="km kn ko kp gt mp mq mr ms aw mt bi"><span id="4ce3" class="mu ky iq mq b gy mv mw l mx my">public static IHostBuilder CreateHostBuilder(string[] args)=&gt;<br/> Host.CreateDefaultBuilder(args)<br/>    .ConfigureWebHostDefaults(webBuilder =&gt;<br/>    {<br/>       webBuilder.UseStartup&lt;Startup&gt;();<br/>    })<br/>    <strong class="mq ir">.ConfigureAppConfiguration(appConfig =&gt;<br/>    {<br/>       appConfig.AddJsonFile($"appsettings.json", false, true);  <br/>       appConfig.AddJsonFile(  $"appsettings{Environment.GetEnvironmentVariable(<br/>"ASPNETCORE_ENVIRONMENT")}.json", false, true);<br/>    });</strong></span></pre><p id="f83e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å®ƒæ‰€åšçš„åªæ˜¯åŠ è½½é»˜è®¤çš„â€œappsettings.jsonâ€æ–‡ä»¶ä»¥åŠä¾èµ–äº<strong class="jp ir"> ASPNETCORE_ENVIRONMENT </strong>å˜é‡çš„å€¼çš„è®¾ç½®ã€‚</p><h1 id="7385" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">ç¬¬ä¸‰æ­¥â€”â€”æ”¶è·æˆæœ</h1><p id="7d25" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">ç»ˆäºï¼Œæ˜¯æ—¶å€™çœ‹çœ‹æˆ‘ä»¬çš„åŠ³åŠ¨æˆæœäº†ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„è¡¨ç¤ºæ§åˆ¶å™¨ï¼Œä»æˆ‘ä»¬çš„é…ç½®ä¸­è¿”å›æˆ‘ä»¬çš„æ¶ˆæ¯ï¼›</p><p id="c261" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è½¬åˆ°â€œæ§åˆ¶å™¨â€æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºâ€œSettingsMessageController.csâ€çš„æ–°æ–‡ä»¶</p><pre class="km kn ko kp gt mp mq mr ms aw mt bi"><span id="3058" class="mu ky iq mq b gy mv mw l mx my">using Microsoft.AspNetCore.Mvc;<br/>using Microsoft.Extensions.Configuration;</span><span id="a20d" class="mu ky iq mq b gy nc mw l mx my">namespace multi_environment_webapi.Controllers<br/>{<br/>   [ApiController]<br/>   [Route("[controller]")]<br/>   public class SettingsMessageController : ControllerBase<br/>   {<br/>      private string settingMessage;<br/>      public SettingsMessageController(IConfiguration configuration)<br/>      {<br/>         settingMessage = configuration.GetValue&lt;string&gt;("Message");<br/>      }<br/>   <br/>     [HttpGet]<br/>      public string Get()<br/>      {<br/>         return settingMessage;<br/>      }<br/>   }<br/>}</span></pre><p id="a63e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æ‰“å¼€ä¸€ä¸ªå‘½ä»¤ç»ˆç«¯(åœ¨visual studioä»£ç ä¸­æ˜¯â€œCTRL +`â€)å¹¶é”®å…¥:</p><pre class="km kn ko kp gt mp mq mr ms aw mt bi"><span id="e86b" class="mu ky iq mq b gy mv mw l mx my">dotnet run</span></pre><p id="0e92" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç„¶åæ‰“å¼€æµè§ˆå™¨ï¼Œå¯¼èˆªåˆ°<a class="ae mj" href="https://localhost:5001/settingsmessage" rel="noopener ugc nofollow" target="_blank">localhost:5001/settings message</a>çœ‹çœ‹å§ã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nd"><img src="../Images/70b0be0d8724250ec5f87aebdfc85457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZqhSl_HNeiTHlTUYU9BbA.png"/></div></div></figure><p id="6b5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨æƒ³åœ¨å…¶ä»–ç¯å¢ƒä¸­æŸ¥çœ‹å…¶ä»–ç»“æœï¼Œåªéœ€å¯¼èˆªåˆ°launchSettings.jsonå¹¶æ›´æ”¹ASPNETCOR_ENVIRONMENTå˜é‡å€¼:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ne"><img src="../Images/fa7d51156df2184b9f3c74c7034a2bb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CYsrOuX6qe_gy9WHSxE1Dg.gif"/></div></div></figure><p id="5337" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±æ˜¯è¿™æ ·ï¼æ­å–œä½ ï¼</p><p id="3e66" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œæ‚¨å·²ç»æœ‰äº†ä¸€ä¸ªåŸºäºåº”ç”¨ç¨‹åºç¯å¢ƒçš„æ•´æ´ä¸”å‡†å¤‡å°±ç»ªçš„appsettingé…ç½®ã€‚æˆ‘å¸Œæœ›ä½ å­¦åˆ°äº†ä¸€äº›æ–°çš„æœ‰ç”¨çš„ä¸œè¥¿æ¥å¸®åŠ©ä½ æœªæ¥çš„é¡¹ç›®ã€‚</p><p id="0c9b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ å¯ä»¥åœ¨æˆ‘çš„Githubåº“ä¸ŠæŸ¥çœ‹æ•´ä¸ªé¡¹ç›®:</p><h2 id="c994" class="mu ky iq bd kz nf ng dn ld nh ni dp lh jy nj nk ll kc nl nm lp kg nn no lt np bi translated"><a class="ae mj" href="https://github.com/EButa/multi_environment_webapi/commit/ccf5d40decc45fd403b18bb14e0376402f47d2e4" rel="noopener ugc nofollow" target="_blank">https://github . com/EButa/multi _ environment _ webapi/commit/CCF 5d 40 decc 45 FD 403 b 18 bb 14 e 0376402 f 47 D2 E4</a></h2><p id="47d0" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œä¹Ÿå¸Œæœ›å®ƒå¯¹ä½ æœ‰ç”¨ã€‚æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼Œè®©æˆ‘äº†è§£å¦‚ä½•æ”¹è¿›è¿™ä¸€ç‚¹ã€‚</p><h1 id="bda1" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">è¿›ä¸€æ­¥å­¦ä¹ çš„å…è´¹å‚è€ƒèµ„æ–™:</h1><p id="195b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><a class="ae mj" href="https://bit.ly/medium_article_link" rel="noopener ugc nofollow" target="_blank">ã€‚NETæ ¸å¿ƒæ•™ç¨‹</a> â€”å¾®è½¯æ–‡æ¡£</p><p id="40ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae mj" href="https://bit.ly/medium_article_link2" rel="noopener ugc nofollow" target="_blank">ASP.NETæ ¸å¿ƒæ–‡æ¡£</a> â€”å¾®è½¯æ–‡æ¡£</p><h1 id="238c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">å¦‚æœä½ è§‰å¾—æœ‰ç”¨ï¼Œå¯ä»¥è€ƒè™‘æŠ•èµ„æˆ‘çš„å’–å•¡ç˜¾ã€‚</h1><div class="nq nr gp gr ns nt"><a href="https://www.buymeacoffee.com/ernebuta" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab fo"><div class="nv ab nw cl cj nx"><h2 class="bd ir gy z fp ny fr fs nz fu fw ip bi translated">mounted.devä¸ºæˆ‘æ™šä¸Šå›°æ‰°çš„é—®é¢˜æä¾›äº†è§£å†³æ–¹æ¡ˆ</h2><div class="oa l"><h3 class="bd b gy z fp ny fr fs nz fu fw dk translated">å˜¿ğŸ‘‹åªæ˜¯æ¥å¸®å¿™çš„ã€‚ä½œä¸ºä¸€åè½¯ä»¶å¼€å‘äººå‘˜ï¼Œæˆ‘çœŸçš„å¸Œæœ›èƒ½å¤šå–ç‚¹å’–å•¡ï¼ï¼</h3></div><div class="ob l"><p class="bd b dl z fp ny fr fs nz fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="oc l"><div class="od l oe of og oc oh kv nt"/></div></div></a></div></div></div>    
</body>
</html>