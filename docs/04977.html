<html>
<head>
<title>ScriptableObject Game Events</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ScriptableObject游戏事件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/scriptableobject-game-events-1f3401bbde72?source=collection_archive---------0-----------------------#2021-05-30">https://blog.devgenius.io/scriptableobject-game-events-1f3401bbde72?source=collection_archive---------0-----------------------#2021-05-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5cce" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在Unity中创建事件系统</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/04fe9e25c5b83309209b9931cb48fcbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/1*zV1YBFCx5YCsH65Vk3h5sA.gif"/></div></figure><p id="7f67" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我参加了一个Unity Talk<a class="ae lg" href="https://www.youtube.com/watch?v=raQ3iHhE_Kk" rel="noopener ugc nofollow" target="_blank"><strong class="km io">Unite 2017——带可脚本化对象的游戏架构</strong> </a>，我认为它是Unity中可以使用的最好的事件系统之一。原代码可在<a class="ae lg" href="https://github.com/roboryantron/Unite2017" rel="noopener ugc nofollow" target="_blank"><strong class="km io">Roboryantrin/unite 2017</strong></a>找到。我对原始代码做了一些小小的修改，以便添加一个可以在代码中完成的游戏事件监听器。</p><h1 id="6bb3" class="lh li in bd lj lk ll lm ln lo lp lq lr jt ls ju lt jw lu jx lv jz lw ka lx ly bi translated">ScriptableObject游戏事件</h1><p id="f498" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated">ScriptableObject游戏事件有一个游戏事件侦听器列表，这些侦听器使用注册和取消注册的公共方法注册到游戏事件。当事件被引发时，它通知所有注册的侦听器，并告诉它们运行它们的代码。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi me"><img src="../Images/77c2879800f2f0f2fca56d23d51fe8c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-5JUaZr5orD5UNUIqXMx0A.png"/></div></div></figure><p id="7ddb" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">创建一个游戏事件就像在Unity中创建任何其他资产一样。</p><p id="376e" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">通过在项目视图中右击</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/5cf34f7f87117bb3e769cd606e6a6e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/1*zduhn2zP_1GOOFoy4stxcA.gif"/></div></figure><p id="a8c2" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">使用资产-&gt;创建菜单</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mk"><img src="../Images/c847f51a1fde3812d32dc3e620b78bbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0K3TeO_93PeGtbWYIUc_lg.gif"/></div></div></figure><h1 id="7aa1" class="lh li in bd lj lk ll lm ln lo lp lq lr jt ls ju lt jw lu jx lv jz lw ka lx ly bi translated">游戏事件监听器</h1><p id="439c" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated">游戏事件侦听器接口需要一个名为OnEventRaised的方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/9db4b18e72cd4e718d1583297f56ade7.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*peYOWRqWbi2yp35zkHef3A.png"/></div></figure><h2 id="3e62" class="mm li in bd lj mn mo dn ln mp mq dp lr kt mr ms lt kx mt mu lv lb mv mw lx mx bi translated">Unity游戏事件监听器</h2><p id="c353" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated">Unity游戏事件监听器是一个MonBehavior，可以添加到场景中的游戏对象，该对象使用Unity事件来响应引发的游戏事件。它实现了游戏事件监听器接口。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi me"><img src="../Images/0cf40f34853cdacba0fe4243bad8f604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UVva1xkCOWtu6NCtOYNfzQ.png"/></div></div></figure><p id="11d7" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">使用<a class="ae lg" href="https://docs.unity3d.com/2021.1/Documentation/Manual/UnityEvents.html" rel="noopener ugc nofollow" target="_blank"> <strong class="km io"> Unity Events </strong> </a>这种方式的好处是，我不必通过代码编写事件被引发时会发生什么。</p><p id="bab2" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">将Unity游戏事件监听器组件添加到场景中的游戏对象。</p><p id="2295" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">指定我想听的游戏事件。</p><p id="c221" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在响应中指定我希望发生的事情。我可以在我的场景中使用任何游戏对象，并从该游戏对象上的任何脚本中调用任何公共方法。在这种情况下，我只是激活和停用游戏对象。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi my"><img src="../Images/8a9c88a2271b384a3a323323ab46ec66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/1*rYpuz1W3E2HNUpj4LXSyoA.gif"/></div></figure><p id="c9e7" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">当游戏事件被引发时，响应将被执行。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mz"><img src="../Images/d810183f0e3d2c525c13a45feb1fd770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rMinRhvNBfhDMvELsb1PFA.gif"/></div></div></figure><h2 id="9856" class="mm li in bd lj mn mo dn ln mp mq dp lr kt mr ms lt kx mt mu lv lb mv mw lx mx bi translated">编码游戏事件监听器</h2><p id="ce5c" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated">编码的游戏事件监听器是一个类，可以添加到使用<a class="ae lg" href="https://docs.microsoft.com/en-us/dotnet/api/system.action?view=net-5.0" rel="noopener ugc nofollow" target="_blank"> <strong class="km io">系统动作</strong> </a>来响应被引发的游戏事件的行为中。它实现了游戏事件监听器接口。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi na"><img src="../Images/4ba8f1e7a6c63eea29516c4fe6a0a107.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*CRee--ktXyAGQei_JPLL1w.png"/></div></figure><p id="ff07" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我需要确保OnEnabled和On Disabled方法被调用。</p><p id="f350" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在OnEnabled中，我传递了当游戏事件被引发时我想要运行的方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nb"><img src="../Images/55d10ac7d0b6bb4d46280df0115fce16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YImEHdztLHJH1llajy7-yg.png"/></div></div></figure><p id="06c3" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我将新的行为分配给场景中的游戏对象。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/0225718fa442013138965109b97de71a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/1*uBM-a4O4PaCUZnqJ_-egBw.gif"/></div></figure><p id="8986" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">当游戏事件被引发时，开始事件引发方法将运行。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nd"><img src="../Images/5a2c5fea63be4c87c2dc38ea232a76f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*q9SiVgap5ZpfovjelVEhSA.gif"/></div></div></figure><h1 id="5769" class="lh li in bd lj lk ll lm ln lo lp lq lr jt ls ju lt jw lu jx lv jz lw ka lx ly bi translated">触发事件</h1><p id="dd40" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated">现在我有了可以使用的游戏事件，我需要一种方法让游戏引发游戏事件。游戏中最常见的事件发生方式之一是玩家与游戏中的特定点进行互动。我创建了一个游戏事件触发器，当带有标签的游戏对象进入触发碰撞器时，它就会被触发。我还做了一个触发器，可以设置为触发一次游戏事件，比如过场动画。在On Trigger Enter方法中，我检查触发器是否是一次性触发器，以及游戏事件是否已经被触发，如果两者都为真，那么我退出该方法。我检查输入的碰撞器的标签是否在列表中。如果是，我设置游戏事件是否被触发为真并引发事件。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi nb"><img src="../Images/69c9f6f3537e8f47d6f8c4bd89a091d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ZoOQwt0uBYUPCzlEEWYeg.png"/></div></div></figure><p id="57d4" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">然后我在场景中设置了一个触发器，我可以用它来触发一个游戏事件。我确保碰撞器被设置为触发。然后我添加游戏事件触发器组件。我设置了希望这个触发器引发的游戏事件。我确保标签是正确的。因为这个触发器是我设置的过场动画</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ne"><img src="../Images/b8b5680fbf459da02abc1d122f3bc028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*frVsa-Tfi4AMT601Iwf9ag.gif"/></div></div></figure><p id="578a" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">当然，这不是提升游戏事件的唯一方法。一个游戏事件可以在代码中的任何时候被引发，当一个场景开始时，当一个值被改变时，当一个动画事件发生时，在时间轴中的某一点，等等…</p><h1 id="252a" class="lh li in bd lj lk ll lm ln lo lp lq lr jt ls ju lt jw lu jx lv jz lw ka lx ly bi translated">结论</h1><p id="f170" class="pw-post-body-paragraph kk kl in km b kn lz jo kp kq ma jr ks kt mb kv kw kx mc kz la lb md ld le lf ig bi translated">现在我有了一个简单的事件系统，我可以用Unity事件来响应Inspector，也可以通过代码来响应。当玩家进入触发点时，我可以很容易地触发游戏事件。</p></div></div>    
</body>
</html>