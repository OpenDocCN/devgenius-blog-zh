<html>
<head>
<title>Django and HTMX Part 1 (Page no-refresh like button)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Djangoå’ŒHTMXç¬¬1éƒ¨åˆ†(é¡µé¢æ— åˆ·æ–°æŒ‰é’®)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/django-and-htmx-part-1-ff629ae048f1?source=collection_archive---------2-----------------------#2021-12-14">https://blog.devgenius.io/django-and-htmx-part-1-ff629ae048f1?source=collection_archive---------2-----------------------#2021-12-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c897" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨ç¬¬ä¸€ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨HTMXåœ¨ç½‘é¡µä¸Šå®ç°ä¸€ä¸ªç®€å•çš„<em class="ki"> like </em>æŒ‰é’®ï¼Œä»¥é¿å…åœ¨Djangoç½‘ç«™ä¸Šç¼–å†™JavaScriptã€‚</p><p id="af9b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¸Œæœ›ç›´æ¥è·³åˆ°<em class="ki">æŒ‡å—</em>ï¼Ÿ<a class="ae kj" href="https://medium.com/p/ff629ae048f1#cb7d" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/bd559ba743df20e8e2f9173b4d0e206b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eK2HGogFkhw7RiBz"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk translated">è©¹å§†æ–¯Â·å“ˆé‡Œæ£®åœ¨<a class="ae kj" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</figcaption></figure></div><div class="ab cl la lb hr lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ig ih ii ij ik"><p id="1033" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¥½çš„ã€‚é¦–å…ˆï¼Œæˆ‘æƒ³è¯´æˆ‘ä¸æ˜¯å…¨æ ˆå¼€å‘äººå‘˜ï¼Œæˆ‘çš„æ—¶é—´æœ‰é™ã€‚åœ¨è¿‡å»çš„å‡ å¹´é‡Œï¼Œæˆ‘å–œæ¬¢å­¦ä¹ Djangoï¼Œå¹¶å¸Œæœ›å¼€å‘æ›´å…·äº’åŠ¨æ€§çš„ç½‘ç«™ã€‚<br/> Djangoæ˜¯ä¸€ä¸ªä½¿ç”¨Pythonåˆ›å»ºwebåº”ç”¨ç¨‹åºçš„ä¼˜ç§€æ¡†æ¶ã€‚è¯­æ³•ç®€å•æ˜äº†ï¼Œåªè¦ç¨åŠ ç»ƒä¹ å°±èƒ½è½»æ¾åˆ›å»ºwebåº”ç”¨ç¨‹åºï¼Œå› ä¸ºDjangoå†…ç½®äº†å¦‚æ­¤å¤šçš„ç‰¹æ€§ã€‚</p><p id="8aeb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å”¯ä¸€çš„é—®é¢˜æ˜¯ï¼Œä¸ºäº†åˆ›å»ºä¸€ä¸ªå…·æœ‰äº¤äº’ç‰¹æ€§çš„ç«™ç‚¹ï¼Œè€Œä¸æ¶‰åŠé¡µé¢é‡è½½ï¼Œç®€å•åˆ°åƒä¸€ä¸ªlikeæŒ‰é’®æ„å‘³ç€ä½ éœ€è¦å°†Djangoå’ŒJavaScriptç»“åˆèµ·æ¥ã€‚</p><p id="e2f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Djangoæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<em class="ki">åç«¯</em>æ¡†æ¶ï¼Œå®ƒå¯ä»¥åœ¨ä»æ•°æ®åº“ä¸­æå–æ•°æ®çš„åŒæ—¶æ ¹æ®è®¾è®¡å‘ˆç°ç½‘é¡µã€‚</p><p id="a6f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨è¯¸å¦‚å–œæ¬¢æŒ‰é’®çš„ç®€å•ç‰¹å¾çš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·ç‚¹å‡»æŒ‰é’®éœ€è¦ç½‘é¡µå‘å­˜å‚¨é¡µé¢æ•°æ®çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä»¥å¢åŠ ç‚¹å‡»æ—¶å–œæ¬¢çš„æ•°é‡ã€‚ç„¶è€Œï¼Œä¸å¹¸çš„æ˜¯ï¼Œç»“æœå°†æ„å‘³ç€æ•´ä¸ªé¡µé¢éƒ½éœ€è¦é‡æ–°åŠ è½½ï¼Œè€Œä¸ä»…ä»…æ˜¯é¡µé¢ä¸­éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ã€‚</p><p id="5231" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä½¿ç”¨JavaScriptå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°è¿™ä¸€ç‚¹ï¼Œè€Œä¸”éƒ½éœ€è¦å¾ˆé•¿çš„å­¦ä¹ æ—¶é—´ã€‚æˆ‘ä¸ªäººæ²¡æœ‰æ—¶é—´å»å­¦ä¹ æ¯ä¸€ç§ç½‘ç»œæŠ€æœ¯ï¼Œå› ä¸ºæˆ‘çš„æ—¥å¸¸å·¥ä½œä¸å…è®¸æˆ‘è¿™æ ·åšã€‚æ­¤å¤–ï¼Œæˆ‘ä¸ä½¿ç”¨æŸé¡¹æŠ€èƒ½çš„æ—¶é—´è¶Šé•¿ï¼Œå½“æˆ‘éœ€è¦å†æ¬¡ä½¿ç”¨è¯¥æŠ€èƒ½æ—¶ï¼Œå°±è¶Šæœ‰å¯èƒ½éœ€è¦é‡æ–°å­¦ä¹ è¯¥æŠ€èƒ½ã€‚</p><p id="51cc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘ç¡®ä¿¡åœ¨æœªæ¥ï¼ŒDjangoå°†ä¼šåŒ…å«ä¸€äº›ç‰¹æ€§ï¼Œä½¿å¾—è°ƒç”¨åç«¯æ›´åŠ å®¹æ˜“ã€‚åœ¨é‚£ä¹‹å‰ï¼Œæˆ‘å…ˆç»™ä½ ä»‹ç»ä¸€ä¸‹HTMXã€‚</p><p id="dc65" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">HTMXå…è®¸æˆ‘ä»¬åŒ…å«äº¤äº’ç‰¹æ€§ï¼ŒåŒæ—¶åªæ‰©å±•æˆ‘ä»¬æ— è®ºå¦‚ä½•éƒ½ä¼šåˆ›å»ºçš„HTMLæ¨¡æ¿çš„åŸºæœ¬è¯­æ³•ã€‚</p><p id="948a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸‹é¢æˆ‘å°†ä»‹ç»åˆ›å»ºä¸€ä¸ªç®€å•é¡µé¢å’Œå¸–å­çš„likeæŒ‰é’®çš„åŸºç¡€çŸ¥è¯†ã€‚</p></div><div class="ab cl la lb hr lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ig ih ii ij ik"><h2 id="cb7d" class="lh li in bd lj lk ll dn lm ln lo dp lp jv lq lr ls jz lt lu lv kd lw lx ly lz bi translated">åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><p id="adae" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">è®©æˆ‘ä»¬ä»åˆ›å»ºä¸€ä¸ªç®€å•çš„Djangoé¡¹ç›®å’Œåº”ç”¨ç¨‹åºå¼€å§‹ã€‚</p><p id="7a57" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¦‚æœä½ å–œæ¬¢åœ¨ä¸è¾“å…¥æ‰€æœ‰ä»£ç çš„æƒ…å†µä¸‹é‡æ–°åˆ›å»ºå®ƒï¼Œè¯·åœ¨è¿™é‡ŒæŸ¥çœ‹GitHub repo:<a class="ae kj" href="https://github.com/bitFez/htmx_guide_1_like_button" rel="noopener ugc nofollow" target="_blank">https://github.com/bitFez/htmx_guide_1_like_button</a></p><p id="117d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘åªæ˜¯åˆ—å‡ºäº†Windows PCçš„æ­¥éª¤ã€‚é¦–å…ˆï¼Œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œåœ¨æ‚¨å¸Œæœ›å®‰è£…Djangoé¡¹ç›®çš„æ–‡ä»¶å¤¹ä¸­é”®å…¥ä»¥ä¸‹å†…å®¹:</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="dd61" class="lh li in mg b gy mk ml l mm mn">virtualenv venv</span></pre><p id="d6a8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿è¡Œè™šæ‹Ÿç¯å¢ƒ</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="c13a" class="lh li in mg b gy mk ml l mm mn">venv/scripts/activate</span></pre><p id="ba1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å‡è®¾æ‚¨çš„è®¡ç®—æœºä¸Šå®‰è£…äº†python &gt;= 3.6ï¼Œè¯·é”®å…¥:</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="0171" class="lh li in mg b gy mk ml l mm mn">pip install Django==3.2.5</span></pre><p id="ff19" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å®‰è£…å®Œæˆåï¼Œè®©æˆ‘ä»¬å¼€å§‹ä¸€ä¸ªDjangoé¡¹ç›®ã€‚ä¸‹é¢ä¸€è¡Œä¸­çš„<code class="fe mo mp mq mg b">.</code>ç¡®ä¿é¡¹ç›®å®‰è£…åœ¨å½“å‰ç›®å½•ä¸­ï¼Œè€Œä¸æ˜¯å½“å‰ç›®å½•ä¸­çš„å¦ä¸€ä¸ªç›®å½•ã€‚</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="4d6c" class="lh li in mg b gy mk ml l mm mn">django-admin startproject core .</span></pre><p id="bd45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å› æ­¤ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªåä¸ºæ ¸å¿ƒçš„Djangoé¡¹ç›®ï¼Œæˆ‘ä»¬ç°åœ¨æƒ³åˆ›å»ºä¸€ä¸ªåä¸ºå¸–å­çš„åº”ç”¨ç¨‹åºã€‚</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="cadf" class="lh li in mg b gy mk ml l mm mn">python manage.py startapp posts</span></pre><p id="2961" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¯¥ç›®å½•åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="f1a5" class="lh li in mg b gy mk ml l mm mn">- core <br/>- posts<br/>- venv<br/>manage.py</span></pre><p id="d575" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨ï¼Œåœ¨æ ¸å¿ƒç›®å½•ä¸­ï¼Œæ‰“å¼€<code class="fe mo mp mq mg b">settings.py</code>ï¼Œåœ¨<code class="fe mo mp mq mg b">installed_apps</code>æ•°ç»„ä¸‹æ·»åŠ postsåº”ç”¨ç¨‹åºã€‚</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="f508" class="lh li in mg b gy mk ml l mm mn">INSTALLED_APPS = [<br/>  ...<br/>  # my apps<br/>  'posts',<br/>]</span></pre><p id="2bcc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨æ ¸å¿ƒåº”ç”¨ç¨‹åºç›®å½•ä¸­æ‰“å¼€<code class="fe mo mp mq mg b">urls.py</code>æ–‡ä»¶ï¼Œå¹¶åœ¨<code class="fe mo mp mq mg b">urlpatterns </code>æ•°ç»„ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="ed32" class="lh li in mg b gy mk ml l mm mn">from django.urls import path, <strong class="mg io"><em class="ki">include</em></strong> # add include here</span><span id="9b41" class="lh li in mg b gy mr ml l mm mn">urlpatterns = [<br/>  path('admin/', admin.site.urls),<br/>  path('', include('posts.urls')), # &lt;-- Add this line<br/>]</span></pre><p id="19a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨å¸–å­åº”ç”¨ç¨‹åºä¸­ï¼Œå°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°<code class="fe mo mp mq mg b">models.py</code>æ–‡ä»¶ä¸­</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="df06" class="lh li in mg b gy mk ml l mm mn">from django.db import models </span><span id="dc88" class="lh li in mg b gy mr ml l mm mn"># Create your models here.                             <br/>from django.db import models                             <br/>from django.contrib.auth.models import User                                                           </span><span id="9408" class="lh li in mg b gy mr ml l mm mn">class Post(models.Model):<br/>    # loads the USER linked to the profile from django AUTH<br/>    post_author = models.ForeignKey(User, on_delete=models.CASCADE)<br/>    post_content = models.TextField(null=True, blank=True)<br/>    likes = models.ManyToManyField(User, blank=True, related_name="collected_votes")</span></pre><p id="7c45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åŒæ ·åœ¨postsç›®å½•ä¸­ï¼Œå°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°<code class="fe mo mp mq mg b">admin.py</code>æ–‡ä»¶ä¸­ã€‚</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="13fc" class="lh li in mg b gy mk ml l mm mn">from django.contrib import admin<br/>from .models import Post<br/># Register your models here.<br/><br/><br/>class PostAdmin(admin.ModelAdmin):<br/>    model = Post<br/>    fields = ['post_author', 'post_content', 'likes']<br/><br/>admin.site.register(Post, PostAdmin)</span></pre><p id="23da" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨postsç›®å½•ä¸­åˆ›å»º2ä¸ªHTMLæ–‡ä»¶ã€‚ä¸€ä¸ªæ˜¯æŸ¥çœ‹å¸–å­çš„æ¨¡æ¿ã€‚å¦ä¸€ä¸ªæ˜¯éƒ¨åˆ†åŒºåŸŸï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒåœ¨æ¯æ¬¡æŒ‰ä¸‹æŒ‰é’®æ—¶åŠ¨æ€æ›´æ–°èµã€‚</p><p id="3610" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ç»“æ„ä¸­åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="c2a7" class="lh li in mg b gy mk ml l mm mn">posts<br/>â”‚   <br/>â””â”€â”€â”€templates<br/>â”‚   â”‚   post_detail.html<br/>â”‚   â”‚<br/>â”‚   â””â”€â”€â”€partials<br/>â”‚       â”‚   likes_area.html</span></pre><p id="2664" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mo mp mq mg b">post_detail.html</code>æ–‡ä»¶çš„å†…å®¹</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="5c79" class="lh li in mg b gy mk ml l mm mn">&lt;html&gt;<br/>    &lt;head&gt;<br/>        &lt;link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;<br/>        &lt;h1&gt;Post detail page&lt;/h1&gt;<br/>        &lt;br&gt;<br/>        &lt;p&gt;{{post.post_author}}&lt;/p&gt;<br/>        <br/>        &lt;p&gt;{{post.post_content}}&lt;/p&gt;<br/>        &lt;div&gt;<br/>            {% include "posts/partials/likes_area.html" %}<br/>        &lt;/div&gt;<br/>    &lt;/body&gt;<br/>    &lt;script src="https://unpkg.com/htmx.org@1.6.0"&gt;&lt;/script&gt;<br/>    &lt;script&gt;<br/>        document.body.addEventListener('htmx:configRequest', (e) =&gt; {<br/>          e.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';<br/>          })<br/>      &lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="8155" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ­£å¦‚æ‚¨åœ¨ä¸Šé¢çœ‹åˆ°çš„ï¼Œæœ‰ä¸€ä¸ªå¸¦æœ‰Djangoæ ‡ç­¾<code class="fe mo mp mq mg b">{% include â€œposts/partials/likes_area.htmlâ€ %}</code>çš„divã€‚è¿™å°†åŠ è½½é¡µé¢çš„éƒ¨åˆ†åŒºåŸŸï¼Œå…è®¸æˆ‘ä»¬å‘é¡µé¢æ·»åŠ ä¸€ä¸ªæŒ‰é’®å’Œç±»ä¼¼çš„è®¡æ•°å™¨ã€‚éƒ¨åˆ†ç« èŠ‚å¦‚ä¸‹ã€‚</p><p id="8136" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mo mp mq mg b">likes_area.html</code>æ–‡ä»¶çš„å†…å®¹</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="07db" class="lh li in mg b gy mk ml l mm mn">&lt;div class="list-group list-group-horizontal btn-group" id="likesarea" role="group"&gt;<br/>    &lt;p&gt;{{ post.likes.count }} likes<br/>    <br/>        &lt;button hx-post="{% url 'posts:like_post' post.id %}" id="like-button" <br/>          hx-target="#likesarea" hx-swap="outerHTML"&gt;<br/>          {% if request.user in post.likes.all %}<br/>            &lt;i class="material-icons" style="font-size:16px;color:green;"&gt;check_box&lt;/i&gt;<br/>          {% else %}<br/>          &lt;i class="material-icons" style="font-size:16px;color:yellowgreen;"&gt;check_box_outline_blank&lt;/i&gt;<br/>          {% endif %}<br/>        &lt;/button&gt;<br/><br/>    &lt;/p&gt; <br/>    <br/>&lt;/div&gt;</span></pre><p id="b03c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸Šé¢ä½ å¯ä»¥çœ‹åˆ°æ²¡æœ‰ä¸€ä¸ªå®Œæ•´çš„HTMLæ–‡ä»¶ï¼Œåªæœ‰ä¸€ä¸ª<code class="fe mo mp mq mg b">div</code>å°†è¢«åŠ è½½åˆ°ä¸»é¡µé¢ã€‚è¿™å°±æ˜¯å¥‡è¿¹å‘ç”Ÿçš„åœ°æ–¹ã€‚divæœ‰ä¸€ä¸ªè®¾ç½®ä¸º<code class="fe mo mp mq mg b">â€œlikesareaâ€</code>çš„idï¼Œè¿™æ˜¯æ¯æ¬¡æŒ‰ä¸‹likeæŒ‰é’®æ—¶å°†åŠ è½½çš„å†…å®¹ã€‚</p><p id="4cef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨likeæŒ‰é’®æœ¬èº«æœ‰äº†ç®€å•çš„HTMXæ ‡ç­¾<code class="fe mo mp mq mg b"><strong class="jm io"><em class="ki">hx-post</em></strong></code>ï¼Œå®ƒå°†è°ƒç”¨HTMXåº“æ¥è°ƒç”¨<em class="ki">è§†å›¾å‡½æ•°</em>ã€<code class="fe mo mp mq mg b">like_post</code>ã€‚å½“æˆ‘ä»¬æ·»åŠ è§†å›¾æ—¶ï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼Œå®ƒä¼šæ ¹æ®ç”¨æˆ·æ˜¯å¦å·²ç»å–œæ¬¢å®ƒæ¥æ·»åŠ æˆ–åˆ é™¤å¯¹è¯¥å¸–å­çš„å–œæ¬¢ã€‚</p><p id="d99d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨åŒä¸€ä¸ªbuttonæ ‡è®°ä¸­ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªHTMXæ ‡è®°ï¼Œå®ƒæŒ‡å®šé¡µé¢ä¸Šå“ªä¸ªdivéœ€è¦åˆ·æ–°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæŒ‡çš„æ˜¯ç±»ä¼¼äºçš„<em class="ki">åŒºåŸŸã€‚</em></p><p id="c4fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è®©æˆ‘ä»¬é€šè¿‡åœ¨posts appç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code class="fe mo mp mq mg b">urls.py</code>æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹è¡Œæ¥æ·»åŠ æˆ‘ä»¬å°†éœ€è¦çš„è·¯å¾„:</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="1c51" class="lh li in mg b gy mk ml l mm mn">from django.urls import path<br/>from .import views <br/><br/>app_name = 'posts'<br/><br/>urlpatterns = [<br/>    path('post/&lt;int:id&gt;', views.view_post, name='view_post'),<br/>    path('like/&lt;int:id&gt;', views.like_post, name='like_post'),<br/>]</span></pre><p id="5f17" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æœ€åï¼Œæˆ‘ä»¬åªå‰©ä¸‹æœ€åä¸€ä¸ªæ–‡ä»¶äº†ã€‚æˆ‘ä»¬éœ€è¦å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°å¸–å­åº”ç”¨ç¨‹åºçš„<code class="fe mo mp mq mg b">views.py</code>æ–‡ä»¶ä¸­ã€‚</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="2b73" class="lh li in mg b gy mk ml l mm mn">from django.contrib.auth.decorators import login_required<br/>from django.contrib.auth.models import User<br/>from django.shortcuts import render<br/><br/>from .models import Post<br/><br/>def view_post(request, id):<br/>    post = Post.objects.get(id=id)<br/>    <br/>    context = {'post':post}<br/>    return render(request, 'posts/post_detail.html', context)<br/><br/><br/>def like_post(request, id):<br/>    if request.method == "POST":<br/>        instance = Post.objects.get(id=id)<br/>        if not instance.likes.filter(id=request.user.id).exists():<br/>            instance.likes.add(request.user)<br/>            instance.save() <br/>            return render( request, 'posts/partials/likes_area.html', context={'post':instance})<br/>        else:<br/>            instance.likes.remove(request.user)<br/>            instance.save() <br/>            return render( request, 'posts/partials/likes_area.html', context={'post':instance})</span></pre><p id="c237" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¶…çº§ç”¨æˆ·ï¼Œç„¶åè¿ç§»æˆ‘ä»¬çš„æ•°æ®åº“æ›´æ”¹ã€‚</p><p id="8486" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹é”®å…¥ä»¥ä¸‹å†…å®¹</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="450c" class="lh li in mg b gy mk ml l mm mn">&gt; python manage.py makemigrations<br/>&gt; python manage.py migrate<br/>&gt; python manage.py createsuperuser</span></pre><p id="52f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸€æ—¦ä½ åˆ›å»ºäº†ä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·ï¼Œè¿è¡ŒæœåŠ¡å™¨è®©ç½‘ç«™è¿è¡Œèµ·æ¥ã€‚</p><pre class="kl km kn ko gt mf mg mh mi aw mj bi"><span id="68a8" class="lh li in mg b gy mk ml l mm mn">python manage.py runserver</span></pre><p id="d2c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨è¿™ä¸ªä¾‹å­ä¸­æ²¡æœ‰ä¸»é¡µï¼Œæ‰€ä»¥ç›´æ¥è¿›å…¥<code class="fe mo mp mq mg b"><a class="ae kj" href="http://127.0.0.1:8000/admin" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8000/admin</a></code>çš„ç®¡ç†é¡µé¢å¹¶ç™»å½•ã€‚ç°åœ¨åˆ›å»ºä¸€ä¸ªå¾ˆæ£’çš„å¸–å­ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi ms"><img src="../Images/d47f11ad668faff68c3aadd2e1bc5be7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kO5dJ98Yj6l9oY-9yuwEvw.png"/></div></div></figure><p id="ec7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨ï¼Œå‡è®¾ä½ åˆ›å»ºçš„æ–‡ç« æ˜¯1å·æ–‡ç« ï¼Œå»<code class="fe mo mp mq mg b"><a class="ae kj" href="http://127.0.0.1:8000/post/1" rel="noopener ugc nofollow" target="_blank">127.0.0.1:8000/post/1</a></code></p><p id="e7fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é¡µé¢åº”è¯¥æ˜¯è¿™æ ·çš„ã€‚</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/b1b52268ab02d74052132f08c2f8ae58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*4rPgGLK4fH6LPS-Z8XPnig.png"/></div></figure><p id="89a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å•å‡»è¯¥æŒ‰é’®æ—¶ï¼Œå®ƒåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/f63e74230c0ec380779567c51f854846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*lDLvoLmhDjMc8BqEjoxWEg.png"/></div></figure><p id="39f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ²¡æœ‰é¡µé¢é‡æ–°åŠ è½½â€¦éº¦å…‹é£ä¸‹é™ï¼ğŸ¤</p></div></div>    
</body>
</html>