<html>
<head>
<title>How to disable events in Angular — Fran Prieto</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何禁用 Angular 中的事件—弗兰·彼尔托</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-disable-events-in-angular-fran-prieto-46ba8a86b89d?source=collection_archive---------9-----------------------#2022-05-23">https://blog.devgenius.io/how-to-disable-events-in-angular-fran-prieto-46ba8a86b89d?source=collection_archive---------9-----------------------#2022-05-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/309d93572294ded8d6b6616b5f67f3be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*VN2-cDCx3Ol84eIZXHQxqg.jpeg"/></div></figure><p id="de84" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">有时我们有一个事件绑定到一个元素，出于某种原因，我们必须避免这个事件被触发，所以我们必须禁用那个事件。为了完成这样的任务，在普通的 Javascript 中我们有一个类似于<code class="fe kp kq kr ks b">preventDefault()</code>的方法。我们将看到如何在 Angular 中禁用事件。</p><p id="1510" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您可以在此找到更多信息:</p><p id="cee6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">【https://www.w3schools.com/jsref/event_preventdefault.asp T4】</p><p id="1507" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">用 Angular 实现这一点的方法非常相似，我们可以通过<code class="fe kp kq kr ks b">$event</code>对象来实现。这个对象包含关于一个事件的信息，它有类似<code class="fe kp kq kr ks b">$event.target</code>的属性来引用触发事件的元素。你可以在 angular <a class="ae kt" href="https://angular.io/guide/event-binding-concepts" rel="noopener ugc nofollow" target="_blank">这里</a>找到更多关于事件绑定的信息</p><p id="2694" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">将事件作为参数传递给方法的方式如下:</p><pre class="ku kv kw kx gt ky ks kz la aw lb bi"><span id="c896" class="lc ld in ks b gy le lf l lg lh">&lt;button (click)="showModal($event)"&gt;Push button&lt;/button&gt;</span></pre><p id="2768" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">因此，如果我们想要防止这个点击事件没有被触发，我们所要做的就是使用<code class="fe kp kq kr ks b">preventDefault()</code>方法，这样:</p><pre class="ku kv kw kx gt ky ks kz la aw lb bi"><span id="9393" class="lc ld in ks b gy le lf l lg lh">&lt;button (click)="showModal( $event.preventDefault() )"&gt;Push button&lt;/button&gt;</span></pre><h2 id="d823" class="lc ld in bd li lj lk dn ll lm ln dp lo kc lp lq lr kg ls lt lu kk lv lw lx ly bi translated">应用我们所学的例子</h2><p id="bbd3" class="pw-post-body-paragraph jr js in jt b ju lz jw jx jy ma ka kb kc mb ke kf kg mc ki kj kk md km kn ko ig bi translated">通过这个例子我们会看得更清楚。</p><p id="527a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">假设我们有一个搜索栏。当我们点击这个条，我们将显示该用户的搜索历史。这个列表中的每个元素都会添加一些样式，告诉用户他们可以单击这个元素来使用这个文本执行新的搜索。大概是这样的:</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi me"><img src="../Images/32cb8a3a57dd1d0d74147eeef6211907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Tf_z8nA6Slidhd3BleykRg.gif"/></div></div></figure><p id="ea82" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">但是，如果搜索是空的呢？我们将显示一个文本，邀请用户输入有效的搜索。我们将使用相同的 HTML 元素来显示搜索历史，但当然，这一次，该元素不应该是可点击的，因为它不是我们搜索历史的一部分。大概是这样的:</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi me"><img src="../Images/15979b8d87220d4979dc78f44c59f3e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*98KUkEkVLu4zfWbEjWmOyQ.gif"/></div></div></figure><p id="77c8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">正如我们所看到的，“请输入有效的搜索”有不同的风格，我们已经防止点击事件被触发。如果用户点击它，什么也不会发生。</p><p id="a52d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们是如何用 Angular 做到的？这段代码是:</p><pre class="ku kv kw kx gt ky ks kz la aw lb bi"><span id="42b6" class="lc ld in ks b gy le lf l lg lh">&lt;ul class=”d-flex flex-fill navbar-nav mb-lg-0"&gt;</span><span id="e357" class="lc ld in ks b gy mj lf l lg lh">    &lt;li class=”w-100"&gt;</span><span id="4994" class="lc ld in ks b gy mj lf l lg lh">        &lt;input class=”form-control me-2" type=”search”  placeholder=”Search Gifs…” aria-label=”Search” (keyup.enter)=”search($event)” (click)=”displaySearchHistory()” #searchInputElement&gt;</span><span id="9b34" class="lc ld in ks b gy mj lf l lg lh">        &lt;ul id=”search-history” [@openClose]=”isOpen ? ‘history-open’ : ‘history-closed’” &gt;</span><span id="28c7" class="lc ld in ks b gy mj lf l lg lh">            &lt;span *ngIf=”isClickable;else enterValidSearch”&gt;</span><span id="38d7" class="lc ld in ks b gy mj lf l lg lh">                &lt;li class=”clickable-list” *ngFor=”let item of this._gifsService.historicObserv$ | async” (click)=”search($event)”&gt;</span><span id="8440" class="lc ld in ks b gy mj lf l lg lh">                    {{item}}</span><span id="26ca" class="lc ld in ks b gy mj lf l lg lh">                &lt;/li&gt;</span><span id="de17" class="lc ld in ks b gy mj lf l lg lh">            &lt;/span&gt;</span><span id="090a" class="lc ld in ks b gy mj lf l lg lh">            &lt;ng-template #enterValidSearch&gt;</span><span id="70ec" class="lc ld in ks b gy mj lf l lg lh">                &lt;li (click)=”$event.preventDefault()”&gt;Please enter valid search&lt;/li&gt;</span><span id="5598" class="lc ld in ks b gy mj lf l lg lh">            &lt;/ng-template&gt;</span><span id="9943" class="lc ld in ks b gy mj lf l lg lh">        &lt;/ul&gt;</span><span id="d2a6" class="lc ld in ks b gy mj lf l lg lh">    &lt;/li&gt;</span><span id="ee5c" class="lc ld in ks b gy mj lf l lg lh">&lt;/ul&gt;</span></pre><p id="c6b5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="mk">注意:</em> </strong> <em class="mk">有些代码超出了本文的范围，并且与如何在 angular 中禁用事件无关，因为我使用了类似 Angular 动画的东西来在显示列表时应用更平滑的过渡。如果你想详细了解棱角分明的动画，请查看官方示例</em> <a class="ae kt" href="https://angular.io/guide/animations" rel="noopener ugc nofollow" target="_blank"> <em class="mk">这里有</em> </a> <em class="mk">。您还可以看到，我们使用了 Observables 和异步管道来显示数据。我推荐你去看</em> <a class="ae kt" href="https://medium.com/@franprietodeveloper/angular-and-observables-how-to-avoid-the-subscription-with-the-help-of-async-pipe-95d5d4221998" rel="noopener"> <em class="mk">这篇文章</em> </a> <em class="mk">来了解更多一点。</em></p><p id="7ae9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="mk">同样，我们在</em> <code class="fe kp kq kr ks b">displaySearchHistory()</code> <em class="mk">和</em> <code class="fe kp kq kr ks b">search()</code>方法上使用的代码，或者验证一个搜索是否为空的代码，在此不再详述。很多时候<a class="ae kt" href="https://angular.io/guide/forms-overview" rel="noopener ugc nofollow" target="_blank">角形</a>被用来做<em class="mk">这些类型的验证，但是我使用普通的 Javascript。这个</em> <code class="fe kp kq kr ks b">trim()</code>方法对完成它非常有用🙂</p><p id="6ff7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这里我们必须关注的重要事情是<code class="fe kp kq kr ks b">(click)</code>事件和<code class="fe kp kq kr ks b">$event</code>物体。</p><p id="d5ac" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们在这里所做的是验证一个名为<code class="fe kp kq kr ks b">isClickable</code>的布尔属性是否允许点击事件被触发。</p><p id="dcef" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在<code class="fe kp kq kr ks b">isClickable</code>为真的情况下，将显示带有搜索历史的<code class="fe kp kq kr ks b">&lt;li&gt;</code> HTMLelement。注意，我们将应用一个名为<code class="fe kp kq kr ks b">"clickable-list"</code>的类，当我们将鼠标悬停在结果上时显示一些样式。以防你好奇，我的 css 规则是:</p><pre class="ku kv kw kx gt ky ks kz la aw lb bi"><span id="2888" class="lc ld in ks b gy le lf l lg lh">.clickable-list{</span><span id="3f44" class="lc ld in ks b gy mj lf l lg lh">    /*</span><span id="775c" class="lc ld in ks b gy mj lf l lg lh">        to make each LI element fill all the width of the UL element. As we can see on browser´s console it has a padding-left of 2rem, we adjust the margin left as the same negative value.</span><span id="d3a7" class="lc ld in ks b gy mj lf l lg lh">        The padding left here is to move the text a bit</span><span id="f157" class="lc ld in ks b gy mj lf l lg lh">    */</span><span id="0811" class="lc ld in ks b gy mj lf l lg lh">    margin-left: -2rem;</span><span id="f9c3" class="lc ld in ks b gy mj lf l lg lh">    padding-left: 2rem;</span><span id="7f01" class="lc ld in ks b gy mj lf l lg lh">}</span><span id="280a" class="lc ld in ks b gy mj lf l lg lh">.clickable-list:hover{</span><span id="d047" class="lc ld in ks b gy mj lf l lg lh">    background-color:#FFC107;</span><span id="e3db" class="lc ld in ks b gy mj lf l lg lh">    color: white;</span><span id="7521" class="lc ld in ks b gy mj lf l lg lh">}</span></pre><p id="c33f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">正如我们之前所说的，我们将能够控制我们的<code class="fe kp kq kr ks b">(click)</code>事件，并将它传递给带有对象作为参数的<code class="fe kp kq kr ks b">search()</code>方法。这就是为什么我们写了<code class="fe kp kq kr ks b">(click)="search($event)"</code></p><p id="8d55" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">有了这个对象，我们将能够对我们的代码执行一些我们需要的操作。</p><p id="cdc2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">但是在<code class="fe kp kq kr ks b">isClickable</code>属性为假的情况下，我们将显示一个不同的<code class="fe kp kq kr ks b">&lt;li&gt;</code>元素。这一次，正如我们所说的，当用户单击这个元素时，不会触发任何操作。防止这种情况的方法是使用<a class="ae kt" href="https://angular.io/api/core/ng-template" rel="noopener ugc nofollow" target="_blank">角度 ng 模板</a>元素。通过一个名为<code class="fe kp kq kr ks b">enterValidSearch</code>的<a class="ae kt" href="https://angular.io/guide/template-reference-variables" rel="noopener ugc nofollow" target="_blank">模板变量</a>，我们将在<code class="fe kp kq kr ks b">*ngIf</code>语句中引用这个模板，并在<code class="fe kp kq kr ks b">isClickable</code>为假的情况下显示它(这将在我们的。ts 代码，如前所述，这超出了本文的范围)。</p><pre class="ku kv kw kx gt ky ks kz la aw lb bi"><span id="e6f7" class="lc ld in ks b gy le lf l lg lh">&lt;ng-template #enterValidSearch&gt;<br/> <br/>    &lt;li (click)="$event.preventDefault()"&gt;Please enter valid search&lt;/li&gt; </span><span id="6439" class="lc ld in ks b gy mj lf l lg lh">&lt;/ng-template&gt;</span></pre><p id="aa8f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们还可以看到，我们可以用<code class="fe kp kq kr ks b">$event.preventDefault()</code>来防止<code class="fe kp kq kr ks b">(click)</code>事件触发</p><p id="e651" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">就是这样！希望这篇文章对学习如何在 Angular 中禁用事件有所帮助。如果您看到任何错误或我可以改进的地方，请联系我。</p><p id="8e8d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="mk">*精选图片由</em> <a class="ae kt" href="https://pixabay.com/es/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1607196" rel="noopener ugc nofollow" target="_blank"> <em class="mk"> Gerd 奥特曼</em> </a> <em class="mk">在</em> <a class="ae kt" href="https://pixabay.com/es/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1607196" rel="noopener ugc nofollow" target="_blank"> <em class="mk"> Pixabay </em> </a>中找到</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><p id="216a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="mk">原载于 2022 年 5 月 23 日 https://portfolio.avanzartewebs.com</em><a class="ae kt" href="https://portfolio.avanzartewebs.com/javascript/angular/2022/05/23/how-to-disable-events-in-angular/" rel="noopener ugc nofollow" target="_blank"><em class="mk"/></a><em class="mk">。</em></p></div></div>    
</body>
</html>