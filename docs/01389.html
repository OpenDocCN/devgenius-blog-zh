<html>
<head>
<title>Build and Publish a Flutter Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建并发布一个Flutter包</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/building-and-publishing-a-flutter-package-9787f36d0f7c?source=collection_archive---------8-----------------------#2020-07-02">https://blog.devgenius.io/building-and-publishing-a-flutter-package-9787f36d0f7c?source=collection_archive---------8-----------------------#2020-07-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="76ce" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">把它包起来</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c9aa8a1241613fc5f59dfd09c69c500b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1uF8pH1ewesEvfEOuX0RQ.jpeg"/></div></div></figure><p id="5d7e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">大多数应用程序都需要一个文本字段。我倾向于重用我在多个地方构建的文本字段设计。每当我开始一个新项目时，制作一个单独的文本域小部件文件开始感觉非常重复。当事情开始变得重复时，我们就做点什么。😆</p><p id="28a2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这让我将我的<code class="fe lk ll lm ln b">textformfields</code>封装到一个<code class="fe lk ll lm ln b">flutter package</code>中，这样我就可以在需要的时候重用它，同时也让其他人可以使用它。你可以在这里查看<a class="ae lo" href="https://pub.dev/packages/animated_textformfields" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/91e75199581eb19a222b6cb187f55fd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*D2Lvo2WgvWa1e-ZC2oXkgQ.jpeg"/></div></figure></div><div class="ab cl lq lr hr ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ig ih ii ij ik"><h1 id="23da" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">第0步:一些知识</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/4857f73f4c7634b6042962b478670246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*d_lX-4aLiIMfSWAtVfPjOQ.jpeg"/></div></figure><p id="27c5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在开始之前，我希望你对什么是flutter以及如何编写一些代码有所了解。想入门的可以查看<a class="ae lo" href="https://medium.com/flutter-community/flutter-getting-started-f07df7d4cce2" rel="noopener">这篇文章</a>，想了解更多关于flutter的资源可以查看<a class="ae lo" href="https://medium.com/podiihq/how-to-get-started-on-fun-flutter-699c81c89a8f" rel="noopener">这篇文章</a>。</p><p id="a697" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">太好了！现在，让我告诉你有两种类型的包:</p><ol class=""><li id="0d44" class="mq mr in kq b kr ks ku kv kx ms lb mt lf mu lj mv mw mx my bi translated">Dart包:使用dart语言和Flutter SDK编写的独立于平台的包(例如，Android、iOS、Web、Flutter支持的任何东西)。<a class="ae lo" href="https://pub.dev/packages/animated_textformfields" rel="noopener ugc nofollow" target="_blank">animated _ textformfields</a>包是一个Dart(或Flutter)包。</li><li id="c888" class="mq mr in kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated">插件包:使用特定于平台的代码编写的包，即使用Java或Kotlin和/或使用Objective-C或Swift以及用Dart代码编写的API。<a class="ae lo" href="https://pub.dev/packages/image_picker" rel="noopener ugc nofollow" target="_blank"> image_picker </a>是一个插件包的例子。</li></ol></div><div class="ab cl lq lr hr ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ig ih ii ij ik"><h1 id="617f" class="lx ly in bd lz ma mb mc md me mf mg mh jt mi ju mj jw mk jx ml jz mm ka mn mo bi translated">第一步:开始</h1><p id="6f6f" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">首先，我们将开始创建一个新的flutter项目，但与普通项目不同，我们将从包模板开始，这样flutter将为我们提供在<a class="ae lo" href="https://pub.dev/" rel="noopener ugc nofollow" target="_blank"> pub dev </a>上发布包所需的一切。</p><p id="f4cc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">打开你的命令行，输入命令<code class="fe lk ll lm ln b">flutter create --template=package your_package_name</code>，其中你的包名是你想给你的包起的名字。这可能是最难的部分。😆</p><p id="cff2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们已经准备好了一切，是时候编码了！👊</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h1 id="58ce" class="lx ly in bd lz ma nl mc md me nm mg mh jt nn ju mj jw no jx ml jz np ka mn mo bi translated">步骤2:编写代码</h1><p id="8410" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">就像普通的包一样，我们所有的代码都放在lib目录中。或文件夹。随便啦。番茄——番茄。</p><p id="2fb8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，我们在这里试图构建的是一个具有某种动画或设计的<code class="fe lk ll lm ln b">TextFormField</code>。</p><p id="cede" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们要做的第一件事是将这个文件声明为一个库。</p><pre class="kd ke kf kg gt nq ln nr ns aw nt bi"><span id="58a8" class="nu ly in ln b gy nv nw l nx ny">library animated_textformfields;</span></pre><p id="023d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们还想至少保留所有的TextFormField的功能，如果不是增加它。因此，我们将查看<code class="fe lk ll lm ln b">TextFormField</code>类并获取它们的变量。我们还会添加一些我们自己需要的东西。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="472e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是我们工作的一部分，现在让我们开始建造它。</p><p id="f968" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">当textformfield获得焦点时，我们希望对其进行一些更改。现在，当<code class="fe lk ll lm ln b">TextFormField</code>获得焦点时，我们将改变<code class="fe lk ll lm ln b">backkgroundColor</code>和<code class="fe lk ll lm ln b">cornerRadius</code>。我们将使用<code class="fe lk ll lm ln b">AnimatedContainer</code>小部件来完成这个任务。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h1 id="4e20" class="lx ly in bd lz ma nl mc md me nm mg mh jt nn ju mj jw no jx ml jz np ka mn mo bi translated">步骤3:准备包</h1><h2 id="6c63" class="nu ly in bd lz nz oa dn md ob oc dp mh kx od oe mj lb of og ml lf oh oi mn oj bi translated">步骤3.1:创建Github存储库</h2><p id="b684" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">首先，让我们将我们的库添加到GitHub repo中。</p><pre class="kd ke kf kg gt nq ln nr ns aw nt bi"><span id="c400" class="nu ly in ln b gy nv nw l nx ny">git init<br/>git add — all<br/>git commit -m “initial commit”<br/>git remote add origin <em class="ok">your_remote_repo</em><br/>git push -u origin master</span></pre><h2 id="4fa0" class="nu ly in bd lz nz oa dn md ob oc dp mh kx od oe mj lb of og ml lf oh oi mn oj bi translated">步骤3.2:准备pubspec.yaml</h2><p id="47e0" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">完成后，转到<code class="fe lk ll lm ln b">pubspec.yaml</code>文件并开始编辑。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ol"><img src="../Images/02aac8fa6db56872afeec4456dbde69d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ReeH5LSPWxaZyWBYUJPdRg.png"/></div></div></figure><p id="f126" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe lk ll lm ln b">name</code>是您的包的名称。<code class="fe lk ll lm ln b">description</code>是对您的软件包及其功能的简要描述。<code class="fe lk ll lm ln b">version</code>是当前的包版本。在这里阅读语义版本<a class="ae lo" href="https://www.geeksforgeeks.org/introduction-semantic-versioning/" rel="noopener ugc nofollow" target="_blank"/>。<code class="fe lk ll lm ln b">author</code>曾被用来标识软件包的作者，但现在已经不再使用了。相反，您注册时使用的电子邮件id将代替作者，除非您是经过验证的出版商的成员，在这种情况下，将使用出版商的名称。<code class="fe lk ll lm ln b">homepage</code>是指向您的包的Github库的链接。</p><h2 id="24f1" class="nu ly in bd lz nz oa dn md ob oc dp mh kx od oe mj lb of og ml lf oh oi mn oj bi translated">步骤3.3:准备CHANGELOG.md</h2><p id="3b8a" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">在这个文件中，您应该列出您对软件包的每个版本所做的更改。</p><pre class="kd ke kf kg gt nq ln nr ns aw nt bi"><span id="d73e" class="nu ly in ln b gy nv nw l nx ny">## [version] - Date<br/><em class="ok">* </em>explanations about changes.</span></pre><h2 id="52ec" class="nu ly in bd lz nz oa dn md ob oc dp mh kx od oe mj lb of og ml lf oh oi mn oj bi translated">步骤3.4:准备许可证. md</h2><p id="1a20" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">为您的包选择一个许可证。我的软件包使用了麻省理工学院的许可证。如果你想继续的话，在这里获得麻省理工学院的执照。或者你可以选择你自己的执照。你在choosealicense.com找到合适的东西。</p><h2 id="975c" class="nu ly in bd lz nz oa dn md ob oc dp mh kx od oe mj lb of og ml lf oh oi mn oj bi translated">步骤3.5:准备README.md</h2><p id="f4d9" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">记录你的包裹。写下它的作用，如何使用它，如果可以的话，添加一个. gif或截图，总的来说，只是试图解释如何使用你的包和需要注意的事情，如果有的话。我为我的包写了一个非常基本的自述文件，并添加了一个. gif文件来演示它的功能。如果你需要任何灵感，请点击这里查看。</p><h1 id="25dd" class="lx ly in bd lz ma nl mc md me nm mg mh jt nn ju mj jw no jx ml jz np ka mn mo bi translated">步骤4:编写示例</h1><p id="47ad" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">现在我们的库已经准备好了，我们应该写一个例子来展示如何使用它，以及测试你的库，而不是说你以前没有测试过它。😛我也鼓励你为你的部件编写测试。</p><p id="e028" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">用<code class="fe lk ll lm ln b">flutter create example</code>创建一个新的颤振项目。完成后，您将拥有一个名为example的新文件夹/目录。用<code class="fe lk ll lm ln b">cd example</code>移动到那个目录。</p><p id="f001" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们将构建一个示例应用程序来演示您的包的工作方式。你只是想演示如何使用你的包，所以你不需要一个非常复杂的应用。这是我们例子的一个小例子(看我在那里做了什么😆).</p><p id="ed69" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">首先，我们需要依靠我们的图书馆。在示例项目的pubspec.yaml中，</p><pre class="kd ke kf kg gt nq ln nr ns aw nt bi"><span id="7549" class="nu ly in ln b gy nv nw l nx ny">dependencies:<br/>  flutter:<br/>    sdk: flutter<br/>  cupertino_icons: ^0.1.3<br/>  <strong class="ln io">animated_textformfields:<br/>    path: ../</strong></span></pre><p id="79fa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后我们需要导入我们的库。</p><pre class="kd ke kf kg gt nq ln nr ns aw nt bi"><span id="cf98" class="nu ly in ln b gy nv nw l nx ny">import 'package:animated_textformfields/animated_textformfields.dart';</span></pre><p id="e3b2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们可以写一些代码了。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><h1 id="2a11" class="lx ly in bd lz ma nl mc md me nm mg mh jt nn ju mj jw no jx ml jz np ka mn mo bi translated">步骤5:发布包</h1><h2 id="02f4" class="nu ly in bd lz nz oa dn md ob oc dp mh kx od oe mj lb of og ml lf oh oi mn oj bi translated">步骤5.1:将所有更改推送到Github</h2><p id="5b9f" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">回到你的包的根目录。然后将所有更改推送到Github存储库。</p><pre class="kd ke kf kg gt nq ln nr ns aw nt bi"><span id="fb09" class="nu ly in ln b gy nv nw l nx ny">git add .<br/>git commit -m “finished first version”<br/>git push origin master</span></pre><h2 id="b5ff" class="nu ly in bd lz nz oa dn md ob oc dp mh kx od oe mj lb of og ml lf oh oi mn oj bi translated">步骤5.2:最终发布</h2><p id="6e34" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">你现在可以用<code class="fe lk ll lm ln b">flutter packages pub publish</code>发布你的包了。</p><h1 id="11d7" class="lx ly in bd lz ma nl mc md me nm mg mh jt nn ju mj jw no jx ml jz np ka mn mo bi translated">步骤6:更新软件包</h1><p id="8582" class="pw-post-body-paragraph ko kp in kq b kr ne jo kt ku nf jr kw kx ng kz la lb nh ld le lf ni lh li lj ig bi translated">发布包后，您可能希望对包进行更新。为了做到这一点，</p><ol class=""><li id="47f7" class="mq mr in kq b kr ks ku kv kx ms lb mt lf mu lj mv mw mx my bi translated">对代码进行所有更新。如果你做了任何改变如何使用你的包的主要改变，改变例子。</li><li id="b171" class="mq mr in kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated">更新CHANGELOG.md和<code class="fe lk ll lm ln b">pubspec.yaml</code>版本。</li><li id="f36f" class="mq mr in kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated">将所有更改推送到Github。</li><li id="9eb5" class="mq mr in kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated">最后，用<code class="fe lk ll lm ln b">flutter packages pub publish</code>发布包的更新。</li></ol></div><div class="ab cl lq lr hr ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ig ih ii ij ik"><p id="5bb6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">唷，我们成功了！目前就这些。祝您构建自己的优秀软件包好运！</p><p id="d523" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">看看我的flutter包<a class="ae lo" href="https://pub.dev/packages/animated_textformfields" rel="noopener ugc nofollow" target="_blank"> animated_textformfields </a>。你可以在<a class="ae lo" href="https://github.com/thealphaversion/animated_textformfields" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到源代码。鼓励向它捐款。更多的包即将推出！</p><p id="0859" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">通过<a class="ae lo" href="https://www.linkedin.com/in/aditya-chakraborti/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>、<a class="ae lo" href="https://twitter.com/adityamsm8227" rel="noopener ugc nofollow" target="_blank"> Twitter </a>或<a class="ae lo" href="mailto:adityachakraborti14@gmail.com" rel="noopener ugc nofollow" target="_blank">电子邮件</a>联系我。</p></div></div>    
</body>
</html>