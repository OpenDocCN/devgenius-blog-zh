<html>
<head>
<title>Creating a component design system using React, TypeScript and Storybook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 React、TypeScript 和 Storybook 创建组件设计系统</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-a-component-design-system-using-react-typescript-and-storybook-34c72d30d4fa?source=collection_archive---------2-----------------------#2022-05-13">https://blog.devgenius.io/creating-a-component-design-system-using-react-typescript-and-storybook-34c72d30d4fa?source=collection_archive---------2-----------------------#2022-05-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/963dc0e17642a488dded9cfe0168760f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xYdVdLnZc8f9EU-1Ixh3BQ.png"/></div></div></figure><p id="23cc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在处理项目时，创建设计系统非常有用。如果你是一名设计师，那么你已经熟悉这个概念。有一个设计文件，有品牌的颜色，字体大小和内容格式等。在开发方面，同样适用，因为我们需要确保前端匹配设计文件。</p><p id="442e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于那些使用过像 Tailwindcss 或 Bootstrap 这样的 CSS 框架的人来说，使用设计系统的想法并不新鲜，因为这些框架遵循它们自己的设计系统。Storybook 本质上给了开发人员一种在前端创建自己的组件设计系统的方法。这很好，因为我们可以孤立地查看组件，这使我们能够为所有组件创建文档和测试。</p><p id="79db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如，你可以向客户展示故事书中的设计系统，他们可以看到所有组件的外观。甚至可以改变一些值，如背景颜色和字体大小，这样他们就可以看到不同的版本。在设计师的情况下，他们将能够看到他们的设计在代码中是什么样子，如果有任何动画，他们也可以看到。</p><h1 id="30bd" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">设置项目</h1><p id="5df8" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">让我们从用 Storybook 建立一个样板 React 项目开始。导航到一个目录并打开命令行工具。将下面的代码复制并粘贴到命令行中，以设置您的项目。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="4a00" class="mf ku in mb b gy mg mh l mi mj">npx create-react-app my-app --template typescript<br/>cd my-app<br/>npx sb init</span></pre><p id="21cc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您现在应该有两个运行脚本了。运行下面的两个脚本来启动服务器。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="4f35" class="mf ku in mb b gy mg mh l mi mj"># Starts the React Application<br/>npm run start</span><span id="d969" class="mf ku in mb b gy mk mh l mi mj"># Starts the Storybook component design system<br/>npm run storybook</span></pre><h1 id="666e" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">创建故事书组件</h1><p id="4d65" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">如果您进入在 web 浏览器中打开的 Storybook 开发页面，您应该会看到一些示例组件，这样您就可以了解它是如何工作的。现在让我们创建一个 UI 组件，这样您就可以看到使用 Storybook 创建组件是什么样子。</p><p id="2251" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先创建一个名为<strong class="jx io"> Hero </strong>的文件夹，并将它放在 src 中的 stories 文件夹中。现在创建 3 个文件，并将它们放在<strong class="jx io"> Hero </strong>文件夹中。创建文件<code class="fe ml mm mn mb b">Hero.css</code>、<code class="fe ml mm mn mb b">Hero.stories.tsx</code>和<code class="fe ml mm mn mb b">Hero.tsx</code>。</p><p id="e098" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将下面的代码复制并粘贴到相应的文件中。</p><p id="5f13" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ml mm mn mb b">src/stories/Hero/Hero.css</code></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="1344" class="mf ku in mb b gy mg mh l mi mj">@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&amp;display=swap');</span><span id="8e51" class="mf ku in mb b gy mk mh l mi mj">.hero {<br/>    background: rgb(236, 236, 236);</span><span id="942d" class="mf ku in mb b gy mk mh l mi mj">    border: 1rem solid rgb(220, 220, 220);</span><span id="6a78" class="mf ku in mb b gy mk mh l mi mj">    max-width: 50rem;</span><span id="257e" class="mf ku in mb b gy mk mh l mi mj">    width: 100%;</span><span id="87ff" class="mf ku in mb b gy mk mh l mi mj">    border-radius: 1rem;<br/>}</span><span id="b157" class="mf ku in mb b gy mk mh l mi mj">.hero-content {<br/>    width: 100%;</span><span id="95b7" class="mf ku in mb b gy mk mh l mi mj">    display: flex;</span><span id="54ea" class="mf ku in mb b gy mk mh l mi mj">    flex-flow: column nowrap;<br/>}</span><span id="c7a3" class="mf ku in mb b gy mk mh l mi mj">.hero-content h1 {<br/>    font-family: 'Quicksand', sans-serif;</span><span id="c16d" class="mf ku in mb b gy mk mh l mi mj">    color: #000000;</span><span id="fe97" class="mf ku in mb b gy mk mh l mi mj">    text-transform: uppercase;</span><span id="90ae" class="mf ku in mb b gy mk mh l mi mj">    text-align: center;<br/>}</span><span id="03dd" class="mf ku in mb b gy mk mh l mi mj">.hero-content img {<br/>    max-width: 50rem;</span><span id="a7a7" class="mf ku in mb b gy mk mh l mi mj">    width: 100%;<br/>}</span><span id="f9d8" class="mf ku in mb b gy mk mh l mi mj">.hero-content p {<br/>    font-family: 'Quicksand', sans-serif;</span><span id="71e6" class="mf ku in mb b gy mk mh l mi mj">    color: #000000;</span><span id="8b6f" class="mf ku in mb b gy mk mh l mi mj">    padding: 0.5rem;<br/>}</span><span id="cad3" class="mf ku in mb b gy mk mh l mi mj">#preloader {<br/>    width: 50rem;</span><span id="9618" class="mf ku in mb b gy mk mh l mi mj">    height: 50rem;<br/>}</span><span id="3238" class="mf ku in mb b gy mk mh l mi mj">#loader {<br/>    display: block;</span><span id="8e93" class="mf ku in mb b gy mk mh l mi mj">    position: relative;</span><span id="420f" class="mf ku in mb b gy mk mh l mi mj">    left: 50%;</span><span id="870b" class="mf ku in mb b gy mk mh l mi mj">    top: 50%;</span><span id="0239" class="mf ku in mb b gy mk mh l mi mj">    width: 150px;</span><span id="add2" class="mf ku in mb b gy mk mh l mi mj">    height: 150px;</span><span id="aea2" class="mf ku in mb b gy mk mh l mi mj">    margin: -75px 0 0 -75px;</span><span id="9091" class="mf ku in mb b gy mk mh l mi mj">    border-radius: 50%;</span><span id="87e1" class="mf ku in mb b gy mk mh l mi mj">    border: 3px solid transparent;</span><span id="b941" class="mf ku in mb b gy mk mh l mi mj">    border-top-color: #9370db;</span><span id="dd3d" class="mf ku in mb b gy mk mh l mi mj">    -webkit-animation: spin 2s linear infinite;</span><span id="b74a" class="mf ku in mb b gy mk mh l mi mj">    animation: spin 2s linear infinite;<br/>}</span><span id="17e5" class="mf ku in mb b gy mk mh l mi mj">#loader:before {<br/>    content: '';</span><span id="a0f3" class="mf ku in mb b gy mk mh l mi mj">    position: absolute;</span><span id="ffad" class="mf ku in mb b gy mk mh l mi mj">    top: 5px;</span><span id="40f7" class="mf ku in mb b gy mk mh l mi mj">    left: 5px;</span><span id="c0b8" class="mf ku in mb b gy mk mh l mi mj">    right: 5px;</span><span id="cf74" class="mf ku in mb b gy mk mh l mi mj">    bottom: 5px;</span><span id="26f8" class="mf ku in mb b gy mk mh l mi mj">    border-radius: 50%;</span><span id="0ccb" class="mf ku in mb b gy mk mh l mi mj">    border: 3px solid transparent;</span><span id="18af" class="mf ku in mb b gy mk mh l mi mj">    border-top-color: #ba55d3;</span><span id="1f98" class="mf ku in mb b gy mk mh l mi mj">    -webkit-animation: spin 3s linear infinite;</span><span id="13be" class="mf ku in mb b gy mk mh l mi mj">    animation: spin 3s linear infinite;<br/>}</span><span id="9a7e" class="mf ku in mb b gy mk mh l mi mj">#loader:after {<br/>    content: '';</span><span id="0d0f" class="mf ku in mb b gy mk mh l mi mj">    position: absolute;</span><span id="e446" class="mf ku in mb b gy mk mh l mi mj">    top: 15px;</span><span id="7b7d" class="mf ku in mb b gy mk mh l mi mj">    left: 15px;</span><span id="2c0a" class="mf ku in mb b gy mk mh l mi mj">    right: 15px;</span><span id="ab0c" class="mf ku in mb b gy mk mh l mi mj">    bottom: 15px;</span><span id="500a" class="mf ku in mb b gy mk mh l mi mj">    border-radius: 50%;</span><span id="c8fc" class="mf ku in mb b gy mk mh l mi mj">    border: 3px solid transparent;</span><span id="f516" class="mf ku in mb b gy mk mh l mi mj">    border-top-color: #ff00ff;</span><span id="dfaf" class="mf ku in mb b gy mk mh l mi mj">    -webkit-animation: spin 1.5s linear infinite;</span><span id="203f" class="mf ku in mb b gy mk mh l mi mj">    animation: spin 1.5s linear infinite;<br/>}</span><span id="86d8" class="mf ku in mb b gy mk mh l mi mj">@-webkit-keyframes spin {<br/>    0% {<br/>        -webkit-transform: rotate(0deg);</span><span id="0172" class="mf ku in mb b gy mk mh l mi mj">        -ms-transform: rotate(0deg);</span><span id="e66b" class="mf ku in mb b gy mk mh l mi mj">        transform: rotate(0deg);<br/>    }</span><span id="5689" class="mf ku in mb b gy mk mh l mi mj">    100% {<br/>        -webkit-transform: rotate(360deg);</span><span id="35ac" class="mf ku in mb b gy mk mh l mi mj">        -ms-transform: rotate(360deg);</span><span id="0333" class="mf ku in mb b gy mk mh l mi mj">        transform: rotate(360deg);<br/>    }<br/>}</span><span id="3e41" class="mf ku in mb b gy mk mh l mi mj">@keyframes spin {<br/>    0% {<br/>        -webkit-transform: rotate(0deg);</span><span id="65ff" class="mf ku in mb b gy mk mh l mi mj">        -ms-transform: rotate(0deg);</span><span id="3dfc" class="mf ku in mb b gy mk mh l mi mj">        transform: rotate(0deg);<br/>    }</span><span id="a443" class="mf ku in mb b gy mk mh l mi mj">    100% {<br/>        -webkit-transform: rotate(360deg);</span><span id="57fe" class="mf ku in mb b gy mk mh l mi mj">        -ms-transform: rotate(360deg);</span><span id="68df" class="mf ku in mb b gy mk mh l mi mj">        transform: rotate(360deg);<br/>    }<br/>}</span></pre><p id="84ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ml mm mn mb b">src/stories/Hero/Hero.stories.tsx</code></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="89a4" class="mf ku in mb b gy mg mh l mi mj">import { ComponentStory, ComponentMeta } from '@storybook/react';</span><span id="e5bb" class="mf ku in mb b gy mk mh l mi mj">import { Hero } from './Hero';</span><span id="ba2d" class="mf ku in mb b gy mk mh l mi mj">export default {<br/>    title: 'Hero/Hero',</span><span id="6995" class="mf ku in mb b gy mk mh l mi mj">    component: Hero,<br/>} as ComponentMeta&lt;typeof Hero&gt;;</span><span id="755c" class="mf ku in mb b gy mk mh l mi mj">const Template: ComponentStory&lt;typeof Hero&gt; = (args) =&gt; &lt;Hero {...args} /&gt;;</span><span id="e17c" class="mf ku in mb b gy mk mh l mi mj">export const Primary = Template.bind({});</span><span id="2e43" class="mf ku in mb b gy mk mh l mi mj">Primary.args = {<br/>    id: 1,</span><span id="710b" class="mf ku in mb b gy mk mh l mi mj">    title: 'Mountain',</span><span id="d6ed" class="mf ku in mb b gy mk mh l mi mj">    img: 'https://images.unsplash.com/photo-1464278533981-50106e6176b1?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=2274&amp;q=80',</span><span id="79f7" class="mf ku in mb b gy mk mh l mi mj">    content:<br/>        'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis mollis tellus et libero feugiat, vitae dignissim augue pulvinar.',<br/>};</span></pre><p id="162b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ml mm mn mb b">src/stories/Hero/Hero.tsx</code></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="9bc0" class="mf ku in mb b gy mg mh l mi mj">import './Hero.css';</span><span id="114e" class="mf ku in mb b gy mk mh l mi mj">interface Heroprops {<br/>    id: number;</span><span id="59e0" class="mf ku in mb b gy mk mh l mi mj">    title: string;</span><span id="720a" class="mf ku in mb b gy mk mh l mi mj">    img: string;</span><span id="113c" class="mf ku in mb b gy mk mh l mi mj">    content: string;</span><span id="cbce" class="mf ku in mb b gy mk mh l mi mj">    loading: boolean;<br/>}</span><span id="7276" class="mf ku in mb b gy mk mh l mi mj">export const Hero = ({ id, title, img, content, loading, ...props }: Heroprops) =&gt; {<br/>    return (<br/>        &lt;&gt;<br/>            &lt;div className="hero"&gt;<br/>                {loading ? (<br/>                    &lt;div id="preloader"&gt;<br/>                        &lt;div id="loader"&gt;&lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                ) : (<br/>                    &lt;div className="hero-content"&gt;<br/>                        &lt;h1&gt;{title}&lt;/h1&gt;</span><span id="6908" class="mf ku in mb b gy mk mh l mi mj">                        &lt;img src={img} alt={title} /&gt;</span><span id="f888" class="mf ku in mb b gy mk mh l mi mj">                        &lt;p&gt;{content}&lt;/p&gt;<br/>                    &lt;/div&gt;<br/>                )}<br/>            &lt;/div&gt;<br/>        &lt;/&gt;<br/>    );<br/>};</span><span id="2c2a" class="mf ku in mb b gy mk mh l mi mj">export default Hero;</span></pre><p id="2804" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ml mm mn mb b">App.css</code></p><p id="cdb0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用下面的代码替换文件中的所有代码。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="fbb8" class="mf ku in mb b gy mg mh l mi mj">*,<br/>*::before,<br/>*::after {<br/>    padding: 0;</span><span id="bc5d" class="mf ku in mb b gy mk mh l mi mj">    margin: 0;</span><span id="9625" class="mf ku in mb b gy mk mh l mi mj">    box-sizing: border-box;<br/>}</span><span id="43bc" class="mf ku in mb b gy mk mh l mi mj">html {<br/>    font-size: 16px;<br/>}</span><span id="fe3c" class="mf ku in mb b gy mk mh l mi mj">body {<br/>    font-size: 1rem;</span><span id="12f7" class="mf ku in mb b gy mk mh l mi mj">    font-family: 'Quicksand', sans-serif;</span><span id="2fd4" class="mf ku in mb b gy mk mh l mi mj">    color: #000000;</span><span id="6ffc" class="mf ku in mb b gy mk mh l mi mj">    background-color: #222;<br/>}</span><span id="ea7c" class="mf ku in mb b gy mk mh l mi mj">.container {<br/>    margin: 0 auto;</span><span id="df41" class="mf ku in mb b gy mk mh l mi mj">    width: 100%;</span><span id="81fc" class="mf ku in mb b gy mk mh l mi mj">    max-width: 50rem;<br/>}</span></pre><p id="5543" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ml mm mn mb b">App.tsx</code></p><p id="7991" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用下面的代码替换文件中的所有代码。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="2caa" class="mf ku in mb b gy mg mh l mi mj">import Hero from '../src/stories/Hero/Hero';</span><span id="e103" class="mf ku in mb b gy mk mh l mi mj">import './App.css';</span><span id="a826" class="mf ku in mb b gy mk mh l mi mj">const App = () =&gt; {<br/>    return (<br/>        &lt;&gt;<br/>            &lt;div className="container"&gt;<br/>                &lt;Hero<br/>                    id={1}<br/>                    title={'Mountain'}<br/>                    img={<br/>                        'https://images.unsplash.com/photo-1464278533981-50106e6176b1?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=2274&amp;q=80'<br/>                    }<br/>                    content={<br/>                        'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis mollis tellus et libero feugiat, vitae dignissim augue pulvinar.'<br/>                    }<br/>                    // Change this value to true to see the loading animation</span><span id="d6ad" class="mf ku in mb b gy mk mh l mi mj">                    loading={false}<br/>                /&gt;<br/>            &lt;/div&gt;<br/>        &lt;/&gt;<br/>    );<br/>};</span><span id="e0f1" class="mf ku in mb b gy mk mh l mi mj">export default App;</span></pre><p id="c19f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">重新加载 React 应用程序的服务器和 Storybook 服务器，现在您应该会看到一个带有图像的 Hero 组件。如果由于任何原因图像被破坏，你可以改变图像的网址。在<code class="fe ml mm mn mb b">App.tsx</code>和<code class="fe ml mm mn mb b">Hero.stories.tsx</code>文件中执行此操作。</p><p id="e878" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">英雄组件在故事书中有一些可定制的选项。你可以改变 id，标题，img，内容，甚至加载状态。</p><h1 id="1167" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">最后的想法</h1><p id="5054" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">这是使用故事书的简单介绍。要了解更多，请访问主要的<a class="ae mo" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank">故事书网站</a>。</p></div></div>    
</body>
</html>