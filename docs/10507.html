<html>
<head>
<title>HOW TO DEPLOY REACT &amp; GO PROJECT ON VPS USING NGINX</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨ NGINX åœ¨ VPS ä¸Šéƒ¨ç½² REACT &amp; GO é¡¹ç›®</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/how-to-deploy-react-go-project-on-vps-using-nginx-73df7930f85f?source=collection_archive---------1-----------------------#2022-11-07">https://blog.devgenius.io/how-to-deploy-react-go-project-on-vps-using-nginx-73df7930f85f?source=collection_archive---------1-----------------------#2022-11-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="252d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¤§å®¶å¥½ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è®¨è®ºå¦‚ä½•ä½¿ç”¨ç”¨ Go Gin æ¡†æ¶ç¼–å†™çš„åç«¯éƒ¨ç½²ä¸€ä¸ª react é¡¹ç›®ã€‚</p><p id="cfaa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">å…ˆå†³æ¡ä»¶</strong></p><p id="8dee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åº”è¯¥æœ‰åŸŸå’Œå­åŸŸã€‚æˆ‘å°†åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨ test.comï¼Œapi.test.comï¼Œadmin.test.comã€‚</p><p id="21b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åº”è¯¥å°†æ‚¨çš„åŸŸåç»‘å®šåˆ°æ‚¨çš„å…¬å…± IPã€‚æ‚¨å¯ä»¥æœç´¢å¦‚ä½•æ·»åŠ è®°å½•ã€‚</p><p id="891c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åº”è¯¥æœ‰ VPS(è£…æœ‰ Linux Ubuntu æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿä¸“ç”¨æœåŠ¡å™¨)</p><p id="1c54" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è®©æˆ‘ä»¬å…ˆçœ‹çœ‹åŸºæœ¬çš„æ¶æ„ã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/86ac108ccbe2b6b1c0aa8d8af638c9be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*Aw9uvoErIg5FGwYuFMpZrw.png"/></div></figure></div><div class="ab cl kq kr hr ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ig ih ii ij ik"><h1 id="0a18" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">æ­¥éª¤</strong></h1><p id="107e" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated"><strong class="jm io"> 1)é€šè¿‡ SSH è¿æ¥åˆ° VPS</strong></p><p id="5105" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¦é€šè¿‡ ssh è¿æ¥æ‚¨çš„ vpsï¼Œæ‚¨åº”è¯¥æ‰“å¼€ç«¯å£ 22ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒé€šå¸¸æ˜¯æ‰“å¼€çš„(å¦‚æœä¸æ˜¯ï¼Œè¯·è½¬åˆ°æ‚¨çš„æä¾›å•†å¤„ï¼Œä»é¢æ¿ä¸­æ‰“å¼€è¯¥ç«¯å£)ã€‚</p><p id="9c38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2)å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…</strong></p><p id="0dda" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å®‰è£… nginxï¼Œé˜²ç«å¢™ï¼Œgolangï¼Œnpm å’Œ gitã€‚</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="7e7c" class="mf ky in mb b gy mg mh l mi mj">apt install nginx</span><span id="e6fd" class="mf ky in mb b gy mk mh l mi mj">apt install ufw</span><span id="03d1" class="mf ky in mb b gy mk mh l mi mj">apt install golang-go</span><span id="f295" class="mf ky in mb b gy mk mh l mi mj">apt install nodejs  //(or apt install npm)</span><span id="8ad4" class="mf ky in mb b gy mk mh l mi mj">apt install git</span></pre><p id="29fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3)å¯ç”¨é˜²ç«å¢™</strong></p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="ef08" class="mf ky in mb b gy mg mh l mi mj">ufw enable</span><span id="b92c" class="mf ky in mb b gy mk mh l mi mj">ufw allow ssh //<em class="ml">(dont forget. If you forget, you may not connect again to your vps ğŸ˜Š)</em></span><span id="2e39" class="mf ky in mb b gy mk mh l mi mj">ufw allow â€œNginx Fullâ€</span><span id="b890" class="mf ky in mb b gy mk mh l mi mj">ufw status</span></pre><p id="bf69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä½¿ç”¨ git clone å°†ä½ çš„é¡¹ç›®å…‹éš†åˆ°æŸä¸ªåœ°æ–¹ã€‚(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒä»¬æ˜¯å®¢æˆ·ç«¯ã€ç®¡ç†é¢æ¿å’Œåç«¯)</p><p id="12e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 5)ç§»é™¤/var/www ä¸­çš„é™æ€ html æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºæ‚¨çš„æ–‡ä»¶å¤¹ã€‚</strong></p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="c983" class="mf ky in mb b gy mg mh l mi mj">rm -rf /var/www/html</span><span id="869a" class="mf ky in mb b gy mk mh l mi mj">mkdir /var/www/test/client //<em class="ml">(It â€˜ll keep the build files for react client)</em></span><span id="4416" class="mf ky in mb b gy mk mh l mi mj">mkdir /var/www/test/admin-panel //<em class="ml">(It â€˜ll keep the build files for react admin-panel)</em></span></pre><p id="9654" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ml">æ³¨æ„:æˆ‘ä»¬æ²¡æœ‰ä¸ºåç«¯åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ä¸ºå®ƒå‘å¸ƒä»»ä½•é™æ€æ–‡ä»¶ã€‚</em></p><p id="215a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 6)åˆ›å»ºæ„å»ºæ–‡ä»¶å¹¶å¤åˆ¶åˆ°/var/www </strong></p><p id="4cd8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è½¬åˆ°æ‚¨çš„é¡¹ç›®ç›®å½•å¹¶è¿è¡Œæ­¤å‘½ä»¤ã€‚æˆ‘å‡è®¾æ‚¨å·²ç»è¿è¡Œäº† npm install æ¥è·å–é¡¹ç›®çš„ä¾èµ–åŒ…ã€‚</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="da1a" class="mf ky in mb b gy mg mh l mi mj"><strong class="mb io">---For Client---</strong><br/>npm run build</span><span id="8031" class="mf ky in mb b gy mk mh l mi mj">cp -r build/* /var/www/test/client</span><span id="f69c" class="mf ky in mb b gy mk mh l mi mj"><strong class="mb io">--For Admin Panel---</strong><br/>npm run build</span><span id="172e" class="mf ky in mb b gy mk mh l mi mj">cp -r build/* /var/www/test/admin-panel</span></pre><p id="1d72" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 7)é…ç½® nginx </strong></p><p id="a6ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é¦–å…ˆåˆ é™¤é»˜è®¤çš„ nginx é…ç½®æ–‡ä»¶ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼›</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="1bbf" class="mf ky in mb b gy mg mh l mi mj">rm /etc/nginx/sites-available/default</span><span id="4d70" class="mf ky in mb b gy mk mh l mi mj">rm /etc/nginx/sites-enabled/default</span></pre><p id="0cd3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åˆ›å»ºæ‚¨è‡ªå·±çš„æ–‡ä»¶ï¼›</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="46ef" class="mf ky in mb b gy mg mh l mi mj">nano /etc/nginx/sites-available/test</span></pre><p id="cee6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é…ç½® nginx æ–‡ä»¶ï¼›</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="e537" class="mf ky in mb b gy mg mh l mi mj">server {</span><span id="d0ee" class="mf ky in mb b gy mk mh l mi mj">listen 80;</span><span id="a526" class="mf ky in mb b gy mk mh l mi mj">server_name test.com www.test.com</span><span id="2b4a" class="mf ky in mb b gy mk mh l mi mj">location / {</span><span id="2a6e" class="mf ky in mb b gy mk mh l mi mj">root /var/www/test/client;</span><span id="596e" class="mf ky in mb b gy mk mh l mi mj">index  index.html index.htm;</span><span id="07b7" class="mf ky in mb b gy mk mh l mi mj">proxy_http_version 1.1;</span><span id="459c" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Upgrade $http_upgrade;</span><span id="78ad" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Connection 'upgrade';</span><span id="4c3a" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Host $host;</span><span id="edba" class="mf ky in mb b gy mk mh l mi mj">proxy_cache_bypass $http_upgrade;</span><span id="e2d4" class="mf ky in mb b gy mk mh l mi mj">try_files $uri $uri/ /index.html;</span><span id="5b0b" class="mf ky in mb b gy mk mh l mi mj">}<br/>}</span><span id="44a6" class="mf ky in mb b gy mk mh l mi mj">server {</span><span id="62d9" class="mf ky in mb b gy mk mh l mi mj">listen 80;</span><span id="5a98" class="mf ky in mb b gy mk mh l mi mj">server_name admin.test.com</span><span id="3d95" class="mf ky in mb b gy mk mh l mi mj">location / {</span><span id="c5ef" class="mf ky in mb b gy mk mh l mi mj">root /var/www/test/admin-panel;</span><span id="532b" class="mf ky in mb b gy mk mh l mi mj">index  index.html index.htm;</span><span id="6d92" class="mf ky in mb b gy mk mh l mi mj">proxy_http_version 1.1;</span><span id="f536" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Upgrade $http_upgrade;</span><span id="21f6" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Connection 'upgrade';</span><span id="933f" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Host $host;</span><span id="344f" class="mf ky in mb b gy mk mh l mi mj">proxy_cache_bypass $http_upgrade;</span><span id="a5ac" class="mf ky in mb b gy mk mh l mi mj">try_files $uri $uri/ /index.html;</span><span id="185e" class="mf ky in mb b gy mk mh l mi mj">}<br/>}</span><span id="0e57" class="mf ky in mb b gy mk mh l mi mj">server {</span><span id="d785" class="mf ky in mb b gy mk mh l mi mj">listen 80;</span><span id="45e9" class="mf ky in mb b gy mk mh l mi mj">server_name api.test.com</span><span id="3c46" class="mf ky in mb b gy mk mh l mi mj">location / {</span><span id="447a" class="mf ky in mb b gy mk mh l mi mj">proxy_pass http://&lt;your-public-ip&gt;:&lt;backend-port&gt;;</span><span id="15a5" class="mf ky in mb b gy mk mh l mi mj">proxy_http_version 1.1;</span><span id="fe5e" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Upgrade $http_upgrade;</span><span id="c2e9" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Connection 'upgrade';</span><span id="b29c" class="mf ky in mb b gy mk mh l mi mj">proxy_set_header Host $host;</span><span id="d1c2" class="mf ky in mb b gy mk mh l mi mj">proxy_cache_bypass $http_upgrade;</span><span id="2fd3" class="mf ky in mb b gy mk mh l mi mj">}</span><span id="70bf" class="mf ky in mb b gy mk mh l mi mj">}</span></pre><p id="a814" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é“¾æ¥ç«™ç‚¹å¯ç”¨å’Œå¯ç”¨çš„æ–‡ä»¶ï¼›</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="bf60" class="mf ky in mb b gy mg mh l mi mj">ln -s /etc/nginx/sites-available/test /etc/nginx/sites-enabled/test</span></pre><p id="db47" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é‡å¯ nginx</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="eed0" class="mf ky in mb b gy mg mh l mi mj">sudo systemctl restart nginx</span></pre><p id="8482" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘ä»¬å·²ç»é…ç½®äº† nginxã€‚å®¢æˆ·ç«¯å’Œç®¡ç†é¢æ¿åº”è¯¥åœ¨æ­¤åˆ»å·¥ä½œã€‚ä½†æ˜¯æˆ‘ä»¬çš„åç«¯å‘¢ï¼Ÿæˆ‘ä»¬åº”è¯¥è®©å®ƒç»§ç»­è¿è¡Œã€‚å½“ç„¶ä½ å¯ä»¥é€šè¿‡è¿è¡Œ main.go æ‰‹åŠ¨å®Œæˆï¼Œä½†æ˜¯æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åœ¨æœºå™¨å¯åŠ¨æ—¶é»˜è®¤å®Œæˆã€‚</p><p id="8969" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘ä»¬å·²ç»ä¸ºæˆ‘ä»¬çš„åç«¯è®¾ç½®äº†ç«¯å£ 8080ã€‚å› æ­¤ä½ çš„åç«¯åº”è¯¥ç›‘å¬è¿™ä¸ªç«¯å£ï¼Œä½†æ˜¯ ofc ä½ å¯ä»¥éšæ„æ”¹å˜å®ƒã€‚</p><p id="9b26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¦è‡ªåŠ¨è¿è¡Œä½ çš„åç«¯ï¼Œ<strong class="jm io"> pm2 </strong>æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><p id="dcd9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ npm å…¨å±€å®‰è£… pm2 åŒ…<strong class="jm io"/>ã€‚</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="8ac3" class="mf ky in mb b gy mg mh l mi mj">npm install  -g pm2</span></pre><p id="d5ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨ï¼Œè½¬åˆ°æ‚¨çš„åç«¯é¡¹ç›®ç›®å½•å¹¶è¿è¡Œå®ƒï¼›</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="36f1" class="mf ky in mb b gy mg mh l mi mj">pm2 start --name api â€œgo run main.goâ€</span></pre><p id="f8e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è®¾ç½® pm2 å¯åŠ¨ï¼›</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="be4f" class="mf ky in mb b gy mg mh l mi mj">pm2 startup ubuntu</span></pre><p id="0216" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¦‚ä½ æ‰€çŸ¥ï¼Œæˆ‘ä»¬çš„åŸŸåæ²¡æœ‰ä½¿ç”¨ SSLã€‚å¦‚æœä½ æƒ³ä¸»åŠ¨ ssl è®¤è¯ï¼›<em class="ml">(ä¸è¦å¿˜è®°å°†æ¥è‡ªå®¢æˆ·ç«¯çš„åç«¯ URL æ›¿æ¢ä¸º https://) </em></p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="35fd" class="mf ky in mb b gy mg mh l mi mj">apt install certbot python3-certbot-nginx<br/>certbot --nginx -d test.com -d api.test.com -d admin.test.com</span></pre><p id="4e50" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¯ä¹¦çš„æœ‰æ•ˆæœŸåªæœ‰ 90 å¤©ã€‚å¦‚æœä½ æƒ³è‡ªåŠ¨åˆ·æ–°å®ƒä»¬ï¼Œè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼›</p><pre class="kj kk kl km gt ma mb mc md aw me bi"><span id="899b" class="mf ky in mb b gy mg mh l mi mj">systemctl status certbot.timer</span></pre><p id="c099" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å®‰å¦®ï¼Œå°±è¿™æ ·ï¼æˆ‘å¸Œæœ›å®ƒæœ‰ç”¨ã€‚è°¢è°¢ä½ çš„æ—¶é—´ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘:)ä¸‹ä¸€ç¯‡æ–‡ç« å†è§ã€‚</p></div></div>    
</body>
</html>