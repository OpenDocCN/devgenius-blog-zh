<html>
<head>
<title>Decoding Python’s if __name__ == ‘__main__’</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解码 Python 的 if _ _ name _ _ = = ' _ _ main _ _ '</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/decoding-pythons-if-name-main-8fc51e9d495?source=collection_archive---------22-----------------------#2020-06-08">https://blog.devgenius.io/decoding-pythons-if-name-main-8fc51e9d495?source=collection_archive---------22-----------------------#2020-06-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c0a3" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">if __name__ == '__main__ '</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/eda822505ebcef17179707ecf0831a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TCfHR6TTkeyaDHMnxP3iWw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">Emile Perron 在<a class="ae ks" href="https://unsplash.com/s/photos/python-programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5e13" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">写过 Python 代码吗？如果你有，你可能熟悉在 Python 中，你不必显式定义<strong class="kv io">主</strong>函数。如果您来自 C 之类的语言，您可能会觉得这很奇怪。但是，这是事实！</p><blockquote class="lp"><p id="e5f6" class="lq lr in bd ls lt lu lv lw lx ly lo dk translated">不需要明确定义“主”函数</p></blockquote><p id="14e4" class="pw-post-body-paragraph kt ku in kv b kw lz jo ky kz ma jr lb lc mb le lf lg mc li lj lk md lm ln lo ig bi translated">但是，Python 仍然提供了定义执行行的其他约定。您可以使用 python 文件的 __name__ 属性来定义它。</p><h2 id="2d38" class="me mf in bd mg mh mi dn mj mk ml dp mm lc mn mo mp lg mq mr ms lk mt mu mv mw bi translated">作为脚本运行</h2><p id="6268" class="pw-post-body-paragraph kt ku in kv b kw mx jo ky kz my jr lb lc mz le lf lg na li lj lk nb lm ln lo ig bi translated">打开你的 IDLE，写下下面的语句，运行程序“<strong class="kv io"> First_Program </strong>”。</p><pre class="kd ke kf kg gt nc nd ne nf aw ng bi"><span id="222b" class="me mf in nd b gy nh ni l nj nk">print(__name__)</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nl"><img src="../Images/cb1b6f0a7d79761ebed18311bb9a8086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DMnhVBCUPdnITEG_k_EzIA.png"/></div></div></figure><p id="d983" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">它将输出一个字符串“__main__”。这是怎么回事？</p><p id="4526" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每当 Python 运行一个文件时，它都会设置一些特殊的变量，而' __name__ '就是其中之一。所以，当 Python 直接运行文件时，它将这个“__name__”变量设置为“__main__”。</p><h2 id="0d20" class="me mf in bd mg mh mi dn mj mk ml dp mm lc mn mo mp lg mq mr ms lk mt mu mv mw bi translated">作为模块运行</h2><p id="9943" class="pw-post-body-paragraph kt ku in kv b kw mx jo ky kz my jr lb lc mz le lf lg na li lj lk nb lm ln lo ig bi translated">假设您创建了另一个名为“Second_Program”的 Python 脚本。但是，这次您导入了上一个脚本。</p><pre class="kd ke kf kg gt nc nd ne nf aw ng bi"><span id="eb36" class="me mf in nd b gy nh ni l nj nk">import First_Program</span></pre><p id="733f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，当您导入模块并运行程序时，输出将类似于这样。</p><pre class="kd ke kf kg gt nc nd ne nf aw ng bi"><span id="59ac" class="me mf in nd b gy nh ni l nj nk">First_Program</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nm"><img src="../Images/0e27af6315e0cca2ee5d63b6fe6c6b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DIPBnBrQ3GnsIyzhfh9BlQ.png"/></div></div></figure><p id="e957" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，每当你导入一个文件，在我们的例子中，也就是‘First _ Program ’,它就运行那个代码。但是，为什么它输出的是' First_Program '，而不是' __main__ '。原因是这次 Python 脚本不是直接运行的，而是作为一个模块导入的。</p><p id="450d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在同一程序中，让我们添加一行代码，即</p><pre class="kd ke kf kg gt nc nd ne nf aw ng bi"><span id="bc84" class="me mf in nd b gy nh ni l nj nk">print(__name__)</span></pre><p id="a7c4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">输出会是什么？这次 Python 直接运行脚本，因此输出是“__main__”。</p><pre class="kd ke kf kg gt nc nd ne nf aw ng bi"><span id="2e02" class="me mf in nd b gy nh ni l nj nk">First_Program<br/>__main__</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/bbb5f1235b7baca4ac065341543e6407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4CsCcPYfWUZ8KgM6a7oV1A.png"/></div></div></figure><h2 id="1ccf" class="me mf in bd mg mh mi dn mj mk ml dp mm lc mn mo mp lg mq mr ms lk mt mu mv mw bi translated"><strong class="ak">破解 if __name__== '__main__' </strong></h2><p id="b87c" class="pw-post-body-paragraph kt ku in kv b kw mx jo ky kz my jr lb lc mz le lf lg na li lj lk nb lm ln lo ig bi translated">看上面的两个场景。你可能会理解为什么我们需要这个声明。</p><blockquote class="lp"><p id="d8ae" class="lq lr in bd ls lt lu lv lw lx ly lo dk translated">基本上就是说这个文件是直接由 Python 运行的还是被导入的。</p></blockquote><p id="f68b" class="pw-post-body-paragraph kt ku in kv b kw lz jo ky kz ma jr lb lc mb le lf lg mc li lj lk md lm ln lo ig bi translated">现在让我们更改我们的“First_Program ”,使其如下所示。</p><pre class="kd ke kf kg gt nc nd ne nf aw ng bi"><span id="e8b3" class="me mf in nd b gy nh ni l nj nk">def main():<br/>    print(__name__)<br/><br/>if __name__=='__main__':<br/>    main()</span></pre><p id="8cb6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这次 Python 会检查 __name__ 是否等于 __main__。然后，让我运行 main()函数。</p><blockquote class="lp"><p id="9499" class="lq lr in bd ls lt lu lv lw lx ly lo dk translated">Python 脚本直接运行(输出):__main__</p></blockquote><figure class="np nq nr ns nt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi no"><img src="../Images/223a88eb7dbd463cc5f08863b9cfb8f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cqc6u6wIaoDmqGp9X9Ic5Q.png"/></div></div></figure><p id="1445" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，运行“Second_Program ”,如下所示。</p><pre class="kd ke kf kg gt nc nd ne nf aw ng bi"><span id="fbc2" class="me mf in nd b gy nh ni l nj nk">import First_Program<br/>print(__name__)</span></pre><p id="0b32" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">程序运行时，Python 会运行导入的“First_Program”的代码。但是，这次它不会返回任何内容，因为“__name__”即“First_Program”不等于“__main__”。</p><blockquote class="lp"><p id="7119" class="lq lr in bd ls lt lu lv lw lx ly lo dk translated">Python 脚本运行时带有一个模块(输出):__main__</p></blockquote><figure class="np nq nr ns nt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/c442380513b965fb87fb38ab228536f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o0xt4ZbVbrZOxayVVxZFjw.png"/></div></div></figure><p id="5817" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这两个脚本这次将返回相同的输出。但是，如果你在第一个脚本中做了如下的事情。</p><pre class="kd ke kf kg gt nc nd ne nf aw ng bi"><span id="04d4" class="me mf in nd b gy nh ni l nj nk">if __name__!='__main__':<br/>    main()</span></pre><blockquote class="lp"><p id="0065" class="lq lr in bd ls lt nv nw nx ny nz lo dk translated">Python 脚本运行时带有模块(输出):“First_Program”和“__main__”</p></blockquote><figure class="np nq nr ns nt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oa"><img src="../Images/0b22507194edd1f417360ec36f67a799.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKNGS0QkuRZhKAXKhsa0Fg.png"/></div></div></figure><p id="71a7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">可以像这样在 Python 中显式定义' main()'。而且，它是 Python 中' __name__ '最重要的用例之一。</p><h2 id="fade" class="me mf in bd mg mh mi dn mj mk ml dp mm lc mn mo mp lg mq mr ms lk mt mu mv mw bi translated">摘要</h2><p id="ea4a" class="pw-post-body-paragraph kt ku in kv b kw mx jo ky kz my jr lb lc mz le lf lg na li lj lk nb lm ln lo ig bi translated">if __name__== '__main__ '语句在初学者的编程实践中并不常见。但是，如果您查看任何应用程序的 Python 代码，您可能会遇到这种情况。这就是我决定解码它的原因。下一次，你看到这个声明，你一定知道它是什么意思，是做什么的。</p><p id="4d11" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">平安！</strong></p></div></div>    
</body>
</html>