<html>
<head>
<title>Querying and updating documents Using MongoDB Compass</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用MongoDB Compass查询和更新文档</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/querying-and-updating-documents-on-mongodb-compass-c9be25ffffb2?source=collection_archive---------0-----------------------#2022-01-23">https://blog.devgenius.io/querying-and-updating-documents-on-mongodb-compass-c9be25ffffb2?source=collection_archive---------0-----------------------#2022-01-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1097" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用MongoDB指南针</h2></div><p id="d674" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你知道了:</p><p id="bbc3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://medium.com/@ibtissam.makdoun/from-rdbms-to-non-relational-databases-119f4007b214" rel="noopener">如何在windows上安装MongoDB？</a></p><p id="ecb2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://medium.com/@ibtissam.makdoun/creating-updating-and-deleting-mongodb-documents-94c12219783f" rel="noopener">如何创建和处理文档？</a></p><p id="38fe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们试着把事情做得更进一步，如何？让我们看看如何查询我们的文档。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/3a723e5891bbbccf945458ff51958073.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g5idDQyiZGgyG4G7Ez5ogg.png"/></div></div></figure><p id="c624" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，在本教程中，我将为您演示如何使用:</p><ul class=""><li id="35fb" class="lo lp iq kh b ki kj kl km ko lq ks lr kw ls la lt lu lv lw bi translated">排序，限制跳过</li><li id="d73c" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">运算符和数组</li><li id="01a2" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">更新文档</li><li id="d741" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">更新数组</li><li id="b538" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated">删除文档</li></ul><p id="8f63" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个教程看起来很有前途，不是吗？那我们开始吧。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">使用命令行查询MongoDB集合</figcaption></figure><h1 id="c027" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">排序、限制和跳过:</h1><p id="c913" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">排序、限制和跳过都以同样的方式工作，在将查询发送到数据库之前，在查询的末尾添加选项。通过这样做，您可以保证:</p><ul class=""><li id="9c23" class="lo lp iq kh b ki kj kl km ko lq ks lr kw ls la lt lu lv lw bi translated"><strong class="kh ir">排序</strong>:对查询结果进行排序</li><li id="4dbf" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated"><strong class="kh ir">限制</strong>:限制查询结果</li><li id="627f" class="lo lp iq kh b ki lx kl ly ko lz ks ma kw mb la lt lu lv lw bi translated"><strong class="kh ir">跳过</strong>:跳过查询之外</li></ul><p id="1c50" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以，让我们用排序、限制和跳过来弄脏我们的手:</p><p id="ae99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先我们从<strong class="kh ir">排序</strong>开始。排序需要添加一个对象来表示:用来排序的键名和排序的方向1升序-1降序。</p><p id="a641" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，要使用姓名升序和年龄降序对查询进行排序，我们可以如下进行:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="1bff" class="nk mj iq ng b gy nl nm l nn no">db.students.find().sort({“full_name”:1, “age” : -1});</span></pre><p id="0fda" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，要在MongoDB Compass中使用它，我们只需:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi np"><img src="../Images/17f685b8bf5668396ee86bfd3232e8eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*djV7Zpq3uTJ448Tec3janQ.gif"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">使用MongoDB Compass排序文档</figcaption></figure><p id="288d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">放松点，柠檬汽水！</p><p id="edd7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要为您的查询设置限制，例如，您只需要数据库中的前几个文档，您可以使用<strong class="kh ir"> limit </strong>，就像排序一样，您可以在查找查询中使用Limit函数，并指定要返回多少个结果:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="6832" class="nk mj iq ng b gy nl nm l nn no">db.students.find().limit(3);</span></pre><blockquote class="nq nr ns"><p id="5d27" class="kf kg nt kh b ki kj jr kk kl km ju kn nu kp kq kr nv kt ku kv nw kx ky kz la ij bi translated">请记住，如果匹配您的查询的文档较少，将只返回找到的文档数。那是因为<strong class="kh ir">极限</strong>设定的是上限，不是下限。</p></blockquote><p id="ed90" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">跳过</strong>与<strong class="kh ir">限制</strong>的工作方式相同。链接它以查找并指定要跳过的文档数。</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="5d34" class="nk mj iq ng b gy nl nm l nn no">db.students.find().skip(3);</span></pre><p id="4196" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以，在这种情况下<strong class="kh ir"> Skip </strong>会传递你集合中的前三个文档，然后返回其余的文档。如果您的收藏少于三个文档。那就什么都不会回。</p><p id="c99f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好了，现在都清楚了。</p><p id="7533" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">等等，还有一件事。您可以在同一个查询中将这三种方法链接成find。就像这样。</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="eab0" class="nk mj iq ng b gy nl nm l nn no">db.students.find.sort({“full_name”:1,”age”:-1}).limit(3).skip(3);</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi np"><img src="../Images/a23168d50a9adfbd14f30a44fa7e4409.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aDLdPKUwu9KtDUECVZF2Rg.gif"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">MongoDB Compass中排序、过滤和限制的链接</figcaption></figure><h1 id="16f3" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">运算符和数组:</h1><p id="bf7c" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated"><em class="nt">再来大忽悠！？我们从来没有在RDBMS中使用过操作符或数组，所以一开始听起来可能会很奇怪，但是坚持住。我将设法为你清除它。</em></p><p id="bd95" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，MongoDB有一个可以在你的字段上使用的操作符列表，比如字符串、数字、数组、对象甚至子文档。我们使用操作符有条件地过滤我们的结果。</p><p id="e44c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请记住，即使操作符在开始时听起来有点奇怪，但它们都以相同的方式工作，所以您只需要熟悉它。</p><p id="6204" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以让我们从<strong class="kh ir">查询条件</strong>开始:</p><p id="2ece" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">MongoDB使用类似JSON的语法进行查询，因此使用了一些操作符，如&gt;或&lt; won’t work. So we need operators to replace all the mathematical comparison operators. So we introduce : $lt, $lte, $gt, $gte, to replace respectively: 、&gt; =。</p><p id="f46f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有这些操作符都可以组合起来查找一系列值，例如年龄在18到20岁之间的学生。</p><p id="8ed6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们将使用:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="5d56" class="nk mj iq ng b gy nl nm l nn no">db.students.find({“age”: {“$gte”: 18, “$lte”: 20}});</span></pre><p id="02ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如何在MongoDB指南针上使用？不要再说了！</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/0f9d6527ffc1b7c8585449376f11414e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*MR62wMswBOBrR5RdfXMu7w.gif"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">如何使用小于或大于运算符</figcaption></figure><p id="1664" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">查询数组怎么样？</p><p id="6fe9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">嗯，要使用数组中的一个元素找到一个查询，很容易。你只要说:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="4221" class="nk mj iq ng b gy nl nm l nn no">db.students.find({“courses”:”Mathematics”});</span></pre><p id="ff24" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将返回所有匹配的文档。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/1c11db2c14dda48a9d8b607f4d8e4ab0.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*GLeRZcW84wVHeTqezjQzeA.gif"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">如何使用数组中的元素查找文档</figcaption></figure><p id="e827" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是，如果您想要匹配多个文档，您需要使用一个运算符来完成，如下所示:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="fcd3" class="nk mj iq ng b gy nl nm l nn no">db.students.find({“courses”:{$all:[“Mathematics”, “English”]}});</span></pre><p id="7782" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个查询将允许您在courses数组中查找包含“Mathematics”和“English”元素的文档，元素之间的顺序无关紧要。</p><blockquote class="nq nr ns"><p id="24f3" class="kf kg nt kh b ki kj jr kk kl km ju kn nu kp kq kr nv kt ku kv nw kx ky kz la ij bi translated">还要注意，在数组中使用这样的一个元素<em class="iq">" courses ":{ $ all:[" Mathematics "]}</em>将匹配与使用<em class="iq">{ " courses ":" Mathematics " }</em>相同的文档。你自己试试！</p></blockquote><p id="1099" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果要对数组中的特定元素运行查询，可以使用:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="35ac" class="nk mj iq ng b gy nl nm l nn no">db.students.find({“courses.1”:”English”});</span></pre><p id="a563" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将返回courses数组的第二个元素是“English”的所有文档。</p><p id="25b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">再补充一个有趣的信息，如何查询嵌入文档？嗯，就像我们之前做的一样简单，当我们需要数组中的一个特定元素时，我们使用点符号。</p><p id="4f52" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，如果我们考虑我们集合中的学生存储如下:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="d317" class="nk mj iq ng b gy nl nm l nn no">{“name” : <br/>{ <br/>“first”: “Theodore”, <br/>“last”: “Mosby”<br/>},<br/>…..<br/>}</span></pre><p id="4065" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，为了查询这个文档，我们将使用:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="6358" class="nk mj iq ng b gy nl nm l nn no">db.students.find({“name.first”:”Theodore”, “name.last”: “Mosby”});</span></pre><p id="5a21" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您还应该注意，这种类型的查询是顺序敏感的，这意味着如果您以姓氏开始，它不会返回您的结果。</p><blockquote class="nq nr ns"><p id="0d77" class="kf kg nt kh b ki kj jr kk kl km ju kn nu kp kq kr nv kt ku kv nw kx ky kz la ij bi translated">本教程中还忽略了其他一些操作符。如果你对这些感兴趣，请在下面留言通知我。</p></blockquote><h1 id="2312" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">更新文档</h1><p id="d098" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">如果我们的学生名字出现拼写错误怎么办？是呀是呀！我们不能永远把它当作一个错误。幸运的是，我们有几种更新方法来帮助我们解决这个问题。</p><p id="8bbf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，可以使用<em class="nt"> updateOne、updateMany </em>和<em class="nt"> replaceOne </em>来更改数据库中的文档。对于Update方法，每个方法都将一个过滤器文档作为它们的第一个参数，并将一个修饰符文档作为它们的第一个参数，在这个修饰符文档中，您可以描述您想要进行的更改。<em class="nt"> replaceOne </em>还在第一个参数中接受要提交的更改，但在第二个参数中，它期望文档将替换匹配过滤器的文档。</p><p id="14f1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意，我们同时使用两个查询来更新文档。将应用到达服务器的第一个更新，但是也将应用到达服务器的第二个查询。</p><p id="9696" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常只有文档的某些部分需要更新。您可以使用更新操作符$set，$unset et $inc .更新文档的特定字段。</p><p id="cfa8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们练习一下这些运算符，看看它们是如何工作的:</p><p id="b7f2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">$set用于设置字段的值。如果该字段尚不存在，将会被创建。使用set更新可以方便地更新字段或添加新键。我们可以使用以下命令为学生设置全名:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="04ad" class="nk mj iq ng b gy nl nm l nn no">db.students.updateOne({“_id”: ObjectId(“61ea963d4ebc56f0353cda05”)}, {“$set”: {“full_name”:”Frank Brown”}});</span></pre><p id="4f1c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用Mongo Compass更新文档中的字段，我们需要首先选择文档，然后我们将手动更新它，如下图所示。</p><p id="14f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果我们意识到我们不需要全名，名和姓就足够了。我们可以使用$unset文档删除键“full_name”。</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="5743" class="nk mj iq ng b gy nl nm l nn no">db.students.updateOne({“_id”: }, {“$unset”: {“full_name”:1}});</span></pre><p id="51c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后文档会和开始时一样。</p><p id="e5a3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">$inc运算符可用于更改现有键的增量和减量，或者创建一个现有的新键(如果它尚不存在)。我们可以用它来增加我们数据库中学生的年龄，增加我们想要增加的值。</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="a104" class="nk mj iq ng b gy nl nm l nn no">db.students.updateOne({“_id”: ObjectId(“61ea963d4ebc56f0353cda05”}, {$inc: {“age”: 1}});</span></pre><p id="9421" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们发现这个学生还没有变老，那么我们可以很容易地改变这个值，使用:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="c4d6" class="nk mj iq ng b gy nl nm l nn no">db.students.updateOne({“_id”: ObjectId(“61ea963d4ebc56f0353cda05”}, {$inc: {“age”: -1}});</span></pre><p id="2e62" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您的文档将恢复到之前的状态。</p><h1 id="420d" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">更新数组:</h1><p id="2205" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">我想你已经猜对了，如果你想在你的文档中更新一个数组，你必须使用一个操作符。但是在这一点上，这是很容易做到的。因此，让我们继续探索这些操作符。</p><p id="2580" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们从向数组中添加一个元素开始。$push，将允许您在数组末尾添加一个元素。例如，假设我们想在课程列表中添加一门新课程。因此，我们将再次使用update，但是我们将对我们想要更新的字段和我们想要添加的值使用$push。</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="52cb" class="nk mj iq ng b gy nl nm l nn no">db. student.pdateOne({“_id”: ObjectId(“61ea963d4ebc56f0353cda05”}, {$push: {“courses”: “History”}})</span></pre><p id="49d0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将把历史添加到学生课程列表中。使用MongoDB compass来实现这一点甚至更容易。</p><p id="4ece" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们犯了一个错误，在错误的文档上做了更新。不要担心。您可以使用相同的语法，只需稍加修改，就可以从数组中删除一个元素。首先，您需要更改操作符，使用$pull而不是$push。然后你会保持其余的原样。很简单，不是吗？</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="009b" class="nk mj iq ng b gy nl nm l nn no">db. student.pdateOne({“_id”: ObjectId(“61ea963d4ebc56f0353cda05”}, {$pull: {“courses”: “History”}})</span></pre><p id="4f56" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们在MongoDB罗盘上练习一下。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/84608cf2be64cf4c91cc7f3bd3be10b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/1*Jz6XYuOSjpond-lEm154AA.gif"/></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">使用MongoDB Compass从文档中更新数组</figcaption></figure><h1 id="83f8" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">删除文档:</h1><p id="5477" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">当我们仍然对现有数据感兴趣时，更新非常有用和方便，但有时我们需要为新数据腾出更多空间。我们做到这一点的唯一解决方案是删除不再需要的数据。MongoDB允许您使用两种不同的方法从集合中删除数据:<strong class="kh ir"> deleteOne </strong>和<strong class="kh ir"> deleteMany </strong>。这两种方法都将过滤器文档作为第一个参数。<strong class="kh ir"> DeleteOne </strong>将删除集合中的第一个匹配，而<strong class="kh ir"> deleteMany </strong>将删除集合中所有匹配的文档。</p><p id="57dd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用_id删除文档，我们可以使用:</p><pre class="ld le lf lg gt nf ng nh ni aw nj bi"><span id="3b7a" class="nk mj iq ng b gy nl nm l nn no">db.students.deleteOne({“_id”: ObjectId(“61ea963d4ebc56f0353cda05”})</span></pre><p id="c703" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用MongoDB compass更容易，如下图所示:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi np"><img src="../Images/89635b730ebc2eddd577c7bb2764912b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Ztu786BtlVTgwkrCWsmUCg.gif"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">从MongoDB Compass中删除文档</figcaption></figure><h1 id="c2f2" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">结论:</h1><p id="7713" class="pw-post-body-paragraph kf kg iq kh b ki na jr kk kl nb ju kn ko nc kq kr ks nd ku kv kw ne ky kz la ij bi translated">就是这样。现在您已经知道了如何使用操作符以及如何运行更新和删除，我们可以开始质疑查询的性能了。</p><p id="b681" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将了解更多关于索引和在MongoDB上存储文档的信息。</p><h1 id="17b6" class="mi mj iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">参考资料:</h1><blockquote class="nz"><p id="3342" class="oa ob iq bd oc od oe of og oh oi la dk translated">MongoDB:权威指南，第三版，<a class="ae lb" href="https://learning.oreilly.com/library/publisher/uuid/cde70c0c-24bc-41d1-aab0-8a405063a16e" rel="noopener ugc nofollow" target="_blank">奥赖利媒体公司</a>，2019年12月，511页</p></blockquote></div></div>    
</body>
</html>