<html>
<head>
<title>The Complete JS Notes #15 🧵 Dates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">完整的 JS 注释#15 🧵日期</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-complete-js-notes-15-dates-f87b415eeadb?source=collection_archive---------8-----------------------#2022-07-26">https://blog.devgenius.io/the-complete-js-notes-15-dates-f87b415eeadb?source=collection_archive---------8-----------------------#2022-07-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2b28fcc0dddcfa6cbeddf457610d4b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2LqhPCJ5ko9u7KNeKuhB_g.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">安德里·列昂诺夫在<a class="ae jz" href="https://unsplash.com/s/photos/funny?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5f09" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">欢迎阅读我的 JavaScript 笔记的下一篇文章。</em></p><p id="c0a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">在本文中我们将讨论:</em> <strong class="kc io"> <em class="ky"> JavaScript 日期、国际化日期(Intl)、setTimeout/setInterval</em></strong></p><p id="9baa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">所有内容摘自 Jonas Schmedtmann 的惊人课程</em> <a class="ae jz" href="https://www.udemy.com/course/the-complete-javascript-course/" rel="noopener ugc nofollow" target="_blank"> <em class="ky">完整的 JavaScript 课程 2022:从零到专家！</em> </a></p><p id="dce2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请购买课程以了解内容，这只是我对课程的总结笔记。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><figure class="lh li lj lk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lg"><img src="../Images/09e736029de2cea71af25877ffbbc3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wz6QxsUxu17juFrHQUYdBQ.png"/></div></div></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="d241" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">创建日期</h1><p id="1288" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">创建新日期有 4 种方法</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="e657" class="mt lm in mp b gy mu mv l mw mx">const date1 = new Date();</span><span id="e31d" class="mt lm in mp b gy my mv l mw mx">console.log(date1); // Sat Aug 07 2021 17:09:39 GMT+0300 (GMT+03:00)</span></pre><p id="fbfa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以解析日期字符串并将它们转换成日期对象</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="a9b4" class="mt lm in mp b gy mu mv l mw mx">const date2 = new Date(‘Aug 07 2021 17:09:39’); <br/>// Sat Aug 07 2021 17:09:39 GMT+0300 (GMT+03:00)</span><span id="9d8a" class="mt lm in mp b gy my mv l mw mx">const date3 = new Date(‘December 24 2015’); <br/>//Thu Dec 24 2015 00:00:00 GMT+0200</span></pre><p id="6d1a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它甚至能计算出星期几。Js 在这方面很聪明。但是最好还是使用 js 创建的日期字符串。</p><p id="bcef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">世界时区</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="f378" class="mt lm in mp b gy mu mv l mw mx">const date3 = new Date(‘2019–11–18T21:31:17.178Z’);</span></pre><p id="8c4b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以 Z 结尾的日期字符串表示世界时区，所以无论你在世界的哪个地方，这个时区都不会改变..</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="8818" class="mt lm in mp b gy mu mv l mw mx">const date = new Date(2037, 10, 3, 15, 24, 59); // Tue Nov 03 2037 15:24:59 GMT+0300 (GMT+03:00)</span><span id="eee1" class="mt lm in mp b gy my mv l mw mx">console.log(date);</span></pre><p id="26a8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当心欧洲订单年月日</p><p id="713a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">11 月是第 11 个月，但我在这个月超过了 10，这是因为 js 开始从 0 开始计算月份，是的，我知道</p><p id="1a94" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Js 也自动更正我们的错误，比如说我们想把 11 月 33 日</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="a4de" class="mt lm in mp b gy mu mv l mw mx">const date = new Date(2037, 10, 33); // Thu Dec 03 2037 00:00:00 GMT+0300 (GMT+03:00)</span><span id="6858" class="mt lm in mp b gy my mv l mw mx">console.log(date);</span></pre><p id="2339" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它会自动移到下个月</p><p id="7041" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们还可以传递从初始 UNIX 时间开始的毫秒数</p><p id="b27b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个构造函数其实挺有用的。尽管看起来不像。</p><p id="fe67" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">日期是一种对象类型，和 JS 中的所有对象一样，它也有自己的方法。</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="f733" class="mt lm in mp b gy mu mv l mw mx">const future = new Date(2037, 1, 25, 17, 0, 0);</span><span id="168d" class="mt lm in mp b gy my mv l mw mx">console.log(future.getFullYear()); &lt;- Always use getFullYear() not getYear()</span><span id="a60c" class="mt lm in mp b gy my mv l mw mx">console.log(future.getMonth());</span><span id="1a62" class="mt lm in mp b gy my mv l mw mx">console.log(future.getDate()); &lt;- Day of month</span><span id="b518" class="mt lm in mp b gy my mv l mw mx">console.log(future.getDay()); &lt;- Day of week</span><span id="50f9" class="mt lm in mp b gy my mv l mw mx">console.log(future.getHours());</span><span id="6d28" class="mt lm in mp b gy my mv l mw mx">console.log(future.getMinutes());</span><span id="2372" class="mt lm in mp b gy my mv l mw mx">console.log(future.getSeconds());</span><span id="6701" class="mt lm in mp b gy my mv l mw mx">console.log(future.getMilliseconds());</span><span id="6feb" class="mt lm in mp b gy my mv l mw mx">console.log(future.toISOString()); // 2037–02–25T14:00:00.000Z</span><span id="8f63" class="mt lm in mp b gy my mv l mw mx">console.log(future.getTime()); // 2119183200000 &lt;- time passed since UNIX time start</span><span id="ddba" class="mt lm in mp b gy my mv l mw mx">console.log(new Date(2119183200000)); // Wed Feb 25 2037 17:00:00 GMT+0300 (GMT+03:00)</span></pre><p id="8439" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所有这些方法都有 setters</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="cb4a" class="mt lm in mp b gy mu mv l mw mx">cl(future.setFullYear(2040));</span></pre><h1 id="a343" class="ll lm in bd ln lo mz lq lr ls na lu lv lw nb ly lz ma nc mc md me nd mg mh mi bi translated">添加日期</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="7fc4" class="mt lm in mp b gy mu mv l mw mx">// How to display date as dd/mm/yy hh:mimi</span><span id="4d86" class="mt lm in mp b gy my mv l mw mx">const now = new Date();</span><span id="b05b" class="mt lm in mp b gy my mv l mw mx">const day = now.getDate();</span><span id="9e46" class="mt lm in mp b gy my mv l mw mx">const month = now.getMonth() + 1;</span><span id="44d8" class="mt lm in mp b gy my mv l mw mx">const year = now.getFullYear();</span><span id="a4b6" class="mt lm in mp b gy my mv l mw mx">const hour = now.getHours();</span><span id="6939" class="mt lm in mp b gy my mv l mw mx">const min = now.getMinutes();</span><span id="6f3a" class="mt lm in mp b gy my mv l mw mx">labelDate.textContent = `${day}/${month}/${year}, ${hour}:${min}`;</span></pre><p id="cef2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果日期是 1 位数，我们通常在开头写 0</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="37bb" class="mt lm in mp b gy mu mv l mw mx">const day = `${now.getDate()}`.padStart(2, 0);</span><span id="d3e3" class="mt lm in mp b gy my mv l mw mx">const month = `${now.getMonth() + 1}`.padStart(2, 0);</span></pre><h1 id="3c3e" class="ll lm in bd ln lo mz lq lr ls na lu lv lw nb ly lz ma nc mc md me nd mg mh mi bi translated">有日期的操作</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="6c42" class="mt lm in mp b gy mu mv l mw mx">const future = new Date(2037, 1, 25, 17, 0, 0);</span><span id="0c49" class="mt lm in mp b gy my mv l mw mx">console.log(+future); // A big num</span></pre><p id="3d00" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这意味着我们可以将日期转换成数字，并用它们进行运算</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="e37d" class="mt lm in mp b gy mu mv l mw mx">const future = new Date(2037, 1, 25, 17, 0, 0);</span><span id="de13" class="mt lm in mp b gy my mv l mw mx">console.log(+future);</span><span id="73b7" class="mt lm in mp b gy my mv l mw mx">const calcDaysPassed = (date1, date2) =&gt;</span><span id="f600" class="mt lm in mp b gy my mv l mw mx">Math.abs(date1 — date2) / (1000 * 60 * 60 * 24);</span><span id="04f7" class="mt lm in mp b gy my mv l mw mx">console.log(calcDaysPassed(future, Date.now())); <br/>// Date.now() gives that moment without creating a date object</span></pre><h1 id="9894" class="ll lm in bd ln lo mz lq lr ls na lu lv lw nb ly lz ma nc mc md me nd mg mh mi bi translated">让日期看起来对人类来说很熟悉</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="f2e9" class="mt lm in mp b gy mu mv l mw mx">const formatMovementDate = date =&gt; {</span><span id="8f55" class="mt lm in mp b gy my mv l mw mx">const calcDaysPassed = (date1, date2) =&gt;</span><span id="ea58" class="mt lm in mp b gy my mv l mw mx">Math.floor(Math.abs(date1 — date2) / (1000 * 60 * 60 * 24));</span><span id="25a4" class="mt lm in mp b gy my mv l mw mx">const daysPassed = calcDaysPassed(date, Date.now());</span><span id="f882" class="mt lm in mp b gy my mv l mw mx">const daysPassedStr = daysPassed =&gt; `${daysPassed} days ago.`;</span><span id="99e1" class="mt lm in mp b gy my mv l mw mx">if (daysPassed === 0) return `Today`;</span><span id="3b1e" class="mt lm in mp b gy my mv l mw mx">else if (daysPassed === 1) return `Yesterday`;</span><span id="8e65" class="mt lm in mp b gy my mv l mw mx">else if (daysPassed &gt; 1 &amp;&amp; daysPassed &lt; 7) return daysPassedStr(daysPassed);</span><span id="b741" class="mt lm in mp b gy my mv l mw mx">else {</span><span id="6bd9" class="mt lm in mp b gy my mv l mw mx">const day = `${date.getDate()}`.padStart(2, 0);</span><span id="7305" class="mt lm in mp b gy my mv l mw mx">const month = `${date.getMonth() + 1}`.padStart(2, 0);</span><span id="346c" class="mt lm in mp b gy my mv l mw mx">const year = date.getFullYear();</span><span id="2034" class="mt lm in mp b gy my mv l mw mx">return `${day}/${month}/${year}`;</span><span id="121f" class="mt lm in mp b gy my mv l mw mx">}</span><span id="62a0" class="mt lm in mp b gy my mv l mw mx">};</span></pre><h1 id="096d" class="ll lm in bd ln lo mz lq lr ls na lu lv lw nb ly lz ma nc mc md me nd mg mh mi bi translated">国际化日期(国际)</h1><p id="fbde" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">JS 有一个新的内部化 API，使得显示世界各地时间的日期变得简单。</p><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/9c351d713a2854879082f2e241181319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*gsMY0JC5h_xQmLUvRSqdJQ.png"/></div></figure><p id="e4fc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先是语言和国家，然后是要格式化的日期对象。这会以字符串形式返回 2021 年 9 月 8 日。</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="25b1" class="mt lm in mp b gy mu mv l mw mx">//Experimenting the API</span><span id="1736" class="mt lm in mp b gy my mv l mw mx">const now = new Date();</span><span id="23b9" class="mt lm in mp b gy my mv l mw mx">labelDate.textContent = Intl.DateTimeFormat(‘tr-TR’).format(now); // 09.08.2021</span></pre><p id="d01e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">检查你的内容的正确代码谷歌“ISO 语言代码”</p><p id="0717" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这种情况总是持续到今天、月、年吗？</p><p id="2711" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">不要！我们可以让它显示我们想要的任何格式，为此我们必须创建一个选项对象，在该对象中，我们需要定义选项。</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="bea0" class="mt lm in mp b gy mu mv l mw mx">const now = new Date();</span><span id="2fbd" class="mt lm in mp b gy my mv l mw mx">const options = {</span><span id="d18b" class="mt lm in mp b gy my mv l mw mx">year: ‘2-digit’,</span><span id="9d7a" class="mt lm in mp b gy my mv l mw mx">month: ‘long’,</span><span id="6d5c" class="mt lm in mp b gy my mv l mw mx">day: ‘numeric’,</span><span id="dd92" class="mt lm in mp b gy my mv l mw mx">weekday: ‘long’,</span><span id="6ebc" class="mt lm in mp b gy my mv l mw mx">hour: ‘numeric’,</span><span id="1961" class="mt lm in mp b gy my mv l mw mx">minute: ‘numeric’,</span><span id="5213" class="mt lm in mp b gy my mv l mw mx">};</span><span id="1bf0" class="mt lm in mp b gy my mv l mw mx">labelDate.textContent = Intl.DateTimeFormat(‘tr-TR’, options).format(now);</span></pre><p id="b59b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一些选项可以采用不同的参数=(两位数、数字、长、短、箭头)</p><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/8f7a7aa32455f0b1f8edd6fb1d9c338d.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/1*MhRVNBfooG7hW0UTEfJwUQ.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">显示土耳其语示例</figcaption></figure><p id="4445" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将语言硬编码到应用程序中并不是一个好的做法。你可以从浏览器上下载</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="20f4" class="mt lm in mp b gy mu mv l mw mx">const locale = navigator.language;</span><span id="eb43" class="mt lm in mp b gy my mv l mw mx">labelDate.textContent = Intl.DateTimeFormat(locale, options).format(now);</span></pre><h1 id="808c" class="ll lm in bd ln lo mz lq lr ls na lu lv lw nb ly lz ma nc mc md me nd mg mh mi bi translated">号码国际化(国际)</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="b8cd" class="mt lm in mp b gy mu mv l mw mx">const num = 32244424.32;</span><span id="c23c" class="mt lm in mp b gy my mv l mw mx">console.log(‘US: ‘, Intl.NumberFormat(‘en-US’).format(num));</span><span id="6acd" class="mt lm in mp b gy my mv l mw mx">console.log(‘TR: ‘, Intl.NumberFormat(‘tr-TR’).format(num));</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/3c78117b5e245b7bfa89f0bdbf7ecafc.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*IsUIrFslEEIIqCzBqQUzLQ.png"/></div></figure><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="6ad7" class="mt lm in mp b gy mu mv l mw mx">const options2 = {</span><span id="eac4" class="mt lm in mp b gy my mv l mw mx">style: ‘unit’,</span><span id="92ee" class="mt lm in mp b gy my mv l mw mx">unit: ‘mile-per-hour’,</span><span id="251b" class="mt lm in mp b gy my mv l mw mx">};</span><span id="ee2e" class="mt lm in mp b gy my mv l mw mx">console.log(‘US: ‘, Intl.NumberFormat(‘en-US’, options2).format(num));</span><span id="ad94" class="mt lm in mp b gy my mv l mw mx">console.log(‘TR: ‘, Intl.NumberFormat(‘tr-TR’, options2).format(num));</span><span id="ea5e" class="mt lm in mp b gy my mv l mw mx">console.log(‘DE: ‘, Intl.NumberFormat(‘de-DE’, options2).format(num));</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/dd03ca9f46908f0763ab7c2979704f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:398/format:webp/1*N1PDJSqGz9NUbHkowH_-dQ.png"/></div></figure><h1 id="971e" class="ll lm in bd ln lo mz lq lr ls na lu lv lw nb ly lz ma nc mc md me nd mg mh mi bi translated">定时器设置超时和设置间隔</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="cdee" class="mt lm in mp b gy mu mv l mw mx">setTimeout runs only once while setInterval runs until we stop it</span><span id="ea3f" class="mt lm in mp b gy my mv l mw mx">setTimeout(() =&gt; console.log(‘Here is your pizza’), 3000);</span><span id="2c39" class="mt lm in mp b gy my mv l mw mx">How to pass parameters to the callback function?</span><span id="9e15" class="mt lm in mp b gy my mv l mw mx">setTimeout(</span><span id="a24c" class="mt lm in mp b gy my mv l mw mx">(ing1, ing2) =&gt; console.log(`Here is your pizza with ${ing1} and ${ing2}`),</span><span id="f36b" class="mt lm in mp b gy my mv l mw mx">3000,</span><span id="9deb" class="mt lm in mp b gy my mv l mw mx">‘spinach’,</span><span id="b302" class="mt lm in mp b gy my mv l mw mx">‘olives’</span><span id="d940" class="mt lm in mp b gy my mv l mw mx">);</span></pre><p id="e2d8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以在它结束前中断超时</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="5994" class="mt lm in mp b gy mu mv l mw mx">const ingredients = [‘spinach’, ‘olives’];</span><span id="cfd8" class="mt lm in mp b gy my mv l mw mx">const pizzaTimer = setTimeout(</span><span id="2dbd" class="mt lm in mp b gy my mv l mw mx">(ing1, ing2) =&gt; console.log(`Here is your pizza with ${ing1} and ${ing2}`),</span><span id="b072" class="mt lm in mp b gy my mv l mw mx">3000,</span><span id="5124" class="mt lm in mp b gy my mv l mw mx">…ingredients</span><span id="d4a8" class="mt lm in mp b gy my mv l mw mx">);</span><span id="be90" class="mt lm in mp b gy my mv l mw mx">if (ingredients.includes(‘spinach’)) clearTimeout(pizzaTimer);</span><span id="dba6" class="mt lm in mp b gy my mv l mw mx">setInterval runs always between a specific time stamp until we stop it</span><span id="6a0a" class="mt lm in mp b gy my mv l mw mx">setInterval(() =&gt; {</span><span id="e09c" class="mt lm in mp b gy my mv l mw mx">console.log(new Date());</span><span id="fb26" class="mt lm in mp b gy my mv l mw mx">}, 1000);</span></pre><p id="5b3e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要删除间隔，我们使用 clear。我们也可以在区间内使用 clearInterval</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="c10a" class="mt lm in mp b gy mu mv l mw mx">const startLogOutTimer = function () {</span><span id="c7ba" class="mt lm in mp b gy my mv l mw mx">let time = 100;</span><span id="9453" class="mt lm in mp b gy my mv l mw mx">let min = Math.floor(time / 60);</span><span id="7b04" class="mt lm in mp b gy my mv l mw mx">let sec = time % 60;</span><span id="9a0b" class="mt lm in mp b gy my mv l mw mx">const timer = setInterval(() =&gt; {</span><span id="f14d" class="mt lm in mp b gy my mv l mw mx">min = String(Math.floor(time / 60)).padStart(2, 0);</span><span id="050d" class="mt lm in mp b gy my mv l mw mx">sec = String(time % 60).padStart(2, 0);</span><span id="15bb" class="mt lm in mp b gy my mv l mw mx">labelTimer.textContent = `${min}:${sec}`;</span><span id="8142" class="mt lm in mp b gy my mv l mw mx">time — ;</span><span id="e0a9" class="mt lm in mp b gy my mv l mw mx">if (time === 0) clearInterval(timer);</span><span id="2205" class="mt lm in mp b gy my mv l mw mx">}, 1000);</span><span id="4de7" class="mt lm in mp b gy my mv l mw mx">};</span></pre><p id="c11d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们有一个问题，但是我们的间隔开始后 1 秒钟。但是我们不希望它立即开始，我们使用函数调用技巧。</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="27dc" class="mt lm in mp b gy mu mv l mw mx">const startLogOutTimer = function () {</span><span id="01f8" class="mt lm in mp b gy my mv l mw mx">let time = 10 * 60;</span><span id="ec7d" class="mt lm in mp b gy my mv l mw mx">let min = Math.floor(time / 60);</span><span id="8a54" class="mt lm in mp b gy my mv l mw mx">let sec = time % 60;</span><span id="ff92" class="mt lm in mp b gy my mv l mw mx">const tick = () =&gt; {</span><span id="3e30" class="mt lm in mp b gy my mv l mw mx">min = String(Math.floor(time / 60)).padStart(2, 0);</span><span id="e24a" class="mt lm in mp b gy my mv l mw mx">sec = String(time % 60).padStart(2, 0);</span><span id="9e92" class="mt lm in mp b gy my mv l mw mx">labelTimer.textContent = `${min}:${sec}`;</span><span id="b234" class="mt lm in mp b gy my mv l mw mx">time — ;</span><span id="17a2" class="mt lm in mp b gy my mv l mw mx">if (time === 0) {</span><span id="8064" class="mt lm in mp b gy my mv l mw mx">clearInterval(timer);</span><span id="e1c1" class="mt lm in mp b gy my mv l mw mx">containerApp.style.opacity = ‘0’;</span><span id="ad80" class="mt lm in mp b gy my mv l mw mx">labelWelcome.textContent = ‘Log in to get started’;</span><span id="4479" class="mt lm in mp b gy my mv l mw mx">}</span><span id="b4aa" class="mt lm in mp b gy my mv l mw mx">};</span><span id="b28e" class="mt lm in mp b gy my mv l mw mx">tick();</span><span id="a052" class="mt lm in mp b gy my mv l mw mx">const timer = setInterval(tick, 1000);</span><span id="16c6" class="mt lm in mp b gy my mv l mw mx">};</span></pre><p id="6605" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此外，我们的显示屏在 1 秒钟内消失了，我们不希望这种情况发生。如何避免？在减少时间之前，只需检查时间是否为 0。</p><p id="cdcd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在有一个大问题，当我去找另一个客户时，比如杰西卡·戴维斯。另一个计时器正在创建，运行速度提高了 2 倍。如何避免。</p><p id="84ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们需要创建一个全局时间变量来存储计时器，然后我们需要从 interval 函数中返回计时器，最后每当用户登录时，我们需要检查计时器是否存在，如果存在，则删除它并创建一个新的计时器</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="3e0c" class="mt lm in mp b gy mu mv l mw mx">const startLogOutTimer = function () {</span><span id="d6e5" class="mt lm in mp b gy my mv l mw mx">…</span><span id="16ca" class="mt lm in mp b gy my mv l mw mx">return timer;</span><span id="ae47" class="mt lm in mp b gy my mv l mw mx">};</span><span id="aadb" class="mt lm in mp b gy my mv l mw mx">let timer;</span><span id="cb1d" class="mt lm in mp b gy my mv l mw mx">btnLogin.addEventListener(‘click’, function (e) {</span><span id="e185" class="mt lm in mp b gy my mv l mw mx">…</span><span id="0f22" class="mt lm in mp b gy my mv l mw mx">//Start the timer</span><span id="c241" class="mt lm in mp b gy my mv l mw mx">if (timer) clearInterval(timer);</span><span id="70e1" class="mt lm in mp b gy my mv l mw mx">timer = startLogOutTimer();</span><span id="bcff" class="mt lm in mp b gy my mv l mw mx">}</span><span id="b475" class="mt lm in mp b gy my mv l mw mx">});</span></pre></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="d26e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://medium.com/@barisbll/the-complete-js-notes-1-36ea76e326b3" rel="noopener"> <em class="ky">见本 js 笔记线程第一篇！</em>T3】</a></p><p id="ea89" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://medium.com/@barisbll/the-complete-js-notes-14-numbers-33fa369fbb77" rel="noopener"> <em class="ky">见本 js 笔记的上一篇帖子！</em> </a></p><p id="cc08" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://medium.com/@barisbll/the-complete-js-notes-16-dom-1-cc5c1c47086d" rel="noopener"> <em class="ky">见本 js 笔记线程下篇！</em>T11】</a></p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="869e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://twitter.com/barisbll_dev" rel="noopener ugc nofollow" target="_blank"> <em class="ky">在 twitter 上关注我获取甜蜜内容</em> </a> <em class="ky"> </em>😘</p><p id="3c04" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">在</em><a class="ae jz" href="https://blog.devgenius.io/" rel="noopener ugc nofollow" target="_blank"><em class="ky">Dev Genius</em></a>阅读我和许多其他伟大的科技博客作者</p></div></div>    
</body>
</html>