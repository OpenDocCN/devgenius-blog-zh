<html>
<head>
<title>How do differences in Promise chains and Async/Await affect your code logic?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">承诺链和Async/Await中的差异如何影响您的代码逻辑？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-do-differences-in-promise-chains-and-async-await-affect-your-code-logic-b85aeb566ebb?source=collection_archive---------2-----------------------#2020-07-22">https://blog.devgenius.io/how-do-differences-in-promise-chains-and-async-await-affect-your-code-logic-b85aeb566ebb?source=collection_archive---------2-----------------------#2020-07-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><a href="http://www.dltlabs.com"><div class="gh gi jn"><img src="../Images/9df7b48a8c9c0020e11645aef14dd5d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8t6SIAsWIO8CNw1_4Yq5tw.png"/></div></a></figure><p id="c615" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">承诺链和<strong class="jw ir">异步/等待</strong>都是建立在承诺之上的。它们之间的语法差异会对代码的逻辑产生真正的影响。今天我们用一个例子来理解这个。</p><p id="5097" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我们的例子中，我们需要根据使用的输入操作符来确定一个算术结果。</p><p id="c793" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">下面的函数返回我们正在寻找的算术结果。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi ks"><img src="../Images/0772cb294ea4b5b87eca2ce9c146874e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*9B7KIYjuBpxMZBnNxakyww.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">用一个函数解决我们的数学问题| <a class="ae lb" href="http://www.dltlabs.com" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="ccd4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在，让我们使用<strong class="jw ir">承诺链</strong>调用上面的函数来获得示例的解决方案。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/e26b3442937a806c7b625aba7175689b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*yMlYurkDK4TPPT-0hv2FYQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">使用承诺链获得我们的结果| <a class="ae lb" href="http://www.dltlabs.com" rel="noopener ugc nofollow" target="_blank">来源</a></figcaption></figure><p id="3f80" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">现在让我们使用<strong class="jw ir"> async/await </strong>来做同样的事情。</p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi ks"><img src="../Images/cfccc6afe1ee8904b1f779bcb6119f67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*fjGLs3_vZY5WJ7xARCfcyQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">使用Async/await获取我们的结果| <a class="ae lb" href="http://www.dltlabs.com" rel="noopener ugc nofollow" target="_blank"> Source </a></figcaption></figure><p id="7a3d" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="ld">请注意——此处使用的示例经过简化，以便于理解。在现实世界中，这将是一个I/O操作。</em></p></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><h1 id="8fff" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">观察</h1><p id="8c5f" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">在上面的例子中我们观察到了什么？(<em class="ld">下面的点与上面</em>中的数字标记相对应)</p><h2 id="6d83" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kf mt mu lz kj mv mw md kn mx my mh mz bi translated"><strong class="ak"> 1。逻辑流程</strong></h2><p id="6423" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">承诺和异步/等待的逻辑流程非常相似。仔细观察，我们注意到这两点</p><blockquote class="na nb nc"><p id="4afb" class="ju jv ld jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated">承诺链:</p><p id="929d" class="ju jv ld jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated">然后-&gt;抓住-&gt;最后。</p></blockquote><p id="fe0a" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">和</p><blockquote class="na nb nc"><p id="f283" class="ju jv ld jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated">异步/等待:</p><p id="7419" class="ju jv ld jw b jx jy jz ka kb kc kd ke nd kg kh ki ne kk kl km nf ko kp kq kr ij bi translated">尝试-&gt;捕捉-&gt;最后。</p></blockquote><h2 id="e312" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kf mt mu lz kj mv mw md kn mx my mh mz bi translated">2.范围</h2><p id="25c4" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">在<em class="ld">承诺</em>中，只有承诺链是异步的，而在async/await中，整个<em class="ld">包装函数都是异步的。</em></p><h2 id="c14d" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kf mt mu lz kj mv mw md kn mx my mh mz bi translated"><strong class="ak"> 3。错误处理</strong></h2><p id="57f4" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">Async/await可以用try/catch处理同步和异步错误。另一方面，在承诺中，我们必须在承诺链上添加一个catch处理程序来处理异步错误。</p><p id="8f68" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">在我们的promise链中省略catch处理程序将会导致无法处理异步错误。</p><h2 id="d3b1" class="mo lm iq bd ln mp mq dn lr mr ms dp lv kf mt mu lz kj mv mw md kn mx my mh mz bi translated"><strong class="ak"> 4。代码可读性</strong></h2><p id="2f98" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">看看我们的两个解决方案，我们使用async/await节省了相当多的代码，产生了更干净、更可读的代码。用<em class="ld"> Promise.all()处理多个承诺的时候我们也能感同身受。</em></p><figure class="kt ku kv kw gt jr gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/46e0acaeb9502ccc81225757ae3b9288.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*h3XoRNSY9Jkk9cdfEcwy9A.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">我们使用async/await | <a class="ae lb" href="http://www.dltlabs.com" rel="noopener ugc nofollow" target="_blank"> Source </a>节省了大量代码</figcaption></figure></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><h1 id="00d7" class="ll lm iq bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><strong class="ak">总结</strong></h1><p id="329a" class="pw-post-body-paragraph ju jv iq jw b jx mj jz ka kb mk kd ke kf ml kh ki kj mm kl km kn mn kp kq kr ij bi translated">Async/await应该是你的首选，因为它给你一种异步代码的同步感觉，特别是当你处理复杂的场景时。</p><p id="7f95" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">感谢您的阅读！</p><p id="9574" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><em class="ld">作者——安吉雷迪·杰蒂，DLT实验室</em></p><p id="a8e7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><strong class="jw ir">关于作者:</strong> <em class="ld">安吉雷迪</em>是一名热衷于学习新事物的Node.js开发者。目前，他与ASIK团队合作，致力于ASIK认证、同步服务。</p></div><div class="ab cl le lf hu lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ij ik il im in"><figure class="kt ku kv kw gt jr gh gi paragraph-image"><a href="http://www.dltlabs.com"><div class="gh gi nh"><img src="../Images/f41ea60525fb0b69dd99980443c86cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/0*ZlSEu4Gvsz6y7Mvs.png"/></div></a></figure></div></div>    
</body>
</html>