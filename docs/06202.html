<html>
<head>
<title>Django and HTMX Part 2 (periodic refreshing)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django å’Œ HTMX ç¬¬ 2 éƒ¨åˆ†(å®šæœŸåˆ·æ–°)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/django-and-htmx-part-2-periodic-refreshing-768cc059a06d?source=collection_archive---------3-----------------------#2021-12-21">https://blog.devgenius.io/django-and-htmx-part-2-periodic-refreshing-768cc059a06d?source=collection_archive---------3-----------------------#2021-12-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6774b6ee1fc12ca47b3624b26c95e552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gBFHyGTbW0qSilp-"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">ç…§ç‰‡ç”±<a class="ae jz" href="https://unsplash.com/@nick604?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">å°¼å…‹å†²</a>åœ¨<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„</figcaption></figure><p id="c6b4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ‰€ä»¥åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ HTMX åˆ›å»ºä¸€ä¸ªç®€å•çš„<em class="ky">æŒ‰é’®ï¼Œæ¯”å¦‚</em>æŒ‰é’®ï¼Œè€Œä¸éœ€è¦åˆ·æ–°é¡µé¢ï¼Œä»è€Œé¿å…ä½¿ç”¨ä»»ä½• JavaScriptã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³å±•ç¤ºå¦‚ä½•å®šæœŸä» API åŠ è½½æ•°æ®ã€‚è¿™åœ¨å¯èƒ½æ˜¾ç¤ºå®æ—¶å˜åŒ–æ•°æ®(å¦‚è´§å¸å˜åŒ–)çš„ç½‘ç«™ä¸Šéå¸¸æœ‰ç”¨ã€‚HTMX å†æ¬¡è½»æ¾å¸®åŠ©æ„å»º Django äº’åŠ¨ç½‘ç«™ï¼Œæ— éœ€å‰ç«¯ JavaScript çŸ¥è¯†ã€‚</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="bc17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">é€šè¿‡å¿«é€Ÿæœç´¢ï¼Œæˆ‘å‘ç° Coindesk æœ‰ä¸€ä¸ªä¸éœ€è¦æ³¨å†Œç çš„ APIã€‚</p><p id="07e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä¸ä¼šä»å¤´å¼€å§‹è®²è¿°å¦‚ä½•æ„å»º Django åº”ç”¨ç¨‹åºã€‚è¿™å·²ç»åœ¨ç¬¬ 1 éƒ¨åˆ†ä¸­å®Œæˆäº†ã€‚ç›¸åï¼Œæˆ‘åªä¼šæåˆ°â€¦</p><ul class=""><li id="0821" class="lg lh in kc b kd ke kh ki kl li kp lj kt lk kx ll lm ln lo bi translated">æˆ‘åˆ›å»ºäº†ä¸€ä¸ªåä¸º core çš„ Django é¡¹ç›®</li><li id="58cb" class="lg lh in kc b kd lp kh lq kl lr kp ls kt lt kx ll lm ln lo bi translated">å¹¶åˆ›å»ºäº†ä¸€ä¸ªåä¸º post çš„åº”ç”¨ç¨‹åºã€‚(è¿™æ¬¾åº”ç”¨å…¶å®å¹¶ä¸éœ€è¦ã€‚æˆ‘çŒœæ˜¯ä¹ æƒ¯ğŸ¤·ğŸ½â€â™‚ï¸ )</li></ul><p id="f8f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘å®é™…ä¸Šæ²¡æœ‰æ·»åŠ ä»»ä½•æ¨¡å‹ï¼Œå› ä¸ºæˆ‘ä¸éœ€è¦ä»»ä½•æ¨¡å‹æ¥æ¼”ç¤ºã€‚</p><p id="ca3e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä½ å¯ä»¥ä»æˆ‘çš„<a class="ae jz" href="https://github.com/bitFez/htmx_guide_2-periodic_refreshing" rel="noopener ugc nofollow" target="_blank"> Github repo è¿™é‡Œ</a>æ‰¾åˆ°å¹¶å…‹éš†è¿™ä¸ªé¡¹ç›®ã€‚</p><p id="cab7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">é¦–å…ˆï¼Œæˆ‘ç®€å•åœ°æŒ‡å‘äº†æ¥è‡ª<em class="ky">æ ¸å¿ƒ</em> urls.py çš„<em class="ky">å¸–å­åº”ç”¨</em>ä¸­çš„ urls.pyã€‚</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="b325" class="md me in lz b gy mf mg l mh mi"># core urls.py<br/>urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('', include('post.urls')),<br/>]</span></pre><p id="7e87" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨<em class="ky">è´´å§ app </em> urls.py ä¸­ï¼Œæˆ‘åªæœ‰ä¸€ä¸ªç½‘å€è·¯å¾„ã€‚è¿™åªæ˜¯æŒ‡å‘ä¸»é¡µã€‚</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="2f6a" class="md me in lz b gy mf mg l mh mi"># post urls.py<br/>from . import views</span><span id="0baa" class="md me in lz b gy mj mg l mh mi">urlpatterns = [<br/>    path('', views.index, name='home'),<br/>]</span></pre><p id="1d72" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç°åœ¨åœ¨<em class="ky">è´´å§ app </em> views.py æ–‡ä»¶ä¸­ï¼ŒçœŸçš„åªæœ‰ä¸€ä¸ªåŠŸèƒ½ã€‚requirements.txt æ–‡ä»¶ä¸­çš„ä¸€ä¸ªä¾èµ–é¡¹æ˜¯æˆ‘å·²ç»ä» PyPi åº“å®‰è£…äº†<a class="ae jz" href="https://pypi.org/project/django-htmx/" rel="noopener ugc nofollow" target="_blank"> Django-htmx æ‰©å±•ï¼Œå®ƒå…è®¸ä»åç«¯è°ƒç”¨ htmx æ‰©å±•ã€‚æ‚¨å¯ä»¥åœ¨ç¬¬ 17 è¡Œçœ‹åˆ°ï¼Œæ£€æŸ¥å‡½æ•°è°ƒç”¨æ˜¯å¦æ˜¯ htmx è¯·æ±‚ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆåªæœ‰éƒ¨åˆ†å°†è¢«è°ƒç”¨ï¼Œä»¥ä¾¿ç®€å•åœ°åˆ·æ–° API æ•°æ®ï¼Œè€Œä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</a></p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="7253" class="md me in lz b gy mf mg l mh mi">from django.shortcuts import render<br/>import requests # this is for making web requests for API<br/>import json # For parsing API json data</span><span id="4822" class="md me in lz b gy mj mg l mh mi">def index(request):<br/>  response = requests.get('<a class="ae jz" href="https://api.coindesk.com/v1/bpi/currentprice.json'" rel="noopener ugc nofollow" target="_blank">https://api.coindesk.com/v1/bpi/currentprice.json'</a>) # This is the coindesk REST API call<br/>  data = response.json()</span><span id="6940" class="md me in lz b gy mj mg l mh mi"># The following lines extract data from the API response.<br/>  time = data["time"]["updated"]<br/>  usd = data["bpi"]["USD"]["rate"]<br/>  gbp = data["bpi"]["GBP"]["rate"]<br/>  eur = data["bpi"]["EUR"]["rate"]</span><span id="08a2" class="md me in lz b gy mj mg l mh mi">context = {'usd':usd, 'gbp':gbp, 'eur':eur, 'time':time}</span><span id="8b46" class="md me in lz b gy mj mg l mh mi">if request.htmx:<br/>    return render(request, 'post/partials/bitcoin.html', context)<br/>  else:<br/>    return render(request, 'post/index.html', context)</span></pre><p id="eaf2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¸‹é¢æ˜¯â€œindex.htmlâ€æ–‡ä»¶ã€‚è¿™é‡Œæœ‰ä¸‰ä¸ªè¦ç‚¹ã€‚</p><ul class=""><li id="d0ee" class="lg lh in kc b kd ke kh ki kl li kp lj kt lk kx ll lm ln lo bi translated">é¦–å…ˆï¼Œdiv æ ‡ç­¾åŒ…å« 3 ä¸ª htmx æ ‡ç­¾ã€‚<br/> - <code class="fe mk ml mm lz b">hx-get</code>è°ƒç”¨ç´¢å¼•è§†å›¾å‡½æ•°ï¼Œåˆ·æ–°é¡µé¢ã€‚<br/> - <code class="fe mk ml mm lz b">hx-trigger</code>å‘Šè¯‰ htmx æ¯éš” 10 ç§’è§¦å‘è°ƒç”¨<em class="ky"><br/>-<code class="fe mk ml mm lz b">hx-swap</code>innerHTML å‘Šè¯‰ HTMX åªäº¤æ¢å½“å‰<code class="fe mk ml mm lz b">div</code>å†…çš„é¡µé¢éƒ¨åˆ†</em></li><li id="3a99" class="lg lh in kc b kd lp kh lq kl lr kp ls kt lt kx ll lm ln lo bi translated">ç»“æŸ<code class="fe mk ml mm lz b">body</code>æ ‡ç­¾ä¸‹çš„<code class="fe mk ml mm lz b">script</code>æ ‡ç­¾éœ€è¦è°ƒç”¨ htmx <code class="fe mk ml mm lz b">hx</code>æ ‡ç­¾ã€‚æ²¡æœ‰è¿™äº›é¡µé¢åˆ·æ–°è°ƒç”¨å°†ä¸ä¼šè¿›è¡Œã€‚</li><li id="c8c2" class="lg lh in kc b kd lp kh lq kl lr kp ls kt lt kx ll lm ln lo bi translated">æœ€åï¼Œ<code class="fe mk ml mm lz b">{% include â€¦ %}</code> Django æ ‡ç­¾åŠ è½½éƒ¨åˆ†èŠ‚ï¼Œè¿™å°†ä¿æŒæ¯ 10 ç§’é‡æ–°åŠ è½½ä¸€æ¬¡<code class="fe mk ml mm lz b">hx-trigger</code></li></ul><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="946e" class="md me in lz b gy mf mg l mh mi">&lt;html&gt;<br/>  &lt;body&gt;</span><span id="5c3c" class="md me in lz b gy mj mg l mh mi">    &lt;h1&gt;Latest Bitcoin Price Updates&lt;/h1&gt;</span><span id="ddb5" class="md me in lz b gy mj mg l mh mi">    &lt;div id="btc" hx-get="{% url 'home' %}" hx-trigger="every 10s" hx-swap="innerHTML"&gt;     <br/>     {% include 'post/partials/bitcoin.html' %}<br/>    &lt;/div&gt;<br/>  &lt;/body&gt;</span><span id="99ca" class="md me in lz b gy mj mg l mh mi">  &lt;script src="https://unpkg.com/htmx.org@1.6.1"&gt;&lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="535c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™é‡Œçš„æœ€åä¸€é¡¹æ˜¯éƒ¨åˆ† HTML éƒ¨åˆ†ï¼Œå®ƒå°†æ¯ 10 ç§’é‡æ–°åŠ è½½ä¸€æ¬¡ã€‚</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="755b" class="md me in lz b gy mf mg l mh mi">&lt;div&gt;<br/>  &lt;small&gt;(last updated {{time}})&lt;/small&gt;<br/>  &lt;p&gt;USD: {{usd}}&lt;/p&gt;<br/>  &lt;p&gt;GBP: {{gbp}}&lt;/p&gt;<br/>  &lt;p&gt;EUR: {{eur}}&lt;/p&gt;<br/>&lt;/div&gt;</span></pre><figure class="lu lv lw lx gt jo gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/6ea4ab5143da704b0c0e6e6eedab1566.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*Sso2xHbH9jARJ4XG81zICg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">è¿™æ˜¯ç½‘é¡µçš„æˆªå›¾ã€‚å®ƒè¿˜ç›´æ¥ä» API æ›´æ–°ä¸Šæ¬¡æ›´æ–°æ—¶é—´</figcaption></figure><h2 id="6437" class="md me in bd mo mp mq dn mr ms mt dp mu kl mv mw mx kp my mz na kt nb nc nd ne bi translated">å°±æ˜¯è¿™æ ·ï¼</h2><p id="2ff3" class="pw-post-body-paragraph ka kb in kc b kd nf kf kg kh ng kj kk kl nh kn ko kp ni kr ks kt nj kv kw kx ig bi translated">å¦‚æœä½ è§‰å¾—è¿™ä¸ªæœ‰ç”¨ï¼Œè¯·ç»™å®ƒä¸€äº›ğŸ‘&amp;è€ƒè™‘ç»™æˆ‘æä¾›ä¸€äº›å’–å•¡<a class="ae jz" href="https://ko-fi.com/bitfez" rel="noopener ugc nofollow" target="_blank">https://ko-fi.com/bitfez</a>ã€‚è¿™è®©æˆ‘æœ‰åŠ¨åŠ›å»å†™æ›´å¤šç®€å•çš„å¸–å­ã€‚</p></div></div>    
</body>
</html>