<html>
<head>
<title>Day 13 of Game Dev: Communication in between scripts using GetComponent()!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">游戏开发的第 13 天:使用 GetComponent()在脚本之间进行通信！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/day-13-of-game-dev-communication-in-between-scripts-using-getcomponent-349e837c5e6b?source=collection_archive---------16-----------------------#2022-04-18">https://blog.devgenius.io/day-13-of-game-dev-communication-in-between-scripts-using-getcomponent-349e837c5e6b?source=collection_archive---------16-----------------------#2022-04-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0715" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">目的:</strong>通过使用<strong class="jm io"> GetComponent() </strong>进行通信来修改或使用另一个脚本中的数据。</p><p id="a447" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将在一个 2D 银河射击游戏的上下文中使用<strong class="jm io"> GetComponent() </strong>。当然，它也可以很容易地应用到您的项目中，这里有一个 GetComponent<strong class="jm io">()</strong>上官方<a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Component.GetComponent.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> Unity API </strong> <strong class="jm io">的链接，这对我帮助很大。</strong></a></p><p id="8291" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">重要！请记住，当你在检查器中查看一个游戏对象时，你会看到变换、碰撞器、刚体、脚本或其他任何东西，它们都是组件。例如，如果你想访问另一个对象的脚本，你可以使用<strong class="jm io"> GetComponent() </strong>并将其保存到你的脚本变量中。这是这里的基本概念。请记住，您应该能够在另一个游戏对象拥有的、您需要访问的任何组件上使用<strong class="jm io"> GetComponent() </strong>。</strong></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/852f69fc8488e9741bd7604fa07c63c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:564/1*95nigTLB8Nrij3nx860ZMA.gif"/></div></figure><p id="ed75" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如你在这里看到的，我在<strong class="jm io">玩家脚本</strong>上有一个<strong class="jm io">伤害()</strong>方法。想让<strong class="jm io">敌方脚本</strong>在敌方与玩家碰撞时调用<strong class="jm io">伤害()</strong>方法。<strong class="jm io">敌方脚本</strong>要如何调用另一个脚本拥有的方法？简单，使用<strong class="jm io"> GetComponent() </strong>允许脚本进行通信(共享数据)。</p><p id="856e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io">敌方脚本</strong>中的<strong class="jm io"> OnTriggerEnter() </strong>方法将生成一个名为 player 的 Player 类型变量。然后我会使用<strong class="jm io"> GetComponent() </strong>将它“=”设置为<strong class="jm io">播放器脚本</strong>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/17d2538d7770ecd25db5c665c3e2944d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/1*VT9JFN7a5I3qRhxOVHJOCQ.gif"/></div></figure><p id="6e06" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为我是从<strong class="jm io"> OnTriggerEnter()方法</strong>中调用它的，所以我选择以这种方式使用<strong class="jm io"> GetComponent() </strong>。要从游戏对象中获取组件，你首先需要知道要从哪个游戏对象中获取组件。在我的例子中，在<strong class="jm io"> OnTriggerEnter() </strong>中，每当我与“<strong class="jm io"> other </strong>”游戏对象发生冲突时，我已经有了对它的引用。但是有时你会在碰撞或触发方法之外调用<strong class="jm io"> GetComponent() </strong>，所以你可能不得不用另一种方式来获得你想要的游戏对象组件。喜欢用<a class="ae ki" href="https://docs.unity3d.com/ScriptReference/GameObject.Find.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> GameObject。Find() </strong> </a> <strong class="jm io"> </strong>或<a class="ae ki" href="https://docs.unity3d.com/ScriptReference/GameObject.FindWithTag.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> GameObject。FindWithTag </strong> </a> <strong class="jm io"> </strong>然后使用游戏对象引用调用<strong class="jm io"> GetComponent() </strong>。</p><p id="8f1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于您的具体实现，我会阅读 API 并以最适合您的方式调用该方法。无论哪种方式，基本思想都是创建一个 Player 类型的变量，并使用<strong class="jm io"> GetComponent() </strong>将它" = "设置为<strong class="jm io">播放器脚本</strong>。</p><p id="55c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为我们现在引用了保存在我们的玩家变量中的玩家脚本，所以我们可以访问某些东西，在这个例子中是方法。如果这个方法被设置为 private，我们将无法访问它，但是因为它被设置为 public，我们可以从<strong class="jm io">敌方脚本</strong>中调用<strong class="jm io"> Damage() </strong>方法，如下所示:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ks"><img src="../Images/f99c36200fbf26206a55fd80d360c218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/1*I4wLabX2scGrEUvzlIsHmg.gif"/></div></div></figure><p id="99bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的代码意思是当敌人的‘对撞机’进入玩家的对撞机或者反之，我们会从<strong class="jm io">玩家脚本</strong>中调用<strong class="jm io"> Damage() </strong>方法然后敌人就会被消灭。如果你之前没有注意到，玩家有 3 条生命，并且处理自我毁灭的代码。我们只需要从<strong class="jm io">敌方脚本</strong>中调用<strong class="jm io">伤害()</strong>方法。</p><p id="d18f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">厉害！这就是我们如何使用<strong class="jm io"> GetComponent() </strong>从其他脚本中访问数据！我希望这能帮助你，如果你有任何问题，请随时提问！</p></div></div>    
</body>
</html>