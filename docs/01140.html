<html>
<head>
<title>Source Code Disclosure via Exposed .git Folder</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过暴露的源代码泄露。git 文件夹</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/source-code-disclosure-via-exposed-git-folder-24993c7561f1?source=collection_archive---------2-----------------------#2020-06-25">https://blog.devgenius.io/source-code-disclosure-via-exposed-git-folder-24993c7561f1?source=collection_archive---------2-----------------------#2020-06-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1449e75ec9aaae0d4eb356ad923dc7eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*a5V_m8rUulzKl4a6"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">潘卡杰·帕特尔在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="6e12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">问候！所有人，</p><p id="5870" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你们都过得很好。今天我要写关于源代码公开的文章。网站/工作环境中的 git 文件夹。这对于程序员/web 开发人员了解和保护他们开发环境中的源代码也很重要。所以，没有任何拖延，让我们直奔主题。现在，第一个问题出现了，为什么你应该关心或了解你的网站/工作环境中的打开 git 文件夹？因为:</p><ol class=""><li id="6ae6" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">很容易察觉。</li><li id="84d7" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">分析源代码可以揭示其他更严重的漏洞。</li><li id="b543" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">任何人都可以出于恶意使用你的源代码，给你造成经济/名誉损失。</li><li id="16ec" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">查找包含敏感信息(如凭据、令牌、新端点等)的文件</li></ol><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/d01d45c2d47a7303f706bd3db6a857d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*IFTDcIAVvGESK7X0lYPvjg.png"/></div></figure><h2 id="1f1b" class="lu lv iq bd lw lx ly dn lz ma mb dp mc ko md me mf ks mg mh mi kw mj mk ml mm bi translated">什么是。git 文件夹？</h2><p id="9e5a" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">我在这里假设你知道 Git，如果不知道，那么检查这里的<a class="ae kc" href="https://en.wikipedia.org/wiki/Git" rel="noopener ugc nofollow" target="_blank">和这里的</a><a class="ae kc" href="https://www.quora.com/What-is-Git-and-why-should-I-use-it?share=1" rel="noopener ugc nofollow" target="_blank"/>。那么，什么是. git 文件夹呢？根据<a class="ae kc" href="https://stackoverflow.com/questions/29217859/what-is-the-git-folder" rel="noopener ugc nofollow" target="_blank"> stackoverflow </a>的说法，它是一个文件夹，包含了你的项目在版本控制中所必需的所有信息，以及关于提交、远程存储库地址等所有信息。所有这些都在这个文件夹中。它还包含一个存储提交历史的日志，以便您可以回滚到历史。</p><h2 id="cf34" class="lu lv iq bd lw lx ly dn lz ma mb dp mc ko md me mf ks mg mh mi kw mj mk ml mm bi translated">为什么在 Web 开发中使用 Git？</h2><p id="f6b5" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">当你在自己的电脑上创建网站，并使用 Git 将这些文件的副本推送到 web 服务器时，通常会用到 Git。如果您的计算机发生任何问题，您在 web 服务器上仍有一份完整的副本。然后，您可以配置此 web 服务器存储库，将实时更改推送到您的网站。这为开发人员提供了优势，使他们易于开发。此外，您可能想要检查<a class="ae kc" href="https://www.webdesignerdepot.com/2009/03/intro-to-git-for-web-designers/" rel="noopener ugc nofollow" target="_blank">这个</a>。暴露 git 文件夹的威胁在开始时已经讨论过了(参见“为什么你应该关心或了解你的网站/工作环境中的开放 git 文件夹？”)</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/4778f966341f5661a27ae106f2f0e473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LRWwTvgsSnBFEa0UpAVS8Q.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">让乐趣开始；)</figcaption></figure><h2 id="eda2" class="lu lv iq bd lw lx ly dn lz ma mb dp mc ko md me mf ks mg mh mi kw mj mk ml mm bi translated">真正有趣的时间到了:</h2><p id="a36d" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">你记得我说过很容易找到一个暴露的。git 文件夹？但是怎么做呢？让我们看看。请注意，我将在本文中使用三种不同的谷歌呆子，它们可以在谷歌黑客数据库(GHDB)上找到<a class="ae kc" href="https://www.exploit-db.com/ghdb/3988" rel="noopener ugc nofollow" target="_blank">这里</a>，这里<a class="ae kc" href="https://www.exploit-db.com/ghdb/4914" rel="noopener ugc nofollow" target="_blank">这里</a>，这里<a class="ae kc" href="https://www.exploit-db.com/ghdb/5228" rel="noopener ugc nofollow" target="_blank">这里</a>。但是，在继续之前，请注意:</p><ol class=""><li id="d525" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">如果你得到一个<strong class="kf ir"> 404 错误</strong>，那么。服务器上不存在 git/但是如果你得到一个<strong class="kf ir"> 403 禁止错误</strong>，它就存在。如果在服务器上禁用了目录列表，将无法直接访问文件夹的根目录。</li><li id="d102" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">如果幸运的话，并且启用了目录列表，那么您可以直接浏览。git 文件夹的内容如下图所示。</li><li id="1dba" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">对某个网站使用 Google dorks，看看它是否泄露了源代码。</li><li id="b563" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">这个指南也可以被各种 bug 赏金项目中的 bug 猎人使用。</li></ol><ul class=""><li id="b94c" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la mt lh li lj bi translated">通过手动浏览来确认错误。git 文件夹。</li><li id="78ea" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la mt lh li lj bi translated">确认。git 文件夹的内容是可访问的(即使。git/本身不是)通过尝试打开这些不同的通用文件名，例如:</li></ul><p id="5a3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://example.com/.git/HEAD" rel="noopener ugc nofollow" target="_blank">https://example.com/.git/HEAD</a></p><p id="9fa3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://example.com/.git/logs/HEAD" rel="noopener ugc nofollow" target="_blank">https://example.com/.git/logs/HEAD</a></p><p id="51d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://example.com/.git/index" rel="noopener ugc nofollow" target="_blank">https://example.com/.git/index</a></p><p id="4d59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://example.com/.git/config" rel="noopener ugc nofollow" target="_blank">https://example.com/git/config</a></p><ul class=""><li id="fc0b" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la mt lh li lj bi translated">确认 Git 文件夹的存在并启用目录列表后，只需使用以下命令使用<em class="mu"> wget </em>下载即可:</li></ul><pre class="lq lr ls lt gt mv mw mx my aw mz bi"><span id="c578" class="lu lv iq mw b gy na nb l nc nd">wget -r http://www.example.com/.git/</span></pre><p id="2cea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，打开你选择的网络浏览器，打开 google.com，使用本文提到的谷歌傻瓜。</p><p id="be2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Google Dork 1 </strong> → <em class="mu">显示可公开访问的 Git 目录，并允许直接访问代码。</em></p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/e087152657144b1f716690edd7f3ee3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B6pNgvJCkObb3w7nV6gcLA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">可公开访问的 Git 目录</figcaption></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/7e2129aae2e9a9818ffc75e45dc1d65c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0X9sQnKCUqtHmQkr152vJw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">目录列表已启用，并允许直接访问。git 目录。</figcaption></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/24ffbaa94078eb0b240ffd5e5c640681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fO6xF-DJDKV5Th1VO-wZYQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">直接访问。git 目录内容</figcaption></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/7319a1418d1143e1665564b6aa71c4bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lMYhEApVKC-fu9KFnA-D6Q.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">web 应用程序的更新流程脚本的代码</figcaption></figure><p id="f32c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Google Dork 2 </strong> → <em class="mu">包含与目标用作 IDE 的内容相关的信息，以及许多其他与开发相关的软件。非常适合足迹。</em></p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/063932950bc0148aa78372616ec2d82d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8hy__rYB0-B39fYvGJYXSA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">各种网站提供关于他们开发环境的信息。</figcaption></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/2903f9263fa72c9ead1af0ea1e00fb3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dYLpV4zl5stPMaIVkRvB4w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">注意 db/文件夹</figcaption></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nk"><img src="../Images/0f92c089a46a258f9dcf62a9bacaf33d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vs2Any5W8DhMQ2Bl9EzvmQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">启用目录列表和访问。git 文件夹提供对 SQLite 数据库的访问。</figcaption></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/e22c16d3a01ec65f656f8c68f583f0b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5bXZYwxGLaiG5jEKedbsfQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">其他有用的信息。</figcaption></figure><p id="535e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Google Dork 3 </strong> → <em class="mu">服务于 git 存储库的 web 服务器。这一潜在缺陷可用于从 web 服务器下载内容，否则这些内容可能是私有的。</em></p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/31b8febf23d042507284218c880ebcd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ocmqF3Uu1wR0BQQc9Gz8Bw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">注意那些被公开泄露的重要文件夹。</figcaption></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/cdf8e9a8c91dcd3c565174bfdc8ae5b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mmeqa_m_eqv1BqtAnLTlGQ.png"/></div></div></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nn"><img src="../Images/ff80e8a29710d903068781955d0ec426.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CCv_5aTHugyMeLrm1skRkg.png"/></div></div></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/5c8835d507e355f53fbc0871f24f6d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDyE3002No_njDdmXB05Og.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">可以访问的各种脚本。</figcaption></figure><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi no"><img src="../Images/499c4fec3f6224f81bdfae7cedbbdaf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P4v4D0Bxhr4bUQR9c33foQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">可以下载的材料/脚本。</figcaption></figure><h2 id="e484" class="lu lv iq bd lw lx ly dn lz ma mb dp mc ko md me mf ks mg mh mi kw mj mk ml mm bi translated">让我们来实现自动化:</h2><p id="bd3f" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">这是有趣的部分！浏览。git/ manually 有利于概念验证，但也是一项繁琐的工作。如果您想要检索尽可能多的文件，即使禁用了目录列表，要使用的工具是<a class="ae kc" href="https://github.com/internetwache/GitTools" rel="noopener ugc nofollow" target="_blank"> GitTools </a>。</p><ul class=""><li id="13b8" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la mt lh li lj bi translated">您必须手动分析本地存储库。</li></ul><h2 id="8aba" class="lu lv iq bd lw lx ly dn lz ma mb dp mc ko md me mf ks mg mh mi kw mj mk ml mm bi translated">Hackerone 报道:</h2><ol class=""><li id="0e4e" class="lb lc iq kf b kg mn kk mo ko np ks nq kw nr la lg lh li lj bi translated"><a class="ae kc" href="https://hackerone.com/reports/248693" rel="noopener ugc nofollow" target="_blank">https://hackerone.com/reports/248693</a></li><li id="17ea" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://hackerone.com/reports/173811" rel="noopener ugc nofollow" target="_blank">https://hackerone.com/reports/173811</a></li><li id="dfa7" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://hackerone.com/reports/218465" rel="noopener ugc nofollow" target="_blank">https://hackerone.com/reports/218465</a></li><li id="c3ef" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://hackerone.com/reports/221298" rel="noopener ugc nofollow" target="_blank">https://hackerone.com/reports/221298</a></li></ol><h2 id="7cbb" class="lu lv iq bd lw lx ly dn lz ma mb dp mc ko md me mf ks mg mh mi kw mj mk ml mm bi translated">缓解措施:</h2><ol class=""><li id="8ea5" class="lb lc iq kf b kg mn kk mo ko np ks nq kw nr la lg lh li lj bi translated">不要离开你的。git 文件夹在生产环境中！或者至少将它移出根目录。</li><li id="8395" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">通过禁用目录列表来阻止直接访问。</li></ol><ul class=""><li id="f096" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la mt lh li lj bi translated">当您设置规则来阻止对以“.”开头的文件和文件夹的访问时您应该考虑以下例外情况:</li></ul><p id="8ec2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Nginx:</p><p id="7dd5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ns nt nu mw b">location ~ /\.(?!well-known\/) {<br/>deny all;<br/>}<br/> <br/>Apache:<br/>&lt;Directory ~ "/\.(?!well-known\/)"&gt;<br/>Order deny,allow<br/>Deny from all<br/>&lt;/Directory&gt;</code></p><p id="93ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想了解激发这篇博文的更多研究，请看<a class="ae kc" href="https://lynt.cz/blog/global-scan-exposed-git-repos/" rel="noopener ugc nofollow" target="_blank">https://lynt.cz/blog/global-scan-exposed-git-repos/</a>。我希望你喜欢这篇博文。更多类似这样的精彩内容敬请期待。保持快乐。</p></div></div>    
</body>
</html>