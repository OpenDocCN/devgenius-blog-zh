<html>
<head>
<title>Creating and handling MongoDB Documents</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建和处理 MongoDB 文档</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-updating-and-deleting-mongodb-documents-94c12219783f?source=collection_archive---------11-----------------------#2022-01-19">https://blog.devgenius.io/creating-updating-and-deleting-mongodb-documents-94c12219783f?source=collection_archive---------11-----------------------#2022-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="a04c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated"><span class="l km kn ko bm kp kq kr ks kt di">在我的上一篇文章中，我提供了 MongoDB 的<a class="ae ku" href="https://medium.com/@ibtissam.makdoun/from-rdbms-to-non-relational-databases-119f4007b214" rel="noopener">简介。如果您还没有检查，我建议您继续进行快速扫描，以便于后续操作。</a></span></p><p id="f00e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在是时候弄脏我们手边的文件和收藏品了。在本教程中。我会告诉你怎么做。</p><ul class=""><li id="84b7" class="kv kw iq jp b jq jr ju jv jy kx kc ky kg kz kk la lb lc ld bi translated">创建 MongoDB 文档；</li><li id="a253" class="kv kw iq jp b jq le ju lf jy lg kc lh kg li kk la lb lc ld bi translated">查询文档；</li><li id="1eb7" class="kv kw iq jp b jq le ju lf jy lg kc lh kg li kk la lb lc ld bi translated">创建 MongoDB 集合；</li><li id="acc1" class="kv kw iq jp b jq le ju lf jy lg kc lh kg li kk la lb lc ld bi translated">MongoDB 中的数据类型。</li></ul><p id="0c49" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，我们开始马拉松吧。</p><h2 id="87d4" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">创建文档:</h2><p id="aefe" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">MongoDB 中的文档被简单地定义为存储在 JSON 中的字段-值对，类似于 BSON 格式，代表二进制 JSON。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi mh"><img src="../Images/a39a63acec08c4a0225df5aa4f2468dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U6qGP3aIARWJP-txwjwLPA.png"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">MongoDB 中的文档</figcaption></figure><p id="1bd8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">事实上，它们类似于数据库表中的行。</p><p id="ab82" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们发现如何创建文档并将它们保存在数据库中，同样，我们在这里关注 MongoDB Compass 的使用。如果你想要这个教程的命令行版本，你可以参考<a class="ae ku" href="https://www.youtube.com/watch?v=jIFU9b-TiGA" rel="noopener ugc nofollow" target="_blank">视频</a>。</p><p id="d1a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，让我们在文本编辑器中定义我们的文档:</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="e20f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，您可以使用它在 MongoDB 中创建一个文档。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mz my l"/></div></figure><p id="a2cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，文档已存储在您的收藏中，您可以通过以下方式轻松找到它:</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mz my l"/></div></figure><p id="500a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，您可以在查询的末尾添加漂亮的内容，以得到一个格式良好的文档。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><h2 id="eb5b" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">使用查找查询文档</h2><p id="f7b1" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">Find 是 MongoDB 中的基本注释之一。我们可以将其与 SQL 中的 SELECT *语句进行比较。使用 find 查询我们的文档和查找特定的数据非常容易。</p><p id="08b6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要在 MongoDB 中查找文档或查询集合，我们使用术语<a class="ae ku" href="https://docs.mongodb.com/manual/reference/command/find/" rel="noopener ugc nofollow" target="_blank">查找</a>。术语“查找”包括<em class="na">选择标准</em>和<em class="na">投影作为参数。</em></p><ul class=""><li id="a87f" class="kv kw iq jp b jq jr ju jv jy kx kc ky kg kz kk la lb lc ld bi translated"><strong class="jp ir">选择标准:</strong>指定要从集合中检索哪个文档。若要返回集合中的所有文档，请使用空文档({})。</li><li id="62d6" class="kv kw iq jp b jq le ju lf jy lg kc lh kg li kk la lb lc ld bi translated"><strong class="jp ir">投影:</strong>指定文档中符合选择条件的返回字段。</li></ul><p id="bd22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，如果我们想要集合中的所有文档，我们使用:</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="0bec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们想问一些具体的问题，比如我们之前插入的文档，我们可以使用:</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="ded5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们拿回文件:</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nb"><img src="../Images/a6e2b3b99ee04ae127428dc9a1be0bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*h0dRo6om2Gtgc_vDzhqlxQ.gif"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">按标题筛选文档</figcaption></figure><p id="f3a4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们也可以添加条件，如果我们想匹配一个以上的东西。例如我们也可以验证<em class="na">烹饪时间</em></p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nb"><img src="../Images/6bd2063f3f8aa40502427d7ed732191d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Z9MvsidAIKylEY8gdVlcrA.gif"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">按标题和烹饪时间过滤数据</figcaption></figure><p id="e536" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有时，文档可能包含比您想要的更多的信息，所以您需要指定或缩小您想要返回的字段。这就是为什么需要在 find 中提供第二个参数。所以我们可以使用:</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="08df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">查询中的一个代表真实。我们这样做，就像这样:</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div role="button" tabindex="0" class="mn mo di mp bf mq"><div class="gh gi nb"><img src="../Images/e2eeec0085c47f3e68c58d95d428e83c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BpBsAeO_83AkIbgfJvwcRA.gif"/></div></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">仅使用标题选择文档</figcaption></figure><p id="02c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们也可以排除字段，例如为了排除标题我们只将查询中的 1 改为 0。</p><p id="2cd2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有时，尤其是当用户或客户端插入数据时。它往往是混乱的，不尊重某种格式。因此，为了搜索文档，我们可能会错过一些文档，因为它们是用大写或小写字母书写的。所以我们需要运行一个不区分大小写的查询。这就是为什么 MongoDB 也使用正则表达式，使用<a class="ae ku" href="https://docs.mongodb.com/manual/reference/operator/query/regex/" rel="noopener ugc nofollow" target="_blank"> <em class="na">操作符$regex </em> </a>。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><h2 id="d084" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">数据类型 MongoDB:</h2><p id="c497" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">MongoDB 文档可以存储各种各样的数据类型，这通常使开发更容易。到目前为止，我们一直在处理文本字段和数字，这与关系数据库中的情况非常相似。但是，如果想要更大的灵活性呢？以这个食谱为例。如果你感谢它，食谱有很多结构和数据，我们可以在下面的图片中看到，并在我们的脑海中分类。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/6b26f987e1363f6354608d777cf00cc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*hoBDu3AmM8cUGecDkEE8GQ.png"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">配方文件示例</figcaption></figure><p id="241f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要保存此文档，我们可以复制所有这些文档，并将其作为文本粘贴到描述码中。但是，随后我们放松了粒度和选项，不知道以后如何处理我们的数据。比方说，我们想改变这个食谱的尺寸或份量。此时，如果我们将菜谱保存为文本，我们将有大量的重构工作要做。</p><p id="0167" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了 MongoDB，我们可以混合和匹配不同的数据类型，并按照图片上的样子存储菜谱。</p><p id="4241" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从指令开始，它们就像步骤和顺序问题，有点像下面的代码。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="bed9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，对于配料，我们可以将配方中的配料存储为:</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="4db7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如您所见，成分值是一个数组，但这次不是字符串数组，而是一个对象数组。你也可以看到它是一个客体的客体。</p><figure class="mi mj mk ml gt mm"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="b786" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，如果我们想通过命令行将这个文档插入 MongoDB，我们可以使用。</p><figure class="mi mj mk ml gt mm gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/0d3d03296df1c6c48bea0e875870c7c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*-wqiFrOeorYWN8q4Ka9NeQ.gif"/></div><figcaption class="mt mu gj gh gi mv mw bd b be z dk translated">在 MongoDB 中通过命令行插入文档</figcaption></figure><p id="a5c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">嗯，就这样吧！</p><p id="648d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在您知道了如何在 MongoDB 文档上创建和运行简单的查询。接下来我们将讨论如何使用操作符查询 MongoDB 文档。</p><p id="7760" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你喜欢这个内容，我邀请你关注我，并查看我的<a class="ae ku" href="https://www.youtube.com/channel/UCIW5oGyAJ6rwo91BDacDqlg" rel="noopener ugc nofollow" target="_blank"> YouTube </a>频道以获得更多教程。</p><p id="fda2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于我来说，我要煮一些我在写这篇教程时一直渴望的香辣虾和动物。</p><blockquote class="ne"><p id="12ee" class="nf ng iq bd nh ni nj nk nl nm nn kk dk translated">感谢您的时间，并保持安全！。</p></blockquote></div></div>    
</body>
</html>