<html>
<head>
<title>How do I parse JSON in Android?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在 Android 中解析 JSON？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-do-i-parse-json-in-android-aefd9a3f7954?source=collection_archive---------14-----------------------#2022-12-21">https://blog.devgenius.io/how-do-i-parse-json-in-android-aefd9a3f7954?source=collection_archive---------14-----------------------#2022-12-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/273685d92b0b588ab4b4b1babf009d8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*SjQA1uB5jcS8dQHfXXaV7A.jpeg"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">来源:谷歌</figcaption></figure><p id="9353" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">在 Android 中解析 JSON，可以使用</strong> <code class="fe kt ku kv kw b"><strong class="jx io">org.json</strong></code> <strong class="jx io">包，默认包含在 Android 操作系统中。</strong>下面是一个如何在 Android 中解析 JSON 字符串的例子:</p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="a69d" class="lf lg in kw b be lh li l lj lk">import org.json.JSONObject;<br/><br/>// ...<br/><br/>String jsonString = "{\"name\":\"John\", \"age\":30, \"city\":\"New York\"}";<br/><br/>try {<br/>    JSONObject json = new JSONObject(jsonString);<br/><br/>    String name = json.getString("name");<br/>    int age = json.getInt("age");<br/>    String city = json.getString("city");<br/>} catch (JSONException e) {<br/>    // handle exception<br/>}</span></pre><p id="1669" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个例子中，我们首先从<code class="fe kt ku kv kw b">org.json</code>包中导入<code class="fe kt ku kv kw b">JSONObject</code>类。然后，我们创建一个 JSON 字符串，并将其传递给<code class="fe kt ku kv kw b">JSONObject</code>构造函数，以创建一个新的 JSON 对象。然后，我们可以使用<code class="fe kt ku kv kw b">getString</code>和<code class="fe kt ku kv kw b">getInt</code>方法提取“姓名”、“年龄”和“城市”键的值。</p><p id="8273" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">将代码包装在 try-catch 块中很重要，因为如果 JSON 字符串无效，解析 JSON 会抛出</strong> <code class="fe kt ku kv kw b"><strong class="jx io">JSONException</strong></code> <strong class="jx io">。</strong></p><p id="a60f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这只是一个简单的例子，<code class="fe kt ku kv kw b">org.json</code>包提供了更多解析和操作 JSON 数据的方法。您可以在<code class="fe kt ku kv kw b">org.json</code>包的<a class="ae ll" href="https://developer.android.com/reference/org/json/package-summary" rel="noopener ugc nofollow" target="_blank"> JavaDocs </a>中找到更多信息。</p></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><p id="6a0a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是一个在 Android 中解析更复杂的 JSON 对象的例子:</p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="018d" class="lf lg in kw b be lh li l lj lk">import org.json.JSONObject;<br/><br/>// ...<br/><br/>String jsonString = "{\"employees\":[{\"firstName\":\"John\", \"lastName\":\"Doe\"}, {\"firstName\":\"Anna\", \"lastName\":\"Smith\"}, {\"firstName\":\"Peter\", \"lastName\":\"Jones\"}]}";<br/><br/>try {<br/>    JSONObject json = new JSONObject(jsonString);<br/>    JSONArray employees = json.getJSONArray("employees");<br/><br/>    for (int i = 0; i &lt; employees.length(); i++) {<br/>        JSONObject employee = employees.getJSONObject(i);<br/>        String firstName = employee.getString("firstName");<br/>        String lastName = employee.getString("lastName");<br/>        System.out.println(firstName + " " + lastName);<br/>    }<br/>} catch (JSONException e) {<br/>    // handle exception<br/>}</span></pre><p id="58f1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个例子中，JSON 对象包含一个 employee 对象数组，每个对象都有一个“firstName”和“lastName”字段。我们使用<code class="fe kt ku kv kw b">getJSONArray</code>方法提取数组，然后使用 for 循环迭代数组元素。对于每个元素，我们使用<code class="fe kt ku kv kw b">getString</code>方法提取“名字”和“姓氏”值。</p><p id="36fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这只是在 Android 中解析更复杂的 JSON 对象的一种方式。您可以根据需要使用<code class="fe kt ku kv kw b">org.json</code>包提供的各种方法来提取和操作数据。</p></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lt"><img src="../Images/bb7693f46b6d79742b76ce569ea34d4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lawmY5mSHevxZ0-buwL2Cw.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">来源:谷歌</figcaption></figure><p id="e645" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">org.json</code>包提供了许多在 Android 中提取和操作 JSON 数据的方法。以下是一些最常用的方法:</p><ul class=""><li id="a069" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks md me mf mg bi translated"><code class="fe kt ku kv kw b"><strong class="jx io">getInt(String key)</strong></code> <strong class="jx io">:从 JSON 对象中提取整数值。</strong></li><li id="3806" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><code class="fe kt ku kv kw b"><strong class="jx io">getLong(String key)</strong></code> <strong class="jx io">:从 JSON 对象中提取一个长整型值。</strong></li><li id="2184" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><code class="fe kt ku kv kw b"><strong class="jx io">getDouble(String key)</strong></code> <strong class="jx io">:从 JSON 对象中提取一个 double 值。</strong></li><li id="319e" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><code class="fe kt ku kv kw b"><strong class="jx io">getBoolean(String key)</strong></code> <strong class="jx io">:从 JSON 对象中提取一个布尔值。</strong></li><li id="e109" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><code class="fe kt ku kv kw b"><strong class="jx io">getString(String key)</strong></code> <strong class="jx io">:从 JSON 对象中提取一个字符串值。</strong></li><li id="68f5" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><code class="fe kt ku kv kw b"><strong class="jx io">getJSONObject(String key)</strong></code> <strong class="jx io">:从 JSON 对象中提取一个嵌套的 JSON 对象。</strong></li><li id="fb5f" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><code class="fe kt ku kv kw b"><strong class="jx io">getJSONArray(String key)</strong></code> <strong class="jx io">:从 JSON 对象中提取一个 JSON 数组。</strong></li></ul><p id="da9b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这只是几个例子，<code class="fe kt ku kv kw b">org.json</code>包提供了更多提取和操作 JSON 数据的方法。您可以在<code class="fe kt ku kv kw b">org.json</code>包的<a class="ae ll" href="https://developer.android.com/reference/org/json/package-summary" rel="noopener ugc nofollow" target="_blank"> JavaDocs </a>中找到完整的方法列表。</p><p id="dbe5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是一个使用这些方法从更复杂的 JSON 对象中提取数据的例子:</p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="5c94" class="lf lg in kw b be lh li l lj lk">import org.json.JSONObject;<br/><br/>// ...<br/><br/>String jsonString = "{\"employees\":[{\"firstName\":\"John\", \"lastName\":\"Doe\", \"age\":30, \"active\":true}, {\"firstName\":\"Anna\", \"lastName\":\"Smith\", \"age\":25, \"active\":false}, {\"firstName\":\"Peter\", \"lastName\":\"Jones\", \"age\":35, \"active\":true}]}";<br/><br/>try {<br/>    JSONObject json = new JSONObject(jsonString);<br/>    JSONArray employees = json.getJSONArray("employees");<br/><br/>    for (int i = 0; i &lt; employees.length(); i++) {<br/>        JSONObject employee = employees.getJSONObject(i);<br/>        String firstName = employee.getString("firstName");<br/>        String lastName = employee.getString("lastName");<br/>        int age = employee.getInt("age");<br/>        boolean active = employee.getBoolean("active");<br/>        System.out.println(firstName + " " + lastName + " (" + age + ") " + (active ? "active" : "inactive"));<br/>    }<br/>} catch (JSONException e) {<br/>    // handle exception<br/>}</span></pre><p id="4228" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本例中，我们从数组中的每个 employee 对象中提取“firstName”、“lastName”、“age”和“active”值，并打印出来。</p></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><p id="f3a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">关于在 Android 中解析 JSON，你可能还想知道一些事情:</strong></p><ul class=""><li id="5ffc" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks md me mf mg bi translated"><strong class="jx io"> JSON 数组由</strong> <code class="fe kt ku kv kw b"><strong class="jx io">org.json</strong></code> <strong class="jx io">包中的</strong> <code class="fe kt ku kv kw b"><strong class="jx io">JSONArray</strong></code> <strong class="jx io">类表示。可以使用</strong> <code class="fe kt ku kv kw b"><strong class="jx io">length</strong></code> <strong class="jx io">方法获取数组中元素的个数，使用</strong> <code class="fe kt ku kv kw b"><strong class="jx io">getJSONObject</strong></code> <strong class="jx io">方法获取特定元素作为</strong> <code class="fe kt ku kv kw b"><strong class="jx io">JSONObject</strong></code> <strong class="jx io">。</strong></li><li id="f7b9" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><strong class="jx io">你可以使用</strong> <code class="fe kt ku kv kw b"><strong class="jx io">opt*</strong></code> <strong class="jx io">的方法(例如</strong><code class="fe kt ku kv kw b"><strong class="jx io">optInt</strong></code><strong class="jx io"/><code class="fe kt ku kv kw b"><strong class="jx io">optString</strong></code><strong class="jx io">等)。)从 JSON 对象中提取值，但是如果在对象中没有找到键，这些方法将返回默认值。如果 JSON 数据没有严格定义，并且您希望优雅地处理丢失的键，这将非常有用。</strong></li><li id="7451" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><strong class="jx io">可以使用</strong> <code class="fe kt ku kv kw b"><strong class="jx io">put</strong></code> <strong class="jx io">的方法(如</strong><code class="fe kt ku kv kw b"><strong class="jx io">putInt</strong></code><strong class="jx io"/><code class="fe kt ku kv kw b"><strong class="jx io">putString</strong></code><strong class="jx io">等)。)将键值对添加到一个</strong> <code class="fe kt ku kv kw b"><strong class="jx io">JSONObject</strong></code> <strong class="jx io">。如果您想以编程方式创建一个 JSON 对象，这可能很有用。</strong></li><li id="582e" class="ly lz in jx b jy mh kc mi kg mj kk mk ko ml ks md me mf mg bi translated"><strong class="jx io">你可以使用</strong> <code class="fe kt ku kv kw b"><strong class="jx io">toString</strong></code> <strong class="jx io">方法将一个</strong> <code class="fe kt ku kv kw b"><strong class="jx io">JSONObject</strong></code> <strong class="jx io">或者</strong> <code class="fe kt ku kv kw b"><strong class="jx io">JSONArray</strong></code> <strong class="jx io">转换回一个 JSON 字符串。如果您想将 JSON 数据发送回服务器或保存到文件中，这可能很有用。</strong></li></ul><p id="b06b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面的示例展示了如何使用这些方法:</p><pre class="kx ky kz la gt lb kw lc bn ld le bi"><span id="8bc0" class="lf lg in kw b be lh li l lj lk">import org.json.JSONObject;<br/><br/>// ...<br/><br/>String jsonString = "{\"employees\":[{\"firstName\":\"John\", \"lastName\":\"Doe\", \"age\":30, \"active\":true}, {\"firstName\":\"Anna\", \"lastName\":\"Smith\", \"age\":25, \"active\":false}, {\"firstName\":\"Peter\", \"lastName\":\"Jones\", \"age\":35, \"active\":true}]}";<br/><br/>try {<br/>    JSONObject json = new JSONObject(jsonString);<br/>    JSONArray employees = json.getJSONArray("employees");<br/><br/>    for (int i = 0; i &lt; employees.length(); i++) {<br/>        JSONObject employee = employees.getJSONObject(i);<br/>        String firstName = employee.optString("firstName", "Unknown");<br/>        String lastName = employee.optString("lastName", "Unknown");<br/>        int age = employee.optInt("age", 0);<br/>        boolean active = employee.optBoolean("active", false);<br/>        System.out.println(firstName + " " + lastName + " (" + age + ") " + (active ? "active" : "inactive"));<br/>    }<br/><br/>    // Add a new employee to the array<br/>    JSONObject newEmployee = new JSONObject();<br/>    newEmployee.put("firstName", "Bob");<br/>    newEmployee.put("lastName", "Smith");<br/>    newEmployee.put("age", 40);<br/>    newEmployee.put("active", true);<br/>    employees.put(newEmployee);<br/><br/>    // Convert the JSON object back to a string<br/>    String updatedJsonString = json.toString();<br/>    System.out.println(updatedJsonString);<br/>} catch (JSONException e) {<br/>    // handle exception<br/>}</span></pre><p id="b3f7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本例中，我们解析并操作一个表示雇员列表的 JSON 对象。JSON 对象只有一个键“employees”，它是 employee 对象的数组。每个雇员对象都有“名字”、“姓氏”、“年龄”和“活动”字段。</p><p id="ca8d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们首先从<code class="fe kt ku kv kw b">org.json</code>包中导入<code class="fe kt ku kv kw b">JSONObject</code>类，并使用<code class="fe kt ku kv kw b">JSONObject</code>构造函数从 JSON 字符串创建一个 JSON 对象。然后，我们使用<code class="fe kt ku kv kw b">getJSONArray</code>方法从 JSON 对象中提取“employees”数组。</p><p id="7448" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们使用 for 循环迭代“employees”数组的元素。对于每个元素，我们使用<code class="fe kt ku kv kw b">optString</code>和<code class="fe kt ku kv kw b">optInt</code>方法提取“名字”、“姓氏”、“年龄”和“活动”值。如果在 JSON 对象中找不到这些键，这些方法允许我们为它们指定默认值。</p><p id="1b71" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 for 循环之后，我们使用<code class="fe kt ku kv kw b">JSONObject</code>构造函数创建一个新的 employee 对象，并使用<code class="fe kt ku kv kw b">put</code>方法向其添加键值对。然后我们使用<code class="fe kt ku kv kw b">JSONArray</code>对象的<code class="fe kt ku kv kw b">put</code>方法将新的 employee 对象添加到“employees”数组中。</p><p id="742e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们使用<code class="fe kt ku kv kw b">JSONObject</code>的<code class="fe kt ku kv kw b">toString</code>方法将其转换回 JSON 字符串，并将其打印出来。</p><p id="862c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望这有助于阐明这个例子。谢谢大家！</p></div></div>    
</body>
</html>