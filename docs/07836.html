<html>
<head>
<title>New startTransition API in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React ä¸­çš„æ–° startTransition API</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/new-starttransition-api-in-react-9d407c86eec1?source=collection_archive---------11-----------------------#2022-04-26">https://blog.devgenius.io/new-starttransition-api-in-react-9d407c86eec1?source=collection_archive---------11-----------------------#2022-04-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fa2519eb022af6a471273dec6c5c3468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gV2nmVSQDfT0XAml.png"/></div></div></figure><h1 id="456e" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">ä»€ä¹ˆæ˜¯è¿‡æ¸¡ï¼Ÿ</h1><p id="9055" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">è½¬æ¢æ˜¯ React ä¸­çš„ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œç”¨äºåŒºåˆ†ç´§æ€¥æ›´æ–°å’Œéç´§æ€¥æ›´æ–°ã€‚</p><ul class=""><li id="643e" class="lr ls in kv b kw lt la lu le lv li lw lm lx lq ly lz ma mb bi translated"><strong class="kv io">ç´§æ€¥æ›´æ–°</strong>åæ˜ ç›´æ¥äº¤äº’ï¼Œæ¯”å¦‚æ‰“å­—ã€ç‚¹å‡»ã€æŒ‰å‹ç­‰ç­‰ã€‚</li><li id="117d" class="lr ls in kv b kw mc la md le me li mf lm mg lq ly lz ma mb bi translated"><strong class="kv io">è½¬æ¢æ›´æ–°</strong>å°†ç”¨æˆ·ç•Œé¢ä»ä¸€ä¸ªè§†å›¾è½¬æ¢åˆ°å¦ä¸€ä¸ªè§†å›¾ã€‚</li></ul><p id="d942" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">åƒæ‰“å­—ã€ç‚¹å‡»ã€æŒ‰é”®è¿™æ ·çš„ç´§æ€¥æ›´æ–°éœ€è¦<strong class="kv io">å³æ—¶</strong>å“åº”ï¼Œä»¥ç¬¦åˆæˆ‘ä»¬å¯¹ç‰©ç†å¯¹è±¡è¡Œä¸ºçš„ç›´è§‰ã€‚å¦åˆ™ä»–ä»¬ä¼šè§‰å¾—<strong class="kv io">ã€ä¸å¯¹ã€‘</strong>ã€‚ç„¶è€Œï¼Œ<strong class="kv io">è½¬æ¢</strong>æ˜¯ä¸åŒçš„ï¼Œå› ä¸ºç”¨æˆ·ä¸æœŸæœ›åœ¨å±å¹•ä¸Šçœ‹åˆ°æ¯ä¸ªä¸­é—´å€¼ã€‚</p><p id="7ffb" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">ä¾‹å¦‚ï¼Œå½“æ‚¨åœ¨æœç´¢æ¡†ä¸­é”®å…¥å†…å®¹æ—¶ï¼Œæ‚¨å¸Œæœ›è¾“å…¥å­—æ®µæœ¬èº«åšå‡ºå“åº”ï¼Œå¹¶åœ¨æ‚¨æŒ‰é”®æ—¶ç«‹å³æ˜¾ç¤ºé”®å…¥çš„å­—ç¬¦<strong class="kv io"/>ã€‚ç„¶è€Œï¼Œå®é™…ç»“æœå¯èƒ½ä¼šåˆ†åˆ«è¿‡æ¸¡åˆ°<strong class="kv io">å’Œ</strong>ï¼Œé€šå¸¸ä¼šæœ‰å°çš„å»¶è¿Ÿã€‚å¦‚æœæ‚¨åœ¨ç»“æœæ¸²æŸ“å®Œæˆä¹‹å‰å†æ¬¡æ›´æ”¹æœç´¢è¯ï¼Œæ‚¨åªéœ€è¦æŸ¥çœ‹æœ€æ–°çš„<strong class="kv io">ç»“æœã€‚</strong></p><p id="0c3d" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">åœ¨ React 18 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe mk ml mm mn b">startTransition</code> API å°†ä»»ä½•çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºéç´§æ€¥ã€‚</p><p id="7a02" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">åœ¨ä¸‹é¢çš„ä»£ç å—ä¸­ï¼Œæœ‰ä¸¤ä¸ªçŠ¶æ€æ›´æ–°â€”â€”ä¸€ä¸ªæ˜¯ç´§æ€¥çš„ï¼Œå¦ä¸€ä¸ªè¢«æ ‡è®°ä¸ºéç´§æ€¥çš„ï¼Œå› ä¸ºå®ƒè¢«åŒ…è£…åœ¨<code class="fe mk ml mm mn b">startTransition</code>å›è°ƒä¸­:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="1e79" class="mw jw in mn b gy mx my l mz na">import {startTransition} from 'react';<br/><br/>// Urgent: Show what was typed<br/>setInputValue(input);<br/><br/>// Mark any state updates inside as transitions (non-urgent)<br/>startTransition(() =&gt; {<br/>  // Transition: Show the results<br/>  setResults(input);<br/>});</span></pre><p id="c0c4" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">å¦‚æœæ›´ç´§æ€¥çš„æ›´æ–°ï¼Œå¦‚ç‚¹å‡»æˆ–æŒ‰é”®ï¼Œéç´§æ€¥æ›´æ–°å°†è¢«<strong class="kv io">ä¸­æ–­</strong>ã€‚å¦‚æœä¸€ä¸ªè¿‡æ¸¡è¢«ç”¨æˆ·æ‰“æ–­(ä¾‹å¦‚ï¼Œåœ¨ä¸€è¡Œä¸­è¾“å…¥å¤šä¸ªå­—ç¬¦)ï¼ŒReact å°†ä¸¢å¼ƒæ²¡æœ‰å®Œæˆçš„<strong class="kv io">é™ˆæ—§çš„</strong>æ¸²æŸ“å·¥ä½œï¼Œåªæ¸²æŸ“<strong class="kv io">æœ€æ–°çš„</strong>æ›´æ–°ã€‚</p><h1 id="f26c" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">æ¼”ç¤ºåº”ç”¨ç¨‹åº:æœ‰æ—  startTransition çš„æ€§èƒ½</h1><p id="9f5a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºæ¥å±•ç¤ºæ–°çš„<code class="fe mk ml mm mn b">startTransition</code> API çš„å¨åŠ›ã€‚</p><p id="ec94" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">è¿™ä¸ªåº”ç”¨ç¨‹åºåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªâ€œæ–‡æœ¬æœç´¢â€ç‰¹æ€§ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†åœ¨ä¸€ä¸ªå¾ˆé•¿çš„æ–‡æœ¬å—(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­å¤§çº¦æœ‰ 60000 ä¸ªå­—ç¬¦)ä¸­æœç´¢ä¸€ä¸ªæœ¯è¯­çš„èƒ½åŠ›ã€‚</p><p id="71b1" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéœ€è¦æä¾›ä¸¤ä¸ªç‰¹æ€§:</p><ul class=""><li id="8cd0" class="lr ls in kv b kw lt la lu le lv li lw lm lx lq ly lz ma mb bi translated">å‘ˆç°ä¸€ä¸ª<strong class="kv io">è¾“å…¥</strong>ï¼Œå…è®¸ç”¨æˆ·é”®å…¥ä¸€ä¸ª<strong class="kv io">æœç´¢</strong>é¡¹ã€‚</li><li id="e071" class="lr ls in kv b kw mc la md le me li mf lm mg lq ly lz ma mb bi translated">å¯¹<strong class="kv io">çªå‡ºæ˜¾ç¤º</strong>ä»»ä½•ä¸è¾“å…¥çš„æœç´¢è¯åŒ¹é…(ä¸åŒºåˆ†å¤§å°å†™)çš„å­—ç¬¦ã€‚</li></ul><p id="8787" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">æˆ‘ä»¬ç”¨æ¥è·å¾—åŒ¹é…é¡¹çš„ç®€å•ç®—æ³•æ˜¯:</p><ol class=""><li id="37cf" class="lr ls in kv b kw lt la lu le lv li lw lm lx lq nb lz ma mb bi translated">ä»<strong class="kv io">æœç´¢è¯</strong>æ„å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒå°†åŒ¹é…ä»»ä½•å­—ç¬¦(ä¸åŒºåˆ†å¤§å°å†™)ã€‚</li><li id="d5e0" class="lr ls in kv b kw mc la md le me li mf lm mg lq nb lz ma mb bi translated">å°†<code class="fe mk ml mm mn b">highlight</code>ç±»æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦çš„æ‰€æœ‰<em class="nc">è·¨åº¦</em>ä¸­ã€‚</li></ol><p id="db8a" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated"><code class="fe mk ml mm mn b">applyFilter</code>åŠŸèƒ½çš„ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="71ad" class="mw jw in mn b gy mx my l mz na">const applyFilter = (query, setFilteredNode) =&gt; {<br/>  setFilteredNode(() =&gt; {<br/>    if (!query || query.trim().length === 0) {<br/>      return INITIAL_VALUE;<br/>    }<br/><br/>    const regex = new RegExp(<br/>      query.trim().replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&amp;"),<br/>      "ig"<br/>    );<br/><br/>    const node = TEXT.replaceAll(regex, (s) =&gt; `##${s}##`)<br/>      .split("##")<br/>      .map((s, i) =&gt; (<br/>        &lt;span key={i} className={i % 2 === 1 ? "highlight" : ""}&gt;<br/>          {s}<br/>        &lt;/span&gt;<br/>      ));<br/><br/>    return node;<br/>  });<br/>};</span></pre><p id="c2c5" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥æå‡ºæ›´ä¼˜åŒ–çš„ç®—æ³•â€”â€”è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸¥é‡å½±å“äº†æ€§èƒ½â€”â€”ä½†æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œçš„ä»»åŠ¡æ˜¯â€œåˆ›å»ºâ€ä¸€ä¸ªå¯¼è‡´å¤§é‡ React çŠ¶æ€æ›´æ–°çš„é«˜æˆæœ¬å‡½æ•°ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code class="fe mk ml mm mn b">startTransition</code> API æ˜¯å¦ä¼šæ”¹å–„è¿™ç§æƒ…å†µã€‚</p><p id="11b6" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated"><strong class="kv io">ä½ å¯ä»¥åœ¨è¿™é‡Œ</strong>  <strong class="kv io">æ‰¾åˆ° app </strong> <a class="ae nd" href="https://codesandbox.io/s/react-18-starttransition-demo-s2bvxy?file=/src/App.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">çš„æ‰€æœ‰ä»£ç ã€‚</strong></a></p><h1 id="5271" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">ç¬¬ä¸€æ¬¡å®æ–½:æœªä¼˜åŒ–ï¼Œæ²¡æœ‰å¼€å§‹è¿‡æ¸¡</h1><p id="777e" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå®ç°æ˜¯ä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªç®€å•çŠ¶æ€æ›´æ–°çš„ç»„ä»¶ï¼Œä¸€ä¸ªç”¨äºè¾“å…¥å€¼ï¼Œå¦ä¸€ä¸ªå°†åº”ç”¨è¿‡æ»¤åçš„ç»“æœã€‚æ¯å½“è¾“å…¥å€¼æ”¹å˜æ—¶ï¼Œå‡½æ•°<code class="fe mk ml mm mn b">applyFilter</code>å°†è¢«è°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸¤ç§çŠ¶æ€æ›´æ–°éƒ½æ ‡è®°ä¸ºç´§æ€¥:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="7bf9" class="mw jw in mn b gy mx my l mz na">import {useState} from 'react';<br/><br/>const Unoptimized = () =&gt; {<br/>  const [query, setQuery] = useState("");<br/>  const [filteredNode, setFilteredNode] = useState(INITIAL_VALUE);<br/><br/>  const onInputChange = (e) =&gt; setQuery(e.target.value);<br/><br/>  useEffect(() =&gt; {<br/>    applyFilter(query, setFilteredNode);<br/>  }, [query]);<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;div className="input"&gt;<br/>        &lt;input onChange={onInputChange} /&gt;<br/>      &lt;/div&gt;<br/>      &lt;div className="text"&gt;{filteredNode}&lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</span></pre><p id="9a9f" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated"><strong class="kv io">æœªä¼˜åŒ–</strong></p><p id="3a91" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">æ‚¨å¯ä»¥çœ‹åˆ°å­—ç¬¦æ²¡æœ‰ç«‹å³æ˜¾ç¤ºåœ¨è¾“å…¥å­—æ®µä¸­ï¼Œç”¨æˆ·ç•Œé¢æ„Ÿè§‰æœ‰ç‚¹â€œæ…¢â€:</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/e274526fa1303d24999708c6bf04f0fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2xWBYLTtS05Rg5eYmlDYEA.gif"/></div></div></figure><p id="fee2" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated"><strong class="kv io">æœªä¼˜åŒ–ï¼ŒCPU é€Ÿåº¦é™ä½ 4 å€</strong></p><p id="2a51" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">æˆ‘ä»¬åº”ç”¨äº† 4 å€çš„ CPU å‡é€Ÿ(æ¥è‡ª Chrome dev tools)æ¥æ›´å¥½åœ°æ¨¡æ‹Ÿæ™®é€š CPU æˆ–ç§»åŠ¨è®¾å¤‡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç”¨æˆ·ç•Œé¢è‚¯å®šæ„Ÿè§‰å¾ˆæ…¢ï¼Œä¸€ç‚¹ä¹Ÿä¸æµç•…:</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/efd1ace0723630fc26014d18115e9a15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U5w_4VR0kI5_T4e2.png"/></div></div></figure><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/ffc7aefd0cb1bbd97d749ef99fcddf3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tMGUDLsoZVlQoEIJ.gif"/></div></div></figure><h1 id="311b" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">ç¬¬äºŒæ¬¡å®æ–½:ä½¿ç”¨ startTransition ä¼˜åŒ–</h1><p id="5a35" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">åœ¨æˆ‘ä»¬çš„ç¬¬äºŒä¸ªå®ç°ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨äº†<code class="fe mk ml mm mn b">startTransition</code> APIã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è¿”å›ä¸€ä¸ª<code class="fe mk ml mm mn b">pending</code>çŠ¶æ€çš„<code class="fe mk ml mm mn b">useTransition</code>é’©å­â€”â€”æˆ‘ä»¬ä½¿ç”¨è¯¥çŠ¶æ€é€šè¿‡æ¨¡ç³Šå±å¹•å‘ç”¨æˆ·è¡¨æ˜ä¸€ä¸ªè½¬æ¢ä»åœ¨å¤„ç†ä¸­(æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜¾ç¤ºä¸€ä¸ªåŠ è½½ç¨‹åº)ã€‚</p><p id="4dfe" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">æˆ‘ä»¬é€šè¿‡å°†ç»“æœçš„çŠ¶æ€æ›´æ–°å°è£…åœ¨ä¸€ä¸ª<code class="fe mk ml mm mn b">startTransition</code>å›è°ƒä¸­ï¼Œå°†å®ƒæ ‡è®°ä¸ºéç´§æ€¥:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="be93" class="mw jw in mn b gy mx my l mz na">import {useState, useTransition} from 'react';<br/><br/>const Optimized = () =&gt; {<br/>  const [query, setQuery] = useState("");<br/>  const [filteredNode, setFilteredNode] = useState(INITIAL_VALUE);<br/>  const [pending, startTransition] = useTransition();<br/><br/>  const onInputChange = (e) =&gt; setQuery(e.target.value);<br/><br/>  useEffect(() =&gt; {<br/>    startTransition(() =&gt; {<br/>      applyFilter(query, setFilteredNode);<br/>    });<br/>  }, [query, startTransition]);<br/><br/>  return (<br/>    &lt;&gt;<br/>      {pending &amp;&amp; &lt;div className="fade" /&gt;}<br/>      &lt;div className="input"&gt;<br/>        &lt;input onChange={onInputChange} /&gt;<br/>      &lt;/div&gt;<br/>      &lt;div className="text"&gt;{filteredNode}&lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</span></pre><p id="adbc" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated"><strong class="kv io">ä¼˜åŒ–åçš„</strong></p><p id="f456" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">çœ‹çœ‹å­—ç¬¦åœ¨è¾“å…¥å±å¹•ä¸Šæ˜¾ç¤ºå¾—å¤šå¿«ï¼›å®ƒæ„Ÿè§‰è‡ªç„¶ã€å…‰æ»‘ï¼Œæ˜¯ç”¨æˆ·æ‰€æœŸæœ›çš„ã€‚å½“<code class="fe mk ml mm mn b">pending</code>å˜é‡ä¸ºçœŸæ—¶ï¼Œæˆ‘ä»¬æ¨¡ç³Šå±å¹•ï¼Œä»¥å‘ç”¨æˆ·æŒ‡ç¤ºè½¬æ¢ä»åœ¨è¿›è¡Œä¸­ã€‚</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/9f8724508522ab0ebfa89ebecddfbdb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*s8F_6qAOauSUqrE0eamE7Q.gif"/></div></div></figure><p id="f762" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated"><strong class="kv io">ä¼˜åŒ–äº† CPU 4x å‡é€Ÿ</strong></p><p id="28c6" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">æˆ‘ä»¬ç”šè‡³åº”ç”¨äº† 4 å€çš„ CPU å‡é€Ÿæ¥æ£€æŸ¥ UI å¦‚ä½•å“åº”ã€‚çœ‹èµ·æ¥<strong class="kv io">ä¸é”™</strong>ï¼Œç”šè‡³åœ¨<strong class="kv io">é‚£ç§åœºæ™¯ä¸‹</strong>ï¼</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/cb63645fc54f5e894e2acb99ae63f29c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6HQ-GHumZJ18kOwy.gif"/></div></div></figure><h1 id="e759" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">React 18 ä¹‹å‰çš„æ›¿ä»£è§£å†³æ–¹æ¡ˆï¼Ÿ</h1><p id="9a42" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">åœ¨ React 18 ä¹‹å‰æˆ‘ä»¬æ²¡æœ‰<code class="fe mk ml mm mn b">startTransition</code> APIï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨æ—©æœŸ React ç‰ˆæœ¬ä¸­ä¿®å¤å®ƒå‘¢ï¼Ÿ</p><p id="7025" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">é¢å¯¹æ­¤ç±»é—®é¢˜å¹¶é¿å…å¤§é‡é‡å¤çŠ¶æ€æ›´æ–°çš„æœ€å¸¸è§è§£å†³æ–¹æ¡ˆæ˜¯åˆ©ç”¨<strong class="kv io">å»æŠ–</strong>æˆ–<strong class="kv io">èŠ‚æµ</strong>æŠ€æœ¯ã€‚</p><p id="1a50" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ£’æäº†çš„<a class="ae nd" href="https://www.npmjs.com/package/use-debounce" rel="noopener ugc nofollow" target="_blank"> use-debounce </a>åº“ï¼Œå°†ç»“æœçš„é‡çŠ¶æ€æ›´æ–°å°è£…åœ¨ä¸€ä¸ª<strong class="kv io">de bounce å›è°ƒ</strong>ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="mo mp mq mr gt ms mn mt mu aw mv bi"><span id="e8ab" class="mw jw in mn b gy mx my l mz na">import {useState} from 'react';<br/>import {useDebouncedCallback} from 'use-debounce';<br/><br/>const Debounced = () =&gt; {<br/>  const [query, setQuery] = useState("");<br/>  const [filteredNode, setFilteredNode] = useState(INITIAL_VALUE);<br/>   <br/>  const onInputChange = (e) =&gt; setQuery(e.target.value);<br/><br/>  const debounced = useDebouncedCallback(<br/>    (query, setFilteredNode) =&gt; {<br/>       applyFilter(value, setFilteredNode);<br/>    },<br/>    100 // debounce 100 ms<br/>  );  <br/><br/>  useEffect(() =&gt; {<br/>    debounced(query, setFilteredNode);<br/>  }, [query, startTransition]);<br/><br/>  return (<br/>    &lt;&gt;<br/>      {pending &amp;&amp; &lt;div className="loader" /&gt;}<br/>      &lt;div className="input"&gt;<br/>        &lt;input onChange={onInputChange} /&gt;<br/>      &lt;/div&gt;<br/>      &lt;div className="text"&gt;{filteredNode}&lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>};</span></pre><p id="4799" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">ä½†æ˜¯è¿™ç§æ–¹æ³•ä»ç„¶æœ‰ä¸€äº›é—®é¢˜ã€‚</p><p id="21c1" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">é¦–å…ˆï¼Œ<code class="fe mk ml mm mn b">applyFilter</code>å‡½æ•°ä¸èƒ½åœ¨ç”¨æˆ·å®Œæˆè¾“å…¥åçš„ 100 æ¯«ç§’å†…è¢«è°ƒç”¨(æˆ–è€…ä½ é€‰æ‹©çš„ä»»ä½•æ—¶é—´)ã€‚å¦ä¸€æ–¹é¢ï¼Œé€šè¿‡ä½¿ç”¨<code class="fe mk ml mm mn b">startTransition</code> APIï¼Œç»“æœçš„ç¹é‡å¤„ç†å°½å¿«å¼€å§‹<strong class="kv io"/>ï¼Œè€Œä¸å¿…ç­‰å¾…ä»»æ„é•¿çš„æ—¶é—´ã€‚</p><p id="75ab" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">å…¶æ¬¡ï¼Œå³ä½¿æˆ‘ä»¬ä½¿ç”¨èŠ‚æµè€Œä¸æ˜¯å»æŠ–æ¥å°è¯•è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¤„ç†ç»“æœçš„å·¥ä½œä¹Ÿæ˜¯<strong class="kv io">ä¸å¯ä¸­æ–­çš„</strong>ã€‚è¿™æ„å‘³ç€å¦‚æœåœ¨ç»“æœè¿˜åœ¨å¤„ç†çš„æ—¶å€™æœ‰æ–°çš„ç´§æ€¥æ›´æ–°è¿›æ¥(æ¯”å¦‚æŒ‰é”®), UI ä¸å¯é¿å…åœ°ä¼š<strong class="kv io">æ— å“åº”</strong>ã€‚è€Œä½¿ç”¨<code class="fe mk ml mm mn b">startTransition</code> APIï¼Œå½“ç´§æ€¥æ›´æ–°åˆ°æ¥æ—¶ï¼Œå¤„ç†å·¥ä½œå°†è¢«<strong class="kv io">ä¸­æ–­</strong>ï¼Œä»¥è¿™ç§æ–¹å¼ä¿æŒè¾“å…¥åŸŸçš„å“åº”ã€‚</p><h1 id="8713" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">ç»“æŸäº†</h1><p id="349c" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">æˆ‘å¸Œæœ›ä½ å‘ç°è¿™ç¯‡æ–‡ç« å†…å®¹ä¸°å¯Œã€‚</p><p id="6c58" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated">å›å¤´è§ã€‚ğŸ™‚</p></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><p id="fcb1" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mh lg lh li mi lk ll lm mj lo lp lq ig bi translated"><em class="nc">åŸè½½äº</em><a class="ae nd" href="https://tasoskakour.com/blog/react-18-new-api-start-transition" rel="noopener ugc nofollow" target="_blank"><em class="nc">https://tasoskakour.com</em></a><em class="nc">ã€‚</em></p></div></div>    
</body>
</html>