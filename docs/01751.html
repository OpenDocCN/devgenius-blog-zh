<html>
<head>
<title>API Documentation to simplify development process</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">简化开发过程的API文档</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/api-documentation-to-simplify-development-process-eb9cad5ea58e?source=collection_archive---------36-----------------------#2020-07-10">https://blog.devgenius.io/api-documentation-to-simplify-development-process-eb9cad5ea58e?source=collection_archive---------36-----------------------#2020-07-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a855876162af8382a94336918da5ee8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2NnLk1W311JqBb1p"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">由<a class="ae jz" href="https://unsplash.com/@wesleyphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">韦斯利·廷吉</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="d836" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我作为软件工程师的职业生涯中，我总是需要从产品的前端或后端处理API端点。<br/>在客户端，我点击一个现有的端点，并在需要时发送相关数据，而在服务器端，我不仅需要创建端点，还需要添加当有人点击这个端点时会发生什么的逻辑。</p><blockquote class="ky"><p id="c2cc" class="kz la in bd lb lc ld le lf lg lh kx dk translated">我从来没有真正注意到寻找处理当前端点的特定文件(在服务器端)是多么令人疲惫，直到我从事一个具有多个服务和代理连接的大型企业产品。</p></blockquote><p id="4240" class="pw-post-body-paragraph ka kb in kc b kd li kf kg kh lj kj kk kl lk kn ko kp ll kr ks kt lm kv kw kx ig bi translated">让我解释一下。<br/> 当我试图调试或实现一个新功能时，我发现自己在寻找客户端正在进行的API调用，以及它通过使用Chrome网络选项卡到达了哪个端点。一旦找到端点，我就转到我的IDE，开始搜索处理当前端点的类/文件。</p><p id="7446" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我使用的是MVC框架，所以它应该简化了这个过程，但是如果控制器文件有一个没有意义的坏名字，会发生什么呢？或者您正在开发一个庞大的企业产品，该产品有超过3个不同的服务通过代理连接，并且有如此多的控制器文件？或者某些端点的名称非常相似？</p><p id="67cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您拥有的唯一信息是客户端当前的api调用，那么很难找到这个端点被处理的位置。</p><blockquote class="ln lo lp"><p id="3964" class="ka kb lq kc b kd ke kf kg kh ki kj kk lr km kn ko ls kq kr ks lt ku kv kw kx ig bi translated">我甚至无法开始解释这种文件搜索是多么令人疲惫和沮丧。</p></blockquote><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lu"><img src="../Images/e4274861c70c03a608421487d578e353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*513oDHdOrAr9n8DG"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@jeshoots?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">JESHOOTS.COM</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><blockquote class="ky"><p id="b4f5" class="kz la in bd lb lc lz ma mb mc md kx dk translated">我发现自己每天花大约45分钟去找一个文件！</p></blockquote><h2 id="c1f5" class="me mf in bd mg mh mi dn mj mk ml dp mm kl mn mo mp kp mq mr ms kt mt mu mv mw bi translated"><strong class="ak">适可而止</strong></h2><p id="a341" class="pw-post-body-paragraph ka kb in kc b kd mx kf kg kh my kj kk kl mz kn ko kp na kr ks kt nb kv kw kx ig bi translated">很快，我厌倦了所有其他开发人员似乎都在忍受的文件搜索过程，并开始思考如何简化这一过程，让我继续享受我的工作。</p><p id="eec1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第一步:</strong> <br/>由于我使用的是Spring MVC框架，我确信一定有办法处理它。我开始在网上挖掘，发现了一个非常基本和简单的Spring内置函数，它可以让我获得我的应用程序正在使用的所有<code class="fe nc nd ne nf b">mapping routes</code>。</p><pre class="lv lw lx ly gt ng nf nh ni aw nj bi"><span id="3508" class="me mf in nf b gy nk nl l nm nn">import org.springframework.web.method.HandlerMethod;</span><span id="e1d0" class="me mf in nf b gy no nl l nm nn">import org.springframework.web.servlet.mvc.method.RequestMappingInfo;</span><span id="0379" class="me mf in nf b gy no nl l nm nn">import org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping;</span><span id="12d8" class="me mf in nf b gy no nl l nm nn">private RequestMappingHandlerMapping handlerMapping;</span><span id="bd9e" class="me mf in nf b gy no nl l nm nn">@Autowired<br/>public void EndpointDocController(RequestMappingHandlerMapping handlerMapping) {</span><span id="a2d5" class="me mf in nf b gy no nl l nm nn">    this.handlerMapping = handlerMapping;</span><span id="685c" class="me mf in nf b gy no nl l nm nn">}</span><span id="584b" class="me mf in nf b gy no nl l nm nn"><strong class="nf io">Map&lt;RequestMappingInfo, HandlerMethod&gt; handlerMethods = this.handlerMapping.getHandlerMethods();</strong></span></pre><p id="79d1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">由于<code class="fe nc nd ne nf b">handlerMapping.getHandlerMethods()</code>返回当前<code class="fe nc nd ne nf b">RequestMappingInfo</code>的所有信息，我不得不根据我的需要定制它，我只想要<code class="fe nc nd ne nf b"><br/>File Name<br/>Request Type<br/>url<br/>Method Name<br/>Return Type<br/>Parameters</code>——如果有的话</p><figure class="lv lw lx ly gt jo"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="3033" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第二步:<br/> </strong>我的设计是，客户端不会得到所有现有的端点，而只会得到他们正在寻找的那个端点。为此，我必须创建一个新的端点来接受要查找的字符串。我最终这样做了</p><figure class="lv lw lx ly gt jo"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="c5f7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我已经完成了背面的工作，是时候开始正面的工作了。<br/>我创建了一个简单的UI页面，包含一个搜索输入和一个显示搜索结果的div包装器。我为网格布局和UI组件使用了bootstrap。</p><figure class="lv lw lx ly gt jo"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="a2ff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我使用Ajax(和jQuery)来创建API调用并显示服务器响应</p><figure class="lv lw lx ly gt jo"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="fb34" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">步骤4: <br/> </strong>此时，我有了一个可用的API文档，我可以在其中输入一个端点字符串/端点的一部分，我将获得与该字符串匹配的所有端点，最重要的是，我将拥有正在处理这些端点的<strong class="kc io">文件</strong>。</p><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/edabe320b99f48fb05c0092bd2c50f44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*-sLHnA53ro_WEoP158RBng.gif"/></div></figure><p id="7cc8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我正在开发的产品有多个微服务，它们使用代理相互通信，使用我编写的代码，我只能获得主服务和当前服务的端点信息。为了能够看到<strong class="kc io">所有</strong>所有<strong class="kc io">服务的端点，我需要对我的前端代码做一个小小的改动。</strong></p><p id="ce1b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">由于每个服务都有自己的restful API — <br/>服务A将指向<a class="ae jz" href="http://localhost:8080/service-a" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/service-A</a><br/>服务B将指向<a class="ae jz" href="http://localhost:8080/service-a" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/service-B</a><br/>服务C将指向<a class="ae jz" href="http://localhost:8080/service-a" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/service-</a>C<br/>等等……我需要能够选择我想要搜索的服务下面是完成这项工作的最终代码..</p><p id="1903" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最终。jsp文件</p><figure class="lv lw lx ly gt jo"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="45cd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">还有决赛。js文件</p><figure class="lv lw lx ly gt jo"><div class="bz fp l di"><div class="np nq l"/></div></figure><blockquote class="ln lo lp"><p id="34a3" class="ka kb lq kc b kd ke kf kg kh ki kj kk lr km kn ko ls kq kr ks lt ku kv kw kx ig bi translated">请记住，您需要在每个服务上添加<code class="fe nc nd ne nf b">apidoc</code>端点。</p></blockquote><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/bb67e5e0af4fef5abe1ba2ad17586af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9UTT9JDXLz61jYFWVOyNzw.gif"/></div></div></figure><h2 id="b5e2" class="me mf in bd mg mh nt dn mj mk nu dp mm kl nv mo mp kp nw mr ms kt nx mu mv mw bi translated"><strong class="ak">最终想法</strong></h2><p id="feed" class="pw-post-body-paragraph ka kb in kc b kd mx kf kg kh my kj kk kl mz kn ko kp na kr ks kt nb kv kw kx ig bi translated">我太激动了！使用这个新功能确实在开发过程中帮助了我，让我的生活更加轻松。一个漫长而令人疲惫的(如果我可以完全诚实，和愚蠢的)过程刚刚得到解决，不到一分钟的解决方案。</p><p id="2358" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">还能做什么？ <br/> 1。此时，我只能搜索一个静态字符串。例如，使用api调用<br/> <strong class="kc io">来查找<br/> <strong class="kc io">的端点信息http://localhost:8080/service-A/post/{ name:[A-Z0–9 _]+}<br/></strong>http://localhost:8080/service-A/post/my-post<br/></strong>我们只能搜索静态部分<br/><strong class="kc io">service-A/post</strong><br/>如果能够搜索</p><p id="e2b7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.如果出于任何原因，我们想将它部署到服务器上，我们肯定不想公开这个页面或功能。为此，我们需要从服务器端处理它，这样只有有权限的人才能访问我们刚刚创建的端点。</p><p id="752a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.我相信可以做得更多，如果你想到其他可以添加的东西，让我知道！我很想听听！</p><blockquote class="ln lo lp"><p id="a1c8" class="ka kb lq kc b kd ke kf kg kh ki kj kk lr km kn ko ls kq kr ks lt ku kv kw kx ig bi translated">完整的代码你可以在我的github上看到</p></blockquote></div></div>    
</body>
</html>