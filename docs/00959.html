<html>
<head>
<title>How Do We Write Unit Tests to Test Our Code?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们如何编写单元测试来测试我们的代码？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-do-we-write-unit-tests-to-test-our-code-5ecf7a43ed4?source=collection_archive---------28-----------------------#2020-06-20">https://blog.devgenius.io/how-do-we-write-unit-tests-to-test-our-code-5ecf7a43ed4?source=collection_archive---------28-----------------------#2020-06-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3f022ff0f59ca67f559091e958b6e9dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dLpFkHccdanuAjJp"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kc" href="https://unsplash.com/@anikolleshi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Ani Kolleshi </a>拍照</figcaption></figure><p id="e81d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想改变我们的代码而不用担心破坏任何东西，那么单元测试是很重要的。</p><p id="e247" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何编写单元测试，以便我们在更改代码时可以安心。</p><h1 id="74c5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">编写单元测试</h1><p id="e8b4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">单元测试不应该在源代码树的遥远角落。它应该位于方便的位置，以便我们可以很容易地找到他们，并改变他们是必要的。</p><p id="1a4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于小型项目，我们可以将测试嵌入到模块本身中。</p><p id="62eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于较大的项目，我们可以将它们移动到自己的子目录中。</p><p id="26af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过编写单元测试，我们为查看我们代码的开发人员提供了两种无价的资源。</p><p id="9379" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们包括如何使用我们的模块的功能的例子。以及一种构建回归测试来验证我们代码未来变化的方法。</p><p id="13cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此。这对于我们的代码文档来说是很棒的，也使得每个人以后更新测试更加容易。</p><p id="74c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单元测试将调用带有参数的函数，并检查返回的结果。</p><p id="bb74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须经常运行它们，这样我们就可以检查我们的产品是否一直在工作。</p><h1 id="dec9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用测试线束</h1><p id="971d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">测试工具是我们用来运行测试的标准数据集和代码集。</p><p id="41d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它用于处理一些常见的事情，比如日志记录、分析预期结果、选择和运行测试。</p><p id="7f55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">测试跑步者可能已经有很多这样的功能，所以我们可以使用它们。</p><p id="36d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，如果它们不在我们的测试框架中，那么我们必须自己编写它们。</p><p id="2b1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建一个提供这些通用操作的基类。单个测试可以是 hardness 类的子类，这样我们就可以调用 test 类中的方法。</p><p id="73ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很好，因为它符合干燥原则。我们不会重复任何记录和检查结果的代码。</p><p id="5d08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个装具应该提供一个标准的方法来设置我们的测试，并在运行后进行清理。</p><p id="6af1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该有一个选择单个测试或所有可用测试的方法。</p><p id="fd89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，它应该有一种方法来分析预期或意外结果的输出。</p><p id="3254" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">故障报告也应该是我们测试工具中的标准。</p><p id="0431" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">测试应该是可组合的。这意味着一个测试可以由任何深度的子组件的子测试组成。</p><p id="2e0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以添加测试来帮助我们调试代码。这可能是一个日志记录语句或与 IDE 交互的代码。</p><p id="170f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们完成了调试，然后我们就正式测试。如果我们破坏了一次，那么它很可能会再次破坏，所以我们应该添加一个测试来确保它不会再次破坏。</p><h1 id="6faa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">构建一个测试窗口</h1><p id="b16e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该测试我们的软件，一旦它被部署，真实世界的数据流经它，</p><p id="6189" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过自己的端到端测试来做到这一点。有很多方法可以让我们的应用程序运行起来就像用户与它互动一样。</p><p id="6c99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们需要在应用程序中填充干净的种子数据。然后，我们需要用 Selenium 这样的框架编写测试来与我们的应用程序交互，就像用户会如何与它交互一样。</p><p id="467f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们完成了测试，我们将数据重置为原始种子数据，这样我们的测试将会一致地运行。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/e248fd4072f0485947d42905ccb15fce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OBfrLXw0z_rCu0AU"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的 battle creek 咖啡烘焙师拍摄</figcaption></figure><h1 id="654f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">测试文化</h1><p id="fede" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们编写的所有软件都将由包括我们的测试人员和用户在内的人员进行测试。因此，我们应该确保在将它发布到任何环境之前，我们必须对它进行彻底的测试。</p><p id="f228" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这最大限度地减少了维护成本和客户服务电话。</p><p id="93d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以，测试应该是一种习惯。如果我们不测试我们的东西，那么我们的用户会。</p><h1 id="94e8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="9df4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该有根深蒂固的测试文化。因为如果我们不彻底测试我们的东西，那么我们的用户就会。</p><p id="cff6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了让我们的生活更容易，我们应该编写单元测试和端到端测试。</p><p id="82cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，一旦编写了测试，我们就可以不加思考地自动测试一切。</p><p id="7782" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有。我们应该确保使用测试工具或者编写我们自己的测试工具，这样我们就可以运行我们的测试并记录测试结果。</p></div></div>    
</body>
</html>