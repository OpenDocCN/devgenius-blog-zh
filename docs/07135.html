<html>
<head>
<title>Tired of waiting? Upload your pull request on TestPyPI in the meantime</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">厌倦了等待？同时在 TestPyPI 上上传您的拉取请求</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/tired-of-waiting-upload-your-pull-request-on-testpypi-in-the-meantime-4d1d44b5bafc?source=collection_archive---------16-----------------------#2022-02-28">https://blog.devgenius.io/tired-of-waiting-upload-your-pull-request-on-testpypi-in-the-meantime-4d1d44b5bafc?source=collection_archive---------16-----------------------#2022-02-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3b1a9aace50c4ffc4677c82f060fa987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZKXYQcQmKrRpnNQV"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">由<a class="ae jz" href="https://unsplash.com/@agebarros?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿格巴洛斯</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="b914" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你有没有遇到过好的储存库不再更新的情况？你在那里解决了一些问题，提出了一个拉取请求，但是没有得到维护者的反馈？厌倦了等待？为什么不自己发表呢？在这里我将和大家分享我在<a class="ae jz" href="https://github.com/SatAgro/suntime" rel="noopener ugc nofollow" target="_blank"> suntime </a>发布我的<a class="ae jz" href="https://github.com/SatAgro/suntime/pull/19" rel="noopener ugc nofollow" target="_blank">拉请求</a>到 TestPyPI 的故事。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="a3f5" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">1.背景</h1><p id="2b23" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">我使用<a class="ae jz" href="https://github.com/SatAgro/suntime" rel="noopener ugc nofollow" target="_blank"> suntime </a>作为我的包的依赖项，用于过滤基于日出和日落的时间序列数据，称为<a class="ae jz" href="https://github.com/yasirroni/dayfilter" rel="noopener ugc nofollow" target="_blank"> dayfilter </a>。可悲的是，这里有一个几乎两年前的问题。因此，我发出我的<a class="ae jz" href="https://github.com/SatAgro/suntime/pull/19" rel="noopener ugc nofollow" target="_blank">拉请求</a>来解决这个问题。在等待我的拉取请求的状态时，我在想，为什么不自己发布它呢？</p><h1 id="9a98" class="lf lg in bd lh li mi lk ll lm mj lo lp lq mk ls lt lu ml lw lx ly mm ma mb mc bi translated">2.正在处理您的拉动式请求</h1><p id="1fe6" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">在将您的 pull 请求发布到 TestPyPI 之前，您应该首先发出一个 pull 请求。在 GitHub 上，按下您想要发出 pull 请求的存储库的 fork 按钮。之后，将您的 fork 克隆到本地存储库。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">git 克隆命令</figcaption></figure><p id="c3ad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为您的修改创建一个单独的分支。这是贡献公共存储库的最佳实践，因为它不会将您的修改推送到主分支或主分支。如果用您想要共享的特性的名称来命名您的新分支会更好。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">git 创建一个新的特性分支</figcaption></figure><p id="fc24" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在做了一些更改之后，您可以添加、提交和推送您的更改到 GitHub 上的 fork 存储库中。然后，您可以从 GitHub 发出一个 pull 请求。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">git 添加、提交和推送</figcaption></figure><h1 id="d012" class="lf lg in bd lh li mi lk ll lm mj lo lp lq mk ls lt lu ml lw lx ly mm ma mb mc bi translated">3.推送至 TestPyPI</h1><p id="197b" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">首先，创建一个名为 TestPyPI 的新分支。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">git 创建一个新的 TestPyPIi 分支</figcaption></figure><p id="3d06" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二，更新 setup.py 文件，避免与最初的维护者发生任何冲突。你应该编辑<strong class="kc io">包名</strong>、<strong class="kc io">版本</strong>和<strong class="kc io"> url </strong>。对于包名，您应该在 name 部分进行编辑，不要与 package 部分混淆。name 部分是 PyPI 上的包名，而 package 部分是导入包时的包名。对于版本，您可以在原始版本后添加新的点和编号。见下面的模板，原来的<a class="ae jz" href="https://github.com/SatAgro/suntime/blob/master/setup.py" rel="noopener ugc nofollow" target="_blank"> suntime setup.py </a>，还有我新的<a class="ae jz" href="https://github.com/yasirroni/suntime/blob/test-pypi/setup.py" rel="noopener ugc nofollow" target="_blank"> suntime setup.py </a>。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在 setup.py 上编辑位置</figcaption></figure><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">原始 suntime setup.py</figcaption></figure><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">TestPyPI 分支上的新 setup.py</figcaption></figure><p id="0092" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第三，做一个 TestPyPI 账号(如果你还没有的话)。可以在<a class="ae jz" href="https://test.pypi.org/account/register/" rel="noopener ugc nofollow" target="_blank">官网</a>新建一个 TestPyPI 账号。最后，您已经准备好构建并发布到 TestPyPI。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在 TestPyPI 上发布的命令</figcaption></figure><p id="00e8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要阅读关于发布软件包的完整教程，请访问<a class="ae jz" href="https://packaging.python.org/en/latest/tutorials/packaging-projects" rel="noopener ugc nofollow" target="_blank">官方文档</a>。</p><h1 id="97f0" class="lf lg in bd lh li mi lk ll lm mj lo lp lq mk ls lt lu ml lw lx ly mm ma mb mc bi translated">4.从 TestPyPI 安装</h1><p id="410e" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">使用下面的例子从 TestPyPI 安装这个包。该选项将使 pip 查看指定的 python 包索引(TestPyPI)，但允许在标准 PyPI 上搜索依赖项。详情请阅读<a class="ae jz" href="https://pip.pypa.io/en/stable/cli/pip_install/#options" rel="noopener ugc nofollow" target="_blank">正式文件</a>。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">从 TestPyPI 安装软件包的 pip 命令也依赖于 PyPI</figcaption></figure><p id="8d22" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">祝贺您在 TestPyPI 上发布您的拉取请求！你也可以试着在下面安装我的 suntime 的 pull request。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">安装 suntime-yasirroni form TestPyPI 的 pip 命令</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="670e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，为什么是 TestPyPI 而不是 PyPI 呢？这是因为 TestPyPI 更像是一个非正式的、个人的和实验性的 Python 软件仓库。如果您觉得您的 pull 请求值得一个真正的 stage，您可以重命名这个包并将其上传到 PyPI。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">发布到 PyPI 的命令</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="fa4a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是本教程的全部内容。我希望你已经发现这是有用的。如果你想阅读另一个与 git 相关的故事，你可以尝试阅读我的关于管理你的公共存储库的私有分支的最佳方法的故事。</p><div class="mt mu gp gr mv mw"><a rel="noopener  ugc nofollow" target="_blank" href="/manage-your-private-git-branch-9f79cb7796a6"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">管理您的“私有”git 分支</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">您是否希望在一个存储库中为您的公共和私有分支建立一个单独的分支？你可能会…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">blog.devgenius.io</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jt mw"/></div></div></a></div></div></div>    
</body>
</html>