<html>
<head>
<title>Create your own npm package.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建自己的 npm 包。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/create-your-own-npm-package-776c0a4873f4?source=collection_archive---------5-----------------------#2021-12-31">https://blog.devgenius.io/create-your-own-npm-package-776c0a4873f4?source=collection_archive---------5-----------------------#2021-12-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0fa5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇文章中，我将告诉你谁可以使用 javascript 和 typescript 创建自己的 npm 包。</p><p id="c40a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作为第一步，我们可以创建项目。为此，请使用以下命令。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="b9d8" class="kr ks in kn b gy kt ku l kv kw">mkdir my-first-npm<br/>cd my-first-npm</span></pre><p id="93f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您位于项目文件夹中。然后打开你最喜欢的 IDE。我正在使用 vs 代码，要从这个位置打开 vs 代码，请使用下面的代码。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="e2d0" class="kr ks in kn b gy kt ku l kv kw">code .</span></pre><p id="798d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要初始化 node.js 项目，</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="abca" class="kr ks in kn b gy kt ku l kv kw">npm init -y<br/>tsc --init</span></pre><p id="a488" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它将在项目位置创建 package.json 和 tsconfig.json 文件。然后安装项目的依赖项。我们只需要<strong class="jm io"> del-cli </strong>和<strong class="jm io">打字稿</strong>。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="7453" class="kr ks in kn b gy kt ku l kv kw">npm i del-cli typescript</span></pre><p id="b34b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后创建一个 src 文件夹，并创建名为 index.ts 和 example.ts 的文件。这两个小命令我想大家都能识别。</p><figure class="ki kj kk kl gt ky gh gi paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="gh gi kx"><img src="../Images/61e44998304db55d17a3b9036511e4cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F8cclSjTjndcRbkxXnOFqw.png"/></div></div><figcaption class="lf lg gj gh gi lh li bd b be z dk translated">index.ts 和 example.ts 的代码示例</figcaption></figure><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="b81b" class="kr ks in kn b gy kt ku l kv kw">// index.ts<br/>const doubleYourAge = (age: number) =&gt; {</span><span id="8abf" class="kr ks in kn b gy lj ku l kv kw">return age * 2;</span><span id="9864" class="kr ks in kn b gy lj ku l kv kw">};</span><span id="166f" class="kr ks in kn b gy lj ku l kv kw">export { doubleYourAge };</span></pre><p id="1df7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后举例</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="16ed" class="kr ks in kn b gy kt ku l kv kw">// exmaple.ts<br/>export * from './example'</span></pre><p id="560e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们要创造的是你年龄的两倍。我知道这是无用的，但举例来说，这是好的。</p><p id="b17c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们必须进行一些配置，然后将 npm 发布到 npmjs.com。</p><p id="e7bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后转到 tsconfig.json，进行以下更改。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="afa6" class="kr ks in kn b gy kt ku l kv kw"># comment out “declaration”: true for declare the types for typescripts. </span><span id="b962" class="kr ks in kn b gy lj ku l kv kw"># comment out “outDir”: “./build” and give it location as “./build” to output the javascript version of our code in the folder called build.</span></pre><p id="ee8e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后 tsconfig.json 文件配置就结束了。然后转到 package.json 文件。</p><p id="632b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后在 package.json 文件中编写两个脚本，如下所示。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="dca9" class="kr ks in kn b gy kt ku l kv kw">"clean":"del ./build/*",</span><span id="34aa" class="kr ks in kn b gy lj ku l kv kw">"build":"npm run clean &amp;&amp; tsc"</span></pre><p id="23ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">跑起来，</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="b48e" class="kr ks in kn b gy kt ku l kv kw">npm run build</span></pre><p id="cb18" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每次运行 npm 的时候，运行 build <strong class="jm io"> "clean": "del。/build" </strong>将清除构建文件夹。</p><p id="5cb8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后您可以看到构建文件夹被创建，它包含 js 和类型定义文件。</p><p id="7d27" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之后，在 package.json 文件中进行这些更改。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="bb7b" class="kr ks in kn b gy kt ku l kv kw">"main": "./build/index.js",</span><span id="9ea7" class="kr ks in kn b gy lj ku l kv kw">"types": "./build/index.d.ts",</span><span id="cc56" class="kr ks in kn b gy lj ku l kv kw">"files": ["build/**/*"],</span></pre><p id="993d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个命令基本上表明 index.js 是项目及其类型定义的主文件。</p><p id="b04b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在所有的配置已经完成，然后我们必须在 npmjs.com 创建我们的帐户。为此，去 npmjs.com 注册并验证您的电子邮件。所有这些都是免费的。</p><p id="4574" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后点击个人资料按钮(圆形按钮)并点击<strong class="jm io">添加组织</strong>。然后提供一个唯一的名称。我提供的名称是<strong class="jm io"> exmaplefirst </strong>。然后点击无限公共包<strong class="jm io">创建</strong>按钮并点击跳过按钮。</p><p id="a0f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">哦，是的，现在你创建你的组织。</p><p id="c48b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后将 package.json 文件中的项目名称改为<strong class="jm io">@&lt;your _ NPM _ organization _ name&gt;/any _ name _ you _ like for _ your _ project。</strong></p><p id="59a3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我的情况是这样的。" name ":" @ exmaple first/my-first-NPM "，</p><p id="1a94" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在转到代码并创建 git repo 和 add。gitignore 文件。要创建 git repo，请使用以下命令，</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="e160" class="kr ks in kn b gy kt ku l kv kw">git init</span></pre><p id="50fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将 node_modules 和 build 文件夹添加到. gitignore 中，然后将文件添加到 git repo 中。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="8592" class="kr ks in kn b gy kt ku l kv kw">git add .<br/>git commit -m "initial commit"</span></pre><p id="110f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后运行 npm 登录，并提供登录 npm 所需的数据。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="f7c9" class="kr ks in kn b gy kt ku l kv kw">npm login</span></pre><p id="d72e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后跑，</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="328b" class="kr ks in kn b gy kt ku l kv kw"><strong class="kn io">npm publish --access public</strong></span></pre><p id="a0b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">是的。现在，您将您的第一个 npm 库发布到 npmjs，您可以在 npmjs 的个人资料中看到它。在我的账号里可以看到是<a class="ae lk" href="https://www.npmjs.com/package/@exmaplefirst/my-first-npm" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">@ exmaple first/my-first-NPM</strong></a><strong class="jm io">。</strong></p><p id="29f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我们可以检查包裹。为此，我用 express 快速创建了一个 node.js 项目，并安装了这个库，然后检查它是否工作。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="d9eb" class="kr ks in kn b gy kt ku l kv kw">mkdir check<br/>cd check<br/>npm init -y<br/>npm install express nodemon <a class="ae lk" href="https://www.npmjs.com/package/@exmaplefirst/my-first-npm" rel="noopener ugc nofollow" target="_blank">@exmaplefirst/my-first-npm</a></span></pre><p id="b3c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将 package.json 中的启动脚本写成“start”:“node mon index . js”。然后创建 index.js 文件，写小代码检查包。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="1ea3" class="kr ks in kn b gy kt ku l kv kw">const express = require("express");</span><span id="942a" class="kr ks in kn b gy lj ku l kv kw">const app = express();</span><span id="4c08" class="kr ks in kn b gy lj ku l kv kw">const { doubleYourAge } = require("@exmaplefirst/my-first-npm");</span><span id="d4e7" class="kr ks in kn b gy lj ku l kv kw">app.use(express.json());</span><span id="7cc8" class="kr ks in kn b gy lj ku l kv kw">app.get("/api", (req, res) =&gt; {</span><span id="4fc5" class="kr ks in kn b gy lj ku l kv kw">const age = 20;</span><span id="ebdd" class="kr ks in kn b gy lj ku l kv kw">const dAge = doubleYourAge(age);</span><span id="1e9d" class="kr ks in kn b gy lj ku l kv kw">return res.status(200).send({ age: dAge });</span><span id="6cec" class="kr ks in kn b gy lj ku l kv kw">});</span><span id="53e8" class="kr ks in kn b gy lj ku l kv kw">app.listen(3005, () =&gt; {</span><span id="6863" class="kr ks in kn b gy lj ku l kv kw">console.log("server start on port 3005");</span><span id="a2ec" class="kr ks in kn b gy lj ku l kv kw">});</span></pre><p id="08d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后启动终端并运行命令 npm start。</p><p id="1482" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后启动浏览器并导航到<strong class="jm io"> localhost:3005/api。</strong></p><p id="f048" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以看到输出为{age:"40"}。</p><p id="79b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">是的，是结束了。知道你知道如何创建自己的 npm 包，如何发布到 npmjs，如何检查。</p><p id="c406" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢你的阅读，希望你们能从这本书中学到新的东西。你可以从这里得到密码。https://github.com/thilina4321/npm-package<a class="ae lk" href="https://github.com/thilina4321/npm-package" rel="noopener ugc nofollow" target="_blank"/></p></div></div>    
</body>
</html>