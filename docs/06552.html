<html>
<head>
<title>Coalescing — How To Find The First Non-Null/Non-Undefined Argument In A Function in JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">合并——如何在 JS 中找到函数中的第一个非空/非未定义参数</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/coalescing-how-to-find-the-first-non-null-non-undefined-argument-in-a-function-in-js-b9c71d171ec4?source=collection_archive---------7-----------------------#2022-01-16">https://blog.devgenius.io/coalescing-how-to-find-the-first-non-null-non-undefined-argument-in-a-function-in-js-b9c71d171ec4?source=collection_archive---------7-----------------------#2022-01-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="8033" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们想在一个函数调用中找到第一个非空/非未定义的参数时，有很多用例。</p><p id="3a93" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们称这样的特性为合并(它的名字来源于 SQL 合并函数)。</p><p id="452c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">稍后我们将看两个常见的用例。</p><p id="8b4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我们实现合并功能的逻辑。</p><p id="6748" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">专家提示:结尾有美味的 ES11 鱼子酱，让我们在微风中相聚！请继续阅读！</p><ol class=""><li id="33bb" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated"><strong class="jm io"> PreES6 合并实现:</strong></li></ol><p id="c8dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这看起来像来自古代，但是让我们快速地看一下在过去的 6 天里我们是如何结合的。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/24c5d70dbebd7f807e8949e36608dde5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fr4HSBah7hSvffO0i0L2MA.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">PreES6 合并</figcaption></figure><p id="f69a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里的逻辑非常简单。</p><p id="dbb4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们迭代<em class="ki">参数</em>对象，直到找到第一个非空值。</p><p id="5acb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.<strong class="jm io"> ES6 合并:</strong></p><p id="273c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ES6 强大的函数式编程特性让我们在一行优雅的代码中实现了合并。像这样:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi li"><img src="../Images/e2e8cf15892e3eb74b18bf15f0b89dfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iaB7e5g1CTTlFcHGZUMp3Q.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">ES6 合并</figcaption></figure><p id="7356" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们来分解一下这里的逻辑:</p><ol class=""><li id="6082" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated">首先，我们用 REST 操作符收集所有参数</li><li id="3fc4" class="kj kk in jm b jn lj jr lk jv ll jz lm kd ln kh ko kp kq kr bi translated">然后我们用<em class="ki"> find </em>函数遍历参数数组。</li><li id="1700" class="kj kk in jm b jn lj jr lk jv ll jz lm kd ln kh ko kp kq kr bi translated">对<em class="ki"> find </em>的回调检查第一个非空且非未定义的值并返回它。</li></ol><p id="d2f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">整洁！</p><p id="9ac1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但还有更多！</p><p id="7218" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ES11 让我们只用一个<em class="ki">操作员</em>就能完成所有这些！</p><p id="b3fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.<strong class="jm io"> ES11 零化合并算子:</strong></p><p id="8f38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ES11(或 ECMA 脚本 2020)引入了零合并运算符。它的符号是<strong class="jm io">两个问号，’？?'</strong>。</p><p id="5a1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">零合并运算符采用两个操作数，其行为如下:</p><ol class=""><li id="d1e8" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated">如果不是空值或未定义的值，则返回左侧操作数<strong class="jm io">。</strong></li><li id="d95d" class="kj kk in jm b jn lj jr lk jv ll jz lm kd ln kh ko kp kq kr bi translated">如果左操作数为空或未定义，则返回<strong class="jm io">右操作数。</strong></li></ol><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lo"><img src="../Images/4e5490ccf439d9d7dcc847cd25e729ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kSql9fWygY-uI_9_sTwJlw.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">ES11 零化合并运算符</figcaption></figure><p id="f947" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">瞧啊。JavaScript 越来越好了！</p><p id="25c8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们看看我们之前承诺的两个联合用例。</p><ol class=""><li id="cffe" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated"><strong class="jm io">使用我们的数据时填写空值/未定义值:</strong></li></ol><p id="c1dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们在应用程序中提取数据时，显示结果中会出现空值/未定义的值。</p><p id="3d59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们希望用一些其他值来替换它们，以使输出有意义。像这样:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lp"><img src="../Images/25b32cd69a8f8f52e421f797d0b6d6ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NzHZdZXxq11fcWDwUk_8KQ.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">数据中的空值显示在输出中</figcaption></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lp"><img src="../Images/d098996ec62abfc0f8cdc670f24844db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cJa-pYYEOgPVDHBYfIRFzA.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">Coalesce 用有意义的文本替换了 null</figcaption></figure><p id="4def" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以下是上述用例的代码:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lq"><img src="../Images/c7adb057def3a128be8cc4b55de28c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzcDJpGwn_z-M2DyQT0V8w.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">产品对象</figcaption></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lr"><img src="../Images/19a347742c203a7bba778e0b81426fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vconwqKXXCEp2Q5pNAY0fQ.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">更改产品对象并将其嵌入到 HTML 中</figcaption></figure><p id="a7b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是附带的 HTML 文件:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ls"><img src="../Images/f56e9dca9a82a29082352330770a8760.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KGm3AqYLb85wY6-RtbOl9Q.png"/></div></div></figure><p id="3da6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.<strong class="jm io">用数值计算的默认值替换空值/未定义值:</strong></p><p id="5f40" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">数字数据中的空值会导致错误的计算结果。</p><p id="6ff8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用一些缺省值替换它们会得到一个合理的输出。像这样:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lt"><img src="../Images/d02e6018016b32f76eb9c2d85c7a8175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lXIAd7oUkNxvMnYrb8rGhQ.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">空值会导致不合理的计算结果</figcaption></figure><p id="fe88" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以下是这个用例的代码:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lu"><img src="../Images/b236c0cd3563e0197b766b102c241d7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5CJj3kRbMfW5HbNT6iuuiQ.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">原始数据有许多空值</figcaption></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lv"><img src="../Images/71a9ae43cbec92e5c9525ffe64e86f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X6qRokhcenfxtu7ygrbN-A.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">修饰功能</figcaption></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/8fe5eb4c6c5130fb253a12374667f20e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*gWnnNdWXnJ2zH6utWWsuYg.png"/></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">寻找每月平均数字</figcaption></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lx"><img src="../Images/e7a83c8df0c12da7463f59c3911d2bab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8c2_xkHRoZeZ6CzPcBn5yQ.png"/></div></div><figcaption class="le lf gj gh gi lg lh bd b be z dk translated">用 HTML 更新 DOM</figcaption></figure><p id="d33a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是美丽的凝聚功能！非常感谢您的阅读，我相信您会喜欢在您的代码中使用这个特性！</p></div></div>    
</body>
</html>