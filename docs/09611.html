<html>
<head>
<title>How to create Android and iOS apps from the NuxtJS application using CapacitorJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 CapacitorJS 从 NuxtJS 应用程序创建 Android 和 iOS 应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-create-android-and-ios-apps-from-the-nuxtjs-application-using-capacitorjs-8663e5037493?source=collection_archive---------14-----------------------#2022-08-31">https://blog.devgenius.io/how-to-create-android-and-ios-apps-from-the-nuxtjs-application-using-capacitorjs-8663e5037493?source=collection_archive---------14-----------------------#2022-08-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/4b4e8b8d4356385aca3888e5710e96ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D90cWhQX73koIk97zMbhJQ.png"/></div></div></figure><div class=""/><p id="d844" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本指南中，我将展示如何使用<a class="ae kt" href="https://capacitorjs.com/" rel="noopener ugc nofollow" target="_blank"> CapacitorJS </a>将现有的<a class="ae kt" href="https://v3.nuxtjs.org/" rel="noopener ugc nofollow" target="_blank"> NuxtJS </a> web 应用程序包装成 Android 和 iOS 移动应用程序</p><blockquote class="ku kv kw"><p id="4a5f" class="jv jw kx jx b jy jz ka kb kc kd ke kf ky kh ki kj kz kl km kn la kp kq kr ks ig bi translated"><em class="iy"> Capacitor 是一款用于构建 Web 原生应用的开源原生运行时。使用 JavaScript、HTML 和 CSS 创建跨平台的 iOS、Android 和渐进式 Web 应用程序。</em></p></blockquote><p id="a367" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">CapacitorJS 在本地浏览器上运行您的静态站点，并显示给用户。此外，它在本地和 web 上下文之间有一些接口，用于访问本地特性。</p><p id="fe77" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是如果用户可以从移动浏览器访问你的网站，你为什么需要这个呢？</p><ol class=""><li id="ee9e" class="lb lc iy jx b jy jz kc kd kg ld kk le ko lf ks lg lh li lj bi translated">对用户更有用。如果用户经常使用你的 web 应用程序，他们只需点击你的应用程序图标，比去浏览器搜索你的应用程序书签或键入你的应用程序域名更容易。Android 和 iOS 都有“将网站添加到主屏幕”的功能。但是一个单独的本地应用提供了更好的 UX。</li><li id="9bec" class="lb lc iy jx b jy lk kc ll kg lm kk ln ko lo ks lg lh li lj bi translated">分销渠道。用户可以在 AppStore 和 PlayMarket 中搜索你的应用。所以，最好出现在所有流行的平台上，以接触到更多的用户。</li><li id="71a7" class="lb lc iy jx b jy lk kc ll kg lm kk ln ko lo ks lg lh li lj bi translated">原生特征。也许，你的 web 应用不需要它们。但是在你创建了一个手机版的应用程序后，你可以改变你的想法。至少可以通过<a class="ae kt" href="https://firebase.google.com/docs/cloud-messaging" rel="noopener ugc nofollow" target="_blank"> FCM </a>添加通知。</li></ol><p id="721d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我想我们已经问完“为什么”了部分。让我们去“如何？”部分。</p><h1 id="9d72" class="lp lq iy bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">创建虚拟 NuxtJS 应用程序</h1><p id="580e" class="pw-post-body-paragraph jv jw iy jx b jy mn ka kb kc mo ke kf kg mp ki kj kk mq km kn ko mr kq kr ks ig bi translated">为了简化本指南，我将创建一个新的 Nuxt 应用程序。如果您已经有一个，请随意跳到安装 CapacitorJS 一节。</p><p id="2ee6" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以，让我们使用<a class="ae kt" href="https://v3.nuxtjs.org/getting-started/quick-start/" rel="noopener ugc nofollow" target="_blank">官方指南</a>创建一个 nuxt3 应用程序。我将使用<a class="ae kt" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> NodeJS v16 </a>和<a class="ae kt" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank">纱线 v1.22 </a>进行安装。</p><p id="9420" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开终端并运行:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="1c72" class="nb lq iy mx b gy nc nd l ne nf">$ yarn add global nuxi<br/>$ yarn nuxi init nuxt-mobile<br/>$ cd nuxt-mobile<br/>$ yarn install</span></pre><p id="9591" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里我们安装了<a class="ae kt" href="https://www.npmjs.com/package/nuxi" rel="noopener ugc nofollow" target="_blank"> nuxi </a> Nuxt 命令行接口，创建了一个新项目<code class="fe ng nh ni mx b">nuxt-mobile</code>，并安装了来自<code class="fe ng nh ni mx b">package.json</code>的依赖项。你可以用任何名字代替<code class="fe ng nh ni mx b">nuxt-mobile</code>。</p><p id="78ae" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来我们来换<code class="fe ng nh ni mx b">app.vue</code>。用以下文件替换现有文件:</p><figure class="ms mt mu mv gt ip"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="afb4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们看看我们得到了什么。运行开发服务器:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="3009" class="nb lq iy mx b gy nc nd l ne nf">$ yarn dev -o</span></pre><p id="cfaf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您将被导航到浏览器。在这里您将看到您的 web 应用程序。</p><figure class="ms mt mu mv gt ip gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/8182b9185c88bd75652f81605e5ca294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/0*AXw4n4lgXw7_-yVY.png"/></div></figure><p id="1b5f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它很空，但足以展示如何将 web 应用程序包装到移动应用程序中。</p><h1 id="8d4d" class="lp lq iy bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">安装电容器 j</h1><p id="f701" class="pw-post-body-paragraph jv jw iy jx b jy mn ka kb kc mo ke kf kg mp ki kj kk mq km kn ko mr kq kr ks ig bi translated">现在，让我们向应用程序添加 CapacitorJS。我将遵循官方指南的指示:</p><blockquote class="ku kv kw"><p id="7b97" class="jv jw kx jx b jy jz ka kb kc kd ke kf ky kh ki kj kz kl km kn la kp kq kr ks ig bi translated">在应用程序的根目录下，安装 Capacitor 的主要 npm 组件:核心 JavaScript 运行时和命令行界面(CLI)。</p></blockquote><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="7d97" class="nb lq iy mx b gy nc nd l ne nf">$ yarn add @capacitor/core<br/>$ yarn add --dev @capacitor/cli</span></pre><blockquote class="ku kv kw"><p id="930e" class="jv jw kx jx b jy jz ka kb kc kd ke kf ky kh ki kj kz kl km kn la kp kq kr ks ig bi translated"><em class="iy">然后，使用 CLI 问卷初始化电容器:</em></p></blockquote><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="2857" class="nb lq iy mx b gy nc nd l ne nf">$ yarn cap init</span></pre><p id="067c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">CLI 将询问您有关软件包的问题。你可以选择任意的<code class="fe ng nh ni mx b">Name</code>和<code class="fe ng nh ni mx b">Package</code>(我用的是<code class="fe ng nh ni mx b">NuxtMobile</code>和<code class="fe ng nh ni mx b">com.mycompany.nuxtmobile</code>的值)。然后你需要设置<code class="fe ng nh ni mx b">Web asset directory</code>为<code class="fe ng nh ni mx b">dist</code>。这是<a class="ae kt" href="https://nuxtjs.org/docs/concepts/static-site-generation/" rel="noopener ugc nofollow" target="_blank"> NuxtJS 静态站点</a>上的一个目的地。CLI 会将这些答案保存到<code class="fe ng nh ni mx b">capacitor.config.json</code>中，并检查文件内容。</p><blockquote class="ku kv kw"><p id="6e85" class="jv jw kx jx b jy jz ka kb kc kd ke kf ky kh ki kj kz kl km kn la kp kq kr ks ig bi translated"><em class="iy">安装完电容核心运行时，就可以安装 Android 和 iOS 平台了。</em></p></blockquote><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="4d4a" class="nb lq iy mx b gy nc nd l ne nf">$ yarn add @capacitor/android @capacitor/ios</span></pre><p id="71bf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">CapacitorJS 使用网站的静态版本。因此，我们需要生成它:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="af5c" class="nb lq iy mx b gy nc nd l ne nf">$ yarn generate</span></pre><p id="eaa5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们有了一个静态站点，这样我们就可以初始化 iOS 和 Android 应用程序:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="75cd" class="nb lq iy mx b gy nc nd l ne nf">$ yarn cap add android<br/>$ yarn cap add ios</span></pre><p id="c75b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些命令在<code class="fe ng nh ni mx b">android</code>和<code class="fe ng nh ni mx b">ios</code>文件夹中创建本地应用程序。他们将 web 内容从<code class="fe ng nh ni mx b">dist</code>目录克隆到<code class="fe ng nh ni mx b">ios/App/App/public</code>和<code class="fe ng nh ni mx b">android/app/src/main/assets/public</code>目录。</p><p id="7da2" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">每次你改变你的站点，你需要运行<code class="fe ng nh ni mx b">yarn generate</code>来生成一个新的静态站点，运行<code class="fe ng nh ni mx b">npx cap sync</code>来更新本地应用。</p><h1 id="3fed" class="lp lq iy bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">运行 Android 应用程序</h1><p id="7111" class="pw-post-body-paragraph jv jw iy jx b jy mn ka kb kc mo ke kf kg mp ki kj kk mq km kn ko mr kq kr ks ig bi translated">让我们运行 Android 应用程序。首先下载安装<a class="ae kt" href="https://developer.android.com/studio" rel="noopener ugc nofollow" target="_blank"> AndroidStudio </a>。</p><p id="91bc" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成后，返回控制台并运行<code class="fe ng nh ni mx b">yarn cap open android</code>。这将打开 AndroidStudio 中的<code class="fe ng nh ni mx b">android</code>文件夹。在这里你可以改变你的 Android 文件和运行应用程序。</p><p id="cce5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们添加一个模拟器来运行。进入“工具”-&gt;“设备管理器”，点击“创建设备”</p><p id="58f8" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，您需要选择“硬件设备”不同设备之间的主要区别是屏幕大小和 PlayMarket 的可用性。我会选择<code class="fe ng nh ni mx b">Pixel 2</code>，因为它有 PlayMarket 和 5.0 英寸的屏幕。</p><figure class="ms mt mu mv gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nm"><img src="../Images/f9796a8b427311777b23d9c27e1019d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gYRogCCwsrzVmA9B.png"/></div></div></figure><p id="a6a4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，您需要选择 Android OS 映像。我会用<code class="fe ng nh ni mx b">Android API 33</code>。</p><figure class="ms mt mu mv gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nn"><img src="../Images/2c1b14c392fecff157cc69ff3416204a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*25D9mtz_G5RQ9Iie.png"/></div></div></figure><p id="3b00" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，单击“下一步”和“完成”。此后，您将在“设备”下拉列表中看到一个新设备。</p><p id="acb3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您可以选择您的设备并单击“运行”来构建和启动应用程序:</p><figure class="ms mt mu mv gt ip gh gi paragraph-image"><div class="gh gi no"><img src="../Images/91949e0a2563e9e11ccdfa525f95768d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/0*CgUM9vdiJnhmljUT.png"/></div></figure><p id="2095" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Android Studio 将启动模拟器，构建、安装并运行您的应用程序:</p><figure class="ms mt mu mv gt ip gh gi paragraph-image"><div class="gh gi np"><img src="../Images/928fea7f45e87fc689dc4e8b0eb2af4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/0*ckd5-9gR3bsNd9mz.png"/></div></figure><p id="3ebf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们已经不再使用 Android 了；让我们转到 iOS 部分。</p><h1 id="a87b" class="lp lq iy bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">运行 iOS 应用程序</h1><p id="8142" class="pw-post-body-paragraph jv jw iy jx b jy mn ka kb kc mo ke kf kg mp ki kj kk mq km kn ko mr kq kr ks ig bi translated">要为 iOS 构建应用程序，你需要一台 MacBook。如果你有 Linux 或者 Windows，可以跳过这一部分。</p><p id="fd8d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，您需要 XCode 来构建和运行 iOS 应用程序。你可以在<a class="ae kt" href="https://apps.apple.com/us/app/xcode/id497799835" rel="noopener ugc nofollow" target="_blank"> AppStore </a>上买到。</p><p id="40de" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装完成后，返回控制台并运行<code class="fe ng nh ni mx b">yarn cap open ios</code>。这个命令将把<code class="fe ng nh ni mx b">ios</code>文件夹作为 XCode 项目打开。您可以在这里更改 iOS 应用程序文件和设置；构建并运行应用程序。</p><p id="8b92" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们需要选择一个仿真器设备来运行应用程序。我会用 iPod touch。</p><p id="1156" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后点击“运行”。XCode 将构建应用程序并在设备上运行。</p><figure class="ms mt mu mv gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nn"><img src="../Images/25ff174fd5f532e94fade7bbb36284e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uLToq0s2lYS6uhUz.png"/></div></div></figure><figure class="ms mt mu mv gt ip gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/849d02ab4c6e8db88f3553db47085707.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/0*oCt5PJ-m4M-DuH0V.png"/></div></figure><p id="457e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们已经完成了 iOS 部分。</p><h1 id="efe0" class="lp lq iy bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结束了</h1><p id="bbb6" class="pw-post-body-paragraph jv jw iy jx b jy mn ka kb kc mo ke kf kg mp ki kj kk mq km kn ko mr kq kr ks ig bi translated">恭喜你！在本指南中，我们将新的 NuxtJS web 应用程序转变为 iOS 和 Android 移动应用程序。这是一个非常基本的网络应用程序，所以我们不会上传到商店:)但如果你已经有了一个全功能的网络应用程序，你可以将其转换为移动应用程序，并上传到 PlayMarket 和 AppStore！</p><p id="d798" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以在这里找到项目<a class="ae kt" href="https://github.com/eugen1j/nuxt-mobile" rel="noopener ugc nofollow" target="_blank">的源代码。</a></p><p id="dfab" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您需要构建 web 或移动应用程序原型，请查看我们的<a class="ae kt" href="https://daiquiri.team/services/prototyping?utm_medium=referral&amp;utm_source=medium_blog&amp;utm_campaign=nuxt_mobile_1" rel="noopener ugc nofollow" target="_blank">网站</a>或直接在<a class="ae kt" href="https://www.linkedin.com/in/yevhen-bondar/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系。</p></div></div>    
</body>
</html>