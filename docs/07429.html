<html>
<head>
<title>Let’s edit videos with python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用 python 编辑视频</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/lets-edit-videos-with-python-67d6d9f56ad3?source=collection_archive---------8-----------------------#2022-03-24">https://blog.devgenius.io/lets-edit-videos-with-python-67d6d9f56ad3?source=collection_archive---------8-----------------------#2022-03-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/95672e431a1289ddf61ad61545bc53e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kFduULO-6R1hQN8pFV6QnA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com/@onurbinay?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Onur Binay </a>在<a class="ae jz" href="https://unsplash.com/s/photos/video-editing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="b6f4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本教程中，我们将使用 python 编辑视频。我们将利用<strong class="kc io"> moviepy </strong>库来编辑我们所有的视频。下面是我们将在本教程中使用的技术列表。</p><ol class=""><li id="812d" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">从视频中提取剪辑</li><li id="3fa3" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">堆叠视频</li><li id="eaf9" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">串联视频</li><li id="9a87" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">调整大小时在视频堆栈中创建边距</li><li id="6e44" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">从视频中提取图像</li><li id="1d6a" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">旋转视频剪辑</li><li id="1724" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">从视频中提取音频</li><li id="0125" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">用音频屏蔽视频</li><li id="7594" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">从视频创建 gif</li></ol><p id="6fe8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">要求</strong></p><ol class=""><li id="f098" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">大蟒</li><li id="e64e" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">电影</li></ol><p id="9032" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要安装这些软件包，请运行<code class="fe lm ln lo lp b">pip3 install &lt;package name&gt;</code></p><ol class=""><li id="5a70" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated"><strong class="kc io">从视频中提取剪辑</strong></li></ol><p id="2ecf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要从视频中提取剪辑，请在 subclip 函数中指定所需的时间帧。提取剪辑后，你需要将它写入一个新的文件</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="921e" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import *</span><span id="fd18" class="ly lz in lp b gy me mb l mc md">clip = VideoFileClip('snow.mp4').subclip(12,20)<br/>clip.write_videofile("edited.mp4")</span></pre><p id="1615" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.<strong class="kc io">堆叠视频</strong></p><p id="1d9c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你需要像在闭路电视监视器中那样把视频堆叠在一起吗？看看这段代码。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="9e6c" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import *</span><span id="ede0" class="ly lz in lp b gy me mb l mc md">clip1 = VideoFileClip('snow.mp4').subclip(4,16)<br/>clip2 = VideoFileClip('clouds.mp4')<br/>clip3 = VideoFileClip('city.mp4')<br/>clip4 = VideoFileClip('underwater.mp4')<br/>final_clip = clips_array([<br/>    [clip1,clip2],<br/>    [clip3,clip4]<br/>])<br/>final_clip.resize(width=480).write_videofile('my_stack.mp4')</span></pre><p id="fea7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是输出</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mf"><img src="../Images/013163582d396efa38bb54f45e3e9b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u2r7EIGJ7pM0h9ye6fAYuA.png"/></div></div></figure><p id="75c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.<strong class="kc io">连接视频</strong></p><p id="4a6e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">串联视频意味着将几个视频连接在一起，当一个剪辑停止播放时，另一个会立即开始播放。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="19cd" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import *</span><span id="fbf1" class="ly lz in lp b gy me mb l mc md">clip1 = VideoFileClip('snow.mp4').subclip(4,16)<br/>clip2 = VideoFileClip('clouds.mp4')<br/>clip3 = VideoFileClip('city.mp4')<br/>final_clip = concatenate_videoclips([clip1,clip2,clip3])<br/>final_clip.write_videofile('my_concate.mp4')</span></pre><p id="4832" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.<strong class="kc io">调整大小时在视频堆栈中创建边距</strong></p><p id="5dc2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之前我们制作了一个堆栈，这里我们将在堆栈中的每个视频之间添加一个边距，并调整数组中最后一个视频的大小。</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="7174" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import *</span><span id="f46c" class="ly lz in lp b gy me mb l mc md">clip1 = VideoFileClip('snow.mp4').subclip(4,16).margin(10)<br/>clip2 = VideoFileClip('clouds.mp4')<br/>clip3 = VideoFileClip('city.mp4')<br/>clip4 = VideoFileClip('underwater.mp4').resize(0.60) #downsize 60%<br/>final_clip = clips_array([<br/>    [clip1,clip2],<br/>    [clip3,clip4]<br/>])<br/>final_clip.resize(width=480).write_videofile('my_advanced_stack.mp4')</span></pre><p id="65d1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们增加了 10 个像素的空白，并将最后一个视频的大小调整为 60%</p><p id="4b40" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是输出</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mf"><img src="../Images/e3db3882c3bdeff3a54f6713df9d9ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRizuoYBhR4GED0ErEKyeg.png"/></div></div></figure><p id="6a34" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 5。从视频中提取图像</strong></p><p id="c4ef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先加载视频，然后使用 save_frame 函数捕获帧，然后指定文件名</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="9506" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import *</span><span id="e24e" class="ly lz in lp b gy me mb l mc md">clip = VideoFileClip('snow.mp4')<br/>clip.save_frame('snow.jpeg')<br/></span></pre><p id="6b57" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 6。旋转夹子</strong></p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="baa9" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import *</span><span id="1f6e" class="ly lz in lp b gy me mb l mc md">clip = VideoFileClip('snow.mp4').rotate(270)<br/>clip.write_videofile('rotated.mp4')</span></pre><p id="d7e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将把视频旋转 270 度</p><p id="6172" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 7。从视频中提取音频</strong></p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="4d62" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import *</span><span id="7c66" class="ly lz in lp b gy me mb l mc md">clip = VideoFileClip('underwater.mp4')<br/>audioclip = clip.audio<br/>audioclip.write_audiofile('underwater.mp3')</span></pre><p id="7c82" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">8。用另一个音频屏蔽一个视频</p><p id="6880" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们将使用新的音频屏蔽视频</p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="fae6" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import * </span><span id="527c" class="ly lz in lp b gy me mb l mc md">my_audioclip = AudioFileClip('underwater.mp3')<br/>videoclip = VideoFileClip('snow.mp4')<br/>videoaudio = videoclip.set_audio(my_audioclip)<br/>videoaudio.write_videofile('videowithaudio.mp4')</span></pre><p id="956f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">9。创建一个 gif </p><pre class="lq lr ls lt gt lu lp lv lw aw lx bi"><span id="1737" class="ly lz in lp b gy ma mb l mc md">from moviepy.editor import *<br/>clip = VideoFileClip('city.mp4')<br/>clip.write_gif('city.gif',fps=2)</span></pre><p id="b305" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是输出</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/836f904c1470b768b16e7cf127053505.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*Ixgz5sOfCvB-ew2Y5grkfQ.gif"/></div></figure><p id="6228" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">结尾</strong></p><p id="4db7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Moviepy 包含更复杂的函数，其中大部分我无法在本教程中介绍。你可以在这里查库<a class="ae jz" href="https://moviepy.readthedocs.io/en/latest/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"/></a><strong class="kc io">。</strong>感谢阅读。</p></div></div>    
</body>
</html>