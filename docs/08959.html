<html>
<head>
<title>Day 105 of Game Dev: Unity New Input System — Keeping your Code Modular!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">游戏开发的第 105 天:Unity 新输入系统——保持你的代码模块化！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/day-105-of-game-dev-unity-new-input-system-keeping-your-code-modular-87e8263fe630?source=collection_archive---------17-----------------------#2022-07-20">https://blog.devgenius.io/day-105-of-game-dev-unity-new-input-system-keeping-your-code-modular-87e8263fe630?source=collection_archive---------17-----------------------#2022-07-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="d801" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">目标:</strong>用新的输入系统将玩家输入与玩家类分开。</p><p id="af58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">说到新的输入系统，还有更多的编码需要完成。最好不要把所有这些复杂的代码都放在你的播放器类中，因为它很容易把代码弄乱。我将向您展示一种简单的方法来确保您的代码保持整洁，同时也不会增加太多的复杂性。</p><p id="9954" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在解释代码之前，我将设置我的场景。场景将会有 2d 角色移动和玩家可以射击的投射物。</p><p id="4e2d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我有我的:</p><p id="fe56" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">玩家(球体)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/f4f377d0e30b189ace6220dbdfd90e14.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*ixX6dGRydKtnRGTiC3FyOg.png"/></div></figure><p id="7cfa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">射弹预制件(胶囊)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kq"><img src="../Images/91c0ee6e48eb71bd0caa2d320d64b365.png" data-original-src="https://miro.medium.com/v2/resize:fit:476/format:webp/1*Ti_-CzRWWDg41yuCrYv1WQ.png"/></div></figure><p id="1635" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">投射脚本(向上移动)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/f559ecbd50648977f6bb5aba924e3f0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:576/format:webp/1*ajPYucpw1OChY5_2C_nXVQ.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ks"><img src="../Images/f1ea8264f8641e45b13bcaef6e941911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qduDU4cm_0Hx-nHwhlAeAg.png"/></div></div></figure><p id="099d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输入动作资产</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/f7b25673eaf7ec0ee1be456a0a5f27f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*bv7iNJ-EhzUH4Pmn4_ea6A.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ky"><img src="../Images/5266393189ebb3088fbd64220a95b6e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3_blCIuddtvV_3GMhRky1Q.png"/></div></div></figure><p id="bb37" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">InputManager 脚本(管理所有输入)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/36514354fdce3cd1701316ee68835138.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*CMDQGUNj7Li0Jxd-M_bcEg.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi la"><img src="../Images/23bb97a84dd9daca409b87b69576cf57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTcgCm3LeZ9q4AFCXG5Hvg.png"/></div></div></figure><p id="0add" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一个空的游戏对象(保存 InputManager 脚本)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/b9fa99717fb7a888efccc96dcd499ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*a5aUQehODqS8_cyWYlc-1Q.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/e81e5588b083637839df368fdb223848.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*lMKyx1ND9-A5zNWpvYa8RA.png"/></div></figure><p id="2682" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">播放器脚本(在播放器上)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi ld"><img src="../Images/381b21beb3bf21dc9d266e80056a458f.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*QQR1wUyVRi_PzmDqjvTEVg.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi le"><img src="../Images/d0f22db9e6d23cee90a93e266ab4d57c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0KehytoEslKQez4NJ0Ozbw.png"/></div></div></figure><p id="8246" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们真正需要关注的 2 个脚本是输入管理器和播放器脚本。</p><p id="b278" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们先来看看玩家剧本(上图)。</p><p id="e915" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如你所看到的，有两个方法你通常可以从玩家类本身调用(移动和开火方法),但实际上在这个脚本中根本没有被调用。逻辑是构建出来的，但实际上从来没有被调用过。</p><p id="b728" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">相反，在这个实现中，为了保持所有代码整洁，它们都是公共方法，这样就可以从 InputManager 脚本中调用它们。因此，Player 类处理所有与播放器相关的行为，而 InputManager 类自己处理输入。</p><p id="8e0a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">回到 InputManager 类:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi la"><img src="../Images/23bb97a84dd9daca409b87b69576cf57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fTcgCm3LeZ9q4AFCXG5Hvg.png"/></div></div></figure><p id="0cff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们有一个对 Player 类的引用，如你所见，每当使用输入时，我们都从 Player 类调用公共的 Movement 和 Fire 方法。这是一种非常简洁的设置代码的方式，但是请记住，它确实增加了一层复杂性，尽管它非常值得学习。尤其是因为让你的代码保持模块化非常重要，所以在任何事情上都学习它是很好的实践。</p><p id="56d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lf">如果您有任何想法或问题，请随时评论。让我们制作一些令人敬畏的游戏！</em> </strong></p></div></div>    
</body>
</html>