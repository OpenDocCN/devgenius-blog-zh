<html>
<head>
<title>Basic Laravel admin panel — Basic Laravel CRUD creation for permission management</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基本 Laravel 管理面板—用于权限管理的基本 Laravel CRUD 创建</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/basic-laravel-admin-panel-basic-laravel-crud-creation-for-permission-management-6bd93fb0e1a2?source=collection_archive---------0-----------------------#2022-02-16">https://blog.devgenius.io/basic-laravel-admin-panel-basic-laravel-crud-creation-for-permission-management-6bd93fb0e1a2?source=collection_archive---------0-----------------------#2022-02-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6bed" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Laravel 从头开始创建管理面板——第 4 部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/115d3b8dbe6d88d663f89831761fa918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y8Pilf5qUxeEZGVW8vGsFg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Laravel 许可 CRUD</figcaption></figure><p id="65b7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在最后的<a class="ae lr" rel="noopener ugc nofollow" target="_blank" href="/laravel-user-roles-and-permissions-6dbfd4abfcf8">部分</a>，我们安装了 Spatie<a class="ae lr" href="https://github.com/spatie/laravel-permission" rel="noopener ugc nofollow" target="_blank">Laravel-permission</a>包。这个软件包没有用户界面。因此，我们将为管理面板角色和权限管理创建 3 个以下的 CRUD。</p><ul class=""><li id="805b" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">权限管理</li><li id="16f9" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">角色管理</li><li id="e0e8" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">用户管理</li></ul><p id="2606" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">相应的表已经在 Laravel Breeze starter kit 和 Spatie Laravel-permission 包安装部分创建。</p><h1 id="5f38" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">许可管理</h1><p id="97d7" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">以下步骤涉及到为我们的 Laravel 管理面板创建权限 CRUD。</p><ul class=""><li id="6e26" class="ls lt iq kx b ky kz lb lc le lu li lv lm lw lq lx ly lz ma bi translated">1.创建模型</li><li id="a2ce" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">2.创建控制器</li><li id="4697" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">3.添加路线</li><li id="1bcf" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">4.带有操作链接的索引页面</li><li id="b656" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">5.创建操作</li><li id="833f" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">6.更新操作</li><li id="1c4f" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">7.查看操作</li><li id="d941" class="ls lt iq kx b ky mb lb mc le md li me lm mf lq lx ly lz ma bi translated">8.向导航添加链接</li></ul><h2 id="7621" class="nd mh iq bd mi ne nf dn mm ng nh dp mq le ni nj ms li nk nl mu lm nm nn mw no bi translated">1.创建模型</h2><p id="f9e5" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">首先，我们要为许可 CRUD 创建一个模型。使用下面的<code class="fe np nq nr ns b">make:model</code> Artisan 命令创建你的模型将会在<code class="fe np nq nr ns b">app/Models</code>文件夹中创建一个<code class="fe np nq nr ns b">Permission.php</code>文件</p><p id="88cc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们也可以手动创建模型和控制器。<code class="fe np nq nr ns b">make</code>artisan 命令将创建具有骨架功能的文件。</p><pre class="kg kh ki kj gt nt ns nu nv aw nw bi"><span id="364e" class="nd mh iq ns b gy nx ny l nz oa">sail artisan make:model Permission</span></pre><p id="eb00" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用<code class="fe np nq nr ns b">Spatie\Permission\Models\Permission</code>扩展我们的权限模型，用下面的代码更新模型。</p><p id="92ae" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">app/Models/Permission.php</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="287c" class="oe mh iq ns b be of og l oh oa">&lt;?php<br/>namespace App\Models;<br/>use Spatie\Permission\Models\Permission as OriginalPermission;<br/>class Permission extends OriginalPermission<br/>{<br/>    protected $fillable = [<br/>        'name',<br/>        'guard_name',<br/>        'updated_at',<br/>        'created_at'<br/>    ];<br/>}</span></pre></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h2 id="f1ab" class="nd mh iq bd mi ne nf dn mm ng nh dp mq le ni nj ms li nk nl mu lm nm nn mw no bi translated">2.创建控制器</h2><p id="f226" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated"><code class="fe np nq nr ns b">make:controller</code> Artisan 命令用于创建控制器。</p><pre class="kg kh ki kj gt nt ns nu nv aw nw bi"><span id="a378" class="nd mh iq ns b gy nx ny l nz oa">sail artisan make:controller Admin/PermissionController --model=Permission --resource</span></pre><p id="30d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe np nq nr ns b">--resource</code>选项可以快速创建一个控制器来处理创建、读取、更新和删除(“CRUD”)操作。</p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h2 id="c56f" class="nd mh iq bd mi ne nf dn mm ng nh dp mq le ni nj ms li nk nl mu lm nm nn mw no bi translated">3.添加路线</h2><p id="be28" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">我们将在 app/routes 文件夹中创建一个新的 admin.php 文件。这个文件将包含我们所有的管理路径，在 URL 中带有一个管理前缀。</p><p id="1ef8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">routes/admin.php</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="df1a" class="oe mh iq ns b be of og l oh oa">&lt;?php<br/>Route::group([<br/>    'namespace'  =&gt; 'App\Http\Controllers\Admin',<br/>    'prefix'     =&gt; 'admin',<br/>    'middleware' =&gt; ['auth'],<br/>], function () {<br/>    Route::resource('permission', 'PermissionController');<br/>});</span></pre><p id="86cf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些新的管理路由需要包含在 RouteServiceProvider.php<br/>的<code class="fe np nq nr ns b">boot</code>函数中，用下面的代码更新<code class="fe np nq nr ns b">boot()</code>函数</p><p id="2e14" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">app/Providers/routeserviceprovider . PHP</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="eb90" class="oe mh iq ns b be of og l oh oa">public function boot()<br/>{<br/>    $this-&gt;configureRateLimiting();<br/>$this-&gt;routes(function () {<br/>        Route::prefix('api')<br/>            -&gt;middleware('api')<br/>            -&gt;namespace($this-&gt;namespace)<br/>            -&gt;group(base_path('routes/api.php'));<br/>Route::middleware('web')<br/>            -&gt;namespace($this-&gt;namespace)<br/>            -&gt;group(base_path('routes/web.php'));<br/>Route::middleware('web')<br/>            -&gt;namespace($this-&gt;namespace)<br/>            -&gt;group(base_path('routes/admin.php'));<br/>    });<br/>}</span></pre><p id="8af6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在进入<code class="fe np nq nr ns b">/admin/permission</code>页面，显示空白页。</p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h2 id="00ef" class="nd mh iq bd mi ne nf dn mm ng nh dp mq le ni nj ms li nk nl mu lm nm nn mw no bi translated">4.带有操作链接的索引页面</h2><p id="862c" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">使用权限分页更新索引函数。</p><p id="05a1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">app/Http/Controllers/Admin/permission controller . PHP</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="9821" class="oe mh iq ns b be of og l oh oa">public function index()<br/>{<br/>    $permissions = Permission::latest()-&gt;paginate(5);<br/>    return view('admin.permission.index',compact('permissions'))<br/>        -&gt;with('i', (request()-&gt;input('page', 1) - 1) * 5);<br/>}</span></pre><p id="d16c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在管理/权限文件夹中创建 index.blade.php 视图文件</p><p id="10ea" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">资源/视图/管理/权限/索引. blade.php</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="a9c2" class="oe mh iq ns b be of og l oh oa">&lt;x-app-layout&gt;<br/>    &lt;x-slot name="header"&gt;<br/>        &lt;h2 class="font-semibold text-xl text-gray-800 leading-tight"&gt;<br/>            {{ __('Permissions') }}<br/>        &lt;/h2&gt;<br/>    &lt;/x-slot&gt;<br/>&lt;div class="py-12"&gt;<br/>        &lt;div class="max-w-7xl mx-auto sm:px-6 lg:px-8"&gt;<br/>            &lt;div class="bg-white overflow-hidden shadow-sm sm:rounded-lg"&gt;<br/>                &lt;div class="p-6 bg-white border-b border-gray-200"&gt;<br/>                    &lt;div class="flex flex-col mt-8"&gt;<br/>                    &lt;div class="d-print-none with-border mb-8"&gt;<br/>                        &lt;a href="{{ route('permission.create') }}" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"&gt;{{ __('Add Permission') }}&lt;/a&gt;<br/>                    &lt;/div&gt;<br/>                        &lt;div class="py-2"&gt;<br/>                        @if(session()-&gt;has('message'))<br/>                            &lt;div class="mb-8 text-green-400 font-bold"&gt;<br/>                                {{ session()-&gt;get('message') }}<br/>                            &lt;/div&gt;<br/>                        @endif<br/>                            &lt;div class="min-w-full border-b border-gray-200 shadow"&gt;<br/>                                &lt;table class="border-collapse table-auto w-full text-sm"&gt;<br/>                                    &lt;thead&gt;<br/>                                        &lt;tr&gt;<br/>                                            &lt;th class="py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light text-left"&gt;<br/>                                                {{ __('Name') }}<br/>                                            &lt;/th&gt;<br/>                                            &lt;th class="py-4 px-6 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light text-left"&gt;<br/>                                                {{ __('Actions') }}<br/>                                            &lt;/th&gt;<br/>                                        &lt;/tr&gt;<br/>                                    &lt;/thead&gt;<br/>&lt;tbody class="bg-white dark:bg-slate-800"&gt;<br/>                                        @foreach($permissions as $permission)<br/>                                        &lt;tr&gt;<br/>                                            &lt;td class="border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400"&gt;<br/>                                                &lt;div class="text-sm text-gray-900"&gt;<br/>                                                    &lt;a href="{{route('permission.show', $permission-&gt;id)}}" class="no-underline hover:underline text-cyan-600 dark:text-cyan-400"&gt;{{ $permission-&gt;name }}&lt;/a&gt;<br/>                                                &lt;/div&gt;<br/>                                            &lt;/td&gt;<br/>&lt;td class="border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400"&gt;<br/>                                                &lt;form action="{{ route('permission.destroy', $permission-&gt;id) }}" method="POST"&gt;<br/>                                                    &lt;a href="{{route('permission.edit', $permission-&gt;id)}}" class="px-4 py-2 text-white mr-4 bg-blue-600"&gt;<br/>                                                        {{ __('Edit') }}<br/>                                                    &lt;/a&gt;<br/>@csrf<br/>                                                    @method('DELETE')<br/>                                                    &lt;button class="px-4 py-2 text-white bg-red-600"&gt;<br/>                                                        {{ __('Delete') }}<br/>                                                    &lt;/button&gt;<br/>                                                &lt;/form&gt;<br/>                                            &lt;/td&gt;<br/>&lt;/tr&gt;<br/>                                        @endforeach<br/>                                    &lt;/tbody&gt;<br/>                                &lt;/table&gt;<br/>                            &lt;/div&gt;<br/>                            &lt;div class="py-8"&gt;<br/>                                {{ $permissions-&gt;links() }}<br/>                            &lt;/div&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/x-app-layout&gt;</span></pre><p id="c63c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这个页面必须创建，读取和更新链接。还在表单中添加了一个删除按钮。</p><p id="7f19" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">用下面的代码更新销毁函数</p><p id="aa8d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">app/Http/Controllers/Admin/permission controller . PHP</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="c13a" class="oe mh iq ns b be of og l oh oa">public function destroy(Permission $permission)<br/>{<br/>    $permission-&gt;delete();<br/>    return redirect()-&gt;route('permission.index')<br/>                    -&gt;with('message','Permission deleted successfully');<br/>}</span></pre></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h2 id="a1f3" class="nd mh iq bd mi ne nf dn mm ng nh dp mq le ni nj ms li nk nl mu lm nm nn mw no bi translated">5.创建操作</h2><p id="0d63" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">用以下代码更新<code class="fe np nq nr ns b">create</code>函数，并创建<code class="fe np nq nr ns b">create.blade.php</code>视图文件</p><p id="e2f9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">app/Http/Controllers/Admin/permission controller . PHP</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="aa23" class="oe mh iq ns b be of og l oh oa">public function create()<br/>{<br/>    return view('admin.permission.create');<br/>}</span></pre><p id="b907" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">资源/视图/管理/权限/创建. blade.php</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="7f57" class="oe mh iq ns b be of og l oh oa">&lt;x-app-layout&gt;<br/>    &lt;x-slot name="header"&gt;<br/>        &lt;h2 class="font-semibold text-xl text-gray-800 leading-tight"&gt;<br/>            {{ __('Permissions') }}<br/>        &lt;/h2&gt;<br/>    &lt;/x-slot&gt;<br/>&lt;div class="py-12"&gt;<br/>        &lt;div class="max-w-7xl mx-auto sm:px-6 lg:px-8"&gt;<br/>            &lt;div class="bg-white overflow-hidden shadow-sm sm:rounded-lg"&gt;<br/>                &lt;div class="px-6"&gt;<br/>                    &lt;h1 class="inline-block text-2xl sm:text-3xl font-extrabold text-slate-900 tracking-tight dark:text-slate-200 py-4 block sm:inline-block flex"&gt;{{ __('Create permission') }}&lt;/h1&gt;<br/>                    &lt;a href="{{route('permission.index')}}" class="no-underline hover:underline text-cyan-600 dark:text-cyan-400"&gt;{{ __('&lt;&lt; Back to all permission') }}&lt;/a&gt;<br/>                    @if ($errors-&gt;any())<br/>                        &lt;ul class="mt-3 list-none list-inside text-sm text-red-400"&gt;<br/>                            @foreach ($errors-&gt;all() as $error)<br/>                                &lt;li&gt;{{ $error }}&lt;/li&gt;<br/>                            @endforeach<br/>                        &lt;/ul&gt;<br/>                    @endif<br/>                &lt;/div&gt;<br/>                &lt;div class="w-full px-6 py-4 bg-white overflow-hidden"&gt;<br/>&lt;form method="POST" action="{{ route('permission.store') }}"&gt;<br/>                    @csrf<br/>&lt;div class="py-2"&gt;<br/>                            &lt;label for="name" class="block font-medium text-sm text-gray-700{{$errors-&gt;has('name') ? ' text-red-400' : ''}}"&gt;{{ __('Name') }}&lt;/label&gt;<br/>&lt;input id="name" class="rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 block mt-1 w-full{{$errors-&gt;has('name') ? ' border-red-400' : ''}}"<br/>                                            type="text"<br/>                                            name="name"<br/>                                            value="{{ old('name') }}"<br/>                                            /&gt;<br/>                        &lt;/div&gt;<br/>&lt;div class="flex justify-end mt-4"&gt;<br/>                            &lt;button type='submit' class='inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150'&gt;<br/>                                {{ __('Create') }}<br/>                            &lt;/button&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/form&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/x-app-layout&gt;</span></pre><p id="8c3c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在浏览器中浏览<code class="fe np nq nr ns b">http://localhost/admin/permission/create</code>网址。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/c6b88d25ae0a54bda6b002af1dfc69eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I0lLdYbtl5wV8qxHYeh15A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">创建表单</figcaption></figure><p id="7f6c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">提交动作将调用<code class="fe np nq nr ns b">store</code>函数。所以复制下面的代码<code class="fe np nq nr ns b">store</code>函数</p><p id="20a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">app/Http/Controllers/Admin/permission controller . PHP</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="8194" class="oe mh iq ns b be of og l oh oa">public function store(Request $request)<br/>{<br/>    $request-&gt;validate([<br/>        'name' =&gt; 'required|string|max:255|unique:'.config('permission.table_names.permissions', 'permissions').',name',<br/>    ]);<br/>    Permission::create($request-&gt;all());<br/>    return redirect()-&gt;route('permission.index')<br/>                    -&gt;with('message','Permission created successfully.');<br/>}</span></pre><p id="f2b9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe np nq nr ns b">$request-&gt;validate</code>用于验证创建的表单。</p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h2 id="dc9b" class="nd mh iq bd mi ne nf dn mm ng nh dp mq le ni nj ms li nk nl mu lm nm nn mw no bi translated">6.更新操作</h2><p id="ed88" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">类似于创建两个用于更新的函数。显示表格的<code class="fe np nq nr ns b">edit</code>功能和保存表格的<code class="fe np nq nr ns b">update</code>功能。</p><p id="5cc8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">app/Http/Controllers/Admin/permission controller . PHP</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="de82" class="oe mh iq ns b be of og l oh oa">public function edit(Permission $permission)<br/>{<br/>    return view('admin.permission.edit',compact('permission'));<br/>}<br/>public function update(Request $request, Permission $permission)<br/>{<br/>    $request-&gt;validate([<br/>        'name' =&gt; 'required|string|max:255|unique:'.config('permission.table_names.permissions', 'permissions').',name,'.$permission-&gt;id,<br/>    ]);<br/>    $permission-&gt;update($request-&gt;all());<br/>    return redirect()-&gt;route('permission.index')<br/>                    -&gt;with('message','Permission updated successfully.');<br/>}</span></pre><p id="3abc" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">资源/视图/管理/权限/编辑. blade.php</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="150f" class="oe mh iq ns b be of og l oh oa">&lt;x-app-layout&gt;<br/>    &lt;x-slot name="header"&gt;<br/>        &lt;h2 class="font-semibold text-xl text-gray-800 leading-tight"&gt;<br/>            {{ __('Permissions') }}<br/>        &lt;/h2&gt;<br/>    &lt;/x-slot&gt;<br/>&lt;div class="py-12"&gt;<br/>        &lt;div class="max-w-7xl mx-auto sm:px-6 lg:px-8"&gt;<br/>            &lt;div class="bg-white overflow-hidden shadow-sm sm:rounded-lg"&gt;<br/>                &lt;div class="px-6"&gt;<br/>                    &lt;h1 class="inline-block text-2xl sm:text-3xl font-extrabold text-slate-900 tracking-tight dark:text-slate-200 py-4 block sm:inline-block flex"&gt;{{ __('Update permission') }}&lt;/h1&gt;<br/>                    &lt;a href="{{route('permission.index')}}" class="no-underline hover:underline text-cyan-600 dark:text-cyan-400"&gt;{{ __('&lt;&lt; Back to all permission') }}&lt;/a&gt;<br/>                    @if ($errors-&gt;any())<br/>                        &lt;ul class="mt-3 list-none list-inside text-sm text-red-400"&gt;<br/>                            @foreach ($errors-&gt;all() as $error)<br/>                                &lt;li&gt;{{ $error }}&lt;/li&gt;<br/>                            @endforeach<br/>                        &lt;/ul&gt;<br/>                    @endif<br/>                &lt;/div&gt;<br/>                &lt;div class="w-full px-6 py-4 bg-white overflow-hidden"&gt;<br/>&lt;form method="POST" action="{{ route('permission.update', $permission-&gt;id) }}"&gt;<br/>                    @csrf<br/>                    @method('PUT')<br/>&lt;div class="py-2"&gt;<br/>                            &lt;label for="name" class="block font-medium text-sm text-gray-700{{$errors-&gt;has('name') ? ' text-red-400' : ''}}"&gt;{{ __('Name') }}&lt;/label&gt;<br/>&lt;input id="name" class="rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 block mt-1 w-full{{$errors-&gt;has('name') ? ' border-red-400' : ''}}"<br/>                                            type="text"<br/>                                            name="name"<br/>                                            value="{{ old('name', $permission-&gt;name) }}"<br/>                                            /&gt;<br/>                        &lt;/div&gt;<br/>&lt;div class="flex justify-end mt-4"&gt;<br/>                            &lt;button type='submit' class='inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150'&gt;<br/>                                {{ __('Update') }}<br/>                            &lt;/button&gt;<br/>                        &lt;/div&gt;<br/>                    &lt;/form&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/x-app-layout&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/613d7d154897368fdcfd4f44f8288894.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U7HNU_2HVKSJc1wFGd5H5Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">更新表单</figcaption></figure></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h2 id="da66" class="nd mh iq bd mi ne nf dn mm ng nh dp mq le ni nj ms li nk nl mu lm nm nn mw no bi translated">7.查看操作</h2><p id="f52f" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">我们权限 CRUD 中的最后一个操作。<code class="fe np nq nr ns b">show</code>功能用于查看操作。</p><p id="a50c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">app/Http/Controllers/Admin/permission controller . PHP</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="a9ba" class="oe mh iq ns b be of og l oh oa">public function show(Permission $permission)<br/>{<br/>    return view('admin.permission.show',compact('permission'));<br/>}</span></pre><p id="7e87" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">资源/视图/管理/权限/显示. blade.php</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="0d33" class="oe mh iq ns b be of og l oh oa">&lt;x-app-layout&gt;<br/>    &lt;x-slot name="header"&gt;<br/>        &lt;h2 class="font-semibold text-xl text-gray-800 leading-tight"&gt;<br/>            {{ __('Permissions') }}<br/>        &lt;/h2&gt;<br/>    &lt;/x-slot&gt;<br/>&lt;div class="py-12"&gt;<br/>        &lt;div class="max-w-7xl mx-auto sm:px-6 lg:px-8"&gt;<br/>            &lt;div class="bg-white overflow-hidden shadow-sm sm:rounded-lg"&gt;<br/>                &lt;div class="px-6"&gt;<br/>                    &lt;h1 class="inline-block text-2xl sm:text-3xl font-extrabold text-slate-900 tracking-tight dark:text-slate-200 py-4 block sm:inline-block flex"&gt;{{ __('View permission') }}&lt;/h1&gt;<br/>                    &lt;a href="{{route('permission.index')}}" class="no-underline hover:underline text-cyan-600 dark:text-cyan-400"&gt;{{ __('&lt;&lt; Back to all permission') }}&lt;/a&gt;<br/>                    @if ($errors-&gt;any())<br/>                        &lt;ul class="mt-3 list-none list-inside text-sm text-red-400"&gt;<br/>                            @foreach ($errors-&gt;all() as $error)<br/>                                &lt;li&gt;{{ $error }}&lt;/li&gt;<br/>                            @endforeach<br/>                        &lt;/ul&gt;<br/>                    @endif<br/>                &lt;/div&gt;<br/>                &lt;div class="w-full px-6 py-4"&gt;<br/>                    &lt;div class="min-w-full border-b border-gray-200 shadow"&gt;<br/>                        &lt;table class="table-fixed w-full text-sm"&gt;<br/>                            &lt;tbody class="bg-white dark:bg-slate-800"&gt;<br/>                                &lt;tr&gt;<br/>                                    &lt;td class="border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400"&gt;{{ __('Name') }}&lt;/td&gt;<br/>                                    &lt;td class="border-b border-slate-100 dark:border-slate-700 p-4 text-slate-500 dark:text-slate-400"&gt;{{$permission-&gt;name}}&lt;/td&gt;<br/>                                &lt;/tr&gt;<br/>                                &lt;tr&gt;<br/>                                    &lt;td class="border-b border-slate-100 dark:border-slate-700 p-4 pl-8 text-slate-500 dark:text-slate-400"&gt;{{ __('Created') }}&lt;/td&gt;<br/>                                    &lt;td class="border-b border-slate-100 dark:border-slate-700 p-4 text-slate-500 dark:text-slate-400"&gt;{{$permission-&gt;created_at}}&lt;/td&gt;<br/>                                &lt;/tr&gt;<br/>                            &lt;/tbody&gt;<br/>                        &lt;/table&gt;<br/>                    &lt;/div&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/x-app-layout&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/e60f7a87707112be17a49ec68c3432ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DWTmfrYkPQNJUGnyPR48aw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">查看页面</figcaption></figure></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><h2 id="5f60" class="nd mh iq bd mi ne nf dn mm ng nh dp mq le ni nj ms li nk nl mu lm nm nn mw no bi translated">8.向导航添加链接</h2><p id="dda9" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">我们已经完成了 CRUD 的创建。在 navigation.blade.php 的导航链接下添加许可链接</p><p id="d9ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">资源/视图/布局/导航. blade.php</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="93eb" class="oe mh iq ns b be of og l oh oa">&lt;!-- Navigation Links --&gt;<br/>&lt;div class="hidden space-x-8 sm:-my-px sm:ml-10 sm:flex"&gt;<br/>    &lt;x-nav-link :href="route('dashboard')" :active="request()-&gt;routeIs('dashboard')"&gt;<br/>        {{ __('Dashboard') }}<br/>    &lt;/x-nav-link&gt;<br/>    &lt;x-nav-link :href="route('permission.index')" :active="request()-&gt;routeIs('permission.index')"&gt;<br/>        {{ __('Permission') }}<br/>    &lt;/x-nav-link&gt;<br/>&lt;/div&gt;</span></pre><p id="4a72" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于移动导航</p><pre class="kg kh ki kj gt nt ns ob bn oc od bi"><span id="fa83" class="oe mh iq ns b be of og l oh oa">&lt;!-- Responsive Navigation Menu --&gt;<br/>    &lt;div :class="{'block': open, 'hidden': ! open}" class="hidden sm:hidden"&gt;<br/>        &lt;div class="pt-2 pb-3 space-y-1"&gt;<br/>            &lt;x-responsive-nav-link :href="route('dashboard')" :active="request()-&gt;routeIs('dashboard')"&gt;<br/>                {{ __('Dashboard') }}<br/>            &lt;/x-responsive-nav-link&gt;<br/>            &lt;x-responsive-nav-link :href="route('permission.index')" :active="request()-&gt;routeIs('permission.index')"&gt;<br/>                {{ __('Permission') }}<br/>            &lt;/x-responsive-nav-link&gt;<br/>        &lt;/div&gt;</span></pre><p id="7594" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们成功地创造了我们的第一个 Laravel CRUD。这个许可 CRUD 对所有经过认证的用户开放。因此，在接下来的部分，我们需要将基于权限的访问限制添加到我们的权限 CRUD 中。</p><p id="94f0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">还需要添加到我们的索引页面搜索。</p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt or"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-enable-xdebug-on-laravel-sail-and-debugging-code-with-vs-code-872fd750b340"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">如何在 Laravel Sail 上启用 Xdebug 并用 VS 代码调试代码</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">用 XDebug 和 Visual Studio 代码调试 Laravel</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">blog.devgenius.io</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf kp or"/></div></div></a></div><h1 id="a224" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">GitHub 知识库</h1><p id="b851" class="pw-post-body-paragraph kv kw iq kx b ky my jr la lb mz ju ld le na lg lh li nb lk ll lm nc lo lp lq ij bi translated">许可代码可在<a class="ae lr" href="https://github.com/balajidharma/basic-laravel-admin-panel/tree/archive/1.0.2" rel="noopener ugc nofollow" target="_blank"> 1.0.2 </a>分支上获得</p></div><div class="ab cl oi oj hu ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ij ik il im in"><p id="c433" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">上一部分—第 3 部分:<a class="ae lr" rel="noopener ugc nofollow" target="_blank" href="/laravel-user-roles-and-permissions-6dbfd4abfcf8">用户角色和权限</a></p><p id="0b5f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下一部分—第 5 部分:<a class="ae lr" rel="noopener ugc nofollow" target="_blank" href="/laravel-crud-access-control-based-on-role-and-permission-f190d03f1fa2">基于角色和权限的 Laravel CRUD 访问控制</a></p></div></div>    
</body>
</html>