<html>
<head>
<title>React Bootstrap — Customizing Overlays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React 引导—自定义覆盖</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/react-bootstrap-customizing-overlays-b51bb804794e?source=collection_archive---------5-----------------------#2020-08-19">https://blog.devgenius.io/react-bootstrap-customizing-overlays-b51bb804794e?source=collection_archive---------5-----------------------#2020-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1072c0e036274c0b20fcdc133ec6615e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K4H92wdZnYnbt0md"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">布鲁克·拉克在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="1c5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React Bootstrap 是为 React 开发的 Bootstrap 的一个版本。</p><p id="b124" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一组具有引导风格的 React 组件。</p><p id="d41a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用 React Bootstrap 添加覆盖。</p><h1 id="a041" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">禁用元素</h1><p id="fb73" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们想在一个被禁用的元素上触发覆盖，我们必须从一个没有被禁用的包装元素上触发覆盖。</p><p id="b7ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为被禁用的元素不是交互式的。</p><p id="2ba5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="207d" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import "bootstrap/dist/css/bootstrap.min.css";<br/>import Button from "react-bootstrap/Button";<br/>import OverlayTrigger from "react-bootstrap/OverlayTrigger";<br/>import Tooltip from "react-bootstrap/Tooltip";</span><span id="e4a4" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;OverlayTrigger<br/>        trigger="click"<br/>        placement="right"<br/>        overlay={&lt;Tooltip id="tooltip-disabled"&gt;Tooltip!&lt;/Tooltip&gt;}<br/>      &gt;<br/>        &lt;span className="d-inline-block"&gt;<br/>          &lt;Button disabled style={{ pointerEvents: "none" }}&gt;<br/>            Disabled button<br/>          &lt;/Button&gt;<br/>        &lt;/span&gt;<br/>      &lt;/OverlayTrigger&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="4862" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe mt mu mv mj b">trigger</code>和<code class="fe mt mu mv mj b">placement</code>道具，这样当我们点击 disabled 按钮时就可以看到工具提示。</p><p id="1bf5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是可能的，因为我们在按钮周围有一个跨度，当这个跨度被单击时，我们可以触发工具提示。</p><h1 id="1e96" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">更换容器</h1><p id="5955" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以更改容器来控制覆盖图所附加到的 DOM 元素。</p><p id="22b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7a14" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import "bootstrap/dist/css/bootstrap.min.css";<br/>import Button from "react-bootstrap/Button";<br/>import Overlay from "react-bootstrap/Overlay";<br/>import Popover from "react-bootstrap/Popover";</span><span id="39cd" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [show, setShow] = React.useState(false);<br/>  const [target, setTarget] = React.useState(null);<br/>  const ref = React.useRef(null);</span><span id="5872" class="mn lc iq mj b gy ms mp l mq mr">  const handleClick = event =&gt; {<br/>    setShow(!show);<br/>    setTarget(event.target);<br/>  };</span><span id="2905" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div ref={ref}&gt;<br/>      &lt;Button onClick={handleClick}&gt;click me&lt;/Button&gt;</span><span id="c4b9" class="mn lc iq mj b gy ms mp l mq mr">      &lt;Overlay<br/>        show={show}<br/>        target={target}<br/>        placement="bottom"<br/>        container={ref.current}<br/>        containerPadding={20}<br/>      &gt;<br/>        &lt;Popover&gt;<br/>          &lt;Popover.Title as="h1"&gt;Title&lt;/Popover.Title&gt;<br/>          &lt;Popover.Content&gt;<br/>            Lorem ipsum dolor sit amet, consectetur adipiscing &lt;b&gt;elit&lt;/b&gt;.<br/>          &lt;/Popover.Content&gt;<br/>        &lt;/Popover&gt;<br/>      &lt;/Overlay&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="2371" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将弹出框而不是按钮附加到 div。</p><p id="3c9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">container</code>设置为 div 的 ref 的 ref。</p><p id="be79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代码的其余部分与其他 popovers 相同。</p><h1 id="6dfd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动态更新位置</h1><p id="6513" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">弹出器的位置可以动态更新。</p><p id="d1d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="cecc" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import "bootstrap/dist/css/bootstrap.min.css";<br/>import Button from "react-bootstrap/Button";<br/>import OverlayTrigger from "react-bootstrap/OverlayTrigger";<br/>import Popover from "react-bootstrap/Popover";</span><span id="fa35" class="mn lc iq mj b gy ms mp l mq mr">const UpdatingPopover = React.forwardRef(<br/>  ({ popper, children, show: _, ...props }, ref) =&gt; {<br/>    React.useEffect(() =&gt; {<br/>      popper.scheduleUpdate();<br/>    }, [children, popper]);</span><span id="caef" class="mn lc iq mj b gy ms mp l mq mr">    return (<br/>      &lt;Popover ref={ref} content {...props}&gt;<br/>        {children}<br/>      &lt;/Popover&gt;<br/>    );<br/>  }<br/>);</span><span id="4feb" class="mn lc iq mj b gy ms mp l mq mr">const longContent = `<br/>  Lorem ipsum dolor sit amet, <br/>  consectetur adipiscing elit. <br/>  Cras ac urna bibendum, pretium magna id, <br/>  imperdiet erat.<br/>`;<br/>const shortContent = "Lorem ipsum";</span><span id="8156" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [content, setContent] = React.useState(shortContent);</span><span id="4ba8" class="mn lc iq mj b gy ms mp l mq mr">  React.useEffect(() =&gt; {<br/>    const timerId = setInterval(() =&gt; {<br/>      setContent(content === shortContent ? longContent : shortContent);<br/>    }, 3000);</span><span id="1162" class="mn lc iq mj b gy ms mp l mq mr">    return () =&gt; clearInterval(timerId);<br/>  });</span><span id="0408" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;&gt;<br/>      &lt;style type="text/css"&gt;<br/>        {`<br/>        .btn-primary {<br/>          position: absolute;<br/>          top: 50vh;<br/>          left: 0vw;<br/>        }<br/>      `}<br/>      &lt;/style&gt;<br/>      &lt;OverlayTrigger<br/>        trigger="click"<br/>        overlay={&lt;UpdatingPopover&gt;{content}&lt;/UpdatingPopover&gt;}<br/>      &gt;<br/>        &lt;Button&gt;click me!&lt;/Button&gt;<br/>      &lt;/OverlayTrigger&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="48d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建定期更改文本的工具提示。</p><p id="f087" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有 th <code class="fe mt mu mv mj b">UpdatingPopover</code>组件，它有<code class="fe mt mu mv mj b">useEffect</code>钩子来观察变化。</p><p id="6a3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe mt mu mv mj b">scheduleUpdate</code>来更新 popover。</p><p id="5773" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们观察<code class="fe mt mu mv mj b">children</code>和<code class="fe mt mu mv mj b">popper</code>属性的变化，以确保当这些变化发生时我们调用<code class="fe mt mu mv mj b">scheduleUpdate</code>。</p><p id="ad24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将 ref 和其他道具传递给 popover，这样就可以应用位置和其他东西。</p><p id="ac2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">children</code>是我们工具提示的内容。</p><p id="d672" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">App</code>中，我们有<code class="fe mt mu mv mj b">OverlayTrigger</code>，它的文本周期性地变化。</p><p id="e37e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击按钮时它就会被触发。</p><p id="3e17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">工具提示的内容由<code class="fe mt mu mv mj b">useEffect</code>回调中的<code class="fe mt mu mv mj b">setContent</code>函数设置。</p><p id="a681" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们返回的函数是在卸载组件时清除计时器。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/8af4470c5bce312052bbbee3796928be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6YDRXjiqvbkSHx44"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@shootdelicious?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Eiliv-Sonas Aceron </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="861b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ec36" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以让松饼充满活力。</p><p id="5ab1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过在禁用的元素周围添加包装器来触发覆盖。</p><p id="b44f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以指定要附加覆盖的容器。</p></div></div>    
</body>
</html>