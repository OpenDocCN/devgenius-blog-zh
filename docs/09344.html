<html>
<head>
<title>How to elegantly encapsulate the content returned by the interface?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何优雅地封装接口返回的内容？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-elegantly-encapsulate-the-content-returned-by-the-interface-798e6999c39a?source=collection_archive---------19-----------------------#2022-08-15">https://blog.devgenius.io/how-to-elegantly-encapsulate-the-content-returned-by-the-interface-798e6999c39a?source=collection_archive---------19-----------------------#2022-08-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="764f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">SpringBoot 接口统一返回</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/588e114a8b20e3986363e10a20e6a5cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xeOermsMY-1vDI5k"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@slavasfotos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Slava Keyzman </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="099a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用 SpringBoot 开发 Restful 接口时，统一返回便于前端开发和封装，出现时给出响应代码和信息。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="f58e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> RESTful API。</strong></p><p id="4e9c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">什么休息？代表性状态转移。</p><p id="c0f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用一句话概括:REST 是所有 web 应用程序都应该遵守的架构设计准则。</p><p id="091f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">面向资源是 REST 最明显的特征，是对同一资源的一组不同操作。资源是服务器上可命名的抽象概念。资源是围绕名词组织的。首先要重点关注的是名词。</p><p id="bc34" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">REST 要求对资源的各种操作必须通过一个统一的接口来执行，每个资源只能执行有限的一组操作。</p><p id="79a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">什么是 RESTful API？</p><p id="b4ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">符合 REST 设计标准的 API 是 RESTful API。REST 架构设计、标准和遵循的准则是 HTTP 协议的性能。</p><p id="c83d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">换句话说，HTTP 协议是一种属于 REST 架构的设计模式。比如无状态，请求-响应。</p><p id="11f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Restful 相关文档可以参考<a class="ae ky" href="https://restfulapi.net/" rel="noopener ugc nofollow" target="_blank">https://restfulapi.net/</a>。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="6193" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">为什么要统一封装接口？</strong></p><p id="4d8c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在大部分项目都是前后分离的模式开发，统一返回方便前端开发和封装，出现时给出响应代码和信息。</p><p id="4c28" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就查询用户界面而言，如果没有封装，返回的结果如下。</p><pre class="kj kk kl km gt lg lh li lj aw lk bi"><span id="bdfa" class="ll lm in lh b gy ln lo l lp lq">{<br/>  "userId": 1,<br/>  "userName": "foo"<br/>}</span></pre><p id="9c71" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果是封装的，返回的正常结果如下:</p><pre class="kj kk kl km gt lg lh li lj aw lk bi"><span id="f514" class="ll lm in lh b gy ln lo l lp lq">{<br/>  "timestamp": 11111111111,<br/>  "status": 200,<br/>  "message": "success",<br/>  "data": {<br/>    "userId": 1,<br/>    "userName": "foo"<br/>  }<br/>}</span></pre><p id="cc2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">异常返回结果如下:</p><pre class="kj kk kl km gt lg lh li lj aw lk bi"><span id="2fa0" class="ll lm in lh b gy ln lo l lp lq">{<br/>  "timestamp": 11111111111,<br/>  "status": 10001,<br/>  "message": "User not exist",<br/>  "data": <strong class="lh io">null</strong><br/>}</span></pre></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="fa6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">实施案例。</strong></p><p id="5f3e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"># 1.状态代码封装。</p><p id="b34b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是一个常见状态代码的例子，它包含两个属性，<code class="fe lr ls lt lh b">responseCode</code>和<code class="fe lr ls lt lh b">description</code>。</p><p id="c584" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果有其他业务状态代码，也可以放在这个类中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="3a20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"># 2.返回内容封装。</p><p id="1a98" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">包含公共接口返回时间、<code class="fe lr ls lt lh b">status</code>、<code class="fe lr ls lt lh b">message</code>、<code class="fe lr ls lt lh b">data</code>。</p><p id="4bfc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">考虑到数据的序列化(如通过网络传输)，这里的数据有时<code class="fe lr ls lt lh b">extends Serializable</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="0157" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"># 3.当接口返回时调用。</p><p id="dd58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接口返回时调用，以用户界面为例。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lu lv l"/></div></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="0cc7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢您阅读这篇文章。</p><p id="8a93" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">敬请关注更多内容。</p></div></div>    
</body>
</html>