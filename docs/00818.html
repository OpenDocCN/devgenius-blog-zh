<html>
<head>
<title>What is the difference between String and StringBuilder?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">String 和 StringBuilder 有什么区别？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-is-the-difference-between-string-and-stringbuilder-bc533f8f16f2?source=collection_archive---------12-----------------------#2020-06-17">https://blog.devgenius.io/what-is-the-difference-between-string-and-stringbuilder-bc533f8f16f2?source=collection_archive---------12-----------------------#2020-06-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/3dcab04c5b3031561da3392ec6338701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2qM5iGqM_Y-IDOmo"/></div></div></figure><div class=""/><p id="abd5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当应用程序必须处理大量字符串的编辑时，<strong class="ka jc">字符串</strong>和<strong class="ka jc">字符串生成器</strong>之间的区别是一个重要的概念。</p><h1 id="9d50" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">线</h1><p id="54ff" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">字符串对象是由一个<strong class="ka jc">系统表示的<strong class="ka jc"> UTF-16 </strong>代码单元的集合。Char </strong>属于系统名称空间的对象。由于这个对象的值<strong class="ka jc">是只读的</strong>，整个对象字符串被定义为<strong class="ka jc">不可变的</strong>。一个字符串对象在内存中的最大大小是<strong class="ka jc"> 2 GB </strong>，或者大约<strong class="ka jc">10 亿个字符</strong>。</p><h1 id="a21c" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">不变的</h1><p id="0c03" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">不可变意味着每次系统的方法。字符串，则在内存中创建一个新的字符串对象，这将导致为新对象重新分配空间。</p><p id="1cd4" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，通过使用字符串串联运算符+=显示名为 test 的字符串变量的值发生了变化。它生成一个新的 String 对象，该对象具有与原始对象不同的值和地址，并将它赋给测试变量。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="e83a" class="mi kx jb me b gy mj mk l ml mm">string test;<br/>test += “red”; // a new object string is created<br/>test += “coding”; // a new object string is created<br/>test += “planet”; // a new object string is created</span></pre><h1 id="8aeb" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">StringBuilder</h1><p id="f5fc" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">StringBuilder 是一个属于<strong class="ka jc">系统的动态对象。Text </strong>命名空间，并允许修改它封装的字符串中的字符数；这种特性叫做<strong class="ka jc">可变性</strong>。</p><h1 id="a900" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">易变性</h1><p id="f894" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">StringBuilder 维护一个缓冲区来容纳字符串的扩展，以便能够追加、移除、替换或插入字符。如果缓冲区中有可用空间，则添加新数据。否则，分配一个新的、更大的缓冲区，将原始缓冲区中的数据复制到新缓冲区，然后将新数据追加到新缓冲区中。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="c3a6" class="mi kx jb me b gy mj mk l ml mm">StringBuilder sb = new StringBuilder(“”);<br/>sb.Append(“red”);<br/>sb.Append(“blue”);<br/>sb.Append(“green “);<br/>string colors = sb.ToString();</span></pre><h1 id="ef5d" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">长度、容量和最大容量</h1><ul class=""><li id="646f" class="mn mo jb ka b kb lu kf lv kj mp kn mq kr mr kv ms mt mu mv bi translated">StringBuilder。Length: 这个<strong class="ka jc"> </strong>属性定义了 StringBuilder 实例当前包含的字符数。</li><li id="d74d" class="mn mo jb ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated"><strong class="ka jc"> StringBuilder。Capacity: </strong>该属性指定当前实例可以包含的字符数。每当添加的字符数使长度大于容量时，capacity 属性的值就会加倍。</li><li id="ca6d" class="mn mo jb ka b kb mw kf mx kj my kn mz kr na kv ms mt mu mv bi translated"><strong class="ka jc"> StringBuilder。MaxCapacity: </strong>这个属性定义了可以分配给 StringBuilder 的最大大小。当达到最大容量时，无法为 StringBuilder 对象分配更多的内存。试图添加字符或将其扩展到超出其最大容量会引发<strong class="ka jc">ArgumentOutOfRangeException</strong>或<strong class="ka jc"> OutOfMemoryException </strong>异常。</li></ul><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f867" class="mi kx jb me b gy mj mk l ml mm">StringBuilder sb = new StringBuilder();<br/>Console.WriteLine(“Capacity: {0} | Length: {1}”, sb.Capacity, sb.Length);<br/>sb.Append(“This is a sentence.”);<br/>Console.WriteLine(“Capacity: {0} | Length: {1}”, sb.Capacity, sb.Length);<br/>for (int ctr = 0; ctr &lt; 3; ctr++) <br/>{<br/>    sb.Append(“This is an additional sentence.”);<br/>    Console.WriteLine(“Capacity: {0} | Length: {1}”, sb.Capacity, sb.Length);<br/>}</span><span id="1eca" class="mi kx jb me b gy nb mk l ml mm">// Output<br/>// Capacity: 16 | Length: 0<br/>// Capacity: 32 | Length: 19<br/>// Capacity: 64 | Length: 50<br/>// Capacity: 128 | Length: 81<br/>// Capacity: 128 | Length: 112</span></pre><h1 id="2fa7" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">演出</h1><p id="5557" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">为了帮助您更好地理解 String 和 StringBuilder 之间的性能差异，我创建了以下示例:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="7585" class="mi kx jb me b gy mj mk l ml mm">Stopwatch timer = new Stopwatch();<br/>string str = string.Empty;<br/>timer.Start();<br/>for (int i = 0; i &lt; 10000; i++) <br/>{<br/>    str += i.ToString();<br/>}<br/>timer.Stop();<br/>Console.WriteLine(“String : {0}”, timer.Elapsed);<br/>timer.Restart();<br/>StringBuilder sbr = new StringBuilder(string.Empty);<br/>for (int i = 0; i &lt; 10000; i++) <br/>{<br/>    sbr.Append(i.ToString());<br/>}<br/>timer.Stop();<br/>Console.WriteLine(“StringBuilder : {0}”, timer.Elapsed);<br/>// Output<br/>// String : 00:00:00.0706661<br/>// StringBuilder : 00:00:00.0012373</span></pre></div></div>    
</body>
</html>