<html>
<head>
<title>Configure ESLint, Prettier and CommitLint in your JavaScript Project.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在您的 JavaScript 项目中配置 ESLint、Prettier 和 CommitLint。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/enforce-strict-code-style-in-a-team-cda6f68d944b?source=collection_archive---------2-----------------------#2022-04-29">https://blog.devgenius.io/enforce-strict-code-style-in-a-team-cda6f68d944b?source=collection_archive---------2-----------------------#2022-04-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/12494f7574ac762f3070a4ae34746eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*h5Cm2AqM-bkj4A4y4F0fwg.jpeg"/></div></div></figure><blockquote class="jv jw jx"><p id="b072" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以，如果你想走得快，如果你想快速完成，如果你想让你的代码容易写，让它容易阅读。罗伯特·c·马丁。</p></blockquote><p id="f1d5" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">当你在一个大型项目的团队中工作时，拥有一个干净的代码是一个真正的福音。这在调试时节省了大量的时间，并使同行代码审查非常顺利。但是你如何做到这一点呢？这很简单。组合使用 husky、pre-commit、es-lint、commitlint 和 appellister。让我们分别讨论一下。</p><p id="0567" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb io"> Husky </strong> : Husky 是一个非常受欢迎的工具，可以让你针对你的存储库运行定制脚本。它可以与任何包含 package.json 文件的存储库无缝协作。通过确保单元测试、林挺和其他检查在每次提交前自动运行，它可以帮助提高代码质量。点击了解更多信息<a class="ae la" href="https://typicode.github.io/husky" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a5b2" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb io">预提交</strong> : <strong class="kb io">预提交</strong>是<code class="fe lb lc ld le b">git</code>的预提交钩子安装程序。预提交挂钩是您希望在代码提交到远程存储库之前运行的脚本。和哈士奇不一样。你可以想象 pre-commit 是一辆车，哈士奇是它的司机。如果没有，您就无法利用预提交的潜力。</p><p id="2fdf" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb io"> EsLint </strong>:由 Nicholas C. Zakas 于 2013 年 6 月开发，<strong class="kb io"> ESLint </strong>是一款开源的 EcmaScript/Javascript 林挺工具<strong class="kb io"> </strong>，用于检查有问题的模式或不符合特定风格准则的代码。它使用抽象语法树(AST)来评估代码中的模式。点击阅读更多关于 AST <a class="ae la" href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" rel="noopener ugc nofollow" target="_blank">的信息。它是完全可插拔的，每一个规则都是一个插件，你可以在运行时添加更多。</a></p><p id="5999" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">类似于 Eslint，commit-lint 是一个工具，它链接提交并使你的团队遵循一个特定的提交风格。它的功能相当于一个 husky 预提交挂钩，这意味着它在代码提交之前运行良好，并且在 lint 检查失败时禁止提交代码。</p><p id="5d9a" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb io">更漂亮:更漂亮</strong>是一个固执己见的代码格式化程序。它通过解析您的代码并根据自己的规则(考虑到最大行长度，必要时换行)重新打印代码来强制执行一致的风格。到目前为止，采用 beautiful 的最大原因是<strong class="kb io">停止所有正在进行的关于风格的争论</strong>。人们普遍认为，拥有一个通用的风格指南对于一个项目和团队来说是有价值的，但是实现它是一个非常痛苦和没有回报的过程。</p><p id="5dc3" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">行..理论太多，一次消化不了，也很无聊。</p><figure class="lf lg lh li gt jo"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="a85f" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">让我们跳到精彩的部分…</p><p id="5acb" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">首先从 create-react-app 模板安装一个 react 应用程序。</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="ae00" class="lp lq in le b gy lr ls l lt lu">npx create-react-app bestcodeapp --template typescript</span></pre><p id="55db" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">一旦安装完成。为了启用预提交，您需要初始化 git 存储库。让我们现在做那件事。</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="ea86" class="lp lq in le b gy lr ls l lt lu">1. git init<br/>2. git add .<br/>3. git branch -M develop</span></pre><p id="c63b" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">现在，让我们安装我们的依赖项。</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="304c" class="lp lq in le b gy lr ls l lt lu">yarn add --dev husky lint-staged prettier eslint eslint-config-airbnb eslint-config-airbnb-base @typescript-eslint/parser @typescript-eslint/eslint-plugin @commitlint/cli @commitlint/config-conventional eslint-config-prettier eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-react eslint-plugin-react-hooks</span></pre><p id="8575" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">一旦安装完成。让我们从配置<strong class="kb io"> eslint </strong>开始。</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="37f0" class="lp lq in le b gy lr ls l lt lu">npx eslint --init</span></pre><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/df83dae415755267ef4807208332b923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p1_SnlXxy29rQK1woutMUw.png"/></div></div></figure><ul class=""><li id="5cc0" class="lw lx in kb b kc kd kg kh kx ly ky lz kz ma kw mb mc md me bi translated">你应该得到类似上面图像的选项。选择第三个选项。</li></ul><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mf"><img src="../Images/15e7739066e1435f6162ab466366f412.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bHrCu7fC854n_kqplQKPQ.png"/></div></div></figure><ul class=""><li id="9207" class="lw lx in kb b kc kd kg kh kx ly ky lz kz ma kw mb mc md me bi translated">选择 Javascript 模块。然后回车。</li></ul><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mg"><img src="../Images/aa8713d44474bde30d7a45c6c3956fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tYgtnX4-5DYj51ykHkUtjQ.png"/></div></div></figure><ul class=""><li id="71dd" class="lw lx in kb b kc kd kg kh kx ly ky lz kz ma kw mb mc md me bi translated">因为我们在本教程中使用 react，所以您也可以继续使用其他框架。程序仍然保持不变。</li></ul><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mh"><img src="../Images/e449442c7bc9358dd9e83b8da5450345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b48iFoNh5z6Vln-dir35RA.png"/></div></div></figure><ul class=""><li id="e066" class="lw lx in kb b kc kd kg kh kx ly ky lz kz ma kw mb mc md me bi translated">根据您是否使用 Typescript，继续使用选项。我现在会选择<strong class="kb io">是的</strong>。</li></ul><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mi"><img src="../Images/b69d0a1f108fa15d412218952de15b03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1CvHaa7Hn2CEu0x1GCLJQQ.png"/></div></div></figure><ul class=""><li id="6116" class="lw lx in kb b kc kd kg kh kx ly ky lz kz ma kw mb mc md me bi translated">选择浏览器。如果您正在编写节点 JS API，那么您需要选择第二个选项。</li></ul><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/ef9639e9d421aee97ec74a8cd6a58a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MoMbDDfSV491qYDWwpgWiw.png"/></div></div></figure><ul class=""><li id="2b9e" class="lw lx in kb b kc kd kg kh kx ly ky lz kz ma kw mb mc md me bi translated">我会选 Airbnb，个人喜好。随意探索他人。</li></ul><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/60af30521814089fd3c35e0f6b905b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Dt2NUj-hQrno_b9GfC2Xg.png"/></div></div></figure><ul class=""><li id="3aeb" class="lw lx in kb b kc kd kg kh kx ly ky lz kz ma kw mb mc md me bi translated">在 Javascript 和 JSON 之间选择一个。没关系。</li></ul><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/e04a3c9d0162f96aff112a07aacba2a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BBJaEilhwLcVtlH-7ph2DA.png"/></div></div></figure><ul class=""><li id="5415" class="lw lx in kb b kc kd kg kh kx ly ky lz kz ma kw mb mc md me bi translated">我们已经安装了一些以上的依赖项。然而，继续进行<strong class="kb io">是</strong>。</li></ul><p id="e33d" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">继续安装。完成所有安装后，您将看到一个. eslintrc.js 或. eslintrc.json，这取决于您之前选择的格式。</p><p id="77b6" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">我们来补充一些规则。你可以在这里找到关于它们的详细文档<a class="ae la" href="https://eslint.org/docs/rules/" rel="noopener ugc nofollow" target="_blank">。我将在这里提到其中的几个。</a></p><figure class="lf lg lh li gt jo"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="c058" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">现在向 package.json 添加一个脚本。</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="c54d" class="lp lq in le b gy lr ls l lt lu">"lint": "eslint ."</span><span id="18e7" class="lp lq in le b gy mm ls l lt lu">// To specify a specific path use:</span><span id="d7c1" class="lp lq in le b gy mm ls l lt lu">"lint": "eslint 'src/app/*.{js,jsx,ts,tsx}'"</span></pre><p id="9035" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">现在运行:</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="b2fd" class="lp lq in le b gy lr ls l lt lu">yarn lint</span></pre><p id="a737" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">如果你没有遵循上述任何规则，你肯定会看到一些错误。</p><p id="4e89" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">现在，让我们添加 husky 作为预提交挂钩来运行它。</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="b731" class="lp lq in le b gy lr ls l lt lu">npx husky install</span></pre><p id="1ce2" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">您会发现在您的根目录中创建了一个. husky 文件夹。导航到目录并运行:</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="90c7" class="lp lq in le b gy lr ls l lt lu">touch commit-msg pre-commit</span></pre><p id="795f" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">并在其中添加以下代码。</p><figure class="lf lg lh li gt jo"><div class="bz fp l di"><div class="lj lk l"/></div></figure><figure class="lf lg lh li gt jo"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="076e" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">在根目录下运行:</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="ec08" class="lp lq in le b gy lr ls l lt lu">touch commitlint.config.js</span></pre><p id="047b" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">在其中，添加以下代码:</p><figure class="lf lg lh li gt jo"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="1855" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">现在让我们试着提交我们的代码。</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="7a99" class="lp lq in le b gy lr ls l lt lu">1. git commit -m "testing commitlint"<br/>2. git remote add origin YOUR_GIT_URL<br/>3. git push</span></pre><p id="f111" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">您应该会看到类似这样的错误。</p><figure class="lf lg lh li gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/6bd4b5b967a7b3dac3976b6baa307826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XBrKJvv_IHD3oEWuJ0SKRw.png"/></div></div></figure><p id="d231" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">将您的提交消息更改为，以解决上述错误:</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="ba7e" class="lp lq in le b gy lr ls l lt lu">git commit -m "chore: configure husky"</span></pre><p id="15b4" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">点击阅读更多关于常规提交<a class="ae la" href="https://www.conventionalcommits.org/en/v1.0.0/" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="3826" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">现在该加漂亮点了。开始于:</p><pre class="lf lg lh li gt ll le lm ln aw lo bi"><span id="89be" class="lp lq in le b gy lr ls l lt lu">touch .prettierrc.js</span></pre><p id="8095" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">添加以下内容。</p><figure class="lf lg lh li gt jo"><div class="bz fp l di"><div class="lj lk l"/></div></figure><p id="a3d6" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">你现在都准备好了。从你令人敬畏的项目开始。我知道这是一项漫长而耗时的任务。但是相信我，当你的项目规模扩大时，它会节省你大量的时间。目前就这些。</p><p id="3a64" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">如果你想让我为你创建一个模板，让我知道，这样你就可以简单地克隆它，节省一些时间。</p><p id="4fa7" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">我将很快在另一个博客中赶上你。在那之前，保重。快乐编码。！<strong class="kb io">关注</strong>我获取更多此类内容。谢了。祝你有美好的一天！</p><figure class="lf lg lh li gt jo"><div class="bz fp l di"><div class="lj lk l"/></div></figure></div></div>    
</body>
</html>