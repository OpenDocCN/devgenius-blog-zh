<html>
<head>
<title>How to Analyze slow performing GIT-Repos</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何分析性能缓慢的 GIT-Repos</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-analyze-slow-performing-git-repos-48989d26b2c7?source=collection_archive---------9-----------------------#2022-07-18">https://blog.devgenius.io/how-to-analyze-slow-performing-git-repos-48989d26b2c7?source=collection_archive---------9-----------------------#2022-07-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/e46b10eb17223e08fdb6187ec75efd7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/0*xgH_IzfnJljnpalN"/></div></figure><p id="a5b7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">照片由<a class="ae ks" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">扬西·敏</a>在<a class="ae ks" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</p><p id="514f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">有时您会体验到推送到 git 源或从 git 源克隆会花费很长时间。主要原因可能发生在您的报表将在几年内增长，并且您将 git 用于非设计用途时。</p><p id="fa13" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">Git 本身以高度压缩的内部格式存储提交历史，基本上，你可以测量<code class="fe kt ku kv kw b">.git</code>目录的大小。这将有助于测量该目录的大小，因为该大小可能会影响每次克隆或推送的持续时间以及所使用的磁盘空间。</p><h1 id="5e0b" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">什么会导致大量存储使用</h1><p id="9ddb" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">您的存储库具有较大的大小有几个原因。<br/>例如:</p><ul class=""><li id="52f9" class="ma mb iq jw b jx jy kb kc kf mc kj md kn me kr mf mg mh mi bi translated">它可能包含天文数字的 Git 对象<br/>(用于存储存储库的历史)</li><li id="cdb3" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mf mg mh mi bi translated">解压缩时 Git 对象的总大小可能非常大<br/>(即使压缩后它们的大小是合理的)</li><li id="7f90" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mf mg mh mi bi translated">当库被签出时，工作副本的大小可能是巨大的</li><li id="0d6a" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mf mg mh mi bi translated">存储库在其历史中可能有不合理的提交次数</li><li id="7c16" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mf mg mh mi bi translated">它可能包含大量的单个文件或目录</li><li id="79a3" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mf mg mh mi bi translated">它可能包含被修改过很多次的大文件/目录</li><li id="7d14" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mf mg mh mi bi translated">它可能包含太多的引用(分支、标签等)</li></ul><p id="e66c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如上所述，会导致某个 git 操作的性能很差，同时存储库也会变得过大。</p><p id="4345" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">考虑存储库的大小是有意义的。例如，许多贡献者认为 Linux 内核的寿命大约为 25 年，所以它增长到超过 1,5 TB 也就不足为奇了。</p><p id="1ff8" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">但当你的业余爱好周末项目，在这只有你贡献了同样的大小。这有两个原因</p><ul class=""><li id="9286" class="ma mb iq jw b jx jy kb kc kf mc kj md kn me kr mf mg mh mi bi translated">你是超人</li><li id="e234" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mf mg mh mi bi translated">你没有有效地使用 git</li></ul><h1 id="a921" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">确定存储库的规模</h1><p id="fd47" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">当然，你可以浏览每个文件或文件夹，并记下 wit 将使用多少空间。但是这无助于研究 git 内部是如何消耗大部分空间的。为此，有一个工具叫做<code class="fe kt ku kv kw b"><a class="ae ks" href="https://github.com/github/git-sizer/#getting-started" rel="noopener ugc nofollow" target="_blank">git-sizer</a></code>。</p><p id="8b75" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">要将其用于您的存储库，您可以执行以下步骤:</p><ol class=""><li id="b617" class="ma mb iq jw b jx jy kb kc kf mc kj md kn me kr mo mg mh mi bi translated">安装<code class="fe kt ku kv kw b">grid-sizer</code>(手动或用<a class="ae ks" href="https://community.chocolatey.org/packages/git-sizer" rel="noopener ugc nofollow" target="_blank">巧克力扳手</a></li><li id="a7d4" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mo mg mh mi bi translated">使用命令行切换到您的存储库文件夹</li><li id="ff18" class="ma mb iq jw b jx mj kb mk kf ml kj mm kn mn kr mo mg mh mi bi translated">执行<code class="fe kt ku kv kw b">git-sizer</code></li></ol><p id="67a0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您将会看到类似的结果(这是 Linux 内核 Repo):</p><p id="e3a6" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">您会注意到列<code class="fe kt ku kv kw b">level of concern</code>。这将为您提供一个强有力的指示，说明与典型的 git 存储库相比，哪些参数较高。实用的估算方法</p><p id="6ff7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一个点上的星号越多，意味着你的回购超出了最佳时机，可能会导致回购的缓慢执行。</p><p id="ecd9" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果你看到感叹号而不是星号，你肯定有一个需要解决的问题。</p><h1 id="ac96" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">摘要</h1><p id="517e" class="pw-post-body-paragraph ju jv iq jw b jx lv jz ka kb lw kd ke kf lx kh ki kj ly kl km kn lz kp kq kr ij bi translated">Git 以其处理大型开发项目的速度和能力而闻名。但是它有它的极限，如果你把它的极限推得太紧，你的体验可能会受到影响。使用工具<code class="fe kt ku kv kw b">git-sizer</code>来评估您的存储库是否会运行良好，并在瓶颈对您造成伤害之前识别瓶颈:)。</p></div></div>    
</body>
</html>