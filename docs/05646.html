<html>
<head>
<title>How to Safely Build Assigned Flutter App with GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用GitHub Actions安全构建指定的Flutter App</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-safely-build-assigned-flutter-app-with-github-actions-8860b1b6eef6?source=collection_archive---------1-----------------------#2021-09-25">https://blog.devgenius.io/how-to-safely-build-assigned-flutter-app-with-github-actions-8860b1b6eef6?source=collection_archive---------1-----------------------#2021-09-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1b0807526b50d7d35c9f5d7718c02fde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UsxLxVJJKImvYS3T.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://dev.to/maverikai/actionshackathon-journey-with-github-actions-and-flutter-jnm" rel="noopener ugc nofollow" target="_blank">https://dev . to/maverikai/actionshackathon-journey-with-github-actions-and-flutter-jnm</a></figcaption></figure><p id="2a3b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> → </strong> <a class="ae jz" href="http://github.com/wendreof" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">我的GitHub简介。</strong> </a> <strong class="kc io"> <br/> → </strong> <a class="ae jz" href="https://www.linkedin.com/in/wendreof/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">我的LinkedIn个人资料</strong> </a> <strong class="kc io">。<br/> →把</strong> <a class="ae jz" href="https://marketplace.visualstudio.com/items?itemName=wendreof.ufo" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> Ufo主题</strong> </a> <strong class="kc io">放到你的VS代码里。</strong></p><p id="da50" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你好，欢迎来到我的博客。今天的帖子是关于在不损害密钥密码、密钥别名、密钥存储密码以及最重要的文件JKS档案的情况下构建和分配一个Flutter应用程序。</p><p id="8726" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如您可能知道的，有很多原因我们不应该在版本控制中包括key-store.jks，即使是在私有存储库中。所以…我面对这种情况，花了几个小时的空闲时间来做这个方法。软件开发中的一切，这只是一种方式，你可以随意改变你想要的或者你的情况需要的任何设置。</p><p id="51a7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在接下来的例子中，我使用的是一个Flutter应用程序，因此，如果你正在使用另一个框架/平台构建android应用程序，一些命令会有所不同，比如构建应用程序包。</p><p id="9835" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这个帖子的总结下面:</p><ul class=""><li id="9c6d" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">1 —准备build.gradle</li><li id="7d94" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">2 —创建CI/CD工作流</li><li id="c3b0" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">3 —创建key.properties文件</li><li id="ced5" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">4 —对key-store.jks进行编码</li><li id="f72b" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">5 —创建秘密变量</li><li id="6a1a" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">6 —将base64密钥解码为key-store.jks归档并构建应用程序</li><li id="0e7f" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">7-创建工件</li><li id="f10d" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">8-运行工作流</li></ul><p id="4feb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lm">从现在开始，我假设你已经有了</em> <strong class="kc io"> <em class="lm"> Flutter应用</em></strong><em class="lm"/><strong class="kc io"><em class="lm">key-Store . jks文件，</em> </strong> <em class="lm">可以</em> <strong class="kc io"> <em class="lm">上传appbundle </em> </strong> <em class="lm">到</em> <strong class="kc io"> <em class="lm"> Play Store控制台</em> </strong> <em class="lm">并且能够创建一些</em></p><p id="13c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> #1 —准备构建版本</strong></p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="7e40" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于该配置，我们声明它将是一个带有密钥存储数据的key.properties，如别名、密钥和存储密码。</p><p id="87c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> #2 —创建CI/CD工作流</strong></p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="afb2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在您的ci-cd.yml上，我们声明该管道将在主和开发分支上的每个push和pull请求上运行，还声明了一些环境变量，如Java version、Flutter channel和version以及key.properties的路径。</p><p id="6236" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> #3 —创建key.properties文件</strong></p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="cdb7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们使用3个动作，并使用它们和步骤2中的环境变量以及其他变量来创建带有echo命令和一些秘密的key.properties。别担心，我们很快就会创造秘密。</p><p id="1eb8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> #4 —编码key-store.jks </strong>(仅在Linux上测试)</p><p id="064b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用以下命令从key-store.jks归档文件生成base64字符串。</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="372f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> #5 —创建秘密变量</strong></p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/de9c6700913ab077cd508855d47f1e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FC94iQkxhUSLt8SaI0ORwQ.png"/></div></div></figure><p id="506d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">KEYSTORE2 = keybase64.txt步骤4的内容。</p><p id="7cf5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">KEY_ALIAS =您的别名</p><p id="a617" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">KEY_PASSWORD =您的密钥密码</p><p id="3e02" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">KEY_STORE =您的密钥库密码</p><p id="f28a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> #6 —将base64密钥解码为key-store.jks存档和构建应用</strong></p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="3da7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"># 7——创造神器</strong></p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="92dd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过该操作，我们能够下载appbundle。</p><p id="3fe1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> #8 —运行工作流程</strong></p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/f2b7e1b58768f42a92d2976e9ce9ee4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bfXg__rVgfPKWkYFJTYkTA.png"/></div></div></figure><p id="6935" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如您所见，我们的工作流程运行正常！！我们已经准备好将appbundle上传到Play Console上的某个音轨。</p><figure class="ln lo lp lq gt jo"><div class="bz fp l di"><div class="lr ls l"/></div></figure><p id="1cb0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望你喜欢它，下一篇文章再见！</p><p id="9f05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">获取完整的脚本并给它一颗星:</strong><a class="ae jz" href="https://gist.github.com/wendreof/3dfa1c35cd0dcb96c7637bff8435fe02" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/wendre of/3d fa 1c 35 CD 0 dcb 96 c 7637 BFF 8435 Fe 02</a></p><p id="7241" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢你阅读❤</p><p id="1b61" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以不要为明天忧虑，因为明天自有明天的忧虑。每天都有足够多的麻烦。马太福音6:34</p><p id="e014" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">错误或建议？用你的拍手留下评论吧！</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/46a34afd853aee10ec126a150470fef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VGGdykmCpJ4fMttQ.png"/></div></figure><p id="4bc7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> → </strong> <a class="ae jz" href="http://github.com/wendreof" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">我的GitHub简介。</strong></a><strong class="kc io"><br/>→</strong><a class="ae jz" href="https://www.linkedin.com/in/wendreof/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io">我的LinkedIn简介</strong> </a> <strong class="kc io">。<br/> →把</strong> <a class="ae jz" href="https://marketplace.visualstudio.com/items?itemName=wendreof.ufo" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> Ufo主题</strong> </a> <strong class="kc io">拿到你的VS代码里。</strong></p></div></div>    
</body>
</html>