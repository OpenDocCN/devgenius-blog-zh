<html>
<head>
<title>Creating a custom app bar with flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用flutter创建自定义应用程序栏</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-a-custom-app-bar-with-flutter-24e92407d007?source=collection_archive---------11-----------------------#2020-06-20">https://blog.devgenius.io/creating-a-custom-app-bar-with-flutter-24e92407d007?source=collection_archive---------11-----------------------#2020-06-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3198f813e536dc6e226ee62d2b509683.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l7ZEnQRswFM5nFMnDE6piQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来自<a class="ae jz" href="https://www.material.io/develop/android/components/top-app-bars/" rel="noopener ugc nofollow" target="_blank">https://www . material . io/develop/Android/components/top-app-bars/</a></figcaption></figure><p id="9e49" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">TL；DR -&gt;在这里找到这个<a class="ae jz" href="https://github.com/hnoor/customAppBar/" rel="noopener ugc nofollow" target="_blank">的源代码</a></p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="5eb1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">嗨！</p><p id="559a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以，我已经用flutter开发了一个项目。像很多人一样，也可能像你一样，我发现自己对flutter提供的一些默认小部件不满意。在这个特殊的例子中，AppBar小部件。</p><p id="23f9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你不知道，AppBar是一个位于屏幕顶部的小部件，通常显示页面标题、一些常用操作和后退箭头或抽屉开关。</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lf"><img src="../Images/9147fb0e7b9a61d20e46b8f6b7df27ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8lySsSuLQNqamZDCJjugew.jpeg"/></div></div></figure><h1 id="379c" class="lk ll in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated"><strong class="ak">问题</strong></h1><p id="ef3b" class="pw-post-body-paragraph ka kb in kc b kd mi kf kg kh mj kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">我需要一个自定义AppBar小部件，它接收屏幕标题作为参数，具有自定义颜色、自定义前导图标和大小。我也不想每次需要appBar时都设置这些变量。</p><p id="6c1e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在阅读了几篇关于如何定制AppBar的文章后，我仍然对大多数教程推荐的方法不满意。我找到的大多数文章都建议创建一个自定义的小部件，如下图所示，并将其添加到您的脚手架主体的顶部。</p><figure class="lg lh li lj gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="88e9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这种方法工作得很好(某种程度上),但我对此不满意，因为这样做，你失去了很多(如果不是全部的话)默认AppBar的固有特性和功能。例如，使用“自动导入”(更多信息<a class="ae jz" href="https://api.flutter.dev/flutter/material/AppBar/automaticallyImplyLeading.html" rel="noopener ugc nofollow" target="_blank">此处</a>)。</p><p id="9f53" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一些文章还建议添加许多可用的自定义应用程序栏库之一，但为什么必须管理另一个第三方库来处理单一用例呢？</p><h1 id="0f72" class="lk ll in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">我的解决方案</h1><p id="f472" class="pw-post-body-paragraph ka kb in kc b kd mi kf kg kh mj kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">原则是:继承所有默认的AppBar，覆盖你想要定制的。简单吧？</p><p id="d23f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我的方法:</p><p id="74a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">1.创建一个“CustomAppBar”无状态小部件，它返回默认的AppBar，如下所示:</p><pre class="lg lh li lj gt mp mq mr ms aw mt bi"><span id="3699" class="mu ll in mq b gy mv mw l mx my"><br/> class CustomAppBar extends StatelessWidget {<br/>    <a class="ae jz" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>    Widget build(BuildContext context) {<br/>      return AppBar(<br/>       );<br/>   }<br/> }</span></pre><p id="ae55" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将允许我们以正确的方式将我们的“CustomAppBar”添加到Scaffold，即:</p><pre class="lg lh li lj gt mp mq mr ms aw mt bi"><span id="3880" class="mu ll in mq b gy mv mw l mx my"> Scaffold(<br/>     appBar: CustomAppBar(SCREEN_TITLE),<br/>     body: //your body here<br/> )<br/></span></pre><p id="6b12" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.将您的自定义添加到AppBar，例如:</p><pre class="lg lh li lj gt mp mq mr ms aw mt bi"><span id="54d3" class="mu ll in mq b gy mv mw l mx my"> return AppBar(<br/>    title: Text(<br/>              title,<br/>              style: TextStyle(color: Colors.black),<br/>           ),<br/>    backgroundColor: Colors.white,<br/>    leading: IconButton(<br/>    icon: Icon(Icons.chevron_left),<br/>    onPressed: () =&gt; Navigator.pop(context),<br/>    color: Colors.black,<br/>    ),<br/> );<br/> </span></pre><p id="505f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你愿意，你也可以在这里设置“自动输入”。在这种情况下，您会看到如下内容:</p><pre class="lg lh li lj gt mp mq mr ms aw mt bi"><span id="ffda" class="mu ll in mq b gy mv mw l mx my"> return AppBar(<br/>    title: Text(<br/>              title,<br/>              style: TextStyle(color: Colors.black),<br/>           ),<br/>    backgroundColor: Colors.white,<br/>    automaticallyImplyLeading: true,<br/> );<br/></span></pre><p id="0b7c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">理论上，这应该足够了，但还有一个步骤。如果您在脚手架上添加我们刚刚创建的CustomAppBar，您将会得到一个错误</p><pre class="lg lh li lj gt mp mq mr ms aw mt bi"><span id="198f" class="mu ll in mq b gy mv mw l mx my"><br/> argument_type_not_assignable -&gt; The argument type ‘CustomAppBar’ can’t be assigned to the parameter type ‘PreferredSizeWidget’<br/> </span></pre><p id="b584" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是因为Scaffold实际上并不在其AppBar属性中接收appBar。相反，in接受“PreferredSizeWidget”。所以我们需要一个额外的步骤。</p><p id="472f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.扩展“PreferredSizeWidget”。这是您设置“CustomAppBar”的自定义高度的地方。你必须编辑你的构造函数来解释这个变化。最后，您应该会看到类似这样的内容:</p><figure class="lg lh li lj gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><h1 id="264d" class="lk ll in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">结论</h1><p id="772a" class="pw-post-body-paragraph ka kb in kc b kd mi kf kg kh mj kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">通过这样做，我得到了我的自定义AppBar，它包含了我想要的所有自定义功能，而没有添加任何第三方库。:)这是它的样子。</p><figure class="lg lh li lj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lf"><img src="../Images/04b806b0bbddeee7423a4b92f8f5c59d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6tvOgAiDx-o0Uy3qZ5__Xw.jpeg"/></div></div></figure><p id="8a99" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你有更好的方法，请告诉我。</p><p id="4aed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">紧抱</p></div></div>    
</body>
</html>