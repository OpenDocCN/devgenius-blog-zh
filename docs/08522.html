<html>
<head>
<title>Github Actions: How To Create Templates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Github 操作:如何创建模板</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/github-actions-how-to-create-templates-d0974a02d087?source=collection_archive---------1-----------------------#2022-06-22">https://blog.devgenius.io/github-actions-how-to-create-templates-d0974a02d087?source=collection_archive---------1-----------------------#2022-06-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="e5fa" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">为您的管道构建模板所需的一切</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/325b17b46d511d8fe426ebd78456e513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_NKWW9qcekBPRnJ0.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">GitHub Actions 的徽标</figcaption></figure><h1 id="e671" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">介绍</h1><p id="841b" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">大家好，我希望你们今天过得愉快。这篇文章是为你想把你的管道到另一个水平。今天我们将讨论 GitHub actions 中的模板，您将看到在未来的项目中它如何节省您的时间。</p><h1 id="b634" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">初始概念</h1><p id="7a6a" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">要理解这篇文章，我们需要了解这个工具的一些基本概念以及这些部分是如何工作的。要对这类内容感兴趣，可能您每天都在使用 GitHub Actions，并且知道这些概念(您可以跳过这一部分)，但是如果不是这样，让我们深入了解一下。</p><h2 id="1ff8" class="mg kt in bd ku mh mi dn ky mj mk dp lc lt ml mm le lx mn mo lg mb mp mq li mr bi translated">工作流程</h2><p id="f293" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">工作流是执行一项或多项工作的可编程自动化流程。我们在存储库中创建的 YAML 文件中定义工作流，并由存储库中的自动事件或手动或计划事件触发。</p><p id="aeb7" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">为了让 GitHub 识别工作流，我们必须在下面的路径中定义 YAML 文件:<code class="fe mx my mz na b">.github/workflows</code>我们可以有多个文件来执行不同的任务。</p><p id="bc37" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">根据 GitHub 上的文档，工作流必须包含以下基本概念:</p><ol class=""><li id="e61f" class="nb nc in lm b ln ms lq mt lt nd lx ne mb nf mf ng nh ni nj bi translated"><strong class="lm io">一个或多个<em class="nk">事件</em>将触发工作流。</strong></li><li id="893b" class="nb nc in lm b ln nl lq nm lt nn lx no mb np mf ng nh ni nj bi translated"><strong class="lm io">一个或多个<em class="nk">作业</em>，每个作业将在<em class="nk">转轮</em>机器上执行，并运行一系列一个或多个<em class="nk">步骤</em>。</strong></li><li id="aa88" class="nb nc in lm b ln nl lq nm lt nn lx no mb np mf ng nh ni nj bi translated"><strong class="lm io">每个步骤既可以运行您定义的脚本，也可以运行操作，这是一个可重用的扩展，可以简化您的工作流程。</strong></li></ol><h2 id="9b6f" class="mg kt in bd ku mh mi dn ky mj mk dp lc lt ml mm le lx mn mo lg mb mp mq li mr bi translated">职位</h2><p id="f905" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">正如我们之前看到的，一个工作流是由一个或多个作业组成的，基本上一个作业定义了您的工作流将要完成的工作。例如:如果您必须运行测试和 lint，我们将为每次执行定义一个作业。</p><p id="d122" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">默认情况下，作业是并行运行的，这意味着它们不会等待最新的作业继续执行，但是如果我们需要这样做，我们可以使用标签<code class="fe mx my mz na b">needs</code>来实现这个行为。</p><p id="f208" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">让我们一起来看看下面这个简短的例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">在 Golang 中测试应用程序的工作流</figcaption></figure><h1 id="d841" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">模板</h1><p id="e78f" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">有时我们的管道代码变得很大，因为我们需要执行许多步骤来实现目标，而且很多时候我们必须在不同的时刻执行相同的操作。模板可以帮助我们做到这一点，因为我们只需要调用传递所需值的动作，这是一种组织管道代码的方式。</p><h2 id="7e56" class="mg kt in bd ku mh mi dn ky mj mk dp lc lt ml mm le lx mn mo lg mb mp mq li mr bi translated">如何实施</h2><p id="c229" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">在 GitHub Actions 中实现模板很简单，我们所要做的就是创建一个文件夹，并在路径中放置一个名为<code class="fe mx my mz na b">action.yaml</code>的 YAML 文件。通常，我用一个提议来命名文件夹，例如:如果我必须生成一个 docker 图像，文件夹的名字将是<code class="fe mx my mz na b">docker</code>，最终路径是<code class="fe mx my mz na b">docker/action.yaml</code></p><p id="7961" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">假设我们必须创建一个 CI 来在生产/阶段部署我们的应用程序。让我们开始:</p><ol class=""><li id="5929" class="nb nc in lm b ln ms lq mt lt nd lx ne mb nf mf ng nh ni nj bi translated"><strong class="lm io">在文件夹中创建动作:</strong></li></ol><p id="3e61" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">在本例中，路径是<code class="fe mx my mz na b">template/deploy/action.yaml</code>，代码如下所示:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="cf57" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">2.<strong class="lm io">让我们调用工作流上的模板:</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="53c6" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">之后，我们部署应用程序的模板就完成了，我们可以在不同的环境中部署多个工作流。这是一个非常简单的例子，但是您可以根据自己的需要进行调整。</p><p id="13f1" class="pw-post-body-paragraph lk ll in lm b ln ms jo lp lq mt jr ls lt mu lv lw lx mv lz ma mb mw md me mf ig bi translated">这是今天的全部。如果你喜欢它，并且这个内容对你有帮助，请让我知道，并给我留下一个掌声:)</p></div></div>    
</body>
</html>