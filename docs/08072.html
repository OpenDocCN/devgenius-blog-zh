<html>
<head>
<title>Confidence Intervals (CLT and Bootstrapping):- Phenomenally Powerful Techniques towards Statistical Analysis — Explained with Python and Numpy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">置信区间(CLT 和自举):-非常强大的统计分析技术-用 Python 和 Numpy 解释</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/confidence-intervals-clt-and-bootstrapping-phenomenally-powerful-techniques-towards-statistical-390aee590d38?source=collection_archive---------5-----------------------#2022-05-15">https://blog.devgenius.io/confidence-intervals-clt-and-bootstrapping-phenomenally-powerful-techniques-towards-statistical-390aee590d38?source=collection_archive---------5-----------------------#2022-05-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="a623" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">了解置信区间</h1><blockquote class="ki kj kk"><p id="535f" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">通常，很难确定大总体分布的统计参数。因此，我们进行抽样，从人群中抽取样本。</p><p id="d900" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">此后，我们假设:<br/> <em class="in">总体均值=样本均值= </em> μ</p></blockquote><p id="f419" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">这种类型的估计称为点估计。然而，它是有偏见的，我们永远也不会知道群体集合的正确平均值。</p><p id="dbb6" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">所以我们提出了<strong class="ko io">置信区间。</strong></p><p id="bfad" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">这里，我们以 95%的置信度或概率估计区间<br/>【𝜇−𝜃,𝜇+𝜃】中的平均值。我们考虑的是 95%,而不是 100%或 80%,因为我们只是估计，而不是确切地说。然而，这是一个有争议的话题，主要是 95%的考虑。</p><p id="d100" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">这种表示比点估计更丰富，能提供更多的信息。</p></div><div class="ab cl ln lo hr lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ig ih ii ij ik"><h2 id="b437" class="lu jl in bd jm lv lw dn jq lx ly dp ju lk lz ma jy ll mb mc kc lm md me kg mf bi translated">当分布为高斯分布时确定置信区间</h2><p id="80d2" class="pw-post-body-paragraph kl km in ko b kp mg kr ks kt mh kv kw lk mi kz la ll mj ld le lm mk lh li lj ig bi translated">利用均值和标准差，高斯分布被分成 68%、95%和 99%的块</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="ab gu cl mq"><img src="../Images/2bdd34758d379ed73b45a93e59a43fae.png" data-original-src="https://miro.medium.com/v2/format:webp/1*nbzl1vg4RQ-GRhawB6Y6hA.png"/></div></figure><p id="101e" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">所以这里 95%概率的置信区间是<br/>【𝜇−2𝜎,𝜇+2𝜎】</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="4875" class="lu jl in mu b gy my mz l na nb">import numpy as np<br/>import seaborn as sns<br/>mu, sigma = 0, 0.1<br/>s = np.random.normal(mu, sigma, 1000)<br/>sns.kdeplot(s)</span></pre><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="ab gu cl mq"><img src="../Images/54866f1d9c14dc0e5ea8c8974b9c00bd.png" data-original-src="https://miro.medium.com/v2/format:webp/1*RartGxfM1nCaoQed_zrmZw.png"/></div></figure><p id="dd6e" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">对于上面的图，95%的置信度将是<br/>[0–2<em class="kn">0.1，0+2 </em> 0.1] = [-0.2，0.2]</p></div><div class="ab cl ln lo hr lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ig ih ii ij ik"><h2 id="b2bc" class="lu jl in bd jm lv lw dn jq lx ly dp ju lk lz ma jy ll mb mc kc lm md me kg mf bi translated">分布未知时确定置信区间</h2><p id="dcfe" class="pw-post-body-paragraph kl km in ko b kp mg kr ks kt mh kv kw lk mi kz la ll mj ld le lm mk lh li lj ig bi translated">当分布不是高斯分布时，有各种方法可以找到 95%的置信区间。最受欢迎的是，</p><blockquote class="ki kj kk"><p id="fc83" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">中心极限定理(CLT)</p><p id="ae7d" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">引导方法</p><p id="8619" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最大似然法</p><p id="c2ab" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">假设检验</p></blockquote><p id="bac6" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">在这个博客中，我们将讨论中心极限定理(CLT)和引导方法。</p><p id="0a2a" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">在我的下一篇博客中，我将介绍最大似然法和假设检验。</p></div><div class="ab cl ln lo hr lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ig ih ii ij ik"><h2 id="31f8" class="lu jl in bd jm lv lw dn jq lx ly dp ju lk lz ma jy ll mb mc kc lm md me kg mf bi translated">1.具有中心极限定理的置信区间</h2><blockquote class="ki kj kk"><p id="66b3" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">定理指出，对于有限均值和有限方差，当绘制抽样分布的样本均值时，该分布非常接近高斯分布</p></blockquote><p id="9161" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">你可以参考我的这篇<a class="ae nc" href="https://medium.com/@pritul.dave/central-limit-theorum-with-simplest-implementation-and-explaination-749a6f3568f9https://medium.com/@pritul.dave/central-limit-theorum-with-simplest-implementation-and-explaination-749a6f3568f9" rel="noopener">博文</a>来更深入地理解中心极限定理。</p><p id="ba48" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">因此，这里我们考虑两个参数</p><ol class=""><li id="479e" class="nd ne in ko b kp kq kt ku lk nf ll ng lm nh lj ni nj nk nl bi translated">样本数量(N)</li><li id="0ba8" class="nd ne in ko b kp nm kt nn lk no ll np lm nq lj ni nj nk nl bi translated">高斯分布</li></ol><p id="2ed9" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">现在，高斯分布 95%概率的置信区间的平均值是，</p><p id="b22f" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi">[𝜇−2𝜎,𝜇+2𝜎]</p><p id="e04e" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">这里，如果我们考虑样本大小(N ),那么它变成，</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/88779ad66e1d454c382c9460461a46d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*Ttsy9Q8TAv54kqqjOd0o5w.png"/></div></figure><p id="9228" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">其中 x(bar)是样本大小的平均值，N 是样本大小，sigma 是总体的标准差。</p><p id="b57d" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">这代表一个 95%概率置信区间，我们的总体均值在这个范围内。</p><p id="0396" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">让我们用 numpy 来理解和推导这个概念，通过考虑 100 个随机数，也就是我们的总体。</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="81f0" class="lu jl in mu b gy my mz l na nb">arr = (np.random.random([1000])*100).astype(int)</span></pre><p id="5fb0" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">现在，上述人口的平均值是</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="b656" class="lu jl in mu b gy my mz l na nb">&gt;&gt;&gt; np.mean(arr)</span><span id="3c83" class="lu jl in mu b gy ns mz l na nb">48.492</span></pre><p id="07c5" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">让我们用 95%置信度的中心极限定理来推导这个平均值。</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="1688" class="lu jl in mu b gy my mz l na nb">sample_array = np.random.choice(arr,30)<br/>&gt;&gt;&gt; sample_array</span><span id="94e8" class="lu jl in mu b gy ns mz l na nb">&gt;&gt;&gt; array([93, 64, 58, 24, 64, 56, 73, 87, 16, 92, 36, 38, 33, 41, 34,  1, 15,<br/>       97,  3, 97, 25, 40, 29, 50, 68, 67, 31, 76, 75, 56])</span><span id="df7f" class="lu jl in mu b gy ns mz l na nb">sample_mean = np.mean(sample_array)<br/>population_std = np.std(arr)<br/>sample_size = sample_array.shape[0] <br/>print("Sample Mean",sample_mean)<br/>print("Population Standard Deviaition",population_std)<br/>print("Sample Size",sample_size)</span><span id="3338" class="lu jl in mu b gy ns mz l na nb">&gt;&gt;&gt; Sample Mean 51.3<br/>&gt;&gt;&gt; Population Standard Deviaition 28.16217207532118<br/>&gt;&gt;&gt; Sample Size 30</span><span id="601c" class="lu jl in mu b gy ns mz l na nb">lower_range = sample_mean - (2*population_std/np.sqrt(sample_size))</span><span id="bf85" class="lu jl in mu b gy ns mz l na nb">upper_range = sample_mean + (2*population_std/np.sqrt(sample_size))</span><span id="050e" class="lu jl in mu b gy ns mz l na nb">print("Lower Range",round(lower_range,2))<br/>print("Upper Range",round(upper_range,2))</span><span id="c114" class="lu jl in mu b gy ns mz l na nb">&gt;&gt;&gt; Lower Range 41.02<br/>&gt;&gt;&gt; Upper Range 61.58</span></pre><blockquote class="ki kj kk"><p id="6b69" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，正如你在这里看到的，使用中心极限定理，我们正确地确定了一个范围[41.02，61.58]，在这个范围内，我们的总体平均值为 48.492。</p></blockquote><p id="21f2" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">因此，这是非常强大的技术，但前提是人们应该知道总体的标准偏差。</p><p id="bd59" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">如果我们不知道总体的标准差，我们可以用假设检验或自举方法。</p></div><div class="ab cl ln lo hr lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ig ih ii ij ik"><h2 id="b848" class="lu jl in bd jm lv lw dn jq lx ly dp ju lk lz ma jy ll mb mc kc lm md me kg mf bi translated">2.自举方法</h2><p id="d671" class="pw-post-body-paragraph kl km in ko b kp mg kr ks kt mh kv kw lk mi kz la ll mj ld le lm mk lh li lj ig bi translated">这是估计人口统计参数的另一种强有力的技术。唯一的问题是计算量很大。</p><p id="50a6" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">这种技巧也是从中心极限定理的概念中推导出来的。<br/><strong class="ko io">“<em class="kn">只要访问我的</em> </strong> <a class="ae nc" href="https://medium.com/@pritul.dave/central-limit-theorum-with-simplest-implementation-and-explaination-749a6f3568f9" rel="noopener"> <strong class="ko io"> <em class="kn">中枢极限 theorum 贴子</em> </strong> </a> <strong class="ko io"> <em class="kn">就很容易理解了。”</em> </strong></p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="ab gu cl mq"><img src="../Images/41e4fdc693cdd758ea0498f44382bd5c.png" data-original-src="https://miro.medium.com/v2/format:webp/1*9xfWuHpVqeASD8lfex4-HA.png"/></div></figure><p id="110c" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">让我们使用 Numpy 一步步理解自举</p><ol class=""><li id="9236" class="nd ne in ko b kp kq kt ku lk nf ll ng lm nh lj ni nj nk nl bi translated">生成大小为 1000 的数组<br/> <em class="kn">我正在 CLT 重用生成的数组</em></li></ol><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="1852" class="lu jl in mu b gy my mz l na nb">arr.shape</span><span id="629b" class="lu jl in mu b gy ns mz l na nb">&gt;&gt;&gt; (1000,)</span></pre><p id="0f6b" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">2.重复生成大小为 30 的采样数组 50 次。</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="5006" class="lu jl in mu b gy my mz l na nb">sampled_array_list = []<br/>for i in range(50):<br/>    sampled_array_list.append(np.random.choice(arr,30))</span></pre><p id="40c7" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">3.现在我们确定这个样本数组的平均值</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="965e" class="lu jl in mu b gy my mz l na nb">sampled_array_mean = []<br/>for i in range(50):<br/>    sampled_array_mean.append(np.mean(sampled_array_list[i]))</span></pre><p id="b700" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">4.我们对平均值进行排序，并考虑 95%的区间</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="88ab" class="lu jl in mu b gy my mz l na nb">bootstraped_mean = np.sort(sampled_array_mean)<br/>N = 50<br/>range_ = [N-N*0.95,N+N*0.95]</span><span id="66d7" class="lu jl in mu b gy ns mz l na nb">print(range_)</span><span id="5549" class="lu jl in mu b gy ns mz l na nb">&gt;&gt;&gt; [2.5, 97.5]</span></pre><p id="b7e2" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">让我们想象一下这个 95%的置信区间</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="5b9e" class="lu jl in mu b gy my mz l na nb">bootstraped_mean = bootstraped_mean[int(range_[0]):int(range_[1])]</span><span id="4f75" class="lu jl in mu b gy ns mz l na nb">sns.distplot(bootstraped_mean)</span></pre><figure class="ml mm mn mo gt mp gh gi paragraph-image"><div class="ab gu cl mq"><img src="../Images/1a1d02112c35e8e2d91f5bf65e3bd132.png" data-original-src="https://miro.medium.com/v2/format:webp/1*8s1MGY5puhE-gbcOK8nQtw.png"/></div></figure><p id="dfb4" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">4.求这个靴带平均值的平均值</p><pre class="ml mm mn mo gt mt mu mv mw aw mx bi"><span id="d190" class="lu jl in mu b gy my mz l na nb">np.mean(bootstraped_mean)</span><span id="af38" class="lu jl in mu b gy ns mz l na nb">&gt;&gt;&gt; 48.982638888888886</span></pre><blockquote class="ki kj kk"><p id="f2a1" class="kl km kn ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们的人口平均数是 48.492(T19)，我们的引导平均数是 48.982(T21)。你可以看到这是一个多么强大的技术，它给出了非常接近和精确的人口平均值。</p></blockquote><p id="2054" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">我们可以重复使用这种技术，并可以找到中位数或分位数或任何统计参数。</p><p id="f6ed" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">此外，它的美妙之处在于它是非参数化的技术，并且不对分布做任何假设。</p><p id="70cd" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">只要评论下来，任何问题，我将很乐意帮助。如果你喜欢这个帖子，请鼓掌。这会激励我写更多。</p></div><div class="ab cl ln lo hr lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ig ih ii ij ik"><p id="e269" class="pw-post-body-paragraph kl km in ko b kp kq kr ks kt ku kv kw lk ky kz la ll lc ld le lm lg lh li lj ig bi translated">感谢您阅读我的帖子😊</p></div></div>    
</body>
</html>