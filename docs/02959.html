<html>
<head>
<title>Top React Hooks — Lifecycle and Toggles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">顶部反应挂钩—生命周期和切换</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/top-react-hooks-lifecycle-and-toggles-7dd553998ae1?source=collection_archive---------6-----------------------#2020-09-15">https://blog.devgenius.io/top-react-hooks-lifecycle-and-toggles-7dd553998ae1?source=collection_archive---------6-----------------------#2020-09-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/495e30bb9eab6ac82a5479faade2f633.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iUEEQHnBVK8xwzOR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">安德鲁·庞斯在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="dd67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Hooks 包含了 React 应用程序中的逻辑代码。</p><p id="4586" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建自己的钩子，使用别人提供的钩子。</p><p id="c5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看一些有用的 React 挂钩。</p><h1 id="c823" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应钩子库</h1><p id="2fae" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Hooks Lib 是一个库，有许多可重用的 React Hooks。</p><p id="e382" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们可以运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fe7a" class="mn lc iq mj b gy mo mp l mq mr">npm i react-hooks-lib --save</span></pre><p id="2699" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用库附带的钩子。</p><p id="18b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe ms mt mu mj b">useDidUpdate</code>钩子。</p><p id="066c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这类似于 React 类组件中的<code class="fe ms mt mu mj b">componentDidUpdate</code>方法。</p><p id="3304" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它只在更新时运行。</p><p id="9440" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="45aa" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { useDidUpdate, useCounter } from "react-hooks-lib";</span><span id="8389" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  const { count, inc } = useCounter(0);<br/>  useDidUpdate(() =&gt; {<br/>    console.log("update");<br/>  });<br/>  return (<br/>    &lt;div&gt;<br/>      {`count: ${count}`}<br/>      &lt;button onClick={() =&gt; inc(1)}&gt;increment&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="7921" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe ms mt mu mj b">useCounter</code>钩子来创建一个计数器状态。</p><p id="3b1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe ms mt mu mj b">inc</code>函数来增加它。</p><p id="918d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe ms mt mu mj b">count</code>有这个州。</p><p id="8f82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">useDidUpdate</code>的回调在<code class="fe ms mt mu mj b">count</code>更新时运行。</p><p id="5975" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">useMergeState</code>钩子让我们创建一个状态设置函数，它的工作方式类似于 React 类组件的<code class="fe ms mt mu mj b">setState</code>方法。</p><p id="9e21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以这样使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a6a8" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { useMergeState } from "react-hooks-lib";</span><span id="aa75" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  const { state, set } = useMergeState({ name: "james", age: 1 });</span><span id="4d42" class="mn lc iq mj b gy mv mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={() =&gt; set(({ age }) =&gt; ({ age: age + 1 }))}&gt;<br/>        increment age<br/>      &lt;/button&gt;<br/>      {JSON.stringify(state)}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="73b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">useMergeState</code>以初始状态为自变量。</p><p id="b287" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回带有状态值的<code class="fe ms mt mu mj b">state</code>。</p><p id="f92e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">set</code>让我们通过传入一个对象来设置凝视。</p><p id="5164" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该对象将与现有的状态值合并。</p><p id="695d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们向它传递一个函数，该函数将当前状态对象作为参数，我们返回新的状态对象作为值。</p><p id="0a9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">useCounter</code>钩子让我们创建一个可以更新的数字状态。</p><p id="282a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="aebb" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { useCounter } from "react-hooks-lib";</span><span id="961e" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  const { count, inc, dec, reset } = useCounter(1);</span><span id="2dde" class="mn lc iq mj b gy mv mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      {count}<br/>      &lt;button onClick={() =&gt; inc(1)}&gt;increment&lt;/button&gt;<br/>      &lt;button onClick={() =&gt; dec(1)}&gt;decrement&lt;/button&gt;<br/>      &lt;button onClick={reset}&gt;reset&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="4b83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<code class="fe ms mt mu mj b">useCounter</code>钩子创建一个带有数字状态<code class="fe ms mt mu mj b">count</code>的组件。</p><p id="98dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自变量是<code class="fe ms mt mu mj b">count</code>的初始值。</p><p id="8e40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">inc</code>增量<code class="fe ms mt mu mj b">count</code>。</p><p id="3a7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">dec</code>增量<code class="fe ms mt mu mj b">count</code>。</p><p id="e857" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">reset</code>将<code class="fe ms mt mu mj b">count</code>重置为初始值。</p><p id="484b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">useToggle</code>钩子创建一个布尔状态，让我们在<code class="fe ms mt mu mj b">true</code>或<code class="fe ms mt mu mj b">false</code>之间切换。</p><p id="0373" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使用它，我们写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8e58" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { useToggle } from "react-hooks-lib";</span><span id="c6d4" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  const { on, toggle, reset } = useToggle(false);</span><span id="0058" class="mn lc iq mj b gy mv mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={toggle}&gt;toggle&lt;/button&gt;<br/>      &lt;button onClick={reset}&gt;reset&lt;/button&gt;<br/>      &lt;p&gt;{String(on)}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="6c64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用带有初始值的<code class="fe ms mt mu mj b">useToggle</code>钩子作为自变量。</p><p id="444f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">on</code>属性具有切换状态的值。</p><p id="4d34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">toggle</code>让我们切换<code class="fe ms mt mu mj b">on</code>的值。</p><p id="caca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe ms mt mu mj b">reset</code>将<code class="fe ms mt mu mj b">on</code>重置为初始值。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/9b27791d822d816a641abbeee6a76520.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mDoo_nXiygrQ3EFC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@yomex4life?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Yomex Owo </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="255e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d0b5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Hooks Lib 自带钩子，模仿类组件的生命周期方法。</p><p id="0c92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还附带了钩子，让我们可以更容易地操纵各种状态。</p></div></div>    
</body>
</html>