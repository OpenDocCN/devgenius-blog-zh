<html>
<head>
<title>Vue 3 — List Transitions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3 —列出过渡</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vue-3-list-transitions-405a642ac8c7?source=collection_archive---------4-----------------------#2020-11-10">https://blog.devgenius.io/vue-3-list-transitions-405a642ac8c7?source=collection_archive---------4-----------------------#2020-11-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3e1d56479f744a6c5e4287831ce30028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-D3kvo_kFKE3xxVi"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@aaro?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿拉尼·慕克吉</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d3d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3处于测试阶段，可能会有变化。</p><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的普及性和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何创建列表转换。</p><h1 id="971a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">列出移动转换</h1><p id="22f5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加列表移动转换。</p><p id="04f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，当项目改变位置时，我们可以使用<code class="fe me mf mg mh b">transition-group</code>组件来显示一些效果:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7039" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="<a class="ae kc" href="https://unpkg.com/vue@next" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/vue@next</a>"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"&gt;&lt;/script&gt;</span><span id="5ef3" class="mq lc iq mh b gy mv ms l mt mu">&lt;style&gt;<br/>      .list-move {<br/>        transition: transform 0.8s ease;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="shuffle"&gt;shuffle&lt;/button&gt;<br/>      &lt;transition-group name="list" tag="div"&gt;<br/>        &lt;p v-for="item in items" :key="item"&gt;<br/>          {{ item }}<br/>        &lt;/p&gt;<br/>      &lt;/transition-group&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            items: Array(10)<br/>              .fill()<br/>              .map(() =&gt; Math.random()),<br/>          };<br/>        },<br/>        methods: {<br/>          shuffle() {<br/>            this.items = _.shuffle(this.items);<br/>          }<br/>        }<br/>      });<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="a4f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了带有过渡效果的<code class="fe me mf mg mh b">list-move</code>类，以便在列表被打乱时显示它。</p><p id="8426" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">名单是用洛达什<code class="fe me mf mg mh b">shuffle</code>法洗牌的。</p><h1 id="f3da" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">交错列表转换</h1><p id="cb99" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在列表中错开过渡。</p><p id="8a40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了做到这一点，我们使用格林斯托克图书馆来帮助我们。</p><p id="f05a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写作；</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6fc9" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/gsap.min.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;input v-model="query" /&gt;<br/>      &lt;transition-group<br/>        name="fade"<br/>        tag="div"<br/>        :css="false"<br/>        @before-enter="beforeEnter"<br/>        @enter="enter"<br/>        @leave="leave"<br/>      &gt;<br/>        &lt;p<br/>          v-for="(item, index) in computedList"<br/>          :key="item.name"<br/>          :data-index="index"<br/>        &gt;<br/>          {{ item.name }}<br/>        &lt;/p&gt;<br/>      &lt;/transition-group&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            query: "",<br/>            list: [<br/>              { name: "james" },<br/>              { name: "mary" },<br/>              { name: "alex" },<br/>              { name: "bob" },<br/>              { name: "jane" }<br/>            ]<br/>          };<br/>        },<br/>        computed: {<br/>          computedList() {<br/>            return this.list.filter(item =&gt; {<br/>              return item.name.toLowerCase().includes(this.query.toLowerCase());<br/>            });<br/>          }<br/>        },<br/>        methods: {<br/>          beforeEnter(el) {<br/>            el.style.opacity = 0;<br/>            el.style.height = 0;<br/>          },<br/>          enter(el, done) {<br/>            gsap.to(el, {<br/>              opacity: 1,<br/>              height: "1.3em",<br/>              delay: el.dataset.index * 0.55,<br/>              onComplete: done<br/>            });<br/>          },<br/>          leave(el, done) {<br/>            gsap.to(el, {<br/>              opacity: 0,<br/>              height: 0,<br/>              delay: el.dataset.index * 0.45,<br/>              onComplete: done<br/>            });<br/>          }<br/>        }<br/>      });<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="4b63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在应用程序中包含了Greensock库。</p><p id="8fab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">methods</code>属性中，我们有几个方法。</p><p id="2fa3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">beforeEnter</code>方法将容器的不透明度和高度设置为0。</p><p id="e933" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">enter</code>方法有我们的进入动画效果。</p><p id="504e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们改变不透明度为1，使不透明。</p><p id="40bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">height</code>是集装箱的高度。</p><p id="c417" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">delay</code>是动画的延迟。</p><p id="ea25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">onComplete</code>是我们调用的通知Vue动画完成的函数。</p><p id="f048" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们对<code class="fe me mf mg mh b">leave</code>过渡做同样的事情。</p><p id="1574" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当<code class="fe me mf mg mh b">computedList</code>返回新值时，将应用动画效果。</p><p id="6236" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们在输入框中输入一些东西时，我们会看到应用的效果。</p><h1 id="50c0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">可重用转换</h1><p id="e841" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过将转换移动到我们自己的组件中来使其可重用。</p><p id="89cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1823" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/gsap.min.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;input v-model="query" /&gt;<br/>      &lt;list-transition&gt;<br/>        &lt;p<br/>          v-for="(item, index) in computedList"<br/>          :key="item.name"<br/>          :data-index="index"<br/>        &gt;<br/>          {{ item.name }}<br/>        &lt;/p&gt;<br/>      &lt;/list-transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            query: "",<br/>            list: [<br/>              { name: "james" },<br/>              { name: "mary" },<br/>              { name: "alex" },<br/>              { name: "bob" },<br/>              { name: "jane" }<br/>            ]<br/>          };<br/>        },<br/>        computed: {<br/>          computedList() {<br/>            return this.list.filter(item =&gt; {<br/>              return item.name.toLowerCase().includes(this.query.toLowerCase());<br/>            });<br/>          }<br/>        }<br/>      });</span><span id="4a3d" class="mq lc iq mh b gy mv ms l mt mu">      app.component("list-transition", {<br/>        template: `<br/>        &lt;transition-group<br/>          name="fade"<br/>          tag="div"<br/>          :css="false"<br/>          <a class="ae kc" href="http://twitter.com/before" rel="noopener ugc nofollow" target="_blank">@before</a>-enter="beforeEnter"<br/>          <a class="ae kc" href="http://twitter.com/enter" rel="noopener ugc nofollow" target="_blank">@enter</a>="enter"<br/>          <a class="ae kc" href="http://twitter.com/leave" rel="noopener ugc nofollow" target="_blank">@leave</a>="leave"<br/>        &gt;<br/>         &lt;slot&gt;&lt;/slot&gt;<br/>        &lt;/transition-group&gt;<br/>        `,<br/>        methods: {<br/>          beforeEnter(el) {<br/>            el.style.opacity = 0;<br/>            el.style.height = 0;<br/>          },<br/>          enter(el, done) {<br/>            gsap.to(el, {<br/>              opacity: 1,<br/>              height: "1.3em",<br/>              delay: el.dataset.index * 0.55,<br/>              onComplete: done<br/>            });<br/>          },<br/>          leave(el, done) {<br/>            gsap.to(el, {<br/>              opacity: 0,<br/>              height: 0,<br/>              delay: el.dataset.index * 0.45,<br/>              onComplete: done<br/>            });<br/>          }<br/>        }<br/>      });</span><span id="6264" class="mq lc iq mh b gy mv ms l mt mu">      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="3616" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将我们的<code class="fe me mf mg mh b">transition</code>组件和钩子移动到它自己的组件。</p><p id="78ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需创建一个组件，并在<code class="fe me mf mg mh b">transition-group</code>标签之间添加一个<code class="fe me mf mg mh b">slot</code>来为我们的内容添加位置。</p><p id="394c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以在任何地方使用<code class="fe me mf mg mh b">list-transition</code>组件。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/6692b12a01b7462e4de9e5b72a04a13f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7lh_KCOofmEcGpzS"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">克里斯托夫·鲁舍夫在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="b34d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="0681" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">transition-group</code>组件添加我们的列表过渡效果。</p><p id="ce47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们添加钩子来创建JavaScript动画需要各种指令。</p></div></div>    
</body>
</html>