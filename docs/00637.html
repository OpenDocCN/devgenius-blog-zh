<html>
<head>
<title>Simulator build for iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 模拟器版本</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/simulator-build-for-ios-842c8106ca27?source=collection_archive---------1-----------------------#2020-06-13">https://blog.devgenius.io/simulator-build-for-ios-842c8106ca27?source=collection_archive---------1-----------------------#2020-06-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="5dd5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本文介绍了面向 iOS 的模拟器构建。首先，我们需要澄清什么是模拟器构建以及我们为什么使用它。一个人的思想力量与☕️喝的咖啡量成正比，所以在我们开始之前，请喝一杯☕️咖啡。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b47c0600c0b0c62e1af475eec0e2fe6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VStEGWJRRFZXIBXpe8ZmwQ.jpeg"/></div></div></figure><h2 id="c17d" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">为什么我们需要模拟器🙇</h2><ul class=""><li id="c16b" class="ln lo in jm b jn lp jr lq jv lr jz ls kd lt kh lu lv lw lx bi translated">可以在模拟器上完成的快速测试。</li><li id="c449" class="ln lo in jm b jn ly jr lz jv ma jz mb kd mc kh lu lv lw lx bi translated">给客户的简单演示。</li><li id="c844" class="ln lo in jm b jn ly jr lz jv ma jz mb kd mc kh lu lv lw lx bi translated">脸书应用提交评论。</li></ul><h2 id="2162" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">先决条件</h2><ul class=""><li id="a679" class="ln lo in jm b jn lp jr lq jv lr jz ls kd lt kh lu lv lw lx bi translated">最新 Xcode</li><li id="8d05" class="ln lo in jm b jn ly jr lz jv ma jz mb kd mc kh lu lv lw lx bi translated">申请的临时证书</li></ul><h2 id="8a84" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated"><strong class="ak">让我们开始</strong></h2><p id="2d2f" class="pw-post-body-paragraph jk jl in jm b jn lp jp jq jr lq jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">首先，我们用 CLI 创建一个 React 本机应用程序。您可以直接从 Xcode 创建 iOS 项目。现在我们为我们的应用程序生成 build。这里，我们的项目在 react native 中，因此我们在应用程序目录终端中运行以下命令。<br/> <strong class="jm io">注意:- </strong>如果你的项目是原生 iOS 那么忽略这一步。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="6bfb" class="ku kv in mh b gy ml mm l mn mo">react-native bundle --entry-file index.js --platform ios --dev false --bundle-output ios/main.jsbundle --assets-dest ios</span></pre><p id="bf44" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如何为 iOS 应用程序生成模拟器版本？有两种方法，</p><ol class=""><li id="c6e7" class="ln lo in jm b jn jo jr js jv mp jz mq kd mr kh ms lv lw lx bi translated">使用 Xcode</li><li id="a83d" class="ln lo in jm b jn ly jr lz jv ma jz mb kd mc kh ms lv lw lx bi translated">使用命令行</li></ol><h2 id="f8fa" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated"><strong class="ak">使用 Xcode </strong></h2><p id="7b44" class="pw-post-body-paragraph jk jl in jm b jn lp jp jq jr lq jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">这里我们正在创建一个发布版本，所以首先我们需要从 Xcode 中选择发布配置。按照设置构建配置的步骤，<br/>Xcode-&gt;Product-&gt;Scheme-&gt;Edit Scheme-&gt;选择发布配置</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mt"><img src="../Images/cf5a924e8a8b5ee9252aaa2f2fd446bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GgDwqCj5_poRZ6bSu40wSQ.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">选择构建配置</figcaption></figure><p id="9773" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">按(command + B)构建应用程序。为建设成功而祈祷。构建成功完成后，右键单击文件导航器中产品文件夹下的应用程序名称，然后选择“在 Finder 中显示”。这将打开模拟器构建的文件夹。模拟器构建是一个扩展名为<code class="fe my mz na mh b">.app</code>的容器。复制<code class="fe my mz na mh b">.app</code>文件并粘贴到新创建的文件夹中。</p><h2 id="c88d" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated"><strong class="ak">使用命令行</strong></h2><p id="92f8" class="pw-post-body-paragraph jk jl in jm b jn lp jp jq jr lq jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">模拟器构建可以通过命令行创建。只需打开终端，转到应用程序目录并运行以下命令。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="b744" class="ku kv in mh b gy ml mm l mn mo">xcodebuild -sdk iphonesimulator</span></pre><p id="9a1c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该应用程序是在 Xcode 工作空间中开发的。<br/>例如<strong class="jm io"> sampleApp.xcworkspace </strong>使用下面的命令</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="bcb0" class="ku kv in mh b gy ml mm l mn mo">xcodebuild -workspace sampleApp.xcworkspace -scheme sampleApp -sdk iphonesimulator -configuration Release</span></pre><p id="a9ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">等等，我们需要一杯咖啡，☕️，因为我想不起命令了。在这里，许多问题浮现在脑海中。所以我们先试着清除它。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="3e8c" class="ku kv in mh b gy ml mm l mn mo">xcodebuild -workspace <strong class="mh io">[ProjectName]</strong>.xcworkspace -scheme <strong class="mh io">[ProjectName]</strong> -configuration <strong class="mh io">[BuildType]</strong></span><span id="1aba" class="ku kv in mh b gy nb mm l mn mo">Note: <br/>- <strong class="mh io">[ProjectName]</strong> name of workspace(xcworkspace)<br/>- <strong class="mh io">[BuildType]</strong>   is Debug or Release</span></pre><p id="14af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">等待构件创建成功🙇。构建已成功完成，然后我们可以从</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="8b3c" class="ku kv in mh b gy ml mm l mn mo">~/Library/Developer/Xcode/DerivedData/<strong class="mh io">[ProjectName]</strong>-<strong class="mh io">[BuildHash]</strong>/Build/Products/<strong class="mh io">[BuildType]</strong>-iphonesimulator/<strong class="mh io">[ProjectName]</strong>.app</span><span id="ecbf" class="ku kv in mh b gy nb mm l mn mo"><strong class="mh io">In our case path look like :-</strong></span><span id="8cf1" class="ku kv in mh b gy nb mm l mn mo">~/Library/Developer/Xcode/DerivedData/<strong class="mh io">sampleApp</strong>-<strong class="mh io">frateghkqdqoqgaixsbpginewyoo</strong>/Build/Products/<strong class="mh io">Release</strong>-iphonesimulator/<strong class="mh io">sampleApp</strong>.app</span></pre><p id="2b44" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">复制<code class="fe my mz na mh b">.app</code>文件并粘贴到一个新创建的文件夹中。现在我们的构建已经准备好了。</p><p id="2995" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们做最后一步来创建一个模拟器，</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="6f7d" class="ku kv in mh b gy ml mm l mn mo">ditto -ck --sequesterRsrc --keepParent <strong class="mh io">[source]/appName.app</strong> <strong class="mh io">[destination]/appName.zip</strong></span><span id="c83e" class="ku kv in mh b gy nb mm l mn mo">Note:<br/> - <strong class="mh io">[source]       </strong>Path where we store .app file<br/> - <strong class="mh io">[destination]  </strong>Path where we want to save our app's zip file</span></pre><p id="dfaf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，我将两个文件夹都设置在桌面上，这样我们命令看起来就像</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="6b1b" class="ku kv in mh b gy ml mm l mn mo">ditto -ck --sequesterRsrc --keepParent /Users/userName/Desktop/TestBuild/sampleApp.app /Users/userName/Desktop/SimulatorBuild/sampleApp.zip</span></pre><p id="f53f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae nc" href="https://www.real-world-systems.com/docs/ditto.1.html" rel="noopener ugc nofollow" target="_blank">同上</a>用于复制目录层次结构，创建和提取档案，将一个或多个源文件或目录复制到目标目录。</p><p id="bf56" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该命令在目标文件夹中生成一个 zip 文件。现在，实现这个 zip 文件夹，以便我们得到一个<code class="fe my mz na mh b">.app</code>文件。我们的构建已经为测试做好了准备。但是我们如何测试它呢？别担心，我们有 ios-sim 卡。它用于在 iOS 模拟器中的指定路径启动应用程序。首先，我们需要在我们的系统中安装。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="32e4" class="ku kv in mh b gy ml mm l mn mo">npm install -g ios-sim</span></pre><p id="4685" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，它已经可以使用了。</p><pre class="kj kk kl km gt mg mh mi mj aw mk bi"><span id="2c1a" class="ku kv in mh b gy ml mm l mn mo">ios-sim -d <strong class="mh io">[DeviceName]</strong> launch <strong class="mh io">[Source]</strong></span><span id="ad12" class="ku kv in mh b gy nb mm l mn mo">Note:<br/> - <strong class="mh io">[source]       </strong>Path where we <!-- -->achieve new<!-- --> .app file<br/> - <strong class="mh io">[</strong><strong class="mh io">DeviceName</strong><strong class="mh io">]   </strong>Device name in which we want to test our build</span><span id="6f85" class="ku kv in mh b gy nb mm l mn mo">We can get all device name in our system using this command.<br/><strong class="mh io">ios-sim showdevicetypes</strong></span><span id="4523" class="ku kv in mh b gy nb mm l mn mo"><strong class="mh io">In our case path look like :-</strong></span><span id="e53d" class="ku kv in mh b gy nb mm l mn mo">ios-sim -d iPhone-6s launch /Users/userName/Desktop/SimulatorBuild/sampleApp.app</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/bf118d84dbe70dc95beef387179cd9fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*CagmWtqlcOuy4VDjBIKtlw.png"/></div></figure><p id="9286" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">哇，我们构建成功运行了🙌。喝一杯 coffee☕️，享受代码。</p></div></div>    
</body>
</html>