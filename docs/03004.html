<html>
<head>
<title>Slack Clone with React | Semantic UI | GraphQL | PostgresSQL (PART 6)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有React |语义UI | GraphQL | PostgresSQL的Slack克隆(第6部分)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/slack-clone-with-react-semantic-ui-graphql-postgressql-part-6-90324ebd76f2?source=collection_archive---------8-----------------------#2020-09-19">https://blog.devgenius.io/slack-clone-with-react-semantic-ui-graphql-postgressql-part-6-90324ebd76f2?source=collection_archive---------8-----------------------#2020-09-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3541" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">之前，我们创建了Graphql查询和变异。你可以在这里找到那篇文章</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/b41cea42725f673b154fb2bd83220323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uUMkEksPMPspkDUs"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">沃洛季米尔·赫里先科在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4872" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天，我们将从后端退一步，用Apollo客户端来设置我们的前端。</p><h1 id="910b" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">创建React项目</h1><p id="ce8c" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">为了简单起见，我将为我的前端准备一个不同的文件夹。</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="a003" class="mr lq in mn b gy ms mt l mu mv">cd desktop<br/>mkdir chatroom_front<br/>cd chatroom_front</span></pre><p id="f5d0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在chatroom_front文件夹中创建一个react项目，不要给它命名。</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="7649" class="mr lq in mn b gy ms mt l mu mv">npx create-react-app .</span></pre><p id="e341" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当然，这需要一些时间:)</p><h1 id="aa38" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">项目清理</h1><p id="6e10" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">删除所有的<code class="fe mw mx my mn b">test</code>文件。因此，任何带有<code class="fe mw mx my mn b">.test.js</code>扩展名的文件都可以删除。还要去掉，<code class="fe mw mx my mn b">logo.svg</code>，<code class="fe mw mx my mn b">serviceWorkers.js</code>和<code class="fe mw mx my mn b">setupTests.js</code></p><h1 id="a947" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">安装软件包</h1><p id="9526" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">首先，让我们安装我们需要的所有包。</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="9481" class="mr lq in mn b gy ms mt l mu mv">npm i @apollo/client graphql react-hook-form semantic-ui-css semantic-ui-react react-router-dom</span></pre><ul class=""><li id="9f6f" class="mz na in kv b kw kx kz la lc nb lg nc lk nd lo ne nf ng nh bi translated"><a class="ae kc" href="https://hashnode.com/@apollo" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">@ apollo</strong></a><strong class="kv io">/client</strong>用于连接/通信到后端的Apollo服务器</li><li id="1c22" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated"><strong class="kv io"> graphql </strong>使我们能够在frontend-react-hook-form验证包中使用钩子为我们的表单调用查询和变异(个人偏好，不是必需的)</li><li id="0384" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated"><strong class="kv io"> semantic-ui-css </strong>和<strong class="kv io"> semantic-ui-react </strong>用于我们的ui。</li><li id="9d3e" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated"><strong class="kv io"> react-router-dom </strong>用于在我们的应用中进行路由。</li></ul><h1 id="2ba7" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">设置Apollo客户端</h1><p id="ba81" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">让我们准备好阿波罗。在<code class="fe mw mx my mn b">src</code> &gt; <code class="fe mw mx my mn b">index.js</code>里面加上这个</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="2dc0" class="mr lq in mn b gy ms mt l mu mv">import { ApolloClient, InMemoryCache, ApolloProvider } from "@apollo/client";</span><span id="7e71" class="mr lq in mn b gy nn mt l mu mv">const client = new ApolloClient({<br/>  uri: "http://localhost:4000/graphql",<br/>  cache: new InMemoryCache()<br/>});</span><span id="5bdb" class="mr lq in mn b gy nn mt l mu mv">ReactDOM.render(<br/>  &lt;ApolloProvider client={client}&gt;<br/>    &lt;App /&gt;<br/>  &lt;/ApolloProvider&gt;,<br/>  document.getElementById("root")<br/>);</span></pre><p id="4d26" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们正在导入<code class="fe mw mx my mn b">ApolloClient</code>，它建立了我们与后端apollo服务器的连接，我们需要将<code class="fe mw mx my mn b">uri</code>传递给我们想要连接的后端apollo服务器。<code class="fe mw mx my mn b">ApolloProvider</code>是让我们的应用程序访问所有东西的包装器，然后我们传入<code class="fe mw mx my mn b">client</code>。</p><p id="b8ee" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，让我们也在这个文件中添加语义CSS样式。</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="af53" class="mr lq in mn b gy ms mt l mu mv">import "semantic-ui-css/semantic.min.css";</span></pre><p id="a910" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以，最后，你的<code class="fe mw mx my mn b">index.js</code>文件现在应该是这样的= &gt;</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="ba36" class="mr lq in mn b gy ms mt l mu mv">import React from "react";<br/>import ReactDOM from "react-dom";<br/>import "semantic-ui-css/semantic.min.css";<br/>import App from "./App";<br/>import { ApolloClient, InMemoryCache, ApolloProvider } from "@apollo/client";</span><span id="d620" class="mr lq in mn b gy nn mt l mu mv">const client = new ApolloClient({<br/>  uri: "http://localhost:4000/graphql",<br/>  cache: new InMemoryCache()<br/>});</span><span id="4538" class="mr lq in mn b gy nn mt l mu mv">ReactDOM.render(<br/>  &lt;ApolloProvider client={client}&gt;<br/>    &lt;App /&gt;<br/>  &lt;/ApolloProvider&gt;,<br/>  document.getElementById("root")<br/>);</span></pre><h1 id="23b9" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">迄今为止的项目结构</h1><p id="e2de" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">目前，我有一个简单的设置。我有我们需要的所有表单组件。</p><p id="f7ca" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在<code class="fe mw mx my mn b">src</code>目录中，创建一个<code class="fe mw mx my mn b">Home.js</code>组件。</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="50d1" class="mr lq in mn b gy ms mt l mu mv">import React from "react";</span><span id="96ee" class="mr lq in mn b gy nn mt l mu mv">const Home = () =&gt; {<br/>  return &lt;div&gt;Auth or Slack&lt;/div&gt;;<br/>};</span><span id="01b3" class="mr lq in mn b gy nn mt l mu mv">export default Home;</span></pre><p id="cac5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果没有登录，这个组件将呈现验证页面(将在一分钟内创建),如果我们登录，它将呈现Slack组件。</p><p id="026c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在<code class="fe mw mx my mn b">src</code>目录下创建一个组件文件夹。在<code class="fe mw mx my mn b">src</code> &gt; <code class="fe mw mx my mn b">components</code>里面，添加以下这些文件夹= &gt;</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="21a4" class="mr lq in mn b gy ms mt l mu mv">src &gt; components &gt; auth<br/>src &gt; components &gt; channel<br/>src &gt; components &gt; message<br/>src &gt; components &gt; team</span></pre><p id="3219" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，这些文件夹将有表单组件。</p><ul class=""><li id="13cf" class="mz na in kv b kw kx kz la lc nb lg nc lk nd lo ne nf ng nh bi translated">src &gt; components &gt; auth &gt; Login.js和Register.js和login.css</li><li id="eb0a" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated">src &gt;组件&gt;通道&gt;创建通道. js</li><li id="71ea" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated">src &gt;组件&gt;消息&gt; CreateMessage.js</li><li id="eb36" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated">src &gt;组件&gt;团队&gt; CreateTeam.js</li></ul><p id="652d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在<code class="fe mw mx my mn b">src</code> &gt; <code class="fe mw mx my mn b">App.js</code>文件中，让我们为这些组件添加路线。</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="b1c1" class="mr lq in mn b gy ms mt l mu mv">import React from "react";<br/>import { BrowserRouter as Router, Switch, Route } from "react-router-dom";<br/>import Login from "./components/auth/Login";<br/>import Register from "./components/auth/Register";<br/>import CreateTeam from "./components/team/CreateTeam";<br/>import Channel from "./components/channel/CreateChannel";<br/>import Home from "./Home";<br/><br/>function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Router&gt;<br/>        &lt;Switch&gt;<br/>          &lt;Route exact path="/" component={Home} /&gt;<br/>          &lt;Route path="/login" component={Login} /&gt;<br/>          &lt;Route path="/register" component={Register} /&gt;<br/>          &lt;Route path="/create-team" component={CreateTeam} /&gt;<br/>           &lt;Route path="/create-message" component={CreateMessage} /&gt;<br/>          &lt;Route path="/create-channel" component={CreateChannel} /&gt;<br/>        &lt;/Switch&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/>export default App;</span></pre><p id="f9b9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里没有什么特别的，只是一些基本的路由设置。最后，我们的文件应该是这样的= &gt;</p><p id="1974" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">src &gt;组件&gt;验证&gt;登录. js</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="9e33" class="mr lq in mn b gy ms mt l mu mv">import React from "react";<br/><br/>const Login = () =&gt; {<br/>  return &lt;div&gt;login&lt;/div&gt;;<br/>};<br/>export default Login;</span></pre><p id="921f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">src &gt;组件&gt; auth &gt; Register.js</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="9e6d" class="mr lq in mn b gy ms mt l mu mv">import React from "react";<br/><br/>const Register = () =&gt; {<br/>  return &lt;div&gt;register&lt;/div&gt;;<br/>};<br/>export default Register;</span></pre><p id="a0a3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">src &gt;组件&gt;通道&gt;创建通道. js</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="fcef" class="mr lq in mn b gy ms mt l mu mv">import React from 'react'<br/><br/>const CreateChannel = () =&gt; {<br/>    return (<br/>        &lt;div&gt;<br/>            create channel<br/>        &lt;/div&gt;<br/>    )<br/>}<br/>export default CreateChannel;</span></pre><p id="2d8b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">src &gt;组件&gt;消息&gt; CreateMessage.js</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="dd1b" class="mr lq in mn b gy ms mt l mu mv">import React from "react";<br/><br/>const CreateMessage = () =&gt; {<br/>  return &lt;div&gt;im the create message component&lt;/div&gt;;<br/>};<br/><br/>export default CreateMessage;</span></pre><p id="7ce1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">src &gt;组件&gt;团队&gt; CreateTeam.js</p><pre class="ke kf kg kh gt mm mn mo mp aw mq bi"><span id="083e" class="mr lq in mn b gy ms mt l mu mv">import React from 'react'<br/><br/>const CreateTeam = () =&gt; {<br/>    return (<br/>        &lt;div&gt;<br/>            create team <br/>        &lt;/div&gt;<br/>    )<br/>}<br/><br/>export default CreateTeam</span></pre><p id="69eb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，你的文件夹结构应该是这样的。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi no"><img src="../Images/1fce171c2ca2ccd63edcc67ab9331ef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/0*33uw_SOq6WAaO0s-"/></div></figure><p id="3004" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就是这一个人的全部。在下一篇文章中，我们将使用语义和react-hook-form来完成<code class="fe mw mx my mn b">login</code>和<code class="fe mw mx my mn b">register</code> UI。敬请期待！😃</p><p id="b9bf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">仅供参考<code class="fe mw mx my mn b">login.css</code>文件是空的，所以不用担心👍</p></div></div>    
</body>
</html>