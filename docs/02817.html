<html>
<head>
<title>JavaScript Unit Test Best Practices — CI and Quality</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript单元测试最佳实践— CI和质量</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-unit-test-best-practices-ci-and-quality-2a9345fd7f38?source=collection_archive---------6-----------------------#2020-09-01">https://blog.devgenius.io/javascript-unit-test-best-practices-ci-and-quality-2a9345fd7f38?source=collection_archive---------6-----------------------#2020-09-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f94077613d120cd2193635e24bd9853b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MZ779t8l3INXBbfl"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">凯蒂·伯诺斯基在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="2eb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单元测试对于检查我们的应用程序如何工作非常有用。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看在编写JavaScript单元测试时应该遵循的一些最佳实践。</p><h1 id="3a91" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">作为实时协作文档进行测试</h1><p id="6a75" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">测试告诉我们很多关于我们系统的事情。</p><p id="9dcc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们有大量的描述和检查，告诉我们它能做什么。</p><p id="a430" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有像故事书和UI组件这样的东西告诉我们它们是做什么的。</p><p id="bca5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用它们查看每个组件。</p><h1 id="09b6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用自动化工具检测视觉问题</h1><p id="f16b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用各种工具来检测视觉问题。</p><p id="f856" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们不会在单元或集成测试中被捕获。</p><p id="e44c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些工具保存我们应用程序的截图，以便我们可以看到我们应用程序中的任何缺陷。</p><p id="910a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">也有像<a class="ae kc" href="https://applitools.com/" rel="noopener ugc nofollow" target="_blank"> Applitools </a>、<a class="ae kc" href="https://percy.io/" rel="noopener ugc nofollow" target="_blank"> Percy.io </a>这样的工具，让我们管理截图，并利用他们自己的技术自动检测视觉噪声。</p><h1 id="19d8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获得足够的自信报道</h1><p id="6f6c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以获得足够的测试覆盖率，使我们对测试充满信心。</p><p id="e5dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大约80%应该覆盖最重要的部分。</p><p id="c74b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用CI工具来检查我们是否满足测试覆盖率的阈值。</p><p id="2081" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数测试框架可以毫不费力地获得测试覆盖率。</p><h1 id="4381" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查覆盖率报告</h1><p id="c12e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该检查我们的测试覆盖报告，以检查我们的应用程序的哪些部分还没有被测试覆盖。</p><p id="5c1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们可以突出显示我们代码中要检查的项目。</p><p id="e2af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">仅仅拥有测试覆盖率并不能告诉我们应用程序的哪些部分被测试覆盖。</p><h1 id="dbd4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">测量逻辑覆盖率</h1><p id="5985" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用突变测试来判断我们的应用程序的哪一部分是真正测试过的，而不是仅仅被访问过。</p><p id="116a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要做到这一点，我们可以有意识地改变这些值来检查结果。</p><p id="8778" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可能会发现我们可能还没有发现的应该失败的案例。</p><h1 id="7557" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">防止测试代码问题</h1><p id="8051" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了检查测试代码的问题，我们可以使用测试棉条来检查代码。</p><p id="b2f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有ESLint的插件，如<a class="ae kc" href="https://www.npmjs.com/package/eslint-plugin-mocha" rel="noopener ugc nofollow" target="_blank"> eslint-plugin-mocha </a>或<a class="ae kc" href="https://github.com/jest-community/eslint-plugin-jest" rel="noopener ugc nofollow" target="_blank"> eslint-plugin-jest </a>将为我们做这些检查。</p><p id="a170" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，当测试没有断言时，它会警告我们。</p><h1 id="5926" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">丰富Linters并取消有林挺问题的构建</h1><p id="3671" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们的代码有林挺问题，那么我们应该阻止它们的生成，因为我们希望林挺问题得到解决。</p><p id="88f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ESLint有很多插件，比如Airbnb和Standard.js插件。</p><p id="418c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们可以发现代码问题，并确保格式是每个人都同意的。</p><p id="ecfe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">还有<a class="ae kc" href="https://www.npmjs.com/package/eslint-plugin-security?activeTab=readme" rel="noopener ugc nofollow" target="_blank"> eslint-plugin-security </a>来检查我们应用中的安全问题。</p><p id="ec98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将阻止攻击者试图攻击我们的应用程序。</p><h1 id="1fe0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">缩短反馈回路</h1><p id="62c3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们在开发人员的机器上本地运行CI，我们可以更快地获得反馈。</p><p id="4c6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们让我们在本地运行我们的管道，这样我们可以获得有用的测试见解。</p><p id="6cbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以编写代码，获得反馈，然后根据需要进行更改。</p><figure class="mf mg mh mi gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/346399e1740fb1f9953fada6c6e32ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mi-KLyr4-OjepphK"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@hg_photo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">赫伯特·戈特施</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="a9ce" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e87b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用CI工具增强我们的测试工作流程，并检查诸如视觉缺陷之类的东西。</p></div></div>    
</body>
</html>