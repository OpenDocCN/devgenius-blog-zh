<html>
<head>
<title>Easier Ruby with Rails Generators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更简单的Ruby with Rails生成器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/easier-ruby-with-rails-generators-b542c5c33ae2?source=collection_archive---------20-----------------------#2020-06-11">https://blog.devgenius.io/easier-ruby-with-rails-generators-b542c5c33ae2?source=collection_archive---------20-----------------------#2020-06-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8071" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当涉及到利用Ruby on Rail的任何一个方便的生成器时，一点点就可以走很长的路。这篇博文将详细介绍何时、用什么以及如何使用common Rail的发电机。首先，打开一个新的Rail项目，运行“bundle install”后，在终端中键入以下内容:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="9c62" class="ku kv iq kq b gy kw kx l ky kz">rails g</span></pre><p id="1f2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将向您的终端输出一个命令列表，并作为如何继续的蓝图。“rails g”输出如下所示。</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="e8ee" class="ku kv iq kq b gy kw kx l ky kz">Please choose a generator below.</span><span id="97f6" class="ku kv iq kq b gy la kx l ky kz">Rails:</span><span id="9f9a" class="ku kv iq kq b gy la kx l ky kz">  assets</span><span id="e796" class="ku kv iq kq b gy la kx l ky kz">  channel</span><span id="d41e" class="ku kv iq kq b gy la kx l ky kz">  controller</span><span id="e09c" class="ku kv iq kq b gy la kx l ky kz">  generator</span><span id="5dc3" class="ku kv iq kq b gy la kx l ky kz">  helper</span><span id="e7e4" class="ku kv iq kq b gy la kx l ky kz">  integration_test</span><span id="6abf" class="ku kv iq kq b gy la kx l ky kz">  jbuilder</span><span id="b264" class="ku kv iq kq b gy la kx l ky kz">  job</span><span id="a742" class="ku kv iq kq b gy la kx l ky kz">  mailer</span><span id="dd1a" class="ku kv iq kq b gy la kx l ky kz">  migration</span><span id="dbcb" class="ku kv iq kq b gy la kx l ky kz">  model</span><span id="6595" class="ku kv iq kq b gy la kx l ky kz">  resource</span><span id="8b67" class="ku kv iq kq b gy la kx l ky kz">  scaffold</span><span id="d113" class="ku kv iq kq b gy la kx l ky kz">  scaffold_controller</span><span id="a7df" class="ku kv iq kq b gy la kx l ky kz">  task</span></pre><p id="ed8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哇！有了这么多发电机选项，<strong class="jp ir">我们该何去何从？</strong></p><figure class="kl km kn ko gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi lb"><img src="../Images/8f9eae00c5c61d9aad4ba6cfd2c27a2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhLGHXDcJAskuwP0nDGz-w.jpeg"/></div></div></figure><p id="901f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">选择任何特定生成器的最佳方法应该与项目文件本身已经包含的内容相关。如果您需要的只是一个新的模型或控制器，那么就没有必要使用“rails g resource ”,它会生成这两个文件甚至更多。过多的混乱无疑会导致错误，所以在运行任何生成器之前都要记住DRY原则。</p><p id="7f98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从绝对应该避免的唯一生成器开始；除非你的目标是非常快速地证明概念，或者只是展示Ruby on Rails的强大功能。说到功率过大的Rail发电机，“rails g scaffold”独占鳌头。这个生成器将充实整个Ruby on Rails web应用程序，包括模型、控制器、视图、路径，以及其他一些通常不必要的文件。乍一看，这听起来很神奇，几乎像是一条无害的捷径。</p><p id="aa50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然而，我劝你不要被愚弄。对于几乎每一个应用程序来说，“rails g scaffold”都应该谨慎使用，因为它留给开发人员的控制权很少，而且会产生过多的代码，这只会让您的项目陷入困境。但是，如果您需要从头开始生产一些模型、控制器和视图目录；那么我强烈推荐‘rails g resource’</p><p id="972f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">rail的发电机“资源”本质上是一个发电机，由四个依次运行的其他发电机组成。为了更好地了解“rails g resource”在幕后做些什么，让我们来分解一下它的各个部分。例如，如果我们要运行“rails g模型”,我们将使用以下公式:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="fb7a" class="ku kv iq kq b gy kw kx l ky kz">rails g model ModelName column_name:datatype column_name2:datatype2 --no-test-framework</span></pre><p id="d219" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">也许我们希望为一个作者类生成一个模型，如下所示:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="226e" class="ku kv iq kq b gy kw kx l ky kz">rails g model Author name:string genre:string --no-test-framework</span></pre><p id="3deb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该命令不仅会在我们的Models文件夹中生成一个“Author.rb”文件，还会创建以下迁移文件:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="5e8f" class="ku kv iq kq b gy kw kx l ky kz"># db/migrate/20150301576893_create_authors.rb<br/>class CreateAuthors &lt; ActiveRecord::Migration[5.1]<br/>  def change<br/>    create_table :authors do |t|<br/>      t.string :name<br/>      t.string :genre<br/>      t.timestamps<br/>    end<br/>  end<br/>end</span></pre><p id="aebb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顺便提一下，在我们的generate命令的末尾加上'— no-test-framework '只是告诉Rails不要生成任何rspec/test文件。在某些情况下，这些代码可能会派上用场，但在大多数情况下，它们是不必要的代码块，因此最好省略掉。</p><p id="138f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用模型生成命令，您还可以使用以下公式生成一个单独的迁移文件，而无需创建新的模型类:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="b38c" class="ku kv iq kq b gy kw kx l ky kz">rails g migration add_column_name_to_table_name column_name:datatype --no-test-framework</span></pre><p id="2c05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们想在作者表中添加一个简历，如下所示:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="0d3a" class="ku kv iq kq b gy kw kx l ky kz">rails g migration add_bio_to_authors bio:text --no-test-framework</span></pre><p id="0be9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行此命令后，将创建以下迁移文件:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="06bc" class="ku kv iq kq b gy kw kx l ky kz"># db/migrate/20120301776896_add_bio_to_authors.rb<br/>class AddBioToAuthors &lt; ActiveRecord::Migration[5.1]<br/>  def change<br/>    add_column :authors, :bio, :text<br/>  end<br/>end</span></pre><p id="7f45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个框架对于添加多个列和删除列是一样的。如果我们想添加多列，公式是:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="3081" class="ku kv iq kq b gy kw kx l ky kz">rails g migration add_more_to_authors first_publication_date:integer number_of_books_sold:integer --no-test-framework</span></pre><p id="24b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">相反，删除列就像下面这样简单:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="477c" class="ku kv iq kq b gy kw kx l ky kz">rails g migration remove_number_of_books_sold_from_authors number_of_books_sold:integer --no-test-framework</span></pre><p id="839e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将我们带到“rails g resource ”,它将创建一个新的模型、数据库迁移文件、控制器和一个空的视图文件夹。该命令遵循与模型生成器相同的公式:</p><pre class="kl km kn ko gt kp kq kr ks aw kt bi"><span id="7471" class="ku kv iq kq b gy kw kx l ky kz">rails g resource ModelName column_name:datatype --no-test-framework</span></pre><p id="8101" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">资源生成器通常应该在还没有创建控制器、迁移或模型时使用。本质上，当你从头开始一个新的rails应用时，你应该使用“rails g resource”。它给你空间来控制你的代码，而不会创建太多不必要的文件。请在这里阅读更多关于Rails生成器的信息。</p></div></div>    
</body>
</html>