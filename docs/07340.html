<html>
<head>
<title>REDUX WITH HOOKS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带挂钩的 REDUX</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/redux-with-hooks-c5117d5a9389?source=collection_archive---------6-----------------------#2022-03-16">https://blog.devgenius.io/redux-with-hooks-c5117d5a9389?source=collection_archive---------6-----------------------#2022-03-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jm jn jo jp gh gi paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="gh gi jl"><img src="../Images/87b519cd740e2ffc1f31b0785f148818.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wL0CtXYz0YjHXGcQyYVtlg.png"/></div></div><figcaption class="jw jx gj gh gi jy jz bd b be z dk translated">图:反应+还原</figcaption></figure><p id="a05f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先要理解 redux 和钩子，我们必须知道为什么 REDUX，钩子会在 react-JS 中出现，以便让我们理解它们:</p><h2 id="c39a" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">REDUX:</h2><p id="db9d" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi lw translated">edux 是由 Dan Abramov 和 Andrew Clark 在 2015 年创建的，作为管理和提供整个 React 应用程序状态的解决方案。Redux 创建一个名为 Store 的全局状态，并允许您将组件连接到 Store 以访问全局状态。</p><ul class=""><li id="5da9" class="mf mg in kc b kd ke kh ki kl mh kp mi kt mj kx mk ml mm mn bi translated">Redux 有助于防止 props 钻取，并使跨许多组件的状态管理更加容易。</li></ul><h2 id="c5b5" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">使用 React-Redux 时，您需要了解 3 件事情:</h2><p id="fbec" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">Redux 由<strong class="kc io">动作</strong>、<strong class="kc io">减速器</strong>、<strong class="kc io">状态</strong>、<strong class="kc io">存储</strong>组成。每样东西都有特定的任务。</p><ul class=""><li id="f986" class="mf mg in kc b kd ke kh ki kl mh kp mi kt mj kx mk ml mm mn bi translated"><strong class="kc io">动作</strong>:动作是应该有两个属性的对象。一个描述动作的类型，第二个描述状态的变化。</li><li id="53c4" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated"><strong class="kc io"> Reducers </strong>:这些是纯函数，它们执行动作和应用程序的先前状态。Reducer 的工作是将新状态返回给应用程序。</li><li id="e9d3" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated"><strong class="kc io">状态:</strong> <em class="mt">状态</em>一个组件是一个对象，它保存了一些在组件的生命周期中可能发生变化的信息。</li><li id="4f5a" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">存储:它只是管理应用程序的状态。它将<strong class="kc io">动作</strong>和<strong class="kc io">减速器</strong>集合在一起。它保存并改变整个应用程序的状态。整个应用程序只有一个存储。</li></ul><blockquote class="mu mv mw"><p id="c96a" class="ka kb mt kc b kd ke kf kg kh ki kj kk mx km kn ko my kq kr ks mz ku kv kw kx ig bi translated">*在 redux store 中将状态存储为集中格式，以便我们可以在整个应用程序的任何地方访问它</p></blockquote><figure class="nb nc nd ne gt jp gh gi paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="gh gi na"><img src="../Images/525cfc3fb8d17059310c969b0095be5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IAN_91XNc3T4m7SSP9BPAQ.png"/></div></div><figcaption class="jw jx gj gh gi jy jz bd b be z dk translated">反应还原的流程</figcaption></figure><h2 id="86a4" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">挂钩:</h2><p id="29bc" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">钩子是 React 16.8 的新增功能。它们允许您使用状态和其他 React 特性，而无需编写类。钩子是<strong class="kc io"> JavaScript 函数</strong>，但是使用时需要遵循两条规则。</p><p id="f248" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">规则</strong>中的<strong class="kc io">挂钩</strong>:</p><p id="1b00" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">1.我们只能在函数组件中使用 React 钩子。</p><p id="2669" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.只调用顶层的钩子。</p><p id="a7d6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以下是 React 挂钩:</p><ul class=""><li id="c85d" class="mf mg in kc b kd ke kh ki kl mh kp mi kt mj kx mk ml mm mn bi translated">使用状态</li><li id="c219" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">使用效果</li><li id="6b27" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">使用上下文</li><li id="b127" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">使用回拨</li><li id="cbb5" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">使用备忘录</li><li id="0d33" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">使用参考</li><li id="01ec" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">使用减速器</li><li id="dded" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">定制挂钩</li></ul><blockquote class="mu mv mw"><p id="8b2b" class="ka kb mt kc b kd ke kf kg kh ki kj kk mx km kn ko my kq kr ks mz ku kv kw kx ig bi translated">react 挂钩的主要好处是写<strong class="kc io">更少</strong>，做<strong class="kc io">更多&amp;有状态逻辑的可重用性。</strong></p></blockquote><p id="1078" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们对 redux 和 Hooks 有了一个基本的了解，让我们一起来看看这个叫做<strong class="kc io"> Redux 与 Hooks 的组合。</strong></p><figure class="nb nc nd ne gt jp gh gi paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="gh gi nf"><img src="../Images/618e8d74fd42130e879501198bc189f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q5GUoczjXmLshFFhJ6XFIg.png"/></div></div><figcaption class="jw jx gj gh gi jy jz bd b be z dk translated">Redux 中带钩子的经典状态管理</figcaption></figure><h1 id="2961" class="ng kz in bd la nh ni nj ld nk nl nm lg nn no np lj nq nr ns lm nt nu nv lp nw bi translated">如何使用带有钩子的 redux:</h1><p id="8d2d" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated"><em class="mt"> React Redux 现在包括了其</em> <strong class="kc io"> <em class="mt">使用选择器()</em> </strong> <em class="mt">和</em> <strong class="kc io"> <em class="mt">使用分派()钩子</em> </strong> <em class="mt">可以用来代替</em> <strong class="kc io"> <em class="mt">连接</em> </strong> <em class="mt">。</em></p><p id="3931" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">使用选择器</strong>类似于将地图状态连接到道具。您传递给它一个函数，该函数接受 Redux 存储状态并返回您感兴趣的状态片段。</p><p id="47bb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">使用分派</strong>代替了连接地图分派到道具，但是重量更轻。它所做的只是返回你商店的分派方法，这样你就可以<a class="ae nx" href="https://github.com/reduxjs/react-redux/issues/1252#issuecomment-488160930" rel="noopener ugc nofollow" target="_blank">手动分派行动</a>。我喜欢这种变化，因为绑定(连接)动作创建者可能会让新人对 React-Redux 感到有点困惑。</p><h2 id="76e2" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">通过连接恢复:</h2><p id="c84b" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">一个类组件使用<strong class="kc io"> <em class="mt"> connect() </em> </strong>方法连接 redux 存储。</p><figure class="nb nc nd ne gt jp gh gi paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="gh gi ny"><img src="../Images/8cc92d6e0b9af16fbef1f41cc8631cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TTk4go3zuaLuvmNWbeO8JA.png"/></div></div><figcaption class="jw jx gj gh gi jy jz bd b be z dk translated">React 中的示例类组件。</figcaption></figure><p id="4ac6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> connect() </strong>函数将一个 React 类组件连接到一个 Redux 存储。它向其连接的组件提供它需要的来自存储的数据片段，以及它可以用来向存储分派动作的函数。</p><p id="742f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用<code class="fe nz oa ob oc b">connect</code>:</p><figure class="nb nc nd ne gt jp gh gi paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="gh gi od"><img src="../Images/a79b54aab69e53ce0ae31e23b638bf2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YGXmFFXn4roUGE_6XjXl4Q.png"/></div></div></figure><h2 id="6bdb" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">带挂钩的 Redux:</h2><p id="70c5" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated"><em class="mt"> * Redux 使用不变性来简化应用开发和逻辑。通过在状态中的所有项目上强制不变性。</em></p><figure class="nb nc nd ne gt jp gh gi paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="gh gi oe"><img src="../Images/163e0a71e4968f9d2f0cf8590687fc37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ofPx5HtDQJxvNljj2i07lQ.png"/></div></div><figcaption class="jw jx gj gh gi jy jz bd b be z dk translated">反应中的样品功能成分。</figcaption></figure><h2 id="cf36" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated"><code class="fe nz oa ob oc b">useSelector( ) :</code></h2><p id="8979" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">const result: any = useSelector(选择器:Function，equalityFn？:Function) <br/>允许您使用选择器功能从 Redux 存储状态中提取数据。</p><h2 id="ae8f" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated"><code class="fe nz oa ob oc b">useDispatch( ) :</code></h2><p id="5e35" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">const dispatch = use dispatch()<br/>这个钩子从 Redux 存储中返回对调度函数的引用。您可以根据需要使用它来调度操作。</p><p id="ebd2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，用新的 React Redux 钩子代替了<code class="fe nz oa ob oc b">connect</code>:</p><figure class="nb nc nd ne gt jp gh gi paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="gh gi of"><img src="../Images/ada9fd75c214d33c1493e535dd132542.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G4-TE57C1iA-Q24AuUKuHQ.png"/></div></div></figure><h2 id="6685" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">结论:</h2><ul class=""><li id="ec1f" class="mf mg in kc b kd lr kh ls kl og kp oh kt oi kx mk ml mm mn bi translated">Redux 允许用户将应用程序的状态管理到一个集中的存储中，并使应用程序中的更改更加可预测和可跟踪。</li><li id="168e" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">钩子使得 react 更好，因为你有更简单的代码来更快更有效地实现类似的功能。不用写类也能反应状态和生命周期方法。</li><li id="6c72" class="mf mg in kc b kd mo kh mp kl mq kp mr kt ms kx mk ml mm mn bi translated">使用 Redux 挂钩的主要好处是它们在概念上比 connect 简单。</li></ul></div></div>    
</body>
</html>