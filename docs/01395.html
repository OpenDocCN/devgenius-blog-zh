<html>
<head>
<title>Crud Operations with ADO.NET</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用ADO进行Crud操作。网</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/wanna-query-database-without-using-entity-framework-using-ado-net-64a6028c3665?source=collection_archive---------14-----------------------#2020-07-02">https://blog.devgenius.io/wanna-query-database-without-using-entity-framework-using-ado-net-64a6028c3665?source=collection_archive---------14-----------------------#2020-07-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e531878ccac636b3743b09b95b194f60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hxigV8Slhxc_1y25VWW6ug.jpeg"/></div></div></figure><p id="122d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi kt translated">实体框架建立在ADO.net之上。大多数人使用实体框架的代码优先方法或数据库优先方法，但是他们不具备关于CRUD操作的知识。本文讨论了如何简单地使用ADO.net进行创建、读取、更新和删除等基本操作。使用存储过程，你也可以使用ADO.net很容易地查询，这也将在后面的部分讨论。</p><p id="2a96" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们需要使用SQL server management或SQL server object explorer在Visual Studio中创建一个数据库，您可以连接到您的数据库。在这里，我将讨论使用一个虚拟项目的所有步骤。</p><p id="534e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建数据库和表</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="4661" class="ll lm in lh b gy ln lo l lp lq">CREATE DATABASE TimeTableManagementDB</span></pre><p id="f478" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们将为用户创建一个表，并使用这个表进行查询</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="bd43" class="ll lm in lh b gy ln lo l lp lq">CREATE TABLE [User] (<br/>[Id] INT IDENTITY (1, 1) NOT NULL,<br/>[Name] NVARCHAR (MAX) NULL,<br/>[Contact_No] NVARCHAR (MAX) NULL,<br/>[Password] NVARCHAR (MAX) NOT NULL,<br/>CONSTRAINT [PK_User] PRIMARY KEY CLUSTERED ([Id] ASC),<br/>);</span></pre><p id="9b11" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们需要创建一个新的dotnet核心应用程序，下面的屏幕截图将指导您创建一个新的web API</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/5eff97a7dbd3b9782532356e4b52068f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*0twvFZQUS3X3liCEQfB21Q.png"/></div></figure><p id="6190" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">单击“确定”创建应用程序</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/bdb6dc6e6efbe6eef210f39db2c79c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*9I7-gBT7dchvWwgYXPPXeA.png"/></div></figure><p id="610c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">单击确定</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/a7503bfae6239ab9944694c69e89d113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*0GoUGuv5yfLfEcP4naCTdw.png"/></div></figure><p id="f4ae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">单击确定。解决方案的创建是通过加载所有需要的文件来完成的。下面给出的是溶液结构图。</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/3d69ddc446d2c3575c89d5de76375697.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*y6agSz5PtB1Sr0p3aF2qxQ.png"/></div></figure><p id="fb25" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们必须创建一个模型来使用ADO.net执行CRUD操作。所以右键单击项目和一个新的文件夹来解决方案，并将其重命名为模型。这里我将使用用户模型来解释CRUD操作。要创建用户模型，右键单击模型文件夹，然后添加-&gt;必须选择类。将类重命名为用户。用户模型类应该如下所示</p><figure class="lc ld le lf gt jo gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/5d9d7e07314dade3a4d267aa1bbcece3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*OmJsgC6cVnOmgv_giZ2VVg.png"/></div></figure><p id="dc78" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后创建一个控制器来对数据库执行CRUD操作。为此，在controllers文件夹中添加一个名为UserController.cs的新类。下面是用户控制器类的源代码。</p><p id="559f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要访问数据库，首先我们必须连接到数据库，因为我们可以使用单独的上下文类。但是在这个例子中，我将在控制器的构造函数中创建数据库连接，如下所示</p><pre class="lc ld le lf gt lg lh li lj aw lk bi"><span id="1b9b" class="ll lm in lh b gy ln lo l lp lq">string ConnectionInformation = "Server=localhost;Database=TimeTableDB;Trusted_Connection=True;MultipleActiveResultSets=true";</span><span id="5d72" class="ll lm in lh b gy lw lo l lp lq">public SqlConnection MainConnection;</span><span id="be34" class="ll lm in lh b gy lw lo l lp lq">public UserController()<br/>{<br/>   MainConnection = new SqlConnection(ConnectionInformation);<br/>   MainConnection.Open();<br/>}</span></pre><ul class=""><li id="fa3d" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated"><strong class="jx io">要获得所有记录，可以使用这两种方法</strong></li></ul><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><ul class=""><li id="5780" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated"><strong class="jx io">获取与Id相关的记录</strong></li></ul><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><ul class=""><li id="b339" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated"><strong class="jx io">添加一条记录</strong></li></ul><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><ul class=""><li id="348a" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated"><strong class="jx io">更新一条记录</strong></li></ul><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><ul class=""><li id="5b22" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated"><strong class="jx io">删除一条记录</strong></li></ul><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><ul class=""><li id="211c" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated"><strong class="jx io">完整的控制器类如下</strong></li></ul><figure class="lc ld le lf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure></div></div>    
</body>
</html>