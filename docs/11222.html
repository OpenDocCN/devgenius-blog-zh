<html>
<head>
<title>When To Use Which Table In Snowflake?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">雪花里什么时候用哪个表？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/when-to-use-which-table-in-snowflake-8133b25da758?source=collection_archive---------1-----------------------#2022-12-26">https://blog.devgenius.io/when-to-use-which-table-in-snowflake-8133b25da758?source=collection_archive---------1-----------------------#2022-12-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9ca6d5e652c63f72dfe24cb1c49ecabb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C0MGvcYql5gbWwJa"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">肯尼·埃利亚松在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="6c31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇博客中，我们将讨论 Snowflake 中可用的各种表格类型以及它们的具体用例。我将努力使用例尽可能清晰，并希望读完这篇博客后，您可以轻松地做出决定，为您的需求选择正确的表类型。我还将包括所有表格类型的简介，以便您知道我们在谈论什么。</p><p id="d0f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我想给<strong class="kf ir">帕特里克古巴</strong>一些不错的图标，你可以在下面看到。我用它们来使我的博客更有吸引力。谢了。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="dc3e" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">临时表—</h1><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/fc7dd2e9641cd92382fad2a5f301ec64.png" data-original-src="https://miro.medium.com/v2/resize:fit:270/format:webp/1*ZyyFcleXxynZS2WytQh3Tg.png"/></div></figure><ol class=""><li id="5237" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">临时表是特定于会话，也称为会话表。在 SQL server、Sybase 等较老的 RDBMS 中，这种表也被称为#temp 表。</li><li id="fb8e" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">这些表在会话之外不可见，除了创建它的用户之外，其他用户也不可见。</li><li id="9c0c" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">临时表不像其他表那样强制名称唯一性，您可以创建一个与同一模式中任何其他现有表同名的临时表，但是在会话中，该临时表将优先于同一模式中同名的其他表。</li><li id="530f" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">临时表在会话中保存数据期间会产生存储费用。</li><li id="5f7b" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">您可以创建一个临时表，该表与同一模式中的现有表同名，从而有效地隐藏现有表。</li><li id="99b5" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">您可以在同一架构中创建一个与现有临时表同名的表；但是，新创建的表被临时表隐藏了。</li><li id="b8c4" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">临时表的时间行程为 0-1 天或会话的剩余时间，以较短者为准。</li><li id="a4b7" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">临时表没有自动防故障装置</li><li id="e6f0" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">临时表<strong class="kf ir"> <em class="mz">不</em> </strong>需要在创建对象的模式上具有 CREATE TABLE 权限。</li><li id="bbc2" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">要创建临时表，我们必须使用下面的语法示例。</li></ol><pre class="mh mi mj mk gt na nb nc bn nd ne bi"><span id="8940" class="nf lj iq nb b be ng nh l ni nj">CREATE TEMPORARY TABLE RAJIVTABLE (ID NUMBER, CREATION_DATE DATE);</span></pre><h2 id="7b7a" class="nk lj iq bd lk nl nm dn lo nn no dp ls ko np nq lw ks nr ns ma kw nt nu me nv bi translated">使用案例:</h2><ol class=""><li id="ab3f" class="ml mm iq kf b kg nw kk nx ko ny ks nz kw oa la mq mr ms mt bi translated">任何临时数据需求。</li><li id="cd88" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">对于 ETL 过程，您希望存储一些在当前会话之外不需要的中间会话数据。</li><li id="aca5" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">会话之外不需要数据保护。</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="8e14" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">瞬态表—</h1><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/4b0c149bf4f88005b08c1fddba0141e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:270/format:webp/1*3nFXg2Y5_cash81IIMBdiw.jpeg"/></div></figure><ol class=""><li id="40d4" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">临时表就像永久表一样，只是它们没有故障安全期。</li><li id="697f" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">临时表保存跨会话和与其他用户的数据。</li><li id="ede5" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">该表需要像永久表一样被显式删除。</li><li id="8384" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">瞬态表在保存数据期间会产生存储费用，就像永久表一样。故障安全期费用不适用于此表。</li><li id="5026" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">临时表不能转换为任何其他表类型。</li><li id="05cd" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">瞬态表的时间行程为 0–1 天。</li><li id="2084" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">瞬态表无故障保护</li><li id="756a" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">要创建临时表，我们必须使用下面的语法示例。</li></ol><pre class="mh mi mj mk gt na nb nc bn nd ne bi"><span id="13ee" class="nf lj iq nb b be ng nh l ni nj">CREATE TRANSIENT TABLE RAJIVTABLE (ID NUMBER, CREATION_DATE DATE);    </span></pre><h2 id="a15f" class="nk lj iq bd lk nl nm dn lo nn no dp ls ko np nq lw ks nr ns ma kw nt nu me nv bi translated">使用案例:</h2><ol class=""><li id="4e66" class="ml mm iq kf b kg nw kk nx ko ny ks nz kw oa la mq mr ms mt bi translated">需要像永久表这样的功能，但想要经济高效的解决方案。</li><li id="b507" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">不想在故障安全期间保护数据。</li><li id="5c25" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">需要一个选项来恢复最多 1 天的已删除历史数据。</li><li id="ddd6" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">专为需要在每次会话后维护的临时数据而设计。</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="6070" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">永久表—</h1><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/4b0c149bf4f88005b08c1fddba0141e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:270/format:webp/1*3nFXg2Y5_cash81IIMBdiw.jpeg"/></div></figure><ol class=""><li id="0b65" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">这些是雪花中的默认表格类型。</li><li id="b1eb" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">这些表保存数据，直到您显式删除它们。对于希望长期存储数据的应用程序来说，这些是最首选的表类型。</li><li id="c62b" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">永久表可以根据选择的版本由时间旅行保护。<strong class="kf ir">标准版(0 或 1) &amp;企业版或更高(1 到 90)。</strong></li><li id="91fd" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">永久表 7 天自动防故障。</li><li id="8150" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">24 小时支持查询缓存。</li><li id="9f3a" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">要创建永久表，我们必须使用下面的语法示例。</li></ol><pre class="mh mi mj mk gt na nb nc bn nd ne bi"><span id="0ffb" class="nf lj iq nb b be ng nh l ni nj">CREATE TABLE RAJIVTABLE (ID NUMBER, CREATION_DATE DATE);</span></pre><h2 id="ca31" class="nk lj iq bd lk nl nm dn lo nn no dp ls ko np nq lw ks nr ns ma kw nt nu me nv bi translated">使用案例:</h2><ol class=""><li id="3203" class="ml mm iq kf b kg nw kk nx ko ny ks nz kw oa la mq mr ms mt bi translated">适用于所有持久性数据存储业务案例。</li><li id="8e6d" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">想要一个选项来恢复 1-90 天内删除的历史数据。</li><li id="a313" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">希望在故障安全期间获得数据保护。</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="7c64" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">外部表格—</h1><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/9e660d9633b2d0e7c9619bf456a2d9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/1*thQGyEiQ_wNUqp8VHWjUIw.jpeg"/></div></figure><ol class=""><li id="6fdb" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">外部表顾名思义，数据驻留在雪花数据库之外，但在一个受支持的云提供商存储帐户中，仅存储有关数据文件的文件级元数据，如文件名、版本标识符和相关属性。</li><li id="9d0f" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">外部表可以访问以<a class="ae kc" href="https://docs.snowflake.com/en/sql-reference/sql/copy-into-table.html" rel="noopener ugc nofollow" target="_blank">支持的任何格式存储的数据，复制到&lt;表&gt;T3】语句中。</a></li><li id="3396" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">外部表是只读表。</li><li id="838e" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">您可以对外部表进行分区以获得更好的性能。</li><li id="b9a1" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">通过在外部表之上创建一个物化视图，可以提高外部表的性能。</li><li id="4136" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">所有表操作(查询、连接等。)除了可以在外部表上进行 DML 操作。</li><li id="a896" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">外部阶段是创建外部表的先决条件。</li><li id="1d7e" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">外部表可以通过云事件通知自动刷新<strong class="kf ir">，并在<strong class="kf ir"> snowpipe 收费下收费。</strong>另一方面，它可以手动刷新<strong class="kf ir"/>并在标准<strong class="kf ir">云服务</strong>计费模式下收费。</strong></li><li id="ddb9" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">虽然数据驻留在雪花之外，因此它不会在雪花中产生存储成本，但它会产生外部表元数据刷新成本，这是保持文件元数据最新所必需的。</li><li id="b6f1" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">所有数据存储在称为<strong class="kf ir">值</strong>的单个变量列中。</li><li id="2f99" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">要创建外部表，您只需要了解源数据文件的文件格式和记录格式。不需要知道数据文件的模式。</li><li id="e6b6" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">当您选择将外部表与其他 metastores(例如 AWS Glue 或 Apache Hive)同步时，请使用手动刷新外部表选项。使用表定义中的参数<strong class="kf ir">PARTITION _ TYPE = USER _ SPECIFIED</strong>进行手动刷新。</li><li id="4299" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">外部表可以通过包含参数<strong class="kf ir"> TABLE_FORMAT = DELTA 来支持<strong class="kf ir"> Delta Lake 格式</strong>。目前，在预览中。</strong></li><li id="2f79" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">像永久表一样 24 小时支持查询缓存。</li><li id="52c7" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">要创建外部表，我们必须使用下面的语法示例。</li></ol><pre class="mh mi mj mk gt na nb nc bn nd ne bi"><span id="a60b" class="nf lj iq nb b be ng nh l ni nj">CREATE EXTERNAL TABLE RAJIV_EXT_FEED(<br/> DATE_PART DATE AS TO_DATE(SPLIT_PART(METADATA$FILENAME, '/', 3)<br/>   || '/' || SPLIT_PART(METADATA$FILENAME, '/', 4)<br/>   || '/' || SPLIT_PART(METADATA$FILENAME, '/', 5), 'YYYY/MM/DD'),<br/> TIMESTAMP BIGINT AS (VALUE:TIMESTAMP::BIGINT),<br/> COL2 VARCHAR AS (VALUE:COL2::VARCHAR))<br/> PARTITION BY (DATE_PART)<br/> LOCATION=@EXTSTAGE/DAILY/<br/> REFRESH_ON_CREATE =  FALSE<br/> AUTO_REFRESH = FALSE<br/> FILE_FORMAT = (TYPE = PARQUET)<br/> TABLE_FORMAT = DELTA;</span></pre><h2 id="8fa1" class="nk lj iq bd lk nl nm dn lo nn no dp ls ko np nq lw ks nr ns ma kw nt nu me nv bi translated">使用案例:</h2><ol class=""><li id="6fb0" class="ml mm iq kf b kg nw kk nx ko ny ks nz kw oa la mq mr ms mt bi translated">当您有一些法规限制需要从特定区域提取数据，而您雪花帐户在不同的区域时。</li><li id="81ea" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">当您有静态参考数据，并且数据偶尔会有很小的变化，并且您希望将该数据用作参考数据时。</li><li id="4460" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">您不想在表上执行任何 DML 操作。</li><li id="de02" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">你有大量的数据文件，但你只需要一小部分数据供你使用。</li><li id="0423" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">性能不是首要目标。</li><li id="5057" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">读取模式对于您的业务需求是有效的。</li><li id="4eb5" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">如果您想使用外部表将<a class="ae kc" href="https://docs.snowflake.com/en/user-guide/tables-external-hive.html" rel="noopener ugc nofollow" target="_blank"> Apache Hive </a> metastores 与雪花集成。</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="6f4f" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">目录表—</h1><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/f4afd6415319c90355a60cb34be30218.png" data-original-src="https://miro.medium.com/v2/resize:fit:276/format:webp/1*mOCOFTL8dLCV0iDPYX_qug.jpeg"/></div></figure><ol class=""><li id="cf16" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">目录表是将非结构化数据支持成雪花的构造块。</li><li id="de5d" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">顾名思义，目录表实际上并不是一个保存数据的表，而是用于检索雪花托管的文件 URL 到 stage 中的每个文件。</li><li id="bef2" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">目录表是在内部或外部阶段之上创建的，并且在外部阶段的情况下由所有 3 个云提供商支持。</li><li id="9775" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">目录表与外部表非常相似，但在用法上有所不同。外部表用于读取雪花外部的数据，而目录表将暂存文件的目录存储在云存储中。</li><li id="7af5" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">要使用目录表查询命名阶段，我们必须使用以下语法示例。</li></ol><pre class="mh mi mj mk gt na nb nc bn nd ne bi"><span id="1b53" class="nf lj iq nb b be ng nh l ni nj">SELECT * FROM DIRECTORY( @&lt;stage_name&gt; );</span></pre><p id="52ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">6.以下类型的 URL 可用于访问云存储中的文件:</p><p id="5e36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">作用域 URL — </strong>编码的 URL，允许临时访问登台文件，而无需授予登台权限。</p><p id="9054" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">文件 URL — </strong>标识一组文件的数据库、方案、阶段和文件路径的 URL</p><p id="490d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">预签名 URL — </strong>用于通过网络浏览器访问文件的简单 HTTPS URL。</p><h2 id="1d9f" class="nk lj iq bd lk nl nm dn lo nn no dp ls ko np nq lw ks nr ns ma kw nt nu me nv bi translated">使用案例:</h2><ol class=""><li id="70fa" class="ml mm iq kf b kg nw kk nx ko ny ks nz kw oa la mq mr ms mt bi translated">支持非结构化数据用例。</li><li id="f5ba" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">想要使用雪花功能安全地共享非结构化数据。</li><li id="b328" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">想在雪花中使用非结构化数据进行 AI/ML。</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="33f8" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">混合表—</h1><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi od"><img src="../Images/f1b64aefadae3fe8591f78a7f9e09805.png" data-original-src="https://miro.medium.com/v2/resize:fit:272/format:webp/1*UV-nj-BUJLCZ275vodZ45A.jpeg"/></div></figure><ol class=""><li id="2827" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">这是目前在私人预览和一些事情可能会在适当的时候改变。</li><li id="6cba" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">Unistore 是雪花中的一种混合工作负载，它将 OLTP 工作负载变为现实。</li><li id="8fa8" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">混合表是 Unistore 体系结构的实现，它允许在雪花中进行基于行的存储。</li><li id="6512" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">您可以连接混合表和普通表，它们一起工作很好，不需要对查询结构做任何改变。所有的复杂性对消费者来说都是透明的。</li><li id="8da7" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">它就像任何其他表一样工作，并支持所有的雪花功能，如时间旅行，克隆等。</li><li id="ef3c" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">支持混合表中的主键和外键。</li><li id="68ae" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">支持主键列上的主键索引。</li><li id="3af4" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">您将为雪花中的所有混合表支付双倍的存储费用，因为相同的数据同时保存在后台的行存储和列存储中，以满足两种表一起使用时的相同性能。</li><li id="5e3d" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">行和列存储之间的混合表的所有后台数据复制等。对终端消费者透明，但计算作为标准云服务收费。</li><li id="a3d5" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">要创建混合表，我们必须使用下面的语法示例。</li></ol><pre class="mh mi mj mk gt na nb nc bn nd ne bi"><span id="7fb3" class="nf lj iq nb b be ng nh l ni nj">CREATE HYBRID TABLE RAJIVTABLE (ID NUMBER, CREATION_DATE DATE);</span></pre><h2 id="9c96" class="nk lj iq bd lk nl nm dn lo nn no dp ls ko np nq lw ks nr ns ma kw nt nu me nv bi translated">使用案例:</h2><ol class=""><li id="c911" class="ml mm iq kf b kg nw kk nx ko ny ks nz kw oa la mq mr ms mt bi translated">当您想要将中小型数据量的事务性应用程序迁移到雪花时。</li><li id="1fae" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">适用于中小型 web 应用程序。</li><li id="c5ee" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">不适合 OLTP 工作负载，因为它需要对大量数据做出亚秒级响应。</li><li id="964e" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">通过结合两者的优势缩短上市时间，并减少 ETL 或其他处理时间。</li><li id="092e" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">在单个平台上简化体系结构并标准化安全和治理控制，同时消除移动或复制数据的需要。</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="4422" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">动态表格—</h1><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/8e7b27f3652e011f5254f671656d6625.png" data-original-src="https://miro.medium.com/v2/resize:fit:276/format:webp/1*jIMQGUGYLMzweHMBISGsZw.jpeg"/></div></figure><ol class=""><li id="42e3" class="ml mm iq kf b kg kh kk kl ko mn ks mo kw mp la mq mr ms mt bi translated">动态表最初是在提交 2022 期间作为物化表引入的，后来它被重命名为动态表。</li><li id="bd9a" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">这是目前在私人预览和一些事情可能会在适当的时候改变。</li><li id="0948" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">动态表是雪花中的一种新的表类型，它允许团队使用简单的 SQL 语句来声明性地定义数据管道的结果。</li><li id="ba57" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">它具有流和任务的组合特征，仅在特定的滞后(持续时间)看起来增量变化。</li><li id="457b" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">它目前不支持用 Python、Java 或 Scala 编写的 UDF/udtf、存储过程、外部函数和 Snowpark 转换。</li><li id="54dc" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">与基于雪花内部算法刷新物化视图不同，您可以根据业务需求控制动态表刷新。您可以完全控制数据的新鲜度。</li><li id="ec45" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">在动态表的情况下，虚拟仓库用于所有计算需求。您可以根据自己的工作量来确定仓库的规模。</li><li id="3ad0" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">支持多个表上连接，并与复杂的业务逻辑无缝协作。</li><li id="6540" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">支持普通表和动态表组成 DAG。</li><li id="9947" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">自动刷新已更改的内容，即使是复杂的查询。在没有新数据要处理的情况下，或者如果相关表在没有任何用户干预的情况下仍在刷新，动态表也将智能地跳过任何刷新。</li><li id="4f05" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">与实体化视图相比，数据并不总是最新的，但是您将看到根据您定义的延迟刷新的最新数据。</li><li id="bcd1" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">如果您正在构建基于 SQL 的转换管道，那么就不再需要定义多个流和任务。</li><li id="ac90" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">不适用于在任何 BI 工具上构建的实时或接近实时的可视化仪表板，因为数据并不总是最新的。这取决于你的刷新定义。</li><li id="89ac" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">要创建动态表，我们必须使用下面的语法样本。</li></ol><pre class="mh mi mj mk gt na nb nc bn nd ne bi"><span id="0b61" class="nf lj iq nb b be ng nh l ni nj">CREATE OR REPLACE DYNAMIC TABLE RAJIVTABLE<br/>  LAG = ' 1 minute'<br/>  WAREHOUSE = COMPUTE_WH<br/>  AS SELECT * FROM RAJIVTAB ;</span></pre><h2 id="ad69" class="nk lj iq bd lk nl nm dn lo nn no dp ls ko np nq lw ks nr ns ma kw nt nu me nv bi translated">使用案例:</h2><ol class=""><li id="2d6b" class="ml mm iq kf b kg nw kk nx ko ny ks nz kw oa la mq mr ms mt bi translated">您希望构建一个基于 SQL 的转换管道，该管道需要复杂的 SQL，包括连接、聚合、窗口函数以及对刷新频率和计算规模的控制。</li><li id="ae66" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">你不是在寻找“总是最新的数据”像你在物化视图中得到的功能。否则你必须使用物化视图。</li><li id="dca3" class="ml mm iq kf b kg mu kk mv ko mw ks mx kw my la mq mr ms mt bi translated">如果您构建的管道不需要包含用 Python、Java 或 Scala 编写的 UDF/udtf、存储过程、外部函数和 Snowpark 转换。Esle 你必须使用传统的使用流和任务的方法。</li></ol></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="7dbf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望这篇博客能帮助你深入了解雪花中的<strong class="kf ir">不同表格类型以及它们的用例</strong>。如果你对此有任何疑问，欢迎在评论区提问。如果你喜欢这个博客，请鼓掌。保持联系，看到更多这样的酷东西。谢谢你的支持。</p><p id="2635" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">你可以找到我:</strong></p><p id="17e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">【https://www.youtube.com/c/RajivGuptaEverydayLearning】订阅我的 YouTube 频道:<a class="ae kc" href="https://www.youtube.com/c/RajivGuptaEverydayLearning" rel="noopener ugc nofollow" target="_blank"/></p><p id="baf6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">跟我上媒:</strong><a class="ae kc" href="https://rajivgupta780184.medium.com/" rel="noopener">https://rajivgupta780184.medium.com/</a></p><p id="f0e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">在推特上关注我:</strong><a class="ae kc" href="https://twitter.com/RAJIVGUPTA780" rel="noopener ugc nofollow" target="_blank">https://twitter.com/RAJIVGUPTA780</a></p><p id="6843" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">在 LinkedIn 上联系我:</strong><a class="ae kc" href="https://www.linkedin.com/in/rajiv-gupta-618b0228/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/rajiv-gupta-618b0228/</a></p><figure class="mh mi mj mk gt jr gh gi paragraph-image"><div class="gh gi oe"><img src="../Images/03cc0623343d6ad5c02b91c90252d5e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*iI0fze3ohgZrAl3c.png"/></div></figure><p id="ef3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">#继续学习#继续分享# RajivGupta everyday learning # SnowflakeDataSuperhero # RajivGupta</strong></p></div></div>    
</body>
</html>