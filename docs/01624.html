<html>
<head>
<title>Using Command Line, Extract a Video Clip from YouTube</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用命令行，从 YouTube 中提取一个视频剪辑</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/using-command-line-extract-a-video-clip-from-youtube-398118adf747?source=collection_archive---------6-----------------------#2020-07-08">https://blog.devgenius.io/using-command-line-extract-a-video-clip-from-youtube-398118adf747?source=collection_archive---------6-----------------------#2020-07-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="2bb2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从 YouTube 下载和提取视频剪辑的 shell 脚本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/708d2a4e8773a36e59df69eb072a512c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_m6gnUHp4kkfVaYB5Sl3wQ.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">你还想黑脸书吗？祝你好运——照片由<a class="ky kz ep" href="https://medium.com/u/123f1163cb22?source=post_page-----398118adf747--------------------------------" rel="noopener" target="_blank">苏莱曼</a>拍摄</figcaption></figure><p id="d00b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi la translated"><span class="l lb lc ld bm le lf lg lh li di">我</span>因为各种原因几乎每天都在<a class="ae lj" href="https://youtube.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> YouTube </strong> </a> <strong class="jm io"> </strong>上看视频，从学习到娱乐。有时我想存储或共享视频的特定部分。我经常发现自己选择在线 YouTube 下载者，然后我搜索另一个在线资源来修剪/删除我需要的部分。</p><p id="6c22" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个过程可能很烦人，尽管那些第三方(YouTube 下载器、视频微调器)网站充斥着广告(有时非常尴尬……)和可疑的弹出窗口。如果不小心的话，你可能会在下载你的视频剪辑的同时下载一个<a class="ae lj" href="https://us.norton.com/internetsecurity-malware.html" rel="noopener ugc nofollow" target="_blank"> <em class="lk">恶意软件</em> </a> <em class="lk">或</em> <a class="ae lj" href="https://us.norton.com/internetsecurity-how-to-catch-spyware-before-it-snags-you.html" rel="noopener ugc nofollow" target="_blank"> <em class="lk">间谍软件</em> </a>或其他恶意内容。</p><blockquote class="ll lm ln"><p id="f28b" class="jk jl lk jm b jn jo jp jq jr js jt ju lo jw jx jy lp ka kb kc lq ke kf kg kh ig bi translated">“每天都有越来越多的黑客滋生，越来越多才华横溢的头脑正在变成黑客。安全进步了，但黑客也进步了。”</p><p id="352d" class="jk jl lk jm b jn jo jp jq jr js jt ju lo jw jx jy lp ka kb kc lq ke kf kg kh ig bi translated"><strong class="jm io">迈克尔妖 Calce </strong></p></blockquote></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><p id="30b3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">像许多<a class="ae lj" href="https://simple.wikipedia.org/wiki/Software_developer" rel="noopener ugc nofollow" target="_blank"> <em class="lk">软件开发人员</em> </a>一样，我热爱终端(命令行)，没过多久我就决定写一个脚本来替我完成这项工作。多亏了开源社区，这变得轻而易举。</p><p id="df70" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有太多的开发者为开源平台做出贡献，这是对我们英雄的赞扬(并非所有人都披着斗篷)。如果你是一名开发人员，你可以通过为开源社区做贡献或者支持那些做贡献的人来回馈社会。</p><h2 id="9d7e" class="ly lz in bd ma mb mc dn md me mf dp mg jv mh mi mj jz mk ml mm kd mn mo mp mq bi translated">任务—脚本的目的</h2><ol class=""><li id="1cf3" class="mr ms in jm b jn mt jr mu jv mv jz mw kd mx kh my mz na nb bi translated">下载 YouTube 视频</li><li id="9578" class="mr ms in jm b jn nc jr nd jv ne jz nf kd ng kh my mz na nb bi translated">从视频中剪下一个片段</li></ol><p id="059b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了完成上述任务，我将使用两个命令行程序，分别是<a class="ae lj" href="https://youtube-dl.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lk">YouTube-dl</em></strong></a><strong class="jm io"><em class="lk"/></strong>和<strong class="jm io"><em class="lk"/></strong><a class="ae lj" href="https://ffmpeg.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lk">ffmpeg</em></strong></a><strong class="jm io"><em class="lk">。下载并安装到你的设备上…非常简单。</em></strong></p><ul class=""><li id="655b" class="mr ms in jm b jn jo jr js jv nh jz ni kd nj kh nk mz na nb bi translated"><strong class="jm io"> <em class="lk"> Youtube-dl </em> </strong>是一个命令行程序，可以从<a class="ae lj" href="http://youtube.com" rel="noopener ugc nofollow" target="_blank"><em class="lk">【youtube.com】</em></a>和少数<a class="ae lj" href="http://ytdl-org.github.io/youtube-dl/supportedsites.html" rel="noopener ugc nofollow" target="_blank"> <em class="lk">以上网站</em> </a>下载视频。</li><li id="4c16" class="mr ms in jm b jn nc jr nd jv ne jz nf kd ng kh nk mz na nb bi translated"><strong class="jm io"> <em class="lk"> FFmpeg </em> </strong>是一个完整的跨平台解决方案，用于录制、转换和流式传输音频和视频。</li></ul><p id="1ec7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们下载一个视频剪辑，我将使用史蒂夫·乔布斯著名的 2005 年斯坦福大学毕业典礼演讲。</p><blockquote class="ll lm ln"><p id="4d9a" class="jk jl lk jm b jn jo jp jq jr js jt ju lo jw jx jy lp ka kb kc lq ke kf kg kh ig bi translated">“不要让别人观点的噪音淹没了你自己内心的声音。最重要的是，要有勇气跟随你的心和直觉。他们已经知道你真正想成为什么样的人。其他的都是次要的。"</p><p id="7421" class="jk jl lk jm b jn jo jp jq jr js jt ju lo jw jx jy lp ka kb kc lq ke kf kg kh ig bi translated"><strong class="jm io">史蒂夫·乔布斯</strong></p></blockquote><h2 id="68bf" class="ly lz in bd ma mb mc dn md me mf dp mg jv mh mi mj jz mk ml mm kd mn mo mp mq bi translated">用 Youtube-dl 下载视频</h2><p id="f0f7" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv nl jx jy jz nm kb kc kd nn kf kg kh ig bi translated">若要下载视频，请获取视频 id 并运行以下命令。您还可以指定视频的输出格式。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="e9bb" class="ly lz in np b gy nt nu l nv nw"><em class="lk">$ youtube-dl --format mp4 </em><strong class="np io"><em class="lk">UF8uR6Z6KLc</em></strong></span></pre><p id="f1cc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦上面的命令成功执行，您应该会在执行该命令的目录中获得下载的<strong class="jm io"> <em class="lk"> .mp4 </em> </strong>文件。这个文件应该被命名为“<em class="lk">史蒂夫·乔布斯 2005 年斯坦福毕业典礼 Address-UF8uR6Z6KLc.mp4</em>”。</p><h2 id="b493" class="ly lz in bd ma mb mc dn md me mf dp mg jv mh mi mj jz mk ml mm kd mn mo mp mq bi translated">接下来，从下载的视频文件中获取一个剪辑</h2><p id="9a14" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv nl jx jy jz nm kb kc kd nn kf kg kh ig bi translated">对我来说，演讲的高潮是他在大学辍学时谈到的部分，他应对的方式，他的兴趣书法和 windows 如何抄袭 Mac…哈哈。我会用<strong class="jm io"> <em class="lk"> ffmpeg </em> </strong>把那段剪掉，它在第 3 分钟和第 6 分钟之间。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="4dca" class="ly lz in np b gy nt nu l nv nw"><em class="lk">$ ffmpeg -i </em><strong class="np io"><em class="lk">steve-video.mp4</em></strong><em class="lk"> -ss 00:03:32 -to 00:05:32 </em><strong class="np io"><em class="lk">steve-clip.mp4</em></strong></span></pre><p id="4696" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们已经下载了 YouTube 视频并从中剪切出我们需要的部分，让我们将上面的命令组合成一个 shell 脚本。</p><h2 id="f637" class="ly lz in bd ma mb mc dn md me mf dp mg jv mh mi mj jz mk ml mm kd mn mo mp mq bi translated">命令过程</h2><p id="6113" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv nl jx jy jz nm kb kc kd nn kf kg kh ig bi translated">我们把这个文件命名为<strong class="jm io"><em class="lk">YouTube-clip . sh .</em></strong>脚本如下；</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="b5c3" class="ly lz in np b gy nt nu l nv nw"><em class="lk">#!/bin/bash</em></span><span id="2abe" class="ly lz in np b gy nx nu l nv nw"><em class="lk"># youtube video id<br/>vid="$1";</em></span><span id="c871" class="ly lz in np b gy nx nu l nv nw"><em class="lk">echo "[youtube-dl] download video from youtube in .mp4 format...";<br/>youtube-dl --format mp4 $vid -o '%(title)s.%(ext)s';</em></span><span id="fb86" class="ly lz in np b gy nx nu l nv nw"><em class="lk">if [ "$2" == --trim ]<br/>then    <br/>    # from which point to which point you want to trim<br/>    # start e.g.    00:03:32<br/>    # end   e.g.    00:05:32</em></span><span id="a073" class="ly lz in np b gy nx nu l nv nw"><em class="lk">    start="$3";<br/>    end="$4";</em></span><span id="2346" class="ly lz in np b gy nx nu l nv nw"><em class="lk">    # get the name of the video file<br/>    file_name=`youtube-dl --get-filename -o '%(title)s' $vid`;<br/>    <br/>    # file extension<br/>    ext="mp4";</em></span><span id="e6d9" class="ly lz in np b gy nx nu l nv nw"><em class="lk">    # path to working directory<br/>    path=`pwd`;<br/>    <br/>    # video clip name and path to store location<br/>    clip="$path/${file_name}_clip.${ext}";</em></span><span id="21a9" class="ly lz in np b gy nx nu l nv nw"><em class="lk">    echo "[ffmpeg] cutting out the section file you need";<br/>    ffmpeg -i "$path/$file_name.$ext" -ss $start -to $end "$clip";<br/>fi</em></span><span id="dec7" class="ly lz in np b gy nx nu l nv nw"><em class="lk">echo "done...";</em></span></pre><p id="fd0a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">太棒了，我们准备好了。我在脚本中添加了一个条件语句。这将允许我们下载，然后决定是否修剪视频文件或没有。确保你给了<strong class="jm io"> <em class="lk"> youtube-clip.sh </em> </strong>适当的权限。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="2af9" class="ly lz in np b gy nt nu l nv nw"><em class="lk"># make a file executable in Terminal on Mac<br/>$ chmod 755 youtube-clip.sh</em></span></pre><p id="83c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们在终端上执行<strong class="jm io"> <em class="lk"> youtube-clip.sh </em> </strong>脚本。</p><p id="bfc5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下载视频时不需要修剪，只需传递<a class="ae lj" href="https://www.youtube.com/watch?v=liJVSwOiiwg" rel="noopener ugc nofollow" target="_blank"> <em class="lk">视频 Id </em> </a>。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="ed4d" class="ly lz in np b gy nt nu l nv nw"><em class="lk">$ ./youtube-clip.sh UF8uR6Z6KLc</em></span></pre><p id="864b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了从视频中下载和提取剪辑，添加—<strong class="jm io"><em class="lk"/></strong>然后经过<strong class="jm io"> <em class="lk">开始</em> </strong>和<strong class="jm io"> <em class="lk">结束</em> </strong>时间。</p><pre class="kj kk kl km gt no np nq nr aw ns bi"><span id="aed6" class="ly lz in np b gy nt nu l nv nw"><em class="lk">$ ./youtube-clip.sh UF8uR6Z6KLc --trim 00:03:32 00:05:32</em></span></pre><p id="dc85" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦你执行了上面的命令，你应该会在同一个目录中看到一个名字相似的文件，包括<strong class="jm io"> <em class="lk"> _clip.mp4 </em> </strong>。</p><p id="6569" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注</strong>:您可以调整或重写<strong class="jm io"><em class="lk">YouTube-clip . sh</em></strong>脚本来处理音频(即 mp3 文件)。同样，检查其他网站 y <em class="lk"> outube-dl </em> <a class="ae lj" href="http://ytdl-org.github.io/youtube-dl/supportedsites.html" rel="noopener ugc nofollow" target="_blank"> <em class="lk">支持</em> </a> <em class="lk"> s </em>比如 twitter，我会让你探索那些选项…祝你好运黑客。</p></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><blockquote class="ll lm ln"><p id="b3a1" class="jk jl lk jm b jn jo jp jq jr js jt ju lo jw jx jy lp ka kb kc lq ke kf kg kh ig bi translated">“你的时间有限，所以不要浪费在过别人的生活上。”</p><p id="5873" class="jk jl lk jm b jn jo jp jq jr js jt ju lo jw jx jy lp ka kb kc lq ke kf kg kh ig bi translated"><strong class="jm io">史蒂夫·乔布斯</strong></p></blockquote><p id="e15e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面引用的史蒂夫·乔布斯的话引起了我的共鸣，当我想到他时，我会想到时间以及时间是多么有限……明智地使用你的时间。</p></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><h2 id="ea78" class="ly lz in bd ma mb mc dn md me mf dp mg jv mh mi mj jz mk ml mm kd mn mo mp mq bi translated">参考</h2><p id="84ed" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv nl jx jy jz nm kb kc kd nn kf kg kh ig bi translated">你可以在我的<a class="ae lj" href="https://gist.github.com/namieluss" rel="noopener ugc nofollow" target="_blank"> GitHub Gist </a>中找到完整的脚本“<strong class="jm io"><em class="lk">YouTube-clip . sh</em></strong>”。</p><p id="17ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">还有，结账<a class="ae lj" href="https://www.veed.io/screen-recorder" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lk">veed . io</em></strong></a>。这是一个有趣的软件，你可以编辑和保存你的视频以适应 YouTube，或者你可以选择“Instagram”、“抖音”或“Twitter”设置，并调整你的内容以适应任何社交媒体平台。</p><div class="ny nz gp gr oa ob"><a href="https://youtube-dl.org/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">youtube-dl</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">编辑描述</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">youtube-dl.org</p></div></div></div></a></div><div class="ny nz gp gr oa ob"><a href="https://ffmpeg.org/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">FFmpeg</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">FFmpeg-I input.mp4 输出. avi FFmpeg 为 libavfilter 添加了一个实时明亮闪光去除滤镜。请注意，这…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">ffmpeg.org</p></div></div></div></a></div></div></div>    
</body>
</html>