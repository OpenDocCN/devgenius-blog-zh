<html>
<head>
<title>How to Create and Publish Your Own Npm Packages?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建和发布自己的 Npm 包？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-create-and-publish-your-own-npm-packages-c565575456b3?source=collection_archive---------10-----------------------#2022-06-14">https://blog.devgenius.io/how-to-create-and-publish-your-own-npm-packages-c565575456b3?source=collection_archive---------10-----------------------#2022-06-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="68a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们都知道 npm registry 对于 web 开发有多重要。在这个博客上，我们将探讨如何创建我们自己的 npm 包，并在 npm 注册表中发布它们，以便每个人都可以使用你的出色工作。</p><p id="2fcd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个项目上工作之前，有几个需要考虑的要求。你想要一个 npm 账号和 github 账号。在您的本地设置中，您希望安装 npm 和节点。一旦完成，我们就可以继续学习教程了。</p><p id="3599" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用您要在 npm 中创建和发布的正确包名创建新的存储库。完成后，从该存储库中复制 ssh url。我们一会儿需要那个。</p><p id="8dc7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在您的本地上，打开一个空目录并运行以下命令:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="dfb4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">运行上述命令后，系统会提示您一些配置，请确保您输入了最适合您的用例的所有属性。当提示您输入 git url 时，您希望粘贴我们之前复制的 ssh url。一旦一切完成，npm 将在您的目录中生成一个 package.json 文件。</p><p id="7b00" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们即将使用终端时，我们将安装 jest 作为一个开发依赖项。运行以下命令:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="cbc0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Jest 是一个测试库，我们将使用它为我们的包编写单元测试。现在，在你的 package.json 文件上把<em class="kp"> test </em>脚本的值改为如下:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="e988" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将确保我们每次执行 npm run test 时，jest 都会尝试在我们的目录中找到所有扩展名为. test.js 的文件并执行它们。我们正在传递覆盖率标志来跟踪我们的单个文件中的测试覆盖率。</p></div><div class="ab cl kq kr hr ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ig ih ii ij ik"><p id="66f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在根目录下创建一个名为 index.js 的文件，并将以下代码放入其中:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="7ff2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 index.js 上，我们有一个简单的函数，它将数组作为参数，并使用 JavaScript 中的 reduce 函数对传递的数组中的项进行求和。一旦完成，我们只需导出我们的函数。</p></div><div class="ab cl kq kr hr ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ig ih ii ij ik"><p id="0a89" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在根目录下创建一个名为 array.test.js 的文件。把下面的代码，不要担心我会解释这是怎么回事:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="dcff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在测试文件中，我们只是简单地导入我们之前创建的函数。为了在 jest 上编写单元测试，我们可以使用 test 关键字。我们可以传递两个参数，第一个是描述性的字符串，它告诉我们在这个测试中要做什么，第二个参数是回调函数。我们使用 expect 关键字，用预定义的数组调用 arraySum 函数。我们预计总数为 6。如果是这样的话，我们的测试就会通过。</p><p id="96a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们已经写完了单元测试，让我们来测试它。在终端上运行以下命令:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="ac92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">恭喜，您已经成功测试了您的软件包。耶！！！</p></div><div class="ab cl kq kr hr ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ig ih ii ij ik"><p id="4eee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们使用 Jest 测试了我们的包，下一步是使用 npm 测试这个包在你所在的目录之外是否可用。为此，请打开初始化 npm 的任何其他项目。在我们创建包的目录中，运行以下命令:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="2dac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将创建一个全局链接，现在我们机器中的所有用户都可以访问该链接。现在回到第二个项目，运行以下命令:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="184e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您对包名感到困惑，请转到 package.json 文件并检查其中的 name 属性。它将使用您刚刚创建的包创建一个 node_modules 文件夹。现在，您可以使用常规的导入语法在其他项目中使用 arraySum 函数。</p><p id="9d29" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们检查了所有的清单，是时候发布我们的包了。</p></div><div class="ab cl kq kr hr ks" role="separator"><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv kw"/><span class="kt bw bk ku kv"/></div><div class="ig ih ii ij ik"><p id="6ac9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在创建包的目录上，运行以下命令:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="51c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请输入与您的 npm 帐户匹配的正确用户名和凭据。一旦一切都正确完成，您应该会看到与成功登录相关的消息。运行以下命令发布您的包:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div></figure><p id="30a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，如果上面的命令成功，您的包应该可以在 npm 网站上找到。</p><p id="271b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果发布软件包时出现问题，原因可能是您的软件包名称与 npm 中的现有软件包冲突。如果是这种情况，您可能需要更改包名。</p><p id="479b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">恭喜你！！！您刚刚在 npm 上发布了您的包，数百万人可以从您的创造性工作中受益。</p><p id="0afa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你觉得这个博客有用，请跟我来获取更多这样的博客。如果你有任何反馈，我将不胜感激。</p><p id="6616" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">完整的源代码可以在<a class="ae kx" href="https://github.com/sudiparyal185/array-sum-creator" rel="noopener ugc nofollow" target="_blank">这里</a>找到。如果这对您有帮助，请给它打个星。</p><p id="4562" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我有一个 youtube 教程深入解释了同样的问题:</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="ky ko l"/></div></figure></div></div>    
</body>
</html>