<html>
<head>
<title>Day 9 of Game Dev: How to spawn and destroy a game object in Unity!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">游戏开发的第 9 天:如何在 Unity 中繁殖并摧毁一个游戏对象！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/day-9-of-game-dev-how-to-spawn-and-destroy-a-game-object-in-unity-c5b0c3f60d90?source=collection_archive---------4-----------------------#2022-04-14">https://blog.devgenius.io/day-9-of-game-dev-how-to-spawn-and-destroy-a-game-object-in-unity-c5b0c3f60d90?source=collection_archive---------4-----------------------#2022-04-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="864d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">目标:</strong> <strong class="jm io">产卵</strong>和<strong class="jm io">摧毁<strong class="jm io"> Unity </strong>中的</strong>一个游戏对象通过代码为我的 2D 银河射手风格游戏。</p><p id="1630" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Object.Instantiate.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">的 API 实例化()</strong> </a></p><p id="981b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Object.Destroy.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">销毁的 API()</strong></a></p><p id="685a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了给这个目标提供一些背景，产生和摧毁一个<strong class="jm io">游戏物体</strong>的<strong class="jm io">将会在一个 2D 银河射击游戏风格的背景下进行。当然，您也可以将这些信息应用到您的项目中。</strong></p><p id="ae71" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先为了让<strong class="jm io">产生</strong>一个<strong class="jm io">游戏对象</strong>，我们需要这个<strong class="jm io">对象</strong>存在。在我的项目中，我想从我的播放器中发射一束激光，在屏幕上向上移动。目前，激光将由一个胶囊来代表。在场景中创建了我的胶囊，调整了比例并添加了颜色后，我很满意它作为激光的替身。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/76319cbab2857397af563bce87ff06eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/1*_0oAeIeAPIikNg_26kakCg.gif"/></div></figure><p id="eb68" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这些<strong class="jm io">游戏对象</strong>将从玩家位置产生，并且只有当玩家使用某个输入时才会产生，所以这段代码应该从<strong class="jm io">玩家</strong>脚本中编写。</p><p id="aefe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">想想看，每当玩家按下<strong class="jm io">空格键</strong>时，我就会想让<strong class="jm io">生出</strong>这个胶囊。我将设置“<strong class="jm io"> if </strong>”语句来检查玩家是否点击了<strong class="jm io">空格</strong>，如果他们点击了，那么我希望<strong class="jm io">对象</strong>是从玩家位置<strong class="jm io">衍生的</strong>。实际生成对象所需的所有代码都在一个名为<strong class="jm io"> ShootLaser() </strong>的方法中，这是为了清理代码，而不是将所有代码都放在<strong class="jm io"> Update() </strong>中。这使得阅读、调试等更加容易。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi kr"><img src="../Images/02cab5942fc3ddb4441c4968112f7cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/1*ao6v__inIVHhrxtoTJ1COg.gif"/></div></div></figure><p id="8d24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在"<strong class="jm io"> if </strong>"语句设置之后，生成代码将在我的<strong class="jm io"> ShootLaser() </strong>方法中设置。从那里我们需要调用<strong class="jm io"/><a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Object.Instantiate.html" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Instantiate()</strong></a>方法。<strong class="jm io">在这个上下文中实例化</strong>意味着创建一个<strong class="jm io">对象</strong>的<strong class="jm io">实例</strong>。此方法有多个重载，您将希望使用最适合您需要的重载。不要让所有的选择让你不知所措。选项不错，阅读上面链接的<strong class="jm io"> API </strong>和/或尝试不同的选项。</p><p id="093e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">无论您选择哪个选项，<a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Object.Instantiate.html" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Instantiate()</strong></a>方法所需的第一个参数是一个<strong class="jm io">游戏对象</strong>到<strong class="jm io">实例化</strong>。让我们创建一个类型为<strong class="jm io"> GameObject </strong>的变量，我将把我的变量命名为<strong class="jm io"> laserPrefab </strong>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/042f2cb34882c5a6eaad52b954343e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/1*e1pT3bWlT80G9Kifb-Y8ag.gif"/></div></figure><p id="abd9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使<strong class="jm io">游戏对象</strong>成为<strong class="jm io">预置</strong>！<strong class="jm io"> Prefab </strong>是预制资产(基本上是副本)的简称。你可以用<strong class="jm io">预置</strong>做很多事情，但那是以后的事了。首先在你的<strong class="jm io"> Unity </strong>项目中创建一个新文件夹，并将其命名为<strong class="jm io"> Prefabs </strong>。然后将你想要<strong class="jm io">实例化</strong>的<strong class="jm io">对象</strong>移动到<strong class="jm io">预置</strong>文件夹中，拖放样式，你就有了一个<strong class="jm io">预置</strong>。</p><p id="6900" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">回到我们在代码中的位置，我们已经有了代表游戏对象的变量。确保它是一个<strong class="jm io">【serialized field】</strong>，这样你就可以从检查器中看到它。将<strong class="jm io">预设</strong>拖放到检查器中的该字段。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/1fb8d41122074d96feba1adb3cbc7106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/1*fOjodYIXO7jjo0rIDZaF0A.gif"/></div></figure><p id="4678" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Object.Instantiate.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">实例化()</strong> </a> <strong class="jm io"> </strong>方法的<strong class="jm io">第一个</strong>参数就是我们要<strong class="jm io">实例化</strong>的<strong class="jm io">游戏对象</strong>。第二个<strong class="jm io">是我们想要在什么位置产卵。因为我们希望它从玩家那里产生，所以我们将它设置为<strong class="jm io"> transform.position </strong>，因为这意味着这个脚本所附加的游戏对象的当前<strong class="jm io"> transform.position </strong>。在这种情况下，它附属于播放器。<strong class="jm io">第三个</strong>参数是我们希望游戏对象产生的旋转，在我们的例子中这并不重要，所以将其设置为<strong class="jm io">四元数。身份</strong>将使用<strong class="jm io">预设</strong>默认旋转，因为我们没有指定它应该旋转的角度。</strong></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/0001604c75345fb2883ea184f9e5181e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/1*sR0pu-QEK6FgtqcLos7vKg.gif"/></div></figure><p id="dd45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们现在已经告诉计算机，当点击<strong class="jm io">空格键</strong>时，我们希望<strong class="jm io">从什么位置以什么旋转来实例化</strong>什么<strong class="jm io">游戏对象</strong>。</p><p id="2d9e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在点击“播放”，你应该可以在每次点击<strong class="jm io">空格键</strong>的时候<strong class="jm io">实例化</strong>一个不同的<strong class="jm io">实例</strong>。但是这些不太像激光。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/2576b7179ec3cb17ff06641709ff48a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/1*Kb5sibrl1P-qEu2uMxc0vA.gif"/></div></figure><p id="2707" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们需要通过代码向上移动激光器，这意味着我们需要为激光器编写一个脚本，我称之为“<strong class="jm io">激光器</strong>”添加这行代码应该可以做到。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi la"><img src="../Images/719503824606c4651c23b4c37dd522b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/1*xxKqpJlCIHGcgBw5gulbEQ.gif"/></div></figure><p id="7c3f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">确保将<strong class="jm io">激光脚本</strong>添加到你的预设中。我将离开那里，继续讨论<strong class="jm io">摧毁</strong>一个<strong class="jm io">游戏物体</strong>，因为这是本文的目标。</p><p id="6e81" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为它是我们想要<strong class="jm io">摧毁</strong>的激光，我们也可以从激光脚本中调用代码<strong class="jm io">摧毁</strong>激光。在不同的情况下，您可能希望从不同的脚本中调用<strong class="jm io"> destroy </strong>代码，但在这种情况下并不需要。</p><p id="b79c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">回到这个话题，如果我们继续实例化越来越多的对象<strong class="jm io">对象</strong>，它们将很快填满场景，即使不再需要它们，也会有性能问题。如果我们<strong class="jm io">在不需要</strong>游戏物体<strong class="jm io">的时候销毁它们</strong>(在这种情况下是在摄像机的视野之外)，那么我们就解决了这个问题。</p><p id="9298" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此，我们首先需要找到<strong class="jm io">游戏对象</strong>应该是被<strong class="jm io">摧毁的</strong>的位置。在场景中放置一个胶囊，并将其移动到您想要<strong class="jm io">游戏对象</strong>被<strong class="jm io">摧毁</strong>的地点。在这种情况下，我只需要 y 值，因为需要销毁<strong class="jm io">的<strong class="jm io">对象</strong>只在 y 轴上向上移动。</strong></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lb"><img src="../Images/cce57cac53c7e90ceee686319eac511a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*adSoeCQudFpWX8lMQTMnUA.gif"/></div></div></figure><p id="2b6d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我已经有了这些信息，我可以从场景中删除那个游戏对象<strong class="jm io">了，在代码中我会放入这个"<strong class="jm io"> if </strong>"语句，它将检查<strong class="jm io">游戏对象</strong>是否击中了 y 轴上的那个点。如果有那么我称之为<a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Object.Destroy.html" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"/></a>【毁灭()】的方法。</strong></p><p id="d0d4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这种情况下，唯一与我们有关的争论是我想<strong class="jm io">销毁哪个项目</strong>。通过将<strong class="jm io">游戏对象</strong>作为第一个参数，这相当于说“我想<strong class="jm io">摧毁</strong>这个<strong class="jm io">游戏对象</strong>”(这是脚本附加到的游戏对象，在本例中是激光)。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/8e10ee63651225ddcac983a0ceea0532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/1*vx1gYZodiJfF7bnKpKuJWQ.gif"/></div></figure><p id="d09c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你读起来更容易，你可以写上“这个”前面的<strong class="jm io">游戏对象</strong> like so，但是可选，意思是一样的。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/ca409d0125b944c4994f688a0ef3ff03.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/1*BP_o30JaAfSwgVbTyKWcyQ.gif"/></div></figure><p id="1e70" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看那个！现在<strong class="jm io">的物体从你的玩家那里产生</strong>并且<strong class="jm io">在出界时摧毁</strong>！</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi le"><img src="../Images/0f664bf402a3dc10acc671372efa4a5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AkN3fXHF7WLtQYLVHhGONg.gif"/></div></div></figure><p id="ceb5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好了，你现在知道如何使用<a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Object.Instantiate.html" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Instantiate()</strong></a><strong class="jm io"/>和<a class="ae ki" href="https://docs.unity3d.com/ScriptReference/Object.Destroy.html" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Destroy()</strong></a><strong class="jm io"/>方法来<strong class="jm io">产卵</strong>和<strong class="jm io">摧毁<strong class="jm io"> Unity </strong>中的游戏对象</strong>！这些都是非常有价值的方法，你会经常遇到。我希望这对你有所帮助，如果你有任何问题，请随时提问。</p><p id="b170" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">不断学习，不断成长，拥有美好的一天！</strong></p></div></div>    
</body>
</html>