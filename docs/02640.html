<html>
<head>
<title>Deploy on Heroku — How to get Your First Javascript / Ruby App Hosted</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Heroku上部署——如何托管您的第一个Javascript / Ruby应用</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploy-on-heroku-how-to-get-your-first-javascript-ruby-app-hosted-b45b29542661?source=collection_archive---------8-----------------------#2020-08-17">https://blog.devgenius.io/deploy-on-heroku-how-to-get-your-first-javascript-ruby-app-hosted-b45b29542661?source=collection_archive---------8-----------------------#2020-08-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1e50682ba6b9ee8a5261885b08e9a555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K7UD8bpRlnnSp-jb"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">约翰·施诺布里奇在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="8f74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么，你准备好托管你的第一个web应用程序了吗？恭喜你！作为一名web开发人员，这是成长过程中非常激动人心的一步。不幸的是，在部署您的第一个web应用程序时，可能会出现一些小问题，并且可能需要花费数小时来扫描解决这些问题。本文旨在强调并解决我在部署第一个React / Rails应用程序时遇到的错误，这样您就不必花费我花费的时间来寻找答案。</p><p id="be5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们从你认为你的应用程序在localhost上完全按照你想要的方式运行的那一刻开始，你已经准备好让全世界看到它了。Heroku是一个免费托管web应用程序的好地方，但你不能简单地上传你的应用程序，然后就此收工。你必须先配置它。</p><p id="4c6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很有可能，您的前端正在调用您的后端，并且被硬编码为localhost:3000或类似的东西。当然，当你的应用被托管时，这是行不通的。一旦托管后，您的后端将位于Heroku创建的URL下，因此您需要在提取到后端时引用该URL。这意味着我们需要首先托管您的后端。去<a class="ae kc" href="http://heroku.com" rel="noopener ugc nofollow" target="_blank"> Heroku </a>创建一个账户。登录后，创建一个新应用。随便你怎么命名，但是你可能要考虑为你的前端保存一个最合适的名字，并在这个应用的名字后面加上“后端”。</p><p id="b958" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建后，您可以选择连接应用程序的方式。因为我有最新的Github，我发现这是最简单的。您可以搜索您的Github repo并简单地连接和部署它。不幸的是，你还没有完成。如果你的后端或前端使用了对Github隐藏的变量，你需要把它们添加到Heroku上，这样它们就可以被访问了。进入“设置-&gt;配置变量-&gt;显示配置变量”并添加每个变量。您还需要按照说明安装Heroku CLI它快速、简单，是目前为止调试出现的部署问题的最佳工具。</p><p id="83c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">太好了！现在，您应该已经在Heroku上托管了后端，配置了变量，并且安装了Heroku CLI。现在，您必须通过Heroku CLI迁移和播种后端，方法是访问后端的正确目录，并在终端中输入以下命令</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="9684" class="lk ll iq lg b gy lm ln l lo lp">heroku rake db:migrate --app=*enter-your-heroku-app-name-here*<br/>heroku rake db:seed --app=*enter-your-heroku-app-name-here*</span></pre><p id="178b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果这工作正常，你的后端应该是好的。如果没有，您可以通过输入以下命令在访问后端应用程序上的不同路径时查看Heroku日志来检查错误。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="1ee5" class="lk ll iq lg b gy lm ln l lo lp">heroku logs --app=*enter-your-heroku-app-name-here*</span></pre><p id="6766" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我发现在连接一个使用Postgres的app并通过Heroku进行迁移和播种时会出现错误，可以通过运行以下命令修复。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="dc0b" class="lk ll iq lg b gy lm ln l lo lp">heroku pg:reset DATABASE_URL --app=*enter-your-heroku-app-name-here*</span></pre><p id="34e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">到目前为止，您应该已经完成了后端工作，并准备好继续部署前端。首先，您必须用新的Heroku后端url替换对后端localhost的每个调用。接下来，我们来谈谈两个常见的bug。如果您使用的是React应用程序，那么您可能有一个package.json文件。如果Github给了你dependabot警报，而你合并了它们，它很可能也在你的应用程序中安装了yarn.lock文件。我的研究建议Heroku不允许两者，所以你需要配置所有的东西到一个package.json文件中，或者删除dependabot的修改。另一个常见的错误是，如果您在returns或renders中有任何注释掉的代码，它可能会通过Heroku导致错误，即使它在localhost上没有。确保移动或移除这些区域中任何被注释掉的代码。Heroku也可能以localhost没有的方式包含CSS文件，所以如果您注意到了风格上的差异，请注意。</p><p id="6d66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望您的前端现在已经完全配置好了。一定要提交并推送到Github，这样就可以把这个版本链接到Heroku。接下来，再次按照步骤在Heroku上创建一个新的应用程序，并给它一个唯一的名称。如果您使用React作为前端，您可能需要添加一个包来允许正确的集成。转到此应用程序的设置，为您的前端添加配置变量，就像您为后端所做的那样，并在“构建包”下单击“添加构建包”并粘贴以下URL。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="309f" class="lk ll iq lg b gy lm ln l lo lp"><a class="ae kc" href="https://github.com/mars/create-react-app-buildpack.git" rel="noopener ugc nofollow" target="_blank">https://github.com/mars/create-react-app-buildpack.git</a></span></pre><p id="f159" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在您可以部署您的前端并进行测试了！如果某些东西不能正常工作，您需要确定问题是出在前端还是后端，并运行Heroku CLI命令再次打印日志，这将有助于您进行调试。如果你对你的代码做了任何修改，一定要把它们推送到Github，必要的话重新部署你的应用！</p><p id="3083" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望这能帮助你成功部署你的第一个Heroku应用。恭喜你！</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lq"><img src="../Images/8990b637af9dee0d7a72321f567bf27c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*y3EDpSCj-EXLLcoK"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">达米亚诺·林戈里在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div></div>    
</body>
</html>