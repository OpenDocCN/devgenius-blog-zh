<html>
<head>
<title>Creating Instagram Story View in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Android 中创建 Instagram 故事视图</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-instagram-story-view-in-android-b5e4dbb27185?source=collection_archive---------0-----------------------#2022-07-02">https://blog.devgenius.io/creating-instagram-story-view-in-android-b5e4dbb27185?source=collection_archive---------0-----------------------#2022-07-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div class="gh gi il"><img src="../Images/613cfc03fbeddcb4f0e4e4beea9f9539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*FvXJXnPh9MTt0-KNjW2qMA.gif"/></div></figure><div class=""/><p id="0ed2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Instagram 是智能手机中使用最多的应用程序之一，其功能再次成为开发人员讨论的热门话题。故事现在正成为许多不同应用程序中最常见的功能之一，如 WhatsApp、LinkedIn、Instagram 等。如今，Instagram like stories 广泛用于显示新闻、教育内容以及与用户互动的应用程序中。我已经创建了一个 android 库，只需要 3-4 行代码就可以实现完整的故事功能。您可以查看该库并阅读它的文档，以了解它的工作方式并将其包含在您的应用程序中。</p><div class="im in gp gr io kp"><a href="https://github.com/SiddyDevelops/InstaStoryView" rel="noopener  ugc nofollow" target="_blank"><div class="kq ab fo"><div class="kr ab ks cl cj kt"><h2 class="bd iv gy z fp ku fr fs kv fu fw it bi translated">GitHub-SiddyDevelops/InstaStoryView:一个 android 库，它提供了一个渐进的和动态的…</h2><div class="kw l"><h3 class="bd b gy z fp ku fr fs kv fu fw dk translated">InstaStoryView 是一个定制的 Android 库，托管在 Jitpack 上。这个库允许用户轻松地使用…</h3></div><div class="kx l"><p class="bd b dl z fp ku fr fs kv fu fw dk translated">github.com</p></div></div><div class="ky l"><div class="kz l la lb lc ky ld iq kp"/></div></div></a></div><p id="35c6" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">但在这篇博客中，我不会谈论我的库和它的功能，而是我们将看看如何为我们的 Android 应用程序创建一个我们自己的自定义故事视图。我们可以开始了吗？</p><figure class="lf lg lh li gt ip gh gi paragraph-image"><div class="gh gi le"><img src="../Images/33dc5628e12995ab63a92d7c4a4e2c5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/1*3w3OJKcIqKZqm9496DX50A.gif"/></div></figure><blockquote class="lj lk ll"><p id="54ed" class="jr js lm jt b ju jv jw jx jy jz ka kb ln kd ke kf lo kh ki kj lp kl km kn ko ig bi translated"><strong class="jt iv">创建我们的应用程序:Touch Base </strong></p></blockquote><p id="0913" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">为了查看我们的故事，我们将需要项目/图标，用户可以点击它，看到渐进的故事图像。我们将需要一个<em class="lm"> RecyclerView </em>来显示视图图标，点击后会使故事查看器膨胀。<em class="lm">回收视图</em>放置在<em class="lm">主活动</em>内。<em class="lm">回收视图</em>的<em class="lm"> layout_item.xml </em>设计如下:</p><figure class="lf lg lh li gt ip gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/6d814f92b76114912253406be54c8128.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*weJrwb2HvgO8-bfeMX8nGA.jpeg"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">MainActivity 内部的 RecyclerView</figcaption></figure><p id="29ea" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt iv"> <em class="lm">代号为</em></strong><a class="ae lv" href="https://gist.github.com/SiddyDevelops/68d47a7b5e31deca3cdb54d55d48a9b0" rel="noopener ugc nofollow" target="_blank"><strong class="jt iv">story _ icon _ item . XML</strong></a><strong class="jt iv"><em class="lm">为 RecyclerView: </em> </strong></p><figure class="lf lg lh li gt ip"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="c9c0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt iv">代码为</strong><a class="ae lv" href="https://gist.github.com/SiddyDevelops/d43c25aa792cf71f31ddc1c54064f6d8" rel="noopener ugc nofollow" target="_blank"><strong class="jt iv">RecyclerViewAdapter.java</strong></a><strong class="jt iv">显示故事条目的图标:</strong></p><figure class="lf lg lh li gt ip"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="f833" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt iv"> <em class="lm">代号为</em></strong><a class="ae lv" href="https://gist.github.com/SiddyDevelops/5cc042673e484438963e85214b39629b" rel="noopener ugc nofollow" target="_blank"><strong class="jt iv"/></a><strong class="jt iv"><em class="lm"/></strong><a class="ae lv" href="https://gist.github.com/SiddyDevelops/6994c4c7d01d0074476482e433e0618c" rel="noopener ugc nofollow" target="_blank"><strong class="jt iv">activity _ main . XML</strong></a><strong class="jt iv"><em class="lm">:</em></strong></p><figure class="lf lg lh li gt ip"><div class="bz fp l di"><div class="lw lx l"/></div></figure><figure class="lf lg lh li gt ip"><div class="bz fp l di"><div class="lw lx l"/></div></figure><blockquote class="lj lk ll"><p id="f953" class="jr js lm jt b ju jv jw jx jy jz ka kb ln kd ke kf lo kh ki kj lp kl km kn ko ig bi translated"><strong class="jt iv">创建我们的定制模板</strong></p></blockquote><p id="190a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们将有一个基本模板，其中将包含<em class="lm">图像视图</em>，<em class="lm">文本视图</em>和一个类似的按钮。在所有的故事中，我们将通过一个适配器来改变这些视图中的内容。所以所有进步的故事将遵循相同的模板，在视图中有不同的内容。这就是我们的模板的样子:</p><figure class="lf lg lh li gt ip gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/c2c8985b7a5ba32661b420d6857075af.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*PgEDl3MmZ0-Mi_R12FPqRw.jpeg"/></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk translated">故事视图的模板设计</figcaption></figure><p id="5b12" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">感谢 Android 开源社区，我找到了一个优秀的库，基于这个库，我们将可以控制顶部的进度条，它将控制像<em class="lm">on cause</em>、<em class="lm"> onTouch </em>、<em class="lm"> onResume </em>这样的方法。这个库也将帮助我们根据每个故事中图片的数量将顶部的进度条分成几个部分。闲聊到此为止，让我们开始编写自定义的故事视图。</p><div class="im in gp gr io kp"><a href="https://github.com/shts/StoriesProgressView" rel="noopener  ugc nofollow" target="_blank"><div class="kq ab fo"><div class="kr ab ks cl cj kt"><h2 class="bd iv gy z fp ku fr fs kv fu fw it bi translated">GitHub-shts/stories progress view:像 instagram stories 一样展示横向进度。</h2><div class="kw l"><h3 class="bd b gy z fp ku fr fs kv fu fw dk translated">像 Instagram stories 一样显示横向进度的库。^She 是小林要看一个故事如何进展…</h3></div><div class="kx l"><p class="bd b dl z fp ku fr fs kv fu fw dk translated">github.com</p></div></div><div class="ky l"><div class="ly l la lb lc ky ld iq kp"/></div></div></a></div><p id="abc3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lm">第一步。</em>第一步是在我们的<em class="lm">构建中包含库依赖。格雷德</em>。</p><pre class="lf lg lh li gt lz ma mb mc aw md bi"><span id="a16e" class="me mf iu ma b gy mg mh l mi mj">// Inside build.gradle(Project:app)<br/>allprojects {<br/>    repositories {<br/>        ...<br/>        maven { url "https://jitpack.io" }<br/>    }<br/>}<br/>// Inside build.gradle(Module:app)<br/>dependencies {<br/>    ...<br/>    implementation 'com.github.shts:StoriesProgressView:3.0.0'<br/>}</span></pre><p id="7269" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lm">第二步。</em>需要一个带有<em class="lm"> NoActionBar </em>的主题，因此，在<em class="lm"> theme.xml </em>中，将根样式改为:</p><pre class="lf lg lh li gt lz ma mb mc aw md bi"><span id="55f6" class="me mf iu ma b gy mg mh l mi mj">Theme.MaterialComponents.DayNight.NoActionBar</span></pre><p id="daeb" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lm">步骤三。</em>现在是我们为故事查看器设计基础模板的时候了。创建一个包含此模板<em class="lm">的新活动。</em>在新的布局中，我们将这样设计和编码我们的布局:</p><figure class="lf lg lh li gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi mk"><img src="../Images/981c36e25a018ba7f87b24eda68f8ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_oeyF2Y7SC5TsGyQaZMtQ.png"/></div></div></figure><p id="5911" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt iv"> <em class="lm">代号为</em></strong><a class="ae lv" href="https://gist.github.com/SiddyDevelops/9414d270bb67445e413fb1d9bbbbab16#file-activity_story_player-xml" rel="noopener ugc nofollow" target="_blank"><strong class="jt iv"><em class="lm">activity _ story _ player . XML</em></strong><strong class="jt iv"><em class="lm">:</em></strong></a></p><figure class="lf lg lh li gt ip"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="0795" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">第四步:现在是最重要的一步，我们需要为我们的活动和故事播放器编写功能代码。在这里，我们将包括像跳过故事，暂停和恢复故事，到下一个故事或返回到上一个故事的功能。(<a class="ae lv" href="https://gist.github.com/SiddyDevelops/72fe612020664cc6d03d8ac630c212ba#file-storyplayeractivity-java" rel="noopener ugc nofollow" target="_blank">StoryPlayerActivity.java</a>)</p><figure class="lf lg lh li gt ip"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="a0cf" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">就是这样！现在你的应用程序有了 Instagram stories，它具有缓存和强大的功能。恭喜你！您现在拥有了一个与 Instagram story viewer 具有相同行为的应用程序。</p><p id="eb3e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">感谢您阅读文章！如果你喜欢这篇文章，一定要保存下来，并给它一些掌声。敬请关注更多类似本文的精彩文章。在那之前享受编码吧！🚀 🔥</p><p id="b257" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae lv" href="https://github.com/SiddyDevelops/InstaStory-Blog" rel="noopener ugc nofollow" target="_blank"><strong class="jt iv"><em class="lm"/></strong></a></p><p id="cdb5" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae lv" href="https://siddydevelops.github.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt iv"> <em class="lm">了解我</em> </strong> </a></p></div></div>    
</body>
</html>