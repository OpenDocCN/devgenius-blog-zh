<html>
<head>
<title>How to set up a multi-node Kubernetes local cluster for CKA, CKAD, CKS exams</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为 CKA、CKAD 和 CKS 考试设置多节点 Kubernetes 本地集群</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-set-up-a-multi-node-kubernetes-local-cluster-for-cka-ckad-cks-exams-ee6ccdb03b9f?source=collection_archive---------6-----------------------#2021-12-23">https://blog.devgenius.io/how-to-set-up-a-multi-node-kubernetes-local-cluster-for-cka-ckad-cks-exams-ee6ccdb03b9f?source=collection_archive---------6-----------------------#2021-12-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/4f0420250cd63f3645622f30f03bfa0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*Nvkx2l_jutGoQG4H.png"/></div></figure><p id="2f74" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在本地环境中建立 Kubernetes 集群有很多方法，我已经测试了一些工具，在这里我提供了我认为最好的方法，尤其是如果你的目的是为了参加 CKA/CKAD/CKS 认证考试。</p><p id="9c26" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们将需要在我们的 PC/笔记本电脑上创建虚拟机，为此我将使用一个<a class="ae kp" href="https://canonical.com/" rel="noopener ugc nofollow" target="_blank">规范</a>产品:<a class="ae kp" href="https://multipass.run/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io">多次</strong> </a>。我用了很长时间，在我看来创建 Ubuntu 虚拟机是最好的选择。</p><p id="7d71" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">对于集群初始化，我们将使用 Kubernetes 官方文档中推荐的<a class="ae kp" href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> kubeadm </strong> </a>。</p><p id="a3d9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在这里，我引用一些理由来说明为什么使用这个堆栈比使用 minikube、microk8s、k3s、RKE、EKS、AKS、GKE 等其他选项更好:</p><ol class=""><li id="69f5" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko kv kw kx ky bi translated"><strong class="jt io">主要原因</strong>:不需要安装<strong class="jt io"> <em class="kz"> Docker </em> </strong>，您将使用<strong class="jt io"> <em class="kz"> containerd </em> </strong>作为容器运行时，<strong class="jt io"> <em class="kz"> crictl </em> </strong>作为符合 CRI 的容器运行时的 cli，如果您需要构建 Dockerfile，您将使用<strong class="jt io"> <em class="kz"> podman </em> </strong>。</li><li id="108d" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko kv kw kx ky bi translated">没有必要在 Ubuntu 虚拟机上安装额外的依赖项，你需要的是干净的节点，其中只有你需要处理的内容。</li><li id="02c9" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko kv kw kx ky bi translated">您还需要您的集群是干净的，您不需要安装额外的 Kubernetes 资源，比如 CRD、statefulsets、守护进程、服务、部署等等。</li><li id="3bc6" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko kv kw kx ky bi translated"><strong class="jt io"> <em class="kz"> Multipass </em> </strong>和<em class="kz"> Ubuntu </em>是由<em class="kz"> Canonical、</em>开发的，这些都有他们的支持。</li><li id="f4c6" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko kv kw kx ky bi translated">您需要完全控制您的集群，尤其是您的控制平面节点。这就是为什么 Kubernetes 托管服务是无用的(EKS，AKS，GKE，等等)。</li><li id="0cdb" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko kv kw kx ky bi translated">你需要 Ubuntu 节点来模拟 CKA/CKAD/CKS 考试。</li></ol><h1 id="0095" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">要求:</strong></h1><p id="446e" class="pw-post-body-paragraph jr js in jt b ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko ig bi translated">确保至少有 4 GB 内存、4 个空闲 CPU 内核和 20 Gb 用于虚拟机。</p><p id="50f7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我建议使用这些资源来避免性能和磁盘空间问题:</p><p id="3349" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">控制平面</strong>(主节点):</p><ul class=""><li id="2f37" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko mi kw kx ky bi translated">2 Gb 内存</li><li id="5805" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko mi kw kx ky bi translated">2 个 CPU 内核</li><li id="1057" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko mi kw kx ky bi translated">10 Gb 磁盘</li></ul><p id="b839" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">工作者</strong>(工作者节点):</p><ul class=""><li id="8efd" class="kq kr in jt b ju jv jy jz kc ks kg kt kk ku ko mi kw kx ky bi translated">2 Gb 内存</li><li id="8f01" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko mi kw kx ky bi translated">2 个 CPU 内核</li><li id="e0ee" class="kq kr in jt b ju la jy lb kc lc kg ld kk le ko mi kw kx ky bi translated">10 Gb 磁盘</li></ul><h1 id="10c2" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">Kubernetes 集群配置</h1><p id="9683" class="pw-post-body-paragraph jr js in jt b ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko ig bi translated">这里就不多说了，我附上了一个带有 readme 文件的 Git 存储库，在这里您可以看到 Kubernetes 集群配置的一步一步:</p><div class="mj mk gp gr ml mm"><a href="https://github.com/stazdx/k8s-local-environment" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd io gy z fp mr fr fs ms fu fw im bi translated">GitHub-stazdx/k8s-local-environment:如何在 10 分钟内创建一个多节点 Kubernetes 集群…</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">对于这个演示，我们将使用 Multipass 创建 2 个 Ubuntu 节点。此外，我们可以使用这个集群环境来练习…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">github.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na jp mm"/></div></div></a></div><p id="3a44" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kz">注:</em> </strong> <em class="kz">本文所应用的是基于我的经验，并不是能够做到的唯一方法。</em></p><h1 id="1d80" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">相关职位</h1><div class="mj mk gp gr ml mm"><a href="https://medium.com/@stazdx/tips-generales-y-t%C3%A9cnicos-para-las-certificaciones-cka-ckad-y-cks-d2bc22d7ba90" rel="noopener follow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd io gy z fp mr fr fs ms fu fw im bi translated">CKA、CKAD 和 CKS 证书的一般和技术</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">韩参加了四个星期的比赛。我建议重新获得认证…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">medium.com</p></div></div><div class="mv l"><div class="nb l mx my mz mv na jp mm"/></div></div></a></div></div></div>    
</body>
</html>