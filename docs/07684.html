<html>
<head>
<title>Installing Gentoo Linux in Apple Macbook Pro M1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在苹果 Macbook Pro M1 安装 Gentoo Linux</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/installing-gentoo-linux-in-apple-macbook-pro-m1-49e163534898?source=collection_archive---------1-----------------------#2022-04-15">https://blog.devgenius.io/installing-gentoo-linux-in-apple-macbook-pro-m1-49e163534898?source=collection_archive---------1-----------------------#2022-04-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="e2db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">很久以前我就想用媒体写我的第一篇文章。所以我决定开始我的作家故事，向你展示如何在 Macbook Pro 2020 上安装 Gentoo Linux，该 Macbook Pro 2020 采用 M1 处理器，由来自 Asahi Linux 项目(旨在将 Linux 引入苹果硅 MAC 的项目)的定制 Linux 内核提供支持。</p><p id="936b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">目前，Asahi 附带了 Arch Linux，但是很少有非官方的安装指南来安装其他 Linux 发行版，比如 Debian 或 Fedora。在本教程中，我们将看到如何利用 Asahi installer 来进行磁盘分区和设置引导过程，然后如何使用 Asahi Linux 来准备和安装 Gentoo Linux，最后一个接一个地交换。</p><p id="fa78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">先决条件:</strong></p><ul class=""><li id="983c" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">你有安装 Gentoo Linux 的经验。</li><li id="2024" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">你熟悉朝日安装程序</li><li id="c732" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">u 盘:用于存储 stage3 和 portage tar 文件，所以我们不需要互联网连接来获取这些文件。</li><li id="f243" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">USB 以太网适配器:用于互联网连接，直到我们的基本系统中安装了 Wi-Fi 适配器和 Wi-Fi 配置实用程序。</li></ul><h1 id="b0d7" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 0 -下载基于 Gentoo 的系统</h1><p id="7902" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">转到 Gentoo 网站，然后下载 Stage3 tarball 文件(适用于 AArch64 架构)并将其复制到 u 盘上。</p><h1 id="b106" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 1 -安装朝日 Linux 最小环境</h1><p id="bba3" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">让我们开始运行 Asahi Linux 安装程序，打开一个 shell 终端并键入以下命令:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="dcb0" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">curl </strong><a class="ae mn" href="https://alx.sh" rel="noopener ugc nofollow" target="_blank"><strong class="me io">https://alx.sh</strong></a><strong class="me io"> | sh</strong></span></pre><p id="e36d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下载安装程序并输入您的管理员密码后，您将看到如下屏幕:</p><figure class="lz ma mb mc gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mo"><img src="../Images/5c8f1c735d9f01f13275fcf6cd1e2248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d1fNbTjV75evkWSZB_wXnw.png"/></div></div></figure><p id="a2aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">按“回车”继续(如屏幕所示)启动朝日设置，请仔细阅读说明，我发现默认选项适用于常见情况。这超出了本教程朝日安装程序的范围，我假设你将使用默认选项，你将选择操作系统选项:“朝日 Linux Minimal (Arch Linux ARM)”。</p><figure class="lz ma mb mc gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi mw"><img src="../Images/a4819a66a8517b0e37eb5f43acc5d40a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P4xoYT2QZmsOlNpmY_U0Ng.png"/></div></div></figure><p id="361e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在某些时候，安装程序会显示相关的数据，例如创建的磁盘分区的 UUID，然后会要求我们仔细阅读接下来的说明。如果您正确地遵循了安装程序的说明，您的设备将会关闭，您需要等待至少 15 秒钟才能按下电源按钮。</p><p id="8c65" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">完成 Asahi Linux 安装的剩余步骤，并为您的第一次系统引导做准备。在第一次启动时，您可以使用默认的根证书(root:root)登录 Asahi Linux 安装。</p><p id="7d59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们开始为 Gentoo 准备一切。</p><h1 id="ae0f" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 2 -准备 Gentoo 基础系统</h1><p id="372e" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">以 root 用户身份登录 Asahi Linux 后，需要安装 u 盘，为 Gentoo 文件创建一个文件夹，并将 stage3 tarball 内容复制到 Gentoo 文件夹中:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="a4ff" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> mkdir -p /mnt/gentoo<br/><strong class="me io">#</strong> mkdir -p /mnt/usb<br/><strong class="me io">#</strong> mount /dev/sda1 /mnt/usb<br/><strong class="me io">#</strong> cd /mnt/gentoo<br/><strong class="me io">#</strong> tar xpvf /mnt/usb/stage3-*.tar.xz —-xattrs-include=“*.*” —-numeric-owner<br/><strong class="me io">#</strong> cd </span></pre><p id="baf1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此时，Gentoo 基础系统文件被安装到<strong class="jm io"> /mnt/gentoo </strong>文件夹中。现在是时候从 Asahi 安装中复制一些东西了，特别是内核，它的模块和设备固件。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f1cc" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> cp -r /boot /mnt/gentoo<br/><strong class="me io">#</strong> cp -r /usr/lib/modules /mnt/gentoo/usr/lib<br/><strong class="me io">#</strong> cp -r /usr/lib/firmware /mnt/gentoo/usr/lib</span></pre><p id="aac4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Asahi Arch Linux 对内核模块使用 zstd 压缩算法，不幸的是，Gentoo 在 kmod 和 systemd 中默认不支持 zstd，因此我们的 Gentoo 基础系统需要重新编译，以便能够加载这些内核模块。</p><p id="eb73" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们开始设置<strong class="jm io"> make.conf </strong>文件:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="dde9" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> nano /mnt/gentoo/etc/portage.conf </span></pre><p id="d61b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们调整一下<strong class="jm io"> COMMON_FLAGS </strong>变量，我将启用<em class="mx"> "-march=native" </em>来指示系统编译器以 M1 特定处理器指令集为目标，这将转化为性能提升:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="6ad5" class="mi kx in me b gy mj mk l ml mm">COMMON_FLAGS=“<strong class="me io">-march=native</strong> -O2 -pipe”</span></pre><p id="5ea1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们添加<strong class="jm io"> MAKEOPTS </strong>变量:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="4bc7" class="mi kx in me b gy mj mk l ml mm">MAKEOPTS=“-j4”</span></pre><p id="c0f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我经常使用“<strong class="jm io"> -j8 </strong>”，告诉 make 最多有 8 个并行构建作业，因为我的 Macbook Pro 有 8 个内核，但如果你有更多的内核，可以使用不同的数量。请注意，官方的建议是让尽可能多的 make 作业尽可能多，假设每个作业至少有 2gb 的 RAM 可用，这对于某些包(例如 Chromium)来说非常重要。</p><p id="f9a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，让我们添加使用标志变量，我计划在我的 Gentoo Linux 中安装 KDE，所以除了 zstd 支持，我还启用了其他标志。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="e211" class="mi kx in me b gy mj mk l ml mm">USE=”-gtk -gnome X kde qt5 systemd <strong class="me io">zstd</strong>”</span></pre><p id="7e0e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">保存文件，现在让我们在进入 Gentoo 安装之前挂载一些需要的文件系统。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="503e" class="mi kx in me b gy mj mk l ml mm"><strong class="me io"># </strong>mount --types proc /proc /mnt/gentoo/proc<br/><strong class="me io"># </strong>mount --rbind /sys /mnt/gentoo/sys<br/><strong class="me io"># </strong>mount --make-rslave /mnt/gentoo/sys<br/><strong class="me io"># </strong>mount --rbind /dev /mnt/gentoo/dev<br/><strong class="me io"># </strong>mount --make-rslave /mnt/gentoo/dev<br/><strong class="me io"># </strong>mount --bind /run /mnt/gentoo/run<br/><strong class="me io"># </strong>mount --make-slave /mnt/gentoo/run</span></pre><p id="56a8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，是时候进入 Gentoo 基本系统了:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="2c1d" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> chroot /mnt/gentoo /bin/bash<br/><strong class="me io">#</strong> source /etc/profile</span></pre><p id="e505" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在用 zstd 支持重新编译 Gentoo 基础系统之前，让我们从网上安装一个 Gentoo ebuild 库快照。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="c601" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> emerge-webrsync</span></pre><p id="f9ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，更新@world set，它将使用 zstd 支持重新编译我们的系统。根据所选的 stage3 tarball 和网络带宽，此过程可能需要几分钟时间。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="3538" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> emerge --ask --verbose --update --deep --newuse @world</span></pre><p id="e997" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随着基本系统的更新，让我们继续安装一些我们不久将需要的额外工具。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f125" class="mi kx in me b gy mj mk l ml mm"><strong class="me io"># </strong>emerge —-ask net-misc/dhcpcd<strong class="me io"><br/>#</strong> emerge —-ask net-wireless/wpa_supplicant<br/><strong class="me io">#</strong> emerge —-ask net-wireless/iw</span></pre><p id="9882" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们设置根密码:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="b843" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> passwd</span></pre><h1 id="6ddc" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 3 -备份阶段 4</h1><p id="9f81" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">基于 Gentoo 的系统已经可以使用了，它将提供一个最小的系统，在这个系统中可以引导一个更复杂的系统。让我们备份我们的系统以便以后使用。</p><p id="11aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，需要一个排除列表来避免备份一些不必要的文件夹:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="fbb5" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> cat &lt;&lt; EOF &gt; /stage4.excl<br/>.bash_history<br/>/mnt/*<br/>/tmp/*<br/>/proc/*<br/>/sys/*<br/>/dev/*<br/>/run/*<br/>/stage4.excl<br/>/stage4.tar.gz<br/>EOF</span></pre><p id="1205" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，备份 Gentoo 基本系统的时间到了(此时通常称为 Stage4，因为它有基本系统+内核):</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f277" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> tar cvzf /stage4.tar.gz -X /stage4.excl /</span></pre><p id="1eef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个过程需要几分钟来备份整个系统。之后，我们可以退出 chroot，并将我们的备份复制到 USB 闪存盘:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="d58d" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> exit<br/><strong class="me io">—- (Back to Asahi Linux)<br/># </strong>cp /mnt/gentoo/stage4.tar.gz /mnt/usb</span></pre><p id="27c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，卸载文件系统并重新启动系统:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="1483" class="mi kx in me b gy mj mk l ml mm"># umount /mnt/usb<br/># reboot</span></pre><h1 id="eac4" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 4 -用 Gentoo 替换 Asahi Linux</h1><p id="cc1f" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">下一次引导时，我们将通过按箭头键在 GRUB 引导程序屏幕中停止，这是一个必要的步骤，因为我们需要用我们的 Gentoo 基本系统替换 Asahi Linux 安装，但这不能在 Asahi Linux 运行时完成。</p><figure class="lz ma mb mc gt mp gh gi paragraph-image"><div role="button" tabindex="0" class="mq mr di ms bf mt"><div class="gh gi my"><img src="../Images/4780786b825ea3988939af2465a9bf1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DtT6PY8uAXUqc-s4YI3w3g.jpeg"/></div></div></figure><p id="c97a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，按“e”键编辑 GRUB 配置。GRUB 配置告诉引导装载程序在哪里可以找到 Linux 内核和初始 RAMDISK。默认配置应该如下所示:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="b6bb" class="mi kx in me b gy mj mk l ml mm">setparams ‘Arch Linux’<br/>    load_video<br/>    set gfxpayload=keep<br/>    insmod gzip<br/>    insmod ext2<br/>    search —-no-floppy —-fs-uuid —-set=root &lt;UUID&gt;<br/>    echo    ‘Loading Linux linux-asahi ...‘<br/>    <em class="mx">linux   /boot/vmlinuz-linux-asahi </em><strong class="me io"><em class="mx">root=UUID=&lt;UUID&gt; rw loglevel=3 quiet</em><br/>    </strong>echo    ’Loading initial ramdisk ...’<br/>    initrd  /boot/initramfs-linux-asahi.img</span></pre><p id="64ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">编辑'<em class="mx"> linux </em>'条目并删除传递给内核的参数(在前一个块中以粗体显示):</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="8198" class="mi kx in me b gy mj mk l ml mm">setparams ‘Arch Linux’<br/>    load_video<br/>    set gfxpayload=keep<br/>    insmod gzip<br/>    insmod ext2<br/>    search —-no-floppy —-fs-uuid —-set=root &lt;UUID&gt;<br/>    echo    ‘Loading Linux linux-asahi ...‘<br/>    linux   /boot/vmlinuz-linux-asahi <strong class="me io"><br/>    </strong>echo    ’Loading initial ramdisk ...’<br/>    initrd  /boot/initramfs-linux-asahi.img</span></pre><p id="a1b3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将导致内核启动到恢复模式，从 RAMDISK 运行嵌入式环境。挂载 u 盘和朝日根分区:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="1545" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">[rootfs ]#</strong> mkdir -p /mnt/asahi /mnt/usb<br/><strong class="me io">[rootfs ]#</strong> mount /dev/sda1 /mnt/usb<br/><strong class="me io">[rootfs ]#</strong> mount /dev/nvme0n1p5 /mnt/asahi</span></pre><p id="82a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">删除朝日 Linux 的所有内容:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="3ba9" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">[rootfs ]#</strong> rm -Rf /mnt/asahi/*</span></pre><p id="9e6e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将 Stage 4 tarball 文件的内容提取到 Asahi Linux 分区:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="c1a3" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">[rootfs ]#</strong> cd /mnt/asahi<br/><strong class="me io">[rootfs ]#</strong> tar xpvf /mnt/usb/stage4.tar.gz —-numeric-owner</span></pre><p id="699f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Symlink 内核模块和固件目录:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="89f1" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">[rootfs ]#</strong> chroot /mnt/asahi /bin/bash<br/>—- Chroot Gentoo Linux —-<br/><strong class="me io">#</strong> rm -Rf /lib/firmware<br/><strong class="me io">#</strong> ln -s /usr/lib/firmware /lib/<br/><strong class="me io">#</strong> ln -s /usr/lib/modules /lib/</span></pre><p id="d837" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，重新启动进入 Gentoo:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="2370" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> reboot -f</span></pre><h1 id="512a" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 5 -在 Gentoo Linux 中建立网络</h1><p id="2cde" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">重新启动后，您可以使用之前为 root 帐户设置的凭据登录。您可能会注意到没有网络连接，我们需要配置 Gentoo 来获得网络访问。我将展示如何手动启用 Wi-Fi 连接，我假设您已经有足够的经验来完成设置您的 Gentoo 安装。</p><p id="04b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们列出系统中所有可用的网络接口:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="0701" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> ifconfig -a</span></pre><p id="af79" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我的例子中，我看到列出了<strong class="jm io"> wlp1s0f0 </strong>网络接口。调出这个界面:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="08ae" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> ifconfig wlp1s0f0 up</span></pre><p id="196a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们验证接口是否可以扫描网络:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="9ac7" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> iw wlp1s0f0 scan</span></pre><p id="c504" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此时，您应该会看到附近的网络。要连接到这些网络之一:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="f74a" class="mi kx in me b gy mj mk l ml mm"><strong class="me io"># </strong>wpa_passphrase &lt;SSID&gt; &lt;Password&gt; &gt;&gt; /etc/wpa_supplicant.conf</span></pre><p id="13f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">启动 wpa_supplicant 和 dhcpcd 守护程序:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="3ed2" class="mi kx in me b gy mj mk l ml mm"><strong class="me io">#</strong> wpa_supplicant -B -i wlp1s0f0 -c /etc/wpa_supplicant.conf<br/><strong class="me io">#</strong> dhcpcd wlp1s0f0 </span></pre><p id="ecc6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此时，您应该已经安装了有效的 Gentoo，并且可以继续阅读手册安装指南。</p><p id="41f1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">黑客快乐！</p></div></div>    
</body>
</html>