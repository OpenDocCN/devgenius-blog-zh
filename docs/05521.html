<html>
<head>
<title>Snowflake Dynamic Data Masking Overview</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">雪花动态数据屏蔽概述</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/snowflake-dynamic-data-masking-overview-4ebaa29c20aa?source=collection_archive---------1-----------------------#2021-08-31">https://blog.devgenius.io/snowflake-dynamic-data-masking-overview-4ebaa29c20aa?source=collection_archive---------1-----------------------#2021-08-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d81b489564823921a2e8d460a657670a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D4sBv75AUvzzbrUx"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@oversorted?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿南德·塔库尔</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="1744" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇博客中，我们将讨论<strong class="kf ir">雪花数据治理特性:动态数据屏蔽</strong>。该功能属于“<strong class="kf ir">保护您的数据</strong>”类别。此功能适用于所有<strong class="kf ir">企业版(或更高版本)</strong>的帐户。如果你最近看了我的关于<a class="ae kc" href="https://rajivgupta780184.medium.com/snowflake-data-governance-row-access-policy-overview-91b50d604a57" rel="noopener"> <strong class="kf ir">行访问策略</strong> </a>的博客，那么就在同一行上<a class="ae kc" href="https://rajivgupta780184.medium.com/snowflake-data-governance-row-access-policy-overview-91b50d604a57" rel="noopener"> <strong class="kf ir">行访问策略</strong> </a>保护/控制<strong class="kf ir">行</strong>并使其仅被授权的人或人群可见，而<strong class="kf ir">动态数据屏蔽</strong>将保护/控制<strong class="kf ir">列数据</strong>并使其仅被授权的人或人群可见。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="ee2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">雪花是如何隔离数据治理的？</strong></p><p id="822b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上述主题属于三个类别之一。</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi li"><img src="../Images/2ee1d3c02fe438e200674cb7d06445a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*S5ZAlpnz8YJruQph.png"/></div></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="ac38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">什么是动态数据屏蔽？</strong></p><p id="7c9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">动态数据屏蔽特性是<strong class="kf ir">雪花数据治理:列级安全性</strong>下的两个特性之一。此功能有助于屏蔽表格的列平面图-文本数据屏蔽数据。这是模式级对象，目前只能应用于表&amp;视图。动态数据屏蔽功能是逻辑的，在查询时应用。它不会持久地屏蔽数据库中的数据。根据掩码策略条件、SQL执行上下文和角色层次结构，雪花查询运算符可能会看到纯文本值、部分掩码值或完全掩码值。</p><p id="ade9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">屏蔽数据的外观示例。在下面的示例中，您可以看到Sales_info列被散列，Sales_figure值默认为0，Contact列对未授权用户部分屏蔽。</p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ln"><img src="../Images/2515f2e90e7519d00edc98ebbc9a2dae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d6YQtSms_xUUz5rHfcg_6A.png"/></div></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="9132" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">动态数据屏蔽的一些好处:</strong></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lo"><img src="../Images/f5511626f819db423e0f06900edfec2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kuaAyzGHP2cgVpy2B1SB0g.png"/></div></div></figure><p id="7204" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">我们如何创建屏蔽策略？</strong></p><p id="ff3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面，您可以看到3种不同的示例来创建屏蔽策略。</p><ol class=""><li id="ab86" class="lp lq iq kf b kg kh kk kl ko lr ks ls kw lt la lu lv lw lx bi translated">如果用户不拥有特定角色，则使用0(零)值屏蔽sales_figure列。</li><li id="bb31" class="lp lq iq kf b kg ly kk lz ko ma ks mb kw mc la lu lv lw lx bi translated">使用部分屏蔽来屏蔽联系人列，如果用户不拥有特定角色，则仅显示电子邮件域值。</li><li id="6a6c" class="lp lq iq kf b kg ly kk lz ko ma ks mb kw mc la lu lv lw lx bi translated">如果用户不拥有特定角色，则使用哈希值屏蔽sales_info列。</li></ol><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi md"><img src="../Images/7a0ad2ee5cc9ae46d9df0c0ef600721a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGMoVxk8pPgtuhn3zdsbbQ.png"/></div></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="9338" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">我们如何应用动态数据屏蔽策略？</strong></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi me"><img src="../Images/47fdbbca9fdf723b9823b09b92b1f6ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lEg-kfFyBb7XR02BmXg9Dg.png"/></div></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="8f21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">我们如何审计动态数据屏蔽策略？</strong></p><p id="84e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">雪花提供了两种特定于屏蔽策略的帐户使用视图。两个视图延迟可能高达120分钟(2小时)。该视图仅显示会话的当前角色已被授予访问权限的对象。</p><ul class=""><li id="a9fc" class="lp lq iq kf b kg kh kk kl ko lr ks ls kw lt la mf lv lw lx bi translated"><a class="ae kc" href="https://docs.snowflake.com/en/sql-reference/account-usage/masking_policies.html" rel="noopener ugc nofollow" target="_blank"> MASKING_POLICIES </a>提供了您雪花账户中所有屏蔽策略的列表。以下示例:</li></ul><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mg"><img src="../Images/5466d3a248c16b9b9688c7247b491adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4fOY82B1DT_XOBJyqGhGOw.png"/></div></div></figure><ul class=""><li id="54ba" class="lp lq iq kf b kg kh kk kl ko lr ks ls kw lt la mf lv lw lx bi translated"><a class="ae kc" href="https://docs.snowflake.com/en/sql-reference/account-usage/policy_references.html" rel="noopener ugc nofollow" target="_blank"> POLICY_REFERENCES </a>提供了设置了屏蔽策略的所有对象的列表。</li></ul><p id="e5c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以利用雪花文档进行动态数据屏蔽<a class="ae kc" href="https://docs.snowflake.com/en/user-guide/security-column-ddm-intro.html#troubleshooting-dynamic-data-masking" rel="noopener ugc nofollow" target="_blank">故障排除</a>。</p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="ffb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来点演示怎么样？</p><figure class="lj lk ll lm gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="6d69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">如何查看DDM策略体？</strong></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/753e03de0fc9252cb3be9b2a46e299bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NR85yXsG_UNtileETUtCgw.png"/></div></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="430f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">如何改变现有的屏蔽策略？</strong></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/76bd579199f997d286fccce047ade147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*HgqO8Bpi2FW-xwgZIZ-7Ig.png"/></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="37d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">如何撤销DDM策略？</strong></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/214c6e930699304b8ae8a165493ff469.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*3GTzYhxXVNZ-nmIwq9dueA.png"/></div></figure></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="a9a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">需要记住的事情:</strong></p><ul class=""><li id="45a6" class="lp lq iq kf b kg kh kk kl ko lr ks ls kw lt la mf lv lw lx bi translated">对掩码策略进行操作还需要对父数据库和方案具有USAGE权限。</li><li id="781a" class="lp lq iq kf b kg ly kk lz ko ma ks mb kw mc la mf lv lw lx bi translated">雪花在<a class="ae kc" href="https://docs.snowflake.com/en/user-guide/ui-history.html" rel="noopener ugc nofollow" target="_blank">历史页面</a>(web界面中)记录用户运行的原始查询。该查询位于<strong class="kf ir"> SQL文本</strong>列中。</li><li id="cc43" class="lp lq iq kf b kg ly kk lz ko ma ks mb kw mc la mf lv lw lx bi translated">在特定查询中使用的屏蔽策略名称可以在<a class="ae kc" href="https://docs.snowflake.com/en/user-guide/ui-query-profile.html" rel="noopener ugc nofollow" target="_blank">查询配置文件</a>中找到。</li><li id="5a99" class="lp lq iq kf b kg ly kk lz ko ma ks mb kw mc la mf lv lw lx bi translated">查询历史只针对账户使用<a class="ae kc" href="https://docs.snowflake.com/en/sql-reference/account-usage/query_history.html" rel="noopener ugc nofollow" target="_blank"> QUERY_HISTORY </a>视图。在这个视图中，<strong class="kf ir">查询文本</strong>列包含SQL语句的文本。QUERY_HISTORY视图中不包括掩蔽策略名称。</li><li id="afa0" class="lp lq iq kf b kg ly kk lz ko ma ks mb kw mc la mf lv lw lx bi translated">如果您想要更新现有的屏蔽策略并需要查看策略的当前定义，请调用<a class="ae kc" href="https://docs.snowflake.com/en/sql-reference/functions/get_ddl.html" rel="noopener ugc nofollow" target="_blank"> GET_DDL </a>函数或运行<a class="ae kc" href="https://docs.snowflake.com/en/sql-reference/sql/desc-masking-policy.html" rel="noopener ugc nofollow" target="_blank"> DESCRIBE MASKING POLICY </a>命令。</li><li id="4402" class="lp lq iq kf b kg ly kk lz ko ma ks mb kw mc la mf lv lw lx bi translated">目前，雪花不支持屏蔽策略中不同的输入输出数据类型，如定义屏蔽策略以时间戳为目标，返回字符串(如<code class="fe mm mn mo mp b">***MASKED***</code>)；输入和输出数据类型必须匹配。</li><li id="5e8c" class="lp lq iq kf b kg ly kk lz ko ma ks mb kw mc la mf lv lw lx bi translated">动态数据屏蔽权限可以在这里看到<a class="ae kc" href="https://docs.snowflake.com/en/user-guide/security-column-ddm-intro.html#dynamic-data-masking-privileges" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"/></a><strong class="kf ir">。</strong></li></ul></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><p id="8e0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">希望这篇博客能帮助你深入了解<strong class="kf ir">雪花动态数据屏蔽</strong>特性。如果你有兴趣了解更多关于<strong class="kf ir">动态数据屏蔽</strong>的细节，可以参考<a class="ae kc" href="https://docs.snowflake.com/en/user-guide/security-column-ddm.html" rel="noopener ugc nofollow" target="_blank">雪花文档</a>。如果你对此有任何疑问，欢迎在评论区提问。如果你喜欢这个博客，请鼓掌。保持联系，看到更多这样的酷东西。谢谢你的支持。</p><p id="4572" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">你可以找我:</strong></p><p id="ec47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">跟我上媒:</strong><a class="ae kc" href="https://rajivgupta780184.medium.com/" rel="noopener">https://rajivgupta780184.medium.com/</a></p><p id="dc17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">在推特上关注我:</strong>https://twitter.com/RAJIVGUPTA780 T21</p><p id="4d12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">在LinkedIn跟我连线:</strong><a class="ae kc" href="https://www.linkedin.com/in/rajiv-gupta-618b0228/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/rajiv-gupta-618b0228/</a></p><p id="8770" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">订阅我的YouTube频道:</strong><a class="ae kc" href="https://www.youtube.com/c/RajivGuptaEverydayLearning" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/c/RajivGuptaEverydayLearning</a></p><figure class="lj lk ll lm gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/9654e5a2314790205c0a73586ae44f2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*lCT1RSzZU3JHjqDw.png"/></div></figure><p id="0d1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">#坚持学习#坚持分享#每天学习。</p><h1 id="ec0b" class="mr ms iq bd mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no bi translated">参考资料:-</h1><ul class=""><li id="5a9d" class="lp lq iq kf b kg np kk nq ko nr ks ns kw nt la mf lv lw lx bi translated"><a class="ae kc" href="https://www.snowflake.com/" rel="noopener ugc nofollow" target="_blank">https://www.snowflake.com/</a></li></ul></div></div>    
</body>
</html>