<html>
<head>
<title>Implementing Splash Screens the Recommended Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以推荐的方式实现闪屏</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/implementing-splash-screens-the-recommended-way-5a866ae4d114?source=collection_archive---------4-----------------------#2022-11-19">https://blog.devgenius.io/implementing-splash-screens-the-recommended-way-5a866ae4d114?source=collection_archive---------4-----------------------#2022-11-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="30f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="ki">只用四个步骤完成</em> </strong></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/ff47ab04a58827fb628469e5498b69f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8zrDulntw1_Bbin-p7Y9cw.jpeg"/></div></div></figure><p id="6b13" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随着 Android 12 (API 31)的发布，引入了新的 SplashScreen API，以确保 Android 应用程序的启动方式有一个标准。这意味着，如果你的应用程序安装在 Android 12 设备上，使用传统的闪屏方式将导致意想不到的行为。但是不用担心，使用这个新的 API 实现闪屏只需 4 个简单的步骤。值得注意的是，这个 API 是向后兼容的，这意味着它也可以在 Android 11 和更低版本上实现。您可以轻松地迁移现有的闪屏实现，以符合新推荐的方式(我们将在稍后深入探讨)。</p><p id="2c1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意:这篇文章也可以在<a class="ae kv" href="https://dev.to/mayorjay/implementing-splash-screens-the-recommended-way-3873" rel="noopener ugc nofollow" target="_blank"> Dev </a>上找到</p><p id="5fd6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="ki">现在简单的四个步骤……</em></strong></p><p id="fef7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第一步:在 App 的<code class="fe kw kx ky kz b">build.gradle</code>文件中添加依赖关系<br/> </strong>，添加依赖关系下载库的工件</p><pre class="kk kl km kn gt la kz lb bn lc ld bi"><span id="9849" class="le lf in kz b be lg lh l li lj">dependencies {<br/>    ...<br/>    implementation "androidx.core:core-splashscreen:${current_version}"<br/>}</span></pre><p id="cc9b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在写这篇文章的时候，版本是<code class="fe kw kx ky kz b">1.0.0</code></p><p id="90b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第二步:在<code class="fe kw kx ky kz b">styles.xml </code>文件中创建主题<br/> </strong>，新建一个主题(任何名称都可以)，将其父主题设置为<code class="fe kw kx ky kz b">Theme.SplashScreen</code>或<code class="fe kw kx ky kz b">Theme.SplashScreen.IconBackground</code></p><pre class="kk kl km kn gt la kz lb bn lc ld bi"><span id="2a29" class="le lf in kz b be lg lh l li lj">&lt;style name="SplashScreenTheme" parent="Theme.SplashScreen"&gt;<br/>    &lt;item name="windowSplashScreenBackground"&gt;@color/colorWhite&lt;/item&gt;<br/>    &lt;item name="windowSplashScreenAnimatedIcon"&gt;@drawable/ic_launcher&lt;/item&gt;<br/>    &lt;item name="postSplashScreenTheme"&gt;@style/AppTheme&lt;/item&gt;<br/>&lt;/style&gt;</span></pre><ul class=""><li id="05d0" class="lk ll in jm b jn jo jr js jv lm jz ln kd lo kh lp lq lr ls bi translated"><code class="fe kw kx ky kz b">windowSplashScreenBackground</code>指定窗口背景</li><li id="b6b5" class="lk ll in jm b jn lt jr lu jv lv jz lw kd lx kh lp lq lr ls bi translated"><code class="fe kw kx ky kz b">windowSplashScreenAnimatedIcon</code>指定您想在屏幕上看到的图像。在 Android 11 和更低版本中，这里指定的图像是没有动画的，但是在 Android 12 和更高版本中，它有一个很好的动画，所以你可以使用一个推荐值为 1000 的可选属性<code class="fe kw kx ky kz b">windowSplashScreenAnimationDuration</code>来指定动画的持续时间。</li><li id="4481" class="lk ll in jm b jn lt jr lu jv lv jz lw kd lx kh lp lq lr ls bi translated"><code class="fe kw kx ky kz b">postSplashScreenTheme</code>指定 Splash 动作到期后应用程序预期使用的主题(通常是 AppTheme)</li></ul><p id="1455" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第三步:将主题添加到<code class="fe kw kx ky kz b">AndroidManifest.xml</code>文件中的清单<br/> </strong>中，将主题设置为整个应用程序或仅 MainActivity(或您的开始活动)。</p><pre class="kk kl km kn gt la kz lb bn lc ld bi"><span id="ee9b" class="le lf in kz b be lg lh l li lj">&lt;application<br/>    android:name=".MyApplication"<br/>    android:theme="@style/SplashScreenTheme"&gt; <br/><br/>                OR<br/><br/>&lt;activity <br/>    android:name=".MainActivity"<br/>    android:theme="@style/SplashScreenTheme"&gt;</span></pre><p id="4624" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第四步:安装闪屏<br/> </strong>在<code class="fe kw kx ky kz b">MainActivity.kt</code>文件中，调用扩展函数安装闪屏，就在调用<code class="fe kw kx ky kz b">super.onCreate(savedInstanceState)</code>之前</p><pre class="kk kl km kn gt la kz lb bn lc ld bi"><span id="65b0" class="le lf in kz b be lg lh l li lj">override fun onCreate(savedInstanceState: Bundle?) {<br/>    installSplashScreen()<br/>    super.onCreate(savedInstanceState)<br/>    setContentView(R.layout.activity_main)<br/>}</span></pre><p id="4aea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就这样，启动应用程序，你应该有一个很酷的闪屏，然后你应该有一个到你的应用程序的平滑过渡。正如我之前所说，好的一面是你可以在任何 Android API 级别上遵循这些相同的步骤</p></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><p id="7278" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">如果你的应用已经有了闪屏会怎样？<em class="ki"> <br/>嗯，有办法……</em></strong></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mf"><img src="../Images/86a5c4e0cb0bd8a28e1f38b6befd5f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uHB83TCn_HmehDq82CwMzA.png"/></div></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">闪屏棉绒警告</figcaption></figure><p id="c668" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我相信您一定已经在您现有的闪屏实现中看到过这一点。你可能决定抑制它并继续前进，但是如果你的应用程序安装在 Android 12 设备上，这种行为将是可怕的。但是不用担心，迁移到新的 API 非常容易，就像我们之前讨论的四个步骤一样简单。只要遵循这些步骤，就可以了！</p><p id="a6b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">除此之外，如果你的闪屏中有延迟机制——也许你正在从远程或本地存储器中提取一些数据，你必须调用闪屏对象上的<code class="fe kw kx ky kz b">setKeepOnScreenCondition</code>函数。</p><pre class="kk kl km kn gt la kz lb bn lc ld bi"><span id="056f" class="le lf in kz b be lg lh l li lj">override fun onCreate(savedInstanceState: Bundle?) {<br/>    val splashScreen = installSplashScreen()<br/>    super.onCreate(savedInstanceState)<br/>    setContentView(R.layout.activity_splash)<br/>    splashScreen.setKeepOnScreenCondition { true }<br/>    startJob()<br/>}</span></pre><p id="362e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这有助于保持初始屏幕打开，直到应用程序准备好启动下一个屏幕，同时也确保您可以平稳过渡到您的应用程序。</p><p id="50a0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">关于 SplashScreen API 的高级主题，你可以看看<a class="ae kv" href="https://developer.android.com/develop/ui/views/launch/splash-screen" rel="noopener ugc nofollow" target="_blank">官方文档</a>。</p><p id="e0c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢阅读！如果你有任何意见，请在评论区分享你的想法。也可以通过<a class="ae kv" href="https://twitter.com/mayorjay1" rel="noopener ugc nofollow" target="_blank"><em class="ki">Twitter</em></a><em class="ki"/>或者<a class="ae kv" href="https://www.linkedin.com/in/joseph-olugbohunmi/" rel="noopener ugc nofollow" target="_blank"><em class="ki">LinkedIn</em></a><em class="ki">联系我。</em></p></div></div>    
</body>
</html>