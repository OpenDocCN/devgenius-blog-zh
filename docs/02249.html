<html>
<head>
<title>Resources are Coming to Swift Packages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">资源正在流向 Swift 产品包</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/resources-are-coming-to-swift-packages-52e5f08ec7ad?source=collection_archive---------4-----------------------#2020-07-25">https://blog.devgenius.io/resources-are-coming-to-swift-packages-52e5f08ec7ad?source=collection_archive---------4-----------------------#2020-07-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/722672f429796ddcfb07b0c52ab3121b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Ca38BL7C5MRI0qsdAQT3Q.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="e090" class="pw-subtitle-paragraph jv ix iy bd b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dk translated">现在，您可以在 Xcode 12 中将资源添加到您的 swift 包中。这是什么意思？</h2></div><h1 id="1f7d" class="kn ko iy bd kp kq kr ks kt ku kv kw kx ke ky kf kz kh la ki lb kk lc kl ld le bi translated">介绍</h1><p id="4f3b" class="pw-post-body-paragraph lf lg iy lh b li lj jz lk ll lm kc ln lo lp lq lr ls lt lu lv lw lx ly lz ma ig bi translated">在我之前的一篇文章中，我提到过<a class="ae mb" href="https://medium.com/better-programming/how-swift-packages-changed-the-way-i-build-appsintroduction-fb4ade0f1cec" rel="noopener">SPM(Swift Package Manager)如何改变我构建和维护代码的方式</a>。我称赞了 Xcode 11 与 Swift 包的深度集成，以及创建巨大的模块化代码是多么容易。</p><p id="6f81" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">但这个“天堂”并不完美；缺少一样东西——向 Swift 包添加文件而不是代码的能力。您不能添加图像、数据文件，甚至是故事板。</p><p id="18a9" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">幸运的是，苹果在 Swift 5.3 和 Xcode 12 中做了一些改变。</p><h1 id="c0ea" class="kn ko iy bd kp kq kr ks kt ku kv kw kx ke ky kf kz kh la ki lb kk lc kl ld le bi translated">等等。Swift 包…提醒我一下？</h1><p id="3529" class="pw-post-body-paragraph lf lg iy lh b li lj jz lk ll lm kc ln lo lp lq lr ls lt lu lv lw lx ly lz ma ig bi translated">Swift 包是 Swift、Obj-c 或 C++库的一个可重用组件，您可以轻松地创建并在您的项目中共享。您可以在本地获得它，或者从专用的 git 存储库中获取它。Swift Package 不仅可以帮助您重用代码，还可以使您的项目更加模块化，并可以帮助您更好地管理您的测试。</p><h1 id="b2a6" class="kn ko iy bd kp kq kr ks kt ku kv kw kx ke ky kf kz kh la ki lb kk lc kl ld le bi translated">现在资源也是合法的公民</h1><p id="1e8e" class="pw-post-body-paragraph lf lg iy lh b li lj jz lk ll lm kc ln lo lp lq lr ls lt lu lv lw lx ly lz ma ig bi translated">人人平等！在 Xcode 12 中，您可以将资源添加到包中。什么类型的资源？基本上，你需要的任何东西，从图像，数据文件，故事板，甚至本地化文件。</p><p id="e381" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">添加资源非常简单——只需在项目导航器的 sources 文件夹下右键单击 package 文件夹，然后选择“New File ”:</p><figure class="mi mj mk ml gt ip gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/c36716b39e69357d0004cbe0f1cf6c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/0*i2fiGQ2O2yZTr8Wx"/></div></figure><p id="cf23" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">注意:注意不要点击你的包文件夹的根目录。您只能将代码或资源添加到我上面提到的文件夹中。</p><h1 id="80f0" class="kn ko iy bd kp kq kr ks kt ku kv kw kx ke ky kf kz kh la ki lb kk lc kl ld le bi translated">如何从代码中访问我的资源？</h1><p id="8ee9" class="pw-post-body-paragraph lf lg iy lh b li lj jz lk ll lm kc ln lo lp lq lr ls lt lu lv lw lx ly lz ma ig bi translated">好的，我们需要在这里做一些小的调整。</p><p id="f50d" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">比如说图像。</p><p id="da83" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">我们可以向包中添加资产目录。通常，要根据资产分配图像，我们应该这样做:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="392d" class="mr ko iy mn b gy ms mt l mu mv">let image = UIImage(named : “rightArrow”)</span></pre><p id="01c1" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">但是在一个不产生任何物质的包装里。这是因为我们的代码在主包中搜索图像。我们需要告诉 UIKit 在我们的模块包中搜索图像:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="f7cc" class="mr ko iy mn b gy ms mt l mu mv">let image = UIImage(named: "rightArrow", in: .module, compatibleWith: nil)</span></pre><p id="97ca" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">如您所见，从代码中访问资源需要提到模块包，否则，您将一无所获。</p><h1 id="8f4b" class="kn ko iy bd kp kq kr ks kt ku kv kw kx ke ky kf kz kh la ki lb kk lc kl ld le bi translated">就这样？我在下载 Xcode 12！</h1><p id="4023" class="pw-post-body-paragraph lf lg iy lh b li lj jz lk ll lm kc ln lo lp lq lr ls lt lu lv lw lx ly lz ma ig bi translated">等一下。我上面提到的内容与那些目的明确的文件相关，例如:</p><p id="c81e" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">故事板</p><p id="aa9c" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">-资产目录</p><p id="a869" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">- .xib 文件</p><p id="c035" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">- Xcdatamodel</p><p id="6e0d" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">- Xcmappingmodel</p><p id="6b6f" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">但是有些文件我们需要告诉 Xcode 如何处理它们——我们是在运行时需要这些文件，还是只在开发任务中需要它们？</p><p id="4454" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">例如，假设我们有一个不想与我们的包捆绑在一起的文档文件。</p><p id="5b7f" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">这里我们需要做的是用以下信息更新我们的包的清单文件:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="0192" class="mr ko iy mn b gy ms mt l mu mv">.target(name: "MyNewPacakge",</span><span id="6c55" class="mr ko iy mn b gy mw mt l mu mv">                dependencies: [],</span><span id="10f1" class="mr ko iy mn b gy mw mt l mu mv">                path: nil,</span><span id="0475" class="mr ko iy mn b gy mw mt l mu mv">                exclude: ["notes.txt"]),</span></pre><p id="6d3c" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">我们还可以添加一个要忽略的完整目录。它实际上非常类似于 Xcode 中 Target 下的“编译源代码”机制。</p><p id="77b3" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">如果您确实希望将文件视为资源，请将其添加到软件包清单文件中目标的 resources 部分:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="2a40" class="mr ko iy mn b gy ms mt l mu mv">.target(name: "MyNewPacakge",</span><span id="bdd0" class="mr ko iy mn b gy mw mt l mu mv">                dependencies: [],</span><span id="3d63" class="mr ko iy mn b gy mw mt l mu mv">                path: nil,</span><span id="3f70" class="mr ko iy mn b gy mw mt l mu mv">                exclude: ["notes.txt"],</span><span id="c0ed" class="mr ko iy mn b gy mw mt l mu mv">                resources:[.process("myImage.png")]),</span></pre><h1 id="a30e" class="kn ko iy bd kp kq kr ks kt ku kv kw kx ke ky kf kz kh la ki lb kk lc kl ld le bi translated">好，那么这将如何改变游戏？</h1><p id="ea01" class="pw-post-body-paragraph lf lg iy lh b li lj jz lk ll lm kc ln lo lp lq lr ls lt lu lv lw lx ly lz ma ig bi translated">想想所有摆在你面前的选择。</p><p id="9fd2" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">-核心数据持久层-核心数据初始化过程需要数据模型，因此创建数据层几乎是不可能的。但是现在，添加 xcdatamodel 文件是一项简单的任务。这一点尤其重要，因为数据层是一个低级层，通常是更高级包的依赖项。</p><p id="2e54" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">- UI 组件包-UI 组件有时包含图像并依赖于 xib 文件。现在，您可以在项目中共享您的组件。</p><p id="59f1" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">-视图控制器-如果您有一个特殊的文件选择器或一个想要重用的自定义模态屏幕，现在您可以将其捆绑到一个包中，因为您已经有了它所需要的东西，无论是故事板还是 xib 文件。</p><p id="34c8" class="pw-post-body-paragraph lf lg iy lh b li mc jz lk ll md kc ln lo me lq lr ls mf lu lv lw mg ly lz ma ig bi translated">-本地化——既然我们可以共享视图控制器，我们需要本地化它们，对吗？lproj 文件可以很容易地添加到包中，没有时间。</p><h1 id="3872" class="kn ko iy bd kp kq kr ks kt ku kv kw kx ke ky kf kz kh la ki lb kk lc kl ld le bi translated">摘要</h1><p id="36e0" class="pw-post-body-paragraph lf lg iy lh b li lj jz lk ll lm kc ln lo lp lq lr ls lt lu lv lw lx ly lz ma ig bi translated">苹果正在推动 Swift 包成为你的项目的基本单位。随着 Swift 软件包越来越受欢迎，它们包含资源是很自然的事情。SPM 与 Xcode 12 的集成以及这一新功能使 Swift Packages Manager 成为一款真正出色的工具。</p></div></div>    
</body>
</html>