<html>
<head>
<title>pygraphviz and other python 3 Packages Missing Error when building ns-3 with Bake on Ubuntu</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Ubuntu上使用Bake构建ns-3时，pygraphviz和其他python 3包丢失错误</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/pygraphviz-or-other-python3-packages-missing-error-on-ubuntu-when-building-ns-3-with-bake-f97177502de0?source=collection_archive---------4-----------------------#2022-01-07">https://blog.devgenius.io/pygraphviz-or-other-python3-packages-missing-error-on-ubuntu-when-building-ns-3-with-bake-f97177502de0?source=collection_archive---------4-----------------------#2022-01-07</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><p id="06b4" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">注意:我现在使用的是Ubuntu 18.04，但我认为这将适用于任何版本的Ubuntu，因为所有的Linux操作系统似乎都支持符号链接，而且这是一个非常老的特性。</p><p id="d98d" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">先决条件:</p><p id="e25f" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">我已经安装了烘焙，并且正在使用</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="ac59" class="kv kw ir kr b gz kx ky l kz la">bake.py show </span></pre><p id="2206" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">向我展示我是否拥有ns-3所需的所有依赖项</p><p id="b251" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">好了，下面是完整的错误信息:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="1c3f" class="kv kw ir kr b gz kx ky l kz la">bake.py show<br/>module: setuptools (enabled)<br/>  No dependencies!<br/>module: python3-setuptools (enabled)<br/>  No dependencies!<br/>module: gi-cairo (enabled)<br/>  No dependencies!<br/>module: gir-bindings (enabled)<br/>  No dependencies!<br/>module: pygobject (enabled)<br/>  No dependencies!<br/>module: pygraphviz (enabled)<br/>  No dependencies!<br/>module: python3-dev (enabled)<br/>  No dependencies!<br/>module: python-dev (enabled)<br/>  No dependencies!<br/>module: qt (enabled)<br/>  No dependencies!<br/>module: g++ (enabled)<br/>  No dependencies!<br/>module: mercurial (enabled)<br/>  No dependencies!<br/>module: pybindgen (enabled)<br/>  depends on:<br/>     python3-dev (optional:True)<br/>     python3-setuptools (optional:False)<br/>module: pyviz-gtk3-prerequisites (enabled)<br/>  depends on:<br/>     python3-dev (optional:True)<br/>     pygraphviz (optional:True)<br/>     pygobject (optional:True)<br/>     gi-cairo (optional:True)<br/>     gir-bindings (optional:True)<br/>module: netanim-3.108 (enabled)<br/>  depends on:<br/>     qt (optional:False)<br/>     g++ (optional:False)<br/>module: netanim (enabled)<br/>  depends on:<br/>     qt (optional:False)<br/>     g++ (optional:False)<br/>module: pybindgen-0.19.0.post4+ng823d8b2 (enabled)<br/>  depends on:<br/>     python-dev (optional:True)<br/>     setuptools (optional:False)<br/>module: pybindgen-0.22.0 (enabled)<br/>  depends on:<br/>     python3-dev (optional:True)<br/>     setuptools (optional:False)<br/>module ns: ns-3.29 (enabled)<br/>  depends on:<br/>     netanim-3.108 (optional:True)<br/>     pybindgen-0.19.0.post4+ng823d8b2 (optional:True)<br/>     pyviz-gtk3-prerequisites (optional:True)<br/>     mercurial (optional:False)<br/>module: ns-3-dev (enabled)<br/>  depends on:<br/>     netanim (optional:True)<br/>     pybindgen (optional:True)<br/>     pyviz-gtk3-prerequisites (optional:True)<br/>module ns: ns-3.34 (enabled)<br/>  depends on:<br/>     netanim-3.108 (optional:True)<br/>     pybindgen-0.22.0 (optional:True)<br/>     pyviz-gtk3-prerequisites (optional:True)</span><span id="be03" class="kv kw ir kr b gz lb ky l kz la">-- System Dependencies --<br/> &gt; g++ - OK<br/> &gt; gi-cairo - OK<br/> &gt; gir-bindings - OK<br/> &gt; mercurial - OK<br/> &gt; pygobject - OK<br/> &gt; pygraphviz - Missing<br/>   &gt;&gt; The pygraphviz is not installed, try to install it.<br/>   &gt;&gt; Try: "sudo apt-get install python3-pygraphviz", if you have sudo rights.<br/> &gt; python-dev - OK<br/> &gt; python3-dev - OK<br/> &gt; python3-setuptools - OK<br/> &gt; qt - OK<br/> &gt; setuptools - OK</span></pre><p id="122e" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">基本上这已经很多了，但这是最重要的部分:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="ae87" class="kv kw ir kr b gz kx ky l kz la">&gt; pygraphviz - Missing<br/>   &gt;&gt; The pygraphviz is not installed, try to install it.<br/>   &gt;&gt; Try: "sudo apt-get install python3-pygraphviz", if you have</span></pre><p id="00f5" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">好吧，那么做他们建议的事情，他们显示以上表明，我已经安装了它:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="d82d" class="kv kw ir kr b gz kx ky l kz la">Reading package lists... Done<br/>Building dependency tree       <br/>Reading state information... Done<br/>python3-pygraphviz is already the newest version (1.4~rc1-1build2.1).<br/>The following packages were automatically installed and are no longer required:<br/>  efibootmgr fonts-liberation2 fonts-opensymbol gir1.2-geocodeglib-1.0<br/>  gir1.2-gst-plugins-base-1.0 gir1.2-gstreamer-1.0 gir1.2-gudev-1.0 gir1.2-udisks-2.0<br/>  grilo-plugins-0.3-base gstreamer1.0-gtk3 libcdr-0.1-1 libclucene-contribs1v5<br/>  libclucene-core1v5 libcmis-0.5-5v5 libcolamd2 libdazzle-1.0-0 libe-book-0.1-1<br/>  libedataserverui-1.2-2 libegl1-mesa libeot0 libepubgen-0.1-1 libetonyek-0.1-1<br/>  libevent-2.1-6 libexiv2-14 libfreerdp-client2-2 libfreerdp2-2 libfwup1 libgee-0.8-2<br/>  libgexiv2-2 libgom-1.0-0 libgpgmepp6 libgpod-common libgpod4 liblangtag-common<br/>  liblangtag1 liblirc-client0 libllvm8 liblua5.3-0 libmediaart-2.0-0 libmspub-0.1-1<br/>  libodfgen-0.1-1 libqqwing2v5 libraw16 librevenge-0.0-0 libsgutils2-2 libssh-4<br/>  libsuitesparseconfig5 libvncclient1 libwayland-egl1-mesa libwinpr2-2 libxapian30<br/>  libxmlsec1 libxmlsec1-nss lp-solve media-player-info python3-mako syslinux<br/>  syslinux-common syslinux-legacy usb-creator-common<br/>Use 'sudo apt autoremove' to remove them.<br/>0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.</span></pre><p id="6c76" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">基本上就是说我已经安装了，0安装了，0升级了，所以我已经安装了，所以基本上就是说我已经安装了，但是bake就是找不到。</p><p id="7a80" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">在你的bake目录的根目录下有一个名为bakeconf.xml的文件。打开它并搜索pygraphviz，你会看到如下内容:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="feb4" class="kv kw ir kr b gz kx ky l kz la">&lt;module name="pygraphviz"&gt;<br/>      &lt;source type="system_dependency"&gt;<br/>        &lt;attribute name="dependency_test" value="(_gv.so or _graphviz.so or _graphviz.x86_64-linux-gnu.so or _graphviz.cpython-38-x86_64-linux-gnu.so or _graphviz.cpython-39-x86_64-linux-gnu.so or _graphviz.cpython-36m-x86_64-linux-gnu.so or /usr/lib/python3/dist-packages/pygraphviz/_graphviz.cpython-36m-x86_64-linux-gnu.so)"/&gt;<br/>        &lt;attribute name="name_apt-get" value="python3-pygraphviz"/&gt;<br/>        &lt;attribute name="name_yum" value="python3-pygraphviz"/&gt;<br/>        &lt;attribute name="more_information" value="The pygraphviz is not installed, try to install it."/&gt;<br/>      &lt;/source&gt;<br/>      &lt;build type="none" objdir="no"&gt;<br/>      &lt;/build&gt;<br/>    &lt;/module&gt;</span></pre><p id="ab17" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">在这个属性中,“dependency_test”是我们所关心的。上面有我们要找的文件的名字。我试图将路径硬编码到。所以在pygraphviz文件夹里。</p><p id="c2f3" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">顺便说一下，那个文件夹在这里:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="07fb" class="kv kw ir kr b gz kx ky l kz la">/usr/lib/python3/dist-packages/pygraphviz</span></pre><p id="ace9" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">在该文件夹中执行“ls -halp ”,您将看到:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="89b6" class="kv kw ir kr b gz kx ky l kz la">drwxr-xr-x   4 root root 4.0K Jan  6 12:51 ./<br/>drwxr-xr-x 151 root root  12K Jan  6 12:16 ../<br/>-rw-r--r--   1 root root  58K Nov  6  2016 agraph.py<br/>-rw-r--r--   1 root root  67K Jun 27  2019 _graphviz.cpython-36m-x86_64-linux-gnu.so<br/>-rw-r--r--   1 root root 7.9K Nov  6  2016 graphviz.i<br/>-rw-r--r--   1 root root 8.7K Nov  6  2016 graphviz.py<br/>-rw-r--r--   1 root root 187K Nov  6  2016 graphviz_wrap.c<br/>-rw-r--r--   1 root root 1.8K Nov  6  2016 __init__.py<br/>drwxr-xr-x   2 root root 4.0K Jan  5 18:06 __pycache__/<br/>-rw-r--r--   1 root root 4.1K Nov  6  2016 release.py<br/>drwxr-xr-x   3 root root 4.0K Jan  5 18:06 tests/<br/>-rw-r--r--   1 root root  198 Nov  6  2016 version.py</span></pre><p id="51d1" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">所以事情是这样的。我尝试编辑bakeconf.xml文件，使其具有我的特殊文件名。所以你在上面的文件夹中看到的文件，但它不起作用，我不知道如何让bake刷新并使用更新的配置文件，所以我只是在bakeconf.xml文件中查看它:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="5caf" class="kv kw ir kr b gz kx ky l kz la">&lt;attribute name="dependency_test" value="(_gv.so or _graphviz.so or _graphviz.x86_64-linux-gnu.so or _graphviz.cpython-38-x86_64-linux-gnu.so or _graphviz.cpython-39-x86_64-linux-gnu.so)"/&gt;</span></pre><p id="92a2" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">看，它在找一个有这些名字的文件。所以我决定用它正在寻找的指向我的文件的名字做一个符号链接。所以文件中包含pygraphviz)</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="d23c" class="kv kw ir kr b gz kx ky l kz la">cd /usr/lib/python3/dist-packages/pygraphviz/<br/>sudo ln -s _graphviz.cpython-36m-x86_64-linux-gnu.so _graphviz.so</span></pre><p id="6ae7" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">现在，当我在pygraphviz文件夹中使用“ls -halp”时，我会看到:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="f0cc" class="kv kw ir kr b gz kx ky l kz la">drwxr-xr-x   4 root root 4.0K Jan  6 12:51 ./<br/>drwxr-xr-x 151 root root  12K Jan  6 12:16 ../<br/>-rw-r--r--   1 root root  58K Nov  6  2016 agraph.py<br/>-rw-r--r--   1 root root  67K Jun 27  2019 _graphviz.cpython-36m-x86_64-linux-gnu.so<br/>-rw-r--r--   1 root root 7.9K Nov  6  2016 graphviz.i<br/>-rw-r--r--   1 root root 8.7K Nov  6  2016 graphviz.py<br/><strong class="kr is">lrwxrwxrwx   1 root root   41 Jan  6 12:51 _graphviz.so -&gt; _graphviz.cpython-36m-x86_64-linux-gnu.so</strong><br/>-rw-r--r--   1 root root 187K Nov  6  2016 graphviz_wrap.c<br/>-rw-r--r--   1 root root 1.8K Nov  6  2016 __init__.py<br/>drwxr-xr-x   2 root root 4.0K Jan  5 18:06 __pycache__/<br/>-rw-r--r--   1 root root 4.1K Nov  6  2016 release.py<br/>drwxr-xr-x   3 root root 4.0K Jan  5 18:06 tests/<br/>-rw-r--r--   1 root root  198 Nov  6  2016 version.py</span></pre><p id="d037" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">请注意，我加粗了符号链接。那个小小的“-&gt;”字符表示我的链接指向我想要它指向的文件。</p><p id="d1bd" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">基本上是这样的:</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="4ff5" class="kv kw ir kr b gz kx ky l kz la">link_name -&gt; actual_file_pointed_to</span></pre><p id="d76d" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">好了，现在当你运行bake.py show时，你应该看到它找到了pygraphviz</p><pre class="km kn ko kp gu kq kr ks kt aw ku bi"><span id="bbc4" class="kv kw ir kr b gz kx ky l kz la">-- System Dependencies --<br/> &gt; g++ - OK<br/> &gt; gi-cairo - OK<br/> &gt; gir-bindings - OK<br/> &gt; mercurial - OK<br/> &gt; pygobject - OK<br/> &gt; pygraphviz - OK<br/> &gt; python-dev - OK<br/> &gt; python3-dev - OK<br/> &gt; python3-setuptools - OK<br/> &gt; qt - OK<br/> &gt; setuptools - OK</span></pre><p id="38db" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">就是这样！！</p><p id="762a" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">这实际上是一个pull请求，他们在bake源代码中修复了这个问题:</p><div class="lc ld gq gs le lf"><a href="https://gitlab.com/nsnam/bake/-/merge_requests/8/diffs" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab fp"><div class="lh ab li cl cj lj"><h2 class="bd is gz z fq lk fs ft ll fv fx iq bi translated">修复了pyviz(！8)合并请求nsnam / bake</h2><div class="lm l"><h3 class="bd b gz z fq lk fs ft ll fv fx dk translated">署名:帕斯·普拉蒂姆·查特吉·parth27official@gmail.com感谢@汤姆·亨德森先生指出…</h3></div><div class="ln l"><p class="bd b dl z fq lk fs ft ll fv fx dk translated">gitlab.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt lu lf"/></div></div></a></div><p id="73e5" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">但是，如果你看，你可以看到它是为Python 3.8或什么，也可能我没有这个修复进入的bake版本或什么。但是，看看他们的修复和他们是如何做到的，这应该足以说明烘焙基本上在做什么。</p><p id="226a" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">即使你的问题和我的不完全一样，我想通过阅读这篇文章，你应该能够编辑bakeconf.xml或者使用符号链接来解决你的问题。</p><p id="978a" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">如果你不介意花时间，请评论你的解决方案，它可能会帮助其他人解决类似的问题，如果你认为它会帮助某人，请随时链接到相关Github问题中的这篇文章。</p><p id="627a" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">谢谢，</p><p id="ff66" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">阿什利·塔普</p></div></div>    
</body>
</html>