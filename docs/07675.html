<html>
<head>
<title>DCA Trading Bot in Julia and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Julia 和 Python 中的 DCA 交易机器人</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/dca-trading-bot-in-julia-and-python-3efe9422ccc3?source=collection_archive---------5-----------------------#2022-04-14">https://blog.devgenius.io/dca-trading-bot-in-julia-and-python-3efe9422ccc3?source=collection_archive---------5-----------------------#2022-04-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f1ae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可能已经知道，Ycash 是我选择的加密货币。对我来说，最大的困难之一是，“对 YEC 来说，什么价格比较合适？”。在我开采出第一枚硬币的两年里，价格几乎是无处不在。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6e58e08d2809a3e220bf96e95566dc34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FbGCu-P6zPL1gOP0HaPsjg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由 CoinGecko 提供</figcaption></figure><p id="01c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了应对这样的波动，许多人使用 DCA(美元成本平均)策略，这就是我今天要做的。首先，我需要几样东西:一个交易账户、BTC、python3、pip 和 Julia。我将使用的交换称为<a class="ae ky" href="https://main.southxchange.com/" rel="noopener ugc nofollow" target="_blank">south exchange</a>，有几个第三方 API 可用于连接，这将使项目更加容易。在运行任何一个机器人之前，确保你在你的账户中添加了一些 BTC，如果余额为空，我们的机器人将会崩溃(我们将在另一篇文章中解决这个问题)。接下来我需要 python3 和 Julia。我不需要最新版本的 python，Ubuntu 的默认版本就可以了。在终端输入“python3”启动 python，告诉我我用的是哪个版本。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/be6a43da715a3b8cc3cf1c775f9446b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1348/format:webp/1*otUuAHgL1-HFGGWY6MJLzA.png"/></div></figure><p id="0555" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">380 万就足够了。接下来，我需要访问 SouthXchange API。Github 用户 alimogh 在 https://github.com/alimogh/Southxchange<a class="ae ky" href="https://github.com/alimogh/Southxchange" rel="noopener ugc nofollow" target="_blank">为我们提供了这个。这使得从我们的命令行与交换交互变得非常容易。</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi la"><img src="../Images/6468c09f93515da157864970da4df1ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*xwOafTLPBatZ1-Ru4iry0w.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/535030b33c13c5d415bb4f6fe66cd4db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*3e_2V6B29vFgNjZ8h0sUBQ.png"/></div></figure><p id="03d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们安装朱莉娅<a class="ae ky" href="https://julialang.org/downloads/" rel="noopener ugc nofollow" target="_blank">https://julialang.org/downloads/</a>。获取最新的稳定版本，并按照特定操作系统的说明进行操作。</p><p id="da42" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第 1 部分:Python 机器人</p><p id="f8b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们将在文本编辑器中创建一个名为“bot.py”的文件来启动 python bot，并添加一些代码。没什么，只是我们的基本依赖和我们的 API 交换密钥。您可以通过登录并单击设置嵌齿轮并选择“私有 API 密钥”来生成这些。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/12ba46fa0ecb27096c6848a4ca446326.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*sncRYmQpOpEOi8H85bDeKw.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/854d7d5a28d166477c4721ef6551bdc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*_cgsGlfOi6WWVdByti4h1g.png"/></div></figure><p id="5410" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将添加几行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi le"><img src="../Images/27101786e4078dfdb369e9fe8934007d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*cyClhfeZbplGSKDB-kH3pw.png"/></div></figure><p id="6a98" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将节省我们稍后在脚本中输入的时间。现在添加我们的策略。这很简单，买一辆 YEC，等一个小时，再买一辆 YEC。</p><p id="90ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将从测试目前已有的代码开始，以确保它能正常工作。让我们添加另一行来检查我们的余额。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lf"><img src="../Images/d04773372241d1f5c21d7f2c734f92f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0GLR7D7CmNCLwxAAm4AhEQ.png"/></div></div></figure><p id="a83b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我运行文件，然后…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lg"><img src="../Images/99a7f3174270948019c669bd4e31538e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*03mQPSjz6Wio-fE6hY8PZQ.png"/></div></div></figure><p id="0479" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">成功！！！</p><p id="6d3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来是添加购买代码的时候了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/51537237a6fe3961e36e53db318dea27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*ojsGGdThgCNVr-m6h3wEdQ.png"/></div></figure><p id="e135" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">运行代码…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi li"><img src="../Images/590bdc57f6fb75f90faf79d2e5a7f6e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FgV7h-Qs8OfwpaSqm4eZGA.png"/></div></div></figure><p id="81bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们得到一个错误。这是因为我们同时提出了太多的要求。让我们告诉我们的机器人要有耐心，在请求之间打个盹。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lj"><img src="../Images/c725e1656e9f009213fc8667f36bba6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6YCHTsYFhCQO3Um4DV2Oow.png"/></div></div></figure><p id="ddbc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">运行它…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lk"><img src="../Images/855796e9948e823383cc6b981314160a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Et3Xf4XCthtXZUDUtTu8w.png"/></div></div></figure><p id="5f27" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码运行，但是我们有另一个问题。正如您在第一个 JSON 字符串中看到的，它正在获得我们的平衡，但是如果您看一下底部附近的空括号，我们应该在这里列出订单，但是没有订单。我们需要为我们的订单增加一个价格。为此，我们将对底部的购买代码进行一些更改。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ll"><img src="../Images/696f254b3449f1d48060dc32b3c5c9ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xeSWO12RTf2RKUCamGxCAA.png"/></div></div></figure><p id="e248" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这张图片是经过几次测试后的，但是正如你所看到的，我们的 YEC 天平现在更高了。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lm"><img src="../Images/7f2c872a13c42e1e90e43ccd7a9e50bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqNHA_H28AWhLlfKBRTVCw.png"/></div></div></figure><p id="7a9b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的购买功能现在起作用了。现在是时候把这个东西放在一个无限循环上，并且把购买间隔一个小时。让我们将底部的“buy()”替换为…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/3f2e789e85ffe9eccf14dcfa9c3b63b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zkQ0bZYbW6Vu2Mm5f4J8Gg.png"/></div></div></figure></div><div class="ab cl lo lp hr lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ig ih ii ij ik"><p id="fac2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第二部分:朱莉娅机器人</p><p id="2529" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建新文件的时间到了。我们姑且称这个为“bot.jl”。我们将从几行代码开始…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/4b6008ef9ac2aafeb105b0262cb988f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N8ir0XmE57jHwssqJUTlLQ.png"/></div></div></figure><p id="5c96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以在 Julia 中，导入的方式略有不同。首先我们导入包管理器，然后我们使用函数下载依赖项。一旦我们的包被安装，我们可以用关键字“using”来声明它们。接下来因为我们的 API 是用 python 写的，所以需要使用 PyCall。这是一个令人难以置信的漂亮的小工具…嗯，无论如何都不小，但你得到的想法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lj"><img src="../Images/e935fa4636c6627dad05d156c1db4525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ta-Sb8i4kTTZvxDtWIpCWw.png"/></div></div></figure><p id="b237" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">眼熟吗？所以这里有一些小的区别需要注意。首先是使用“pyimport()”函数。您可能已经猜到了，pyimport 允许我们调用 python 函数。你应该注意的下一个区别是双引号的使用。在 Julia 中，所有字符串都用双引号括起来。是时候添加几个函数来显示余额和价格，让我们知道我们的代码正在工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lv"><img src="../Images/afd30fa7856b8ff837f91495eef65979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5OXQvguiz8szb2xY5jVeeQ.png"/></div></div></figure><p id="3208" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意函数声明方式的不同。我们使用关键字“function”来声明它们。我们没有添加“:”，而是简单地开始一个新行来开始函数体。然后我们用关键字“end”关闭函数。</p><p id="5da6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">运行它，你应该会得到类似这样的东西</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lw"><img src="../Images/1f77d76f1212861c3aef94fc6eabc127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*73TY777D38pIjczjFP0aZA.png"/></div></div></figure><p id="6ca6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在第一次运行时，您应该注意到启动很慢，这是因为我们的程序在运行脚本时正在编译。</p><p id="018b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在你第一次跑步之后，这真的不会再需要很长时间了。当脚本运行时，由于这些“Pkg.add()”函数，它将在每次运行脚本时自动更新。将来，这将很方便，因为它将在编译时保持较轻的负载。如果你不想在第一次运行后一直坐着，你可以去掉“Pkg.add()”语句，但我会把它们留在这里。我喜欢自动更新。现在让我们添加购买代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/37b44a49ff8cf158e123b353a5526045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8Zb0dPUzwNS2noCU88alg.png"/></div></div></figure><p id="4ae2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">运行它并…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ly"><img src="../Images/0d8b140cf18c77bdc02dce99cfd0bbab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FEZ3FO-bOHahI_Y84LSf2Q.png"/></div></div></figure><p id="58dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的“YEC”存款余额更高。我们现在有了一个功能机器人。今天就到这里，你可以在这里找到我们新机器人<a class="ae ky" href="https://github.com/nultinator/dca_bot" rel="noopener ugc nofollow" target="_blank"/><a class="ae ky" href="https://github.com/nultinator/dca_bot" rel="noopener ugc nofollow" target="_blank">的完整源代码。</a></p><p id="d9d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将做一些改进。</p></div></div>    
</body>
</html>