<html>
<head>
<title>Lazy components in Jetpack Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jetpack 中的惰性组件构成</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/lazy-component-in-jetpcak-compose-a21965e17671?source=collection_archive---------8-----------------------#2022-07-14">https://blog.devgenius.io/lazy-component-in-jetpcak-compose-a21965e17671?source=collection_archive---------8-----------------------#2022-07-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e5b6b1e1a8e0b292474916e54dcc0376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k-Qlklwe4hxVs3rITNZSAQ.png"/></div></div></figure><p id="8f7a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">与 Jetpack Compose 中的<em class="kt"> RecyclerView </em>或<em class="kt"> ListView </em>等效的组件是垂直列表的<strong class="jx io"> LazyColumn </strong>和水平列表的<strong class="jx io"> LazyRow </strong>。</p><p id="0207" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">阅读这篇文章，看看 3 种不同的设计:</p><p id="5431" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我以 MovieData 类的形式提供了来自 IMDB 网站的虚假数据列表:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="7828" class="ld le in kz b gy lf lg l lh li">sealed class MovieData(<br/>    val image: Int,<br/>    val name: String,<br/>    val imdb: String,<br/>    val stars: String,<br/>) {<br/>    object Movie1 : MovieData(<br/>        image = R.drawable.<em class="kt">one</em>,<br/>        name = "The Terminal List",<br/>        imdb = "8.2",<br/>        stars = "Chris Pratt - Constance Wu -Taylor Kitsch"<br/>    )<br/><br/>    object Movie2 : MovieData(<br/>        image = R.drawable.<em class="kt">two</em>,<br/>        name = "Minions: The Rise of Gru",<br/>        imdb = "7",<br/>        stars = "Steve Carell(voice) - Pierre Coffin(voice) - Alan Arkin(voice)"<br/>    )<br/><br/>    object Movie3 : MovieData(<br/>        image = R.drawable.<em class="kt">three</em>,<br/>        name = "Thor: Love and Thunder",<br/>        imdb = "6.9",<br/>        stars = "Chris Hemsworth - Natalie Portman - Christian Bale"<br/>    )<br/><br/>    object Movie4 : MovieData(<br/>        image = R.drawable.<em class="kt">four</em>,<br/>        name = "Top Gun: Maverick",<br/>        imdb = "8.6",<br/>        stars = "Tom Cruise - Jennifer Connelly - Miles Teller"<br/>    )<br/><br/>    object Movie5 : MovieData(<br/>        image = R.drawable.<em class="kt">five</em>,<br/>        name = "Peaky Blinders",<br/>        imdb = "8.8",<br/>        stars = "Cillian Murphy - Paul Anderson - Sophie Rundle"<br/>    )<br/><br/>    object Movie6 : MovieData(<br/>        image = R.drawable.<em class="kt">six</em>,<br/>        name = "Everything Everywhere All at Once",<br/>        imdb = "8.2",<br/>        stars = "Michelle Yeoh - Stephanie Hsu - Ke Huy Quan"<br/>    )<br/><br/>    object Movie7 : MovieData(<br/>        image = R.drawable.<em class="kt">seven</em>,<br/>        name = "Better Call Saul",<br/>        imdb = "8.8",<br/>        stars = "Bob Odenkirk - Rhea Seehorn - Jonathan Banks"<br/>    )<br/><br/>    object Movie8 : MovieData(<br/>        image = R.drawable.<em class="kt">eighth</em>,<br/>        name = "Breaking Bad",<br/>        imdb = "9.5",<br/>        stars = "Bryan Cranston - Aaron Paul - Anna Gunn"<br/>    )<br/>}</span></pre><ul class=""><li id="c5de" class="lj lk in jx b jy jz kc kd kg ll kk lm ko ln ks lo lp lq lr bi translated"><strong class="jx io">首次设计:LazyColumn </strong></li></ul><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/7ededee2369515830c36dc20ed71d727.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*eyyrmc_CG6sQxUu8azyoMA.png"/></div></figure><p id="db94" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了创建上述设计，首先您应该定义每个项目模式:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="a466" class="ld le in kz b gy lf lg l lh li">@Composable<br/>fun MovieItem(movieData: MovieData){<br/>    <em class="kt">Card</em>(elevation = 5.<em class="kt">dp</em>,<br/>        modifier = Modifier<br/>            .<em class="kt">border</em>(width = 3.<em class="kt">dp</em>, color = Color.White, shape = <em class="kt">RoundedCornerShape</em>(20.<em class="kt">dp</em>))<br/>            .<em class="kt">padding</em>(top = 8.<em class="kt">dp</em>, bottom = 8.<em class="kt">dp</em>, start = 8.<em class="kt">dp</em>, end = 8.<em class="kt">dp</em>)<br/>            .<em class="kt">requiredHeight</em>(100.<em class="kt">dp</em>)) <strong class="kz io">{<br/>        </strong><em class="kt">Row</em>() <strong class="kz io">{<br/>            </strong><em class="kt">Column</em>(modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, start = 10.<em class="kt">dp</em>)) <strong class="kz io">{<br/>                </strong><em class="kt">Image</em>(painter = <em class="kt">painterResource</em>(id = movieData.image), contentDescription = movieData.name,<br/>                    contentScale = ContentScale.Crop,<br/>                    modifier = Modifier<br/>                        .<em class="kt">size</em>(80.<em class="kt">dp</em>)<br/>                        .<em class="kt">clip</em>(<em class="kt">CircleShape</em>)<br/>                        .<em class="kt">border</em>(width = 2.<em class="kt">dp</em>, color = Color.Gray, shape = <em class="kt">CircleShape</em>)<br/>                        .<em class="kt">padding</em>(top = 2.<em class="kt">dp</em>))<br/>            <strong class="kz io">}<br/>            </strong><em class="kt">Column</em>(modifier = Modifier<br/>                .<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, start = 8.<em class="kt">dp</em>)<br/>                .<em class="kt">weight</em>(1.0f)) <strong class="kz io">{<br/>                </strong><em class="kt">Text</em>(text = movieData.name, fontWeight = FontWeight.Bold, fontSize = 18.<em class="kt">sp</em>)<br/>                <em class="kt">Text</em>(text = movieData.stars, fontSize = 16.<em class="kt">sp</em>)<br/>            <strong class="kz io">}<br/>            </strong><em class="kt">Column</em>(modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, end = 8.<em class="kt">dp</em>)) <strong class="kz io">{<br/>                </strong><em class="kt">Text</em>(text = movieData.imdb, fontWeight = FontWeight.Bold, fontSize = 16.<em class="kt">sp</em>)<br/>                <em class="kt">Image</em>(imageVector = Icons.Outlined.<em class="kt">StarOutline</em>, contentDescription = "Star",<br/>                    modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>))<br/>            <strong class="kz io">}<br/>        }<br/>    }<br/></strong>}</span></pre><p id="ffd5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在从伪数据(MovieData 类)中确定一个电影列表，并使用 LazyColumn 在垂直列表中显示它们:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="32a2" class="ld le in kz b gy lf lg l lh li">@Composable<br/>fun MovieList(){<br/>    val movieListData = <em class="kt">listOf</em>(MovieData.Movie1, MovieData.Movie2,<br/>        MovieData.Movie3,MovieData.Movie4,<br/>        MovieData.Movie5, MovieData.Movie6,<br/>        MovieData.Movie7, MovieData.Movie8)<br/><br/>    <em class="kt">Box</em>() <strong class="kz io">{<br/>        </strong><em class="kt">LazyColumn</em>(modifier = Modifier<br/>            .<em class="kt">fillMaxSize</em>()<br/>            .<em class="kt">padding</em>(8.<em class="kt">dp</em>))<strong class="kz io">{<br/>            </strong><em class="kt">items</em>(movieListData)<strong class="kz io">{<br/>                </strong>movieItem <strong class="kz io">-&gt; </strong><em class="kt">MovieItem</em>(movieData = movieItem)<br/>            <strong class="kz io">}<br/>        }<br/>    }<br/></strong>}</span></pre><ul class=""><li id="58de" class="lj lk in jx b jy jz kc kd kg ll kk lm ko ln ks lo lp lq lr bi translated"><strong class="jx io">第二:LazyRow: </strong></li></ul><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/93661564d498e312f8a186efb893d369.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*_trS_6KSgKfz3o7IwFyQzA.png"/></div></figure><p id="206d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要实现这样的设计，首先你需要设计每个项目:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="99bd" class="ld le in kz b gy lf lg l lh li">@Composable<br/>fun MovieItemRow(movieData: MovieData){<br/>    <em class="kt">Card</em>(elevation = 5.<em class="kt">dp</em>,<br/>        modifier = Modifier<br/>            .<em class="kt">border</em>(width = 3.<em class="kt">dp</em>, color = Color.White, shape = <em class="kt">RoundedCornerShape</em>(20.<em class="kt">dp</em>))<br/>            .<em class="kt">padding</em>(top = 8.<em class="kt">dp</em>, bottom = 8.<em class="kt">dp</em>, start = 8.<em class="kt">dp</em>, end = 8.<em class="kt">dp</em>)<br/>            .<em class="kt">requiredHeight</em>(250.<em class="kt">dp</em>)<br/>            .<em class="kt">requiredWidth</em>(150.<em class="kt">dp</em>)) <strong class="kz io">{<br/>        </strong><em class="kt">Column</em>() <strong class="kz io">{<br/>            </strong><em class="kt">Row</em>() <strong class="kz io">{<br/>                </strong><em class="kt">Column</em>(modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, start = 10.<em class="kt">dp</em>)) <strong class="kz io">{<br/>                    </strong><em class="kt">Image</em>(painter = <em class="kt">painterResource</em>(id = movieData.image), contentDescription = movieData.name,<br/>                        contentScale = ContentScale.Crop,<br/>                        modifier = Modifier<br/>                            .<em class="kt">size</em>(80.<em class="kt">dp</em>)<br/>                            .<em class="kt">clip</em>(<em class="kt">CircleShape</em>)<br/>                            .<em class="kt">border</em>(width = 2.<em class="kt">dp</em>, color = Color.Gray, shape = <em class="kt">CircleShape</em>)<br/>                            .<em class="kt">padding</em>(top = 2.<em class="kt">dp</em>))<br/>                <strong class="kz io">}<br/><br/>                </strong><em class="kt">Column</em>(modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, start = 16.<em class="kt">dp</em>)) <strong class="kz io">{<br/>                    </strong><em class="kt">Text</em>(text = movieData.imdb, fontWeight = FontWeight.Bold, fontSize = 16.<em class="kt">sp</em>)<br/>                    <em class="kt">Image</em>(imageVector = Icons.Outlined.<em class="kt">StarOutline</em>, contentDescription = "Star",<br/>                        modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>))<br/>                <strong class="kz io">}<br/>            }<br/>            </strong><em class="kt">Row</em>() <strong class="kz io">{<br/>                </strong><em class="kt">Column</em>(modifier = Modifier<br/>                    .<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, start = 8.<em class="kt">dp</em>)<br/>                    .<em class="kt">weight</em>(1.0f)) <strong class="kz io">{<br/>                    </strong><em class="kt">Text</em>(text = movieData.name, fontWeight = FontWeight.Bold, fontSize = 18.<em class="kt">sp</em>)<br/>                    <em class="kt">Text</em>(text = movieData.stars, fontSize = 16.<em class="kt">sp</em>)<br/>                <strong class="kz io">}<br/>            }<br/>        }<br/>    }<br/></strong>}</span></pre><p id="a108" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是 LazyRow 代码:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="162b" class="ld le in kz b gy lf lg l lh li">@Composable<br/>fun MovieListRow(){<br/>    val movieListData = <em class="kt">listOf</em>(MovieData.Movie1, MovieData.Movie2,<br/>        MovieData.Movie3,MovieData.Movie4,<br/>        MovieData.Movie5, MovieData.Movie6,<br/>        MovieData.Movie7, MovieData.Movie8)<br/><br/>    <em class="kt">Box</em>() <strong class="kz io">{<br/>        </strong><em class="kt">LazyRow</em>(modifier = Modifier<br/>            .<em class="kt">requiredHeight</em>(250.<em class="kt">dp</em>)<br/>            .<em class="kt">padding</em>(top = 20.<em class="kt">dp</em>))<strong class="kz io">{<br/>            </strong><em class="kt">items</em>(movieListData)<strong class="kz io">{<br/>                    </strong>movieItem <strong class="kz io">-&gt; </strong><em class="kt">MovieItemRow</em>(movieData = movieItem)<br/>            <strong class="kz io">}<br/>        }<br/>    }<br/></strong>}</span></pre><ul class=""><li id="e68b" class="lj lk in jx b jy jz kc kd kg ll kk lm ko ln ks lo lp lq lr bi translated"><strong class="jx io">第三:LazyVerticalGrid: </strong></li></ul><p id="bb79" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"><em class="kt">LazyVerticalGrid</em></strong>和<strong class="jx io"><em class="kt">LazyHorizontalGrid</em></strong>提供了在网格中显示项目的支持。</p><p id="276e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是使用<strong class="jx io"><em class="kt">LazyVerticalGrid</em></strong>的一个例子:</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/93e424c7ee76426e7fe0857089b02059.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*JznZKlLFr8UXyCBi03OTRw.png"/></div></figure><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="f37d" class="ld le in kz b gy lf lg l lh li">@Composable<br/>fun MovieListGrid(){<br/>    val movieListData = <em class="kt">listOf</em>(MovieData.Movie1, MovieData.Movie2,<br/>        MovieData.Movie3,MovieData.Movie4,<br/>        MovieData.Movie5, MovieData.Movie6,<br/>        MovieData.Movie7, MovieData.Movie8)<br/>    <br/>    <em class="kt">Box</em>() <strong class="kz io">{<br/>        </strong><em class="kt">LazyVerticalGrid</em>(cells = GridCells.Fixed(2), content = <strong class="kz io">{<br/>            </strong><em class="kt">items</em>(movieListData)<strong class="kz io">{<br/>                    </strong>movieItem <strong class="kz io">-&gt; </strong><em class="kt">MovieItemGrid</em>(movieData = movieItem)<br/>            <strong class="kz io">}<br/>        } </strong>)<br/>    <strong class="kz io">}<br/></strong>}<br/><br/>@Composable<br/>fun MovieItemGrid(movieData: MovieData){<br/>    <em class="kt">Card</em>(elevation = 5.<em class="kt">dp</em>,<br/>        modifier = Modifier<br/>            .<em class="kt">border</em>(width = 3.<em class="kt">dp</em>, color = Color.White, shape = <em class="kt">RoundedCornerShape</em>(20.<em class="kt">dp</em>))<br/>            .<em class="kt">padding</em>(top = 8.<em class="kt">dp</em>, bottom = 8.<em class="kt">dp</em>, start = 8.<em class="kt">dp</em>, end = 8.<em class="kt">dp</em>)<br/>            .<em class="kt">requiredHeight</em>(250.<em class="kt">dp</em>)) <strong class="kz io">{<br/>        </strong><em class="kt">Column</em>() <strong class="kz io">{<br/>            </strong><em class="kt">Row</em>() <strong class="kz io">{<br/>                </strong><em class="kt">Column</em>(modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, start = 10.<em class="kt">dp</em>).<em class="kt">weight</em>(1.0f)) <strong class="kz io">{<br/>                    </strong><em class="kt">Image</em>(painter = <em class="kt">painterResource</em>(id = movieData.image), contentDescription = movieData.name,<br/>                        contentScale = ContentScale.Crop,<br/>                        modifier = Modifier<br/>                            .<em class="kt">size</em>(80.<em class="kt">dp</em>)<br/>                            .<em class="kt">clip</em>(<em class="kt">CircleShape</em>)<br/>                            .<em class="kt">border</em>(width = 2.<em class="kt">dp</em>, color = Color.Gray, shape = <em class="kt">CircleShape</em>)<br/>                            .<em class="kt">padding</em>(top = 2.<em class="kt">dp</em>))<br/>                <strong class="kz io">}<br/><br/>                </strong><em class="kt">Column</em>(modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, end = 8.<em class="kt">dp</em>, start = 16.<em class="kt">dp</em>).<em class="kt">weight</em>(1.0f)) <strong class="kz io">{<br/>                    </strong><em class="kt">Text</em>(text = movieData.imdb, fontWeight = FontWeight.Bold, fontSize = 16.<em class="kt">sp</em>)<br/>                    <em class="kt">Image</em>(imageVector = Icons.Outlined.<em class="kt">StarOutline</em>, contentDescription = "Star",<br/>                        modifier = Modifier.<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>))<br/>                <strong class="kz io">}<br/>            }<br/>            </strong><em class="kt">Row</em>() <strong class="kz io">{<br/>                </strong><em class="kt">Column</em>(modifier = Modifier<br/>                    .<em class="kt">padding</em>(top = 10.<em class="kt">dp</em>, start = 8.<em class="kt">dp</em>)<br/>                    .<em class="kt">weight</em>(1.0f)) <strong class="kz io">{<br/>                    </strong><em class="kt">Text</em>(text = movieData.name, fontWeight = FontWeight.Bold, fontSize = 18.<em class="kt">sp</em>)<br/>                    <em class="kt">Text</em>(text = movieData.stars, fontSize = 16.<em class="kt">sp</em>)<br/>                <strong class="kz io">}<br/>            }<br/>        }<br/>    }<br/></strong>}</span></pre><p id="5e89" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">祝你好运</p></div></div>    
</body>
</html>