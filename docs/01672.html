<html>
<head>
<title>GraphQL Tutorial — ReactJS Course: Lesson 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GraphQL教程— ReactJS课程:第1课</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/graphql-tutorial-reactjs-course-lesson-1-c458f92354f8?source=collection_archive---------54-----------------------#2020-07-08">https://blog.devgenius.io/graphql-tutorial-reactjs-course-lesson-1-c458f92354f8?source=collection_archive---------54-----------------------#2020-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1d3f59c067c610f1482473edafc164e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CSRVWArWwNxQ6IU6SbEXDQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://www.blog.duomly.com" rel="noopener ugc nofollow" target="_blank"> Duomly —编程在线课程</a></figcaption></figure><p id="a2b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文原载于<a class="ae kc" href="https://www.blog.duomly.com/graphql-tutorial-reactjs-course/" rel="noopener ugc nofollow" target="_blank">https://www . blog . duomly . com/graph QL-tutorial-react js-course/</a></p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="9cb4" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">使用GraphQL的ReactJS简介</h1><p id="77af" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">REST是一个API设计架构，其中请求是通过URL完成的，REST API的核心思想是，当链接到一个特定的URL时，您应该获得一段数据，称为资源。连接到REST API中的URL称为请求，答案就是响应。</p><p id="24aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">GraphQL是API的查询语言。它允许我们请求特定的数据，而不需要调用几次API，请求是通过查询完成的。如果开发人员只需要数据库中的一个值，就没有必要获取所有的值。GraphQL被组织为类型和字段，而不是端点。</p><p id="a9e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在过去的几年里，REST是API架构的标准，但是它不够灵活，不能适应快速变化的需求。为了获得更大的灵活性和效率，开发人员开始在某些应用程序中使用GraphQL作为设计API的新标准。</p><p id="f5dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">前段时间，我向您展示了如何在ReactJS中从<a class="ae kc" href="https://www.blog.duomly.com/how-to-create-react-app-in-5-minutes/" rel="noopener ugc nofollow" target="_blank"> REST Api获取和显示数据。在本文中，我将向您展示如何使用Axios从GraphQL API向React.js应用程序获取数据。</a></p><p id="a9ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你想跟随这个教程，看看我们的graph QLexpress js课程，这是我的朋友做的。</p><p id="dfff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一如既往，对于那些喜欢看教程而不是阅读的人来说，这里是这篇文章的视频版本。</p><figure class="ml mm mn mo gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="ceaa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">开始吧！</p><h1 id="8237" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">1.创建反应堆应用程序</h1><p id="5512" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">让我们从创建一个新的ReactJS应用程序开始，我们将在这里构建我们的项目。为此，打开终端并使用以下命令。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="7ec5" class="nb lj iq mx b gy nc nd l ne nf">npx create-react-app &lt;app-name&gt;</span></pre><p id="ab03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装完成后，让我们用以下代码启动应用程序:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="3134" class="nb lj iq mx b gy nc nd l ne nf">cd &lt;app-name&gt;<br/>yarn start</span></pre><p id="1569" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它应该在localhost:3000上运行，您应该会看到ReactJS应用程序的标准屏幕。</p><h1 id="fd53" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">2.安装Axios并添加代理</h1><p id="c68b" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">现在，是时候安装axios库了，我们将使用它来满足我们的GraphQL请求。让我们回到终端，使用以下代码来安装它:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="14f3" class="nb lj iq mx b gy nc nd l ne nf">yarn add axios</span></pre><p id="20a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">看起来最重要的插件已经安装，所以我们可以照顾CORS。为了避免这种情况，我们需要在我们的<code class="fe ng nh ni mx b">package.json</code>文件中设置代理。就在脚本下面，让我们添加下面一行代码，但是记住要为你的后端URL设置代理。我的情况是<a class="ae kc" href="http://localhost:4000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4000 </a>。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="d422" class="nb lj iq mx b gy nc nd l ne nf">"proxy": "http://localhost:4000",</span></pre><p id="c2c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">太好了！现在，让我们添加CSS框架的CDN，这将是布尔玛，我们也需要图标。</p><h1 id="1e2c" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">3.添加布尔玛和图标</h1><p id="c5d7" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我们上bulma.io，在文档里可以找到CDN和字体牛逼图标的链接，这是我们要添加的。</p><p id="9500" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开下面的文件<code class="fe ng nh ni mx b">public\index.html</code>，在我们主文件的head部分，让我们添加下面的代码。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="1527" class="nb lj iq mx b gy nc nd l ne nf">&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css"&gt;<br/>&lt;script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"&gt;&lt;/script&gt;</span></pre><p id="1ec0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们可以开始创建我们的应用程序了，让我们在您最喜欢的代码编辑器中打开代码，让我们开始吧！</p><h1 id="e5ef" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">4.创建新组件</h1><p id="38dc" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在<code class="fe ng nh ni mx b">src</code>文件夹中，让我们创建<code class="fe ng nh ni mx b">components</code>文件夹，在这里我们将创建我们的组件。在新创建的文件夹中，让我们为我们的<code class="fe ng nh ni mx b">transactions</code>组件创建文件夹，在该文件夹中，让我们创建<code class="fe ng nh ni mx b">transactions.jsx</code>文件。</p><p id="5845" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个文件中，让我们导入React，然后开始创建我们的组件。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="cc06" class="nb lj iq mx b gy nc nd l ne nf">import React, { useEffect, useState } from 'react';function Transactions() {<br/>  return (<br/>    &lt;div className="transactions section"&gt; <br/>      &lt;div className="card has-table has-mobile-sort-spaced"&gt;<br/>        &lt;header className="card-header"&gt;<br/>          &lt;p className="card-header-title"&gt;<br/>            Transactions History<br/>          &lt;/p&gt;<br/>        &lt;/header&gt;<br/>        &lt;div className="card-content"&gt;<br/>          &lt;div className="table-wrapper has-mobile-cards"&gt;<br/>            &lt;table className="table is-striped is-hoverable"&gt;<br/>              &lt;thead&gt;<br/>                &lt;tr&gt;<br/>                  &lt;th&gt;ID&lt;/th&gt;<br/>                  &lt;th&gt;Amount&lt;/th&gt;<br/>                  &lt;th&gt;Category&lt;/th&gt;<br/>                  &lt;th&gt;Date&lt;/th&gt;<br/>                &lt;/tr&gt;<br/>              &lt;/thead&gt;<br/>              &lt;tbody&gt;<br/>                &lt;tr&gt;<br/>                  &lt;td&gt;1&lt;/td&gt;<br/>                  &lt;td&gt;200$&lt;/td&gt;<br/>                  &lt;td&gt;shopping&lt;/td&gt;<br/>                  &lt;td&gt;10/04/2020&lt;/td&gt;<br/>                &lt;/tr&gt;<br/>              &lt;/tbody&gt;<br/>            &lt;/table&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}export default Transactions;</span></pre><p id="b972" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们创建了事务组件的代码后，让我们转到<code class="fe ng nh ni mx b">App.js</code>文件，并显示组件。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="3bbf" class="nb lj iq mx b gy nc nd l ne nf">import React from 'react';<br/>import Transactions from './components/transactions/transactions';<br/>import './App.css';function App() {<br/>  return (<br/>    &lt;div className="App has-background-light"&gt;<br/>      &lt;div className="container is-fluid"&gt;<br/>        &lt;div className="columns"&gt;<br/>          &lt;div className="column"&gt;<br/>            &lt;Transactions /&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}export default App;</span></pre><p id="c1b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为此时的最后一步，我们将在我们的<code class="fe ng nh ni mx b">App.css</code>文件中添加一些自定义样式。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="7274" class="nb lj iq mx b gy nc nd l ne nf">.App {<br/>  height: auto;<br/>  min-height: 100vh;<br/>  width: 100vw;<br/>  overflow: hidden;<br/>}.transactions .card-content {<br/>  padding: 0;<br/>}.transactions table {<br/>  width: 100%;<br/>}.transactions .table-wrapper {<br/>  overflow: auto;<br/>  max-height: 90vh;<br/>}.transactions .card .card-header {<br/>  border-bottom: 1px solid rgba(24,28,33,.06);<br/>}.transactions .card {<br/>  border-radius: 6px;<br/>}</span></pre><p id="8157" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很好，现在我们可以创建GraphQL查询并准备axios调用了。</p><h1 id="0c26" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">5.创建GrpahQL API查询</h1><p id="9f8b" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">让我们打开<code class="fe ng nh ni mx b">transactions.jsx</code>文件，首先导入axios，定义我们的状态事务，并定义我们的查询。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="0252" class="nb lj iq mx b gy nc nd l ne nf">import React, { useEffect, useState } from 'react';<br/>import axios from 'axios';function Transactions() {<br/>  const [transactions, setTransactions] = useState([]);  const query = `{ <br/>    expenses {<br/>      id,<br/>      date,<br/>      category,<br/>      amount,<br/>      type,<br/>    }<br/>  }`;  ... <br/>}</span></pre><p id="c568" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">准备好后，让我们使用<code class="fe ng nh ni mx b">useEffect()</code>钩子来构建API调用。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="5a1f" class="nb lj iq mx b gy nc nd l ne nf">useEffect(() =&gt; {<br/>  axios({<br/>    url: '/graphql',<br/>    method: 'post',<br/>    data: {<br/>      query,<br/>    }<br/>  }).then((result) =&gt; {<br/>    setTransactions(result.data.data.expenses);<br/>  });<br/>}, []);</span></pre><p id="897f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很好，我们将数据保存在州中，所以现在我们可以将它映射到我们的表中。</p><h1 id="42c8" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">6.地图数据</h1><p id="990f" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">让我们找到表格行，我们将使用它来显示数据，让我们映射我们的数据来显示它。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="0f3c" class="nb lj iq mx b gy nc nd l ne nf">&lt;tbody&gt;<br/>  {transactions.map((item) =&gt; (<br/>    &lt;tr key={item.id}&gt;<br/>      &lt;td&gt;{item.id}&lt;/td&gt;<br/>      &lt;td&gt;&lt;span className={`${item.type === 'incoming' ? 'tag is-success' : 'tag is-danger'}`}&gt;{item.type === 'incoming' ? '' : '-'} {item.amount} $&lt;/span&gt;&lt;/td&gt;<br/>      &lt;td&gt;{item.category}&lt;/td&gt;<br/>      &lt;td&gt;{item.date}&lt;/td&gt;<br/>    &lt;/tr&gt;  <br/>  ))}  <br/>&lt;/tbody&gt;</span></pre><p id="cf1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你可以看到这个表格，我想在这里做的最后一件事是给每个类别添加一个小图标。</p><h1 id="a574" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">7.设置图标</h1><p id="2b11" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">为了设置特定的图标，我将创建一个带有switch语句的函数，将特定的图标分配给每个类别，然后在表格单元格中调用它。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="c288" class="nb lj iq mx b gy nc nd l ne nf">const getIcon = (category) =&gt; {<br/>    let icon;<br/>    switch(category) {<br/>      case 'entertainment':<br/>        icon = 'birthday-cake';<br/>        break;<br/>      case 'food':<br/>        icon = 'pizza-slice';<br/>        break;<br/>      case 'bills':<br/>        icon = 'home';<br/>        break;<br/>      case 'clothes':<br/>        icon = 'tshirt';<br/>        break;<br/>      case 'cosmetics':<br/>        icon = 'bath';<br/>        break;<br/>      case 'health':<br/>        icon = 'first-aid';<br/>        break;<br/>      case 'electronics':<br/>        icon = 'tv';<br/>        break;<br/>      case 'commuting': <br/>        icon = 'car-side';<br/>        break;<br/>      case 'freelance':<br/>        icon = 'laptop-code';<br/>        break;<br/>      case 'salary':<br/>        icon = 'wallet';<br/>        break;<br/>      case 'passive':<br/>        icon = 'money-check-alt';<br/>        break;<br/>      default:<br/>        // code block<br/>    }<br/>    return icon;<br/>  }  ... &lt;td&gt;&lt;i className={`fas fa-${getIcon(item.category)}`}&gt;&lt;/i&gt; {item.category}&lt;/td&gt;</span></pre><p id="8351" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样！让我们现在检查应用程序。结果应该如下图所示。</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/04889bd9431687e84f3586ef4633aa72.png" data-original-src="https://miro.medium.com/v2/resize:fit:60/0*5_9uYUlDTxfS8aZt"/></div></figure><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div class="ab gu cl nk"><img src="../Images/31573030d1a65a61fbd5e375cc6c1f55.png" data-original-src="https://miro.medium.com/v2/format:webp/1*b31hiO4ynbDLRrXWEFF4aQ.png"/></div></figure><h1 id="b76f" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">结论</h1><p id="91ea" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">恭喜你！</p><p id="c638" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，您已经学习了如何使用axios从ReactJS中的GraphQL API获取数据。现在，您可以同时使用API、REST和GraphQL，并且还能够确定哪一个更适合您的应用程序。</p><p id="89e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">别忘了看看我们的ExpressJS课程，在那里你可以学习如何在后端构建GraphQL API。</p><p id="6442" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您错过了一些代码，请随时查看我们的:</p><p id="7089" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://github.com/Duomly/ReactJS-with-GraphQL-Course/tree/Lesson1" rel="noopener ugc nofollow" target="_blank"> ReactJS课程:第1课—代码</a></p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nl"><img src="../Images/cf10a8d76208a633e66527d7fb6a402d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C1TMzi8tvCZX5YQz.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://www.duomly.com/?code=lifetime-80" rel="noopener ugc nofollow" target="_blank"> Duomly —编程在线课程</a></figcaption></figure><p id="0ca1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您的阅读，<br/>来自Duomly的安娜</p></div></div>    
</body>
</html>