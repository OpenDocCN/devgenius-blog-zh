<html>
<head>
<title>How to create a small automatic carousel with React without external libraries.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在没有外部库的情况下用 React 创建一个小的自动转盘？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-create-a-small-automatic-carousel-with-react-without-external-libraries-9c39d040ac39?source=collection_archive---------3-----------------------#2022-05-29">https://blog.devgenius.io/how-to-create-a-small-automatic-carousel-with-react-without-external-libraries-9c39d040ac39?source=collection_archive---------3-----------------------#2022-05-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="6235" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">几个月前，我为我的一个项目创建了一个 carousel，因为我更喜欢从零开始构建，而不是选择一个 npm 包，(我发现从零开始清理代码比快速的 npm 包具有更好的可维护性和持久性)。当某个功能需要针对某件事情时，最好自己开发该功能，而不是选择一个外部解决方案，该方案可能不适合该功能未来的时间变化，或者不能保证 6 个月后该包将完美无缺或仍在开发中。</p><p id="a385" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以，让我们从头开始开发这个项目…</p><p id="77cc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本教程是一个 javascript 教程，css 将只是简单地讨论，媒体查询部分在这里没有详细说明。</p><p id="990f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们今天将发展什么？</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/35e1ff5db93183c58aa95747f6444570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Gf2oxMPlk5RdGSIYPFrFmw.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">这就是我们将要创造的。</figcaption></figure><p id="c2b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">转盘包含两个类别，“跑车品牌”和“电动车品牌”。</p><p id="4415" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在运动类别中，有四个图像和文本… <br/>,在电动类别中，有三个图像和文本</p><p id="b6e3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">传送带是自动的，但是类别是可以点击的！</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="2aba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们开始吧…</p><p id="76f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我用命令创建一个 react 应用程序:</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="22b7" class="lg lh in lc b gy li lj l lk ll">npx create-react-app automated-carousel</span></pre><p id="09fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个像这样的基本应用程序:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lm"><img src="../Images/e8a66ea9ec7b36d346cbc804e31a07ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BYXQ0v0Cgy96fqijrdYPnQ.png"/></div></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">yarn start 或 npm start 运行开发服务器</figcaption></figure><p id="e0f8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们从创建一些文件夹开始，以便构建我们的项目。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/a898c6c37cddec82d457d7beac36bb3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/1*ZiYiaVZkfPhdfVUtPOcPaw.png"/></div></figure><p id="f04a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在项目的 src 文件夹中，我创建了一个 assets 文件夹，其中包含两个文件夹，第一个名为“electricCars ”,第二个名为“sportCars”。<br/>然后，在同一个文件夹(/src)中，我创建了一个组件文件夹和另一个钩子文件夹。</p><p id="cb18" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们项目的结构已经准备好了，现在让我们导入图像…</p><p id="d70f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">“电动”标志的链接:</p><div class="ls lt gp gr lu lv"><a href="https://github.com/rodolphe37/carousel-tuto-step-by-step/tree/main/src/assets/electricCars" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd io gy z fp ma fr fs mb fu fw im bi translated">旋转木马-tuto-逐步/src/主杆处的资产/电动车 37/旋转木马-tuto-逐步</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">在 GitHub 上创建一个帐户，为 rodolphe 37/carousel-tuto-step-by-step development 做贡献。</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">github.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj ko lv"/></div></div></a></div><p id="357b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">“sport”标志的链接:</p><div class="ls lt gp gr lu lv"><a href="https://github.com/rodolphe37/carousel-tuto-step-by-step/tree/main/src/assets/sportCars" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd io gy z fp ma fr fs mb fu fw im bi translated">carousel-tuto-step/src/assets/sport cars at main rodolphe 37/carousel-tuto-step</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">在 GitHub 上创建一个帐户，为 rodolphe 37/carousel-tuto-step-by-step development 做贡献。</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">github.com</p></div></div><div class="me l"><div class="mk l mg mh mi me mj ko lv"/></div></div></a></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/4934466624841f090b11264cca32fe38.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*XuxvzB6hEoYdbRJsZyytgQ.png"/></div></figure><p id="f1de" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，在 assets 文件夹(在它包含的两个文件夹旁边)中，我创建了一个文件，命名为 picturesExport.js. <br/>这将使导入图像到我的组件中变得更加容易和快速。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mm"><img src="../Images/1d92774c0c70675a0c1f0c6e5cab151c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MTvkTEXu54G5AYEmao4ZWw.png"/></div></div></figure><p id="bf9d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个文件的内容相对简单，我导入图像，然后导出代表图像的变量。</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="e6d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之后，我在/scr 文件夹中创建一个 data.js 文件，创建两个表示类别的对象数组。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="7779" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每个对象由一个 id、一个图像、一个文本和一个宽度组成。</p><p id="7107" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如您所看到的，关于这个文件中图像的导入，我只导入在上一步中创建的导出文件的变量。这使得代码更加易读和干净。<br/>让我们继续…</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="efe0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我将创建两个组件，一个名为 Banner.js，另一个名为 Slider.js</p><p id="1f4a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">横幅组件基础如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="8a64" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">滑块组件如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="9e2f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，在 App.js 文件中，我将默认内容替换为以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="2536" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们在 App.css 文件中创建一些样式，</p><p id="d258" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">默认情况下，将此文件的内容替换为以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="a079" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于这篇文章是关于一个自动旋转木马的开发，css 将不会被详细解释，因为你可以“用多种方式做它”，相反，我将解释 React 的操作，关注点分离的原则和可重用组件。这次就够了。</p><p id="586d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">项目这一级别的结果如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi mp"><img src="../Images/818acfc34db5d7839919a8b1e9bcd4c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJ6sp-2Nh65Dm6nsV8MsIg.png"/></div></div></figure><p id="9310" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如您所见，两个类别的文本重叠在一起，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/b70419ed4f844adebea758b53f9c2992.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*vNsr4lwzBgfvuLFgzKv_bA.png"/></div></figure><p id="d7e3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是由于 ul 的绝对位置和文本对齐:中心，这正是我们在这个发展阶段想要的。</p><p id="a116" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下一步…</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="7613" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们现在将创建一个可重复使用的组件，用于按类别显示我们的徽标。</p><p id="15e5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们创建一个名为 CarBrandsSlide.js <br/>的文件，添加以下内容:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="f86b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><p id="aab0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个组件以一个参数作为道具，这个参数是一个数组(dataArray)。<br/>然后我映射数组，定义一个键，放置宽度为样式的图像，最后创建一个包含文本的 h4 标签。</p><p id="78af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我返回到我的 Silder.js 组件，导入我的可重用组件(CarBrandsSlide ),分别使用 props、sportCarsArray 和 electricCarsArray，不要忘记为包含该组件的每个 ul 定义一个 id，为呈现运动品牌列表的组件定义“ListSport ”,为另一个组件定义“ListElectric”。</p><p id="a22d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我当然从之前创建的数据文件中导入我的数组。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/b15530b957704e1997623ecc1633c9e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*wY0I1lofk7smo98IMZJrMg.png"/></div></figure><p id="6246" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好了，在这个阶段，没有图像出现，这是正常的，css 代码已经到位，但还没有逻辑…</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="bebe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，让我们创建一个自定义钩子 useSliderAnimated.js 来实现必要的逻辑。</p><p id="11df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个文件的内容是:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="4179" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><p id="236f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我创建了 4 个状态，2 个布尔型(用于每个类别的“单击”动作)和 2 个字符串，其中包含根据动画(屏幕的进入或退出)应用的类的名称</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="ae3a" class="lg lh in lc b gy li lj l lk ll">const [clickedSportCars, setClickedSportCars] = useState(true);</span><span id="4ecd" class="lg lh in lc b gy ms lj l lk ll">const [clickedElectricCars, setClickedElectricCars] = useState(false);</span><span id="d6df" class="lg lh in lc b gy ms lj l lk ll">const [sportListClassName, setsportListClassName] = useState("");</span><span id="dfa2" class="lg lh in lc b gy ms lj l lk ll">const [elecListClassName, setelecListClassName] = useState("");</span></pre><p id="4cdf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如您所见，clickedSportCars 设置为 true，而其他类别设置为 false 作为默认值。</p><p id="3070" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我实现了一个 handleClickAction 函数，该函数同时将两个类别的状态从 true 更改为 false 和从 false 更改为 true。</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="b091" class="lg lh in lc b gy li lj l lk ll">const handleClickAction = () =&gt; {</span><span id="8362" class="lg lh in lc b gy ms lj l lk ll">setClickedSportCars((clickedSportCars) =&gt; !clickedSportCars);</span><span id="b188" class="lg lh in lc b gy ms lj l lk ll">setClickedElectricCars((clickedElectricCars) =&gt; !clickedElectricCars);</span><span id="f764" class="lg lh in lc b gy ms lj l lk ll">};</span></pre><p id="f8a8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">那么在 useEffect 中有 2 个条件:<br/>如果 clickedSportCars 为真，那么用图像输入的 css 类名称设置对应的状态(字符串)——&gt;moveToLeft。<br/>相同的逻辑应用于布尔 clickedElectricCars，但是 css 类不同- &gt; moveFromRight。<br/>(两个阶层从相反的方向出现)</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="ec75" class="lg lh in lc b gy li lj l lk ll">useEffect(() =&gt; {</span><span id="e495" class="lg lh in lc b gy ms lj l lk ll">if (clickedSportCars) {</span><span id="d708" class="lg lh in lc b gy ms lj l lk ll">setsportListClassName("moveFromLeft");</span><span id="f1b9" class="lg lh in lc b gy ms lj l lk ll">}</span><span id="d378" class="lg lh in lc b gy ms lj l lk ll">if (clickedElectricCars) {</span><span id="c1bb" class="lg lh in lc b gy ms lj l lk ll">setelecListClassName("moveFromRight");</span><span id="5997" class="lg lh in lc b gy ms lj l lk ll">}</span><span id="fb8e" class="lg lh in lc b gy ms lj l lk ll">}, [clickedSportCars, clickedElectricCars]);</span></pre><p id="924b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不要忘记在这个函数的第二个参数的依赖项数组中输入 useEffect 的依赖项(状态)。</p><p id="bb4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个阶段的结果是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/fcc115efa10ca49c1751db3b185450bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*KS-b_4NqMHexVVCTP9Y1jw.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">体育类别在屏幕上</figcaption></figure><p id="12c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如您所看到的，每幅图像与之前的图像相比都有几毫秒的轻微延迟，<br/>这是由于 App.css 文件中实现的延迟</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="7fba" class="lg lh in lc b gy li lj l lk ll">.slider ul.moveToLeft li:first-child,</span><span id="bb32" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveFromRight li:first-child,</span><span id="de49" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveToRight li:nth-child(4),</span><span id="14d5" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveFromLeft li:nth-child(4) {</span><span id="48e4" class="lg lh in lc b gy ms lj l lk ll">animation-delay: 0ms;</span><span id="d064" class="lg lh in lc b gy ms lj l lk ll">}</span><span id="a9fc" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveToLeft li:nth-child(2),</span><span id="a910" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveFromRight li:nth-child(2),</span><span id="52f2" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveToRight li:nth-child(3),</span><span id="ecc2" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveFromLeft li:nth-child(3) {</span><span id="31c7" class="lg lh in lc b gy ms lj l lk ll">animation-delay: 90ms;</span><span id="6e79" class="lg lh in lc b gy ms lj l lk ll">}</span><span id="a694" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveToLeft li:nth-child(3),</span><span id="5151" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveFromRight li:nth-child(3),</span><span id="e9a8" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveToRight li:nth-child(2),</span><span id="169e" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveFromLeft li:nth-child(2) {</span><span id="caee" class="lg lh in lc b gy ms lj l lk ll">animation-delay: 180ms;</span><span id="53e6" class="lg lh in lc b gy ms lj l lk ll">}</span><span id="ff95" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveToLeft li:nth-child(4),</span><span id="2a01" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveFromRight li:nth-child(4),</span><span id="84d3" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveToRight li:first-child,</span><span id="ebfb" class="lg lh in lc b gy ms lj l lk ll">.slider ul.moveFromLeft li:first-child {</span><span id="d6d9" class="lg lh in lc b gy ms lj l lk ll">animation-delay: 270ms;</span><span id="73e1" class="lg lh in lc b gy ms lj l lk ll">}</span></pre></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="8fab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建从一个类别到另一个类别的导航…</p><p id="be2f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我创建了一个 SliderNav.js 文件</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="b865" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><p id="c399" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个组件接受我们将在 Slider.js 组件中实现的道具。<br/>道具是，运动和电动类别的两个布尔值，然后是 handleClickAction 函数。<br/>(这些道具都来自前面实现的自定义钩子)。</p><p id="2d84" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，为每个 css 类实现一个条件，如果布尔值为真，则将 selected 设为 class，否则为 none。<br/>最后，在这个组件中，函数 onClick={handleClickAction}用于导航标签中包含的每个 span。</p><p id="496d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，对 Slider.js 文件进行一些更改:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="be58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我已经从自定义钩子添加了新的导入:</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="e194" class="lg lh in lc b gy li lj l lk ll">const {</span><span id="642f" class="lg lh in lc b gy ms lj l lk ll">sportListClassName,</span><span id="86e1" class="lg lh in lc b gy ms lj l lk ll">elecListClassName,</span><span id="e3d3" class="lg lh in lc b gy ms lj l lk ll">clickedSportCars,</span><span id="331b" class="lg lh in lc b gy ms lj l lk ll">handleClickAction,</span><span id="3833" class="lg lh in lc b gy ms lj l lk ll">clickedElectricCars,</span><span id="91a7" class="lg lh in lc b gy ms lj l lk ll">} = useSliderAminated();</span></pre><p id="6499" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我为 id 为 ListSport 的 ul 实现了动态的类<br/>:</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="a482" class="lg lh in lc b gy li lj l lk ll">className={`badgesList  ${sportListClassName}`}</span></pre><p id="0a3f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于 id 为 ListElectric 的 ul:</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="8cc9" class="lg lh in lc b gy li lj l lk ll">className={`badgesList ${elecListClassName}`}</span></pre><p id="4cc0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我已经添加了 SliderNav 组件和必要的道具:</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="8035" class="lg lh in lc b gy li lj l lk ll">import SliderNav from "./SliderNav";</span><span id="5cf9" class="lg lh in lc b gy ms lj l lk ll">...</span><span id="9d86" class="lg lh in lc b gy ms lj l lk ll">...</span><span id="2556" class="lg lh in lc b gy ms lj l lk ll">&lt;SliderNav</span><span id="0ffa" class="lg lh in lc b gy ms lj l lk ll">clickedSportCars={clickedSportCars}</span><span id="55d2" class="lg lh in lc b gy ms lj l lk ll">handleClickAction={handleClickAction}</span><span id="648a" class="lg lh in lc b gy ms lj l lk ll">clickedElectricCars={clickedElectricCars}</span><span id="2c48" class="lg lh in lc b gy ms lj l lk ll">/&gt;</span></pre><p id="3fc2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好的，让我们试试这个…</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/dbd5d53b6bfe82638382392947fb75a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*b_zqqA97R1B4U8Gmb0weGQ.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">好吧，让我们看看发生了什么！</figcaption></figure><p id="c85b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果:</p><p id="5327" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">类别导航栏看起来很好，好… <br/>点击每个选项都可以正常工作…很好，<br/>在屏幕上输入我的图像也可以，酷… <br/>但是…图像的输出丢失了！</p><p id="b7d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是我们现在要实现的。</p><p id="e7c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们进入自定义钩子 useSliderAnimated.js 来添加一些代码。</p><p id="fa76" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用以下内容修改 useEffect:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="6e28" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将 moveToRight 类添加到了电动车类别中(这是该类别的图像屏幕输出的代码)。在相反的情况下，对于类 moveToLeft 也是如此。</p><p id="8088" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们看看结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/60b0ef470bdc16e4860ad9035761cedf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*M7qk6P3BmhGXowjBi4rAHw.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">是工作…但是！</figcaption></figure><p id="ff78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好了，一切正常，但是如果你仔细看，你会注意到运动组件的输入动画和电动组件的输出动画是叠加在一起的。<br/>我们需要在每个动画之间添加一个延迟… <br/>让我们回到 useSliderAnimated.js 文件！</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="265b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们修改 useEffect 来实现这一点。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="a466" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我改变了什么？</p><p id="0b6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们以 clickedSportCars: <br/>为例，当这个的布尔值为真时，那么我给逆向组件(setElecListClassName-&gt;move right)一个类，它将这个部分的屏幕输出动画化。然后，在 500 毫秒后，我将类 moveFromLeft 设置为 sport 部分，这一次在屏幕上动画显示该部分的条目…</p><p id="7a00" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于另一个布尔值，逻辑是相同的，但用 moveToLeft 来动画显示 sport 部分的输出，然后 500ms 后，我为 electric 部分应用 moveFromRight 类。</p><p id="08f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/938318ad18824f1390a86c5b759847d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*iGtMfNLZYnV0toEoV8yHBA.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">果然是工作，爽！</figcaption></figure><p id="eb9f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如你所看到的，首先是屏幕退出动画，然后是 500 毫秒后的屏幕进入动画…一切都如预期的那样工作！</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="ae78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后一步，创建自动动画！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="7e3f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有什么变化？</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="7e12" class="lg lh in lc b gy li lj l lk ll">const autoSlideTimer = setInterval(() =&gt; {</span><span id="df3a" class="lg lh in lc b gy ms lj l lk ll">handleClickAction();</span><span id="5f87" class="lg lh in lc b gy ms lj l lk ll">}, 3700);</span></pre><p id="04fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我添加了 autoSlideTime，每次类别更改之间的时间间隔为 3700 ms。</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="143a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">重要的事情:</p><p id="18e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当在 useEffect 中处理异步任务时，有必要实现一个清理函数，如下所示:</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="3aa2" class="lg lh in lc b gy li lj l lk ll">return () =&gt; {</span><span id="e1e2" class="lg lh in lc b gy ms lj l lk ll">clearInterval(autoSlideTimer);</span><span id="d101" class="lg lh in lc b gy ms lj l lk ll">clearTimeout(setTimeout);</span><span id="cd87" class="lg lh in lc b gy ms lj l lk ll">};</span></pre><p id="30a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每次组件被卸载时，异步任务都被销毁，不管它们是否完成，这避免了内存泄漏，这就是为什么有必要这样做。</p><p id="33ab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">和..最终结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/85925d0788636dafcfcc662d31db4d40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*UFmIHP6NAbbEFGWM2bnq5Q.gif"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk translated">多田…</figcaption></figure><p id="a957" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就这样，所有工作(自动和点击)正确，如预期的那样。</p><p id="7dd2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本教程 repo 的链接:</p><div class="ls lt gp gr lu lv"><a href="https://github.com/rodolphe37/carousel-tuto-step-by-step" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd io gy z fp ma fr fs mb fu fw im bi translated">GitHub-rodolphe 37/carousel-tuto-逐步</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">这个项目是用 Create React App 引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">github.com</p></div></div><div class="me l"><div class="mt l mg mh mi me mj ko lv"/></div></div></a></div><p id="760e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望这篇文章对你有用，让你不要再摆弄不必要的 npm 包。</p><p id="0ece" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢阅读本教程。</p><p id="bf51" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下一期 React js 教程再见。</p></div></div>    
</body>
</html>