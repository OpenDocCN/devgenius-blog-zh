<html>
<head>
<title>Deploy Angular + NodeJS Application to AWS Elastic Beanstalk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将 Angular + NodeJS 应用程序部署到 AWS Elastic Beanstalk</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploy-angular-nodejs-application-to-aws-elastic-beanstalk-9ab13076a736?source=collection_archive---------1-----------------------#2021-12-04">https://blog.devgenius.io/deploy-angular-nodejs-application-to-aws-elastic-beanstalk-9ab13076a736?source=collection_archive---------1-----------------------#2021-12-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/></div><div class="ab cl jk jl hr jm" role="separator"><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp jq"/><span class="jn bw bk jo jp"/></div><div class="ig ih ii ij ik"><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi jr"><img src="../Images/5c255da903730554b2b2c0ae65f55650.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JTwRIZIEOlLeWy8T0qIP2A.jpeg"/></div></div></figure><p id="c054" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">Angular 是一个流行的 JavaScript 框架，用于构建单页面应用程序(SPA)。NodeJS 是一个广泛用于构建后端应用程序的平台。通过将这两者结合起来，我们可以创建一个功能完整的端到端 web 应用程序，但是我们如何才能使它在 web 上可供任何人使用呢？这正是我们在这里要寻找的。我们将使用 AWS Elastic Beanstalk 来部署应用程序。Elastic Beanstalk 是 AWS 提供的一项服务，用于部署和扩展 Java、Python、NodeJS、Ruby、Go、。网等。您不需要担心自己管理服务器的问题。理论够了，开始吧。</p><h1 id="4ee2" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">先决条件</strong></h1><ol class=""><li id="e5cf" class="lz ma in kf b kg mb kk mc ko md ks me kw mf la mg mh mi mj bi translated">机器上安装的 Angular CLI 和 NodeJS</li><li id="2a23" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">AWS 帐户</li></ol><h1 id="d4ad" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">样本应用</strong></h1><p id="8b72" class="pw-post-body-paragraph kd ke in kf b kg mb ki kj kk mc km kn ko mp kq kr ks mq ku kv kw mr ky kz la ig bi translated">这是一个使用 Angular 和 NodeJS 生成随机名称的简单应用程序。名称在后端生成，并通过 REST API 调用发送到前端。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi ms"><img src="../Images/765ef3329143531058f6d29a8b5f253b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gq-rzV-Rjja_dxiQLEWXug.png"/></div></div></figure><h1 id="e756" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">创建 NodeJS 后端</strong></h1><ol class=""><li id="dc4f" class="lz ma in kf b kg mb kk mc ko md ks me kw mf la mg mh mi mj bi translated">创建一个空文件夹，并在那里打开命令行。</li><li id="62c8" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">键入<strong class="kf io"> npm init </strong>来初始化项目。它会询问你一些信息，比如 git 库、作者等等。但是您可以忽略它们，或者在必要时提供它们。现在您将能够看到 package.json 和 package-lock.json 文件已经在您的文件夹中创建。</li><li id="0686" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">我们在这里使用 express、cors 和 nodemon npm 包。要将它们添加到项目中，请在<strong class="kf io">命令行中键入<strong class="kf io"> npm i express cors nodemon </strong>。</strong></li><li id="749b" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">在后端文件夹中创建 app.js 文件。</li><li id="96ac" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">创建一个文件夹作为视图(你可以给任何你想要的名字)。我们稍后会用到它。</li><li id="8e29" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">转到 package.json 文件，在 scripts 下添加“start”:“node mon app . js”。</li></ol><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mt"><img src="../Images/3c7b7a66a6d7153889975ec828a2389a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_cXnON-CfeILqSwVyXMk6w.png"/></div></div></figure><p id="5fa0" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">7.将以下代码添加到 app.js 中。</p><figure class="js jt ju jv gt jw"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="e25f" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">8.在命令行中键入<strong class="kf io"> npm start </strong>。它会显示“服务器正在端口 3000 上运行”。</p><p id="8277" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">9.在你的浏览器中输入<a class="ae mw" href="http://localhost:3000/#/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>。现在你可以看到“你好，来自 NodeJS！”。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mx"><img src="../Images/18001fba7bbd9208896305dd8e1b04c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lyf_WdA_P5SMMJNI9JMxnA.png"/></div></div></figure><p id="ba2d" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">10.现在是时候添加我们需要的实际代码了。将以下代码粘贴到 app.js 中。</p><figure class="js jt ju jv gt jw"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="154e" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">11.在浏览器中键入<a class="ae mw" href="http://localhost:3000/api/getName" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/API/getName</a>。它会显示一个随机生成的名称。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi my"><img src="../Images/b62ed7a59ac7c46fc088a16964f91374.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d2_bRJFzJPTxB87aJxzvNw.png"/></div></div></figure><p id="8f8a" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">12.现在，我们所要做的就是从前端调用这个 API！</p><h1 id="9e35" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建角度前端</h1><ol class=""><li id="2a4e" class="lz ma in kf b kg mb kk mc ko md ks me kw mf la mg mh mi mj bi translated">打开新的命令终端，键入<strong class="kf io"> ng new &lt; app name &gt; </strong>。你给的应用程序名称将是 angular 项目名称。</li><li id="2c56" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">它会问你“你想增加角度路由吗？”选择“是”。</li><li id="d9de" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">您可以将 SCSS 作为样式表格式。并按下回车键，它将创建角度项目。</li><li id="2823" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">键入<strong class="kf io"> cd &lt; app name &gt; </strong>进入前端文件夹，键入<strong class="kf io"> ng serve </strong>运行项目。</li><li id="85eb" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">键入<a class="ae mw" href="http://localhost:3000/api/getName" rel="noopener ugc nofollow" target="_blank"> http://localhost: </a> 4200。您将能够看到类似于下图的角度起始页。</li></ol><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi mz"><img src="../Images/6c6b08bbf8e9a083c99fb5139c00a831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*shtyhjcPMYyroHNNBA_3KQ.png"/></div></div></figure><p id="2033" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">6.为了让项目看起来更好，让我们添加 bootstrap。从前端文件夹打开一个新命令，通过键入<strong class="kf io"> npm i bootstrap </strong>安装 bootstrap。并将下面一行添加到 styles.scss 文件中。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="72de" class="nf lc in nb b gy ng nh l ni nj">@import "~bootstrap/dist/css/bootstrap.css"</span></pre><p id="68d3" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">7.让我们制造我们需要的组件和服务。在前端项目中键入以下命令。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="e7d1" class="nf lc in nb b gy ng nh l ni nj">ng g c generate-name<br/>ng g s services/name</span></pre><p id="1d93" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">这将在 src/app 中创建 generate-name 组件和服务文件夹。</p><p id="1ec5" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">8.移除 app.component.html 上除了<router-outlet>和</router-outlet>以外的所有东西</p><p id="2db8" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">9.通过构造函数将 angular Router 注入 app.component.ts。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="1024" class="nf lc in nb b gy ng nh l ni nj">constructor(private router: Router) { }</span></pre><p id="abed" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">10.将以下内容添加到 app.component.html 的顶部并保存。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="c3ec" class="nf lc in nb b gy ng nh l ni nj">&lt;h5 *ngIf="router.url == '/'"&gt;Hello from Angular!&lt;/h5&gt;</span></pre><p id="4136" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">11.现在，您将能够看到以下内容。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi nk"><img src="../Images/662ae5ed859319e051450fc18138a0b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Br7Am5M7hVzAwSA3zootgQ.png"/></div></div></figure><p id="1787" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">12.让我们在项目中添加路由。转到 app-routing.module.ts，将以下内容添加到 routes 数组中。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="6172" class="nf lc in nb b gy ng nh l ni nj">{ path: 'generateName', component: GenerateNameComponent }</span></pre><p id="34c5" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">13.尝试在浏览器中键入<a class="ae mw" href="http://localhost:4200/#/generateName" rel="noopener ugc nofollow" target="_blank">http://localhost:4200/generate name</a>。它将向您显示以下内容。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi nl"><img src="../Images/c80f78eb5b6d06400b207ff7eec11ed5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H_bvjMY_qDMj4ZzpIEu3qg.png"/></div></div></figure><p id="289d" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">14.将以下代码添加到 service/name.service.ts 中</p><figure class="js jt ju jv gt jw"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="9df4" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">请确保已将 HttpClientModule 添加到 app.module.ts 文件中的 imports 数组中。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="de26" class="nf lc in nb b gy ng nh l ni nj">imports: [<br/>   BrowserModule,<br/>   AppRoutingModule,<br/>   HttpClientModule<br/>],</span></pre><p id="8c22" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">15.以下是 generate-name.component.html、generate-name.component.scss 和 generate-name.component.ts 文件的代码。</p><figure class="js jt ju jv gt jw"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="c45b" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">16.现在<a class="ae mw" href="http://localhost:4200/#/generateName" rel="noopener ugc nofollow" target="_blank">http://localhost:4200/generate name</a>会显示这个。点击生成按钮将显示你随机生成的名字。就是这样！</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi nm"><img src="../Images/11ad208665916a11f3bf6c38c58b5712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4rBSMxSJpxU0XIgcT1AL2Q.png"/></div></div></figure><p id="13c4" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">现在你几乎完成了前端和后端。但是为了将应用程序部署到 Elastic Beanstalk，我们还需要做一些事情。</p><ol class=""><li id="c1a5" class="lz ma in kf b kg kh kk kl ko nn ks no kw np la mg mh mi mj bi translated">在资产文件夹下创建文件夹环境。将 env.js 文件添加到环境文件夹中。</li></ol><figure class="js jt ju jv gt jw gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/48af8952a0d5efca117268d0f8288236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*j88T5KzJGUQ0r8cYSo5c-A.png"/></div></figure><p id="5f4f" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">2.在那里添加以下代码。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="16ee" class="nf lc in nb b gy ng nh l ni nj">(function (window) {<br/>   window.__env = window.__env || {};<br/>   window.__env.SERVER_URL = 'http://localhost:3000';<br/>}(this));</span></pre><p id="f267" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">3.将<strong class="kf io"> &lt;脚本 src = "/assets/env . js "&gt;&lt;/script&gt;</strong>脚本添加到 index.html 文件中。</p><figure class="js jt ju jv gt jw"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="bb1b" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">4.将以下内容添加到 environment.ts 文件和 environment.prod.ts 文件中。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="4b8e" class="nf lc in nb b gy ng nh l ni nj">server_URL: window['__env']['SERVER_URL']</span></pre><p id="cc63" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">5.将 name.service.ts 文件更改为使用 environment.ts 文件中的 server_URL。</p><figure class="js jt ju jv gt jw"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="4257" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">为什么我们需要做上面的事情？一会儿让我们看看。</p><p id="bf5e" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">现在我们需要创建一个单独的构建包来部署到 beanstalk。</p><h1 id="e8cd" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">创建构建包</strong></h1><ol class=""><li id="2ee3" class="lz ma in kf b kg mb kk mc ko md ks me kw mf la mg mh mi mj bi translated">转到 angular.json 文件，将 outputPath 改为“dist”。</li></ol><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="34a6" class="nf lc in nb b gy ng nh l ni nj">"architect": {<br/>  "build": {<br/>  "builder": "@angular-devkit/build-angular:browser",<br/>  "options": {<br/>    "outputPath": "dist",<br/>    "index": "src/index.html",</span></pre><p id="b316" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">2.从前端文件夹打开命令行，键入 ng build。这将在你的角度根文件夹中创建角度构建文件夹。</p><p id="1805" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">3.复制 dist 文件夹。转到后端文件夹，并将其粘贴到视图文件夹中。</p><p id="e43d" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">4.将以下内容添加到 app.js 文件中。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="65e4" class="nf lc in nb b gy ng nh l ni nj">app.use(express.static(__dirname.replace(/\\/g, "/") + '/view/dist'))</span></pre><p id="1cdd" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">5.在浏览器上试试<a class="ae mw" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>。它将在下面显示。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi nr"><img src="../Images/3642474017d867b551f66824f6bb2bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mW7rkpGsJ_gS8G_skB4uEA.png"/></div></div></figure><p id="070c" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">所以现在，整个项目运行在端口 3000 上。但是<a class="ae mw" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/</a>generate name 呢？一旦你尝试了，它会给你以下。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi ns"><img src="../Images/c0cdc07e3cbd0d2a27f2d6d6b30afea0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3V18o4lG2FZM9a0PK7mapQ.png"/></div></div></figure><p id="7220" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">为了解决这个问题，我们有两种方法。</p><ul class=""><li id="8b7c" class="lz ma in kf b kg kh kk kl ko nn ks no kw np la nt mh mi mj bi translated">将 useHash 添加到 app-routing-module.ts</li><li id="f227" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la nt mh mi mj bi translated">创建一个为 index.html 服务的中间件。</li></ul><p id="b457" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated"><strong class="kf io">添加使用哈希</strong></p><p id="61f5" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">将{useHash: true}添加到 RouterModule.forRoot</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="f555" class="nf lc in nb b gy ng nh l ni nj">RouterModule.forRoot(routes, { useHash: true })</span></pre><p id="93b8" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">再次创建 angular build 文件夹，并将其添加到后端/视图文件夹。重新启动服务器。</p><p id="4d18" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">这将向基本 URL 追加一个哈希。现在输入<a class="ae mw" href="http://localhost:4200/#/generateName" rel="noopener ugc nofollow" target="_blank">http://localhost:4200/#/generate name</a>，应该会显示如下内容。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi nu"><img src="../Images/d841098965dcbf2962ff9c6bcceff196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2VQL-fki9u76JMbAy30lqg.png"/></div></div></figure><p id="e3bb" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">并且<a class="ae mw" href="http://localhost:4200/#/generateName" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/#/generate name</a>现在将运行。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi nv"><img src="../Images/e53d4fcce747739037ce2d9be578b769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2F6HB_ibHvFdH4k2Za029g.png"/></div></div></figure><p id="8462" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated"><strong class="kf io">创建中间件</strong></p><p id="5fad" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">将以下内容添加到 app.js 中。</p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="f9ad" class="nf lc in nb b gy ng nh l ni nj">app.use(sendSpaFileIfUnmatched);</span><span id="70f0" class="nf lc in nb b gy nw nh l ni nj">function sendSpaFileIfUnmatched(req, res){<br/>   res.sendFile("/view/dist/index.html", { root: '.' });<br/>}</span></pre><p id="0a64" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">app.js 应该是这样的。</p><figure class="js jt ju jv gt jw"><div class="bz fp l di"><div class="mu mv l"/></div></figure><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi nx"><img src="../Images/efda6a4afda53523c987cf45a87c6101.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TG_1qYN1dREql4D9ZuNgOg.png"/></div></div></figure><p id="8f2c" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">现在一切似乎都很好。但是我需要你注意一些事情。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi ny"><img src="../Images/add9d42afdf0e9488218ee4a36ebde77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9JMEfRBw3k5jahivI4RbSg.png"/></div></div></figure><p id="a8c8" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">看一下 API。<a class="ae mw" href="http://localhost:3000/api/getName" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/API/getName</a>是网址。这将在本地环境中完美地运行，但是在远程环境中呢？当然，API 是不一样的。因此，在远程环境中，我们必须将其设置为适当地接受 API URL。这就是我们在前端项目中包含 env.js 的原因。在 beanstalk 环境中，它将相应地更改 env.js 文件。为此，请将以下 writeENV()函数代码片段添加到 app.js 文件中。这是 app.js 的最终代码。</p><figure class="js jt ju jv gt jw"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="8083" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">我们已经完成了前端和后端所需的所有配置！最后，我们可以开始部署了。</p><p id="ac71" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">在此之前，请确保在 package.json 的脚本内<strong class="kf io">将启动命令更改为“node app . js”</strong></p><pre class="js jt ju jv gt na nb nc nd aw ne bi"><span id="48c5" class="nf lc in nb b gy ng nh l ni nj">"scripts": {<br/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",<br/>  "start": "node app.js"<br/>}</span></pre><h1 id="ad7e" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">展开至弹性豆茎</strong></h1><ol class=""><li id="2c92" class="lz ma in kf b kg mb kk mc ko md ks me kw mf la mg mh mi mj bi translated">制作后端的 zip 文件。请记住，这包含我们的建立前端 dist 文件夹内的意见。不需要在 zip 中添加 node_modules 文件夹。</li><li id="f7dd" class="lz ma in kf b kg mk kk ml ko mm ks mn kw mo la mg mh mi mj bi translated">转到 Elastic Beanstalk 控制台并单击 Create Application。</li></ol><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi nz"><img src="../Images/f0a3f2cefd72e6e69349b11738b762d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fwQzO1twDoWC1_bIcMghgA.png"/></div></div></figure><p id="0a1c" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">3.将应用程序名称和平台命名为 NodeJS。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi oa"><img src="../Images/7190ae64cf4a35e60f5e149467f89c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YcV2hhInG2mP4pMjDLXq6A.png"/></div></div></figure><p id="54bf" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">4.上传 zip 文件并部署。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi ob"><img src="../Images/a04a9ec10f953501a82685448cb57260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h-dyhe9s9QKNh2Fm4pTeCA.png"/></div></div></figure><p id="6862" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">5.现在，您将能够看到以下页面。正如我们所看到的，beanstalk 提供了访问我们的应用程序的 URL。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi oc"><img src="../Images/d246f51ee00ef7176bc27d6df3e439c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uuIYgbp_gew-ZHIwaaq1ow.png"/></div></div></figure><p id="8387" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">6.我们必须提供 NODE_ENV 和 SERVER_URL 环境变量，以便对 beanstalk 中的正确 URL 进行 API 调用。为此，请转到“配置”,然后单击“软件类别”下的“编辑”按钮。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi od"><img src="../Images/75995ac5b31b39a4d81087d3fdee5a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CBPkQD0ff9OXHl3XCZw7OQ.png"/></div></div></figure><p id="58d5" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">7.按如下方式提供上述环境变量。SERVER_URL 是 beanstalk 给出的 URL。也提供 NODE_ENV 值。</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi oe"><img src="../Images/cd37819475784de051829dfefd1fa90c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*72vOOW00o6hcTGcPjgtebA.png"/></div></div></figure><p id="dad8" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">8.就是这样！。现在，您已经完成了将应用程序部署到 Elastic Beanstalk 的工作。打开豆茎给的网址，尽情享受吧！</p><figure class="js jt ju jv gt jw gh gi paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="gh gi ms"><img src="../Images/765ef3329143531058f6d29a8b5f253b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gq-rzV-Rjja_dxiQLEWXug.png"/></div></div></figure><p id="6023" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">你可以从这里下载完整的应用程序。</p><p id="955f" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated"><a class="ae mw" href="https://github.com/Kanchana46/node-angular-elasticbeanstalk.git" rel="noopener ugc nofollow" target="_blank">https://github . com/kanchana 46/node-angular-elastic beanstalk . git</a></p><p id="b8f7" class="pw-post-body-paragraph kd ke in kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">编码快乐！</p></div></div>    
</body>
</html>