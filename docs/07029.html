<html>
<head>
<title>Passing Data with Navigation Component in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Android 中使用导航组件传递数据</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/passing-data-with-navigation-component-in-android-7fa0ef9119b4?source=collection_archive---------0-----------------------#2022-02-20">https://blog.devgenius.io/passing-data-with-navigation-component-in-android-7fa0ef9119b4?source=collection_archive---------0-----------------------#2022-02-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/46901332e67f6d6013021aacb0e26218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eyKuFn93Uc3gybdnrp4srw.png"/></div></div></figure><p id="a470" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我们将学习如何使用 Android 导航组件在不同的屏幕之间传递数据。</p><p id="b7e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当在 Android 应用程序中使用多个屏幕时，Android 导航组件用于管理这些屏幕之间的导航。<strong class="jx io"> SafeArgs </strong>结构用于在不同屏幕间导航时传递数据。</p><p id="7204" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们通过一个计算用户考试平均分的简单应用程序来学习使用 SafeArgs。</p><h1 id="2c71" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第一步</h1><p id="ff30" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在 Android Studio 中创建新项目。</p><h1 id="98dc" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第二步</h1><p id="e697" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">打开模块级<strong class="jx io"> build.gradle </strong>文件，启用<strong class="jx io"> viewBinding </strong>，同步项目。视图绑定允许我们更容易地编写与视图交互的代码。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">(模块级)<strong class="ak"> build.gradle </strong></figcaption></figure><h1 id="0106" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第三步</h1><p id="6bf3" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">创建两个片段:</p><ul class=""><li id="624d" class="mg mh in jx b jy jz kc kd kg mi kk mj ko mk ks ml mm mn mo bi translated"><strong class="jx io">examinatformationfragment:</strong>用户输入考试信息的片段。</li></ul><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">examinatformationfragment . kt</figcaption></figure><p id="fd43" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开<strong class="jx io">fragment _ exam _ information . XML</strong>，添加用户输入考试信息的输入框和计算平均分的按钮。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">fragment _ 考试 _ 信息. xml</figcaption></figure><ul class=""><li id="6956" class="mg mh in jx b jy jz kc kd kg mi kk mj ko mk ks ml mm mn mo bi translated"><strong class="jx io">考试分数片段:</strong>显示用户考试分数信息和考试平均分的片段。</li></ul><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">ExamScoreFragment.kt</figcaption></figure><p id="2a9c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开<strong class="jx io">fragment _ exam _ score . XML</strong>文件，添加 TextView 供用户显示考试信息和考试成绩。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">fragment_exam_score.xml</figcaption></figure><h1 id="44b1" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第四步</h1><p id="7b6b" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在这一步中，我们将创建一个导航图。<strong class="jx io">导航图</strong>是一个资源文件，表示我们应用程序的所有导航路径，包含所有目的地和动作。</p><p id="69ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">跟随<strong class="jx io"> res- &gt; New- &gt; Android 资源目录</strong>打开一个导航目录。</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/9764bc6e28743b9e72f8bfa5e315d074.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2Hm1VyH6hewQBxC_4XKaA.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">导航目录</figcaption></figure><p id="bad5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，按照<strong class="jx io">导航- &gt;新建- &gt;导航资源文件</strong>，打开一个名为<strong class="jx io"> nav_graph </strong>的新图形。这将要求您自动添加必要的依赖项。单击确定按钮。</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/7681acfb7915ca76df763b3a32ecf2bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ywwF0tvDSXhh9kGDLZLYaA.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">添加项目相关性</figcaption></figure><p id="38e4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">导航图现在可以使用了。</p><h1 id="d348" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第四步</h1><p id="695c" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">通过单击新建目的地按钮，将目的地添加到导航图中。目的地是包含在特定导航图中的片段。</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/5459bd51101cb9e6fc9ec6585398539a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rgH60at0T-TO2IXOaA3iTQ.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">目的地</figcaption></figure><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">nav_graph.xml</figcaption></figure><h1 id="d3c4" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第五步</h1><p id="df15" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">打开您的<strong class="jx io"> activity_main.xml </strong>文件，并在其中放置一个<strong class="jx io">navshostfragment</strong>。NavHostFragment 在布局中提供了一个区域，用于进行自包含导航。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">activity_main.xml</figcaption></figure><h1 id="ad8a" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第六步</h1><p id="e956" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我们现在准备将安全参数添加到我们的项目中。要将安全参数添加到项目中，请在项目级 build.gradle 文件中添加以下类路径。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">(项目级)<strong class="ak"> build.gradle </strong></figcaption></figure><p id="16b6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，在模块级 build.gradle 文件中添加以下插件。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">(模块级)<strong class="ak"> build.gradle </strong></figcaption></figure><h1 id="77a1" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第七步</h1><p id="d5ac" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">创建一个名为<strong class="jx io"> Exam </strong>的新数据类。使用 SafeArgs，我们需要使类<strong class="jx io">可打包</strong>以将一个考试对象传递给另一个片段。</p><p id="aa38" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在模块级 build.gradle 文件中添加以下插件。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">(模块级)<strong class="ak"> build.gradle </strong></figcaption></figure><p id="828e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">同步项目，打开 Exam.kt，用<strong class="jx io"> @Parcelize </strong>注释使类成为可打包的。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">Exam.kt</figcaption></figure><h1 id="c033" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第八步</h1><p id="69a8" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">打开<strong class="jx io"> nav_graph.xml </strong>文件，选择要发送数据的目的地。点击右侧的<strong class="jx io">参数</strong>并输入名称，选择自定义 Parcelable 作为类型。然后添加考试类作为参数。</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/07bb3380667ce15101221b29ffa562cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MRU_OtBdC-YhBHWP8FuszA.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">nav_graph.xml</figcaption></figure><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">nav_graph.xml</figcaption></figure><h1 id="f0d5" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第九步</h1><p id="ae8c" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">打开<strong class="jx io">examinationformationfragment</strong>并调用<strong class="jx io"> setOnClickListener </strong>方法。获取用户在输入字段中输入的考试信息。然后创建一个考试对象并传递所需的参数。接下来，创建一个<strong class="jx io">动作</strong>并将所需的考试对象传递给它。最后，使用<strong class="jx io"> findNavController </strong>方法将 ExamInformationFragment 导航到 ExamScoreFragment。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">examinatformationfragment . kt</figcaption></figure><h1 id="d4ba" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">第十步</h1><p id="d75e" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">打开<strong class="jx io">exascorefragment</strong>并声明一个变量<strong class="jx io"> args </strong>，该变量接受与 exascorefragment 相关联的参数。将变量值设置为 args 中包含的值。</p><p id="5805" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了计算考试平均分，创建一个函数<strong class="jx io"> calculateAverageScore </strong>，该函数将期中考试分数和期末考试分数作为参数。</p><p id="2827" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，将 textViews 的值设置为变量。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><h1 id="ffd8" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">步骤 11</h1><p id="2873" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">运行您的应用程序。</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/07e40c676a36e2552396febf778c5856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xKGnNSs4QFIBoqEI3PqPxA.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">输出</figcaption></figure></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="nb mb l"/></div></figure><p id="0fbc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢阅读。</p><p id="4acd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完整的代码:</p><div class="nd ne gp gr nf ng"><a href="https://github.com/emineinan/NavigationSafeArgs" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd io gy z fp nl fr fs nm fu fw im bi translated">GitHub-eminenan/NavigationSafeArgs:在 Android 中使用导航组件传递数据</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">github.com</p></div></div><div class="np l"><div class="nq l nr ns nt np nu jt ng"/></div></div></a></div></div></div>    
</body>
</html>