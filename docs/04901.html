<html>
<head>
<title>Code Smell 70 — Anemic Model Generators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码气味70 —贫血模型发电机</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/code-smell-70-anemic-model-generators-99aca77391fc?source=collection_archive---------4-----------------------#2021-05-18">https://blog.devgenius.io/code-smell-70-anemic-model-generators-99aca77391fc?source=collection_archive---------4-----------------------#2021-05-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="d629" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">TL；大卫:不要创造贫血的物体。更不用说自动化工具了。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/8b9ce05c399e1d8bf84e3911ae143269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMY9lyc0oXmGX9iDyGvobg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">莱尼·屈尼在<a class="ae ks" href="https://unsplash.com/s/photos/factory" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="9e24" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">问题</h1><ul class=""><li id="315c" class="ll lm in ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">贫血的物体</li><li id="add1" class="ll lm in ln b lo md lq me ls mf lu mg lw mh ly lz ma mb mc bi translated">与实现的耦合</li><li id="5870" class="ll lm in ln b lo md lq me ls mf lu mg lw mh ly lz ma mb mc bi translated">更难调试</li></ul><h1 id="2df2" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">解决方法</h1><ol class=""><li id="931d" class="ll lm in ln b lo lp lq lr ls lt lu lv lw lx ly mi ma mb mc bi translated">手动创建对象。</li><li id="3098" class="ll lm in ln b lo md lq me ls mf lu mg lw mh ly mi ma mb mc bi translated">关注基本行为，而不是偶然的数据存储。</li></ol><h1 id="01f0" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">示例代码</h1><h2 id="1975" class="mj ku in bd kv mk ml dn kz mm mn dp ld ls mo mp lf lu mq mr lh lw ms mt lj mu bi translated">错误的</h2><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="c235" class="mj ku in mw b gy na nb l nc nd">&lt;?</span><span id="0046" class="mj ku in mw b gy ne nb l nc nd">AnemicClassCreator::create(<br/>    'Employee',<br/>    [<br/>        new AutoGeneratedField('id', '$validators-&gt;getIntegerValidator()'),<br/>        new AutoGeneratedField('name', '$validators-&gt;getStringValidator()'),<br/>        new AutoGeneratedField('currentlyWorking', '$validators-&gt;getBooleanValidator()')<br/>    ]);</span><span id="46e3" class="mj ku in mw b gy ne nb l nc nd">class Employee extends AutoGeneratedObjectEmployee {<br/>}</span><span id="9a81" class="mj ku in mw b gy ne nb l nc nd">//We have magic setters and getters<br/>//getId() , setId(), getName()<br/>//Validation is not implicit<br/>//Class are loaded via an autoloader</span><span id="97b5" class="mj ku in mw b gy ne nb l nc nd">$john = new Employee;<br/>$john-&gt;setId(1);<br/>$john-&gt;setName('John');<br/>$john-&gt;setCurrentlyWorking(true);</span><span id="46ea" class="mj ku in mw b gy ne nb l nc nd">$john-&gt;getName(); //returns 'John'</span></pre><h1 id="500f" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">对吧</h1><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="73a5" class="mj ku in mw b gy na nb l nc nd">&lt;?</span><span id="c2e5" class="mj ku in mw b gy ne nb l nc nd">final class Employee {<br/>    private $name;<br/>    private $workingStatus;</span><span id="52a3" class="mj ku in mw b gy ne nb l nc nd">    public function __construct(string $name, WorkingStatus $workingStatus) {<br/>        //..<br/>    }</span><span id="77ec" class="mj ku in mw b gy ne nb l nc nd">    public function name(): string {<br/>        return $this-&gt;name;<br/>        //This is not a getter. It is Employee's responsibility to tell us her/his name<br/>    }<br/>}</span><span id="ef10" class="mj ku in mw b gy ne nb l nc nd">//We have no magic setters or getters<br/>//all methods are real and can be debugged<br/>//Validations are implicit</span><span id="037f" class="mj ku in mw b gy ne nb l nc nd">$john = new Employee('John', new HiredWorkingStatus());</span><span id="27f7" class="mj ku in mw b gy ne nb l nc nd">$john-&gt;name(); //returns 'John'</span></pre><h1 id="e0ae" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">侦查</h1><p id="242a" class="pw-post-body-paragraph nf ng in ln b lo lp jo nh lq lr jr ni ls nj nk nl lu nm nn no lw np nq nr ly ig bi translated">通常，贫血的模型是用<a class="ae ks" href="https://maximilianocontieri.com/laziness-i-meta-programming" rel="noopener ugc nofollow" target="_blank">元编程</a>生成的。</p><p id="ae1f" class="pw-post-body-paragraph nf ng in ln b lo ns jo nh lq nt jr ni ls nu nk nl lu nv nn no lw nw nq nr ly ig bi translated">我们需要跟踪这些神奇的代码生成器。</p><h1 id="0df2" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">标签</h1><ul class=""><li id="4047" class="ll lm in ln b lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">贫血的</li></ul><h1 id="041e" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">结论</h1><p id="4c37" class="pw-post-body-paragraph nf ng in ln b lo lp jo nh lq lr jr ni ls nj nk nl lu nm nn no lw np nq nr ly ig bi translated">代码向导、元编程和贫血模型都是代码的味道。</p><p id="5ff4" class="pw-post-body-paragraph nf ng in ln b lo ns jo nh lq nt jr ni ls nu nk nl lu nv nn no lw nw nq nr ly ig bi translated">我们需要避免这些黑暗的技术。</p><p id="7649" class="pw-post-body-paragraph nf ng in ln b lo ns jo nh lq nt jr ni ls nu nk nl lu nv nn no lw nw nq nr ly ig bi translated">必须显式地编写<em class="nx"/>代码让我们反思我们封装的每一条数据。</p><h1 id="1368" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">关系</h1><div class="ny nz gp gr oa ob"><a rel="noopener  ugc nofollow" target="_blank" href="/code-smell-01-anemic-models-f9fb5a1323b3"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">代码气味01——贫血模型</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">你的对象是一堆没有行为的公共属性。</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">blog.devgenius.io</p></div></div><div class="ok l"><div class="ol l om on oo ok op km ob"/></div></div></a></div><h1 id="f38e" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">更多信息</h1><div class="ny nz gp gr oa ob"><a href="https://codeburst.io/laziness-i-meta-programming-34ef4abdafc6" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">懒惰I:元编程</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">元编程是神奇的。这是我们不应该使用它的主要原因。有许多可怕的后果…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">codeburst.io</p></div></div><div class="ok l"><div class="oq l om on oo ok op km ob"/></div></div></a></div><div class="ny nz gp gr oa ob"><a href="https://codeburst.io/lazyness-ii-code-wizards-18cc5672b642" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">懒惰II:代码向导</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">代码生成器完成了我们的艰苦工作。但是我们不再需要它们了。</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">codeburst.io</p></div></div><div class="ok l"><div class="or l om on oo ok op km ob"/></div></div></a></div></div><div class="ab cl os ot hr ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="ig ih ii ij ik"><blockquote class="oz pa pb"><p id="a106" class="nf ng nx ln b lo ns jo nh lq nt jr ni pc nu nk nl pd nv nn no pe nw nq nr ly ig bi translated">最好的气味是容易发现的，而且大多数时候会引导你发现真正有趣的问题。数据类(只有数据没有行为的类)就是很好的例子。你看着他们，问自己在这个班级应该有什么样的行为。</p></blockquote><p id="2c27" class="pw-post-body-paragraph nf ng in ln b lo ns jo nh lq nt jr ni ls nu nk nl lu nv nn no lw nw nq nr ly ig bi translated">马丁·福勒</p><div class="ny nz gp gr oa ob"><a rel="noopener  ugc nofollow" target="_blank" href="/software-engineering-great-quotes-3af63cea6782"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">软件工程名言</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">有时一个简短的想法可以带来惊人的想法。</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">blog.devgenius.io</p></div></div><div class="ok l"><div class="pf l om on oo ok op km ob"/></div></div></a></div></div><div class="ab cl os ot hr ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="ig ih ii ij ik"><p id="4e4d" class="pw-post-body-paragraph nf ng in ln b lo ns jo nh lq nt jr ni ls nu nk nl lu nv nn no lw nw nq nr ly ig bi translated">本文是CodeSmell系列的一部分。</p><div class="ny nz gp gr oa ob"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">如何找到你的代码中有问题的部分</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">代码很难闻。让我们看看如何改变香味。</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">blog.devgenius.io</p></div></div><div class="ok l"><div class="pg l om on oo ok op km ob"/></div></div></a></div></div></div>    
</body>
</html>