<html>
<head>
<title>COVID-19 Stats Collection with AWS — A serverless recipe that costs $0.00</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">新冠肺炎统计收集与 AWS 一个无服务器的食谱，成本为 0.00 美元</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/covid-19-stats-collection-with-aws-a-serverless-recipe-that-costs-0-00-df0af9b8229c?source=collection_archive---------19-----------------------#2020-06-26">https://blog.devgenius.io/covid-19-stats-collection-with-aws-a-serverless-recipe-that-costs-0-00-df0af9b8229c?source=collection_archive---------19-----------------------#2020-06-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fcedba482d924eeb35ed735ca63ff06f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6KfnzM3s37NfD0QS"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">克里斯蒂安·威迪格在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="7f43" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">新冠肺炎疫情无疑破坏了经济、正常生活等等。但是有些事情正在蓬勃发展。尤其是那些以疫情为中心的。</p><p id="5e35" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">追踪疫情号码不是一件容易的工作。政府机构、医疗保健部门、学术界、基层工作者都参与其中。这些数据大多是开源的。在这些艰难的时刻，我们必须保持这种状态，因为“我们知道得越多，我们就能更好地反击”。</p><p id="ad4b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在所有这些过程中，最关键的要求之一是合理、及时地归档这些数据。通过这样做，您可以跟踪时间序列中的数字，这些数字可用于预测未来趋势。凭借 AWS 提供的大量免费层(向 AWS 团队致敬),我为 BING 托管的新冠肺炎数据建立了一个每日存档系统。</p><div class="ky kz gp gr la lb"><a href="https://bing.com/covid/local/india" rel="noopener  ugc nofollow" target="_blank"><div class="lc ab fo"><div class="ld ab le cl cj lf"><h2 class="bd io gy z fp lg fr fs lh fu fw im bi translated">微软必应新冠肺炎追踪</h2><div class="li l"><h3 class="bd b gy z fp lg fr fs lh fu fw dk translated">跟踪新冠肺炎本地和全球冠状病毒的活跃，复苏和死亡率在地图上，每日新闻…</h3></div><div class="lj l"><p class="bd b dl z fp lg fr fs lh fu fw dk translated">bing.com</p></div></div><div class="lk l"><div class="ll l lm ln lo lk lp jt lb"/></div></div></a></div><p id="cfc3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">注意:我这里提到的数据是公开的，任何人都可以访问。</strong></p><p id="c545" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">在“无服务器”上未发起的发起。</strong></p><p id="7f54" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">无服务器计算是一种云服务产品，通过它您可以开发和部署代码，而不必担心基础设施需求。</p><p id="f423" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">制作这个食谱需要的东西:</strong></p><ol class=""><li id="3080" class="lq lr in kc b kd ke kh ki kl ls kp lt kt lu kx lv lw lx ly bi translated">内置自由层的 AWS 帐户。就是这样。</li></ol><p id="b7ae" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在继续之前，我假设您对 AWS 有一些基本的概念。如果你没有，我建议你做一个我保存的播放列表。这是 freecodecamp.org 教授的 10 小时课程。但是你可以通过选择时间(<em class="lz">来浏览你喜欢的组件，这是 freecodecamp 的人在评论区很友好地放在一起的。向你致敬。你很牛逼</em>)。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="7886" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我的无服务器应用程序由 3 个关键组件组成。IAM 角色是一个启用程序，允许 Lambda 函数的安全权限访问 S3 以存储文件。</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/6147a1f24756646f0c49da2aba6f8563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1382/format:webp/1*uYd5AA3xdBEw-xEKnwoBVg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">AWS 组件</figcaption></figure><p id="1340" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">让我们看看我构建的解决方案。</strong></p><ol class=""><li id="cd0c" class="lq lr in kc b kd ke kh ki kl ls kp lt kt lu kx lv lw lx ly bi translated">创建一个 S3 存储桶，并将其命名为<em class="lz">covid 19 stats dump-&lt;your AWS account id&gt;</em>。因为 S3 桶需要是唯一的。因此添加您的 AWS 帐户 ID 是一个好主意。请注意，我包含了一个“连字符”,因为在 bucket 名称中不允许使用其他特殊字符</li><li id="678c" class="lq lr in kc b kd mh kh mi kl mj kp mk kt ml kx lv lw lx ly bi translated">使用 AWSLambdaBasicExecutionRole 创建 IAM 角色。将此角色命名为“covid 19 stats dump _ lambda _ execution _ role”。附加一个内联策略，以允许访问您在步骤 1 中创建的 s3 存储桶。</li></ol><figure class="ma mb mc md gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/f00a228fffb35b2cd7c757193958d1c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hDdqBcMRALDgP4m1coxgag.png"/></div></div></figure><p id="789d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">内联策略应该如下所示。确保适当地更改存储桶名称。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="mn mf l"/></div></figure><p id="c208" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.lambda 函数代码很容易实现 3 个目标。</p><p id="c244" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">a.向 Bing URL 发出 http 请求并接收响应</p><p id="681e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">b.使用 Beautifulsoup 来通读 http 响应</p><p id="ecaa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">c.使用熊猫创建一个简单的数据框。</p><p id="495a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我用熊猫是为了简单，但如果你觉得有创意，请随意。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="mn mf l"/></div></figure><p id="c35b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.现在这段代码需要托管到 Lambda 中。这里的事情变得更加棘手。部署有两种方式。</p><p id="12ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lz">手动设置环境，然后自己创建 zip 包并上传到 Lambda。</em></p><p id="4eba" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您创建的包在大小上是可管理的，并且依赖关系都很好，那么这是可行的。但是由于特定于平台的依赖性，这在某些情况下会变得非常麻烦。请记住，AWS Lambda 运行的是 linux，如果您运行的是 Windows，并且使用的软件包有 linux 版本，那么您可能会遇到麻烦。</p><p id="a449" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lz">简单的方法，扎帕方法。让我们走简单的路。</em></p><p id="2c95" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里有一篇关于用 Zappa 部署一个简单应用的文章。</p><div class="ky kz gp gr la lb"><a href="https://pythonforundergradengineers.com/deploy-serverless-web-app-aws-lambda-zappa.html" rel="noopener  ugc nofollow" target="_blank"><div class="lc ab fo"><div class="ld ab le cl cj lf"><h2 class="bd io gy z fp lg fr fs lh fu fw im bi translated">使用 Zappa 在 AWS Lambda 上部署一个无服务器的 Web 应用程序</h2><div class="li l"><h3 class="bd b gy z fp lg fr fs lh fu fw dk translated">Zappa 是一种在 AWS Lambda 上部署无服务器 web 应用的方式。在这篇文章中，我们将构建一个简单的 Flask web 应用程序，使用…</h3></div><div class="lj l"><p class="bd b dl z fp lg fr fs lh fu fw dk translated">pythonforundergradengineers.com</p></div></div><div class="lk l"><div class="mo l lm ln lo lk lp jt lb"/></div></div></a></div><p id="ed58" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">快速浏览如何处理 Zappa。</p><p id="94e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">安装 Zappa。</p><p id="56f5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建一个虚拟环境，并安装 lambda 函数所需的所有必需的包。</p><p id="02e6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">写你的代码。</p><p id="5d17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用 Zappa init 来配置您的 lambda 凭证。</p><p id="ae13" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用 Zappa deploy 来部署应用程序。</p><p id="77ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">真的就这么简单</strong>。</p><p id="0814" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Zappa 是一个很棒的 python 包，它有一个命令行界面，可以帮助你部署 lambda 函数，一切都很好。</p><p id="2b44" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">注意:当使用 Zappa 时，你的 Lambda 函数将有一个 http 触发器，因为 Zappa 默认创建一个 API 网关 url。但是你可以通过访问 lambda 函数和改变触发器来编辑这个功能。</strong></p><p id="8746" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我的例子中，我设置了一个 CloudWatch rul，它运行在 cron-expression 上，在 IST 时间每天早上 7 点 45 分运行，因为我对印度的数据感兴趣。</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/bbe18178bf6a59b000a3eef938e3de3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*652-imRSGV90E9h-0_4YmA.png"/></div></figure><p id="e2df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我建立 Lambda 函数后的样子。</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/d7c4da0ac0cd900e159b8d6bf5c68a7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8Y1gHAwsGdpu4CH_ORiaw.png"/></div></div></figure><p id="8bc5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">每天早上 7:45 存储文件的 S3 存储区的快照</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/028de23dfd94cc87eebbb3fa00684820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KxA0Lpsj8q_vrU_FPrhEmw.png"/></div></div></figure><p id="841c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">现在来看一下成本因素:</strong></p><p id="2bfc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如我在文章中承诺的，我将解释这是一个 0.00 美元的零成本设置。</p><p id="f4ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我使用的免费层服务的快速快照。</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/5f2b5dae27e5c8f14ba07a1b469d55a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ymGvOzqN6Li_0mIDtzjz4g.png"/></div></div></figure><p id="91fc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">AWS 自由层使用的详细概述</p><div class="ky kz gp gr la lb"><a href="https://aws.amazon.com/free/?all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc&amp;awsf.Free%20Tier%20Types=*all&amp;all-free-tier.q=CloudWatch&amp;all-free-tier.q_operator=AND" rel="noopener  ugc nofollow" target="_blank"><div class="lc ab fo"><div class="ld ab le cl cj lf"><h2 class="bd io gy z fp lg fr fs lh fu fw im bi translated">AWS 自由层</h2><div class="li l"><h3 class="bd b gy z fp lg fr fs lh fu fw dk translated">获得免费的 AWS 平台、产品和服务实践经验探索 60 多种产品并开始…</h3></div><div class="lj l"><p class="bd b dl z fp lg fr fs lh fu fw dk translated">aws.amazon.com</p></div></div><div class="lk l"><div class="mt l lm ln lo lk lp jt lb"/></div></div></a></div><p id="0890" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">原来如此。</p><p id="7ca4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">离别的思绪:</p><ol class=""><li id="3e63" class="lq lr in kc b kd ke kh ki kl ls kp lt kt lu kx lv lw lx ly bi translated">无服务器应用程序提供了一种经济的、可扩展的方式来在云上做一些有趣的事情。</li><li id="b2d6" class="lq lr in kc b kd mh kh mi kl mj kp mk kt ml kx lv lw lx ly bi translated">所有云服务 AWS、Azure 和 GCP 都提供免费层。更好的是，如果你来自学术界，你可能会得到更多的基于用例。</li><li id="f269" class="lq lr in kc b kd mh kh mi kl mj kp mk kt ml kx lv lw lx ly bi translated">如果这个自由层可以在这个疫情时代很好地用来支持决策，那为什么不呢？</li></ol><p id="fea2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我也写关于 Azure 和 GCP 的文章，并且刚刚开始了一个关于 Azure 函数的系列。如果你有兴趣，请查看以下系列。</p><div class="ky kz gp gr la lb"><a href="https://medium.com/analytics-vidhya/azure-functions-for-dummies-part-1-http-trigger-a95cd000bc62" rel="noopener follow" target="_blank"><div class="lc ab fo"><div class="ld ab le cl cj lf"><h2 class="bd io gy z fp lg fr fs lh fu fw im bi translated">Azure 虚拟函数—第 1 部分— http 触发器</h2><div class="li l"><h3 class="bd b gy z fp lg fr fs lh fu fw dk translated">这是我计划撰写的关于 Azure 函数的系列文章的第 1 部分。从标题来看，这是一本傻瓜指南。而我…</h3></div><div class="lj l"><p class="bd b dl z fp lg fr fs lh fu fw dk translated">medium.com</p></div></div><div class="lk l"><div class="mu l lm ln lo lk lp jt lb"/></div></div></a></div></div></div>    
</body>
</html>