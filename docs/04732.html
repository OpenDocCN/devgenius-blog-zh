<html>
<head>
<title>How to update count values of keys in a HashMap in Java with getOrDefault()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用getOrDefault()在Java中更新HashMap中键的计数值</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-update-count-values-of-thekeys-in-a-hashmap-in-java-with-getordefault-aa60e1df5e0b?source=collection_archive---------2-----------------------#2021-04-28">https://blog.devgenius.io/how-to-update-count-values-of-thekeys-in-a-hashmap-in-java-with-getordefault-aa60e1df5e0b?source=collection_archive---------2-----------------------#2021-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/17464cd0af18dcdf3d2164dc7c597cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fNkoai_sUnLIHqrA"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@timowielink" rel="noopener ugc nofollow" target="_blank"> Timo Wielink </a>在<a class="ae kc" href="https://unsplash.com/photos/4Zk45jNyQS4" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="3bf5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Java中，<code class="fe lb lc ld le b">HashMap</code>数据结构的用处有很多:常量访问、常量存储，以及以逻辑和内置的方式将键和值绑定在一起。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="5f55" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">一些背景</h1><p id="fb16" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">在之前的一篇文章中，我写过一个有用的函数<code class="fe lb lc ld le b">getOrDefault()</code>，它是Java中的<code class="fe lb lc ld le b">HashMap</code>的一个函数。如果您不太了解这个函数，或者想要复习一下，那么我建议您快速阅读一下:</p><div class="mp mq gp gr mr ms"><a href="https://medium.com/dev-genius/what-does-the-hashmap-method-getordefault-in-java-do-with-examples-168b7c8aa39c" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">Java中的HashMap方法getOrDefault是做什么的？(有例子)</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">返回一个值，不管该键是否存在于Java映射中。</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">medium.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng jw ms"/></div></div></a></div><p id="4937" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简而言之，<code class="fe lb lc ld le b">getOrDefault()</code>基本上试图获取<code class="fe lb lc ld le b">HashMap</code>中特定键的值(通过参数提供)。如果它找到了那个键，那么它将像调用<code class="fe lb lc ld le b">get()</code>一样返回值。</p><p id="d4b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，它真正与众不同的地方在于它是否在地图中找到了键<em class="nh">而不是</em>。然后，它返回一个默认值，程序员将它指定为另一个参数。例如，对<code class="fe lb lc ld le b">getOrDefault()</code>的调用可能如下所示:</p><figure class="ni nj nk nl gt jr"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="c5cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在那个例子中，我创建了一个名为<code class="fe lb lc ld le b">hm</code>的<code class="fe lb lc ld le b">HashMap</code>，并添加了绑定<code class="fe lb lc ld le b">a, 1</code>、<code class="fe lb lc ld le b">b, 2</code>、<code class="fe lb lc ld le b">c, 3</code>和<code class="fe lb lc ld le b">d, 4</code>。</p><p id="e75f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我调用<code class="fe lb lc ld le b">getOrDefault("b", 99)</code>，然后将返回值存储在一个名为<code class="fe lb lc ld le b">b</code>的整数值中。</p><p id="c3ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为<code class="fe lb lc ld le b">"b"</code>确实是映射中的一个键，所以<code class="fe lb lc ld le b">b</code>的值将是<code class="fe lb lc ld le b">2</code>，因为这是与<code class="fe lb lc ld le b">"b"</code>相关联的值。</p><p id="6ac0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我调用<code class="fe lb lc ld le b">hm.getOrDefault("z", 44);</code>，那么<code class="fe lb lc ld le b">b</code>的值就是44。原因是因为地图中没有键<code class="fe lb lc ld le b">"z"</code>，所以返回默认值<code class="fe lb lc ld le b">44</code>(这是第二个参数)。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="ab92" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">在散列表中跟踪计数</h1><p id="2712" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated"><code class="fe lb lc ld le b">HashMap</code>数据结构的一个用例是跟踪某些键的计数。</p><p id="d391" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设你正在遍历一个<code class="fe lb lc ld le b">String</code>，你想要跟踪所有的字符。字符串是<code class="fe lb lc ld le b">ABCDA</code>。你希望<code class="fe lb lc ld le b">HashMap</code>以某种方式表示有两个<code class="fe lb lc ld le b">A</code>角色，分别是<code class="fe lb lc ld le b">B</code>、<code class="fe lb lc ld le b">C</code>和<code class="fe lb lc ld le b">D</code>。</p><p id="ebc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们能做的如下:</p><figure class="ni nj nk nl gt jr"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="d7d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以一行一行地分析。</p><p id="458e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第4行，我们声明了一个名为<code class="fe lb lc ld le b">map</code>的新<code class="fe lb lc ld le b">HashMap</code>，它将<code class="fe lb lc ld le b">Character</code>键绑定到<code class="fe lb lc ld le b">Integer</code>值。</p><p id="ff74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第6行，我们使用了一个<code class="fe lb lc ld le b">for</code>循环，一个字符一个字符地遍历我们的字符串<code class="fe lb lc ld le b">str</code>。</p><p id="6c89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第7行，我们有一个检查，用简单的英语说，“如果地图还没有包含字符串中我们所在的字符…”</p><p id="e055" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们满足这个条件，程序进入第8行。然后，代码会将它所在字符的绑定以及计数值<code class="fe lb lc ld le b">1</code>放入映射中，因为根据定义，这是映射中该特定字符的第一个也是唯一一个字符。</p><p id="57a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不满足这个条件，那就意味着这个角色实际上已经在地图上了。然后我们进入第9行的<code class="fe lb lc ld le b">else</code>子句。然后，我们在第10行检索当前计数值，并将其存储在一个我们称为<code class="fe lb lc ld le b">currentCount</code>的<code class="fe lb lc ld le b">int</code>值中。</p><p id="812b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在第11行将<code class="fe lb lc ld le b">currentCount</code>增加1，然后用新的和更新的字符替换特定字符和计数的整个映射。</p><p id="20f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这段代码应该可以工作，但是如果你聪明地使用<code class="fe lb lc ld le b">getOrDefault()</code>，那么你实际上可以减少代码。在这里忍耐一下。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="2497" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">使用getOrDefault()跟踪计数</h1><p id="9641" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">让我们直接进入代码，好吗？</p><figure class="ni nj nk nl gt jr"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="44bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我第一次看到这个的时候，我承认我很困惑。那里发生了很多事。</p><p id="3671" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不过，我们把它分解一下，就不会那么吓人了。</p><p id="ea4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有相同的设置:我们在第3行声明了一个新的<code class="fe lb lc ld le b">HashMap</code>,我们一次一个字符地遍历映射。</p><p id="b7bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不同之处在于，在循环中，我们已经将行数减少到了一行。</p><p id="10cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这一行中，我们在地图中放置了一个新的值，不管这个字符是什么键。</p><p id="2a3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们输入的值使用了<code class="fe lb lc ld le b">getOrDefault()</code>,这样它就试图检索所讨论的字符的值。如果它找不到它，那么默认情况下它将返回的值是<code class="fe lb lc ld le b">0</code>，这是有意义的，因为在地图中没有字符有任何其他计数。最后，也是最关键的，虽然，有一些算术逻辑，增加了1。</p><p id="9917" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这一步是至关重要的，因为我之前说过:无论如何，我们都要在地图中加入新的值。因此，如果角色不在地图上，我们就输入角色和<code class="fe lb lc ld le b">1</code>的值。</p><p id="21c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这一行的美妙之处在于，如果字符<em class="nh">已经是map中的</em>，那么我们能够检索它，然后<code class="fe lb lc ld le b">0</code>几乎被忽略(因为我们不需要返回默认值),然后计数仍然增加1，因为我们需要更新那个特定字符的计数。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="dfdd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我知道这可能会令人困惑，但是希望这篇文章提供一些背景知识，说明这个方法对于维护<code class="fe lb lc ld le b">HashMap</code>中的计数并不是100%必要的，但是却是一个很好的捷径。</p><div class="mp mq gp gr mr ms"><a href="https://tremaineeto.medium.com/membership" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">通过我的推荐链接加入媒体</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">tremaineeto.medium.com</p></div></div><div class="nb l"><div class="no l nd ne nf nb ng jw ms"/></div></div></a></div></div></div>    
</body>
</html>