<html>
<head>
<title>make simple configuration to two projects using Nginx (Part 4)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Nginx 对两个项目进行简单配置(第 4 部分)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/make-simple-configuration-to-two-projects-using-nginx-part-4-eb46ecccfaa9?source=collection_archive---------4-----------------------#2022-02-14">https://blog.devgenius.io/make-simple-configuration-to-two-projects-using-nginx-part-4-eb46ecccfaa9?source=collection_archive---------4-----------------------#2022-02-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/f2a8b7908b7fedec6d07c2a65a6c64f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*PTBCkH0TBSF8CmRVZsSNtg.png"/></div></figure><h1 id="0c5b" class="jr js in bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">简介:</h1><p id="29c3" class="pw-post-body-paragraph kp kq in kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">在以前关于 Nginx 的文章中，我们谈到了 Nginx 的强大，我们如何在我们的机器上安装 Nginx，我们谈到了 Nginx 文件系统并解释了重要的文件和文件夹，但直到现在才使用 Nginx 配置。</p><p id="71d3" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">在本文中，我们将制作一个简单的项目并测试它，我们将更好地理解 Nginx 文件，我们将使用一些 Nginx 命令。</p><p id="b537" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">我认为这篇文章可以让你很好地理解 Nginx 的一般知识，以及 Nginx 的配置和文件。</p><p id="78a8" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">好吧，让我们继续这篇文章。</p><p id="af7a" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated"><strong class="kr io">Nginx 文章的所有部分:</strong></p><ul class=""><li id="a338" class="ls lt in kr b ks ln kw lo la lu le lv li lw lm lx ly lz ma bi translated"><a class="ae mb" href="https://medium.com/javarevisited/intro-to-nginx-web-server-part-1-bb590fad7035" rel="noopener">Nginx Web 服务器简介(第一部分)</a></li><li id="5166" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><a class="ae mb" href="https://medium.com/javarevisited/installing-nginx-and-managed-by-command-part-2-b6b32b90b62d" rel="noopener">安装 Nginx 并通过命令管理(第二部分)</a></li><li id="8ccb" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><a class="ae mb" href="https://medium.com/p/62e71ad1c3a0" rel="noopener"> Nginx 文件配置和日志(第三部分)</a></li><li id="65b0" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated">你在 Nginx 系列的第四部分</li></ul><h1 id="837c" class="jr js in bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">nginx 配置组件:</h1><ul class=""><li id="66b0" class="ls lt in kr b ks kt kw kx la mh le mi li mj lm lx ly lz ma bi translated"><strong class="kr io"> HTTP 块:</strong></li></ul><p id="1f21" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">http 块包含用于处理 web 流量的指令，这些指令通常被称为通用指令，因为它们被传递给 NGINX 服务的所有网站配置。使用 include 指令传递用于处理不同类型 web 流量请求的配置文件，后跟配置文件路径。</p><ul class=""><li id="b344" class="ls lt in kr b ks ln kw lo la lu le lv li lw lm lx ly lz ma bi translated"><strong class="kr io">服务器块:</strong></li></ul><p id="651d" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">服务器块包含服务器配置指令，其中包含服务器名称和 TCP 端口等信息。listen 指令告诉 NGINX 主机名/IP 和应该监听 HTTP 连接的 TCP 端口。当请求到达服务器时，server_name 指令指示 NGINX 选择服务器(从多个服务器块中)。</p><ul class=""><li id="e74d" class="ls lt in kr b ks ln kw lo la lu le lv li lw lm lx ly lz ma bi translated"><strong class="kr io">位置块:</strong></li></ul><p id="4c4f" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated"><strong class="kr io"> <em class="mk">位置</em> </strong>模块使您能够在一个服务器模块内处理几种类型的 URIs/路线。通常，您会利用一个或多个正则表达式来定义和处理一类路由。该查找然后进行到比较和匹配位置块，并且服务于最接近请求 URI 命中的一个。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="0184" class="jr js in bd jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk mw km kn ko bi translated">两个应用程序配置</h1><p id="f32e" class="pw-post-body-paragraph kp kq in kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">例如，我们需要在我们的服务器中处理两个不同的应用程序，默认情况下 Nginx 包含一个服务器块，但在我们的情况下，我们需要创建另一个服务器块来处理任何应用程序的请求。</p><p id="6fcb" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">但是本文的第一步我们需要为我们的应用程序创建一个简单的 HTML 页面。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><p id="03f9" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated"><strong class="kr io">让我们</strong>去创建一个简单的 Html 页面</p><p id="7d32" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">第一步，我们需要通过以下命令转到<strong class="kr io"> /var/www </strong>路径:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="66b6" class="ng js in nc b gy nh ni l nj nk">cd /var/www/</span></pre><p id="6b87" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">并在<strong class="kr io"> var/www </strong>路径下创建两个文件</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="0693" class="ng js in nc b gy nh ni l nj nk">mkdir test.com/html example.com/html</span></pre><p id="4e04" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">在我们的 HTML 页面中，我们需要创建 file.html，Nginx 将在发送请求时向用户提供这个页面。</p><ul class=""><li id="b3cb" class="ls lt in kr b ks ln kw lo la lu le lv li lw lm lx ly lz ma bi translated">现在我们需要创建一个简单的名为<code class="fe nl nm nn nc b">index.html</code>的<strong class="kr io"> HTML </strong>文件</li></ul><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="2f27" class="ng js in nc b gy nh ni l nj nk">nano /var/www/test.com/html/index.html</span></pre><ul class=""><li id="56d4" class="ls lt in kr b ks ln kw lo la lu le lv li lw lm lx ly lz ma bi translated">并在其中编写这段代码</li></ul><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="0662" class="ng js in nc b gy nh ni l nj nk">&lt;html&gt;</span><span id="1e73" class="ng js in nc b gy no ni l nj nk">&lt;head&gt;</span><span id="eade" class="ng js in nc b gy no ni l nj nk">&lt;title&gt;Welcome to test.com!&lt;/title&gt;</span><span id="4123" class="ng js in nc b gy no ni l nj nk">&lt;/head&gt;</span><span id="ebf7" class="ng js in nc b gy no ni l nj nk">&lt;body&gt;</span><span id="b719" class="ng js in nc b gy no ni l nj nk">&lt;h1&gt;Success!  The test.com server block is working!&lt;/h1&gt;</span><span id="f731" class="ng js in nc b gy no ni l nj nk">&lt;/body&gt;</span><span id="0307" class="ng js in nc b gy no ni l nj nk">&lt;/html&gt;</span></pre><p id="0f53" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">用同样的方法为 example.com 创建另一个 html 页面</p><blockquote class="np nq nr"><p id="9a52" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated">你可以用这种方式将 html 文件复制到其他路径中</p></blockquote><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="1491" class="ng js in nc b gy nh ni l nj nk">cp /var/www/test.com/html /var/www/example.com/html/index.html</span></pre><blockquote class="np nq nr"><p id="0cc3" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated">不要忘记修改它，使其引用我们的第二个域</p></blockquote></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><p id="78ad" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">现在我们有一个 HTML 页面，但 Nginx 不知道我们的 HTML 页面在哪里，我们没有任何配置来处理请求，在这一部分我们需要创建 server_block 来进行正确的配置，并处理所有请求的正确路径。</p><p id="42b6" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">让我们在配置中创建<strong class="kr io"> <em class="mk"> server_block </em> </strong>。</p><p id="7789" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">默认情况下，Nginx 包含一个名为 default 的服务器块，我们可以使用它作为自己配置的模板。我们将从设计第一个域的服务器块开始，然后将它复制到第二个域中，并进行必要的修改。</p><p id="06d0" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">目前，如果我们去/etc/nginx/available-sites 路径，我们可以找到一个名为 default 的文件，我们将把这个文件中的所有内容复制到其他文件 example.com 和 test.com。</p><p id="2f35" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">我们可以通过以下命令复制<strong class="kr io">默认</strong>文件的内容:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="a863" class="ng js in nc b gy nh ni l nj nk">cp /etc/nginx/sites-available/default /etc/nginx/sites-available/example.com</span></pre><blockquote class="np nq nr"><p id="1f2d" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated">不要忘记对<strong class="kr io">test.com</strong>文件重复上述命令</p></blockquote><p id="2080" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">并通过以下命令打开该文件<strong class="kr io">example.com</strong>文件:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="a980" class="ng js in nc b gy nh ni l nj nk">nano /etc/nginx/sites-available/example.com</span></pre><p id="f4b4" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">当执行上述命令时，您可以看到下面的结果我们需要用正确的配置将这个结果更新到<strong class="kr io"><em class="mk">example.com</em></strong>并且我们需要用这个文件链接<strong class="kr io"><em class="mk">example.com/html/index.html</em></strong>。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="c8ce" class="ng js in nc b gy nh ni l nj nk">server {<br/>        listen 80 default_server;<br/>        listen [::]:80 default_server;<br/><br/>        root /var/www/html;<br/>        index index.html index.htm index.nginx-debian.html;<br/><br/>        server_name _;<br/><br/>        location / {<br/>                try_files $uri $uri/ =404;<br/>        }<br/>}</span></pre><p id="437e" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">让我们进行更新，为 example.com 进行正确的配置。</p><blockquote class="np nq nr"><p id="307a" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated"><strong class="kr io"> default_server: </strong>该语法意味着任何没有<strong class="kr io"> <em class="in"> server_name </em> </strong>的请求都将重定向到该服务器。</p><p id="b53e" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated"><strong class="kr io">我们可以在 Nginx </strong>中定义该命令一次</p></blockquote><p id="1707" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">现在我们需要将 HTML 文件改为 exmaple.com HTML 文件:</p><p id="b1ca" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">当在 example.com 文件中应用以下语法时，我们可以进行这种修改。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="1bc4" class="ng js in nc b gy nh ni l nj nk">server {<br/>        listen 80;<br/>        listen [::]:80;<br/><br/>        root /var/www/example.com/html;<br/><br/>}</span></pre><p id="93a8" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">现在我们需要将服务器名修改为<a class="ae mb" href="http://www.example.com" rel="noopener ugc nofollow" target="_blank"><strong class="kr io">【www.example.com】</strong></a>我们在对<strong class="kr io"> <em class="mk">服务器名</em> </strong>属性进行以下修改时使<strong class="kr io">修改</strong>:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="eec9" class="ng js in nc b gy nh ni l nj nk">server {<br/>        listen 80;<br/>        listen [::]:80;<br/><br/>        root /var/www/example.com/html;</span><span id="9392" class="ng js in nc b gy no ni l nj nk">        server_name example.com www.example.com;<br/>}</span></pre><blockquote class="np nq nr"><p id="fdd0" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated">现在你可以保存并退出 example.com 文件</p><p id="f184" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated">并且我们需要<strong class="kr io">对<strong class="kr io">test.com</strong>文件中的</strong>做同样的修改，以同样的方式链接<strong class="kr io">域名</strong>和<strong class="kr io"> HTML 文件</strong>。</p><p id="b11e" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated"><strong class="kr io">但是别忘了改变:</strong></p><p id="7a8a" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated"><strong class="kr io">服务器名</strong>test.com<a class="ae mb" href="http://www.test.com" rel="noopener ugc nofollow" target="_blank">www.test.com</a></p><p id="ae7a" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated"><strong class="kr io">并更改 HTML 目录</strong></p></blockquote><p id="034b" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">之后，我们需要启用服务器块。我们可以执行以下命令来启用它:</p><p id="ee72" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">在上一节中，我解释了启用站点的文件，在这一点上我们需要将<strong class="kr io">/etc/nginx/sites-available</strong>与/<strong class="kr io">etc/nginx/sites-enabled</strong>链接起来，下面的命令可以将<strong class="kr io">可用文件</strong>与<strong class="kr io">启用文件</strong>链接起来:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="08b1" class="ng js in nc b gy nh ni l nj nk">$ sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/</span><span id="a6e0" class="ng js in nc b gy no ni l nj nk">$ sudo ln -s /etc/nginx/sites-available/test.com /etc/nginx/sites-enabled/</span></pre><blockquote class="np nq nr"><p id="3eb6" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated">这是<strong class="kr io"> /sites-enabled </strong>的任务</p></blockquote><p id="acd1" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">好了，现在我们有三个 server_block 由 Nginx 启用:</p><ul class=""><li id="97f6" class="ls lt in kr b ks ln kw lo la lu le lv li lw lm lx ly lz ma bi translated"><code class="fe nl nm nn nc b">example.com</code>:将响应<code class="fe nl nm nn nc b">example.com</code>和<code class="fe nl nm nn nc b"><a class="ae mb" href="http://www.example.com" rel="noopener ugc nofollow" target="_blank">www.example.com</a></code>的请求</li><li id="ab35" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><code class="fe nl nm nn nc b">test.com</code>:将响应<code class="fe nl nm nn nc b">test.com</code>和<code class="fe nl nm nn nc b"><a class="ae mb" href="http://www.test.com" rel="noopener ugc nofollow" target="_blank">www.test.com</a></code>的请求</li><li id="1193" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><code class="fe nl nm nn nc b">default</code>:将响应端口 80 上与其他两个块不匹配的任何请求。</li></ul><blockquote class="np nq nr"><p id="7a3a" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated">但是 nginx.config 文件在哪里呢它的作用是什么。</p></blockquote><p id="506e" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">好的，这篇文章的下一部分将会是<strong class="kr io"> nginx.config </strong>和<strong class="kr io">T29】修改它以查看<strong class="kr io">新服务器</strong>。</strong></p><p id="0d0f" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">我们需要打开 nginx.config。我们可以使用以下命令打开文件。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="f1b4" class="ng js in nc b gy nh ni l nj nk">nano /etc/nginx/nginx.config</span></pre><p id="f673" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">执行上述命令后，您可以看到以下文件:</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="91a7" class="ng js in nc b gy nh ni l nj nk">user www-data;</span><span id="fbe0" class="ng js in nc b gy no ni l nj nk">worker_processes auto;</span><span id="882e" class="ng js in nc b gy no ni l nj nk">pid /run/nginx.pid;</span><span id="0f2b" class="ng js in nc b gy no ni l nj nk">include /etc/nginx/modules-enabled/*.conf;</span><span id="a2e3" class="ng js in nc b gy no ni l nj nk">events {</span><span id="e64d" class="ng js in nc b gy no ni l nj nk">worker_connections 768;</span><span id="f54b" class="ng js in nc b gy no ni l nj nk"># multi_accept on;</span><span id="e6d9" class="ng js in nc b gy no ni l nj nk">}</span><span id="3206" class="ng js in nc b gy no ni l nj nk">http {</span><span id="59d5" class="ng js in nc b gy no ni l nj nk">##</span><span id="f5e1" class="ng js in nc b gy no ni l nj nk"># Basic Settings</span><span id="546a" class="ng js in nc b gy no ni l nj nk">##</span><span id="c02b" class="ng js in nc b gy no ni l nj nk">sendfile on;</span><span id="609c" class="ng js in nc b gy no ni l nj nk">tcp_nopush on;</span><span id="a9a4" class="ng js in nc b gy no ni l nj nk">tcp_nodelay on;</span><span id="ea29" class="ng js in nc b gy no ni l nj nk">keepalive_timeout 65;</span><span id="f565" class="ng js in nc b gy no ni l nj nk">types_hash_max_size 2048;</span><span id="c0c0" class="ng js in nc b gy no ni l nj nk"># server_tokens off;</span><span id="551e" class="ng js in nc b gy no ni l nj nk">client_max_body_size 1024M;</span><span id="6add" class="ng js in nc b gy no ni l nj nk">server_names_hash_bucket_size 64;</span><span id="4d16" class="ng js in nc b gy no ni l nj nk"># server_name_in_redirect off;</span><span id="3b02" class="ng js in nc b gy no ni l nj nk">include /etc/nginx/mime.types;</span><span id="684c" class="ng js in nc b gy no ni l nj nk">default_type application/octet-stream;</span><span id="1b6d" class="ng js in nc b gy no ni l nj nk">##</span><span id="950d" class="ng js in nc b gy no ni l nj nk"># SSL Settings</span><span id="5cc4" class="ng js in nc b gy no ni l nj nk">##</span><span id="e27b" class="ng js in nc b gy no ni l nj nk">ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE</span><span id="4b0f" class="ng js in nc b gy no ni l nj nk">ssl_prefer_server_ciphers on;</span><span id="d6ac" class="ng js in nc b gy no ni l nj nk">##</span><span id="c333" class="ng js in nc b gy no ni l nj nk"># Logging Settings</span><span id="1908" class="ng js in nc b gy no ni l nj nk">##</span><span id="4868" class="ng js in nc b gy no ni l nj nk">access_log /var/log/nginx/access.log;</span><span id="323f" class="ng js in nc b gy no ni l nj nk">error_log /var/log/nginx/error.log;</span><span id="6355" class="ng js in nc b gy no ni l nj nk">##</span><span id="4d1b" class="ng js in nc b gy no ni l nj nk"># Gzip Settings</span><span id="4395" class="ng js in nc b gy no ni l nj nk">##</span><span id="4dca" class="ng js in nc b gy no ni l nj nk">gzip on;</span><span id="c22d" class="ng js in nc b gy no ni l nj nk">....</span><span id="d997" class="ng js in nc b gy no ni l nj nk">}</span></pre><blockquote class="np nq nr"><p id="e064" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated"><strong class="kr io">注意:</strong>以上文件不是 nginx 的默认文件，但我更新了它结论:</p></blockquote><p id="1520" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">现在我们需要链接<strong class="kr io"> /sites-enable </strong>文件和<strong class="kr io"> /nginx.config </strong></p><p id="ee9f" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">我们必须将上述文件中的以下属性添加到与<strong class="kr io"> nginx.config </strong>链接的<strong class="kr io"> /sites-enabled </strong>文件中。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="fc50" class="ng js in nc b gy nh ni l nj nk">include /etc/nginx/sites-enabled/test.com;<br/>include /etc/nginx/sites-enabled/example.com;</span></pre><p id="9613" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">我们需要在下面一行从 nginx.config 中删除<code class="fe nl nm nn nc b">#</code></p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="a543" class="ng js in nc b gy nh ni l nj nk">http {<br/>    . . .<br/><br/>    server_names_hash_bucket_size 64;<br/><br/>    . . .<br/>}</span></pre></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><p id="cd06" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated"><strong class="kr io">测试重启所有服务的 nginx 配置</strong></p><p id="649b" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">我们需要测试所有的配置，以确保我们编写的配置文件没有任何错误。</p><p id="2e75" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">我们可以编写以下命令来测试 Nginx 中的所有配置文件。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="a8dc" class="ng js in nc b gy nh ni l nj nk">sudo nginx -t</span></pre><p id="9da0" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">如果没有任何问题，您可以通过以下命令重新启动 Nginx 服务。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="645c" class="ng js in nc b gy nh ni l nj nk">sudo systemctl restart nginx</span></pre></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><p id="d0c9" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">如果您在本地机器上使用 Nginx，您必须修改主机的文件以在浏览器中测试结果。</p><p id="a6ad" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">在第一步中，我们需要转到<strong class="kr io"> /etc/hosts </strong>路径，您可以执行下面的命令来转到这个路径。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="2506" class="ng js in nc b gy nh ni l nj nk">nano /etc/hosts</span></pre><p id="7ab8" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">执行上述命令后，您可以看到以下结果。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="684b" class="ng js in nc b gy nh ni l nj nk">127.0.0.1   localhost<br/>. . .<br/></span></pre><p id="f1d7" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">将本地主机与 test.com 或示例链接。我们可以在<strong class="kr io"> /etc/hosts </strong>中编写下面的命令</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="3af8" class="ng js in nc b gy nh ni l nj nk">your-ip-address example.com www.example.com<br/>your-ip-address test.com www.test.com</span></pre><p id="d396" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated"><code class="fe nl nm nn nc b">your-ip-address eg:128.25.255.45</code></p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h2 id="0e98" class="ng js in bd jt nv nw dn jx nx ny dp kb la nz oa kf le ob oc kj li od oe kn of bi translated">我们浏览器中的测试结果</h2><p id="f33b" class="pw-post-body-paragraph kp kq in kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">现在我们需要打开<strong class="kr io">浏览器</strong>进行测试，看看我们的配置的最终结果是什么。</p><p id="f4c0" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">在<strong class="kr io">浏览器中，</strong>我们可以访问<strong class="kr io"> </strong> <code class="fe nl nm nn nc b"><a class="ae mb" href="http://www.test.com" rel="noopener ugc nofollow" target="_blank">www.test.com</a></code> <strong class="kr io">或</strong> <code class="fe nl nm nn nc b">www.example.com</code></p><p id="7418" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">第一块给我提供了以下内容</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="oh oi di oj bf ok"><div class="gh gi og"><img src="../Images/1d75ef5689ee885611b79cf2ce5b949b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*5PuBIpcjb3o08T0XSA_31A.png"/></div></div></figure><p id="0d04" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">第二块给我提供了以下内容</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/c3217faa6af9092c09b8b429d1eb69f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*rg3WAezwRYDB8wOvC7d4gw.png"/></div></figure><p id="eac5" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">根据上面的结果，所有的请求都是正确的，没有任何问题。</p><h1 id="2389" class="jr js in bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated"><strong class="ak">结论:</strong></h1><p id="34e8" class="pw-post-body-paragraph kp kq in kr b ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ig bi translated">在本文中，我们看到了如何进行配置？用提供的 HTML 页面创建一个简单的应用程序，在带有<strong class="kr io">主机名</strong>的浏览器中查看，我们可以看到 Nginx 的配置是多么简单。</p><p id="d444" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">我们看到了如何在同一个 Nginx 中用不同的主机名映射两个应用程序。</p><p id="0b4b" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated">你可以打开<a class="ae mb" href="https://www.nginx.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="kr io">原 Nginx 网站</strong> </a>或<a class="ae mb" href="https://www.digitalocean.com/community" rel="noopener ugc nofollow" target="_blank"> <strong class="kr io">数字海洋网站</strong> </a>通过原 Nginx 文档深入了解 Nginx。</p><p id="ea24" class="pw-post-body-paragraph kp kq in kr b ks ln ku kv kw lo ky kz la lp lc ld le lq lg lh li lr lk ll lm ig bi translated"><strong class="kr io">Nginx 文章的所有部分:</strong></p><ul class=""><li id="7d49" class="ls lt in kr b ks ln kw lo la lu le lv li lw lm lx ly lz ma bi translated"><a class="ae mb" href="https://medium.com/javarevisited/intro-to-nginx-web-server-part-1-bb590fad7035" rel="noopener">Nginx Web 服务器简介(第一部分)</a></li><li id="82f4" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><a class="ae mb" href="https://medium.com/javarevisited/installing-nginx-and-managed-by-command-part-2-b6b32b90b62d" rel="noopener">安装 Nginx 并通过命令进行管理(第二部分)</a></li><li id="826f" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><a class="ae mb" href="https://medium.com/p/62e71ad1c3a0" rel="noopener"> Nginx 文件配置和日志(第 3 部分)</a></li><li id="6fba" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated">你在 Nginx 系列的第四部分</li></ul><blockquote class="np nq nr"><p id="ae18" class="kp kq mk kr b ks ln ku kv kw lo ky kz ns lp lc ld nt lq lg lh nu lr lk ll lm ig bi translated">不要忘记在文章上拍手，每篇文章可以拍手 50 次。</p></blockquote><h1 id="2944" class="jr js in bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">参考资料:</h1><ul class=""><li id="83e5" class="ls lt in kr b ks kt kw kx la mh le mi li mj lm lx ly lz ma bi translated"><a class="ae mb" href="https://kinsta.com/knowledgebase/what-is-nginx/" rel="noopener ugc nofollow" target="_blank">https://kinsta.com/knowledgebase/what-is-nginx/</a></li><li id="871b" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><a class="ae mb" href="https://medium.com/devopscurry/what-is-nginx-understanding-the-basics-of-nginx-in-2021-f8ee0f3d3d54" rel="noopener">https://medium . com/devopscorry/what-is nginx-understanding-the-basics-of-nginx-in-2021-f8e E0 f 3d 3d 54</a></li><li id="f660" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><a class="ae mb" href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/how-to-install-nginx-on-Ubuntu-20-04</a></li><li id="924c" class="ls lt in kr b ks mc kw md la me le mf li mg lm lx ly lz ma bi translated"><a class="ae mb" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-server-blocks-virtual-hosts-on-ubuntu-16-04" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/how-to-set-up-nginx-server-blocks-virtual-hosts-on-Ubuntu-16-04</a></li></ul></div></div>    
</body>
</html>