<html>
<head>
<title>The Complete JS Notes #17 🧵 DOM #2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">完整的 JS 注释#17 🧵 DOM #2</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-complete-js-notes-17-dom-2-efdaf05e7d05?source=collection_archive---------14-----------------------#2022-08-02">https://blog.devgenius.io/the-complete-js-notes-17-dom-2-efdaf05e7d05?source=collection_archive---------14-----------------------#2022-08-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/76a2a710d12d7bcf0905ee5dd82de9cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7mbMWvCj-a81l08sS8YlbQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">由<a class="ae jz" href="https://unsplash.com/s/photos/animals?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jz" href="https://unsplash.com/@karsten116?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Karsten Winegeart </a>拍摄</figcaption></figure><p id="e7ea" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">欢迎阅读我的 JavaScript 笔记的下一篇文章。</em></p><p id="88cb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">在本文中我们将讨论:</em> <strong class="kc io"> <em class="ky">平滑滚动、事件和事件处理程序、事件传播</em> </strong></p><p id="9112" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">所有内容摘自 Jonas Schmedtmann 的惊人课程</em> <a class="ae jz" href="https://www.udemy.com/course/the-complete-javascript-course/" rel="noopener ugc nofollow" target="_blank"> <em class="ky">完整的 JavaScript 课程 2022:从零到专家！</em> </a></p><p id="5427" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请购买课程以了解内容，这只是我对课程的总结笔记。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><figure class="lh li lj lk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lg"><img src="../Images/3e1c750f2f0e66553c5d4762c2eb4b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NxHsi6uL-9kt3x8uI3oWPA.png"/></div></div></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="0926" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">实现平滑滚动</h1><p id="05e5" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">我们将实现这样的 UI 效果，当我们点击一个按钮时，我们的页面平滑地滚动到那里</p><p id="5c1f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们需要获得想要去的部分的坐标。</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="8633" class="mt lm in mp b gy mu mv l mw mx">const buttonScrollTo = document.querySelector(‘.btn — scroll-to’);</span><span id="e2f1" class="mt lm in mp b gy my mv l mw mx">const section1 = document.querySelector(‘#section — 1’);</span><span id="bc1e" class="mt lm in mp b gy my mv l mw mx">buttonScrollTo.addEventListener(‘click’, function (e) {</span><span id="6cd9" class="mt lm in mp b gy my mv l mw mx">const s1coords = section1.getBoundingClientRect(); &lt;- Returns DOMRect object</span><span id="dc32" class="mt lm in mp b gy my mv l mw mx">console.log(s1coords);</span><span id="63d2" class="mt lm in mp b gy my mv l mw mx">console.log(e.target.getBoundingClientRect()); &lt;- e.target is the element being clicked</span><span id="9b49" class="mt lm in mp b gy my mv l mw mx">});</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/f611a4fdf309a033db1785e3d084e185.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*q-J_io1ed7XsL_DamKwTuQ.png"/></div></figure><p id="3bbe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们再次滚动并点击时，y 值发生变化。所以 getBoundingClientRect()是相对于屏幕快照的。</p><h1 id="02cb" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">当前滚动</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="a387" class="mt lm in mp b gy mu mv l mw mx">console.log(‘Current scroll (X/Y)’, window.pageXOffset, pageYOffset);</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/4935f2120da2678e0efa7cb1fcfeba17.png" data-original-src="https://miro.medium.com/v2/resize:fit:538/format:webp/1*64Mo1Dtw3fkstw6_ENFHVg.png"/></div></figure><h1 id="19cd" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">查看屏幕宽度和高度</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="fcd9" class="mt lm in mp b gy mu mv l mw mx">buttonScrollTo.addEventListener(‘click’, function (e) {</span><span id="a0ce" class="mt lm in mp b gy my mv l mw mx">const s1coords = section1.getBoundingClientRect();</span><span id="8603" class="mt lm in mp b gy my mv l mw mx">console.log(</span><span id="875c" class="mt lm in mp b gy my mv l mw mx">‘height/width of viewport’,</span><span id="d340" class="mt lm in mp b gy my mv l mw mx">document.documentElement.clientHeight,</span><span id="62d1" class="mt lm in mp b gy my mv l mw mx">document.documentElement.clientWidth</span><span id="2f76" class="mt lm in mp b gy my mv l mw mx">);</span><span id="5f3e" class="mt lm in mp b gy my mv l mw mx">});</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/efc58b3091067fc9cf34f660b79bd5d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*Dq8OONlh3ycJI1TNDVcJqQ.png"/></div></div></figure><h1 id="c7d8" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">卷动</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="664b" class="mt lm in mp b gy mu mv l mw mx">buttonScrollTo.addEventListener(‘click’, function (e) {</span><span id="ba0d" class="mt lm in mp b gy my mv l mw mx">const s1coords = section1.getBoundingClientRect();</span><span id="c43a" class="mt lm in mp b gy my mv l mw mx">//Scrolling</span><span id="36fd" class="mt lm in mp b gy my mv l mw mx">window.scrollTo(s1coords.left, s1coords.top);</span><span id="f07d" class="mt lm in mp b gy my mv l mw mx">});</span></pre><p id="354a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这种方法有它的问题，只有当我们在页面的最顶端时才有效。因为 getBoundingClientRect() top 和 left 是相对的，当我们稍微滚动时，top 和 left 将是较小的值。这是一个巨大的问题。</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="7507" class="mt lm in mp b gy mu mv l mw mx">buttonScrollTo.addEventListener(‘click’, function (e) {</span><span id="9ec8" class="mt lm in mp b gy my mv l mw mx">const s1coords = section1.getBoundingClientRect();</span><span id="4afa" class="mt lm in mp b gy my mv l mw mx">//Scrolling</span><span id="def4" class="mt lm in mp b gy my mv l mw mx">window.scrollTo(</span><span id="b70c" class="mt lm in mp b gy my mv l mw mx">s1coords.left + window.pageXOffset,</span><span id="6849" class="mt lm in mp b gy my mv l mw mx">s1coords.top + window.pageYOffset</span><span id="a11c" class="mt lm in mp b gy my mv l mw mx">);</span><span id="7199" class="mt lm in mp b gy my mv l mw mx">});</span></pre><p id="b59a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用 pageX 和 pageY 偏移，我们总是在正确的位置绘制它。</p><p id="8f6c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">到目前为止，一切顺利，这不是这项工作最酷的部分</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="c560" class="mt lm in mp b gy mu mv l mw mx">window.scrollTo({</span><span id="02ef" class="mt lm in mp b gy my mv l mw mx">left: s1coords.left + window.pageXOffset,</span><span id="14d0" class="mt lm in mp b gy my mv l mw mx">top: s1coords.top + window.pageYOffset,</span><span id="e8c7" class="mt lm in mp b gy my mv l mw mx">behavior: ‘smooth’,</span><span id="9272" class="mt lm in mp b gy my mv l mw mx">});</span></pre><p id="94b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有一个超级新的功能使所有这些工作变得非常简单</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="5636" class="mt lm in mp b gy mu mv l mw mx">section1.scrollIntoView({ behavior: ‘smooth’ });</span></pre></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="dd3b" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">事件和事件处理程序的类型</h1><h1 id="d0b1" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">鼠标进入事件监听器</h1><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="57e4" class="mt lm in mp b gy mu mv l mw mx">const h1 = document.querySelector(‘h1’);</span><span id="8cef" class="mt lm in mp b gy my mv l mw mx">h1.addEventListener(‘mouseenter’, function (e) {</span><span id="93db" class="mt lm in mp b gy my mv l mw mx">window.alert(‘Great you are reading a header’);</span><span id="ebbc" class="mt lm in mp b gy my mv l mw mx">});</span><span id="cc8b" class="mt lm in mp b gy my mv l mw mx">We cal also use it like:</span><span id="ede5" class="mt lm in mp b gy my mv l mw mx">h1.onmouseenter = function (e) {</span><span id="4159" class="mt lm in mp b gy my mv l mw mx">window.alert(‘Great you are reading a header’);</span><span id="6895" class="mt lm in mp b gy my mv l mw mx">};</span></pre><p id="5b6a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于每个事件，我们在 html 元素中都有 onevent 属性。例如 Onclick 是最常用的一个。</p><p id="573b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然而，我们不应该使用它们。这是老派的 js。始终使用 addEventListener</p><h1 id="f777" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">1 次事件监听</h1><p id="63be" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">我们不必为整个时间设置一个事件监听器，我们可以只设置一次。</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="c093" class="mt lm in mp b gy mu mv l mw mx">const h1 = document.querySelector(‘h1’);</span><span id="6a2d" class="mt lm in mp b gy my mv l mw mx">const alertH1 = function (e) {</span><span id="b9e8" class="mt lm in mp b gy my mv l mw mx">window.alert(‘Great you are reading a header’);</span><span id="2ebd" class="mt lm in mp b gy my mv l mw mx">h1.removeEventListener(‘mouseenter’, alertH1);</span><span id="5261" class="mt lm in mp b gy my mv l mw mx">};</span><span id="028f" class="mt lm in mp b gy my mv l mw mx">h1.addEventListener(‘mouseenter’, alertH1);</span></pre><p id="42ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们不需要在制作 1 次后移除它，因为我们可以随时随地移除它。</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="c935" class="mt lm in mp b gy mu mv l mw mx">setTimeout(() =&gt; h1.removeEventListener(‘mouseenter’, alertH1), 3000);</span></pre><h1 id="fd7c" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">Html 事件侦听器</h1><p id="e483" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">还有一种编写事件侦听器的糟糕方法，这是一种非常糟糕的做法</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="6b73" class="mt lm in mp b gy mu mv l mw mx">&lt;h1 onclick=”alert(‘HTML alert’)”&gt;</span></pre><p id="2e1a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是来自老学校的 js 天，不要使用它。</p><h1 id="e51e" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">事件传播冒泡和捕获</h1><figure class="lh li lj lk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/60dfb556bc6bd4683e93f14090c179cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c3shC-pEumtgmzFw0Td-SA.png"/></div></div></figure><h1 id="edfb" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">实践中的事件传播</h1><p id="92a0" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">假设我们内部有 3 个元素的事件侦听器</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="e5cc" class="mt lm in mp b gy mu mv l mw mx">document.querySelector(‘.nav__link’).addEventListener(‘click’, function (e) {</span><span id="1c3a" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="9c0b" class="mt lm in mp b gy my mv l mw mx">});</span><span id="c28f" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav__links’).addEventListener(‘click’, function (e) {</span><span id="3408" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="30fb" class="mt lm in mp b gy my mv l mw mx">});</span><span id="7955" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav’).addEventListener(‘click’, function (e) {</span><span id="40f7" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="eea7" class="mt lm in mp b gy my mv l mw mx">});</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/cbec85f5a4e5aeaa604a80d8626273b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3yI5IQrdxIhZhQkFlYFCCg.png"/></div></div></figure><p id="055b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们点击最外面的容器时，就会发生这种情况</p><figure class="lh li lj lk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/75ebce2c84b4047727f9fe2e853b915f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*70eoPFLqFyIcpB84YaaOpA.png"/></div></div></figure><p id="8db1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们重置并点击最深的元素，这种情况会发生</p><figure class="lh li lj lk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/bab6e3866572e75966d226af828b31d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XpId-2StqZ5lSmPrL9eUAA.png"/></div></div></figure><p id="b8c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">发生这种情况是因为当事件发生时，根从最大的父节点到最小的子节点，但是它们的事件监听器没有捕捉到它。</p><p id="ee49" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">事件侦听器在冒泡期间捕获事件。</p><p id="577e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了证明这一点，让我们稍微修改一下代码</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="a00e" class="mt lm in mp b gy mu mv l mw mx">document.querySelector(‘.nav__link’).addEventListener(‘click’, function (e) {</span><span id="924d" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="2498" class="mt lm in mp b gy my mv l mw mx">console.log(‘Feature’, e.target);</span><span id="82cb" class="mt lm in mp b gy my mv l mw mx">});</span><span id="683c" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav__links’).addEventListener(‘click’, function (e) {</span><span id="68df" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="dc66" class="mt lm in mp b gy my mv l mw mx">console.log(‘Feature Container’, e.target);</span><span id="086b" class="mt lm in mp b gy my mv l mw mx">});</span><span id="0c95" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav’).addEventListener(‘click’, function (e) {</span><span id="f436" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="0b8c" class="mt lm in mp b gy my mv l mw mx">console.log(‘Navbar’, e.target);</span><span id="adf0" class="mt lm in mp b gy my mv l mw mx">});</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/cf335d865016da68bec795f814dcbded.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*kimiKVn3hEGH4ersWONClw.png"/></div></figure><p id="bf79" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里有两点需要注意</p><ul class=""><li id="0171" class="nm nn in kc b kd ke kh ki kl no kp np kt nq kx nr ns nt nu bi translated">特征是第一个被触发的，所以父级的事件捕获发生在冒泡期间</li><li id="3f87" class="nm nn in kc b kd nv kh nw kl nx kp ny kt nz kx nr ns nt nu bi translated">相同的事件传递给所有的 eventListeners</li></ul><p id="1b2b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们也有一个事件属性来具体说明这一点:<strong class="kc io"> event.currentTarget </strong></p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="1525" class="mt lm in mp b gy mu mv l mw mx">document.querySelector(‘.nav__link’).addEventListener(‘click’, function (e) {</span><span id="7bdb" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="f929" class="mt lm in mp b gy my mv l mw mx">console.log(‘Feature’, e.target, e.currentTarget);</span><span id="ca76" class="mt lm in mp b gy my mv l mw mx">});</span><span id="5259" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav__links’).addEventListener(‘click’, function (e) {</span><span id="1ba4" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="fad7" class="mt lm in mp b gy my mv l mw mx">console.log(‘Feature Container’, e.target, e.currentTarget);</span><span id="4210" class="mt lm in mp b gy my mv l mw mx">});</span><span id="6d5e" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav’).addEventListener(‘click’, function (e) {</span><span id="07c4" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="4657" class="mt lm in mp b gy my mv l mw mx">console.log(‘Navbar’, e.target, e.currentTarget);</span><span id="09c9" class="mt lm in mp b gy my mv l mw mx">});</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/29d36c7123119769e490f3ee7e57c87f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*voME8X1XlfMDg1Vtmt59Jw.png"/></div></figure><p id="431f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这仅仅意味着</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="bfe0" class="mt lm in mp b gy mu mv l mw mx">event.currentTarget === this; // true</span></pre><h1 id="72e3" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated">停止事件传播</h1><p id="ae10" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">还有一种方法可以阻止此事件传播。到焦点元素:</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="17f3" class="mt lm in mp b gy mu mv l mw mx">document.querySelector(‘.nav__link’).addEventListener(‘click’, function (e) {</span><span id="207b" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="ba1f" class="mt lm in mp b gy my mv l mw mx">e.stopPropagation(); &lt;- Stops the propagation</span><span id="545b" class="mt lm in mp b gy my mv l mw mx">});</span><span id="b23c" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav__links’).addEventListener(‘click’, function (e) {</span><span id="9f31" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="f482" class="mt lm in mp b gy my mv l mw mx">});</span><span id="e109" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav’).addEventListener(‘click’, function (e) {</span><span id="1528" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="2a82" class="mt lm in mp b gy my mv l mw mx">});</span></pre><p id="c0bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以做到，但不应该。这在存在大量事件监听器的大型应用程序中有时非常重要。否则最好不要使用它。</p><p id="616f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">默认情况下，冒泡阶段是寻找事件的阶段，捕获阶段不会做很多事情，但我们可以改变它。</p><p id="fd20" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们将第三个参数放入事件侦听器中，它将开始在捕获阶段寻找事件</p><pre class="lh li lj lk gt mo mp mq mr aw ms bi"><span id="0b71" class="mt lm in mp b gy mu mv l mw mx">document.querySelector(‘.nav__link’).addEventListener(‘click’, function (e) {</span><span id="fa32" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="e45a" class="mt lm in mp b gy my mv l mw mx">console.log(‘Feature’);</span><span id="12b7" class="mt lm in mp b gy my mv l mw mx">});</span><span id="0707" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav__links’).addEventListener(‘click’, function (e) {</span><span id="2b76" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="5c12" class="mt lm in mp b gy my mv l mw mx">console.log(‘Feature Container’);</span><span id="1972" class="mt lm in mp b gy my mv l mw mx">});</span><span id="eb7a" class="mt lm in mp b gy my mv l mw mx">document.querySelector(‘.nav’).addEventListener(</span><span id="8f95" class="mt lm in mp b gy my mv l mw mx">‘click’,</span><span id="a16d" class="mt lm in mp b gy my mv l mw mx">function (e) {</span><span id="3c78" class="mt lm in mp b gy my mv l mw mx">this.style.backgroundColor = randomColor();</span><span id="e688" class="mt lm in mp b gy my mv l mw mx">console.log(‘Navbar’);</span><span id="9cc7" class="mt lm in mp b gy my mv l mw mx">},</span><span id="ea94" class="mt lm in mp b gy my mv l mw mx">true</span></pre><figure class="lh li lj lk gt jo gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/7e48166568bf9043104aecc794fcccfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:380/format:webp/1*zsIDrizN09JExpq516c2DA.png"/></div></figure><p id="a923" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在 navbar 是第一个触发 eventListener 的。</p><p id="8277" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">今天 2 个阶段存在的唯一原因是历史原因。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="4d33" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://medium.com/@barisbll/the-complete-js-notes-1-36ea76e326b3" rel="noopener"> <em class="ky">见本 js 笔记第一篇帖子！</em>T5】</a></p><p id="6af6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://medium.com/@barisbll/the-complete-js-notes-16-dom-1-cc5c1c47086d" rel="noopener"> <em class="ky">见本 js 笔记线程的上一篇文章！</em>T9】</a></p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="8acc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://twitter.com/barisbll_dev" rel="noopener ugc nofollow" target="_blank"> <em class="ky">在 twitter 上关注我获取甜蜜内容</em> </a> <em class="ky"> </em>😘</p><p id="f47f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">在</em><a class="ae jz" href="https://blog.devgenius.io/" rel="noopener ugc nofollow" target="_blank"><em class="ky">Dev Genius</em></a>阅读我和许多其他伟大的科技博客作者</p></div></div>    
</body>
</html>