# IOS 应用程序的代码审查

> 原文：<https://blog.devgenius.io/code-review-for-ios-applications-1b10e69b239e?source=collection_archive---------3----------------------->

## 如何在 GitHub for iOS 应用程序上对 pull 请求进行代码审查的规则和提示

![](img/1e61ae1c710a26b0ad16fb818431a034.png)

凯文·Ku 从[派克斯](https://www.pexels.com/photo/data-codes-through-eyeglasses-577585/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)拍摄的照片

**如果你在一个大型开发团队中工作，并且希望保持代码整洁，避免可能的崩溃，代码审查**非常重要。此外，让所有开发人员保持相同的“编码风格”会有很大帮助。但是在代码评审之前，最好创建一套任何人都应该遵守的规则。

代码审查应该由与您正在开发的特性无关的其他开发人员来完成(如果我们希望代码审查更加客观，也可以参与，但最好不要参与)

如果你正在使用 GitHub，开发者可以创建一个新的 **Pull 请求**，这通常是一个将他的分支合并到 Develop 分支并包含在下一个版本中的请求。

现在是时候对我们的开发伙伴所做的一个特性进行代码审查了。我们需要检查以下内容(这些应该是所有进行代码审查的开发人员的规则):

## 运行项目

签出该特性的分支，并确保编译和运行。测试没有必要由你来执行(公司应该有一个质量保证/UAT 团队来做)

## 提交和 GitFlow

确保提交和合并尊重 GitFlow(如果您正在使用它)。例如，您可以检查分支是否从开发分支开始，并检查是否有任何错误的合并。如果你想了解更多关于 GitFlow 的内容，你可以查看这篇文章

[](https://levelup.gitconnected.com/gitflow-working-in-big-teams-aa606a953147) [## GitFlow 在大型团队中工作

### 另一种 Git 分支模型，包括使用特性分支和多个主分支

levelup.gitconnected.com](https://levelup.gitconnected.com/gitflow-working-in-big-teams-aa606a953147) 

## 模式和语言

每个特性都应该使用相同的模式(或架构)，当然也应该使用相同的语言(可以有例外)。

如果你的应用程序/项目使用 MVVM 模式，每个人都应该遵循相同的模式，而不是为自己的功能创建不同的模式。

语言应该是一样的。例如，如果我们有一个 iOS 应用程序，并且每个人都使用 swift，那么您就不应该使用 objective-c。它可以有两种语言，但在这种情况下，只有当您切换到一种新的现代语言时(比如从 objective-c 转换到 swift)才更好。在这种情况下，您可以设置一些规则，比如如果您正在开发一个新功能，它应该用新语言编写，但是如果您只是想在现有的旧语言中添加一些内容，您可以继续使用它)

在 swift 代码上，检查没有进行不必要的强制解包，并检查**是否遵守 swift 风格指南**。点击这里了解更多:【https://github.com/PureSwift/SwiftStyleGuide 

## 警告/错误

检查是否引入了新的警告或错误。如果有些警告是针对必须使用的第三方库的，也没关系。避免使用任何不推荐的方法，如果使用 pod，请检查在执行“pod 安装”时是否没有警告

## 猛撞

代码应该不会崩溃。你不需要对这个特性做任何测试，但是你应该确保它在打开的时候没有崩溃，或者可能破坏了其他东西。

## **代码重复**

有时开发人员不检查一个方法是否已经存在，而是创建一个新的方法。你应该确保没有不必要的代码被引入，如果有一个函数是为了某个特定的原因，每个人都应该使用同一个函数。还要删除所有不再需要的文件。

## PodFile

如果一个新的库被添加到 podFile 中，应该有一个好的理由。如果要添加新的库，应该与团队的其他成员进行讨论。

## 安全性和隐私

检查代码中忘记的用户名/密码。确保不敏感的数据被发送到第三方服务器，并且所有的调用都应该是 https。

## 单元测试

每个新特性都应该有足够的单元测试。每个单元测试都应该通过检查，并确保一些旧的测试没有被破坏。

## PromiseKit

如果你使用 PromiseKit，确保每个承诺都得到解决(完成或拒绝),不要让任何一个承诺悬而未决。

## 本地化字符串

检查添加的每个键(对于新字符串)是否在不同语言的所有字符串文件中，如果您删除了某些内容，您需要从所有本地化的字符串中删除它。

## 格式化程序

对于特定类型的数据，应用程序应该有相同的格式。例如，所有的日期都应该由日期格式化程序来处理，而不是作为字符串来处理。

如果您使用其他类型的数字格式化程序，如从 kb 到 mb 或从数字到十进制，那么在所有其他具有相同实现的屏幕中，您需要使用相同的格式化程序。

## 项目文件

这是一个棘手的问题。项目文件由于不同的原因而改变:你添加了一个新文件，你重命名了另一个文件，你改变了证书，你给你的目标添加了全局属性等等。你要小心这个。例如，如果您看到开发人员添加了一个文件，但在项目文件中似乎也删除了一些内容，那么您应该提醒他发生了一些事情(可能是错误的合并)

## 代码删除

当删除一段代码时，一定要删除不再使用的部分。例如，如果你有一个调用函数 b()的函数 a()，你删除了函数 a，那么如果函数 b 没有被任何人调用，你也应该删除它。没有未使用的代码应该留在项目中。

## 定时器

小心那些。如果开发人员出于某种原因需要使用计时器，那么他应该确保计时器在例如从特性中按下 back 或者你不再需要它之后停止。如果一个计时器永远运行，它将导致崩溃或内存泄漏。

## 拉请求配置

这主要是为了跟踪。公关应该是清晰的良好描述。你需要写下你的特性到底是做什么的，以及你是否改变了影响另一个特性的代码。如果可能的话，拉请求还应该有一个吉拉门票和相关的 Android 公关的链接(如果该功能将用于 Android 和 iOS 平台)

对于少于 10 个开发人员的团队，一个开发人员的批准可能是合适的(两个将是完美的)。拉请求通常不应该有太多行代码，因为更难审查。在新特性的情况下，有时你无法避免这一点，但是举例来说，如果你正在进行不同的 bug 修复，那么最好将拉请求分开，不要在同一个地方进行。

当 PR 被批准后，它可以被合并到开发分支中(在合并之前，请确保您将开发反向合并到您的分支中，这样您就不会有任何冲突，或者您错误地删除了一些已经合并到开发分支中的代码，但是您的分支中还没有这些代码)

*更多内容尽在*[*blog . dev genius . io*](http://blog.devgenius.io)*。*