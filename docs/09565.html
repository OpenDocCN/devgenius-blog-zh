<html>
<head>
<title>How To Access Clipboard in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 JavaScript 中访问剪贴板</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-access-clipboard-in-javascript-2f7f9739742?source=collection_archive---------10-----------------------#2022-08-29">https://blog.devgenius.io/how-to-access-clipboard-in-javascript-2f7f9739742?source=collection_archive---------10-----------------------#2022-08-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1b26" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在浏览器或 Node.js 中实现</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fdb5d198457fc0c6529e4f175e58fe10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MPQcW2o0ZHhPy03J"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@micheile?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> micheile dot com </a>拍摄的照片</figcaption></figure><p id="f173" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<a class="ae kv" href="https://caniuse.com/?search=Clipboard" rel="noopener ugc nofollow" target="_blank">现代浏览器</a>中，我们可以使用剪贴板 API。</p><p id="2ee1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将指定内容写入剪贴板:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="d747" class="lx ly iq lt b gy lz ma l mb mc">async function copy(text) {<br/>  await navigator.clipboard.writeText(text);<br/>}</span></pre><p id="8dfa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">读取剪贴板的内容:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="22ef" class="lx ly iq lt b gy lz ma l mb mc">async function paste() {<br/>  return navigator.clipboard.readText();<br/>}</span></pre><p id="ee9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单的权利，但要注意它只能在安全的上下文中使用，即本地服务或 HTTPS 服务。访问剪贴板时，浏览器还会弹出一个确认框:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi md"><img src="../Images/e67cc45f460b9cd87a11e9e97344bbe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*1sRU-8ob_m_LYn16WZlq4g.png"/></div></figure><p id="4735" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除此之外，如果有兼容性要求，需要使用已经弃用的<code class="fe me mf mg lt b"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand" rel="noopener ugc nofollow" target="_blank">Document.execCommand()</a></code> API，实现过程相对复杂。这是一些像<code class="fe me mf mg lt b"><a class="ae kv" href="https://github.com/sudodoki/copy-to-clipboard/blob/master/index.js#L18" rel="noopener ugc nofollow" target="_blank">copy-to-clipboard</a></code>这样的第三方库所做的。</p><p id="675c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来我们来说说如何在 Node.js 中访问剪贴板，我们可以使用子进程调用系统命令来实现。三个主要系统(Windows、Mac 或 Linux)有不同的命令，我将在本文中介绍:</p><div class="mh mi gp gr mj mk"><a href="https://levelup.gitconnected.com/how-to-access-the-system-clipboard-copy-paste-from-the-command-line-c8615d510ae2" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd ir gy z fp mp fr fs mq fu fw ip bi translated">如何从命令行访问系统剪贴板(复制/粘贴)</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">在 Windows，Mac，或者 Linux 上怎么做？</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my kp mk"/></div></div></a></div><p id="f2a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">别忘了我们需要判断当前环境是在哪个系统的入口文件中，我们可以用<code class="fe me mf mg lt b">node:process</code>来做一个简单的判断:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="0b79" class="lx ly iq lt b gy lz ma l mb mc">const process = require('node:process');</span><span id="2950" class="lx ly iq lt b gy mz ma l mb mc">console.log(process.platform);</span></pre><p id="9037" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe me mf mg lt b">process.platform</code>的值是 Mac 的<code class="fe me mf mg lt b">darwin</code>；<code class="fe me mf mg lt b">win32</code>用于 Windows<code class="fe me mf mg lt b">linux</code>针对 Linux。但是如果程序运行在 Linux 的 Windows 子系统中，我们也得到了<code class="fe me mf mg lt b">linux</code>，这就成问题了，我们可以用<code class="fe me mf mg lt b">is-wsl</code>库来区分。更详细的代码:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="914e" class="lx ly iq lt b gy lz ma l mb mc">const process = require('node:process');<br/>const isWSL = require('is-wsl');</span><span id="fc51" class="lx ly iq lt b gy mz ma l mb mc">const platform = (() =&gt; {<br/>  switch (process.platform) {<br/>    case 'darwin':<br/>      return 'Mac';<br/>    case 'win32':<br/>      return 'Windows';<br/>    case 'linux':<br/>      if (isWSL) {<br/>        return 'Windows';<br/>      }<br/>      return 'Linux';<br/>    default:<br/>      return '';<br/>  }<br/>})();</span><span id="0731" class="lx ly iq lt b gy mz ma l mb mc">console.log('platform: ', platform);</span></pre><p id="49f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">知道了运行平台，就可以使用 Node.js 中的<a class="ae kv" href="https://nodejs.org/api/child_process.html" rel="noopener ugc nofollow" target="_blank">子进程</a>来执行相应的命令。正如我在<a class="ae kv" href="https://levelup.gitconnected.com/how-to-access-the-system-clipboard-copy-paste-from-the-command-line-c8615d510ae2" rel="noopener ugc nofollow" target="_blank">中提到的，如果没有找到这些命令，你可能需要重新安装或者使用一些回退。</a></p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="8abb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nh">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nh">中等会员</em> </a> <em class="nh">。每月 5 美元，你可以无限制地访问媒体内容。如果你通过</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="nh">我的链接</em> </a> <em class="nh">报名，我会得到一点佣金。</em></p><p id="b5f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的支持对我来说非常重要——谢谢。</p></div></div>    
</body>
</html>