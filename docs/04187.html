<html>
<head>
<title>Adding Graphics to a React App with D3 — Shapes and Colors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 D3 向 React 应用程序添加图形—形状和颜色</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/adding-graphics-to-a-react-app-with-d3-shapes-and-colors-4617825df826?source=collection_archive---------4-----------------------#2021-02-06">https://blog.devgenius.io/adding-graphics-to-a-react-app-with-d3-shapes-and-colors-4617825df826?source=collection_archive---------4-----------------------#2021-02-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0c5103aa40bae51b12a5634fcc49b31c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*grEXE9l_ueDDPiUK"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">弗雷德里克·科贝尔在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e4c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">D3 让我们可以轻松地向前端 web 应用添加图形。</p><p id="461d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 是一个流行的前端 web 框架。</p><p id="55a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们合作得很好。在本文中，我们将了解如何使用 D3 为 Vue 应用添加图形。</p><h1 id="c04a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">形状</h1><p id="c551" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将带有 D3 的形状添加到 React 应用程序中。</p><p id="7d64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以使用<code class="fe me mf mg mh b">d3.arc</code>方法创建一个圆弧。</p><p id="0e9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6ad1" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="ef0c" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const arc = d3.arc().innerRadius(50).outerRadius(40).cornerRadius(15);</span><span id="d15d" class="mq lc iq mh b gy mv ms l mt mu">    const svg = d3.select("svg"),<br/>      width = +svg.attr("width"),<br/>      height = +svg.attr("height"),<br/>      g = svg<br/>        .append("g")<br/>        .attr("transform", `translate(${width / 2} , ${height / 2})`);</span><span id="c9e3" class="mq lc iq mh b gy mv ms l mt mu">    const data = [1, 1, 2, 3, 5, 8, 63, 31];<br/>    const arcs = d3.pie()(data);<br/>    g.selectAll("path")<br/>      .data(arcs)<br/>      .enter()<br/>      .append("path")<br/>      .style("fill", function (d, i) {<br/>        return d3.color(`hsl(120, 50%, ${d.value}%)`);<br/>      })<br/>      .attr("d", arc);<br/>  }, []);</span><span id="3b16" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;svg width="400" height="300"&gt;&lt;/svg&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="90ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们通过书写来创建弧:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ed1c" class="mq lc iq mh b gy mr ms l mt mu">const arc = d3.arc().innerRadius(50).outerRadius(40).cornerRadius(15);</span></pre><p id="e32c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们分别指定内半径、外半径和拐角半径。</p><p id="614b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从我们的<code class="fe me mf mg mh b">App</code>组件中得到<code class="fe me mf mg mh b">svg</code>元素。</p><p id="34fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到它的宽度和高度。</p><p id="a12a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们创建我们的<code class="fe me mf mg mh b">g</code>元素，这样我们就可以将弧线添加到我们的 SVG 中。</p><p id="e6a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过书写添加不同阴影的弧线:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="417c" class="mq lc iq mh b gy mr ms l mt mu">const data = [1, 1, 2, 3, 5, 8, 63, 31];<br/>const arcs = d3.pie()(data);<br/>g.selectAll("path")<br/>  .data(arcs)<br/>  .enter()<br/>  .append("path")<br/>  .style("fill", function(d, i) {<br/>    return d3.color(`hsl(120, 50%, ${d.value}%)`);<br/>  })<br/>  .attr("d", arc);</span></pre><p id="fd2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">data</code>有我们要添加的数据。</p><p id="f8e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">path</code>元素将有弧线。</p><p id="b9dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过在其中添加另一个<code class="fe me mf mg mh b">path</code>元素来添加弧线。</p><p id="f823" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">style</code>来改变每个弧的填充颜色。</p><p id="144c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">attr</code>来设置圆弧的<code class="fe me mf mg mh b">d</code>属性来添加它们。</p><h1 id="6be6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">颜色；色彩；色调</h1><p id="e5af" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">d3.color</code>方法创建一种颜色。</p><p id="391a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cbea" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="64c9" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const color = d3.color("green");<br/>    console.log(color);<br/>  }, []);</span><span id="5436" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="6c5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来创造颜色。</p><p id="f71f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">color</code>就是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="97ff" class="mq lc iq mh b gy mr ms l mt mu">{r: 0, g: 128, b: 0, opacity: 1}</span></pre><p id="250d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">color.rgb()</code>方法得到同样的结果:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a02d" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="dcbb" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const color = d3.color("green");<br/>    console.log(color.rgb());<br/>  }, []);</span><span id="0a50" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="a89a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">toString</code>得到颜色的字符串表示:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7a6f" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="e1fb" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const color = d3.color("green");<br/>    console.log(color.toString());<br/>  }, []);</span><span id="266e" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="6c42" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么控制台日志将记录:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="93b2" class="mq lc iq mh b gy mr ms l mt mu">rgb(0, 128, 0)</span></pre><h1 id="cafb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="4783" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用 D3 在 React 应用程序中添加形状和创建颜色。</p></div></div>    
</body>
</html>