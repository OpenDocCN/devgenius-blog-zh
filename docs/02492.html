<html>
<head>
<title>JavaScript Best Practices — Readability</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript最佳实践—可读性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-best-practices-readability-b40c5c431d10?source=collection_archive---------6-----------------------#2020-08-07">https://blog.devgenius.io/javascript-best-practices-readability-b40c5c431d10?source=collection_archive---------6-----------------------#2020-08-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/659e8c252b6e33708945d60020623868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MnfWW8sW7mWetpqc"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@thoughtcatalog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">思想目录</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="614d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些在编写JavaScript代码时应该遵循的最佳实践。</p><h1 id="16a4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要使用逻辑运算符作为语句</h1><p id="3afe" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该写聪明但难读的代码。</p><p id="19ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，类似于:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7ee3" class="mn lc iq mj b gy mo mp l mq mr">a() || b.foo.bar(); m &amp;&amp; c() ? d() : l || m.baz[bee](3);</span></pre><p id="6343" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是不可能读懂的。</p><p id="0e7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此应该避免这种情况。</p><h1 id="db4d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">总是在变量作用域的顶部声明变量</h1><p id="9cb4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将变量放在它们作用域的顶部:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="37de" class="mn lc iq mj b gy mo mp l mq mr">function calculate() {<br/>  let width, height, length;<br/>  // ...<br/>}</span></pre><p id="513b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，他们很容易看到，我们可以在任何地方与他们合作。</p><h1 id="5ccc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">重复使用的内联对象文字</h1><p id="1e9c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有一些变化重复使用的对象文字，我们可以把它们放在一个函数中。</p><p id="841c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="70c1" class="mn lc iq mj b gy mo mp l mq mr">function prepareRequest(mode, updateId, value) {<br/>  const req = {<br/>    mode,<br/>    updateId,<br/>    value,<br/>    uid: genUID()<br/>  };<br/>  //...<br/>}</span></pre><p id="23f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样我们就可以调用<code class="fe ms mt mu mj b">prepareRequest</code>并在任何地方使用它。</p><h1 id="07d8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">复杂的内联正则表达式</h1><p id="11ae" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">复杂的内联正则表达式是无法阅读的。</p><p id="3d09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="cbe2" class="mn lc iq mj b gy mo mp l mq mr">if (/^(([^&lt;&gt;()\[\]\\.,;:\s@"]+(\.[^&lt;&gt;()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(str)) {<br/>  // ... <br/>}</span></pre><p id="7c7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不知道它在检查什么。</p><p id="26b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们可以将它赋给变量，然后像这样使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1d84" class="mn lc iq mj b gy mo mp l mq mr">const emailRegex = /^(([^&lt;&gt;()\[\]\\.,;:\s@"]+(\.[^&lt;&gt;()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/</span><span id="e926" class="mn lc iq mj b gy mv mp l mq mr">if (emailRegex.test(str)) {<br/>  // ... <br/>}</span></pre><p id="e861" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们知道正则表达式实际上用于检查有效的电子邮件地址。</p><h1 id="fc3f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">处处严格平等</h1><p id="4a9d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">严格相等只是帮助我们避免自动数据类型强制的问题。</p><p id="14c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe ms mt mu mj b">==</code>或<code class="fe ms mt mu mj b">!=</code>操作符进行数据类型转换的规则很复杂。</p><p id="4024" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们应该使用<code class="fe ms mt mu mj b">===</code>和<code class="fe ms mt mu mj b">!==</code>操作符来分别检查等式和不等式。</p><p id="f1a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b794" class="mn lc iq mj b gy mo mp l mq mr">if (typeof x === 'string' &amp;&amp; x === 'abc') {<br/>  // ... <br/>}</span></pre><p id="dc38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比较它们的类型和价值。</p><h1 id="f9a4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">假设真实等于存在</h1><p id="d151" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该假设真实意味着某样东西存在于一个物体中。</p><p id="d787" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要检查一个键是否在一个对象中，我们应该使用<code class="fe ms mt mu mj b">hasOwnProperty</code>或<code class="fe ms mt mu mj b">in</code>操作符。</p><p id="d2f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7ca0" class="mn lc iq mj b gy mo mp l mq mr">if (!cache[key]) {<br/>  cache[key] = value;<br/>}</span></pre><p id="4d61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5637" class="mn lc iq mj b gy mo mp l mq mr">if (!cache.hasOwnProperty(key)) {<br/>  cache[key] = value;<br/>}</span></pre><p id="2c52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fec0" class="mn lc iq mj b gy mo mp l mq mr">if (!(key in cache)) {<br/>  cache[key] = value;<br/>}</span></pre><p id="4d84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">in</code>操作符也检查原型的属性。</p><h1 id="4f08" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不评论或评论每一件小事</h1><p id="b2a3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">没有评论和评论一切都是不好的。</p><p id="8d23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时有些事情需要解释，但代码中没有。</p><p id="aae6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，对代码已经涵盖的内容进行评论也是不好的。</p><h1 id="3e75" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不用单元测试，写一些可靠的东西</h1><p id="eeb8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">没有单元测试，很难写出可靠的东西。</p><p id="84ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们修改代码时，它们绝对能让我们安心。</p><h1 id="1ad0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用长名字和过于具体</h1><p id="450e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该有太长太具体的名字。</p><p id="9bd2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像这样的名字:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2515" class="mn lc iq mj b gy mo mp l mq mr">function generateNewtIDForANewRequestCacheItem() {...}<br/>function deleteRequestCacheItemsThatDoNotEqual(value) {...}</span></pre><p id="c16f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们肯定太长了，太具体了。</p><p id="1bb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们一定要想办法缩短它们的长度。</p><p id="0ef9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们有很多我们不需要的额外信息。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/9a3eea0f55685cec411ede33d89d5f0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iynQq9jqj9VDYkex"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@jamie452?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰米街</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><h1 id="11b8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="f0cb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该注意一些做法，使我们的代码更容易阅读。</p><p id="9d6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可能在一些好的实践中走极端。</p></div></div>    
</body>
</html>