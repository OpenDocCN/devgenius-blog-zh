<html>
<head>
<title>Navigator. Object that you must know.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">领航员。你必须知道的对象。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/navigator-object-that-you-must-know-b45a822a54c0?source=collection_archive---------8-----------------------#2022-10-21">https://blog.devgenius.io/navigator-object-that-you-must-know-b45a822a54c0?source=collection_archive---------8-----------------------#2022-10-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7608e69bd015562266bae4548d1db96b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3aR2exON4bDsiH2OKEJoAw.png"/></div></div></figure><p id="40e0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">JavaScript 为您提供了许多可以自动化和改进您的例程的对象。这是对象的<a class="ae kt" href="https://developer.mozilla.org/en-US/docs/Web/API" rel="noopener ugc nofollow" target="_blank">列表</a>,但是有时我们找不到可以解决我们问题的对象。在谈论导航器对象之前，我建议你看一下我们使用导航器的情况。</p><h1 id="90f4" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">1)添加复制信息的来源。</h1><p id="ffc2" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">今天，保护你的脑力劳动是非常重要的，navigator API 为剪贴板提供了这一点。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lx"><img src="../Images/cb426341e449ca9aa40f30fedf3bbedb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6nmoQ1GzvKYrl_TaXq-BGA.png"/></div></div></figure><p id="3abf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这段代码中，我们创建了一个<strong class="jx io"> copyText </strong>函数，然后在用户使用键盘时执行，如果用户按下了<strong class="jx io"> Ctrl </strong> + <strong class="jx io"> C </strong>我们从<strong class="jx io"> clipboard </strong>对象调用一个<strong class="jx io"> writeText </strong>方法，该对象是我们从<strong class="jx io"> navigator 获得的。</strong></p><h2 id="584e" class="mc kv in bd kw md me dn la mf mg dp le kg mh mi li kk mj mk lm ko ml mm lq mn bi translated">Navigator 为您提供了一个处理剪贴板 API。</h2><p id="2d29" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">有关剪贴板和导航器的所有信息，请阅读此。</p><h1 id="569d" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">2)自动检测用户的语言。</h1><p id="70a7" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">如果您想要更改可由用户浏览器语言转换的元素的行为，您可以使用<strong class="jx io">语言</strong>属性。</p><pre class="ly lz ma mb gt mo mp mq mr aw ms bi"><span id="4aaf" class="mc kv in mp b gy mt mu l mv mw">&lt;Wrapper disabed={navigator.language === 'de'}&gt;<br/> { <br/>  navigator.language === 'de' <br/>   ? "We don't support Deutsch language"  <br/>   : "Hello there!" <br/>}<br/>&lt;/Wrapper&gt;</span></pre><p id="4706" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这段代码中，如果当前语言是德语，我们将更改内容。</p><p id="acfd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你想检测一个用户的位置，你可以使用一个高级的<strong class="jx io">导航器。</strong></p><pre class="ly lz ma mb gt mo mp mq mr aw ms bi"><span id="e8ab" class="mc kv in mp b gy mt mu l mv mw">const options = {<br/> enableHighAccuracy: true,<br/> timeout: 5000,<br/> maximumAge: 0<br/>};<br/></span><span id="e7eb" class="mc kv in mp b gy mx mu l mv mw">function <strong class="mp io">success</strong>(pos: any) {<br/> const crd = pos.coords;<br/> console.<strong class="mp io">log</strong>(crd);<br/>} </span><span id="7aa4" class="mc kv in mp b gy mx mu l mv mw">navigator.geolocation.<strong class="mp io">getCurrentPosition</strong>(<br/> <strong class="mp io">success</strong>, () =&gt; '', options<br/>); </span></pre><p id="d300" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">而这段代码输出在控制台下一个对象中:</p><pre class="ly lz ma mb gt mo mp mq mr aw ms bi"><span id="d07b" class="mc kv in mp b gy mt mu l mv mw">accuracy: 4805.634862627858</span><span id="f303" class="mc kv in mp b gy mx mu l mv mw">altitude: null</span><span id="0323" class="mc kv in mp b gy mx mu l mv mw">altitudeAccuracy: null</span><span id="ddb5" class="mc kv in mp b gy mx mu l mv mw">heading: null</span><span id="3281" class="mc kv in mp b gy mx mu l mv mw"><strong class="mp io">latitude</strong>: 51.5469816</span><span id="90b1" class="mc kv in mp b gy mx mu l mv mw"><strong class="mp io">longitude</strong>: 46.0339043</span><span id="b9a1" class="mc kv in mp b gy mx mu l mv mw">speed: null</span></pre><p id="34c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由此我们需要获取一个<strong class="jx io">纬度</strong>和<strong class="jx io">经度来获取当前用户的位置。你为什么需要它？看你了:)</strong></p><h1 id="8c69" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">3)使用内置平台方法更新共享机制。</h1><p id="a731" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">您多久会看到一次复制一个部分/段落机制？通常，开发者不会让你这么做，但是即使你使用了它，你复制了网址，你会发送网址吗？</p><p id="f9f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">每个浏览器都可以引用您的本机平台 API，例如，如果您正在使用 Window 并使用本机共享机制，您将会看到:</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi my"><img src="../Images/a14587a12b63419f26546890f7d13823.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*z1uMTsxaA5bH6fsEHvIPrg.png"/></div></figure><p id="fb7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">看起来很棒，不是吗？对于这个导航器有一个<strong class="jx io">分享</strong>的方法。</p><pre class="ly lz ma mb gt mo mp mq mr aw ms bi"><span id="5035" class="mc kv in mp b gy mt mu l mv mw">&lt;div&gt;<br/> &lt;span onClick={() =&gt; {<br/>  navigator.<strong class="mp io">share</strong>({<br/>   title: 'Avicii - The Nights',<br/>   url: 'https://www.youtube.com/watch?v=UtF6Jej8yb4'<br/>  })<br/> }}&gt;share me!&lt;/span&gt;<br/>&lt;/div&gt;</span></pre><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/2c34f79d454a5cfe9640f1f069b98982.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*iMC-VesQpFeFpCoaZTQpUw.png"/></div></figure><p id="0922" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个机制也让你分享文件，如果你对此感兴趣的话，请看这个<a class="ae kt" href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/share#sharing_files" rel="noopener ugc nofollow" target="_blank">主题</a>。</p><h1 id="3cef" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">4)振动你的手机</h1><p id="09d8" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我不推荐这种机制，因为这打破了<strong class="jx io">用户隐私政治</strong>。我如何理解<strong class="jx io">用户隐私政治？</strong></p><blockquote class="na"><p id="bc2e" class="nb nc in bd nd ne nf ng nh ni nj ks dk translated"><strong class="ak">您的站点/应用程序必须只能在浏览器选项卡中运行，不能再运行了。与计算机内置方法绑定的外部浏览器逻辑如 GPS、振动和性能打破了这种政治</strong></p></blockquote><p id="070b" class="pw-post-body-paragraph jv jw in jx b jy nk ka kb kc nl ke kf kg nm ki kj kk nn km kn ko no kq kr ks ig bi translated">但无论如何你应该知道。</p><pre class="ly lz ma mb gt mo mp mq mr aw ms bi"><span id="ffcd" class="mc kv in mp b gy mt mu l mv mw">navigator.vibrate(200); // vibrate for 200ms</span><span id="a010" class="mc kv in mp b gy mx mu l mv mw">navigator.vibrate([100,30,100,30,100,30,200,30,200,30,200,30,100,30,100,30,100]); // Vibrate 'SOS' in Morse.</span></pre><blockquote class="np nq nr"><p id="e40f" class="jv jw ns jx b jy jz ka kb kc kd ke kf nt kh ki kj nu kl km kn nv kp kq kr ks ig bi translated">但这将在用户启用<a class="ae kt" href="https://developer.mozilla.org/en-US/docs/Web/Security/User_activation" rel="noopener ugc nofollow" target="_blank">粘性用户激活</a>后生效。</p></blockquote><h1 id="f8e9" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">5)你的应用主题的用户电池</h1><p id="36c4" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">有一种理论认为，如果电池电量不足，出租车公司会改变价格。我不建议你这样做，但无论如何，这可以改善你的用户界面和 UX。</p><pre class="ly lz ma mb gt mo mp mq mr aw ms bi"><span id="bc3d" class="mc kv in mp b gy mt mu l mv mw">const [battery, <strong class="mp io">setBattery</strong>] = <strong class="mp io">useState</strong>();</span><span id="3551" class="mc kv in mp b gy mx mu l mv mw"><strong class="mp io">useEffect</strong>(() =&gt; {<br/> window.navigator.<strong class="mp io">getBattery</strong>().<strong class="mp io">then</strong>(r =&gt; {<br/>  <strong class="mp io">setBattery</strong>(r.level * 100);<br/> });<br/>}, []);</span><span id="c6a1" class="mc kv in mp b gy mx mu l mv mw">return &lt;div&gt;<br/> {<br/>   battery &lt; 30 &amp;&amp; &lt;ul&gt;<br/>    &lt;li&gt;Unimportant information&lt;/li&gt;<br/>    &lt;li&gt;Unimportant information&lt;/li&gt;<br/>    &lt;li&gt;Unimportant information&lt;/li&gt;<br/>    &lt;li&gt;Unimportant information&lt;/li&gt;<br/>  &lt;/ul&gt;<br/> } <br/>&lt;/div&gt;</span></pre><p id="db13" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如你所看到的，这段代码我们隐藏了不必要的内容，以便快速制作和理解界面。<strong class="jx io">什么是不必要的内容？</strong>这些可以是添加、导航和块，它们可以被删除而不影响应用程序的主逻辑。</p><h1 id="f939" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">导航仪为什么这么杂，是什么？</h1><p id="7a8c" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated"><strong class="jx io">导航器</strong>是告诉你关于<strong class="jx io">用户代理</strong>的一切的对象，正如你所理解的，使用这个对象你可以改进你的代码和 UI/UX。但不幸的是，navigator 对象包含一些在某些浏览器中仍然不受支持的方法和字段。</p><p id="04a3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">拜拜，感谢阅读。</strong></p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/91d31c9bb4deb1f8d0fdebaa0e00021f.png" data-original-src="https://miro.medium.com/v2/resize:fit:534/1*K5b4MWJzA8G_xEsXyEHRTA.gif"/></div></figure></div></div>    
</body>
</html>