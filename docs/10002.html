<html>
<head>
<title>Git Log Tricks You Might Not Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你可能不知道的 Git 日志技巧</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/git-log-tricks-you-might-not-know-4cf2b746d1b7?source=collection_archive---------7-----------------------#2022-09-28">https://blog.devgenius.io/git-log-tricks-you-might-not-know-4cf2b746d1b7?source=collection_archive---------7-----------------------#2022-09-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cf6f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">它很简单，但有些功能很有用</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/203fbf8956da5e6dd74c5548b6d7d1d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*q8KxgFowhHsbAt-9"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Tobias Tullius 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="98e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当使用 Git 作为版本控制工具时，如果我们想看到一些提交日志信息，我们可以使用<code class="fe ls lt lu lv b">git log</code>命令，但是你可能忽略了它有许多强大的功能。在某些情况下，它比 IDE 或代码编辑器提供的 Git 面板更轻便、更易于使用。</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="43cb" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">提交限制</h1><p id="ad38" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">因为它可以列出提交日志，所以通常需要使用一些选项来过滤这些日志集合。</p><h2 id="27bd" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">1.限制提交输出的次数</h2><p id="4a84" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">默认情况下，它按时间倒序排列所有日志，但是可以使用以下选项限制输出数量:</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="c959" class="na me iq lv b gy nq nr l ns nt">-&lt;number&gt;<br/>-n &lt;number&gt;<br/>--max-count=&lt;number&gt;</span></pre><p id="d5bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单的例子:</p><pre class="kg kh ki kj gt nm lv nu bn nv nw bi"><span id="e250" class="nx me iq lv b be ny nz l oa nt"># Limits the number of commits to show to 3<br/>$ git log -3</span></pre><h2 id="bd97" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">2.按日期筛选提交</h2><p id="88a5" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">显示比特定日期更近的提交:</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="f4ae" class="na me iq lv b gy nq nr l ns nt">--since=&lt;date&gt;<br/>--after=&lt;date&gt;</span></pre><p id="871d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">显示早于特定日期的提交:</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="d147" class="na me iq lv b gy nq nr l ns nt">--until=&lt;date&gt;<br/>--before=&lt;date&gt;</span></pre><p id="e0ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单的例子:</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="13b0" class="na me iq lv b gy nq nr l ns nt"><strong class="lv ir">$ git log --after="2022-01-09"</strong></span><span id="10fc" class="na me iq lv b gy ob nr l ns nt"><strong class="lv ir">$ </strong><strong class="lv ir">git log --after="2020-01-09" --before="2020-09-20"</strong></span><span id="d699" class="na me iq lv b gy ob nr l ns nt"># Show the changes during the last two weeks<br/><strong class="lv ir">$ git log --since="2 weeks ago"<br/></strong></span><span id="61fb" class="na me iq lv b gy ob nr l ns nt"># Shows only today commits<br/><strong class="lv ir">$ git log --after="today"</strong></span></pre><h2 id="16bf" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">3.按作者筛选提交</h2><p id="7b2a" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">使用正则表达式匹配提交的作者/提交者:</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="4b2d" class="na me iq lv b gy nq nr l ns nt">--author=&lt;pattern&gt;<br/>--committer=&lt;pattern&gt;</span></pre><p id="cba0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单的例子:</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="56d8" class="na me iq lv b gy nq nr l ns nt"><strong class="lv ir">$ git log --author="Name"<br/></strong></span><span id="53dd" class="na me iq lv b gy ob nr l ns nt"># Filter out the author's commits in the past 2 weeks<br/><strong class="lv ir">$ git log --after="2 week ago" --author="Name"</strong></span></pre><h2 id="a891" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">4.过滤合并提交</h2><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="3952" class="na me iq lv b gy nq nr l ns nt"># Print only merge commits<br/><strong class="lv ir">$ git log --merges<br/></strong></span><span id="4913" class="na me iq lv b gy ob nr l ns nt"># Show the whole commit history, but skip any merges<br/><strong class="lv ir">$ git log --no-merges</strong></span></pre><h2 id="6e3b" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">5.自由匹配日志消息</h2><p id="ec53" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">将提交输出限制为日志消息与正则表达式匹配的输出。</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="177c" class="na me iq lv b gy nq nr l ns nt">--grep=&lt;pattern&gt;</span></pre><p id="4110" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单的例子:</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="f1d7" class="na me iq lv b gy nq nr l ns nt"><strong class="lv ir">$ git log --grep="ISSUE-4"</strong></span></pre><h2 id="ca3e" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">6.按文件或文件夹过滤提交</h2><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="1d1a" class="na me iq lv b gy nq nr l ns nt"><strong class="lv ir">$ git log main.c<br/></strong></span><span id="3240" class="na me iq lv b gy ob nr l ns nt"># Show the changes during the last two weeks to the file main.c<br/><strong class="lv ir">$ git log --since="1 weeks ago" -- main.c<br/></strong></span><span id="b941" class="na me iq lv b gy ob nr l ns nt"># Show all commits since version v1.8.0 that changed any file in the `src/Request` or `src/Response` subdirectories<br/><strong class="lv ir">$ git log v1.8.0.. src/Request src/Response</strong></span></pre><h2 id="7935" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">7.跟踪指定文本的演变</h2><p id="ef85" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">在<code class="fe ls lt lu lv b">&lt;file&gt;</code>内，追踪<code class="fe ls lt lu lv b">&lt;start&gt;</code>、<code class="fe ls lt lu lv b">&lt;end&gt;</code>或函数名 regex <code class="fe ls lt lu lv b">&lt;funcname&gt;</code>给出的行范围的演变。</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="f973" class="na me iq lv b gy nq nr l ns nt">-L&lt;start&gt;,&lt;end&gt;:&lt;file&gt;<br/>-L:&lt;funcname&gt;:&lt;file&gt;</span></pre><p id="f3df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单的例子:</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="5fb5" class="na me iq lv b gy nq nr l ns nt"># Shows how the function main() in the file main.c evolved over time<br/><strong class="lv ir">$ git log -L '/int main/',/^}/:main.c</strong></span></pre><h2 id="c45c" class="na me iq bd mf nb nc dn mj nd ne dp mn lf nf ng mp lj nh ni mr ln nj nk mt nl bi translated">8.显示分支之间的差异</h2><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="2111" class="na me iq lv b gy nq nr l ns nt"># Show the commits that are in the "develop" branch but not yet in the "master" branch<br/><strong class="lv ir">$ git log master..develop</strong><br/># Equivalent to<br/><strong class="lv ir">$ git log develop ^master<br/></strong></span><span id="8d63" class="na me iq lv b gy ob nr l ns nt"># Shows all commits that are in any of local branches but not in any of remote-tracking branches for origin<br/><strong class="lv ir">$ git log --branches --not --remotes=origin<br/></strong></span><span id="a581" class="na me iq lv b gy ob nr l ns nt"># Shows all commits that are in local master but not in any remote repository master branches<br/><strong class="lv ir">$ git log master --not --remotes="*/master"</strong></span></pre><h1 id="b0c1" class="md me iq bd mf mg oc mi mj mk od mm mn jw oe jx mp jz of ka mr kc og kd mt mu bi translated">提交排序</h1><p id="6a8b" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">默认情况下，提交按时间倒序显示。我们可以使用<code class="fe ls lt lu lv b">--reverse</code>选项以相反的顺序输出。</p><pre class="kg kh ki kj gt nm lv nn no aw np bi"><span id="db58" class="na me iq lv b gy nq nr l ns nt"># Display all commits in positive chronological order<br/><strong class="lv ir">$ git log --reverse</strong></span><span id="b272" class="na me iq lv b gy ob nr l ns nt"># Limit the number of outputs to 2, and reverse them<br/><strong class="lv ir">$ git log -2 --reverse</strong></span></pre><h1 id="2cb6" class="md me iq bd mf mg oc mi mj mk od mm mn jw oe jx mp jz of ka mr kc og kd mt mu bi translated">提交格式</h1><p id="ff67" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">最后，我们可以使用一些选项来格式化日志消息，比如<code class="fe ls lt lu lv b">git log --pretty=format:"%Cred %ar%n %Cblue %h -%Cgreen %s %n"</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/5675e50031bc1b49b27d4d7086749fbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xmcb84eOEIVL0UO2pXVZHQ.png"/></div></div></figure><p id="93d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它支持很多语法，可以查看<a class="ae kv" href="https://git-scm.com/docs/git-log#_commit_formatting" rel="noopener ugc nofollow" target="_blank">官方介绍</a>。</p><p id="04f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个有用的是<code class="fe ls lt lu lv b">--oneline</code>，是<code class="fe ls lt lu lv b">--pretty=oneline --abbrev-commit</code>的简写。<code class="fe ls lt lu lv b">git log --oneline</code>将输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/6473c564214b6313a84fffac4ee3c468.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aPLVBJ1AHNbgJ97b8Kv5eA.png"/></div></div></figure><h1 id="6267" class="md me iq bd mf mg oc mi mj mk od mm mn jw oe jx mp jz of ka mr kc og kd mt mu bi translated">参考</h1><p id="9d34" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">[1]<a class="ae kv" href="https://git-scm.com/docs/git-log" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/docs/git-log</a></p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><p id="454b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="oj">感谢阅读。如果你喜欢这样的故事，想支持我，请考虑成为</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="oj">中等会员</em> </a> <em class="oj">。它每月收费 5 美元，可以无限制地访问媒体内容。如果你通过</em> <a class="ae kv" href="https://medium.com/@islizeqiang/membership" rel="noopener"> <em class="oj">我的链接</em> </a> <em class="oj">报名，我会得到一点佣金。</em></p><p id="ddd4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你的支持对我来说非常重要——谢谢。</p></div></div>    
</body>
</html>