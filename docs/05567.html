<html>
<head>
<title>What does the terraform init command do?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">terraform init命令有什么作用？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-does-the-terraform-init-command-do-552c7d81ba7b?source=collection_archive---------0-----------------------#2021-09-10">https://blog.devgenius.io/what-does-the-terraform-init-command-do-552c7d81ba7b?source=collection_archive---------0-----------------------#2021-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bf8beda703ac0cb1af7d9b18b17b6673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MIPHAf7WokI6naeH4ajOrA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Benjamin Voros 在Unsplash上的原始照片。</figcaption></figure><p id="17d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在启动和运行Terraform时，您可能会使用的第一个命令是<code class="fe lb lc ld le b">terraform init</code>。</p><p id="e08e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您编写一个新的Terraform配置或从版本控制系统(如Github)中下载一个配置时，您可能会首先运行<code class="fe lb lc ld le b">terraform init</code>。本文将简要介绍它是什么以及为什么要运行它。</p><p id="886b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，<code class="fe lb lc ld le b">init</code>是<em class="lf"> initialize </em>的缩写，它所做的基本工作就在名字里:它初始化事物。</p><p id="c283" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">更具体地说，您正在初始化各种步骤来准备工作目录。</p><p id="f1aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，<code class="fe lb lc ld le b">terraform init</code>做的一件事就是验证和配置配置的<code class="fe lb lc ld le b">backend</code>(如果有的话)。如果那个<code class="fe lb lc ld le b">backend</code>改变了，那么在执行其他<code class="fe lb lc ld le b">terraform</code>命令如<code class="fe lb lc ld le b">plan</code>或<code class="fe lb lc ld le b">apply</code>之前，你必须再次运行<code class="fe lb lc ld le b">terraform init</code>。</p><p id="1b0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">terraform init</code>还在目录中查找配置中的<code class="fe lb lc ld le b">module</code>块，然后根据配置中<code class="fe lb lc ld le b">source</code>提供的参数追踪这些模块的源代码。这就构建出了模块树。</p><p id="0306" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">terraform init</code>做的另一个步骤是搜索提供者的配置，然后安装任何与提供者相关的插件。如果您想知道什么是提供商，我将引用Terraform的文档来快速解释:</p><blockquote class="lg lh li"><p id="84b8" class="kd ke lf kf b kg kh ki kj kk kl km kn lj kp kq kr lk kt ku kv ll kx ky kz la ij bi translated">Terraform依靠称为“提供商”的插件来与云提供商、SaaS提供商和其他API进行交互。</p><p id="7161" class="kd ke lf kf b kg kh ki kj kk kl km kn lj kp kq kr lk kt ku kv ll kx ky kz la ij bi translated">Terraform配置必须声明它们需要哪些提供者，以便Terraform可以安装和使用它们。此外，一些提供者需要配置(如端点URL或云区域)才能使用。</p></blockquote><p id="c7e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">— <a class="ae kc" href="https://www.terraform.io/docs/language/providers/index.html" rel="noopener ugc nofollow" target="_blank">供应商平台</a></p><p id="4229" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">terraform init</code>从公共Terraform注册中心或第三方注册中心查找并下载这些提供商。</p><p id="4cc2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">事实上，这是生成<code class="fe lb lc ld le b">.terraform.lock.hcl</code>的部分，您可能已经注意到，它是在您第一次运行<code class="fe lb lc ld le b">terraform init</code>时生成的。</p><p id="af2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个锁文件<code class="fe lb lc ld le b">.terraform.lock.hcl</code>的内容包含关于提供者的信息；在以后的命令运行中，Terraform将引用该文件，以便使用与文件生成时相同的提供程序版本。要了解更多细节，让我们再次参考Terraform文档:</p><blockquote class="lg lh li"><p id="2b3b" class="kd ke lf kf b kg kh ki kj kk kl km kn lj kp kq kr lk kt ku kv ll kx ky kz la ij bi translated">目前，依赖关系锁文件只跟踪<em class="iq">提供者</em>的依赖关系。Terraform不会记住远程模块的版本选择，因此Terraform将始终选择符合指定版本限制的最新可用模块版本。您可以使用<em class="iq">精确的</em>版本约束来确保Terraform总是选择相同的模块版本。</p></blockquote><p id="a7cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">— <a class="ae kc" href="https://www.terraform.io/docs/language/dependency-lock.html" rel="noopener ugc nofollow" target="_blank">依赖锁文件</a>上的Terraform文档</p><p id="29ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关于<code class="fe lb lc ld le b">terraform init</code>需要知道的另一件有用的事情是，多次运行是安全的。运行多次不会损坏任何东西，也不会有害。</p><p id="d87d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您运行<code class="fe lb lc ld le b">terraform init</code>时，您应该看到输出显示“Terraform已经成功初始化！”</p><p id="5b19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后它会鼓励您使用<code class="fe lb lc ld le b">terraform plan</code>，这可能是您想要运行的下一个命令。我将在以后的文章中讨论这个问题，但希望这个概述对Terraform的基础知识有所帮助。</p><div class="lm ln gp gr lo lp"><a href="https://tremaineeto.medium.com/membership" rel="noopener follow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd ir gy z fp lu fr fs lv fu fw ip bi translated">通过我的推荐链接加入媒体</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">tremaineeto.medium.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md jw lp"/></div></div></a></div></div></div>    
</body>
</html>