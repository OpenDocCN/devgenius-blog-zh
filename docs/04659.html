<html>
<head>
<title>Ansible for beginners: get started with IT automation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初学者必读:IT自动化入门</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ansible-for-beginners-get-started-with-it-automation-670f0d852268?source=collection_archive---------4-----------------------#2021-04-16">https://blog.devgenius.io/ansible-for-beginners-get-started-with-it-automation-670f0d852268?source=collection_archive---------4-----------------------#2021-04-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0e49db4bafe828a1c20f00c7ce93a8fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8SUkgKXE8OT0xt12i4PaA.png"/></div></div></figure><p id="38e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Ansible是一个简单、强大、无代理的工具，它简化了IT自动化流程，加快了开发工作。Ansible致力于帮助您自动化和配置您的基础设施，以节省时间和提高生产力。它简单明了、安全且功能强大，使其成为您组织内易于学习和实施的工具。今天，我们将讨论什么是Ansible，它做什么，关键术语，以及如何开始。</p><p id="9830" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">我们将介绍:</strong></p><ul class=""><li id="5302" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">什么是Ansible？</li><li id="c665" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">Ansible for DevOps的优势</li><li id="c825" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">Ansible的常见用例</li><li id="ac7c" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">关键可回答术语</li><li id="cfeb" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">Ansible入门</li><li id="315e" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">你学习的下一步</li></ul><h1 id="6d03" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">什么是Ansible？</h1><p id="a31f" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">Ansible是一个<strong class="jx io">开源编排和自动化工具</strong>，用于<strong class="jx io">软件供应、配置管理和应用部署</strong>。Ansible最早是在2012年由Cobbler和Func的创造者Michael DeHaan开发的。资助Ansible的公司于2015年被RedHat，Inc .收购。RedHat在2019年被IBM收购，所以现在，Ansible生活在IBM的保护伞下。</p><p id="7074" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Ansible运行在Windows和类似Unix的操作系统上，以代码的形式提供基础设施。它有自己的声明式编程语言用于管理和系统配置。它可以<strong class="jx io">连接像亚马逊AWS和微软Azure这样的云环境</strong>，帮助你管理和自动化你的基础设施和代码部署。</p><p id="b4b7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Ansible安装简单，很容易连接到客户端，并且包含许多功能。它是基于推的，通过SSH连接到客户端，所以它不需要客户端上的代理。通过将模块推送到客户机，客户机上的模块在本地执行，输出被推回到Ansible服务器。它使用SSH-Keys来简化连接客户端的过程。主机名、IP地址和SSH端口存储在清单文件中。一旦创建并填充了库存文件，Ansible就可以使用它了。</p><h1 id="bf84" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">Ansible for DevOps的优势</h1><p id="402b" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">Ansible是DevOps组织的首选工具，因为它<strong class="jx io">简化了自动化和灵活性</strong>。一些主要优势包括:</p><ul class=""><li id="3bdc" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">开源，免费使用</li><li id="a9c5" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">安装和使用不需要特殊的系统管理技能</li><li id="c78e" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">高度可定制</li><li id="fdcd" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">一致且轻便</li><li id="3b48" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">由于无代理功能和OpenSSH安全性的使用，非常安全</li><li id="07d7" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">全面的文档</li><li id="7dbc" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">平滑学习曲线</li><li id="4f51" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">使用Python构建，Python是最快、最健壮的编程语言之一</li><li id="1f31" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">版本控制和配置管理</li><li id="7aeb" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">可靠的部署</li></ul><h1 id="bdf6" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">Ansible的常见用例</h1><p id="b338" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">Ansible是一个功能强大的工具，有广泛的应用和用途，特别是将其连接到Docker环境或像AWS这样的云服务。Ansible的一些主要用例包括:</p><ul class=""><li id="a166" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">结构管理</li><li id="e767" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">应用程序开发和部署</li><li id="9023" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">软件和基础设施</li><li id="ad5f" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">IT、安全和网络自动化</li><li id="7a37" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">批量管理虚拟机，以确保每个虚拟机具有相同的配置</li><li id="7445" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">定义您在云中运行的服务器的配置，以便其他人可以轻松地阅读和使用它</li><li id="dd86" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">使用Ansible塔或AWX创建一个图形用户界面</li></ul><h1 id="af01" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">关键可回答术语</h1><p id="8504" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">既然我们已经讨论了Ansible的好处和常见用例，那么让我们熟悉一些Ansible的关键术语。</p><ul class=""><li id="24fc" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated"><strong class="jx io"> Ansible服务器:</strong>安装了Ansible的机器，运行所有的任务和剧本</li><li id="6cde" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">主机:</strong>你用Ansible管理的设备</li><li id="8238" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">剧本:</strong>一个定义可行自动化任务的框架(在YAML编写)</li><li id="01f8" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">剧本:</strong>剧本的执行</li><li id="a956" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">模块:</strong>在客户端执行的一个或一组命令</li><li id="7be2" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">任务:</strong>包含要执行的单个程序的部分</li><li id="67de" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">标签:</strong>可以分配给任务的名称</li><li id="3a55" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">处理程序:</strong>只有在通知程序存在时才调用的任务</li><li id="90e4" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">通知程序:</strong>分配给一个任务的部分，如果输出改变，它调用一个处理程序</li><li id="5c4d" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">清单:</strong>包含可解析的客户端-服务器数据的文件</li><li id="10f1" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">事实:</strong>使用收集事实操作从客户端的全局变量中检索到的信息</li></ul><h1 id="60ca" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">Ansible入门</h1><p id="1109" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">现在是时候了解该工具的一些基础知识了。我们将带您开始使用Ansible、Ansible行动手册和Ansible特别命令。</p><p id="8022" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请记住，使用Ansible，您有一个Ansible服务器和主机。Ansible服务器是安装Ansible的机器，主机是Ansible通过Ansible服务器处理的机器。Ansible服务器<strong class="jx io">可以处理多个主机</strong>。</p><p id="de65" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">可行的服务器要求:</strong></p><ul class=""><li id="36bd" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">Python 2 (2.7)或3 (3.5或更高版本)</li><li id="33e9" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">Ansible不支持Windows作为控制节点，但是你可以使用WSL在Windows 10上设置它</li></ul><p id="4100" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">主机要求:</strong></p><ul class=""><li id="559d" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">Python 2 (2.7)或3 (3.5或更高版本)</li></ul><blockquote class="mk ml mm"><p id="0612" class="jv jw mn jx b jy jz ka kb kc kd ke kf mo kh ki kj mp kl km kn mq kp kq kr ks ig bi translated"><strong class="jx io"> <em class="in">注:</em> </strong> <em class="in">设置您的Ansible环境的方式取决于您设备的要求。下一步是下载Ansible，然后配置和自动化您的体验。</em></p></blockquote><h1 id="b13b" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">翻译剧本</h1><p id="69b1" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">行动手册是Ansible的配置管理和协调自动化的基础。您可以在其中创建指令，以确定要在不同主机中执行的任务。</p><p id="315c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">剧本是<strong class="jx io">可重用的和可重复的</strong>，使得多次执行一个任务变得容易。剧本是用YAML语写的，并且有少量的语法。每个剧本由一个或多个剧本组成。</p><p id="fe49" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">每部戏至少定义两件事:</p><ul class=""><li id="435a" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">要执行的一个或多个任务</li><li id="98d8" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">您要定位的主机</li></ul><p id="5656" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一个游戏从定义<code class="fe ms mt mu mv b">hosts</code>行开始，这是一个或多个主机模式或由冒号分隔的组的列表。<code class="fe ms mt mu mv b">hosts</code>行后面是一个<code class="fe ms mt mu mv b">tasks</code>列表。Ansible将在指定的主机上依次执行任务，一次一个。</p><p id="f5ee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如，看看下面的行动手册:</p><pre class="mw mx my mz gt na mv nb nc aw nd bi"><span id="0088" class="ne li in mv b gy nf ng l nh ni">---<br/>- hosts: webservers<br/>       tasks:<br/>       - name: deploy code to webservers<br/>               deployment:<br/>                       path: {{ filepath }}<br/>                       state: present<br/>- hosts: dbserver<br/>       tasks:<br/>       - name: update database schema<br/>         updatedbschema:<br/>               host: {{ dbhost }}<br/>               state: present<br/>- hosts: webservers<br/>       tasks:<br/>       - name: check app status page<br/>               deployment:<br/>                       statuspathurl: {{ url }}<br/>                       state: present</span></pre><p id="2dcf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个剧本示例中，我们执行了三个剧本:我们将代码部署到web服务器，更新数据库模式，并检查应用程序状态页面。</p><h1 id="f45f" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">临时命令</h1><p id="bb10" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">临时命令是Ansible环境的另一个重要部分。它们用于在一台或多台主机上自动执行单个任务。</p><p id="4884" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它们提供了一种快速简单的自动化方法，但是它们并不意味着可重用性。临时命令对于临时任务非常有用。例如，如果您想在多台主机上重新启动一项服务，您可以使用一个特别的命令轻松实现。</p><p id="17ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">特殊命令的使用案例:</strong></p><ul class=""><li id="2b79" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">连通性测试</li><li id="b789" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">事实收集</li><li id="1489" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">管理文件和/或服务</li><li id="00a1" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">重启服务器</li></ul><p id="f201" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">不同的临时命令类型及其作用:</strong></p><ul class=""><li id="3f72" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated"><code class="fe ms mt mu mv b">file</code>:添加和/或删除目录</li><li id="07c8" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><code class="fe ms mt mu mv b">ping</code>:测试连通性</li><li id="7619" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><code class="fe ms mt mu mv b">stat</code>:检索关于目录的事实</li><li id="e0b9" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><code class="fe ms mt mu mv b">copy</code>:复制文件</li><li id="5e0f" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><code class="fe ms mt mu mv b">replace</code>:更新文件</li><li id="b876" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><code class="fe ms mt mu mv b">debug</code>:调试变量和表达式</li><li id="f4fd" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><code class="fe ms mt mu mv b">lookup</code>:从外部资源访问数据的插件</li></ul><p id="9018" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是一个<code class="fe ms mt mu mv b">stat</code>命令的例子，它检索关于目录的事实:</p><pre class="mw mx my mz gt na mv nb nc aw nd bi"><span id="8f88" class="ne li in mv b gy nf ng l nh ni">ansible localhost -m stat -a "path=/ansible"</span></pre><h1 id="cc8f" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">你学习的下一步</h1><p id="9227" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">祝贺您迈出Ansible的第一步！这个流行的工具非常适合现代DevOps环境，对于现有的开发人员来说也很容易学习。现在，您可以更深入地研究Ansible，了解更多关于以下主题的信息:</p><ul class=""><li id="1ae8" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">易变库存</li><li id="a32b" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">可变角色</li><li id="d2e9" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">可折叠集装箱</li><li id="97a4" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">更多</li></ul><p id="46b0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mn">快乐学习！</em></p></div></div>    
</body>
</html>