<html>
<head>
<title>Here is what I learnt from clean code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以下是我从干净代码中学到的东西</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/here-is-what-i-learnt-from-clean-code-fdb6c2050d10?source=collection_archive---------17-----------------------#2020-06-26">https://blog.devgenius.io/here-is-what-i-learnt-from-clean-code-fdb6c2050d10?source=collection_archive---------17-----------------------#2020-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7cdb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为软件开发人员，首要任务是编写干净的代码，而不是让代码工作。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/13679163e69464aeb6ba2d51cfe1f6ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eBg186Yg6bjE_8lq"/></div></div></figure><p id="fc93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我相信很多开发人员都有这样的时候，他们只想让代码可运行而不是可读。结果是一切都变得一团糟，你必须要么重构代码，要么重写项目。</p><p id="0469" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编写干净的代码并不容易，在项目中练习和重构需要时间。作为软件开发职业中的一员，<a class="ae kx" href="https://www.amazon.com/gp/product/B001GSTOAM/ref=dbs_a_def_rwt_hsch_vapi_taft_p1_i0" rel="noopener ugc nofollow" target="_blank"> <em class="ky">清理代码</em> </a>是必读书之一。以下是我在看书时的部分学习笔记。</p><h1 id="4c26" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">命名</h1><p id="c5c3" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi mc translated">使用一个有意义的名字，我们不需要通过一个好的名字来确保从未接触过你的代码的开发人员能够完全理解你的代码，我们必须做出一个好的名字，让其他开发人员能够更快地猜测和学习。</p><p id="f3ba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，命名不应误导他人，也应避免映射思维。</p><p id="3fcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">变量名应该有有意义的区别，例如，<em class="ky"> customerData </em>和<em class="ky"> customerInfo </em>没有区别，如果你选择了一个，使其一致。</p><p id="004b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同样，如果使用<em class="ky">获取</em>，<em class="ky">获取</em>，<em class="ky">获取</em>，确保一致。通常，如果我从API请求数据，我会用<em class="ky">获取</em>如果我从ViewModel调用方法，我会尝试<em class="ky">获取</em></p><p id="4df5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要用滑稽的名字。该名称应该是可读和可搜索的</p><p id="945d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类名应该是名词，方法名应该是动词</p><h1 id="1257" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">类别:</h1><p id="5256" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi mc translated">T21:一个班应该有信号责任，这意味着一个班做一种类型的任务。然后在具有不同函数的类中，每个函数执行一个小任务，这些函数一起完成类的工作</p><p id="c0a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保所有的函数和类都有适当的访问控制。如果该类不可继承，只需添加final关键字。如果函数不是从其他类调用的，我们应该添加private关键字。</p><p id="5de2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在课堂上，必须正确安排函数，并确保函数得到最大限度的利用。我们称之为凝聚力</p><p id="8d09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于不同的类，我们必须减少耦合，这意味着尽可能少的连接。更好的是，在类中，我们有几个公共函数暴露给外部对象，所有其他函数都是私有的。我们称之为脱钩。</p><p id="62dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你在设计这个类的时候，我们必须确保它在未来是可扩展的。当我们添加或删除不影响其他函数和变量的内容(函数和变量)时</p><p id="9694" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最好使用扩展从同一个类中的其他函数中创建一个新函数，或者使用父类或接口使类更有组织</p><h1 id="8164" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">机能</h1><p id="997e" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi mc translated"><span class="l md me mf bm mg mh mi mj mk di">为了</span>实现单一责任原则，该功能必须确保它只对一个功能起作用，并且该功能应尽可能少地使用代码来实现。</p><p id="9547" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，函数最好少于20行代码。对我来说，我总是使用函数式编程，可以使用map、flatmap、reduce来代替For-loop、If-else或Switch。</p><p id="773a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该函数的参数不应超过3个。请尽量减少参数的数量。如果你真的需要3个以上的参数，你可以包装成一个对象。</p><p id="fb50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了正确地命名函数，我们必须确保它能告诉我们函数在做什么，之后，我们必须确保函数名足够短。如果函数名太长无法解释，这意味着您可能需要将函数分成几个子函数。</p><p id="72d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如:如果函数名为<em class="ky">fetchAndProcessCustomerInfo()</em>，这意味着该函数正在执行多项任务。它必须分成两个函数:<em class="ky"> fetchCustomerInfo() </em>和<em class="ky"> processCustomerInfo() </em>。</p><p id="410d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">函数参数要越少越好，最好是0。这使得代码更具可读性和可测试性。假设你有3个测试参数，你需要考虑多少种情况？</p><p id="9e8b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要传递或返回null，你应该返回一个特殊的对象，一个空数组或抛出异常，而不是返回null。</p><p id="f4d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，错误处理是替换if-else语句的好方法。</p><p id="0039" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后也是最重要的，不要重复代码，如果发生了，提取代码到一个新的函数</p><h1 id="86cc" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">格式化</h1><p id="aa9c" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi mc translated">的确，对于每个类，代码的总数应该少于200行，否则，你必须考虑把类分成几个类</p><p id="f8a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有的变量和函数都必须正确分离。这里有一个流行的惯例:</p><p id="e812" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类变量—实例变量—构造函数—公共方法—私有方法。</p><p id="5ac0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在一个函数中，相关的概念必须在一个组中，并且组之间应该有一个空间。</p><p id="a09f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于代码的每一行，水平方向上，最多应该有100个字符。所有的操作符如==、=、+=、&gt;应该在前后加一个空格</p><p id="ea2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后:适当缩进</p><h1 id="3bf7" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第三方库</h1><p id="8059" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi mc translated">第三方库和用户之间总是存在冲突。库编码器总是一般化API，但是用户总是需要它满足特殊需求。因此，包装第三方库API很重要。</p><p id="738d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你学习第三方库时，用TDD学习是很重要的。基本上，你只需编写测试来测试API，并不断添加新代码和重构旧代码，以使测试最终通过。通过这样做，当库被更新时，将更容易发现API缺陷，然后我们可以快速修复它。</p><p id="9770" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们和不同的团队一起工作，并且我们必须依赖其他团队的API来继续工作，对团队来说，通过嘲笑API来快速前进比只是挂在那里什么都不做更重要</p><h1 id="3956" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">测试代码和生产代码一样重要！</h1><p id="2700" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi mc translated">有了最好的单元测试，我们可以毫无顾虑地更新代码。测试驱动开发(TDD)已经被推荐了很长时间，但是似乎仍然没有很多公司采用它。</p><p id="4ab5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用TDD，你必须总是写测试代码而不是生产代码。显然，第一个测试将会失败，因为您没有生产代码。然后，您必须编写min代码才能通过测试。之后，您可以重构代码以正确通过测试</p><p id="2a8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">测试代码应该是可读的，因为有时开发人员会阅读测试代码以快速理解代码</p><p id="0a85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有的测试函数名称都应该以一个测试开始，让系统能够识别它。遵循建设-运营-检查模式是很好的。每个测试都有一个断言或者一个包含多个断言的概念</p><p id="5a98" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">单元测试的5个向量:</p><ul class=""><li id="9c15" class="ml mm iq jp b jq jr ju jv jy mn kc mo kg mp kk mq mr ms mt bi translated">快:它必须跑得快</li><li id="82b0" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">独立:测试不能依赖于其他测试的结果</li><li id="e8c3" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">可重复:测试应该在任何环境中通过</li><li id="0f10" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">自我验证:我们应该直接告诉测试人员结果</li><li id="741e" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">及时:我们应该在生产代码之前创建单元测试</li></ul><h1 id="d40b" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">结论:</h1><p id="cfc9" class="pw-post-body-paragraph jn jo iq jp b jq lx js jt ju ly jw jx jy lz ka kb kc ma ke kf kg mb ki kj kk ij bi translated">让我们总结一下干净代码的好处:</p><ul class=""><li id="f7d3" class="ml mm iq jp b jq jr ju jv jy mn kc mo kg mp kk mq mr ms mt bi translated">你的代码是可读的，你可以自由地休假，不用担心你的同事总是给你打电话。</li><li id="fd9f" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">项目架构变得更加清晰和可扩展。有了单元测试，你就有信心告诉你的产品负责人这个特性是可以实现的。</li><li id="4ec2" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">您的团队成员可以通过阅读您的干净代码快速向您学习。当你的团队中有了一个新成员，把你的干净代码交给他们阅读对他们来说是个不错的主意。</li><li id="8f77" class="ml mm iq jp b jq mu ju mv jy mw kc mx kg my kk mq mr ms mt bi translated">您的项目越来越少出现错误，而且大多数错误都很容易发现。</li></ul><p id="6616" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">同样，编写干净的代码是困难的。为了坚持这些原则，您需要持续关注细节，并愿意承认您的代码总是可以改进的——即使它以前工作得很好。</p></div></div>    
</body>
</html>