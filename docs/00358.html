<html>
<head>
<title>How to Create a Reusable Localization Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建可重用的本地化框架</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-create-a-reusable-localization-framework-2454c9df13e0?source=collection_archive---------2-----------------------#2020-06-04">https://blog.devgenius.io/how-to-create-a-reusable-localization-framework-2454c9df13e0?source=collection_archive---------2-----------------------#2020-06-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/bf32559050815d088fb8633069a5a63a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AnSInp-TyV_0hTKQmtgqvA.png"/></div></div></figure><p id="f673" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您正与支持同一公司的多个应用程序和平台的开发团队合作，或者正在编写包含本地化的开源框架。</p><p id="bfff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">建议在框架中提供可重用的本地化，以扩大您的潜在客户群。</p><p id="786a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">集中化本地化将简化本地化过程并确保一致性。</p><p id="a0c2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，您将学习创建一个可重用的本地化框架<strong class="jx io"> LocalizationFramework </strong>和<strong class="jx io">T3】在<strong class="jx io"> MyLocalizedApp中使用它，</strong>使用<strong class="jx io"> Swift </strong>和<strong class="jx io"> CocoaPods </strong>。</strong></p><h1 id="ddcf" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">入门指南</h1><p id="f24a" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated"><a class="ae lw" href="https://github.com/ysadiq/MyLocalizedApp-starter" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">下载启动器项目</strong> </a>。然后，构建并运行<strong class="jx io"> MyLocalizedApp </strong>。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/64af8b8c60d05231d541fff52ec34616.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*ZlGr2C4xNkgjkHqP_g44tg.png"/></div></figure><p id="b7e7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你会看到一个简单的应用程序，有两个标签。目前，这款应用仅支持<strong class="jx io">英语</strong>语言。首先，您将创建可重用的本地化框架。</p><h1 id="d71d" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">创建本地化框架</h1><p id="b0a8" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">创建一个框架很简单，就像创建一个新的应用程序项目，你只需要选择<strong class="jx io">框架</strong>而不是<strong class="jx io">单视图应用程序。</strong></p><p id="f662" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开Xcode，文件→新建→项目，然后勾选<strong class="jx io">框架</strong>，命名为<strong class="jx io">本地化框架</strong>。保存在<strong class="jx io"> MyLocalizedApp-starter </strong>文件夹<strong class="jx io"> </strong>所在的同一个根文件夹下。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/e0fb5283236a593bcf7213f2e3d25c8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*M_pZEKd14QRZR7JVs5Mixg.gif"/></div></div></figure><h1 id="cf59" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">添加新本地化</h1><p id="d333" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">默认情况下，Xcode会生成英语作为主要本地化语言。你应该添加<strong class="jx io">阿拉伯语</strong>如下图。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/b2e7470ecaf813355641be7f9c62c7cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nU6DJOw_mUrqYspshvPqcQ.gif"/></div></div></figure><h1 id="4f43" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">添加可本地化的字符串文件</h1><p id="ec5e" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated"><strong class="jx io"> Localizable.strings </strong>文件是您添加翻译数据作为键值对的地方。</p><p id="4ea8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<strong class="jx io"> LocalizationFramework </strong>中创建一个<strong class="jx io"> Localizable.strings </strong>文件，如下所示。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/16f9021c90c7d52a970691c7b7076edd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lN60zrX0TUv0325JNe0SgQ.gif"/></div></div></figure><p id="4bb6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您有了一个<strong class="jx io"> Localizable.strings </strong>文件，但是它没有被本地化。接下来，您将对其进行本地化。</p><h2 id="8ca1" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">本地化<strong class="ak">可本地化字符串</strong></h2><p id="5076" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">要将<strong class="jx io"> Localizable.strings </strong>本地化为英语和阿拉伯语，选择文件并按下Xcode右侧<strong class="jx io">文件检查器</strong>中的<strong class="jx io">本地化</strong>按钮，如下图所示。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/d1ab54f5410aa96e0c3e00b396abefd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lpJfg1qHS8DkJF7P3sAf6A.gif"/></div></div></figure><p id="849d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将在<em class="mp">/localization framework</em><strong class="jx io">en . lproj</strong>和<strong class="jx io"> ar.lproj </strong>文件夹下创建两个<strong class="jx io"> Localizable.strings </strong>文件夹。每个文件夹包含一个单独的<strong class="jx io">字符串</strong>文件。</p><h2 id="86ed" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">向字符串文件添加内容</h2><p id="0cea" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">打开<strong class="jx io">localizable . strings(English)</strong>，添加以下按键。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="f166" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，将以下键添加到<strong class="jx io"> Localizable.strings(阿拉伯语)</strong></p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="d416" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些是您需要在<strong class="jx io"> MyLocalizedApp </strong>中为每个UI元素设置的值。</p><h1 id="6b65" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">创建本地化。swift</h1><p id="5dff" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在<strong class="jx io">/</strong>localization framework<strong class="jx io">，</strong>创建<strong class="jx io"> Localization.swift </strong>，并添加以下代码。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="cc45" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是上述代码中每个带编号的注释所发生的情况:</p><ol class=""><li id="8a72" class="ms mt in jx b jy jz kc kd kg mu kk mv ko mw ks mx my mz na bi translated">这包装了localizedString，允许您对任何字符串值调用<code class="fe nb nc nd ne b">.localized()</code>来查找本地化。</li><li id="01f0" class="ms mt in jx b jy nf kc ng kg nh kk ni ko nj ks mx my mz na bi translated">为要提供的本地化定义公共常数的枚举。</li></ol><p id="7f08" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您的本地化框架已经准备好了，很简单，对吗？！🤔</p><p id="f456" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，您将为您的框架创建一个pod。</p><h1 id="1934" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">创建本地化框架窗格</h1><p id="fc02" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在构建iOS应用程序时添加第三方库是一种常见的场景，管理它们的最佳方式是使用一个<em class="mp">依赖管理器</em>，如<a class="ae lw" href="https://cocoapods.org/" rel="noopener ugc nofollow" target="_blank"> <em class="mp"> CocoaPods </em> </a>。</p><p id="180b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您将使用<strong class="jx io"> CocoaPods </strong> <em class="mp"> </em>创建一个pod，并使从本地pod(开发pod)安装<strong class="jx io">本地化框架</strong>框架成为可能。</p><p id="014c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，打开终端，导航到<strong class="jx io"> LocalizationFramework </strong>所在的路径。键入以下内容以创建pod。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/557dc2015b3f56b4d07b179e1c9f3a81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Mid3lZLGy70gePW-2y6a9g.gif"/></div></div></figure><p id="6195" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您应该看到在localization framework . pod spec处创建的<em class="mp">规范，以确保已经创建了一个pod。</em></p><h2 id="a5be" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">配置本地化框架Podspec</h2><p id="4ef4" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">转到<strong class="jx io"> LocalizationFramework </strong>文件夹，将<strong class="jx io">localization framework . pod spec</strong>内容替换为以下内容。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="7974" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注:</strong>要了解podspec语法，请查看<strong class="jx io"> Cocoapods </strong>参考:<a class="ae lw" href="https://guides.cocoapods.org/syntax/podspec.html#specification" rel="noopener ugc nofollow" target="_blank">https://guides . cocoa pods . org/syntax/pod spec . html # specification</a></p><p id="7b2d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太好了！💪🏽您创建了您的本地化pod。接下来，您将把您的本地化窗格链接到<strong class="jx io"> MyLocalizedApp </strong>中。</p><h1 id="98f0" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">向应用程序添加LocalizationFramework</h1><p id="421c" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">现在，关闭<strong class="jx io"> Xcode </strong>，然后打开终端，导航到<strong class="jx io"> MyLocalizedApp </strong>所在的路径。键入<strong class="jx io"> <em class="mp"> pod init </em> </strong>来创建一个<em class="mp"> Podfile。</em></p><p id="4a07" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开<strong class="jx io"> MyLocalizedApp </strong>文件夹中的<strong class="jx io">pod文件</strong>，包含<strong class="jx io">localization framework</strong>pod，如下图所示:</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="9dbb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里您指定了<strong class="jx io"> LocalizationFramework </strong>的podspec文件所在的路径。假设<strong class="jx io"> LocalizationFramework </strong>项目的根文件夹就是<strong class="jx io"> MyLocalizedApp </strong>项目文件夹所在的位置。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="50ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:如果你看到上面的错误，请确认<strong class="jx io"> LocalizationFramework </strong>文件夹存在于<strong class="jx io"> MyLocalizedApp </strong>的同一级中，并且在<em class="mp"> LocalizationFramework/中存在一个podspec文件。</em></p><p id="c6fb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，返回到终端并键入<strong class="jx io"> <em class="mp"> pod install </em> </strong>来安装<strong class="jx io">MyLocalizedApp</strong>sole dependency。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/c924342bddb77abd75b1aa851b18ab8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*KXcgjIEjL-Rrlr0b75nmMw.gif"/></div></div></figure><p id="2024" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，打开<strong class="jx io">mylocalizedapp . xc workspace</strong>(不是MyLocalizedApp.xcodeproj)，你应该会发现LocalizationFramework添加到了Pods/Development Pods中。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/e484da9d5a8246b691056eb017bfcde6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TaK1oVJiAc1ltvRDMgnMpQ.gif"/></div></div></figure><h2 id="1d65" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">使用本地化框架</h2><p id="ed8b" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">太好了，现在你应该把你的可重用的<strong class="jx io">本地化框架</strong>投入使用了。</p><p id="51db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开<strong class="jx io"> ViewController.swift </strong>:</p><ol class=""><li id="95bc" class="ms mt in jx b jy jz kc kd kg mu kk mv ko mw ks mx my mz na bi translated">导入<strong class="jx io">本地化框架</strong></li><li id="ca11" class="ms mt in jx b jy nf kc ng kg nh kk ni ko nj ks mx my mz na bi translated">并用<strong class="jx io">本地化</strong>枚举替换出口静态字符串。</li></ol><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/c80843964b3b9dec36c690b1e5031458.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*xkZPKOj1ICsMi2qwbO_IWg.gif"/></div></div></figure><p id="e11d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">构建并运行。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/12ba4bbf9f52bbfa3c5122ad4ce0809b.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*DHwJPaAdxF9zZgzLb8JP4A.png"/></div></figure><p id="ae03" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">哎呀！😲内容在哪里？</p><h2 id="b4f9" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">为什么本地化内容缺失？</h2><p id="2c65" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">问题出在<strong class="jx io"> Localization.swift. </strong></p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="917c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如上所示，字符串扩展包装的<strong class="jx io"> localizedString(:) </strong>正在使用应用程序的主包。而<strong class="jx io"> Localizable.strings </strong>在框架的捆绑包中。</p><p id="771d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要修复它，你需要添加<strong class="jx io"> bundle </strong>扩展来获取框架的Bundle，而不是<strong class="jx io"> Bundle.main </strong>来获取应用的Bundle。</p><h2 id="c049" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">添加包扩展</h2><p id="a1f2" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">打开<strong class="jx io"> LocalizationFramework </strong>项目，创建<strong class="jx io">localization framework+bundle . swift</strong>。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="4b15" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里您使用框架的包标识符来获得正确的包。如果失败，它会退回到主包。</p><p id="8d53" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:<em class="mp">org . cocoapods . localization framework</em>是<strong class="jx io"> LocalizationFramework的包标识符，</strong>您应该将其更改为pod目标设置中定义的任何值。</p><h2 id="1621" class="md ku in bd kv me mf dn kz mg mh dp ld kg mi mj lh kk mk ml ll ko mm mn lp mo bi translated">使用本地化框架包</h2><p id="7882" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">打开<strong class="jx io"> Localization.swift </strong>，将<strong class="jx io"><em class="mp">bundle . main</em></strong><em class="mp"/>替换为<strong class="jx io"><em class="mp">bundle . localization framework</em></strong><em class="mp">，如下图。</em></p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="7d2b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，打开<strong class="jx io">终端</strong>，<strong class="jx io"> </strong>和<strong class="jx io"> </strong>再次安装<strong class="jx io"> MyLocalizedApp </strong>，这样<strong class="jx io">localization framework+bundle . swift</strong>被添加到<strong class="jx io"> MyLocalizedApp中。</strong></p><p id="487f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">清理<strong class="jx io"> MyLocalizedApp </strong>，然后构建并运行。</p><p id="3a77" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:在CocoaPods开发中，除非进行一次干净的构建，否则pod不会被更新。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/2e9a476f94a9e410033d74c03f0ac3f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*xLLquGkVEYLs58VZVrVgxw.png"/></div></figure><p id="3742" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完美！😎你成功地连接了框架。现在的问题是，本地化行得通吗？接下来，您将测试阿拉伯语本地化内容。</p><h1 id="1566" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">测试阿拉伯语内容</h1><p id="63d2" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">编辑<strong class="jx io"> MyLocalizedApp </strong>的方案，使用<strong class="jx io">阿拉伯语</strong>作为应用程序语言，如下所示。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/6bc89fdd94befa478c15d492c985d475.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pm-zWkMLa4njQY4qiW-cmA.gif"/></div></div></figure><p id="9610" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">构建并运行。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/a41593c5c1f9a3f318f552f846c26792.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*HC0E5fGWnPVKo84_JSgV4w.png"/></div></figure><p id="4661" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">瞧啊。👏🏽您的本地化框架是可重用的，应用程序是本地化的。</p><p id="63b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你几乎完成了，最后一步是让应用程序选择一种首选语言，如果它运行在切换到法语或任何其他语言的iPhone上。</p><h1 id="033f" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">定义首选语言</h1><p id="d244" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">又😏，编辑<strong class="jx io"> MyLocalizedApp </strong>的方案，使用<strong class="jx io">法语</strong>作为应用语言。</p><p id="87ad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">构建并运行。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/12ba4bbf9f52bbfa3c5122ad4ce0809b.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*DHwJPaAdxF9zZgzLb8JP4A.png"/></div></figure><p id="17de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如上所示，本地化框架没有找到指定的键。因为<strong class="jx io"> Localizable.strings(法语)</strong>文件不存在。</p><p id="e514" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，您可以通过支持iOS中的所有语言来解决这个问题😝或者选择一种首选语言。</p><p id="e6f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开<strong class="jx io"> LocalizationFramework </strong>中的<strong class="jx io">localization framework+Bundle</strong>，将<strong class="jx io"><em class="mp">current language(of:)</em></strong><em class="mp"/>静态函数替换为下面的。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="3354" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是上面代码中发生的情况:</p><ol class=""><li id="d334" class="ms mt in jx b jy jz kc kd kg mu kk mv ko mw ks mx my mz na bi translated">提取<strong class="jx io">本地化框架</strong>支持的所有语言。</li><li id="930e" class="ms mt in jx b jy nf kc ng kg nh kk ni ko nj ks mx my mz na bi translated">如果当前应用程序语言不在支持的语言列表中，则将<strong class="jx io"> currentLanguage </strong>设置为首选语言。</li></ol><p id="2e45" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">清理<strong class="jx io"> MyLocalizedApp </strong>，然后构建并运行。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/64af8b8c60d05231d541fff52ec34616.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*ZlGr2C4xNkgjkHqP_g44tg.png"/></div></figure><p id="6e8e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">厉害！🥳</p><h1 id="db2a" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">从这里去哪里？</h1><p id="8683" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">下载完成版本的<a class="ae lw" href="https://github.com/ysadiq/MyLocalizedApp" rel="noopener ugc nofollow" target="_blank"> app </a>和<a class="ae lw" href="https://github.com/ysadiq/LocalizationFramework" rel="noopener ugc nofollow" target="_blank">框架</a>。</p><p id="b7f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望你喜欢这个教程。如果你有任何问题或意见，不要犹豫，只要把它放在这里🤗。</p></div></div>    
</body>
</html>