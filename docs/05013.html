<html>
<head>
<title>How to create a real-time search using debounce in react.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在react.js中使用去抖创建实时搜索</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-create-a-real-time-search-using-debounce-in-react-js-846a62ad2198?source=collection_archive---------0-----------------------#2021-06-03">https://blog.devgenius.io/how-to-create-a-real-time-search-using-debounce-in-react-js-846a62ad2198?source=collection_archive---------0-----------------------#2021-06-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ac40d1497fbef36d04daf0345804c10c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kAq-07ncvklrVo0ClrjOfA.jpeg"/></div></div></figure><p id="f1fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本文展示了如何在react应用程序中使用去抖动来创建实时搜索功能，其中搜索结果会随着用户的输入而实时更新。</p><p id="a044" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">我们在建造什么？</strong></p><p id="1298" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将创建一个搜索页面，其中包含一个搜索框(用户在其中输入查询)和一个包含搜索结果的列表(随着用户输入而实时更新)。</p><p id="24aa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">看起来像这样…</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kt"><img src="../Images/14762f1cc604a6e732de8cae57f41ec3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZ2lkiMfJzaSHgF2N7E3AQ.png"/></div></div></figure><p id="cc16" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们从创建一个react项目开始-</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="104d" class="ld le in kz b gy lf lg l lh li">&gt; npx create-react-app my-app <br/>&gt; cd my-app <br/>&gt; npm start</span></pre><p id="cc7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是这个项目的结构</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/251b07573d23cfc07b32775917164e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*WQulrsSSR1N47piZjet3aw.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">我们react应用的项目结构</figcaption></figure><p id="ea3f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由于本文关注的是前端，我们将只使用一个公共API(而不是创建我们自己的API ),它返回一个啤酒列表，给定啤酒名称作为查询参数。</p><p id="5fe4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> API终点</strong>——<a class="ae lo" href="https://api.punkapi.com/v2/beers" rel="noopener ugc nofollow" target="_blank">https://api.punkapi.com/v2/beers</a></p><p id="3a6b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">查询参数</strong> —啤酒名称(字符串)</p><p id="2028" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> API文件</strong>——<a class="ae lo" href="https://punkapi.com/documentation/v2" rel="noopener ugc nofollow" target="_blank">https://punkapi.com/documentation/v2</a></p><p id="a958" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，让我们创建一个文件utils.js，它导出从API获取响应的函数。</p><p id="beef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> utils.js </strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="9df1" class="ld le in kz b gy lf lg l lh li">export const BASE_URL = 'https://api.punkapi.com/v2';</span><span id="154d" class="ld le in kz b gy lp lg l lh li">/* This function takes query as a param and returns the array of beer objects.*/</span><span id="142c" class="ld le in kz b gy lp lg l lh li">export const fetchSearchResults = async query =&gt; {</span><span id="1a78" class="ld le in kz b gy lp lg l lh li">if (query &amp;&amp; query.length &gt; 0) {</span><span id="918a" class="ld le in kz b gy lp lg l lh li">/* replaces all whitespaces in the query with + symbol in order to <br/>send it as a query param in the GET request */<br/>const parsedQuery = query.replaceAll(' ', '+');</span><span id="d745" class="ld le in kz b gy lp lg l lh li">const url = `${BASE_URL}/beers?beer_name=${parsedQuery}`;</span><span id="550d" class="ld le in kz b gy lp lg l lh li">const res = await fetch(url);.search-container {<br/>display: flex;<br/>justify-content: center;<br/>margin-bottom: 24px;<br/>}</span><span id="0640" class="ld le in kz b gy lp lg l lh li">.search-container input {</span><span id="48d4" class="ld le in kz b gy lp lg l lh li">height: 32px;<br/>width: 300px;<br/>padding: 0px 12px 0px 12px;<br/>}</span><span id="a1dc" class="ld le in kz b gy lp lg l lh li">const resJson = res.json();</span><span id="8b87" class="ld le in kz b gy lp lg l lh li">return resJson;</span><span id="1ff8" class="ld le in kz b gy lp lg l lh li">} else {</span><span id="5f92" class="ld le in kz b gy lp lg l lh li">return [];</span><span id="d687" class="ld le in kz b gy lp lg l lh li">}</span><span id="2ce1" class="ld le in kz b gy lp lg l lh li">};</span></pre><p id="2a8d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们需要我们的列表项，所以让我们创建一个组件<strong class="jx io"> ListItem </strong>。</p><p id="32ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> ListItem.js </strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="cce2" class="ld le in kz b gy lf lg l lh li">import React from 'react';<br/>import './ListItem.css';</span><span id="6dde" class="ld le in kz b gy lp lg l lh li">const ListItem = ({ title, caption, imageUrl }) =&gt; {</span><span id="c576" class="ld le in kz b gy lp lg l lh li">return (</span><span id="e968" class="ld le in kz b gy lp lg l lh li">&lt;div class="list-item-container"&gt;<br/> &lt;div className="left"&gt;<br/>  &lt;img src={imageUrl} className="thumbnail" /&gt;<br/> &lt;/div&gt;<br/> &lt;div className="center"&gt;<br/>  &lt;h4&gt;{title}&lt;/h4&gt;<br/>  &lt;p&gt;{caption}&lt;/p&gt;<br/> &lt;/div&gt;<br/> &lt;div className="right"&gt;<br/>  &lt;p&gt;&amp;#8250;&lt;/p&gt;<br/> &lt;/div&gt;<br/>&lt;/div&gt;</span><span id="e55a" class="ld le in kz b gy lp lg l lh li">);<br/>};</span><span id="d015" class="ld le in kz b gy lp lg l lh li">export default ListItem;</span></pre><p id="74c9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> ListItem.css </strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="8b1e" class="ld le in kz b gy lf lg l lh li">.list-item-container {<br/> display: flex;<br/> padding: 8px;<br/> border-bottom: 1px solid #e6e6e6;<br/>}</span><span id="8d34" class="ld le in kz b gy lp lg l lh li">.center {<br/> flex: 4;<br/>}</span><span id="8ec5" class="ld le in kz b gy lp lg l lh li">.left {<br/> flex: 1;<br/> display: flex;<br/> justify-content: center;<br/>}</span><span id="d8c7" class="ld le in kz b gy lp lg l lh li">.right {<br/> flex: 0.2;<br/>}</span><span id="6cfc" class="ld le in kz b gy lp lg l lh li">.right p {<br/> font-size: 32px;<br/> color: #000;<br/>}</span><span id="43a5" class="ld le in kz b gy lp lg l lh li">.thumbnail {<br/> width: 10px;<br/>}</span><span id="992a" class="ld le in kz b gy lp lg l lh li">p,h4 {<br/> margin-block-start: 0px;<br/> margin-block-end: 8px;<br/> font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;<br/>}</span><span id="11eb" class="ld le in kz b gy lp lg l lh li">h4 {<br/> font-weight: 600;<br/>}</span><span id="1464" class="ld le in kz b gy lp lg l lh li">p {<br/> color: #a1a1a1;<br/>}</span></pre><p id="7c0a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们还需要一个搜索框，用户可以输入查询，</p><p id="753e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> SearchInput.js </strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="9fa9" class="ld le in kz b gy lf lg l lh li">import React from 'react';</span><span id="f807" class="ld le in kz b gy lp lg l lh li">import './SearchInput.css';</span><span id="2724" class="ld le in kz b gy lp lg l lh li">const SearchInput = ({ value, onChangeText }) =&gt; {</span><span id="53bf" class="ld le in kz b gy lp lg l lh li">React.useEffect(() =&gt; {<br/>  <br/>  /* Adds an event listener which fires whenever the value of our <br/>  input field changes and call the onChangeText function passed<br/>  in as a prop to our component */<br/>  let input = document.querySelector('input');<br/>  input.addEventListener('input', onChangeText);<br/>  <br/>  /* Don't forget to return a cleanup function */  <br/>  return input.removeEventListener('input', onChangeText);<br/> <br/> }, []);</span><span id="bacc" class="ld le in kz b gy lp lg l lh li">return (<br/> &lt;div class="search-container"&gt;<br/>  &lt;input<br/>   type="text"<br/>   value={value}<br/>   onChange={onChangeText}<br/>   placeholder="Search beer by name"<br/>  /&gt;<br/> &lt;/div&gt;<br/>);</span><span id="6a3e" class="ld le in kz b gy lp lg l lh li">};</span><span id="97e7" class="ld le in kz b gy lp lg l lh li">export default SearchInput;</span></pre><p id="fe88" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> SearchInput.css </strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="0c3d" class="ld le in kz b gy lf lg l lh li">.search-container {<br/> display: flex;<br/> justify-content: center;<br/> margin-bottom: 24px;<br/>}</span><span id="c86b" class="ld le in kz b gy lp lg l lh li">.search-container input {<br/> height: 32px;<br/> width: 300px;<br/> padding: 0px 12px 0px 12px;<br/>}</span></pre><p id="3065" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">到目前为止我们所做的- </strong></p><ol class=""><li id="29cc" class="lq lr in jx b jy jz kc kd kg ls kk lt ko lu ks lv lw lx ly bi translated">定义一个函数来调用API并返回结果。</li><li id="a554" class="lq lr in jx b jy lz kc ma kg mb kk mc ko md ks lv lw lx ly bi translated">创建一个将呈现单个搜索结果的ListItem。</li><li id="f299" class="lq lr in jx b jy lz kc ma kg mb kk mc ko md ks lv lw lx ly bi translated">创建用户可以输入查询的搜索输入。</li></ol><p id="1588" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下一步是在App.js中呈现这些组件，并调用我们的fetchSearchResults函数来获得结果。</p><p id="f075" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> App.js </strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="16a3" class="ld le in kz b gy lf lg l lh li">import React from 'react';<br/>import './style.css';<br/>import { fetchSearchResults } from './utils';<br/>import ListItem from './components/ListItem';<br/>import SearchInput from './components/SearchInput';</span><span id="cf8c" class="ld le in kz b gy lp lg l lh li">export default function App() {</span><span id="71ce" class="ld le in kz b gy lp lg l lh li">const [query, setQuery] = React.useState('');<br/>const [results, setResults] = React.useState([]);</span><span id="3b65" class="ld le in kz b gy lp lg l lh li">const fetchData = async () =&gt; {<br/>  const res = await fetchSearchResults(query);<br/>  setResults(res);<br/>};</span><span id="f7f0" class="ld le in kz b gy lp lg l lh li">React.useEffect(() =&gt; {<br/>  fetchData();<br/>}, [query]);</span><span id="9156" class="ld le in kz b gy lp lg l lh li">return (<br/>&lt;div&gt;<br/> &lt;SearchInput<br/>  value={query}<br/>  onChangeText={e =&gt; {<br/>  setQuery(e.target.value);<br/>  }}<br/> /&gt;<br/> {results.map((result, index) =&gt; (<br/>  &lt;div key={index}&gt;<br/>   &lt;ListItem<br/>    title={result.name}<br/>    imageUrl={result.image_url}<br/>    caption={result.tagline}<br/>   /&gt;<br/>  &lt;/div&gt;<br/> ))}<br/>&lt;/div&gt;<br/>);<br/>}</span></pre><p id="76b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是整个画面—</p><ol class=""><li id="bcf8" class="lq lr in jx b jy jz kc kd kg ls kk lt ko lu ks lv lw lx ly bi translated">最初，我们只是让搜索输入框呈现在屏幕上，因为<code class="fe me mf mg kz b">results</code>状态数组是空的。</li><li id="0caf" class="lq lr in jx b jy lz kc ma kg mb kk mc ko md ks lv lw lx ly bi translated">当用户输入查询时，附加到输入框的事件监听器触发并调用带有事件细节的<code class="fe me mf mg kz b">onChangeText</code>函数，我们从中获取搜索框的当前值，并将其设置为状态变量<code class="fe me mf mg kz b">query</code> <strong class="jx io">的值。</strong></li><li id="afce" class="lq lr in jx b jy lz kc ma kg mb kk mc ko md ks lv lw lx ly bi translated">每当<code class="fe me mf mg kz b">query</code>的值改变时，对useEffect的回调执行<code class="fe me mf mg kz b">fetchData()</code>,其结果填充到<code class="fe me mf mg kz b">results</code>数组中。</li><li id="1651" class="lq lr in jx b jy lz kc ma kg mb kk mc ko md ks lv lw lx ly bi translated">一旦<code class="fe me mf mg kz b">results</code>数组有了一些条目，react就会为数组的每个成员渲染<code class="fe me mf mg kz b">&lt;listItem /&gt;</code>。</li></ol><p id="af98" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们有我们的实时搜索工作，但有一个问题。让我们在我们的<code class="fe me mf mg kz b">fetchData()</code>中添加一个<code class="fe me mf mg kz b">console.warn('fetching')</code>并运行。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/7394637ff5d73489f0a7a1af71d18aec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/format:webp/1*HMYbtRgImeO-uTUbQIY0aQ.png"/></div></figure><p id="9092" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe me mf mg kz b">fetchData</code>对长度为5的查询运行五次。</p><p id="4dc7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">问题是，每当用户输入一个字符或删除一个字符时，它都会向后端发送一个API请求。太多的请求，这是不可取的，尤其是当你处理大规模的产品时。</p><p id="73b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">所以，解决方案——去抖。</strong></p><p id="a96a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">去抖是让一个函数在一定的时间间隔内只触发一次的行为。关于javascript中去抖的更详细解释，请参考文章<a class="ae lo" href="https://www.freecodecamp.org/news/javascript-debounce-example/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">去抖——如何在JavaScript中延迟一个函数(JS ES6示例)</strong></a><strong class="jx io"/>by<a class="ae lo" href="https://www.freecodecamp.org/news/author/ondrej/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">Ondrej polen sky</strong></a><strong class="jx io">。</strong></p><p id="12b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">例如，我们希望<code class="fe me mf mg kz b">fetchData()</code>函数等待一段时间(以毫秒为单位),以便它只在用户输入一些字符后触发，而不是在输入框的每次编辑后触发。</p><p id="0d07" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装<code class="fe me mf mg kz b">lodash.debounce</code></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="9302" class="ld le in kz b gy lf lg l lh li">$ npm i --save lodash.debounce</span></pre><p id="813d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们通过将<code class="fe me mf mg kz b">fetchData</code>函数作为回调传递给<code class="fe me mf mg kz b">lodash.debounce</code>提供的<code class="fe me mf mg kz b">debounce(fn, milliseconds)</code>来消除它的抖动。</p><p id="ef45" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">app . js内部— </strong></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="c89f" class="ld le in kz b gy lf lg l lh li">...</span><span id="c342" class="ld le in kz b gy lp lg l lh li">import debounce from 'lodash.debounce';</span><span id="c377" class="ld le in kz b gy lp lg l lh li">const fetchData = async (query, cb) =&gt; {<br/> const res = await fetchSearchResults(query);<br/> cb(res);<br/>};</span><span id="e9d8" class="ld le in kz b gy lp lg l lh li">const debouncedFetchData = debounce((query, cb) =&gt; {<br/> fetchData(query, cb);<br/>}, 500);</span><span id="689e" class="ld le in kz b gy lp lg l lh li">export default function App() {</span><span id="61e2" class="ld le in kz b gy lp lg l lh li">const [query, setQuery] = React.useState('');<br/>const [results, setResults] = React.useState([]);</span><span id="36f5" class="ld le in kz b gy lp lg l lh li">React.useEffect(() =&gt; {<br/> debouncedFetchData(query, res =&gt; {<br/>  setResults(res);<br/> });<br/>}, [query]);</span><span id="6c81" class="ld le in kz b gy lp lg l lh li">return (...);<br/>}</span></pre><p id="7d7f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们修改了<code class="fe me mf mg kz b">fetchData</code>函数，以接受查询字符串和回调函数作为其参数，并执行回调函数。注意，回调函数也接受API结果数组作为参数。</p><p id="770b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe me mf mg kz b">debouncedFetchData</code>是指<code class="fe me mf mg kz b">debounce()</code>返回的<code class="fe me mf mg kz b">fetchData</code>的去抖版本。</p><p id="1759" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，<code class="fe me mf mg kz b">fetchData</code>已被移出功能组件，并且<code class="fe me mf mg kz b">debouncedFetchData</code>也被定义在组件外。这样做是因为功能组件中的局部变量在重新渲染时不会被保留。</p><p id="60ef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，每当<code class="fe me mf mg kz b">query</code>的值改变时，我们在<code class="fe me mf mg kz b">useEffect</code>内调用<code class="fe me mf mg kz b">debounceFetchData</code>，将<code class="fe me mf mg kz b">query</code>和<code class="fe me mf mg kz b">seResults</code>回调函数作为参数传入。</p><p id="7fa6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就这样，结束了。让我们来看看不同之处——</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/388694486260a8d33c14a9b8df968b78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*y6oxTVTPe4lRePGtZXX1Dw.png"/></div></figure><p id="9804" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，<code class="fe me mf mg kz b">fetchData</code>对于长度为5的字符串只被调用一次，而以前它是针对每个字符被调用的。</p></div><div class="ab cl mj mk hr ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ig ih ii ij ik"><p id="bfba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是完整的源代码—</p><div class="mq mr gp gr ms mt"><a href="https://stackblitz.com/edit/react-debounce-search?embed=1&amp;file=src/App.js" rel="noopener  ugc nofollow" target="_blank"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd io gy z fp my fr fs mz fu fw im bi translated">反应-去抖-搜索-堆栈</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">导出到create-react-app CLI的React应用程序的启动项目。</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">stackblitz.com</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh jt mt"/></div></div></a></div></div><div class="ab cl mj mk hr ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ig ih ii ij ik"><p id="b956" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢阅读，我希望你觉得这篇文章有趣。</p><p id="2f94" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ni">如果您觉得这篇文章有帮助，请点赞并分享。在</em> <a class="ae lo" href="https://medium.com/@iprashant2402" rel="noopener"> <em class="ni">中</em> </a> <em class="ni">上关注我，以便在我发表新文章时获得定期更新。也可以在</em><a class="ae lo" href="https://www.linkedin.com/in/prashant-singh-a51574123" rel="noopener ugc nofollow" target="_blank"><em class="ni">LinkedIn</em></a><em class="ni">上联系我，查看我的</em><a class="ae lo" href="https://www.github.com/iprashant2402" rel="noopener ugc nofollow" target="_blank"><em class="ni">Github</em></a><em class="ni">。</em></p><p id="1f8f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ni">另外，我很乐意听到你的任何反馈。</em></p></div></div>    
</body>
</html>