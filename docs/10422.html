<html>
<head>
<title>Rack Awareness Mechanism</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机架感知机制</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/rack-awareness-mechanism-1e75d05defac?source=collection_archive---------22-----------------------#2022-10-31">https://blog.devgenius.io/rack-awareness-mechanism-1e75d05defac?source=collection_archive---------22-----------------------#2022-10-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0118251c718dc0c5f76a7dd0c338b63b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*EgSxl2drDNwCci3AAuzrtg.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">希望！如果我能把我的东西放得这么有条理😁</figcaption></figure><p id="4d84" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们正在通过 HDFS (Hadoop 分布式文件系统)进行⚓航行，我们已经了解了数据节点和名称节点以及如何处理它们的故障。在上一篇<a class="ae kx" href="https://medium.com/@prikshitsingla78/handling-name-node-failures-fced6552b52d" rel="noopener">文章</a>中，我们学习了如何处理名称节点故障，以及如何使用辅助名称节点来恢复它。</p><p id="1db3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，名称节点和数据节点是物理硬件机器，它们需要被放置在世界上的某个位置🌍地图。但我们不能把它们放在任何我们想放的地方，因为它们包含的数据对我们来说至关重要。我们需要系统地放置它们，它应该遵循一个结构。那么，今天让我们来了解我们应该如何安排它们，以及这个术语<strong class="kb io">机架感知机制</strong>如何帮助我们实现这一点。</p><h1 id="9190" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">行李架</h1><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/8bf4d76648ae85654d12dc2169cf7a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*oRvp3pjHvJ9KXeyyYbmxNQ.jpeg"/></div></figure><p id="894b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">机架就像我们家里的鞋架，但我们将放置数据节点，而不是将鞋子放在这个机架中。从技术上讲，机架是指放置在不同地理位置的一组系统。不同的地理位置意味着世界上不同的位置。我们将更加详细地理解为什么我们需要在不同的位置存储数据。</p><h1 id="9b2d" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">复制管道</h1><p id="33ef" class="pw-post-body-paragraph jz ka in kb b kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw ig bi translated">让我们看图表来了解机架。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/c5ca9d0d33e44b4bd1fd5d68a57ad278.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*FPtr_9EyJfUOYPao8KsINQ.png"/></div></figure><p id="839a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，正如我们在图中看到的，孟买位置机架将数据块 1 存储在不同的数据节点中。这与我们学习数据节点故障时的情形相同，我们讨论了默认情况下为 3 的复制系数，正如您在这里看到的，3 个数据块存储在 3 个不同的数据节点中，但它们放在一个机架中。这是存储数据的正确方法吗？如果发洪水怎么办🌊或者其他自然灾害🌋发生在孟买，因此我们存储数据的地方已经无法访问。这将非常糟糕，因为我们的数据将会丢失。那么正确的方法是什么🙄。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/e6ca0e61da5e0f1986399663b2d1faaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*N0xM9beksy6C9xOwyKyU_A.png"/></div></figure><p id="5ae1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是正确的方法吗？我们已经防止了数据遭受自然灾害，但是将数据块转发到新位置需要大量的网络带宽，涉及更多的 I/O 操作，而在同一机架内转发数据块需要较少的网络带宽，涉及较少的 I/O 操作。因此，将每个副本放在不同的机架中并不是一个理想的解决方案，因为带宽会更大，需要更多的时间和更多的 I/O 操作。现在让我们看看正确的选择。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/c9235490ab6e9d5893c1f4c993e78111.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*8vuB2uzXhMgUoQDEM1qbtA.jpeg"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Uff 终于！😪</figcaption></figure><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/207e6d6ba80708509a59b45f8c5d7677.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*Pnl6U_eUYAHDUmimzc5fxg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">平衡的那个！</figcaption></figure><p id="b091" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">平衡的方法是将副本放在两个不同的机架中。一个副本在一个机架中，另外两个在不同的机架中，反之亦然。这将防止我们在同一位置存储数据，也将降低网络带宽，意味着更少的 I/O 操作。</p><p id="69bf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们终于了解了机架感知机制，现在让我们继续前进。</p><h1 id="9bce" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">我们如何知道数据块是否损坏？</h1><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mi"><img src="../Images/10b717e69f972b67f728f6ffc60c3a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ckLYb94DP4d01WN0A_FMHg.jpeg"/></div></div></figure><p id="7307" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">每个数据节点以固定的频率向名称节点发送块报告，指示是否有任何块被破坏。如果数据块被破坏，那么复制因素就会出现，在 Rack Algos 的帮助下，副本会被复制。</p><h1 id="1c6f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">如何实现名称节点的高可用性？</h1><p id="16f4" class="pw-post-body-paragraph jz ka in kb b kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw ig bi translated">当我们学习处理名称节点故障时，我们已经学习了共享位置，这是使您的名称节点更长时间可用的第一种方法。第二种方法是使用 QJM(定额杂志经理)。我不会在这里介绍 QJM，但是你仍然可以在这里阅读相关内容，也可以观看视频。</p><h1 id="e03a" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">网关/边缘节点</h1><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/0403f8cbc3c4ae345a19b2828e53d3e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RstKHVoYBtDY03bMuaqWfQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">每次我访问边缘/网关节点时，我都感觉像步入了幻想🦄</figcaption></figure><p id="318a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们登录到 Hadoop 集群中的网关/边缘节点。它为您提供了一个与 Hadoop 集群对话的接口。这是一台完全独立的机器，其配置方式使得它可以连接到 Hadoop 集群。如果您的公司需要 Hadoop 集群。他们会给你访问边缘节点的权限。他们将为您提供边缘节点的 IP 地址，您需要使用公司 Hadoop 管理员提供的正确密码和用户名登录。</p><p id="e26b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们对机架感知机制和边缘节点的讨论到此结束。我们已经完成了基本的理论知识，接下来是我们开始行动的时候了，首先让我们在系统上安装 Hadoop，然后开始动手操作。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/d8b9b2ba297d3a98a333e827d78fa857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fGzxRJ_BOMe7XX71OKmNnQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">是时候采取一些行动了，请继续关注🔥🔥</figcaption></figure><p id="f4fd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">干杯🤗读者们，如果你们已经走了这么远..</strong></p><p id="755a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">让我们暂时结束这篇博客吧！</strong></p><p id="6d8a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">谢谢！为了阅读。</strong></p><p id="867e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你喜欢这个博客，请鼓掌回应👏</p><p id="3dee" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">跟随..☺️ </strong> <a class="ae kx" href="https://medium.com/@prikshitsingla78" rel="noopener"> <strong class="kb io">我</strong> </a> <strong class="kb io">更多这样有见地的 articles✍️ </strong></p><p id="5676" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">请在评论中分享你的想法，并请分享对需要改进的部分的反馈，以便我下次改进。</p><p id="518c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">祝大家有美好的一天！</p></div></div>    
</body>
</html>