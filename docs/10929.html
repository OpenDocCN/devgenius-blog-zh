<html>
<head>
<title>Bitcoin: How to Query for Sending and Receiving Addresses in BigQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币:如何在 BigQuery 中查询收发地址</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/bitcoin-how-to-query-for-sending-and-receiving-addresses-in-bigquery-3d930cb64dc3?source=collection_archive---------12-----------------------#2022-12-07">https://blog.devgenius.io/bitcoin-how-to-query-for-sending-and-receiving-addresses-in-bigquery-3d930cb64dc3?source=collection_archive---------12-----------------------#2022-12-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="4d3e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">继<a class="ae ki" href="https://medium.com/@vivbellavita/query-bitcoin-blockchain-for-active-addresses-in-bigquery-be440f362dd9" rel="noopener">上一篇文章</a>之后，我们将探讨如何使用 BigQuery 在比特币区块链上查询收发地址。通过本文，您将更好地了解如何使用 BigQuery 分析比特币交易数据，并深入了解可用于各种目的的发送和接收地址活动，包括投资分析和欺诈检测。</p><p id="a728" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">发送地址计数是指作为资金发送方处于活动状态的唯一地址的数量。只有在成功的非零传输中作为发件人处于活动状态的地址才被计算在内。</p><p id="1e42" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接收地址计数是指作为资金接收方处于活动状态的唯一地址的数量。只有在成功的非零传输中作为接收方活动的地址才被计算在内。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/b0d8e735576f0ec94009941a724b908f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8_IzvzU4_uTeBbSVfQh5Ew.jpeg"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">比特币发送和接收</figcaption></figure><h1 id="f105" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第一步</h1><p id="516e" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">转到 BigQuery 上的<strong class="jm io">编辑器</strong>字段。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mc"><img src="../Images/dcf9eaa58784e84a1b826a2b68985847.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pwLp27oFC4HKAJ0Q1obUtQ.png"/></div></div></figure><h1 id="5a8f" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第二步</h1><p id="95a2" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">在<strong class="jm io">编辑器</strong>字段中，复制以下发送地址的查询。</p><p id="f82b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该查询计算每天比特币交易中使用的唯一发送地址的数量。</p><p id="7f5b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们创建一个公共表表达式(CTE) <code class="fe md me mf mg b">sending_addresses</code>，它为来自<code class="fe md me mf mg b">bigquery-public-data.crypto_bitcoin.inputs</code>的每笔比特币交易选择日期和输入地址。</p><p id="82d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们创建一个 CTE <code class="fe md me mf mg b">sending_addresses_grouped_by_date</code>，它按日期对来自<code class="fe md me mf mg b">sending_addresses</code>的结果进行分组，并计算每个日期的唯一发送地址的数量。</p><pre class="kk kl km kn gt mh mg mi bn mj mk bi"><span id="e7c6" class="ml la in mg b be mm mn l mo mp">WITH sending_addresses AS (<br/>   -- input addresses<br/>   SELECT DATE(block_timestamp) AS date,<br/>    array_to_string(inputs.addresses, ",") as address FROM `bigquery-public-data.crypto_bitcoin.inputs` as inputs<br/>    WHERE DATE(block_timestamp) &gt; "2009-01-01" AND DATE(block_timestamp) &lt;= DATE_SUB(CURRENT_DATE(), INTERVAL 1 DAY)<br/>),<br/><br/>sending_addresses_grouped_by_date as (<br/>  SELECT date, COUNT(DISTINCT address) as sending_addresses_count<br/>  FROM sending_addresses<br/>  GROUP BY date<br/>  ORDER BY date<br/> )<br/><br/>SELECT date, sending_addresses_count FROM sending_addresses_grouped_by_date</span></pre><h1 id="46c1" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第三步</h1><p id="d7ad" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">在<strong class="jm io">编辑器</strong>字段中，复制以下接收地址的查询。</p><p id="bcb7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该查询计算每天比特币交易中使用的唯一接收地址的数量。</p><p id="c83f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个查询中，区块链的数据是从<code class="fe md me mf mg b">bigquery-public-data.crypto_bitcoin.outputs</code>获得的。此表包含有关比特币交易输出的信息。</p><pre class="kk kl km kn gt mh mg mi bn mj mk bi"><span id="1b5e" class="ml la in mg b be mm mn l mo mp">WITH receiving_addresses AS (<br/>  -- credits<br/>   SELECT DATE(block_timestamp) AS date,<br/>    array_to_string(outputs.addresses, ",") as address FROM `bigquery-public-data.crypto_bitcoin.outputs` as outputs<br/>   WHERE date &gt; "2015-01-01" AND date &lt;= DATE_SUB(CURRENT_DATE(), INTERVAL 1 DAY)<br/>),<br/><br/><br/>receiving_addresses_grouped_by_date as (<br/>  SELECT date, COUNT(DISTINCT address) as receiving_addresses_count<br/>  FROM receiving_addresses<br/>  GROUP BY date<br/>  ORDER BY date<br/> )<br/><br/>SELECT date, receiving_addresses_count FROM receiving_addresses_grouped_by_date</span></pre><p id="d343" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以参考 BigQuery 中的<a class="ae ki" href="https://medium.com/@vivbellavita/query-bitcoin-blockchain-for-active-addresses-in-bigquery-be440f362dd9" rel="noopener">查询比特币区块链活动地址，了解这段源代码中用到的函数的解释。</a></p><h1 id="b075" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">最后的想法</h1><p id="3ae8" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">这里显示的查询提供了每天比特币交易中使用的唯一发送和接收地址的数量信息。这种分析让我们能够深入了解比特币网络上的资金流动。我们还能够跟踪比特币的增长和采用，以及分析网络上的交易活动。总的来说，对于任何有兴趣了解比特币网络的人来说，这是一个无价的资源。</p><p id="087f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">也读作:</strong></p><ul class=""><li id="b354" class="mq mr in jm b jn jo jr js jv ms jz mt kd mu kh mv mw mx my bi translated"><a class="ae ki" href="https://medium.com/coinmonks/guide-to-query-bitcoin-balances-using-bigquery-a4b52ec2466a" rel="noopener">使用 BigQuery 查询比特币余额指南</a></li><li id="3b14" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated"><a class="ae ki" href="https://medium.com/coinmonks/proof-of-reserves-for-bitcoin-holdings-how-to-compute-in-bigquery-6f6c5bc8648d" rel="noopener">持有比特币的储备证明——如何在 BigQuery 中计算</a></li><li id="641a" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated"><a class="ae ki" rel="noopener ugc nofollow" target="_blank" href="/an-easy-way-to-access-bitcoin-block-data-using-bigquery-2f5d9be6ae63">使用 BigQuery 访问比特币块数据的简单方法</a></li></ul></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="d6fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="nl">感谢阅读！</em>T11】</strong></p><p id="2322" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nl">如果您喜欢这篇文章并想了解更多，请考虑关注我。我定期发布与链上分析、机器学习和 BigQuery 相关的主题。我尽量让我的文章简单而精确，尽可能提供代码、例子和模拟。</em></p></div></div>    
</body>
</html>