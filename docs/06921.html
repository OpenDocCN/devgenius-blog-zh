<html>
<head>
<title>7 Famous Approaches to Generate Distributed ID with Comparison Table</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨æ¯”è¾ƒè¡¨ç”Ÿæˆåˆ†å¸ƒå¼ ID çš„ 7 ç§è‘—åæ–¹æ³•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/7-famous-approaches-to-generate-distributed-id-with-comparison-table-af89afe4601f?source=collection_archive---------0-----------------------#2022-02-12">https://blog.devgenius.io/7-famous-approaches-to-generate-distributed-id-with-comparison-table-af89afe4601f?source=collection_archive---------0-----------------------#2022-02-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c71b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated">å¦‚ä»Šï¼Œè®¸å¤šå°å‹å’Œå¤§å‹ç³»ç»Ÿéƒ½éœ€è¦å”¯ä¸€çš„å…¨å±€æ ‡è¯†ç¬¦ï¼›éšç€äº’è”ç½‘ä½¿ç”¨çš„å¢é•¿å’Œå¯¹ä¸åŒåº”ç”¨ç¨‹åºçš„é«˜åº¦ä¾èµ–ï¼Œè¿™æ˜¯åˆ†å¸ƒå¼è®¡ç®—ä¸­çš„ä¸€é¡¹åŸºæœ¬ä»»åŠ¡ã€‚</p><p id="66fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨ç›´æ¥è·³åˆ°åˆ†å¸ƒå¼ ID ç”Ÿæˆæ–¹æ³•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆäº†è§£ä¼ ç»Ÿçš„æˆ–å½“å‰çš„æ–¹æ³•æˆ–éåˆ†å¸ƒå¼æ–¹æ³•:</p><h1 id="62c1" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">ä¼ ç»Ÿæ–¹æ³•(éåˆ†å¸ƒå¼ç³»ç»Ÿ)</h1><p id="9bcf" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">æ–¹æ³• 1:ID ç”Ÿæˆå™¨ä½¿ç”¨ä¸€ä¸ªå…±äº«è®¡æ•°å™¨ï¼Œè¯¥è®¡æ•°å™¨åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šå¢åŠ ã€‚</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi lx"><img src="../Images/4c644527a4c05302f57b138f97947c64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C_Bvyyny3CLItedIYOLwqw.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">ä¼ ç»Ÿæ–¹æ³•</figcaption></figure><p id="e1cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰€ä»¥ä¸Šè¿°æ–¹æ³•æ˜¯å¯è¡Œçš„ã€‚ç”šè‡³åœ¨ä»Šå¤©ï¼Œå¤§å¤šæ•°åº”ç”¨ç¨‹åºä»åœ¨ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p><p id="1cca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ–¹æ³• 2ï¼Œå¦ä¸€ä¸ªæœ¬åœ°è§£å†³æ–¹æ¡ˆæ˜¯ç”Ÿæˆä¸€ä¸ª ID ä½œä¸ºæ—¶é—´æˆ³å‡½æ•°ã€‚ä½†æ˜¯è¿™äº›éƒ½æ˜¯ä¸å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå­˜åœ¨ä»¥ä¸‹é—®é¢˜ã€‚</p><ul class=""><li id="1e1f" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">å¤šä¸ªç‹¬ç«‹çš„æœåŠ¡å™¨å¯ä»¥ç”Ÿæˆç›¸åŒçš„ IDã€‚</li><li id="967c" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">ç›¸åŒçš„ ID ä¼šä¸ºä¸¤ä¸ªè¿ç»­çš„è¯·æ±‚ç”Ÿæˆã€‚</li></ul><h2 id="e20d" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated"><strong class="ak">é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿæ¥ç”Ÿæˆè®°å½•/è¡Œ ID å‘¢ï¼Ÿ</strong></h2><p id="b6c2" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">åœ¨å¤æ‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç»å¸¸éœ€è¦å”¯ä¸€åœ°æ ‡è¯†è®¸å¤šæ•°æ®å’Œæ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨é‡‘èã€æ”¯ä»˜ã€é¤é¥®ã€é…’åº—ã€çŒ«çœ¼ç”µå½±ä»¥åŠå…¶ä»–äº§å“ä¸­ï¼Œæ•°æ®ä¸æ—¥ä¿±å¢ã€‚å°†æ•°æ®æ’å…¥æ•°æ®åº“å’Œè¡¨åï¼Œéœ€è¦ä¸€ä¸ªæƒŸä¸€çš„ ID æ¥æ ‡è¯†æ•°æ®æˆ–æ¶ˆæ¯ã€‚æ­¤æ—¶ï¼Œèƒ½å¤Ÿç”Ÿæˆå…¨çƒå”¯ä¸€ id çš„ç³»ç»Ÿè‡³å…³é‡è¦ã€‚æ­¤å¤–ï¼Œç³»ç»Ÿåº”è¯¥å¤„ç†é«˜å¹¶å‘è¯·æ±‚/ç§’(HCRPS ),æˆ–è€…ä¸ºæ¯ä¸ªæ–°èµ„æºå¿«é€Ÿåˆ›å»ºæ ‡è¯†ç¬¦ã€‚</p><h2 id="3440" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">åº”ç”¨ç¨‹åº</h2><p id="2a4f" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">ä¸‹é¢æ˜¯ä¸€äº›éœ€è¦åˆ†å¸ƒå¼ ID ç”Ÿæˆç­–ç•¥çš„åº”ç”¨ç¨‹åº:</p><ul class=""><li id="aea1" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">ç»Ÿè®¡ä¿¡æ¯æ”¶é›†å™¨</li><li id="5be6" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">èŠå¤©/ä¿¡æ¯</li><li id="1729" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">é«˜èµ/è¯„è®º</li><li id="6789" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">çŠ¶æ€æ›´æ–°/æ¨æ–‡</li></ul><p id="a1e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨åŸºäºä¸åŒéœ€æ±‚çš„å¯ç”¨æ–¹æ³•çš„æ•°é‡ã€‚åˆ†å¸ƒå¼ ID ç”Ÿæˆå™¨å¿…é¡»æ»¡è¶³ä»¥ä¸‹è¦æ±‚ã€‚</p><h2 id="cecf" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">åŠŸèƒ½éœ€æ±‚</h2><ul class=""><li id="4c42" class="mn mo iq jp b jq ls ju lt jy nn kc no kg np kk ms mt mu mv bi translated">å®ƒä»¬ä¸å¯èƒ½æœ‰å¤šé•¿ã€‚è®©æˆ‘ä»¬å‡è®¾å®ƒçš„å¤§å°æ˜¯ 64 ä½ã€‚</li><li id="c876" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">åœ¨æ•´ä¸ªé›†ç¾¤ä¸­é¡ºåºç”Ÿæˆå”¯ä¸€çš„ idã€‚</li><li id="d266" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">æ¯ç§’ç”Ÿæˆè¶…è¿‡ 10ï¼Œ000 ä¸ªå”¯ä¸€ idã€‚</li></ul><h2 id="6719" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">éåŠŸèƒ½æ€§éœ€æ±‚</h2><ul class=""><li id="bfc5" class="mn mo iq jp b jq ls ju lt jy nn kc no kg np kk ms mt mu mv bi translated">é«˜æ€§èƒ½</li><li id="3df6" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">ä½å»¶è¿Ÿï¼ŒåŒ…æ‹¬åœ°ç†å»¶è¿Ÿ</li><li id="2245" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">é«˜å¯ç”¨æ€§</li><li id="9815" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">å®¹é”™çš„</li><li id="5979" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">æ˜“äºæ‰©å±•</li></ul><h1 id="b2fe" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">æ–¹æ³•:</h1><p id="212c" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">ä»¥ä¸‹æ˜¯ä¸åŒæ–¹æ³•ä¹‹é—´çš„æ€»ä½“æ¯”è¾ƒè¡¨:</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi nq"><img src="../Images/4335a4e161fbefe3a4004ceb0b42b5ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p5LdL1IXwFmDvZUbTMT9uA.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">ä¸åŒæ–¹æ³•ä¹‹é—´çš„æ¯”è¾ƒè¡¨</figcaption></figure><h2 id="4942" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">1.UUID / GUID</h2><p id="858d" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">GUID æ˜¯ä»£è¡¨<em class="nr">å…¨çƒå”¯ä¸€æ ‡è¯†ç¬¦çš„é¦–å­—æ¯ç¼©å†™ï¼›</em>å®ƒä»¬è¢«ç§°ä¸º UUIDs æˆ–<em class="nr">é€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</em>è¿™æ˜¯ä¸€ä¸ªå¤šå¹´æ¥åœ¨è½¯ä»¶é¢†åŸŸå¹¿ä¸ºäººçŸ¥çš„æ¦‚å¿µã€‚UUIDs æ˜¯ 128 ä½åå…­è¿›åˆ¶æ•°ï¼›32 ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼ŒåŠ ä¸Šå››ä¸ªç ´æŠ˜å·ï¼Œåªæ˜¯ä¸ºäº†å¯è¯»æ€§æ›´å‹å¥½çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ˜¯å…¨çƒå”¯ä¸€çš„ã€‚å½¢å¼ä¸º 8â€“4â€“4â€“4â€“12ï¼Œå…± 36 ä¸ªå­—ç¬¦ã€‚å®ƒéå¸¸å®¹æ˜“ä½¿ç”¨</p><pre class="ly lz ma mb gt ns nt nu nv aw nw bi"><span id="c6b9" class="nb kv iq nt b gy nx ny l nz oa">public static void main(String[] args) {<br/>  String UUID = UUID.randomUUID().toString().replaceAll("-","");<br/>  System.out.println(UUID);<br/>}</span></pre><p id="eb65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">UUIDs æœ‰å››ä¸ªç‰ˆæœ¬ã€‚</p><ul class=""><li id="84db" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">UUID1 ä½¿ç”¨ MAC åœ°å€å’Œæ—¶é—´æˆ³æ¥ç”Ÿæˆæœ‰æ•ˆçš„å”¯ä¸€æ€§ã€‚</li><li id="9726" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">UUID3 å’Œ UUID 5 ä½¿ç”¨åŠ å¯†å“ˆå¸Œå’Œåº”ç”¨ç¨‹åºæä¾›çš„æ–‡æœ¬å­—ç¬¦ä¸²æ¥ç”Ÿæˆ UUIDã€‚(<em class="nr"> UUID 3 ä½¿ç”¨ MD5 å“ˆå¸Œï¼ŒUUID 5 ä½¿ç”¨ SHA-1 å“ˆå¸Œ</em>)ã€‚</li><li id="275e" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">UUID4 ä½¿ç”¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨æ¥ç”Ÿæˆ UUIDã€‚</li></ul><h2 id="7581" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">2.MySQL:é›†ä¸­è‡ªåŠ¨å¢é‡/è‘—åçš„â€œFlickr ç¥¨åŠ¡æœåŠ¡â€æ–¹æ³•</h2><p id="b21e" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">å¦‚æœæˆ‘ä»¬ä¸èƒ½è®© MySQL è‡ªåŠ¨å¢é‡è·¨å¤šä¸ªæ•°æ®åº“å·¥ä½œï¼Œé‚£ä¹ˆå°±å»ºç«‹ä¸€ä¸ªåªæœ‰ä¸€ä¸ªè¡¨å’Œä¸€ä¸ªè®°å½•çš„ä¸“ç”¨æ•°æ®åº“ï¼Œå®ƒçš„å”¯ä¸€ç›®çš„æ˜¯æä¾›æƒŸä¸€çš„å¢é‡ IDã€‚MySQL çš„<a class="ae ob" href="https://dev.mysql.com/doc/refman/8.0/en/replace.html" rel="noopener ugc nofollow" target="_blank"> Replace Into </a>è¯­å¥å¯ä»¥å¸®åŠ©é«˜æ•ˆåœ°å®ç°è¿™ä¸€ç‚¹ã€‚</p><p id="e4dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nr"> REPLACE çš„å·¥ä½œæ–¹å¼ä¸ INSERT å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å¦‚æœè¡¨ä¸­çš„æ—§è¡Œä¸ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•çš„æ–°è¡Œå…·æœ‰ç›¸åŒçš„å€¼ï¼Œåˆ™åœ¨æ’å…¥æ–°è¡Œä¹‹å‰ä¼šåˆ é™¤æ—§è¡Œã€‚</em></p><pre class="ly lz ma mb gt ns nt nu nv aw nw bi"><span id="18b9" class="nb kv iq nt b gy nx ny l nz oa">CREATE TABLE `ID` (<br/>  `id` bigint(20) unsigned NOT NULL auto_increment,<br/>  `stub` char(1) NOT NULL default '',<br/>  PRIMARY KEY  (`id`),<br/>  UNIQUE KEY `stub` (`stub`)<br/>) ENGINE=MyISAM</span></pre><p id="e1c0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å½“æˆ‘éœ€è¦ä¸€ä¸ªæ–°çš„å…¨å±€å”¯ä¸€çš„ 64 ä½ ID æ—¶ï¼Œæˆ‘å‘å‡ºä»¥ä¸‹ SQL:</p><pre class="ly lz ma mb gt ns nt nu nv aw nw bi"><span id="f3ae" class="nb kv iq nt b gy nx ny l nz oa">REPLACE INTO ID (stub) VALUES ('a');<br/>SELECT LAST_INSERT_ID();</span></pre><h2 id="61c2" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">3.MySQL:é›†ç¾¤æ¨¡å¼</h2><p id="5d76" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">æ­£å¦‚åœ¨ä¼ ç»Ÿçš„ MySQL AUTO_INCREMENT æ–¹æ³•ä¸­æåˆ°çš„ï¼Œå•ç‚¹æ•°æ®åº“æ¨¡å¼æ˜¯ä¸å¯å–çš„ã€‚ä¸ºäº†æ”¹è¿›ä¸Šè¿°é›†ä¸­æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é«˜å¯ç”¨æ€§è¿›è¡Œä¸€äº›æ›´æ”¹ï¼Œä¾‹å¦‚åº”è¯¥æ›¿æ¢ä¸»ä»é›†ç¾¤æ¨¡å¼ã€‚å¦‚æœæ€•ä¸€ä¸ªä¸»èŠ‚ç‚¹æŒ‚æ‰ï¼Œå¯ä»¥è€ƒè™‘åŒä¸»æ¨¡å¼é›†ç¾¤ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸¤ä¸ª MySQL å®ä¾‹å¯ä»¥åˆ†åˆ«äº§ç”Ÿè‡ªå¢é•¿çš„ idã€‚ä½†æ˜¯å…·æœ‰ä¸åŒçš„åˆå§‹å€¼å’Œæ­¥é•¿ã€‚</p><p id="d6b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">è§£</strong>:è®¾ç½®èµ·å§‹å€¼å’Œè‡ªå¢æ­¥é•¿<br/> <strong class="jp ir"> MySQL_ 1 é…ç½®:</strong></p><pre class="ly lz ma mb gt ns nt nu nv aw nw bi"><span id="e745" class="nb kv iq nt b gy nx ny l nz oa">set @@auto_ increment_ Offset = 1; -- starting value<br/>set @@auto_ increment_ Increment = 2; -- step size</span></pre><p id="9d36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> MySQL_ 2 é…ç½®:</strong></p><pre class="ly lz ma mb gt ns nt nu nv aw nw bi"><span id="c214" class="nb kv iq nt b gy nx ny l nz oa">set @@auto_ increment_ Offset = 2; -- starting value<br/>set @@auto_ increment_ Increment = 2; -- step size</span></pre><p id="3c0c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">ä¸¤ä¸ª MySQL å®ä¾‹çš„è‡ªå¢é‡ id å¦‚ä¸‹:</strong></p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi oc"><img src="../Images/977a3a4734539de605d940cd4be8fbe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kVq28dY4uvGaaHxt6xZIBQ.png"/></div></div></figure><p id="7a3f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åŒæ ·ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦æ‹¥æœ‰ä»»æ„å¤šçš„æœºå™¨ï¼Œè¿™äº›æœºå™¨å…·æœ‰ä¸åŒçš„æ­¥é•¿å’Œ ID çš„åˆå§‹ä½ç½®ã€‚æ‚¨ç”šè‡³å¯ä»¥å°†åŒæ ·çš„ç­–ç•¥æ‰©å±•åˆ°åœ°ç†çº§åˆ«ï¼›æ¯ä¸ªä½ç½®å°†æœ‰ä¸åŒçš„èµ·å§‹å€¼å’Œæ­¥é•¿ã€‚</p><h2 id="8964" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">4.MongoDB</h2><p id="78ad" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">MongoDB ä½¿ç”¨ ObjectIds ä½œä¸ºæ¯ä¸ªæ–‡æ¡£çš„<code class="fe od oe of nt b">_id</code>å­—æ®µçš„é»˜è®¤å€¼ï¼Œå®ƒæ˜¯åœ¨åˆ›å»ºä»»ä½•æ–‡æ¡£æ—¶ç”Ÿæˆçš„ã€‚<a class="ae ob" href="https://www.mongodb.com/blog/post/generating-globally-unique-identifiers-for-use-with-mongodb" rel="noopener ugc nofollow" target="_blank">æ›´å¤šè¯¦æƒ…</a> <br/> ObjectID æ˜¯ä¸€ä¸ª 96 ä½çš„æ•°å­—ï¼Œç»„æˆå¦‚ä¸‹:</p><ul class=""><li id="4424" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">ä¸€ä¸ª 4 å­—èŠ‚çš„<em class="nr">æ—¶é—´æˆ³å€¼</em>ï¼Œè¡¨ç¤ºè‡ª Unix çºªå…ƒä»¥æ¥çš„ç§’æ•°(ç›´åˆ° 2106 å¹´æ‰ä¼šç”¨å®Œç§’æ•°)</li><li id="aeff" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">ä¸€ä¸ª 5 å­—èŠ‚çš„<em class="nr">éšæœºå€¼</em>ï¼Œä»¥åŠ</li><li id="c5e6" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">ä¸€ä¸ª 3 å­—èŠ‚çš„é€’å¢è®¡æ•°å™¨ï¼Œä»ä¸€ä¸ªéšæœºå€¼å¼€å§‹ã€‚</li></ul><p id="e98a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">For e.g. <a class="ae ob" href="https://docs.mongodb.com/manual/reference/method/ObjectId.getTimestamp/#mongodb-method-ObjectId.getTimestamp" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="nr">507c7f79bcf86cd7994f6c0e</em></strong></a> has ISO time value of <strong class="jp ir">2012â€“10â€“15T21:26:17Z</strong></p><h2 id="515e" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">5. Twitter Snowflake</h2><p id="51c4" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">Thereâ€™s a famous ID generator called Snowflakes created by Twitter. Twitter snowflake is a dedicated service for generating 64-bit unique identifiers used in distributed computing for objects within Twitter such as Tweets, Direct Messages, Lists, etc.<br/>These IDs are unique 64-bit unsigned integers, which are based on time. The full IDs are made up of the following components:</p><ul class=""><li id="7507" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">Epoch timestamp in a millisecond â€” 41 bits (gives us 69 years for any custom epoch)</li><li id="a3f4" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">Configured machine/node/shard Id â€” 10 bits (gives us up to total of 2 i.e 1024 Ids)</li><li id="0ada" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">Sequence number â€” 12 bits (A local counter per machine that sets to zero after every 4096 values)</li><li id="53ee" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">In the beginning, the extra one reserved bit is set as 0 to make the overall number positive.</li></ul><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi og"><img src="../Images/5b134c436a25034408b758bf092778fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q01S_8UxXwBHXZEpB8P1OQ.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated">Twitter Snowflake</figcaption></figure><p id="2676" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Since these use the timestamp as the first component, therefore, <strong class="jp ir">they are time sortable as well</strong>. Another benefit is its <strong class="jp ir">High Availability</strong>.<br/>By default, 64-bit unsigned integers (long) will generate an Id whose length is 19, but sometimes it may be too long; our use case needed an Id whose size should not be greater than 10. This design requires a Zookeeper to keep mapping Nodes and Machine Ids. Also, it requires several Snowflake servers and introduces additional complexity and moreâ€™ moving partsâ€™.</p><p id="b6d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ğŸ’¡ <strong class="jp ir">Clock synchronization<br/></strong>Thereâ€™s a hidden assumption that all ID generation servers have the <strong class="jp ir">same</strong> <strong class="jp ir">clock</strong> to generate the timestamp, which might not be accurate in distributed systems. In reality, system clocks can drastically skew in distributed systems</p><h2 id="773e" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">6. Baidu UID generator</h2><p id="c645" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">UID generator is developed by the Baidu technology department and implemented based on the snowflake algorithm. Unlike the original snowflake algorithm, It works as a component and allows users to override workID bits and initialization strategy. As a result, it is much more suitable for virtualization environments, such as <a class="ae ob" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank">docker</a>. Besides these, it overcomes concurrency limitation of Snowflake algorithm by consuming future time; parallels UID produce and consume by caching UID with RingBuffer; eliminates CacheLine pseudo sharing, which comes from RingBuffer, via padding. And finally, it can offer over 6 million QPS per single instance.</p><p id="8f3e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨éœ€è¦æ·»åŠ ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹è¡¨ã€‚å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¸€æ¡è®°å½•å°†è¢«æ’å…¥åˆ°æ•°æ®åº“è¡¨ä¸­ã€‚æˆåŠŸæ’å…¥åè¿”å›çš„è‡ªå¢ ID ä¸º<code class="fe od oe of nt b">workID</code>ã€‚</p><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="gh gi oh"><img src="../Images/51687c1135c274fef10631d87f826223.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RwI1K5OR4C6reX_4QXarGQ.png"/></div></div></figure><p id="a0a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒUID ç”Ÿæˆå™¨çš„æ—¶é—´éƒ¨åˆ†åªæœ‰ 28 ä½ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤æƒ…å†µä¸‹ UID ç”Ÿæˆå™¨åªèƒ½å¿å— 8.5 å¹´(2 ^ 28â€“1/86400/365)ã€‚å½“ç„¶ï¼Œæ ¹æ®æ‚¨çš„ä¸šåŠ¡éœ€æ±‚ï¼ŒUID ç”Ÿæˆå™¨å¯ä»¥é€‚å½“åœ°è°ƒæ•´å¢é‡ç§’æ•°ã€å·¥ä½œèŠ‚ç‚¹ ID å’Œåºåˆ—å ç”¨ç‡ã€‚å¦‚æœä½ æœ‰å…´è¶£äº†è§£å®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œè¿™é‡Œæœ‰æ›´è¯¦ç»†çš„ Github ä»£ç ã€‚</p><h2 id="0bb9" class="nb kv iq bd kw nc nd dn la ne nf dp le jy ng nh li kc ni nj lm kg nk nl lq nm bi translated">7.ç´¢å°¼</h2><p id="a47c" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">Sonyflake æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ï¼Œçµæ„Ÿæ¥è‡ª Twitter çš„é›ªèŠ±ã€‚Sonyflake ä¸“æ³¨äºè®¸å¤šä¸»æœº/æ ¸å¿ƒç¯å¢ƒä¸­çš„ç”Ÿå‘½å‘¨æœŸå’Œæ€§èƒ½ã€‚å› æ­¤å®ƒçš„ä½åˆ†é…ä¸é›ªèŠ±ä¸åŒã€‚<br/>Sony flake ID ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆ</p><ul class=""><li id="84c2" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">ä»¥ 10 æ¯«ç§’ä¸ºå•ä½çš„ 39 ä½æ—¶é—´</li><li id="bfb7" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">åºåˆ—å·ä¸º 8 ä½</li><li id="20bc" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">æœºå™¨ id ä¸º 16 ä½</li></ul><p id="0d33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å› æ­¤ï¼ŒSonyflake æœ‰ä»¥ä¸‹ä¼˜ç‚¹å’Œç¼ºç‚¹:</p><ul class=""><li id="72c6" class="mn mo iq jp b jq jr ju jv jy mp kc mq kg mr kk ms mt mu mv bi translated">å¯¿å‘½(174 å¹´)æ¯”é›ªèŠ±(69 å¹´)é•¿</li><li id="89b0" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">å®ƒå¯ä»¥åœ¨æ¯”é›ªèŠ±(â°)æ›´å¤šçš„åˆ†å¸ƒå¼æœºå™¨(â¶)ä¸Šå·¥ä½œ</li><li id="890a" class="mn mo iq jp b jq mw ju mx jy my kc mz kg na kk ms mt mu mv bi translated">åœ¨å•ä¸ªæœºå™¨/çº¿ç¨‹ä¸­ï¼Œå®ƒæœ€å¤šå¯ä»¥æ¯ 10 æ¯«ç§’ç”Ÿæˆä¸€ä¸ªâ¸id(æ¯”é›ªèŠ±æ…¢)</li></ul><p id="fce4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½†æ˜¯ï¼Œå¦‚æœå¸Œæœ›åœ¨ä¸€å°ä¸»æœºä¸Šæœ‰æ›´é«˜çš„ç”Ÿæˆé€Ÿç‡ï¼Œå¯ä»¥ä½¿ç”¨ goroutines å¿«é€Ÿåœ°åŒæ—¶è¿è¡Œå¤šä¸ª Sonyflake ID ç”Ÿæˆå™¨ã€‚ç”±äºæŠ€æœ¯å·¨å¤´å¯¹ä¸Šè¿°å®ç°æœ‰ä¸€äº›ç¼ºç‚¹ï¼Œæ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ ID æ¥æ»¡è¶³æ‚¨çš„ç‰¹å®šéœ€æ±‚ã€‚</p><h1 id="af4f" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">ç»“è®º</h1><p id="dec2" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">è¿™ä¸ƒç§æ–¹æ³•éå¸¸æœ‰åï¼Œåªè¦æ ¹æ®æ‚¨çš„ä¸šåŠ¡éœ€æ±‚ç¨åŠ è°ƒæ•´ï¼Œæ‚¨å°±å¯ä»¥é‡‡ç”¨å…¶ä¸­çš„ä»»ä½•ä¸€ç§ã€‚ç»§ç»­ä½ çš„ä¼ ç»Ÿæ–¹æ³•æ²¡æœ‰é”™ï¼Œå› ä¸ºå®ƒéå¸¸æœ‰æ•ˆã€‚</p><p id="fadb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å°±è¿™æ ·ï¼Œæˆ‘ç»“æŸäº†è¿™æ¬¡å­¦ä¹ ï¼›æˆ‘å¸Œæœ›ä½ ä»Šå¤©å­¦åˆ°äº†ä¸€äº›æ–°ä¸œè¥¿ã€‚è¯·ä¸æ›´å¤šçš„åŒäº‹æˆ–æœ‹å‹åˆ†äº«ã€‚æœ€åï¼Œè€ƒè™‘æˆä¸º<a class="ae ob" href="https://zonito.medium.com/membership" rel="noopener">çš„åª’ä»‹æˆå‘˜</a>ã€‚è°¢è°¢å¤§å®¶ï¼</p></div></div>    
</body>
</html>