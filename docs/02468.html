<html>
<head>
<title>Connect Flutter to your Native Android Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将 Flutter 连接到您的原生 Android 项目</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/connect-flutter-to-your-native-android-project-ae6abfd1a73c?source=collection_archive---------1-----------------------#2020-08-06">https://blog.devgenius.io/connect-flutter-to-your-native-android-project-ae6abfd1a73c?source=collection_archive---------1-----------------------#2020-08-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ce132956d2f66b58ce8de01f3cb9129e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bsg6az9NubTc02_hK6KSQw.png"/></div></div></figure></div><div class="ab cl jv jw hr jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="ig ih ii ij ik"><p id="e17e" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">在本文中，我们将解决将 Flutter 连接到您的原生 Android 项目的问题。</p><p id="e708" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">我知道你们有些人认为这是不可能的，但现在，这是可能的！此外，您也可以将它连接到您现有的项目！</p><figure class="la lb lc ld gt jo"><div class="bz fp l di"><div class="le lf l"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">吉普的 AGT</figcaption></figure><p id="bf4d" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">我们都知道重新编码整个应用程序是不切实际的。对于这些情况，Flutter 可以集成到您的 Android 和 iOS 原生项目中。</p><p id="7dea" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">你需要的东西:</p><ul class=""><li id="5d85" class="lk ll in ke b kf kg kj kk kn lm kr ln kv lo kz lp lq lr ls bi translated">原生 Android 项目(新的或现有的项目)</li><li id="8727" class="lk ll in ke b kf lt kj lu kn lv kr lw kv lx kz lp lq lr ls bi translated">摆动</li><li id="7a3f" class="lk ll in ke b kf lt kj lu kn lv kr lw kv lx kz lp lq lr ls bi translated">仿真器或实际设备</li><li id="3471" class="lk ll in ke b kf lt kj lu kn lv kr lw kv lx kz lp lq lr ls bi translated">IDE/s (Android Studio 和 VS 代码)</li></ul><h1 id="c70f" class="ly lz in bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">原生 Android 项目</h1><ol class=""><li id="d6a1" class="lk ll in ke b kf mw kj mx kn my kr mz kv na kz nb lq lr ls bi translated">创建一个项目。</li><li id="bb2b" class="lk ll in ke b kf lt kj lu kn lv kr lw kv lx kz nb lq lr ls bi translated">让我们在主活动中添加按钮</li></ol><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/0a25b88db04b5ed1d1973959008eb503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eoeMLcEt-7LVsKd5yDiQ-g.png"/></div></div></figure><p id="7fdf" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">我们添加了一个按钮，将它的宽度和高度设置为文本的长度，将它放在屏幕的中间，并设置它的 onClicked 标识符来触发按钮的功能。</p><p id="0a5c" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">3.让我们添加按钮的功能。</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/09df4dfab368fd011ed4ce32b955cd81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yz1a9hoDT1Nc8GZony0gOg.png"/></div></div></figure><p id="287c" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">如你所见，我在 MainActivity.kt 中添加了<strong class="ke io"><em class="nd">onClickedButton()</em></strong>来实现我们从 XML 创建的按钮的功能。</p><p id="edf7" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">如果你在模拟器或设备上运行这个。你可以看到这样的东西。</p><div class="la lb lc ld gt ab cb"><figure class="ne jo nf ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/05decfdf70904c1b7bfdb776ff669595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*1rb1S8agVKV1eBskgJn9fA.png"/></div></figure><figure class="ne jo nf ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/668f1f731d236d2940425022226d43e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*lz3CsTVTWiqNYjla5SfHEQ.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk nk di nl nm translated">从右侧看，这是初始屏幕，从左侧看，您可以看到吐司，因为我们按了按钮。</figcaption></figure></div><p id="fa8b" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">4.接下来，我们将为 Flutter 实现添加第二个屏幕。所以要做到这一点。</p><p id="38be" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">右键单击可以找到 MainActivity.kt 的文件夹，然后选择<strong class="ke io"> <em class="nd">新建</em> </strong>，进入<strong class="ke io"> <em class="nd">活动</em> </strong>，选择<strong class="ke io"> <em class="nd">空活动</em> </strong></p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/60bda8d46b27b30e01b71e90f8ebb467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7x0gh4cs5jd_jaZKVlCV1Q.png"/></div></div></figure><p id="8303" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">接下来，添加一些活动名称(您可以提供)并点击 finish。</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/e853b068dd53483942ab852849a0c22e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g-e3XQvw5zKe43YMytBzrw.png"/></div></div></figure><p id="6a70" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">如您所见，它添加了另一个 Kotlin 和 XML 文件。</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/12afea4bbccd77013d58b1733c1a253a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0UXWbV59YICwGwhkjR9DVg.png"/></div></div></figure><p id="1f65" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">5.接下来是从主要活动导航到次要活动。只要回到 MainActivity.kt</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/443a56c1f6cf78c2f9d83d69e016620c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wsdU8hz8kUikDrjlzTmPCQ.png"/></div></div></figure><p id="8994" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">如你所见，我们声明了变量 intent 并将其设置为<strong class="ke io"> <em class="nd"> intent(from: current，to: next)。</em> </strong>之后，我们添加 startActivity 来触发下一个屏幕的意图。</p><div class="la lb lc ld gt ab cb"><figure class="ne jo nf ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/1908e6084e05577639dd29a156c96fcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*DYAJGG-fzSFbJIgCVCRcDw.png"/></div></figure><figure class="ne jo nf ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/0799b999712fdc194b17b974c053c981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*-6Jb44aBHxHCZdSsgAWSbg.png"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk nk di nl nm translated">右侧是第一个屏幕，当您按下按钮时，它将导航到第二个屏幕，即右侧的图像</figcaption></figure></div><p id="4005" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">下一步是为本地项目创建和抖动模块。</p><h1 id="057e" class="ly lz in bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">创建一个颤振模块，并将其连接到项目。</h1><p id="d143" class="pw-post-body-paragraph kc kd in ke b kf mw kh ki kj mx kl km kn nn kp kq kr no kt ku kv np kx ky kz ig bi translated">因此，让我们打开或导航到 Android Studio 的终端并键入<code class="fe nq nr ns nt b">flutter create -t module &lt;name-of-the-module&gt;</code></p><p id="d197" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">下面是一个例子:</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/86048e5f8ef062ea3049e35f482bb370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AFNyFWyoL7XkDM1iuwf6mA.png"/></div></div></figure><p id="22bd" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">现在，您在文件夹项目中创建了一个 flutter 模块。</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nu"><img src="../Images/807d4b4e903d00bfd287099865c1b50c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZzVyAx_WiLoD3IB9kGMpsw.png"/></div></div></figure><p id="e5ff" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">正如你所看到的，它在原生 Android 项目中添加了一个颤振模块。</p><p id="e0b3" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">我们要做的第一件事是转到<em class="nd"> build.gradle </em>并进入 android，我们需要添加编译选项和 java8(这是必需的)并点击 sync。</p><pre class="la lb lc ld gt nv nt nw nx aw ny bi"><span id="cf43" class="nz lz in nt b gy oa ob l oc od">compileOptions{<br/>    sourceCompatibility 1.8<br/>    targetCompatibility 1.8<br/>}</span></pre><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/fa8c300cb2aa0cbd213e1f4fe87c77b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5fhv8QSTSK9t1FwnsKG8hQ.png"/></div></div></figure><p id="66b4" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">接下来要做的是将 create flutter 模块移出原生项目，转到<em class="nd"> settings.gradle，将这段代码添加到其中，然后点击 sync now。</em></p><pre class="la lb lc ld gt nv nt nw nx aw ny bi"><span id="1d2a" class="nz lz in nt b gy oa ob l oc od">setBinding(new Binding([gradle: this]))</span><span id="d43a" class="nz lz in nt b gy oe ob l oc od">evaluate(new File(<br/>        settingsDir.parentFile,<br/>        'your-flutter-module-name/.android/include_flutter.groovy'<br/>))</span></pre><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi of"><img src="../Images/5f696b036eb066471db0f14789aa8fb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WPF9XQvecoPtDhEhiX611g.png"/></div></div></figure><p id="f589" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">我们将 flutter_demo 项目从原生项目中移出</p><div class="la lb lc ld gt ab cb"><figure class="ne jo nf ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/c378520eb0e49d101487cf16dfe60c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*q0BVikDGWR_oKOgF0NBvxw.png"/></div></figure><figure class="ne jo nf ng nh ni nj paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/250bd981865c8b0573e8bb4767ae2076.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*RAvyPUI-iPDSLfYlEHtrpw.png"/></div></figure></div><p id="0df0" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">在第一张照片中，我们添加了代码，第二张照片是同步的照片。这将自动添加包含和项目代码。</p><p id="0748" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">下一步是返回 build.gradle，在依赖项中添加 flutter 实现，然后立即同步。</p><p id="f0d7" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><code class="fe nq nr ns nt b">implementation project(‘:flutter’)</code></p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/3e102b2d04d47ff83a24440f7039cde4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qSH1CxFV52NMfaXpyv2iww.png"/></div></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated">添加并同步</figcaption></figure><h1 id="cab5" class="ly lz in bd ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv bi translated">实现代码的抖动</h1><p id="7a67" class="pw-post-body-paragraph kc kd in ke b kf mw kh ki kj mx kl km kn nn kp kq kr no kt ku kv np kx ky kz ig bi translated">现在，我们可以把主要活动集中在颤振上。</p><p id="1641" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">因此，让我们打开 MainActivity.kt，并移除<em class="nd"> onClickedButton 内部的意图。</em></p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/a19264e12e56f874cde5974dff2ee98e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E9F8C-slVNx6mIy17CaOow.png"/></div></div></figure><p id="ae8b" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><em class="nd">如您所见，我们添加了 Flutter activity . createdefaultintent(this ),因为我们想从 MainActivity 导航到 Flutter 模块。</em></p><p id="205d" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated"><em class="nd">接下来是去 AndroidManifest。我们应该给它添加 flutter 活动。</em></p><pre class="la lb lc ld gt nv nt nw nx aw ny bi"><span id="ed8b" class="nz lz in nt b gy oa ob l oc od">&lt;activity<br/>    android:name="io.flutter.embedding.android.FlutterActivity"<br/>   android:configChanges="orientation|keyboardHidden|keyboard|uiMode|density|screenLayout|locale|screenSize|layoutDirection|fontScale"<br/>    android:hardwareAccelerated="true"<br/>    android:windowSoftInputMode="adjustResize" <br/>/&gt;</span></pre><figure class="la lb lc ld gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/bdd8f01738eac554e162ef01beef94a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yQCYVQjAdtw1Rc4fCVfLTg.png"/></div></div></figure><p id="fdee" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">因此，我们将 Flutter 活动添加到清单中，如果我们运行它，应该会得到这样的结果。</p><figure class="la lb lc ld gt jo gh gi paragraph-image"><div class="gh gi og"><img src="../Images/a6c6d0ca9dfa0b16d69f4f4cb0ec119a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*sXQRoatcwTNth9vZ7LO0Eg.gif"/></div></figure><p id="65be" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">现在，您可以编辑和更改 Flutter 模块，并将其重新运行到您的项目中！</p><p id="0344" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">感谢你阅读这篇文章，我希望你今天能学到一些新东西！:D</p><p id="9c97" class="pw-post-body-paragraph kc kd in ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ig bi translated">下一篇文章，将 Flutter 连接到您的原生 iOS 项目！</p></div><div class="ab cl jv jw hr jx" role="separator"><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka kb"/><span class="jy bw bk jz ka"/></div><div class="ig ih ii ij ik"><figure class="la lb lc ld gt jo"><div class="bz fp l di"><div class="oh lf l"/></div><figcaption class="lg lh gj gh gi li lj bd b be z dk translated"><a class="ae oi" href="https://giphy.com/gifs/finally-atlast-itsover-Oarp36ygIEw6c" rel="noopener ugc nofollow" target="_blank">https://giphy.com/gifs/finally-atlast-itsover-Oarp36ygIEw6c</a></figcaption></figure></div></div>    
</body>
</html>