<html>
<head>
<title>Java 18: Top 4 Features You Must Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 18:你必须知道的 4 大特性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/java-18-top-4-features-you-must-know-1f36ee23e2ab?source=collection_archive---------5-----------------------#2022-07-28">https://blog.devgenius.io/java-18-top-4-features-you-must-know-1f36ee23e2ab?source=collection_archive---------5-----------------------#2022-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="9a36" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">软件工程之旅</h2><div class=""/><div class=""><h2 id="60eb" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">Java 18:作为软件工程师你必须知道的 4 大特性</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/44ba6c8e77c89907196c806ee931652c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*I9WOU2oahGndOl7W.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">www.techgeeknext.com 的照片</figcaption></figure><h1 id="c5a6" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">概观</h1><p id="7394" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">Java 18 于 2022 年 3 月 22 日发布，这是继上一个长期支持(LTS)版本 Java 17 之后的第一个版本。你可以看看我的文章<a class="ae ms" href="https://medium.com/@techisbeautiful/java-17-top-5-features-you-must-know-bbed2afaea3d" rel="noopener"> Java 17: 5 特性你必须知道</a>如果你错过了它。</p><p id="4f34" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">在本教程中，我将分享最新的 Java 平台，<a class="ae ms" href="https://www.oracle.com/java/technologies/javase/jdk18-archive-downloads.html" rel="noopener ugc nofollow" target="_blank"> Java SE 18 </a>，包括新的特性和变化。Java 18 于 2022 年 3 月 22 日全面上市。</p><p id="70e0" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">首先，Java 18 中有许多 JDK 增强建议(jep)。我把它们按照 JEP 数字的顺序排列，你可以看到下面 Java 18 的列表:</p><ul class=""><li id="7285" class="my mz iq ly b lz mt mc mu mf na mj nb mn nc mr nd ne nf ng bi translated">400: <a class="ae ms" href="https://openjdk.java.net/jeps/400" rel="noopener ugc nofollow" target="_blank"> UTF-8 默认</a></li><li id="9fec" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">408: <a class="ae ms" href="https://openjdk.java.net/jeps/408" rel="noopener ugc nofollow" target="_blank">简单网络服务器</a></li><li id="96c2" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">413:<a class="ae ms" href="https://openjdk.java.net/jeps/413" rel="noopener ugc nofollow" target="_blank">Java API 文档中的代码片段</a></li><li id="5b1b" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">416: <a class="ae ms" href="https://openjdk.java.net/jeps/416" rel="noopener ugc nofollow" target="_blank">用方法句柄重新实现核心反射</a></li><li id="676a" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">417: <a class="ae ms" href="https://openjdk.java.net/jeps/417" rel="noopener ugc nofollow" target="_blank">载体 API(第三孵育器)</a></li><li id="aabd" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">418: <a class="ae ms" href="https://openjdk.java.net/jeps/418" rel="noopener ugc nofollow" target="_blank">互联网地址解析 SPI </a></li><li id="c76f" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">419: <a class="ae ms" href="https://openjdk.java.net/jeps/419" rel="noopener ugc nofollow" target="_blank">外来函数&amp;内存 API(第二孵化器)</a></li><li id="9f9f" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">420: <a class="ae ms" href="https://openjdk.java.net/jeps/420" rel="noopener ugc nofollow" target="_blank">切换模式匹配(第二次预览)</a></li><li id="3859" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">421: <a class="ae ms" href="https://openjdk.java.net/jeps/421" rel="noopener ugc nofollow" target="_blank">反对最终确定移除</a></li></ul><p id="8a0d" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">虽然我们在 Java 18 中有很多特性，但我将分享任何软件工程师在 Java 18 版本中必须知道的四大特性。让我们一起探索吧！</p><h1 id="5d91" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">JAVA 18 中你必须知道的 4 大特性</h1><h2 id="0b90" class="nm lf iq bd lg nn no dn lk np nq dp lo mf nr ns lq mj nt nu ls mn nv nw lu iw bi translated">#1:默认为 UTF8</h2><p id="692e" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">我相信 Java 开发人员必须处理许多问题，因为 Java 字符集因操作系统(Linux、Window 等)而异。)和语言设置。用于读写文件的标准 Java APIs 作为参数传递的字符集。字符集控制着原始字节和 Java 编程语言的 16 位<code class="fe nx ny nz oa b">char</code>值之间的转换。支持的字符集包括 US-ASCII、UTF-8 和 ISO-8859-1。</p><p id="0fd0" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">如果没有将字符集参数传递给函数，标准 Java APIs 通常会使用默认的字符集。JDK 在应用程序启动时根据运行时环境选择默认字符集:操作系统、用户的语言环境等。</p><p id="4085" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">让我们回顾一下这个例子，在这个例子中，我们有一个函数来编写文本“快乐编码！”日语，并在 Unix (Linux 或 MacOS)中运行该功能:</p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="4686" class="nm lf iq oa b gy of og l oh oi">try (FileWriter fileWriter = new FileWriter("techisbeautiful.txt");             BufferedWriter bWriter = new BufferedWriter(fileWriter)) {   <br/>    bWriter.write("ハッピーコーディング！"); <br/>}</span></pre><p id="266a" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">如果您在 Windows 中运行下面的阅读功能，您会遇到问题，因此无法阅读您写的文本:</p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="ba88" class="nm lf iq oa b gy of og l oh oi">try (FileReader fReader = new FileReader("techisbeautiful.txt");     BufferedReader br = new BufferedReader(fReader)) {   <br/>    String line = br.readLine();   <br/>    System.out.println(line); <br/>}</span></pre><p id="5bc7" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">这是因为 Unix 以 UTF-8 格式存储文件，而 Windows 以 Windows-1252 格式读取文件。在 Java 18 的这个新版本中，这个问题得到了解决，因为 UTF-8 现在是默认的。</p><h2 id="486a" class="nm lf iq bd lg nn no dn lk np nq dp lo mf nr ns lq mj nt nu ls mn nv nw lu iw bi translated">#2:简单的网络服务器</h2><p id="0011" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">在 Java 18 中，它提供了一个命令行工具来启动 web 服务器。尽管不建议在生产中使用该工具，但它有助于实现概念验证、即席编程或测试目的。</p><p id="867b" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">要启动 web 服务器，我们可以使用“jwebserver”命令。默认情况下，它在 localhost:8000 上启动服务器。</p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="3205" class="nm lf iq oa b gy of og l oh oi">$ jwebserver </span></pre><p id="8077" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">您可以使用<code class="fe nx ny nz oa b">-b</code>参数来指定服务器应该监听的 IP 地址。通过<code class="fe nx ny nz oa b">-p</code>，你可以改变端口，通过<code class="fe nx ny nz oa b">-d</code>，你可以改变服务器应该服务的目录。使用-o，您可以配置日志输出。例如:</p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="6a9e" class="nm lf iq oa b gy of og l oh oi">$ jwebserver -b 127.0.0.50 -p 1234 -d /techisbeautiful -o verbose<br/>Serving /techisbeautiful and subdirectories on 50 port 1234<br/>URL <a class="ae ms" href="http://127.0.0.100:4444/" rel="noopener ugc nofollow" target="_blank">http://127.0.0.50:1234/</a></span></pre><p id="7b85" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">此外，您还可以获得一个选项列表，其中包含以下解释:</p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="9795" class="nm lf iq oa b gy of og l oh oi">jwebserver -h</span></pre><h2 id="6124" class="nm lf iq bd lg nn no dn lk np nq dp lo mf nr ns lq mj nt nu ls mn nv nw lu iw bi translated">#3:用方法句柄重新实现核心反射</h2><p id="3739" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">虽然这种变化很少被软件工程师使用，但是如果你使用 Java 反射，了解这种变化是值得的。如果您使用 java，您会知道使用 Java 反射的方法总是不止一种。例如，通过反射读取字符串的私有<code class="fe nx ny nz oa b">id</code>字段，有两种方法:</p><p id="e43d" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated"><strong class="ly ja"> 1。核心反射:</strong></p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="284f" class="nm lf iq oa b gy of og l oh oi">Field field = String.class.getDeclaredField("id");<br/>field.setAccessible(true);<br/>byte[] id = (byte[]) field.get(string);</span></pre><p id="4597" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated"><strong class="ly ja"> 2。方法句柄</strong></p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="99d3" class="nm lf iq oa b gy of og l oh oi">VarHandle handle =<br/>    MethodHandles.privateLookupIn(String.class, MethodHandles.lookup())<br/>        .findVarHandle(String.class, "id", byte[].class);<br/>byte[] id = (byte[]) handle.get(string);</span></pre><p id="8889" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">在 Java 18 中，决定在“java.lang.invoke”方法句柄之上重新实现反射类“java.lang.reflect.Method”、“Field”和“Constructor”的代码。这将减少“java.lang.reflect”和“Java . lang . invoke”API 的开发工作量。</p><h2 id="bb8d" class="nm lf iq bd lg nn no dn lk np nq dp lo mf nr ns lq mj nt nu ls mn nv nw lu iw bi translated">#4:改进创建 Java API 文档的方式</h2><p id="8be4" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">在 Java 18 中，它为 JavaDoc 添加了“@snippet”标记。在以前的版本中，如果您需要将多行代码片段集成到 JavaDoc 中，您必须通过<pre>…</pre>来完成。这有两个缺点:</p><ul class=""><li id="712f" class="my mz iq ly b lz mt mc mu mf na mj nb mn nc mr nd ne nf ng bi translated"><pre> tag and the code or no line break between the code and </pre>之间没有换行。</li><li id="160b" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">代码必须直接从星号后面开始</li></ul><p id="8b12" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">这是一个用<pre>开发 JavaDoc 的例子:</pre></p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="d7c4" class="nm lf iq oa b gy of og l oh oi"><em class="oj">/**<br/> * Write a text file with Java 11:<br/> *<br/> * &lt;pre&gt;&lt;b&gt;try&lt;/b&gt; (BufferedWriter writer = Files.&lt;i&gt;newBufferedWriter&lt;/i&gt;(path)) {<br/> *  writer.write("text");<br/> *}&lt;/pre&gt;<br/> */</em></span></pre><p id="3fdb" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">这是带有<pre>和{@code…}的示例:</pre></p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="74fa" class="nm lf iq oa b gy of og l oh oi"><em class="oj">/**<br/> * Write a text file with Java 11:<br/> *<br/> * &lt;pre&gt;{</em><strong class="oa ja"><em class="oj">@code </em></strong><em class="oj">try (BufferedWriter writer = Files.newBufferedWriter(path)) {<br/> *  writer.write("text");<br/> *}}&lt;/pre&gt;<br/> */</em></span></pre><p id="50eb" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">有了 Java 18 中的新增强，我们可以像这样编写 Javadoc:</p><pre class="kp kq kr ks gt ob oa oc od aw oe bi"><span id="fc7c" class="nm lf iq oa b gy of og l oh oi"><em class="oj">/**<br/> * {</em><strong class="oa ja"><em class="oj">@snippet </em></strong><em class="oj">:<br/> * try (BufferedWriter writer = Files.newBufferedWriter(path)) {<br/> *   writer.write("text");  // @highlight substring="text"<br/> * }<br/> * }<br/> */</em></span></pre><p id="d240" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">你可以看到这要简单得多。</p><h1 id="47a5" class="le lf iq bd lg lh li lj lk ll lm ln lo kf lp kg lq ki lr kj ls kl lt km lu lv bi translated">摘要</h1><p id="04ce" class="pw-post-body-paragraph lw lx iq ly b lz ma ka mb mc md kd me mf mg mh mi mj mk ml mm mn mo mp mq mr ij bi translated">在这篇文章中，我用例子分享了 Java 18 的四个必须知道的新特性。我们可以在这里总结其中的四个:</p><ul class=""><li id="f487" class="my mz iq ly b lz mt mc mu mf na mj nb mn nc mr nd ne nf ng bi translated">无论语言和区域设置如何，UTF-8 都是默认字符集。</li><li id="fd95" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">使用“jwebserver”命令快速启动 web 服务器。</li><li id="43c0" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">用方法句柄重新实现核心反射。</li><li id="509b" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated">改进创建 Java API 文档的方式。</li></ul><p id="ef43" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">如果您错过了以前 Java 版本中的“必须知道的特性”,您可以在下面查看:</p><ul class=""><li id="bcd3" class="my mz iq ly b lz mt mc mu mf na mj nb mn nc mr nd ne nf ng bi translated"><a class="ae ms" href="https://medium.com/@techisbeautiful/java-17-top-5-features-you-must-know-bbed2afaea3d" rel="noopener">你必须知道的 Java 17: 5 特性</a></li><li id="ba8d" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated"><a class="ae ms" href="https://medium.com/@techisbeautiful/new-features-you-must-know-in-java-11-and-examples-3fda2ad26def" rel="noopener">你必须知道的 Java 11: 8 特性</a></li><li id="245f" class="my mz iq ly b lz nh mc ni mf nj mj nk mn nl mr nd ne nf ng bi translated"><a class="ae ms" rel="noopener ugc nofollow" target="_blank" href="/java-8-seven-features-you-must-know-and-examples-1c3964ae7fe8">你必须知道的 Java 8 : 7 特性</a></li></ul><p id="fc34" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated">如果你喜欢这个故事，请<a class="ae ms" href="https://medium.com/@techisbeautiful" rel="noopener">关注</a>，<a class="ae ms" href="https://medium.com/subscribe/@techisbeautiful" rel="noopener">让我</a>成为第一个收到我下一个故事邮件的人。</p><p id="af1e" class="pw-post-body-paragraph lw lx iq ly b lz mt ka mb mc mu kd me mf mv mh mi mj mw ml mm mn mx mp mq mr ij bi translated"><a class="ae ms" href="https://medium.com/@techisbeautiful/membership" rel="noopener">你可以在这里</a>成为媒介会员，可以<strong class="ly ja">无限制访问</strong>媒介平台上的每一个故事。如果你使用上面的链接，它也支持我，因为我有一个来自 Medium 的小佣金。谢谢大家！</p></div></div>    
</body>
</html>