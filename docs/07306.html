<html>
<head>
<title>Auto Build &amp; Push Docker Image to AWS ECR with Github Actions- [Step-By-Step]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Github 操作自动构建 Docker 映像并将其推送到 AWS ECR 逐步]</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/build-a-docker-image-and-publish-it-to-aws-ecr-using-github-actions-step-by-step-2cd2f4e667a7?source=collection_archive---------2-----------------------#2022-03-14">https://blog.devgenius.io/build-a-docker-image-and-publish-it-to-aws-ecr-using-github-actions-step-by-step-2cd2f4e667a7?source=collection_archive---------2-----------------------#2022-03-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5c05" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">让我们看看如何在 Github 到 AWS 上构建 CI/CD 管道和云映像。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3ea0fb04dd032f81c68dc34e5e9aef3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/format:webp/0*ehsiZGr41WzWn8Ah.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">官方标志</figcaption></figure><h1 id="12c7" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">先决条件</h1><ol class=""><li id="4a4c" class="lk ll in lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><a class="ae mc" href="https://aws.amazon.com/free/" rel="noopener ugc nofollow" target="_blank"><strong class="lm io">【AWS】</strong>账户(自由层)</a>。</li><li id="40f3" class="lk ll in lm b ln md lp me lr mf lt mg lv mh lx ly lz ma mb bi translated"><strong class="lm io"> Docker </strong>、<strong class="lm io"> Git </strong> &amp; <strong class="lm io"> Github </strong>、<strong class="lm io"> AWS </strong>的基础知识。</li></ol><p id="7764" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">对于本教程，我们将使用现有的<a class="ae mc" href="https://github.com/sagarkudu/docker-ecr-react-demo" rel="noopener ugc nofollow" target="_blank"><strong class="lm io">React 项目</strong> </a> <strong class="lm io">。<br/>查看这里:</strong><a class="ae mc" href="https://github.com/sagarkudu/docker-ecr-react-demo" rel="noopener ugc nofollow" target="_blank">https://github.com/sagarkudu/docker-ecr-react-demo</a></p><div class="mx my gp gr mz na"><a href="https://sagarkudu.medium.com/how-to-dockerize-an-application-step-by-step-e32e8a9561c9" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">如何将申请归档[逐步]</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">对任何应用程序进行 dockerize 是非常容易的，在本教程中，我们将以 React 项目为例。</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">sagarkudu.medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no km na"/></div></div></a></div><h1 id="b731" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">在 AWS ECR 上创建存储库</h1><ol class=""><li id="c576" class="lk ll in lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">登录您的<a class="ae mc" href="https://aws.amazon.com/console/" rel="noopener ugc nofollow" target="_blank"> AWS </a>，在搜索栏中搜索<strong class="lm io">弹性容器注册表</strong> (ECR)。(注意:您可能需要先选择您所在的地区)。</li></ol><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/ad711707b583337a3eac4e93d4ac94e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lF2tPDlJCsGThgQbPTjOmw.png"/></div></div></figure><p id="270c" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated"><strong class="lm io">让我们在 AWS 上创建一个</strong> <a class="ae mc" href="https://ap-south-1.console.aws.amazon.com/ecr/create-repository" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io">资源库</strong> </a> <strong class="lm io">。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/9600be72db1fb6db580d8cc05f56c629.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*qkN26vvgMj1AIVN8t3Wq0A.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">创建仓库 ECR</figcaption></figure><p id="64a4" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">成功创建了<strong class="lm io"> react-docker-demo </strong>的存储库。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nr"><img src="../Images/86d7df60daf115fadf21fcbc07cd739e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4L7EWiv-PvkGecPpI34XUg.png"/></div></div></figure><h1 id="a0b5" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">创建 AWS 用户并设置权限</h1><ol class=""><li id="f037" class="lk ll in lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">在搜索栏中输入'<strong class="lm io"> IAM </strong>'，然后点击菜单中的<strong class="lm io">用户</strong>。之后点击<strong class="lm io">添加用户。</strong></li></ol><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/2106a59bce43238fa7d76a6cd5b99c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tmiXRrrC5yTIOPFl79iJ8Q.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">身份和访问管理</figcaption></figure><p id="5154" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated"><strong class="lm io"> 2。设置用户详细信息<br/> </strong>给出用户名:<strong class="lm io"> github-ci </strong>并检查<strong class="lm io">编程访问</strong>，这将允许我们创建一个<strong class="lm io">密钥</strong>对。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/9d5997ea9f3765e3eb06b41e954c337e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6CyJTLJJNsLOPja_5DyCNw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">添加用户</figcaption></figure><p id="7415" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">3.单击“下一步:权限”后，选择“直接附加现有策略”。要查找策略，请搜索<strong class="lm io">弹性容器注册表</strong>并选择<strong class="lm io">amazonec 2 containerregistryfull access。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/e2eb7c08af1733292dbb07da45a8c100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4v6MPmyZyNYSpoYLHkFfgw.png"/></div></div></figure><p id="aa4b" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">4.点击<strong class="lm io">下一步:标签</strong>跳过步骤<strong class="lm io"> 3 </strong>现在点击<strong class="lm io">下一步:查看</strong>并确认<strong class="lm io">创建用户。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nv"><img src="../Images/46c55e5a45cb40d9bc0478680fdd62ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vQexI0iKZIqqEOGJpWbRTw.png"/></div></div></figure><p id="399d" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">5.创建后，您需要保存凭证文件并复制<strong class="lm io">“访问密钥 ID”</strong>和<strong class="lm io">“秘密访问密钥”。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nw"><img src="../Images/57e0bf73a3505c6b58c6c1ed13f2a5f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JgN46TIj1oCtzVgbZRQU3g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">生成访问和成功密钥。</figcaption></figure><h1 id="3538" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">创建 Docker 文件</h1><p id="3a2c" class="pw-post-body-paragraph mi mj in lm b ln lo jo ml lp lq jr mn lr nx mp mq lt ny ms mt lv nz mv mw lx ig bi translated">我们必须创建一个 docker 文件，这样我们就可以为我们的项目创建一个 docker 映像。该文件将在我们的应用程序的根文件夹中创建，名称为'<strong class="lm io"> Dockerfile </strong>'，不带扩展名。</p><pre class="kd ke kf kg gt oa ob oc od aw oe bi"><span id="f5d6" class="of kt in ob b gy og oh l oi oj"># pull the official base image (Background o.s for container)<br/> FROM node:17-alpine3.14</span><span id="3d71" class="of kt in ob b gy ok oh l oi oj"># set working direction (directory for my project)<br/> WORKDIR /app</span><span id="c16e" class="of kt in ob b gy ok oh l oi oj"># set environment path<br/> ENV PATH="./node_modules/.bin:$PATH"</span><span id="a922" class="of kt in ob b gy ok oh l oi oj"># Copy everything from local machine to our server, second dot refers to the directory on the container.<br/> COPY . .</span><span id="68b2" class="of kt in ob b gy ok oh l oi oj"># install npm dependencies<br/> RUN npm install</span><span id="deb6" class="of kt in ob b gy ok oh l oi oj"># lets build the application<br/> RUN npm run build<br/> <br/> # # start an application (starting our react server)<br/> CMD ["npm", "run", "start"]</span></pre><h2 id="c13b" class="of kt in bd ku ol om dn ky on oo dp lc lr op oq le lt or os lg lv ot ou li ov bi translated">创建撰写 docker 文件</h2><p id="1630" class="pw-post-body-paragraph mi mj in lm b ln lo jo ml lp lq jr mn lr nx mp mq lt ny ms mt lv nz mv mw lx ig bi translated">我们将在根目录下创建一个文件<strong class="lm io"> docker-compose.yml </strong></p><p id="6be8" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated"><strong class="lm io">代码:docker-compose.yml </strong></p><pre class="kd ke kf kg gt oa ob oc od aw oe bi"><span id="a2f0" class="of kt in ob b gy og oh l oi oj">version: "3.8"<br/>services:<br/>  app:<br/>    build:<br/>      context: .<br/>    volumes:<br/>      - .:/app<br/>    ports:<br/>      - 3000:3000<br/>    image: app:react-docker-demo<br/>    container_name: react_container<br/>    command: npm start</span></pre><h1 id="ab16" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">将 Github 操作工作流写入现有项目</h1><p id="c500" class="pw-post-body-paragraph mi mj in lm b ln lo jo ml lp lq jr mn lr nx mp mq lt ny ms mt lv nz mv mw lx ig bi translated">有多种方法可以让你设置 Github 动作，比如直接从 GitHub repo 或者自定义创建文件和文件夹到你的项目中。根据您的喜好仅选择一种方法。</p><blockquote class="ow ox oy"><p id="252f" class="mi mj oz lm b ln mk jo ml lp mm jr mn pa mo mp mq pb mr ms mt pc mu mv mw lx ig bi translated">让我们创建一个文件<strong class="lm io"> deploy-on-aws.yml </strong></p></blockquote><pre class="kd ke kf kg gt oa ob oc od aw oe bi"><span id="ce6d" class="of kt in ob b gy og oh l oi oj"># This is a basic workflow to help you get started with Actions</span><span id="82a6" class="of kt in ob b gy ok oh l oi oj">name: Deploy to AWS ECR</span><span id="6477" class="of kt in ob b gy ok oh l oi oj"># Controls when the workflow will run<br/>on:<br/>  # Triggers the workflow on push or pull request events but only for the master branch<br/>  push:<br/>    branches: [master]<br/>  pull_request:<br/>    branches: [master]</span><span id="5259" class="of kt in ob b gy ok oh l oi oj">jobs:</span><span id="b08a" class="of kt in ob b gy ok oh l oi oj">build:</span><span id="58c1" class="of kt in ob b gy ok oh l oi oj">name: Build Image<br/>    runs-on: ubuntu-latest</span><span id="23c5" class="of kt in ob b gy ok oh l oi oj"># Steps represent a sequence of tasks that will be executed as part of the job<br/>    steps:<br/>    <br/>      - name: Check out code<br/>        uses: actions/checkout@v2</span><span id="5441" class="of kt in ob b gy ok oh l oi oj">- name: Configure AWS credentials<br/>        uses: aws-actions/configure-aws-credentials@v1<br/>        with:<br/>          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}<br/>          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}<br/>          aws-region: ap-south-1</span><span id="e249" class="of kt in ob b gy ok oh l oi oj">- name: Login to Amazon ECR<br/>        id: login-ecr<br/>        uses: aws-actions/amazon-ecr-login@v1</span><span id="ec17" class="of kt in ob b gy ok oh l oi oj">- name: Build, tag, and push image to Amazon ECR<br/>        env:<br/>          ECR_REGISTRY: ${{ steps.login-ecr.outputs.registry }}<br/>          ECR_REPOSITORY: react-docker-demo<br/>          IMAGE_TAG: 1<br/>        run: |<br/>          # Build a docker container and push it to ECR <br/>          docker build -t $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG .<br/>          echo "Pushing image to ECR..."<br/>          docker push $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG<br/>          echo "::set-output name=image::$ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG"</span></pre><p id="d84d" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated"><strong class="lm io">注意</strong>:这里我们要修改下面的代码。<strong class="lm io"> ECR_REPOSITORY </strong>是我们在 Amazon ECR 中创建的项目的名称。这里我使用了<strong class="lm io"> react-docker-demo </strong>作为项目名称，你可以使用任何名称。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi pd"><img src="../Images/4947e98cc38df9392c870163a2a21277.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*aWZXfKUqCvIB8hzwg9zLwQ.png"/></div></figure><p id="8a36" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated"><strong class="lm io">方法 1 </strong>:使用 GitHub repo</p><ul class=""><li id="cd72" class="lk ll in lm b ln mk lp mm lr pe lt pf lv pg lx ph lz ma mb bi translated">转到<strong class="lm io">操作</strong>并点击<strong class="lm io">自行设置工作流程。</strong></li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pi"><img src="../Images/493f360cdeadb8e25b071b2997036d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k58getysMcYRUR6nIoma2Q.png"/></div></div></figure><ul class=""><li id="f953" class="lk ll in lm b ln mk lp mm lr pe lt pf lv pg lx ph lz ma mb bi translated">添加有效文件名，如<strong class="lm io"> deploy-on-aws.yml </strong>，删除现有代码，并在 YAML 文件中添加我们的自定义代码(请查看下面的代码)，最后单击<strong class="lm io">开始提交</strong>。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pj"><img src="../Images/52a5ce5f29834d96121c102c405928b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0FV9zR9q9xEPQZE3KgGGzQ.png"/></div></div></figure><ul class=""><li id="8b45" class="lk ll in lm b ln mk lp mm lr pe lt pf lv pg lx ph lz ma mb bi translated">提交后</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pk"><img src="../Images/b86fe87d301ed04a2982aaaf0fdbad64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xmyY1hy2writbKJp6juOmQ.png"/></div></div></figure><ul class=""><li id="ac85" class="lk ll in lm b ln mk lp mm lr pe lt pf lv pg lx ph lz ma mb bi translated">进入终端输入命令<code class="fe pl pm pn ob b">git pull</code></li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi po"><img src="../Images/b13c54f5142aca6c85460773ba170526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_Rc9ZJCT89N36UABw8SvA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">YAML 文件是为我们现有的项目创建的</figcaption></figure></div><div class="ab cl pp pq hr pr" role="separator"><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu"/></div><div class="ig ih ii ij ik"><p id="9d6b" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated"><strong class="lm io">方法二</strong>:创建自定义文件和文件夹</p><p id="7277" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">创建一个文件夹<strong class="lm io">。github </strong>在应用程序的根目录下，再次在<strong class="lm io">内创建一个名为<strong class="lm io"> workflows </strong>的新文件夹。github </strong>文件夹，最后在<strong class="lm io">工作流</strong>文件夹中创建一个名为<strong class="lm io"> deploy-on-aws.yml </strong>的文件(请检查上面的代码)</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi pw"><img src="../Images/9f1ef6095c8a45980bb942053206b639.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*9Y1GvInhGH6CKz3ch3p9Sw.png"/></div></figure><h1 id="83c3" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">添加 Docker 忽略文件</h1><p id="c192" class="pw-post-body-paragraph mi mj in lm b ln lo jo ml lp lq jr mn lr nx mp mq lt ny ms mt lv nz mv mw lx ig bi translated">让我们创建一个名为。以便我们在将映像推送到 AWS 之前忽略那些文件。</p><p id="8983" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated"><strong class="lm io">文件名- </strong> <strong class="lm io">。dockerignore </strong></p><pre class="kd ke kf kg gt oa ob oc od aw oe bi"><span id="aad1" class="of kt in ob b gy og oh l oi oj">node_modules<br/>npm-debug.log</span></pre><h1 id="0fc2" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">将 Github 操作与 AWS ECR 连接起来</h1><ol class=""><li id="6643" class="lk ll in lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">现在我们将登录到<a class="ae mc" href="https://github.com/sagarkudu/react-docker-demo/settings" rel="noopener ugc nofollow" target="_blank"> GitHub 项目</a>,并转到:</li></ol><pre class="kd ke kf kg gt oa ob oc od aw oe bi"><span id="39e1" class="of kt in ob b gy og oh l oi oj">Go here -&gt; settings &gt; secret &gt; actions</span></pre><p id="cc84" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">2.现在点击<strong class="lm io">新的存储库密码</strong>来添加变量和它们的值。</p><ul class=""><li id="1cf8" class="lk ll in lm b ln mk lp mm lr pe lt pf lv pg lx ph lz ma mb bi translated">添加<strong class="lm io"> REPO_NAME </strong>作为名称&amp; your ECR Name 作为值<strong class="lm io"> react-docker-demo </strong></li><li id="0e25" class="lk ll in lm b ln md lp me lr mf lt mg lv mh lx ph lz ma mb bi translated">同样，添加<strong class="lm io"> AWS_ACCESS_KEY_ID </strong>作为名称，并从控制台粘贴<strong class="lm io">访问密钥 ID </strong>。</li><li id="f088" class="lk ll in lm b ln md lp me lr mf lt mg lv mh lx ph lz ma mb bi translated">类似地，从控制台添加<strong class="lm io"> AWS_SECRET_ACCESS_KEY </strong>作为名称，粘贴<strong class="lm io">访问密钥</strong>作为值。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi px"><img src="../Images/3bb69e4e14a54f0785e1f0abe1779586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KxWiJMxnrXz8iO9XuF3cgg.png"/></div></div></figure><ul class=""><li id="3d5d" class="lk ll in lm b ln mk lp mm lr pe lt pf lv pg lx ph lz ma mb bi translated">从这里，我们将 ID 和密钥复制到 GitHub:</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi py"><img src="../Images/5ee453514277115985166e6848bb9b5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YOV2LxFFk4bpCLgOW4_2jA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">ID 和密钥</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pz"><img src="../Images/5d973697155ca7bbcbb09d5264682435.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ce1po7m37_d7YpvHj3pe_A.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">AWS 机密密钥</figcaption></figure><p id="41aa" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">注意:进入 Github 并检查你的分支名称是否为<code class="fe pl pm pn ob b">master</code>，否则重命名它。<br/> <code class="fe pl pm pn ob b">git checkout master</code></p><h1 id="5eb1" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">监控、构建和向 AWS 推送映像</h1><ol class=""><li id="9d2f" class="lk ll in lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">一旦变更被推送到存储库，签出<strong class="lm io"> Actions </strong>选项卡。—这里您将看到一个<strong class="lm io">新的</strong>动作已经开始，用黄色的<strong class="lm io">表示，表示构建正在工作流程中进行。</strong></li></ol><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi qa"><img src="../Images/957798504fbecb3c6fa0f74d9df7b181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YqcItsIa6c5g_dGE1qiKxA.png"/></div></div></figure><p id="604e" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">2.单击正在处理的构建名称，并打开当前部署。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pj"><img src="../Images/41cae8a43eba167ba0d6b3adb1cb99fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5IHZsueFqcAN0y21IB4s8Q.png"/></div></div></figure><p id="e46d" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">3.在这里，您可以看到构建日志，其中每个选项卡显示当前任务，展开每个选项卡，您可以看到其日志。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi qb"><img src="../Images/952e8e0ebc333571b8af7ab948a10046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4-PPEya9UT5vKunlJptO4Q.png"/></div></div></figure><p id="7bb1" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">4.等待部署完成，如果颜色为<strong class="lm io">绿色</strong>，则图像已成功部署到 AWS ECR，如果颜色为红色，则表示存在错误。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi qc"><img src="../Images/6502c94713c1f88b3d5c1d0ca132cb27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Bk6cwON-s3OqcOIBlfzMA.png"/></div></div></figure><p id="0c4f" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">5.现在转到<a class="ae mc" href="https://ap-south-1.console.aws.amazon.com/ecr/repositories?region=ap-south-1" rel="noopener ugc nofollow" target="_blank"> Amazon ECR 仓库</a>查看刚刚使用 Github Actions 创建的最新图片。</p><p id="c5f3" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">最终输出:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi qd"><img src="../Images/abc1a3e40be40d6ac0e8b0c1928c4125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NwRczamXWFaDzXZbbCjz0g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">创建的图像带有标签:1</figcaption></figure><p id="d315" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated"><strong class="lm io">结论</strong>:恭喜！！！你学会了为你的项目建立<strong class="lm io"> CI/CD 管道</strong>，这在今天是非常必要的。</p></div><div class="ab cl pp pq hr pr" role="separator"><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu pv"/><span class="ps bw bk pt pu"/></div><div class="ig ih ii ij ik"><h1 id="7020" class="ks kt in bd ku kv qe kx ky kz qf lb lc jt qg ju le jw qh jx lg jz qi ka li lj bi translated">您可能会对以下内容感兴趣:</h1><div class="mx my gp gr mz na"><a href="https://sagarkudu.medium.com/host-any-app-to-aws-and-github-using-continuous-deployment-ci-cd-pipeline-step-by-step-d4150dbee2e8" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">托管网站或应用程序，使用 ECR 和 GitHub 自动构建 Docker 映像并将其推送到 AWS ECS | Continuous…</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">让我们为 AWS 托管一个 React 或任何应用程序或网站。</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">sagarkudu.medium.com</p></div></div><div class="nj l"><div class="qj l nl nm nn nj no km na"/></div></div></a></div><h1 id="2e1e" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">DevOps 博客列表:</h1><div class="mx my gp gr mz na"><a href="https://sagarkudu.medium.com/lists" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">媒介上的萨加尔·库杜策划了一些名单</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">开始探索 Devops，React，SpringBoot 和更多</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">sagarkudu.medium.com</p></div></div><div class="nj l"><div class="qk l nl nm nn nj no km na"/></div></div></a></div><h1 id="2316" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">作者:萨加尔·库杜</h1><ol class=""><li id="da54" class="lk ll in lm b ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><a class="ae mc" href="https://github.com/sagarkudu" rel="noopener ugc nofollow" target="_blank"> Github </a></li><li id="3230" class="lk ll in lm b ln md lp me lr mf lt mg lv mh lx ly lz ma mb bi translated"><a class="ae mc" href="https://www.linkedin.com/in/sagarkudu/" rel="noopener ugc nofollow" target="_blank">领英</a></li></ol><p id="8776" class="pw-post-body-paragraph mi mj in lm b ln mk jo ml lp mm jr mn lr mo mp mq lt mr ms mt lv mu mv mw lx ig bi translated">感谢您的宝贵时间！</p></div></div>    
</body>
</html>