<html>
<head>
<title>Generate Dummy Data in Strapi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Strapi 中生成虚拟数据</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/generate-dummy-data-in-strapi-74dcd239485?source=collection_archive---------9-----------------------#2022-08-16">https://blog.devgenius.io/generate-dummy-data-in-strapi-74dcd239485?source=collection_archive---------9-----------------------#2022-08-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/46b36e7fc4c71ae06dc5682a05b94f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*udj0WsB8zlfktoH7M7meIw.png"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated"><a class="ae ja" href="https://strapi.io/" rel="noopener ugc nofollow" target="_blank">https://strapi.io/</a></figcaption></figure><div class=""/><p id="b5c5" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如何使用 faker.js 在 Strapi 中播种数据</p><h1 id="2fc4" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">🔗链接</h1><ul class=""><li id="c95e" class="lw lx jd kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated">github:<a class="ae ja" href="https://github.com/andriishupta/strapi-generate-seed-data" rel="noopener ugc nofollow" target="_blank">andriishupta/strapi-generate-seed-data</a></li><li id="dd95" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">Strapi 的视频大致介绍了如何<a class="ae ja" href="https://strapi.io/video-library/generate-dummy-data-in-strapi" rel="noopener ugc nofollow" target="_blank">“生成虚拟数据”</a></li></ul><h1 id="e602" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">📰也发表于</h1><ul class=""><li id="c8eb" class="lw lx jd kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated"><a class="ae ja" href="https://blog.andriishupta.dev" rel="noopener ugc nofollow" target="_blank">个人博客</a></li><li id="d548" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated"><a class="ae ja" href="https://dev.to/andriishupta" rel="noopener ugc nofollow" target="_blank">开发社区👩‍💻👨‍💻</a></li></ul><h1 id="6aa9" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">🤓动机</h1><p id="eff2" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated"><a class="ae ja" href="https://strapi.io/" rel="noopener ugc nofollow" target="_blank"> Strapi </a>是一个强大的开源无头 CMS，帮助项目控制代码定制的可扩展性，同时，不用担心自己实现一个成熟的内容管理系统。</p><p id="64fb" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，在设置好 Strapi 之后，您需要在它的基础上构建前端。你雇佣那些被卡住的前端开发人员:“是的，我可以通过 REST 和 GraphQL 查询数据，但是我应该看到哪些数据呢？我能举个例子吗？”</p><p id="a7a9" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi">😬</p><p id="9d68" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了避免这种情况，我们将预先生成示例数据。</p><h1 id="1f41" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">🌱如何播种数据？</h1><h1 id="5994" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">"生成虚拟数据"</h1><p id="99b6" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">Strapi 的视频库中有一个<a class="ae ja" href="https://strapi.io/video-library/generate-dummy-data-in-strapi" rel="noopener ugc nofollow" target="_blank">视频</a>，它给了我一个如何做的方向。</p><p id="d20b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个想法很简单:</p><ul class=""><li id="95ff" class="lw lx jd kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">使用<code class="fe ms mt mu mv b">bootstrap</code> <a class="ae ja" href="https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/configurations/optional/functions.html#bootstrap" rel="noopener ugc nofollow" target="_blank">功能</a></li><li id="9be9" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">使用<a class="ae ja" href="https://docs.strapi.io/developer-docs/latest/developer-resources/database-apis-reference/entity-service-api.html" rel="noopener ugc nofollow" target="_blank">实体服务 API </a>进行交互</li><li id="9a69" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">用<a class="ae ja" href="https://fakerjs.dev/" rel="noopener ugc nofollow" target="_blank"> @faker-js/faker </a>生成虚拟数据</li></ul><h1 id="b3e3" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">小费</h1><p id="42d0" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">你的案子💯会更复杂，所以不要忘记你可以从 Strapi 的<a class="ae ja" href="https://github.com/strapi/strapi" rel="noopener ugc nofollow" target="_blank">源代码</a>中获取几乎所有东西。</p><p id="47a2" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">流程:</p><ul class=""><li id="47b8" class="lw lx jd kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">在 Strapi Admin 上找到您想要复制的位置</li><li id="facf" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">检查 URL 和网络(在开发者的检查中)以了解什么是所谓的</li><li id="67ea" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">找到与该调用相对应的代码(从控制器开始)</li><li id="402e" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">享受</li></ul><h1 id="0a9b" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">🧑‍💻密码</h1><p id="0ad2" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">我们有一个简单的 Todo 应用程序(duh ),其中有一个 Todo 集合和一个 Todo 列表，作为我们要发送到前端的页面(单一类型)。此外，我们的 Todos 有媒体功能，所以我们上传一些。</p><p id="82ab" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在 bootstrap 函数中，我们检查开发环境并决定是否应该运行播种。播种将在第一次应用程序运行时自动运行(当开发人员克隆现有存储库时有效)，并且可以使用<code class="fe ms mt mu mv b">yarn seed</code>重新运行以强制播种，这会清除旧数据并创建新数据- <code class="fe ms mt mu mv b">FORCE_APP_BOOTSTRAP_ONLY</code>。</p><p id="8494" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">🔗<a class="ae ja" href="https://github.com/andriishupta/strapi-generate-seed-data/blob/main/src/index.ts#L19" rel="noopener ugc nofollow" target="_blank">源代码</a></p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/ffb83b9fc76ccc9dc7966af3f19a4478.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*74MQ8BfUb1uxJqxu.png"/></div></div></figure><h1 id="17ee" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">集合类型</h1><p id="ff52" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">为了使用实体服务 API 创建一个 todo，我们需要用匹配我们实体的数据调用<code class="fe ms mt mu mv b">create</code>方法。在当前的例子中，在播种期间，我使用了“批量承诺”来并行运行请求，因为它们不相互依赖。</p><p id="6317" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">🔗<a class="ae ja" href="https://github.com/andriishupta/strapi-generate-seed-data/blob/main/src/_seed/todo.ts#L24" rel="noopener ugc nofollow" target="_blank">源代码</a></p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/02964f00d5a516a22a34155b383574f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZznF0oDxqMMHWLcn.png"/></div></div></figure><p id="80d0" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用 faker，我们填写这样一个 todo:</p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/3897797d2605b6f45b321a732a3810ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CXa_4ZK6ZOvXkJRf.png"/></div></div></figure><h1 id="4f02" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">单一类型</h1><p id="cc15" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">完成“Todo 列表页面”与收集是一样的，但是请记住，它可能始终只有一个条目。此外，它包含一个 Todo 关系，所以我们有五个 Todo 来填充它。</p><p id="0e4b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">🔗<a class="ae ja" href="https://github.com/andriishupta/strapi-generate-seed-data/blob/main/src/_seed/todo-list-page.ts#L14" rel="noopener ugc nofollow" target="_blank">源代码</a></p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/546aec66ff9ea245073a318e3e667dfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dZKYTQMO5gaxYF1N.png"/></div></div></figure><h1 id="e13a" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">媒体上传</h1><p id="4764" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">要在 todo 上附加媒体，我们首先需要上传该媒体，然后将其 id 链接到实体。代码已经从<a class="ae ja" href="https://github.com/strapi/strapi/blob/master/packages/core/upload/server/controllers/admin-upload.js#L57" rel="noopener ugc nofollow" target="_blank"> Strapi 的源代码</a>中复制，修改，我刚刚创建了一个 helper 函数。</p><p id="922d" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">🔗<a class="ae ja" href="https://github.com/andriishupta/strapi-generate-seed-data/blob/main/src/_seed/helpers.ts#L52" rel="noopener ugc nofollow" target="_blank">源代码</a></p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/9ccd5708e94b9afa9ad849e58d9c2033.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*K44bX0zOS44-pZI5.png"/></div></div></figure><p id="0cb4" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Todo 中的示例:</p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/72aa9cb777d138eaf57832fe741ea59e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_DWP1aYBxIwU0B1B.png"/></div></div></figure><h1 id="9fc2" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">✅结果</h1><p id="d2d2" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">打开管理面板后，您将看到生成的数据。</p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/7ff454c67bad7250437a1a8a35fc3323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IXFeW-1YLnD-Cs4S.png"/></div></div></figure><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/9e90bacc8f14e3756c89798f3a61c5f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dYjDiKe6srnyMrAr.png"/></div></div></figure><h1 id="204d" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi">✨</h1><p id="6f60" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">最初，我为<a class="ae ja" href="https://twitter.com/developer_dao" rel="noopener ugc nofollow" target="_blank">开发者道</a>的网站<a class="ae ja" href="https://developerdao.com/" rel="noopener ugc nofollow" target="_blank">developerdao.com</a>实现了这个。原始代码位于<a class="ae ja" href="https://github.com/Developer-DAO/cms" rel="noopener ugc nofollow" target="_blank">此处</a>(已存档并移至 monorepo)。</p><p id="f08a" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢阅读！</p></div></div>    
</body>
</html>