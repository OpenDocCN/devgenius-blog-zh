<html>
<head>
<title>Manage Environment Variables using dotenv in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 中使用 dotenv 管理环境变量</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/manage-environment-variables-using-dotenv-in-python-a4118b53adaa?source=collection_archive---------19-----------------------#2022-12-21">https://blog.devgenius.io/manage-environment-variables-using-dotenv-in-python-a4118b53adaa?source=collection_archive---------19-----------------------#2022-12-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4ddc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在本文中，我们将探索如何使用 Python 中的<a class="ae kf" href="https://github.com/theskumar/python-dotenv" rel="noopener ugc nofollow" target="_blank"> dotenv </a>模块来管理环境变量</h2></div><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi kg"><img src="../Images/7deb79f3b16b0bb2979f8cb19898feb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e9vKPmYjIHd0rlUQXxzFrg.jpeg"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">由<a class="ae kf" href="https://unsplash.com/@mattartz?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">马特·阿特兹</a>在<a class="ae kf" href="https://unsplash.com/images/nature/tree?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="0847" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">目录</strong></p><ul class=""><li id="c554" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">介绍</li><li id="87c6" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">创造。环境文件</li><li id="e237" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">从加载环境变量。环境文件</li><li id="bcad" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">使用管理多个环境。环境文件</li><li id="5f1c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">结论</li></ul></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="374a" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">介绍</h1><p id="6940" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">在关于 Python 中<a class="ae kf" href="https://pyshark.com/environment-variables-in-python/" rel="noopener ugc nofollow" target="_blank">环境变量的介绍文章中，我们讨论了如何使用<em class="nk"> os </em>模块手动获取和设置环境变量。</a></p><p id="aae5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着 Python 项目的增长，您可能会使用更多的环境变量，或者您可能希望在执行代码时设置环境变量。</p><p id="a954" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以创建一个<strong class="ky ir">，而不是手动设置这些环境变量，或者将它们硬编码到代码中，或者使用命令行参数来设置环境变量。env </strong>文件，并使用来自<em class="nk"> python-dotenv </em>模块的功能，在运行时将它们加载到您的 python 环境中。</p><p id="c749" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了继续学习本教程，我们需要以下 Python 库:<em class="nk"> os </em>和<em class="nk"> python-dotenv </em>。</p><p id="133e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Python 中已经内置了<a class="ae kf" href="https://docs.python.org/3/library/datetime.html" rel="noopener ugc nofollow" target="_blank"> os </a>模块，所以我们只需要安装<a class="ae kf" href="https://pypi.org/project/python-dotenv/" rel="noopener ugc nofollow" target="_blank"> python-dotenv </a>模块。</p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="f5ca" class="nq mo iq nm b be nr ns l nt nu">pip install python-dotenv</span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="407a" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">创造。环境文件</h1><p id="4a24" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">第一步是创建一个<strong class="ky ir">。项目根目录下的 env </strong>文件。</p><p id="35af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个文件将包含我们希望为这个项目设置的环境变量的键值对。</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/d11565f7bca04c0d1edc9d31b70a4020.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/0*cWURd-2ybwVSwlp7.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">作者图片</figcaption></figure><p id="5df4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于这个项目，让我们用一些值创建一个和<em class="nk"> TEST_PASSWORD </em>环境变量，这样你的<strong class="ky ir">。env </strong>文件应该包含以下键值对:</p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="7b84" class="nq mo iq nm b be nr ns l nw nu">TEST_USER=user1<br/>TEST_PASSWORD=12345</span></pre><p id="5d8b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看起来像这样:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gh gi nx"><img src="../Images/e0c30280a39b416fd9d25b80e2766aca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*w0j1FrtSitIeFz_k.png"/></div></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">作者图片</figcaption></figure><p id="d120" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，我们将看到如何为当前会话将这些变量加载到 Python 环境中！</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="b1c6" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">从加载环境变量。环境文件</h1><p id="9795" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">一旦我们创造了<strong class="ky ir">。env </strong>文件，其中包含项目所需的环境变量，下一步是将它们加载到当前的 Python 环境中。</p><p id="dae3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">dotenv 模块的<strong class="ky ir"> load_dotenv() </strong>函数从<strong class="ky ir">加载环境变量。env </strong>文件导入到 Python 环境中。</p><p id="8def" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面写着<strong class="ky ir">。env </strong>文件并设置文件中指定的环境变量。</p><p id="0c44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦完成这一步，我们就可以使用 os 模块的功能<strong class="ky ir"> os.environ </strong>轻松访问这些环境变量:</p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="3989" class="nq mo iq nm b be nr ns l nt nu">#Import the required dependencies<br/>import os<br/>from dotenv import load_dotenv<br/><br/>#Load environment variables from .env file<br/>load_dotenv()<br/><br/>#Get specific environment variables<br/>user_var = os.environ['TEST_USER']<br/>pwd_var = os.environ['TEST_PASSWORD']<br/><br/>#Print environment variables<br/>print(user_var)<br/>print(pwd_var)</span></pre><p id="c444" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该得到:</p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="5d18" class="nq mo iq nm b be nr ns l nw nu">user1<br/>12345</span></pre><p id="fafd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些是在<strong class="ky ir">中指定的环境变量的值。env </strong>文件。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="3b4b" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">使用管理多个环境。环境文件</h1><p id="04a8" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">本节面向使用 Python 应用程序的多种环境(如测试、开发和生产)的高级用户。</p><p id="a78b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使用管理多个环境。env 文件，您需要为每个环境创建一个. env 文件，并在其中存储所需的环境变量。</p><p id="3462" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，假设您有 3 个环境:</p><ol class=""><li id="cd60" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr ny ly lz ma bi translated">测试</li><li id="65f9" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr ny ly lz ma bi translated">发展</li><li id="fe60" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr ny ly lz ma bi translated">生产</li></ol><p id="a2f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您需要为它们分别创建一个. env 文件:</p><ul class=""><li id="be88" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir"> .env.testing </strong></li><li id="2cb4" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir"> .env.development </strong></li><li id="167a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir"> .env.production </strong></li></ul><p id="1dc5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，您的根项目文件夹将如下所示:</p><figure class="kh ki kj kk gt kl gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/71e6523685fde93907a4814354d6504e.png" data-original-src="https://miro.medium.com/v2/resize:fit:656/format:webp/0*N6eK2rGIZof60M8D.png"/></div><figcaption class="ks kt gj gh gi ku kv bd b be z dk translated">作者图片</figcaption></figure><p id="b788" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以下是每个<strong class="ky ir">的样本内容。env </strong>文件:</p><p id="9551" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> .env.testing </strong></p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="6bfa" class="nq mo iq nm b be nr ns l nw nu">API_KEY=test_api_12345<br/>SECRET_KEY=test_12345</span></pre><p id="3f70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">env . development</strong></p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="ae97" class="nq mo iq nm b be nr ns l nw nu">API_KEY=dev_api_12345<br/>SECRET_KEY=dev_12345</span></pre><p id="c914" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> .env.production </strong></p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="f2bb" class="nq mo iq nm b be nr ns l nw nu">API_KEY=prod_api_12345<br/>SECRET_KEY=prod_12345</span></pre><p id="9ffe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，假设项目的当前环境正在测试，那么我们将从适当的<strong class="ky ir">中访问环境变量。env </strong>文件(本例中为<strong class="ky ir"> .env.testing </strong>):</p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="78cf" class="nq mo iq nm b be nr ns l nt nu">#Import the required dependencies<br/>import os<br/>from dotenv import load_dotenv<br/><br/>#Set the current environment<br/>env = 'testing'<br/><br/>#Load the appropriate .env file<br/>if env == 'testing':<br/>    load_dotenv('.env.testing')<br/>elif env == 'development':<br/>    load_dotenv('.env.development')<br/>elif env == 'production':<br/>    load_dotenv('.env.production')<br/><br/>#Get specific environment variables<br/>api_key = os.environ['API_KEY']<br/>secret_key = os.environ['SECRET_KEY']<br/><br/>#Print environment variables<br/>print(api_key)<br/>print(secret_key)</span></pre><p id="4632" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您应该得到:</p><pre class="kh ki kj kk gt nl nm nn bn no np bi"><span id="9ba7" class="nq mo iq nm b be nr ns l nw nu">test_api_12345<br/>test_12345</span></pre></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="a32a" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">结论</h1><p id="e0d4" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">在本文中，我们探索了如何使用<strong class="ky ir">管理环境变量。Python 中的 env </strong>文件和 dotenv 模块。</p><p id="8257" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您处理多个环境变量和敏感信息，并且不想将这些值硬编码到代码中时，python-dotenv 可以成为管理 python 项目中的环境变量和配置选项的非常有用的工具。</p><p id="c1af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有任何问题或对编辑有任何建议，请随时在下面留下评论，并查看更多我的<a class="ae kf" href="https://pyshark.com/category/python-programming/" rel="noopener ugc nofollow" target="_blank"> Python 编程</a>教程。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="ac92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nk">原载于 2022 年 12 月 21 日 https://pyshark.com</em><a class="ae kf" href="https://pyshark.com/manage-environment-variables-using-dotenv-in-python/" rel="noopener ugc nofollow" target="_blank"><em class="nk"/></a><em class="nk">。</em></p></div></div>    
</body>
</html>