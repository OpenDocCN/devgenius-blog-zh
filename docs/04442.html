<html>
<head>
<title>Three Stories that Good Programmers Told</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">优秀程序员讲述的三个故事</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/three-stories-that-good-programmers-told-25165286c18d?source=collection_archive---------8-----------------------#2021-03-17">https://blog.devgenius.io/three-stories-that-good-programmers-told-25165286c18d?source=collection_archive---------8-----------------------#2021-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="82d9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你把故事讲给计算机，讲给人类，讲给最终用户。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8cffa8be307a662e5b3826c1fdfcc1dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HqDVqAZjErs3KDmv"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae kv" href="https://unsplash.com/@socialcut?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">S O C I A L C U T</a>拍摄</figcaption></figure><p id="4fc7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">人类通过讲故事吸收更好的知识。人们常说，如果你不知道如何讲述一个关于数据的好故事，数据就没有任何意义。我说过好的程序向运行它们的机器和理解它们的人讲述了一个好故事。</p><p id="38e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">举个例子，为什么我认为编程就是讲故事。</p><p id="73f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时候，我们会对某个代码库为什么会有那样的行为感到困惑。例如，当你浏览一个旧的代码库时，代码库的某些部分会让你思考，“为什么函数返回一个泛型类型而不是一个简单的整数。为什么前一个人不知道他们可以只返回一个整数的函数？”然后，您继续检查并尝试重构它们——只意识到该功能作为一种特性在所有流程流中共享，这样做将减少代码库中的代码冗余量。</p><p id="0c8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你进行结对编程时，你可以看到讲故事在你脑海中的位置。当你“领导”结对编程会话时，你经常需要解释和讲述你对代码库的意图。整个结对编程会议将简单地讲述项目的任何部分发生了什么，并解释它以便其他工程师理解。我们经常与第一次加入团队或接手项目的工程师进行结对编程。</p><p id="cd9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从各种意义上来说，我们希望编写代码不仅可以工作，而且可以扩展。我们写代码给人们阅读。如果我们只是编写代码让它工作——我们可以只做汇编语言或字节码转换。我们有所有这些编程语言，因为这些语言帮助我们与其他程序员交流一个故事。</p><p id="30db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">编程有两个困难的部分——知道如何告诉计算机执行一些动作，以及将所有这些动作结合在一起。</p><p id="6edd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一个可以通过如何搜索你的栈溢出问题来解决。例如，您可以找到确切的基于代码并回答如何迭代一副数组卡片。然而，如果你不知道如何组合它们来完成有用的任务，那么知道这些单独的操作是没有帮助的。</p><p id="a86a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第二个比第一个更难，更微妙。你真的不能在网上搜索你公司项目中的代码库是如何工作的。你将不得不依靠你前面的那些工程师讲的故事。</p><p id="3318" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些故事通常由三个不同的抽象层次组成——它们告诉计算机的故事，它们告诉程序员同事的故事，以及它们告诉最终用户的故事。</p><h1 id="a3b8" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">他们告诉电脑的故事</h1><p id="adc3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">像文字一样，某一种文字给阅读它的读者以不同的反应。你算法中的一个描述会让计算机以不同的反应执行任务。</p><p id="e87d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你是在告诉计算机理解你想让它们做的活动的顺序。</p><p id="c0b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是构建更高层次故事的最低层次组件。</p><p id="9d70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您希望计算机通过位操作或循环来执行某个动作。通常，它存在于核心库中，你需要在注释中解释它到底是做什么的。</p><p id="2ecd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你用一个巨大的指令行写程序时，你只是在为你自己和计算机写。</p><p id="873b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，您可以为一个循环编写一个，后跟一个put方法，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="a218" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，理解上面代码库的唯一实体是你和计算机。计算机可以执行你构建的所有行，你知道它的意图是什么。</p><p id="2bf5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你让别人看上面的代码库，问程序所有者想实现什么，他们会毫无头绪。</p><p id="edd6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">把这个比喻成写作，在每一个新的行上写很多单词可能对你来说才有意义。</p><p id="b562" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个阶段，你唯一的障碍是构建你正在编写的语言的语法和核心功能。这通常发生在你刚接触一个库或者一门编程语言的时候，通常，在Google或者Stackoverflow上简单的搜索就能解决这个问题。</p><p id="ff98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了把你的程序的意图传递给其他人，你需要更上一层楼——通过抽象出你对其他程序员讲故事的层次。</p><h1 id="8f2f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">给其他程序员的故事</h1><p id="46b1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">创建类的命名、函数的命名值和设计模式是为了向其他程序员讲述程序的意图。</p><p id="6b0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个抽象层次定义了您正在定义的类的意图，以及该类中存在哪种状态和方法。</p><p id="d647" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种抽象程度更接近英语。有时，我们创建一个类似英语单词的函数。</p><p id="0b2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，当您编写一个将值放入映射或字典的方法时，它不会告诉其他程序员该方法的意图是什么。如果您进一步描述该方法是<code class="fe mr ms mt mu b">putValueToContainer</code>，它会改变该方法的意图——将值写入容器。</p><p id="469c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了进一步说明，让我们以较低的抽象为例，用一些函数进行封装:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="18dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">人类可以更好地理解你的思维过程——试图找到一些价值，并将这些价值放入一些缓存中。</p><p id="81e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个阶段，一个有意的代码和方法名称将讲述一个更好的故事。因此，你需要经常校对你的代码库，这样你的意图才会清晰。</p><p id="257d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">校对相当于代码重构。第一次在任何IDE中构建思想时，您很可能需要重构。你可能需要做大量的代码重构来给你的程序一个准确的方法名，以便让其他人知道计算机正在做什么。</p><p id="7ffe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">许多程序员在这种讲故事的水平上挣扎，因为他们倾向于编写面向所有受众的函数。我们知道，当你想瞄准所有观众时，你不是瞄准任何观众。因此，编写过于一般化的方法有时可能是一把双刃剑。改变这种情况的一个简单的技巧是编写给出明确意图的代码。</p><p id="a72f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个对其他程序员来说可以理解但对计算机来说不能理解的故事是无用的，因为代码的目的是让计算机执行一个动作。所以较高的层次是较低层次的抽象无法达到的。</p><p id="5ad6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你达到了讲故事的这个阶段，你也隐含地完成了最低的抽象层次。</p><h1 id="3739" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">给最终用户的故事</h1><p id="1816" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">讲故事的最后一层是讲述最终用户期望什么。</p><p id="4ff3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是人类编写软件的故事——完成我们的目标，让生活更有效率。</p><p id="e974" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种讲故事的方式会告诉其他程序员和我们的最终用户应用程序将会做什么。</p><p id="4b47" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种故事有助于其他工程师和高层，以及经理理解程序员想要达到的目标。</p><p id="7c28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果你做行为驱动测试或者终端用户故事测试，你会看到对我们终端用户期望的详细描述。您将编写类似“当您执行[这个]时，它将执行[这个]”的测试用例</p><p id="eaad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想对前面例子中的代码进行更高层次的抽象，我们可以为我们的应用程序编写一个单元测试，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div></figure><p id="781f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们对整个应用程序的意图有了更多的了解。我们现在知道它是一个目录价格数组，而不是任何随机整数。然后，我们知道<code class="fe mr ms mt mu b">putValueToContainer</code>实际上是一个缓存。最后，我们还知道这个程序的目的是将目录的价格放在缓存中。</p><p id="aa66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">行为驱动的测试用例是非常重要的，因为它是解释性的，并且易于遵循——易于遵循的技术规范类似于一个伟大的故事情节。</p><p id="52ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">理解一个新项目最好的部分是查看他们的单元测试，并跟踪了解为什么事情会以不同的方式被创建。</p><p id="32f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你不在较低的抽象层次上描述你的故事，这个最终用户故事就无法实现。就像你不能写一个段落而不造一个句子，你不能写一个句子而不造词。</p><h1 id="3937" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创建更好软件的关键技巧</h1><p id="a661" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">写好软件的关键是尽可能清晰地平衡和分离这三个故事。</p><p id="175a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">像写文章一样，语法和用词的选择可以使句子更加简洁。还有一些方法可以让代码更容易理解和维护。</p><p id="a6fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">模糊的句子通常是由混乱的思维组织造成的。一句话里可能有两种不同的逻辑，这让你的读者很困惑。但是，写软件也是一样的。如果我们在方法或应用程序中加入太多的逻辑，可能会很难读懂。</p><p id="a2cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将这种类比用于代码——我看到了将底层操作与终端用户业务逻辑相结合的软件。在一端，软件试图从数据库中获取项目。另一方面，软件试图切换UI按钮并使其成为真。</p><p id="7f6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这使得很难根据所有三个层次的故事来编写代码——因此，通常，我们倾向于将其分解为原则、设计模式和法则，以使我们想要讲述的故事更加简洁。</p><p id="423d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">关于如何构建可读和可维护的代码库，已经有了几十年的研究和书籍。关注点分离(Separation of concerns，DRY，或SRP(Single respons ibility Principle)只是一些技术术语和原则，用来告诉程序员如何在他们的程序中分离抽象和故事的三个层次。</p><h1 id="8f15" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">关闭</h1><p id="0969" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">就像写作是用可以理解的正确方式组织你的思想。编写软件也是以一种可理解和可维护的方式组织你希望程序做的事情——对人类来说。</p><p id="bd53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，在你的代码中讲述一个更好的故事的一个方法是在你讲述的故事的每一个层次上划分界限。从头脑风暴开始。将较小的指令组合成一个小方法。尽可能清楚地阐明这些方法的意图。然后，用这些更小的方法写下你的整个应用程序的总体意图，来创造一个故事，让用户完成一个不可思议的任务。</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><p id="35a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">感谢阅读！如果你喜欢这个帖子，你可以在</strong> <a class="ae kv" href="https://medium.com/@edwardgunawan880" rel="noopener"> <strong class="ky ir">中</strong> </a> <strong class="ky ir">上关注更多这样的帖子。</strong></p><p id="3a0e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nc">最初发表于</em><a class="ae kv" href="https://edward-huang.com/ideas/2021/03/15/three-stories-that-good-programmers-told/" rel="noopener ugc nofollow" target="_blank"><em class="nc">https://edward-huang.com</em></a><em class="nc">。</em></p></div></div>    
</body>
</html>