<html>
<head>
<title>SQL by steps #7 : DELETE &amp; TRUNCATE — removing data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL by steps #7:删除和截断—删除数据</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sql-by-steps-7-delete-truncate-removing-data-82ee8d0e65b9?source=collection_archive---------7-----------------------#2022-03-17">https://blog.devgenius.io/sql-by-steps-7-delete-truncate-removing-data-82ee8d0e65b9?source=collection_archive---------7-----------------------#2022-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/842420b85179b8ccfe68c51ea53328fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PTAQgYSq5ZkiNL17fpoKvQ.png"/></div></div></figure><div class=""/><p id="461a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">学习 SQL 的最好方法是..利用它。本系列的目标是在实践中逐步探索 SQL。级别:针对 SQL 初学者。</p><h1 id="61a0" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">介绍</h1><p id="87aa" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">SQL 对于数据领域的任何工作都是必不可少的。本系列侧重于业务，而不是学术:它以一种渐进的方式解释 SQL，不是基于命令的复杂性(像书籍那样)，而是基于它们解决实际业务问题的效用。</p><p id="23d9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我建议首先运行建议的查询，这样你就能感觉到它发生了什么，然后我们解释要记住的主要概念。</p><p id="4fed" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个职位的方法都是一样的:</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="e8c1" class="mi kx jb me b gy mj mk l ml mm">· <a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-6-where-multi-conditions-f15f178db562#77ba">1. Running the proposed SQL query (5'–10')</a><br/>· <a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-6-where-multi-conditions-f15f178db562#df12">2. Understanding (10'–20')</a><br/>· <a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-6-where-multi-conditions-f15f178db562#0f44">3. Practising (20'-40')</a></span></pre><p id="89ae" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">链接到 SQL by Steps 系列以前的故事:</p><ul class=""><li id="93a7" class="mo mp jb ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-1-create-table-8b0dad9b9e89?source=your_stories_page----------------------------------------"> <strong class="ka jc"> SQL by steps #1:创建表</strong> </a></li><li id="7857" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-2-insert-ba57c972c7b7?source=your_stories_page----------------------------------------"><strong class="ka jc">SQL by steps # 2:INSERT</strong></a></li><li id="3afc" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-3-select-920a97e30574?source=your_stories_page----------------------------------------"> <strong class="ka jc"> SQL by steps #3:选择</strong> </a></li><li id="ca35" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-4-where-single-condition-791b68cf1bb?source=your_stories_page----------------------------------------"> <strong class="ka jc"> SQL by steps #4 : WHERE(单条件)</strong> </a></li><li id="dad6" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-5-essential-data-types-9ff72cab0628?source=your_stories_page----------------------------------------"> <strong class="ka jc"> SQL by steps #5:基本数据类型</strong> </a></li><li id="5723" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated"><a class="ae mn" rel="noopener ugc nofollow" target="_blank" href="/sql-by-steps-6-where-multi-conditions-f15f178db562"> <strong class="ka jc"> SQL by steps #6 : WHERE(多条件)</strong> </a></li></ul><h1 id="6561" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">1.运行建议的 SQL 查询(5 英尺–10 英尺)</h1><p id="192c" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">让我们运行代码，即使你不知道它是做什么的。</p><p id="69cd" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">只需将下面的 SQL 脚本复制并粘贴到任何在线数据库(如<a class="ae mn" href="https://sqliteonline.com/" rel="noopener ugc nofollow" target="_blank">https://sqliteonline.com/</a>)，或者本地数据库(如 MySQL)，然后运行它。</p><pre class="lz ma mb mc gt md me mf mg aw mh bi"><span id="1ef0" class="mi kx jb me b gy mj mk l ml mm">CREATE TABLE CUSTOMERS (<br/>    customerNumber INTEGER,<br/>    customerName VARCHAR(100),<br/>    birthDate DATE,<br/>    city VARCHAR(100),<br/>    state VARCHAR(100),<br/>    country VARCHAR(100),<br/>    revenue DECIMAL(15 , 2)<br/>);<br/>INSERT INTO CUSTOMERS(customerNumber,customerName,birthDate,city,state,country,revenue)<br/>VALUES <br/>(103,'Atelier graphique','19710324','Nantes',NULL,'France',21000.0),<br/>(112,'Signal Gift Stores','19801130','Las Vegas','NV','USA',71800.0),<br/>(150,'S-Store','19640507','Berlin',NULL,'Germany',54500.0);</span><span id="8201" class="mi kx jb me b gy nc mk l ml mm">DELETE FROM CUSTOMERS<br/>WHERE revenue &gt; 70000;<br/>SELECT * FROM CUSTOMERS;</span><span id="fca6" class="mi kx jb me b gy nc mk l ml mm">TRUNCATE CUSTOMERS;<br/>SELECT * FROM CUSTOMERS;</span></pre><p id="8c91" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可读性更强的版本:</p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nd"><img src="../Images/fc1072299b9b8216e676ae64b7f67318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ojaMfKhFaZlj63ieClNDVw.png"/></div></div></figure><h1 id="6141" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.理解(10 英尺–20 英尺)</h1><p id="2aa7" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">DELETE 和 TRUNCATE 是两个不同的语句，目标相同:从表中删除记录。</p><blockquote class="ne nf ng"><p id="3fef" class="jy jz nh ka b kb kc kd ke kf kg kh ki ni kk kl km nj ko kp kq nk ks kt ku kv ij bi translated"><em class="jb">删除从表格中删除一行或一组行，可以根据条件选择。事实上，它支持 WHERE 子句和子查询。</em></p><p id="058c" class="jy jz nh ka b kb kc kd ke kf kg kh ki ni kk kl km nj ko kp kq nk ks kt ku kv ij bi translated">TRUNCATE <em class="jb">一次删除所有行，而且是无条件的。</em></p></blockquote><p id="3007" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一个重要的区别是关于性能，截断比删除快得多。如果您想知道为什么:DELETE 通过扫描表并在数据库事务日志中记录每个删除的行来工作(它列出了 DML 事务和每个事务发生的数据修改)。TRUNCATE 只是为表的数据释放数据库空间，而不进行日志记录或扫描(因为它是 DML 而不是 DDL 命令)。</p><p id="8f46" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在现实世界的数据项目中，我们通常使用 DELETE 来删除不需要的行，比如重复的行，或者不遵守某些业务规则的行，而 TRUNCATE 只是为了清空一个表。</p><p id="b785" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这两条语句在列的数量和类型方面保留了表的结构。</p><ul class=""><li id="f85c" class="mo mp jb ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated"><strong class="ka jc">删除</strong></li></ul><figure class="lz ma mb mc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nl"><img src="../Images/217b0c9b00d44fb5973abba7ec1e2878.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZQsYW8Z0N41_ICi6JRoy7w.png"/></div></div></figure><ul class=""><li id="d88f" class="mo mp jb ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated"><strong class="ka jc">截断</strong></li></ul><figure class="lz ma mb mc gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nm"><img src="../Images/5e19f2fd4af60ddfe936147464ee83b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NOjQBuZ8t6_7n3OEdYDt4A.png"/></div></div></figure><h1 id="8877" class="kw kx jb bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">3.练习(20 英尺-40 英尺)</h1><p id="80eb" class="pw-post-body-paragraph jy jz jb ka b kb lu kd ke kf lv kh ki kj lw kl km kn lx kp kq kr ly kt ku kv ij bi translated">为了理解您刚刚学习的 SQL 语法，在 CUSTOMERS 表上编写 3 个查询</p><ul class=""><li id="a233" class="mo mp jb ka b kb kc kf kg kj mq kn mr kr ms kv mt mu mv mw bi translated">通过删除删除所有表格行</li><li id="46a8" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">通过 TRUNCATE 删除所有表行</li><li id="34bf" class="mo mp jb ka b kb mx kf my kj mz kn na kr nb kv mt mu mv mw bi translated">删除在 1960.01.01 之前没有“州”或“出生日期”的行</li></ul><p id="13ba" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">感谢阅读。</p><p id="f97d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mn" href="http://eepurl.com/humfIH" rel="noopener ugc nofollow" target="_blank">随时订阅我的<strong class="ka jc">【分享数据知识】</strong>简讯<strong class="ka jc">。</strong>T9】</a></p><figure class="lz ma mb mc gt is gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/da472dcf42ba26d5ca1bacf3019993f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/format:webp/0*Om8azVr6vbuLxQX9.png"/></div></figure><p id="7f08" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想订阅《灵媒》,请随意使用我的推荐链接<a class="ae mn" href="https://medium.com/@maw-ferrari/membership" rel="noopener">https://medium.com/@maw-ferrari/membership</a>:对你来说，费用是一样的，但它间接有助于我的故事。</p></div></div>    
</body>
</html>