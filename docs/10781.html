<html>
<head>
<title>Kotlin Programming Langauge The Complete Learning Guide [2022] 4/6 Nullability and Null safety</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin 编程语言完全学习指南[2022] 4/6 可空性和空安全</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/kotlin-programming-langauge-the-complete-learning-guide-2022-4-6-nullability-and-null-safety-f1a844a80000?source=collection_archive---------11-----------------------#2022-11-28">https://blog.devgenius.io/kotlin-programming-langauge-the-complete-learning-guide-2022-4-6-nullability-and-null-safety-f1a844a80000?source=collection_archive---------11-----------------------#2022-11-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8a8930092ff64e957be4524daf791cf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2cvl6hZh2VGcwb79Pk1smg.png"/></div></div></figure><p id="ba73" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">学习 Kotlin 这种最强大和最有用的编程语言之一，并准备好开始开发 powerfull 原生移动应用程序和其他平台开发</p><h1 id="556a" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">空性和空安全部分</strong></h1><p id="2a3d" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated"><strong class="jx io">历史</strong></p><p id="cde5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">空指针是由<a class="ae lw" href="https://en.wikipedia.org/wiki/Tony_Hoare" rel="noopener ugc nofollow" target="_blank">东尼·霍尔</a>在 1965 年首先发明的，作为参考文献中<a class="ae lw" href="https://en.wikipedia.org/wiki/ALGOL_W" rel="noopener ugc nofollow" target="_blank"> ALGOL W </a>语言的一部分，霍尔将他的发明描述为一个“十亿美元的错误”:</p><blockquote class="lx ly lz"><p id="f98b" class="jv jw ma jx b jy jz ka kb kc kd ke kf mb kh ki kj mc kl km kn md kp kq kr ks ig bi translated">我称之为我的十亿美元错误。这是 1965 年零引用的发明。那时，我正在设计第一个面向对象语言(ALGOL W)的引用综合类型系统。我的目标是确保所有引用的使用都是绝对安全的，由编译器自动执行检查。但是我无法抗拒放入空引用的诱惑，仅仅是因为它太容易实现了。这导致了数不清的错误、漏洞和系统崩溃，在过去的四十年里，这可能造成了数十亿美元的痛苦和损失。</p></blockquote><h1 id="0d5c" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">空</h1><p id="957c" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">意味着这个对象或引用指向 nothing(非零)但 nothing，因为没有值附加到那个引用<strong class="jx io">(没有值)</strong></p><p id="97b9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意:指针是保存计算机内存中变量地址值的东西</strong></p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="6f59" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myName: String = "Mohab"<br/>}</span></pre><p id="0c53" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">字符串类型的变量的值为“Mohab”</p><p id="e030" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以这个值不为空，也不能为空，因为它有一个值，我们可以重新赋值</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="c4da" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myName: String = "Mohab"<br/>    myName="Messi"<br/>}</span></pre><p id="445c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是我们不能像下面这样做</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="32b2" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myName: String = "Mohab"<br/>    myName = "Messi"<br/>    myName = null<br/>}</span></pre><p id="77eb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您将看到编译器告诉您，“null 不能是非 Null 类型字符串的值”</p><p id="946e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">如何使一个变量可空，并给其赋空值？</strong></p><p id="c518" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">简单的加上<strong class="jx io">？</strong>在键入后，你是在告诉编译器这个变量可能是 null 并接受 null 被赋值</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="996c" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myName: String? = "Mohab"<br/>    myName = "Messi"<br/>    myName = null<br/><br/>}</span></pre><p id="cf3b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你也可以用一个空值实例化一个变量，那么编译器也知道这个变量接受空值</p><p id="caf6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">另一个例子</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="a2a7" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myNumber: Int? = 24<br/>    var double = myNumber.toDouble()<br/><br/>}</span></pre><p id="5819" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您会注意到编译器在 myNumber.toDouble()的第 3 行给出了一个错误</p><p id="8ad7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">说着<strong class="jx io">“只有安全(？。)或非空断言(！！。)在 Int 类型的可空接收器上允许调用？”</strong></p><p id="6bac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这条线是什么意思？</p><p id="90b2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这意味着你的变量可以接受空值，如果你的变量没有值，这个操作就会出错，这就是 Kotlin 中所说的<strong class="jx io">空值安全</strong></p><p id="0c0e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">那么我们该如何解决这个问题呢？</p><p id="9d1a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">简单…使用 if 条件</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="906f" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myNumber: Int? = 24<br/>    if (myNumber != null) {<br/>        var double = myNumber.toDouble()<br/>    }<br/>}</span></pre><p id="ab83" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在你告诉编译器只有当变量有一个值(非空值)时才执行我需要的操作，所以错误现在被删除了</p><p id="3d27" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是每次我声明一个空变量的时候，我会这样做吗？</p><p id="26c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当然不是，这是科特林，这是零安全……它有更短的路</p><p id="18f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过添加一个？在您的空变量之后，如下所示</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="41a4" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myNumber: Int? = 24<br/>    var double = myNumber?.toDouble()<br/>    print(double)<br/><br/>}//output 24.0</span></pre><p id="1555" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这告诉编译器，如果<strong class="jx io"> myNumber </strong>不等于<strong class="jx io"> null </strong>，则将<strong class="jx io"> myNumber </strong>增加到变量<strong class="jx io"> double </strong>的 double。否则<strong class="jx io">双</strong>将携带一个<strong class="jx io">空值</strong></p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="b905" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myNumber: Int? = 24<br/>    myNumber = null<br/>    var double = myNumber?.toDouble()<br/>    print(double)<br/><br/>}//output null</span></pre><p id="121f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您会注意到 double variabel 现在的值为 null，这是因为我们将值<strong class="jx io"> null </strong>赋给了<strong class="jx io"> myNumber </strong></p><h1 id="5cbd" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">猫王算子(？:)</h1><p id="2f3f" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在 koltin 的空安全中，是一个操作符给依赖于可空变量的变量赋值</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="f7f7" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myNumber: Int? = 24<br/>    myNumber = null<br/>    var double = myNumber ?: 50.0<br/>    print(double)<br/><br/>}//output 50.0</span></pre><p id="d00a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们说，如果我的数字不等于空值，就把它的双精度值加到双精度值上，否则(如果它等于空值)就给它的值赋值 50.0</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="36c5" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myNumber: Int? = 24<br/>    var double = myNumber?.toDouble() ?: 50.0<br/>    print(double)<br/><br/>}//output 24.0</span></pre><p id="6d43" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当 myNumber 不为空时，输出是 24.0</p><h1 id="6d03" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Not Null 断言(！！)</h1><p id="29b6" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">它是一个运算符，表示在某些情况下可空变量不能也永远不会为空。</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="3de0" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myNumber: Int? = 24<br/>    var double = myNumber!!.toDouble()<br/>    print(double)<br/><br/>}//output 24.0</span></pre><p id="9d44" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以我们可以向编译器保证这个变量不会为空，但是如果我们把它改为空呢？</p><pre class="me mf mg mh gt mi mj mk bn ml mm bi"><span id="0ac5" class="mn ku in mj b be mo mp l mq mr">fun main() {<br/>    var myNumber: Int? = 24<br/>    myNumber = null<br/>    var double = myNumber!!.toDouble()<br/>    print(double)<br/><br/>}</span></pre><p id="9fb3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你会注意到编译器的警告“操作总是失败，因为操作数总是空的”</p><p id="aefe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在当我们运行它的时候会抛出 NullPointerException</p><blockquote class="lx ly lz"><p id="55c7" class="jv jw ma jx b jy jz ka kb kc kd ke kf mb kh ki kj mc kl km kn md kp kq kr ks ig bi translated">MainKt.main(Main.kt)处的线程“main”Java . lang . nullpointerexception<br/>出现异常</p></blockquote><p id="be9e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">这部分就到此为止，等待下一部分</strong></p><p id="6792" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果这篇文章真的对你有帮助，请为我鼓掌</p><p id="ff15" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读，等待您的评论和回复。</p></div></div>    
</body>
</html>