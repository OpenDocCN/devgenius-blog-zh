<html>
<head>
<title>Increased developer productivity with Kubernetes virtual cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes 虚拟集群提高了开发人员的工作效率</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/increased-developer-productivity-with-kubernetes-virtual-cluster-7e478870d7aa?source=collection_archive---------3-----------------------#2022-01-29">https://blog.devgenius.io/increased-developer-productivity-with-kubernetes-virtual-cluster-7e478870d7aa?source=collection_archive---------3-----------------------#2022-01-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f736" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">开发人员的生产力对您的业务非常重要。开发者生产力与<a class="ae ki" href="https://www.getport.io/blog/developer-experience" rel="noopener ugc nofollow" target="_blank">开发者体验</a>有关，所以也很重要，下面的文章举例说明(如果你的开发者体验不好，会降低开发者生产力)。</p><div class="kj kk gp gr kl km"><a href="https://dagster.io/blog/dagster-airflow" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">超越气流:为什么 Dagster 是下一代数据协调器| Dagster 博客</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">我们推出 Dagster 是因为在数据领域存在工具和工程危机。有一个戏剧性的…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">dagster.io</p></div></div><div class="kv l"><div class="kw l kx ky kz kv la lb km"/></div></div></a></div><div class="kj kk gp gr kl km"><a href="https://loft.sh/blog/why-a-good-developer-experience-matters/" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">为什么良好的开发者体验很重要</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">将用户体验(UX)的概念应用于软件工程，开发人员的体验发生在另一边…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">loft.sh</p></div></div><div class="kv l"><div class="lc l kx ky kz kv la lb km"/></div></div></a></div><p id="34e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作为工程师，开发人员需要好的工具来提高生产率(实际上它适用于所有人)。中国有句谚语:好的工具是成功执行一项工作的先决条件。如果开发人员不能找到或设计好的工具，从长远来看，生产力将会降低。</p><p id="32b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kubernetes 是一个广泛使用的容器编排平台。如果您的应用程序团队管理自己的 Kubernetes 集群，您可能不需要继续阅读，它是单租户的，您可以完全控制一切。然而，通常对于大型企业，您的 Kubernetes 集群由一个中央平台团队管理，该团队为应用程序团队提供访问，这被称为多租户，您肯定会遇到以下问题:如何在降低成本的同时提高我的应用程序团队的工作效率。默认情况下，该公司将在两种多租户模式之间进行选择:名称空间即服务或集群即服务。</p><h1 id="835d" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">Kubernetes 的多租户模型</h1><p id="ce58" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">使用名称空间即服务模型，<a class="ae ki" href="https://kubernetes.io/blog/2021/04/15/three-tenancy-models-for-kubernetes/" rel="noopener ugc nofollow" target="_blank">租户</a>共享一个集群，租户工作负载被限制在分配给租户的一组名称空间内。使用这种模型，租户共享集群范围的资源，如 ClusterRoles 和 CustomResourceDefinitions(CRD ),因此不能创建或更新这些集群范围的资源。</p><p id="c9af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">借助集群即服务模式，每个租户都可以获得自己的集群。该模型允许租户拥有不同版本的集群范围的资源，如 CRDs，并提供 Kubernetes 控制平面的完全隔离。</p><p id="d07e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每种模式都有其优点和缺点，集群即服务成本更高，应用程序团队对集群拥有非常高的权限；名称空间即服务更便宜，但是，为了安装集群范围的资源，应用程序团队需要与平台团队合作来安装这些资源(这需要很长时间/永远)。许多 Kubernetes 高级工具，例如 Ray，操作员需要集群范围的资源。这大大降低了<a class="ae ki" rel="noopener ugc nofollow" target="_blank" href="/6-tips-to-increase-your-developer-productivity-6bf3e9a46669">开发者的生产力</a>。有关详细信息，请参阅以下文章</p><div class="kj kk gp gr kl km"><a href="https://kubernetes.io/blog/2021/04/15/three-tenancy-models-for-kubernetes/" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">Kubernetes 的三种租赁模式</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">作者:瑞安·贝兹迪克(美敦力)，吉姆·布瓦迪亚(尼尔马塔)，塔莎·德鲁(VMware)，郭飞(阿里巴巴)，阿德里安·路丁…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">kubernetes.io</p></div></div><div class="kv l"><div class="mg l kx ky kz kv la lb km"/></div></div></a></div><div class="kj kk gp gr kl km"><a href="https://deepankur797.medium.com/introduction-to-multi-tenancy-in-kubernetes-205786b7c8b5" rel="noopener follow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">Kubernetes 中的多租户简介</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">什么是多租户？</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">deepankur797.medium.com</p></div></div><div class="kv l"><div class="mh l kx ky kz kv la lb km"/></div></div></a></div><div class="kj kk gp gr kl km"><a href="https://medium.com/marionete/kubernetes-cluster-multi-tenancy-82ace45d6564" rel="noopener follow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">Kubernetes 集群多租户</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">多租户是指一个以上的实例在同一个共享环境中运行时的软件运行模式</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">medium.com</p></div></div><div class="kv l"><div class="mi l kx ky kz kv la lb km"/></div></div></a></div><h1 id="aedd" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">控制平面即服务模型</h1><p id="95f3" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">Kubernetes 社区正在向真正的多租户模式转变，采用<a class="ae ki" href="https://containerjournal.com/kubeconcnc/kubernetes-true-superpower-is-its-control-plane/" rel="noopener ugc nofollow" target="_blank">控制平面即服务模式</a>，也称为虚拟集群。每个租户都有自己专用的 Kubernetes 控制平面，但共享工作节点资源。在物理 Kubernetes 集群/超级集群上，应用程序团队仍然只能获得名称空间的权限，但是，他们也获得了一个“虚拟集群”，在这个虚拟集群上，他们可以管理自己的集群范围的资源。这种模式既有成本效益的好处，又有开发人员的生产力。</p><p id="c56b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://www.vcluster.com" rel="noopener ugc nofollow" target="_blank"> vcluster </a>是由<a class="mj mk ep" href="https://medium.com/u/c68ef4b4d3bb?source=post_page-----7e478870d7aa--------------------------------" rel="noopener" target="_blank"> Loft Labs </a>开发的开源“虚拟集群”解决方案。它有以下主张:</p><p id="eb7f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">只要您能够在单个名称空间内创建部署，您就能够创建一个虚拟集群并成为该虚拟集群的管理员。<br/>完全管理员权限:您可能不是主机集群内的管理员，但在 vcluster 内，您可以执行任何操作:</p><p id="bbee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建名称空间<br/>配置 RBAC 权限<br/>安装 CRD 并部署控制器<br/>测试新的入口控制器</p><p id="93bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这意味着即使是虚拟集群也不需要由平台团队进行配置。应用团队喜欢这样。</p><h1 id="ddc1" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">Azure Kubernetes 集群上的 vcluster</h1><p id="8e26" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">让我们快速尝试一下。目的是拥有一个对 AKS 集群拥有完全控制权的 Kubernetes 管理员帐户和一个只能访问 Kubernetes 命名空间的开发人员帐户，并查看开发人员帐户是否可以使用 vcluster 获得对“虚拟集群”的完全访问权限，并在带有 CRDs 的 Kubernetes 上安装工具。</p><h2 id="ec8c" class="ml le in bd lf mm mn dn lj mo mp dp ln jv mq mr lr jz ms mt lv kd mu mv lz mw bi translated">配置 AK 并设置帐户</h2><p id="2bb2" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">创建 AKS 集群并提供 1 个 Kubernetes 管理员和 1 个 Kubernetes 开发人员帐户。AKS 现在支持<a class="ae ki" href="https://docs.microsoft.com/en-us/azure/aks/use-managed-identity" rel="noopener ugc nofollow" target="_blank">托管身份</a>，所以让我们使用它</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="140f" class="ml le in nc b gy ng nh l ni nj">az aks create --resource-group &lt;resource group name&gt; --location &lt;location&gt; --name &lt;cluster name&gt; --node-vm-size Standard_DS2_v2 --node-count 2 --enable-aad --enable-azure-rbac --generate-ssh-keys</span></pre><p id="14bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们可以使用以下内容来查找 AKS 使用的托管身份</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="0b25" class="ml le in nc b gy ng nh l ni nj">az aks show -g &lt;resource group name&gt; -n &lt;cluster name&gt; --query "servicePrincipalProfile"<br/>/* returns<br/>{</span><span id="7549" class="ml le in nc b gy nk nh l ni nj">"clientId": "msi"</span><span id="868f" class="ml le in nc b gy nk nh l ni nj">}*/</span><span id="c051" class="ml le in nc b gy nk nh l ni nj">az aks show -g &lt;resource group name&gt; -n &lt;cluster name&gt; --query "identity"</span><span id="094a" class="ml le in nc b gy nk nh l ni nj">/* returns<br/>{</span><span id="d9b9" class="ml le in nc b gy nk nh l ni nj">"principalId": "",</span><span id="af8f" class="ml le in nc b gy nk nh l ni nj">"tenantId": "",</span><span id="eb09" class="ml le in nc b gy nk nh l ni nj">"type": "SystemAssigned",</span><span id="270b" class="ml le in nc b gy nk nh l ni nj">"userAssignedIdentities": null</span><span id="531b" class="ml le in nc b gy nk nh l ni nj">}</span></pre><p id="7092" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在分配帐户访问 AKS 集群。为此，您的帐户需要具有如下所述的“用户访问管理员”角色。</p><div class="kj kk gp gr kl km"><a href="https://techcommunity.microsoft.com/t5/itops-talk-blog/what-s-the-difference-between-azure-roles-and-azure-ad-roles/ba-p/2363647" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">Azure 角色和 Azure AD 角色有什么区别？</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">如果你窥视一下你的微软 Azure 环境，你会看到两种不同的角色——Azure 角色和 Azure AD…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">techcommunity.microsoft.com</p></div></div><div class="kv l"><div class="nl l kx ky kz kv la lb km"/></div></div></a></div><p id="d020" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Azure AD 中的所有角色只是授予 Azure AD 权限，而不是超出此范围(例如，特权角色管理员/全局管理员只能更改用户对 Azure AD 的权限)。如果您想要将“用户访问”更改为常规 Azure 资源(例如，资源组、订阅)，您至少应该拥有“用户访问管理员”角色。</p><div class="kj kk gp gr kl km"><a href="https://docs.microsoft.com/en-us/azure/active-directory/privileged-identity-management/pim-configure" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">什么是特权身份管理？-天蓝色广告</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">特权身份管理(PIM)是 Azure Active Directory (Azure AD)中的一项服务，使您能够管理…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">docs.microsoft.com</p></div></div><div class="kv l"><div class="nm l kx ky kz kv la lb km"/></div></div></a></div><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="19ca" class="ml le in nc b gy ng nh l ni nj"># AKS admin<br/>AKS_ID=$(az aks show --resource-group &lt;resource group name&gt; -n &lt;cluster name&gt; --query id -o tsv)</span><span id="5b8c" class="ml le in nc b gy nk nh l ni nj">AKSADMIN_ID=$(az ad user show --id <a class="ae ki" href="mailto:xcheng1@godevsuite072.onmicrosoft.com" rel="noopener ugc nofollow" target="_blank">&lt;</a>aks admin account&gt; --query objectId --out tsv)<br/>az role assignment create \<br/>  --assignee $AKSADMIN_ID \<br/>  --role "Azure Kubernetes Service RBAC Cluster Admin" \<br/>  --scope $AKS_ID</span><span id="e897" class="ml le in nc b gy nk nh l ni nj"># Now you can create a Kubernetes namespace accessible to dev<br/>az aks get-credentials --resource-group &lt;resource group name&gt; -n &lt;cluster name&gt;<br/>kubectl create namespace dev</span><span id="bfd4" class="ml le in nc b gy nk nh l ni nj"># AKS dev, only access to namespace<br/>APPDEV_ID=$(az ad user show --id <a class="ae ki" href="mailto:xchengdev1@godevsuite072.onmicrosoft.com" rel="noopener ugc nofollow" target="_blank">&lt;</a>aks dev account&gt; --query objectId --out tsv)<br/>az role assignment create \<br/>  --assignee $APPDEV_ID \<br/>  --role "Azure Kubernetes Service RBAC Admin" \<br/>  --scope "$AKS_ID/namespaces/dev"</span></pre><h2 id="f6d2" class="ml le in bd lf mm mn dn lj mo mp dp ln jv mq mr lr jz ms mt lv kd mu mv lz mw bi translated">在开发人员帐户下的物理 AKS 集群上安装 Ray</h2><p id="9cf7" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">在上面的命令之后，你可以用开发者帐号连接 AKS。然后我们可以尝试在 Kubernetes 上安装<a class="ae ki" href="https://docs.ray.io/en/latest/cluster/kubernetes.html" rel="noopener ugc nofollow" target="_blank">雷。你会清楚地看到“没有 CRD 的许可”</a></p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="fbfd" class="ml le in nc b gy ng nh l ni nj">~$ kubectl get ns<br/>Error from server (Forbidden): namespaces is forbidden: User "" cannot list resource "namespaces" in API group "" at the cluster scope: User does not have access to the resource in Azure. Update role assignment to allow access.<br/>~$ kubectl get po -n dev<br/>No resources found in dev namespace.</span><span id="fae6" class="ml le in nc b gy nk nh l ni nj"># install Ray<br/>cd ray/deploy/charts<br/>~/ray/deploy/charts$ helm -n dev install example-cluster --create-namespace ./ray<br/>Error: failed to install CRD crds/cluster_crd.yaml: customresourcedefinitions.apiextensions.k8s.io is forbidden: User "" cannot create resource "customresourcedefinitions" in API group "apiextensions.k8s.io" at the cluster scope: User does not have access to the resource in Azure. Update role assignment to allowaccess.</span></pre><h2 id="77ff" class="ml le in bd lf mm mn dn lj mo mp dp ln jv mq mr lr jz ms mt lv kd mu mv lz mw bi translated">安装 vcluster</h2><div class="kj kk gp gr kl km"><a href="https://www.vcluster.com/docs/quickstart" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">快速入门指南| vcluster 文档 Kubernetes 虚拟集群</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">此安装脚本的第 4 行将安装目录%APPDATA%\vcluster 添加到$PATH 环境变量中。这是…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">www.vcluster.com</p></div></div></div></a></div><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="7661" class="ml le in nc b gy ng nh l ni nj">curl -s -L "<a class="ae ki" href="https://github.com/loft-sh/vcluster/releases/latest" rel="noopener ugc nofollow" target="_blank">https://github.com/loft-sh/vcluster/releases/latest</a>" | sed -nE 's!.*"([^"]*vcluster-linux-amd64)".*!<a class="ae ki" href="https://github.com\1!p'" rel="noopener ugc nofollow" target="_blank">https://github.com\1!p'</a> | xargs -n 1 curl -L -o vcluster &amp;&amp; chmod +x vcluster;</span><span id="9cc5" class="ml le in nc b gy nk nh l ni nj">sudo mv vcluster /usr/local/bin;</span><span id="c7e3" class="ml le in nc b gy nk nh l ni nj">vcluster --version</span><span id="1d3c" class="ml le in nc b gy nk nh l ni nj">vcluster create vcluster-1 -n dev</span><span id="bc8c" class="ml le in nc b gy nk nh l ni nj">vcluster connect vcluster-1 -n dev</span><span id="1c04" class="ml le in nc b gy nk nh l ni nj">#use vcluster generated kubeconfig<br/>export KUBECONFIG=./kubeconfig.yaml</span><span id="c242" class="ml le in nc b gy nk nh l ni nj">kubectl get namespace<br/>/*<br/>NAME              STATUS   AGE<br/>default           Active   11m<br/>kube-system       Active   11m<br/>kube-public       Active   11m<br/>kube-node-lease   Active   11m<br/>*/</span></pre><h2 id="f679" class="ml le in bd lf mm mn dn lj mo mp dp ln jv mq mr lr jz ms mt lv kd mu mv lz mw bi translated">再次在 Kubernetes 上安装 Ray</h2><p id="2645" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">瞧啊。现在可以用了。</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="31b3" class="ml le in nc b gy ng nh l ni nj">cd ray/deploy/charts<br/>helm -n dev install example-cluster --create-namespace ./ray</span><span id="96cd" class="ml le in nc b gy nk nh l ni nj">~/ray/deploy/charts$ kubectl -n dev get rayclusters<br/>NAME              STATUS   RESTARTS   AGE<br/>example-cluster                       57s</span><span id="0703" class="ml le in nc b gy nk nh l ni nj"># delete ray cluster<br/>~/ray/deploy/charts$ kubectl -n dev delete raycluster example-cluster</span></pre><p id="8b63" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">清除</p><pre class="mx my mz na gt nb nc nd ne aw nf bi"><span id="8a9f" class="ml le in nc b gy ng nh l ni nj">vcluster delete vcluster-1 -n dev</span></pre><h1 id="8e18" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">基础建筑</h1><p id="df3c" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">请参考以下官方文档</p><div class="kj kk gp gr kl km"><a href="https://www.vcluster.com/docs/architecture/basics" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">基础| vcluster 文档 Kubernetes 虚拟集群</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">虚拟集群是运行在其他 Kubernetes 集群之上的 Kubernetes 集群。与完全分离相比…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">www.vcluster.com</p></div></div></div></a></div><p id="f6de" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">vcluster 主要有 2 个组件:</p><p id="f527" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">控制平面:使用<a class="ae ki" href="https://k3s.io" rel="noopener ugc nofollow" target="_blank"> k3s </a>服务 API 服务器、控制器管理器</p><p id="6b68" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">同步程序:vcluster 没有调度程序。它使用 syncer(在 pod 中运行),将需要调度的 pod 从 vcluster 复制到底层主机集群</p><p id="c5c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是来自<a class="ae ki" href="https://www.vcluster.com" rel="noopener ugc nofollow" target="_blank"> vcluster 网站</a>的三种多租户模式的对比。</p><figure class="mx my mz na gt no gh gi paragraph-image"><div role="button" tabindex="0" class="np nq di nr bf ns"><div class="gh gi nn"><img src="../Images/3445e61aeca34670b05be66f39adfa6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dXZnKKyCxy8rsJ-O_tbsMQ.png"/></div></div></figure><p id="6d32" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，网上还有许多关于 vcluster 的有用信息。我把它们包括在附录中。请随意与我分享任何有用的资源。</p><h1 id="85fe" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">附录</h1><div class="kj kk gp gr kl km"><a href="https://thenewstack.io/virtual-clusters-are-the-future-of-kubernetes-multitenancy/" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">虚拟集群是 Kubernetes 多租户的未来——新的堆栈</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">跨团队共享 Kubernetes 集群极其困难。如果你和库伯内特社区的人交谈…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">thenewstack.io</p></div></div><div class="kv l"><div class="nu l kx ky kz kv la lb km"/></div></div></a></div><div class="kj kk gp gr kl km"><a href="https://www.linkedin.com/pulse/kubernetes-virtual-clusters-enabling-hard-cost-gokul-chandra?trk=read_related_article-card_title" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">Kubernetes 虚拟集群——支持硬多租户和成本优化</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">随着 Kubernetes 在关键业务技术基础设施方面的成熟，对 Kubernetes 应用程序访问的需求…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">www.linkedin.com</p></div></div><div class="kv l"><div class="nv l kx ky kz kv la lb km"/></div></div></a></div><div class="kj kk gp gr kl km"><a href="https://loft-sh.medium.com/high-velocity-engineering-with-virtual-kubernetes-clusters-7df929ac6d0a" rel="noopener follow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">虚拟 Kubernetes 集群的高速工程</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">毗湿奴·奇拉马库鲁</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">loft-sh.medium.com</p></div></div><div class="kv l"><div class="nw l kx ky kz kv la lb km"/></div></div></a></div><div class="kj kk gp gr kl km"><a href="https://loft.sh/blog/kubernetes-multi-tenancy-a-best-practices-guide/" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">Kubernetes 多租户-最佳实践指南</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">Kubernetes 多租户是一个越来越多的组织感兴趣的话题，因为他们的 Kubernetes 使用…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">loft.sh</p></div></div><div class="kv l"><div class="nx l kx ky kz kv la lb km"/></div></div></a></div><figure class="mx my mz na gt no"><div class="bz fp l di"><div class="ny nz l"/></div></figure><figure class="mx my mz na gt no"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="9b1e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="mj mk ep" href="https://medium.com/u/c68ef4b4d3bb?source=post_page-----7e478870d7aa--------------------------------" rel="noopener" target="_blank"> Loft Labs </a>还有其他几个工具。我尝试了 Devspace，它有助于 Kubernetes 应用程序本地开发体验。我发现下面的视频很有帮助。</p><figure class="mx my mz na gt no"><div class="bz fp l di"><div class="ny nz l"/></div></figure><div class="kj kk gp gr kl km"><a href="https://loft.sh/blog/skaffold-vs-tilt-vs-devspace/" rel="noopener  ugc nofollow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">Skaffold vs Tilt vs DevSpace</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">随着越来越多的开发人员使用 Kubernetes，各种各样的部署工具正在出现，以帮助他们。三个有趣的例子…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">loft.sh</p></div></div><div class="kv l"><div class="oa l kx ky kz kv la lb km"/></div></div></a></div><figure class="mx my mz na gt no"><div class="bz fp l di"><div class="ny nz l"/></div></figure><div class="kj kk gp gr kl km"><a href="https://medium.com/microsoftazure/azure-kubernetes-service-aks-authentication-and-authorization-between-azure-rbac-and-k8s-rbac-eab57ab8345d" rel="noopener follow" target="_blank"><div class="kn ab fo"><div class="ko ab kp cl cj kq"><h2 class="bd io gy z fp kr fr fs ks fu fw im bi translated">Azure Kubernetes 服务—Azure RBAC 和 k8s RBAC 之间的 AKS 身份验证和授权</h2><div class="kt l"><h3 class="bd b gy z fp kr fr fs ks fu fw dk translated">Kubernetes 没有提供任何定义和管理用户的内置机制。相反，它允许管理员集成…</h3></div><div class="ku l"><p class="bd b dl z fp kr fr fs ks fu fw dk translated">medium.com</p></div></div><div class="kv l"><div class="ob l kx ky kz kv la lb km"/></div></div></a></div></div></div>    
</body>
</html>