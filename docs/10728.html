<html>
<head>
<title>Equatable Flutter The Complete Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">等效颤振完全指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/equatable-flutter-the-complete-guide-9f3604e12222?source=collection_archive---------6-----------------------#2022-11-25">https://blog.devgenius.io/equatable-flutter-the-complete-guide-9f3604e12222?source=collection_archive---------6-----------------------#2022-11-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="d7e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">学习在你的 flutter 应用中使用等价包，以及为什么使用它是重要和有用的</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b16fbe8ecdded81af723910c8e646b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*866b_IMqq-pPNkQF6Hb5MQ.png"/></div></div></figure><h1 id="bcd0" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">目录</h1><blockquote class="ls lt lu"><p id="1859" class="jk jl lv jm b jn jo jp jq jr js jt ju lw jw jx jy lx ka kb kc ly ke kf kg kh ig bi translated"><strong class="jm io">什么是等价的，为什么要用</strong></p><p id="f81f" class="jk jl lv jm b jn jo jp jq jr js jt ju lw jw jx jy lx ka kb kc ly ke kf kg kh ig bi translated"><strong class="jm io">实施</strong></p></blockquote><p id="80c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Equatbale 是一个包，在 dart 和 flutter 中有助于覆盖<strong class="jm io"> == </strong>和<strong class="jm io"> hashcode </strong></p><p id="55c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">什么是 hashcode？</strong></p><blockquote class="ls lt lu"><p id="a20b" class="jk jl lv jm b jn jo jp jq jr js jt ju lw jw jx jy lx ka kb kc ly ke kf kg kh ig bi translated">hashcode 是一个添加到语言的 Object 类中的 integar 值，所有的实例或子类都扩展它，这意味着任何对象都有它的 hashcode</p><p id="0d29" class="jk jl lv jm b jn jo jp jq jr js jt ju lw jw jx jy lx ka kb kc ly ke kf kg kh ig bi translated">它在<strong class="jm io">哈希</strong>中被<strong class="jm io">哈希表</strong>数据结构用来存储内存中的指令或对象</p><p id="d198" class="jk jl lv jm b jn jo jp jq jr js jt ju lw jw jx jy lx ka kb kc ly ke kf kg kh ig bi translated">使用这个 hashcode 来比较对象的对象比较</p><p id="bce5" class="jk jl lv jm b jn jo jp jq jr js jt ju lw jw jx jy lx ka kb kc ly ke kf kg kh ig bi translated">也就是说，如果一个类中的两个对象有相同的数据成员值，那么两个对象有相同的 hashcode，这意味着它们是相等的</p></blockquote><p id="0d0f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">想象一下，我们现在有一个 POS 应用程序需要管理员登录来添加、删除和管理数据，我们的管理员是一个对象，这是一个类，所以我们现在需要为它创建一个模型</p><p id="694f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">首先创建一个新的颤振项目</strong></p><p id="8574" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 create <strong class="jm io"> adminModel.dart </strong>中创建一个名为 model 的新目录</p><p id="ca8b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后添加下面的代码</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="d97e" class="me kv in ma b be mf mg l mh mi">class AppAdmin {<br/>  final String userName;<br/>  final String password;<br/>  const AppAdmin({required this.password, required this.userName});<br/><br/>}</span></pre><p id="d849" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在创建一个名为<strong class="jm io"> screens </strong>的新目录，创建<strong class="jm io"> admin_screen.dart </strong>并用下面的代码替换你的主字段</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="a5d7" class="me kv in ma b be mf mg l mh mi">void main() async {<br/>  runApp(const MyApp());<br/>}<br/><br/>class MyApp extends StatelessWidget {<br/>  const MyApp({super.key});<br/><br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>        title: 'Admin Pos Equatable Example',<br/>        debugShowCheckedModeBanner: false,<br/>        theme: ThemeData(<br/>          primarySwatch: Colors.blue,<br/>        ),<br/>        home: AdminScreen());<br/>  }<br/>}</span></pre><p id="743c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将下面的代码也粘贴到<strong class="jm io"> admin_screen.dart </strong>中</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="c264" class="me kv in ma b be mf mg l mh mi">import 'package:flutter/material.dart';<br/>import 'package:mofeed/admin/admin.dart';<br/><br/>class AdminScreen extends StatelessWidget {<br/>  const AdminScreen({Key? key}) : super(key: key);<br/><br/>  @override<br/>  Widget build(BuildContext context) {<br/>    final usernam = TextEditingController();<br/>    final password = TextEditingController();<br/>    return Scaffold(<br/>      appBar: AppBar(<br/>        title: const Text('Pos App'),<br/>      ),<br/>      body: Center(<br/>        child: Padding(<br/>          padding: const EdgeInsets.all(20.0),<br/>          child: Column(<br/>            mainAxisAlignment: MainAxisAlignment.center,<br/>            children: [<br/>              Text(<br/>                'Please login as an admin',<br/>                style: TextStyle(<br/>                    color: Colors.black,<br/>                    fontSize: 20,<br/>                    fontWeight: FontWeight.bold),<br/>              ),<br/>              const SizedBox(<br/>                height: 50,<br/>              ),<br/>              TextFormField(<br/>                controller: usernam,<br/>                decoration: InputDecoration(labelText: 'username'),<br/>              ),<br/>              const SizedBox(<br/>                height: 20,<br/>              ),<br/>              TextFormField(<br/>                controller: password,<br/>                decoration: InputDecoration(labelText: 'password'),<br/>              ),<br/>              const SizedBox(<br/>                height: 50,<br/>              ),<br/>              MaterialButton(<br/>                onPressed: () {<br/>   <br/>                },<br/>                child: Text(<br/>                  'Login',<br/>                  style: TextStyle(color: Colors.white),<br/>                ),<br/>                color: Colors.blue,<br/>              ),<br/>            ],<br/>          ),<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="cccf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们只是创建一个本地登录屏幕，为我们的管理员创建一个登录对象</p><p id="2312" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以将创建一个常量对象，另一个我们将在你的构建方法中从用户那里获取创建这个对象</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="2470" class="me kv in ma b be mf mg l mh mi">Widget build(BuildContext context) {<br/>  final usernam = TextEditingController();<br/>  final password = TextEditingController();<br/>  final admin1 = AppAdmin(password: '2010', userName: 'mohaberabi');</span></pre><p id="351d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后在你的材料按钮下面添加代码</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="5f1f" class="me kv in ma b be mf mg l mh mi">MaterialButton(<br/>  onPressed: () {<br/>                  final admin2 = AppAdmin(<br/>                      password: password.text.trim(),<br/>                      userName: usernam.text.trim());<br/>                  if (admin1 == admin2) {<br/>                    ScaffoldMessenger.of(context).showSnackBar(<br/>                        SnackBar(content: Text('Logged in done')));<br/>                  } else {<br/>                    ScaffoldMessenger.of(context).showSnackBar(<br/>                        SnackBar(content: Text('information is incorrect')));<br/>                  }<br/>                  print(admin2.hashCode);<br/>                  print(admin1.hashCode);<br/>  },<br/>  child: Text(<br/>    'Login',<br/>    style: TextStyle(color: Colors.white),<br/>  ),<br/>  color: Colors.blue,<br/>),</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/e6806427ce51fbea854e67e09cb8134d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zun39Y5l8PLfv4siYYFn3g.png"/></div></div></figure><p id="2192" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在控制台中</p><p id="e931" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我/扑动(8560): 378344142 <br/>我/扑动(8560):329704114</p><p id="6b04" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">两个不同的 hashcode，还有 app 说 info 不正确，那是因为 hashcode 不一样，要让它们相等，我们需要让 hashcode 相等，回到模型类，覆盖下面的那些方法</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="d4e5" class="me kv in ma b be mf mg l mh mi">class AppAdmin {<br/>  final String userName;<br/>  final String password;<br/>  const AppAdmin({required this.password, required this.userName});<br/>  @override<br/>  int get hashCode =&gt; Object.hash(password.hashCode, userName.hashCode);<br/><br/>  @override<br/>  bool operator ==(Object other) =&gt;<br/>      identical(this, other) ||<br/>      other is AppAdmin &amp;&amp;<br/>          runtimeType == other.runtimeType &amp;&amp;<br/>          userName == other.userName &amp;&amp;<br/>          password == other.password;<br/>}</span></pre><p id="e347" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后再次返回管理屏幕，并按下按钮</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mj"><img src="../Images/f950ee47eb33b84b4577964a5034afe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ticFBZ4YJAUv0y4LdFwJ2Q.png"/></div></div></figure><p id="3772" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在控制台中</p><p id="bf73" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">I/颤振(8560):176079861<br/>I/颤振(8560):176079861<br/>I/颤振(8560):真</p><p id="46b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们已经完成了比较，这里等价的规则是什么，equatable 只用一行简单的代码就可以完成所有这些，让我们来看看如何完成</p><p id="8800" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先在 pubsbec.yaml 文件中安装 equtable</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="011b" class="me kv in ma b be mf mg l mh mi">equatable: ^2.0.5</span></pre><p id="ebdb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后转到模型类导入，删除 operator 和 hashcode 方法</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="cd0f" class="me kv in ma b be mf mg l mh mi">import 'package:equatable/equatable.dart';</span></pre><p id="c476" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后扩展等价和重写方法</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="c278" class="me kv in ma b be mf mg l mh mi">import 'package:equatable/equatable.dart';<br/><br/>class AppAdmin extends Equatable {<br/>  final String userName;<br/>  final String password;<br/>  const AppAdmin({required this.password, required this.userName});<br/><br/>  @override<br/>  List&lt;Object?&gt; get props =&gt; [userName, password];<br/>}</span></pre><p id="acab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">再次运行应用程序，它应该给出相同的结果</p><p id="472f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果我的类是另一个类的子类，我该怎么办，我不需要写所有的操作符和 hashcode 代码，简单等价类有一个 mixin</p><pre class="kj kk kl km gt lz ma mb bn mc md bi"><span id="d939" class="me kv in ma b be mf mg l mh mi">import 'package:equatable/equatable.dart';<br/>import 'package:flutter/material.dart';<br/><br/>class AppAdmin extends ChangeNotifier with EquatableMixin {<br/>  final String userName;<br/>  final String password;<br/>  AppAdmin({required this.password, required this.userName});<br/><br/>  @override<br/>  // TODO: implement props<br/>  List&lt;Object?&gt; get props =&gt; [userName, password];<br/>}</span></pre><p id="802b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是等价的</p><p id="42e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">如果这篇文章帮到你了为我鼓掌</strong></p><p id="0276" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我很高兴听到你的任何评论，如果我做错了什么，也请帮助我。</p><p id="13b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">感谢阅读。</strong></p></div></div>    
</body>
</html>