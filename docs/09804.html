<html>
<head>
<title>Unit tests in Javascript with Jest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Jest 在 Javascript 中进行单元测试</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/unit-tests-in-javascript-with-jest-8962f29d8af4?source=collection_archive---------6-----------------------#2022-09-14">https://blog.devgenius.io/unit-tests-in-javascript-with-jest-8962f29d8af4?source=collection_archive---------6-----------------------#2022-09-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/77fa6cc58364c76b31a246531b26da54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VxBKV4bcUJ4M7WCuCNmHWw.png"/></div></div></figure><p id="0716" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">软件测试基础文章。Jest 框架的基本概念和单元测试。</p><h1 id="40a7" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">玩笑</h1><p id="85d1" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">Jest 是来自 Javascript 生态系统的开源测试框架。Jest 是目前最受欢迎的测试框架，被脸书、Airbnb、Twitter 和 Spotify 等大公司使用，它还有多个插件，可以在前端和后端(React、Angular、Vue、Node)轻松与所有现代框架集成。</p><p id="c6d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它的一些特性是简单的配置、代码快照的使用和包含的覆盖报告。</p><h1 id="642d" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">单元测试</h1><p id="b853" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">单元测试是在计算机软件的最小个体单元上执行的测试。其主要目的是验证这些小部件在隔离环境中的正确操作。</p><p id="9d95" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">单元测试包括:</p><ul class=""><li id="d079" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated">功能。</li><li id="b15e" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">班级。</li><li id="cad7" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">方法。</li><li id="5938" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">在其他小块中。</li></ul><h1 id="47b4" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">Jest 测试的关键概念</h1><p id="16b9" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">以下概念将帮助我们理解所有 Javascript 测试框架中常用的术语和保留字，重点是 Jest 使用的函数。</p><ul class=""><li id="6a7a" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated"><strong class="jx io">描述:</strong>功能，将帮助我们创建分组几个相关测试的块。</li><li id="aaf8" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><strong class="jx io">测试</strong>:将测试诡辩的功能。请注意，测试函数包含一个名为 it 的别名，它采用了相同的功能。</li><li id="41b1" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><strong class="jx io"> Expect </strong>:允许在测试过程中验证匹配的功能。Jest 将通过返回基于标准的结果来验证这些匹配。每当需要验证一个值时，就会使用 expect 函数。Expect 与其他函数协同工作来处理多种情况。</li></ul><p id="43fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是层次结构的使用顺序:</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="a919" class="mt ku in mp b gy mu mv l mw mx"><strong class="mp io">describe</strong>('set of math test', () <strong class="mp io">=&gt;</strong> {<br/>  <br/>  <strong class="mp io">test</strong>('it is pair', () <strong class="mp io">=&gt;</strong> {<br/>    <strong class="mp io">expect</strong>(6 <strong class="mp io">%</strong> 2).toEqual(0);<br/>  });</span><span id="38c4" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">test</strong>('it is not pair', () <strong class="mp io">=&gt;</strong> {<br/>    <strong class="mp io">expect</strong>(7 <strong class="mp io">%</strong> 2).not.toEqual(0);<br/>  });</span><span id="0484" class="mt ku in mp b gy my mv l mw mx">});</span></pre><p id="d82e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:在测试文件中，Jest 将这些方法和对象放在全局环境中，使用它们不需要任何东西。</p><h1 id="ba86" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">配置我们的环境</h1><p id="5caf" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在开始之前，有必要在我们的工作环境中安装<a class="ae mz" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Nodejs </strong> </a>。安装后，运行以下命令:</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="e313" class="mt ku in mp b gy mu mv l mw mx">&gt; mkdir unit-test-with-jest<br/>&gt; cd unit-test-with-jest/<br/>&gt; npm init -y<br/>&gt; <!-- -->npm i jest --save-dev</span></pre><p id="a2b0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">还将配置一个 NPM 脚本来运行单元测试，并配置一个脚本来生成覆盖率报告。打开 package.json 并配置以下脚本:</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="d24d" class="mt ku in mp b gy mu mv l mw mx">{<br/>  "name": "unit-test-with-jest",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "<strong class="mp io">test</strong>": "jest",<br/>    "<strong class="mp io">coverage</strong>": "jest --collect-coverage"<br/>  },<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC",<br/>  "devDependencies": {<br/>    "jest": "^29.0.3"<br/>  }<br/>}</span></pre><h2 id="12ef" class="mt ku in bd kv na nb dn kz nc nd dp ld kg ne nf lh kk ng nh ll ko ni nj lp nk bi translated">math.js 文件</h2><p id="00d9" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">第一步是创建一个名为<code class="fe nl nm nn mp b">math.js</code>的 javascript 文件，其中包含基本的算术运算，如加、减、乘、除。这些特性中的每一个都将被包装在不同的函数中，并被导出以供进一步测试。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="0566" class="mt ku in mp b gy mu mv l mw mx"><strong class="mp io">function</strong> sum(a, b) {<br/>  <strong class="mp io">return</strong> a <strong class="mp io">+</strong> b;<br/>}</span><span id="333d" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">function</strong> sub(a, b) {<br/>  <strong class="mp io">return</strong> a <strong class="mp io">-</strong> b;<br/>}</span><span id="0d4a" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">function</strong> mul(a, b) {<br/>  <strong class="mp io">return</strong> a <strong class="mp io">*</strong> b;<br/>}</span><span id="320a" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">function</strong> div(a, b) {<br/>  <strong class="mp io">return</strong> a <strong class="mp io">/</strong> b;<br/>}</span><span id="534c" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">module</strong>.exports <strong class="mp io">=</strong> {<br/>  sum,<br/>  sub,<br/>  mul,<br/>  div<br/>}</span></pre><h2 id="b23f" class="mt ku in bd kv na nb dn kz nc nd dp ld kg ne nf lh kk ng nh ll ko ni nj lp nk bi translated">math.test.js 文件</h2><p id="84c3" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">下一步是创建一个名为<code class="fe nl nm nn mp b">math.test.js</code>的 javascript 文件，它将包含从<code class="fe nl nm nn mp b">math.js</code>文件导入的每个操作的单元测试。强调文件将被创建在一个名为<code class="fe nl nm nn mp b">__tests__</code>的文件夹中</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="9401" class="mt ku in mp b gy mu mv l mw mx"><strong class="mp io">const</strong> { sum, sub, mul, div } <strong class="mp io">=</strong> require('../math.js');</span><span id="3f14" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">describe</strong>('set of arithmetic operations', () <strong class="mp io">=&gt;</strong> {<br/>  <br/>  <strong class="mp io">test</strong>('sum of numbers', () <strong class="mp io">=&gt;</strong> {<br/>    <strong class="mp io">expect</strong>(sum(1, 1)).toBe(2);<br/>  });</span><span id="0c1e" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">test</strong>('subtraction of numbers', () <strong class="mp io">=&gt;</strong> {<br/>    <strong class="mp io">expect</strong>(sub(1, 1)).toBe(0);<br/>  });</span><span id="6e11" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">test</strong>('multiply of numbers', () <strong class="mp io">=&gt;</strong> {<br/>    <strong class="mp io">expect</strong>(mul(1, 1)).toBe(1);<br/>  });</span><span id="4557" class="mt ku in mp b gy my mv l mw mx"><strong class="mp io">test</strong>('divide of numbers', () <strong class="mp io">=&gt;</strong> {<br/>   <strong class="mp io">expect</strong>(div(1, 1)).toBe(1);<br/>  });<br/>});</span></pre><p id="23a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:Jest 默认情况下会寻找名为<code class="fe nl nm nn mp b">__tests__</code>的文件夹来搜索测试，并且会覆盖所有包含以<code class="fe nl nm nn mp b">.test.js</code>或<code class="fe nl nm nn mp b">.spec.js</code>结尾的文件名的文件，同样默认情况下，它会忽略<code class="fe nl nm nn mp b">node_modules</code>中的所有内容。</p><h2 id="c24e" class="mt ku in bd kv na nb dn kz nc nd dp ld kg ne nf lh kk ng nh ll ko ni nj lp nk bi translated">运行测试</h2><p id="8a16" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">为了执行详细的测试，通过控制台指示命令<code class="fe nl nm nn mp b">npm run test</code>。这样，Jest 将执行检查，并抛出结果。</p><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/6212572258271dce76e8ba44685795f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sQAE5rRckdFmlZe4ZwV22w.png"/></div></div></figure><h1 id="4b80" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">覆盖率报告</h1><p id="6c91" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">覆盖率报告允许您估计测试了多少百分比的代码。这些报告提供了用于进一步分析的一般指标。要运行覆盖率报告，通过控制台指示命令<code class="fe nl nm nn mp b">npm run covergare</code>。Jest 将通过控制台和当前目录中生成的 HTML 报告提供指标。</p><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/acb853b2a3a6113b8e4ada90634fb242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xsINTcp614aOxELUwWRwMw.png"/></div></div></figure><h1 id="a8ee" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">资源 javascript jest</h1><ul class=""><li id="9675" class="lw lx in jx b jy lr kc ls kg nq kk nr ko ns ks mb mc md me bi translated"><a class="ae mz" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">主页笑话</strong> : </a>主网站、帮助、博客和文档。</li><li id="be3f" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><a class="ae mz" href="https://jestjs.io/docs/getting-started" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Jest 用户手册</strong> </a>:第一步，安装，举例。</li><li id="4b2f" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><a class="ae mz" href="https://jestjs.io/docs/cli" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">Jest CLI</strong></a><strong class="jx io">:</strong>Jest 命令行、选项等。</li><li id="6a40" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><a class="ae mz" href="https://jestjs.io/docs/api" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Jest 文档 API</strong></a>:API、方法、kickstarters 的使用。</li><li id="0fde" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated"><a class="ae mz" href="https://github.com/facebook/jest" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> GitHub Jest </strong> </a>:官方开源库。</li></ul><h1 id="5f29" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结局</h1><p id="6f56" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">在本文中，我们将介绍框架的基本概念，记住有多个 CLI 函数和命令可以帮助我们涵盖所有可能的情况。建议阅读文档以继续扩展该工具的知识。</p></div><div class="ab cl nt nu hr nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ig ih ii ij ik"><p id="a6e1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢你远道而来，如果你觉得这很有用，别忘了鼓掌👏。订阅以接收更多内容🔔。</p><p id="532c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你需要额外的帮助，请联系我🤠。</p><ul class=""><li id="60b4" class="lw lx in jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated">✉️ <a class="ae mz" href="mailto:dcortes.net@gmail.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">给我发邮件</strong> </a></li><li id="323a" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">🤝<a class="ae mz" href="https://www.linkedin.com/in/dcortesnet/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">在 LinkedIn 上联系我</strong> </a></li><li id="cbe1" class="lw lx in jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">📮<a class="ae mz" href="https://twitter.com/dcortes_net" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">在推特上联系我</strong> </a></li></ul><p id="3336" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">非常感谢您的阅读，我感谢您的时间。</p></div></div>    
</body>
</html>