<html>
<head>
<title>Module code generation in iOS development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 开发中的模块代码生成</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/module-code-generation-in-ios-development-c2d998272ff8?source=collection_archive---------3-----------------------#2022-06-20">https://blog.devgenius.io/module-code-generation-in-ios-development-c2d998272ff8?source=collection_archive---------3-----------------------#2022-06-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0415d17077bb737b66a9a820a18db3df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_s3QiutJyOr-AMNueuHifA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://www.shutterstock.com/video/clip-1460239-mechanism-motion" rel="noopener ugc nofollow" target="_blank">https://www . shutterstock . com/video/clip-1460239-mechanism-motion</a></figcaption></figure><p id="5ff8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">优秀的程序员——避免多次编写相同代码的程序员。想象一下，如果程序员手动创建<a class="ae jz" href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwib0I-b0Iz4AhUDQvEDHWj4CuoQFnoECAYQAQ&amp;url=https%3A%2F%2Fwww.objc.io%2Fissues%2F13-architecture%2Fviper%2F&amp;usg=AOvVaw2qUYV6vglF7jK2W3Z0FewL" rel="noopener ugc nofollow" target="_blank"> VIPER </a>模块，会耗费多少时间——这意味着你要为每个新模块一次又一次地编写所有的类和样板代码(希望你不要这样做)。这里我将谈谈通过创建模板代码帮助我们节省大量时间的工具，特别是<strong class="kc io"> Generamba </strong> <em class="ky">，</em> <strong class="kc io"> Xcode 模板</strong>和<strong class="kc io"> Xcode 片段</strong></p><p id="5e20" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望大家能在下面找到有用的信息。如果你喜欢我的文章，别忘了点击鼓掌按钮👋</p><h1 id="70a8" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我们有什么工具来生成代码？</h1><p id="e39e" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">有很多，让我们快速浏览一下最受欢迎的:</p><ul class=""><li id="70e2" class="mc md in kc b kd ke kh ki kl me kp mf kt mg kx mh mi mj mk bi translated"><a class="ae jz" href="https://github.com/SwiftGen/SwiftGen" rel="noopener ugc nofollow" target="_blank"> SwiftGen </a>最受欢迎，它允许自动生成静态代码来访问您的公共资源— <strong class="kc io">资产，Localizable.strings </strong>。一旦资源名称被更改，它可以让我们避免在运行时损坏应用程序的错误。此外，它还提供了一个选项，可以使用 IDE 的自动完成功能选择合适的资源，并根据需要配置资产和可本地化资源的结构。</li><li id="45ea" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated"><a class="ae jz" href="https://github.com/krzysztofzablocki/Sourcery" rel="noopener ugc nofollow" target="_blank"> Sourcery </a>帮助我们根据您编写的规则和代码自动创建样板代码。就我个人而言，我和许多其他开发人员使用它来创建模拟，只是通过指定需要模拟的类型。这里有一篇很棒的文章介绍如何实现这一点— <a class="ae jz" href="https://www.vadimbulavin.com/mocking-in-swift-using-sourcery/" rel="noopener ugc nofollow" target="_blank">用 Sourcery 生成快速模拟代码</a></li></ul><p id="a5c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面的工具在描述的用例中是有帮助的。然而，对于创建空的模块屏幕(几个文件同时存在)，我更喜欢使用最方便和流行的工具——Generamba 和 Xcode 模板</p><p id="0bdc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">需要提到的是，其他开发人员创建了他们自己的脚本和工具来生成代码，但显然这也有其缺点——每个工具都有其独特的格式语言，需要得到支持。</p><h1 id="cd0e" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">杰纳巴</h1><p id="6733" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">由漫步者公司开发的在独联体国家公司中广为人知的工具。他们推广他们使用的 VIPER 架构，因此他们开发了自己的工具来创建预装了 VIPER 模板的样板 iOS 代码。</p><h2 id="6b15" class="mq la in bd lb mr ms dn lf mt mu dp lj kl mv mw ln kp mx my lr kt mz na lv nb bi translated">设置和快速启动</h2><p id="5191" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">你可以在他们的<a class="ae jz" href="https://github.com/strongself/Generamba" rel="noopener ugc nofollow" target="_blank"> Generamba </a>库查看完整的说明和文档。在这里，我将快速重复主要步骤:</p><ul class=""><li id="f187" class="mc md in kc b kd ke kh ki kl me kp mf kt mg kx mh mi mj mk bi translated">通过运行<code class="fe nc nd ne nf b">$ gem install generamba</code>在您的机器上安装它</li><li id="625c" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated">跳转到您的项目根文件夹并运行<code class="fe nc nd ne nf b">$ generamba setup</code>。回答这些问题，您将看到<em class="ky">随机文件</em>，其中包含项目模板生成和已安装模板的一般设置:</li></ul><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/3fc7b02e6810f95fc78b2bc58c381a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aCqew9HfT4N5fdmyV8TXuw.png"/></div></div></figure><p id="aa27" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您在答案中填写了一些错误的字段，请不要担心，您可以稍后在<em class="ky"> Rambafile </em>中更改它们:</p><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/7bcf0e7cf1d00d1194c83d5de48fb0a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-40zQMbO4yx1NItpmu68YQ.png"/></div></div></figure><p id="6e25" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过运行<em class="ky"> $generamba 模板安装</em>来安装默认模板。创建<strong class="kc io"> Rambafile </strong>中指定的模板文件，并保存在<strong class="kc io"> Templates </strong>文件夹中。结果应该是这样的:</p><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/20206577021ca460245852736cf5a2e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*E4IRa37mmMTihXtTpxMLpw.png"/></div></figure><h2 id="0df1" class="mq la in bd lb mr ms dn lf mt mu dp lj kl mv mw ln kp mx my lr kt mz na lv nb bi translated">如何创建自己的模板？</h2><p id="a1de" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">为了这个目标，你可以用两件东西来操作——Generamba wiki 和预装的模板。这足以让你编写自己的模板了。格式语言非常直接，参数目的也很容易理解。</p><h2 id="3dda" class="mq la in bd lb mr ms dn lf mt mu dp lj kl mv mw ln kp mx my lr kt mz na lv nb bi translated">赞成的意见</h2><ul class=""><li id="2357" class="mc md in kc b kd lx kh ly kl nn kp no kt np kx mh mi mj mk bi translated">易于安装和使用</li><li id="8462" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated">为特定目标和特定文件夹添加测试文件</li><li id="f605" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated">代码库是开源的——你可以按照自己的方式派生和调整它</li><li id="c3d7" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated">简单易读的格式</li><li id="eda8" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated">可从项目文件夹管理—所有模板都在一个位置</li></ul><h2 id="4813" class="mq la in bd lb mr ms dn lf mt mu dp lj kl mv mw ln kp mx my lr kt mz na lv nb bi translated">骗局</h2><ul class=""><li id="e193" class="mc md in kc b kd lx kh ly kl nn kp no kt np kx mh mi mj mk bi translated">最后一次代码更改是在三年前。既然它依赖于<code class="fe nc nd ne nf b">.xcodeproj</code>，那么面对它显著变化的结构，它就可以被打破。</li><li id="49a4" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated">没有用户界面，只能从控制台工作(对我来说，更多的是向上而不是向下)</li></ul><h1 id="f91a" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Xcode 模板</h1><p id="d601" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">Xcode 模板很久以前就发布了，尽管我只是最近才开始广泛使用它。首先，我为单独的样板文件类型创建了模板:CustomUIView、CustomTableViewCell、APITargetType(用于<a class="ae jz" href="https://github.com/Moya/Moya" rel="noopener ugc nofollow" target="_blank"> Moya </a>)等。</p><p id="c3e4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当您为新文件选取模板时，它们会出现在滚动条的底部:</p><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/89ccf5763144c2418499b487705477d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wtqYFiMC7TNsZlv0pk6l-A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">自定义模板图标是我选择的，说来话长…</figcaption></figure><h2 id="a7d4" class="mq la in bd lb mr ms dn lf mt mu dp lj kl mv mw ln kp mx my lr kt mz na lv nb bi translated">如何开始使用？</h2><p id="05f9" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我不想在这里重复，所以我只给<a class="ae jz" href="https://www.raywenderlich.com/26582967-xcode-project-and-file-templates" rel="noopener ugc nofollow" target="_blank">留了一个链接</a>到相当不错的指南，它非常详细地描述了它。</p><h2 id="a27d" class="mq la in bd lb mr ms dn lf mt mu dp lj kl mv mw ln kp mx my lr kt mz na lv nb bi translated">赞成的意见</h2><ul class=""><li id="5e96" class="mc md in kc b kd lx kh ly kl nn kp no kt np kx mh mi mj mk bi translated">它直接在 Xcode 的用户界面上工作</li><li id="a634" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated">您可以让用户配置每个模板创建，因为他想通过创建各种字段来填充</li></ul><h2 id="3a6d" class="mq la in bd lb mr ms dn lf mt mu dp lj kl mv mw ln kp mx my lr kt mz na lv nb bi translated">骗局</h2><ul class=""><li id="51c6" class="mc md in kc b kd lx kh ly kl nn kp no kt np kx mh mi mj mk bi translated">您不能为模板中的每个文件设置不同的文件</li><li id="132e" class="mc md in kc b kd ml kh mm kl mn kp mo kt mp kx mh mi mj mk bi translated">模板可能会因为更新或移除 Xcode 而丢失</li></ul><h1 id="4c6c" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">关于 Xcode 片段的一些话</h1><p id="e35c" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">你可能已经注意到 Xcode 有时会建议为你填充一些结构，例如— <em class="ky"> if let 语句</em>:</p><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/cecb0039ff60ed01b00d6d0cf17c5256.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PjJctnX8nrPZm5-OUub1Ag.png"/></div></div></figure><p id="760a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于一些小的样板代码，您可以创建和使用自己的代码片段。它非常容易使用和创建—您只需选择要从中创建代码片段的代码，然后右键单击以创建代码片段:</p><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/cbafac7a6ef6f4560a9ccf809f4ceee3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k9XDsFGirBKn-abYuAQxcQ.png"/></div></div></figure><p id="b877" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之后，您会看到一个窗口，在这里您可以编辑新创建的代码片段的参数:</p><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ca"><img src="../Images/92f0c1d8c9b69c6792c1005c866beb1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*al1uOMDdgYxMpGObXz_jAQ.png"/></div></div></figure><p id="3534" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">另外，在创建一个片段之前，检查它是否已经出现在列表中，这样你就不会浪费时间去创建现有的东西了:)</em></p><p id="d8a5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，您只需通过编写您指定的完成提示，将它用作默认代码片段:</p><figure class="nh ni nj nk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nt"><img src="../Images/a34e90daa8b3aa361433a241623d6bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zCqyKL4Uv56qYiaF_9ru9w.png"/></div></div></figure><h1 id="3900" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">那还有什么值得用的呢？</h1><p id="e62a" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">在我看来，在大多数情况下，我会选择<strong class="kc io"> Xcode 模板</strong>，因为它们更容易使用，而且苹果自己也支持。尽管如果你想对你正在使用的乐器进行一些定制和控制，你也应该看看<strong class="kc io"> Generamba </strong>👍</p></div></div>    
</body>
</html>