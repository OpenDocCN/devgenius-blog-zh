# éšè—å®ä¾‹åŒ–çš„å·¥å‚æ¨¡å¼

> åŸæ–‡ï¼š<https://blog.devgenius.io/factory-patterns-to-hide-instantiation-kotlin-d5f01cf01921?source=collection_archive---------8----------------------->

Y oï¼Œæ¬¢è¿å›åˆ°æˆ‘å¼€å§‹ä¼ æ’­å¿«ä¹çš„è®¾è®¡æ¨¡å¼ç³»åˆ—ï¼ä¸è¦åå•¬ä½ çš„æ—¶é—´ï¼Œçœ‹çœ‹æˆ‘ä»¥å‰çš„å¸–å­ï¼Œä»¥è·å¾—æœ€å¤§çš„æ”¶è·:

*   ç­–ç•¥æ¨¡å¼:[https://medium . com/toward sdev/strategy-pattern-for-independent-algorithms-kot Lin-70 ed 24 c 7 BD 8 b](https://medium.com/towardsdev/strategy-pattern-for-independent-algorithms-kotlin-70ed24c7bd8b)
*   è§‚å¯Ÿè€…æ¨¡å¼:[https://medium . com/toward sdev/observer-pattern-for-loose-coupling-kot Lin-f5ab 804609 bb](https://medium.com/towardsdev/observer-pattern-for-loose-coupling-kotlin-f5ab804609bb)
*   è£…é¥°æ¨¡å¼:[https://medium . com/toward sdev/decorator-decorator-pattern-for-object-composition-kot Lin-7 CEC 92 cbaf 7b](https://medium.com/towardsdev/decorator-decorator-pattern-for-object-composition-kotlin-7cec92cbaf7b)

å¦å¤–ï¼Œé€šè¿‡è´­ä¹°â€œè®¾è®¡æ¨¡å¼â€æ¥æ”¯æŒ[å¥¥èµ–åˆ©åª’ä½“](https://medium.com/u/fbfa235a954c?source=post_page-----d5f01cf01921--------------------------------):[https://www . oreilly . com/library/view/head-first-Design/9781492077992/](https://www.oreilly.com/library/view/head-first-design/9781492077992/)

ç»“æ„:

*   ä»‹ç»
*   é—®é¢˜(åœ¨æœ¬æ–‡ä¸­å°†æœ‰ 2 ä¸ªéƒ¨åˆ†)
*   è¦éµå¾ªçš„è®¾è®¡åŸåˆ™
*   æœ€ç»ˆè§£å†³æ–¹æ¡ˆä»£ç (åœ¨æœ¬æ–‡ä¸­å°†æœ‰ 2 ä¸ªéƒ¨åˆ†)
*   é¢å¤–éƒ¨åˆ†
*   å›¾ç”»

ä¸€ç‚¹åºè¨€:è¿™ä¸ªæ¨¡å¼å¾ˆé•¿ã€‚å®é™…ä¸Šï¼Œå®ƒåŒ…å«äº† 3 ä¸ªå˜é‡ï¼Œæˆ‘å°†å°è¯•åˆ†è§£å®ƒä»¬ğŸ‘¹ä½†æ˜¯è¦è·å¾—æœ€å¤§çš„æ”¶è·ï¼Œè¯·æŸ¥é˜…æåˆ°çš„é‚£æœ¬ä¹¦ğŸ‘€

æ­¤å¤–ï¼Œæˆ‘å°†åœ¨æœ¬æ–‡ä¸­ä¸æ­¢ä¸€æ¬¡åœ°æåˆ°å„ç§äº‹æƒ…ï¼Œå› ä¸ºè¿™æœ‰åŠ©äºæ›´å¥½åœ°å¸æ”¶ä¿¡æ¯ï¼Œå¹¶ä»ä¸åŒçš„è§’åº¦çœ‹å¾…å®ƒ

# å·¥å‚æ¨¡å¼

## ä»‹ç»

åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘å·²ç»å¤šæ¬¡æåˆ°:ä»¥ä¸€ç§çµæ´»çš„æ–¹å¼è®¾è®¡ä½ çš„è½¯ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ”¹å˜ç°æœ‰çš„ä»£ç æˆ–è€…åˆ†æ•£ä¸€å †`if/else`è¯­å¥ï¼Œè¿™äº›è¯­å¥ä¼šä½¿ä»£ç å˜å¾—è„†å¼±ï¼Œå®¹æ˜“è¢«ä¿®æ”¹ã€‚

ä¸ºäº†é¿å…è¿™ç§æƒ…å†µ**ç¼–ç¨‹åˆ°ä¸€ä¸ªæ¥å£**è€Œä¸æ˜¯å…·ä½“çš„çˆ¶æ¥å£ï¼Œå¹¶é€šè¿‡å¤šæ€æ¥åˆ©ç”¨æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿä¸å±€é™äºè¿™äº›ç±»çš„å…·ä½“å®ç°ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹ç³Ÿç³•çš„è®¾è®¡:

ä¹ä¸€çœ‹ï¼Œæˆ‘ä»¬ç¼–ç¨‹åˆ°ä¸€ä¸ªè¶…ç±»å‹ï¼Œå¯ä»¥åˆ©ç”¨å¤šæ€æ€§ã€‚**å”‰**ï¼Œå¦‚æœ`ParentClass`çš„å®ç°ä¼šæ”¹å˜æ€ä¹ˆåŠï¼ŸğŸ§åŠ å·ï¼Œé‚£äº›ä¸Šé¢æåˆ°çš„`if/else`åœ¨è¿™é‡Œæ‰¾åˆ°ä»–ä»¬çš„è·¯= >åï¼

> æ‰¾åˆ°ä¸åŒçš„ä¸œè¥¿å¹¶å°è£…å®ƒä»¬

å¦‚ä½•é‡æ„ï¼Ÿè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥:

1.  æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ*åˆ›å»ºå¯¹è±¡*
2.  ä»€ä¹ˆä¿æŒä¸å˜ï¼Ÿåº”ç”¨äºå¯¹è±¡çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç›¸åŒçš„è¶…ç±»å‹

Solutionâ“ **å°è£…**å˜åŒ–çš„å†…å®¹(å¯¹è±¡åˆ›å»º)å¹¶ä¿ç•™æ–¹æ³•è°ƒç”¨ã€‚å¦å¤–ï¼Œæ·»åŠ æ¥å£/æŠ½è±¡ç±»ã€‚

> å¯¹è±¡åˆ›å»ºçš„éƒ¨åˆ†è¿åäº†å®ä½“çš„**å¼€é—­åŸåˆ™**,å› ä¸ºæˆ‘ä»¬éœ€è¦é‡æ–°æ‰“å¼€ä»£ç æ¥æ”¾ç½®æ›´æ”¹

é‡åˆ°æ‰€è°“çš„**ç®€æ˜“å·¥å‚**å“ªæ¥çš„æ•‘æ´ï¼æ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„ repo ä¸­æ‰¾åˆ°æºä»£ç :

[](https://github.com/SleeplessChallenger/KotlinDesignPatterns/tree/main/src/main/kotlin/4_FactoryPattern/SimpleFactory) [## KotlinDesignPatterns/src/main/kotlin/4 _ factory pattern/simple factory at mainâ€¦

### O'Reilly è®¾è®¡æ¨¡å¼åœ¨ Kotlin çš„å®ç°ã€‚ä¸º sleep less challenger/KotlinDesignPatterns å¼€å‘åšå‡ºè´¡çŒ®â€¦

github.com](https://github.com/SleeplessChallenger/KotlinDesignPatterns/tree/main/src/main/kotlin/4_FactoryPattern/SimpleFactory) 

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä»”ç»†é˜…è¯»å®ƒæ¥ä¿®æ”¹ä¸Šé¢ç²˜è´´çš„è®¾è®¡ã€‚

1.  `PizzaStore.kt`æ˜¯æˆ‘ä»¬çš„ä¸»æ–‡ä»¶ï¼Œç±»ä¼¼äº`main()`å‡½æ•°ã€‚æˆ‘ä»¬ç”¨`type`å‘¼å«`orderPizza()`ï¼Œå¼€å§‹æˆ‘ä»¬çš„åˆ›ä½œã€‚ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬æŠŠå˜åŒ–çš„é€»è¾‘ç§»åˆ°å¦ä¸€ä¸ªå«åš`SimplePizzaFactory`çš„ç±»ä¸­ï¼Œåœ¨é‚£é‡Œå¯ä»¥æ‰¾åˆ°å˜åŒ–çš„éƒ¨åˆ†ã€‚
2.  `Pizza.kt`æ˜¯æˆ‘ä»¬çš„`abstract class`ï¼Œå®ƒæ˜¯å…¶ä»–æŠ«è¨ç±»å‹çš„çˆ¶ä»£:`Cheese` & `Pepperoni`
3.  åœ¨æˆ‘ä»¬åˆ›å»ºäº†æƒ³è¦çš„æ¯”è¨é¥¼ä¹‹åï¼Œæˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„`PizzaStore`ï¼Œåœ¨è¿™é‡Œåˆ©ç”¨äº†è¶…ç±»å‹çš„æ–¹æ³•(åˆå`Pizza`)ã€‚ç”±äºæˆ‘ä»¬çš„ concrete pizza æ˜¯å­ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å…³å¿ƒè¿”å›çš„æ˜¯å“ªä¸€ä¸ªã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç®€å•åœ°å¯¹å®ƒåº”ç”¨æ–¹æ³•ã€‚

ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªåœ°æ–¹ï¼Œ`SimplePizzaFactory`æ‰€æœ‰å¯èƒ½çš„å˜åŒ–éƒ½é›†ä¸­åœ¨è¿™é‡Œï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦é‡æ–°æ‰“å¼€æˆ‘ä»¬çš„`Store`æ¥å®ç°å®ƒä»¬ğŸ”

ä½†æ˜¯â€¦

ç®€å•å·¥å‚æœ¬èº«å¹¶ä¸æ˜¯ä¸€ç§æ¨¡å¼ã€‚ç„¶è€Œï¼Œè®¸å¤šå¼€å‘è€…è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ª thingâ€¼ï¸

ç°åœ¨ï¼Œåœ¨è¿™ä¸ªæ²‰é‡çš„ä»‹ç»ä¹‹åï¼Œè®©æˆ‘ä»¬è¿›å…¥æœ‰è¶£çš„éƒ¨åˆ†ï¼Œæ¢ç´¢çœŸå®çš„ patternsğŸ•µğŸ¼â€â™‚ï¸

## é—®é¢˜:ç¬¬ä¸€éƒ¨åˆ†

æ­£å¦‚ä½ åœ¨ä»‹ç»ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬éœ€è¦**å°è£…**ä¸åŒçš„ä¸œè¥¿ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬è®¾æ³•ä»¥æŸç§æ–¹å¼åšåˆ°äº†è¿™ä¸€ç‚¹ï¼Œè¿˜èƒ½èµ°å¾—æ›´è¿œå—ï¼Ÿ

ä½ çœ‹ï¼Œåœ¨æˆ‘ä»¬çš„`SimpleFactory`ä¸­ï¼Œæˆ‘ä»¬çš„å¯¹è±¡**å·¥å‚**åˆ›é€ äº†æ‰€æœ‰ç§ç±»çš„äº§å“ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦æœ‰æ›´å¤šçš„å˜åŒ–å‘¢ï¼Ÿ

ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰`abstract creator`ä¹Ÿå°±æ˜¯**å®¢æˆ·ç«¯**å’Œè®¸å¤š`concrete creators`ä¹Ÿå°±æ˜¯**å­å®¢æˆ·ç«¯**ã€‚åœ¨**å®¢æˆ·ç«¯**ä¸­ï¼Œæˆ‘ä»¬æœ‰*æŠ½è±¡å·¥å‚æ–¹æ³•*ï¼Œç„¶ååœ¨**å­å®¢æˆ·ç«¯ä¸­å®ç°ã€‚**

å› æ­¤ï¼Œæˆ‘ä»¬æœ‰*è®¸å¤šå­å®¢æˆ·*ï¼Œè¿™äº›å®¢æˆ·å¸Œæœ›æ‹¥æœ‰è‡ªå·±çš„äº§å“**ç»§æ‰¿*æŠ½è±¡äº§å“*çš„**ã€‚å½“çˆ¶ creator çš„å­ç±»å¯ä»¥å¤„ç†**å·¥å‚æ–¹æ³•**ä¸­çš„æ‰€æœ‰å®ä¾‹åŒ–ï¼Œä»è€Œåªè¿”å›äº§å“æ—¶ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åšå‘¢ï¼Ÿç„¶åäº§å“å°†ç”±æŠ½è±¡åˆ›å»ºè€…å¤„ç†å¹¶è¿”å›

å“‡â€¦ğŸ¤¯æˆ‘çŸ¥é“è¿™çœ‹èµ·æ¥å¾ˆæ¨¡ç³Šï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥ã€‚

1.  æˆ‘ä»¬åœ¨å­å®¢æˆ·ä¸­åˆ¶é€ å·¥å‚æ–¹æ³•ã€‚è¿™ä¸ªå·¥å‚æ–¹æ³•åœ¨æŠ½è±¡åˆ›å»ºå™¨ä¸­å®ç°äº†`abstract`å·¥å‚æ–¹æ³•
2.  è¿™äº›å­å®¢æˆ·ç«¯å¤„ç†å®ä¾‹åŒ–
3.  å®ƒä»¬è¿”å› object(æ˜¯æŠ½è±¡å¯¹è±¡çš„å­ç±»)
4.  æˆ‘ä»¬çš„*æŠ½è±¡å®¢æˆ·ç«¯*å¯¹å…¶è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼Œå¹¶å°†å¤„ç†åçš„å¯¹è±¡è¿”å›ç»™æˆ‘ä»¬çš„å…·ä½“å­å®¢æˆ·ç«¯ï¼Œå…·ä½“å­å®¢æˆ·ç«¯å†å°†å…¶å‘ˆç°ç»™æˆ‘ä»¬(å®é™…ä¸Šï¼Œè¯¥æ–¹æ³•æ˜¯ä»**å­å®¢æˆ·ç«¯**è°ƒç”¨çš„ï¼Œå› æ­¤è¯¥æ–¹æ³•å°†å¯¹è±¡è¿”å›ç»™æˆ‘ä»¬)

```
 abstract creator
               /           \
           sub-creator1    sub-creator2
           /   |    \        /   |   \

concrete product1 ..2     another concrete product1 ..2Those products inherit from abstract product
```

çœ‹çœ‹æˆ‘ä»¬**å¦‚ä½•å°†**æŠ½è±¡ç±»åˆ›å»ºè€…*ä¸å­å®¢æˆ·ç«¯ä¸­çš„*å…·ä½“äº§å“*åˆ†ç¦»ã€‚*

> åˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬ä¼šä¸€æ­¥ä¸€æ­¥æ¥çš„

æ­¤å¤–ï¼Œåœ¨æ‰€æœ‰è¿™äº›æ¨¡å¼ä¸­ï¼Œ`abstract creator`æ˜¯æˆ‘ä»¬çš„å®¢æˆ·ç«¯ã€‚æˆ‘ä»¬**å°è£…**å­å®¢æˆ·ç«¯ä¸­çš„å˜æ›´ï¼Œå¹¶éš”ç¦»å…¶ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ä¸éœ€è¦çŸ¥é“å¤ªå¤šï¼Œåªè¦æœ‰é‚£ä¸ªäº§å“è¦å¤„ç†(å®¢æˆ·åªçŸ¥é“è¿™ä¸ªäº§å“å°†æ˜¯`abstract product)`çš„å­ç±»å‹)

## æœ€ç»ˆè§£å†³æ–¹æ¡ˆä»£ç :ç¬¬ä¸€éƒ¨åˆ†

[](https://github.com/SleeplessChallenger/KotlinDesignPatterns/tree/main/src/main/kotlin/4_FactoryPattern/Factory) [## KotlinDesignPatterns/src/main/kotlin/4 _ Factory pattern/Factory at mainâ€¦

### O'Reilly è®¾è®¡æ¨¡å¼åœ¨ Kotlin çš„å®ç°ã€‚ä¸º sleep less challenger/KotlinDesignPatterns å¼€å‘åšå‡ºè´¡çŒ®â€¦

github.com](https://github.com/SleeplessChallenger/KotlinDesignPatterns/tree/main/src/main/kotlin/4_FactoryPattern/Factory) 

è®©æˆ‘ä»¬çœ‹çœ‹å…·ä½“çš„ä¾‹å­æ¥æ¾„æ¸…æ‰€æœ‰çš„éªšåŠ¨ğŸ™Œ

1.  æˆ‘ä»¬æœ‰`abstractCreator.kt`ï¼Œå®ƒæœ‰æŠ½è±¡æ–¹æ³•`createObject()`ã€‚*ä½†æ˜¯æˆ‘ä»¬ä¸ç›´æ¥ç”¨è¿™ä¸ªæ–¹æ³•ã€‚*
2.  æˆ‘ä»¬æœ‰å­ç±»(å­å®¢æˆ·ç«¯):`concreteCreator` & `anotherConcreteCreator`ï¼Œè¿™ä¸ª`abstractCreator`ï¼Œæ˜¯æˆ‘ä»¬æœ¬åœ°çš„åˆ›ä½œè€…ã€‚é‚£äº›åˆ›å»ºè€…**è¦†ç›–/å®ç°äº†**æ¥è‡ªçˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œè€Œçˆ¶ç±»å®é™…ä¸Šæ˜¯æˆ‘ä»¬çš„**å·¥å‚**ã€‚æ‰€ä»¥ï¼Œé‚£äº›å­å®¢æˆ·ç«¯æ˜¯æˆ‘ä»¬çš„`abstractCreator`çš„å­å®¢æˆ·ç«¯å¯ä»¥è®¿é—®çˆ¶å®¢æˆ·ç«¯çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä»**å®¢æˆ·ç«¯**(çˆ¶å®¢æˆ·ç«¯)è°ƒç”¨æ–¹æ³•ï¼Œåœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæ˜¯`giveType`è§¦å‘äº†ç‰¹å®šå­å®¢æˆ·ç«¯çš„`createObject`ã€‚
3.  é‚£ä¸ª`createObject`ä¹Ÿæ˜¯æˆ‘ä»¬çš„**å·¥å‚**æœ¬èº«ï¼Œå®ƒå¤„ç†å¯¹è±¡å®ä¾‹åŒ–ã€‚å®ƒå°†å…·ä½“äº§å“è¿”å›ç»™æˆ‘ä»¬çš„`abstractClient` `giveType`æ–¹æ³•ï¼Œå…·ä½“äº§å“æ˜¯æˆ‘ä»¬æŠ½è±¡äº§å“çš„å­äº§å“ã€‚
4.  åœ¨è¿™ä¸ªçˆ¶æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è¢«é™åˆ¶åœ¨**äº§å“**çš„`abstract class`(çˆ¶)ï¼Œè¿™å…è®¸æˆ‘ä»¬åº”ç”¨æ¥è‡ª**æŠ½è±¡äº§å“**çš„æ–¹æ³•(å›å¿†å¤šæ€åŠå…¶ç”¨æ³•)
5.  å­äº§å“å› å®¢æˆ·è€Œå¼‚ã€‚å³`concreteCreator`æœ‰ 2 ä¸ª`concreteProducts`(æ¥è‡ªæŠ½è±¡äº§å“)`anotherConcreteCreator`è¿˜æœ‰ 2 ä¸ª`anotherConcreteProducts`(åˆæ˜¯**ä»æŠ½è±¡äº§å“ç»§æ‰¿**)ã€‚
6.  é‚£äº›äº§å“ï¼Œä½œä¸ºå­ç±»ï¼Œè¢«è¿”å›åˆ°`abstractCreator`ä¸­çš„`giveType`æ–¹æ³•ï¼Œåœ¨é‚£é‡Œæ¥è‡ª`abstractProduct`çš„æ–¹æ³•è¢«åº”ç”¨ã€‚
7.  ç„¶åï¼Œå¤„ç†åçš„å¯¹è±¡è¿”å›ç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥å¤„ç†å®ƒã€‚(æˆ‘åœ¨ä¸Šé¢è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨çˆ¶æ–¹æ³•ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•ç›´æ¥ç»™æˆ‘ä»¬ç»“æœ)
8.  æˆ‘ä»¬åœ¨`abstractCreator`ä¸­çš„`giveType()`æ˜¯ä»ç‰¹å®šç±»å‹çš„äº§å“ä¸­åˆ†ç¦»å‡ºæ¥çš„**ã€‚åªè¦è¿™ä¸ªäº§å“æ˜¯æŠ½è±¡äº§å“çš„ä¸€ä¸ª**å­ç±»ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå“ªä¸ªå®¢æˆ·å®é™…ä¸ŠæŠŠäº§å“è¿”å›ç»™æˆ‘ä»¬ã€‚****

**å‘ƒâ€¦â€¦ğŸ˜²å¾ˆè‰°éš¾ã€‚æˆ‘å¸Œæœ›ä½ å¾—åˆ°äº†è¿™ç§åˆ†ç¦»å·¥å‚çš„ä¸»è¦ä¼˜ç‚¹ã€‚**

**åŒæ ·ï¼Œå¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥å°½å¯èƒ½å¤šåœ°å‚æ•°åŒ–/è°ƒæ•´æˆ‘ä»¬çš„åˆ›å»º(ä¹Ÿå°±æ˜¯å­ä»£ä¸­çš„**å·¥å‚æ–¹æ³•**),åªè¦å®ƒè¿”å›æœŸæœ›çš„å¯¹è±¡ã€‚**

> **é€šè¿‡ä½¿ç”¨**å·¥å‚æ¨¡å¼**æˆ‘ä»¬:**
> 
> **-å°è£…ç±»/æ–¹æ³•ä¸­ä¸åŒçš„éƒ¨åˆ†**
> 
> **-ç¼–ç¨‹åˆ°ä¸€ä¸ªæ¥å£ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç‰¹å®šçš„å®ç°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çŸ¥é“å·¥å‚è¿”å›`abstractProduct`çš„å­ç±»å‹**

## **è¦éµå¾ªçš„è®¾è®¡åŸåˆ™**

**å›ºä½“çš„å¦ä¸€ä¸ªåŸç†ğŸ˜ˆ**

1.  **ä¾èµ–å€’ç½®åŸåˆ™:æˆ‘ä»¬ä¾èµ–æŠ½è±¡ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ç±»**

**ä½ å¯èƒ½ä¼šé—®è‡ªå·±:è¿™å¬èµ·æ¥ç±»ä¼¼äºä¸Šé¢æåˆ°çš„*â€œç¼–ç¨‹åˆ°ä¸€ä¸ªæ¥å£è€Œä¸æ˜¯ç‰¹å®šçš„å®ç°â€*ã€‚ä½†æ˜¯è¿™ä¸ªåŸåˆ™è§„å®šäº†è¿™æ ·ä¸€ä¸ªäº‹å®:æˆ‘ä»¬çš„é«˜çº§ç»„ä»¶&ä½çº§ç»„ä»¶ä¸åº”è¯¥ç›¸äº’ä¾èµ–ï¼Œå®ƒä»¬**å¿…é¡»ä¾èµ–äºç›¸ä¼¼çš„æŠ½è±¡ã€‚****

**ä»¥ä¸‹æ˜¯å¯¹åŸåˆ™çš„è¿å:**

```
 abstractCreator
                     /   |     \
       concreteProduct1        concreteProduct3
                   concreteProduct2
```

**ç°åœ¨è®©æˆ‘ä»¬æœ¬ç€è¿™ä¸ªåŸåˆ™æ¥åš:**

```
 abstractCreator
                           |
                       abstractProduct
                     /      |       \
         concreteProduct1        concreteProduct3
                   concreteProduct2
```

**çœ‹çœ‹**é«˜å±‚ç»„ä»¶** (abstractCreator) & **ä½å±‚ç»„ä»¶** (concreteProducts)å¦‚ä½•ä¾èµ–ä¸€ä¸ªæŠ½è±¡ã€‚å›å¿†ä»£ç æ¼”ç»ƒä¸­çš„`giveType`ã€‚è¿™å–å†³äº*æŠ½è±¡äº§å“ç±»å‹*ã€‚åœ¨å­å®¢æˆ·ç«¯ä¸­åˆ›å»ºçš„äº§å“ä¹Ÿä¾èµ–äº**ç›¸åŒçš„** *æŠ½è±¡äº§å“ç±»å‹*ã€‚**

## **é—®é¢˜:ç¬¬äºŒéƒ¨åˆ†**

**ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³ç®€å•åœ°åˆ›å»ºæœ€ç»ˆäº§å“ï¼Œè€Œæ˜¯ç”¨äº§å“ç³»åˆ—å¯¹å…¶è¿›è¡Œå¾®è°ƒï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œæƒ³è±¡æˆ‘ä»¬ä¸æ˜¯ç®€å•åœ°åˆ›å»ºå…·æœ‰ç¡¬ç¼–ç å€¼çš„`concreteProduct`ï¼Œè€Œæ˜¯åœ¨å®ƒé‡Œé¢æœ‰å·¥å‚ï¼Œå­äº§å“æœ‰å®ƒä»¬è‡ªå·±çš„`interface`ç­‰ç­‰ï¼Ÿ**

**å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ç›¸åŒçš„`concreteProduct`ï¼Œåªæ˜¯å­äº§å“çš„ç±»å‹ä¸åŒï¼Œé‚£ä¼šæ€ä¹ˆæ ·ï¼Ÿå³`Colour`æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒæœ‰ä¸¤ä¸ªç›¸ä¼¼çš„å­©å­:`Red` & `Blue`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦åƒ**å·¥å‚æ¨¡å¼**ä¸­é‚£æ ·æœ‰é‡å¤çš„ä»£ç ã€‚**

**æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬å·²ç»è®¾æ³•åˆ›é€ äº†ä¸€ä¸ªæ‰€è°“çš„æˆåˆ†å®¶æ—ï¼Œæ¥å¡«å……æˆ‘ä»¬ç›¸åŒçš„äº§å“ã€‚**

> **åœ¨æˆ‘çš„ä»£ç ä¸­ï¼Œäº§å“ç³»åˆ—æ˜¯é¢å›¢ã€å¥¶é…ªã€æµ‡å¤´**

**è¯·é˜…è¯»ä»¥ä¸‹æ®µè½ï¼Œç›´åˆ°å®ƒé“­åˆ»åœ¨ä½ çš„è„‘æµ·ä¸­:**

**ä¸€ä¸ª **æŠ½è±¡å·¥å‚**å…è®¸æˆ‘ä»¬é€šè¿‡ä¸ºå­å·¥å‚(ä¸æ˜¯**å­å®¢æˆ·/å­åˆ›å»ºè€…**)æä¾›æ¥å£æ¥åˆ›å»ºäº§å“ç³»åˆ—ã€‚ç»“æœï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯**ä¸*æ··å‡åœŸå·¥å‚*åˆ†ç¦»**ï¼Œä½¿å¾—*æ··å‡åœŸäº§å“*å……æ»¡æ‰€è°“çš„é…æ–™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰*å¤šå®¶å·¥å‚*ç”Ÿäº§**ç›¸åŒçš„**äº§å“ï¼Œè€Œ*çš„å«é‡*ä¸åŒã€‚è¯´åˆ°è¢«**è§£è€¦**ï¼Œå¯ä»¥è¿½æº¯åˆ°äº§å“ä¸å…¶ä»–ä»£ç çš„**æ¾è€¦åˆ**ï¼Œå³**å­å®¢æˆ·ç«¯/å®¢æˆ·ç«¯**ä»£ç (åœ¨æˆ‘ä»¬è¿™é‡Œæ˜¯**å…·ä½“åˆ›å»ºè€…/æŠ½è±¡**)ä¿æŒä¸å˜ã€‚å› æ­¤ï¼Œ**æ¯ä¸ªå·¥å‚éƒ½åˆ›é€ äº†è‡ªå·±çš„äº§å“ç³»åˆ—**ã€‚**

**Iâ€™m serious, ã‚‚ã†ä¸€åº¦èª­ã‚“ã§ãã ã•ã„ï¼ğŸ‘º**

## **æœ€ç»ˆè§£å†³æ–¹æ¡ˆä»£ç :ç¬¬äºŒéƒ¨åˆ†**

**ç°åœ¨è®©æˆ‘ä»¬ä»”ç»†é˜…è¯»**æŠ½è±¡å·¥å‚**çš„ä»£ç **

**[](https://github.com/SleeplessChallenger/KotlinDesignPatterns/tree/main/src/main/kotlin/4_FactoryPattern/AbstractFactory) [## KotlinDesignPatterns/src/main/kotlin/4 _ factory pattern/abstract factory at mainâ€¦

### O'Reilly è®¾è®¡æ¨¡å¼åœ¨ Kotlin çš„å®ç°ã€‚ä¸º sleep less challenger/KotlinDesignPatterns å¼€å‘åšå‡ºè´¡çŒ®â€¦

github.com](https://github.com/SleeplessChallenger/KotlinDesignPatterns/tree/main/src/main/kotlin/4_FactoryPattern/AbstractFactory) 

1.  æ˜¯æˆ‘ä»¬å¿ƒçˆ±çš„å·¥å‚ã€‚å®ƒå®šä¹‰äº†æ‰€æœ‰å…¶ä»–å·¥å‚è¦å®ç°çš„æ–¹æ³•ã€‚
2.  `TokyoIngredientFactory.kt`æ˜¯å®ç°æ‰€æœ‰æ–¹æ³•çš„å…·ä½“å·¥å‚ã€‚å›æƒ³ä¸€ä¸‹ä¸Šé¢å†™çš„ä¸œè¥¿:è¿™äº›æ–¹æ³•æœ¬èº«å°±æ˜¯å°å‚ã€‚
3.  `AbstractPizzaStore.kt`æ˜¯æˆ‘ä»¬çš„æŠ½è±¡åˆ›å»ºè€…/å®¢æˆ·ï¼Œå®ƒå®šä¹‰äº†**æŠ½è±¡å·¥å‚æ–¹æ³•**ï¼Œä»¥åŠä¸€ä¸ªæˆ‘ä»¬å°†ç”¨æ¥è·å¾—äº§å“çš„æ–¹æ³•(`createPizza()`-æˆ‘ä»¬çš„å·¥å‚æ–¹æ³•)
4.  `TokyoPizzaStore.kt`æ˜¯æ‹¥æœ‰æ··å‡åœŸå·¥å‚çš„å­å®¢æˆ·/åˆ›å»ºè€…ã€‚è¿™ä¸ªå­å®¢æˆ·æŠŠå·¥å‚æ”¾åœ¨æ··å‡åœŸäº§å“é‡Œé¢ã€‚
5.  `Pepperoni.kt`ç­‰æŠ«è¨éƒ½æ˜¯`AbstractPizza`çš„å­äº§å“ã€‚è¿™é‡Œå›å¿†ä¸€ä¸‹**åè½¬**çš„ä¾èµ–å…³ç³»ã€‚
6.  `Cheese`ã€`Dough`ä¸ºæ··å‡åœŸé…æ–™æ¥å£ã€‚

é‚£ä¹ˆï¼Œä¸€åˆ‡æ˜¯å¦‚ä½•è¿ä½œçš„å‘¢ï¼Ÿ

åœ¨`main.kt`ä¸­ï¼Œæˆ‘ä»¬å®ä¾‹åŒ–**å­å®¢æˆ·ç«¯**å¹¶ä½¿ç”¨æ¥è‡ª**æŠ½è±¡å®¢æˆ·ç«¯**çš„æ–¹æ³•ã€‚Stepsâ˜ï¸:

1.  ä»**å­å®¢æˆ·ç«¯**ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨**çˆ¶å®¢æˆ·ç«¯**(å¸¦æœ‰æŠ«è¨ç±»å‹)æ–¹æ³•(åœ¨æˆ‘çš„ä¾‹å­ä¸­æ˜¯`orderPizza()`)ï¼Œè¯¥æ–¹æ³•è§¦å‘å­å®¢æˆ·ç«¯ä¸­å®ç°çš„å·¥å‚æ–¹æ³•ã€‚
2.  **å·¥å‚æ–¹æ³•**
3.  è¿™ä¸ª**å·¥å‚**å®ç°äº†**æŠ½è±¡å·¥å‚**ã€‚
4.  ç„¶åï¼Œä»å¼€å§‹çš„çˆ¶ä¸­çš„é‚£ä¸ªæ–¹æ³•ï¼Œ`orderPizza()`ï¼Œä½¿ç”¨æŠ½è±¡çš„æ¯”è¨æ–¹æ³•ï¼Œ`prepare()`ï¼Œåœ¨å…·ä½“çš„æ¯”è¨ä¸­å®ç°ã€‚é‚£ç§æ–¹æ³•ä½¿ç”¨æ”¾åœ¨æ··å‡åœŸæ¯”è¨é¥¼é‡Œé¢çš„å·¥å‚**ã€‚**
5.  **ç„¶ååœ¨çˆ¶æ–¹æ³•`orderPizza()`ä¸­ï¼Œå®ƒè¿›ä¸€æ­¥å¤„ç† pizzaã€‚æœ€åï¼Œæˆ‘ä»¬æ”¶åˆ°äº†æ¯”è¨é¥¼ã€‚**
6.  **å› æ­¤ï¼Œæ­£å¦‚åœ¨å¼€å§‹æ—¶æåˆ°çš„ï¼Œå¦‚æœå†…éƒ¨ææ–™ç›¸åŒï¼Œæˆ‘ä»¬ä¸éœ€è¦ç›¸åŒæ¯”è¨é¥¼çš„ç±»åˆ«æ•°ã€‚åªè¦æŠŠå·¥å‚æ”¾åœ¨é‡Œé¢ï¼Œè¿™å°†è§£è€¦ä»£ç ã€‚**

**å‘ƒâ€¦æˆ‘çŸ¥é“ï¼Œå¾ˆå¤šä¿¡æ¯ï¼Œå¾ˆéš¾è·‘é¢˜ã€‚**

> **å¦‚æœä½ æ²¡æœ‰å¾—åˆ°ä»»ä½•ä¸œè¥¿ï¼Œä¸è¦ç¾äºå†è¯»ä¸€éå¹¶æé—®**

## **é¢å¤–éƒ¨åˆ†**

*   **åœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä»£ç ä¸­ï¼Œæˆ‘ä»¬çš„**å­˜å‚¨**æ˜¯**å®¢æˆ·ç«¯**ï¼Œå·¥å‚æ–¹æ³•ä¸º`createPizza()`ã€‚ç„¶åï¼Œåœ¨`Pepperoni/MeatPizza`æˆ‘ä»¬ä¾æ¬¡æœ‰å°å·¥å‚ã€‚**
*   **`Pizza`ä¸**å’Œ**ä»åœ°åŒºå·®å¼‚ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œçœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªå……æ»¡äº†å·¥å‚çš„æ¨¡å¼ï¼Œè¿™äº›å·¥å‚æœ‰ä»–ä»¬è‡ªå·±çš„ä¸€å¥—é…æ–™ã€‚ä¾‹å¦‚ï¼Œ`Pepperoni`å¯ä»¥å¡«å……å„ç§åˆ©ç”¨ä¸åŒæˆåˆ†çš„å·¥å‚ã€‚åªè¦è¿™äº›å·¥å‚åšæŒç‰¹å®šçš„`interface`æˆåˆ†ï¼Œå³ä»–ä»¬åˆ›é€ å­æˆåˆ†(åƒ`ThickCrust`å·¥å…·`Dough`ç­‰)ï¼Œä¸€åˆ‡éƒ½åœ¨è¿è½¬ã€‚**
*   **çœ‹ï¼Œ**æŠ½è±¡å·¥å‚**ä¸­çš„æ¯ä¸ªæ–¹æ³•æœ¬èº«å°±æ˜¯ä¸€ä¸ªå°å·¥å‚ã€‚ä¸ºä»€ä¹ˆï¼Ÿ- >é‚£äº›æ–¹æ³•åœ¨å®ƒä»¬å†…éƒ¨è¿›è¡Œå¯¹è±¡å®ä¾‹åŒ–ã€‚å¦å¤–ï¼Œ*å…·ä½“å·¥å‚*è¦†ç›–*æŠ½è±¡å·¥å‚*çš„*æŠ½è±¡æ–¹æ³•*ã€‚è¿™æœ‰ç‚¹ç±»ä¼¼äº**å·¥å‚æ¨¡å¼**ä¸­çš„æ–¹æ³•è¦†ç›–ï¼Œä½†æ˜¯æˆ‘ä»¬åªè¦†ç›–äº†ä¸€ä¸ªæ–¹æ³•ã€‚**
*   **åœ¨`Abstract Factory`çš„æºä»£ç ä¸­ä½ å¯ä»¥æ‰¾åˆ°æ–‡ä»¶å¤¹:`Modified Version`ã€‚å®ƒæ˜¯ç”±æˆ‘å·¥ä½œæ—¶çš„é«˜çº§å¼€å‘äººå‘˜ä¿®æ”¹çš„ã€‚å¦ç‡åœ°è¯´ï¼Œæˆ‘å–œæ¬¢ä»–çš„è¡¥å……ğŸ‘å¦‚æœä½ æƒ³è®©æˆ‘åšä¸€ä¸ªä»£ç æ¼”ç»ƒâ€”â€”å†™åœ¨è¯„è®ºé‡Œï¼**

## **å›¾ç”»ğŸ¨**

****ç®€å•å·¥å‚&å·¥å‚æ¨¡å¼****

****å·¥å‚æ¨¡å¼****

**![](img/267a6d4ac91563441ec16afbb5c27116.png)**

****æŠ½è±¡å·¥å‚æ¨¡å¼****

**![](img/c234887f2e562f1130a0146857411797.png)**

**æˆ‘çš„ç”»èƒ½è®©æˆ‘ç†æ¸…æ‰€æœ‰äº‹ç‰©çš„è¿ä½œæ–¹å¼ã€‚æˆ‘çŸ¥é“æˆ‘çš„æ¶‚é¸¦å¯èƒ½çœ‹èµ·æ¥å¾ˆå¯æ€•ğŸ˜µï¼Œä½†å¦‚æœä½ å‘ç°ä»–ä»¬è‡³å°‘æœ‰ä¸€ç‚¹ç‚¹æ´å¯ŸåŠ›ï¼Œé‚£ä¹ˆæˆ‘æ˜¯ elatedâœŒï¸**

## **ç»“å°¾éƒ¨åˆ†ğŸ‘£**

**åœ¨æœ€åä¸€éƒ¨åˆ†ï¼Œè®©æˆ‘ä»¬è§‚å¯Ÿä¸€ä¸‹æŠ½è±¡å·¥å‚æ¨¡å¼çš„**å·¥å‚** & **çš„å­¦æœ¯å®šä¹‰****

> ****å·¥å‚æ¨¡å¼**:ä¸ºå¯¹è±¡åˆ›å»ºå®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œä½†æ˜¯å¼ºåˆ¶å­ç±»å®ç°å®ƒã€‚è¿™ç§æ¨¡å¼å…è®¸ä¸»ç±»å°†å¯¹è±¡å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»**
> 
> ****æŠ½è±¡å·¥å‚æ¨¡å¼**:å®šä¹‰ç›¸å…³äº§å“æ—åˆ›å»ºçš„æ¥å£ï¼Œä¸æŒ‡å®šäº§å“çš„å…·ä½“ç±»åˆ«**

**è¿™ç§æ¨¡å¼è‚¯å®šæ˜¯æ¼«é•¿çš„ã€‚éœ€è¦å¤šå°‘éå°±ä»”ç»†è¯»å¤šå°‘éã€‚å¹¶ä¸”å¯ä»¥è‡ªç”±æé—®ï¼ğŸ‘å¸Œæœ›ä½ æ˜ç™½è¿™ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«ï¼Œä½†æ˜¯å¦‚æœä¸æ˜ç™½ï¼Œä½ çŸ¥é“è¯¥æ€ä¹ˆåšï¼Œè¯¥å»å“ªé‡Œé—®ğŸ˜‡**

**ä½ å¯ä»¥æ‰¾åˆ°æˆ‘:**

*   **é¢†è‹±:[www.linkedin.com/in/sleeplesschallenger](http://www.linkedin.com/in/sleeplesschallenger)**
*   **GitHub:[https://github.com/SleeplessChallenger](https://github.com/SleeplessChallenger)**
*   **leet code:[https://leetcode.com/SleeplessChallenger/](https://leetcode.com/SleeplessChallenger/)**
*   **ç”µæŠ¥:@æ— çœ æŒ‘æˆ˜è€…****