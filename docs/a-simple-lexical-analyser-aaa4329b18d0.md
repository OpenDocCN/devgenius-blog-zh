# ä¸€ä¸ªç®€å•çš„è¯æ³•åˆ†æå™¨

> åŸæ–‡ï¼š<https://blog.devgenius.io/a-simple-lexical-analyser-aaa4329b18d0?source=collection_archive---------10----------------------->

è¦æ±‚:ä¸ºäº†èƒ½å¤Ÿçœ‹åˆ°ä½ è‡ªå·±çš„è¯æ³•åˆ†æå™¨ï¼Œç¡®ä¿ä½ æ˜¯åœ¨ä¸€ä¸ªåŸºäº Linux çš„ç¯å¢ƒä¸­å·¥ä½œã€‚(å¯¹äº Windows ç”¨æˆ·ï¼Œè¯·æŸ¥çœ‹ WSL)

æˆ‘å°†ä½¿ç”¨ Linux æä¾›çš„ lex å·¥å…·ï¼Œå®ƒå¯ä»¥æŒ‰ç…§[æåˆ°çš„](https://stackoverflow.com/questions/3871425/how-to-install-lex-and-yacc-in-ubuntu)è¿›è¡Œå®‰è£…

ç¼–è¯‘è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥(å³æŠŠæºä»£ç è½¬æ¢æˆæœºå™¨ç )æ˜¯è¯æ³•åˆ†æã€‚åˆä¹é€»è¾‘çš„ç¬¬ä¸€æ­¥æ˜¯ç¡®ä¿ç¨‹åºåªåŒ…å«æœ‰æ•ˆçš„å­—ç¬¦å’Œç¬¦å·ã€‚ä¸€æ—¦è¿™ä¸€ç‚¹å¾—åˆ°ç¡®è®¤ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è§£é‡Šä»£ç çš„æ­£ç¡®å«ä¹‰ã€‚

è¯æ³•åˆ†æå™¨å°†å­—ç¬¦æµè½¬æ¢æˆæ ‡è®°æµã€‚ä»¤ç‰Œæ˜¯æŒ‡ä¸€ç»„æœ‰æ„ä¹‰çš„å­—ç¬¦ã€‚ä¾‹å¦‚:æ ‡è¯†ç¬¦ã€æ•´æ•°ã€å…³é”®å­—ã€ç©ºç™½ç­‰ç­‰ã€‚æ¯ä¸ªç¨‹åºéƒ½è¦è¿è¡Œä¸€ä¸ªè¯æ³•åˆ†æå™¨ï¼Œè¯æ³•åˆ†æå™¨æ˜¯ä¸€ä¸ªå®šä¹‰è¯­è¨€æ¥å—çš„æ ‡è®°çš„ç¨‹åºã€‚å³ä»€ä¹ˆæ˜¯æœ‰æ•ˆçš„ã€‚

æˆ‘è§£é‡Šè¯æ³•åˆ†æå™¨å·¥ä½œçš„æ–¹å¼ã€‚
åªè¦è¾“å…¥è¢«æä¾›
-ä¿æŒä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªåœ¨å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œåªè¦æ»¡è¶³ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¡ä»¶ã€‚
-å½“ä¸å­˜åœ¨åŒ¹é…æ¡ä»¶æ—¶ï¼Œå¼€å§‹æŒ‡é’ˆè¢«ç§»åŠ¨åˆ°ç»“æŸæŒ‡é’ˆçš„ä½ç½®(è¿™æ ‡å¿—ç€åœ¨å¼€å§‹å’Œç»“æŸæŒ‡é’ˆä¹‹é—´åˆ›å»ºäº†ä¸€ä¸ªä»¤ç‰Œ)ï¼Œç»“æŸæŒ‡é’ˆç»§ç»­å‘å³ç§»åŠ¨ã€‚

> ç°åœ¨è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è¯æ³•åˆ†æå™¨æ¥è®¡ç®—ç»™å®šæ–‡æœ¬ä¸­çš„å­—ç¬¦å’Œå•è¯çš„æ•°é‡ï¼Œè¿™å°†ç”¨ C ç¼–å†™

è¯æ³•åˆ†æå™¨ç”± 3 éƒ¨åˆ†ç»„æˆ

1.å£°æ˜(ç”¨ C è¯­è¨€ç¼–å†™)

2.è§„åˆ™(Regex å’Œ C)

3.è¾…åŠ©åŠŸèƒ½(ç”¨ C è¯­è¨€ç¼–å†™)

> ç”³æŠ¥

å£°æ˜ç”±å¤´æ–‡ä»¶ã€å˜é‡å®šä¹‰ç­‰ç»„æˆã€‚å®ƒè¿˜å¯èƒ½åŒ…å«æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡æ¿

> è§„åˆ™

ä»å­—ç¬¦æµä¸­è¯†åˆ«æ ‡è®°çš„è§„åˆ™æ˜¯åŸºäºæ­£åˆ™è¡¨è¾¾å¼å†³å®šçš„ã€‚æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼è§„åˆ™éƒ½æ˜¯ä»¥äº’æ–¥çš„æ–¹å¼ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ç¼–å†™çš„ã€‚åœ¨ä¸€ä¸ªç©ºæ ¼ä¹‹åï¼Œå†™å…¥æ‰€éœ€ C ä»£ç çš„æœŸæœ›åŠ¨ä½œ

> è¾…åŠ©åŠŸèƒ½

C è¯­è¨€ä¸­æ‰§è¡Œä¸€äº›è®¡ç®—çš„å‡½æ•°ï¼Œæˆ–è€…è¿™é‡ŒåŒ…å«çš„ä¸»å‡½æ•°

å¯†ç 

```
// Declaration enclosed in % { %}%{#include<stdio.h>#include<string.h> int word = 0;int chars = 0;%} // Rules specified as regex space action enclosed in %%%% [a-zA-Z]+ {word += 1;  chars += strlen(yytext);} // yytext stores the latest token encountered, getting its length to get the length of the word# return 0; // # indicated the end of the input. ;  // on any other character do nothing%%// Auxillary functions// This returns an error if not included, doesnt mean anything but include this function prototypeint yywrap(){return 0;}int main(){printf("Enter the input \n");// this function has an in-built scanf, or can read from a file inputyylex(); printf("The number of words are %d \n" , word);printf("The number of characters are %d \n ", chars);return 0;}
```

ç»™å®šä¸€ä¸ªè¾“å…¥ï¼Œè¯æ³•åˆ†æå™¨å°†è¿”å›åŒ…å«çš„å•è¯æ•°å’Œå­—ç¬¦æ•°ã€‚é€šè¿‡é”®ç›˜è¾“å…¥#æ—¶ï¼Œå‡½æ•° yylex()è¿”å›ã€‚yylex()æ˜¯ lex å®ç”¨ç¨‹åºçš„å†…ç½®å‡½æ•°ã€‚

ä¸Šé¢çš„ä»£ç è¢«ç²˜è´´åˆ°ä¸€ä¸ªå¸¦æœ‰**çš„æ–‡ä»¶ä¸­ã€‚l** æ‰©å±•ï¼Œå³å¯ä»¥æ˜¯ **main.l**

æ‰§è¡Œå‘½ä»¤

```
lex main.l
```

**å®ƒç”Ÿæˆäº†ä¸€ä¸ª C æ–‡ä»¶ï¼Œå‘½åä¸º lex . YY . C**

**lex å®ç”¨ç¨‹åºä¸»è¦è´Ÿè´£å°†æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢æˆ C è¯­è¨€**ã€‚è¿™ä¹Ÿå¯ä»¥æ‰‹åŠ¨å®Œæˆï¼Œä½†ä¼šå˜å¾—éå¸¸å¤æ‚ğŸ˜…

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ª C æ–‡ä»¶ï¼Œåªéœ€æŒ‰ç…§é€šå¸¸çš„æ–¹å¼ç¼–è¯‘å®ƒ

```
gcc lex.yy.c // gived an executable a.out
./a.out
```

![](img/de64ccfa94d30a8f599df88c35b9aafe.png)

ç”Ÿæˆçš„è¾“å‡º