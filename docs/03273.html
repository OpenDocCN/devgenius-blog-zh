<html>
<head>
<title>Best of Modern JavaScript — Module Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代 JavaScript 精华—模块基础</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/best-of-modern-javascript-module-basics-a503c3ca3a1d?source=collection_archive---------8-----------------------#2020-10-18">https://blog.devgenius.io/best-of-modern-javascript-module-basics-a503c3ca3a1d?source=collection_archive---------8-----------------------#2020-10-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b451d6640720bf36abaa154601a0d60f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vo5xAuYJ824DPBVu"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@thethinblackframe?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">大卫·克拉克</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="4e40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">自 2015 年以来，JavaScript 有了巨大的进步。</p><p id="c894" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在用起来比以前舒服多了。</p><p id="193a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何使用 JavaScript 模块。</p><h1 id="29f7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ES6 之前</h1><p id="8da1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ES5 或更早的版本没有原生模块系统。</p><p id="4809" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，出现了各种模块系统来解决组织代码的问题。</p><p id="dfbe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有 CommonHS 模块系统，它是标准的 ib Node.js。</p><p id="dbbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有一个紧凑的语法，可以同步加载模块，并且可以在服务器端使用。</p><p id="f651" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">异步模块定义模块系统是另一种流行的移动系统。</p><p id="39fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有更复杂的语法，这让它们无需<code class="fe me mf mg mh b">eval</code>或编译步骤就能工作。</p><h1 id="f588" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ES6 模块</h1><p id="58a4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ES6 模块创建了一个符合 JavaScript 标准的正式模块系统。</p><p id="fa2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有一个紧凑的语法，并让我们做单一的出口。</p><p id="c70b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，它还支持循环依赖。</p><p id="c5cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">直接支持异步加载，并且加载是可配置的。</p><p id="0dd2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该语法甚至比 ES6 模块语法更紧凑。</p><p id="f4ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且它支持循环依赖。</p><p id="abf8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个比 CommonJS 好。</p><p id="06f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标准模块系统具有用于导入和导出的声明性语法。</p><p id="624f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有一个可编程的加载器 API 来配置如何加载模块和有条件地加载模块。</p><h1 id="3472" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">指定出口</h1><p id="9492" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用命名导出，我们可以导出一个模块的多个成员。</p><p id="df50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="ce36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">math.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="df60" class="mq lc iq mh b gy mr ms l mt mu">export const sqrt = Math.sqrt;<br/>export function add(x, y) {<br/>  return x + y;<br/>}<br/>export function subtract(x, y) {<br/>  return x - y;<br/>}</span></pre><p id="6b33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个模块，它有几个用<code class="fe me mf mg mh b">export</code>关键字导出的函数。</p><p id="f94e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过编写以下内容来导入项目:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="db04" class="mq lc iq mh b gy mr ms l mt mu">import { add, subtract } from "./math";</span><span id="e5ed" class="mq lc iq mh b gy mv ms l mt mu">const sum = add(1, 2);<br/>const difference = subtract(1, 2);</span></pre><p id="d1b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">math.js</code>模块导入项目。</p><p id="fff6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">命名的导出在花括号中。</p><p id="016a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以调用我们在它下面导出的函数。</p><p id="0473" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于 CommonJS，我们使用<code class="fe me mf mg mh b">module.exports</code>属性来导出一个模块的多个成员。</p><p id="92bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="dd8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">math.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8b42" class="mq lc iq mh b gy mr ms l mt mu">const sqrt = Math.sqrt;<br/>function add(x, y) {<br/>  return x + y;<br/>}<br/>function subtract(x, y) {<br/>  return x - y;<br/>}</span><span id="94f3" class="mq lc iq mh b gy mv ms l mt mu">module.exports = {<br/>  sqrt,<br/>  add,<br/>  subtract<br/>};</span></pre><p id="07d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e8c3" class="mq lc iq mh b gy mr ms l mt mu">const { add, subtract } = require("./math");</span><span id="aa63" class="mq lc iq mh b gy mv ms l mt mu">const sum = add(1, 2);<br/>const difference = subtract(1, 2);</span></pre><p id="1a3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">require</code>来请求整个模块，然后我们从导入的模块中析构条目。</p><p id="effd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用同样的方式使用导入的函数。</p><h1 id="7669" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">默认导出</h1><p id="bcf5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">默认导出是一种在任何模块中只能发生一次的导出。</p><p id="4577" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们导入默认导出时，我们可以给它们起任何名字。</p><p id="6094" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="f682" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">math.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="284e" class="mq lc iq mh b gy mr ms l mt mu">export default function add(x, y) {<br/>  return x + y;<br/>}</span></pre><p id="5f91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe me mf mg mh b">add</code>功能导出为默认导出。</p><p id="3dd7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过编写以下内容来导入函数:</p><p id="18db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">index.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ccff" class="mq lc iq mh b gy mr ms l mt mu">import add from "./math";</span><span id="21d3" class="mq lc iq mh b gy mv ms l mt mu">const sum = add(1, 2);</span></pre><p id="f79a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要导出一个类，我们可以写:</p><p id="de87" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Foo.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4c0c" class="mq lc iq mh b gy mr ms l mt mu">export default class {}</span></pre><p id="3dc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">语句后面不需要分号。</p><p id="0fbc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以使用以下命令导入它:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="123e" class="mq lc iq mh b gy mr ms l mt mu">import Foo from "./Foo";</span><span id="1f9a" class="mq lc iq mh b gy mv ms l mt mu">const foo = new Foo();</span></pre><p id="6ee1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以包含或排除默认导出的名称。</p><p id="968d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1167" class="mq lc iq mh b gy mr ms l mt mu">export<!-- --> <!-- -->default<!-- --> <!-- -->function<!-- --> baz<!-- -->() {}<br/>export<!-- --> <!-- -->default<!-- --> <!-- -->class<!-- --> <!-- -->Bar<!-- --> <!-- -->{}</span></pre><p id="731a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4a63" class="mq lc iq mh b gy mr ms l mt mu">export<!-- --> <!-- -->default<!-- --> <!-- -->function() {}<br/>export<!-- --> <!-- -->default<!-- --> <!-- -->class {}</span></pre><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/6faf2b8a46d166a38cc9dce42ab26b04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BZh_9itEvfhxVhlq"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@the_roaming_platypus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> timJ </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h1 id="729d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="b669" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在 ES6 之前，没有标准的模块系统。</p><p id="e059" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从那时起，JavaScript 有了一个本地移动系统，我们可以用它来以标准的方式组织我们的代码。</p></div></div>    
</body>
</html>