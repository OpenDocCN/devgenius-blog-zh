<html>
<head>
<title>How to wire up and use externally configurable variables in Spring Boot + Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Spring Boot + Java 中连接和使用外部可配置变量</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-wire-up-and-use-externally-configurable-variables-in-spring-boot-java-a24189ee98a?source=collection_archive---------3-----------------------#2021-03-16">https://blog.devgenius.io/how-to-wire-up-and-use-externally-configurable-variables-in-spring-boot-java-a24189ee98a?source=collection_archive---------3-----------------------#2021-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/710969a26359222686bae827fd09d331.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zyHCRvyOfOlm6zKIH2nxqQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Aniket Bhattacharya<a class="ae kc" href="https://unsplash.com/@aniket940518" rel="noopener ugc nofollow" target="_blank">原图</a>；标志由<a class="ae kc" href="https://spring.io/projects/spring-framework" rel="noopener ugc nofollow" target="_blank">枢转</a>；作者:Tremaine Eto</figcaption></figure><p id="bc9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Spring Boot 之所以令人敬畏有很多原因，其中一个原因是它易于设置外部配置，这样您就可以在不同的环境中运行相同的应用程序代码，或者随时更新变量，而不必进去更改代码本身。</p><p id="314a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文将介绍如何使用注解<code class="fe lb lc ld le b">@Component</code>和<code class="fe lb lc ld le b">@ConfigurationProperties</code>在 Spring Boot 的 Java 应用程序中实现这一点。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="725d" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">配置类声明</h1><p id="3045" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">首先，您必须创建一个 Java 类，它将通过<code class="fe lb lc ld le b">@Component</code>注释成为一个 Spring Boot bean。</p><p id="fc8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在其中，变量将是您希望外部可配置的变量。如果这些是<code class="fe lb lc ld le b">String</code>值——比如用户名或电子邮件地址——那么就这样声明它们；如果这些是<code class="fe lb lc ld le b">int</code>值——比如端口号或线程数——那么相应地声明它们。</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="c215" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个例子中，我们有一个<code class="fe lb lc ld le b">EmailConfig</code>类，用于在我们的代码中发送电子邮件的可配置变量。我们允许灵活地:</p><ul class=""><li id="ed19" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated">用<code class="fe lb lc ld le b">enabled</code> <code class="fe lb lc ld le b">Boolean</code>变量打开和关闭功能；</li><li id="90c1" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">用<code class="fe lb lc ld le b">senderEmail</code> <code class="fe lb lc ld le b">String</code>值编辑发件人邮件；</li><li id="0f20" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">用<code class="fe lb lc ld le b">String</code>值的<code class="fe lb lc ld le b">recipientEmails</code>列表编辑收件人电子邮件列表；</li><li id="a9ff" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">用<code class="fe lb lc ld le b">subject</code>变量编辑电子邮件的主题</li></ul></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="6a12" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">应用程序.属性</h1><p id="1302" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">我们可以在我们的<code class="fe lb lc ld le b">application.properties</code>(有时是<code class="fe lb lc ld le b">application.yml</code>)文件中为这些定义默认值，如下所示:</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="69cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里重要的是，这些都有前缀<code class="fe lb lc ld le b">email</code>——如果您向上滚动到我们定义的 bean，您会注意到有一个专门寻找这个前缀的<code class="fe lb lc ld le b">@ConfigurationProperties</code>注释。</p><p id="8c7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Spring Boot 会施展自己的魔法，然后根据变量的名称将它们匹配起来；注意大小写，因为 Spring Boot 会根据其<a class="ae kc" href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-relaxed-binding" rel="noopener ugc nofollow" target="_blank">宽松的绑定规则</a>尝试匹配。</p><p id="df77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个例子中，我遵守了 camelCase 约定，但是您也可以将<code class="fe lb lc ld le b">email.senderEmail</code>定义为<code class="fe lb lc ld le b">email.sender-email</code>(使用连字符)或<code class="fe lb lc ld le b">email.sender_email</code>(使用下划线)，多亏了 Spring Boot，这样也没问题。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="d983" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">在代码中使用配置</h1><p id="c761" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在我们有了 bean <code class="fe lb lc ld le b">EmailConfig</code>，我们可以在 Java 应用程序中使用它，如下所示:</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b5f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，为了简单起见，这只是一个示例，我们通过将值打印到控制台来测试配置设置是否有效。在您的实际应用程序中，您将能够像使用硬编码变量一样使用这些变量来执行发送电子邮件的逻辑。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><p id="a342" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当谈到减少手动步骤和不必要的代码更改和部署时，外部配置绝对是至关重要的，这是 Spring Boot 的一个关键特性，需要加以利用。</p><p id="cacd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你能更好地了解如何用这种特定的方法来做这件事，对于进一步的阅读，我强烈建议阅读关于这个主题的<a class="ae kc" href="https://docs.spring.io/spring-boot/docs/1.5.6.RELEASE/reference/html/boot-features-external-config.html" rel="noopener ugc nofollow" target="_blank"> Spring Boot 文档</a>。</p><div class="nj nk gp gr nl nm"><a href="https://tremaineeto.medium.com/membership" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">通过我的推荐链接加入媒体</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">tremaineeto.medium.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa jw nm"/></div></div></a></div></div></div>    
</body>
</html>