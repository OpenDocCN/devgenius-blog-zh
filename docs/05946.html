<html>
<head>
<title>Build A Discord Bot From Scratch Using React.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React.js从头构建一个不和谐机器人</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/build-a-discord-bot-from-scratch-using-react-js-af12eeb45b16?source=collection_archive---------1-----------------------#2021-11-26">https://blog.devgenius.io/build-a-discord-bot-from-scratch-using-react-js-af12eeb45b16?source=collection_archive---------1-----------------------#2021-11-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="9ba2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">这里有一些关于在React.js中构建自定义Discord bot项目的注意事项</em></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/4f9567130d3c16c2a82e3cce11d07736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7UWenucrymQFyfPVo3BCWw.jpeg"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">安妮·斯普拉特在<a class="ae kz" href="https://unsplash.com/s/photos/team?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e4a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi la translated">从头开始构建一个不和谐机器人是一次有益的经历。这是测试一些代码并快速查看其运行情况的好地方。大多数Discord项目都是用JavaScript编写的，所以如果您使用React.js，有很多起点。</p><p id="7b81" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你决定需要一个自己的机器人，你从哪里开始？首先，在Discord上创建一个应用程序。如果你做了一些调查(从来源开始)，有很多关于这个主题的信息。创建应用程序后，您需要连接到Discord API，创建您的文件，并让您的机器人在线。之后，定制开始。让我们看看你会遇到的一些事情。</p><h1 id="954e" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">Bot命令</h1><p id="837a" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">你几乎可以为机器人创建任何命令。这是你可能碰壁的地方。如果你不知道从哪里开始命名命令，让机器人响应这些命令，那就慢慢来。为什么将命令作为具有键值对的对象包含会有帮助？它允许你的机器人使用你的命令。当用户输入该命令时，应用程序知道在哪里执行该命令。它看起来很关键。</p><p id="3081" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你有没有想过为什么很多bot命令前都要加一个感叹号？这是添加到机器人代码中命令的常规前缀。它增加了一层安全性，以确保发出命令的用户是一个“真实的人”。代码看起来是这样的:</p><pre class="kk kl km kn gt mm mn mo mp aw mq bi"><span id="3326" class="mr lk in mn b gy ms mt l mu mv">const prefix = '!';</span></pre><p id="7b6b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，当您在包含您的命令的文件末尾导出时，您将包含该对象:</p><pre class="kk kl km kn gt mm mn mo mp aw mq bi"><span id="bdb9" class="mr lk in mn b gy ms mt l mu mv">module.exports = { botIntents, prefix, commands };</span></pre><p id="b4ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这一点，以及所包含的资源，让您了解机器人的工作点。现在是时候在机器人中集成您正在寻找的任何功能了。如果你计划使用一个需要你联系团队的API，记住这需要时间。</p><h1 id="7ee9" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">Bot语法</h1><p id="a9cb" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">当被问到你的代码是什么意思时，知道你在说什么是很好的。这几行代码会让你很好地理解JavaScript中包含<code class="fe mw mx my mn b">await</code>的<code class="fe mw mx my mn b">async</code>函数、<code class="fe mw mx my mn b">module.exports</code>和<code class="fe mw mx my mn b">export default</code>的区别，以及package.json文件是什么。</p><p id="498a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">异步功能</strong></p><pre class="kk kl km kn gt mm mn mo mp aw mq bi"><span id="5c40" class="mr lk in mn b gy ms mt l mu mv">//<em class="ki"> App.js</em></span><span id="e843" class="mr lk in mn b gy mz mt l mu mv">const getLastMsgs = async (msg) =&gt; {<br/>    const cheers = await msg.channel.messages.fetch({ limit: 10 });</span><span id="1155" class="mr lk in mn b gy mz mt l mu mv">    const lastTenMsgs = cheers.map((message) =&gt; {<br/>        return message.content;<br/>    })<br/>}</span></pre><p id="f594" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在arrow函数的开头看到async可能需要一秒钟的时间。那会过去的。为什么？很简单。我们告诉<code class="fe mw mx my mn b">getLastMsgs</code>函数等待，直到它收到消息。这条信息来自前面的代码行:</p><pre class="kk kl km kn gt mm mn mo mp aw mq bi"><span id="6266" class="mr lk in mn b gy ms mt l mu mv">const reply = await getLastMsgs(msg);</span></pre><p id="6cfa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你在等待你的职能得到承诺。这给了我们工作的动力。想象收到一封信。在你读这封信之前，你必须花时间停下来打开它。async函数使我们的应用程序等待，直到有一封信返回给你打开。这个返回的信(或者JavaScript中的承诺)必须在函数运行之前被实现或拒绝。</p><p id="aa7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> module.exports与导出默认值</strong></p><pre class="kk kl km kn gt mm mn mo mp aw mq bi"><span id="fb52" class="mr lk in mn b gy ms mt l mu mv"><em class="ki">// default.js</em></span><span id="ced9" class="mr lk in mn b gy mz mt l mu mv">const botIntents = [<br/>    DIRECT_MESSAGES,<br/>    GUILD_MESSAGES,<br/>    GUILDS,<br/>  ];<br/>  </span><span id="ff3a" class="mr lk in mn b gy mz mt l mu mv">  const commands = {<br/>    verify: 'verify',<br/>    lastMsgs: 'last-messages',<br/>  };</span><span id="71ef" class="mr lk in mn b gy mz mt l mu mv">  const prefix = '!';</span><span id="0d35" class="mr lk in mn b gy mz mt l mu mv">  module.exports = { botIntents, prefix, commands };</span></pre><p id="8278" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面摘录的最后一行代码使<code class="fe mw mx my mn b">botIntents</code>对象、前缀变量和commands对象对应用程序的其余部分可用，允许您在其他文件中使用这些对象。这与你可能已经习惯的<code class="fe mw mx my mn b">export default</code>不同。</p><p id="92a2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这和<code class="fe mw mx my mn b">export default</code>相比如何？</p><p id="3656" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kz" href="https://www.freecodecamp.org/news/node-module-exports-explained-with-javascript-export-function-examples/" rel="noopener ugc nofollow" target="_blank">这是一篇有助于理解这两者的文章</a>。使用<code class="fe mw mx my mn b">module.exports</code>，你必须在需要使用这些导出的文件中找到你写这些导出的文件。使用<code class="fe mw mx my mn b">export default</code>，您可以将所需内容导入其他文件。<code class="fe mw mx my mn b">export default</code>允许我们在一个文件中导出整个类或函数，这不会像<code class="fe mw mx my mn b">module.exports</code>那样限制我们可以使用的函数。当您想要导出多个函数而不是整个类或函数时，最好使用<code class="fe mw mx my mn b">module.exports</code>。</p><p id="e6a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> package.json文件</strong></p><pre class="kk kl km kn gt mm mn mo mp aw mq bi"><span id="a5e7" class="mr lk in mn b gy ms mt l mu mv"><em class="ki">// package.json</em></span><span id="e578" class="mr lk in mn b gy mz mt l mu mv">{<br/>  "dependencies": {<br/>    "discord.js": "^13.3.1"<br/>  },<br/>  "devDependencies": {<br/>    "nodemon": "^2.0.15"<br/>  },<br/>  "scripts": {<br/>    "app": "nodemon app",<br/>    "start": "node app"<br/>  },<br/>  "name": "*bot name*",<br/>  "version": "1.0.0",<br/>  "main": "App.js",<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC",<br/>  "description": ""<br/>}</span></pre><p id="0a7a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">package.json是节点项目的核心。该文件包含项目运行所需的元数据。它包含项目功能属性的清晰定义，npm使用这些属性来安装依赖项、运行您拥有的脚本以及标识包的入口点。它必须是实际的JSON，而不是JavaScript对象。你可以在这里找到关于package.json文件<a class="ae kz" href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json" rel="noopener ugc nofollow" target="_blank">的更多信息。</a></p><p id="a8a0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">交互端点URL </strong></p><p id="9b3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你会在<a class="ae kz" href="https://discord.com/developers/applications" rel="noopener ugc nofollow" target="_blank"> Discord开发者门户</a>看到这个。这里有一些东西，包括添加交互端点URL的选项。根据Discord的说法，当您添加交互端点URL时，“您可以选择配置一个交互端点，通过HTTP POSTs而不是通过网关与bot用户接收交互”。</p><p id="b1db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你想让机器人体验最好的，这可能会让你好奇。什么是交互端点？它帮助你处理斜线命令。这将对<strong class="jm io">的进一步迭代</strong>有用，但你现在不需要利用它。</p><h1 id="82af" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">后续步骤</h1><p id="b168" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">从这里开始，您的项目非常简单。当然，你必须在旅途中学习，但是接下来的步骤很清楚。如果您能够挂钩到您正在寻找的API，那么构建您需要的机器人应该是非常简单的。</p><p id="a3b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你知道下一步该做什么吗？花时间阐明步骤。</p><h1 id="ee73" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">离别问题</h1><p id="60f7" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated"><strong class="jm io">一旦获得API，机器人的发展方向是什么？</strong></p><p id="aa61" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">设置验证文件来处理API和代码之间的交互。实现API调用，这将允许您访问bot需要的命令。用户将能够与机器人和你的Discord社区互动。</p><p id="a998" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在此期间，你能做些什么？</p><p id="25c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为机器人完成时设置通道。渠道会创造体验。你的社区目前可能用户数量有限，所以不会有太多的互动。没有人想这么做，但是你已经建立了规则、FAQ、支持和公告渠道。或者，你可以决定不这样做。跟上项目发展的生物频道是个好主意。一切皆有可能。</p><p id="5c11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">吸取了什么教训？</p><p id="5dba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你的将会不同。分享给大家。那里有大量的资源。你分配给一个项目的时间越多，就越容易找到你需要的东西。只是一个解决问题的游戏。更好地解决问题的唯一方法就是解决问题。</p><p id="1434" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你将如何编写一个当用户输入命令时触发的函数！验证？</p><p id="c347" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以一个好的音符结束。这就是你可能需要填补知识空白的地方。把它想象成你在解一个难题。知道你有多少块拼图，但是因为有太多松散的碎片，你找不到把你手中的那块放在哪里？这个决定就是这样的。试着想想复试。</p><h1 id="b652" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">将这一切结合在一起</h1><p id="a4e8" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">这应该会让你的项目有一个好的开始。这些事情需要时间，有时候最好的办法就是不要编码。灵感会在你最意想不到的时候到来。现在，创建一个机器人的目标已经实现，接下来的步骤已经很清楚了。走开，花点时间<strong class="jm io">微笑</strong>你创造的一切！</p><p id="5d2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kz" href="https://dev.to/elijahtrillionz/build-a-modern-discord-bot-from-scratch-learn-the-basics-973" rel="noopener ugc nofollow" target="_blank">从零开始建造一个现代的不和谐机器人</a></p><p id="94e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="noopener ugc nofollow" target="_blank">JavaScript中的异步函数</a></p><p id="a7ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/web/javascript/reference/statements/export" rel="noopener ugc nofollow" target="_blank">用JavaScript导出语句</a></p></div></div>    
</body>
</html>