<html>
<head>
<title>Code Smell 40 — DTOs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码气味 40—dto</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/code-smell-40-dtos-ca35f5d8f7c9?source=collection_archive---------1-----------------------#2020-12-02">https://blog.devgenius.io/code-smell-40-dtos-ca35f5d8f7c9?source=collection_archive---------1-----------------------#2020-12-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2ad0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">dto 被广泛使用，它们“解决”了实际问题，不是吗？</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi kd"><img src="../Images/ccabc22c82e4debe9ebfebc6962cdabe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xO0Had3bO7b6Ti0fb2iTBw.jpeg"/></div></figure><h1 id="5c4c" class="kl km in bd kn ko kp kq kr ks kt ku kv jt kw ju kx jw ky jx kz jz la ka lb lc bi translated">问题</h1><ul class=""><li id="20eb" class="ld le in lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">贫血的对象</li><li id="7acf" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq lr ls lt lu bi translated">不一致的数据</li><li id="47fd" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq lr ls lt lu bi translated">重复逻辑</li><li id="f97d" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq lr ls lt lu bi translated">重复结构</li><li id="fae1" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq lr ls lt lu bi translated">等级污染</li><li id="9d22" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq lr ls lt lu bi translated">信息隐藏违规</li><li id="77d4" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq lr ls lt lu bi translated">代码在<a class="ae ma" href="https://en.wikipedia.org/wiki/Mutator_method" rel="noopener ugc nofollow" target="_blank">变异器</a>、存取器、<a class="ae ma" href="https://en.wikipedia.org/wiki/Serialization" rel="noopener ugc nofollow" target="_blank">串行化器</a>、<a class="ae ma" href="https://en.wikipedia.org/wiki/Parsing" rel="noopener ugc nofollow" target="_blank">解析器</a>中重复</li><li id="f8cc" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq lr ls lt lu bi translated">涟漪效应</li><li id="b994" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq lr ls lt lu bi translated">数据完整性</li></ul><h1 id="1feb" class="kl km in bd kn ko kp kq kr ks kt ku kv jt kw ju kx jw ky jx kz jz la ka lb lc bi translated">解决方法</h1><ol class=""><li id="d926" class="ld le in lf b lg lh li lj lk ll lm ln lo lp lq mb ls lt lu bi translated">在数组上传输不足的数据。</li><li id="d1d6" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq mb ls lt lu bi translated">使用真实的业务对象。</li><li id="7dc6" class="ld le in lf b lg lv li lw lk lx lm ly lo lz lq mb ls lt lu bi translated">如果我们要转移部分对象:使用代理或空对象来中断引用图。</li></ol><h1 id="8018" class="kl km in bd kn ko kp kq kr ks kt ku kv jt kw ju kx jw ky jx kz jz la ka lb lc bi translated">示例代码</h1><h2 id="0488" class="mc km in bd kn md me dn kr mf mg dp kv lk mh mi kx lm mj mk kz lo ml mm lb mn bi translated">错误的</h2><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="7842" class="mc km in bd kn md me dn kr mf mg dp kv lk mh mi kx lm mj mk kz lo ml mm lb mn bi translated">对吧</h2><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h1 id="5cd8" class="kl km in bd kn ko kp kq kr ks kt ku kv jt kw ju kx jw ky jx kz jz la ka lb lc bi translated">侦查</h1><p id="c1ca" class="pw-post-body-paragraph mq mr in lf b lg lh jo ms li lj jr mt lk mu mv mw lm mx my mz lo na nb nc lq ig bi translated">我们可以用同样的贫血物体探测器。</p><p id="5921" class="pw-post-body-paragraph mq mr in lf b lg nd jo ms li ne jr mt lk nf mv mw lm ng my mz lo nh nb nc lq ig bi translated">我们可以检查没有业务对象行为的<em class="ni">贫血的</em>类(移除序列化、构造函数、赋值函数等)。</p><h1 id="4aa4" class="kl km in bd kn ko kp kq kr ks kt ku kv jt kw ju kx jw ky jx kz jz la ka lb lc bi translated">标签</h1><ul class=""><li id="f83b" class="ld le in lf b lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">贫血的</li></ul><h1 id="30f8" class="kl km in bd kn ko kp kq kr ks kt ku kv jt kw ju kx jw ky jx kz jz la ka lb lc bi translated">结论</h1><p id="684c" class="pw-post-body-paragraph mq mr in lf b lg lh jo ms li lj jr mt lk mu mv mw lm mx my mz lo na nb nc lq ig bi translated">在某些语言中，dto 是一种工具和惯例。我们应该小心谨慎地使用它们。</p><p id="c12b" class="pw-post-body-paragraph mq mr in lf b lg nd jo ms li ne jr mt lk nf mv mw lm ng my mz lo nh nb nc lq ig bi translated">如果我们需要分解我们的物体以便把它们送出我们的领域，我们需要非常小心。因为被肢解的对象没有完整性考虑。</p><p id="3af8" class="pw-post-body-paragraph mq mr in lf b lg nd jo ms li ne jr mt lk nf mv mw lm ng my mz lo nh nb nc lq ig bi translated">他的作者警告我们关于它的实际滥用。</p><h1 id="d2f3" class="kl km in bd kn ko kp kq kr ks kt ku kv jt kw ju kx jw ky jx kz jz la ka lb lc bi translated">关系</h1><div class="nj nk gp gr nl nm"><a href="https://medium.com/dev-genius/code-smell-01-anemic-models-f9fb5a1323b3" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">代码气味 01——贫血模型</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">你的对象是一堆没有行为的公共属性。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa kj nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://medium.com/dev-genius/code-smell-13-empty-constructors-8fa705fb3f33" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">代码味道 13 —空构造函数</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">不完整的对象会导致很多问题。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa kj nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://medium.com/dev-genius/code-smell-20-premature-optimization-60409b7f90ec" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">代码味道 20 —过早优化</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">提前计划需要一个水晶球，这是任何一个开发者都没有的。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="oc l nx ny nz nv oa kj nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://medium.com/dev-genius/code-smell-28-setters-5b0e764049aa" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">气味代码 28 —设定器</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">初级程序员做的第一个练习。ide、教程和高级开发人员不断教他们这种反模式。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="od l nx ny nz nv oa kj nm"/></div></div></a></div><h1 id="243b" class="kl km in bd kn ko kp kq kr ks kt ku kv jt kw ju kx jw ky jx kz jz la ka lb lc bi translated">更多信息</h1><div class="nj nk gp gr nl nm"><a href="https://martinfowler.com/bliki/LocalDTO.html" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">bliki:localdo</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">如果你一直在关注我的思想博客们，你会知道我的一个鸟人似乎已经吹了…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">martinfowler.com</p></div></div><div class="nv l"><div class="oe l nx ny nz nv oa kj nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://refactoring.guru/es/smells/data-class" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">数据类</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">数据类是指只包含字段和访问它们的简单方法(getters 和 setters)的类…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">重构大师</p></div></div><div class="nv l"><div class="of l nx ny nz nv oa kj nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://softwareengineering.stackexchange.com/questions/171457/what-is-the-point-of-using-dto-data-transfer-objects" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">使用 DTO(数据传输对象)有什么意义？</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">尽管 DTO 不是一个过时的模式，但它经常被不必要地应用，这可能会使它显得过时。来自 Java…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">softwareengineering.stackexchange.com</p></div></div><div class="nv l"><div class="og l nx ny nz nv oa kj nm"/></div></div></a></div></div><div class="ab cl oh oi hr oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="ig ih ii ij ik"><blockquote class="oo op oq"><p id="d228" class="mq mr ni lf b lg nd jo ms li ne jr mt or nf mv mw os ng my mz ot nh nb nc lq ig bi translated">最好的气味是容易被发现的，大多数时候会引导你找到真正有趣的问题。数据类(只有数据没有行为的类)就是很好的例子。你看着他们，问自己在这个班级应该有什么样的行为。</p></blockquote><p id="fb7a" class="pw-post-body-paragraph mq mr in lf b lg nd jo ms li ne jr mt lk nf mv mw lm ng my mz lo nh nb nc lq ig bi translated">马丁·福勒</p><div class="nj nk gp gr nl nm"><a href="https://medium.com/dev-genius/software-engineering-great-quotes-3af63cea6782" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">软件工程名言</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">有时一个简短的想法可以带来惊人的想法。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="ou l nx ny nz nv oa kj nm"/></div></div></a></div></div><div class="ab cl oh oi hr oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="ig ih ii ij ik"><p id="7897" class="pw-post-body-paragraph mq mr in lf b lg nd jo ms li ne jr mt lk nf mv mw lm ng my mz lo nh nb nc lq ig bi translated">本文是 CodeSmell 系列的一部分。</p><div class="nj nk gp gr nl nm"><a href="https://medium.com/dev-genius/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">如何找到你的代码中有问题的部分</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">代码很难闻。让我们看看如何改变香味。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="ov l nx ny nz nv oa kj nm"/></div></div></a></div></div></div>    
</body>
</html>