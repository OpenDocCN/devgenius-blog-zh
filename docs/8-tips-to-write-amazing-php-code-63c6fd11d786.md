# 编写惊人 PHP 代码的 8 个技巧

> 原文：<https://blog.devgenius.io/8-tips-to-write-amazing-php-code-63c6fd11d786?source=collection_archive---------0----------------------->

## 用这些小技巧来提高你的编码技能。像专业人士一样开始编程。

![](img/e886eb9d5f893b8edc15ede5c5d3fb9e.png)

图片由[RealToughCandy.com](https://www.pexels.com/@realtoughcandy/)

我有一些技巧分享给你，可以提高你的编码技巧，让你的代码更好。

你想成为一名专业的开发人员吗？从这些建议开始，最好是马上开始。让我们直接跳到他们身上:

# 面向接口的代码，而不是实现

接口是设计良好的代码中不可或缺的元素，尽管对于编程新手来说似乎没有必要。

当设计一个应用程序时，一个界面可以让你**专注于必要的功能，而不去考虑细节**。

最初，我没有使用它们，因为我看不到它们有任何用处。直到最近，我才意识到它们在我设计的系统中的重要性。

接口最显著的优点是它们定义的契约。只要您仅仅依赖于接口(并且不以任何方式提及实现类)，您就可以在不影响应用程序的情况下更改实现细节。

例如，您需要一个允许您将 HTML 代码转换为 PDF 文件的功能。不要直接使用可用的库，而是创建一个接口并在您的实现中使用它。

也许一年后市场上会出现更好的转换工具。不是在生成 PDF 文件的代码中有几个(或十几个)地方，而是只有一个地方需要更改！

这只是一个简单的例子，但是使用接口还有很多积极的副作用。你可以在我之前的文章中读到如何正确使用接口*:*

[](/code-like-a-pro-in-php-with-interfaces-a84041b08d74) [## PHP 中的接口解释

### 如何以及何时在 PHP 中使用接口？举例说明。

blog.devgenius.io](/code-like-a-pro-in-php-with-interfaces-a84041b08d74) 

# 避免继承

这个原则与使用我上面描述的接口的建议直接相关。

继承和使用抽象类似乎很诱人。我们天生适合发现和应用模式。我们试图创建快捷方式来暂时方便我们的工作。

然而，根据我的经验，它最终会导致问题。这就是所谓的技术债务。

我在以前的一篇文章中谈到了如何避免过度继承的主题，这是每个 PHP 初学者的必读之作:

[](/stop-using-extends-in-php-37c9da1cce83) [## 停止在 PHP 中使用“扩展”

### 你在你的域代码中使用抽象类还是扩展类？希望从今天起，你会停止这样做…

blog.devgenius.io](/stop-using-extends-in-php-37c9da1cce83) 

有句话说:“*编程是为了接口，而不是实现*。”您需要新的功能吗？在任何情况下，你都不应该从抽象类开始！

设计一个你的应用程序可以依赖的稳定接口，然后使用你选择的框架的依赖注入特性来使用它。

# 类型提示变量

你使用文档块向 IDE 提示变量类型吗？如果没有，我推荐入门。PHP 是一种可解释的语言，变量类型在代码执行过程中可能会改变。

虽然 PHP 引擎在执行代码时可能没有问题，但是您的代码编辑器可能不知道变量包含什么数据。是用户类对象吗？或者可能是“假”或“空”。

有了这些知识，您的 IDE 可以帮助您捕获可能经常发生的简单错误。

如果您打算在代码中实现 strict_types 指令，类型提示是至关重要的。如果你还不知道这个指令是什么，我推荐你阅读我关于这个主题的最新出版物:

[](/dangerous-and-unnecessary-fears-of-strict-types-in-php-c24e5a3d240e) [## 对 PHP 中严格类型的不必要的恐惧

### 让我来说服你为什么你应该在 PHP 中拥抱严格类型，而不是害怕它！

blog.devgenius.io](/dangerous-and-unnecessary-fears-of-strict-types-in-php-c24e5a3d240e) 

# 采用命令-查询分离

这个原则，[由 Bertrand Meyer](https://en.wikipedia.org/wiki/Command%E2%80%93query_separation) 创造，有益于构建类函数(或方法)或 API 端点。

Bertrand 建议您创建的函数总是一个**命令**或一个**查询**，但不要同时是一个命令和一个查询。

命令是以任何方式修改状态的函数(即 *deleteUser、removeFile、sendmemail*)，而查询是返回任何内容的函数(即 *findUser、getOwner、findAll、findOneBy* )。

例如，两个独立的函数“ *deleteUsers* ”和“ *findAllActiveUsers* ”会比单个函数“*deleteusersandfindalactive*”更明智。

显而易见的好处是代码更清晰，更易于维护。另一个优点是，您调用的查询可以安全执行，并且不会导致意外的副作用。

# 避免大块的代码

对于任何代码，原则“**越少越好**”总是有效。记住，最好的代码是你没有写过的。代码越少，bug 潜入的地方就越少。

> 你听说过[圈复杂度](https://en.wikipedia.org/wiki/Cyclomatic_complexity)的概念吗？这个术语是在大约 50 年前定义的，用来定义算法的复杂性。

它决定了程序可以分支的唯一路径的数量。代码中的每个“如果”都会导致代码以两种方式执行。另一个“如果”给出四种可能性，三个“如果”给出八种可能性(圈复杂度= 8)，以此类推。

代码越复杂，就越容易引入潜在的 bug。你的目标应该是圈复杂度低于 20。

较大的值表明给定函数或方法中的代码可能做得太多。它的实现应该经过深思熟虑，也许可以分解成更小、更集中的部分。

# 开始使用严格类型

以“ *declare (strict_types = 1)* 开始代码这个指令告诉 PHP 解释器验证传递给(和传出)函数的变量的类型。

如果一个函数只接受一个 int 作为输入参数，试图传递一个 string 类型将导致一个异常。同样，如果一个函数在输出中声明一个字符串，试图返回一个整数将导致一个异常。

一开始，错误的数量可能会令人望而生畏，并阻碍该指令的使用。然而，随着时间的推移，当你习惯于关注变量的类型时，你会欣赏这带来的价值。

无与伦比的优势是早期错误检测，尽管仍处于开发阶段。这个指令防止在代码进入生产阶段之前出现错误！

如果没有这个指令，您可能会在代码执行阶段遇到微妙的缺陷。如果你传递一个浮点数*“3.1415”*给一个只接受整数的函数会怎么样？PHP 将进行类型转换——而不是以*“3”*结束*“3.1415”*。如果你传递一个值为*“13 楼”*的字符串变量，你最终得到的是*“13”。(* [*阅读更多关于类型杂耍*](https://www.php.net/manual/en/language.types.type-juggling.php) *)*

请记住，这个声明适用于代码执行的地方。如果您正在使用一个已经声明了 strict_types 的类，并且在调用它的地方没有声明任何指令，那么 *strict_types* 将是不活动的。

我建议尽可能绝对使用*严格类型*。我们总是需要确保我们的代码在进入生产服务器之前尽可能没有错误。

让我推荐另一个关于 *strict_types* 的出版物，在那里你会找到更多关于这个主题的有用信息:

[](/dangerous-and-unnecessary-fears-of-strict-types-in-php-c24e5a3d240e) [## 对 PHP 中严格类型的不必要的恐惧

### 让我来说服你为什么你应该在 PHP 中拥抱严格类型，而不是害怕它！

blog.devgenius.io](/dangerous-and-unnecessary-fears-of-strict-types-in-php-c24e5a3d240e) 

# 采用 PSR-12 编码风格

专业程序员的工作就是协作。不管你喜不喜欢，迟早(如果不是已经)你会和其他程序员一起编程。

连贯、重复的代码是协作的基础。你听说过 PSR 标准吗？

PHP 社区广泛接受的当前格式标准是 [PSR-12“扩展编码风格”](https://www.php-fig.org/psr/psr-12/)。

这种风格定义了关于代码格式的所有规则。标准内容太长，无法引用。我建议您熟悉标准的定义。

一个好的 IDE，比如 [PHPStorm](https://www.jetbrains.com/phpstorm/) (我已经用了 10 多年了)，有助于坚持标准。

# 应用干净代码技术

最糟糕的事情莫过于回到你的代码中，你需要修复一些紧急的 bug，而你却不知道发生了什么。

用评论来记录你的决定。对变量、函数、方法、类、常量等使用描述性名称。它们允许你快速理解代码的给定部分负责什么。

花些时间为一个变量想一个好名字不会花很长时间，但它可以在未来为你**节省很多时间**。

**你是你未来的读者**。想象一下*几个月或者几年后的自己*。现在看来显而易见的事情，在一年或更短的时间内可能会感觉不一样。

如果您需要更多关于干净代码的技巧，请务必阅读我以前的出版物:

[](/clean-code-tricks-in-php-everyone-should-follow-f9d7aa3abe44) [## PHP 中每个人都应该遵循的干净代码技巧

### 用这几个简单的技巧彻底改进你的代码。今天我想和你分享我的编码技术。

blog.devgenius.io](/clean-code-tricks-in-php-everyone-should-follow-f9d7aa3abe44)