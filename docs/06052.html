<html>
<head>
<title>Stop using query selectors for everything</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止对所有事情使用查询选择器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/stop-using-query-selectors-for-everything-5c461533acab?source=collection_archive---------2-----------------------#2021-12-09">https://blog.devgenius.io/stop-using-query-selectors-for-everything-5c461533acab?source=collection_archive---------2-----------------------#2021-12-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/d2a4d01ffd237889b2eaa3a8d6cc3f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GZf6eP5aM7O3T0Jubpartg.png"/></div></div></figure><div class=""/><p id="e898" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi kw translated">最近，我的一个学徒就一个学校项目向我寻求帮助和建议。</p><p id="c59f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">快速浏览了一下它的代码后，我立刻被大量使用<code class="fe lf lg lh li b">querySelector</code>和<code class="fe lf lg lh li b">querySelectorAll</code>方法来通过 id 或类<strong class="ka jc">检索元素而震惊了。</strong></p><p id="97a1" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我问他为什么不用经典的方法<code class="fe lf lg lh li b">getElementById</code>或<code class="fe lf lg lh li b">getElementsByClassName</code>时，他回答说是因为老师给的建议。</p><p id="632a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">他的老师建议他使用<code class="fe lf lg lh li b">querySelector</code>和<code class="fe lf lg lh li b">querySelectorAll</code>方法，借口是结果与经典方法相同，并且这些所谓的经典方法将不再用于<code class="fe lf lg lh li b">querySelector</code>和<code class="fe lf lg lh li b">querySelectorAll</code>方法。</p><p id="8272" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">那么，用某种特定的东西去换取某种更全球化的东西，是一件好事吗？这些方法相等吗？</strong></p><p id="105f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lj">我们一起来看，这几种方法在三点上是大相径庭的:</em> <strong class="ka jc"> <em class="lj">可读性</em> </strong> <em class="lj">，</em> <strong class="ka jc"> <em class="lj">结果</em> </strong> <em class="lj">和</em> <strong class="ka jc"> <em class="lj">性能</em> </strong> <em class="lj">。</em></p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="8ed7" class="lr ls jb bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">可读性原则</h1><p id="c074" class="pw-post-body-paragraph jy jz jb ka b kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">想象一下，必须通过元素的标识符或类来检索元素，以便对其执行更改。</p><p id="a701" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你觉得这个:<code class="fe lf lg lh li b">const el = <strong class="ka jc">querySelector</strong>("#post-3773");</code>，比那个:<code class="fe lf lg lh li b">const el = <strong class="ka jc">getElementById</strong>("post-3773");</code>更有意义吗？</p><p id="ae9d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还是你觉得这个:<code class="fe lf lg lh li b">const els = <strong class="ka jc">querySelectorAll</strong>(".new-article.edited");</code>，比那个:<br/> <code class="fe lf lg lh li b">const els = <strong class="ka jc">getElementsByClassName</strong>("new-article edited");</code>更有意义？</p><blockquote class="mu"><p id="1f41" class="mv mw jb bd mx my mz na nb nc nd kv dk translated">“任何傻瓜都能写出计算机能理解的代码。优秀的程序员会写出人类能理解的代码。”</p><p id="62ff" class="mv mw jb bd mx my mz na nb nc nd kv dk translated">马丁·福勒</p></blockquote><p id="e729" class="pw-post-body-paragraph jy jz jb ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">正如我在以前的文章中多次提到的，当用 JavaScript 编码时，如果我们不优先考虑人工阅读代码而不是机器执行代码，我们很快就会得到难以阅读和调试的代码。</p><p id="42b5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">老实说，在通过 id 或类名检索元素时，通过 id/类名获取元素的<strong class="ka jc">比简单的</strong>查询选择器更有意义。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="2a10" class="lr ls jb bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">不同的结果</h1><p id="42f7" class="pw-post-body-paragraph jy jz jb ka b kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">当你使用<code class="fe lf lg lh li b">getElementById</code>或<code class="fe lf lg lh li b">querySelector</code>时，结果是一样的:它是一个<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/API/Element" rel="noopener ugc nofollow" target="_blank">元素</a>。</p><blockquote class="mu"><p id="aaf4" class="mv mw jb bd mx my mz na nb nc nd kv dk translated">所以，不用担心。</p></blockquote><p id="4e51" class="pw-post-body-paragraph jy jz jb ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">但是当你使用<code class="fe lf lg lh li b">getElementsByClassName</code>和<code class="fe lf lg lh li b">querySelectorAll</code>时，结果就完全不同了。</p><p id="81f0" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lf lg lh li b">getElementsByClassName</code>方法将返回一个<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection" rel="noopener ugc nofollow" target="_blank">动态 HTML 集合</a>，而<code class="fe lf lg lh li b">querySelectorAll</code>方法将返回一个<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/API/NodeList" rel="noopener ugc nofollow" target="_blank">静态(非动态)节点列表</a>。</p><blockquote class="mu"><p id="f567" class="mv mw jb bd mx my mz na nb nc nd kv dk translated">这两个系列有什么区别？</p></blockquote><p id="cccd" class="pw-post-body-paragraph jy jz jb ka b kb ne kd ke kf nf kh ki kj ng kl km kn nh kp kq kr ni kt ku kv ij bi translated">尽管<code class="fe lf lg lh li b">NodeList</code>对象与<code class="fe lf lg lh li b">HTMLCollection</code>对象几乎相同，但它包含的内容却有很大不同。</p><p id="0e50" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然<code class="fe lf lg lh li b">HTMLCollection</code>对象将只包含元素节点(基于<em class="lj">标签</em>，但是<code class="fe lf lg lh li b">NodeList</code>对象将包含所有类型的节点(<em class="lj">元素、注释、文本等</em>)。</p><p id="f15d" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，了解所谓的<strong class="ka jc">活动</strong>节点集合和所谓的<strong class="ka jc">静态</strong>节点集合之间的区别非常重要。</p><p id="ad8f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当一个集合是<strong class="ka jc"> live </strong>时，意味着 DOM 的任何变化都会<strong class="ka jc">影响集合的内容</strong>(<em class="lj">更新</em>)。另一方面，当集合被说成是静态的时，这意味着 DOM 中的任何变化都不会影响集合的内容。</p><p id="6891" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在选择迭代每个元素时，最好记住这一区别。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="f692" class="lr ls jb bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">演出</h1><p id="4dda" class="pw-post-body-paragraph jy jz jb ka b kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">同样重要的是要知道<code class="fe lf lg lh li b">querySelector</code>和<code class="fe lf lg lh li b">querySelectorAll</code>方法比<code class="fe lf lg lh li b">getElementById</code>和<code class="fe lf lg lh li b">getElementsByClassName</code>等更经典的方法效率低得多。</p><h2 id="56d8" class="nk ls jb bd lt nl nm dn lx nn no dp mb kj np nq mf kn nr ns mj kr nt nu mn nv bi translated">getElementById VS querySelector(最快的方法:效率超过 60%的 getElementById)</h2><div class="ip iq gp gr ir nw"><a href="https://www.measurethat.net/Benchmarks/Show/16208/2/getelementbyid-vs-queryselector-simple-comparison" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd jc gy z fp ob fr fs oc fu fw ja bi translated">基准测试:getElementById VS querySelector(简单比较)—MeasureThat.net</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">用户代理:Mozilla/5.0(Macintosh；英特尔 Mac OS X 10 _ 15 _ 7)apple WebKit/605 . 1 . 15(KHTML，像壁虎一样)版本/15.1…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">www.measurethat.net</p></div></div><div class="of l"><div class="og l oh oi oj of ok ix nw"/></div></div></a></div><h2 id="608e" class="nk ls jb bd lt nl nm dn lx nn no dp mb kj np nq mf kn nr ns mj kr nt nu mn nv bi translated">getElementsByClassName VS query selectorall(最快的方法:getElementsByClassName，效率超过 305%)</h2><div class="ip iq gp gr ir nw"><a href="https://www.measurethat.net/Benchmarks/Show/16209/0/getelementsbyclassname-vs-queryselectorall-simple-compa" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd jc gy z fp ob fr fs oc fu fw ja bi translated">基准测试:getElementsByClassName VS query selectorall(简单比较)—MeasureThat.net</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">用户代理:Mozilla/5.0(Macintosh；英特尔 Mac OS X 10 _ 15 _ 7)apple WebKit/605 . 1 . 15(KHTML，像壁虎一样)版本/15.1…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">www.measurethat.net</p></div></div><div class="of l"><div class="ol l oh oi oj of ok ix nw"/></div></div></a></div><p id="6653" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当需要通过标识符或类名检索元素时，与选择器方法相比，所谓的经典方法的效率是毋庸置疑的。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><h1 id="7924" class="lr ls jb bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">更进一步</h1><p id="4d48" class="pw-post-body-paragraph jy jz jb ka b kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr mt kt ku kv ij bi translated">如果你想更进一步，还有其他方法来检索节点(元素或其他)。</p><p id="bbde" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用<code class="fe lf lg lh li b"><strong class="ka jc">getElementsByTagName()</strong></code>方法通过标签检索一个<em class="lj"> live </em> <code class="fe lf lg lh li b">HTMLCollection</code>。查看此<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByTagName" rel="noopener ugc nofollow" target="_blank">链接</a>，了解更多信息。</p><p id="de62" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用<code class="fe lf lg lh li b"><strong class="ka jc">getElementsByName()</strong></code>方法通过 name 属性检索一个<em class="lj"> live </em> <code class="fe lf lg lh li b">NodeList</code>。查看此<a class="ae nj" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName" rel="noopener ugc nofollow" target="_blank">链接</a>，了解更多信息。</p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="5fe5" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka jc">感谢您的阅读🙏。</strong></p><p id="4415" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">随意<strong class="ka jc">分享</strong>和/或<strong class="ka jc"> </strong> <a class="ae nj" href="https://medium.com/@techbrant" rel="noopener"> <strong class="ka jc">关注本账号</strong> </a> <strong class="ka jc">。那会很有帮助😁</strong></p><p id="47b6" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lj">作者:</em> <strong class="ka jc"> <em class="lj"> benlmsc </em> </strong></p></div><div class="ab cl lk ll hu lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ij ik il im in"><p id="e25c" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lj">更多内容尽在</em><a class="ae nj" href="http://blog.devgenius.io/" rel="noopener ugc nofollow" target="_blank"><em class="lj">blog . dev genius . io</em></a><em class="lj">。</em></p></div></div>    
</body>
</html>