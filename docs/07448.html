<html>
<head>
<title>Static files and templates in Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django 中的静态文件和模板</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/static-files-and-templates-in-django-aa4e08ad827?source=collection_archive---------1-----------------------#2022-03-26">https://blog.devgenius.io/static-files-and-templates-in-django-aa4e08ad827?source=collection_archive---------1-----------------------#2022-03-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/02caca90e489fd55494c59cc40a80b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Z3GI4siV-AlqPFG8txe0w.png"/></div></div></figure><p id="c5b9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这篇文章中，我们将介绍如何以一种良好的结构化方式呈现 HTML 模板，以显示我们的数据，并在其上添加一些样式。</p><p id="b3c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通常我不使用 Django 来做这件事，但是当我们只是为了简单的目的想要快速创建一个网页的时候，可能会有方便的情况。我通常使用 Django 作为 RESTful 服务，然后在堆栈中添加 Angular 或 React，但这是在我们要构建更大的应用程序的情况下。我可能会在教程中讲解如何设置它，如果你想学习 Django REST 框架，请留下评论。</p><p id="ff40" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以本教程将建立在我写的最新 Django 教程的基础上，所以如果你还没有克隆这个库的话，一定要克隆它:<a class="ae kt" href="https://github.com/mjovanc/medium-django" rel="noopener ugc nofollow" target="_blank">https://github.com/mjovanc/medium-django</a></p><p id="6716" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以我们将使用名为<strong class="jx io">静态文件模板</strong>的新分支，它是从<strong class="jx io">关系</strong>分支创建的。</p><h1 id="18d5" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使用模板</h1><p id="109c" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">让我们从<strong class="jx io"> settings.py </strong>中模板的当前设置开始:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="72f2" class="mg kv in mc b gy mh mi l mj mk">TEMPLATES = [<br/>    {<br/>        'BACKEND': 'django.template.backends.django.DjangoTemplates',<br/>        'DIRS': [<strong class="mc io">os.path.join(BASE_DIR, 'templates')</strong>],<br/>        'APP_DIRS': True,<br/>        'OPTIONS': {<br/>            'context_processors': [<br/>                'django.template.context_processors.debug',<br/>                'django.template.context_processors.request',<br/>                'django.contrib.auth.context_processors.auth',<br/>                'django.contrib.messages.context_processors.messages',<br/>            ],<br/>        },<br/>    },<br/>]</span></pre><p id="9832" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，我们在这里定义了如何处理模板的所有设置。在默认的 Django 安装中，<strong class="jx io"> DIRS </strong>列表是空的，但是我们在这里设置我们想要从博客应用程序的根目录下加载模板，BASE_DIR 如下所示:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="fa5f" class="mg kv in mc b gy mh mi l mj mk">BASE_DIR = Path(__file__).resolve().parent.parent</span></pre><p id="f608" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我们目前的结构:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="039d" class="mg kv in mc b gy mh mi l mj mk">- blog<br/>    - blog<br/>        - __init__.py<br/>        - asgi.py<br/>        - settings.py <br/>        - urls.py<br/>        - wsgi.py<br/>    - main<br/>        - migrations <br/>        - __init__.py<br/>        - admin.py<br/>        - apps.py<br/>        - models.py<br/>        - tests.py<br/>        - views.py<br/>    - templates<br/>        - index.html<br/>    - manage.py<br/>    - db.sqlite3</span></pre><p id="6f43" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，我们有一个名为 templates 的目录，我们将当前由我们的视图加载的<strong class="jx io">index.html</strong>放在主应用程序目录中，该目录名为<strong class="jx io"> IndexView </strong>，位于基于类的视图的<strong class="jx io"> views.py </strong>中。</p><p id="2f61" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，如果我们愿意，我们可以添加更多的视图，指向目录中的另一个模板，或者我们也可以将这些模板放在应用程序中，就像这样，这样就可以工作了，因为我们已经将<strong class="jx io"> APP_DIRS </strong>设置为 true:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="1d5c" class="mg kv in mc b gy mh mi l mj mk">- blog<br/>    - blog<br/>        - __init__.py<br/>        - asgi.py<br/>        - settings.py <br/>        - urls.py<br/>        - wsgi.py<br/>    - main<br/>        - migrations         <br/>        - <strong class="mc io">templates</strong><br/>            - <strong class="mc io">index.html</strong><br/>        - __init__.py<br/>        - admin.py<br/>        - apps.py<br/>        - models.py<br/>        - tests.py<br/>        - views.py<br/>    - manage.py<br/>    - db.sqlite3</span></pre><p id="0a31" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以我们不需要在根目录下的模板目录，但是通常你会在那里存储不属于特定应用程序的模板。对于这个例子，我们将使用模板的应用程序目录结构和根模板目录。</p><h1 id="d4cc" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">使用 Django 模板语言创建模板</h1><p id="00c6" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">现在我们有了一个非常基本的设置，我们将使用 Django 模板语言创建一个新的模板，这样我们可以节省时间并更容易地管理许多不同的模板文件。</p><p id="5d44" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先在根目录下的模板目录中创建一个名为<strong class="jx io">base.html</strong>的新文件，并将以下内容放入其中:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="a8d6" class="mg kv in mc b gy mh mi l mj mk">{% load static i18n %}<br/><br/>&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>    &lt;head&gt;<br/>        &lt;meta charset="utf-8" /&gt;<br/>        &lt;meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /&gt;<br/>        &lt;meta name="description" content="" /&gt;<br/>        &lt;meta name="author" content="" /&gt;<br/>        &lt;title&gt;{{ SITE_TITLE }}{% block site_title_page %}{% endblock %}&lt;/title&gt;<br/>        &lt;link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}" /&gt;<br/>        &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"&gt;<br/>    &lt;/head&gt;<br/><br/>    &lt;body&gt;<br/>        &lt;!-- Responsive navbar--&gt;<br/>        &lt;nav class="navbar navbar-expand-lg navbar-dark bg-dark"&gt;<br/>            &lt;div class="container"&gt;<br/>                &lt;a class="navbar-brand" href="#"&gt;{{ SITE_TITLE }}&lt;/a&gt;<br/>                &lt;button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"&gt;&lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;&lt;/button&gt;<br/>                &lt;div class="collapse navbar-collapse" id="navbarSupportedContent"&gt;<br/>                    &lt;ul class="navbar-nav ms-auto mb-2 mb-lg-0"&gt;<br/>                        &lt;li class="nav-item"&gt;&lt;a class="nav-link active" aria-current="page" href="#"&gt;Home&lt;/a&gt;&lt;/li&gt;<br/>                        &lt;li class="nav-item"&gt;&lt;a class="nav-link" href="#"&gt;Link&lt;/a&gt;&lt;/li&gt;<br/>                        &lt;li class="nav-item dropdown"&gt;<br/>                            &lt;a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"&gt;Dropdown&lt;/a&gt;<br/>                            &lt;ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown"&gt;<br/>                                &lt;li&gt;&lt;a class="dropdown-item" href="#"&gt;Action&lt;/a&gt;&lt;/li&gt;<br/>                                &lt;li&gt;&lt;a class="dropdown-item" href="#"&gt;Another action&lt;/a&gt;&lt;/li&gt;<br/>                                &lt;li&gt;&lt;hr class="dropdown-divider" /&gt;&lt;/li&gt;<br/>                                &lt;li&gt;&lt;a class="dropdown-item" href="#"&gt;Something else here&lt;/a&gt;&lt;/li&gt;<br/>                            &lt;/ul&gt;<br/>                        &lt;/li&gt;<br/>                    &lt;/ul&gt;<br/>                &lt;/div&gt;<br/>            &lt;/div&gt;<br/>        &lt;/nav&gt;<br/><br/>        &lt;!-- Page content--&gt;<br/>        &lt;div class="container"&gt;<br/>            &lt;div class="text-center mt-5"&gt;<br/>                &lt;h1&gt;{% block page_content_title %}{% endblock %}&lt;/h1&gt;<br/><br/>                {% block page_content %}{% endblock %}<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/><br/>        &lt;!-- Bootstrap core JS--&gt;<br/>        &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"&gt;&lt;/script&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6095" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们这里有一堆东西要打开。我们稍微分解一下，把所有不是纯 HTML5 的东西都过一遍。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="6491" class="mg kv in mc b gy mh mi l mj mk">{% load static i18n %}</span></pre><p id="ab6f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了让我们使用一些额外的 Django 模板功能，如静态文件和国际化，这一行是必需的。我们稍后将讨论如何使用静态文件，但是现在导入它。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="d466" class="mg kv in mc b gy mh mi l mj mk">&lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /&gt;<br/>    &lt;meta name="description" content="" /&gt;<br/>    &lt;meta name="author" content="" /&gt;<br/>    &lt;title&gt;{{ SITE_TITLE }}{% block site_title_page %}{% endblock %}&lt;/title&gt;<br/>    &lt;link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}" /&gt;<br/>    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"&gt;<br/>&lt;/head&gt;</span></pre><p id="7138" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 header 标签中，我们在两个花括号内添加了<strong class="jx io"> SITE_TITLE </strong>,这样我们就可以呈现出下一步将在自定义上下文处理器中定义的值。然后我们定义一个叫做<strong class="jx io"> site_title_page </strong>的块，这样如果我们在另一个页面上，我们就可以在里面添加东西。在这种情况下，我们将添加我们当前所在的页面，这样我们可以更容易地在浏览器中看到它，而不仅仅是每个页面上的网站名称。</p><p id="1c95" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们也有一个使用 Django 模板语言的文件静态导入，但是我们将在后面介绍。</p><p id="26e5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后在 navbar 中，我们也再次定义来呈现 SITE_TITLE:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="081d" class="mg kv in mc b gy mh mi l mj mk">&lt;a class="navbar-brand" href="#"&gt;{{ SITE_TITLE }}&lt;/a&gt;</span></pre><p id="11a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在容器中，我们添加了以下内容:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="a02f" class="mg kv in mc b gy mh mi l mj mk">&lt;div class="container"&gt;<br/>    &lt;div class="text-center mt-5"&gt;<br/>        &lt;h1&gt;{% block page_content_title %}{% endblock %}&lt;/h1&gt;<br/><br/>        {% block page_content %}{% endblock %}<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="9e3e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们又添加了一个新的块，叫做<strong class="jx io"> page_content_title </strong>，这样我们就可以根据我们将在哪个页面上放置一个值。此外，我们还添加了一个名为<strong class="jx io"> page_content </strong>的块，我们将在其中放置页面的实际内容。</p><p id="cfc2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以 base.html 的档案现在完成了。让我们转到自定义页面 index.html，并将其更改为以下内容:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="c064" class="mg kv in mc b gy mh mi l mj mk">{% extends "base.html" %}<br/><br/>{% block site_title_page %}{% endblock %}<br/>{% block page_content_title %}Welcome to {{ SITE_TITLE }}!{% endblock %}<br/><br/>{% block page_content %}<br/>&lt;ul&gt;<br/>    {% for bp in blogposts %}<br/>        &lt;li&gt;{{ bp.title }} - {{ bp.text }}&lt;/li&gt;<br/>    {% endfor %}<br/>&lt;/ul&gt;<br/>{% endblock %}</span></pre><p id="b7ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里我们扩展了 base.html 文件，从该文件中获取所有内容，然后通过设置一个空的 site_title_page 来修改它，因为这是在索引页面上，所以我们不需要附加页面名称。然后，我们添加一个 page_content_title，并再次使用 SITE_TITLE 显示一条欢迎消息，其中包含我们的应用程序名称。</p><p id="ddd3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们向 page_content 块添加内容，这是上一个教程中的代码，我们只需遍历博客文章，并显示标题和文本。</p><p id="4afa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太好了。我们已经完成了索引。让我们在 views.py 中创建一个名为 AboutPage 的新视图:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="0412" class="mg kv in mc b gy mh mi l mj mk">class AboutView(TemplateView):<br/>    template_name = 'about.html'</span></pre><p id="277f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里我们不需要任何上下文数据。此时我们不需要从数据库中查询一些数据。现在复制文件 index.html，将其命名为 about.html，并将其放在与 index.html 相同的目录中。然后将视图添加到 urls.py:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="98c2" class="mg kv in mc b gy mh mi l mj mk">from django.contrib import admin<br/>from django.urls import path<br/>from main.views import AboutView, IndexView<br/><br/>urlpatterns = [<br/>    path('admin/', admin.site.urls),<br/>    path('', IndexView.as_view(), name='index'),<br/>    path('about/', AboutView.as_view(), name='about'),<br/>]</span></pre><p id="68f3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们有了一条使用 about 视图的新路径。我们将稍微修改一下 about.html，这样它就不会与 index.html 完全相同:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="9c1d" class="mg kv in mc b gy mh mi l mj mk">{% extends "base.html" %}<br/><br/>{% block site_title_page %} - About Us{% endblock %}<br/>{% block page_content_title %}About Us{% endblock %}<br/><br/>{% block page_content %}<br/>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt<br/>    ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation<br/>    ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in<br/>    reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.<br/>    Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt<br/>    mollit anim id est laborum.<br/>&lt;/p&gt;<br/>{% endblock %}</span></pre><p id="6ae3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们应该能够看到这些页面:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/0b4f3ef93f64701dafdbb62898faec06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1edixo8m1Z-mnv2RePcGFA.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">索引页</figcaption></figure><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/6c57d2975c6713ab3ba53c8cfc202528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUWMU9riYpecD-MWHhvvvA.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">关于页面</figcaption></figure><p id="2810" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们还不能在标题中看到网站标题，因为我们还没有创建我们的上下文处理器，所以我们现在将开始讨论如何做。</p><h1 id="3ba5" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">上下文处理器</h1><p id="41c6" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">来自 Django 文档:</p><blockquote class="mq"><p id="048a" class="mr ms in bd mt mu mv mw mx my mz ks dk translated"><code class="fe na nb nc mc b"><strong class="ak">context_processors</strong></code>选项是一个可调用列表——称为<strong class="ak">上下文处理器</strong>——它将一个请求对象作为参数，并返回一个要合并到上下文中的条目字典。</p></blockquote><p id="d6e7" class="pw-post-body-paragraph jv jw in jx b jy nd ka kb kc ne ke kf kg nf ki kj kk ng km kn ko nh kq kr ks ig bi translated">我们将添加一个自定义的上下文处理器，它将把网站的名称返回给我们所有的模板，这样我们就可以访问变量，并在需要的地方呈现它。那么我们如何创建一个定制的上下文处理器呢？我们首先在主应用程序中创建一个名为<strong class="jx io"> context_processors.py </strong>的新文件，并放入以下代码:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="d926" class="mg kv in mc b gy mh mi l mj mk">from django.conf import settings<br/><br/><br/>def site_title(request):<br/>    return {'SITE_TITLE': settings.SITE_TITLE}</span></pre><p id="2624" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">非常简单的代码，但这只是从我们现在也需要定义的<strong class="jx io"> settings.py </strong>中返回了<strong class="jx io"> SITE_TITLE </strong>。转到<strong class="jx io"> settings.py </strong>并在某处添加:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="b8ec" class="mg kv in mc b gy mh mi l mj mk">SITE_TITLE = 'Blogger App'</span></pre><p id="7b35" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们还需要将自定义上下文处理器功能添加到我们的<strong class="jx io">模板</strong>设置中:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="6d5c" class="mg kv in mc b gy mh mi l mj mk">TEMPLATES = [<br/>    {<br/>        'BACKEND': 'django.template.backends.django.DjangoTemplates',<br/>        'DIRS': [os.path.join(BASE_DIR, 'templates')],<br/>        'APP_DIRS': True,<br/>        'OPTIONS': {<br/>            'context_processors': [<br/>                'django.template.context_processors.debug',<br/>                'django.template.context_processors.request',<br/>                'django.contrib.auth.context_processors.auth',<br/>                'django.contrib.messages.context_processors.messages',<br/>                <strong class="mc io">'main.context_processors.site_title'</strong>,<br/>            ],<br/>        },<br/>    },<br/>]</span></pre><p id="5e82" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们重启服务器，因为我们想从<strong class="jx io"> settings.py </strong>加载新变量。我们试着打开我们的页面，看看它是否有效:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/45706bf915577c1b043349301580bd9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qRKBLxkMpz_B4vroO_nqbA.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">索引页</figcaption></figure><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/e393b7a94954ce9e13dbc2b9f9c422e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aOa03ngy9ZwHax1_y_slrw.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">关于页面</figcaption></figure><p id="11b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太好了。有用！我们可以在两页的标题中看到标题，也可以在索引页的标题中看到标题！</p><h1 id="4bf0" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">添加链接</h1><p id="17f7" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">现在，我们将在 base.html 文件中添加链接到 URL/Views。这很容易做到。转到导航栏区域，将其更改为:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="7e75" class="mg kv in mc b gy mh mi l mj mk">&lt;nav class="navbar navbar-expand-lg navbar-dark bg-dark"&gt;<br/>    &lt;div class="container"&gt;<br/>        &lt;a class="navbar-brand" href="#"&gt;{{ SITE_TITLE }}&lt;/a&gt;<br/>        &lt;button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"&gt;&lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;&lt;/button&gt;<br/>        &lt;div class="collapse navbar-collapse" id="navbarSupportedContent"&gt;<br/>            &lt;ul class="navbar-nav ms-auto mb-2 mb-lg-0"&gt;<br/>                &lt;li class="nav-item"&gt;&lt;a class="nav-link" href="{% url 'index' %}"&gt;Home&lt;/a&gt;&lt;/li&gt;<br/>                &lt;li class="nav-item"&gt;&lt;a class="nav-link" href="{% url 'about' %}"&gt;Link&lt;/a&gt;&lt;/li&gt;<br/>            &lt;/ul&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/nav&gt;</span></pre><p id="a3ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在这里看到的是定义名为 index 的视图的 url 的模板语法:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="3c4c" class="mg kv in mc b gy mh mi l mj mk">&lt;a class="nav-link" href="{% url 'index' %}"&gt;Home&lt;/a&gt;</span></pre><p id="d32d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此名称由 name 参数在<strong class="jx io"> urls.py </strong>中确定:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="530e" class="mg kv in mc b gy mh mi l mj mk">path('', IndexView.as_view(), name='index'),</span></pre><p id="0075" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，如果我们想改变路径或其他东西，我们不需要重写模板文件中的 url 链接。非常有用！</p><p id="d26b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以现在我们在头中有两个链接。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/7532afd9bb6787d08be57a74610eb766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6g_5SdWyjB--0J2skzgItA.png"/></div></div></figure><h1 id="6ada" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">添加静态文件</h1><p id="14cc" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">静态文件可以像我们添加模板一样添加。或者在名为 static 的应用程序目录中，或者在名为 static 的根目录中。在本例中，我们将使用两者，因为有些文件是项目特定的，而不是应用程序特定的。</p><p id="91b7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，让我们在主博客应用程序和应用程序的根目录中创建两个名为<strong class="jx io"> static </strong>的目录。然后在根目录下创建一个名为<strong class="jx io"> img </strong>和<strong class="jx io"> css </strong>的目录。我们不会在这里讨论 JavaScript 文件，但是处理这类文件的方式是一样的，所以没有必要。</p><p id="4ad4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在下载这个文件或者你想要的任何东西，并把它放在静态/img 下的博客应用程序目录中:<a class="ae kt" href="https://ibb.co/1bgjDKW" rel="noopener ugc nofollow" target="_blank">https://ibb.co/1bgjDKW</a></p><p id="a338" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，在我们的<strong class="jx io">about.html</strong>文件中，我们将在<strong class="jx io">页面 _ 内容</strong>块中添加以下内容:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="6195" class="mg kv in mc b gy mh mi l mj mk">&lt;img src="{% static 'img/tomcruise.jpg' %}" class="about-img" alt="Tom Cruise"&gt;</span></pre><p id="f2a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，在<strong class="jx io">about.html</strong>的扩展下添加，以便我们加载能够加载静态文件的功能:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="50d0" class="mg kv in mc b gy mh mi l mj mk">{% load static %}</span></pre><p id="043b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们还需要在我们的<strong class="jx io"> settings.py </strong>中添加一些额外的设置，以便它可以从应用程序目录中加载:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="dfcb" class="mg kv in mc b gy mh mi l mj mk">STATICFILES_DIRS = [<br/>    os.path.join(BASE_DIR, 'static/'),<br/>    os.path.join(BASE_DIR, 'main/static/'),<br/>]</span></pre><p id="d235" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们可以看到，当我们访问 about 页面时，我们可以提供静态文件:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/d4babea1c509a242df1e868cfb55edee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NQ3N6I5epByrjeN0fzIe1Q.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">关于页面</figcaption></figure><p id="ec70" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太好了！现在，我们将添加我们的自定义 CSS 以及特定的应用程序和项目。在根静态目录<strong class="jx io"> static/css/style.css </strong>中添加一个新文件，并将代码放入其中:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="5ce5" class="mg kv in mc b gy mh mi l mj mk">body {<br/>    font-family: Verdana, Arial, Tahoma, Serif;<br/>    font-size: 1em;<br/>    color: #3C3C3C;<br/>}</span></pre><p id="59bc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后进入 base.html 的标题部分，添加:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="c7c3" class="mg kv in mc b gy mh mi l mj mk">&lt;link rel="stylesheet" href="{% static 'css/style.css' %}"&gt;<br/>{% block styles %}{% endblock %}</span></pre><p id="b8dd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们有一个名为 styles 的块，这样我们就可以根据我们所在的页面向样式表添加自定义链接，并且我们有一个默认的 style.css 文件，该文件在整个项目中总是被加载。</p><p id="8c52" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后在<strong class="jx io"> main/static/css/main.css </strong>中创建一个新文件，并将它放入其中:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="46c3" class="mg kv in mc b gy mh mi l mj mk">.about-img {<br/>    border-radius: 10px;<br/>}</span></pre><p id="dfa6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 about.html 的<strong class="jx io">内放置以下标签:</strong></p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="6899" class="mg kv in mc b gy mh mi l mj mk">{% block styles %}<br/>    &lt;link rel="stylesheet" href="{% static 'css/main.css' %}"&gt;<br/>{% endblock %}</span></pre><p id="0b47" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们只需看一下页面就可以发现，它看起来有所不同:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/7b93449215aa13f9f5b90dfd514a65e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qkKuQt5kxV4U_C11I7D7dw.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">索引页</figcaption></figure><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/2aad8e9e44641e0521e30ae36ed9c966.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tdtAao570gm23pNZroVrA.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">关于页面</figcaption></figure><p id="aec6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果我们检查，我们还会看到它已经加载到文件 styles.css 和 main.css 以及其他文件:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/43e70c497fdb22a26010940b48878a0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6zI6u77d83PMhGeAC9apFQ.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">检查“关于”页面</figcaption></figure><h1 id="fa80" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">摘要</h1><p id="239c" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">现在，您可能对如何使用 Django 处理静态文件和模板有了一些基本的了解。当然，你还可以做更多的事情，我建议你仔细阅读他们的文档，因为这是很好的解释和展示如何实现的例子。Django 周围也有一个巨大的社区，因此 Stackoverflow 有许多关于常见问题的答案，但是要注意许多答案都是旧的，并且总是先检查文档。</p><p id="ff5c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读，别忘了在 LinkedIn 上关注我即将发布的文章和更多内容:<a class="ae kt" href="https://www.linkedin.com/in/marcuscvjeticanin/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/marcuscvjeticanin/</a></p><h1 id="1263" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">参考</h1><ul class=""><li id="1182" class="nj nk in jx b jy ls kc lt kg nl kk nm ko nn ks no np nq nr bi translated"><a class="ae kt" href="https://docs.djangoproject.com/en/4.0/ref/templates/language/" rel="noopener ugc nofollow" target="_blank">https://docs . django project . com/en/4.0/ref/templates/language/</a></li><li id="6385" class="nj nk in jx b jy ns kc nt kg nu kk nv ko nw ks no np nq nr bi translated"><a class="ae kt" href="https://docs.djangoproject.com/en/4.0/ref/templates/api/" rel="noopener ugc nofollow" target="_blank">https://docs.djangoproject.com/en/4.0/ref/templates/api/</a></li></ul></div></div>    
</body>
</html>