<html>
<head>
<title>Add Bottom Sheets to React-Native App.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">添加底部表来反应-原生应用程序。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/add-bottom-sheets-to-react-native-app-6f4d9bf3bd6e?source=collection_archive---------1-----------------------#2022-05-07">https://blog.devgenius.io/add-bottom-sheets-to-react-native-app-6f4d9bf3bd6e?source=collection_archive---------1-----------------------#2022-05-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="e34a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当你试图展示一些比应用程序中的其他组件更需要用户注意的内容时，底部表单会非常方便。底板也是 react-native 为我们提供的传统模型的很好的替代品。</p><p id="121a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天我们要讨论的不是一个，而是两个底层包装，可以根据我们的要求使用。所以不要再拖延了，让我们开始吧！</p><p id="9e79" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">类型 1:当您的内容很小时[通常用于呈现几个按钮(2–3)]:当您从设备的本地存储中上传图像或视频时，这些类型的模态被广泛使用。</p><p id="b726" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">附注:你也可以在任何其他场景中使用它。</p><p id="a962" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">类型 2:当你的内容更多，你希望用户通过向上滑动来扩展内容！这些类型的模态可以占据窗口的 90%。</p><p id="78d0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们给它们编码！！</p><p id="c5e5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">先决条件:</p><p id="923d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用以下命令开始 react 本地项目。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="362c" class="kr ks in kn b gy kt ku l kv kw">npx react-native init modalExample</span></pre><figure class="ki kj kk kl gt ky gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/5c0654dbfdd4582afea4b86556480b5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*MR6yQGCJ_NRxIFqD"/></div></figure><p id="cedc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">图片来源:reactnative.dev</p><p id="a0fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">类型 1:</p><ol class=""><li id="e787" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated">让我们安装依赖项。在这种情况下，我们将使用<a class="ae lk" href="https://github.com/osdnk/react-native-reanimated-bottom-sheet" rel="noopener ugc nofollow" target="_blank">复活底板</a>。这个包有一些依赖项，我们也将安装它们。</li></ol><p id="9349" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用纱线:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="7606" class="kr ks in kn b gy kt ku l kv kw">yarn add reanimated-bottom-sheet react-native-reanimated@1.7.0 react-native-gesture-handler</span></pre><p id="4587" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">或者</p><p id="ddf9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 npm:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="fc98" class="kr ks in kn b gy kt ku l kv kw">npm install reanimated-bottom-sheet react-native-reanimated@1.7.0 react-native-gesture-handler</span></pre><ol class=""><li id="915c" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated">现在转到您想要实现它的文件。</li><li id="0239" class="lb lc in jm b jn ll jr lm jv ln jz lo kd lp kh lg lh li lj bi translated">在文件顶部导入 useRef、动画和底部表单。</li></ol><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="515d" class="kr ks in kn b gy kt ku l kv kw">import React, { useRef } from "react";<br/>import BottomSheet from "reanimated-bottom-sheet";<br/>import Animated from "react-native-reanimated";</span></pre><p id="2e8f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.创建对底部工作表和回调节点的引用。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="dadc" class="kr ks in kn b gy kt ku l kv kw">sheetRef = useRef(null);<br/>fall = new Animated.Value(1);</span></pre><p id="d18c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">4.现在让我们将 BottomSheet 组件放到 UI 上。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="c845" class="kr ks in kn b gy kt ku l kv kw">&lt;BottomSheet<br/>         ref={this.modalRef}<br/>         snapPoints={[330, 0]}<br/>         initialSnap={1}<br/>         callbackNode={this.fall}<br/>         enabledGestureInteraction={true}<br/>         renderContent={this.showContent}<br/>         renderHeader={this.showHeader}<br/>/&gt;</span></pre><ul class=""><li id="8e58" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lq lh li lj bi translated">对齐点决定了组件将在 UI 上占用的空间量。</li><li id="f92e" class="lb lc in jm b jn ll jr lm jv ln jz lo kd lp kh lq lh li lj bi translated">默认情况下，initialSnap 为 1 会保持工作表关闭。</li></ul><p id="74f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">5.现在让我们创建头和内容方法来显示我们的内容。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="fdc1" class="kr ks in kn b gy kt ku l kv kw">showHeader = () =&gt; (<br/>    &lt;View style={styles.panelHeader}&gt;<br/>      &lt;View style={styles.modalHeader}&gt;<br/>        &lt;View style={styles.panelHandle} /&gt;<br/>        &lt;Text style={styles.modalHeaderText}&gt;<br/>          Swipe down to close the modal<br/>        &lt;/Text&gt;<br/>      &lt;/View&gt;<br/>    &lt;/View&gt;<br/>  );</span><span id="9413" class="kr ks in kn b gy lr ku l kv kw">showContent = () =&gt; (<br/>    &lt;&gt;<br/>      &lt;View style={styles.panel}&gt;<br/>        &lt;Text style={{ marginBottom: 10 }}&gt;<br/>          Hello World!<br/>        &lt;/Text&gt;<br/>      &lt;/View&gt;<br/>    &lt;/&gt;<br/>  );</span></pre><p id="0bd5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">6.展示具有这些属性的样式。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="2b24" class="kr ks in kn b gy kt ku l kv kw">panelHeader: {<br/>    backgroundColor: "#ffffff",<br/>    paddingTop: 20,<br/>    borderTopLeftRadius: 20,<br/>    borderTopRightRadius: 20,<br/>    borderColor: "#ffffff",<br/>  },<br/>  panel: {<br/>    padding: 20,<br/>    backgroundColor: "#ffffff",<br/>    paddingTop: 20,<br/>    marginBottom: 0,<br/>  },<br/>  modalHeader: {<br/>    justifyContent: "center",<br/>    alignItems: "center",<br/>  },<br/>  modalHeaderText: {<br/>    fontSize: 15,<br/>    fontFamily: "ubuntu-semibold",<br/>  },<br/>  panelHandle: {<br/>    width: 40,<br/>    height: 8,<br/>    borderRadius: 4,<br/>    backgroundColor: "#00000040",<br/>    marginBottom: 10,<br/>  },</span></pre><p id="843b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">仅此而已。你完了。</p><p id="8d92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">附加功能(可选) :如果你想创建一个背景覆盖，然后添加这个功能，就在底层之上。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="f42b" class="kr ks in kn b gy kt ku l kv kw">const renderShadow = () =&gt; {<br/>    const animatedShadowOpacity = Animated.interpolate(fall, {<br/>      inputRange: [0, 1],<br/>      outputRange: [0.5, 0],<br/>    });<br/>    return (<br/>      &lt;Animated.View<br/>        pointerEvents="none"<br/>        style={[<br/>          styles.shadowContainer,<br/>          {<br/>            opacity: animatedShadowOpacity,<br/>          },<br/>        ]}<br/>      /&gt;<br/>    );<br/>  };</span><span id="1f35" class="kr ks in kn b gy lr ku l kv kw">/* The Styles Section */<br/>shadowContainer: {<br/>    ...StyleSheet.absoluteFillObject,<br/>    backgroundColor: "#292C36",<br/>    zIndex: 10,<br/>  },</span></pre><p id="6625" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，应该是这样的:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="f513" class="kr ks in kn b gy kt ku l kv kw">{renderShadow()}<br/> &lt;BottomSheet<br/> ref={this.modalRef}<br/> snapPoints={[330, 0]}<br/> initialSnap={1}<br/> callbackNode={this.fall}<br/> enabledGestureInteraction={true}<br/> renderContent={this.showContent}<br/> renderHeader={this.showHeader}<br/> /&gt;</span></pre><p id="0ee1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">故障排除:</p><ol class=""><li id="b019" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated">如果出现任何错误，请仔细检查 showContent()中的代码。您可能肯定忘记了从函数中返回组件。</li><li id="fafa" class="lb lc in jm b jn ll jr lm jv ln jz lo kd lp kh lg lh li lj bi translated">如果您收到错误消息:</li></ol><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="eda7" class="kr ks in kn b gy kt ku l kv kw">TypeError: undefined is not a function</span></pre><p id="edf2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后执行以下任一操作:</p><ul class=""><li id="9963" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lq lh li lj bi translated">将你的反应-原生-复活降级到 v1 (1。X.X)。</li><li id="8cbe" class="lb lc in jm b jn ll jr lm jv ln jz lo kd lp kh lq lh li lj bi translated">在 renderShadow()内替换 interpolate 以插值节点。在这里看文件<a class="ae lk" href="https://docs.swmansion.com/react-native-reanimated/docs/migration" rel="noopener ugc nofollow" target="_blank">。</a></li></ul><p id="1df8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们进入第二种类型。</p><p id="1421" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">类型 2:</p><ol class=""><li id="76a1" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated">让我们安装依赖项。在这种情况下，我们将使用<a class="ae lk" href="https://github.com/jeremybarbet/react-native-modalize" rel="noopener ugc nofollow" target="_blank"> react-native-modalize </a>。这个包有一些依赖项，我们也将安装它们。</li></ol><p id="6d4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用纱线:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="7342" class="kr ks in kn b gy kt ku l kv kw">yarn add reanimated-bottom-sheet react-native-gesture-handler</span></pre><p id="c3c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">或者</p><p id="03eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 npm:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="191b" class="kr ks in kn b gy kt ku l kv kw">npm install reanimated-bottom-sheet react-native-gesture-handler</span></pre><ol class=""><li id="6e55" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated">现在让我们进行所需的配置。搬到 MainActivity.java，添加以下几行:</li></ol><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="fd56" class="kr ks in kn b gy kt ku l kv kw">import com.facebook.react.ReactActivityDelegate;<br/>import com.facebook.react.ReactRootView;<br/>import com.swmansion.gesturehandler.react.RNGestureHandlerEnabledRootView;</span><span id="2c4f" class="kr ks in kn b gy lr ku l kv kw">/*  Inside MainActivity class */<br/><a class="ae lk" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>  protected ReactActivityDelegate createReactActivityDelegate() {<br/>    return new ReactActivityDelegate(this, getMainComponentName()) {<br/>      <a class="ae lk" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>      protected ReactRootView createRootView() {<br/>       return new RNGestureHandlerEnabledRootView(MainActivity.this);<br/>      }<br/>    };<br/>  }</span></pre><ul class=""><li id="d06e" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lq lh li lj bi translated">现在将这一行添加到根 index.js 文件中:</li></ul><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="b434" class="kr ks in kn b gy kt ku l kv kw">import 'react-native-gesture-handler';</span></pre><p id="8896" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.转到您想要实现它的屏幕(在这个例子中我使用 App.js):</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="39c7" class="kr ks in kn b gy kt ku l kv kw">import React, {useRef} from 'react';<br/>import {StyleSheet, Text, View, Pressable} from 'react-native';<br/>import {Modalize} from 'react-native-modalize';</span><span id="947f" class="kr ks in kn b gy lr ku l kv kw">const App = () =&gt; {<br/>  const modalRef = useRef(null);<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Pressable onPress={() =&gt; modalRef.current?.open()}&gt;<br/>        &lt;Text&gt;Launch Modal&lt;/Text&gt;<br/>      &lt;/Pressable&gt;</span><span id="aa4d" class="kr ks in kn b gy lr ku l kv kw">&lt;Modalize ref={modalRef} snapPoint={180}&gt;<br/>          &lt;YourModalContent /&gt;<br/>      &lt;/Modalize&gt;<br/>    &lt;/View&gt;<br/>  );<br/>};</span><span id="a336" class="kr ks in kn b gy lr ku l kv kw">export default App;</span><span id="4565" class="kr ks in kn b gy lr ku l kv kw">const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    alignItems: 'center',<br/>    justifyContent: 'center',<br/>  },<br/>  button: {<br/>    alignItems: 'center',<br/>    justifyContent: 'center',<br/>    padding: 15,<br/>    borderRadius: 10,<br/>  },<br/>});</span></pre><p id="953d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就这样，伙计。你的底部床单现在可以放你的东西了。我希望这对你有帮助。干杯！✌🏻</p><p id="a636" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你有任何问题，请在评论区提出来。我会尽力帮忙。<strong class="jm io">关注</strong>我获取更多此类内容。谢了。祝你有美好的一天！</p></div></div>    
</body>
</html>