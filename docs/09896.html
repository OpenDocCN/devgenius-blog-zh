<html>
<head>
<title>Ruby Collections</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">红宝石系列</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ruby-collections-9d989cb043c2?source=collection_archive---------10-----------------------#2022-09-20">https://blog.devgenius.io/ruby-collections-9d989cb043c2?source=collection_archive---------10-----------------------#2022-09-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2d41b9e800d5b73ef2fc4beb57e6703e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NxmJOpAtH4jZQsz4"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">佛朗哥·安东尼奥·乔瓦内拉在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="01f0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">处理数据是编程的一部分。数据存储、搜索和操作是程序员的常见任务。考虑第一个动作:存储。我们如何存储信息？对于大多数编程语言，解决方案是将它们组织成结构化的容器或集合。集合可以采取多种形式，但是将它们视为数据列表是很有用的。</p><p id="0bd9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将关注 Ruby 最常见的三种集合类型<code class="fe ky kz la lb b">String</code>、<code class="fe ky kz la lb b">Array</code>和<code class="fe ky kz la lb b">Hash</code>。</p><blockquote class="lc"><p id="ff29" class="ld le in bd lf lg lh li lj lk ll kx dk translated">"生活是瞬间的集合。"</p><p id="e58c" class="ld le in bd lf lg lh li lj lk ll kx dk translated">—未知</p></blockquote></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><h1 id="fb27" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">元素引用</h1><p id="7977" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">单个元素构成集合。要使用集合，我们必须首先了解它们的结构，以及如何引用和分配其中的单个元素。</p><h2 id="13d8" class="mw lu in bd lv mx my dn lz mz na dp md kl nb nc mh kp nd ne ml kt nf ng mp nh bi translated">字符串元素引用</h2><p id="837e" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">字符串中的每个字符都由基于整数的索引表示。索引从零开始，剩余的每个索引值增加 1。该索引可用于查找特定字符。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="8249" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">还可以使用索引起点和返回的字符数来引用字符串中的多个字符。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="738a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Ruby 中的方法总是有返回值。当我们调用一个方法时，我们可以使用方法链接来调用另一个方法的返回值。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="3c56" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">字符串不是真正的集合，尽管我们经常这样称呼它们。集合包含多个对象，而字符串只包含一个对象。单个字符不是对象，而是包含字符串值的对象的组成部分。</p><p id="1903" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">字符串的行为类似于集合，因为您可以单独访问和分配每个字符。当你用类似<code class="fe ky kz la lb b">str[2]</code>的东西访问字符串中的一个字符时，返回值是一个全新的字符串——每次你调用它，<code class="fe ky kz la lb b">str[2]</code>都会返回一个新的字符串:</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="24bc" class="mw lu in bd lv mx my dn lz mz na dp md kl nb nc mh kp nd ne ml kt nf ng mp nh bi translated">数组元素引用</h2><p id="f900" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">数组是按索引排序的元素列表，可以包含任何对象。为了保持元素的顺序，数组使用基于整数的索引。可以使用特定元素的索引来引用它。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="1d50" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">数组中的一系列元素也可以以类似于字符串的方式被引用。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="658d" class="mw lu in bd lv mx my dn lz mz na dp md kl nb nc mh kp nd ne ml kt nf ng mp nh bi translated">哈希元素引用</h2><p id="7845" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">哈希是另一种流行的集合数据结构，它不使用基于整数的索引，而是使用键-值对，其中键或值可以是任何类型的 Ruby 对象。这使得元素的集合更加全面和更具描述性。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="28fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">需要注意的是，上例中的<code class="fe ky kz la lb b">hsh[‘fruit’][0]</code>中的<code class="fe ky kz la lb b">[0]</code>指的是一个字符串元素引用。<code class="fe ky kz la lb b">hsh[‘fruit’]</code>返回字符串<code class="fe ky kz la lb b">‘apple’</code>，并在返回值上调用<code class="fe ky kz la lb b">[0]</code>。</p><p id="e9cb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">用于初始化哈希的密钥必须是唯一的。另一方面，值可以复制:</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="bc15" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以使用 hash 的#keys 和#values 方法从 Hash 中获取键或值。这两种方法都会产生一个数组:</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0ab1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在前面的示例中，符号被用作键。虽然在 Ruby 中，散列键和值都可以是任何对象，但符号通常被用作键。Ruby 符号可以被认为是不可变的字符串。对散列键使用符号有几个好处，我们在这里不讨论，但是了解这个约定是很重要的。</p><h1 id="3ef1" class="lt lu in bd lv lw no ly lz ma np mc md me nq mg mh mi nr mk ml mm ns mo mp mq bi translated">边缘案例</h1><p id="b501" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">当引用集合中的元素时，有一些事情可能会让您措手不及，您应该了解这些以避免代码中出现意外的行为。</p><h2 id="350b" class="mw lu in bd lv mx my dn lz mz na dp md kl nb nc mh kp nd ne ml kt nf ng mp nh bi translated">出界指数</h2><p id="e8fb" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">数组和字符串都是索引集合的例子。也就是说，我们可以使用索引来引用对象中的特定元素。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="0fc8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这种情况下，引用越界索引会产生 nil。对于一个字符串来说，这不一定是个问题，因为我们知道 nil 是一个无效的返回值；但是，nil 可能是数组的有效返回值，因为数组可以包含任何其他类型的对象，包括 nil。</p><h2 id="eedd" class="mw lu in bd lv mx my dn lz mz na dp md kl nb nc mh kp nd ne ml kt nf ng mp nh bi translated">负指数</h2><p id="1f48" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">负索引可用于引用 String 和 Array 对象中的元素，从集合中的最后一个索引-1 开始，向后工作。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="2b61" class="lt lu in bd lv lw no ly lz ma np mc md me nq mg mh mi nr mk ml mm ns mo mp mq bi translated">转换收藏</h1><p id="7c25" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">因为字符串和数组有相似之处，比如都是零索引集合，所以可以从一个转换到另一个，这是 Ruby 代码中的常见做法。这种类型的转换可以通过许多 Ruby 方法实现，包括<code class="fe ky kz la lb b">String#chars</code>和<code class="fe ky kz la lb b">Array#join</code>。</p><p id="d646" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">String#chars 返回单个字符的数组。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="4947" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">Array#join</code>返回一个包含数组元素的字符串。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="e8df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Hash 的<code class="fe ky kz la lb b">#to_a</code>方法返回一个数组。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="3458" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">#to_a</code>返回的数组包含另外两个数组，每个数组包含一个符号和一个字符串。每个子数组对应于原始散列中的一个键值对。</p><p id="cf24" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Hash 有一个<code class="fe ky kz la lb b">#to_a</code>方法，Array 有一个<code class="fe ky kz la lb b">#to_h</code>方法。</p><h1 id="222b" class="lt lu in bd lv lw no ly lz ma np mc md me nq mg mh mi nr mk ml mm ns mo mp mq bi translated">分配元素</h1><h2 id="f6f1" class="mw lu in bd lv mx my dn lz mz na dp md kl nb nc mh kp nd ne ml kt nf ng mp nh bi translated">字符串元素赋值</h2><p id="5202" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">使用字符串元素赋值符号，我们可以通过引用其索引来更改字符串中特定字符的值。如果我们想把一个句子中第一个单词的第一个字母换成大写字母，我们可以这样做。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="263c" class="mw lu in bd lv mx my dn lz mz na dp md kl nb nc mh kp nd ne ml kt nf ng mp nh bi translated">数组元素赋值</h2><p id="1de7" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">我们可以分配数组元素，就像我们可以使用它们的索引来分配字符串中的单个字符一样。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h2 id="ee94" class="mw lu in bd lv mx my dn lz mz na dp md kl nb nc mh kp nd ne ml kt nf ng mp nh bi translated">哈希元素赋值</h2><p id="6502" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">散列元素的赋值没有太大的不同。不使用索引赋值，而是使用哈希键。</p><figure class="ni nj nk nl gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><h1 id="a425" class="lt lu in bd lv lw no ly lz ma np mc md me nq mg mh mi nr mk ml mm ns mo mp mq bi translated">结论</h1><p id="49a6" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">集合中元素的引用和赋值是一个非常重要的主题。我们可以使用各种方法来执行这些操作。这些概念是使用集合的基础，对它们的良好理解将使使用这些数据结构变得容易得多。</p></div></div>    
</body>
</html>