<html>
<head>
<title>BPM: A CSS Custom Properties Methodology</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">BPM:一种 CSS 自定义属性方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-css-custom-properties-methodology-551665a8f13f?source=collection_archive---------6-----------------------#2022-04-13">https://blog.devgenius.io/a-css-custom-properties-methodology-551665a8f13f?source=collection_archive---------6-----------------------#2022-04-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/94c036bb16a8fd1264b4fe830d22f537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdQn5iE-bOxEO9-FbUizTQ.png"/></div></div></figure><div class=""/><p id="f9a4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">CSS 自定义属性(或 CSS 变量)功能强大，层叠，让我们以以前无法的方式构建网站。也就是说，CSS 的层叠意味着很有可能会出现意想不到的副作用，尤其是如果您不仅仅在<code class="fe kt ku kv kw b">:root</code>级别定义属性的话。以下是对 BEM、ABEM 或大多数基于块的 CSS 方法使用自定义属性的建议。</p><p id="688e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">BPM (Block Property Modifier)是对 BEM、ABEM 或大多数基于块的 CSS 方法使用自定义属性的建议。它的惯例集中在明确自定义属性的预期范围，以便它们可以在组件之间轻松使用或重构，而不会产生意外的后果。</p><h1 id="2b90" class="kx ky iy bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">1.- <someprefix> - <property-name> - <somesuffix/></property-name></someprefix></h1><p id="1652" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">选择属性名时，首先考虑使用现有 CSS 属性的名称。比如<code class="fe kt ku kv kw b">color</code>过<code class="fe kt ku kv kw b">text-color</code>、<code class="fe kt ku kv kw b">gap</code>过<code class="fe kt ku kv kw b">spacing</code>等。如果没有合适的 CSS 属性，请选择一个与其他 CSS 属性一致的名称。开发人员习惯于 CSS 属性，所以他们更有可能识别出什么是属性，你引用的是他们已经知道的属性。</p><p id="8b83" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果有多个相似的值就用后缀:<code class="fe kt ku kv kw b">color-primary</code>、<code class="fe kt ku kv kw b">color-secondary,</code>、<code class="fe kt ku kv kw b">gradient-start</code>、<code class="fe kt ku kv kw b">gradient-end</code>、<code class="fe kt ku kv kw b">font-family-heading</code>等。</p><h1 id="9102" class="kx ky iy bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">2.前缀:根属性。</h1><p id="c407" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">为在<code class="fe kt ku kv kw b">:root</code>中定义的属性选择一个标准前缀，比如<code class="fe kt ku kv kw b">--root-</code>:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="e297" class="mi ky iy kw b gy mj mk l ml mm">:root {<br/>  --root-color-primary: orangered;<br/>  --root-color-secondary: cyan;<br/>  --root-padding: 20px;<br/>  --root-buttonAngle: -15deg;<br/>}</span></pre><p id="2a16" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您应该仅在<code class="fe kt ku kv kw b">:root</code>元素级别覆盖这些值，而不是在特定元素中。这些值相当于项目的常数，应该可以从任何组件访问。它们可能实际上并不是恒定的—<em class="mn">—</em>您可能希望根据媒体查询(如<code class="fe kt ku kv kw b">prefers-color-scheme</code>、<code class="fe kt ku kv kw b">prefers-reduced-motion</code>或视口大小)来更改这些值——但是我们希望这些值在任何地方都可用，不受任何父元素的影响。</p><h1 id="c97d" class="kx ky iy bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">3.以私有特性的块名作为其前缀。</h1><p id="57fa" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">为私有块属性加上前缀<code class="fe kt ku kv kw b">blockName</code>:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="3f4a" class="mi ky iy kw b gy mj mk l ml mm">.button {<br/>  --button-color: purple;<br/>  --button-buttonAngle: var(--root-buttonAngle, 15deg);<br/>}</span></pre><p id="5b5c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">没有办法创建真正的私有 CSS 属性。然而，如果你在像原子设计这样的方法中工作，组件应该很少作为它们自己的父组件出现，所以用它们的块名作为属性的前缀可以避免冲突。</p><p id="c23c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些属性<strong class="jx iz">不应在该程序块之外设置或使用</strong>。开发人员应该可以自由地创建和重构它们。它们应该由块、块的元素和修饰符设置或使用:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="4502" class="mi ky iy kw b gy mj mk l ml mm">.button {<br/>  --button-color: purple;<br/>  background-color: var(--button-color);<br/>  box-shadow: 0 0 10px var(--button-color);<br/>}</span><span id="0151" class="mi ky iy kw b gy mo mk l ml mm">// BEM<br/>.button--bright {<br/>  --button-color: gold;<br/>}</span><span id="dfcd" class="mi ky iy kw b gy mo mk l ml mm">// ABEM<br/>.button.-bright {<br/>  --button-color: lemonchiffon;<br/>}</span></pre><h1 id="b73c" class="kx ky iy bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">4.对公共属性使用不带前缀的属性。</h1><p id="11cc" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">首先，假设您有一个<code class="fe kt ku kv kw b">.card</code>块，您想为子块、<code class="fe kt ku kv kw b">.button</code>和<code class="fe kt ku kv kw b">.quote</code>设置一个<code class="fe kt ku kv kw b">—-color</code>:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="5cb5" class="mi ky iy kw b gy mj mk l ml mm">.card {<br/>  --color: slateblue;<br/>  --card-color: var(--color);<br/>  border: 4px solid var(--card-color-primary);<br/>  box-shadow: 0 0 10px var(--card-color-primary);<br/>}</span><span id="06e6" class="mi ky iy kw b gy mo mk l ml mm">.button {<br/>  --button-color: var(--color, var(--root-color-primary));<br/>  background-color: rgba(255, 255, 255, .5);<br/>  border: 3px double var(--button-color);<br/>  color: var(--button-color);<br/>}</span><span id="b912" class="mi ky iy kw b gy mo mk l ml mm">.quote::before {<br/>  color: var(--color, var(--root-color));<br/>  content: '“';<br/>}</span></pre><p id="f245" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，<code class="fe kt ku kv kw b">.button</code>和<code class="fe kt ku kv kw b">.quote</code>都使用<code class="fe kt ku kv kw b">.card</code>定义的<code class="fe kt ku kv kw b">--color</code>。我们保留这些属性不加前缀，以表明任何块都可以设置或使用公共的、不加前缀的属性。</p><p id="a450" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">把你的公共财产和私人财产分开。例如，如果我们试图重构以去掉<code class="fe kt ku kv kw b">--button-color</code>:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="3eba" class="mi ky iy kw b gy mj mk l ml mm">.button {<br/>  background-color: rgba(255, 255, 255, .5);<br/>  border: 3px double var(--color, var(--root-color-primary));<br/>  color: var(--color, var(--root-color-primary));<br/>}</span><span id="3b9a" class="mi ky iy kw b gy mo mk l ml mm">// We can't do this anymore<br/>.button.-danger {<br/>  --button-color: brickred;<br/>}</span><span id="354d" class="mi ky iy kw b gy mo mk l ml mm">// Instead we have to override every place the color is used<br/>.button.-danger {<br/>  border-color: brickred;<br/>  color: brickred;<br/>}</span><span id="7d41" class="mi ky iy kw b gy mo mk l ml mm">// We can override over the original --color, but now we can't get<br/>// the original value of 'slateblue' at all.<br/>.button.-danger {<br/>  --color: brickred;<br/>}</span></pre><h1 id="3bc7" class="kx ky iy bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">5.保持一致。</h1><p id="9fc0" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">重用属性名。例如，定义所有三个<code class="fe kt ku kv kw b">--root-color</code>、<code class="fe kt ku kv kw b">--button-color</code>和<code class="fe kt ku kv kw b">--color</code>是非常好的。为不同的组件重用相同的公共属性意味着所有这些组件一起工作会更好。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="b57a" class="kx ky iy bd kz la mw lc ld le mx lg lh li my lk ll lm mz lo lp lq na ls lt lu bi translated">例子</h1><h2 id="ed7f" class="mi ky iy bd kz nb nc dn ld nd ne dp lh kg nf ng ll kk nh ni lp ko nj nk lt nl bi translated">为特定子块设置特性</h2><p id="663b" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">假设在<code class="fe kt ku kv kw b">.card</code>中，我们只想改变其中一个按钮的<code class="fe kt ku kv kw b">--color</code>。我们可以为特定元素设置公共属性:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="2bbe" class="mi ky iy kw b gy mj mk l ml mm">.card__action {<br/>  --color: yellowgreen;<br/>}</span></pre><h2 id="3fee" class="mi ky iy bd kz nb nc dn ld nd ne dp lh kg nf ng ll kk nh ni lp ko nj nk lt nl bi translated">恢复自定义属性</h2><p id="05d3" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">类似地，我们可以使用<code class="fe kt ku kv kw b">initial</code>将一个属性恢复到它的默认值:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="58c2" class="mi ky iy kw b gy mj mk l ml mm">// Applies to all elements<br/>.card {<br/>  --color: yellowgreen;<br/>}</span><span id="e424" class="mi ky iy kw b gy mo mk l ml mm">// But initial reverts card__action to its defaults<br/>.card__action {<br/>  --color: initial;<br/>}</span></pre><h2 id="2762" class="mi ky iy bd kz nb nc dn ld nd ne dp lh kg nf ng ll kk nh ni lp ko nj nk lt nl bi translated">更改子元素的公共属性值</h2><p id="e9bc" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">说<code class="fe kt ku kv kw b">.card</code>和<code class="fe kt ku kv kw b">.button</code>都用<code class="fe kt ku kv kw b">--color</code>。如果它们应该具有相同的值，就不需要做什么特别的事情；<code class="fe kt ku kv kw b">--color</code>的值将向下级联。但是，如果您希望子元素的<code class="fe kt ku kv kw b">--color</code>有不同的值，而不改变<code class="fe kt ku kv kw b">.card</code>的值，我们可以这样做:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="f3d9" class="mi ky iy kw b gy mj mk l ml mm">.card * {<br/>  --color: lime;<br/>}</span><span id="97a1" class="mi ky iy kw b gy mo mk l ml mm">// or if you want lower specificity:</span><span id="cdf7" class="mi ky iy kw b gy mo mk l ml mm">:where(.card *) {<br/>  --color: lime;<br/>}</span></pre><p id="223a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们也可以通过使用<code class="fe kt ku kv kw b">initial</code>为子元素完全取消设置<code class="fe kt ku kv kw b">--color</code>的值:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="7501" class="mi ky iy kw b gy mj mk l ml mm">// If specificity is an issue, target :where(.card *)<br/>.card * {<br/>  --color: initial;<br/>}</span><span id="5daf" class="mi ky iy kw b gy mo mk l ml mm">// or if you want lower specificity:</span><span id="69f6" class="mi ky iy kw b gy mo mk l ml mm">:where(.card *) {<br/>  --color: initial;<br/>}</span></pre><h2 id="3da1" class="mi ky iy bd kz nb nc dn ld nd ne dp lh kg nf ng ll kk nh ni lp ko nj nk lt nl bi translated">自定义属性与修饰符的优先级</h2><p id="3071" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">回到<code class="fe kt ku kv kw b">.button</code>的例子，我们有两种不同的方法让修改器与自定义属性交互:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="edec" class="mi ky iy kw b gy mj mk l ml mm">.button {<br/>  --button-color: var(--color, var(--root-color-primary));<br/>  background-color: rgba(255, 255, 255, .5);<br/>  border: 3px double var(--button-color);<br/>  color: var(--button-color);<br/>}</span><span id="0447" class="mi ky iy kw b gy mo mk l ml mm">.button.-danger {<br/>  --button-color: brickred;<br/>}</span><span id="484b" class="mi ky iy kw b gy mo mk l ml mm">.button.-bright {<br/>  --button-color: var(--color, gold);<br/>  border-width: 6px;<br/>}</span></pre><p id="bbba" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">.button.-danger</code>改变按钮颜色，并将完全忽略<code class="fe kt ku kv kw b">--color</code>的值。如果您正在实现亮暗模式，有时您可能希望覆盖一个自定义属性，以便无论如何都使用相同的颜色(砖红色)。</p><p id="18f4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">另一方面，<code class="fe kt ku kv kw b">.button.-bright</code>在改变默认颜色的同时仍然尊重<code class="fe kt ku kv kw b">--color</code>的值。我们可以使用<code class="fe kt ku kv kw b">-bright</code>,即使我们需要改变颜色，或者想要新的颜色(金色)用于亮模式，但是需要覆盖金色用于暗模式。</p><h2 id="31f9" class="mi ky iy bd kz nb nc dn ld nd ne dp lh kg nf ng ll kk nh ni lp ko nj nk lt nl bi translated">块元素的私有属性</h2><p id="246d" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">如果你需要的话，你可以给变量加上前缀<code class="fe kt ku kv kw b">blockName__elementName</code>，而不仅仅是一个<code class="fe kt ku kv kw b">blockName</code>:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="efc6" class="mi ky iy kw b gy mj mk l ml mm">.card__hero {<br/>  --card__hero-width: calc(50vw + 600px);  <br/>  width: var(--card__hero-width);<br/>}</span></pre><p id="ab00" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您像这样定义属性，您不能从<code class="fe kt ku kv kw b">.card</code>覆盖它们，除非您定义伴随的公共属性:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="a6f0" class="mi ky iy kw b gy mj mk l ml mm">.card.-thin {<br/>  --hero-width: 30vw;<br/>}</span><span id="e63a" class="mi ky iy kw b gy mo mk l ml mm">.card__hero {<br/>  --card__hero-width: var(--hero-width, calc(50vw + 600px));<br/>  width: var(--card__hero-width);<br/>}</span></pre><p id="12d4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果需要覆盖块中的属性，建议改为在块中设置这些私有属性:</p><pre class="ma mb mc md gt me kw mf mg aw mh bi"><span id="14ff" class="mi ky iy kw b gy mj mk l ml mm">.card {<br/>  --card-width-hero: calc(50vw + 600px);<br/>}</span><span id="76de" class="mi ky iy kw b gy mo mk l ml mm">.card.-thin {<br/>  --card-width-hero: 30vw;<br/>}</span><span id="340c" class="mi ky iy kw b gy mo mk l ml mm">.card__hero {<br/>  width: var(--card-width-hero);<br/>}  </span></pre><h1 id="5da1" class="kx ky iy bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">思想</h1><p id="00f0" class="pw-post-body-paragraph jv jw iy jx b jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ig bi translated">当你第一次采用自定义属性时，考虑采用这种约定——尝试跳过开发新功能的“狂野西部”阶段，考虑如何用 CSS 的其余部分组织自定义属性。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="d2a1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mn">本文最初发表在 Imarc 博客</em> <a class="ae nm" href="https://www.imarc.com/blog/block-property-modifier-a-bem-like-css-custom-properties-methodology" rel="noopener ugc nofollow" target="_blank"> <em class="mn">上(带有语法高亮)。</em>T13】</a></p></div></div>    
</body>
</html>