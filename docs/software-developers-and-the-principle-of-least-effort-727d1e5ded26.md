# 如何阻止开发人员创建遗留代码

> 原文：<https://blog.devgenius.io/software-developers-and-the-principle-of-least-effort-727d1e5ded26?source=collection_archive---------0----------------------->

## 软件开发人员和最省力原则

![](img/de9a00eb25d61010338fa28cff2b063a.png)

图片来自 [Pexels](https://www.pexels.com/photo/green-peapods-1437587/?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels) 的 [Lovefood Art](https://www.pexels.com/@lovefoodart?utm_content=attributionCopyText&utm_medium=referral&utm_source=pexels)

> 最小努力原则是一个广泛的理论，涵盖了从进化生物学到网页设计的不同领域。它假设动物、人，甚至设计良好的机器都会自然选择阻力最小或“省力”的路径——最省力的[原理](https://en.wikipedia.org/wiki/Principle_of_least_effort)

宇宙中充满了懒惰的生命形式，它们尽可能地保存能量。软件开发人员的目标是在交付满足需求的代码的同时尽可能地节约能源。

最省力或阻力最小的原则解释了为什么当你掉下一个苹果时，它会掉到地上，当开发人员修复一个 bug 时，它会使用符合最低标准的代码。

水找到阻力最小的路径，最容易下山。水不与障碍物搏斗，它用最少的力气顺利地绕过障碍物。开发人员将致力于使用他们最喜欢的工具和最简单的方法来交付需求，这并不总是最好的选择。

> 最小阻力路径是在一组备选路径中，对给定物体或实体的向前运动提供最小阻力的物理或隐喻路径。这个概念经常被用来描述为什么一个物体或实体采取给定的路径。水流动的方式经常被作为这个想法的例子。[阻力最小的路径](https://en.wikipedia.org/wiki/Path_of_least_resistance)

# **发展和阻力最小的道路**

理解开发人员应用最小阻力的路径，解释为什么技术债务会增加。[坏代码的暴政导致遗留代码的悲剧](https://thehosk.medium.com/the-tyranny-of-bad-code-leads-to-the-tragedy-of-legacy-code-2b91818aedd8)，遗留代码是由许多小的更新创造出来的，结合起来创造出遗留代码库。

没有一个代码更新创建了遗留代码，它是所有更新的组合。

[创建软件](/creating-software-is-the-start-not-the-end-795bc75b1f48)是初期投资，更大的成本是代码的维护和复杂度的增加([为什么代码复杂度很重要](/why-code-complexity-matters-435e2000e62d))。代码越复杂，与之交互的时间就越长。

错误修复、扩展和理解遗留代码比简单代码需要更多的时间。

开发人员使用阻力最小的路径，使用一种短期的方法，以最快最简单的方式创建代码，因为他们有动机这样做(测量每个 sprint 的故事点，修复的 bug，等等)。代码的简单性和维护(避免代码成为遗留代码)是长期目标，需要额外的初始努力。

低质量的代码侵蚀了代码库，并产生了没人有时间去修复的技术债务。

项目越大，错误越昂贵，[软件开发是失败者的游戏](https://thehosk.medium.com/software-development-is-a-losers-game-fc68bb30d7eb)，更快的开发是通过创造质量而不是更快地创造代码来实现的。

# **拿着锤子的显影剂**

对一个拿着锤子的人来说，每个问题看起来都像钉子。

对于精通代码或某种工具的开发人员来说，每个问题看起来都像是他们可以用自己喜欢的解决方案解决的问题。

开发人员使用他们最熟悉的工具，但这些工具并不总是问题的最佳解决方案。我见过许多开发人员编写代码的例子，这可以很容易地手工完成或使用业务流程。开发者喜欢写代码:-)

在 Dynamics 365 中，C#开发人员的第一选择是创建插件，因为他们喜欢编写 C#，而且做起来很舒服。开发人员避免使用不熟悉的工具，因为这对他们来说更难。

开发人员应该继续学习，适应新特性、新工具和开箱即用的功能。对开发人员来说，最大的危险是他们停止学习，不能更新他们的技能和知识来反映他们工作环境的变化。你需要了解所有的工具，这样你才能确定何时使用它们。

# **战斗阻力**

为了对抗阻力最小的道路，创造一种优秀的文化，这样每个人都知道对他们的期望是什么。结合以下工具的文化管理质量。

*   标准
*   最佳实践
*   代码审查
*   完成的定义
*   自动化

这些活动保持高质量，防止复杂性和代码基础的侵蚀。这些都是由高级开发人员领导的，他们在保持高质量和为什么有经验的开发人员物有所值方面发挥了关键作用

# **标准和最佳实践**

标准不是给开发人员看一次就忘记的文档。将标准与代码评审结合使用。你的标准是最低期望质量。

最佳实践的工作方式类似，指导开发人员写出最好的代码，而不是最快的。

# **代码评审**

代码评审指导开发人员并保持高质量。代码评审就像夜总会的保镖，阻止不良代码进入源代码控制夜总会。如果开发人员知道他们的代码将被审查，质量差的代码不会被提交，因为开发人员知道它将被拒绝，他们将不得不修复它。

没有代码审查会给低质量的代码签入源代码控制提供机会

# **自动化**

如果可以自动化，那么就应该自动化，尤其是部署。手动部署令人厌烦且容易出错，创建发布管道需要更多的初始工作，但您可以获得更快、更少出错的发布的长期好处。开发人员可以避免设置发布管道并进行手动部署，因为他们需要更少的初始工作。

# **完成的定义**

软件开发不仅仅是写代码，还有其他步骤，如数据、文档、单元测试和使代码可部署。开发人员将做最少量的测试，例如快乐路径— [不要只测试快乐路径](/dont-just-test-the-happy-path-e3fd565bad53)。定义开发人员完成一项工作需要完成的所有步骤。

# **结论**

对于开发人员来说，采取最简单快捷的方式来完成他们的工作更有效率，这个问题的根本原因是开发人员是以软件创造的短期标准来衡量的。

短期快速修复的负面影响是它会产生技术债务和遗留代码库。所有的交互都需要更长的时间，但是到那时开发者可能已经离开了项目或者公司。

为了阻止代码库的退化，采取措施来保持高质量。

> 解决技术债务最有效的方法是避免把它放进去。

阅读解释软件开发的引言，大多数人都致力于保持代码的简单、易管理和高质量。假设所有的开发人员都是懒惰的(包括你自己),并加入捕捉懒惰代码的步骤。不要只注意懒惰，还要注意愚蠢——[开发人员愚蠢的 10 个普遍法则](/the-10-universal-laws-of-developer-stupidity-ccda23e91ee7)。