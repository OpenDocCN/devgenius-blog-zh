<html>
<head>
<title>Add Radar Charts into Our React App with the Visx Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Visx库将雷达图添加到React应用程序中</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/add-radar-charts-into-our-react-app-with-the-visx-library-f4a414e91c33?source=collection_archive---------6-----------------------#2021-04-08">https://blog.devgenius.io/add-radar-charts-into-our-react-app-with-the-visx-library-f4a414e91c33?source=collection_archive---------6-----------------------#2021-04-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a1581ef51a750b82da693e851de2712e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8EQkvgyRFdmoNFXr"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">汉斯·维维克在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="52e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Visx是一个库，让我们可以轻松地将图形添加到React应用程序中。</p><p id="ee07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用它将雷达图添加到React应用程序中。</p><h1 id="396e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装所需的软件包</h1><p id="2968" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们必须安装一些模块。</p><p id="61e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="89df" class="mn lc iq mj b gy mo mp l mq mr">npm i @visx/group @visx/mock-data @visx/responsive @visx/point @visx/scale @visx/shape</span></pre><p id="8e2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装软件包。</p><h1 id="4bff" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">雷达图</h1><p id="d493" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了创建雷达图，我们写下:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="cda4" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { Group } from "@visx/group";<br/>import letterFrequency from "@visx/mock-data/lib/mocks/letterFrequency";<br/>import { scaleLinear } from "@visx/scale";<br/>import { Point } from "@visx/point";<br/>import { Line, LineRadial } from "@visx/shape";</span><span id="f85b" class="mn lc iq mj b gy ms mp l mq mr">const orange = "#ff9933";<br/>const pumpkin = "#f5810c";<br/>const silver = "#d9d9d9";<br/>const background = "#FAF7E9";</span><span id="aca1" class="mn lc iq mj b gy ms mp l mq mr">const degrees = 360;<br/>const data = letterFrequency.slice(2, 12);</span><span id="279f" class="mn lc iq mj b gy ms mp l mq mr">const y = (d) =&gt; d.frequency;</span><span id="d7c0" class="mn lc iq mj b gy ms mp l mq mr">const genAngles = (length) =&gt;<br/>  [...new Array(length + 1)].map((_, i) =&gt; ({<br/>    angle: i * (degrees / length)<br/>  }));</span><span id="1efc" class="mn lc iq mj b gy ms mp l mq mr">const genPoints = (length, radius) =&gt; {<br/>  const step = (Math.PI * 2) / length;<br/>  return [...new Array(length)].map((_, i) =&gt; ({<br/>    x: radius * Math.sin(i * step),<br/>    y: radius * Math.cos(i * step)<br/>  }));<br/>};</span><span id="d223" class="mn lc iq mj b gy ms mp l mq mr">function genPolygonPoints(dataArray, scale, getValue) {<br/>  const step = (Math.PI * 2) / dataArray.length;<br/>  const points = new Array(dataArray.length).fill({<br/>    x: 0,<br/>    y: 0<br/>  });<br/>  const pointString = new Array(dataArray.length + 1)<br/>    .fill("")<br/>    .reduce((res, _, i) =&gt; {<br/>      if (i &gt; dataArray.length) return res;<br/>      const xVal = scale(getValue(dataArray[i - 1])) * Math.sin(i * step);<br/>      const yVal = scale(getValue(dataArray[i - 1])) * Math.cos(i * step);<br/>      points[i - 1] = { x: xVal, y: yVal };<br/>      res += `${xVal},${yVal} `;<br/>      return res;<br/>    });</span><span id="47c2" class="mn lc iq mj b gy ms mp l mq mr">  return { points, pointString };<br/>}</span><span id="1458" class="mn lc iq mj b gy ms mp l mq mr">const defaultMargin = { top: 40, left: 80, right: 80, bottom: 80 };</span><span id="9131" class="mn lc iq mj b gy ms mp l mq mr">function Example({ width, height, levels = 5, margin = defaultMargin }) {<br/>  const xMax = width - margin.left - margin.right;<br/>  const yMax = height - margin.top - margin.bottom;<br/>  const radius = Math.min(xMax, yMax) / 2;</span><span id="a272" class="mn lc iq mj b gy ms mp l mq mr">const radialScale = scaleLinear({<br/>    range: [0, Math.PI * 2],<br/>    domain: [degrees, 0]<br/>  });</span><span id="7565" class="mn lc iq mj b gy ms mp l mq mr">const yScale = scaleLinear({<br/>    range: [0, radius],<br/>    domain: [0, Math.max(...data.map(y))]<br/>  });</span><span id="a30f" class="mn lc iq mj b gy ms mp l mq mr">const webs = genAngles(data.length);<br/>  const points = genPoints(data.length, radius);<br/>  const polygonPoints = genPolygonPoints(data, (d) =&gt; yScale(d) ?? 0, y);<br/>  const zeroPoint = new Point({ x: 0, y: 0 });</span><span id="5995" class="mn lc iq mj b gy ms mp l mq mr">  return width &lt; 10 ? null : (<br/>    &lt;svg width={width} height={height}&gt;<br/>      &lt;rect fill={background} width={width} height={height} rx={14} /&gt;<br/>      &lt;Group top={height / 2 - margin.top} left={width / 2}&gt;<br/>        {[...new Array(levels)].map((_, i) =&gt; (<br/>          &lt;LineRadial<br/>            key={`web-${i}`}<br/>            data={webs}<br/>            angle={(d) =&gt; radialScale(d.angle) ?? 0}<br/>            radius={((i + 1) * radius) / levels}<br/>            fill="none"<br/>            stroke={silver}<br/>            strokeWidth={2}<br/>            strokeOpacity={0.8}<br/>            strokeLinecap="round"<br/>          /&gt;<br/>        ))}<br/>        {[...new Array(data.length)].map((_, i) =&gt; (<br/>          &lt;Line<br/>            key={`radar-line-${i}`}<br/>            from={zeroPoint}<br/>            to={points[i]}<br/>            stroke={silver}<br/>          /&gt;<br/>        ))}<br/>        &lt;polygon<br/>          points={polygonPoints.pointString}<br/>          fill={orange}<br/>          fillOpacity={0.3}<br/>          stroke={orange}<br/>          strokeWidth={1}<br/>        /&gt;<br/>        {polygonPoints.points.map((point, i) =&gt; (<br/>          &lt;circle<br/>            key={`radar-point-${i}`}<br/>            cx={point.x}<br/>            cy={point.y}<br/>            r={4}<br/>            fill={pumpkin}<br/>          /&gt;<br/>        ))}<br/>      &lt;/Group&gt;<br/>    &lt;/svg&gt;<br/>  );<br/>}</span><span id="f961" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Example width={500} height={300} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="647e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用图表的颜色作为值来定义变量。</p><p id="4292" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">degrees</code>有雷达图的度数。</p><p id="0854" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">data</code>有图表的数据。</p><p id="d258" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">y</code>是一个让我们得到y轴值的getter。</p><p id="e70c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">genAngles</code>让我们为图表创建角度，<code class="fe mt mu mv mj b">genPoints</code>创建点。</p><p id="6e8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">genPolygonPoints</code>生成雷达图的点数。</p><p id="ac89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，为了创建雷达图，我们添加了<code class="fe mt mu mv mj b">LineRadial</code>组件来为雷达图添加web。</p><p id="0f22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe mt mu mv mj b">radialScale</code>函数中得到角度。</p><p id="afe7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">radius</code>是从<code class="fe mt mu mv mj b">radius</code>道具计算出来的。</p><p id="3f16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<code class="fe mt mu mv mj b">Line</code>组件创建图形的线段。</p><p id="c36f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">polygon</code>让我们为雷达图创建多边形填充。</p><p id="fd50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">polygonPoints.map</code>回调中的<code class="fe mt mu mv mj b">circle</code>创建位于角度的点。</p><h1 id="4269" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="f58c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过Visx库轻松地将雷达图添加到React应用程序中。</p></div></div>    
</body>
</html>