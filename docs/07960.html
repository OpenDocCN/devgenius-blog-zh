<html>
<head>
<title>Creating a diversified stock portfolio using unsupervised learning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用无监督学习创建多样化的股票投资组合</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-a-diversified-stock-portfolio-using-clustering-analysis-aae5af284b1f?source=collection_archive---------7-----------------------#2022-05-06">https://blog.devgenius.io/creating-a-diversified-stock-portfolio-using-clustering-analysis-aae5af284b1f?source=collection_archive---------7-----------------------#2022-05-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="61a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">关于<br/> </strong>在本文中，我展示了对标准普尔 500 指数的历史每日价格变化数据进行聚类分析的结果，以创建一个多样化的股票投资组合，并根据指数对其表现进行回溯测试。为此我使用了<a class="ae ki" href="https://www.kaggle.com/datasets/andrewmvd/sp-500-stocks?select=sp500_companies.csv" rel="noopener ugc nofollow" target="_blank"> S &amp; P500 指数数据</a>。我试图使用基于欧几里德距离的 K-均值聚类来理解影响股票表现的不同参数的效果。</p><p id="9c5a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以在这里找到分析和代码的详细摘要:<a class="ae ki" href="https://github.com/karthikramx/Diversified-Stock-Portfolio-Using-Clustering-Analysis" rel="noopener ugc nofollow" target="_blank">https://github . com/karthikramx/Diversified-Stock-Portfolio-Using-Clustering-Analysis</a></p><p id="889f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">项目详情<br/> </strong>为了执行聚类，使用根据历史价格变动计算的财务比率<br/>创建特征向量。以下特征是根据标准普尔 500 指数中所有股票的 10 年每日历史数据计算出来的</p><ul class=""><li id="16d1" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated">与 SP500 指数值的相关性</li><li id="21db" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">具有 SP500 指数值的贝塔</li><li id="b6b9" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">年股本回报率(每日回报率)</li><li id="123e" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">股权年化波动率(每日回报)</li><li id="ac6e" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">夏普比率</li><li id="d059" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">价格的每日变化</li><li id="1b9b" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">价格的每日变化</li></ul><p id="9cec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">可以包括更多的时间序列财务数据/比率，以改进聚类过程</p><h2 id="ab28" class="kx ky in bd kz la lb dn lc ld le dp lf jv lg lh li jz lj lk ll kd lm ln lo lp bi translated">利用相关图探索帧内特征相关矩阵</h2><p id="cc76" class="pw-post-body-paragraph jk jl in jm b jn lq jp jq jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh ig bi translated">下面的图显示了根据特征向量的相关矩阵绘制的相关图。除了年化波动率和年化每日变化(基本上是每日数据中低价格和高价格变化的年化平均值)之外，大多数变量都不是强相关的</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lv"><img src="../Images/3afbe105ecc77e22e0d7d5a9bc166629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qbUNMPR7OIucb7A6"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">特征向量的集合程序</figcaption></figure><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi lv"><img src="../Images/05f2d508402111b6d348ace8c370fca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uKJkiqNG8REjI7TS"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">特征向量的集合程序值</figcaption></figure><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi ml"><img src="../Images/4e0db1c499e765dac5231a341dbff2aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y50E6CNlGSeETVpF_qLCFg.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">为聚类准备的数据框的快照</figcaption></figure><h2 id="ff3f" class="kx ky in bd kz la lb dn lc ld le dp lf jv lg lh li jz lj lk ll kd lm ln lo lp bi translated"><strong class="ak"> K 均值聚类</strong></h2><p id="7360" class="pw-post-body-paragraph jk jl in jm b jn lq jp jq jr lr jt ju jv ls jx jy jz lt kb kc kd lu kf kg kh ig bi translated">下面的结果描述了使用碎石图选择 K 值的最佳值，以及在选择 K=4 后形成的簇凸。股票符号用于表示其在分类中的相对位置。</p><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mm"><img src="../Images/7cb9c0a77fdd07210bb5cddaffa01245.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9SJRgWFoWZMKiogL.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">碎石/弯头图。显然，肘形是在 K = 4 时形成的</figcaption></figure><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mm"><img src="../Images/672e2e867b5944886ecd5dbaa8135594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1KHOki-kVDNM_Kop.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">k-均值聚类减少到二维空间可视化</figcaption></figure><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mn"><img src="../Images/e7016e52e3a42bd02020b44111ba469c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*k2VORACOABXPHVA3.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">集群年化回报率与年化波动率</figcaption></figure><p id="6c0a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从上面的图中，我们观察到关于四个集群的重要信息:</p><ol class=""><li id="22d8" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh mo kp kq kr bi translated"><strong class="jm io">聚类 4 </strong>在市场中表现最佳，但由于某些异常值而表现不一，可视为<strong class="jm io">高回报低波动的股票</strong></li><li id="8c92" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh mo kp kq kr bi translated"><strong class="jm io">聚类 1 </strong>具有较低的波动性，但也具有较低的收益。与集群 3 相比，该集群更加稳定，回报和风险相当。然而，与集群 2 相比，它们在相同或更低的波动性下提供的总体回报更低。该集群中的股票具有<strong class="jm io">低回报&amp;低波动</strong></li><li id="0752" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh mo kp kq kr bi translated"><strong class="jm io">第 2 类</strong>表示<strong class="jm io">高风险低回报</strong>这让那些想要在市场上赚点钱的投资者望而却步。</li><li id="42e9" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh mo kp kq kr bi translated"><strong class="jm io">集群 3 </strong>的平均年化收益&amp;波动性最高。这个集群下的股票是<strong class="jm io">高风险、高回报的股票</strong>。</li></ol><p id="1adc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">回溯测试结果<br/> </strong>为了验证使用聚类创建多样化投资组合的过程，我们对测试/验证数据进行了回溯测试。</p><p id="fd0e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你想了解更多关于回溯测试策略的知识，你可以访问这篇深入探究 python 框架的文章:<a class="ae ki" href="https://medium.com/p/3a136be16ece" rel="noopener">https://medium.com/p/3a136be16ece</a></p><p id="88f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您还可以在这里了解更多关于用 python 对股票组合进行回溯测试的信息:<a class="ae ki" rel="noopener ugc nofollow" target="_blank" href="/algorithmic-trading-backtesting-portfolio-of-stocks-in-python-9be75ce9f232">https://blog . dev genius . io/algorithm-trading-back testing-portfolio-of-stocks-in-python-9be 75 ce 9 f 232</a></p><p id="3015" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对前 7 年的数据进行聚类，然后使用剩余 3 年的数据来验证我们投资组合的结果。为此，创建了包含 20 只股票的两个投资组合</p><ol class=""><li id="a311" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh mo kp kq kr bi translated">使用每个聚类中的前五只股票(根据夏普比率)创建的投资组合—[红色]</li><li id="0e8b" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh mo kp kq kr bi translated">根据 7 年历史表现的夏普比率，使用所有 500 只股票中的前 20 只股票创建的投资组合— [ORANGE]</li></ol><p id="f6f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">K-Means 组合有以下股票:</strong> <br/> ABMD、AMZN、ALGN、AVGO、NFLX、BRK-B、DG、O、GOOGL、PFE、DPZ、TDG、CTAS、HD、JKHY、CMG、COP、CF、KIM、VTR</p><p id="2091" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">K-Means 投资组合拥有以下行业的股票:基础材料、通信服务、消费周期、消费防御、能源、金融服务、医疗保健、工业、房地产和技术。</p><ul class=""><li id="67e3" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated">我们看到，由夏普比率最高的股票组成的橙色投资组合跑赢了 S&amp;P500 指数。使用 k 均值聚类(红线)形成的投资组合具有更好的表现。</li><li id="ac5f" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">这表明 K-均值聚类成功地创建了一个多样化的投资组合，在聚类过程中提到的所有特征，不仅跑赢了标准普尔 500 指数，而且还收集了历史表现最好的股票。</li><li id="ca10" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">回溯测试结果表明，在新冠肺炎期间，k-means 投资组合与指数相关，并且比橙色指数恢复得更慢。然而，由于投资组合高度多样化，k- means 投资组合的长期表现远远好于 orange 投资组合</li></ul><figure class="lw lx ly lz gt ma gh gi paragraph-image"><div role="button" tabindex="0" class="mb mc di md bf me"><div class="gh gi mp"><img src="../Images/ce8868243fd6b4d8399bbbb14d68291d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EcchZ601gwT_cjAh.png"/></div></div></figure><p id="aec1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">最终观察结果</strong></p><ul class=""><li id="eb0d" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated">聚类可以用来创建多样化的投资组合。</li><li id="d2dd" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">使用每个聚类中的前 5 只股票创建的投资组合表现优于指数，为了验证这一点，我们根据夏普比率对照前 20 只历史股票检查了其表现</li><li id="1a04" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">可以包括更多的时间序列财务数据/比率，以改进聚类过程</li></ul><p id="2d31" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">改进/未来范围</strong></p><ul class=""><li id="c4bc" class="kj kk in jm b jn jo jr js jv kl jz km kd kn kh ko kp kq kr bi translated">这项研究可以应用于所有交易所和国家的上市公司。</li><li id="f64b" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">仅在美国就有大约 2000 只上市股票</li><li id="32d8" class="kj kk in jm b jn ks jr kt jv ku jz kv kd kw kh ko kp kq kr bi translated">全球大约有 41000 家上市公司，总市值超过 80 万亿美元</li></ul></div></div>    
</body>
</html>