<html>
<head>
<title>Make a grid-based game with Unity: dev-log day 7</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Unity制作一个基于网格的游戏:开发日志第7天</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/make-a-grid-based-game-with-unity-dev-log-day-7-cc1067976e5c?source=collection_archive---------7-----------------------#2021-01-10">https://blog.devgenius.io/make-a-grid-based-game-with-unity-dev-log-day-7-cc1067976e5c?source=collection_archive---------7-----------------------#2021-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1c80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">升级我们的电网发电系统，使其更加稳定，并接受更多选择。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/cb144ebe056248f6318193913967a86d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cv3UMqjPfKxJo1ZIL6zWFA.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">多层，有任意数量的楼梯</figcaption></figure><h1 id="2923" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">目标</h1><p id="2a8d" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">今天我要解决几个问题。</p><p id="0797" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的网格生成器接收一个包含单个字符串矩阵的文本文件。</p><p id="142f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我的每个关卡都是迭代生成的。</p><p id="2433" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这两种行为对我的创作过程造成了一些限制，因为我只能使用大约50个单个角色，所以这将我的整个游戏限制在大约50张牌。我相信最终游戏会有超过50张牌。</p><p id="a6b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第二，单个字符约束与迭代网格生成相结合，使我无法使用最简单的解决方案为图块添加某些功能，如缠结。</p><p id="26e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，说我想在一个单一的水平多个楼下。在我看来，解决这个问题最简单的方法是在tile上应用一些类名和标识符。</p><p id="4404" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们知道每个楼下都有通往楼上的出口，但最简单的方法是对有问题的楼梯应用匹配的代码。这样，相互关联的上下瓦片将隐式地“纠缠”在一起，而不需要我在网格生成期间做任何额外的逻辑。</p><p id="e8f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，当我创建一个关卡时，我说这个关卡有一个“向下”的瓷砖，并附加了代码“6”我可以用一个附加了代码“6”的“向上”瓷砖创建另一个级别</p><p id="9039" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我可以按照我希望的任何方式生成这些级别，但是这种纠缠是隐式的，因为当我与“向下”的瓷砖进行交互时，我可以简单地解析瓷砖的名称，检索代码，并查询GameObject哈希以获得具有相同代码的“向上”瓷砖。</p><p id="07f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将允许我对我的世界设计进行荒谬的创新。它将允许我在任何给定的水平上有许多起伏，它们可以去我想去的任何地方，包括相同的水平。我甚至可以创建忽略欧几里德定律的转换。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="3234" class="ml lc iq bd ld mm mn dn lh mo mp dp ll jy mq mr lp kc ms mt lt kg mu mv lx mw bi translated">把我的关卡文件做成JSON</h2><p id="be69" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">为了实现我上面所描述的，最直接的方法是将我的floor文件转换成JSON文件，而不是文本。然后，每个级别将显示为如下所示的显式矩阵:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/b9345d38bf3f56c6c32d57a6f329910c.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*Oa8koMRF4iVPZFT-mphPuw.jpeg"/></div></figure><p id="9d78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将把每块瓷砖都表示为长度为4的字母数字字符串。这将给我大约1874161种不同的可能组合，对于这个游戏的范围来说已经足够了。</p><p id="b826" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这也将为我节省几行代码，因为现在我有一个函数可以解析不再需要的文本文件。</p><p id="426f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果是:我可以有任意数量的楼上和楼下，他们可以去我选择的任何地方。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="5c09" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae na" href="https://www.patreon.com/taylorcoon" rel="noopener ugc nofollow" target="_blank">https://www.patreon.com/taylorcoon</a></p></div></div>    
</body>
</html>