<html>
<head>
<title>Laravel How to Pass a PHP Variable to JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将一个 PHP 变量传递给 JavaScript</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/laravel-how-to-pass-a-php-variable-to-javascript-ee7b17265b6d?source=collection_archive---------1-----------------------#2022-09-15">https://blog.devgenius.io/laravel-how-to-pass-a-php-variable-to-javascript-ee7b17265b6d?source=collection_archive---------1-----------------------#2022-09-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7112" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">将 PHP 变量转换为 JavaScript</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/484ad49baf99aee4d6c6aeada3706c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vlbdSSaJDdT6F-X2"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">由<a class="ae kv" href="https://unsplash.com/@kobuagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> KOBU 机构</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5a7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在 Laravel 中，我们使用<code class="fe ls lt lu lv b">view</code>助手将数据传递给刀片视图。</p><h2 id="aed4" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">将数据传递给视图</h2><p id="f57c" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">在应用程序路由中，第二个参数用于将数据传递给视图。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="633f" class="lw lx iq lv b gy my mz l na nb">Route::get('/', function () {<br/>    return view('welcome', ['name' =&gt; 'James']);<br/>});</span></pre><p id="294c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在控制器中，视图助手也用于传递数据。</p><p id="c420" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“点”符号可用于引用嵌套视图。以下权限，数据将在<code class="fe ls lt lu lv b">resources/views/admin/permission/show.blade.php</code>呈现</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="e714" class="lw lx iq lv b gy my mz l na nb">public function show(Permission $permission)<br/>{<br/>    return view('admin.permission.show', compact('permission'));<br/>}</span></pre><div class="nc nd gp gr ne nf"><a rel="noopener  ugc nofollow" target="_blank" href="/dont-do-this-mistake-in-the-laravel-collection-8abdd519f01b"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">不要在 Laravel 系列中犯这个错误</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">避免在 Laravel 集合中使用 empty 函数</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">blog.devgenius.io</p></div></div><div class="no l"><div class="np l nq nr ns no nt kp nf"/></div></div></a></div><h2 id="36ba" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">将 PHP 变量传递给 JavaScript</h2><p id="acbf" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">但是在某些情况下，您希望将一些服务器端的 var 传递给 JavaScript。例如，需要一些分析值。我们可以通过使用<a class="ae kv" href="https://github.com/laracasts/PHP-Vars-To-Js-Transformer" rel="noopener ugc nofollow" target="_blank">Transform PHP Vars to JavaScript</a>包来传递变量。此外，我们可以不使用这个软件包。</p><ul class=""><li id="2826" class="nu nv iq ky b kz la lc ld lf nw lj nx ln ny lr nz oa ob oc bi translated">1.使用 JSON 呈现</li><li id="da43" class="nu nv iq ky b kz od lc oe lf of lj og ln oh lr nz oa ob oc bi translated">2.使用将 PHP 变量转换为 JavaScript 包</li></ul><h2 id="1e96" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">1.不带包:使用 JSON 渲染</h2><p id="6bd6" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">在 Laravel <a class="ae kv" href="https://laravel.com/docs/9.x/blade#rendering-json" rel="noopener ugc nofollow" target="_blank">中，渲染 JSON </a>将用于初始化一个 JavaScript 变量。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="dce2" class="lw lx iq lv b gy my mz l na nb">&lt;script&gt;<br/>    var app = {{ Js::from($array) }};<br/>&lt;/script&gt;</span></pre><h2 id="9180" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">例子</h2><p id="134c" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">现在，在应用程序路由中添加数组数据。我们需要将这个 page_data 数组用作 JavaScript。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="a280" class="lw lx iq lv b gy my mz l na nb">Route::get('/', function () {<br/>    return view('welcome', ['page_data' =&gt; [<br/>        'title' =&gt; 'Home',<br/>        'price' =&gt; 20<br/>    ]]);<br/>});</span></pre><p id="a157" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在欢迎视图中添加下面的 Js::from</p><p id="9306" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">resources/views/welcome.blade.php</code></p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="a9e1" class="lw lx iq lv b gy my mz l na nb">&lt;script&gt;<br/>    var page_data = {{ Js::from($page_data) }};<br/>&lt;/script&gt;</span></pre><p id="0931" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">打开浏览器并在控制台中检查 page_data。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/75082d1e38ff1426b98aea61535be0af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1bzPvrVKQOPFcSxnc_h1qQ.png"/></div></div></figure></div><div class="ab cl oj ok hu ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt nf"><a rel="noopener  ugc nofollow" target="_blank" href="/stop-using-datetime-in-php-66df3d731875"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd ir gy z fp nk fr fs nl fu fw ip bi translated">停止在 PHP 中使用日期时间</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">PHP 中为什么需要使用不可变的 DateTime？</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">blog.devgenius.io</p></div></div><div class="no l"><div class="oq l nq nr ns no nt kp nf"/></div></div></a></div></div><div class="ab cl oj ok hu ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="ij ik il im in"><h2 id="5a57" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">2.使用将 PHP 变量转换为 JavaScript 包</h2><p id="0fad" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">通过 Composer 安装软件包</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="5370" class="lw lx iq lv b gy my mz l na nb">composer require laracasts/utilities</span></pre><p id="4cd4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将包添加到提供程序</p><p id="ba64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">config/app.php</code></p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="9b50" class="lw lx iq lv b gy my mz l na nb">'providers' =&gt; [<br/>    '...',<br/>    Laracasts\Utilities\JavaScript\JavaScriptServiceProvider::class,<br/>];</span></pre><p id="2247" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建 HomeController 并调用欢迎视图</p><p id="4b72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">app/Http/Controllers/HomeController.php</code></p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="31ed" class="lw lx iq lv b gy my mz l na nb">&lt;?php</span><span id="61df" class="lw lx iq lv b gy or mz l na nb">namespace App\Http\Controllers;</span><span id="4782" class="lw lx iq lv b gy or mz l na nb">use App\Http\Controllers\Controller;<br/>use JavaScript;</span><span id="6362" class="lw lx iq lv b gy or mz l na nb">class HomeController extends Controller<br/>{<br/>    public function index()<br/>    {<br/>        JavaScript::put([<br/>            'title' =&gt; 'Home',<br/>            'price' =&gt; 20<br/>        ]);</span><span id="f6d0" class="lw lx iq lv b gy or mz l na nb">        return view('welcome');<br/>    }<br/>}</span></pre><p id="af66" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，更新 routes/web.php 以调用 HomeController</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="dcc0" class="lw lx iq lv b gy my mz l na nb">Route::get('/', [HomeController::class, 'index']);</span></pre><p id="dbc3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，这个包将您的 JavaScript 变量绑定到一个“页脚”视图。因此，创建空的页脚刀片文件，并将其包含在欢迎视图中</p><p id="78b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">resources/views/footer.blade.php</code></p><p id="6892" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过发布默认配置来更改页脚视图。然后更新<code class="fe ls lt lu lv b">config/javascript.php</code>文件上的‘bind _ js _ vars _ to _ this _ view’配置值。</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="bac0" class="lw lx iq lv b gy my mz l na nb">php artisan vendor:publish --provider="Laracasts\Utilities\JavaScript\JavaScriptServiceProvider"</span></pre><p id="8a81" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ls lt lu lv b">resources/views/welcome.blade.php</code></p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="38fd" class="lw lx iq lv b gy my mz l na nb">&lt;body class="antialiased"&gt;</span><span id="6eaa" class="lw lx iq lv b gy or mz l na nb">@include ('footer') // &lt;-- Variables prepended to this view<br/>&lt;/body&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/a401b78c65b7eab7fdedbfb6e68cee0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*puaEl3eL6Qq1XFlJhJsLRA.png"/></div></div></figure><p id="6971" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在标题和价格在窗口对象上是可用的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/32043135d908bc1a8e083164f92c7562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*skYdO1kCRbLOOle6k7kDMA.png"/></div></div></figure></div><div class="ab cl oj ok hu ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="ij ik il im in"><h2 id="3f98" class="lw lx iq bd ly lz ma dn mb mc md dp me lf mf mg mh lj mi mj mk ln ml mm mn mo bi translated">结论</h2><p id="c99e" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">如果大多数页面上的 JavaScript 都需要 PHP 变量，则使用<a class="ae kv" href="https://github.com/laracasts/PHP-Vars-To-Js-Transformer" rel="noopener ugc nofollow" target="_blank">Transform PHP Vars to JavaScript</a>包。如果你需要一两个页面，使用 Laravel <a class="ae kv" href="https://laravel.com/docs/9.x/blade#rendering-json" rel="noopener ugc nofollow" target="_blank">渲染 JSON </a>方法。</p></div><div class="ab cl oj ok hu ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="ij ik il im in"><p id="dcfa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你知道任何其他替代方法，请在评论中分享。</p><p id="9b26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读。</p><p id="f45d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">敬请关注更多内容！</p><p id="909c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">【balajidharma.medium.com】跟我来<a class="ae kv" href="https://balajidharma.medium.com/" rel="noopener"><strong class="ky ir"><em class="ou"/></strong></a>。</p></div></div>    
</body>
</html>