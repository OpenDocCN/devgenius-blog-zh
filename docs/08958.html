<html>
<head>
<title>Introduction and Quick Start to Apache Kafka!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Kafka 简介和快速入门！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/introduction-and-quick-start-to-apache-kafka-50a20f1e8fb2?source=collection_archive---------16-----------------------#2022-07-20">https://blog.devgenius.io/introduction-and-quick-start-to-apache-kafka-50a20f1e8fb2?source=collection_archive---------16-----------------------#2022-07-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="b828" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">问候！如果你想第一次接触 Apache Kafka，你来对地方了！本文将带您完成 Kafka 的基本安装和一个使用 Kafka 的流数据的小 Python 演示！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/05b647ab99cdd539a2cc67a085d54402.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*5j7ByH6ifZg-1zEz.jpg"/></div></figure><p id="29df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">简介</strong></p><p id="92ab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Apache Kafka 是一个分布式事件存储和流处理平台，能够实时接收和处理大量数据。Kafka 旨在处理来自多个来源的同步数据流，并以高吞吐量、高可扩展性、低延迟和高容错能力将它们交付给多个消费者。</p><p id="86b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">可以把卡夫卡想象成一个高度可靠的中间人，他能够将数十亿条信息从发件人那里几乎瞬间传递给他们想要的收件人。</p><p id="b8e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">为什么阿帕奇卡夫卡如此重要？</strong></p><p id="4f45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在大数据时代，公司配备实时流数据管道至关重要，这使他们能够对收集的大量数据进行处理和及时的数据分析。这些管道必须快速、可靠且具有容错能力，以便不会遗漏关键任务数据。</p><p id="9554" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Apache Kafka 提供了上述以及更多功能，允许公司迅速做出关键业务决策。</p><p id="d622" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">阿帕奇卡夫卡的突出用途</strong></p><p id="c450" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Apache Kafka 由于其通用性和可伸缩性而被许多公司使用。知名公司的一些比较突出的使用案例是:</p><ol class=""><li id="8985" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated"><strong class="jm io">《纽约时报》</strong>使用 Apache Kafka 和 Kafka Streams API 向不同平台的读者实时发布内容。</li><li id="55aa" class="kq kr in jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated"><strong class="jm io"> Paypal </strong>使用 Kafka 对来自用户行为跟踪、商户监控以及风险和合规性分析的事件、日志和指标进行实时流处理和批处理。</li><li id="dca5" class="kq kr in jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated"><strong class="jm io"> CloudFlare </strong>使用 Kafka 进行日志处理和分析管道，每天从全球数千台服务器收集数十亿个事件。</li></ol></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><p id="cec0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">架构概述</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ll"><img src="../Images/2fe89948e3f1b0286c37297769892cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZLzTVEfdkEX-sYRSXNu6xg.png"/></div></div></figure><p id="6674" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">卡夫卡体系有四个主要组成部分:</p><ol class=""><li id="01fc" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated">动物园管理员</li></ol><p id="fb1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ZooKeeper 维护集群(代理、主题、用户)的状态和配置。ZooKeeper 还支持在跨代理的分区中选择代理领导者和副本。这确保了在代理失败时的容错能力。</p><p id="6c8a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2。经纪人</strong></p><p id="f75f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代理处理来自客户端(生产者/消费者)的所有请求，并确保集群内的数据复制。在每个代理中，可以有多个主题，每个主题都有多个分区来存储称为偏移的记录。</p><p id="4782" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3。制片人</strong></p><p id="95b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">生产者向集群发送记录，这些记录由代理接收并附加到生产者指定的特定分区。</p><p id="488d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4。消费者</strong></p><p id="6c24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">消费者组中的消费者从经纪人处读取记录批次。消费者组是指消费来自同一主题的记录的许多消费者。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><p id="c418" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">开始</strong></p><p id="920b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在对卡夫卡建筑有了基本了解后，我们可以在您的机器上安装卡夫卡了。</p><p id="c444" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第一步:下载最新的阿帕奇卡夫卡</strong> </p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="f60f" class="lw lx in ls b gy ly lz l ma mb"># directly download the tar file into your directory<br/>wget <a class="ae lq" href="https://www.apache.org/dyn/closer.cgi?path=/kafka/3.2.0/kafka_2.12-3.2.0.tgz" rel="noopener ugc nofollow" target="_blank">https://www.apache.org/dyn/closer.cgi?path=/kafka/3.2.0/kafka_2.12-3.2.0.tgz</a></span><span id="e01e" class="lw lx in ls b gy mc lz l ma mb"># unzip the tar file<br/>tar -xvzf kafka_2.12-3.2.0.tgz</span><span id="18be" class="lw lx in ls b gy mc lz l ma mb"># cd into the unzipped folder<br/>cd kafka_2.12-3.2.0</span></pre><p id="6b7e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第 2 步:初始化卡夫卡环境</strong></p><p id="b5eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们需要启动动物园管理员服务:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="ec7a" class="lw lx in ls b gy ly lz l ma mb">bin/zookeeper-server-start.sh config/zookeeper.properties</span></pre><p id="8837" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将打开另一个终端会话，导航到 Kafka _ 2.12–3 . 2 . 0 文件夹。我们现在将推出卡夫卡经纪人服务:</p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="01fd" class="lw lx in ls b gy ly lz l ma mb">JMX_PORT=8004 bin/kafka-server-start.sh config/server.properties</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi md"><img src="../Images/9540f7fb9af41637102700b3044c9513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IZiDegh2oL1QaTMK2Vglgg.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">左终端是动物园管理员服务，右终端是卡夫卡经纪人服务</figcaption></figure><p id="d227" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第 3 步:打造你的第一个卡夫卡主题</strong></p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="bd28" class="lw lx in ls b gy ly lz l ma mb"># Create your first topic<br/>bin/kafka-topics.sh --create --topic myFirstTopic --bootstrap-server localhost:9092</span><span id="5d2f" class="lw lx in ls b gy mc lz l ma mb"># List all topics<br/>bin/kafka-topics.sh --bootstrap-server=localhost:9092 --list</span></pre><p id="9f97" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">恭喜你！你创造了你的第一个卡夫卡主题！在下一部分，我们将探索生产者和消费者的小型演示。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><p id="89f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">用造假者制造小规模流媒体事件</strong></p><p id="64f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本节中，我们将使用 Apache Kafka 运行一个数据流的小演示。我们将使用 Python 包 Faker，以便为流生成虚拟记录。</p><p id="7c7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第 1 步:安装依赖项</strong></p><pre class="kj kk kl km gt lr ls lt lu aw lv bi"><span id="668d" class="lw lx in ls b gy ly lz l ma mb">pip install kafka-python<br/>pip install Faker</span></pre><p id="4ea2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第 2 步:date_generator.py </strong></p><p id="023d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将首先创建我们的数据生成器脚本。该脚本将使用 Faker 生成虚拟记录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="b28f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第 3 步:生产者. py </strong></p><p id="8cd0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们将创建 define 生产者. py 模块。该模块将向卡夫卡集群提供记录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="893c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第 4 步:消费者购买</strong></p><p id="92b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们现在将创建我们的 consumer.py 模块。本模块将使用我们卡夫卡集群中的记录。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mi mj l"/></div></figure><p id="82af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第 5 步:全部运行</strong></p><ol class=""><li id="f699" class="kq kr in jm b jn jo jr js jv ks jz kt kd ku kh kv kw kx ky bi translated">初始化卡夫卡环境(如果没有，请参考上一节)</li><li id="b2e7" class="kq kr in jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated">在终端会话中运行生产者. py。</li><li id="48de" class="kq kr in jm b jn kz jr la jv lb jz lc kd ld kh kv kw kx ky bi translated">在另一个终端会话中运行 consumer.py。</li></ol><p id="6214" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果一切正常，我们应该分别看到生产者和消费者的生产和消费记录！多酷啊！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mk"><img src="../Images/1db439dfd17f63837e9a5e8abc7d77ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1TrMbui188Gb5kZB6Z56g.png"/></div></div><figcaption class="me mf gj gh gi mg mh bd b be z dk translated">左终端是生产者，右终端是消费者。</figcaption></figure><p id="f77e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要结束流，只需分别终止生产者. py 和消费者. py。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><p id="9842" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">结论</strong></p><p id="0ea4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">恭喜你！我们已经开始了进入阿帕奇卡夫卡的旅程！我们对卡夫卡的浅尝辄止让我们瞥见了卡夫卡的能力。希望你从这篇文章中学到了一两件事！快乐流！</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><p id="e37c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">参考文献</strong></p><p id="93eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lq" href="https://www.qlik.com/us/streaming-data/apache-kafka" rel="noopener ugc nofollow" target="_blank">什么是阿帕奇卡夫卡？它如何工作，如何受益&amp;挑战(qlik.com)</a></p><p id="f02f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lq" href="https://www.confluent.io/what-is-apache-kafka/" rel="noopener ugc nofollow" target="_blank">什么是阿帕奇卡夫卡？|汇合</a></p><p id="6f63" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lq" href="https://aws.amazon.com/msk/what-is-kafka/" rel="noopener ugc nofollow" target="_blank">什么是阿帕奇卡夫卡？| AWS(Amazon.com)</a></p><p id="837f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lq" href="https://kafka.apache.org/powered-by#:~:text=Today%2C%20Kafka%20is%20used%20by,strategies%20with%20event%20streaming%20architecture." rel="noopener ugc nofollow" target="_blank">阿帕奇卡夫卡</a></p><p id="010e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lq" href="https://www.confluent.io/resources/kafka-summit-2020/marching-toward-a-trillion-kafka-messages-per-day-running-kafka-at-scale-at-paypal/" rel="noopener ugc nofollow" target="_blank">向每天一万亿条卡夫卡信息进军:在贝宝上大规模运行卡夫卡——汇流</a></p><p id="304e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lq" href="https://kafka.apache.org/quickstart" rel="noopener ugc nofollow" target="_blank">阿帕奇卡夫卡</a></p><p id="4c8d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lq" href="https://www.youtube.com/c/SelfTuts" rel="noopener ugc nofollow" target="_blank"> SelfTuts — YouTube </a></p></div></div>    
</body>
</html>