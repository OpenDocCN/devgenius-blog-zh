<html>
<head>
<title>JavaScript: Using localStorage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript:使用本地存储</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-using-localstorage-badbc3a78602?source=collection_archive---------8-----------------------#2020-07-18">https://blog.devgenius.io/javascript-using-localstorage-badbc3a78602?source=collection_archive---------8-----------------------#2020-07-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b21e832447d7cc3f3ba73fdaef197318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9Sak3nMUcVCExCh4.png"/></div></div></figure><p id="ed37" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">什么是 localStorage？这是一种在浏览器中本地存储数据的方式，没有任何截止日期。还有一种叫做 sessionStorage 的东西，它与此类似，但在页面会话结束后过期，也就是在页面关闭时终止。localStorage 存储的信息甚至可以在关闭页面或浏览器后继续存在。清除本地存储的一种方法是，假设你在浏览器中使用隐名模式，然后关闭所有打开的隐名浏览器/标签。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><p id="946d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用 localStorage 可以存储什么？</p><p id="4731" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以储存各种各样的东西。您可以存储键/值对、字符串、数组和对象。</p><p id="2ec5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有四种方法。</p><p id="fb5e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe la lb lc ld b">setItem()</code> —将密钥/密钥对添加到本地存储</p><p id="9d03" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe la lb lc ld b">getItem()</code> —通过密钥从本地存储中检索密钥/密钥对</p><p id="856f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe la lb lc ld b">removeItem()</code> —通过密钥从本地存储中删除密钥/密钥对</p><p id="2b66" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe la lb lc ld b">clear()</code> —清除本地存储</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><p id="0480" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里有一个来自我的<a class="ae le" href="https://jonathanwong110.github.io/JonathanWongPortfolio" rel="noopener ugc nofollow" target="_blank">作品集网站</a>的例子。</p><p id="8f9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加到本地存储:</p><p id="c835" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe la lb lc ld b">localStorage.setItem(‘theme’, ‘dark’);</code></p><p id="df27" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您想在浏览器上检查本地存储，请打开控制台或按。然后进入应用程序，寻找本地存储并双击它。</p><p id="3ff7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你使用的是 Chrome，你可以在 windows 上使用(<code class="fe la lb lc ld b">CTRL</code> + <code class="fe la lb lc ld b">Shift</code> + <code class="fe la lb lc ld b">J</code>)，或者在 macOS 上使用(<code class="fe la lb lc ld b">CMD</code> + <code class="fe la lb lc ld b">OPTION</code> + <code class="fe la lb lc ld b">J</code>)。</p><p id="2d2a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您想从 localStorage 中检索数据，可以使用这个。</p><pre class="lf lg lh li gt lj ld lk ll aw lm bi"><span id="850a" class="ln lo in ld b gy lp lq l lr ls">const example = localStorage.getItem(‘theme’)<br/>console.log(example)</span></pre><p id="f49f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">从本地存储中删除:</p><pre class="lf lg lh li gt lj ld lk ll aw lm bi"><span id="8481" class="ln lo in ld b gy lp lq l lr ls">localStorage.removeItem(‘theme’)</span></pre><p id="d734" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">清除本地存储:</p><pre class="lf lg lh li gt lj ld lk ll aw lm bi"><span id="114e" class="ln lo in ld b gy lp lq l lr ls">localStorage.clear()</span></pre></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><p id="7c60" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，您可能会问自己将在什么上下文中使用 localStorage。让我们以网页上的夜间模式选项为例，这通常是通过本地存储来实现的。如果您的浏览器不要求用户登录，并且有夜间模式选项，您将如何在浏览器中保存该首选项，而不必在用户每次访问页面时进行调整？如果一个用户经常访问你的页面，他们不会希望每次在关闭页面/浏览器后都切换到夜间模式选项。这样，localStorage 会记住在夜间“设置”页面。</p><p id="016b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">说到夜间模式，现在让我们以我自己的<a class="ae le" href="https://jonathanwong110.github.io/JonathanWongPortfolio" rel="noopener ugc nofollow" target="_blank">作品集网站</a>为例，深入研究如何使用 JavaScript 部署夜间模式。</p><pre class="lf lg lh li gt lj ld lk ll aw lm bi"><span id="cb4a" class="ln lo in ld b gy lp lq l lr ls">const toggleSwitch = document.querySelector(‘input[type=”checkbox”]’)<br/>const currentTheme = localStorage.getItem(‘theme’)<br/>const element = document.body</span><span id="9ef4" class="ln lo in ld b gy lt lq l lr ls">if (currentTheme) {<br/> document.documentElement.setAttribute(‘data-theme’, currentTheme);<br/> if (currentTheme === ‘night’) {<br/>  toggleSwitch.checked = true;<br/> }<br/> if (localStorage.theme === “night”) {<br/>  element.classList.toggle(“night-mode”)<br/> }<br/>}</span><span id="e806" class="ln lo in ld b gy lt lq l lr ls">function switchTheme(e) {<br/> if (e.target.checked) {<br/>  document.documentElement.setAttribute(‘data-theme’, ‘night’);<br/>  localStorage.setItem(‘theme’, ‘night’);<br/>  element.classList.toggle(“night-mode”)<br/> } else {<br/> document.documentElement.setAttribute(‘data-theme’, ‘light’);<br/> localStorage.setItem(‘theme’, ‘light’);<br/> element.classList.toggle(“night-mode”)<br/> }<br/>}</span><span id="0c82" class="ln lo in ld b gy lt lq l lr ls">toggleSwitch.addEventListener(‘change’, switchTheme, false);</span></pre><p id="aed1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，首先，我创建了一个开关，以便用户可以在开启/关闭夜间模式之间切换，创建了一个变量来检索当前主题(作为检查网页当前设置为何种模式的方法，即夜间模式)，然后为 document.body 设置一个变量，因为这是我们将更改以反映夜间模式的变量。</p><p id="10e2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下一个条件块，如果正在使用夜间模式，是什么使拨动开关持续。</p><p id="ada4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在最令人兴奋的部分是主题切换功能。如果开关被打开，我们就在这里部署夜间模式。如果已经进入夜间模式，它将主题设置为夜间，并向 localStorage 添加一个键/值。如果它被切换回光模式，我们改变我们的初始键/值来反映这一点。</p><p id="d86a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们添加一个事件监听器来监听切换开关中的变化。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><p id="571c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">总之，localStorage 是 JavaScript 中一个强大的工具。我用的例子只是一个你可以使用它的实例，可以用在很多其他方面。请随意查看我的<a class="ae le" href="https://jonathanwong110.github.io/JonathanWongPortfolio" rel="noopener ugc nofollow" target="_blank">投资组合网站</a>并切换夜间模式开关。让它开着，然后关闭页面或浏览器，看看它是否仍然存在。</p><div class="lu lv gp gr lw lx"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab fo"><div class="lz ab ma cl cj mb"><h2 class="bd io gy z fp mc fr fs md fu fw im bi translated">窗口.本地存储</h2><div class="me l"><h3 class="bd b gy z fp mc fr fs md fu fw dk translated">只读 localStorage 属性允许您访问的源对象；存储的数据保存在…</h3></div><div class="mf l"><p class="bd b dl z fp mc fr fs md fu fw dk translated">developer.mozilla.org</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml jt lx"/></div></div></a></div></div></div>    
</body>
</html>