<html>
<head>
<title>Saving Images in CoreData</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 CoreData 中保存图像</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/saving-images-in-coredata-8739690d0520?source=collection_archive---------0-----------------------#2021-06-28">https://blog.devgenius.io/saving-images-in-coredata-8739690d0520?source=collection_archive---------0-----------------------#2021-06-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8081" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">你自己的照片库</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/a8320bc86856032faf850330c64e3d92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ihq8KjhnfBiiM_nuJgrTEg.png"/></div></div></figure><h2 id="ac77" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated"><strong class="ak">可以在核心数据中存储 UIImage 吗？</strong></h2><p id="1042" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">是的，我们可以用核心数据存储图像，但不能直接存储为 UIImage。这可以通过将 UIImage 转换为数据来实现。因为 UIImage 在核心数据中不是有效的属性类型。</p><p id="f9e3" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">如果你是核心数据的新手，想从基础开始学习，那么参考这篇<a class="ae mi" href="https://tonywillson.medium.com/core-date-in-swift-basics-ededf37574b0" rel="noopener"> <strong class="lm io">帖子</strong> </a>。在此仅讨论将图像保存到核心数据中。</p><blockquote class="mj mk ml"><p id="e80c" class="lk ll mm lm b ln md jo lp lq me jr ls mn mf lu lv mo mg lx ly mp mh ma mb mc ig bi translated">核心数据中用来存储图像的属性类型是<strong class="lm io">二进制数据</strong>。<strong class="lm io"> </strong>所以在你的模型中声明属性类型为二进制数据。</p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mq"><img src="../Images/1b7cc4d2ddd315a8e7c4f06aaa30d5be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*53eNMta3CfGvJhsuQvpP9Q.png"/></div></div></figure><ol class=""><li id="f46c" class="mr ms in lm b ln md lq me kx mt lb mu lf mv mc mw mx my mz bi translated"><strong class="lm io">要将图像转换成可移植的数据格式，如 png 或 jpeg，使用下面的代码:</strong></li></ol><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6a61" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">2.<strong class="lm io">将图像保存在核心数据中</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="113c" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">3.<strong class="lm io">要从核心数据中获取保存的图像，使用以下代码</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="a4b5" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">4.<strong class="lm io">将图像数据转换为 UIImage 显示给用户</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ad4c" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">我确信你们每个人都可能成功地完成了这一过程。但是很少有人会失败，原因是他们将在核心数据中存储一组图像。</p><blockquote class="mj mk ml"><p id="1e3c" class="lk ll mm lm b ln md jo lp lq me jr ls mn mf lu lv mo mg lx ly mp mh ma mb mc ig bi translated">所以你可能会问我，<strong class="lm io"> </strong>有没有可能把我的图像数组存储在核心数据里？。<strong class="lm io"> </strong>我会说是的，肯定可以，而且要遵循的步骤也会和上面那个一样。哎呀！！不完全相同的一个，几个更多的秘密被添加到它的工作。</p></blockquote><p id="0520" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">例如，考虑这个图像阵列</p><ul class=""><li id="3061" class="mr ms in lm b ln md lq me kx mt lb mu lf mv mc nc mx my mz bi translated">let myImages = ["车"，"笔"，"相机"，"包"]</li></ul><ol class=""><li id="ca82" class="mr ms in lm b ln md lq me kx mt lb mu lf mv mc mw mx my mz bi translated"><strong class="lm io">要将这个图像数组存储到核心数据中，首先将每个图像转换成数据，存储在一个数组中。</strong></li></ol><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="d098" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">2.<strong class="lm io">将图像数组保存到核心数据</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="95b2" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">3.<strong class="lm io">从岩心数据中提取图像数组</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="d03d" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">4.<strong class="lm io">将 imageData 的数组转换为 UIImage，如</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><blockquote class="mj mk ml"><p id="1411" class="lk ll mm lm b ln md jo lp lq me jr ls mn mf lu lv mo mg lx ly mp mh ma mb mc ig bi translated">nskeydarchiver 是一个序列化(转换)数据的类，非常类似于 JSONEncoder。</p><p id="d86a" class="lk ll mm lm b ln md jo lp lq me jr ls mn mf lu lv mo mg lx ly mp mh ma mb mc ig bi translated"><em class="in">nskeydunarchiver</em>是一个反序列化(重新转换)数据的类，非常类似于 JSONDecoder。</p></blockquote><p id="5c6d" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">这两个函数在核心数据中存储任何类型的数据数组时起着重要的作用。</p><p id="4489" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi nd translated"><span class="l ne nf ng bm nh ni nj nk nl di"> T </span> <strong class="lm io"> ips: </strong>有一种方法可以查看你存储的图片，只需在你的控制台中使用下面的代码。</p><pre class="kd ke kf kg gt nm nn no np aw nq bi"><span id="52ea" class="ko kp in nn b gy nr ns l nt nu">po NSSearchPathForDirectoriesInDomains(.<!-- -->documentDirectory<!-- -->, .userDomainMask, true)</span></pre><blockquote class="mj mk ml"><p id="b6bb" class="lk ll mm lm b ln md jo lp lq me jr ls mn mf lu lv mo mg lx ly mp mh ma mb mc ig bi translated">这将引导您到达核心数据模型的 SQLite 文件的目的地。使用工具<strong class="lm io"><em class="in">DBBrowser for Sqlite</em></strong>您可以查看您存储的图像和其他数据。我提到的工具就是一个例子，互联网上有大量的工具。你可以用你觉得舒服的。</p></blockquote><p id="c39d" class="pw-post-body-paragraph lk ll in lm b ln md jo lp lq me jr ls kx mf lu lv lb mg lx ly lf mh ma mb mc ig bi translated">这很有趣，伙计们，试试这个，如果有任何疑问和建议，请通过<a class="ae mi" href="https://twitter.com/Sridharan_tsd" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> Twitter </strong> </a>联系我。</p></div><div class="ab cl nv nw hr nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ig ih ii ij ik"><div class="kd ke kf kg gt oc"><a href="https://www.linkedin.com/in/sridharan-t-6b51b2143/" rel="noopener  ugc nofollow" target="_blank"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd io gy z fp oh fr fs oi fu fw im bi translated">Sridharan T - iOS 开发者- Ivy Mobility | LinkedIn</h2><div class="oj l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">www.linkedin.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op km oc"/></div></div></a></div></div></div>    
</body>
</html>