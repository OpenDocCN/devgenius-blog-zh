<html>
<head>
<title>Deploy Containerized Flask app to Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将集装箱式烧瓶应用程序部署到Heroku</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploy-containerized-flask-app-to-heroku-aaccffd0a12d?source=collection_archive---------3-----------------------#2022-01-22">https://blog.devgenius.io/deploy-containerized-flask-app-to-heroku-aaccffd0a12d?source=collection_archive---------3-----------------------#2022-01-22</a></blockquote><div><div class="fc ic id ie if ig"/><div class="ih ii ij ik il"><div class=""/><p id="acbc" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">将容器应用程序部署到Heroku的3个简单步骤</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj kj"><img src="../Images/85feef4e19e73e0b58e15d0fee8a92ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*c7En5pSWLr7F6p89otwz1w.png"/></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">烧瓶应用程序到Heroku</figcaption></figure><h1 id="8af8" class="kv kw io bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">介绍</h1><p id="d6f9" class="pw-post-body-paragraph jl jm io jn b jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ih bi translated">在这篇博客中，我专注于将一个flask应用程序容器化，并将其托管在Heroku云平台上。</p><h1 id="e77e" class="kv kw io bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">1.构建烧瓶应用程序</h1><h2 id="d9a5" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;创建虚拟环境</h2><blockquote class="mk ml mm"><p id="9acc" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># mkdir烧瓶；cd烧瓶</p><p id="83c6" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">#虚拟的虚拟</p><p id="6d47" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">#源venv/bin/激活</p></blockquote><h2 id="d75c" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;安装烧瓶和gunicorn</h2><blockquote class="mk ml mm"><p id="fffa" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># pip3安装烧瓶gunicorn</p><p id="0927" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># pip3冻结&gt; requirements.txt</p></blockquote><h2 id="2311" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;编写基本的flask应用程序</h2><p id="c718" class="pw-post-body-paragraph jl jm io jn b jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ih bi translated">项目结构:</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mr"><img src="../Images/7b5183393e00f795ce369da41d7ca307.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*TC68Gt8wWqSwDsNAyOn1LQ.png"/></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">项目结构</figcaption></figure><p id="7431" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">创建“<strong class="jn ip"> app.py </strong>”来构建flask app。这是一个基本的flask应用程序，它将容器的端口5000绑定到主机的端口(部署到Heroku时的重要部分)</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj ms"><img src="../Images/928b506e850d2906bd21f519f04c695d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*u94CjO2E2fRVcKmfC-nUbg.png"/></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">app.py</figcaption></figure><p id="6349" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">为heroku部署创建“<strong class="jn ip"> Procfile </strong>”，这里gunicorn是一个生产服务器app:app的意思，我们指的是“<strong class="jn ip"> app.py的app实例</strong></p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mt"><img src="../Images/95d8b912d336d6b3d9bdf20c958e7d25.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*l88mBjGbgYDp5--7jmBd8w.png"/></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">Procfile</figcaption></figure><p id="e2ce" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">创建一个名为“<strong class="jn ip"> templates </strong>的目录，并在这个目录下创建HTML文件。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gi gj mu"><img src="../Images/8b66804c4590e89a2eebc86dd94942dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G1zerivrLxqKQww62f1IRg.png"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">模板/索引. html</figcaption></figure><h2 id="22d1" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;本地运行flask应用程序</h2><blockquote class="mk ml mm"><p id="0439" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># curl本地主机:5000</p></blockquote><h1 id="a29d" class="kv kw io bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">2.将应用容器化</h1><h2 id="a544" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;创建Dockerfile文件</h2><p id="d969" class="pw-post-body-paragraph jl jm io jn b jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ih bi translated">这是一个基本的Dockerfile，使用python:3基镜像，在那个基镜像中设置工作目录为/app，将“requirements.txt”复制到基镜像中，然后在基镜像中安装requirements.txt中的所有包，最后启动app。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div class="gi gj mz"><img src="../Images/0b4acf6bc14c75882d3580219cff664a.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*5IAkrJSpPoGWOjb6ORaR2w.png"/></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">Dockerfile文件</figcaption></figure><h2 id="cb9c" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;构建图像</h2><blockquote class="mk ml mm"><p id="be52" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># docker build -t flaskapp。</p></blockquote><h2 id="2ecb" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;运行容器并在本地测试它</h2><blockquote class="mk ml mm"><p id="f9b3" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># docker图像</p><p id="2668" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># docker运行名称flask1 -dit -p 5000:5000 flaskapp</p><p id="3a62" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># docker ps</p><p id="b523" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated"># curl本地主机:5000</p></blockquote><p id="dbae" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">下面是上述命令输出的屏幕截图。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gi gj na"><img src="../Images/0a6caa6ea369ae19d2bc0ccf540228e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E8DGqC9TCH1_YwHMctNeaA.png"/></div></div></figure><h1 id="065d" class="kv kw io bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">3.部署到Heroku</h1><p id="dfe7" class="pw-post-body-paragraph jl jm io jn b jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ih bi translated">这是应用上线的最后也是最重要的一步。</p><h2 id="a083" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;在Heroku上创建一个帐户</h2><p id="f996" class="pw-post-body-paragraph jl jm io jn b jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ih bi translated">注册Heroku平台<a class="ae nb" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">https://signup.heroku.com/</a></p><h2 id="bb87" class="ly kw io bd kx lz ma dn lb mb mc dp lf jw md me lj ka mf mg ln ke mh mi lr mj bi translated">&gt;安装Heroku CLI</h2><p id="eac0" class="pw-post-body-paragraph jl jm io jn b jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ih bi translated">查看此官方链接，在您的操作系统上安装heroku CLI<a class="ae nb" href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install" rel="noopener ugc nofollow" target="_blank">https://dev center . heroku . com/articles/heroku-CLI #下载并安装</a></p><blockquote class="mk ml mm"><p id="8a1c" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">安装Heroku CLI后，使用命令行<br/> # heroku login登录Heroku</p><p id="5802" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">登录heroku容器注册表<br/> # heroku容器:登录</p><p id="6d37" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">创建一个heroku应用程序，如果没有提供参数，heroku会为该应用程序分配一个随机名称<br/> # heroku create</p><p id="3e87" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">这是最重要的一步。<strong class="jn ip">导航到“Dockerfile”所在的路径</strong>，这将构建图像并将图像推送到heroku注册表。<br/> # heroku容器:推送we B- a&lt;heroku app的名称&gt;</p><p id="4277" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">在heroku主机上创建容器并公开托管<br/># heroku container:release we B- a&lt;heroku app名称&gt;</p><p id="7117" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">在默认浏览器中打开应用程序<br/># heroku open-a&lt;heroku应用程序的名称&gt;</p><p id="2402" class="jl jm mn jn b jo jp jq jr js jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ki ih bi translated">你可以查看那个特定heroku app的日志<br/># heroku logs-tail-a&lt;heroku app的名称&gt;</p></blockquote><p id="4ce9" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">上述命令的屏幕截图。</p><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gi gj nc"><img src="../Images/6b04746b4d855996f2122f601158af06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vHcKf8_M8AgXdBcmdZvp0A.png"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">heroku登录</figcaption></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gi gj nd"><img src="../Images/123f940f1a3cb5545fef7008890a74fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BC1vSWnhj5Hul5yQ8xRpog.png"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">推送至heroku容器注册表</figcaption></figure><figure class="kk kl km kn gu ko gi gj paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="gi gj ne"><img src="../Images/9f200b0a05cd3608f445337f794fdd08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6mzm46eE9wYCjq5B4Nv0w.png"/></div></div><figcaption class="kr ks gk gi gj kt ku bd b be z dk translated">部署到heroku</figcaption></figure><p id="0fb2" class="pw-post-body-paragraph jl jm io jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki ih bi translated">WebApp heroku链接:<a class="ae nb" href="https://radiant-coast-87631.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">https://radiant-coast-87631.herokuapp.com/</a><br/>代号Github链接:<a class="ae nb" href="https://github.com/Prajwalmithun/hostingflask" rel="noopener ugc nofollow" target="_blank">https://github.com/Prajwalmithun/hostingflask</a></p><h1 id="2880" class="kv kw io bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">结论</h1><p id="744b" class="pw-post-body-paragraph jl jm io jn b jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke lx kg kh ki ih bi translated">在这篇博客中，我试图演示将容器部署到Heroku。这只是为了展示将我们的容器部署到云是多么容易。具有复杂web应用程序的大型容器可以用同样的方式部署。我还会写一篇关于添加自定义域和子域到托管web应用的独立文章。</p></div></div>    
</body>
</html>