<html>
<head>
<title>What To Do After Accidental “rm -rf *”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">意外“rm -rf *”后怎么办</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-to-do-after-accidental-rm-rf-ba544a6b2564?source=collection_archive---------6-----------------------#2020-07-09">https://blog.devgenius.io/what-to-do-after-accidental-rm-rf-ba544a6b2564?source=collection_archive---------6-----------------------#2020-07-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="363a" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">编程；编排</h2><div class=""/><div class=""><h2 id="9c8e" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">第一，不要重启电脑，不要关闭任何 ide。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/d6191d2acc0481b9aa44b4a26226a0c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Sgk7ct0aVmYfmOjKaqQZnw.gif"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">由 Giphy 制造</figcaption></figure><p id="17a3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">冷静点。</p><p id="1879" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">深呼吸。</p><p id="4d4e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">喝一杯水。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><p id="b38c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当我一个月前做同样的事情时，这些话帮助我冷静下来。</p><p id="07bf" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">我当时在做一个项目，涉及到很多实验。不得不做实验和很短的期限意味着大量肮脏的代码，当然你不想以你的名义提交它们，不是吗？</p><p id="649e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">事实证明，意外删除数周工作的感觉比犯下肮脏代码的感觉更可怕。</p><p id="534e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你像我一样不小心删除了你的文件，那么我有一个坏消息和一个好消息给你。</p><p id="5e2b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">坏消息是你的文件可能不见了。<code class="fe mh mi mj mk b">rm</code>命令解除指定文件路径的链接，并将它们标记为空闲内存。与从 Finder 或 Windows 资源管理器中删除文件不同，受<code class="fe mh mi mj mk b">rm</code>影响的文件不会出现在回收站或回收站中。</p><p id="990e" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">好消息是，仍然有一些方法可以轻松保存你的文件。简单地说，我的意思是不使用文件恢复软件。</p><p id="728b" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">顺便说一句，作为预防措施，最好在不同的机器上阅读这篇文章和浏览网页，而不是在你刚刚丢失文件的机器上。稍后我会解释原因。</p><h2 id="0414" class="ml mm iq bd mn mo mp dn mq mr ms dp mt ln mu mv mw lr mx my mz lv na nb nc iw bi translated">饭桶</h2><p id="0da8" class="pw-post-body-paragraph le lf iq lg b lh nd ka lj lk ne kd lm ln nf lp lq lr ng lt lu lv nh lx ly lz ij bi translated">你最后一次提交工作是什么时候？如果，不管什么原因，你和我一样，两个星期都忘了做任何事情，那么跳过这一部分。</p><p id="b0f0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果答案是最近，那么你很幸运。命令<code class="fe mh mi mj mk b">rm -rf *</code>的大多数变种不会删除被删除文件夹中的隐藏文件。</p><p id="f04c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">用<code class="fe mh mi mj mk b">ls -a</code>检查剩下的隐藏文件，看看<code class="fe mh mi mj mk b">.git</code>文件夹是否还在。</p><p id="196a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您可以使用<code class="fe mh mi mj mk b">git checkout &lt;branch&gt;</code>恢复最近一次提交</p><p id="0e1a" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">如果你没有使用任何分支，那么使用<code class="fe mh mi mj mk b">git checkout master</code></p><p id="910c" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">还缺少一些没有提交给 git 的文件吗？继续读。</p><h2 id="ec08" class="ml mm iq bd mn mo mp dn mq mr ms dp mt ln mu mv mw lr mx my mz lv na nb nc iw bi translated">IDE 和代码编辑器</h2><p id="8ec7" class="pw-post-body-paragraph le lf iq lg b lh nd ka lj lk ne kd lm ln nf lp lq lr ng lt lu lv nh lx ly lz ij bi translated">你用 IDE 或代码编辑器编辑过这些文件吗？当这种情况发生时，我使用 PyCharm，但是任何来自 IntelliJ 的 ide 或者其他支持本地历史的 ide 都应该可以工作。</p><p id="09b8" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于智能智能，请转到 VCS &gt;本地历史&gt;显示历史</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ni"><img src="../Images/92588185222598f3b3978988d3457ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E9hEpVRaSCZZ0syKa_7z1Q.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">PyCharm 当地历史截图</figcaption></figure><p id="2353" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">它应该将<code class="fe mh mi mj mk b">rm -rf</code>动作列为“外部变更”,您可以通过右键单击历史并选择“恢复”来撤销该动作</p><p id="810f" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">一旦所有文件开始重新出现，这让我觉得 IntelliJ 收取的高额许可费终于值得了。</p><p id="a6dc" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于其他 ide，尝试谷歌“<ide name="">本地历史”。如果 IDE 实际上支持本地历史，应该有关于如何访问它的指南。</ide></p><p id="8ac2" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">大多数代码编辑器没有现成的本地历史支持。VS Code 和 Sublime Text 对此有插件，但是你需要在事故之前<em class="nj">安装它们。</em></p><p id="bce0" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">没有当地历史支持？那么恐怕我们需要进行最后一步了。</p><h2 id="db4a" class="ml mm iq bd mn mo mp dn mq mr ms dp mt ln mu mv mw lr mx my mz lv na nb nc iw bi translated">删除数据恢复工具</h2><p id="8d3f" class="pw-post-body-paragraph le lf iq lg b lh nd ka lj lk ne kd lm ln nf lp lq lr ng lt lu lv nh lx ly lz ij bi translated">此时，最好立即关闭您的机器，以防止意外覆盖。</p><p id="8558" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">当您使用浏览器浏览时，它很可能会记录缓存。由于先前被删除数据占用的内存被标记为空闲，机器有可能在其上写入新数据。如果发生这种情况，那么恢复文件将更加困难。</p><p id="e3c3" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">大多数(如果不是全部)数据恢复工具会要求您卸载驱动器。这意味着你需要一个活动的 USB 来启动和使用这些工具。我推荐使用<a class="ae nk" href="https://unetbootin.github.io/" rel="noopener ugc nofollow" target="_blank"> UNetbootin </a>来创建一个。</p><p id="a3af" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">您也可以将受影响的驱动器连接到另一台机器，因为受影响的驱动器是可拆卸的(不是焊接的),并且您有另一台机器可以访问它。</p><p id="8c52" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">对于特定的<code class="fe mh mi mj mk b">ext3</code>或<code class="fe mh mi mj mk b">ext4</code>分区，我会推荐 extundelete、ext4magic 或 scalpel。这里有一些关于如何使用<a class="ae nk" href="https://wiki.archlinux.org/index.php/File_recovery#Extundelete" rel="noopener ugc nofollow" target="_blank">拔管</a>、<a class="ae nk" href="https://wiki.archlinux.org/index.php/File_recovery#Ext4Magic" rel="noopener ugc nofollow" target="_blank"> ext4magic </a>和<a class="ae nk" href="https://www.howtoforge.com/recover-deleted-files-with-scalpel" rel="noopener ugc nofollow" target="_blank">手术刀</a>的详细指南。</p><p id="9d67" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">另一个很棒的工具是<a class="ae nk" href="https://www.tecmint.com/recover-deleted-files-using-testdisk-in-linux/" rel="noopener ugc nofollow" target="_blank"> Testdisk </a>，它可以支持更多的分区，比如 NTFS 和 FAT32。</p><p id="f1ee" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">无论您使用哪种工具，在尝试恢复数据时，请务必仔细遵循指南。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><p id="1eea" class="pw-post-body-paragraph le lf iq lg b lh li ka lj lk ll kd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ij bi translated">希望本指南能帮助您恢复数据。我祝你好运。</p></div></div>    
</body>
</html>