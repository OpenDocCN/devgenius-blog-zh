<html>
<head>
<title>Functional JavaScript — Currying</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">函数式 JavaScript — Currying</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/functional-javascript-currying-391deedc09f7?source=collection_archive---------3-----------------------#2020-11-18">https://blog.devgenius.io/functional-javascript-currying-391deedc09f7?source=collection_archive---------3-----------------------#2020-11-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d92d8804ea7540a84b909c65d8a84968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AHnxuwE8E4yBnPy2"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@ninjason?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jason Leung </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="8b0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript 部分是一种函数式语言。</p><p id="7b04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要学习 JavaScript，我们必须学习 JavaScript 的功能部分。</p><p id="6eb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何在 JavaScript 中使用 currying。</p><h1 id="219d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">一元函数</h1><p id="1258" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">一元函数是接受单个参数的函数。</p><p id="6fd7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，一元函数是:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f7ca" class="mn lc iq mj b gy mo mp l mq mr">const identity = (x) =&gt; x;</span></pre><h1 id="792a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">二元函数</h1><p id="14c7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">二元函数是接受两个参数的函数。</p><p id="a697" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中一个例子是:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="97c0" class="mn lc iq mj b gy mo mp l mq mr">const add = (x, y) =&gt; x + y;</span></pre><h1 id="321b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">可变函数</h1><p id="3bcc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">可变函数是一个接受可变数量参数的函数。</p><p id="e505" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用 rest 操作符在 JavaScript 中定义一个变量函数:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f2ec" class="mn lc iq mj b gy mo mp l mq mr">function variadic(...args) {<br/>  console.log(args)<br/>}</span></pre><p id="d010" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有一个我们传入的所有参数的数组。</p><h1 id="fe29" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Currying</h1><p id="de8e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Curry 正在将一个有多个参数的函数转换成嵌套的一元函数。</p><p id="0dd6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很有用，因为它让我们创建应用了一些参数的函数。</p><p id="411a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以转换一个二元函数:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c57e" class="mn lc iq mj b gy mo mp l mq mr">const add = (x, y) =&gt; x + y;</span></pre><p id="89ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一元函数，通过编写以下内容返回另一个一元函数:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="aaf7" class="mn lc iq mj b gy mo mp l mq mr">const addCurried = x =&gt; y =&gt; x + y;</span></pre><p id="7ca7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">addCurried</code>函数采用参数<code class="fe ms mt mu mj b">x</code>并返回一个采用参数<code class="fe ms mt mu mj b">y</code>的函数，该函数返回<code class="fe ms mt mu mj b">x</code>和<code class="fe ms mt mu mj b">y</code>的总和。</p><p id="1f2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="200e" class="mn lc iq mj b gy mo mp l mq mr">const add1 = addCurried(1);<br/>const sum = add1(2);</span></pre><p id="7c75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用 1 调用了<code class="fe ms mt mu mj b">addCurried</code>来返回一个将<code class="fe ms mt mu mj b">x</code>设置为 1 的函数，并将它赋给<code class="fe ms mt mu mj b">add</code>变量。</p><p id="959b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用 2 调用<code class="fe ms mt mu mj b">add1</code>返回最终的总和。</p><p id="e102" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过创建一个函数来概括这一点，该函数返回一个带一个参数的函数，即二元函数。</p><p id="1f41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个函数中，我们返回一个带有第二个参数的函数。</p><p id="1085" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在里面，我们返回用外部函数的参数调用的二元函数的结果。</p><p id="9c40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="538c" class="mn lc iq mj b gy mo mp l mq mr">const curry = (binaryFn) =&gt; {<br/>  return (firstArg) =&gt; {<br/>    return (secondArg) =&gt; {<br/>      return binaryFn(firstArg, secondArg);<br/>    };<br/>  };<br/>};</span><span id="843c" class="mn lc iq mj b gy mv mp l mq mr">const add = (x, y) =&gt; x + y<br/>const sum = curry(add)(1)(2);</span></pre><p id="7606" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建<code class="fe ms mt mu mj b">curry</code>函数来完成我们描述的任务。</p><p id="ba57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以像我们的<code class="fe ms mt mu mj b">add</code>函数一样传入任何二元函数。</p><p id="2086" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后它会自动变成咖喱。</p><p id="b665" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用一个<code class="fe ms mt mu mj b">curry</code>函数来进一步推广，这个函数递归地返回带有一个参数的函数，直到只剩下一个参数。</p><p id="16ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dcbf" class="mn lc iq mj b gy mo mp l mq mr">let curry = (fn) =&gt; {<br/>  if (typeof fn !== 'function') {<br/>    throw Error('No function provided');<br/>  }</span><span id="3df6" class="mn lc iq mj b gy mv mp l mq mr">  return function curriedFn(...args) {<br/>    if (args.length &lt; fn.length) {<br/>      return function(...moreArgs) {<br/>        return curriedFn(...[...args, ...moreArgs]);<br/>      };<br/>    }<br/>    return fn(...args);<br/>  };<br/>};</span></pre><p id="e083" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查<code class="fe ms mt mu mj b">fn</code>是否是一个函数。</p><p id="f62d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果是，那么我们返回一个函数，该函数调用如果<code class="fe ms mt mu mj b">fn</code>的参数比<code class="fe ms mt mu mj b">args</code>多时返回的函数。</p><p id="4244" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe ms mt mu mj b">fn</code>中的参数比<code class="fe ms mt mu mj b">args</code>中的多，这意味着我们可以做得更多。</p><p id="1980" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果 curried 函数的参数个数与<code class="fe ms mt mu mj b">fn</code>中的参数个数相同，那么我们就不能 curried 更多。</p><p id="9391" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们只调用函数。</p><p id="cf28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们可以这样称呼它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b799" class="mn lc iq mj b gy mo mp l mq mr">const add = (x, y, z) =&gt; x + y + z;<br/>const sum = curry(add)(1)(2)(3);</span></pre><p id="63cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们简化了函数，所以我们用它们各自的参数来调用简化的函数。</p><p id="873c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe ms mt mu mj b">sum</code>是 6，因为我们把所有的数字加在一起。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/11e7bf531bc8386dffd052337139027e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5F8suFMPxRDcDqKV"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@chuttersnap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> chuttersnap </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="da9b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="579d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以修改函数，这样我们就可以创建应用了一些参数的函数，并在其他方面重用该函数。</p></div></div>    
</body>
</html>