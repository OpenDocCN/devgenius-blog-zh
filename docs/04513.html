<html>
<head>
<title>Art of Clean Code — Documentation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">干净代码的艺术—文档</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/art-of-clean-code-documentation-177b62a8320?source=collection_archive---------2-----------------------#2021-03-27">https://blog.devgenius.io/art-of-clean-code-documentation-177b62a8320?source=collection_archive---------2-----------------------#2021-03-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6465" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">语境随着时间而变化，这使得理解真相变得困难。通过有效的文档，让每个人都可以容易地了解真相。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/373f4385bd571707fff70dbf9a665669.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*2FGH3c1mXOkKME9z"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk translated"><a class="ae ko" href="https://quotes.pub/q/truth-can-only-be-found-in-one-place-the-code-505113" rel="noopener ugc nofollow" target="_blank"> Quotes.pub </a></figcaption></figure><p id="ff2e" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">当我想到代码中的文档时，我会想到几年后当我不在的时候，一个开发伙伴在阅读它。这为我定义了文档的测试/质量标准:</p><blockquote class="ll"><p id="c3a0" class="lm ln in bd lo lp lq lr ls lt lu lk dk translated"><em class="lv">一个仅仅了解系统领域的开发者是否能够理解这些代码？</em></p></blockquote><p id="10cf" class="pw-post-body-paragraph kp kq in kr b ks lw jo ku kv lx jr kx ky ly la lb lc lz le lf lg ma li lj lk ig bi translated">我记性不好，所以几年后，甚至更短的时间内，我甚至会忘记自己写的代码。因此，对于我的代码和文档来说，我是一个很好的测试案例，看看我是否能理解这些。如果没有，我要么把它变得简单，要么把它记录得更好。</p><p id="8a63" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">这是一个实用的参数。作为开发人员，我们应该对产品、代码和下一批在我们不在的时候管理系统的开发人员感同身受。文件显示了这一事实的同理心和专业水平。</p><p id="6580" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">现在，不做或做文档有各种各样的原因。让我们讨论一下。</p></div><div class="ab cl mb mc hr md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ig ih ii ij ik"><h1 id="e5a3" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">正确的命名约定并不能消除对文档的需求</h1><p id="e6e7" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">其中一个思想流派可能是，如果命名约定是正确的，并且代码写得很好，清楚地揭示了意图，那么就可以跳过文档。这是部分正确的，原因如下:</p><ul class=""><li id="16b1" class="nf ng in kr b ks kt kv kw ky nh lc ni lg nj lk nk nl nm nn bi translated">命名约定在我们的上下文中可能是正确的，这可能与其他用户不同(特别是如果名称与域不一致)。而且，(相同的)语境是在系统中(一起)度过很多时间后建立起来的。</li><li id="a743" class="nf ng in kr b ks no kv np ky nq lc nr lg ns lk nk nl nm nn bi translated">还有许多方面，类、函数或变量的名称不能揭示。在现实世界中，系统总是以一种不太完美的状态不断进化，因此会出现特殊或边界情况。</li><li id="5130" class="nf ng in kr b ks no kv np ky nq lc nr lg ns lk nk nl nm nn bi translated">可能会有复杂的实现，足以让读者晕头转向。</li></ul><p id="37fb" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">我对以上所有观点都有反对意见。比如“一定要用系统域来命名”、“不要把特例留着不管理”、“保持简单，保持重构”等等。</p><p id="16ca" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">然而，现实是真实的世界是丰富多彩的，有不同的技能、情况和背景。由于显而易见的原因，很难带来理想主义。</p><p id="1dbd" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">让我们用实例来讨论。</p><h2 id="5767" class="nt mj in bd mk nu nv dn mo nw nx dp ms ky ny nz mu lc oa ob mw lg oc od my oe bi translated">背景随着时间而变化</h2><p id="debc" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">接口名称:<em class="of">外部系统数据服务</em></p><p id="415a" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">当设计这个接口时，只有一个外部数据系统。因此，开发人员认为，这是一个足以揭示意图的好名字，因为团队中的每个人都知道这个事实。</p><p id="eb7d" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">几年后，又有 10 个系统在传输数据。现在，一个新的开发人员，正在与庞大的代码库进行斗争以理解系统设计，只要她/他不检查配置、服务注册或运行系统和查看日志，他/她就不知道这个外部系统是什么。</p><blockquote class="ll"><p id="078a" class="lm ln in bd lo lp lq lr ls lt lu lk dk translated">随着系统的发展，环境会随着时间而变化</p></blockquote><h2 id="e542" class="nt mj in bd mk nu og dn mo nw oh dp ms ky oi nz mu lc oj ob mw lg ok od my oe bi translated">名字本身不能揭示整个意图，总是！</h2><p id="fcba" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">可能有很多信息，不是好名字能轻易透露的。</p><ul class=""><li id="0337" class="nf ng in kr b ks kt kv kw ky nh lc ni lg nj lk nk nl nm nn bi translated">这项服务将满足什么样的使用案例</li><li id="d506" class="nf ng in kr b ks no kv np ky nq lc nr lg ns lk nk nl nm nn bi translated">这项服务将提供什么样的数据</li><li id="81db" class="nf ng in kr b ks no kv np ky nq lc nr lg ns lk nk nl nm nn bi translated">有什么特殊情况需要用户注意吗</li><li id="9d34" class="nf ng in kr b ks no kv np ky nq lc nr lg ns lk nk nl nm nn bi translated">更多...</li></ul><p id="c3b8" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">接口意味着在系统中扩展和添加行为，同时保持系统的整体健全性。接口名称对揭示意图很有帮助，但是这些名称本身并不能描述所有的事情。</p><p id="7653" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">接口(和任何抽象)需要大量的文档来阐明用户可以从系统中得到什么，实现类应该考虑什么。</p><p id="65c1" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">参考<em class="of">Expression.java</em><a class="ae ko" href="https://github.com/mohitkgupta/expressionoasis/blob/master/src/main/java/org/vedantatree/expressionoasis/expressions/Expression.java" rel="noopener ugc nofollow" target="_blank">这里</a>来自‘ExressionOasis’，一个开源的表达式解析器框架。该接口是整个表达式解析逻辑的基础，将在核心框架内实现，其他开发人员也将在将来添加扩展。它需要高质量的文档，以便用户可以理解其意图，并在未来的任何时候进行设计。</p><h2 id="e841" class="nt mj in bd mk nu nv dn mo nw nx dp ms ky ny nz mu lc oa ob mw lg oc od my oe bi translated"><strong class="ak">公共 API 总是需要好的文档</strong></h2><p id="81e0" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">没有比 Java 库更好的参考了。这是最值得学习的例子之一，即 API 或实现应该如何被记录。</p><p id="f739" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">因此，正确的命名约定并不能消除对文档的需求。然而，这可能有助于减少文档的数量，因为好名字也成为文档的一部分。</p></div><div class="ab cl mb mc hr md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ig ih ii ij ik"><h1 id="43ab" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">文档有助于轻松解码特殊情况</h1><p id="f4f2" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">另一个想法是注释应该为零，因为好的代码本身就揭示了它的意图。这是一个有效的观点，只要代码写得漂亮，没有任何特例。但是对此有一些警告。</p><p id="2edc" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><strong class="kr io">示例:</strong>一个函数检查指定的用户是否应该按月、按年计费，或者根本不应该计费。</p><p id="670d" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><em class="of">subscriber . getbillabelinfo()= = null&gt;计费返回 false//TODO:可以是可计费的</em></p><p id="e0f8" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><em class="of">subscriber . getbillabelinfo()。getStartDate() == null &gt;计费返回 false</em></p><p id="9668" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><em class="of">return subscriber . getbillabelinfo()…；</em></p><p id="3497" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">第二张支票是什么？也许，这是一些必须处理的特殊情况。</p><p id="b657" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">理想情况下，不应该有特例。但总会有，因为生活并不总是理想的，代码也是如此。现在，这需要注释，最好有吉拉入场券，这样任何开发人员以后都可以很容易地理解这一点，而不需要在日志或断点中埋头苦读。</p><p id="654d" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">在这里，文档不是好代码的替代品，但它有助于清楚地揭示意图，因为长代码并不完美。</p></div><div class="ab cl mb mc hr md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ig ih ii ij ik"><h1 id="de72" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">文档有助于解读复杂性</h1><p id="4c07" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">最理想的状态是写简单的代码，任何人都能很容易理解。</p><p id="c815" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">然而，仍然可能存在这样的算法，即使我们有了所有正确的意图，我们也不能对它进行足够的简化。在这种情况下，注释很有帮助。</p><p id="9e06" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><strong class="kr io">举例:</strong>参考表达式解析&gt;Compiler.java&gt;编译和重构 kenInRPN 函数<a class="ae ko" href="https://github.com/mohitkgupta/expressionoasis/blob/master/src/main/java/org/vedantatree/expressionoasis/Compiler.java" rel="noopener ugc nofollow" target="_blank">T3 这里 </a> <em class="of">。</em></p><p id="0cc5" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">这是一个有点复杂的逻辑，很少有特例。这是我们写的。但即使是我，也需要在多年后每次修复任何报告的问题时，让日志理解它的复杂性。</p><p id="9a3c" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">我多次尝试简化，做到了很好的程度。但是这个算法还是有它天生的复杂性。通过在这里添加注释来揭示流程、算法、案例，我们可以让读者感到轻松。</p><p id="c476" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><em class="of">*以上类也有过度文档化的好例子。</em></p><p id="1b2b" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><strong class="kr io">例如:</strong> <em class="of">是一个普通函数</em></p><p id="aff1" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">函数和参数名正确地说明了意图，这里不需要太多的文档。</p><p id="76c5" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">因此，取得平衡。复杂性也是非常语境化的，因人而异变化很大。经验法则可能是，你的同事/评审者能够一口气理解它吗？如果没有，要么简化代码(如果可以的话最好)要么添加更多的文档。</p><p id="be0f" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">最好的情况是用代码很好地解释我们自己，以至于不需要注释。但是如果由于某种原因没有发生，要有同理心，通过添加评论让下一个开发者更容易理解。</p></div><div class="ab cl mb mc hr md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ig ih ii ij ik"><h1 id="686a" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">文件有助于管理家务</h1><p id="3152" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">在代码中添加 TODO 有时很有帮助，让我们不要忘记由于任何原因我们现在没有实现的可能性。</p><p id="4769" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">最好添加一个带有跟踪票号码的待办事项。它可以帮助新读者以及代码的作者在将来的任何时候都可以方便地进行改进。</p></div><div class="ab cl mb mc hr md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ig ih ii ij ik"><h1 id="1481" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">非代码文件中也需要文档</h1><p id="c9cd" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">文档不仅适用于 Java。网等。类，但对配置文件也很重要。</p><p id="a444" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">配置文件揭示了系统的许多信息。如果这些都有很好的文档记录，读者只需阅读配置就可以很容易地理解许多复杂的系统、交互和行为。</p></div><div class="ab cl mb mc hr md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ig ih ii ij ik"><h1 id="397f" class="mi mj in bd mk ml mm mn mo mp mq mr ms jt mt ju mu jw mv jx mw jz mx ka my mz bi translated">摘要</h1><p id="4db0" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">重要的目标是“创作”代码，清楚地揭示其意图，并能教育用户如何使用它，为了什么使用它。无论支持这一点需要什么级别的文档，这都是很重要的。</p><p id="481e" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">对于文档来说，可能有一些有争议的(或上下文相关的)点，但是，很少是非常清楚的。例如:公共 API /接口、抽象类、特殊情况、待办事项、警告、隐藏后果等。</p><p id="54a7" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">如果文档对其他开发人员有帮助，我宁愿犯错，也不愿假设我的代码是完美的。</p><p id="7875" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">请注意前面提到的“作者”一词。我们是代码的作者。</p><blockquote class="ll"><p id="574f" class="lm ln in bd lo lp lq lr ls lt lu lk dk translated">作者总是希望读者感到舒适和感兴趣。因此，作者尽一切努力让读者体验更好。</p></blockquote><p id="8fdb" class="pw-post-body-paragraph kp kq in kr b ks lw jo ku kv lx jr kx ky ly la lb lc lz le lf lg ma li lj lk ig bi translated">另一个重要方面是对产品、代码和读者的同理心。让你的代码保持易读、易消费、易扩展的状态，给他们最好的体验。</p><p id="4ecd" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">罗伯特·C·马丁说过:“真理只能在一个地方找到:代码”。</p><p id="e2d9" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">让真相对每个人来说都很容易！</p><h1 id="d439" class="mi mj in bd mk ml ol mn mo mp om mr ms jt on ju mu jw oo jx mw jz op ka my mz bi translated">然后</h1><p id="74db" class="pw-post-body-paragraph kp kq in kr b ks na jo ku kv nb jr kx ky nc la lb lc nd le lf lg ne li lj lk ig bi translated">在以下文章中了解干净编码的更多方面:</p><p id="c5e0" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">干净代码的艺术。 <a class="ae ko" href="https://medium.com/dev-genius/art-of-clean-code-b921142a05e9" rel="noopener">这里指<em class="of"/></a><em class="of">。</em></p><p id="c991" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><em class="of">干净代码的艺术——错误处理。此处参照</em><a class="ae ko" href="https://medium.com/dev-genius/art-of-clean-code-error-handling-7951587eac98" rel="noopener"><em class="of"/></a></p><p id="dd66" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><em class="of">干净代码的艺术——日志。这里的</em>  <em class="of">参见</em> <a class="ae ko" href="https://medium.com/dev-genius/art-of-clean-code-logging-d760b0918603" rel="noopener"> <em class="of">。</em></a></p><h2 id="0ada" class="nt mj in bd mk nu nv dn mo nw nx dp ms ky ny nz mu lc oa ob mw lg oc od my oe bi translated">快乐学习，快乐编码！</h2></div><div class="ab cl mb mc hr md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ig ih ii ij ik"><p id="269d" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><em class="of">喜欢看这个，请分享，给个掌声，关注类似的故事！</em></p><p id="dfed" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><em class="of">如有任何建议，欢迎通过</em><strong class="kr io"><em class="of">Linkedin</em></strong><em class="of">:</em><a class="ae ko" href="https://www.linkedin.com/in/mohitkgupta/" rel="noopener ugc nofollow" target="_blank"><em class="of">Mohit Gupta</em></a>联系我</p></div></div>    
</body>
</html>