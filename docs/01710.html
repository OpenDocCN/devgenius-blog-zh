<html>
<head>
<title>Heroku. And why you need a data store with it.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">赫罗库。以及为什么需要一个数据存储。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/heroku-and-why-you-need-a-data-store-with-it-13586b0930be?source=collection_archive---------36-----------------------#2020-07-09">https://blog.devgenius.io/heroku-and-why-you-need-a-data-store-with-it-13586b0930be?source=collection_archive---------36-----------------------#2020-07-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="2ea8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">关于我犯的一个愚蠢的错误以及我如何从中吸取教训的故事。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/830842e89fe0ad0ce9520cc27b0ada87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U_ehviJMP6BNodea"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马库斯·斯皮斯克在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="5987" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我已经和been斯塔克共事了一段时间。MERN栈为全栈开发者提供了大量的可能性，使得以前不可能的事情现在变成了现实。尽管栈的能力可能令人吃惊，但是它们给开发环境和专门服务提供者带来了新的复杂性。</p><p id="bb56" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">到目前为止，就开发环境而言，我在构建节点应用程序方面的经验相当局限，我觉得没有必要部署任何使用持久存储的应用程序。我的第一个部署到服务器上的node应用程序是一个简单的游戏应用程序，是我为我的朋友们开发的，在使用时它通常会在很短的时间内处于活动状态，我在那段时间内想要的大部分东西都是通过使用全局变量来跟踪状态而实现的。许多人会说这不是一个好的开发实践，但我要为自己辩护，当时我时间很紧，而且当时我刚刚学习node。</p><p id="067a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">像许多开发者一样，我求助于Heroku，一个值得信赖的云服务提供商，免费部署我的应用程序。那时候效果很好，不像我做的游戏。</p><p id="090f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">继续，最近我构建了另一个节点应用程序。与以前的应用程序相比，这是一个相当简单的应用程序。这个应用程序的目的是为有竞争力的程序员提供问题(我把下面的链接给好奇的猫:P)。如果没有太多的复杂性，这个应用程序应该可以完美地运行，事实也确实如此。至少暂时如此。</p><p id="df7f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该应用程序可以添加更多的问题和一个简单的分析服务，让我知道有多少人访问了该网站。当我部署该网站并在服务器上测试时，它运行得非常好，所有的问题都显示出来了，分析日志也运行得非常好。</p><p id="04b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一段时间后，我发现所有的数据都丢失了。所以我搜索了一下，发现了一个StackOverflow的帖子，让我明白了使用Heroku的坏处。不完全是一个祸害，而是一个节省服务器资源的特性。提供应用程序的Heroku dyno在半小时后进入睡眠状态。</p><p id="9af2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在这是一个问题，就像任何优秀的开发人员一样，我开始寻找解决这个问题的方法，而不需要我修改代码。我遇到了一个建议，它建议ping dyno并通过添加遗物来保持它的清醒，但我不知道我是否对此有如此强烈的感觉，所以我决定将数据存储在托管文件系统上。</p><p id="5eda" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就在那时，我发现了另一个启示。问题依然存在。深入挖掘后，我发现当dyno重新启动时，Heroku会重置文件系统，当您在dyno重置后访问您的站点时，不会有任何存储的数据。</p><p id="d125" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我彻底崩溃了，因为这意味着我需要将一个外部数据库连接到我的应用程序，这很麻烦，也意味着要彻底修改我的代码。我设法将MongoDB添加到应用程序中，现在，应用程序按预期工作。这个问题有明显的解决方法，但从长远来看，我认为这是一个更好的选择。</p><p id="8bc8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是我的旅程，犯了一个有经验的开发人员会称之为愚蠢的错误。我没有用我的成功故事来鼓舞人心，而是选择告诉你们我犯的错误，以及我如何学会通过反复试验来纠正它，并在这个过程中学到了很多。我觉得这适用于任何事情，所以继续犯错，继续学习。我想引用阿尔伯特·爱因斯坦的话来结束我的演讲:</p><blockquote class="kz"><p id="ec54" class="la lb in bd lc ld le lf lg lh li kh dk translated">从不犯错的人也从不尝试新的事物。</p></blockquote><p id="4d80" class="pw-post-body-paragraph jk jl in jm b jn lj jp jq jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh ig bi translated">请在评论中留下你的想法，尤其是如果你犯了这样的错误并从中吸取了很多教训。节点app的链接(如果你想练习编码或者只是好奇:P)是:</p><h2 id="e98d" class="lo lp in bd lq lr ls dn lt lu lv dp lw jv lx ly lz jz ma mb mc kd md me mf mg bi translated">https://codesserver.herokuapp.com/<a class="ae ky" href="https://codesserver.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"/></h2><p id="f7da" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">请通过以下方式联系我:</p><h2 id="2fea" class="lo lp in bd lq lr ls dn lt lu lv dp lw jv lx ly lz jz ma mb mc kd md me mf mg bi translated">【https://www.linkedin.com/in/apoorv-goyal/ T4】</h2></div></div>    
</body>
</html>