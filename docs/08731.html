<html>
<head>
<title>Magic of Abstraction in Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">科特林的抽象魔法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/abstraction-in-modern-world-54022c477912?source=collection_archive---------2-----------------------#2022-07-06">https://blog.devgenius.io/abstraction-in-modern-world-54022c477912?source=collection_archive---------2-----------------------#2022-07-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7061" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本文将定义如何在 Kotlin 世界中准确地使用现代世界中的抽象。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/59a66aae30a1470961adfa2a1feebc4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CSORwRnc66-owP_9qDDKrg.png"/></div></div></figure><p id="bf9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们将实际代码隐藏在像函数或类这样的抽象之后时，我们不仅保护了用户免受这些细节的影响，而且我们也给了自己以后修改这些代码的自由。</p><p id="9bec" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">常数</strong></p><p id="0591" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">文字常量在被广泛使用时是有问题的，为了避免这种情况，我们应该使用抽象。</p><p id="04d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们以<strong class="jp ir">是一个无效的</strong>函数为例，如果名字有期望的长度，它返回 true。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kx"><img src="../Images/5eeaeeb5b3d8fc6345e8c24db2d6bf67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OUUQn0OHPWLQ1KeyFcvDpw.png"/></div></div></figure><p id="5d5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">数字 10 很容易理解，但如果我们将它声明为常数会更好，比如:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kx"><img src="../Images/8e26b451c87522de413233e1cb10645a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l7U3QVBMRXUE7-GFvuCKQw.png"/></div></div></figure><p id="6705" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以在不理解<strong class="jp ir">是无效的</strong>函数的逻辑的情况下改变这个值。如您所见，提取常量:</p><ul class=""><li id="f832" class="ky kz iq jp b jq jr ju jv jy la kc lb kg lc kk ld le lf lg bi translated">给个合适的名字。</li><li id="9a11" class="ky kz iq jp b jq lh ju li jy lj kc lk kg ll kk ld le lf lg bi translated">它帮助我们在未来改变它的重要性。</li></ul><p id="2d40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">功能</strong></p><p id="d8c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设您正在开发一个应用程序，并且您注意到您经常需要向用户显示一条 toast 消息。这是您以编程方式实现的方式:</p><pre class="km kn ko kp gt lm ln lo lp aw lq bi"><span id="6ab4" class="lr ls iq ln b gy lt lu l lv lw">Toast.makeText(<strong class="ln ir">this</strong>,message,Toast.LENGTH_LONG).show()</span></pre><p id="78b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以创建一个扩展函数来显示这个 toast:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lx"><img src="../Images/27a8542f8dac29fd882dc6025f8238cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IV3MSoHb7uWCMie4Ckg85w.png"/></div></div></figure><p id="2194" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，这看起来很完美，但是如果我们把这个函数的实现从 Toast -&gt; SnackBar 改变，我们还没有准备好。</p><p id="388d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">简单的解决方法是将这个函数从 toast -&gt; Snackbar 重命名为</p><pre class="km kn ko kp gt lm ln lo lp aw lq bi"><span id="8096" class="lr ls iq ln b gy lt lu l lv lw"><strong class="ln ir">fun </strong>Fragment.snackbar(message: String, duration: Int = <br/>...</span><span id="e667" class="lr ls iq ln b gy ly lu l lv lw">}</span></pre><p id="1b71" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个解决方案看起来很完美，但是很危险。当其他模块依赖于这个函数时，它们的功能会受到影响，特别是当参数也改变时。</p><p id="81da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为开发人员，我们可以创建一个名为<strong class="jp ir"> showMessage </strong>的高级函数，它可以处理显示 Toast 或 SnackBar 的复杂性。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lz"><img src="../Images/53f97bbc1d8d1d9fc44d60e09b834441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EuH7nBbHVeGVUQnfLeN8_A.png"/></div></div></figure><p id="a093" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所有内容都隐藏在 showMessage 函数中，但是函数不能保存状态。</p><p id="9e56" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">类</strong></p><p id="7ba3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是我们如何将消息显示抽象成一个类:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ma"><img src="../Images/6474b21c92034e86a39f8f62a363467c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0n-96iPeafyEYYYeTwCJWA.png"/></div></div></figure><p id="b03c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以在类中注入上下文，它也可以保存状态。</p><pre class="km kn ko kp gt lm ln lo lp aw lq bi"><span id="396a" class="lr ls iq ln b gy lt lu l lv lw"><strong class="ln ir">val message </strong>= ShowMessage(<em class="mb">context</em>)<br/>message.showMessage(<strong class="ln ir">"Test"</strong>)</span></pre><p id="5f50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">界面</strong></p><p id="6e99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将逻辑隐藏在类的后面是一个很棒的想法，但是我们可以将类隐藏在一个<em class="mb">接口的后面，这给了在类中添加特性更多的自由。</em></p><pre class="km kn ko kp gt lm ln lo lp aw lq bi"><span id="b1f5" class="lr ls iq ln b gy lt lu l lv lw"><strong class="ln ir">interface </strong>IMessageInterface {<br/>    <strong class="ln ir">fun </strong>showMessage(msg: String)<br/>}</span></pre><p id="bd7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了更多的自由，我们可以通过提供不同的实现来显示特定于平台的<strong class="jp ir">对话框/消息</strong>。</p><p id="be1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样。感谢阅读别忘了鼓掌订阅。</p><p id="6b27" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请继续关注另一篇文章。</p><div class="mc md gp gr me mf"><a href="https://medium.com/subscribe/@dev.soni04" rel="noopener follow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">每当 Dev Soni 发布时收到一封电子邮件。</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">每当 Dev Soni 发布时收到一封电子邮件。注册后，如果您还没有，您将创建一个中型帐户…</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">medium.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt kv mf"/></div></div></a></div><p id="d4b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">别忘了鼓掌…..</p><div class="mc md gp gr me"><div role="button" tabindex="0" class="ab bv gv cb fp mu mv bn mw kv ex"><div class="mx l"><div class="ab q"><div class="l di"><img alt="Dev Soni" class="l de bw my mz fe" src="../Images/b7e74f8cf984df8e9d68692dae026700.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*c_rkX-it-4qAfVlkkDYivA.png"/><div class="fb bw l my mz fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated"><a class="ae af ag ah ai aj ak al am an ao ap aq ar as" href="https://medium.com/@dev.soni04?source=post_page-----54022c477912--------------------------------" rel="noopener follow" target="_top">德夫·索尼</a></p></div></div><div class="nc nd gw l"><h2 class="bd ir sr ky fp ss fr fs ml fu fw ip bi translated">领导力和生活方式</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi st au su sv sw ow sx an eh ei sy sz ta el em eo de bk ep" href="https://medium.com/@dev.soni04/list/leadership-and-life-style-636d1a1f07bf?source=post_page-----54022c477912--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="tb l fo"><span class="bd b dl z dk">3 stories</span></div></div></div><div class="np dh nq fp ab nr fo di"><div class="di nh bv ni nj"><div class="dh l"><img alt="" class="dh" src="../Images/1f20e077044af6f06c79206d027f2ccd.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*Bf-PkXbKsjSuK9rk"/></div></div><div class="di nh bv nk nl nm"><div class="dh l"><img alt="" class="dh" src="../Images/d33d2cd4eade6e88606848f2592129f0.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*071JtWNaYetoG5k4uRsfCA.jpeg"/></div></div><div class="di bv nn no nm"><div class="dh l"><img alt="" class="dh" src="../Images/59092714edde99278854714bfb4707c0.png" width="194" height="194" loading="lazy" role="presentation" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/0*5UOK_ggvvm3zk2VW"/></div></div></div></div></div><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/bbc8c44c63335aac2baebcaf888557df.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/0*UHQMHtkVSSPfDeOR.gif"/></div></figure></div></div>    
</body>
</html>