# å•ä¸€è´£ä»»åŸåˆ™|åšå¦‚ç£çŸ³

> åŸæ–‡ï¼š<https://blog.devgenius.io/single-responsibility-principle-in-c-solid-as-a-rock-5273067350ae?source=collection_archive---------2----------------------->

![](img/a9ac676d18c59efd0a95642536a2b553.png)

æœ¬æ–‡æ˜¯å…³äºåšå¦‚ç£çŸ³è®¾è®¡åŸåˆ™ç³»åˆ—çš„äº”ç¯‡æ–‡ç« ä¸­çš„ç¬¬ä¸€ç¯‡ã€‚åšå®çš„è®¾è®¡åŸåˆ™é›†ä¸­äºå¼€å‘æ˜“äºç»´æŠ¤ã€å¯é‡ç”¨å’Œå¯æ‰©å±•çš„è½¯ä»¶ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ª C++ä¸­çš„å•ä¸€è´£ä»»åŸåˆ™çš„ä¾‹å­ï¼Œä»¥åŠå®ƒçš„å¥½å¤„ã€‚

> */ï¼\:åŸè½½@*[*www.vishalchovatiya.com*](http://www.vishalchovatiya.com/category/design-patterns/)*ã€‚*

é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰æµè§ˆè¿‡æˆ‘ä»¥å‰å…³äºè®¾è®¡åŸåˆ™çš„æ–‡ç« ï¼Œä¸‹é¢æ˜¯å¿«é€Ÿé“¾æ¥:

# ç›®çš„

> ***ä¸€ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªç†ç”±å»æ”¹å˜***

æ¢å¥è¯è¯´ï¼ŒSRP å£°æ˜ç±»åº”è¯¥å†…èšåˆ°å®ƒæœ‰å•ä¸€è´£ä»»çš„ç¨‹åº¦ï¼Œå…¶ä¸­è´£ä»»å®šä¹‰ä¸ºâ€œå˜åŒ–çš„åŸå› â€

# åŠ¨æœº:è¿åå•ä¸€è´£ä»»åŸåˆ™

```
class Journal {
    string          m_title;
    vector<string>  m_entries;public:
    explicit Journal(const string &title) : m_title{title} {}
    void add_entries(const string &entry) {
        static uint32_t count = 1;
        m_entries.push_back(to_string(count++) + ": " + entry);
    }
    auto get_entries() const { return m_entries; }
    void save(const string &filename) {
        ofstream ofs(filename); 
        for (auto &s : m_entries) ofs << s << endl;
    }
};int  main() {
    Journal journal{"Dear XYZ"};
    journal.add_entries("I ate a bug");
    journal.add_entries("I cried today");
    journal.save("diary.txt");
    return EXIT_SUCCESS;
}
```

*   ä¸Šé¢çš„ C++ä¾‹å­çœ‹èµ·æ¥ä¸é”™ï¼Œåªè¦ä½ æœ‰ä¸€ä¸ªå•ç‹¬çš„åŸŸå¯¹è±¡ï¼Œå³`Journal`ã€‚ä½†æ˜¯åœ¨çœŸå®çš„åº”ç”¨ç¨‹åºä¸­é€šå¸¸ä¸æ˜¯è¿™æ ·ã€‚
*   å½“æˆ‘ä»¬å¼€å§‹æ·»åŠ åƒ`Book`ã€`File`ç­‰åŸŸå¯¹è±¡æ—¶ã€‚æ‚¨å¿…é¡»ä¸ºæ¯ä¸ªäººåˆ†åˆ«å®ç° save æ–¹æ³•ï¼Œè¿™ä¸æ˜¯å®é™…é—®é¢˜ã€‚
*   å½“ä½ ä¸å¾—ä¸æ”¹å˜æˆ–ç»´æŠ¤`save`åŠŸèƒ½æ—¶ï¼ŒçœŸæ­£çš„é—®é¢˜å‡ºç°äº†ã€‚ä¾‹å¦‚ï¼ŒæŸä¸€å¤©ä½ å°†ä¸å†æŠŠæ•°æ®ä¿å­˜åœ¨æ–‡ä»¶&æ‰€é‡‡ç”¨çš„æ•°æ®åº“ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸å¾—ä¸ç»å†æ¯ä¸€ä¸ªåŸŸ[å¯¹è±¡å®ç°](http://www.vishalchovatiya.com/inside-the-cpp-object-model/) &éœ€è¦ä¿®æ”¹çš„ä»£ç éƒ½æ˜¯ä¸å¥½çš„ã€‚
*   åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¿åäº†å•ä¸€è´£ä»»åŸåˆ™ï¼Œæä¾›äº†`Journal`ç¬¬äºŒç±»å˜æ›´ç†ç”±ï¼Œå³ä¸`Journal`ï¼Œii ç›¸å…³çš„äº‹æƒ…ã€‚ä¿å­˜`Journal`
*   æ­¤å¤–ï¼Œä»£ç ä¹Ÿä¼šå˜å¾—é‡å¤ã€è‡ƒè‚¿&éš¾ä»¥ç»´æŠ¤ã€‚

# è§£å†³æ–¹æ¡ˆ:C++ä¸­çš„å•ä¸€è´£ä»»åŸåˆ™ç¤ºä¾‹

*   ä½œä¸ºè§£å†³æ–¹æ¡ˆæˆ‘ä»¬æ‰€åšçš„æ˜¯ [***åˆ†ç¦»å…³æ³¨ç‚¹***](https://en.wikipedia.org/wiki/Separation_of_concerns) ã€‚

```
class Journal {
    string          m_title;
    vector<string>  m_entries;public:
    explicit Journal(const string &title) : m_title{title} {} 
    void add_entries(const string &entry) {
        static uint32_t count = 1;
        m_entries.push_back(to_string(count++) + ": " + entry);
    } 
    auto get_entries() const { return m_entries; }
    //void save(const string &filename)
    //{
    //    ofstream ofs(filename); 
    //    for (auto &s : m_entries) ofs << s << endl;
    //}
};struct SavingManager {
    static void save(const Journal &j, const string &filename) {
        ofstream ofs(filename);
        for (auto &s : j.get_entries())
            ofs << s << endl;
    }
};SavingManager::save(journal, "diary.txt");
```

*   `Journal`åº”è¯¥åªç…§é¡¾æ¡ç›®&ä¸æ—¥å¿—æœ‰å…³çš„äº‹æƒ…ã€‚
*   åº”è¯¥æœ‰ä¸€ä¸ªå•ç‹¬çš„ä¸­å¿ƒä½ç½®æˆ–å®ä½“æ¥å®Œæˆå‚¨è“„å·¥ä½œã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯`SavingManager`ã€‚
*   éšç€ä½ çš„`SavingManager`çš„å¢é•¿ï¼Œæ‰€æœ‰ä¸ä¿å­˜ç›¸å…³çš„ä»£ç éƒ½ä¼šåœ¨ä¸€ä¸ªåœ°æ–¹ã€‚ä½ ä¹Ÿå¯ä»¥æ¨¡æ¿åŒ–å®ƒæ¥æ¥å—æ›´å¤šçš„åŸŸå¯¹è±¡ T2

# å•ä¸€è´£ä»»åŸåˆ™çš„å¥½å¤„

# = >è¡¨ç°åŠ›

*   å½“ç±»åªåšä¸€ä»¶äº‹æ—¶ï¼Œå®ƒçš„æ¥å£é€šå¸¸æœ‰å°‘é‡æ›´å…·è¡¨ç°åŠ›çš„æ–¹æ³•ã€‚å› æ­¤ï¼Œå®ƒä¹Ÿæœ‰å°‘é‡çš„æ•°æ®æˆå‘˜ã€‚
*   è¿™æé«˜äº†æ‚¨çš„å¼€å‘é€Ÿåº¦&ä½¿æ‚¨ä½œä¸ºè½¯ä»¶å¼€å‘äººå‘˜çš„ç”Ÿæ´»å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

# = >å¯ç»´æŠ¤æ€§

*   æˆ‘ä»¬éƒ½çŸ¥é“éœ€æ±‚ä¼šéšç€æ—¶é—´è€Œå˜åŒ–&è®¾è®¡/æ¶æ„ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½ çš„ç±»çš„èŒè´£è¶Šå¤šï¼Œä½ å°±è¶Šéœ€è¦ç»å¸¸æ”¹å˜å®ƒã€‚å¦‚æœæ‚¨çš„ç±»å®ç°äº†å¤šä¸ªèŒè´£ï¼Œå®ƒä»¬å°±ä¸å†ç›¸äº’ç‹¬ç«‹ã€‚
*   å­¤ç«‹çš„æ›´æ”¹å‡å°‘äº†å¯¹è½¯ä»¶å…¶ä»–ä¸ç›¸å…³åŒºåŸŸçš„ç ´åã€‚
*   ç”±äºç¼–ç¨‹é”™è¯¯ä¸å¤æ‚æ€§æˆåæ¯”ï¼Œæ›´å®¹æ˜“ç†è§£ä½¿å¾—ä»£ç æ›´ä¸å®¹æ˜“å‡ºé”™&æ›´å®¹æ˜“ç»´æŠ¤ã€‚

# = >å¯é‡ç”¨æ€§

*   å¦‚æœä¸€ä¸ªç±»æœ‰å¤šä¸ªèŒè´£ï¼Œå¹¶ä¸”åœ¨è½¯ä»¶çš„å¦ä¸€ä¸ªé¢†åŸŸä¸­åªæœ‰å…¶ä¸­ä¸€ä¸ªéœ€è¦ï¼Œé‚£ä¹ˆå…¶ä»–ä¸å¿…è¦çš„èŒè´£ä¼šé˜»ç¢å¯é‡ç”¨æ€§ã€‚
*   æ‹¥æœ‰ä¸€ä¸ªå•ä¸€çš„èŒè´£æ„å‘³ç€è¿™ä¸ªç±»ä¸éœ€è¦ä¿®æ”¹æˆ–è€…ä¿®æ”¹å¾ˆå°‘å°±å¯ä»¥é‡ç”¨ã€‚

# ç”¨ C++åˆ¶ä½œ SRP å‹å¥½è½¯ä»¶çš„å°ºåº¦

*   SRP æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚å¤ªå…·ä½“äº†&ä½ å°†æœ€ç»ˆæ‹¥æœ‰æ•°ç™¾ä¸ªå¯ç¬‘çš„ç›¸äº’å…³è”çš„ç±»ï¼Œå¾ˆå®¹æ˜“æˆä¸ºä¸€ä¸ªã€‚
*   å½“ä½ è§‰å¾—ä½ è¿‡åº¦å·¥ç¨‹åŒ–æ—¶ï¼Œä½ ä¸åº”è¯¥ä½¿ç”¨åšå®çš„åŸåˆ™ã€‚å¦‚æœä½ æŠŠå•ä¸€è´£ä»»åŸåˆ™å½’ç»“èµ·æ¥ï¼Œä¸€èˆ¬çš„æƒ³æ³•åº”è¯¥æ˜¯è¿™æ ·çš„:

***SRP æ˜¯å…³äºé™åˆ¶å˜åŒ–çš„å½±å“ã€‚æ‰€ä»¥ï¼ŒæŠŠé‚£äº›å› ä¸ºåŒæ ·çš„åŸå› è€Œæ”¹å˜çš„ä¸œè¥¿æ”¶é›†åœ¨ä¸€èµ·ã€‚æŠŠé‚£äº›å› ä¸ºä¸åŒåŸå› è€Œæ”¹å˜çš„ä¸œè¥¿åˆ†å¼€ã€‚***

*   æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœä½ çš„ç±»æ„é€ å‡½æ•°æœ‰ 5-6 ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œè¿™æ„å‘³ç€ä½ è¦ä¹ˆæ²¡æœ‰éµå¾ª SRPï¼Œè¦ä¹ˆä½ æ²¡æœ‰æ„è¯†åˆ°æ„å»ºå™¨çš„è®¾è®¡æ¨¡å¼ã€‚

# ç»“è®º

SRP æ˜¯ä¸€ä¸ªè¢«å¹¿æ³›å¼•ç”¨çš„é‡æ„ç†ç”±ã€‚è¿™å¾€å¾€æ˜¯åœ¨æ²¡æœ‰å……åˆ†ç†è§£ SRP çš„è¦ç‚¹åŠå…¶èƒŒæ™¯çš„æƒ…å†µä¸‹å®Œæˆçš„ï¼Œå¯¼è‡´ä»£ç åº“çš„ç¢ç‰‡åŒ–ï¼Œå¸¦æ¥ä¸€ç³»åˆ—è´Ÿé¢åæœã€‚SRP ä¸æ˜¯ä¸€æ¡é€šå‘æœ€å°è§„æ¨¡ç­çº§çš„å•è¡Œé“ï¼Œå®ƒå®é™…ä¸Šæ˜¯åœ¨èšé›†å’Œåˆ’åˆ†ä¹‹é—´æå‡ºäº†ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚

[æœ‰ä»€ä¹ˆå»ºè®®ï¼ŒæŸ¥è¯¢æˆ–è€…æƒ³è¯´](http://www.vishalchovatiya.com/contact-2/) `[Hi](http://www.vishalchovatiya.com/contact-2/)` [ï¼Ÿå‡è½»å‹åŠ›ï¼Œåªéœ€ç‚¹å‡»ä¸€ä¸‹é¼ æ ‡ã€‚](http://www.vishalchovatiya.com/contact-2/) ğŸ–±ï¸