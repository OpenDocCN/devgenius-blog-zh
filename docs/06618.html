<html>
<head>
<title>Vulnerability Scanning with Nessus and Remediation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Nessus漏洞扫描和补救</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vulnerability-scanning-with-nessus-and-remediation-60844d17bda4?source=collection_archive---------5-----------------------#2022-01-20">https://blog.devgenius.io/vulnerability-scanning-with-nessus-and-remediation-60844d17bda4?source=collection_archive---------5-----------------------#2022-01-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b641ce4cbc21e50cc40f847bdab4c316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9wI5QtMiDntbHIMN"/></div></div></figure><h2 id="5e6b" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">涅索斯</h2><p id="f5ea" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">Tenable的Nessus是一个漏洞扫描工具，用于通过各种插件扫描网络中的已知漏洞。其他类型的漏洞扫描器包括Qualys、Rapid7和OpenVAS。有几个不同版本的Nessus可供使用:</p><ul class=""><li id="5b1e" class="lm ln in kt b ku lo ky lp ke lq ki lr km ls ll lt lu lv lw bi translated">Nessus必需品</li><li id="7bf7" class="lm ln in kt b ku lx ky ly ke lz ki ma km mb ll lt lu lv lw bi translated">Nessus专业版</li><li id="a190" class="lm ln in kt b ku lx ky ly ke lz ki ma km mb ll lt lu lv lw bi translated">Tenable.io</li></ul><p id="9c74" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">Nessus Essentials是我将使用的，因为它是免费的，你可以扫描多达16个不同的IP地址。另外两个版本是付费版本，带有附加功能。Essentials将有利于教育工作者、学生或刚刚进入网络安全领域的人。这是一个很好的工具，可以用来更好地熟悉漏洞扫描器，学习如何解释结果，并使用结果来帮助确定漏洞修复的优先级。</p><p id="8bef" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">这些扫描可以在没有凭证的情况下执行，并且将提供对从网络外部扫描的人可能发现的内容的洞察。另一方面，凭证扫描可能会发现网络内部的大量漏洞，并且应该使用只读凭证来执行。根据组织的需要，扫描也可以是侵入式或非侵入式的。</p><p id="8a09" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">资产重要程度有助于指导关于所执行的扫描类型、扫描频率和补救优先级的决策。Nessus的一个特性是能够配置自动扫描计划，并在检测到新漏洞时提供自动警报。另一个功能是能够创建扫描模板，这有助于减少配置未来扫描的错误。</p><p id="8f95" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在模板的帮助下，可以通过配置特定的插件来检查特定的漏洞，从而提高效率。您可以检查根据操作系统、应用程序或设备分组的漏洞。禁用不必要的插件将提高速度，减少“误报”我最近听说假阳性不是真的，它们只是一个调整你的扫描仪和警报的机会。让插件保持最新，如果可能的话每天更新，是扫描器检测漏洞的准确性的关键。</p><h2 id="0b68" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">获取激活码</h2><p id="db72" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">我将介绍如何在VMware托管的Kali Linux上设置Nessus。首先，您需要注册，以便通过电子邮件接收激活码。你可以通过导航到<a class="ae mf" href="https://www.tenable.com/products/nessus/nessus-essentials" rel="noopener ugc nofollow" target="_blank">https://www.tenable.com/products/nessus/nessus-essentials</a>来实现。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mg"><img src="../Images/d166f337ba3cb6a7b0e81b8bbf269ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E7WaBokOaw1JIpFuEWeRyg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">Nessus注册页面</figcaption></figure><p id="dcf1" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated"><strong class="kt io">下载Nessus </strong></p><p id="45ae" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">注册后，它会提供一个提示，以便下载Nessus。但是，如果没有，您可以导航到https://www.tenable.com/downloads/nessus?的<a class="ae mf" href="https://www.tenable.com/downloads/nessus?loginAttempted=true" rel="noopener ugc nofollow" target="_blank">loginatcited = true</a>。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/f0011f8f3bf7b9f6ea3aab1e7261aba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K31ohJKhG-FkaohddAryQA.png"/></div></div></figure><p id="eedb" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">找到适合您的操作系统的下载。因为我是在VMware中为Kali Linux下载的，所以我将使用<strong class="kt io">Nessus-10 . 0 . 2-debian 6 _ amd64 . deb</strong>。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/589ced0873b046182bee39974a769af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-iukF_1YlfuI8qNd7X_-uw.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">Nessus下载页面</figcaption></figure><h2 id="4676" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">安装Nessus</h2><p id="c100" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">下载完文件后，您需要导航到保存文件的目录。使用<strong class="kt io"> dpkg </strong>安装Nessus。Dpkg是一个中级命令行工具，用于安装、构建、删除和管理Debian软件包。运行带有<strong class="kt io"> -i </strong>标志的dpkg将安装指定的包文件。此命令需要使用sudo权限运行。其格式应该是:<strong class="kt io"> sudo dpkg -i &lt;您下载的Nessus包的名称&gt; </strong></p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/140cd6f733720b94023b37f9ff3666ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*YL3lU3NWW9OaxK4MKPfHnQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">安装Nessus的命令</figcaption></figure><p id="b74d" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">Nessus解压缩后，它应该会为您提供启动服务的说明，以及在浏览器中导航到何处以配置扫描仪。给我的启动服务的命令是<strong class="kt io">/bin/system CTL start ness USD . service .</strong>浏览器的地址应该是<strong class="kt io">https://localhost:8834/</strong></p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/05b905cdfad61d849c5c544b3567e659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6eTubq2Twhyzr0wtqJqj1g.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">您的本地主机会有所不同。不要使用magicbox</figcaption></figure><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/aaac02ebce8521f6b8dd3e92818afe7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*J0UrXm8vxvrHzq2UcCdoLg.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">启动Nessus的命令</figcaption></figure><h2 id="f94b" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">启动Nessus</h2><p id="5715" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">导航到该站点时，您可能会收到一条关于SSL证书的警告。您可以通过点击<strong class="kt io">高级</strong>来忽略这一点，然后<strong class="kt io">接受风险并继续</strong>。在下一个屏幕上，选择<strong class="kt io"> Nessus Essentials </strong>，然后继续。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mu"><img src="../Images/9fdc6d0ceccd4acf25394f6df0173b94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/0*vudC9bohPn6YcBlc"/></div></div></figure><p id="56c6" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">如果您已经注册并申请了激活码，您可以点击<strong class="kt io">跳过</strong>。但是，如果您还没有，您可以在此申请激活码。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/ab982bf35bac18d63ef98d5ee0edd6ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/0*ndcJlVY4DHVNZBLt"/></div></figure><p id="6f09" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">输入您收到的激活码。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/20a660df39099eb4d2d2b36990d89ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/0*-T5y6ftiH9A8EhYL"/></div></figure><p id="1c38" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">创建您的<strong class="kt io">用户名</strong>和<strong class="kt io">密码</strong>并点击提交。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/563f12409b7e41be23e3a11c43ea9751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/0*Ujd6Egq6gFhNYtWr"/></div></figure><p id="50a9" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">接下来，你会看到Nessus正在编译用于扫描的插件。这可能需要一段时间，取决于各种因素，但我的大约需要10-15分钟。我见过耗时长达15-25分钟的。如前所述，建议定期下载任何新的插件，最好是每天下载。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/4d8aadf16f48f091122b18ac7fc631ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/0*yskP9zqiaGXs1ZHc"/></div></figure><h2 id="02c0" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">配置扫描</h2><p id="b962" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">当您第一次加载时，它会询问您是否要进行主机发现，以及您要扫描的IPv4 CIDR范围。我为Nessus提供了我的虚拟机使用的网络的IPv4 CIDR符号。您可以输入特定的IP地址、IP地址范围、CIDR符号或域名。输入目标后，点击<strong class="kt io">提交</strong>。这将为您提供所提交目标的主机列表，并为您提供选择运行扫描的特定地址的选项。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9832444f7709b950ea594cefec6f8cee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bI2pE0ZBo5O1Qzzo"/></div></div></figure><p id="cdd9" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">您可以通过点击右上角的<strong class="kt io">新扫描</strong>从<strong class="kt io">我的扫描</strong>或<strong class="kt io">所有扫描</strong>创建新扫描。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/0b1cdf92bc8f263a02f9d6dcf847a5db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLIJp2GjrGLNzPv01yf9tw.png"/></div></div></figure><p id="6965" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">您可以运行不同类型的扫描，但对于此漏洞扫描，我们将重点关注<strong class="kt io">基本网络扫描</strong>。开始扫描之前，您可以用不同的方式配置扫描。在<strong class="kt io"> General </strong>下，您可以命名扫描、提供扫描描述、保存扫描的位置以及定义扫描目标。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/324cfad04cd54f7dc0359c451d68d768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*odHGYe0G3u56NE_I8gtAnQ.png"/></div></div></figure><p id="f7dc" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">您可以设置执行该扫描的预定时间间隔。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/791262a1469cb6b1d1158b1e1db689d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSheuSzcgntALwBCAz8xkw.png"/></div></div></figure><p id="ef59" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">如果配置了SMTP服务器，您可以在<strong class="kt io">通知</strong>下设置通过电子邮件发送警报。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/cc45310da6388881fd65b7d745ea7f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Miv3YtVOajNgSh4h_tlWA.png"/></div></div></figure><p id="5e31" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">对于<strong class="kt io">发现</strong>，您可以设置想要扫描的端口——通用、全部或自定义。这将取决于你在寻找什么。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/da8a305f86496cc522288416670ac487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SBAGgjM6yPMHiG9_DvhDug.png"/></div></div></figure><p id="14e1" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在<strong class="kt io">评估</strong>下，您可以设置扫描仪以各种方式扫描网络漏洞。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/376f2a8874063d8cd9fac7d86e01a97f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_toBRwdEruj1lp0vMyP75w.png"/></div></div></figure><p id="e9ef" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated"><strong class="kt io">凭证</strong>提供了配置凭证扫描的机会。从网络内外的不同点运行扫描可能会发现不同的漏洞。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/c40eabd2e49f6c8e8224545280612f4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_Fni9nmxYcxYaPBTkLrvQ.png"/></div></div></figure><p id="81ec" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在<strong class="kt io">插件</strong>下，您可以决定包含或排除哪些插件，从而使您能够调整扫描仪。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/4479edc684d8def3040ac30f5c58b4ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P9lVpKFLRN9DlTeg-vdHuA.png"/></div></div></figure><p id="745e" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">为目标配置扫描后，单击<strong class="kt io">保存</strong>旁边的小箭头，然后单击<strong class="kt io">启动</strong>；这将开始扫描。启动扫描还有其他一些方法。从“我的扫描”文件夹中选择一个扫描，您可以单击<strong class="kt io">播放按钮</strong>启动扫描，或者您可以选择一个特定的扫描，然后从工具栏中单击<strong class="kt io">启动</strong>。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/93d373fc7d31f6c3f5fc48dfa7558a67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TQa8BEhNIPWY8MwDewY9sw.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">配置后启动扫描</figcaption></figure><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/578ffc2e9150373fa3c953fdf67aee2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s1HIF8pwxgBFtPltL7a6WA.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">使用播放按钮从我的扫描启动扫描</figcaption></figure><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/c9d24e1181f89d08bc266c8258616567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S8iLbLFQ_0-itln-Q9QA_w.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">从已配置的扫描启动扫描</figcaption></figure><p id="7888" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">一旦扫描开始，可以通过在<strong class="kt io">我的扫描</strong>下选择该扫描来检查进度。我的扫描还将显示已运行的先前配置扫描的历史记录，以便您可以跟踪一段时间内的变化。</p><h2 id="6d6a" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">扫描结果</h2><p id="215a" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">我对AWS上易受攻击的EC2实例进行了扫描。如果目标包括多个主机，它们将显示在<strong class="kt io">主机</strong>下。我将回顾如何在扫描完成后进行导航。这些结果显示了发现的漏洞数量的总体概况。您可以看到一个彩色编码的饼图，表示漏洞不同严重级别的百分比。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/d8b9bfc16c3f38daf59345214800e506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DIYAH8IxRabpNOcI_YJtTQ.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">特定扫描的主机选项卡</figcaption></figure><p id="70b4" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">点击进入<strong class="kt io">漏洞</strong>选项卡，将显示发现的特定漏洞——提供名称、家族以及漏洞出现的次数。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/3e613c5ffcd0accb831175a947fd5d2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xnk_3a9OQ86Bz_u6f6NNgg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">显示发现的所有漏洞的漏洞选项卡</figcaption></figure><p id="dbca" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在这里，您可以单击每个特定的漏洞，以获得每个漏洞的更多详细信息。这里有丰富的信息—漏洞的严重性、漏洞的名称、描述、解决方案、利用漏洞的输出、发现漏洞的主机、插件详细信息、风险信息、漏洞信息，以及了解漏洞更多信息的参考信息。掌握这些信息对于了解漏洞是什么、如何利用漏洞以及如何补救漏洞非常重要。CVSS(通用漏洞评分系统)也有助于洞察与漏洞相关的风险。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/8e09cf1f60d936d83b4026511f2b09ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gWbJp3Jfwm--AYHMIdm-jg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">点击特定漏洞的示例</figcaption></figure><p id="57ea" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated"><strong class="kt io"> VPR主要威胁</strong>选项卡提供了修复十大漏洞的优先级建议。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/0d2a66850f39193c0e85dc031d757a91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xeui3jlUtLtVg5AJqfMYTw.png"/></div></div></figure><h2 id="334c" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">修复漏洞</strong></h2><p id="84ce" class="pw-post-body-paragraph kr ks in kt b ku kv kw kx ky kz la lb ke lc ld le ki lf lg lh km li lj lk ll ig bi translated">在尝试确定漏洞修复的优先级时，有许多因素需要考虑。风险=威胁x漏洞；没有其中之一，风险就不会存在。人们必须考虑漏洞被利用的可能性以及该漏洞被利用的影响。应对风险有不同的方式，包括:</p><ul class=""><li id="af60" class="lm ln in kt b ku lo ky lp ke lq ki lr km ls ll lt lu lv lw bi translated">降低风险—通过设计、实施和管理安全控制来降低风险</li><li id="6377" class="lm ln in kt b ku lx ky ly ke lz ki ma km mb ll lt lu lv lw bi translated">规避风险—改变业务实践消除潜在的风险</li><li id="9995" class="lm ln in kt b ku lx ky ly ke lz ki ma km mb ll lt lu lv lw bi translated">风险转移——将风险的影响从组织转移到某人或某物上。示例—购买涵盖该风险的保险单</li><li id="df39" class="lm ln in kt b ku lx ky ly ke lz ki ma km mb ll lt lu lv lw bi translated">接受风险——什么都不做，把接受风险作为经营企业的一部分</li></ul><p id="e1e5" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">有些人可能认为，总是首先确定关键漏洞的优先级是最佳实践。但是，可能会出现这样的情况，即某个漏洞非常严重，但利用该漏洞的可能性非常小，因此它不会出现在补救列表的首位。通常，扫描的低级别或信息结果很容易被利用，可能会给组织带来巨大的不利影响。</p><p id="2a4d" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">不同的组织会有不同的优先级，因为每个组织都是独特的。需要保护的资产、对漏洞的了解、时间、金钱和复杂性是确定补救工作优先级时需要考虑的几个因素。</p><p id="71a1" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">计划首先在沙盒环境中测试修复，以降低中断业务运营或损坏信息资产的可能性。通过重复最初检测到漏洞的漏洞扫描，检查以确保缓解措施有效。</p><p id="9779" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">我想对我的Nessus扫描在易受攻击的EC2实例上发现的漏洞进行补救。我将使用在我的VPC的私有子网中设置的实例。为了访问控制台，我使用SSH和在AWS中创建实例时创建的PEM文件。</p><h2 id="96f1" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">弹震症</h2><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/2e0ffac754a6026852b9286de7cc05ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8lBVDDxAKW7TSEFiffRVwQ.png"/></div></div></figure><p id="bf6f" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">Shellshock是Bash命令行界面shell (GNU Bash直到4.3版)中的一个bug，它已经存在了30年，但在2014年作为CVE-2014–6271成为一个重大威胁。然而，直到今天，它仍然是对组织的威胁。多年来，该漏洞已被更新为CVE-2014–7169，并一直修改到2018年。</p><p id="46b7" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">这个漏洞很简单，也不贵，所以它今天仍然存在。针对此漏洞的修补程序是可用的，但是没有适当修补程序管理的组织仍然容易受到攻击。该漏洞使得攻击者能够远程利用bash从环境变量中执行无意的Bash命令，并可能具有提升的权限。Bash本身并不使用互联网，但是很多内部和外部服务，比如web服务器，使用环境变量与服务器的操作系统进行通信。</p><p id="0ed3" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">输入净化是抵御这种攻击的一种方法。如果输入未经净化，攻击者可能会启动通过Bash shell执行的HTTP请求命令。这些命令可能导致信息泄露、拒绝服务(DoS)、创建一个返回给攻击者的反向外壳、启动程序以及执行恶意软件。</p><p id="66b9" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">一种补救Shellshock的方法是应用合适的补丁。可以在扫描结果的参考信息部分找到该信息。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/c4d9db0e304587641aa105f0ed485001.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*wk2w-1nj35zHNpYfxX4RLA.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">关于Shellshock的信息</figcaption></figure><p id="05a0" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">但是，我将通过一些测试来手动修复此漏洞。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi np"><img src="../Images/1b7b0a4f690220e06e78d1c7a8d3eb98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*UT8mrFsXsKIu2ZSYf39KMQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">通过HTTP请求利用漏洞</figcaption></figure><p id="0376" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">由于Nessus能够通过将HTTP GET请求中的User-Agent修改为/cgi-bin/test.cgi来执行远程代码执行，所以我尝试使用Burp Suite来测试同样的事情。我复制了用户代理的内容，但是将Bash命令的id改为cat <strong class="kt io"> /etc/passwd </strong>。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/9b49ede56c672ee493a11519c4c139aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jwstf_wJLjHCsKDcJdNpRQ.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">使用Burp套件测试RCE</figcaption></figure><p id="9da7" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">这里的问题似乎是web应用有一个统一的资源标识符(URI)<strong class="kt io">/CGI-bin/test . CGI</strong>。web服务器的文件通常在<strong class="kt io"> /var/www </strong>目录中，所以我决定去那里看看。我使用命令ls <strong class="kt io"> /var/www </strong>显示那里有一个<strong class="kt io"> cgi-bin </strong>目录。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/0ed5768e26e1f5fe5c4c4edb830dba04.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*N2pwag91kQjh5ayyf2wBgQ.png"/></div></figure><p id="29e7" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">我用<strong class="kt io"> cd </strong>换到<strong class="kt io"> cgi-bin </strong>目录，用<strong class="kt io"> ls </strong>列出内容，找到带有<strong class="kt io"> test.cgi </strong> bash脚本的文件。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/c3f115708a8122ecd062dee2073138ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*dTJnzGv9FmKhEmlFNxtlhw.png"/></div></figure><p id="e621" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">我用<strong class="kt io">猫</strong>读取了<strong class="kt io"> test.cgi文件</strong>。这个bash脚本有一个shebang，用于告诉操作系统使用哪个解释器来解析文件的其余部分。这里，shebang指向<strong class="kt io"> /usr/local/bin/bash </strong>。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/139981b0316cbbbdf706604cc55377e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*5TxnRrkXJOk6guC5emecTQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">test.cgi文件的内容</figcaption></figure><p id="1590" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">我使用以下命令检查Bash的版本:</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nu"><img src="../Images/67865b9ae223614f25fb47dfae049cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZVLwc01Nb-TOX5NBA6LAg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">检查Bash版本</figcaption></figure><p id="4cd7" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">这向我展示了bash的这个版本是4.3.0。我想检查一下这里是否有bash的其他版本，所以我运行了命令:<strong class="kt io">find/-name bash 2&gt;/dev/null</strong>。这将使用find命令从根目录开始查找名为bash的文件，并将任何标准错误输出到/dev/null。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/daaea0326f6eccc60cba4d18c92228e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*ns-25qa2OAkaXqN1ISugnw.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">寻找其他狂欢地点</figcaption></figure><p id="2c8b" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">bash有3个不同的位置，包括我已经检查过的那个。我使用与之前相同的方法检查了另外两个Bash文件的版本。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/e2265784a3f0d5d34da422fb0e3b74d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*YYzpG8Yzg-71njLdUloHSQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">/usr/bin/bash的版本是4.2.46</figcaption></figure><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/b35393811daa51356f4c50489937e40f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*74aXyPg9HDvwFzjZhVzJrw.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">/home/ec2-user/bash-4.3/bash的版本是4.3.0</figcaption></figure><p id="c073" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">因为系统上有另一个Bash版本，所以我想看看它是否也容易受到攻击。我用<strong class="kt io"> vim </strong>编辑了<strong class="kt io"> test-cgi </strong>文件并将shebang改为指向<strong class="kt io"> /usr/bin/bash </strong>而不是<strong class="kt io"> /usr/local/bin/bash </strong>。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/f194e587b7ebc3b314e1341903bce994.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*7U-_2KSiBs3fqpA6WlgWKA.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">检查以确保它指向Bash版本4.2.46</figcaption></figure><p id="8c38" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在将test-cgi文件指向Bash版本4.2.46之后，我检查了是否能够使用Burp Suite对该漏洞进行同样的利用。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nz"><img src="../Images/5d6f53f0511daf049c9f1ae728e61e5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LrORr8o77GgmHPfN09X0fg.png"/></div></div></figure><p id="8340" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">我使用与之前相同的命令，但是响应返回“Testing”而不是“Testing”并输出/etc/passwd文件。我发现有趣的是，它说Bash直到4.3.0版本都是易受攻击的，但4.2.46版本不是。似乎4.2.46版可能包含了针对此漏洞的热修复程序。当版本4.3.0发布时，该漏洞被重新引入Bash。</p><h2 id="19ad" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">中小企业客户帐户</h2><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oa"><img src="../Images/fe0c20c61da8ee083280f439c58d16dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qXYef4CrLSnBL3-haw9j9g.png"/></div></div></figure><p id="920c" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">软件不一定总是漏洞的原因；由于不安全的配置，可能会出现漏洞。SMB(服务器消息块)协议是一种网络文件共享协议，通常在Windows上使用。Samba是SMB的免费软件实现，可以在大多数类似Unix的系统上运行。</p><p id="780b" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">SMB在网络上的节点之间提供对文件和打印机的共享访问。另一个特性是提供一个经过验证的进程间通信机制，操作系统提供这种机制来允许进程管理共享数据。</p><p id="4a6e" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">将SMB配置为启用来宾访问是不安全的。我能够在没有密码的情况下连接到<strong class="kt io"> <em class="ob">测试</em> </strong>共享。在下面的命令中，<strong class="kt io"> -U </strong>标志用于定义一个用户，而<strong class="kt io">" "</strong>实质上提供了一个空的用户名。语法通常是:</p><blockquote class="oc od oe"><p id="965d" class="kr ks ob kt b ku lo kw kx ky lp la lb of mc ld le og md lg lh oh me lj lk ll ig bi translated"><strong class="kt io"> smbclient &lt;选项&gt; \\ &lt; ip地址&gt; \\ &lt;共享名&gt; </strong></p></blockquote><p id="d9a8" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">但是，由于shell的限制，需要对反斜线进行转义。如果这里有任何敏感信息，泄露出来并不困难，所以需要解决这个问题。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/7d6dff498228c5bf63ad17add0273289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*Hr9N_bLqV_SKB7mgXXCdNg.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">在没有密码和空白用户名的情况下连接到SMB</figcaption></figure><p id="a89c" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">为了补救此漏洞，我们需要对samba配置文件进行一些更改。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/30e8191ae959cb5be553f79326f116d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*g6EH9yV9OdZ5Ot3_tn031g.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">在提升的权限下使用文本编辑器打开配置文件</figcaption></figure><p id="8420" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在<strong class="kt io">全局下，客人ok </strong>应设置为<strong class="kt io"> No </strong>和<strong class="kt io"> map to guest </strong>应设置为<strong class="kt io"> Never </strong>。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/5b89ea3ec57d114c27bd63671cf58b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*Uhi_SgEvBGePgY-bU9pH6Q.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">更改配置以修复漏洞</figcaption></figure><p id="376a" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在进行了这些配置更改之后，我试图再次连接到<strong class="kt io">测试</strong>共享，但是这次我被拒绝访问。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/56c0a38af87c925b875a79650e39e1b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*Bh0-Df3CDwjF0H3_pQImUw.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">更改配置后尝试连接失败</figcaption></figure><h2 id="4d11" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">不需要SMB签名</h2><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi om"><img src="../Images/7c3058a5bf491f0c794738c4da3e4f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8X-fMa5jxH_UvU4exROZ4Q.png"/></div></div></figure><p id="6119" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">SMB签名提供了使用加密技术对SMB连接进行数字签名的能力。数字签名保证了传输数据的完整性。每封SMB邮件都包含使用会话密钥和AES算法生成的签名。客户端将整个消息的哈希放入SMB标头的签名字段中。</p><p id="9a9d" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">这些签名提供了一种防止中间人攻击的方法。如果有人在传输中修改了消息，哈希将不会匹配。如果哈希不匹配，SMB将知道数据已更改。签名还提供确认发送者和接收者身份的不可否认性。</p><p id="4a0a" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">要解决此问题，需要更改主机配置文件中的消息签名。在Samba中它被称为服务器签名，而不是消息签名。要获得这些设置，我们需要遵循与之前的补救措施类似的步骤。</p><p id="db3d" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">导航到<strong class="kt io"> smb.conf </strong>文件中的<strong class="kt io">全局</strong>部分。使用文本编辑器打开文件并更改配置。我更新了<strong class="kt io">服务器最小协议= SMB2 </strong>并在底部添加了<strong class="kt io">服务器签名=强制</strong>。保存文件并退出文本编辑器。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi on"><img src="../Images/cdfdba47293d0b5f8c3e7c6e9ece4cbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*FkrZSb5oFfNBY8n1qh2GAA.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">更改smb.conf</figcaption></figure><p id="2564" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">为了使这些更改生效，需要重新启动SMB。我用下面的命令重启了服务:<strong class="kt io">sudo system CTL restart SMB</strong>。这应该可以修复漏洞，但在我再次运行漏洞扫描后，将会检查这一点。</p><h2 id="5a32" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">匿名FTP</h2><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oo"><img src="../Images/bba85ae5db9e9d8e497349cb1102a2d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lptBbnv3ZqfKLiGyCfVOzQ.png"/></div></div></figure><p id="d5aa" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">FTP(文件传输协议)用于将文件从服务器传输到网络上的客户端。这是一个不安全的协议，因为它以明文显示所有内容，因此监听的人很容易获得凭据。密码重用可能是一个问题，因此攻击者可能会试图使用这些凭据来攻击其他服务。SFTP (SSH文件传输协议)或FTPS(安全文件传输协议)是更安全的文件传输方式。</p><p id="8355" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">匿名FTP允许用户使用用户名Anonymous通过FTP连接，无需密码。与SMB来宾帐户类似，在匿名登录的情况下将敏感信息存储在FTP中是有害的。为了连接到FTP，请使用以下命令:</p><p id="1d69" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated"><strong class="kt io">FTP&lt;IP地址&gt;T1。<strong class="kt io"> -p </strong>用于被动连接FTP。</strong></p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi op"><img src="../Images/d848845e8db5e654d78684e3f691b7eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CWPbPS-ccIrK0Mg1GjuUFA.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">使用匿名登录</figcaption></figure><p id="a891" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">权限仍然起着决定什么能被访问，什么不能被访问的作用。一旦我连接上了，我试着用命令<strong class="kt io"> mget -r. </strong>看看我能检索到什么。这个命令将在当前目录中递归地得到多个条目。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oq"><img src="../Images/765ff552a1a3e44389ee4b61c223009a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SBDQpS5JFt3x6Scc0pkoOg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">尝试下载文件</figcaption></figure><p id="bd61" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">连接FTP后，我可以从2个文件中获取1个。在这种情况下，它只是一个简单的测试文件，但在现实世界中，它可能是一个配置文件、密码文件或任何其他敏感文件。</p><p id="342a" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">同样，此漏洞的存在是因为不安全的配置。为了修复漏洞，需要对配置文件进行更改。使用sudo权限打开配置文件。您的ftp配置文件的位置可能与我的不同。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi or"><img src="../Images/c675c99cd918d1583b9fbdb1084ca3c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*iYF-5bdv7Tb4gJbbkgGCKA.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">使用sudo权限用文本编辑器打开配置文件</figcaption></figure><p id="88f6" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">更改<strong class="kt io">匿名_启用=否</strong>。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi os"><img src="../Images/51c3170d5ac9ecb3ed177a439543b710.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aRsfrAIPKwfsVmuoCOHcDg.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">将anonymous_enable更改为NO</figcaption></figure><p id="05a2" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">重新启动服务以使更改生效。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/3a79ace5cbf564f37159aee5911493cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*sgUJWwG5yo_wvEiEvV6b4A.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">正在重新启动FTP</figcaption></figure><p id="a4fd" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在做了更改之后，我尝试使用匿名登录FTP，得到的提示是登录失败。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/52cb1b60ae3fc1c4af6b5702e1b874b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*NE-0RtOwA-2Dch6A84ggNA.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">补救后的匿名登录尝试</figcaption></figure><h2 id="a24c" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">HTTP跟踪/追踪已启用</h2><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ov"><img src="../Images/cb4e4ef8984738080f5d60b8229b5a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_E0_P-EVONMjHPA5LPjtDg.png"/></div></div></figure><p id="6ada" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">TRACE/TRACK请求方法的目的是用来调试web服务器连接。但是，启用跟踪/追踪会使Apache webs服务器在与浏览器中的各种弱点结合使用时遭受XSS(跨站点脚本)攻击。攻击者可能会窃取cookies或身份验证凭证。</p><p id="78fe" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">我正在测试跟踪请求是否会收到200响应。我是通过使用以下命令完成的:</p><p id="b62e" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated"><strong class="kt io">curl-v-X TRACE http://10 . 0 . 1 . 43</strong></p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/e74f4945fb8ada6b7b331b18cf9cad73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*IB1Er68V8X-u4w6RLi9WEQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">测试跟踪HTTP请求</figcaption></figure><p id="d6e2" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在Apache安装中，默认情况下启用跟踪。在做了一些研究之后，我发现可以在<strong class="kt io"> httpd.conf </strong>中禁用跟踪，所以我使用了命令:<strong class="kt io"> locate httpd.conf </strong>，得到了如下所示的结果。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/9306f1be35f6ac52ae5ec26e360c26f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*gdfTU0JWO8THKsHcUKRYrA.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">查找Apache配置文件</figcaption></figure><p id="fb59" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">用运行<strong class="kt io"> sudo </strong>权限的文本编辑器打开<strong class="kt io"> httpd.conf </strong>文件。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/5225cfd05b8c74843a54b55f7f04568f.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*ui6T5FO2qIsZHmgeIwkwoA.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">编辑httpd.conf文件的命令</figcaption></figure><p id="77a3" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">将下面显示的文本附加到配置文件中，然后保存。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/22615f91526df6867bd0606acb54f40c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*vbc3Xm6smvQO4ZkBEX41tQ.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">关闭跟踪/追踪的补救措施</figcaption></figure><p id="9340" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">使用命令重新启动Apache:<strong class="kt io">sudo system CTL restart httpd</strong></p><p id="f7e1" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在通过更改httpd.conf文件中的配置来修复漏洞之后，我尝试执行我之前运行的相同命令。我收到的不是200响应，而是403禁止响应。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/0764f8bc88c29e13395e41802f3a9b69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*XNkX1oS9ouBEr6oSwoeLYw.png"/></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">补救后对跟踪请求的响应</figcaption></figure><h2 id="f912" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">SSH服务器CBC模式密码已启用</h2><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pb"><img src="../Images/e8b101a637ce39ae428f0bc67097ac22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rcDvgtZa9UFzeDggxFTBwg.png"/></div></div></figure><p id="3213" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在CBC(密码块链接)模式下，每个明文块在加密前都与前一个密文块进行异或运算。每个密文块都依赖于在此之前处理的所有明文块。为了使每个消息都是唯一的，必须在第一个块中使用初始化向量。</p><p id="5baa" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">理想情况下，弱加密算法需要被更强的方法取代。第一步是备份SSH配置，以防出现问题。为此，我运行了以下命令:</p><p id="cc32" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated"><strong class="kt io">sudo CP/etc/ssh/sshd _ config/etc/ssh/sshd _ config . bak</strong></p><p id="a9e4" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">接下来，需要编辑配置文件以添加以下密码。<br/> <strong class="kt io">密码aes128-ctr，aes192-ctr，aes256-ctr </strong></p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/a30ffde14158a880e0874e715350d2ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*f7nidsMZMSiZMJnH3DUSFQ.png"/></div></figure><p id="8e17" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">重新启动SSH服务:<strong class="kt io">sudo system CTL restart sshd . service</strong></p><h2 id="c9e1" class="jv jw in bd jx jy jz dn ka kb kc dp kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">包装东西</h2><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pd"><img src="../Images/5f34abf0ada252ec1624b3d3264b50a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q71uU8zPegHnJRDszO-MdA.png"/></div></div><figcaption class="ml mm gj gh gi mn mo bd b be z dk translated">修复后的Nessus扫描</figcaption></figure><p id="f2c5" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">在修复了一些漏洞后，我进行了另一次扫描。如上所述，所有已修复的漏洞都没有显示在扫描结果中。补救工作完成后进行扫描是确保消除漏洞的好方法。</p><p id="9512" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">希望您对Nessus、漏洞管理和补救有了更多的了解。设置您自己的漏洞扫描器很容易，并且是评估您自己网络的安全状况的好方法。困难的部分是针对您的独特情况优先考虑漏洞补救。学校、银行、医生办公室和您自己的个人网络修复漏洞的优先级会有所不同。</p><p id="3c3e" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">了解您要保护的资产、威胁和漏洞的知识、资金、时间、复杂性和技能都是在确定补救漏洞的优先级时要考虑的因素。关键漏洞不一定总是最重要的。考虑这样一种情况——在一个系统上发现了一个严重的漏洞，但它非常复杂，攻击者很难利用。在同一个网络中，有一个容易被利用的低漏洞，使攻击者能够轻松地进入通过扫描在40个系统上发现的网络。在这种情况下，我认为修复低漏洞具有更高的优先级，以便减少攻击面。</p><p id="c621" class="pw-post-body-paragraph kr ks in kt b ku lo kw kx ky lp la lb ke mc ld le ki md lg lh km me lj lk ll ig bi translated">这是一个有趣的练习。通过研究漏洞以及如何修复它们，我学到了很多东西。我使用每个漏洞的<strong class="kt io">参考信息</strong>部分来研究如何修复特定的漏洞，当我找不到我需要的信息时，我求助于谷歌。这是老生常谈，但知识就是力量。</p></div></div>    
</body>
</html>