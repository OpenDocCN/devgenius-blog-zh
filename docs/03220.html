<html>
<head>
<title>Top React Hooks — Timers, Key Presses, Local Storage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">顶部反应挂钩—定时器、按键、本地存储</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/top-react-hooks-timers-key-presses-local-storage-ad4c3eac6151?source=collection_archive---------5-----------------------#2020-10-13">https://blog.devgenius.io/top-react-hooks-timers-key-presses-local-storage-ad4c3eac6151?source=collection_archive---------5-----------------------#2020-10-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fafe37783dafbc7a6e103e4f81e0dcea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8qgttYMJN38k3V2d"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@danielcgold?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹金</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="de57" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Hooks包含了React应用程序中的逻辑代码。</p><p id="4586" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建自己的钩子，使用别人提供的钩子。</p><p id="c5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看一些有用的React挂钩。</p><h1 id="a3c1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应配方</h1><p id="224c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Recipes附带了许多钩子，我们可以用来做各种事情。</p><p id="487b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">钩子让我们定期运行一段代码。</p><p id="7b71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cad5" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useInterval } from "react-recipes";</span><span id="1f6c" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [count, setCount] = React.useState(0);<br/>  useInterval(<br/>    () =&gt; {<br/>      setCount(count =&gt; count + 1);<br/>    },<br/>    1000,<br/>    true<br/>  );</span><span id="b369" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div&gt;{count}&lt;/div&gt;;<br/>}</span></pre><p id="8d26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe me mf mg mh b">useInterval</code>钩子。</p><p id="9738" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回调是在一段时间后运行的。</p><p id="c131" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是周期。</p><p id="de51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第三个是我们是否在装载时运行回调。</p><p id="0b0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">useIsClient</code>钩子来检查客户端是否加载了JavaScript。</p><p id="5875" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ada3" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useIsClient } from "react-recipes";</span><span id="b767" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const isClient = useIsClient();</span><span id="153b" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div&gt;{isClient &amp;&amp; "client side rendered"}&lt;/div&gt;;<br/>}</span></pre><p id="06b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">useIsClient</code>钩子，它返回一个布尔值，如果是<code class="fe me mf mg mh b">true</code>，则表明代码是从客户端加载的。</p><p id="a851" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useKeyPress</code>钩子允许我们给任何键添加keydown和keyup监听器。</p><p id="e8b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f29f" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useKeyPress } from "react-recipes";</span><span id="3dfe" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const hPress = useKeyPress("h");</span><span id="50cf" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div&gt;{hPress &amp;&amp; "h key pressed"}&lt;/div&gt;;<br/>}</span></pre><p id="fbc4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">useKeyPress</code>钩子，传入一个字符串，其中包含我们想要观察的表单的键。</p><p id="c101" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果按下“h”键，则<code class="fe me mf mg mh b">hPress</code>为<code class="fe me mf mg mh b">true</code>。</p><p id="19af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useLocalStorage</code>钩子让我们在本地存储器中设置和存储值。</p><p id="8b0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="42ed" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useLocalStorage } from "react-recipes";</span><span id="45a8" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [name, setName] = useLocalStorage("name", "james");</span><span id="c5cf" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div&gt;<br/>      &lt;input<br/>        type="text"<br/>        placeholder="Enter your name"<br/>        value={name}<br/>        onChange={e =&gt; setName(e.target.value)}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="a75a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe me mf mg mh b">useLocalStorage</code>钩子来存储键和值。</p><p id="7b3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回一个带有状态的数组和按此顺序设置状态的函数。</p><p id="3200" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该状态将自动保存在本地存储中。</p><p id="5b5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">useLockBodyScroll</code>钩子让我们定位滚动。</p><p id="d24f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这对于创建像情态动词这样的东西很方便。</p><p id="9a73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0042" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useLockBodyScroll } from "react-recipes";</span><span id="ebc2" class="mq lc iq mh b gy mv ms l mt mu">function Modal({ title, children, onClose }) {<br/>  useLockBodyScroll();</span><span id="5c8e" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div className="modal-overlay" onClick={onClose}&gt;<br/>      &lt;div className="modal"&gt;<br/>        &lt;h2&gt;{title}&lt;/h2&gt;<br/>        &lt;p&gt;{children}&lt;/p&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="f12d" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [isOpen, setIsOpen] = React.useState(false);</span><span id="e87f" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;button onClick={() =&gt; setIsOpen(true)}&gt;open modal&lt;/button&gt;<br/>      {isOpen &amp;&amp; (<br/>        &lt;Modal title="The title" onClose={() =&gt; setIsOpen(false)}&gt;<br/>          modal content<br/>        &lt;/Modal&gt;<br/>      )}<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="d6a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">Modal</code>组件中使用不带任何参数的<code class="fe me mf mg mh b">useLockBodyScroll</code>钩子。</p><p id="abe8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe me mf mg mh b">App</code>中的<code class="fe me mf mg mh b">Modal</code>来打开和关闭它。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/c0bfcf2e7e8ad3633904b10b64955511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eKKwbzfwPCKhd9d7"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@rykporras?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">里克·波尔拉斯</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="942c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ec06" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">React Recipes附带了用于定期运行代码、锁定滚动、设置本地存储和监视按键的钩子。</p></div></div>    
</body>
</html>