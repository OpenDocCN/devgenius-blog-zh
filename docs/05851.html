<html>
<head>
<title>Basic Data Exploration and Manipulation in Pandas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫的基础数据探索和操作</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/basic-data-explorand-manipulation-in-pandas-4b35d976acab?source=collection_archive---------4-----------------------#2021-11-09">https://blog.devgenius.io/basic-data-explorand-manipulation-in-pandas-4b35d976acab?source=collection_archive---------4-----------------------#2021-11-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0112" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">熊猫的基本数据操作技术列表。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/699ec30d17dda17dfee138ffe2c5cbed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mFlGt2YrDPhIPO2MYp4aHg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">照片由<a class="ae ks" href="https://pixabay.com/users/pixel2013-2364555/" rel="noopener ugc nofollow" target="_blank"> pixel2013 </a>发自<a class="ae ks" href="https://pixabay.com/" rel="noopener ugc nofollow" target="_blank"> pixabay </a></figcaption></figure><p id="2fcf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦您将数据加载到pandas数据框架中，就该熟悉使用它的基本知识了。下面是我认为你应该首先学习的一些基础知识。我将使用与上一篇文章相同的数据集— <a class="ae ks" href="https://medium.com/@zoltan.guba/reading-excel-files-with-pandas-the-basics-6a6be9cc8763" rel="noopener"> <strong class="kv io">用熊猫</strong> </a>读取Excel文件。</p><div class="lp lq gp gr lr ls"><a href="https://medium.com/@zoltan.guba/reading-excel-files-with-pandas-the-basics-6a6be9cc8763" rel="noopener follow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd io gy z fp lx fr fs ly fu fw im bi translated">用熊猫阅读Excel文件-基础</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">读写文件通常是你需要在编码中能够执行的基本过程之一。正在阅读…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">medium.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg km ls"/></div></div></a></div><h2 id="846a" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> DataFrame.head() </strong></h2><p id="2954" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">返回数据帧中第一个选定的行数和所有列数。默认情况下，它返回前5行，但是您可以给定任何整数作为参数。这种方法的主要用例是在加载后查看您的数据，看是否一切都在适当的位置——比如您的头名称、数据类型。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nf"><img src="../Images/c8474c8ed15de6d813ea08bd1889cf04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*j_5eHXzHOcbdsqEK"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="da67" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> DataFrame.tail() </strong></h2><p id="9362" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">就像head()一样，该方法返回行的样本，但是，这是从数据帧的最后一行开始，并根据您的选择选择最后n行。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/da9f2a08f806e1036b700b432eccb681.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aWmredtKXAVM5Hoi"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="7c02" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> Series.unique() </strong></h2><p id="0bb3" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">以数组形式返回序列中的唯一值。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nh"><img src="../Images/2bd948969042a2a45de3ca1124d8a29f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XIHpqvTXjoYgbQ6e"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="7324" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> Series.value_counts() </strong></h2><p id="5100" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">对序列调用的value_counts方法返回序列中每个唯一值的出现次数。非常有用，因为它不仅给出了一列中的唯一值，还给出这些值的总数。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/5d050daf10345034ea4cff61d75e2780.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VZt8_IaQKIqW8iZZ"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="10a4" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> Dataframe.shape </strong></h2><p id="0373" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">以元组的形式返回数据帧中的行数和列数。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/38afaf180485c1492f3fd8e4514f17a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VP08opiect7i9vcE"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><blockquote class="nk nl nm"><p id="4c9c" class="kt ku nn kv b kw kx jo ky kz la jr lb no ld le lf np lh li lj nq ll lm ln lo ig bi translated">如果你想让我保持咖啡因创造更多这样的内容，请考虑支持我，只要一杯咖啡。</p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><a href="https://buymeacoffee.com/zoltanguba2"><div class="gh gi nr"><img src="../Images/42de2d890e13d488021d94ea1a1b9877.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*SMZM9K5hha91xzFtSBS88Q.png"/></div></a></figure><h2 id="6b9d" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> DataFrame.dtypes </strong></h2><p id="1a73" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">返回数据框架中系列(列)的数据类型。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/5c2fb7ddbb7d613a7797d869564e7a3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F3ltt1MDRMvCi3t3"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="f33a" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak">过滤行</strong></h2><p id="eca2" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">假设您只想选择数据中的特定行。最基本的方法是根据列值给出一个标准。想象一下，你想列出这个系列中以这样或那样的方式死去的所有角色:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/3fc018e9f376dbc9c408ad84eb859fbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ugza0lgQ_l4Go6Nk"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="6503" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里的语法可能有点混乱，但是不用担心，它非常简单。</p><p id="2709" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每当逻辑语句返回True时，返回的数据帧将包含该行，从而进行过滤。如果您想在将来使用这个过滤的DF，不要忘记将这个视图分配给一个新的变量。</p><h2 id="2beb" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak">选择列</strong></h2><p id="64a3" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">将数据框架缩小到列的子集非常容易。想象一下，你只想知道一个角色是否幸存，没有额外的数据:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/d9b9ed800e5f831580e7727390183e80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z82ZB1tqwbh_OaBd"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="7ae1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们只需要提供列名列表(字符串列表)，用括号括起来。这就是你告诉Pandas你希望数据以数据帧的形式返回的方式——你没有其他选择..如果省略额外的大括号，可以将一列恢复为一个系列，但这只适用于一列:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/933de47b549d792e99a7807f20225d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SEGHWDDXgNoQjMNR"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="3499" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> DataFrame.drop() </strong></h2><p id="74da" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">这是一种从数据帧中删除列或行的方法。您可以执行以下任一操作:</p><ol class=""><li id="801e" class="nv nw in kv b kw kx kz la lc nx lg ny lk nz lo oa ob oc od bi translated">在要删除的“labels”关键字之后提供单个标签或标签列表，然后提供“axis”关键字，以指定是要删除行(axis=0，所提供的标签是索引标签)还是列(axis=1，所提供的标签是列标签)。</li><li id="c934" class="nv nw in kv b kw oe kz of lc og lg oh lk oi lo oa ob oc od bi translated">对单个标签或要删除的标签列表使用“index”或“columns”关键字。使用这些关键字使得“轴”的使用变得不必要。</li></ol><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oj"><img src="../Images/6e7145c9bc2cbf7c9aa8d2dae93075eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ta26FHmwf15YjYfl"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="0b6f" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak">增加一列</strong></h2><p id="dacc" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">添加新列时，只需指定列名和要分配给该列的值:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/190e9806bbacdbb914ec51587b6a6c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/0*JAy271v4V30KZxnf"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="95ad" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本例中，我选择用NaN值填充该列——如果您不想马上编写逻辑，这是一个好的开始。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/3211d5e736540e8be2d1708014b27ed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xPt5rYL8JMmztKgo"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="078a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如您所看到的，一个新的列被附加到我们的DF的末尾，具有指定的NaN值。</p><h2 id="a9fa" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> Dataframe.rename() </strong></h2><p id="ae95" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">在与您的新鲜和清晰的数据框架玩了一会儿之后，您可能会发现一些最初的列名或您选择的列名不再有用。您可以在DataFrame上应用rename方法来解决这个问题:只需提供一个字典作为输入，键将是原始的列名，值是新的列名。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ol"><img src="../Images/6e2f05c816872077136542550b9eac89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*49f5vvh9Kn4nPUFu"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="c834" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">注意“inplace”关键字:True值意味着原始数据帧将被修改，该方法返回None —缺省值为inplace=False，这样，如果要继续使用修改后的数据帧，就必须将其赋给一个变量。</p><h2 id="f80a" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak"> Dataframe.sort_values() </strong></h2><p id="4e44" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">尽管sort_values可以做更多的事情，但是现在对您来说最基本和最有可能的用例是按照特定的列或列集合对数据帧进行排序。为此，您只需提供列名(作为字符串)或列名列表(作为字符串列表)来对数据进行排序。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi om"><img src="../Images/4f9d6b922ab249b907b20d74749ea49a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qPQ4-Mws23Ygqhie"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="c0b4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您也可以通过索引对数据帧进行排序，甚至可以选择要使用的排序算法，但目前这些都无关紧要。唯一可以派上用场的参数是“ascending ”,它定义了排序是升序还是降序——默认情况下，该参数的值为True，如果您希望数据以降序排序，请将其值设置为ascending=False。</p><h2 id="f1f9" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak">处理缺失值</strong></h2><p id="effb" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">有时需要处理缺失值(准确地说，NaN代表非数字，Numpy常数代表缺失值，如果您来自更多的SQL词汇表，则为NULL ),以便继续处理数据集。<strong class="kv io"> fillna() </strong>方法既可以应用于序列，也可以应用于数据帧。</p><p id="adaa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可以执行以下任一操作:</p><ol class=""><li id="c6bd" class="nv nw in kv b kw kx kz la lc nx lg ny lk nz lo oa ob oc od bi translated">提供一个值来替换整个系列/数据框架中的NaN值</li><li id="c0e6" class="nv nw in kv b kw oe kz of lc og lg oh lk oi lo oa ob oc od bi translated">提供一个字典来指定使用什么值作为替换，其中键指定索引(对于序列)或列(对于数据帧)。</li></ol><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi on"><img src="../Images/15ae024b53a204657cb5804ff20d0990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rxSMo5--UgdHo6Oo"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oo"><img src="../Images/70ebdba61e086c2da576d251107bd237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*31XKmMPjLJe6jad2"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="4ba7" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated"><strong class="ak">data frame . drop _ duplicates()</strong></h2><p id="51c4" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">使用drop_duplicates方法，重复处理非常简单:</p><ol class=""><li id="c3d8" class="nv nw in kv b kw kx kz la lc nx lg ny lk nz lo oa ob oc od bi translated">如果希望将它应用于所有列，只需在整个数据帧上调用该方法:这将比较每一行中的所有值，并删除重复的条目。</li><li id="aefa" class="nv nw in kv b kw oe kz of lc og lg oh lk oi lo oa ob oc od bi translated">如果您的duplicate定义稍微复杂一点，并且您只想检查一个或两个列值的重复值，则使用subset参数为筛选提供一个或多个列名(字符串或字符串列表)。</li></ol><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/6a10dc61e085ac4efcde657efb813538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fIwc_5XcVEXVh2fR"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure></div><div class="ab cl op oq hr or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="ig ih ii ij ik"><h2 id="2ef1" class="mh mi in bd mj mk ml dn mm mn mo dp mp lc mq mr ms lg mt mu mv lk mw mx my mz bi translated">摘要</h2><p id="4ea8" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">当然，在数据探索和操作中什么是最基本的取决于手头的具体任务，但是上面的列表(远非完整)可以为您可能遇到的几乎任何情况提供一套很好的工具。一旦您熟悉了基础知识，开始使用更高级的功能就容易多了。</p></div></div>    
</body>
</html>