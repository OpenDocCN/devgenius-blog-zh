<html>
<head>
<title>Day 99 of Game Dev: Unity New Input System — Scripting Actions!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">游戏开发的第 99 天:Unity 新输入系统-脚本动作！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/day-99-of-game-dev-unity-new-input-system-scripting-actions-f5744d7d7c12?source=collection_archive---------9-----------------------#2022-07-14">https://blog.devgenius.io/day-99-of-game-dev-unity-new-input-system-scripting-actions-f5744d7d7c12?source=collection_archive---------9-----------------------#2022-07-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="375f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">目标:</strong>创建一个脚本并设置我的<strong class="jm io">动作</strong>以便在游戏中使用。</p><p id="8214" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，当我试图向你们展示如何通过脚本设置输入动作时，你们中的许多人可能会变得非常困惑。没关系，因为我还是没有 100%明白。事情是这样的，为了做到这一点，我们将与<strong class="jm io">代表</strong>在<strong class="jm io">事件驱动系统</strong>中工作，新的输入系统就是用这个系统设置的。</p><p id="ac8d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是，不要害怕。当我们已经知道输入如何在旧系统中统一工作时，还有什么更好的方法来学习<strong class="jm io">委托</strong>是如何工作的呢？你不需要成为<strong class="jm io">代表</strong>方面的专家，因为如果你已经在谷歌上搜索过这个概念，我敢肯定有些人是专家。你是否想先学习什么是<strong class="jm io">委托</strong>或者如何编写新的输入系统取决于你。我事先对它们做了一些研究，这确实有帮助，尽管我没有深入研究，也没有设置任何测试。所以我的建议是做几个谷歌搜索，也许找个视频，弄清楚什么是<strong class="jm io">委托</strong>以及他们如何在<strong class="jm io"> C# </strong>领域工作，然后学习新的输入系统。</p><p id="9e6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你感兴趣，我的下一篇文章将简要介绍代表们(T21)。</p><p id="726e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我以前的文章中，我们设置了一个名为 Dog 的示例动作图。我们需要通过脚本开始使用动作地图上的动作。到目前为止，它们只是设置，我们需要通过脚本设置它们才能使用它们。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/2a490cc71fe9f3c55160246ceb61c451.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Bkze90gwH-S4VD5nbeGlQ.png"/></div></div></figure><p id="4326" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将首先带您完成设置，然后在最后给出一个概述。</p><p id="9db8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">确保检查您的动作映射是否设置为自动生成 C#类。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kv"><img src="../Images/4e97f90ee4a619efd07fef64aefabb46.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*KxdrGGxDi3ES6_AOFA_6sQ.png"/></div></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/7c54d115a634008373506ff55192968a.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/format:webp/1*dubtyF0Qb160ueZ1KXrJVw.png"/></div></figure><p id="b54b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用这个类来引用和编写我们的动作。我将首先制作一个名为<strong class="jm io"> PlayerInputs </strong>的新脚本。确保新脚本与您刚刚自动生成的脚本在同一个文件夹中，否则他们将看不到彼此。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/b9d5f2e8d8351193b44df170cb064b09.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*tCUevjVW-9E5VKx_CA6aWw.png"/></div></figure><p id="8348" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了使用任何与新输入系统相关的东西，我们需要 UnityEngine。输入系统名称空间。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/4e8480d1e952c423acca60084aaec8a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*pMvG0mTZolZzTw-gYAXxaQ.png"/></div></figure><p id="8dcd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我们需要一个对之前自动生成的类的引用。我将创建一个类型为(自动生成类)<strong class="jm io"> PlayerInputActions </strong>的变量。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/9f0a7b17b25cfc5236230ae1a6dc9959.png" data-original-src="https://miro.medium.com/v2/resize:fit:788/format:webp/1*DNOt_D40sPFAzrCUnIIbIQ.png"/></div></figure><p id="8d7e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将其设置为该类的新实例。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi la"><img src="../Images/937bbced189428e769fe0f87d7a32689.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*HNasE9sMvDyv0xYHFQWogA.png"/></div></figure><p id="d834" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我使用动作地图中的任何动作之前，我需要启用<strong class="jm io">动作地图</strong>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/c8e5f543f772f52bb4d44a8db08d2cbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:406/format:webp/1*XQbgI6047xE8UUlXtKkGMA.png"/></div></figure><p id="1148" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">_input 是该类的新实例。狗是行动地图。我正在实现它。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lc"><img src="../Images/4846b5589a698cd85eb9a14f11b2883d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9KzIpbMSXYscyx59dkIapQ.gif"/></div></div></figure><p id="61d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，我将进入我刚刚启用的狗动作图，访问我想要的动作(吠叫)，检查它是否已被执行，然后在键入+=后按 tab 键自动创建一个方法。+=正在添加自动创建/添加到<strong class="jm io">事件/委托</strong>的方法。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/ad77437876fdb0b891dc6369413d7018.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*pf09gRXxCCL1DqeVnM00ew.png"/></div></figure><p id="c6a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是自动创建的方法。我要改变一些事情。我将重命名<strong class="jm io">输入操作。从 obj 到 Context 的 CallbackContext </strong>。这是偏好，你不必如此。我将用发送到控制台的消息替换被调用的代码，该消息还打印上下文变量信息。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi le"><img src="../Images/ef8780441ceae07995b96b1619058289.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*HwKF2zkoV-NbmOkuPvcS5Q.png"/></div></figure><p id="c4b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">回到游戏中，我将确保我的<strong class="jm io"> PlayerInput </strong>脚本在一个游戏对象上，并按下空格，这是我为吠叫动作设置的绑定。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lf"><img src="../Images/08e64f6f85eb203d13db491607fa5108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*BvIg1aO64FLP5CfC3OOspg.gif"/></div></div></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lg"><img src="../Images/d2b464f443a2fce4771fb486ad25d697.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RBwCgc9KkLM6bt43ty3SXg.png"/></div></div></figure><p id="47b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每当我按下空格键，我的调试。日志，它打印上下文变量保存的信息。这是为了测试的目的，你可以调用任何你想要的代码。</p><p id="a61b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">需要指出的其他几件事:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lh"><img src="../Images/e2457c8b4b012a44e4839cd2fabb6232.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/format:webp/1*PL6sdmQbaeA9ZYOoYBivkQ.png"/></div></div></figure><p id="0603" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里我们检查树皮是否被执行。您还可以检查树皮是开始还是取消。这与旧的输入系统相同，但用词不同。</p><p id="5a93" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">GetKeyDown =已开始</p><p id="3d60" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">GetKey =已执行</p><p id="ec58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">GetKeyUp =已取消</p><p id="13dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，您可以检查该键是否被按下、按住或释放。如果你愿意，你也可以检查这三项。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi li"><img src="../Images/bd74795e42eb02fecf7167a8e8e1f948.png" data-original-src="https://miro.medium.com/v2/resize:fit:882/format:webp/1*oZ0uKn_ZzisG74nPvjRfmg.png"/></div></figure><p id="0f55" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">同样，回到您的操作上，您可以很容易地换出一个绑定，并且您的所有代码应该仍然工作。因此，如果我想将树皮从空间更改为 B，然后保存我的更改，现在 B 将执行树皮，我的代码仍然有效。但是一定要保存它！</p><p id="5526" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个开始。我知道与旧的输入系统相比，这感觉起来工作量很大。但是这个新系统更适合添加多控制器设置，同时保持你的代码更加整洁。这个系统最适合这种环境。</p><p id="7935" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你是一个新的开发者，不要强调这一点。现在坚持使用旧的，接触编程的基础，因为它仍然是一个好的输入系统。不要让老吓到你。两者都有其用途。</p><p id="de64" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lj">如有任何问题或想法，欢迎评论。让我们制作一些令人敬畏的游戏！</em>T9】</strong></p></div></div>    
</body>
</html>