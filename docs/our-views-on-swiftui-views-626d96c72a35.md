# 我们对 SwiftUI 视图的看法

> 原文：<https://blog.devgenius.io/our-views-on-swiftui-views-626d96c72a35?source=collection_archive---------33----------------------->

## 第二集

## 安全键入 SwiftUI 播客

![](img/50e5c728ae8ff91991cbe91151a51208.png)

我们想让任何人都可以开发苹果平台。我们将涵盖 Swift 和 SwiftUI 的所有最新发展，以及我们对苹果在 WWDC 发布的新操作系统的喜爱。

让我们看看应用程序开发可以有多有趣！

以上或在 [Spotify](https://open.spotify.com/show/0coqCcFepFiro9Qonad0Z8) 、 [Breaker](https://www.breaker.audio/type-safely) 、[阴天](https://overcast.fm/itunes1520213388/type-safely)或任何其他平台:[https://anchor.fm/typesafely/](https://anchor.fm/typesafely/)收听

**AE** :欢迎来到《安全打字》，这是一个播客，面向希望了解更多 Swift 和 SwiftUI 的 iOS 开发者。我是阿德里安·伊夫斯…

**RS** : *我是罗布·斯特金。WWDC 2020 是在上周，我们希望这一集关注 SwiftUI 框架的新增加。协议规定了符合协议的类型的要求。SwiftUI 以符合视图协议的结构为中心。该协议要求一致性类型包含一个名为 body 的属性，该属性返回一些视图。“某些视图”仅仅意味着任何类型本身符合视图。这意味着它也有一个身体属性来实现同样的事情。*

**AE** :所以，我们要做一个挑战，我们每个人展示一个有问题的视图结构，另一个人必须找出问题所在。如果你想看的话，我们会把这些样本放在展示笔记里，这会很有趣的。我们想先做你的吗，罗伯？

是的，我们先做我的。我的 body 属性包含一个 VStack，在 VStack 内部，它表示 let number = 0。下面是文本(" \(数字)")。

你怎么想呢?

我想这个变量或者这个常数是在你的 VStack 里面声明的，对吗？

**RS** : *耶。*

我不认为我们被允许在 SwiftUI 中在这些视图中声明那样的东西。是这样吗？

RS : *是啊。我可以告诉你错误信息是什么。基本上，它说“包含声明的闭包不能与函数生成器视图生成器一起使用。”所以我会稍微解释一下。VStacks 就是他们所谓的视图构建器的例子，而视图构建器本身就是一种函数构建器。显然，你可以用函数生成器来制作任何东西，但是函数绝对是你可以用它们来制作的东西。视图构建器更加具体，因为它们构建的东西符合我们已经讨论过的视图协议。*

*所以基本上这有点违背你对编程的期望，因为你不能声明任何类型的数字。这是我发现很难适应的事情之一，就像现在，我们突然不能说让数字= 0，无论我们想说什么。有一些规则，就像你不能在这里做，你必须在其他地方做，这是一件非常棘手的事情。*

*我不知道你，你是否发现了一个相当不寻常的模式？*

当我第一次开始使用 SwiftUI 时，这真的让我很困惑。我想做所有这些小的局部变量，但 Xcode 没有。但是现在我已经很习惯了，这感觉就像是我的第二天性。

是的，我的意思是我喜欢它，因为我真的认为它迫使你写整洁的代码，它迫使你把你的数据放在别的地方。只有当你声明界面看起来像什么的时候，你才能这么做，你不能同时做这两件事。你必须有这种分离，这就是我喜欢 SwiftUI 的地方。你必须在应用程序的不同方面有这么多的分离，我认为这真的很有趣。我们可以做你的吗？

如果你准备好了的话！

**RS** : *【笑】* *是的*。

AE:好的。所以在我的身体属性里面，我有两个 VStacks，一个接一个。第一个 VStack 内部是一个文本。上面写着“一列”。第二个 VStack 包含“另一列”的文本。出于某种原因，我得到了一个错误抛出。

你知道怎么了吗？对我来说，这也有点难以适应，因为它说属性返回一些视图。字面意思是“我想要一个视图回来”，这很令人困惑，因为当你写 SwiftUI 时，你可以用它做一些非常复杂的事情。你的 VStack 里面最多可以有 10 个东西，但是你不能只把 10 个东西放在 body 属性里面，因为这样它就不知道什么是“某个视图”。

它不知道这 10 样东西中哪一样是它想要的，你想让它返回。所以它必须返回一个视图生成器。所以即使它里面有孩子，它所关心的只是一个父母，所有的事情都是从那个父母分出来的。如果你认为，如果你认为“一些观点”是英语语法，比如说“我想要一些观点”,那会告诉你你需要知道的关于你应该返回多少的一切。绝对不是几个，是，你知道，绝对只是一个。

**AE** :这总是让我措手不及，因为我无法告诉你当我第一次开始使用 SwiftUI 时，我多少次试图将五个文本对象从我的身体中挤出来。我当时想，等一下，不，不，不，一定有一些总体的东西，因为“一些视图”实际上意味着一个未确定类型的视图。它只关心返回一个视图，而 VStack 是一个视图。

SwiftUI 正式一岁了。我记得去年当他们宣布 SwiftUI 时，它是相当开创性的，特别是对于像我这样来自 UIKit 的人来说。这对我来说有点困难，因为我只能自学，而且很多内容…我只是觉得我需要有人帮忙。所以 SwiftUI 非常棒，因为它非常具有声明性。你说你想要的，你在画布上得到你想要的。更好的是，你可以在 Xcode 的右边看到预览。因此，您可以实时看到您所做的所有更改，这对生产来说非常重要。你可以现场预览，你可以在同一个窗口进行多次预览。简直是疯了。

我个人还是很爱 SwiftUI 的。我看到一些人担心 SwiftUI 会超过 UIKit，我不知道是不是这样，但在 dub dub，他们宣布了大量新的 UIKit 工具。所以我认为 UIKit 在可预见的未来是安全的。就像人们仍然可以制定一个目标-我想每个人都会没事的。我觉得很棒。这对我来说很有意义，我知道很多人也很喜欢它。

react 开发遵循类似的路径，这很有趣，因为我曾经为了工作而学习 React。所以，也许这有助于我的点击因素，但我现在无法得到足够的。我只是想到一些东西，输入然后离开，我已经发现自己在想大概 10 种不同的方法来重构一些东西。我花了昨天的时间，重构了整个项目，只是因为为什么不呢？你的印象如何？罗伯，你觉得 SwiftUI 怎么样？

**RS** : *我从你所说的他们带来了许多 UIKit 的事情中得到启示，这多少表明 UIKit 仍将存在？当然，好吧，它还会存在很长一段时间。我的观点有点不同，因为我认为 WidgetKit 是一个例子，可能是 iOS 新功能的第一个例子，只有通过 SwiftUI 才能实现，我认为这是非常重要的发展。*

*这可能是结束的开始，基本上就像他们开始用 SwiftUI 做新东西。UIKit 变成了一种维护性的东西来保持遗留代码的运行。但是随着时间的推移，UIKit 将会错过，因为他们不想两方面都重做代码。所以我认为他们开始决定他们想走哪条路。希望随着时间的推移，你能做的，SwiftUI 不能做的事情的数量基本上会随着时间的推移而减少，这很好。*

我听说他们几乎要放弃 UITableView 了，这对我来说是一个时代的终结，因为那些曾经给我带来麻烦的东西。当我说我对 UIKit 有问题时，UITableView 就像是在我的列表上用红色和下划线写了两次。

**RS** : *当他们宣布 SwiftUI 时，他们实际上只是告诉你 SwiftUI 是什么，他们第一次在屏幕上显示一个 ui table 视图，他们就像，“看这多可怕，”然后他们就像，“这就是 SwiftUI 中的样子，”他们有一个列表，你知道，这就是销售它的东西。看看这个复杂的东西，看看它能有多简单。所以我不知道他们如何在 UIKit 中替换它，并且仍然让 UIKit one 工作。*

但是，看到事情朝着那个方向发展，让事情变得不那么复杂，这确实很有趣，尤其是对初学者来说。我绝对远离它，因为我只是想，“我不想在我的副业项目”之类的东西。我不需要处理那些事情。但是列表是完全不同的东西，它看起来像一个表格视图。它不能做所有 UITableView 能做的事情，但是它完成了大部分用例。你当然可以显示一些数据，而且可以滚动，诸如此类。所以这肯定要容易得多。

**AE** :我完全同意，我在列表上度过了一段非常愉快轻松的时光。我唯一的问题是，有时我会忘记在我的每个论点里放些什么。我不知道为什么。但这让我时不时会想起。但无论如何，我想介绍一个我们在挑战赛中简要提到的概念，因为对我们的一些听众来说，这可能是你第一次听说 SwiftUI，对我们来说，做一个挑战赛可能有点不和谐。不要担心。

它为我们将要讨论的内容提供了一个很好的介绍，这就是 SwiftUI 中布局的概念。

在我向 Rob 提出的问题中，我说，我有两个 VStacks，Z 堆栈中一个接一个的是不同的文本。我们讨论过，body property 不高兴，因为它希望我们返回你们中的一个，但我们有两个 v 堆栈。嗯，VStack 是一个布局容器，可以容纳许多视图。我想它认为它最多能装 10 个，对吗？

**RS** : *是的，它可以有多达 10 个孩子，但这 10 个孩子中的每一个都可以成为视图构建者。所以你可以有一个里面有 10 个 VStack 的 v stack，这 10 个 v stack 中的每一个里面都可以有 10 个 v stack。所以基本上你最终会有 100 个孩子，你可以，你基本上可以这样继续下去，但是有 10 个孩子的最大值。*

**AE**:V stack 中的 V 代表垂直，这意味着你可以将所有东西组织成一列。如果我有一个 VStack，我有一个文本，一个按钮和一个滑块，它们都将按照我描述的方式从上到下组织起来。现在，相反地，我们有了所谓的 HStack。H 代表水平。因此，如果我们有了文本、按钮和滑块，它们就会从左到右出现在视图中。现在有另一个视图，它被称为 ZStack，或者我的朋友 Rob 喜欢把它称为“Zed-Stack”，它沿着 Z 轴组织，并根据深度堆叠视图。因此，如果你点击了滑块中的文本按钮，它们就会一个接一个地出现。

**RS** : *当 SwiftUI 第一次出现时，它提供了许多视图，您可以将它们放入您的布局中。这里有一个文本，我们已经提到过，它只是你想放入你的应用程序的文本字段，这是一个可编辑的文本。基本上，它就像一个用户名或密码字段。实际上，SecureField 就是你用来做密码的地方，因为它会遮住你输入的字符。*

*按钮是一个你可以点击的视图，基本上你可以通过点击来运行代码。有一个开关，基本上就像一个开关。还有 Picker，你可以在一堆值中滚动选择一个。有一个滑块，你可以上下滑动选择一个值。有一个步进器，你有一个减号按钮和一个加号按钮，基本上就是这样。*

今年在 WWDC，我们看到了不少新景观。第一个是拾色器，有点出乎意料，我真的没想到会有拾色器。iOS 中实际上从来没有颜色选择器。苹果从来没有制作过颜色选择器，也没有让开发者可以使用它。这是一个非常令人兴奋的发现。我们也有 SpriteView。这允许你使用 SpriteKit，这是用来制作 2D 游戏的，你可以把一个 SpriteKit 游戏放在 SwiftUI 视图中。然后，您可以像使用任何其他视图一样将它用作 SwiftUI 视图。

TextEditor 基本上是一个多行文本编辑器，有点像 TextField。以前我们只有一行文本字段，现在我们有能力制作一个多行的、合适的文本编辑器，就像我们要制作一个 Notes 应用程序或其他每个人都在等待的基本东西。这可能并不奇怪，因为这是很多人的愿望清单。有一个带苹果按钮的标志。我有机会玩这个，它确实使在你的应用程序中登录苹果变得更加简单。使用 Apple 登录是用户登录您的应用程序的一种方式，无需输入用户名和密码。它基本上是使用触控 ID 或 Face ID 的生物特征来验证苹果用户的身份，就像 Apple ID 一样，你会得到这个人的唯一标识符。

*ProgressView 是一种获取微调控件的方法，它可以指示正在加载。如果您向 ProgressView 传递一个数字，它可以显示在该范围内取得了多少进展。GaugeView 是唯一一个我能看到的新的手表。而且基本上就是……一句台词[笑]就是一句台词。GaugeView 基本上只是一种显示值在两个设定点之间的方式。所以这有点像进步观。但对于 Apple Watch 来说，它也有一个圆形版本。而且我也没发现它超级有用。我不确定它有多少用途。我们有标签，它只是图像和文本的组合。Link 是一种创建按钮的方式，可以通过一个 URL 来传递，我们只是用一种类似于你可以用按钮做的方式来打开那个 URL，但是这需要更多的工作。*

**AE** : 作为一个最近一直在钻研 SpriteKit 的人，我真的为 SpriteView 感到兴奋。这是我非正式的愿望清单。现在我不会为 dub dub 之类的活动列一个愿望清单，因为我总是希望像在一部好电影里一样有惊喜。你只是在自找失望。但是 SpriteView 绝对是个惊喜。我真的很兴奋能使用它。当然，他们在讨论为 SwiftUI 添加一个 CollectionView。就个人而言，这可能是一个不受欢迎的观点。我真的没有那么想念 CollectionView。我认为你可以用大量的 VStacks、HStacks 等等来形成自己的收藏。你知道，如果这对你真的很重要，你可以提取子视图并保留它。

**RS** : *耶。你以前尝试过 SpriteKit 游戏吗？*

所以，我读了保罗·哈德森的《潜入精神》一书。真的很棒。想象一个选择你自己的冒险故事，除了你选择你自己的步骤来制作一个游戏，这看起来很长。所以有很多可能性。真的很棒。我做的第一个是你基本上是这个小潜水艇，你必须在 iPad 上拖动你的手指来躲避所有的鱼和收集星星。这真的很有趣，我很高兴能做些别的事情。但我很高兴能用 SwiftUI 做这样的事情。

**RS** : *是的，我在这方面没什么经验。之前只做过一次教程。就在最近，我想是昨天，我决定做一个小游戏。我认为这是因为我正在运行这个中型职位，这基本上是一种谈论 SwiftUI 中所有新东西的方式。我需要一个精神观察的例子。我不能只使用我在网上找到的东西，我必须做一些原创的东西。*

所以我做了一个游戏，你现在可以看到所有的精灵都是形状。

*但是你基本上就像这个可以拍绿圈的红方。上面有物理学知识。所以它们会在墙上反弹，你可以在拐角处射击。所以我发现这是一个非常有趣的小实验，而且它的物理原理很容易实现。你只需要说某样东西是动态的，你真的不需要担心其他任何东西。你会有一些有趣的事情发生。所以我对制作一个基本游戏所花费的工作量感到非常满意。现在我可以在 SwiftUI 中使用它了，我非常期待制作更多的游戏，并将它们与 SwiftUI 相结合。我认为这是个好主意。*

**AE** :你觉得你用 SpriteKit 做一个游戏花了多长时间？

我肯定在一天内完成了，我把雷·温德里希的教程和保罗·哈德森的教程结合在一起。所以，是的，你肯定能很快做出它们。

那真是太棒了，因为我有几个项目，我绝对想进入 SpriteKit。在 dub dub 之前，我已经低调地担心如何将 SwiftUI 与 SpriteKit 集成，但看起来这不再是我需要担心的事情了。所以我对此非常感激。

我对色彩选择器很感兴趣，因为我需要色彩选择器已经很多年了。就在 WWDC 之前，我在想，我真的只是想能够制作一个颜色选择器，无论我想做什么，并且不需要依赖第三方来完成这种事情。所以我基本上认为我只是要做我自己的小图书馆，在那里我可以控制色调，饱和度之类的东西。

你可以有一张画布，有点像 2D，从左到右是一回事，上下是另一回事。所以我有画布。我有滑块。我有一个调色板，它就像一堆正方形，每个正方形在一个方向上有越来越多的色调，在另一个方向上有越来越多的饱和度。我做这个真的很开心。然后这个声明就来了，有点苦乐参半，因为我好像在某种程度上我真的不需要做这些。

*但是我很高兴它让你知道了第一方的选择，特别是对于那些不像我，懒得做像我这样复杂的东西的人来说，希望我们将来能为它提供更多的设置，它会比我们在第一个测试版中得到的第一次迭代更有能力。*

**AE** :我犯了一个错误，问了几个人，“一个颜色选择器有什么大不了的？”我真的不知道该怎么做。

他们就像“你怎么敢这样。”

是的，很明显这是人们期待已久的功能。我想那对我来说只是白噪音。

是的，当然，我的意思是自从我四年前开始写 Swift 以来，我就需要一个。所以对我来说是件大事。

但是现在它已经在这里了，就像它在这里已经有一周了，因为我们有了一个新的 Xcode。

它有一个很大的缺陷，你不能在 iPhone 上忽略它。你可以在 iPad 上忽略它，因为它只是一个弹出窗口，所以你可以点击其他地方，它就消失了，但在 iPhone 上，它就像一张纸，不能滑动，或者只是卡在那里。所以当他们修好的时候肯定会更好。

那么现在有什么解决办法呢，我相信你已经想到了。

是的，我绝对做到了。我所做的是，当你想选择一种颜色时，我拿出一张纸，这张纸上有颜色选择器。所以你点击拾色器，实际上开始挑选颜色。出于某种原因，消除下面的工作表会导致前景中的拾色器消除。所以你可以做一个简单的变通方法，通过删除它下面的东西来删除它，它会被代理删除。

嗯，嘿，至少我们现在有这个，你知道，这对我来说真的很好，因为我已经尝试过了。我几乎已经到了无法想象除此之外生活是什么样子的地步。这对我来说是一个小小的突破。我很高兴你已经—

**RS** : *如果在我们发布这个的时候它仍然是一个 bug，我可以把那个解决方法的代码放在展示说明里。*

那太棒了。我相信很多人会喜欢的。我知道我们松弛小组的很多人会喜欢的。在会议中，在各个环节中，他们谈到了量具观，每个演讲者都把它比作平衡他们西红柿中的酸碱度。这是一个真正的利基，独特的使用案例。但是，嘿，如果我种过西红柿，我知道我在哪里测量。我认为他们用苹果按钮做标志很好，因为这是我真的想开始在自己的作品中加入的东西。他们让一切变得如此简单。

我觉得 SwiftUI 到目前为止的工作方式是人，我开始认为这项任务将是很难做的，除了找出如何拼凑起来。但后来苹果宣布，“猜猜 SwiftUI 有什么了不起的东西！给你。”所以那真的很好。我确实认为很多人会喜欢文本编辑器。我知道我们已经错过了。UIKit 得到了所有的荣誉。但是现在，SwiftUI 有了自己的版本，它将会受到很多人的欢迎。使用这些视图和布局以及 SwiftUI，您可以做很多事情，我们只是触及了它们的表面，因为我们希望在可消化的时间内完成这一集。但是和我们在一起。我们将在接下来的旅程中更详细地讨论这些内容。

嗯，很有意思。感谢您加入我们，请记住…

安全输入！