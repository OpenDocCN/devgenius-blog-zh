<html>
<head>
<title>Writing a messenger in C#. Layout</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 C#编写信使。布局</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/writing-a-messenger-in-c-layout-94b79470ddec?source=collection_archive---------17-----------------------#2022-08-18">https://blog.devgenius.io/writing-a-messenger-in-c-layout-94b79470ddec?source=collection_archive---------17-----------------------#2022-08-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="38c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi ki translated">C#语言在任何事物的开发中都是有用的。ASP.NET 允许你创建强大的服务器端应用程序，而 WPF(图形界面创作系统)的功能允许你为 Windows 创建美观实用的应用程序。</p><p id="3430" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这篇文章只是关于应用程序布局，我们将用 C#和 XAML 为 Windows 创建一个 GUI。</p><p id="a839" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将应用程序分成几个屏幕:</p><p id="b0cb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">授权屏幕；</p><p id="5235" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">带联系人的屏幕；</p><p id="da5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">聊天屏幕。</p><p id="278c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">默认情况下，屏幕是对用户隐藏的边框元素。只有活动屏幕可见。</p><p id="2bf9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在授权屏幕上，用户可以输入用户名和密码登录。如果他输入了正确的数据，他将转到联系人屏幕，否则他将看到一条错误消息。</p><p id="c879" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在有联系人的屏幕上，您可以看到与您聊天的其他用户的姓名。当您点击另一个用户的名字时，聊天窗口就会打开。</p><p id="8d24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在聊天屏幕上，您可以看到与某个特定联系人的通信。用户可以编写和发送新消息，或者返回到联系人屏幕。</p><p id="3318" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">设置登录屏幕</p><p id="9ab1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们从定义风格开始。在它们中，我们将最低限度地指示元素的外观，并立即指示屏幕在默认情况下应该隐藏:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/a9c3581dc416946708a92a552754ec30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cZfhyJ8hHczwxt1AxeLYhA.jpeg"/></div></div></figure><p id="d025" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们来布置授权屏幕本身—它应该是可见的:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ld"><img src="../Images/0e394448e82090d17486d3d41c1a5566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kPQUPzpEci_O0qJzsZG4jA.jpeg"/></div></div></figure><p id="8bb2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们看看它是什么样子的:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi le"><img src="../Images/e795a539af9d05d45aa3ffdcaadeb383.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iXrmJ5QGvLpVA32vvcz0Tw.png"/></div></div></figure><p id="fc15" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们为 Enter 按钮编写一个处理程序:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lf"><img src="../Images/8d3b215ff71c77bbefe4b465bbcfa48b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CMwLntBBWjlIUXWj1Eb-QA.jpeg"/></div></div></figure><p id="3101" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要使 Open()方法正常工作，必须有名为 ContactsScreen 和 ChatScreen 的屏幕。为此，创建两个空的边界元素就足够了。</p><p id="7422" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当您输入不正确的数据时，授权屏幕如下所示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi le"><img src="../Images/b0eb2c27990a9376b408a2eb8b79c74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kvTn4dvIzdGD74aDnH4eiw.png"/></div></div></figure><p id="1743" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们用联系人来布置屏幕。</p><p id="ed96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">带有联系人的布局屏幕</p><p id="b13d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用 Grid 将包含联系人的屏幕分成两行——第一行是标题，第二行是联系人列表。列表是列出联系人的列表框元素。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lg"><img src="../Images/7469ddc182ab683f5f94f53d3d41dc6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQHfxWPii6DojKAHzTLR9A.jpeg"/></div></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lh"><img src="../Images/04e0d62641c779805dd837ab23d003bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PhS-QMJkOKsQEG0KxvgY8g.jpeg"/></div></div></figure><p id="5150" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里并没有描述所有的列表项，只是描述了它们的一个模板，这个模板将在数据绑定过程中使用。在完成的应用程序中将需要这个模板，但是为了布局的方便，您可以准备测试数据。</p><p id="1f78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">设置样式:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi li"><img src="../Images/7245d5e4b4f5c7a95073ff3cab0c4b97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LIZs-Fl-m9x57sM6hvftEQ.jpeg"/></div></div></figure><p id="cba7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在剩下的就是编写一个方法来打开与联系人的聊天。当用户从列表中选择一项时，调用此方法。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lj"><img src="../Images/42428f107735d6aa32375f0be2b1bb7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MMSRInIM-AifUKvvRcpXTA.jpeg"/></div></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lk"><img src="../Images/cfec647e50c352ff3ab334eb844404d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6kLzTDUpMfs8SbOarqy-XA.jpeg"/></div></div></figure><p id="ead9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">布局屏幕与聊天</strong></p><p id="450c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">聊天类似于联系人屏幕，但多了一点:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ll"><img src="../Images/9707d5d7ceb3e7bf232b5761a7ed7956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zUfGlI590kuV35XR9DTEgQ.jpeg"/></div></div></figure><p id="b8cd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Grid 将屏幕分为三个部分:标题、聊天和输入框。在标题中—对话者的姓名和“后退”按钮。消息使用列表框显示在聊天中，底部有一个输入字段和一个发送按钮。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lm"><img src="../Images/04aec59ab4a9094d092c1b94c5efaf4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uD6CJp2nXrx0Xuvq55K_ZA.jpeg"/></div></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lm"><img src="../Images/16b5d7b6799d7264fe5df3dcbf99c63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XkssuaZ0UZs8sM4tjWMW9A.jpeg"/></div></div></figure><p id="8747" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，就像在有联系人的屏幕上一样，还没有数据——只有一个显示它们的模板。几种风格:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi ln"><img src="../Images/175e5d4b71ca54abbae3614c27f40d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r5J5IOcoM2AZxl9Ynjup3w.jpeg"/></div></div></figure><p id="ae57" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它只处理提交和导航按钮的事件:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi lo"><img src="../Images/3cbecee2062387519788a0e207c886c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zE3iVfneARqDa7q3jLu64Q.jpeg"/></div></div></figure><p id="94a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">结论</strong></p><p id="bffa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们最终得到了一个相当简约的设计，你可以随意修改。接下来，我们必须编写应用程序的服务器端，然后将它们链接在一起。</p></div></div>    
</body>
</html>