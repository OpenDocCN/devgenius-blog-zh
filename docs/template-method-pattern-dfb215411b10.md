# 模板方法模式

> 原文：<https://blog.devgenius.io/template-method-pattern-dfb215411b10?source=collection_archive---------2----------------------->

![](img/b6ef38e6bfed45930072bb9882719a30.png)

由[克利亚森](https://www.shutterstock.com/image-vector/japanese-konbini-shop-seller-give-products-1932080504)

这是一个炎热的仲夏，你只想吃一个巨大的冰淇淋。足够巧合的是，你发现自己正站在一个冰激凌摊前(多么方便)。你要了一份草莓口味的冰淇淋，而你的朋友想要一瓶冰矿泉水。有两个小贩，一个为你服务，一个为你的朋友服务。

每个供应商以有序的方式采取以下行动:

1.  向你问好。
2.  准备您的订单(根据您的需求:冰淇淋、水等)。
3.  把产品递给你，收下钱，说“谢谢”。

这是一个非常简单的 3 步算法，供应商对每一个订单都运行这个算法。虽然此过程中的第 1 步和第 3 步对所有客户都是标准的，但第 2 步可以根据客户的需求进行定制。所以基本上，一个供应商有一个标准的程序——一个模板——可以根据需要填补空白。

这是模板方法设计模式的本质。一个有洞的建筑。

![](img/c0d62bcb093bec1cb8e86c253e272e18.png)

来源: [shutterstock](https://www.shutterstock.com/video/clip-12901958-malmo-sweden---circa-2015panning-put-your)

或者说得更专业一点，一个基类方法，它有一个预定义的结构，但同时一些部分可以相应地定制。这种灵活性让我们两全其美。

从这个基类，我们可以创建一个冰淇淋小贩，一个矿泉水小贩，一个咖啡小贩，等等。

因为所有这些供应商都已经在基类中实现了标准步骤，所以只实现如下可定制的步骤#2 就足够了:

通过应用这种模式，我们:

*   避免标准步骤的代码重复。
*   将标准步骤集中化，这样下次需要更改时，只需在一个地方进行更改就足够了。
*   确保步骤的正确执行顺序，并确保骨架是健壮的&完整的，从外面看是不可修改的。

值得注意的是，在我们的示例中，可定制的 *PrepareAndServeProduct* 方法被定义为抽象方法，因此是强制实现的。我们可以将它定义为虚拟的，使实现部分或全部可选。

有时我们以本能和自然的方式开发技术，而不知道它在文献中的概念化存在，并且很可能你已经在你的项目中使用了这种设计模式，有意或无意。现在我们知道这种技术被称为“模板方法模式”。

像往常一样，你可以在这里找到源代码。