<html>
<head>
<title>How to Deploy a Dockerfile through a single node Kubernetes Cluster</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过单节点 Kubernetes 集群部署 Dockerfile</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-deploy-a-dockerfile-through-a-single-node-kubernetes-cluster-7a87d01a927c?source=collection_archive---------15-----------------------#2022-02-09">https://blog.devgenius.io/how-to-deploy-a-dockerfile-through-a-single-node-kubernetes-cluster-7a87d01a927c?source=collection_archive---------15-----------------------#2022-02-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b8ee3a83aaa7b23850b0ce7ecb98a40d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kOpQCL74FLtNFmlYGA_1sQ.png"/></div></div></figure><p id="b528" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">什么是 Kubernetes？<br/> <strong class="jx io"> Kubernetes </strong>或<strong class="jx io"/>“K8s”是由<a class="kt ku ep" href="https://medium.com/u/be36e94a7e47?source=post_page-----7a87d01a927c--------------------------------" rel="noopener" target="_blank"> Google </a>开发的开源容器编排工具。Kubernetes 帮助您管理、调度、部署大量的容器化应用程序。</p><p id="5179" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">记住<a class="ae kv" href="https://medium.com/dev-genius/how-to-create-an-nginx-docker-image-and-register-it-with-aws-ecr-7b973940c033" rel="noopener"> <strong class="jx io"> Docker </strong> </a>，是用来容器化你的软件的平台。容器是正在运行的 Docker 映像。</p><p id="561b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">MiniKube 是什么？<br/> <strong class="jx io"> MiniKube </strong>是一个工具，<em class="kw">允许您在本地计算机上运行单节点 Kubernetes 集群</em>。</p><p id="9bd2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Kubctl 是什么？<br/> <strong class="jx io"> Kubctil </strong>是一个命令行工具，用于向集群的主节点进行身份验证，以便您可以管理它。</p><p id="e86c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">目标</strong>:创建 Dockerfile 并通过单节点 Kubernetes 集群部署它。</p><blockquote class="kx ky kz"><p id="8af7" class="jv jw kw jx b jy jz ka kb kc kd ke kf la kh ki kj lb kl km kn lc kp kq kr ks ig bi translated"><strong class="jx io"> <em class="in">先决条件:</em> </strong> <em class="in"> <br/> </em> Docker 已安装<br/> <a class="ae kv" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>账号<br/>Minikube<br/>Kubectl<br/>Vim</p></blockquote><h1 id="e3ed" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">步骤 1:用 Vim 创建 Index.html 和 Dockerfile</h1><p id="4b1c" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">使用 Vim 创建下面的文件，并将它们保存在当前目录中:</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h1 id="2876" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">步骤 2:构建 Docker 映像</h1><p id="1c45" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">在构建映像之前，确保您已经安装了<a class="ae kv" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Docker Hub </strong> </a>帐户和 Docker。在使用以下命令从终端登录后:</p><pre class="mg mh mi mj gt mm mn mo mp aw mq bi"><span id="9a87" class="mr le in mn b gy ms mt l mu mv">                           docker login</span></pre><p id="f8c9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在您已经登录，通过在保存 index.html 和 Docker 文件的目录中运行这个命令来构建 Docker 映像。运行以下命令:</p><pre class="mg mh mi mj gt mm mn mo mp aw mq bi"><span id="fad9" class="mr le in mn b gy ms mt l mu mv">docker build -t <strong class="mn io">&lt;dockerhub_username&gt;</strong>/<strong class="mn io">&lt;name_of_file&gt;</strong>:<strong class="mn io">&lt;tag&gt;</strong> .</span></pre><p id="3fbb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请在命令中用 1.0 或任何名称标记上面的图像。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/d80215cca97e9ea4bab9d88d1527ba1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mMaKlUedEA3EvH6NByfsYA.png"/></div></div></figure><p id="97f6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">验证映像是否已创建:</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/b17d93cad0a3cdb8af396a8e9996d1b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*SS0vuyN1V2e8PWPcmQxIag.png"/></div></figure><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/9f3c2c89fe389c7b59c8b6bb03683194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W4Rp9lD2sTqRcJWeuB6SGA.png"/></div></div></figure><h1 id="8334" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">步骤 3:将图像推送到 Docker 存储库</h1><p id="9da5" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">将映像推送到 Docker Hub 存储库，以便 Kubernetes 集群可以访问它:</p><pre class="mg mh mi mj gt mm mn mo mp aw mq bi"><span id="11ef" class="mr le in mn b gy ms mt l mu mv">docker push <strong class="mn io">&lt;dockerhub_username&gt;</strong>/<strong class="mn io">&lt;name_of_file&gt;</strong>:<strong class="mn io">&lt;tag&gt;</strong></span></pre><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/358070cafdcb81755f25986f0c39356c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMHI6ZTXuFUMqhhgoEMDGg.png"/></div></div></figure><p id="e4df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">登录您的 DockerHub 帐户，并验证您的图像已被推送:</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/c563e02ba7eafb2d5ca6d788e5081ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j72K_nsZ7wxoeEG54fwo8Q.png"/></div></div></figure><h1 id="8848" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">步骤 4:启动 Minikube</h1><p id="f2a4" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">我们使用 MiniKube 是因为它允许您在本地计算机上运行单节点 Kubernetes 集群。</p><ol class=""><li id="dd4d" class="nb nc in jx b jy jz kc kd kg nd kk ne ko nf ks ng nh ni nj bi translated">使用以下命令启动 Minikube:</li></ol><pre class="mg mh mi mj gt mm mn mo mp aw mq bi"><span id="6e2f" class="mr le in mn b gy ms mt l mu mv">                          minikube start</span></pre><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/e531c1bbdda2af983dcd560eb1c90b1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nqOM_G7CdXCJmV0uUkj8OQ.png"/></div></div></figure><p id="35fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">检查集群的状态:</p><pre class="mg mh mi mj gt mm mn mo mp aw mq bi"><span id="8c7f" class="mr le in mn b gy ms mt l mu mv">                           minikube status</span></pre><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f1b78cce385fb3455a2479d3d922f85e.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*W0HraU4xkAuZ-siOSxruAQ.png"/></div></figure><h1 id="06a1" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">最后一步:创建部署</h1><p id="d252" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">接下来，我们需要<em class="kw">创建、公开和验证</em>部署:</p><pre class="mg mh mi mj gt mm mn mo mp aw mq bi"><span id="ddb8" class="mr le in mn b gy ms mt l mu mv">kubectl create deployment <strong class="mn io">&lt;name_of_file&gt;</strong> --image=<strong class="mn io">&lt;dockerhub_username&gt;</strong>/<strong class="mn io">&lt;name_of_file&gt;</strong>:<strong class="mn io">&lt;tag&gt;</strong></span></pre><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/b41c90760760416faae25e9e6295b87b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gnFCbw0H8knPUNQNFatQPQ.png"/></div></div></figure><p id="c3d8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">揭露它:</p><pre class="mg mh mi mj gt mm mn mo mp aw mq bi"><span id="fe24" class="mr le in mn b gy ms mt l mu mv">kubectl expose deployment <strong class="mn io">&lt;name_of_file&gt; </strong>--type=NodePort --port=80  --name=<strong class="mn io">&lt;name_of_file&gt;</strong></span></pre><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/821f688fdb39b3e8f38835f2f564ce95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uu1GbHQ0kWYG6dPLCuJrfg.png"/></div></div></figure><p id="0a5f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">验证部署成功，并且我们可以访问它:</p><pre class="mg mh mi mj gt mm mn mo mp aw mq bi"><span id="e34a" class="mr le in mn b gy ms mt l mu mv">minikube service <strong class="mn io">&lt;name_of_file&gt;</strong></span></pre><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/9450ec3d2e2a6734cb56578e728bf4ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*NtWpZPeTfJptuV7araLZ_Q.png"/></div></figure><p id="f1ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就是这样！您成功地创建了一个 Docker 映像，将其推送到 Docker Hub，使用 Minikube 访问映像，并将其部署在 Kubernetes 上！</p><p id="6f90" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">资源:</p><p id="4aba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kv" href="https://computingforgeeks.com/how-to-install-minikube-on-centos-linux-with-kvm/" rel="noopener ugc nofollow" target="_blank">https://computingforgeeks . com/how-to-install-minikube-on-centos-Linux-with-KVM/</a></p><div class="np nq gp gr nr ns"><a href="https://www.bluematador.com/blog/building-and-deploying-to-kubernetes" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd io gy z fp nx fr fs ny fu fw im bi translated">构建 Docker 映像并将其部署到 Kubernetes 集群</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">将 Docker 映像部署到 Kubernetes 是以一种易于扩展的方式运行应用程序的好方法。开始使用…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">www.bluematador.com</p></div></div></div></a></div></div></div>    
</body>
</html>