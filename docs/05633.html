<html>
<head>
<title>How to Add Hours to a JavaScript Date Object?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何给一个 JavaScript 日期对象添加小时？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-add-hours-to-a-javascript-date-object-860d8170b04f?source=collection_archive---------3-----------------------#2021-09-21">https://blog.devgenius.io/how-to-add-hours-to-a-javascript-date-object-860d8170b04f?source=collection_archive---------3-----------------------#2021-09-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7e1d7f9a66a36f60519601b34b8afe63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0BycEJ9MeqgyP6sy"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@agebarros?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿格巴洛斯</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="09ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们可能想给 JavaScript 对象增加时间。</p><p id="2554" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何向 JavaScript 日期对象添加小时。</p><h1 id="8f96" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Date.prototype.getTime 和 Date.prototype.setTime</h1><p id="85d4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用 JavaScript native <code class="fe me mf mg mh b">getTime</code>方法来获取以毫秒为单位的日期时间戳。</p><p id="aec6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">setTime</code>方法来设置日期的时间戳，以毫秒为单位。</p><p id="9cb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，要向现有日期添加小时数，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0e35" class="mq lc iq mh b gy mr ms l mt mu">const date = new Date(2021, 1, 1)<br/>const h = 2<br/>date.setTime(date.getTime() + (h * 60 * 60 * 1000))<br/>console.log(date)</span></pre><p id="2f37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe me mf mg mh b">date</code>对象，它有一个我们想要添加小时数的日期。</p><p id="1d89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">h</code>有我们想要添加的小时数。</p><p id="eba7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用新日期的时间戳(以毫秒为单位)调用<code class="fe me mf mg mh b">setTime</code>。</p><p id="1706" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过编写以下内容得到时间戳<code class="fe me mf mg mh b">date</code>加 2 小时:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b669" class="mq lc iq mh b gy mr ms l mt mu">date.getTime() + (h * 60 * 60 * 1000)</span></pre><p id="ca50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">(h * 60 * 60 * 1000)</code>是以毫秒为单位的 2 小时。</p><p id="67bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们得到<code class="fe me mf mg mh b">date</code>是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d0ef" class="mq lc iq mh b gy mr ms l mt mu">Mon Feb 01 2021 02:00:00 GMT-0800 (Pacific Standard Time)</span></pre><h1 id="4817" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Date.prototype.getHours 和 Date.prototype.setHours</h1><p id="b274" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们还可以使用<code class="fe me mf mg mh b">getHours</code>和<code class="fe me mf mg mh b">setHours</code>方法分别获取和设置 JavaScript 日期对象的小时。</p><p id="c33a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="66a2" class="mq lc iq mh b gy mr ms l mt mu">const date = new Date(2021, 1, 1)<br/>const h = 2<br/>date.setHours(date.getHours() + h)<br/>console.log(date)</span></pre><p id="dd4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到与上一个例子相同的结果。</p><p id="9ce5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可能还想制作原始日期对象的副本，然后在复制的日期对象中更改小时。</p><p id="3f0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1cc0" class="mq lc iq mh b gy mr ms l mt mu">const date = new Date(2021, 1, 1)<br/>const h = 2<br/>const copiedDate = new Date(date.getTime());<br/>copiedDate.setHours(date.getHours() + h)<br/>console.log(copiedDate)</span></pre><p id="b4e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过向<code class="fe me mf mg mh b">Date</code>构造函数传递以毫秒为单位的时间戳来制作副本，就像我们在第 3 行中所做的那样。</p><p id="8466" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">getTime</code>返回以毫秒为单位的时间戳。</p><h1 id="a939" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">日期.原型.<code class="fe me mf mg mh b">getUTCHours</code>和日期.原型.<code class="fe me mf mg mh b">setUTCHours</code></h1><p id="7b18" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们还可以使用<code class="fe me mf mg mh b">getUTCHours</code>和<code class="fe me mf mg mh b">setUTCHours</code>方法分别获取和设置 JavaScript 日期对象的小时。</p><p id="2f2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">getUTCHours</code>以 UTC 返回一天中的小时。</p><p id="daad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">setUTCHours</code>以 UTC 设置小时。</p><p id="775a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9467" class="mq lc iq mh b gy mr ms l mt mu">const date = new Date(2021, 1, 1)<br/>const h = 2<br/>date.setUTCHours(date.getUTCHours() + h)<br/>console.log(date)</span></pre><p id="ae10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">给<code class="fe me mf mg mh b">date</code>增加 2 小时。</p><h1 id="36ad" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Moment.js</h1><p id="0df4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们还可以使用 moment.js 为日期添加小时。</p><p id="845a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8c05" class="mq lc iq mh b gy mr ms l mt mu">const newDate = new moment(new Date(2021, 1, 1)).add(10, 'hours').toDate();<br/>console.log(newDate)</span></pre><p id="de05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将日期增加 10 个小时，然后传递到<code class="fe me mf mg mh b">moment</code>函数中。</p><p id="4c2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在上面调用<code class="fe me mf mg mh b">add</code>来增加 10 个小时。</p><p id="7ce7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数是要添加的数量。</p><p id="6bcc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是要相加的量的单位。</p><p id="6fe6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">toDate</code>将返回的带有新日期时间的 moment 对象转换回本地 JavaScript date 对象。</p><p id="32f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe me mf mg mh b">newDate</code>是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0cd9" class="mq lc iq mh b gy mr ms l mt mu">Mon Feb 01 2021 10:00:00 GMT-0800 (Pacific Standard Time)</span></pre><p id="ef5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从控制台日志中可以看到。</p><h1 id="acb3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="2764" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用原生 JavaScript date 方法或 moment.js 为日期添加小时数。</p></div></div>    
</body>
</html>