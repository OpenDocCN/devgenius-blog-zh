<html>
<head>
<title>How to Create an Advanced Discord Bot using MongoDB, AWS, and Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 MongoDB、AWS 和 Docker 创建一个高级的 Discord Bot</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-create-an-advanced-discord-bot-using-mongodb-aws-and-docker-eb2d2f21c888?source=collection_archive---------11-----------------------#2022-10-03">https://blog.devgenius.io/how-to-create-an-advanced-discord-bot-using-mongodb-aws-and-docker-eb2d2f21c888?source=collection_archive---------11-----------------------#2022-10-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="cca6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">了解如何在云上托管一个 discord bot，使用一个数据库来实现完整的 CRUD 功能。</em></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><a href="https://github.com/daminals/AdvancedDiscordBot"><div class="gh gi kj"><img src="../Images/732be2a80922c24fa0804bcd8538862f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qQpDEjqGFj37FJiA0iwNHQ.png"/></div></a><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">查看该项目的 github！</figcaption></figure><p id="2308" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">本文假设您知道如何创建并已经拥有一个简单的 discord bot，并且不会讨论如何使用 discord 开发者门户或设置一个初始 bot。你可以使用</em> <a class="ae kv" href="https://github.com/daminals/Simplebot" rel="noopener ugc nofollow" target="_blank"> <em class="ki">这个资源库</em> </a> <em class="ki">中提供的基础不和谐 bot。</em></p><p id="8e9a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一个高级的 discord bot 需要在这个“simplebot”模板上增加额外的设置和功能来运行更复杂的任务。为了扩展可用性，最重要的功能是数据库，我们将使用 MongoDB，以及永久主机，我们将使用 AWS 和 Docker。</p><h1 id="c72c" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated"><strong class="ak">步骤 1:配置您的数据库</strong></h1><p id="c135" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">前往<a class="ae kv" href="https://www.mongodb.com/cloud/atlas/register" rel="noopener ugc nofollow" target="_blank">mongodb.com/cloud/atlas/register</a>创建一个新账户。之后你可以安装<a class="ae kv" href="https://www.mongodb.com/docs/atlas/cli/stable" rel="noopener ugc nofollow" target="_blank"> Atlas 命令行界面</a>。</p><p id="b5fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">安装后，到您的终端并输入</p><pre class="kk kl km kn gt lz ma mb mc aw md bi"><span id="c139" class="me kx in ma b gy mf mg l mh mi">$ atlas setup</span></pre><p id="2807" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Atlas 将提示您使用刚刚创建的帐户登录。授权您的帐户后，它会询问您</p><pre class="kk kl km kn gt lz ma mb mc aw md bi"><span id="14f1" class="me kx in ma b gy mf mg l mh mi">$ Do you want to set up your first free database in Atlas with default settings (it’s free forever)? (Y/n)</span></pre><p id="01ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输入 Y，给它时间来生成您的数据库</p><p id="6acc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Atlas 还将为您提供一个数据库用户和密码，以及一个连接到您数据库的集群字符串。将此信息输入您的。env 如下</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">。环境文件</figcaption></figure><p id="445a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">注意:请务必将这些钥匙放在您的。env 文件，并确保它们不被张贴在任何地方。否则，恶意行为者可能会访问您的数据。</em></p><p id="cce4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您已经成功地配置了数据库。</p><h1 id="b23d" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 2:附加数据库</h1><p id="e22b" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">要将 MongoDB 附加到您的数据库，我们需要首先安装它。</p><p id="8f1c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们进入我们的虚拟环境</p><pre class="kk kl km kn gt lz ma mb mc aw md bi"><span id="f22f" class="me kx in ma b gy mf mg l mh mi">$ source venv/bin/activate<br/>$ pip3 install “pymongo[snappy,gssapi,srv,tls]”</span></pre><p id="e85e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们将数据库连接到我们的机器人！</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">在 pymongo 中导入</figcaption></figure><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">添加 MongoClient，提供新的数据库和集合</figcaption></figure><p id="9384" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们为我们的不和谐机器人创建一个新的命令，它将更新我们的数据库作为一个测试用例</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">使用 discord bot 函数创建新的数据库键:值对</figcaption></figure><p id="e745" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用<code class="fe ml mm mn ma b">python3 bot.py</code>运行它，然后在你的 discord 服务器中检查结果</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mo"><img src="../Images/533dafa922214e37a5960191cd6948c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YRKW_B2aXSJWq8gLMnRtTQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Bot 报告已提交键:值对</figcaption></figure><p id="6767" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当然，让我们检查一下我们的 Mongo Atlas 集群</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mt"><img src="../Images/467f7def02c114d24d4330e6c516fefb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7F5DqAEZKSK-ADsTcUszpg.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">检查云数据库以确保数据通过</figcaption></figure><p id="44d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，在这个菜单中，让我们启用 IP 访问，以便我们的 AWS 主机能够访问我们的数据库</p><p id="4257" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">警告:允许这意味着拥有您的环境变量的用户可以从任何位置连接。确保数据库密钥的安全，否则您的数据可能会暴露。</em></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mu"><img src="../Images/a81918a18a427671d916573a7b75a3c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*teymXMqHy5gBYEd7hDx2mg.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">允许所有 IP 连接</figcaption></figure><h1 id="d8f4" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 3:实现 CRUD 功能</h1><p id="5688" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">CRUD 指的是“创建、读取、更新、删除”我们将在 bot 命令中实现这些功能，以便它们可以作为我们的 bot 的一个功能来使用</p><h2 id="ee39" class="me kx in bd ky mv mw dn lc mx my dp lg jv mz na lk jz nb nc lo kd nd ne ls nf bi translated"><strong class="ak">创建</strong></h2><p id="9455" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">让我们更新我们的创建函数。到目前为止，它只存储键:值对，让我们存储不一致的用户 id，以便我们可以很容易地引用命令的作者</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="cf69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好吧，让我们再次运行我们的函数，看看会发生什么！</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi ng"><img src="../Images/dd7ac9041760d3e7a7b012084cd99750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LLEPAWDB30hCxVMTUt6i7A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Author 现在是一个键，Discord 用户 ID 是一个值</figcaption></figure><h2 id="d3ea" class="me kx in bd ky mv mw dn lc mx my dp lg jv mz na lk jz nb nc lo kd nd ne ls nf bi translated">阅读</h2><p id="280d" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">让我们允许用户读取他们插入到数据库中的密钥</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">读取功能</figcaption></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nh"><img src="../Images/593af044db0c7e5be38a1230b2783b1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d2gmSvtj7iDpNjvwZziRhg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">有用！</figcaption></figure><p id="b950" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">成功！</p><h2 id="a667" class="me kx in bd ky mv mw dn lc mx my dp lg jv mz na lk jz nb nc lo kd nd ne ls nf bi translated">更新</h2><p id="c594" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">为了更新数据，我们不应该把它作为一个独立于 create 的功能。我们想要一个无缝的用户体验，他们可以简单地添加新的键到现有的数据点，或者创建一个新的，如果它不存在。所以让我们跳回我们的创建函数</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="bca3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如你所看到的，函数很快变得有点复杂，所以让我们来分析一下这里发生了什么。</p><p id="e35f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们查询数据库，看看作者是否有任何记录(第 3 行)。如果有，则更新它们的记录，并使用 set 函数“$set”来添加这个新键或更新数据库中现有的键。否则，像前面一样运行 create 函数。</p><p id="532c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们来测试一下</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi ni"><img src="../Images/1ce27e5ee390e8ef60fafd8de6dbf4f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*igN_dTCJAqLgUVkgxELQ5Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">我们的数据库能够为我们的用户保存多个密钥</figcaption></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nj"><img src="../Images/c22e9acf28bb4c3b581f11e69d610e08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b93sblERgYF4A_J6W7s_Ig.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">更新的数据库对象</figcaption></figure><h2 id="1a99" class="me kx in bd ky mv mw dn lc mx my dp lg jv mz na lk jz nb nc lo kd nd ne ls nf bi translated">删除</h2><p id="7118" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">对于删除，我们的函数有两个潜在的含义。我们可以删除整个对象，也可以删除特定的键:值对。在本教程中，我们将两者都做</p><p id="c97f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要删除特定的键:值对，让我们创建一个名为 remove 的新函数</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="b748" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，该函数使用$exists 操作来检查用户请求的键是否存在。如果是，使用$unset 操作删除该键。如果不存在，将该信息报告给用户</p><p id="3ddc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，让我们设置删除整个用户对象的函数，并将其命名为 delete</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="a2ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里的代码与我们的 remove 函数几乎相同，但是我们使用了 delete_one api 调用，而不是一个未设置的操作</p><h1 id="61d2" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">步骤 4:连接到云</h1><p id="eeec" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">既然我们已经有了一个全功能的 CRUD discord bot，我们的最后一步就是把它推到云端，而不是在你的个人设备上运行。</p><p id="0fcd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用 Docker 和 AWS 来实现这些目标</p><h2 id="6319" class="me kx in bd ky mv mw dn lc mx my dp lg jv mz na lk jz nb nc lo kd nd ne ls nf bi translated">码头工人</h2><p id="c174" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">Docker 是一个操作系统虚拟化工具，这意味着它在您的本地环境之上模拟一个特定的环境。这意味着不管你写什么代码，如果你把它 Docker 化，你可以在任何机器上用 Docker 运行它</p><p id="a88e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是为什么我们将使用 Docker 来推送 AWS。</p><p id="57a3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以从这里安装 Docker:【https://docs.docker.com/get-docker/ T2】</p><p id="862f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Docker 利用名为“Dockerfile”的文件类型来设置其环境。我们的应该是这样的:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="mj mk l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">用你的项目所在的目录名替换<yourrootfoldersname/></figcaption></figure><p id="894c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是我们完整的文档。</p><p id="a6a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它首先用 Python3.7 安装一个基本的 linux 操作系统，将我们的当前目录设置为工作目录，安装我们需要的模块，然后运行 discord bot。</p><p id="69e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">到目前为止，我们只有一个问题，那就是我们的需求文件是空的。现在让我们用<code class="fe ml mm mn ma b">pip3 freeze &gt; requirements.txt</code>来解决这个问题</p><p id="984f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们可以通过在本地运行 dockerization 来测试它是否成功。运行<code class="fe ml mm mn ma b">docker build -t examplebot .</code>来构建我们的容器，运行<code class="fe ml mm mn ma b">docker run --env-file .env examplebot</code>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nk"><img src="../Images/ef580434192076e81273fe62b353dffa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w6WwrYGxBZzHiacQHYFa7w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">不和谐机器人正在我们的 docker 容器上本地运行</figcaption></figure><h2 id="4688" class="me kx in bd ky mv mw dn lc mx my dp lg jv mz na lk jz nb nc lo kd nd ne ls nf bi translated">自动警报系统</h2><p id="a631" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">在 aws.amazon.com<a class="ae kv" href="http://aws.amazon.com" rel="noopener ugc nofollow" target="_blank">报名或登录</a>。</p><p id="5991" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">至此，您将需要下载 AWS CLI 工具。</p><p id="dc4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">您可以从</em><a class="ae kv" href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" rel="noopener ugc nofollow" target="_blank"><em class="ki">https://docs . AWS . Amazon . com/CLI/latest/user guide/install-CLI v2 . html</em></a>下载 AWS CLI</p><p id="79c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将创建一个新用户从您的控制台登录。打开<a class="ae kv" href="http://console.aws.amazon.com/iamv2" rel="noopener ugc nofollow" target="_blank">console.aws.amazon.com/iamv2</a>并用私钥创建一个新用户</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mu"><img src="../Images/322ce88f5809b12c1f9459a5da99108c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ltxHEE02kKbROS6D5vMM6w.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">添加新用户</figcaption></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nl"><img src="../Images/ed6a73504e544e6b4bb47fd116afcf08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_lq05df8KZne0EjXs828Zg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">步骤 1:创建新用户</figcaption></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nm"><img src="../Images/660a7e0e7e2e91d77214520848e3b85f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eada60Vbh8yxaBrRlBPHLQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">步骤 2:创建新组</figcaption></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nn"><img src="../Images/92383b9d30475f1afa34da1636141b17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nqKfnt_hLrYZXa-GTQs6IA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">步骤 3:将用户添加到组中</figcaption></figure><p id="75b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">对于步骤 4，您可以跳过标签，我们不会添加任何标签。然后点击创建用户</em></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi no"><img src="../Images/b551b3a21ea7ab40ee31e4c674d7fd20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rkv5Rrq91MdFsLtH1p_dAg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">步骤 5:获取 API 密钥</figcaption></figure><p id="1574" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">太好了！现在去你的终端输入<code class="fe ml mm mn ma b">aws configure</code></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi np"><img src="../Images/8414dfe4326bfbb62028dddb9f52f758.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hGNJrnpmdx_q1FoOFZAQRg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">您可以将访问 ID 密钥和秘密访问密钥复制并粘贴到 AWS 配置中</figcaption></figure><p id="f216" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">CLI 连接到您的 AWS 帐户，我们将能够将我们的更改和 docker 映像推送到平台。</p><p id="a4f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">去<a class="ae kv" href="http://console.aws.amazon.com/elasticbeanstalk" rel="noopener ugc nofollow" target="_blank">console.aws.amazon.com/elasticbeanstalk</a>创建一个新环境</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi mu"><img src="../Images/859cb796c786e8fd0e60e6fe01a6714c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zrDMmpHnjERkM42YUyMtJg.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">配置新的弹性 Beanstalk 环境</figcaption></figure><p id="8aa3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">别忘了选择 Docker 配置！</p><p id="db32" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在给环境几分钟的生成时间后，我们将在您的根目录下运行一些命令，然后一切就绪</p><pre class="kk kl km kn gt lz ma mb mc aw md bi"><span id="7d23" class="me kx in ma b gy mf mg l mh mi">$ pip3 install awsebcli</span></pre><p id="1e22" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将安装弹性豆茎(EB) cli</p><pre class="kk kl km kn gt lz ma mb mc aw md bi"><span id="40a0" class="me kx in ma b gy mf mg l mh mi">$ eb init</span></pre><p id="9590" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将初始化一个本地 EB 存储库。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nq"><img src="../Images/da56ae1c1d475ca7322d1e20ed498737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*YJ8_Cz06FUDic4Gd7hpI-g.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">选择您的本地区域和远程环境</figcaption></figure><pre class="kk kl km kn gt lz ma mb mc aw md bi"><span id="4447" class="me kx in ma b gy mf mg l mh mi">eb setenv `cat .env | sed '/^#/ d' | sed '/^$/ d'`</span></pre><p id="207c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将从您的。env 到弹性 Beanstalk 实例</p><pre class="kk kl km kn gt lz ma mb mc aw md bi"><span id="de34" class="me kx in ma b gy mf mg l mh mi">eb deploy</span></pre><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi nr"><img src="../Images/28b783d387b5dee8e26bdd7c917ef69f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_VB36Pfp9Q-W4grs4rPmLQ.png"/></div></div></figure><p id="2786" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">跳到 discord 来验证机器人正在工作</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="mp mq di mr bf ms"><div class="gh gi ns"><img src="../Images/c98a410766f61c9b5c99789d8661ceae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C1bhkeCPAG4e0T8yYfzntA.png"/></div></div></figure><p id="663e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有用！</p><h1 id="9f2b" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="063a" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">恭喜你！现在，您有了一个连接到数据库并托管在云上的 discord bot！</p><p id="88f8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本教程旨在帮助你建立一个基本的不和谐机器人，你可以扩展它来满足你的目标。有了数据库，你可以创建更加复杂的机器人，可以创建定制的用户/服务器设置，个性化的功能，等等。利用 AWS 托管可以减轻您的负担，让您专注于开发新功能，而不是维护 24 小时服务。</p><p id="e35b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以在<a class="ae kv" href="https://github.com/daminals/AdvancedDiscordBot" rel="noopener ugc nofollow" target="_blank">本报告</a>查看本教程编写的所有代码</p><div class="nt nu gp gr nv nw"><a href="https://github.com/daminals/AdvancedDiscordBot" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd io gy z fp ob fr fs oc fu fw im bi translated">GitHub-da minals/advanced discordbot</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div></div></div>    
</body>
</html>