<html>
<head>
<title>Object-Oriented Programming in Rust</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rust中的面向对象编程</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/object-oriented-programming-in-rust-691baf4d2996?source=collection_archive---------0-----------------------#2020-12-29">https://blog.devgenius.io/object-oriented-programming-in-rust-691baf4d2996?source=collection_archive---------0-----------------------#2020-12-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0c6e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在一个最常见的编程范例中，Rust与其他语言有何不同。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/f7f3cc1c5d7983cee4a37c63f80c8882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o96bnuWLY3AhNU-6eIcYhA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者图片</figcaption></figure><p id="4e4f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果你听说过铁锈，那么你可能知道为什么人们对它如此兴奋。通过所有权和借用系统的内存安全、极快的速度、对WebAssembly的一流支持等等。</p><p id="915c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">虽然这些东西使Rust成为未来伟大的编程语言，但这种语言也有许多细微差别，使它非常适合使用。</p><p id="5910" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">许多程序员并没有真正从Rust最有利可图的进步中受益，然而，设计这种编程语言的选择使它值得探索。我觉得对于中级程序员来说，和Rust一起工作，了解Rust的设计，可以加强你的编程直觉。</p><p id="f9fc" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">还有什么比最基本的编程范例之一:面向对象编程更好的方法呢？</p></div><div class="ab cl lo lp hr lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ig ih ii ij ik"><p id="be30" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在Rust中，一个对象的最基本的组件被分离和简化。单独创建一个对象实际上只是一个<code class="fe lv lw lx ly b"><a class="ae lz" href="https://doc.rust-lang.org/book/ch05-00-structs.html" rel="noopener ugc nofollow" target="_blank">struct</a></code>。要实现该结构的方法，可以使用<code class="fe lv lw lx ly b">impl</code>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="fbbd" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">因为对象只是结构，默认情况下，对象是将信息组合在一起的最原始形式。编程语言本身遵循DRY原则是一个很好的方式，我认为以这种方式让struct特性加倍很有意义。</p></div><div class="ab cl lo lp hr lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ig ih ii ij ik"><p id="d478" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">一个基本对象足够简单，但是当涉及到其他面向对象的概念时，比如继承、接口和抽象类，Rust做的事情非常不同，在我看来，更优雅。</p><p id="b793" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">对于所有这些特性，它实际上归结为想做两件事。</p><ol class=""><li id="2980" class="mc md in ku b kv kw ky kz lb me lf mf lj mg ln mh mi mj mk bi translated">您想要定义一种通用对象类型，并拥有适合该类型的子对象，或者</li><li id="dee6" class="mc md in ku b kv ml ky mm lb mn lf mo lj mp ln mh mi mj mk bi translated">您希望强制一个对象拥有某种方法或变量的实现。</li></ol><h1 id="1e87" class="mq mr in bd ms mt mu mv mw mx my mz na jt nb ju nc jw nd jx ne jz nf ka ng nh bi translated">枚举</h1><p id="8e12" class="pw-post-body-paragraph ks kt in ku b kv ni jo kx ky nj jr la lb nk ld le lf nl lh li lj nm ll lm ln ig bi translated">父对象、接口和抽象类都是为了允许一种带有子对象类型的通用对象类型，子对象类型意味着以类似的方式进行交互。</p><p id="434d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><code class="fe lv lw lx ly b"><a class="ae lz" href="https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html" rel="noopener ugc nofollow" target="_blank">enums</a></code>也一样。或者至少Rust背后的人似乎是这么认为的。</p><p id="f713" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Rust实际上认为人们可能会更频繁地使用它，并实现了一个更好版本的switch case，<code class="fe lv lw lx ly b"><a class="ae lz" href="https://doc.rust-lang.org/book/ch06-02-match.html" rel="noopener ugc nofollow" target="_blank">match</a></code>，以实现更好的控制流。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="846f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您可能会注意到，在我的枚举声明中，事情并不完全完美。你不能仅仅将对象类型指定为枚举的变量，你只能定义纯变量、值、<a class="ae lz" href="https://doc.rust-lang.org/book/ch05-00-structs.html" rel="noopener ugc nofollow" target="_blank">结构或元组结构</a>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="baad" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">最后两个，Cow和Goat，都是元组结构，但是Goat是一个例子，说明如何定义一个类似于其他语言中的纯对象类型的枚举变量。</p><p id="6384" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">尽管enum在某种程度上支持通用的父对象类型，但它的主要目的是体现变体。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="0a5c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">从第一个例子开始，你可以实现枚举的方法，但是当我们想要一个更通用的接口模型时，我们不得不转向别的东西。</p><h1 id="7f20" class="mq mr in bd ms mt mu mv mw mx my mz na jt nb ju nc jw nd jx ne jz nf ka ng nh bi translated">特征</h1><p id="21c2" class="pw-post-body-paragraph ks kt in ku b kv ni jo kx ky nj jr la lb nk ld le lf nl lh li lj nm ll lm ln ig bi translated">输入<code class="fe lv lw lx ly b"><a class="ae lz" href="https://doc.rust-lang.org/book/ch10-02-traits.html" rel="noopener ugc nofollow" target="_blank">traits</a></code>。</p><p id="021d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在我看来，traits是大多数语言中更优雅的接口实现。</p><p id="1bc5" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">您定义一个trait，使用方法的默认或空实现，然后为给定对象定义该trait的实现。</p><p id="2174" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这是一个轴对齐的包围盒特征的例子，我在一个3D平台游戏中使用它进行碰撞检测。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="f1e1" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">在为我的Player结构实现AABB特征时，因为min和max方法没有默认实现，所以我的代码不会编译，直到我实现了这两个方法。</p><p id="c329" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果你注意到在trait的碰撞方法中，它使用了类型为<code class="fe lv lw lx ly b">&amp;impl AABB</code>的<code class="fe lv lw lx ly b">other</code>。这是一个可以传入实现trait的类型作为参数的例子，类似于其他语言中的接口。</p><h1 id="d079" class="mq mr in bd ms mt mu mv mw mx my mz na jt nb ju nc jw nd jx ne jz nf ka ng nh bi translated">结论</h1><p id="0588" class="pw-post-body-paragraph ks kt in ku b kv ni jo kx ky nj jr la lb nk ld le lf nl lh li lj nm ll lm ln ig bi translated">绘制编程语言之间的联系，并了解功能重叠的地方，可以帮助我们作为程序员更好地理解我们经常使用的工具。即使我们不是任何语言背后的人，认识到它们是如何形成的也是很重要的。</p><p id="dec5" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Rust很特别，因为它的开发者做出了不同的设计选择。Rust没有像父对象、接口和抽象类这样的功能，它们在某种程度上都是一个对象的变体，而是支持独立的功能，在有意义的地方服务于多种目的，而不会弄乱程序员的工具箱。</p><p id="efbe" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">它的系统并没有像其他语言一样完美地模仿同样的面向对象设计，但我认为它不应该这样。虽然它没有涵盖所有的细微差别，但它支持一个有意义的优雅系统，并满足所有必要的目的，尽管是以不同的方式。</p></div></div>    
</body>
</html>