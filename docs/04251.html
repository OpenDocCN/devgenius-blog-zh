<html>
<head>
<title>How to Avoid Anemic Domain Model?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何避免贫血的域名模型？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-avoid-anemic-domain-model-59775c639678?source=collection_archive---------2-----------------------#2021-02-16">https://blog.devgenius.io/how-to-avoid-anemic-domain-model-59775c639678?source=collection_archive---------2-----------------------#2021-02-16</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="9a4f" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">如何处理业务逻辑，并避免贫血的领域模型。</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/b9383f21c79808d157f16eb4873dff2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-U3Xdv9lkNzjggIb"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk translated">肖恩·波洛克在<a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="c0d7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您需要将业务逻辑放在代码中。逻辑写在哪里取决于你。如果你正在使用OOP，那么你需要考虑一下。你必须坚持单一责任原则。</p><blockquote class="lt"><p id="1aa9" class="lu lv ir bd lw lx ly lz ma mb mc ls dk translated">…这些对象与真正的领域模型所具有的丰富的关系和结构相联系…在这些对象上几乎没有任何行为，这使得它们只不过是一些getters和setters。— <a class="ae kw" href="https://www.martinfowler.com/bliki/AnemicDomainModel.html" rel="noopener ugc nofollow" target="_blank">马丁·福勒</a></p></blockquote><p id="aab8" class="pw-post-body-paragraph kx ky ir kz b la md js lc ld me jv lf lg mf li lj lk mg lm ln lo mh lq lr ls ik bi translated">贫血的领域模型充满了关系。模型不持有行为，所以整个域充满了属性包。</p></div><div class="ab cl mi mj hv mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ik il im in io"><h2 id="5d24" class="mp mq ir bd mr ms mt dn mu mv mw dp mx lg my mz na lk nb nc nd lo ne nf ng nh bi translated">什么是领域模型？</h2><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj ni"><img src="../Images/0879e435db5679685c7f8d7ac2918b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/0*Y21oi_87VUM5jqjS.gif"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk translated"><a class="ae kw" href="https://martinfowler.com/eaaCatalog/serviceLayer.html" rel="noopener ugc nofollow" target="_blank">域模型位置</a></figcaption></figure><p id="89f0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在领域层之前是服务层。马丁在下面的句子中解释了它的作用。</p><blockquote class="lt"><p id="42dc" class="lu lv ir bd lw lx ly lz ma mb mc ls dk translated">服务层从连接客户端层的角度定义了应用程序的边界[考克伯恩]及其可用操作集。— <a class="ae kw" href="https://www.martinfowler.com/bliki/AnemicDomainModel.html" rel="noopener ugc nofollow" target="_blank">马丁·福勒</a></p></blockquote><p id="b8ae" class="pw-post-body-paragraph kx ky ir kz b la md js lc ld me jv lf lg mf li lj lk mg lm ln lo mh lq lr ls ik bi translated">这并不意味着“所有”业务逻辑都应该存在于服务层。模型也可以有行为。模型的Getters和setters可以增加额外的行为。</p><p id="39dc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">服务层应该很薄。只公开领域必需的方法。领域模型应该有业务规则。</p><blockquote class="lt"><p id="0780" class="lu lv ir bd lw lx ly lz ma mb mc ls dk translated">一般来说，您在服务中发现的行为越多，您就越有可能剥夺领域模型的好处。如果你所有的逻辑都在服务上，那你就把自己洗劫一空了。— <a class="ae kw" href="https://www.martinfowler.com/bliki/AnemicDomainModel.html" rel="noopener ugc nofollow" target="_blank">马丁·福勒</a></p></blockquote><p id="f186" class="pw-post-body-paragraph kx ky ir kz b la md js lc ld me jv lf lg mf li lj lk mg lm ln lo mh lq lr ls ik bi translated">我从事Java编写的服务已经有很长时间了。我可以说我们在服务方面的确有很多逻辑。我未来的目标是让它尽可能薄。</p></div><div class="ab cl mi mj hv mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ik il im in io"><h2 id="2939" class="mp mq ir bd mr ms mt dn mu mv mw dp mx lg my mz na lk nb nc nd lo ne nf ng nh bi translated">软件进化</h2><p id="cc25" class="pw-post-body-paragraph kx ky ir kz b la nj js lc ld nk jv lf lg nl li lj lk nm lm ln lo nn lq lr ls ik bi translated">领域扩大。电子商务企业可能会开发不同的产品，或者为用户增加不同的促销活动。前面提到的都需要额外的业务逻辑。</p><p id="ed39" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">测试服务于它的目的。我们确信在我们的店面添加新产品时不会有任何问题。</p><p id="4684" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们确定它是可维护的吗？如果一个企业增加了一个新的产品线，会发生什么？</p><p id="b637" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们需要创建我们的软件，使它尽可能隐藏。这就是服务层需要“瘦”的原因。领域层帮助我们隐藏所有的细节，留下一个交互的界面。</p><p id="bc9d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">曝光太多会留下出错的空间。成员逻辑真的属于购物车服务吗？在考虑领域的情况下回答这些问题会带来新的更好的方法。</p></div><div class="ab cl mi mj hv mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ik il im in io"><h2 id="3600" class="mp mq ir bd mr ms mt dn mu mv mw dp mx lg my mz na lk nb nc nd lo ne nf ng nh bi translated">封装解决贫血领域模型</h2><p id="3ac9" class="pw-post-body-paragraph kx ky ir kz b la nj js lc ld nk jv lf lg nl li lj lk nm lm ln lo nn lq lr ls ik bi translated">很难跟踪因为我们暴露太多而发生的错误。我们在购物车服务中做成员逻辑。我们允许创建没有必需属性的对象，即空构造函数。</p><p id="13f6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">假设你的控制器中有很多逻辑。在领域的上下文中，提取逻辑确实有所帮助。盲目提取，将逻辑移到“经理”类，不会。在进行任何更改之前，请告知您的域。看看“客户”的需求。</p><p id="0915" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在您的领域模型中封装领域逻辑。类应该处理所有相关的逻辑，即过期时间逻辑。该类不应处理<code class="fe no np nq nr b">Member</code>逻辑，即向成员添加优惠。</p></div><div class="ab cl mi mj hv mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ik il im in io"><h2 id="5555" class="mp mq ir bd mr ms mt dn mu mv mw dp mx lg my mz na lk nb nc nd lo ne nf ng nh bi translated">论理解领域</h2><p id="3ced" class="pw-post-body-paragraph kx ky ir kz b la nj js lc ld nk jv lf lg nl li lj lk nm lm ln lo nn lq lr ls ik bi translated">查看域，您可以开发域对象的类。<a class="ae kw" href="https://twitter.com/ericevans0" rel="noopener ugc nofollow" target="_blank">伊文斯</a>把它们分类了，这样我们就不用。</p><blockquote class="lt"><p id="ab28" class="lu lv ir bd lw lx ly lz ma mb mc ls dk translated">实体通常是大的东西，如客户、船舶、租赁协议。值通常是像日期、金钱、数据库查询这样的小事。服务通常是对外部资源的访问，如数据库连接、消息传递网关、存储库、产品工厂。— <a class="ae kw" href="https://www.amazon.com/gp/product/0321125215?ie=UTF8&amp;tag=martinfowlerc-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0321125215" rel="noopener ugc nofollow" target="_blank">埃里克·埃文斯</a></p></blockquote><p id="4dc0" class="pw-post-body-paragraph kx ky ir kz b la md js lc ld me jv lf lg mf li lj lk mg lm ln lo mh lq lr ls ik bi translated">你不需要的是创建属性包。领域逻辑也可以存在于模型中。</p><p id="6f22" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">考虑到所有不同的软件架构，这并不是在所有地方都很好。面向服务的架构根本没有这一层。</p><p id="94d8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">记住你在哪里使用它，它不是在哪里都适用。在企业应用程序中，主要是J2EE，它是存在的。对于MVC架构，一般不会有这一层。这就是ViewModel发挥作用的地方。从一个开发者<a class="ae kw" href="https://softwareengineering.stackexchange.com/questions/208059/do-mvc-web-frameworks-favor-anemic-domain-model-in-order-to-avoid-duplication" rel="noopener ugc nofollow" target="_blank">这里</a>查一下这个疑问。</p><blockquote class="lt"><p id="4afd" class="lu lv ir bd lw lx ly lz ma mb mc ls dk translated">领域层(或模型层):负责表示业务的概念、关于业务情况的信息和业务规则。反映业务情况的状态在这里被控制和使用，即使存储它的技术细节被委托给基础设施。这一层是商业软件的核心。—埃里克·埃文斯</p></blockquote></div><div class="ab cl mi mj hv mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ik il im in io"><h2 id="d0d4" class="mp mq ir bd mr ms mt dn mu mv mw dp mx lg my mz na lk nb nc nd lo ne nf ng nh bi translated">资源:</h2><p id="8a3e" class="pw-post-body-paragraph kx ky ir kz b la nj js lc ld nk jv lf lg nl li lj lk nm lm ln lo nn lq lr ls ik bi translated"><a class="ae kw" href="https://vimeo.com/43598193" rel="noopener ugc nofollow" target="_blank">吉米的会议发言</a></p><div class="nt nu gq gs nv nw"><a href="https://github.com/jbogard/presentations/tree/master/WickedDomainModels" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">jbo gard/演示</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">我做的报告。在GitHub上创建一个帐户，为jbogard/presentations的开发做出贡献。</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">github.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kq nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://martinfowler.com/bliki/EvansClassification.html" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">bliki: EvansClassification</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">在他的优秀著作领域驱动设计中，Eric Evans创建了不同种类的领域分类…</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">martinfowler.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kq nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://docs.microsoft.com/en-us/previous-versions/msp-n-p/ee658090%28v=pandp.10%29?redirectedfrom=MSDN" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">第9章:服务层指南</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">有关本指南中涵盖的主题的更多详细信息，请参见本指南的目录。概述设计考虑因素…</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">docs.microsoft.com</p></div></div><div class="of l"><div class="om l oh oi oj of ok kq nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://www.martinfowler.com/bliki/AnemicDomainModel.html" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">bliki: AnemicDomainModel</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">这是一种已经存在了很长时间的反模式，但似乎有了特别的突破…</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">www.martinfowler.com</p></div></div><div class="of l"><div class="on l oh oi oj of ok kq nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://martinfowler.com/eaaCatalog/serviceLayer.html" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">服务层</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">EAA目录的p |作者Randy Stafford定义了一个应用程序的边界和一个服务层，该服务层建立了一组…</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">martinfowler.com</p></div></div><div class="of l"><div class="oo l oh oi oj of ok kq nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://softwareengineering.stackexchange.com/questions/218011/how-accurate-is-business-logic-should-be-in-a-service-not-in-a-model" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">“业务逻辑应该在服务中，而不是在模型中”有多准确？</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">今晚早些时候，我回答了StackOverflow上的一个问题。问题:编辑现有对象…</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">softwareengineering.stackexchange.com</p></div></div><div class="of l"><div class="op l oh oi oj of ok kq nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://softwareengineering.stackexchange.com/questions/168517/recovering-an-anemic-domain-model-into-a-multitier-architecture" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">将贫血的领域模型恢复到多层架构中</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">在过去的几天里，我学习了领域驱动设计，并试图将其应用到当前的项目中…</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">softwareengineering.stackexchange.com</p></div></div><div class="of l"><div class="oq l oh oi oj of ok kq nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://martinfowler.com/bliki/EvansClassification.html" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">bliki: EvansClassification</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">在他的优秀著作领域驱动设计中，Eric Evans创建了不同种类的领域分类…</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">martinfowler.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kq nw"/></div></div></a></div><div class="nt nu gq gs nv nw"><a href="https://softwareengineering.stackexchange.com/questions/208059/do-mvc-web-frameworks-favor-anemic-domain-model-in-order-to-avoid-duplication" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">为了避免重复，MVC web框架支持贫血的领域模型吗？</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">在你链接的马丁·福勒的文章中，他谈到了贫血的领域模型:乍一看，它看起来像真的一样…</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">softwareengineering.stackexchange.com</p></div></div><div class="of l"><div class="or l oh oi oj of ok kq nw"/></div></div></a></div></div></div>    
</body>
</html>