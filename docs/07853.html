<html>
<head>
<title>AZ-204 — Building Blocks Of Azure App Service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AZ-204—Azure 应用服务的构建模块</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/az204-building-blocks-of-azure-app-service-e2c1e9065aca?source=collection_archive---------10-----------------------#2022-04-27">https://blog.devgenius.io/az204-building-blocks-of-azure-app-service-e2c1e9065aca?source=collection_archive---------10-----------------------#2022-04-27</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><p id="78da" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">这篇文章是 AZ-204 认证的几篇文章的一部分。在本文中，我将讨论 Azure 应用服务的关键组件。</p><h1 id="9d22" class="km kn ir bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">什么是 Azure 应用服务</h1><p id="61a2" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">Azure App Service 是微软 Azure 的一个产品，用于托管 web 应用、REST APIs 和移动后端。</p><h2 id="e151" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">优势</h2><p id="646e" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">使用 Azure App 服务有很多好处。主要的如下:</p><ul class=""><li id="e267" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">自动缩放支持</li><li id="1595" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">持续集成/部署支持</li><li id="0ef5" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">与 Linux 的兼容性</li></ul><h2 id="b933" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">限制</h2><p id="12ab" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">在技术的世界里，也有局限性。理解它们也很重要。</p><ul class=""><li id="c27c" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">共享定价层不支持应用服务</li><li id="4565" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">Linux 和 Windows 应用不能驻留在同一个应用服务计划中</li><li id="c402" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">在 2021 年 1 月 21 日之前，Linux 和 Windows 应用服务不能存在于同一个资源组中。</li></ul></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="659f" class="km kn ir bd ko kp mw kr ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj bi translated">Azure 应用服务计划</h1><p id="1404" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">应用服务计划类似于一个具有计算能力的服务器集群，可以在其中运行资源。一个应用服务计划可以托管多个应用，应包含以下内容:</p><ul class=""><li id="fe40" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">地区</li><li id="4d00" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">操作系统</li><li id="f404" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">虚拟机实例的数量</li><li id="6fa2" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">虚拟机实例的大小</li><li id="23b9" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">定价层—免费、共享、基本、标准、高级、高级 v2、高级 V3、独立</li></ul><h2 id="8219" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">定价等级</h2><p id="2e98" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated"><a class="ae nb" href="https://azure.microsoft.com/en-au/pricing/details/app-service/windows/" rel="noopener ugc nofollow" target="_blank">定价层</a>决定云服务的使用成本。这些定价层级分为三类—共享专用&amp;独立</p><figure class="nd ne nf ng gu nh gi gj paragraph-image"><div role="button" tabindex="0" class="ni nj di nk bf nl"><div class="gi gj nc"><img src="../Images/69e7fec36c8276d427061dabbcdf1676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_1VzGAIcfwSTyjfSFcyTFA.png"/></div></div></figure><h2 id="0b2a" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">缩放比例</h2><p id="cf4f" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">如前所述，应用服务计划是一个虚拟机集群。每个应用都存在于服务计划内的所有虚拟机上。扩展发生在应用服务计划级别，以增加/减少应用服务计划的计算资源。不可能横向扩展单个应用程序。</p><ul class=""><li id="8794" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">水平扩展(向外/向内)—增加/减少虚拟机数量。</li><li id="7508" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">垂直扩展(向上/向下)—更改应用服务计划的定价等级。</li></ul></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="c235" class="km kn ir bd ko kp mw kr ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj bi translated">应用服务部署</h1><p id="8240" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">有两种部署模式</p><ul class=""><li id="1ae0" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">手动— Git、AzCli、Zip 部署、FTP/S</li><li id="2b25" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">自动— Azure DevOps、GitHub、BitBucket</li></ul><h2 id="1912" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">使用部署插槽</h2><p id="3b27" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">部署插槽有助于消除部署期间的停机时间。不同的插槽管理不同的应用程序版本。生产请求被路由到生产插槽，而应用程序的新版本被部署在一个或多个非生产插槽上。一旦部署结束，Azure 将在生产和非生产插槽中交换应用程序，以便在不停机的情况下部署新功能。</p></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="9621" class="km kn ir bd ko kp mw kr ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj bi translated">认证和授权</h1><p id="139a" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">Azure 应用服务和 Azure 功能具有现成的身份验证和授权功能。</p><p id="096f" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">认证和授权模块执行以下操作。</p><ul class=""><li id="5c8e" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">使用指定的提供程序验证用户</li><li id="06b4" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">验证存储并刷新令牌</li><li id="4526" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">管理身份验证会话</li><li id="dff8" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">将标识信息注入请求标头</li></ul><h2 id="7841" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">优势</h2><ul class=""><li id="9a9b" class="mb mc ir jq b jr lk jv ll jz no kd np kh nq kl mg mh mi mj bi translated">易于整合身份验证机制，无需编写代码，也不需要任何技术知识。</li><li id="c6bc" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">易于使用不同的登录提供商，如谷歌，FB，Azure 广告，Twitter 等。，带 Azure App 服务。</li></ul><h2 id="26ea" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">身份提供者</h2><p id="747b" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">身份提供者创建、维护和管理身份信息，同时向应用程序提供身份认证服务。当与外部用户共享您的应用和资源时，Azure AD 是共享的默认身份提供者</p><p id="ee5b" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><strong class="jq is">微软身份平台</strong></p><ul class=""><li id="40b8" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">目的— Microsoft Identity platform 帮助用户使用他们的 Microsoft 帐户登录应用程序。</li><li id="d87e" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">符号端点— /。授权/登录/aad</li><li id="d625" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">如何— <a class="ae nb" href="https://docs.microsoft.com/en-us/azure/app-service/configure-authentication-provider-aad" rel="noopener ugc nofollow" target="_blank">配置 Azure 广告认证— Azure 应用服务|微软文档</a></li></ul><p id="a655" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><strong class="jq is">脸书</strong></p><ul class=""><li id="acc6" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">目的— Microsoft Identity platform 帮助用户使用他们的脸书帐户登录应用程序。</li><li id="20d4" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">符号端点— /。认证/登录/facebook</li><li id="d063" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">如何— <a class="ae nb" href="https://docs.microsoft.com/en-us/azure/app-service/configure-authentication-provider-aad" rel="noopener ugc nofollow" target="_blank">配置 Azure 广告认证— Azure 应用服务|微软文档</a></li></ul><p id="66d0" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><strong class="jq is">谷歌</strong></p><ul class=""><li id="a68a" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">目的— Microsoft Identity platform 帮助用户使用他们的 Google 帐户登录应用程序。</li><li id="6a1d" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">符号端点— /。认证/登录/谷歌</li><li id="1fcf" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">如何— <a class="ae nb" href="https://docs.microsoft.com/en-us/azure/app-service/configure-authentication-provider-google" rel="noopener ugc nofollow" target="_blank">配置谷歌认证— Azure 应用服务|微软文档</a></li></ul><p id="9231" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><strong class="jq is">推特</strong></p><ul class=""><li id="5b40" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">目的— Microsoft Identity platform 帮助用户使用他们的 Twitter 帐户登录应用程序。</li><li id="c352" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">符号端点— /。认证/登录/推特</li><li id="2af4" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">如何— <a class="ae nb" href="https://docs.microsoft.com/en-us/azure/app-service/configure-authentication-provider-twitter" rel="noopener ugc nofollow" target="_blank">配置 Twitter 认证— Azure 应用服务|微软文档</a></li></ul><p id="dbd1" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated"><strong class="jq is">打开 ID 连接</strong></p><ul class=""><li id="8bf8" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">目的— Microsoft Identity platform 帮助用户使用符合<a class="ae nb" href="https://openid.net/connect/" rel="noopener ugc nofollow" target="_blank"> OpenID Connect 规范</a>的自定义身份验证提供程序登录应用程序。</li><li id="3f00" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">符号端点— /。授权/登录/ <providername/></li><li id="a5aa" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated">如何— <a class="ae nb" href="https://docs.microsoft.com/en-us/azure/app-service/configure-authentication-provider-openid-connect" rel="noopener ugc nofollow" target="_blank">配置 OpenID 连接提供商— Azure 应用服务|微软文档</a></li></ul><h2 id="8797" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">认证流程</h2><p id="8090" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">有两种身份验证流程:</p><ul class=""><li id="8be6" class="mb mc ir jq b jr js jv jw jz md kd me kh mf kl mg mh mi mj bi translated">没有提供商 SDK 的情况下，这个流程最适合遗留应用，也被称为<em class="nr">服务器导向流程</em>或<em class="nr">服务器流程</em>。比如身份提供者(针对 ex-Google、FB、微软)会处理认证，开发者不需要在 app 服务内部编写额外的代码来进行认证。</li><li id="6609" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated"><strong class="jq is">对于提供者 SDK </strong>，这是认证的推荐选择，该流被称为<em class="nr">客户端导向流</em>或<em class="nr">客户端流</em>。在这种方法中，开发人员将向应用服务添加代码。接下来，该代码将使用 Provider SDK 独立地与身份提供者连接，并包含为身份验证返回的令牌。</li></ul></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="95cf" class="km kn ir bd ko kp mw kr ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj bi translated">用于管理应用服务的 Az Cli 命令</h1><h2 id="03ea" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">使用 AzCli 创建 Web 应用程序</h2><p id="595e" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">az webapp up —位置<mylocation> —名称<myappname> — html</myappname></mylocation></p><h2 id="679d" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">更改后重新部署 Web 应用程序</h2><p id="b4e5" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">az webapp up —位置<mylocation> —名称<myappname> — html</myappname></mylocation></p><h2 id="04ba" class="lp kn ir bd ko lq lr dn ks ls lt dp kw jz lu lv la kd lw lx le kh ly lz li ma bi translated">清理资源</h2><p id="d48d" class="pw-post-body-paragraph jo jp ir jq b jr lk jt ju jv ll jx jy jz lm kb kc kd ln kf kg kh lo kj kk kl ik bi translated">az 组删除—名称<resource_group> —无等待</resource_group></p><h1 id="5f24" class="km kn ir bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">下一步是什么？</h1><ul class=""><li id="d14c" class="mb mc ir jq b jr lk jv ll jz no kd np kh nq kl mg mh mi mj bi translated"><a class="ae nb" href="https://tarunbhatt9784.medium.com/az204-manage-application-settings-fe9436a82be2?sk=24095272ce7be32786bcdf276da97c6f" rel="noopener">管理应用程序设置</a></li><li id="b8cd" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated"><a class="ae nb" href="https://tarunbhatt9784.medium.com/az-204-application-scaling-88952d2124d3?sk=7b8c91565d3e4da5b7be9e03fc1f42a5" rel="noopener">应用缩放</a></li><li id="54c8" class="mb mc ir jq b jr mk jv ml jz mm kd mn kh mo kl mg mh mi mj bi translated"><a class="ae nb" href="https://tarunbhatt9784.medium.com/az204-app-service-deployment-slots-88f0c7762ef8?sk=4ceac1943313c418dc6091aa5f7256f7" rel="noopener"> App 服务部署槽</a></li></ul></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><p id="8d73" class="pw-post-body-paragraph jo jp ir jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ik bi translated">页（page 的缩写）s-Medium 是一个阅读、写作和向其他作者学习的绝佳平台。如果你想加入我的旅程，今天就加入<a class="ae nb" href="https://tarunbhatt9784.medium.com/membership" rel="noopener"> medium </a>。</p></div></div>    
</body>
</html>