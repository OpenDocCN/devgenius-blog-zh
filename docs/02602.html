<html>
<head>
<title>Bye Bye Entry Components (Angular 9 and onward)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">再见入口组件(角度9°及以上)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/bye-bye-entry-components-angular-9-and-onward-eb7ca82f7bc6?source=collection_archive---------3-----------------------#2020-08-15">https://blog.devgenius.io/bye-bye-entry-components-angular-9-and-onward-eb7ca82f7bc6?source=collection_archive---------3-----------------------#2020-08-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/767e59730d0873001fd5e6da05c6ea4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*o8FaMSoPHhylsQ8B"/></div></div></figure><p id="8ce1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最近我在看关于Angular 9的官方发布信息，发现Angular团队已经决定放弃entryComponents array，这是NgModule创建动态组件(如模型、广告横幅等)的关键部分。如果你想了解这个反对意见，你可以点击这里查看。</p><p id="84e6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在Angular 9之前的版本中，如果我们试图动态创建任何不属于entryComponents的组件，我们会得到以下错误。</p><blockquote class="ku kv kw"><p id="617c" class="jv jw kx jx b jy jz ka kb kc kd ke kf ky kh ki kj kz kl km kn la kp kq kr ks ig bi translated">找不到ModalComponent的组件工厂。添加到@NgModule.entryComponents了吗？</p></blockquote><p id="63fb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要理解这一点，我们需要理解为什么Angular在Angular 9之前需要entryComponents单独数组来动态创建这些组件。原因如下。</p><ol class=""><li id="a649" class="lb lc in jx b jy jz kc kd kg ld kk le ko lf ks lg lh li lj bi translated">如果我们仔细阅读错误，它是抱怨一个失踪的工厂。模板中有选择器的组件，Angular用于创建NgFactories。</li><li id="7bc7" class="lb lc in jx b jy lk kc ll kg lm kk ln ko lo ks lg lh li lj bi translated">因为动态组件是用ComponentFactoryResolver创建的，模板中没有任何选择器，所以Angular没有为它们创建工厂。</li><li id="e759" class="lb lc in jx b jy lk kc ll kg lm kk ln ko lo ks lg lh li lj bi translated">entryComponents是一个组件数组，用于通知Angular关于这些组件的信息，以便它可以在运行时提供它们的NgFactory。</li></ol><p id="6ab1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们明白了，为什么Angular需要entryComponents数组直到版本8。但是从版本9开始发生了什么使得没有必要使用entryComponents数组呢？</p><p id="e1b2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">答案是常春藤渲染器。有了Ivy渲染器，Angular不再使用NgFactory。相反，它将呈现组件所需的所有信息存储在静态属性cmp和fac中。所以，基本上组件的引用就足够了，而不是依赖于模板中的选择器。</p><p id="c327" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以现在你可以在声明数组中包含所有的组件，并且可以在以后通过选择器选择使用哪个组件以及动态创建哪个组件。</p><p id="c8f6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是等等，是不是说Angular 9不需要entryComponents。事实上，这完全取决于你是否使用常春藤渲染器。如果你最近更新了你的应用程序到Angular 9，但是仍然有一些东西与Ivy不兼容，并且你仍然在没有Ivy的情况下运行你的项目。您仍然需要使用entryComponents数组，直到您决定为您的项目打开Ivy。</p><p id="39cd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是如果你已经升级到Angular 9，Ivy是一个关键的特性，它会通过减少构建规模来给你一个主要的性能提升。所以最好的方法是将它升级到Ivy并去掉entryComponents，因为它将在未来的版本中被删除。</p></div></div>    
</body>
</html>