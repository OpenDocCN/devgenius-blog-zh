<html>
<head>
<title>Sorting Data in Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Go 中排序数据</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sorting-data-in-go-29080fbc8009?source=collection_archive---------3-----------------------#2020-07-22">https://blog.devgenius.io/sorting-data-in-go-29080fbc8009?source=collection_archive---------3-----------------------#2020-07-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/930e6dc432014b8f07cf5b355a828019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJ73XKxmwpQ9IQyqevzObA.jpeg"/></div></div></figure><p id="e485" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是我每周系列<em class="kw">学围棋</em>的第十篇。上周我谈到了 Go 中的<a class="ae kx" href="https://www.martincartledge.io/pointers-json-marshal-and-unmarshal-in-go/" rel="noopener ugc nofollow" target="_blank">指针、编组和解组数据。本周我将讨论如何在围棋程序中对数据进行排序。我们开始吧。</a></p><p id="77c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将向您展示如何对数据进行排序的多个示例，这些示例可以分为两类:</p><ul class=""><li id="4002" class="ky kz iq ka b kb kc kf kg kj la kn lb kr lc kv ld le lf lg bi translated">使用<code class="fe lh li lj lk b">sort</code>包</li><li id="3ea5" class="ky kz iq ka b kb ll kf lm kj ln kn lo kr lp kv ld le lf lg bi translated">编写自定义排序函数</li></ul><h1 id="2040" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">使用排序包</h1><ul class=""><li id="a4e7" class="ky kz iq ka b kb mo kf mp kj mq kn mr kr ms kv ld le lf lg bi translated">可以与内置类型(<code class="fe lh li lj lk b">string</code>、<code class="fe lh li lj lk b">int</code>等)以及用户定义的类型一起使用</li><li id="ebf6" class="ky kz iq ka b kb ll kf lm kj ln kn lo kr lp kv ld le lf lg bi translated">分类是“就地”进行的。例如，对一个<code class="fe lh li lj lk b">slice</code>的改变不会返回一个新的<code class="fe lh li lj lk b">slice</code></li><li id="e897" class="ky kz iq ka b kb ll kf lm kj ln kn lo kr lp kv ld le lf lg bi translated">与 JavaScript 中的<code class="fe lh li lj lk b">array</code>方法<code class="fe lh li lj lk b">sort</code>非常相似，Go 中的<code class="fe lh li lj lk b">sort</code>包比较 ASCII 值进行<code class="fe lh li lj lk b">string</code>排序</li></ul><p id="3219" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们试着排序一个<code class="fe lh li lj lk b">string</code>:</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="f640" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的<code class="fe lh li lj lk b">func</code> <code class="fe lh li lj lk b">main</code>中，我们用标识符<code class="fe lh li lj lk b">str</code>创建了一个新变量</p><p id="3f77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lh li lj lk b">str</code>的值是类型为<code class="fe lh li lj lk b">string</code>的值的<code class="fe lh li lj lk b">slice</code>。我们使用一个<em class="kw">复合文字</em>来分配这些值</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="ea4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我们使用<code class="fe lh li lj lk b">sort</code>包来调用<code class="fe lh li lj lk b">Strings</code>方法，并将<code class="fe lh li lj lk b">str</code>变量作为唯一的参数传递</p><blockquote class="mz na nb"><p id="d213" class="jy jz kw ka b kb kc kd ke kf kg kh ki nc kk kl km nd ko kp kq ne ks kt ku kv ij bi translated">注:<code class="fe lh li lj lk b">sort</code>方法是针对其内置类型的，即<code class="fe lh li lj lk b">string</code>-&gt;-<code class="fe lh li lj lk b">Strings</code>、<code class="fe lh li lj lk b">int</code> - &gt;、<code class="fe lh li lj lk b">Ints</code>等。</p></blockquote><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="6d97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用<code class="fe lh li lj lk b">fmt</code>包打印结果，我们可以看到<code class="fe lh li lj lk b">str</code>的值现在已经被正确排序了</p><p id="8895" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我给你看一个对类型<code class="fe lh li lj lk b">int</code>的值进行排序的例子</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="2335" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的<code class="fe lh li lj lk b">func</code> <code class="fe lh li lj lk b">main</code>中，我们用标识符<code class="fe lh li lj lk b">ints</code>创建了一个新变量</p><p id="9e9c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lh li lj lk b">ints</code>的值是<code class="fe lh li lj lk b">int</code>类型值的<code class="fe lh li lj lk b">slice</code>。我们使用一个<em class="kw">复合文字</em>来分配这些值</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="4fc6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后我们使用<code class="fe lh li lj lk b">sort</code>包调用<code class="fe lh li lj lk b">Ints</code>方法，并将<code class="fe lh li lj lk b">ints</code>变量作为唯一的参数传递</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="fca3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们使用<code class="fe lh li lj lk b">fmt</code>包打印结果，我们可以看到<code class="fe lh li lj lk b">ints</code>的值现在已经被正确排序了</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="6ebc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是如果你需要更深入的东西，或者定制的东西呢？你当然可以在围棋中轻松做到这一点。让我给你展示一些自定义排序函数的例子，它们可以给你的程序增加很多价值。</p><h1 id="5371" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">自定义排序函数</h1><p id="b5d2" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj nf kl km kn ng kp kq kr nh kt ku kv ij bi translated">让我们直接看一个例子</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="ee3d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了进行排序，我们必须确保导入了<code class="fe lh li lj lk b">sort</code>包</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="a175" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们创建一个带有标识符<code class="fe lh li lj lk b">Person</code>的自定义类型，它的类型是<code class="fe lh li lj lk b">struct</code></p><p id="506c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的<code class="fe lh li lj lk b">Person</code>类型的字段有:<code class="fe lh li lj lk b">string</code>类型的<code class="fe lh li lj lk b">First</code>和<code class="fe lh li lj lk b">int</code>类型的<code class="fe lh li lj lk b">Age</code></p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="6568" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们创建另一个带有标识符<code class="fe lh li lj lk b">ByAge</code>的定制类型，它是我们另一个定制类型<code class="fe lh li lj lk b">Person</code>的<code class="fe lh li lj lk b">slice</code></p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="ac83" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们创建三个函数，它们都采用一个类型为的<em class="kw">接收器，标识符为类型为<code class="fe lh li lj lk b">ByAge</code>的<code class="fe lh li lj lk b">a</code>。</em></p><blockquote class="mz na nb"><p id="78ad" class="jy jz kw ka b kb kc kd ke kf kg kh ki nc kk kl km nd ko kp kq ne ks kt ku kv ij bi translated"><em class="iq">注意:我们必须创建这三个函数，因为</em> <code class="fe lh li lj lk b"><em class="iq">Sort</em></code> <em class="iq">函数调用一个</em> <code class="fe lh li lj lk b"><em class="iq">Len</em></code> <em class="iq">函数来确定长度，然后调用</em> <code class="fe lh li lj lk b"><em class="iq">Less</em></code> <em class="iq">和</em> <code class="fe lh li lj lk b"><em class="iq">Swap</em></code> <em class="iq">。你可以在</em> <a class="ae kx" href="https://golang.org/pkg/sort/#Sort" rel="noopener ugc nofollow" target="_blank"> <em class="iq">官方围棋文档</em> </a>中了解更多信息</p></blockquote><p id="a353" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们从<code class="fe lh li lj lk b">Len</code>开始，浏览我创建的每一个函数</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="2d37" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如前所述，该函数有一个类型为的<em class="kw">接收器，其标识符为<code class="fe lh li lj lk b">a</code>，类型为<code class="fe lh li lj lk b">ByAge</code></em></p><p id="6682" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该功能的标识符为<code class="fe lh li lj lk b">Len</code></p><p id="2a3b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们传递从我们的<em class="kw">接收器</em>提供的<code class="fe lh li lj lk b">a</code>的值，作为我们从<code class="fe lh li lj lk b">Len</code>得到的<code class="fe lh li lj lk b">return</code>函数的唯一参数</p><p id="48ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们创建<code class="fe lh li lj lk b">Swap</code>函数</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="fffc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">与<code class="fe lh li lj lk b">Len</code>函数非常相似，<code class="fe lh li lj lk b">Swap</code>有一个<em class="kw">接收器类型</em>，标识符为<code class="fe lh li lj lk b">a</code>，类型为<code class="fe lh li lj lk b">ByAge</code></p><p id="eb0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lh li lj lk b">Swap</code>函数有两个参数<code class="fe lh li lj lk b">i</code>和<code class="fe lh li lj lk b">j</code>，都是<code class="fe lh li lj lk b">int</code>类型</p><p id="9dda" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe lh li lj lk b">Swap</code>内部，我们看到每次调用<code class="fe lh li lj lk b">Swap</code>时，我们都在<em class="kw">交换</em>值的顺序</p><p id="8571" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">值<code class="fe lh li lj lk b">a[i]</code>将被值<code class="fe lh li lj lk b">a[j]</code>替换，值<code class="fe lh li lj lk b">a[j]</code>将被值<code class="fe lh li lj lk b">a[i]</code>替换</p><p id="4b18" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lh li lj lk b">Sort</code>需要的最后一个函数是<code class="fe lh li lj lk b">Less</code>函数</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="d921" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lh li lj lk b">Less</code>功能有一个类型为的<em class="kw">接收器，其标识符为<code class="fe lh li lj lk b">a</code>，类型为<code class="fe lh li lj lk b">ByAge</code></em></p><p id="da1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lh li lj lk b">Less</code>函数有两个参数，<code class="fe lh li lj lk b">i</code>和<code class="fe lh li lj lk b">j</code>，都是<code class="fe lh li lj lk b">int</code>类型</p><p id="cd50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe lh li lj lk b">Less</code>函数返回一个<code class="fe lh li lj lk b">bool</code>类型的值</p><blockquote class="mz na nb"><p id="0ad5" class="jy jz kw ka b kb kc kd ke kf kg kh ki nc kk kl km nd ko kp kq ne ks kt ku kv ij bi translated">注意:该排序功能的目的是根据<code class="fe lh li lj lk b">Age</code>字段的值从最年轻到最老排序</p></blockquote><p id="6654" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe lh li lj lk b">return</code>语句中，我们看到我们正在编写一个检查<code class="fe lh li lj lk b">a[j].Age</code>是否大于<code class="fe lh li lj lk b">a[i].Age</code>的表达式</p><p id="cc99" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是最后一步，帮助<code class="fe lh li lj lk b">Sort</code>功能确定哪些值应该使用“交换”功能进行交换</p><p id="84e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe lh li lj lk b">func</code></p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="cca9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们创建一个标识符为<code class="fe lh li lj lk b">family</code>的新变量，它将是<code class="fe lh li lj lk b">Person</code>类型值的<code class="fe lh li lj lk b">slice</code>类型</p><p id="92f3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们用一个复合文字给<code class="fe lh li lj lk b">family</code>赋值</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="df13" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们将<code class="fe lh li lj lk b">family</code>变量转换为自定义类型<code class="fe lh li lj lk b">ByAge</code>，这样我们就可以利用我们创建的函数，这些函数都有<em class="kw">接收器类型</em>和<code class="fe lh li lj lk b">ByAge</code></p><p id="c09d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将这个<code class="fe lh li lj lk b">ByAge(family)</code>值作为唯一的参数传递给<code class="fe lh li lj lk b">Sort</code>函数</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="d446" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下一行，我们使用<code class="fe lh li lj lk b">fmt</code>包来打印<code class="fe lh li lj lk b">family</code>的值</p><figure class="mt mu mv mw gt jr"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="ee0a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就在那里！现在我们的数据从最年轻到最老排序。</p><h1 id="5d7f" class="lq lr iq bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">概括起来</h1><p id="8fd4" class="pw-post-body-paragraph jy jz iq ka b kb mo kd ke kf mp kh ki kj nf kl km kn ng kp kq kr nh kt ku kv ij bi translated">对数据进行排序是极其常见的事情；因此，知道如何在 Go 中有效且高效地排序数据是至关重要的。我希望您学到了一些关于使用<code class="fe lh li lj lk b">sort</code>包或编写自己的定制排序函数的知识。下周我将讨论 Go 中的<em class="kw">并发。到时候见！</em></p></div></div>    
</body>
</html>