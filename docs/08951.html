<html>
<head>
<title>Sort Go Imports</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分类导入</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sort-go-imports-acb76224dfa7?source=collection_archive---------9-----------------------#2022-07-20">https://blog.devgenius.io/sort-go-imports-acb76224dfa7?source=collection_archive---------9-----------------------#2022-07-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="3c2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Go imports 通过强制执行至少两组 stdlib 和其他所有东西来实现这一点。然而，我的团队有一个将导入分成 4 组的策略。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="b4da" class="kr ks in kn b gy kt ku l kv kw">import (<br/>    stdlib<br/>    github or other packages url<br/>    all others directory<br/>    current directory<br/>)</span></pre><p id="6fa9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这也是解决 go 导入的方法</p><ol class=""><li id="8993" class="kx ky in jm b jn jo jr js jv kz jz la kd lb kh lc ld le lf bi translated">如果您使用的是 goland，您可以进入首选项-&gt;转到-&gt;导入，然后在那里添加您的配置。有很多功能，比如</li></ol><p id="3f48" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在一次申报中转移所有进口</p><p id="4ceb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">分组标准库导入</p><p id="bda6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在单个组中移动所有 stdlib 导入等等</p><p id="34bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.在 go 的主要版本发布后，他们增加了:<a class="ae lg" href="https://pkg.go.dev/golang.org/x/tools/cmd/goimports" rel="noopener ugc nofollow" target="_blank"> goimports </a>包</p><p id="f7ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要安装:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="bdb2" class="kr ks in kn b gy kt ku l kv kw">go install golang.org/x/tools/cmd/goimports@latest</span></pre><p id="f9b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，运行:</p><p id="0bb2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">早前:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="3b31" class="kr ks in kn b gy kt ku l kv kw">import (<br/>    "database/sql"<br/>    "io"<br/>    "strconv"<br/>    "golang.org/x/net/context"<br/>    "yourDirectory/foo/bar"<br/>    "yourDirectory/foo/baz"<br/>)</span></pre><p id="d2ef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">新:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="6024" class="kr ks in kn b gy kt ku l kv kw">goimports -local directoryName/</span><span id="f1f8" class="kr ks in kn b gy lh ku l kv kw">import (<br/>    "database/sql"<br/>    "io"<br/>    "strconv"<br/><br/>    "golang.org/x/net/context"<br/><br/>    "yourDirectory/foo/bar"<br/>    "yourDirectory/foo/baz"<br/>)</span></pre><p id="ab90" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更多:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="5ae6" class="kr ks in kn b gy kt ku l kv kw">goimports -w -local "workingDirectory/" . : w updates source file and . refers to current directory path</span></pre><p id="591a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.正在开发的最后一个使用<a class="ae lg" href="https://github.com/incu6us/goimports-reviser" rel="noopener ugc nofollow" target="_blank"> goimports-reviser </a></p><p id="5ddf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Golang 的工具，用于按 3–4 个组(带有自己的<a class="ae lg" href="https://github.com/incu6us/goimports-reviser/blob/master/linter/README.md" rel="noopener ugc nofollow" target="_blank"> linter </a>)对 goimports 进行排序:std、general、local(这是可选的)和项目依赖项。此外，将为您的代码准备格式(因此，您不需要单独使用<code class="fe li lj lk kn b">gofmt</code>或<code class="fe li lj lk kn b">goimports</code>)。使用附加选项<code class="fe li lj lk kn b">-rm-unused</code>删除未使用的导入，使用<code class="fe li lj lk kn b">-set-alias</code>为版本化的包或带有附加前缀/后缀的包重写导入别名(例如:<code class="fe li lj lk kn b">opentracing "github.com/opentracing/opentracing-go"</code>)。<code class="fe li lj lk kn b">-local</code> -将为本地导入创建组。值应该用逗号分隔。</p><h1 id="a6b0" class="ll ks in bd lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh bi translated">选项:</h1><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="795e" class="kr ks in kn b gy kt ku l kv kw">Usage of goimports-reviser:<br/>  -file-path string<br/>        File path to fix imports(ex.: ./reviser/reviser.go). Required parameter.<br/>  -format<br/>        Option will perform additional formatting. Optional parameter.<br/>  -list-diff<br/>    	Option will list-diff files whose formatting differs from goimports-reviser. Optional parameter.<br/>  -local string<br/>        Local package prefixes which will be placed after 3rd-party group(if defined). Values should be comma-separated. Optional parameters.<br/>  -output string<br/>        Can be "file", "write" or "stdout". Whether to write the formatted content back to the file or to stdout. When "write" together with "-list-diff" will list the file name and write back to the file. Optional parameter. (default "file")<br/>  -project-name string<br/>        Your project name(ex.: github.com/incu6us/goimports-reviser). Optional parameter.<br/>  -rm-unused<br/>        Remove unused imports. Optional parameter.<br/>  -set-alias<br/>        Set alias for versioned package names, like 'github.com/go-pg/pg/v9'. In this case import will be set as 'pg "github.com/go-pg/pg/v9"'. Optional parameter.<br/>  -set-exit-status<br/>    	set the exit status to 1 if a change is needed/made. Optional parameter.</span></pre><p id="b398" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">易于安装:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="3a91" class="kr ks in kn b gy kt ku l kv kw">brew tap incu6us/homebrew-tap<br/>brew install incu6us/homebrew-tap/goimports-reviser (Mac)</span><span id="8fc5" class="kr ks in kn b gy lh ku l kv kw"><br/>or </span><span id="31de" class="kr ks in kn b gy lh ku l kv kw">snap install goimports-reviser (Linux)</span></pre><ul class=""><li id="9e3b" class="kx ky in jm b jn jo jr js jv kz jz la kd lb kh mi ld le lf bi translated">“-local”选项是关键</li><li id="9fe9" class="kx ky in jm b jn mj jr mk jv ml jz mm kd mn kh mi ld le lf bi translated">“-rm-used”对于清除导入非常有帮助</li></ul><p id="09c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以用一些用例来编写干净的代码。go、*_test.go 和*.pb.go 文件，你可以搜索一个递归搜索它并像这样使用它</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="f27f" class="kr ks in kn b gy kt ku l kv kw">find . -type f -iname '*.go' ! -iname '*.pb.go' -exec goimports-reviser -rm-unused -local weavelab.xyz -file-path {} \;</span></pre><p id="1d5b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是搜索所有。go 文件而不是 pb.go 文件，并对您的导入进行排序。</p><p id="23d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就这样，新的一天，新的东西要学。</p><p id="4dca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">希望你过得愉快:)<br/>谢谢！</p><p id="cc7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">参考:<br/>T15】https://github.com/incu6us/goimports-reviser</p><div class="mo mp gp gr mq mr"><a href="https://pkg.go.dev/golang.org/x/tools/cmd/goimports" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd io gy z fp mw fr fs mx fu fw im bi translated">goimports</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">命令 goimports 更新您的 Go 导入行，添加缺少的行并删除未引用的行。$ go 安装…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">pkg.go.dev</p></div></div></div></a></div></div></div>    
</body>
</html>