<html>
<head>
<title>JavaScript Best Practices — Things that Don’t Belong in Production Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript 最佳实践——不属于生产代码的东西</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-best-practices-things-that-dont-belong-in-production-code-751136cfb035?source=collection_archive---------26-----------------------#2020-07-15">https://blog.devgenius.io/javascript-best-practices-things-that-dont-belong-in-production-code-751136cfb035?source=collection_archive---------26-----------------------#2020-07-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e8e1a404b73200e19968fc0a54dcef5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*m2NIELNAmGObJbFC"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@tararaye?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Tara Raye </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="6991" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使代码易于阅读和维护，我们应该遵循一些最佳实践。</p><p id="0f90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看我们应该遵循的一些最佳实践，以使每个人的生活更轻松。</p><h1 id="431b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">条件语句中没有赋值运算符</h1><p id="d59a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">条件语句中的赋值操作符可能是一个错误。</p><p id="0232" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果这就是我们所拥有的一切，那么我们应该检查一下这是否真的是我们想要的。</p><p id="6017" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fa74" class="mn lc iq mj b gy mo mp l mq mr">if (user.title = "manager") {<br/>  // ...<br/>}</span></pre><p id="8eb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="eacd" class="mn lc iq mj b gy mo mp l mq mr">if (user.title === "manager") {<br/>  // ...<br/>}</span></pre><h1 id="144c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">没有会与比较混淆的箭头函数</h1><p id="d3a2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">很容易混淆箭头函数的箭头和比较运算符。</p><p id="cce4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="95ea" class="mn lc iq mj b gy mo mp l mq mr">const foo = a =&gt; 1 ? 2 : 3;</span></pre><p id="b275" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们就很容易被迷惑。</p><p id="983c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了清楚起见，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="81d8" class="mn lc iq mj b gy mo mp l mq mr">const foo = (a) =&gt; (1 ? 2 : 3);</span></pre><h1 id="d8bf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe ms mt mu mj b">Remove console Before Going to Production</code></h1><p id="eacf" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该在代码投入生产之前移除<code class="fe ms mt mu mj b">console</code>。</p><p id="cffc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这有利于调试，但不适合最终用户查看输出。</p><p id="6ce5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有这样的东西:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ba33" class="mn lc iq mj b gy mo mp l mq mr">console.log("foo bar");</span></pre><p id="ab2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该移除它们。</p><h1 id="de20" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要修改用<code class="fe ms mt mu mj b">const</code>声明的变量</h1><p id="026f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果变量是用<code class="fe ms mt mu mj b">const</code>声明的，就不应该被重新赋值。</p><p id="3cd5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们试图这样做，我们会得到一个错误。</p><p id="3319" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以与其写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8e18" class="mn lc iq mj b gy mo mp l mq mr">const a = 0;<br/>a = 2;</span></pre><p id="72fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="45da" class="mn lc iq mj b gy mo mp l mq mr">const a = 0;<br/>a += 1;</span></pre><p id="b9d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="016c" class="mn lc iq mj b gy mo mp l mq mr">const a = 0;<br/>const b = a + 1;</span></pre><h1 id="db7d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">条件中没有常量表达式</h1><p id="957b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该在条件中有常量表达式。</p><p id="97ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们要么一直跑，要么从不跑。</p><p id="53d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这使得它们毫无用处。</p><p id="4c92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="445f" class="mn lc iq mj b gy mo mp l mq mr">if (false) {<br/>  doSomething();<br/>}</span></pre><p id="5f3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从来没有运行，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7137" class="mn lc iq mj b gy mo mp l mq mr">if (foo &amp;&amp; bar) {<br/>  doSomething();<br/>}</span></pre><h1 id="de57" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在构造函数中返回值</h1><p id="259b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们在构造函数中返回值，那么对象就会被返回。</p><p id="e9b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们返回构造函数的实例。</p><p id="66d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">后一种情况大概是大多数人想要的。</p><p id="d3ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以大部分时候不应该返回自己的对象。</p><p id="d25b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5d77" class="mn lc iq mj b gy mo mp l mq mr">class A {<br/>  constructor(a) {<br/>    this.a = a;<br/>    return a;<br/>  }<br/>}</span></pre><p id="6ded" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2f9e" class="mn lc iq mj b gy mo mp l mq mr">class A {<br/>  constructor(a) {<br/>    this.a = a;<br/>  }<br/>}</span></pre><p id="68df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回一个<code class="fe ms mt mu mj b">A</code>的实例，而不是<code class="fe ms mt mu mj b">a</code>的值。</p><h1 id="7e2b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe ms mt mu mj b">continue</code>报表</h1><p id="077c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">contunue</code>语句让我们跳到循环的下一次迭代。</p><p id="c0ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f703" class="mn lc iq mj b gy mo mp l mq mr">for (i = 0; i &lt; 10; i++) {<br/>  if (i &gt;= 5) {<br/>    continue;<br/>  }<br/>  //...<br/>}</span></pre><p id="6408" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe ms mt mu mj b">i</code>大于或等于 5，跳到下一次迭代。</p><p id="3144" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可能是有用的。</p><h1 id="1d35" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">正则表达式中的控制字符</h1><p id="e92c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">一般来说，regex 或 JavaScript 中很少使用控制字符，所以使用它们可能是个错误。</p><p id="bf62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="da01" class="mn lc iq mj b gy mo mp l mq mr">const pattern1 = /\x1f/;<br/>const pattern2 = new RegExp("\x1f");</span></pre><p id="d100" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="794f" class="mn lc iq mj b gy mo mp l mq mr">const pattern1 = /\d/;<br/>const pattern2 = new RegExp("\d");</span></pre><h1 id="ba5a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要使用<code class="fe ms mt mu mj b">debugger in Production Code</code></h1><p id="7248" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在我们的代码投入生产之前，我们应该删除所有的<code class="fe ms mt mu mj b">debugger</code>语句，这样应用程序才能正常运行。</p><p id="1169" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不这样做，那么当我们点击语句时它会暂停。</p><p id="9503" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6652" class="mn lc iq mj b gy mo mp l mq mr">function toBool(x) {<br/>  debugger;<br/>  return Boolean(x);<br/>}</span></pre><p id="feb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c4bb" class="mn lc iq mj b gy mo mp l mq mr">function toBool(x) {  <br/>  return Boolean(x);<br/>}</span></pre><h1 id="ab05" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不删除变量</h1><p id="b29e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">delete</code>操作符仅用于删除变量属性。</p><p id="584b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它不能和变量一起使用。</p><p id="523a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们不应该有这样的代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9fe9" class="mn lc iq mj b gy mo mp l mq mr">let x;<br/>delete x;</span></pre><h1 id="acec" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">没有看起来像除法的正则表达式</h1><p id="a3e5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该有一个看起来像组织的正则表达式。</p><p id="baa1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，代码如下:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="241a" class="mn lc iq mj b gy mo mp l mq mr">/=foo/</span></pre><p id="62ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很可能是个错误。</p><p id="d390" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8d4d" class="mn lc iq mj b gy mo mp l mq mr">/foo/</span></pre><h1 id="b03c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">F <code class="fe ms mt mu mj b">unction</code>定义中没有重复的参数</h1><p id="3e2b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">重复参数在 JavaScript 中是非法的语法，所以我们不应该这样写。</p><p id="fb67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ec1b" class="mn lc iq mj b gy mo mp l mq mr">function foo(a, b, a) {<br/>  console.log(a);<br/>}</span></pre><p id="da19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6cac" class="mn lc iq mj b gy mo mp l mq mr">function foo(a, b) {<br/>  console.log(a);<br/>}</span></pre><h1 id="421e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">类成员中没有重复的名称</h1><p id="094c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该在类成员中有重复的名字</p><p id="c4bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后出现的实例将覆盖前面的实例。</p><p id="9e6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以与其写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a0b2" class="mn lc iq mj b gy mo mp l mq mr">class Foo {<br/>  bar() {<br/>    console.log("bar");<br/>  }<br/>  bar() {<br/>    console.log("baz");<br/>  }<br/>}</span></pre><p id="e95c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8aad" class="mn lc iq mj b gy mo mp l mq mr">class Foo {<br/>  bar() {<br/>    console.log("baz");<br/>  }<br/>}</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/42a63ae25e10f4da50e855ec6bc8c01e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v8dyj4m-GQy-EC71"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">胡安·恩卡拉达在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="4dc1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6aeb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该有重复的参数和类成员。</p><p id="0f24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可能不应该在<code class="fe ms mt mu mj b">if</code>语句中使用赋值操作符。</p><p id="c806" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">console</code>和<code class="fe ms mt mu mj b">debugger</code>不属于生产代码。</p></div></div>    
</body>
</html>