<html>
<head>
<title>Build a simple YouTube video downloader using Python and Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 和 Django 构建一个简单的 YouTube 视频下载器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/build-a-simple-youtube-video-downloader-using-python-and-django-2fae4f00f5d3?source=collection_archive---------3-----------------------#2022-01-31">https://blog.devgenius.io/build-a-simple-youtube-video-downloader-using-python-and-django-2fae4f00f5d3?source=collection_archive---------3-----------------------#2022-01-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/bbed5c79ec60cada02d00f1296feafa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4kWNOjfI9P1ry5I5"/></div></div></figure><p id="62bf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本教程将向您展示如何创建一个下载 YouTube 视频的简单应用程序。我们可以用几行 Python 代码、基本的 HTML 和 Django 来实现这一点。</p><p id="8ead" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要什么？</p><p id="c1a2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> pytube: </strong>我们将使用 pytube 库。pytube’(<a class="ae kt" href="https://pytube.io/en/latest/" rel="noopener ugc nofollow" target="_blank">pytube.io/en/latest</a>)是一个轻量级的、无依赖的 Pythonic 库(和命令行实用程序)，用于下载 YouTube 视频。</p><p id="b0b6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">姜戈:</strong>姜戈(<a class="ae kt" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank">djangoproject.com</a>)是一个鼓励快速开发和简洁、实用设计的高级 Python web 框架。由经验丰富的开发人员构建，它解决了很多 web 开发的麻烦，所以您可以专注于编写您的应用程序，而无需重新发明轮子。它是免费和开放源码的。</p><p id="8f23" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">项目设置:</strong></p><p id="d979" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要将库安装在单独的文件夹中，请创建一个虚拟环境。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="9f74" class="ld le in kz b gy lf lg l lh li">$ py -3 -m venv env</span></pre><p id="e7a1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在激活环境:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="33af" class="ld le in kz b gy lf lg l lh li">$ .\env\Scripts\activate</span></pre><p id="de2f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">(此项目在 Windows 机器上完成)</p><p id="30dd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们现在可以在环境中安装库。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="79f2" class="ld le in kz b gy lf lg l lh li">$ pip install django<br/>$ pip install pytube</span></pre><p id="21a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们现在可以开始创建我们的项目了。</p><p id="e578" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">1/是时候创建我们的项目了。要创建项目，请运行以下命令。它将创建一个名为“YTVdownloader”的项目</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="9ee3" class="ld le in kz b gy lf lg l lh li">$ django-admin startproject YTVdownloader</span><span id="99b4" class="ld le in kz b gy lj lg l lh li">$ cd YTVdownloader</span></pre><p id="6819" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2/让我们在项目中创建视频下载器应用程序。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="ec66" class="ld le in kz b gy lf lg l lh li">$ python manage.py startapp YTVapp</span></pre><p id="a2e0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要在<a class="ae kt" href="http://settings.py" rel="noopener ugc nofollow" target="_blank">设置中的 INSTALLED_APPS 列表中添加我们的应用程序。py </a></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="75df" class="ld le in kz b gy lf lg l lh li">INSTALLED_APPS = [<br/>    'django.contrib.admin',<br/>    'django.contrib.auth',<br/>    'django.contrib.contenttypes',<br/>    'django.contrib.sessions',<br/>    'django.contrib.messages',<br/>    'django.contrib.staticfiles',<br/>    'YTVapp',  # our app<br/>]</span></pre><p id="74d4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">3/转到<a class="ae kt" href="http://views.py" rel="noopener ugc nofollow" target="_blank">视图，点击</a>。创建一个接收视频链接并从该链接下载视频的功能。我们需要从 pytube 导入 YouTube 功能。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="ffc2" class="ld le in kz b gy lf lg l lh li">from django.shortcuts import render<br/>from pytube import YouTube<br/><br/>def index(request):<br/><br/>    try:<br/><br/>        # check request.method is post or not<br/>        if request.method == 'POST':<br/>            try:<br/>                # get link from the html form<br/>                link = request.POST['link']<br/>                video = YouTube(link)<br/><br/>                # set video resolution<br/>                stream = video.streams.get_lowest_resolution()<br/><br/>                # download the video <br/>                stream.download()<br/><br/>                # render HTML page<br/>                return render(request, 'index.html', {'msg':'Video downloaded'})<br/>            except:<br/>                return render(request, 'index.html', {'msg':'Video not downloaded'})<br/>        return render(request, 'index.html', {'msg':''})<br/>    except:<br/>        return render(request, "index.html", {"msg":"Sorry something went wrong!"})</span></pre><p id="9a4b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">4/为了定义如何向用户显示，我们需要一个 HTML 文件。</p><p id="1369" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，在“YTVapp”中创建一个“模板”文件夹。</p><p id="ac3b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在模板文件夹中，我们将创建“index.html”文件，用户可以在其中输入 YouTube 的 url 来下载视频。为此，我们将使用 Django 的 POST 方法，使用 csrf 令牌进行安全保护。</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="a98e" class="ld le in kz b gy lf lg l lh li">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/><br/>&lt;head&gt;<br/>    &lt;style&gt;<br/>        .container {<br/>            text-align: center;<br/>        }<br/><br/>        .form {<br/>            width: 100%;<br/>        }<br/>    &lt;/style&gt;<br/>&lt;/head&gt;<br/><br/>&lt;body&gt;<br/><br/>    &lt;div class="container"&gt;<br/>        &lt;h1&gt;Youtube video downloader&lt;/h1&gt;<br/><br/>        &lt;p&gt;{{msg}}&lt;/p&gt;<br/><br/>        &lt;form action="" method="post" class="form"&gt;<br/>            {% csrf_token %}<br/><br/>            &lt;label for="link"&gt;Enter URL: &lt;/label&gt;<br/>            &lt;input type="text" id="link" name="link"&gt;&lt;br&gt;&lt;br&gt;<br/>            &lt;input type="submit" value="Download"&gt;<br/>        &lt;/form&gt;<br/>    &lt;/div&gt;<br/><br/>&lt;/body&gt;<br/><br/>&lt;/html&gt;</span></pre><p id="fa42" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">5/现在我们将定义路径或将 URL 映射到<a class="ae kt" href="http://urls.py" rel="noopener ugc nofollow" target="_blank">URL 中的视图。py </a></p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="a223" class="ld le in kz b gy lf lg l lh li">from django.contrib import admin<br/>from django.urls import path<br/>from YTVapp import views<br/><br/>urlpatterns = [<br/>    path('', views.index, name='index'),<br/>    path('admin/', admin.site.urls),<br/><br/>]</span></pre><p id="a60a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">6/我们都准备好运行我们的项目了:在命令行中键入:</p><pre class="ku kv kw kx gt ky kz la lb aw lc bi"><span id="7ddc" class="ld le in kz b gy lf lg l lh li">$ python manage.py runserver</span></pre><p id="170f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">前往<a class="ae kt" href="http://localhost:8000/youtube" rel="noopener ugc nofollow" target="_blank"> localhost:8000/youtube </a>查看我们的 youtube 视频下载器。</p><p id="d8e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当您点击下载按钮时，视频将被下载到您的 Django 项目目录中。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lk"><img src="../Images/6e8696324c89501fc28bbc538c6b0a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kmPI9mAoIDja6XbsqwF9qQ.png"/></div></div></figure><p id="4ac0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://github.com/Ugyenwangdi/YouTubeVideoDownloader" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中的代码</p></div><div class="ab cl ll lm hr ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ig ih ii ij ik"><p id="d02c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ls">原发布于</em><a class="ae kt" href="https://wulfi.hashnode.dev/build-a-simple-youtube-video-downloader-using-python-and-django" rel="noopener ugc nofollow" target="_blank"><em class="ls">https://wulfi . hash node . dev</em></a><em class="ls">。</em></p></div></div>    
</body>
</html>