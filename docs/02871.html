<html>
<head>
<title>Firebase cloud functions integration with AWS RDS database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Firebase 云功能与 AWS RDS 数据库集成</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/firebase-cloud-functions-integration-with-aws-rds-database-947a383e2e0c?source=collection_archive---------0-----------------------#2020-09-07">https://blog.devgenius.io/firebase-cloud-functions-integration-with-aws-rds-database-947a383e2e0c?source=collection_archive---------0-----------------------#2020-09-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/85afe489542734beaf1de66bb89b3750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1-shslhOUdo-J8GprfAj5w.png"/></div></div></figure><div class=""/><p id="3c01" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，我将解释如何创建一个 AWS RDS 数据库，并将其与 Firebase 云功能集成。这是我在发现随着您的应用程序规模扩大，您将需要从 Firebase 实时数据库或 Firestore 数据库中迁移出来后学到的东西，因为随着数据呈指数级增长，尤其是交易数据，成本会增加。在我早期的一篇文章中，我写了哪种 Firebase 数据库更好，以及何时使用哪篇文章。但是当您的应用程序扩展时，这两种方法都不够好，因为它们的相关成本很高。</p><p id="e893" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">查看更多:<a class="ae kt" href="https://medium.com/dev-genius/guide-to-chose-between-firebase-database-options-firebase-realtime-database-vs-firebase-cloud-632fda2e4838" rel="noopener">Firebase 数据库选项选择指南(Firebase 实时数据库与 Firebase 云 Firestore) </a></p><p id="34e5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，为了解决这个问题，我得到了这个解决方案，我在 AWS RDS 上创建了我的数据库，并使用 Firebase Cloud 函数来访问它，以进行我需要的所有 CRUD 操作。</p><p id="4d44" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是本教程的外观:</p><ol class=""><li id="9819" class="ku kv iy jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">在 AWS 上创建数据库</li><li id="b1ab" class="ku kv iy jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">使用 MySQL workbench 测试 AWS 数据库</li><li id="7e2c" class="ku kv iy jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">设置 Firebase 云功能项目。</li><li id="1052" class="ku kv iy jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">使用 Postman 和测试数据测试云函数 API。</li></ol><h1 id="56a8" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">步骤 1:在 AWS 上创建一个数据库:</h1><p id="279d" class="pw-post-body-paragraph jv jw iy jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">这一步将包括在 AWS 中创建数据库，并使用 MySQL Workbench 确保连接正确。</p><p id="84fa" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">答:前往</strong><a class="ae kt" href="https://aws.amazon.com/console/" rel="noopener ugc nofollow" target="_blank"><strong class="jx iz">【https://aws.amazon.com/console/】</strong></a><strong class="jx iz">创建您的 AWS 帐户。</strong></p><p id="f93f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> b .在您的控制台中，在服务下选择 RDS inside Database 部分，如下所示。</strong></p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ml"><img src="../Images/fc41591cf06b9f518fe66f95c5b090e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oKtQK5UvGe1eIs7N9TaogA.png"/></div></div></figure><p id="5adc" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> c .进入仪表板后，点击创建数据库。</strong></p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mq"><img src="../Images/24296852922b82dfdc8f86d37cbc8008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kTld6wIIusr20OT0JeH6Hw.png"/></div></div></figure><p id="a467" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> d .一旦进入创建数据库向导，选择以下配置:</strong></p><p id="0266" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一、<strong class="jx iz">数据库创建方法</strong>:标准创建</p><p id="00b3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">二。<strong class="jx iz">引擎选项</strong> : MySQL。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mr"><img src="../Images/d7347b0cfbd8c3915f035c22d6a17e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dNs6XwVC_3_5b8cdgSRcWQ.png"/></div></div></figure><p id="d5f0" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">三。<strong class="jx iz">版本</strong> : MySQL 社区(默认)</p><p id="7611" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">四。<strong class="jx iz">版本</strong> : MySQL 8.0.17(默认)</p><p id="cc5c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">动词 （verb 的缩写）<strong class="jx iz">模板</strong>:自由层(这是为了教程确保你的数据库不会花费你的钱)。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ms"><img src="../Images/e025cc07ae22d8a822c2a2011b55aa51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z4sILeMOSzWebedXan8TiQ.png"/></div></div></figure><p id="6b19" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不及物动词在设置中，设置数据库标识符的名称，并设置用户名和密码。我已经将“database-2”设置为标识符名称。</p><p id="a866" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">七。<strong class="jx iz">数据库实例大小</strong>:可用的最小值选项(db.t2.micro)。</p><p id="8605" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">八。<strong class="jx iz">存储</strong>:默认存储设置。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mt"><img src="../Images/775264542fca52e7d041f879bbad9bfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0N9mtH0-dim4FKMOP0SW4Q.png"/></div></div></figure><p id="71f4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">九。所有剩余的设置为默认设置，并在最后单击“创建数据库”。</p><p id="82cb" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> e .等待几分钟，AWS 将创建数据库并显示在数据库下。准备好后，在 databases 下选择您新创建的 database-2。</strong></p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mu"><img src="../Images/3c010645b46d34e7d941b77ff037a88f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FtHwdOfLUD6ZGtkrEG14Qg.png"/></div></div></figure><p id="e2a1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">确保您的数据库可用，如图所示，然后点击修改。</p><p id="be81" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz"> g .在“修改”下，转到下面，如图所示将“公共可访问性”选择为“是”，然后单击底部的“继续”。</strong></p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mv"><img src="../Images/6d1cc1f320a40c26b42486a8ea294a23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*viB_b90IM1OifbtdCl67PQ.png"/></div></div></figure><p id="e6a2" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">到这一步，您的 RDS 数据库已经建立并可供公众访问。</p><h1 id="0a98" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">步骤 2:使用 MySQL workbench 测试 AWS 数据库</h1><p id="4aa4" class="pw-post-body-paragraph jv jw iy jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">在这一步中，我们将使用 MySQL workbench 测试我们的 AWS 数据库。</p><p id="3a3f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">答:打开 AWS 控制台，进入数据库，打开数据库主页。</strong>确保您的数据库可用，并且可以公开访问，如图所示。<strong class="jx iz"> </strong>记下端点 URL 和端口号。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mw"><img src="../Images/2c52892a9c0b0e4ba93b9302c69577c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tw_rlONqXSz3GD1qUjMHIg.png"/></div></div></figure><p id="8112" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">b.打开 MySQL Workbench 并测试 MySQL 连接。</p><p id="7f98" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">I .单击(+)将打开向导</p><p id="e98d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">二。如图所示，输入您的主机名、端口、用户名和密码，然后单击测试连接。</p><p id="7da7" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">三。如果您的连接数据是正确的，它会给你一个成功的消息，表明连接已完成。在对话框中单击确定，然后在向导中单击确定。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/67aec5346bd63996f5cda77e5371b025.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Trbg-M2GybrSYYKC5X7gRQ.png"/></div></div></figure><p id="4778" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">四。打开连接。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi my"><img src="../Images/9ce82c8e9f89ab716f12c40ff7181240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4nPddqF2wOYBpqtLG3qhMQ.png"/></div></div></figure><p id="ab0a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">c.接下来，我们将创建一个模式和数据库表。</p><p id="d9df" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">I .执行如下所示的命令。这将创建模式，我们将在该模式的基础上创建数据库表。</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="93e0" class="ne lj iy na b gy nf ng l nh ni">create schema Tutorial_Schema;</span></pre><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/cd5080aa2690c3a6d0c82f17042069cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*tP3d2kHfzLxJarW_zeaKlg.png"/></div></figure><p id="1b47" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">二。通过执行以下命令创建新的雇员表，如下所示。</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="c262" class="ne lj iy na b gy nf ng l nh ni">CREATE TABLE `Tutorial_Schema`.`Employee` (<br/> `idEmployee` INT NOT NULL AUTO_INCREMENT,<br/> `employeeName` VARCHAR(45) NOT NULL,<br/> `employeeSalary` INT NOT NULL,<br/> `employeeAge` VARCHAR(45) NOT NULL,<br/> PRIMARY KEY (`idEmployee`));</span></pre><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nk"><img src="../Images/c7630cf136d7f441d713ac9eda2b03ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XZqJesXPwNe3ZM-0ONxuGw.png"/></div></div></figure><p id="682f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不要忘记执行“提交”语句。这将确保保存事务(换句话说就是“提交”)。直到这一步，我们有我们的数据库设置和连接测试。</p><h1 id="1a26" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">步骤 3:设置 Firebase 云函数应用程序。</h1><p id="fee1" class="pw-post-body-paragraph jv jw iy jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">注意:Firebase 默认使用 Node JS 作为其后端语言。在继续之前，请确保在您的系统中安装并配置了节点 JS。要确认是否安装了 Node，请打开命令提示符并运行“node -v”命令。</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="ad2f" class="ne lj iy na b gy nf ng l nh ni">node -v</span></pre><p id="bc23" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">a.转到<a class="ae kt" href="https://console.firebase.google.com/?pli=1" rel="noopener ugc nofollow" target="_blank">https://console.firebase.google.com/</a>并创建 Firebase 项目。</p><p id="aa8f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">b.如图所示，输入您的项目名称</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nl"><img src="../Images/ecd34a9de1d386aa1dadd0af35639596.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W7kb_ZSocMjQ2HsHs9Mbnw.png"/></div></div></figure><p id="3d3b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">c.禁用项目的分析(我们的应用程序不需要它),然后单击 create project。</p><p id="c12e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">d.一旦你的项目准备好了，点击“继续”。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nm"><img src="../Images/9ab6eb77c39cc6bd783afc5bd8745fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*paN2FyQunPHSaSR2gk9EgA.png"/></div></div></figure><p id="805a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">e.从左侧菜单中，单击功能，然后单击“开始”按钮。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mq"><img src="../Images/5cced636f1bfadb02803547a8ea03c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dBEocfkZgpV4YnuUK_rvdw.png"/></div></div></figure><p id="4688" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">f.向导将会打开。安装 Firebase 工具。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nn"><img src="../Images/8ca7d1b0f44fbd2b8bc18df338ffa9d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M-5CvTbleHzQA7oE2ST5FA.png"/></div></div></figure><p id="bcd7" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在您想要保存项目的文件目录中创建一个文件夹。然后在 cmd 中运行以下命令。确保以管理员身份运行 cmd:</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="05a9" class="ne lj iy na b gy nf ng l nh ni">npm install -g firebase-tools</span></pre><p id="53c6" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个命令安装 Firebase SDK，我们将使用它来部署我们的 Firebase 代码。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi no"><img src="../Images/65055d303c7009bba57e88df9f3a1d2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qqMe_DeDfyH0PmaVbwU7nQ.png"/></div></div></figure><p id="b116" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">g.接下来，运行如下所示的命令:</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="d270" class="ne lj iy na b gy nf ng l nh ni">Firebase login</span></pre><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi np"><img src="../Images/bea0f531ee05fb0ab9dd1f32c39ea71d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2rpbQEmTNBV_DARtai-dw.png"/></div></div></figure><p id="df97" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">h.下次执行:</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="1886" class="ne lj iy na b gy nf ng l nh ni">Firebase init</span></pre><p id="9e3a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将创建一个样板项目文件夹，并连接到我们从“a”到“e”创建的 Firebase 项目。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ms"><img src="../Images/b32a5da5c0226f12a2bc7fd43302c7c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hlyiHhCfpXZL3Bq1PvmIYg.png"/></div></div></figure><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nq"><img src="../Images/ec9441c84f69da8f1cb0c0ce0b8b952b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q4BfK1Usnk0gWqVIjbGxaA.png"/></div></div></figure><p id="2f0a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来我们需要在我们的项目中安装 express JS 和 MySQL。遍历新构建的文件夹“functions ”,运行以下命令:</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="c4e8" class="ne lj iy na b gy nf ng l nh ni">npm install express — save</span></pre><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nr"><img src="../Images/52656233b5c59b05d6662e2fdd8222ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-oNYqqvC2Ti6osL_ZUbSLA.png"/></div></div></figure><p id="453b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您还需要安装 cors 来允许您的项目的 cors 请求。</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="96e3" class="ne lj iy na b gy nf ng l nh ni">npm install cors — save</span></pre><p id="53da" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">j.要在项目中安装 MySQL，请执行:</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="60c4" class="ne lj iy na b gy nf ng l nh ni">npm install mysql — save</span></pre><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ns"><img src="../Images/3b0d780c59f672420499c73c40f3d8b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MUcNK_dYzPcUa4Xu7o-LxQ.png"/></div></div></figure><p id="4e75" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">k.到这一步，您已经安装了 Firebase 函数，为 REST API 安装了 Express JS，为 AWS 集成安装了 MySQL。您的 package.json 应该是这样的:</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="bf10" class="ne lj iy na b gy nf ng l nh ni">{<br/> “name”: “functions”,<br/> “description”: “Cloud Functions for Firebase”,<br/> “scripts”: {<br/> “lint”: “eslint .”,<br/> “serve”: “firebase emulators:start — only functions”,<br/> “shell”: “firebase functions:shell”,<br/> “start”: “npm run shell”,<br/> “deploy”: “firebase deploy — only functions”,<br/> “logs”: “firebase functions:log”<br/> },<br/> “engines”: {<br/> “node”: “10”<br/> },<br/> “main”: “index.js”,<br/> “dependencies”: {<br/> “cors”: "^2.8.5",<br/> “express”: “⁴.17.1”,<br/> “firebase-admin”: “⁸.10.0”,<br/> “firebase-functions”: “³.6.1”,<br/> “mysql”: “².18.1”<br/> },<br/> “devDependencies”: {<br/> “eslint”: “⁵.12.0”,<br/> “eslint-plugin-promise”: “⁴.0.1”,<br/> “firebase-functions-test”: “⁰.2.0”<br/> },<br/> “private”: true<br/>}</span></pre><h1 id="694f" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">第 4 步:云函数代码</h1><p id="503c" class="pw-post-body-paragraph jv jw iy jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">在这一步中，我们将编写如下三个函数:</p><ol class=""><li id="c03e" class="ku kv iy jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">Ping(检查我们的 Firebase 云函数是否返回任何东西)</li><li id="5c8f" class="ku kv iy jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">GetEmployee(从 AWS RDS 数据库返回员工列表)。</li><li id="8975" class="ku kv iy jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">PostEmployee(发布新员工数据)</li></ol><h2 id="a751" class="ne lj iy bd lk nt nu dn lo nv nw dp ls kg nx ny lw kk nz oa ma ko ob oc me od bi translated">项目文件结构:</h2><p id="0e18" class="pw-post-body-paragraph jv jw iy jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">到目前为止，您的项目结构应该是这样的。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oe"><img src="../Images/9900b02e7c3f00eb20dcc42f6b9aecbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U4OrRfiZFhJwyEAAen2qLw.png"/></div></div></figure><h2 id="0f4d" class="ne lj iy bd lk nt nu dn lo nv nw dp ls kg nx ny lw kk nz oa ma ko ob oc me od bi translated">mysql.js:</h2><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="bab4" class="ne lj iy na b gy nf ng l nh ni">const mysql = require(‘mysql’);</span><span id="6d0f" class="ne lj iy na b gy of ng l nh ni">const connection = mysql.createConnection({<br/> host: ‘REPLACE IT WITH YOUR HOST NAME FROM AWS DATABASE DASHBOARD’,<br/> user: ‘REPLACE IT WITH YOUR USERNAME’,<br/> password: ‘REPLACE IT WITH YOUR PASSWORD’,<br/> database: ‘REPLACE IT WITH YOUR SCHEMA NAME’<br/> });<br/> <br/> connection.connect((err) =&gt; {<br/> if (err) throw err;<br/> console.log(‘Connected!’);<br/> });<br/> <br/>module.exports = connection;</span></pre><p id="eb96" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该文件创建了一个通用的集中式连接对象，可以在整个项目中使用。export 语句可以帮助项目中的其他文件访问它。</p><h2 id="409b" class="ne lj iy bd lk nt nu dn lo nv nw dp ls kg nx ny lw kk nz oa ma ko ob oc me od bi translated">雇员. js:</h2><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="31e2" class="ne lj iy na b gy nf ng l nh ni">const express = require(‘express’);<br/>const cors = require(‘cors’);<br/>const connection = require(‘./mysql’);<br/>const employee = express();</span><span id="d002" class="ne lj iy na b gy of ng l nh ni">// Automatically allow cross-origin requests<br/>employee.use(cors({ origin: true }));</span><span id="2e08" class="ne lj iy na b gy of ng l nh ni">employee.get(‘/’, (req, res) =&gt; {<br/> res.header(“Access-Control-Allow-Origin”, “*”); // update to match the domain you will make the request from<br/> res.header(“Access-Control-Allow-Headers”, “Origin, X-Requested-With, Content-Type, Accept”);<br/> res.header(“Access-Control-Allow-Methods”,”GET, POST”);</span><span id="98f7" class="ne lj iy na b gy of ng l nh ni">res.header(“Access-Control-Allow-Origin”, “*”); // update to match the domain you will make the request from<br/> res.header(“Access-Control-Allow-Headers”, “Origin, X-Requested-With, Content-Type, Accept”);<br/> res.header(“Access-Control-Allow-Methods”,”GET, POST”);<br/> <br/> var sqlStr = “select * from Tutorial_Schema.Employee;”;<br/> <br/> connection.query( sqlStr , (err, result, fields) =&gt; {<br/> if (err) throw err;<br/> var finalResult = [];<br/> for (var item of result) {<br/> finalResult.push({<br/> “ID”: item.idEmployee,<br/> “Name”: item.employeeName,<br/> “Salary”: item.employeeSalary,<br/> “Age”: item.employeeAge<br/> });<br/> }<br/> console.log(finalResult);<br/> res.json(finalResult);<br/> });<br/>});</span><span id="f171" class="ne lj iy na b gy of ng l nh ni">employee.post(‘/’, (req, res) =&gt; {<br/> res.header(“Access-Control-Allow-Origin”, “*”); // update to match the domain you will make the request from<br/> res.header(“Access-Control-Allow-Headers”, “Origin, X-Requested-With, Content-Type, Accept”);<br/> res.header(“Access-Control-Allow-Methods”,”GET, POST”);</span><span id="d849" class="ne lj iy na b gy of ng l nh ni">var dataRecieved = req.body;<br/> console.log(dataRecieved);<br/> var employeeName = dataRecieved.employeeName;<br/> var employeeSalary = dataRecieved.employeeSalary;<br/> var employeeAge = dataRecieved.employeeAge;<br/> var sql = “INSERT INTO Tutorial_Schema.Employee( employeeName, employeeSalary, employeeAge ) “ +<br/> “ VALUES (‘ “ + employeeName + “ ‘, “ + employeeSalary + “, “ + employeeAge + “ );”;<br/> <br/> console.log(“Employee SQL: “ + sql );<br/> connection.query(sql, (err, result) =&gt; {<br/> if (err) res.json({ “Message”: “Error”, “Message Description”: “SQL Error” });<br/> console.log(“1 Employee record inserted”);<br/> res.json({ “Message”:”Record Inserted”, “Values” : { “Name”: employeeName, “Salary”:employeeSalary, “Age”:employeeAge }});<br/> });<br/>});</span><span id="bb4e" class="ne lj iy na b gy of ng l nh ni">module.exports = employee;</span></pre><p id="ecc5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">js 文件包含 AWS 中雇员数据库的 POST 和 GET 方法。app 对象被导出以在 index.js 文件中公开。检查数据库查询的连接对象的使用。这种文件结构将有助于在创建更多数据库表时进行伸缩，并且您希望拥有多个文件来分离业务逻辑。</p><h2 id="d681" class="ne lj iy bd lk nt nu dn lo nv nw dp ls kg nx ny lw kk nz oa ma ko ob oc me od bi translated">index.js:</h2><p id="c123" class="pw-post-body-paragraph jv jw iy jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">最后，我们有我们的 index.js 文件，这也是我们的应用程序的起点。</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="785b" class="ne lj iy na b gy nf ng l nh ni">const functions = require(‘firebase-functions’);<br/>const employee = require(‘./employee’);</span><span id="6682" class="ne lj iy na b gy of ng l nh ni">exports.employee = functions.https.onRequest(employee);</span><span id="19d0" class="ne lj iy na b gy of ng l nh ni">exports.ping = functions.https.onRequest(async (req, res) =&gt; {<br/> res.header(“Access-Control-Allow-Origin”, “*”); // update to match the domain you will make the request from<br/> res.header(“Access-Control-Allow-Headers”, “Origin, X-Requested-With, Content-Type, Accept”);<br/> res.header(“Access-Control-Allow-Methods”,”GET, POST”);</span><span id="1605" class="ne lj iy na b gy of ng l nh ni">res.json({“SUCCESS”: “200”});<br/>});</span></pre><p id="dd05" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们已经准备好了文件结构，在您的 cmd 中的 functions 文件夹中运行以下命令:</p><pre class="mm mn mo mp gt mz na nb nc aw nd bi"><span id="e1fa" class="ne lj iy na b gy nf ng l nh ni">firebase deploy</span></pre><p id="041f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在转到 Firebase 函数仪表板，您将看到这两个函数已部署。</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi og"><img src="../Images/a5220bae3ab187edb092b86d24c4fa07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t_NjeoGV3Ux2KYWssiqvwg.png"/></div></div></figure><p id="d83c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们使用 postman 来测试我们的应用程序:</p><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oh"><img src="../Images/62e0ae69cc5aa6c3f7baf9fe621fe1b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6lkLq03MzNZUj48Bi68fQw.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated">测试 Ping</figcaption></figure><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi om"><img src="../Images/6e03627fbe6433a3a2b2c9675901067b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3ziup5RmRr_-Hh7hTxp4aA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated">岗位员工测试</figcaption></figure><figure class="mm mn mo mp gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi on"><img src="../Images/a7d91633f99a7f37c943c15dbf10fb7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t-hc6D4tU8k5BGN-wDNhjA.png"/></div></div><figcaption class="oi oj gj gh gi ok ol bd b be z dk translated">获取员工的测试</figcaption></figure><h1 id="6c94" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">Github 项目链接:</h1><div class="im in gp gr io oo"><a href="https://github.com/ahmedkhan1991/firebaseFunctionsAwsRdsIntegration" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd iz gy z fp ot fr fs ou fu fw ix bi translated">Ahmed Khan 1991/firebasefunctionsawsrds integration</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">Firebase 云功能 AWS RDS 集成。对 ahmedkhan 1991/firebasefunctionsawsrdsdintegration 做出贡献…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">github.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc iu oo"/></div></div></a></div><h1 id="5fe2" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论:</h1><p id="dc4d" class="pw-post-body-paragraph jv jw iy jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">在本教程中，我们将 AWS RDS 用于 MySQL 数据库，Firebase Cloud 函数用于在云上部署我们的 Node JS 项目，Express JS (Node JS)用于 REST APIs，MySQL node JS 用于连接 AWS RDS 和 MySQL Workbench 以及 Postman 进行测试。</p><p id="ee78" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">快乐学习！！！！！！</p></div></div>    
</body>
</html>