<html>
<head>
<title>Why You Should Stop Hoarding Metrics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么你应该停止囤积指标</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/why-you-should-stop-hoarding-metrics-d9ff84c16a85?source=collection_archive---------5-----------------------#2021-07-21">https://blog.devgenius.io/why-you-should-stop-hoarding-metrics-d9ff84c16a85?source=collection_archive---------5-----------------------#2021-07-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6408170b14c6db1aa3ce159de3f54c08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-ymeRtGQgdC6MGOJVW376g.png"/></div></div></figure><p id="45e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">无服务器允许您在云提供商的数据中心部署远程应用程序。<strong class="jx io">这减轻了您的大部分运营负担</strong>。你在云提供商的生态系统中购买的越多，<strong class="jx io">你自己需要做的就越少</strong>:不再有操作系统更新或数据库错误修复安装。</p><p id="f4c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是<strong class="jx io">你还是需要自己做一些运营相关的工作</strong>。例如，<a class="ae kt" href="https://dashbird.io/serverless-observability/" rel="noopener ugc nofollow" target="_blank">监控您的应用程序</a>以了解在那个遥远的数据中心发生了什么。</p><p id="75c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通常，云中新软件产品的监控之旅是这样的:</p><p id="8750" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">第一个版本只有基本的监控功能，或者更糟，没有任何监控。然后事情就像往常一样出错，没有人真正知道为什么。在调试完问题后，人们得到的想法是他们没有足够的度量。根据问题的严重性，这要么导致<strong class="jx io">更多的指标被添加到监控设置中</strong>每个新事件要么导致<strong class="jx io">过度破坏解决方案</strong>，其中<strong class="jx io">一切都被监控</strong>。</p><p id="f1a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">无论哪种方式，在应用程序出现足够多的问题后，会有<strong class="jx io">如此多的指标和警报被设置</strong>，以至于您从对基础架构一无所知变成了有如此多的洞察力，以至于<strong class="jx io">重要的部分被淹没在数量庞大的指标和警报中</strong>。</p><h1 id="e8d8" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">为什么太多的指标和警报是不好的？</h1><p id="368d" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">如果你遇到严重的失败威胁到你的生意，你会变得小心翼翼。你不想让任何东西从缝隙中溜走，所以你添加了你能找到的所有东西。但最终，<strong class="jx io">它淹没了重要的数据，而这些数据本可以在下一次即将发生的事件中拯救你。</strong></p><p id="c8d0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你看不到长满树木的森林，那么你又回到了起点——没有洞察力。关键的问题是，你和你的团队，<strong class="jx io">那些看着监控仪表板的人</strong>，能合理地感知多少数据？</p><p id="3af7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所有你不需要的指标都会分散你对重要部分的注意力。<strong class="jx io">他们还可以引导你优化无关紧要的指标</strong>。</p><h1 id="0210" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">你应该摆脱你的指标吗？</h1><p id="b539" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">简答:<strong class="jx io">不，不应该</strong>。</p><p id="e64a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">长的回答:所有这些指标都潜在地<strong class="jx io">隐藏着重要信息</strong>。你应该停止储存它们吗？嗯，问题不在于度量标准保存在某个地方。虽然<strong class="jx io">在某些情况下这可能会成为财务和性能问题</strong>，但它不会直接影响您的运营。<strong class="jx io">问题是你的团队无法理解它们</strong>。根据未来的需求，最好将指标存储在某个地方，这样您可以在需要时显示它们。</p><p id="04a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你应该削减这些指标的仪表板和图表，以<strong class="jx io">将你的团队从信息过载中解放出来</strong>。</p><h1 id="8386" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">从服务级别协议、服务级别协议和服务级别协议的角度考虑</h1><p id="afea" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">服务水平协议(SLA)包括您在与客户签订的合同中向客户做出的承诺。例如，您的服务将在一秒钟内对99%的请求做出响应。你在法律上受那个承诺的约束，所以它绝不能被打破。您可以查看AWS Lambda SLA 来了解这在实践中意味着什么。当AWS的服务中断太长时间时，他们会损失很多钱。</p><p id="a1a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">服务水平目标(SLO)是您如何重新定义SLA，以有意义的方式衡量它。在上面的一秒钟响应示例中，这可能很容易测量，但情况并非总是如此。<strong class="jx io">SLO是您为您的指标定义的不应被突破的阈值</strong>。成功回复率不应低于一定比例；响应等待时间不应超过某个值等。</p><p id="ce6d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在图1中，您可以看到这样一个SLO是如何被设置为Dashbird alert的。在这里，平均延迟应该总是低于一秒。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/39409428e74b2f2f2faf879d5dd2a0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/0*A-P3eAY0P8-tofYU.png"/></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">图1:API延迟的Dashbird警报——当API响应超过1，000毫秒(1秒)时，严重级别的警报将通过电子邮件、Slack、SMS等向您发出警报</figcaption></figure><p id="aa78" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">服务水平指标(SLI)现在是我们囤积问题的解决方案所在。SLI由一个或多个重要指标组成，用于检查您的系统当前是否违反了任何SLO。<strong class="jx io">“一个或多个指标”是关键词</strong>。如果您可以从显示您的SLO得到满足的多个指标中计算出一个值，您就不必查看每个指标来检查事情是否进展顺利。</p><p id="fa01" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在图2中，您可以看到这样一个SLI，一个Lambda函数执行的持续时间以毫秒计。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mg"><img src="../Images/e966a239bf7d11b0305c2be7c272a9cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LJqViZu9jWqjM0Uh.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">图AWS Lambda的Dashbird函数细节</figcaption></figure><p id="7b28" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是一种自上而下的方法。你写合同；它解释了你的SLAs您基于这些需求定义您的SLO，然后设置sli，以便您可以检查SLO是否保持不变。</p><h1 id="6608" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">智能触发器有助于解决实际业务问题</h1><p id="a1c7" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">最后，当您的SLO不再满足时，或者更好地说，在它们不再满足之前，就会触发<strong class="jx io">警报，这样您就可以解决即将发生的问题。</strong></p><p id="9eb4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">磁盘空间或CPU利用率对您的SLO有影响吗？如果不是，就不要显示它们。</p><p id="de70" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">这并不意味着您应该在合同中只为SLA定义SLOs】。很有可能<strong class="jx io">你的合同没有提到</strong>一些可能是重要的SLA的东西；毕竟，合同并不完美，如果你不能提供客户期望的东西，你的客户仍然会生气。这只意味着他们最终不能起诉你，这对你的公司很重要，但只是<strong class="jx io">基本最低</strong>。</strong></p><h1 id="8e2d" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Dashbird的构建考虑了最佳实践</h1><p id="728f" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Dashbird提供了大量开箱即用的无服务器技术。毕竟，它的创建是因为创始人直接看到了缺乏可观察性或过多的信息会如何阻碍产品开发。</p><p id="1eda" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在您将Dashbird与您的AWS帐户集成之后，它开始从CloudWatch收集监控数据，并且<strong class="jx io">立即为您的基础架构构建重要的指标，而无需任何额外的编码</strong>。</p><p id="235c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Dashbird会为所有受支持的AWS资源设置指标和警报，因此您不必这么做。这些都是基于多年来为Dashbird客户监控无服务器系统的经验，当然还有<a class="ae kt" href="https://aws.amazon.com/architecture/well-architected/" rel="noopener ugc nofollow" target="_blank"> AWS架构良好的框架</a>，AWS的官方资源<strong class="jx io">用于在AWS云上构建和维护应用程序。</strong></p><p id="fb98" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">图3显示了这些见解的一个例子。Lambda函数运行时是可升级的，这一点很重要，因为运行时版本不是永远受支持的。Dashbird在当前运行时版本不再受支持之前就展示了升级的可能性。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mh"><img src="../Images/27f807ceb3ea4b2926fca9bf13f84e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ycbY3X0ZgJ8YYwbw.png"/></div></div><figcaption class="mc md gj gh gi me mf bd b be z dk translated">图3: Dashbird架构良好的镜头</figcaption></figure><p id="32f6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Dashbird只向您展示<strong class="jx io">什么是重要的</strong>，因此您的团队不会不知所措。这为您的团队提供了为您的合同中定义的SLA添加sli和SLO的空间，同时强调了您应该记住的关键指标。</p><p id="599e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">延伸阅读:</p><ul class=""><li id="c048" class="mi mj in jx b jy jz kc kd kg mk kk ml ko mm ks mn mo mp mq bi translated"><a class="ae kt" href="https://dashbird.io/blog/ultimate-guide-monitoring-serverless-applications/" rel="noopener ugc nofollow" target="_blank">无服务器应用监控终极指南</a></li><li id="d716" class="mi mj in jx b jy mr kc ms kg mt kk mu ko mv ks mn mo mp mq bi translated"><a class="ae kt" href="https://dashbird.io/blog/lambda-metrics-monitoring-what-matters/" rel="noopener ugc nofollow" target="_blank">您应该监控的λ指标</a></li></ul></div></div>    
</body>
</html>