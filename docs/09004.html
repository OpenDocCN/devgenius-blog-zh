<html>
<head>
<title>Leverage the Amazing Power of Functions and Pipe in your Python Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 代码中利用函数和管道的惊人力量</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/improve-your-python-code-using-the-amazing-combo-of-functions-and-pipe-59d480a59028?source=collection_archive---------6-----------------------#2022-07-24">https://blog.devgenius.io/improve-your-python-code-using-the-amazing-combo-of-functions-and-pipe-59d480a59028?source=collection_archive---------6-----------------------#2022-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2c33" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">为你和他人简化你的代码。而且真的很有效！</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ff96d4d74e69088e201179535bfb3ef0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o-EXRh62Vv1wF6hGc8enkg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@clemhlrdt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae kv" href="https://unsplash.com/@clemhlrdt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Clément Hélardot </a>拍摄</figcaption></figure><p id="5076" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我必须承认，直到最近，我都没有充分利用 Python 函数，甚至没有尽可能经常地使用它们。</p><p id="8f98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从那以后，我学会了如何结合函数和管道。一个巨大的差异制造者。</p><p id="5078" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望对你也有帮助。让我们开始吧！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="20e6" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">内容:</h2><ol class=""><li id="c059" class="ms mt iq ky b kz mu lc mv lf mw lj mx ln my lr mz na nb nc bi translated"><a class="ae kv" href="https://medium.com/p/59d480a59028/edithttps://medium.com/p/59d480a59028#1cae" rel="noopener">用例</a></li><li id="e99f" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><a class="ae kv" href="https://medium.com/p/59d480a59028#d5a5" rel="noopener">定义计算压降的函数</a></li><li id="5358" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><a class="ae kv" href="https://medium.com/p/59d480a59028#5ea0" rel="noopener">使用管道方法链接函数</a></li><li id="7c27" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr mz na nb nc bi translated"><a class="ae kv" href="https://medium.com/p/59d480a59028#9c88" rel="noopener">结论</a></li></ol></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="1cae" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">1.用例</h2><p id="fc24" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">我们将计算特斯拉的股票随着时间的推移而减少。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="1111" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们使用特斯拉在 yfinance 中的股票代码来检索它的股票数据</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nn"><img src="../Images/439bda734fa86fc8317d5e8b0ac29e05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ekb-1XY5Vnjn7DOaemGTKw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">输出</figcaption></figure><h2 id="d5a5" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">2.定义计算压降的函数</h2><p id="1aa7" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">原则是每个功能定义<strong class="ky ir">一个任务。有多种功能总比一个很长很难理解的好。</strong></p><p id="d74b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它有几个优点:</p><ul class=""><li id="18ab" class="ms mt iq ky b kz la lc ld lf no lj np ln nq lr nr na nb nc bi translated">功能小。它有 1-2 行代码，所以更容易知道它做什么。</li><li id="bda8" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr nr na nb nc bi translated">我们可以很容易地测试它。</li><li id="5cbc" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr nr na nb nc bi translated">我们可以给它一个很好的描述性的名字。</li><li id="ea70" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr nr na nb nc bi translated">其他人会更容易读懂。</li></ul><p id="472e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">(<a class="ns nt ep" href="https://medium.com/u/84a02493194a?source=post_page-----59d480a59028--------------------------------" rel="noopener" target="_blank"> Khuyen Tran </a>写了一篇关于干净代码的 Python 最佳实践的博文。我把链接放在了这篇文章的末尾)</p><p id="637b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们转到压降计算及其定义:</p><blockquote class="nu nv nw"><p id="0db4" class="kw kx nx ky b kz la jr lb lc ld ju le ny lg lh li nz lk ll lm oa lo lp lq lr ij bi translated">下降是衡量某个变量从历史峰值下降的指标(维基百科的定义)</p></blockquote><p id="22bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是用函数编写的代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="6dbc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每个功能都列出了具体的任务和说明性的名称。让我们浏览一下:</p><ul class=""><li id="102b" class="ms mt iq ky b kz la lc ld lf no lj np ln nq lr nr na nb nc bi translated"><strong class="ky ir"> Create_copy: </strong>我们处理检索到的数据的副本</li><li id="9cfc" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr nr na nb nc bi translated"><strong class="ky ir"> daily_returns: </strong>这个函数计算特斯拉股票每天的盈亏。你可以在这里找到我之前关于此事的博文<a class="ae kv" href="https://medium.com/dev-genius/how-to-calculate-the-daily-returns-and-volatility-of-a-stock-with-python-d4e1de53e53b" rel="noopener">。</a></li><li id="0071" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr nr na nb nc bi translated">累积回报:我们用 cumprod()得到它们</li><li id="513f" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr nr na nb nc bi translated">我们用 cummax()来测量它们</li><li id="efee" class="ms mt iq ky b kz nd lc ne lf nf lj ng ln nh lr nr na nb nc bi translated"><strong class="ky ir">提款:</strong>我们可以用累计收益和前一个峰值来计算提款。</li></ul><h2 id="5ea0" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">3.使用管道方法链接这些函数</h2><p id="3408" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">一旦我们定义了这些函数，有趣的部分就是用<em class="nx">管道将它们链接起来。</em></p><p id="e4b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Pipe()允许您对 DataFrame 对象应用一个或多个函数。我们会给他们每个人打电话，让他们把水位降下来。</p><p id="e83e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们用<em class="nx"> </em>添加 plot()来可视化结果。</p><p id="8a61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我推荐你在这里阅读文档<a class="ae kv" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.pipe.html" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/e64ffc91beb2f523036cae7ffa82b7bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7qPJ064oz5CERrjGJZR8lA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">输出</figcaption></figure><p id="7d7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">真的就那么简单。调用你想要的任何函数都很方便，代码修改也很简单，这是我喜欢的。</p><h2 id="9c88" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">4.结论</h2><p id="6551" class="pw-post-body-paragraph kw kx iq ky b kz mu jr lb lc mv ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">我更喜欢同时使用函数和管道来编写代码。您可以编写更简洁、更易于维护的代码。我鼓励你实践它，你会看到好处！</p><p id="680c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">参考资料:</p><p id="647b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://towardsdatascience.com/python-clean-code-6-best-practices-to-make-your-python-functions-more-readable-7ea4c6171d60" rel="noopener" target="_blank"> Python 干净代码:让 Python 函数更具可读性的 6 个最佳实践|作者 Khuyen Tran |迈向数据科学</a></p><p id="bb33" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://www.investopedia.com/terms/d/drawdown.asp" rel="noopener ugc nofollow" target="_blank">提款定义(investopedia.com)</a></p><p id="782a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.pipe.html" rel="noopener ugc nofollow" target="_blank">熊猫。data frame . pipe-pandas 1 . 4 . 3 文档(pydata.org)</a></p></div></div>    
</body>
</html>