<html>
<head>
<title>SideCar and Service Mesh : 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">边车和服务网:101</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sidecar-and-service-mesh-101-134d342bdad9?source=collection_archive---------4-----------------------#2022-08-15">https://blog.devgenius.io/sidecar-and-service-mesh-101-134d342bdad9?source=collection_archive---------4-----------------------#2022-08-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0f0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这篇博客是我们从零开始讨论 101 个<strong class="jm io"> </strong>概念的系列文章的一部分，读者的入门知识有限。这篇文章属于<strong class="jm io"> <em class="ki">中级</em> </strong>系列，因为它涉及到理解<strong class="jm io"> SideCar </strong>和 ServiceMesh 的原语，以及它们作为微服务架构主干的重要性。</p><p id="66af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">101 系列中的一些早期博客如下:</p><p id="346f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/data-encryption-101-f0a25db7d913"> <strong class="jm io">数据加密 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/database-replication-101-d148514598a7"><strong class="jm io">数据库复制 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/database-sharding-101-4ef36046c29c"><strong class="jm io">数据库分片 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/caching-strategy-101-3bc974d2a6cd"><strong class="jm io">缓存策略 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" href="http://kubernetes-deployments-101/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Kubernetes 部署 101 </strong></a></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/2adb2c9b0f2f45e1500821b248422950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rokiLAtLQSC9mUkXlK_OUA.png"/></div></div></figure><h1 id="b4c7" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">什么是边车？</h1><p id="5673" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">Sidecar 是沿着应用程序容器运行的独立容器，用于运行隔离的外围任务，如<strong class="jm io">日志记录、代理、配置管理等。</strong>它们共享整个生命周期管理，因为父容器- <strong class="jm io">创建/终止</strong>事件是同步的。</p><p id="5cea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">术语 sidecar ( <strong class="jm io">如上图</strong>所示)来源于附加在摩托车上的 sidecar。它有助于将<strong class="jm io">弹性、可伸缩性和安全性</strong>的非功能性需求卸载到单独的容器中，从而使应用程序能够运行业务用例。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/2b4ece6096aea9e21457dc9bdd65f4ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/format:webp/1*Ox7zubG6ia5UZrVelXqm0Q.jpeg"/></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">边车——核心职责</figcaption></figure><h1 id="c0ec" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">服务网格—基本架构</h1><p id="6e88" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">边车可以作为<strong class="jm io">隔离</strong>部署组件运行，以支持基本的水平需求。然而，在通常情况下，它们是优步服务网架构的一部分。</p><p id="d538" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">服务网格是一个基础设施层，它允许单元间通信，边车充当来自应用单元的<strong class="jm io">入站/出站</strong>流量的中间代理。</p><h2 id="9b1b" class="me kx in bd ky mf mg dn lc mh mi dp lg jv mj mk lk jz ml mm lo kd mn mo ls mp bi translated">成分</h2><ul class=""><li id="a945" class="mq mr in jm b jn lu jr lv jv ms jz mt kd mu kh mv mw mx my bi translated"><strong class="jm io">数据平面</strong> —这由部署为边车的代理组成。这些边车控制微服务之间的所有服务间通信。</li><li id="e4b0" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated"><strong class="jm io">控制平面</strong> —控制平面由帮助服务发现、代理和证书管理等的组件组成。</li></ul><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi ne"><img src="../Images/c6aa3a2c9b0b7d6e5f50e7f33efe1329.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dgsUAGCuivrwzVGv6rgxyA.jpeg"/></div></div></figure><h2 id="75fd" class="me kx in bd ky mf mg dn lc mh mi dp lg jv mj mk lk jz ml mm lo kd mn mo ls mp bi translated">运输流量</h2><ul class=""><li id="6bcf" class="mq mr in jm b jn lu jr lv jv ms jz mt kd mu kh mv mw mx my bi translated"><strong class="jm io">外部入口流量</strong>通过<strong class="jm io">入口控制器</strong>流向给定的 Pod，例如<strong class="jm io"> —服务 a</strong></li><li id="e18b" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated"><strong class="jm io">服务 A </strong>箱上的边车容器拦截该请求。对于有效的请求，它将请求转发给应用程序容器。</li><li id="7759" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">无效的请求会被 sidecar 拒绝，而不会被正在运行的应用程序处理。</li><li id="42a3" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated"><strong class="jm io">服务 A </strong>和<strong class="jm io">服务 B </strong>之间的服务间流量仅通过使用<a class="ae kj" href="https://avinetworks.com/glossary/service-discovery" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">服务发现模式的 sidecar 代理层提供服务。</strong> </a></li><li id="2d8d" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">类似地，外部流量通过<strong class="jm io">出口控制器</strong>从任何给定的服务箱流出。</li></ul><h1 id="a9e0" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">优势</h1><p id="63d4" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">使用边车和服务网为工程团队提供了更多的灵活性。根据应用程序的使用情况，以下是其中的一些优势:</p><ul class=""><li id="5aa7" class="mq mr in jm b jn jo jr js jv nf jz ng kd nh kh mv mw mx my bi translated">SideCars 通过将具有<strong class="jm io">业务逻辑</strong>的 API 与具有<strong class="jm io">基础设施</strong>关注的代码分离，降低了代码的复杂性。</li><li id="6bb4" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">服务网格通过在 sidecar 层实施网络策略来帮助<strong class="jm io">安全通信</strong>，从而将应用层与流氓流量隔离开来。</li><li id="ff0c" class="mq mr in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">Sidecars 可以启用监控代理，如<strong class="jm io"> Splunk、fluentd、</strong>和<strong class="jm io"> Dynatrace </strong>，提高<strong class="jm io">应用</strong>和<strong class="jm io">系统的可观察性</strong>。</li></ul><h1 id="3b17" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">摘要</h1><p id="a137" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">边车和服务网格是现代微服务部署的流行选择。诸如<a class="ae kj" href="https://istio.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> Istio </strong> </a>和<a class="ae kj" href="https://linkerd.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> Linkerd </strong> </a>等技术解决方案是解决不同计算选项上的本地云部署的服务网格需求的一些自动化选择。然而，向整体架构添加多个组件会随着网络流中的每个额外跳引入<strong class="jm io">延迟</strong>和<strong class="jm io">可见性</strong>限制。此外，管理服务网格层需要额外的<strong class="jm io">运营</strong>挑战，以便工程团队在整个<strong class="jm io">架构决策制定</strong>流程中加以考虑。</p><p id="e62a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">如需反馈，请留言至</em><strong class="jm io"><em class="ki">Amit[dot]894[at]Gmail[dot]com</em></strong><em class="ki">或联系</em><a class="ae kj" href="https://about.me/amit_raj" rel="noopener ugc nofollow" target="_blank"><em class="ki">https://about.me/amit_raj</em></a><em class="ki">的任何链接。</em></p></div></div>    
</body>
</html>