# 什么，为什么，什么时候

> 原文：<https://blog.devgenius.io/what-why-when-of-redux-f2c9df4e4515?source=collection_archive---------6----------------------->

![](img/125a5da8783c5fd01cc74a14d1d04119.png)

如果您一直在使用 react，那么您很可能也听说过 redux。有时，他们被说成是一回事，但他们不是。你完全可以构建自己的前端 web 应用程序，而根本不用 redux。在这篇文章中，我们将发现什么是 redux？为什么要用，什么时候用？让我们进入第一个问题。

# Redux 是什么，为什么？

如果您已经使用 react 几个月了，并且熟悉类和函数组件，那么您必须熟悉如何在这些组件之间传递数据，可能是使用 props 或 hooks。如果你知道这么多，太好了！这对我们来说容易多了。如果没有，我建议不要继续这篇文章，先了解一下基础知识。看来你已经决定留下来了。那我们开始吧。Redux 为我们做了类似于 props 和 hooks 在类和功能组件中做的事情。根据官方文件:

> Redux 是一个模式和库，用于管理和更新应用程序状态，使用称为“动作”的事件。

在这个定义中有很多东西需要解开，但是有一点我们可以肯定的是，它在 props 或 hooks 用来做什么的基础上做了一些类似的事情，例如处理应用程序的状态。但是如果我们已经有了这样的东西，那么我们为什么还需要 Redux 呢？好问题，redux 以更有组织的方式处理状态。Redux 确保状态不会自己改变，它只能作为特定动作的结果而改变。但是我们正在谈论的这个行动是什么呢？首先我们需要理解什么是动作，同时我们将通过一个例子来理解 hooks 和 Redux 如何不同地处理状态。
让我们举一个每当按钮被按下时在屏幕上产生一个随机数的例子。我们在这里使用钩子来处理状态。

类似于 Redux 世界，这里我们可以说动作是按钮按压。
现在我们将使用 Redux 实现同一个示例，并描述在这个过程中遇到的所有组件。请记住，它可能看起来有点沉重，因为许多新的信息会扔给你，但一旦你掌握了它，你会意识到解决方案的简单性。

## 行动

redux 中的 Action 是一个普通的 javascript 对象。它有一个描述操作的属性类型，通常在执行操作时，有效负载会返回。在 redux 中，动作是由动作创建者返回的。

在这里，我们做的事情与我们用钩子做的事情相似，但是动作是按照 redux 以结构化的方式定义的，动作创建者“generateRandom”返回动作。在 Redux 世界中，返回动作的函数被称为动作创建者。
好的，就这些吗？哦，不！这只是开始。redux 最重要的部分大概就是存储了。开始吧。

## 商店

商店负责处理系统的当前状态，并将其发送给减速器。顾名思义，store 存储系统的状态。这是转向 redux 的主要原因之一，因为单个组件负责处理系统的状态，使其成为一个集中的过程，而不是一个分布式的过程。当调度一个动作时，存储获取该动作，并将先前的状态和该动作提供给所有 reducers。

等等！但是什么是减速器呢？别担心，我们将在下一个话题中讨论这个问题。

## 还原剂

到目前为止，我们已经讨论了动作，即一些可能导致状态和存储发生变化的事件，存储是负责存储状态的部分。但是谁改变了国家的变化呢？很明显，减压器。每当一个动作被分派(即执行)时，存储将该动作和先前的状态传递给所有的缩减器。然后 reducers 检查这个动作是否与它有关，如果是，那么它可以返回一个新的状态，否则旧的就接收一个。继续我们生成随机数的例子，动作的缩减器看起来如下所示:

## 派遣

我不知道你是否注意到了，但是在我们几乎所有的定义中，调度是一个经常使用的术语。请记住，在库中没有什么是自动发生的，当我们说存储将动作分派给 reducers 时，这不是魔法，这是我们需要做的事情。我们只需将一个动作传递给调度函数 is redux 就可以做到这一点。下面，我们将动作创建者作为参数传递给调度函数，我们知道调度函数将返回我们的动作。该动作将由存储连同先前的状态一起分派给所有的缩减器，并且将基于该动作生成新的状态。

```
dispatch(generateRandom())
```

# 什么时候 Redux？

当我们使用道具或钩子的时候，一切都很好，为什么我们要增加一个额外的层并使用 Redux 呢？虽然完全没有必要使用 Redux，但它确实使状态管理相对容易。因为我们是在全局范围内处理状态，而不是在组件级别，所以不同组件与系统状态的交互变得更加容易。在小型应用程序中，钩子或 props 可能是更好的选择，而在需要频繁改变状态的大中型应用程序中，redux 可能是一种更容易的方法。当你开始构建更大的应用程序时，你会意识到状态管理变得多么不同，一个组件改变状态，而另一个组件监听它，在你意识到这一点之前，你就掉进了一个兔子洞，有许多同步调用在我们的堆栈中挂起，你不知道你是如何到达那里的。这基本上总结了我们的快速还原教程。

如果你觉得这篇文章有用，别忘了鼓掌。:D

全随机生成器代码:[https://github . com/archi 14/redux-react-random-number-generator](https://github.com/archi14/redux-react-random-number-generator)