<html>
<head>
<title>Getting Started With The Twitch API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Twitch API 入门</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/getting-started-with-the-twitch-api-855d481471b4?source=collection_archive---------4-----------------------#2022-07-25">https://blog.devgenius.io/getting-started-with-the-twitch-api-855d481471b4?source=collection_archive---------4-----------------------#2022-07-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="60dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">问候书呆子👋，我最近开始喜欢摆弄 Twitch API，我认为这值得与你们分享，这样你们就可以构建自己的下一个由 Twitch 驱动的项目</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/96e0acb59caf3061ed4fc9f8f75b2de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U3LF6M18fHZKdMNl"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">卡斯帕·卡米尔·鲁宾在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="f49d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">深度 TWITCH API</strong></p><p id="e45b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Twitch 提供了各种 API 以及它们提供的特定服务，因此要更好地了解可用选项，请查看<a class="ae ky" href="https://dev.twitch.tv/docs/api/" rel="noopener ugc nofollow" target="_blank">此链接</a>，要跟随我，您需要参考<a class="ae ky" href="https://dev.twitch.tv/docs/api/reference" rel="noopener ugc nofollow" target="_blank">此链接</a></p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="7f88" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">首先，让我们创建一个 TWITCH 应用程序</strong></p><p id="562e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了使用这些 API，我们需要创建一个应用程序，这样我们就可以获得向它们的端点发出请求所需的凭证</p><p id="bd50" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个过程很简单，所以让我们开始吧，不要再浪费时间了</p><ul class=""><li id="407c" class="lg lh in jm b jn jo jr js jv li jz lj kd lk kh ll lm ln lo bi translated">前往<a class="ae ky" href="https://dev.twitch.tv/" rel="noopener ugc nofollow" target="_blank"> Twitch 开发者门户</a>，点击右上角的登录 Twitch</li><li id="5678" class="lg lh in jm b jn lp jr lq jv lr jz ls kd lt kh ll lm ln lo bi translated">在同一位置点击“您的控制台”</li><li id="e5b7" class="lg lh in jm b jn lp jr lq jv lr jz ls kd lt kh ll lm ln lo bi translated">找到并单击“注册您的应用程序”,您应该看到这个表单</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/b8bd8572b69f937b82df2d82774ff02b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKV5fFCEc9mVyCHgaIvegA.png"/></div></div></figure><p id="649f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于 Oauth 重定向，它可以是任何链接，因为我们没有使用 twitch 特性实现任何登录，对于类别，您可以选择“聊天机器人”</p><ul class=""><li id="34a6" class="lg lh in jm b jn jo jr js jv li jz lj kd lk kh ll lm ln lo bi translated">现在，完成所有设置后，当您单击应用程序时，应该会看到您的客户端 id 和客户端密码，在下一部分中，我们将获取 oauth 令牌，这是身份验证过程的重要部分</li></ul></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="2f38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lv">得到我们的 OAuth 令牌</em> </strong></p><p id="dd98" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一部分之前，让我们设置我们的开发环境，这将是最小的，因为我们并不真正构建任何特定的东西</p><ul class=""><li id="23d6" class="lg lh in jm b jn jo jr js jv li jz lj kd lk kh ll lm ln lo bi translated">终端——废话</li><li id="737f" class="lg lh in jm b jn lp jr lq jv lr jz ls kd lt kh ll lm ln lo bi translated"><code class="fe lw lx ly lz b">curl</code>已安装</li><li id="9414" class="lg lh in jm b jn lp jr lq jv lr jz ls kd lt kh ll lm ln lo bi translated"><code class="fe lw lx ly lz b">jq</code>因为它将帮助我们将响应解析成格式优美的 json</li></ul><p id="9f4a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们可以启动我们的终端并开始输入一些命令😝</p><p id="58f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要获得 OAuth 令牌，我们需要向<code class="fe lw lx ly lz b">https://id.twitch.tv/oauth2/token</code>发出 POST 请求，请求体中包含以下参数</p><ol class=""><li id="5e78" class="lg lh in jm b jn jo jr js jv li jz lj kd lk kh ma lm ln lo bi translated"><code class="fe lw lx ly lz b">client_id</code>您可以从 twitch dev 控制台获得</li><li id="acba" class="lg lh in jm b jn lp jr lq jv lr jz ls kd lt kh ma lm ln lo bi translated"><code class="fe lw lx ly lz b">client_secret</code>同上</li><li id="b868" class="lg lh in jm b jn lp jr lq jv lr jz ls kd lt kh ma lm ln lo bi translated"><code class="fe lw lx ly lz b">grant_type</code>应设置为<code class="fe lw lx ly lz b">client_credentials</code></li></ol><p id="8539" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在用<code class="fe lw lx ly lz b">curl</code>来表达这样的请求，应该是这样的</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mb"><img src="../Images/137e455ad310ded5c2f6bf9b693fa0f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VdRG5Nv_uTjJ-kaGXfC1hg.png"/></div></div></figure><p id="8853" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lv">当然，在我发布之前，我会删除这个应用程序，所以不要想；)</em></p><p id="c50f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们有了自己的承载令牌/ OAuth 令牌和客户端 id，我们可以看看几个端点:)</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="d98a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lv">现在获得顶级游戏</em> </strong></p><p id="8133" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果我们看一下<a class="ae ky" href="https://dev.twitch.tv/docs/api/reference" rel="noopener ugc nofollow" target="_blank"> API 参考</a>，我们可以搜索这么多的端点，每个端点都有非常详细的说明和示例，所以我们将选择两个端点，因为这个博客都是关于“入门”的部分，所以你可以自己尝试</p><p id="6d67" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了获得目前的热门游戏，我们将提出以下请求</p><pre class="kj kk kl km gt mc lz md me aw mf bi"><span id="95f2" class="mg mh in lz b gy mi mj l mk ml">curl  <a class="ae ky" href="https://api.twitch.tv/helix/games/top" rel="noopener ugc nofollow" target="_blank">https://api.twitch.tv/helix/games/top</a> -H "Authorization:Bearer &lt;your oauth token&gt;" -H "Client-Id:&lt;your client id&gt;" | jq '.data[]'</span></pre><p id="a7ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为所有的端点都在一个名为<code class="fe lw lx ly lz b">data</code>的数组中返回一个 JSON 响应，我们把它传递给<code class="fe lw lx ly lz b">jq</code>，现在让我们看看这个响应，看看如何使用<code class="fe lw lx ly lz b">jq</code>访问内部属性</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lu"><img src="../Images/2d09fed6dc2bb5f296bbd532814d2122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPf3mR5Cc5MU1Xvv5NWSrw.png"/></div></div></figure><p id="72ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个非常优雅的响应，非常容易解析，所以让我们以访问<code class="fe lw lx ly lz b">name</code>属性为例</p><pre class="kj kk kl km gt mc lz md me aw mf bi"><span id="b85e" class="mg mh in lz b gy mi mj l mk ml">curl  <a class="ae ky" href="https://api.twitch.tv/helix/games/top" rel="noopener ugc nofollow" target="_blank">https://api.twitch.tv/helix/games/top</a> -H "Authorization:Bearer &lt;your oauth token&gt;" -H "Client-Id:&lt;your client id&gt;" | jq '.data[].name'</span></pre><p id="83b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">很简单，对吧？如果你做过 javascript 和解析 JSON，你会非常熟悉这个</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="b5e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lv">获取特定游戏的信息</em> </strong></p><p id="de28" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们将请求这个端点`<code class="fe lw lx ly lz b">https://api.twitch.tv/helix/games</code>,并向它提供我们之前响应中的一个游戏的 ID，例如 Dota 2，看看我们得到了什么信息</p><pre class="kj kk kl km gt mc lz md me aw mf bi"><span id="780d" class="mg mh in lz b gy mi mj l mk ml">curl <a class="ae ky" href="https://api.twitch.tv/helix/games?id=29595" rel="noopener ugc nofollow" target="_blank">https://api.twitch.tv/helix/games?id=29595</a> -H "Authorization: Bearer &lt;oauth token here&gt;" -H "Client-Id:&lt;your client id&gt;" | jq '.'</span></pre><p id="b29e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">回应应该是这样的</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/2bb6b5793c023bda5631089e0dfff7f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bSEf1kFfQA2zq-H92KOe6A.png"/></div></div></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="9a9f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这应该足以开始使用 Twitch API，因为认证和授权过程对于一些新手来说有点棘手，但是文档内容非常丰富，所以不要忽略它</p><p id="7de0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢您对我的博客感兴趣，并花时间阅读本文，快乐编码</p></div></div>    
</body>
</html>