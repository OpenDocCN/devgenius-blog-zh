<html>
<head>
<title>Command for how to display Kubernetes pods with their nodes with kubectl</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于如何用 kubectl 显示 Kubernetes pods 及其节点的命令</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/command-for-how-to-display-kubernetes-pods-with-their-nodes-with-kubectl-1551602cd9f4?source=collection_archive---------3-----------------------#2021-12-02">https://blog.devgenius.io/command-for-how-to-display-kubernetes-pods-with-their-nodes-with-kubectl-1551602cd9f4?source=collection_archive---------3-----------------------#2021-12-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/bfb3e24d67c64b0b8f81a300519f995f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O_Y7PMknaY4zsmZd0f5HYA.png"/></div></div></figure><p id="026a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可能有兴趣通过 Kubernetes 命令行工具查看 pods 调度了哪些节点，但是没有一个超级简单且容易记忆的快捷方式来实现这一点。</p><p id="be3a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当然，您可以深入研究<code class="fe kw kx ky kz b">Deployment</code>并在<code class="fe kw kx ky kz b">.yaml</code>文件中找到相关信息，但是让我们明智地准备一个命令，以便以一种快速的方式轻松漂亮地输出。</p><p id="320c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">实际上，这个命令与我在以前的一篇文章中使用的命令非常相似，如果您希望学习更多的 Kubernetes 快捷方式，我推荐您阅读这篇文章:</p><div class="la lb gp gr lc ld"><a href="https://medium.com/cloud-native-the-gathering/useful-kubectl-commands-and-scripts-you-can-use-in-your-day-to-day-kubernetes-work-91131ce11e3c" rel="noopener follow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd ir gy z fp li fr fs lj fu fw ip bi translated">您可以在日常 Kubernetes 工作中使用的有用的 kubectl 命令和脚本</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">你是不是经常使用 kubectl，想节省时间？这可能是给你的。</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">medium.com</p></div></div><div class="lm l"><div class="ln l lo lp lq lm lr jw ld"/></div></div></a></div><p id="b0d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但不管怎样，让我们在这里找到答案。你会想要利用<code class="fe kw kx ky kz b">-o</code>旗。那是<code class="fe kw kx ky kz b">--output</code>的简称，也管用。但不管怎样，这控制了<code class="fe kw kx ky kz b">kubectl</code>的输出。</p><p id="5bb2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将在这里做一些“魔术”，定义当我们运行<code class="fe kw kx ky kz b">kubectl get pod</code>时，我们到底想要输出哪些列。顺便说一下，我们正在使用它，因为它有我们想要的相关 pod 信息；目标是添加更多信息，特别是每个 pod 的节点。</p><p id="1e08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">不管怎样，我们可以运行以下代码:</p><pre class="ls lt lu lv gt lw kz lx ly aw lz bi"><span id="da7a" class="ma mb iq kz b gy mc md l me mf">kubectl get pod -o=custom-columns=NAME:.metadata.name,STATUS:.status.phase,NODE:.spec.nodeName</span></pre><p id="964c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将给我们带来惊人的输出，比如:</p><pre class="ls lt lu lv gt lw kz lx ly aw lz bi"><span id="5168" class="ma mb iq kz b gy mc md l me mf">NAME                        STATUS    NODE<br/>myservice-123456789-3abcd   Running   ip-10-01-23-456.ec2.internal<br/>myservice-123456789-3abce   Running   ip-10-01-24-567.ec2.internal</span></pre><p id="3fd5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请注意，我实际上在那里输入了 pod 的状态。我发现拥有这些信息通常是很好的，但是如果您<em class="mg">只是</em>想要 pod 和节点的名称，您可以去掉这些信息:</p><pre class="ls lt lu lv gt lw kz lx ly aw lz bi"><span id="04c9" class="ma mb iq kz b gy mc md l me mf">kubectl get pod -o=custom-columns=NAME:.metadata.name,NODE:.spec.nodeName</span></pre><p id="0a64" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还有，别忘了不一定要写<code class="fe kw kx ky kz b">pod</code>。您可以使用<code class="fe kw kx ky kz b">po</code>作为速记:</p><pre class="ls lt lu lv gt lw kz lx ly aw lz bi"><span id="2a81" class="ma mb iq kz b gy mc md l me mf">kubectl get po -o=custom-columns=NAME:.metadata.name,NODE:.spec.nodeName</span></pre><p id="7d27" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">此外，让我们更深入地了解另一个专业技巧:按列名排序！假设我们想按节点排序。我们可以这样实现:</p><pre class="ls lt lu lv gt lw kz lx ly aw lz bi"><span id="d687" class="ma mb iq kz b gy mc md l me mf">kubectl get po -o=custom-columns=NAME:.metadata.name,NODE:.spec.nodeName <!-- -->--sort-by=.spec.nodeName</span></pre><p id="b226" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样，我们就可以按字母顺序排列节点名。例如，它有助于理解哪个 pod 被调度到哪个节点。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><div class="ls lt lu lv gt ld"><a href="https://tremaineeto.medium.com/membership" rel="noopener follow" target="_blank"><div class="le ab fo"><div class="lf ab lg cl cj lh"><h2 class="bd ir gy z fp li fr fs lj fu fw ip bi translated">通过我的推荐链接加入媒体</h2><div class="lk l"><h3 class="bd b gy z fp li fr fs lj fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="ll l"><p class="bd b dl z fp li fr fs lj fu fw dk translated">tremaineeto.medium.com</p></div></div><div class="lm l"><div class="mo l lo lp lq lm lr jw ld"/></div></div></a></div></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="4069" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mg">更多内容尽在</em><a class="ae mp" href="http://blog.devgenius.io" rel="noopener ugc nofollow" target="_blank"><em class="mg">blog . dev genius . io</em></a><em class="mg">。</em></p></div></div>    
</body>
</html>