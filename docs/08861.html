<html>
<head>
<title>A Cooler way of Validating User Input in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">一种在 Android 中验证用户输入的更酷的方式</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-cooler-way-of-validating-user-input-in-android-45f4a4574431?source=collection_archive---------5-----------------------#2022-07-15">https://blog.devgenius.io/a-cooler-way-of-validating-user-input-in-android-45f4a4574431?source=collection_archive---------5-----------------------#2022-07-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/186c0b08fdafcc17d5bb40e95e723748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iVeIOs2_TkGwamPMpBmFHw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">来源:<a class="ae jz" href="https://www.epo.org/about-us/services-and-activities/international-european-cooperation/international-bilateral/validation-system.html" rel="noopener ugc nofollow" target="_blank">https://www . EPO . org/about-us/services-and-activities/international-European-cooperation/international-binary/validation-system . html</a></figcaption></figure><p id="b950" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">验证用户输入在几乎所有的应用程序中都很常见，验证输入的方式在几乎所有的应用程序中几乎都是相似的——太多 if 和 else 了，对吗？</p><p id="5373" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在某些情况下，你必须根据某个<strong class="kc io">编辑文本</strong>中的输入来启用或禁用某个按钮是否有效。甚至更糟，让我们看看如何👇？</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="4f6d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如你所见，你必须检查两个监听器中的相同条件，这违反了<a class="ae jz" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank"> DRY </a>原则。</p><p id="8fa2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">不仅<a class="ae jz" href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="noopener ugc nofollow" target="_blank">干</a>这也是违反<a class="ae jz" href="https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle#:~:text=In%20object%2Doriented%20programming%2C%20the,without%20modifying%20its%20source%20code." rel="noopener ugc nofollow" target="_blank">开闭原则</a>👇</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="0786" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如你所见，当你在布局中添加一个新的<strong class="kc io"> EditText </strong>时，你需要在所有条件下改变所有现有的代码断点。</p><p id="4c59" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这不仅是一个糟糕的模式，而且看起来也很难看，因为你必须在所有的 EditTexts 上设置一个<strong class="kc io"> TextWatcher </strong>，然后检查文本在那个 EditTexts 中是否有效，所有其他的 EditTexts 也使用相同的 if 检查。</p><blockquote class="le lf lg"><p id="aef5" class="ka kb lh kc b kd ke kf kg kh ki kj kk li km kn ko lj kq kr ks lk ku kv kw kx ig bi translated">我们能做得更好吗？</p></blockquote><h1 id="d6ed" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">介绍 ValidationNotifierEditText</h1><p id="8684" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">我创建了一个小的库来简化这个，它将减少很多样板文件，使它不容易出错，并且它遵循干燥和开放-封闭的原则。最重要的是，你可以有一个可选的编辑文本边框和圆角，而不用设置背景。👇</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/6531c1385070b65b67e43da54a955b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*oWUM7tcNZt6izaMLpwYZfQ.gif"/></div></figure><p id="5717" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看它是如何工作的👇</p><pre class="ky kz la lb gt mp mq mr ms aw mt bi"><span id="4d86" class="mu lm in mq b gy mv mw l mx my">&lt;com.abhinav.chouhan.validationnotifieredittext.ValidationNotifierEditText<br/>    android:id="@+id/vne"<br/>    app:vne_borderColor="@android:color/holo_blue_dark"<br/>    app:vne_borderWidth="2dp"<br/>    app:vne_cornerRadius="5dp"<br/>    app:vne_giveBorder="true"                                <br/>    android:textColorHint="@android:color/darker_gray"<br/>    app:vne_validBorderColor="@android:color/holo_blue_dark"<br/>    app:vne_invalidBorderColor="@android:color/black"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content<br/>    android:hint="enter only numbers"<br/>    app:vne_validatorRegex="[1-9]+"<br/>   /&gt;</span></pre><p id="59a1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你必须在 xml 中传递一个<strong class="kc io"> <em class="lh">正则表达式</em> </strong>正则表达式在内部被检查，当文本变得有效或无效时，你会得到通知👇</p><pre class="ky kz la lb gt mp mq mr ms aw mt bi"><span id="6465" class="mu lm in mq b gy mv mw l mx my">val validationNotiferEditText = findViewById(R.id.vne)<br/>       validationNotifierEditText.addValidationChangeListener(object : ValidationNotifierEditText.ValidationChangeListener{<br/>        //called when text is valid<br/>              override fun onBecomeValid(validationNotifierEditText: ValidationNotifierEditText) {<br/>            <br/>              }<br/>        //called when text is invalid<br/>             override fun onBecomeInvalid(validationNotifierEditText: ValidationNotifierEditText) {<br/>          }<br/>    })<br/></span></pre><h2 id="0bb3" class="mu lm in bd ln mz na dn lr nb nc dp lv kl nd ne lz kp nf ng md kt nh ni mh nj bi translated">在一个地方获得所有验证事件</h2><p id="efec" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">如果您只需启用或禁用一个按钮，您不必在所有编辑文本上设置 TextWatcher。您可以在 xml 中放入一个特殊的视图，并给它所有其他 EditTexts 的 id。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="bee2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当全部有效和全部无效时，你将得到回调。👇</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="6822" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用它，你不需要检查任何 if 条件，你也可以在未来的布局中添加或删除尽可能多的 EditText，并且不会中断现有的代码。</p><blockquote class="le lf lg"><p id="d9f9" class="ka kb lh kc b kd ke kf kg kh ki kj kk li km kn ko lj kq kr ks lk ku kv kw kx ig bi translated">在项目级<strong class="kc io">中添加<em class="in">build . gradle</em>T21】</strong></p><p id="bd47" class="ka kb lh kc b kd ke kf kg kh ki kj kk li km kn ko lj kq kr ks lk ku kv kw kx ig bi translated"><code class="fe nk nl nm mq b">allprojects {<br/> repositories {<br/> …<br/> maven { url ‘<a class="ae jz" href="https://jitpack.io'" rel="noopener ugc nofollow" target="_blank">https://jitpack.io'</a> }<br/> }<br/>}</code></p><p id="cba2" class="ka kb lh kc b kd ke kf kg kh ki kj kk li km kn ko lj kq kr ks lk ku kv kw kx ig bi translated">添加模块级<strong class="kc io"> build.gradle </strong></p><p id="9587" class="ka kb lh kc b kd ke kf kg kh ki kj kk li km kn ko lj kq kr ks lk ku kv kw kx ig bi translated"><code class="fe nk nl nm mq b">dependencies { <br/> <br/> implementation ‘com.github.AbhinavChauhan97:ValidationNotifierEditText:1.3.7’ // use latest vesion <br/> }</code></p></blockquote><p id="819c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请在我的<a class="ae jz" href="https://github.com/AbhinavChauhan97/ValidationNotifierEditText" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> github </strong> </a>找到源代码，了解更多</p><p id="93ae" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">谢谢</p><p id="b6be" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">祝你愉快😊</p></div></div>    
</body>
</html>