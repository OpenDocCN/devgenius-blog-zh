<html>
<head>
<title>How to use redux toolkit with using slice, react, typescript(First half part, basic)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 redux toolkit 和使用 slice、react、typescript(前半部分，基础)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-use-redux-toolkit-with-using-slice-react-first-half-part-basic-2bc18a42fae9?source=collection_archive---------2-----------------------#2022-02-21">https://blog.devgenius.io/how-to-use-redux-toolkit-with-using-slice-react-first-half-part-basic-2bc18a42fae9?source=collection_archive---------2-----------------------#2022-02-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e543ca5e72793b54c31da480cbbd5351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NWwBHMkf--2ymnc-Zhhs_g.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来自<a class="ae jz" href="https://blog.dastasoft.com/posts/how-to-get-better-easier-state-management-redux-toolkit" rel="noopener ugc nofollow" target="_blank">https://blog . dastasoft . com/posts/how-to-get-better-easy-state-management-redux-toolkit</a></figcaption></figure><p id="de0e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">目的</strong></p><p id="b8c7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你想创建一个更复杂的应用程序，你应该添加状态管理的特性。那么，如何管理应用程序的状态呢？嗯，其实你有几种方法，有用的是 redux。我决定分享我关于 redux 分成两部分的知识，这是基本的和真实的例子，因为 redux 是一个有点混乱的方法。因此，我将在本文中分享我的基本知识以及如何创建一个基本的计数器应用程序，并在下一篇文章中分享如何创建一个更复杂的应用程序。</p><p id="2e13" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">redux 是什么？</strong></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="2e47" class="lh li in ld b gy lj lk l ll lm">Redux is an open-source JavaScript library for managing and centralizing application state. It is most commonly used with libraries such as React or Angular for building user interfaces. Similar to Facebook’s Flux architecture, it was created by Dan Abramov and Andrew Clark</span></pre><p id="05d1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以上句子摘自维基百科。据我所知，过去的 redux 是最复杂的。redux 数据流如下所示</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/1e2d9e9bca1aaa65641d89b11ddcd69c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*TkTwGjhbD-SUF3V7iwC-yw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来自<a class="ae jz" href="https://medium.com/@aurelie.lebec/redux-and-react-native-simple-login-example-flow-c4874cf91dde" rel="noopener">https://medium . com/@ aurelie . lebec/redux-and-react-native-simple-log in-example-flow-c 4874 cf 91 DDE</a></figcaption></figure><p id="2b52" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">基本上，Redux 在保持状态纯净和不可变方面有点混乱，因为如果您可以直接更改存储日期，这将会出现一些问题。比如你改变了数据库上珍贵的客户端数据，这对你的公司是一个很大的负面影响，所以 Redux 不允许直接改变状态，他们允许你用“action”、“dispatch”、“reducer”来改变状态。</p><p id="ead4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">redux 为什么有用？</strong></p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lo"><img src="../Images/59d309cc8365a2b93c0d40c6f28b8322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2cdoBQgqa3oeCm6owE20TA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来自<a class="ae jz" href="https://blog.codecentric.de/en/2017/12/developing-modern-offline-apps-reactjs-redux-electron-part-3-reactjs-redux-basics/" rel="noopener ugc nofollow" target="_blank">https://blog . code centric . de/en/2017/12/developing-modern-offline-apps-react js-redux-electronic-part-3-react js-redux-basics/</a></figcaption></figure><p id="0957" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Redux 允许你从任何地方访问你的状态，这就是为什么 redux 被认为是一个非常有用的工具。在过去，当涉及到基本反应时，您可以通过使用道具来传递状态旁边的状态。换句话说，即使几乎所有的状态都不使用这个传递的状态，也应该传递状态以达到目的地。</p><p id="f4dc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可能知道，现代的 react 有几种方法来传递你的状态，比如“useReducer”、“useContext”。所以有人说我们不需要 redux 了(甚至我的前端开发人员也说她现在避免使用 redux)。然而，这不是一个真实的事实，因为如果你想使用 useContext 和 useReducer 来使应用程序变得复杂，你应该使用几个 Context 和 Reducer，这样你的应用程序或 index.js 可能会有很多“提供者”，这有点混乱。</p><p id="380c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">什么是 redux toolkit？</strong></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="a3f4" class="lh li in ld b gy lj lk l ll lm"><a class="ae jz" href="https://redux-toolkit.js.org/" rel="noopener ugc nofollow" target="_blank">Redux Toolkit</a> is our official, opinionated, batteries-included toolset for efficient Redux development. It is intended to be the standard way to write Redux logic, and we strongly recommend that you use it.</span><span id="11ba" class="lh li in ld b gy lp lk l ll lm">It includes several utility functions that simplify the most common Redux use cases, including store setup, defining reducers, immutable update logic, and even creating entire "slices" of state at once without writing any action creators or action types by hand. It also includes the most widely used Redux addons, like Redux</span></pre><p id="4f92" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以上句子摘自官方网站。基本上 redux toolkit 是一个工具箱，其中包含了许多使用 redux 的有用工具。所以，我试着分享我的知识来使用这个工具。</p><p id="a824" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">Redux 工具包中的“切片”是什么？</strong></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="c5e9" class="lh li in ld b gy lj lk l ll lm">A function that accepts an initial state, an object of reducer functions, and a "slice name", and automatically generates action creators and action types that correspond to the reducers and state.</span><span id="b678" class="lh li in ld b gy lp lk l ll lm">This API is the standard approach for writing Redux logic.</span><span id="0602" class="lh li in ld b gy lp lk l ll lm">Internally, it uses <a class="ae jz" href="https://redux-toolkit.js.org/api/createAction" rel="noopener ugc nofollow" target="_blank">createAction</a> and <a class="ae jz" href="https://redux-toolkit.js.org/api/createReducer" rel="noopener ugc nofollow" target="_blank">createReducer</a>, so you may also use <a class="ae jz" href="https://immerjs.github.io/immer/" rel="noopener ugc nofollow" target="_blank">Immer</a> to write "mutating" immutable updates:</span></pre><p id="305f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以上句子也来自官方网站。这是一个有用的工具，创造行动和减速器容易得多。那么，我们该如何利用它呢？</p><p id="c6eb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">如何将 redux 工具包与 react 配合使用(通过创建计数器 app)。</strong></p><p id="9e93" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">app gif(一个最简单的计数器 app)。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/0fb95cadc4dec93269a5c77095f1609a.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*Eg05XU7Iy6FRi14b4GtEPQ.gif"/></div></figure><p id="c4a8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">步骤</strong></p><ol class=""><li id="5ed1" class="lr ls in kc b kd ke kh ki kl lt kp lu kt lv kx lw lx ly lz bi translated">创建 react 应用程序。在我的例子中，我使用下面的命令用 typescript install 创建了这个应用程序</li></ol><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f921" class="lh li in ld b gy lj lk l ll lm">npx create-react-app “YOUR APP NAME” --template typescript</span></pre><p id="d464" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.使用以下命令安装 redux toolkit。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b2d2" class="lh li in ld b gy lj lk l ll lm">npm install @reduxjs/toolkit</span></pre><p id="8d5f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.如果要使用 typescript，应该像下面这样添加 tsconfig.json，否则跳过这一部分。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="6a8c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">4.创建如下所示的“counterSlice.tsx(或 js，jsx)”文件。从 reduxtoolkit 导入 createSlice，并使用它。您应该使用 createSlice 作为导出变量，设置名称和初始状态，减少。正如我写的 reducer 是用来“创建新状态”的，所以你应该加上你想如何改变你的状态。所以在我的例子中，由于我想“加数”和“减数”，所以我创建了两个减速器。如果你设置了 action.payload，当你使用这个动作时，你可以设置你想要的数字，所以我建议你使用 payload 而不是实数，如“1 ”,你可以导出每个动作和 reducers，如下所示。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="41c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">5.如下图创建“store.tsx(或 js，jsx)”。您需要导入您在步骤 4 中创建的“configureStore”和 counterReducer，并如下设置这个 Reducer。实际上，如果你没有选择使用 typescript，你不需要导入 useSelecter 和 TypedUseSelectorHook，也不需要导出，因为这是为了在 redux-toolkit 中正确使用 typescript。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="5a43" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">6.设置 provider 并存储在“index.tsx(或 js，jsx)”中，如下所示。这个提供商意味着提供商店的整个应用程序的信息。换句话说，你可以在你的应用中的任何地方使用这个商店的信息。注意:由于我创建了 redux 文件夹来存放 redux 相关的文件，所以它的路径略有不同(不是”。/store“但是”。/redux/store”)</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="4f48" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">7.通过使用 useSelector 和 useDispatch，使用您在“App.tsx(或 js，jsx)”中创建的 slice。useSelector 可用于显示应用程序中的商店信息，useDisplay 可用于通过使用 slice 来更改您的状态。在这种情况下，您设置了有效负载，因此如果您在 additional 的花括号内使用“2”而不是“1”，您可以将步长更改为 2 ex(0，2，4，6)。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="8e05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">8.搞定了。！你可以创建你的基本计数器应用程序。</p><p id="4bdf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">结论</strong></p><p id="d407" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你使用 redux-toolkit，那么创建状态管理功能要比过去的 redux 容易得多，因为如果我们试图使用过去的 redux，我们需要准备每个 action、reducer 文件，并使用“connect”函数来连接存储。我知道这仍然很复杂，但这是一个非常强大的工具来管理你的应用程序中的状态。正如我在《目的》中写的，这是文章的前半部分。所以在我的下一篇文章中，我会解释一个更复杂的应用程序来更有效地使用 redux-toolkit。</p><p id="47c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">参考</strong></p><p id="5238" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">redux 官方网站:【https://redux.js.org/ T2】</p><p id="2c05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">redux take-kit 官方网站:【https://redux-toolkit.js.org/usage/usage-with-typescript T4】</p><p id="228c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Redux 已死:Redux 工具包万岁://<a class="ae jz" href="http://devsday.ru/blog/details/63269" rel="noopener ugc nofollow" target="_blank">devsday.ru/blog/details/63269</a></p><p id="23b5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Redux 和 React Native，简单登录示例流程:<a class="ae jz" href="https://medium.com/@aurelie.lebec/redux-and-react-native-simple-login-example-flow-c4874cf91dde" rel="noopener">https://medium . com/@ aurelie . lebec/redux-and-React-Native-simple-log in-example-flow-c 4874 cf 91 DDE</a></p><p id="85e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi">Redux 入門者向け初めてのRedux ToolkitとRedux Thunkの非同期処理: <a class="ae jz" href="https://reffect.co.jp/react/redux-toolkit" rel="noopener ugc nofollow" target="_blank">https://reffect.co.jp/react/redux-toolkit</a></p><p id="4bc3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi">Redux-toolkitを使ったStoreをtypescriptで作ってみる: <a class="ae jz" href="https://zenn.dev/engstt/articles/293e7420c93a18" rel="noopener ugc nofollow" target="_blank">https://zenn.dev/engstt/articles/293e7420c93a18</a></p><p id="b92d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢您的阅读！！</p></div></div>    
</body>
</html>