<html>
<head>
<title>SwiftUI Tutorial: Working with List using ForEach</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI 教程:使用 ForEach 处理列表</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/swiftui-tutorial-working-with-list-using-foreach-a4b7451fbcf0?source=collection_archive---------5-----------------------#2022-01-11">https://blog.devgenius.io/swiftui-tutorial-working-with-list-using-foreach-a4b7451fbcf0?source=collection_archive---------5-----------------------#2022-01-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="76cb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何使用 ForEach 和 Identifiable</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8b6b74f18a7af46ee012f601cb1ef931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x8Y4uxBHvGzXF53zHvekng.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图一。</figcaption></figure><p id="0cef" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">该列表允许显示组织在单个列中的数据行。它的工作方式与 UIKit 中的 UITableView 相同，后者是 iOS 中最常见的 UI 控件。它的主要用途是呈现数据列表，常见于基于内容或基于新闻的应用程序中。</p><p id="2fa7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果您以前有过使用 UITableView 的经验，您就会知道创建一个基本表格有多繁琐。用定制单元构建更困难。好的一面是，SwiftUI 的 list 可以通过简化过程，只用几行代码就能执行它。即使是定制的细胞也只需要很少的努力。</p><blockquote class="lr ls lt"><p id="bd5c" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated"><em class="iq">本教程是我的</em> <a class="ae ly" href="https://arc-sosangyo.medium.com/list/swiftui-tutorial-03734e631240" rel="noopener"> <em class="iq"> SwiftUI 教程</em> </a> <em class="iq">系列的一部分。</em></p></blockquote><p id="f7e0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们创建一个新项目或打开一个现有项目来练习。如果你需要一步一步的过程，你可以使用这个<a class="ae ly" rel="noopener ugc nofollow" target="_blank" href="/introduction-to-swiftui-creating-new-project-9adc502e1804">链接</a>。</p><h1 id="83e4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">基本列表</h1><p id="36e9" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">为了理解列表是如何工作的。让我们先开始创建一个简单的。下面的代码显示了使用 List 是多么简单。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="aa11" class="nb ma iq mx b gy nc nd l ne nf">struct ContentView: View {<br/>    <br/>    var body: some View {<br/>            <br/>        List {<br/>            Text("Content 1")<br/>            Text("Content 2")<br/>            Text("Content 3")<br/>            Text("Content 4")<br/>            Text("Content 5")<br/>        }<br/>        <br/>    }<br/>    <br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/9903fd54f181cd785e8aecee581fae3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aO9LSSzZJGyIMHLs2-kQzQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图二。SwiftUI 中的列表</figcaption></figure><h1 id="941b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">使用 ForEach</h1><p id="3d7f" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">如果您有一些内容要插入，上面的代码是有效的。但是如果你有成百上千的东西要放呢？手动输入一切不是一个好的编程习惯。更不用说输入大量数据所需的时间和精力了。这就是使用 ForEach 使我们列表中的代码高效的原因。</p><p id="06e6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面的代码显示了如何使用 ForEach 来实现这一点。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="13e2" class="nb ma iq mx b gy nc nd l ne nf">struct ContentView: View {<br/>    <br/>    var body: some View {<br/>            <br/>        List {<br/><br/>            ForEach(1...5, id: \.self) { index in<br/>                Text("Content \(index)")<br/>            }<br/>            <br/>        }<br/>        <br/>    }<br/>    <br/>}</span></pre><p id="7ee3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将给出相同的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/9e323ed85026eeee75102554bde4eb22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcYdJtDqwhtIvgnNaDTJjg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 3。在列表中使用 ForEach</figcaption></figure><p id="7f20" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们可以通过省略索引和使用简写<strong class="kx ir"> <em class="lu"> $0 </em> </strong>来进一步简化代码。这意味着引用范围的第一个参数。这与<a class="ae ly" href="https://arc-sosangyo.medium.com/swift-programming-tutorial-collection-types-arrays-set-and-dictionaries-b22bd8c8ecec" rel="noopener">数组</a>处理索引的方式相同。</p><p id="45d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们还没有完成，我们仍然可以通过让列表处理集合来做得更好。下面是最简单的代码形式:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="1dbc" class="nb ma iq mx b gy nc nd l ne nf">struct ContentView: View {<br/>    <br/>    var body: some View {<br/>            <br/>        List (1...5, id: \.self) {<br/>            Text("Content \($0)")<br/>        }<br/>        <br/>    }<br/>    <br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nh"><img src="../Images/13f3f8248caf82890d3a7f5194497184.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gIWgiw5yWM2HlNdWkii6Ew.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 4。简化代码</figcaption></figure><h1 id="edab" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">理解可识别</h1><p id="308b" class="pw-post-body-paragraph kv kw iq kx b ky mr jr la lb ms ju ld le mt lg lh li mu lk ll lm mv lo lp lq ij bi translated">id 的简称。它的主要目的是唯一地标识每个项目。当你有精致的收藏品时，你会体会到它的用处。例如，既有文本又有图像的项目。</p><p id="66fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们创建一个设计良好的列表，如下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/62726f03e3e4d79c00404784e173c71e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*74VKROKXuW6D1aB8TE25kg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 5。</figcaption></figure><p id="c0c1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是首先，我们需要一些图像。随意使用你喜欢的任何图像。如果你没有这个练习的照片，你可以从<a class="ae ly" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank"> unsplash </a>下载。</p><blockquote class="lr ls lt"><p id="464b" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated">感谢我在本教程中使用的来自 unsplash 的照片的所有者:<strong class="kx ir">安妮·斯普拉特，纳比尔·赛义德，罗伯特·卢克曼，岩田良治，</strong>和<strong class="kx ir"> XPS </strong>。</p></blockquote><p id="9ed2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">确保您将要使用的所有图像都已经在<strong class="kx ir"> <em class="lu"> Assets </em> </strong>目录中。如果这是您第一次处理图像，这个<a class="ae ly" rel="noopener ugc nofollow" target="_blank" href="/swiftui-tutorial-working-with-images-62040c279960">链接</a>为如何在 SwiftUI 中处理图像提供了良好的基础。</p><p id="bce5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们需要做的第一件事是创建一个专用的<a class="ae ly" href="https://arc-sosangyo.medium.com/swift-programming-tutorial-structs-6521663fee84" rel="noopener">结构</a>，在这里我们可以将文本和图像放在一起，然后每一对将被单独识别。在 ContentView 下面写这段代码。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="4778" class="nb ma iq mx b gy nc nd l ne nf">struct Collections {<br/>    var name: String<br/>    var image: String<br/>}</span></pre><p id="2fb7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来我们创建一个<a class="ae ly" href="https://arc-sosangyo.medium.com/swift-programming-tutorial-collection-types-arrays-set-and-dictionaries-b22bd8c8ecec" rel="noopener">数组</a>来存储图片和文本。在 ContentView 中编写以下代码。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="be6c" class="nb ma iq mx b gy nc nd l ne nf">var collections = [<br/><br/>    Collections(name: "Cafe", image: "xps"),<br/>    Collections(name: "Home", image: "annie-spratt"),<br/>    Collections(name: "Commute", image: "nabeel-syed"),<br/>    Collections(name: "Travel", image: "robert-lukeman"),<br/>    Collections(name: "Public", image: "ryoji-iwata")<br/>        <br/>]</span></pre><blockquote class="lr ls lt"><p id="f2e3" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated"><strong class="kx ir">重要提示:</strong>确保将图像更改为您将使用的图像的文件名。如果你不确定怎么做，我推荐你先上这个<a class="ae ly" rel="noopener ugc nofollow" target="_blank" href="/swiftui-tutorial-working-with-images-62040c279960">教程</a>。</p></blockquote><p id="b199" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在制作列表之前，让我们先设计一下行的外观。在结构集合下创建一个单独的结构，并将此代码。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="bf2d" class="nb ma iq mx b gy nc nd l ne nf">struct ImageLabelRow: View {<br/>    <br/>    var collection: Collections<br/><br/>    var body: some View {<br/>        ZStack(alignment: .leading) {<br/>            Image(collection.image)<br/>                .resizable()<br/>                .aspectRatio(contentMode: .fill)<br/>                .frame(height: 150)<br/>                .cornerRadius(20)<br/>                .overlay(<br/>                    Rectangle()<br/>                        .foregroundColor(.black)<br/>                        .cornerRadius(20)<br/>                        .opacity(0.4)<br/>                )<br/><br/>            Text(collection.name)<br/>                .font(.system(.largeTitle, design: .rounded))<br/>                .fontWeight(.black)<br/>                .foregroundColor(.white)<br/>                .padding()<br/>        }<br/>    }<br/>    <br/>}</span></pre><p id="0a0c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，让我们创建列表。在 ContentView 中输入这段代码。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="1af9" class="nb ma iq mx b gy nc nd l ne nf">var body: some View {<br/>            <br/>    List(collections, id: \.name) { index in<br/>            <br/>        ImageLabelRow(collection: index)<br/>            <br/>    }<br/>        <br/>}</span></pre><p id="f6a9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">注意我们使用。在参数中以 id 的形式命名，以唯一标识每一对。也可以用。因为结构集合有两个变量:名称和图像。</p><p id="4f66" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以整个程序应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/0c70169f2906d0ee2bf2f7a8d6788db9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BC7DiApfWCK8ovcp4Osrkw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 6。源代码截图</figcaption></figure><p id="a147" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是等等。虽然这段代码可以工作，但它不是最佳实践。例如，你将使用相同的“咖啡馆”名称或相同的图像。当您为每一行创建链接时，这会导致问题。</p><p id="809f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">编辑 struct 集合并将其转换为<strong class="kx ir"> <em class="lu">可识别的</em> </strong>协议。这意味着您告诉它为每个创建的实例分配一个惟一的 id。所以像这样更新代码:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="ae3c" class="nb ma iq mx b gy nc nd l ne nf">struct Collections: Identifiable {<br/>    var id = UUID()<br/>    var name: String<br/>    var image: String<br/>}</span></pre><p id="c22c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">那么您将不再需要 id 参数，因为由于可识别的协议，每个项目已经有了唯一的标识符。更新列表中的代码，如下所示。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="b82d" class="nb ma iq mx b gy nc nd l ne nf">var body: some View {<br/>            <br/>    List(collections) { index in<br/>            <br/>        ImageLabelRow(collection: index)<br/>            <br/>    }<br/>        <br/>}</span></pre><p id="5ff7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是最终源代码的样子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/91e58eabe026b0003554c012ac36b6a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFCcgo8NXFjuxYZtuQo3nA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 7。最终源代码。</figcaption></figure><p id="d65b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我为这个项目的全部源代码添加了一个 GitHub 链接:</p><p id="55c8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><a class="ae ly" href="https://github.com/athurion/SwiftUI-Tutorial-Working-with-List-using-ForEach" rel="noopener ugc nofollow" target="_blank">https://github . com/athurion/swift ui-Tutorial-Working-with-List-using-ForEach</a></p><p id="9076" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在我们的下一个教程中，我们将理解<a class="ae ly" href="https://medium.com/geekculture/swiftui-tutorial-state-and-binding-b7e80b4de622" rel="noopener">状态和绑定</a>的概念。</p><p id="17ed" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">愿法典与你同在，</p><p id="fe3b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">-电弧</p></div></div>    
</body>
</html>