<html>
<head>
<title>MongoDB &amp; Mongoose— All You Need To Know as a Beginner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MongoDB 和 mongose——作为初学者，您需要知道的一切</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/mongodb-mongoose-all-you-need-to-know-as-a-beginner-3eb3bf6979f2?source=collection_archive---------7-----------------------#2022-03-29">https://blog.devgenius.io/mongodb-mongoose-all-you-need-to-know-as-a-beginner-3eb3bf6979f2?source=collection_archive---------7-----------------------#2022-03-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="34c0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在<a class="ae kc" href="https://yumingchang1991.medium.com/technical-article-structure-on-medium-954850e1ef4d" rel="noopener">我的技术文章</a>中查看我所有的其他帖子</h2></div><p id="6ec0" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">写这篇文章是为了帮助未来的我回忆起 MongoDB 的主要概念。内容可能不正确，所以如果你找到了，请在评论中告诉我，让我们一起成长。</p><h2 id="65fd" class="kz la in bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">主题包括</h2><ul class=""><li id="bac9" class="ls lt in kf b kg lu kj lv km lw kq lx ku ly ky lz ma mb mc bi translated">什么是 MongoDB</li><li id="16f7" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">什么是 MongoDB Atlas</li><li id="4f00" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">什么是猫鼬</li><li id="82f5" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">在 Node.js 中使用 Mongoose 连接到 MongoDB Atlas</li><li id="67ce" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">使用 Mongoose 创建模式</li><li id="c910" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">基于模式创建模型</li><li id="e2d3" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">MongoDB 中的 CRUD</li></ul><h2 id="5af8" class="kz la in bd lb lc ld dn le lf lg dp lh km li lj lk kq ll lm ln ku lo lp lq lr bi translated">排除的主题</h2><ul class=""><li id="40a7" class="ls lt in kf b kg lu kj lv km lw kq lx ku ly ky lz ma mb mc bi translated">如何设置 MongoDB Atlas</li></ul></div><div class="ab cl mi mj hr mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ig ih ii ij ik"><h1 id="023b" class="mp la in bd lb mq mr ms le mt mu mv lh jt mw ju lk jw mx jx ln jz my ka lq mz bi translated">什么是 MongoDB</h1><ul class=""><li id="df1d" class="ls lt in kf b kg lu kj lv km lw kq lx ku ly ky lz ma mb mc bi translated">它是一个 noSQL 数据库，或非关系数据库管理系统</li><li id="3fbe" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">它的基本构建块是 JSON 文档，存储在一个集合中</li><li id="09eb" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">MongoDB 中的集合就像关系数据库中的表一样</li><li id="cc2e" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">集合级没有模式，这使得 MongoDB 构建起来更加灵活和快速。在 Mongoose 的帮助下，它的模式被定义为一个文档数据结构。<strong class="kf io">注</strong>:关系数据库在表定义中定义了模式，以保证数据的完整性</li></ul><h1 id="67e8" class="mp la in bd lb mq na ms le mt nb mv lh jt nc ju lk jw nd jx ln jz ne ka lq mz bi translated">什么是 MongoDB Atlas</h1><ul class=""><li id="888a" class="ls lt in kf b kg lu kj lv km lw kq lx ku ly ky lz ma mb mc bi translated">MongoDB Atlas 是 MongoDB 的云解决方案。它基本上是 MongoDB 的云版本，为我们处理部署工作</li></ul><h1 id="d105" class="mp la in bd lb mq na ms le mt nb mv lh jt nc ju lk jw nd jx ln jz ne ka lq mz bi translated">什么是猫鼬</h1><ul class=""><li id="231a" class="ls lt in kf b kg lu kj lv km lw kq lx ku ly ky lz ma mb mc bi translated">Mongoose 是 MongoDB 和 Node.js 的对象数据建模(ODM)库</li><li id="5e26" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">它提供了规范化数据的模式解决方案</li></ul><h1 id="4419" class="mp la in bd lb mq na ms le mt nb mv lh jt nc ju lk jw nd jx ln jz ne ka lq mz bi translated">使用 Mongoose 连接到 MongoDB</h1><p id="9cc7" class="pw-post-body-paragraph kd ke in kf b kg lu jo ki kj lv jr kl km nf ko kp kq ng ks kt ku nh kw kx ky ig bi translated">我们需要首先进口猫鼬在我们的。js 文件。有两种方法可以做到:</p><ol class=""><li id="96e8" class="ls lt in kf b kg kh kj kk km ni kq nj ku nk ky nl ma mb mc bi translated">使用<code class="fe nm nn no np b">require('mongoose')</code></li><li id="a411" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky nl ma mb mc bi translated">使用 ES6 语法<code class="fe nm nn no np b">import mongoose from 'mongoose'</code></li></ol><p id="c912" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我个人选择使用 require，这是专门为 NodeJS 设计的方法。在这篇文章的底部有讨论需求和导入的参考文章。你可能想去看看。</p><pre class="nq nr ns nt gt nu np nv nw aw nx bi"><span id="c541" class="kz la in np b gy ny nz l oa ob">const mongoose = require('mongoose')<br/>mongoose.connect(YOUR_MONGODB_URI, { useNewUrlParser: true })</span></pre><p id="4d56" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">MongoDB Atlas URI 看起来如下，但确保您直接从 MongoDB Atlas connection 获得，以防有变化:</p><p id="c65a" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">mongodb+srv:// <strong class="kf io"> &lt;用户名&gt; </strong> : <strong class="kf io"> &lt;密码&gt; </strong> @ <strong class="kf io"> &lt;集群名&gt;</strong>. MongoDB . net/<strong class="kf io">&lt;数据库名&gt; </strong></p></div><div class="ab cl mi mj hr mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ig ih ii ij ik"><h1 id="407b" class="mp la in bd lb mq mr ms le mt mu mv lh jt mw ju lk jw mx jx ln jz my ka lq mz bi translated">使用 Mongoose 创建模式</h1><p id="1b63" class="pw-post-body-paragraph kd ke in kf b kg lu jo ki kj lv jr kl km nf ko kp kq ng ks kt ku nh kw kx ky ig bi translated">首先，MongoDB 没有提供内置的模式来管理它可以接受的数据的“形状”。这就是 MongoDB 的灵活性所在。</p><p id="bbd9" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">然而，我们不希望我们的代码将一个我们不期望的文档保存回 MongoDB 集合。这就是模式发挥作用的地方。</p><p id="e72e" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">为了声明模式，我们使用 mongoose 的 schema()方法，该方法接受一个描述我们期望的数据形状的对象。</p><pre class="nq nr ns nt gt nu np nv nw aw nx bi"><span id="fb51" class="kz la in np b gy ny nz l oa ob">const mongoose = require('mongoose')<br/>const userSchema = <strong class="np io">new</strong> <strong class="np io">mongoose.schema</strong>({<br/>  username: String,<br/>  age: Number<br/>})</span></pre><p id="b41e" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">从<a class="ae kc" href="https://mongoosejs.com/docs/schematypes.html" rel="noopener ugc nofollow" target="_blank">官方文件</a>中查看允许哪些图式。</p></div><div class="ab cl mi mj hr mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ig ih ii ij ik"><h1 id="3802" class="mp la in bd lb mq mr ms le mt mu mv lh jt mw ju lk jw mx jx ln jz my ka lq mz bi translated">基于模式创建模型</h1><p id="35d8" class="pw-post-body-paragraph kd ke in kf b kg lu jo ki kj lv jr kl km nf ko kp kq ng ks kt ku nh kw kx ky ig bi translated">模式只是所需数据形状的蓝图，仅用于创建模型。</p><p id="8b05" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">模型是我们用来创建文档实例的构造器。</p><p id="904d" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">请记住，所有 CRUD 操作都是在模型上执行的。</p><p id="7f44" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">要在定义模式后声明模型，</p><pre class="nq nr ns nt gt nu np nv nw aw nx bi"><span id="49f3" class="kz la in np b gy ny nz l oa ob"><strong class="np io">const User = mongoose.model('User', userSchema)</strong><br/>// <strong class="np io">'User'</strong> is the name for the model<br/>// <strong class="np io">userSchema </strong>is the schema we just defined in last section</span></pre></div><div class="ab cl mi mj hr mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ig ih ii ij ik"><h1 id="f187" class="mp la in bd lb mq mr ms le mt mu mv lh jt mw ju lk jw mx jx ln jz my ka lq mz bi translated">MongoDB 中的 CRUD</h1><p id="f89d" class="pw-post-body-paragraph kd ke in kf b kg lu jo ki kj lv jr kl km nf ko kp kq ng ks kt ku nh kw kx ky ig bi translated">CRUD 操作相对简单，我发现官方文档是学习它的最佳资源。</p><p id="9f64" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">让我感兴趣的是基本上所有 CRUD 操作中的回调函数。我正在向 freeCodeCamp 学习，他们使用的示例回调函数叫做 done。</p><p id="a136" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">我不是 100%理解为什么我们每次完成一些任务时都需要使用回调函数。然后我发现<a class="ae kc" href="https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-asynchronous-call/14220323#14220323" rel="noopener ugc nofollow" target="_blank">这个响应</a>关于栈溢出。</p><p id="3c22" class="pw-post-body-paragraph kd ke in kf b kg kh jo ki kj kk jr kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">这是一个简短的回答摘要，但是我鼓励你花 20 分钟来阅读它。</p><ul class=""><li id="dfc4" class="ls lt in kf b kg kh kj kk km ni kq nj ku nk ky lz ma mb mc bi translated">JavaScript 正在异步运行</li><li id="19bd" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">回调函数只在每个函数结束时执行，以便让其他函数知道这个异步函数何时完成</li><li id="f314" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated">当你熟悉了异步和回调之后，再深入这两个主题，因为 JS 并不是一直异步运行的，回调函数也不总是在函数结束时执行。对于初学者来说，这似乎是一个超前的话题，所以让我们暂时把它放在一边。</li></ul></div><div class="ab cl mi mj hr mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ig ih ii ij ik"><h1 id="7dee" class="mp la in bd lb mq mr ms le mt mu mv lh jt mw ju lk jw mx jx ln jz my ka lq mz bi translated">参考</h1><ul class=""><li id="86c4" class="ls lt in kf b kg lu kj lv km lw kq lx ku ly ky lz ma mb mc bi translated"><strong class="kf io">文章</strong> : <a class="ae kc" href="https://www.freecodecamp.org/news/introduction-to-mongoose-for-mongodb-d2a7aa593c57/" rel="noopener ugc nofollow" target="_blank"> <em class="oc">尼克·卡尼克为 MongoDB </em> </a>介绍猫鼬</li><li id="d732" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated"><strong class="kf io">文章</strong>:<a class="ae kc" href="https://www.ibm.com/cloud/learn/mongodb" rel="noopener ugc nofollow" target="_blank"><em class="oc">IBM 的 MongoDB </em> </a>是什么</li><li id="f362" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated"><strong class="kf io"> Article </strong> : <a class="ae kc" href="https://masteringjs.io/tutorials/node/import-vs-require" rel="noopener ugc nofollow" target="_blank"> <em class="oc">导入 v.s. Require in Node.js </em> </a>通过掌握 js，2020</li><li id="f2ea" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated"><strong class="kf io">文章</strong> : <a class="ae kc" href="https://fjolt.com/article/javascript-export-import-node-js" rel="noopener ugc nofollow" target="_blank"> <em class="oc">导入、导出并要求在 JavaScript 中</em> </a> <em class="oc"> </em>作者 Johnny Simpson，2022</li><li id="af8f" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated"><strong class="kf io">手册</strong> : <a class="ae kc" href="https://mongoosejs.com/docs/index.html" rel="noopener ugc nofollow" target="_blank"> <em class="oc">公文</em> </a>由猫鼬</li><li id="b194" class="ls lt in kf b kg md kj me km mf kq mg ku mh ky lz ma mb mc bi translated"><strong class="kf io">手册</strong> : <a class="ae kc" href="https://www.mongodb.com/docs/guides/?_ga=2.187374316.519583772.1648536708-619028073.1648536708" rel="noopener ugc nofollow" target="_blank"> <em class="oc">公文</em> </a> <em class="oc"> </em>由 MongoDB</li></ul></div></div>    
</body>
</html>