<html>
<head>
<title>Big Data And Computing: A Beginners Approach</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">大数据和计算:初学者方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/big-data-and-computing-a-beginners-approach-73461d389aba?source=collection_archive---------10-----------------------#2022-12-29">https://blog.devgenius.io/big-data-and-computing-a-beginners-approach-73461d389aba?source=collection_archive---------10-----------------------#2022-12-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/39317d2c9e3f658377a29f31be0111a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ry8cWx-82xmWJyrgPZq18g.jpeg"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">大卫·迪伯特的照片:<a class="ae ja" href="https://www.pexels.com/photo/time-lapse-photography-of-vehicles-passing-near-building-635609/" rel="noopener ugc nofollow" target="_blank">https://www . pexels . com/photo/time-lapse-photography-of-vehicles-passing-near-building-635609/</a></figcaption></figure><div class=""/><div class=""><h2 id="eea8" class="pw-subtitle-paragraph ka jc jd bd b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dk translated">Hadoop 分布式文件系统</h2></div><h1 id="6697" class="ks kt jd bd ku kv kw kx ky kz la lb lc kj ld kk le km lf kn lg kp lh kq li lj bi translated">介绍</h1><p id="b363" class="pw-post-body-paragraph lk ll jd lm b ln lo ke lp lq lr kh ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">在过去的几十年里，在全球范围内，人们已经转向使用在线门户、框架和 web 服务来满足从购买必需品到娱乐的需求。像脸书这样的社交媒体平台和亚马逊这样的电子购物网站每天都有来自世界各地用户的数百万次点击。为了使应用程序更加用户友好和智能，这些公司存储从用户会话中生成的数据。例如，假设我们花了一些时间使用 youtube 上某个主题的视频。Youtube 将存储这些会话数据，以了解某些视频的有用程度，并将使用算法模型提取某些趋势，这将帮助我们以及其他进行类似内容测试的用户浏览 youtube。每个公司都有类似的技术需求，来处理如此大量的数据以满足统计需求，随着用户的日益增加，这一需求变得越来越重要，因为单机和垂直扩展(增加单台计算机上的硬件资源)不是解决方案。为了表示这种巨大的数据积累，我们使用术语“大数据”。</p><p id="3f91" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">大数据可以解释为可以从任何来源以任何格式提取的数据，可以是结构化的(如 SQL 表)、半结构化的(如 JSON 和 XML)或非结构化的(如图像数据)。一般来说，大数据有三个属性:3 V</p><ol class=""><li id="2206" class="ml mm jd lm b ln mg lq mh lt mn lx mo mb mp mf mq mr ms mt bi translated">卷:数据量有多大。</li><li id="4448" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated">多样性:集合中有多少种数据</li><li id="5fca" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated">速度:数据生成和收集的速度是多少？</li></ol><h1 id="b07c" class="ks kt jd bd ku kv kw kx ky kz la lb lc kj ld kk le km lf kn lg kp lh kq li lj bi translated">解决办法</h1><p id="d5e4" class="pw-post-body-paragraph lk ll jd lm b ln lo ke lp lq lr kh ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">为了解决这一挑战，Hadoop 最初是由 Apache 作为开源框架引入的，用于存储、处理和分析大量数据。Hadoop 支持数据的分布式存储和处理。它是用 Java 编程语言编写的。Hadoop 通过利用水平扩展来支持并行计算，即 Hadoop 实现了一个集群的概念，本质上是 CPU 资源系统的集合。这些独立的系统被称为集群中的节点。当一个任务被分配给一个 Hadoop 集群时，该任务被分成更小的工作负载，并作为任务分配给这些节点。Hadoop 采用批处理或离线处理方式，也就是说，它不会立即处理数据，而是等待并收集整个工作日的所有数据，然后将整个事情分解成批量数据，通过并行处理器发送这些数据以加快进程。</p><p id="73e0" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">最初，Hadoop 有 3 个组件，</p><ol class=""><li id="2a3d" class="ml mm jd lm b ln mg lq mh lt mn lx mo mb mp mf mq mr ms mt bi translated">Hadoop common，或者一些文件系统的包</li><li id="e632" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated">Hadoop 分布式文件系统</li><li id="1cf4" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated">Map Reduce 引擎。</li></ol><p id="1507" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">我们将依次讨论 HDFS 和 Map Reduce，在本文中我们将讨论 HDFS。</p><p id="73e4" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">Hadoop 是一种分布式设置，具有以下优势:</p><ol class=""><li id="c8ef" class="ml mm jd lm b ln mg lq mh lt mn lx mo mb mp mf mq mr ms mt bi translated"><strong class="lm je">快速并行计算</strong></li><li id="b524" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated"><strong class="lm je">高可用性</strong></li><li id="6815" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated"><strong class="lm je">容错:</strong>因为数据被复制并存储在不同的存储位置。</li></ol><figure class="na nb nc nd gt ip gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/7c3b3dc24bd2b6ab261f0064aec636fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*lBR3r9FvLuh12pbCxmRjxw.png"/></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">Hadoop 1.x 架构</figcaption></figure><h1 id="f95b" class="ks kt jd bd ku kv kw kx ky kz la lb lc kj ld kk le km lf kn lg kp lh kq li lj bi translated">Hadoop 分布式文件系统</h1><p id="7462" class="pw-post-body-paragraph lk ll jd lm b ln lo ke lp lq lr kh ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">在我们开始研究这个问题之前，我们应该先了解一下分布式文件系统的概念和它的属性，这是整个事情的基础。分布式文件系统通过将存储分布在不同的文件服务器或不同的位置来维护存储。它们具有一些关键属性，包括:</p><ol class=""><li id="ddbc" class="ml mm jd lm b ln mg lq mh lt mn lx mo mb mp mf mq mr ms mt bi translated"><strong class="lm je">位置透明性:</strong>文件可以分布在几个系统中，但是它们将位于相同的名称空间下，也就是说，它们将位于相同的路径或扩展名下，这样，作为用户，我们可以像在本地系统上一样访问文件</li><li id="b5c7" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated"><strong class="lm je">冗余:</strong>跨不同节点复制文件，使文件高度可用。</li><li id="d601" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated"><strong class="lm je">文件锁定:</strong>如果一个文件存在于多个位置，并且有多个副本，则有可能同时修改该文件，这可能会导致一致性问题。这是由文件锁定属性阻止的。</li></ol><p id="657a" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">HDFS 将这一想法扩展到基于 Hadoop 的集群，专注于数据访问的高吞吐量，并带来了在单个集群上水平扩展的能力。Hadoop 通过利用几个低成本硬件来支持高处理能力，而不是构建一个功能强大的硬件，这将是非常昂贵的，并且没有备份或可用性。</p><h2 id="b3a5" class="ne kt jd bd ku nf ng dn ky nh ni dp lc lt nj nk le lx nl nm lg mb nn no li np bi translated">HDFS 建筑</h2><p id="6c5b" class="pw-post-body-paragraph lk ll jd lm b ln lo ke lp lq lr kh ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">HDFS 在主/从架构上工作。正如我们已经看到的，Hadoop 集群有多个节点，其中一个被指定为主节点，称为 NameNode，其他节点称为 DataNodes。单个 NameNode 是主服务器，它管理存储的文件和元数据的名称空间，而 DataNodes 管理实际的存储。</p><p id="55a1" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">HDFS 有一个“一次写入”策略，即文件一旦写入，只能在以后追加和截断，不能删除。HDFS 最小的存储单位叫做块。基本上，当我们试图存储一个文件时，文件被分解成称为<strong class="lm je">块的单元。</strong>每个块的默认大小是<strong class="lm je"> 128 MB。因此，如果我们发送一个 256 MB 的文件，它将被分解成 2 个块。块只不过是集群的 DataNode 上的连续内存分配。</strong></p><p id="50d9" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">正如我们在集群上听到的那样，有几个 DataNodes。一组数据节点被称为<strong class="lm je">机架。</strong>每个机架都有一个称为<strong class="lm je">的机架交换机</strong>来连接该机架上的所有节点，同样，在外部，我们为每个机架提供了交换机来相互交互。</p><figure class="na nb nc nd gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nq"><img src="../Images/f072ac14ada1a0f3245933c08e8cd828.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3AmG5wSAdW5ZPckQvibpGQ.png"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">HDFS 建筑</figcaption></figure><h2 id="773e" class="ne kt jd bd ku nf ng dn ky nh ni dp lc lt nj nk le lx nl nm lg mb nn no li np bi translated">存储系统的工作</h2><p id="bbdf" class="pw-post-body-paragraph lk ll jd lm b ln lo ke lp lq lr kh ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">我们之前讨论过，HDFS 具有容错能力，这是通过复制数据并将相同的数据分布在不同的节点和不同的机架上来实现的。默认情况下，复制因子为 3，但复制因子和块大小都是可配置的。</p><p id="5df6" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">与分布式文件系统类似，HDFS 也具有存储为名称空间-&gt;目录-&gt;文件的层次结构，用户和 100% Namenode 使用它来保存数据节点上的块映射并执行多种操作。NameNode 仅充当资源管理器，并维护名称空间以及某个文件及其副本将保存到哪个 DataNode 的哪个块。</p><p id="5c74" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">为了维护文件和副本，HDFS 部署了一个名为<strong class="lm je">机架感知算法的算法。</strong>这由 NameNode 运行，以适当地分发副本，从而提高系统的可靠性和可用性。该算法防止过度复制或仅在单个节点或机架中复制。它规定复制因子为 3，一个副本应放在本地机架上，另一个副本应放在不同机架上的随机 datanode 上。如果超过 3 个，则应随机放置，这样不会有 2 个放置在同一个 Datanode 上，机架的上限为</p><p id="2e22" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated"><strong class="lm je">(#副本—1)/(#机架+2) </strong></p><p id="f5e9" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">在读取期间，从最近的副本访问数据。</p><h2 id="f988" class="ne kt jd bd ku nf ng dn ky nh ni dp lc lt nj nk le lx nl nm lg mb nn no li np bi translated">阅读和写作</h2><p id="41e5" class="pw-post-body-paragraph lk ll jd lm b ln lo ke lp lq lr kh ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">当用户请求在 HDFS 上书写时，书写基本上分为 4 个步骤:</p><ol class=""><li id="f59d" class="ml mm jd lm b ln mg lq mh lt mn lx mo mb mp mf mq mr ms mt bi translated">NameNode 接收请求，根据机架感知算法、可用性和复制因子(本例中为 3)，NameNode 向客户端提供 3 个不同 datanode 的 3 个 IP(因为每个 datanode 是一个系统，每个都有自己的 IP)。</li><li id="d6bf" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated">客户端连接到 DataNodes，并通过 TCP/IP 协议建立一个通过就绪确认检查的管道。</li><li id="ffe0" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated">成功建立管道后，客户端将文件上传到节点 1，节点 1 将数据的副本传递到节点 2，类似地，节点 2 将数据发送到节点 3。存储是顺序进行的。</li><li id="f936" class="ml mm jd lm b ln mu lq mv lt mw lx mx mb my mf mq mr ms mt bi translated">所有三个节点收到数据后，最后一个接收的节点向第二个节点发送确认，第二个节点发送两个确认，一个来自节点 3，另一个是自己发送给客户端连接的第一个节点。最后，第一个节点向客户端发送所有 3 个确认，并关闭管道。</li></ol><figure class="na nb nc nd gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nr"><img src="../Images/449792c10e255f8174b565dbbb0417cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g8s4X6eBSqXOe0ugU5ndrg.png"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">HDFS 的书写机制</figcaption></figure><p id="50fc" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">当客户端请求读取时，request 会转到 NameNode，它会检查文件的最近副本的元数据，并将该 DataNode 的 IP 发送到客户端，然后在建立连接后传输数据。</p><h2 id="8898" class="ne kt jd bd ku nf ng dn ky nh ni dp lc lt nj nk le lx nl nm lg mb nn no li np bi translated">组件的内部工作和职责</h2><p id="93a4" class="pw-post-body-paragraph lk ll jd lm b ln lo ke lp lq lr kh ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">为了保持 Hadoop 集群的平稳运行和可靠性，HDFS 的内部组件必须扮演一些额外的角色。除了主要的主 NameNode 之外，它还有一个辅助 NameNode，作为支持性守护进程，在某些角色中帮助主 NameNode。NameNode 在 EditLog 中维护所有事务日志，以记录系统的每次更改。除此之外，它还以 FSImage 的形式保存整个命名空间和文件块映射的快照，该快照由 NameNode 维护，用于标识块及其对应的 datanodes。该映像充当检查点，在特定的给定时间限制后保存。</p><p id="4416" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">每个 DataNode 负责向 NameNode 发送一个特殊的消息，该消息称为心跳，在固定的时间周期后持续发送。如果没有此消息，则通知 NameNode 某个 DataNode 已关闭，作为响应，NameNode 会立即将该节点上的所有数据复制到其他一些节点，并停止向该特定节点发送请求。</p><p id="98b8" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">如果由于某种故障，DataNode 的数量保持相对较低，NameNode 将进入一种特殊状态，称为<strong class="lm je">安全</strong>状态。在这种状态下，dataNode 的复制会停止，每个 dataNode 都会向 NameNode 提供一份报告，说明它们所托管的块数，等等。</p><h1 id="d529" class="ks kt jd bd ku kv kw kx ky kz la lb lc kj ld kk le km lf kn lg kp lh kq li lj bi translated">结论</h1><p id="9b8e" class="pw-post-body-paragraph lk ll jd lm b ln lo ke lp lq lr kh ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">在本文中，我们看到了 Hadoop 分布式文件系统的结构和工作方式，以及大数据的基础知识。在<a class="ae ja" href="https://medium.com/@myac.abhijit/big-data-and-computing-a-beginners-approach-63a10d259cd8" rel="noopener">即将发布的文章中，</a>我们将会看到像贴图减少和纱线这样的主题。</p><p id="ea9f" class="pw-post-body-paragraph lk ll jd lm b ln mg ke lp lq mh kh ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">快乐阅读！！</p></div></div>    
</body>
</html>