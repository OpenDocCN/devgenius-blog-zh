<html>
<head>
<title>Deploying a DynamoDB Table using Terraform Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Terraform 模块部署 DynamoDB 表</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploying-a-dynamodb-table-using-terraform-modules-ae5621312f10?source=collection_archive---------2-----------------------#2022-06-14">https://blog.devgenius.io/deploying-a-dynamodb-table-using-terraform-modules-ae5621312f10?source=collection_archive---------2-----------------------#2022-06-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/f682280b99e64d67908eaf72bf27ff97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*msTdBdcLbGMDSAtG_VdBDQ.png"/></div></figure><p id="1b93" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp">简介</em> </strong></p><p id="79ae" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当我继续探索 Terraform 作为一种工具时，导师给我和我的同伴的一个想法是重新审视以前的项目，并使用 Terraform 完成它们。它可以作为一种手段，让我们更加熟悉和舒适地使用它。给我解开这个谜？您更愿意通过控制台部署一个或多个资源，还是使用 Terraform 来自动化整个过程？我认为最好是后者。在需要多个资源之前，使用管理控制台启动一个资源是一件非常有趣的事情。或者需要重复使用和部署相同的资源。本教程是一个已经熟悉的项目的不同旋转。这是一个初学者友好而广泛的使用 Terraform 模块部署 DynamoDB 表的演练。</p><p id="d76a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">T5】先决条件:T7】</strong></p><p id="f0c4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">1.您选择的 IDE。</p><p id="fb58" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">2.AWS 账户。</p><p id="1c77" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">3.已经安装并配置了 Terraform。</p><p id="a98d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">4.GitHub 账户。</p><p id="75eb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp">目录创建</em> </strong></p><p id="4123" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">通常情况下，这个过程的第一步是创建一个目录来存放我们所有必需的文件。请随意参考我以前的 terraform 文章，了解如何去做。为了一切正常工作，应该有一个父模块，也就是你的根目录。并且父模块应该包含子模块。</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div class="gh gi kq"><img src="../Images/5ad2a0ec7620ba1e27b1f55b1a2ea87b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1362/format:webp/1*kXInoN3Ormqumf_4PO3WyA.png"/></div></figure><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div class="gh gi kv"><img src="../Images/98b16515579330631580a486214366d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/1*0LD1jTvEYan1MlRbvhoX2Q.png"/></div></figure><p id="cd3c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您的父模块应该包含—您的子模块、您的。gitignore 和您的 dynamo.tf 文件。</p><p id="8c35" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">而子模块应该包含 providers.tf、resources.tf 和 variables.tf 文件。</p><p id="d16c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">请参考上面的图片作为您的目录结构的指南。</p><p id="bed5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp">源代码</em> </strong></p><p id="9ca8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们的文件所需的源代码可以通过点击以下链接找到:</p><p id="7a68" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae kw" href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/dynamodb_table_item" rel="noopener ugc nofollow" target="_blank">https://registry . terra form . io/providers/hashi corp/AWS/latest/docs/resources/dynamo db _ table _ item</a>。</p><p id="5b6e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">源代码将在接下来的几个步骤中派上用场。</p><p id="800f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp">迪纳摩. tf </em> </strong></p><p id="6a1b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这个 dynamo.tf 文件位于我们的父模块或主目录中，它由调用子资源的资源组成，以便部署我们的基础设施。下面是我的 dynamo.tf 文件。</p><figure class="kr ks kt ku gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="b697" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp"> Providers.tf </em> </strong></p><p id="298b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">根据 Terraform.io 提供者是允许 Terraform 与服务、云提供者和其他 API 交互的插件。简单地说，可以把它看作是 Terraform 和其他服务之间的桥梁。注意，为了自动化起见，我们的区域是作为变量输入的。万一需要重用这段代码，硬编码就少了一件事。单击下面的链接可以找到 providers.tf 的源代码:</p><p id="892f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae kw" href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs" rel="noopener ugc nofollow" target="_blank">https://registry . terraform . io/providers/hashi corp/AWS/latest/docs</a></p><p id="1d52" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">下面是我的 providers.tf 文件</p><figure class="kr ks kt ku gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="740e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">T3】resources . TFT5】</strong></p><p id="8cbe" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">从本教程源代码部分提供的链接中复制源代码，将其粘贴到 resources.tf 文件中，并进行必要的更改。下面是我更新的 resources.tf 文件。</p><figure class="kr ks kt ku gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="b30d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp"> Variables.tf </em> </strong></p><p id="ebb5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">到目前为止，您应该已经注意到在我们的配置文件中频繁使用“var”这个词。这是因为我们将某些值作为变量赋值或传递。</p><figure class="kr ks kt ku gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><p id="b308" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp">命令</em> </strong></p><p id="5aea" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">创建完所有文件后，请从终端运行以下命令。</p><p id="051e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Terraform init —初始化包含 Terraform 代码的工作目录。</p><p id="ad08" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Terraform validate —加倍检查配置文件的语法，以避免可能的语法错误。</p><p id="9794" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Terraform apply —用于将计划中指定的所有更改应用到 motion 中。</p><p id="e92f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp">控制台</em> </strong>中的双重检查</p><p id="cb0e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在让我们转向管理控制台，以确保我们所有的资源都已成功创建。瞧啊。！！！</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi kz"><img src="../Images/092dd831e159368a55c2ea0577cdeefc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6XUF9bOO1IQIrfo3NIK0oA.png"/></div></div></figure><p id="f125" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kp">消灭</em> </strong></p><p id="c4da" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">一旦您确认成功创建了资源，为了避免不必要的费用，请确保销毁所有资源。这可以通过在终端中输入 Terraform destroy 命令来实现。</p><p id="a540" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">通常作为一个提醒，养成把你的代码推向回购的习惯。</p><p id="a9aa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这可以通过输入以下命令来完成:</p><p id="c292" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">git 提交。</p><p id="5fcf" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">git commit -m</p><p id="f7f4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">git 推。</p><p id="7663" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">瞧啊。！！</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi le"><img src="../Images/e44269cc8a86d1f84f33ef67296124bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5xVpE08yhGT2X1cTJ-pHww.png"/></div></div></figure><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi lf"><img src="../Images/20961ad0491248cd014231c8591f189a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IlbuYBGH7FvIO-pJh2I7Lg.png"/></div></div></figure><p id="8c8e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果您已经做到了这一步，并且遵循了上面的步骤，那么您已经成功地并且应该知道如何利用 terraform 模块来部署可重用的资源，比如 DynamoDB 表。</p><p id="99cd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">也可以随时在 linkedin 上关注我(点击<a class="ae kw" href="https://www.linkedin.com/in/claude-r-hector-mba/" rel="noopener ugc nofollow" target="_blank">链接</a>)，因为我希望与志同道合的人联系</p><p id="50f8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">谢谢你的时间，下次再见。</p><p id="f113" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">你友好的邻居云开发工程师。</p></div></div>    
</body>
</html>