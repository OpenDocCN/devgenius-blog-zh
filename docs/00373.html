<html>
<head>
<title>Getting started in Natural Language Processing with spaCy: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">spaCy自然语言处理入门:第2部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/getting-started-in-natural-language-processing-with-spacy-part-2-73ecb4eac11d?source=collection_archive---------17-----------------------#2020-06-04">https://blog.devgenius.io/getting-started-in-natural-language-processing-with-spacy-part-2-73ecb4eac11d?source=collection_archive---------17-----------------------#2020-06-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="eba4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您错过了第1部分。如果你需要一些关于基本安装、基本命令、标记化、词性标注、依赖性、标记属性、跨度和句子的基本知识，可以看看它。</p><div class="ki kj gp gr kk kl"><a href="https://medium.com/dev-genius/getting-started-in-natural-language-processing-with-spacy-part-1-5026748cadc2" rel="noopener follow" target="_blank"><div class="km ab fo"><div class="kn ab ko cl cj kp"><h2 class="bd io gy z fp kq fr fs kr fu fw im bi translated">spaCy自然语言处理入门:第1部分</h2><div class="ks l"><h3 class="bd b gy z fp kq fr fs kr fu fw dk translated">spaCy(https://spacy.io/)是一个开源的Python库，可以解析和“理解”大量的文本…</h3></div><div class="kt l"><p class="bd b dl z fp kq fr fs kr fu fw dk translated">medium.com</p></div></div><div class="ku l"><div class="kv l kw kx ky ku kz la kl"/></div></div></a></div><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/a3ee50418fc6cd06fea40cfd88b930b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HTtQseukwrBiREJf8MSVcA.jpeg"/></div></div></figure><h2 id="aee9" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">标记化</h2><p id="958f" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">创建“Doc”对象的第一步是将输入文本分解成组成部分或“标记”。</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="52f6" class="lm ln in ml b gy mp mq l mr ms">In [1]:<em class="mt"># Import spaCy and load the language library<br/></em><strong class="ml io">import</strong> spacy<br/>nlp <strong class="ml io">=</strong> spacy.load('en_core_web_sm')<br/>In [2]:<br/><em class="mt"># Create a string that includes opening and closing quotation marks<br/></em>mystring <strong class="ml io">=</strong> '"We\'re moving to L.A.!"'<br/>print(mystring)<br/>"We're moving to L.A.!"<br/>In [3]:<br/><em class="mt"># Create a Doc object and explore tokens<br/></em>doc <strong class="ml io">=</strong> nlp(mystring)<br/><strong class="ml io">for</strong> token <strong class="ml io">in</strong> doc:<br/>   print(token.text, end<strong class="ml io">=</strong>' | ')<br/>" | We | 're | moving | to | L.A. | ! | " |</span></pre><ul class=""><li id="5204" class="mu mv in jm b jn jo jr js jv mw jz mx kd my kh mz na nb nc bi translated"><strong class="jm io">前缀</strong>:开头的字符<code class="fe nd ne nf ml b">$ ( “ ¿</code></li><li id="b5f7" class="mu mv in jm b jn ng jr nh jv ni jz nj kd nk kh mz na nb nc bi translated"><strong class="jm io">后缀</strong>:末尾字符<code class="fe nd ne nf ml b">km ) , . ! ”</code></li><li id="621c" class="mu mv in jm b jn ng jr nh jv ni jz nj kd nk kh mz na nb nc bi translated"><strong class="jm io">中缀</strong>:中间的字符<code class="fe nd ne nf ml b">- -- / ...</code></li><li id="33fe" class="mu mv in jm b jn ng jr nh jv ni jz nj kd nk kh mz na nb nc bi translated"><strong class="jm io">异常</strong>:特殊情况规则，当应用标点规则时，将一个字符串分割成几个记号或防止一个记号被分割</li></ul><p id="b772" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，标记是原始文本的一部分。也就是说，我们没有看到任何词干或词条(单词的基本形式)的转换，我们也没有看到任何关于组织/地点/金钱等的内容。标记是Doc对象的基本构建块——帮助我们理解文本含义的一切都是从标记及其相互关系中派生出来的。</p><h2 id="2374" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">前缀、后缀和中缀</h2><p id="b662" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">spaCy将隔离不构成单词组成部分的标点符号。句末的引号、逗号和标点符号将被赋予各自的符号。但是，作为电子邮件地址、网站或数值的一部分存在的标点符号将作为令牌的一部分保留。</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="7412" class="lm ln in ml b gy mp mq l mr ms">In [4]:doc2 <strong class="ml io">=</strong> nlp(u"We're here to help! Send snail-mail, email support@oursite.com or visit us at http://www.oursite.com!")<br/><strong class="ml io">for</strong> t <strong class="ml io">in</strong> doc2:<br/>   print(t)<br/>We<br/>'re<br/>here<br/>to<br/>help<br/>!<br/>Send<br/>snail<br/>-<br/>mail<br/>,<br/>email<br/>support@oursite.com<br/>or<br/>visit<br/>us<br/>at<br/><a class="ae nl" href="http://www.oursite.com/" rel="noopener ugc nofollow" target="_blank">http://www.oursite.com</a><br/>!</span></pre><p id="0b0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意,“蜗牛邮件”中的感叹号、逗号和连字符被赋予了自己的标记，但电子邮件地址和网站都被保留了下来。</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="4720" class="lm ln in ml b gy mp mq l mr ms">In [5]:doc3 <strong class="ml io">=</strong> nlp(u'A 5km NYC cab ride costs $10.30')<br/><strong class="ml io">for</strong> t <strong class="ml io">in</strong> doc3:<br/>   print(t)<br/>A<br/>5<br/>km<br/>NYC<br/>cab<br/>ride<br/>costs<br/>$<br/>10.30</span></pre><p id="86ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，距离单位和美元符号被赋予它们自己的记号，但是美元的数量被保留。</p><h2 id="d946" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">例外</h2><p id="d8db" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">作为已知缩写的一部分存在的标点符号将作为标记的一部分保留。</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="2a07" class="lm ln in ml b gy mp mq l mr ms">In [6]:doc4 <strong class="ml io">=</strong> nlp(u"Let's visit St. Louis in the U.S. next year.")<br/><strong class="ml io">for</strong> t <strong class="ml io">in</strong> doc4:<br/>   print(t)<br/>Let<br/>'s<br/>visit<br/>St.<br/>Louis<br/>in<br/>the<br/>U.S.<br/>next<br/>year<br/>.</span></pre><p id="f8d4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里,“圣”和“美国”的缩写都保留了下来。</p><h2 id="83d2" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">清点代币</h2><p id="b69a" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated"><code class="fe nd ne nf ml b">Doc</code>物体有一定数量的记号:</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="a927" class="lm ln in ml b gy mp mq l mr ms">In [7]:len(doc)<br/>Out[7]:<br/>8</span></pre><h2 id="da26" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">统计Vocab条目</h2><p id="97c4" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated"><code class="fe nd ne nf ml b">Vocab</code>对象包含一个完整的项目库！</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="16bb" class="lm ln in ml b gy mp mq l mr ms">In [8]:len(doc.vocab)<br/>Out[8]:<br/>57852</span></pre><p id="bcd7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意:这个数字根据开始时加载的语言库和创建<code class="fe nd ne nf ml b">Doc</code>时引入到<code class="fe nd ne nf ml b">vocab</code>中的任何新词位而变化。</p><h2 id="f603" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">令牌可以通过索引位置和切片来检索</h2><p id="c135" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated"><code class="fe nd ne nf ml b">Doc</code>对象可以被认为是<code class="fe nd ne nf ml b">token</code>对象的列表。因此，可以通过索引位置来检索各个标记，并且可以通过切片来检索标记的范围:</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="af89" class="lm ln in ml b gy mp mq l mr ms">In [9]:doc5 <strong class="ml io">=</strong> nlp(u'It is better to give than to receive.')<br/><em class="mt"># Retrieve the third token:<br/></em>doc5[2]<br/>Out[9]:<br/>better<br/>In [10]:<br/><em class="mt"># Retrieve three tokens from the middle:<br/></em>doc5[2:5]<br/>Out[10]:<br/>better to give<br/>In [11]:<br/><em class="mt"># Retrieve the last four tokens:<br/></em>doc5[<strong class="ml io">-</strong>4:]<br/>Out[11]:than to receive.</span></pre><h2 id="7b98" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">令牌不能重新分配</h2><p id="2475" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">虽然<code class="fe nd ne nf ml b">Doc</code>对象可以被认为是令牌列表，但是它们不<em class="mt">也不</em>支持项目重分配:</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="3ba2" class="lm ln in ml b gy mp mq l mr ms">In [12]:doc6 <strong class="ml io">=</strong> nlp(u'My dinner was horrible.')<br/>doc7 <strong class="ml io">=</strong> nlp(u'Your dinner was delicious.')<br/>In [13]:<br/><em class="mt"># Try to change "My dinner was horrible" to "My dinner was delicious"<br/></em>doc6[3] <strong class="ml io">=</strong> doc7[3]<br/><strong class="ml io">---------------------------------------------------------------------------</strong><br/><strong class="ml io">TypeError</strong>                                 Traceback (most recent call last)<br/><strong class="ml io">&lt;ipython-input-13-d4fb8c39c40b&gt;</strong> in &lt;module&gt;<strong class="ml io">()</strong><br/>      1 <strong class="ml io"># Try to change "My dinner was horrible" to "My dinner was delicious"</strong><br/><strong class="ml io">----&gt; 2 </strong>doc6<strong class="ml io">[3]</strong> <strong class="ml io">=</strong> doc7<strong class="ml io">[3]</strong></span><span id="6732" class="lm ln in ml b gy nm mq l mr ms"><strong class="ml io">TypeError</strong>: 'spacy.tokens.doc.Doc' object does not support item assignment</span></pre><h2 id="0847" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">命名实体</h2><p id="5728" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated"><em class="mt">命名实体</em>比令牌更进了一步，增加了另一层上下文。语言模型认为某些单词是组织名称，而其他单词是位置，还有一些组合与金钱、日期等有关。命名实体可以通过一个<code class="fe nd ne nf ml b">Doc</code>对象的<code class="fe nd ne nf ml b">ents</code>属性来访问。</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="20f0" class="lm ln in ml b gy mp mq l mr ms">In [14]:doc8 <strong class="ml io">=</strong> nlp(u'Apple to build a Hong Kong factory for $6 million')<br/><strong class="ml io">for</strong> token <strong class="ml io">in</strong> doc8:<br/>   print(token.text, end<strong class="ml io">=</strong>' | ')<br/>   print('\n----')<br/>   <strong class="ml io">for</strong> ent <strong class="ml io">in</strong> doc8.ents:<br/>      print(ent.text<strong class="ml io">+</strong>' - '<strong class="ml io">+</strong>ent.label_<strong class="ml io">+</strong>' -<strong class="ml io">+</strong>str(spacy.explain(ent.label_)))<br/>Apple | to | build | a | Hong | Kong | factory | for | $ | 6 | million | <br/>----<br/>Apple - ORG - Companies, agencies, institutions, etc.<br/>Hong Kong - GPE - Countries, cities, states<br/>$6 million - MONEY - Monetary values, including unit</span></pre><p id="a100" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意两个令牌如何组合形成实体<code class="fe nd ne nf ml b">Hong Kong</code>，三个令牌如何组合形成货币实体:<code class="fe nd ne nf ml b">$6 million</code></p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="fedf" class="lm ln in ml b gy mp mq l mr ms">In [15]:len(doc8.ents)<br/>Out[15]:3</span></pre><p id="9609" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">命名实体识别(NER)是一种应用于自然语言处理的重要机器学习工具。<br/>我们将在接下来的章节中做更多的工作。有关<strong class="jm io">命名实体</strong>的更多信息，请访问<a class="ae nl" href="https://spacy.io/usage/linguistic-features#named-entities" rel="noopener ugc nofollow" target="_blank">https://spacy.io/usage/linguistic-features#named-entities</a></p><h2 id="b9d8" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">名词块</h2><p id="4df1" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">与<code class="fe nd ne nf ml b">Doc.ents</code>类似，<code class="fe nd ne nf ml b">Doc.noun_chunks</code>是另一个对象属性。名词块是“基本名词短语”——以一个名词为中心的扁平短语。你可以把名词块想象成一个名词加上描述这个名词的单词——例如，在<a class="ae nl" href="https://en.wikipedia.org/wiki/The_Purple_People_Eater" rel="noopener ugc nofollow" target="_blank">谢布·伍利1958年的歌曲</a>中，一个*“独眼独角，飞翔，紫色的食人族”*就是一个长名词块。</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="464b" class="lm ln in ml b gy mp mq l mr ms">In [16]:doc9 <strong class="ml io">=</strong> nlp(u"Autonomous cars shift insurance liability toward manufacturers.")<br/><strong class="ml io">for</strong> chunk <strong class="ml io">in</strong> doc9.noun_chunks:<br/>   print(chunk.text)<br/>Autonomous cars<br/>insurance liability<br/>manufacturers</span><span id="ee2d" class="lm ln in ml b gy nm mq l mr ms">In [17]:<br/>doc10 <strong class="ml io">=</strong> nlp(u"Red cars do not carry higher insurance rates.")<br/><strong class="ml io">for</strong> chunk <strong class="ml io">in</strong> doc10.noun_chunks:<br/>   print(chunk.text)<br/>Red cars<br/>higher insurance rates<br/>In [18]:<br/>doc11 <strong class="ml io">=</strong> nlp(u"He was a one-eyed, one-horned, flying, purple people-eater.")<br/><strong class="ml io">for</strong> chunk <strong class="ml io">in</strong> doc11.noun_chunks:<br/>   print(chunk.text)<br/>He<br/>a one-eyed, one-horned, flying, purple people-eater</span></pre><p id="3756" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在下一节中，除了<code class="fe nd ne nf ml b">.text</code>之外，我们还会看到其他的noun_chunks组件。欲了解更多关于名词组块的信息，请访问https://spacy.io/usage/linguistic-features#noun-chunks</p><h2 id="e1c2" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">内置可视化工具</h2><p id="314b" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">spaCy包括一个名为<strong class="jm io"> displaCy </strong>的内置可视化工具。displaCy能够检测你是否在一个Jupyter笔记本中工作，并将返回可以立即在单元格中呈现的标记。导出笔记本时，可视化效果将以HTML格式包含在内。欲了解更多信息，请访问:</p><div class="ki kj gp gr kk kl"><a href="https://spacy.io/usage/visualizers" rel="noopener  ugc nofollow" target="_blank"><div class="km ab fo"><div class="kn ab ko cl cj kp"><h2 class="bd io gy z fp kq fr fs kr fu fw im bi translated">可视化工具空间使用文档</h2><div class="ks l"><h3 class="bd b gy z fp kq fr fs kr fu fw dk translated">在浏览器或笔记本中可视化依赖关系和实体</h3></div><div class="kt l"><p class="bd b dl z fp kq fr fs kr fu fw dk translated">空间. io</p></div></div><div class="ku l"><div class="nn l kw kx ky ku kz la kl"/></div></div></a></div><h2 id="17be" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">可视化依赖解析</h2><p id="79d2" class="pw-post-body-paragraph jk jl in jm b jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd mj kf kg kh ig bi translated">运行下面的单元格以导入displacy并显示相关性图形</p><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="68d5" class="lm ln in ml b gy mp mq l mr ms">In [19]:<strong class="ml io">from</strong> spacy <strong class="ml io">import</strong> displacy<br/>doc <strong class="ml io">=</strong> nlp(u'Apple is going to build a U.K. factory for $6 million.')<br/>displacy.render(doc, style<strong class="ml io">=</strong>'dep', jupyter<strong class="ml io">=True</strong>, options<strong class="ml io">=</strong>{'distance': 110})</span></pre><p id="f6b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Apple PROPN是动词go动词to PART build动词DET英国PROPN工厂名词ADP $ SYM 6 NUM百万。NUM nsub aux xcomp det compound dobj prep quantmod compound pobj</p><p id="0028" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">可选的<code class="fe nd ne nf ml b">'distance'</code>参数设置标记之间的距离。如果距离过小，出现在短箭头下方的文本可能会变得过于压缩而无法阅读。</p><h2 id="8567" class="lm ln in bd lo lp lq dn lr ls lt dp lu jv lv lw lx jz ly lz ma kd mb mc md me bi translated">可视化实体识别器</h2><pre class="lc ld le lf gt mk ml mm mn aw mo bi"><span id="7c98" class="lm ln in ml b gy mp mq l mr ms">In [20]:doc <strong class="ml io">=</strong> nlp(u'Over the last quarter Apple sold nearly 20 thousand iPods for a profit of $6 million.')<br/>displacy.render(doc, style<strong class="ml io">=</strong>'ent', jupyter<strong class="ml io">=True</strong>)</span></pre><p id="148c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上个季度<strong class="jm io">日</strong>苹果<strong class="jm io">组织</strong>卖出了近2万台<strong class="jm io">红衣主教</strong>ipod<strong class="jm io">产品</strong>获利600万美元<strong class="jm io">金钱</strong>。</p><p id="cdd9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">太好了！现在，您应该了解了标记化是如何将文本划分为单个元素的，命名实体是如何提供上下文的，以及某些工具是如何帮助可视化语法规则和实体标签的。</p><div class="ki kj gp gr kk kl"><a href="https://medium.com/@santanudutta85/getting-started-in-natural-language-processing-with-spacy-part-3-824c1b291d22" rel="noopener follow" target="_blank"><div class="km ab fo"><div class="kn ab ko cl cj kp"><h2 class="bd io gy z fp kq fr fs kr fu fw im bi translated">spaCy自然语言处理入门:第3部分</h2><div class="ks l"><h3 class="bd b gy z fp kq fr fs kr fu fw dk translated">在这个故事中，我们将重点关注词干。</h3></div><div class="kt l"><p class="bd b dl z fp kq fr fs kr fu fw dk translated">medium.com</p></div></div><div class="ku l"><div class="kv l kw kx ky ku kz la kl"/></div></div></a></div></div></div>    
</body>
</html>