<html>
<head>
<title>How to Use React Context to Manage State in Your App.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 React 上下文来管理应用程序中的状态。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-use-react-context-to-manage-state-in-your-app-fed1aadc45ea?source=collection_archive---------13-----------------------#2022-04-13">https://blog.devgenius.io/how-to-use-react-context-to-manage-state-in-your-app-fed1aadc45ea?source=collection_archive---------13-----------------------#2022-04-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/87b863059284f7ddf6e0567f10e973b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vIpSQe1_ujJZt1HyqsEmiA.png"/></div></div></figure><p id="bef1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当你创建一个 web 应用程序时，你必须克服的最大挑战之一就是管理状态，使用 react 有几个选项可以做到这一点，其中之一就是使用 React 上下文。我将用一个例子给你解释清楚，这样你就可以开始在你的 web 应用中使用 React Context 了。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><p id="4900" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">假设我们有一个号码，我们需要在我们的 web 应用程序中的任何地方访问该号码，我们将如何做，只需使用下面的代码。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="7cd3" class="lj lk in lf b gy ll lm l ln lo"><strong class="lf io"><em class="lp">QuantityContext.tsx</em></strong></span><span id="ee78" class="lj lk in lf b gy lq lm l ln lo">import * as React from ‘react’;</span><span id="0473" class="lj lk in lf b gy lq lm l ln lo">interface IQuantityState {<br/>  quantity?: number;<br/>}</span><span id="adf5" class="lj lk in lf b gy lq lm l ln lo">type QuantityActionType = ‘SET_QUANTITY’ | ‘CLEAR_QUANTITY’;</span><span id="1900" class="lj lk in lf b gy lq lm l ln lo">interface IQuantityDispatch {<br/>type: WebCartActionType;<br/>payload?: number;<br/>}</span><span id="dd35" class="lj lk in lf b gy lq lm l ln lo">interface IQuantityContext {<br/>state: IQuantityState;<br/>dispatch: React.Dispatch&lt;IQuantityDispatch&gt;;<br/>}</span><span id="2fcb" class="lj lk in lf b gy lq lm l ln lo">const initialState: IQuantityState= {<br/>quantity: undefined,<br/>};</span><span id="c69c" class="lj lk in lf b gy lq lm l ln lo">function reducer(state: IQuantityState, action: IQuantityDispatch) {<br/>switch (action.type) {<br/>case ‘SET_QUANTITY’:<br/>return Object.assign({}, state, {<br/>quantity: action.payload.quantity ?? undefined<br/>});<br/>case ‘CLEAR_QUANTITY’:<br/>return Object.assign({}, state, {<br/>quantity: undefined<br/>});<br/>default:<br/>return state;<br/>}<br/>}<br/>export const QuantityDataContext = React.createContext({} as IQuantityContext);<br/>export const useQuantityDataContext = () =&gt; React.useContext(QuantityDatContext);<br/>export const QuantityContextProvider: React.FC = ({ children }) =&gt; {<br/>const [state, dispatch] = React.useReducer(reducer, initialState);<br/>return (</span><span id="c78f" class="lj lk in lf b gy lq lm l ln lo">&lt;QuantityContext.Provider value={{ state, dispatch }}&gt;<br/>{children}<br/>&lt;/QuantityContext.Provider&gt;<br/>);<br/>};</span></pre><p id="72a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在上面创建了 QuantityContext.tsx 文件，现在我们需要用 QuantityContextProvider 包装我们的应用程序，以便我们可以从应用程序中的任何位置访问状态。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="9366" class="lj lk in lf b gy ll lm l ln lo"><strong class="lf io"><em class="lp">App.tsx</em></strong></span><span id="8715" class="lj lk in lf b gy lq lm l ln lo">export default function App() {<br/>return (<br/>&lt;QuantityContextProvider&gt;<br/>{children}<br/>&lt;/QuantityContextProvider&gt;<br/>);<br/>}</span></pre><p id="5154" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，是时候设置一些值并在 web 应用程序的另一部分中使用这些值了。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="5ce7" class="lj lk in lf b gy ll lm l ln lo"><strong class="lf io"><em class="lp">Screen.tsx</em></strong></span><span id="97ad" class="lj lk in lf b gy lq lm l ln lo">import { useQuantityDataContext } from '../../context/QuantityContext.tsx';</span><span id="bbfd" class="lj lk in lf b gy lq lm l ln lo">interface IScreenProps {}</span><span id="06f5" class="lj lk in lf b gy lq lm l ln lo">export const Screen: React.FC&lt;IScreenProps&gt; = () =&gt; {</span><span id="7fc2" class="lj lk in lf b gy lq lm l ln lo">const [quantity, setQuantity] = React.useState(0);<br/>const { dispatch } = useQuantityDataContext();</span><span id="3df4" class="lj lk in lf b gy lq lm l ln lo">React.useEffect(() =&gt; {<br/>if (quantity !== 0) {<br/>dispatch({ type: "SET_QUANTITY", payload: { quantity: quantity} <br/>}); <em class="lp">// set the value here</em><br/>} else {<br/>dispatch({ type: "CLEAR_QUANTITY" });<br/>}}, [quantity]) <em class="lp">//clear the value here</em></span><span id="107f" class="lj lk in lf b gy lq lm l ln lo">return (<br/>&lt;div&gt;<br/>&lt;button title="Increase" onPress={() =&gt; setQuantity(quantity)}&gt;&lt;/button&gt; //increase the value here with  press on button<br/>&lt;/div&gt;<br/>)}<br/></span></pre><p id="333c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在 Screen.tsx 上设置值，现在最后一步是从我们应用程序的任何地方读取该值。我们将创建另一个名为 ScreenTwo.tsx 的屏幕，我们将获取状态并从该状态中读取值。</p><pre class="la lb lc ld gt le lf lg lh aw li bi"><span id="dba1" class="lj lk in lf b gy ll lm l ln lo"><strong class="lf io">ScreenTwo.tsx</strong></span><span id="5ba1" class="lj lk in lf b gy lq lm l ln lo">import { useQuantityDataContext } from '../../context/QuantityContext.tsx';</span><span id="5077" class="lj lk in lf b gy lq lm l ln lo">interface IScreenTwoProps {}</span><span id="6df6" class="lj lk in lf b gy lq lm l ln lo">export const ScreenTwo: React.FC&lt;IScreenTwoProps&gt; = () =&gt; {</span><span id="a7b0" class="lj lk in lf b gy lq lm l ln lo">const { state } = useQuantityDataContext() //just get the state </span><span id="0b3d" class="lj lk in lf b gy lq lm l ln lo">return (<br/>&lt;div&gt;<br/>{state.quantity} //you can read the value here<br/>&lt;/div&gt;<br/>)}</span></pre></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><p id="428d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您已经准备好编写第一个上下文来管理 web 应用程序中的状态。希望对你有帮助。如果是这样的话，给我一个关注和喜欢:)</p><p id="50d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我的链接在下面</p><p id="073f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae lr" href="https://www.linkedin.com/in/akin-karayun-ab3239bb/" rel="noopener ugc nofollow" target="_blank"> AKIN KARAYUN | LinkedIn </a></p><p id="44c2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae lr" href="https://devakinkarayun.web.app/" rel="noopener ugc nofollow" target="_blank">阿金·卡拉云</a></p></div></div>    
</body>
</html>