<html>
<head>
<title>Request tracking authorization in iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 iOS 中请求跟踪授权</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/request-tracking-authorization-in-ios-9af50727b885?source=collection_archive---------0-----------------------#2021-10-12">https://blog.devgenius.io/request-tracking-authorization-in-ios-9af50727b885?source=collection_archive---------0-----------------------#2021-10-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f2dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 Swift 在 iOS 中请求跟踪授权</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e5ed5128090bcfd1e09333115f005c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d_UlLH8SVz_ZZhRX"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由<a class="ae ky" href="https://unsplash.com/@williamtm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">威廉·胡克</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="6ac6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于 iOS 14.5 及以上版本，如果我们希望使用所有用户设备的广告标识符，我们需要为他们请求跟踪授权。苹果公司声明如下:</p><blockquote class="kz la lb"><p id="d91b" class="jk jl lc jm b jn jo jp jq jr js jt ju ld jw jx jy le ka kb kc lf ke kf kg kh ig bi translated">从 iOS 14.5、iPadOS 14.5 和 tvOS 14.5 开始，您需要通过 AppTrackingTransparency 框架获得用户的许可，才能跟踪他们或访问他们设备的广告标识符。跟踪是指将从您的应用程序收集的用户或设备数据与从其他公司的应用程序、网站或离线属性收集的用户或设备数据相链接，以进行有针对性的广告或广告测量。跟踪也指与数据代理共享用户或设备数据。</p></blockquote><p id="af62" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以在以下链接中了解更多信息:<a class="ae ky" href="https://developer.apple.com/app-store/user-privacy-and-data-use/" rel="noopener ugc nofollow" target="_blank">https://developer . apple . com/app-store/user-privacy-and-data-use/</a></p><p id="eeb7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，如何遵守这一点呢？没那么难，那就开始吧。</p><p id="ea3d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先让我们创建一个 RequestManager，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="f356" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们正在做的是获得广告标识符或 IDFA。让我们打印它。我们应该得到的是:<strong class="jm io">000000000–0000–0000–0000–000000000</strong></p><p id="f659" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是为什么呢？因为我们还没有请求用户授权。将以下函数添加到我们的 RequestManager 中:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="2952" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们在这里做的是请求跟踪授权，获取用户选择的状态并返回该状态。在尝试之前，将添加到。plist 文件此<strong class="jm io"><em class="lc">nsurtrackingsagedescription。</em> </strong>说明你为什么要求用户这样做。</p><p id="724d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要测试它，请执行以下操作:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lg lh l"/></div></figure><p id="ee0d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在此之后，您应该会收到请求用户授权进行跟踪的警报。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi li"><img src="../Images/833219e7bd205b3bfbfc16a88ea0d0df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BX1RX-qNtndUwLPXofJl5g.png"/></div></div></figure><p id="a16e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢阅读。</p><p id="9683" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">与我们合作:</p><div class="lj lk gp gr ll lm"><a href="https://www.avilatek.com/en/" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab fo"><div class="lo ab lp cl cj lq"><h2 class="bd io gy z fp lr fr fs ls fu fw im bi translated">阿维拉泰克</h2><div class="lt l"><h3 class="bd b gy z fp lr fr fs ls fu fw dk translated">技术创新的发展</h3></div><div class="lu l"><p class="bd b dl z fp lr fr fs ls fu fw dk translated">www.avilatek.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma ks lm"/></div></div></a></div><p id="79ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我的 LinkedIn 个人资料:</p><div class="lj lk gp gr ll lm"><a href="https://www.linkedin.com/in/marcelo-laprea/" rel="noopener  ugc nofollow" target="_blank"><div class="ln ab fo"><div class="lo ab lp cl cj lq"><h2 class="bd io gy z fp lr fr fs ls fu fw im bi translated">Marcelo Laprea - iOS 软件工程师- Kindred Group plc | LinkedIn</h2><div class="lt l"><h3 class="bd b gy z fp lr fr fs ls fu fw dk translated">经验丰富的 iOS 应用程序开发人员，有在计算机软件行业工作的经历。熟练于…</h3></div><div class="lu l"><p class="bd b dl z fp lr fr fs ls fu fw dk translated">www.linkedin.com</p></div></div></div></a></div></div></div>    
</body>
</html>