<html>
<head>
<title>Make Reusable and More Clean HTTP Request Swift5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使可重用和更干净的 HTTP 请求更快捷 5</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/make-reusable-and-more-clean-http-request-swift5-2cd6077073ce?source=collection_archive---------8-----------------------#2020-06-16">https://blog.devgenius.io/make-reusable-and-more-clean-http-request-swift5-2cd6077073ce?source=collection_archive---------8-----------------------#2020-06-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="e265" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">大家好，我想分享我用 Swift 5 MVVM 学习开发 IOS 应用程序的故事。因为基本 me 来自 android 开发者，Ios 开发和 android 开发有一些不同的模式。但我认为 ios 开发的学习曲线并不太难，因为 swift 更容易学习，尤其是 Swift5 和 SwiftUi it。</p><p id="40de" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我决定学习 Swift 是因为我在使用 react native 等多平台应用程序做项目时，遇到了很多本机模块的问题。react native 中有这么多库，但有时我发现只适用于 android 应用程序或只适用于 ios。或者我没有发现任何人有我需要的本机模块。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/7c508a3735906fcdfc8ef5d0329b4c2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1108/format:webp/1*I1BRtUbzTyP8fnxM1KEDjA.jpeg"/></div></figure><p id="1a04" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我用 kotlin 或 java 开发 android 应用程序时，有类似库的改进非常有用、简单和干净。有了这个库，我使用 MVP 模式代码看起来整洁简单。但是当我开始学习 swift 时，很多教程看起来只是工作代码，而不是整洁和可维护的。现在我发现了一个很好的模式，用 MVVM 可观察模式使 http 请求看起来简单且可重用。</p><p id="1b19" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第一步是创建 RequestService 来处理对 API 的请求，如下例所示。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kq kr l"/></div></figure><p id="0885" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后制作可编码模型来映射 web 服务 json 响应，有一个简单的方法可以做到这一点。打开网站<a class="ae ks" href="https://www.json4swift.com/" rel="noopener ugc nofollow" target="_blank"> https://swift4json </a>或【https://app.quicktype.io/】T2 然后从 postman 那里复制你 json 响应并像这样粘贴到网页上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi kt"><img src="../Images/0c7440dc2406eaee2274f90bd9641d8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4ubIeP-9imf63hOL62Y4A.png"/></div></div></figure><p id="bf92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后从生成的代码复制到你的项目，我通常把它保存到文件夹模型，但你可以把它保存到另一个。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kq kr l"/></div></figure><p id="29f8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过创建一个父类名为 ObservableObject 的类来创建您的视图模型，然后您可以像这样调用 API。我没有使用 NSUserDefaults 保存令牌不安全或未加密，无论是在设备上还是同步到 Mac 时，都可以轻松打开和读取。</p><p id="3947" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">NSUserDefaults 是存放首选项和配置信息等内容的好地方，但不是存放密码或令牌等敏感内容的好地方。我使用名为 KeychainSwift 的库来保存令牌。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kq kr l"/></div></figure><p id="f9ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，在视图上，您只需调用 ViewModel 并观察它对视图解析的响应。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kq kr l"/></div></figure><p id="3eee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您可以添加更多请求 api，只需在登录函数下面添加即可。希望这篇教程能对你有用，感谢你的阅读。鼓掌支持我们；-).再见。</p></div></div>    
</body>
</html>