# 快速浏览乐观与悲观渲染

> 原文：<https://blog.devgenius.io/a-quick-look-at-optimistic-vs-pessimistic-rendering-4df00a5af0ff?source=collection_archive---------5----------------------->

快速坦白…我有点新闻迷。我对此没有偏见，我会阅读几乎任何类型的文章，从关于我最喜欢的运动队的新闻到关于即将到来的选举的最新消息。我甚至会偶尔跑题到“新闻”类的边缘话题，比如 BuzzFeed 上这篇关于本周 18 只可爱狗狗发布好心情福音的文章。

不幸的是，没有什么好的理由，我也经常发现自己在搜索这些文章的评论。这无疑意味着在两个人之间遇到一场毫无意义的争论，这两个人从来不会当面这么针锋相对，而且显然没有做好说服任何人站到他们一边的工作。然而，同样没有好的理由，如果我同意一个人而不同意另一个人，我总是愿意点击那个*像*或竖起大拇指键，作为对我支持的论点的微小确认。

本文的重点是检查当我点击 like 键时会发生什么。坦白地说，这个过程相当无趣:我点击 *like* 按钮，网页就会更新，显示新的“赞”总数，并为客户端提供一个*like*选项。就是这样。通常，这种情况下的客户体验归结为速度。因此，如果像那样的*几乎是瞬间发生的，客户就满意了。但现在是 2020 年，所以如果只花几秒钟，就足以激怒客户，可能会让他们远离你的网站。那么，开发人员如何最大化速度，从而改善客户体验呢？这就是乐观渲染的用武之地。*

描述乐观渲染最简单的方法是首先触及它的替代品:*悲观渲染*。当网页悲观地呈现时，它们是这样工作的:

1 —客户端执行一个操作，如单击，向服务器发送 HTTP 请求。

2 —服务器处理请求并返回响应。

3 —客户端的应用程序基于此响应而更改。

为了演示这一点，我将使用我前面提到的评论-喜欢动作(注意，“喜欢”通常不会悲观地呈现，因为这又会给客户端造成不必要的延迟)。然而，它看起来是这样的:

1-我点击评论上的“喜欢”。

2 —我的“赞”被发送到网站的服务器。

3 —一旦服务器处理请求并返回响应，页面就会更新，以反映我在评论上的附加赞(假设它是成功的)。

所以那是悲观的渲染。你会问，这有什么区别？嗯，基本上*乐观渲染*消除了流程中的阻碍。客户端应用程序将立即呈现对服务器的调用，而不是调用服务器并在收到响应之前放弃未来的操作。当客户端发出请求时，客户端的应用程序会乐观地认为在收到来自服务器的响应之前请求已经成功，从而消除了调用服务器所导致的等待时间。与悲观流程相比，乐观流程是这样工作的(变化以粗体显示):

1 —客户端(或用户)通过操作(如单击)向页面发出请求。

**2 —呈现网页以显示客户端操作的结果。(即，添加和显示附加的“喜欢”并将按钮改变为不喜欢的选项。)**

**3** —基于客户端的动作，向服务器发送相应的调用。

4 —服务器处理请求并返回响应。

**5 —如果请求失败，客户端页面可能会再次更新，或者他们可能会收到一条错误消息。**

存在使用乐观或悲观渲染的适当时机。虽然乐观通常对客户更友好，但肯定有不是首选的时候。例如，如果客户正在购买一张棒球比赛的门票，显示“您的购买成功了！”可能不是(或者肯定不是)好主意在交易完成之前。这种对悲观主义的偏好延伸到了几乎所有的网络交易。

这个故事的寓意是:就一般的生活方式而言，乐观是一条出路。然而，当开发全栈应用的功能时，我建议给自己多一点余地，根据自己的具体情况权衡乐观与悲观渲染的优缺点。