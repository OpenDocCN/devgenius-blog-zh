<html>
<head>
<title>SSL Certificates: How it works</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SSL 证书:工作原理</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ssl-certificates-how-it-works-c646f9d05ba8?source=collection_archive---------24-----------------------#2020-07-03">https://blog.devgenius.io/ssl-certificates-how-it-works-c646f9d05ba8?source=collection_archive---------24-----------------------#2020-07-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/02e1f32a5f7778f11916a927494d2806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uAxZaTDezIsf6iC6"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com/@iamjiroe?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jiroe </a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="09a5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">简单快速地解释 SSL 证书是如何工作的。这不是一个如何生成生产就绪证书的教程，但是希望在本文的结尾创建一个证书会更容易。</p><h1 id="caf9" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">私钥</h1><p id="dbf6" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">私钥用于敏感内容的加密和解密。它不应该与错误的人共享，因为它可以用来解密用它加密的任何内容。</p><p id="2930" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如何使用<code class="fe mb mc md me b">openssl</code>创建私钥:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="b610" class="mn kz in me b gy mo mp l mq mr">openssl genrsa -out privatekey.pem 2048</span></pre><p id="6c03" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该命令将生成一个带有私钥的文件<code class="fe mb mc md me b">privatekey.pem</code>。</p><h1 id="04ad" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">生成自签名证书</h1><p id="599b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">自签名证书用于测试或在受控环境中，它提供了一种快速的方法使您的 web 服务器通过 HTTPS 进行响应。这不应该在生产中使用，因为它不是由证书颁发机构签名的(下一节将说明为什么这很重要)。</p><p id="3b1e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如何使用<code class="fe mb mc md me b">openssl</code>生成证书:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="5c6d" class="mn kz in me b gy mo mp l mq mr">openssl req -key privatekey.pem -new -x509 -days 365 -out certificate.crt</span></pre><p id="9453" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用私钥，<code class="fe mb mc md me b">openssl</code>将生成一个包含证书内容的文件<code class="fe mb mc md me b">certificate.crt</code>。这个证书可以在你的网络服务器上使用，但是它会显示一个不安全的连接。</p><h1 id="cede" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">认证机构(CA)</h1><p id="45d5" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">证书颁发机构负责验证和颁发证书，做这项工作的公司/组织的一个例子是<a class="ae jz" href="https://letsencrypt.org/" rel="noopener ugc nofollow" target="_blank"> Letsencrypt </a>。</p><p id="0de2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">需要创建证书签名请求(CSR)来颁发新证书，CSR 将由证书颁发机构验证(或拒绝)。</p><p id="1d85" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如何使用<code class="fe mb mc md me b">openssl</code>生成 CSR:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="f592" class="mn kz in me b gy mo mp l mq mr">openssl req -new -key privatekey.pem -out certificaterequest.csr</span></pre><p id="f24d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">运行该命令后，将会询问您关于您的域和公司的重要信息。</p><p id="80b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> PS:每个证书颁发机构都有不同的审批流程，所以不要担心 CSR 将如何被批准。</strong></p><h1 id="f9ae" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">证书链</h1><p id="1836" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">证书链是用于相互认证的证书的有序列表，所有需要的证书都将由 CA 返回，因此需要理解概念并在适当的位置设置证书文件。</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/fd87126555e58f67734c93ea4b711ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*QJByJOJrkRITrHqOsZKOfw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">证书链</figcaption></figure><ul class=""><li id="0a4c" class="mt mu in kc b kd ke kh ki kl mv kp mw kt mx kx my mz na nb bi translated"><strong class="kc io"> SSL 证书</strong></li></ul><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/da07100a9853caa5e26a550ff3101942.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*zhE3sEafFEvSmrkIkymysg.png"/></div></figure><ul class=""><li id="8e0f" class="mt mu in kc b kd ke kh ki kl mv kp mw kt mx kx my mz na nb bi translated"><strong class="kc io">中级证书(CA 证书)</strong></li></ul><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/da8a64418cf936548024bef2768469ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*t2veW8BmHJpAvL3uPt75BQ.png"/></div></figure><ul class=""><li id="c517" class="mt mu in kc b kd ke kh ki kl mv kp mw kt mx kx my mz na nb bi translated"><strong class="kc io">根证书</strong></li></ul><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/5777efe359264813727bb1308aafb7ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*R-AWSmhy3XZ6YNqLrdAycw.png"/></div></figure><h1 id="e1be" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">应用概念</h1><p id="007f" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">使用<a class="ae jz" href="https://www.digitalocean.com/" rel="noopener ugc nofollow" target="_blank">数字海洋</a>的负载平衡器 SSL 配置，这就是我们如何应用已经生成的所有内容:</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/a70660236139cb7649e44f8c9f0acca4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*VkDp7bLSitemCbC3c-IgHw.png"/></div></figure><p id="9fd0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">名字</strong>:不重要，只是为了保存在数字海洋里</p><p id="34b8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">证书</strong> : <code class="fe mb mc md me b">certificate.crt</code>的内容(使用自签名，否则将由 CA 发送)</p><p id="c73f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">私钥</strong> : <code class="fe mb mc md me b">privatekey.pem</code>的内容(使用自签名，否则将由 CA 发送)</p><p id="6039" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">证书链</strong>:将由 CA 发送(如果自签名，则留空)</p><h1 id="5c27" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">参考和重要链接</h1><ul class=""><li id="b804" class="mt mu in kc b kd lw kh lx kl ng kp nh kt ni kx my mz na nb bi translated"><a class="ae jz" href="https://github.com/acmesh-official/acme.sh" rel="noopener ugc nofollow" target="_blank"> Acme.sh </a> : awesome CLI 发布新证书，它使用 Letsencrypt 发布证书，并且可以与几个 DNS 提供商集成(DNS 配置是验证您确实是域所有者的最佳方式之一)。</li><li id="55ac" class="mt mu in kc b kd nj kh nk kl nl kp nm kt nn kx my mz na nb bi translated"><a class="ae jz" href="https://www.digitalocean.com/community/tutorials/openssl-essentials-working-with-ssl-certificates-private-keys-and-csrs#convert-certificate-formats" rel="noopener ugc nofollow" target="_blank">https://www . digital ocean . com/community/tutorials/OpenSSL-essentials-working-with-SSL-certificates-private-keys-and-CSRs # convert-certificate-formats</a></li><li id="6a01" class="mt mu in kc b kd nj kh nk kl nl kp nm kt nn kx my mz na nb bi translated"><a class="ae jz" href="https://www.openssl.org/" rel="noopener ugc nofollow" target="_blank"> OpenSSL </a></li><li id="c4a2" class="mt mu in kc b kd nj kh nk kl nl kp nm kt nn kx my mz na nb bi translated"><a class="ae jz" href="https://en.wikipedia.org/wiki/Chain_of_trust" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Chain_of_trust</a></li></ul></div></div>    
</body>
</html>