<html>
<head>
<title>How Does a Virus Spread Throughout a Population?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">病毒是如何在人群中传播的？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-does-a-virus-spread-throughout-a-population-a3b6c019a704?source=collection_archive---------1-----------------------#2020-05-10">https://blog.devgenius.io/how-does-a-virus-spread-throughout-a-population-a3b6c019a704?source=collection_archive---------1-----------------------#2020-05-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="58f6" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">应用计算机科学分析流行病</h1><p id="33fe" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">声明:如果你在寻找新冠肺炎的最新消息，这个博客不是最好的地方。为此，我建议查看<a class="ae lh" href="https://www.cdc.gov" rel="noopener ugc nofollow" target="_blank">疾控中心网站</a>。在这篇文章中，我只是分享了我的一个与流行病研究和分析相关的软件工程项目。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/7d4f37a7309d8adecea73a103d6aaf4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M3ZlTtJzccDIu5s53S1oVw.jpeg"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">照片由<a class="ae lh" href="https://unsplash.com/@introspectivedsgn?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">埃里克·麦克莱恩</a>在<a class="ae lh" href="https://unsplash.com/s/photos/virus?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="3ec7" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">为什么群体免疫很重要</h1><p id="b796" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这是周六晚上。晚上8点</p><p id="c073" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">在一个不知名的城市中心，一家通常熙熙攘攘的餐馆静悄悄的。所有的灯都灭了，已经好几天没人进去过了。</p><p id="4b20" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">它的主人，丹，已经关闭了生意。</p><p id="1d31" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">离餐馆几个街区，有一家医院。医生办公室的灯是亮着的，尽管通常在下午5点以后就没人了。</p><p id="6362" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">医生Syeda打算花一整晚的时间来照顾病人。</p><p id="44c1" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">丹和希达过着截然不同的生活。其中一个知道如何填饱肚子；另一个知道胃里实际能装多少食物。他们中的一个可能希望人们回到街上；另一个人看到没有戴口罩的行人会发抖。</p><p id="6a36" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">不过，丹和希达的共同点也同样重要——他们都是群体免疫的受害者。</p><h1 id="73b7" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">那么，如何模拟疾病爆发呢？</h1><p id="45b8" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在这篇博客文章中，我想与你分享最新和改进版本的<a class="ae lh" href="https://herd-immunity.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">群体免疫</a>，这是我最近部署的一个网络应用程序，用于帮助研究人员、教师和好奇的人对每次疫情和流行病爆发背后的潜在变量进行实验。</p><h2 id="0817" class="md jl in bd jm me mf dn jq mg mh dp ju kt mi mj jy kx mk ml kc lb mm mn kg mo bi translated">如何使用该网站</h2><p id="3bd4" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">如果你想知道这个网站实际上是如何运作的，这里有一个1分钟的演示视频。它用伤寒作为病毒的例子。</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated"><a class="ae lh" href="https://youtu.be/rLb2eaMichE" rel="noopener ugc nofollow" target="_blank">群体免疫项目演示视频</a>。</figcaption></figure><h2 id="eb7c" class="md jl in bd jm me mf dn jq mg mh dp ju kt mi mj jy kx mk ml kc lb mm mn kg mo bi translated">这篇博文的路线图</h2><p id="f9fb" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我计划通过图表、代码片段和个人故事的方式与你分享很多东西。请记住，在这篇博客结束时，我计划与你分享两个主要概念:</p><ol class=""><li id="f938" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf mw mx my mz bi translated">什么是M-way树，以及它们如何应用于现实世界</li><li id="5ac1" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">我如何有效地集成不同的Web开发框架</li></ol><h2 id="6a22" class="md jl in bd jm me mf dn jq mg mh dp ju kt mi mj jy kx mk ml kc lb mm mn kg mo bi translated">项目灵感</h2><p id="ce54" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">最初的项目受到了比尔·盖茨工作的启发，他在2015年的ted演讲中预测了疫情病毒爆发的威胁(令人难忘地类似于新冠肺炎)。</p><p id="1984" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">在最初的范围内，我和我的合作伙伴<a class="ae lh" href="https://www.linkedin.com/in/shashwat-prajjwal-309339108/" rel="noopener ugc nofollow" target="_blank"> Shashwat Prajjwal </a>将群体免疫构建为一个简单的基于命令行的应用程序。它能够计算出理论上可能被感染、产生免疫力或死亡的人数，给定某些变量，如人口规模、人口中接种疫苗者的百分比、病毒本身以及最初被感染的人数。通过使用Python 3 中的<a class="ae lh" href="https://docs.python.org/3.7/library/random.html" rel="noopener ugc nofollow" target="_blank">随机模块，程序中的“随机性”成为可能(代码将包含在本文底部的链接中)。</a></p><p id="9162" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">通过这门课之后，我决定更进一步，从盖茨在他的TED演讲中使用的更先进的计算机模拟中获得线索。</p><h1 id="4634" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">现实世界中的数据结构</h1><p id="ccbd" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">现在的问题是:<em class="lg">向</em>展示模拟结果的最佳方式是什么，这样用户就可以<em class="lg">看到</em>个人之间的互动是如何<em class="lg">联系起来的？</em></p><p id="ef52" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">答案是:使用M叉树！</p><h2 id="fc5d" class="md jl in bd jm me mf dn jq mg mh dp ju kt mi mj jy kx mk ml kc lb mm mn kg mo bi translated">m向树</h2><p id="afe8" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">M-way树是一种<em class="lg">抽象数据类型</em>，它建立在一种更一般化形式的<em class="lg">二叉树之上。</em>如果这看起来像是计算机科学术语，不要担心——我的意图是帮助你认识到你可能已经比你意识到的更好地理解了这种数据结构！</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nf"><img src="../Images/0d70873cde1b249c322acf01b115d089.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7dWVZ-sYZqWm8ZgXNBsgIA.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">展示伊斯兰教“先知之树”的书法作品。图片鸣谢<a class="ae lh" href="http://www.zombietime.com/mohammed_image_archive/this_is_mohammed/" rel="noopener ugc nofollow" target="_blank">http://www . zombie time . com/Mohammed _ image _ archive/this _ is _ Mohammed/</a></figcaption></figure><p id="5a48" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">让我们从考虑一个<em class="lg">家谱开始，</em>一种通常用来表示同一家族成员之间的谱系关系的图。</p><p id="7c6a" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">例如，左边的树显示了<a class="ae lh" href="https://www.biography.com/religious-figure/muhammad" rel="noopener ugc nofollow" target="_blank">穆罕默德</a>的家庭。它从底部开始，或者说从<em class="lg">根开始，</em>随着我们沿着图表向上移动，我们可以看到每个人，作为<em class="lg">父母</em>，是如何与他们的<em class="lg">子女</em>发生系谱联系的。</p><p id="feff" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">所有这些只是想告诉你，在计算机科学背后有一种疯狂的方法。我知道我个人感觉每当我被一个概念的术语弄糊涂时，回到现实世界的例子总是有帮助的，然后归纳到CS理论！</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ng"><img src="../Images/f2f0f2fa374a65486faa8ecf41903f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jzoi04bqwJUNztOi4ExvXA.jpeg"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">代表亚伯拉罕家族的12向树。</figcaption></figure><p id="78d7" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">也就是说，让我们来看看和以前一样的家谱，只是看起来更像M-way树！需要指出几件事:</p><ol class=""><li id="0959" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf mw mx my mz bi translated">树的<em class="lg">根</em>在图的顶部。</li><li id="f5af" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">我们把每一个人(在英语中用他们的名字代表)称为树中的一个<em class="lg">节点</em>。这些节点并不总是人——它们可以是存储在树中的任何数据。</li><li id="30aa" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">节点是按后代排列的:<em class="lg">父</em>节点分支成不同的<em class="lg">子</em>节点。在最底部，节点不再有孩子——我们称这些节点为<em class="lg">叶。根据定义，叶节点总是没有子节点。</em></li></ol><p id="2734" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">那么，M-way树有什么特别之处呢？M代表什么？</p><p id="6ec3" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">m只不过是一个变量，用于表示<em class="lg">可能从任何给定父节点分支的子节点</em>的最大数量。在我们不知道树中的单个数据可能与树中的其他节点有多少关系的情况下，我们使用M向树。</p><p id="e325" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">在上面家谱的上下文中，M=12。这是因为我们从亚伯拉罕开始，他有两个孩子。然后在图表的下一层是以实玛利和以撒，他们都有一个孩子。注意，如果我们的树到此为止，称它为二叉树就足够了——因为二叉树只是M向树，其中M=2。然而，下一层是雅各布，他有12个孩子！因此，我们有一个12向树。</p><h1 id="0e0f" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">群体免疫是如何工作的</h1><p id="929b" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我们这些对研究疾病爆发感兴趣的人今天处于一种独特的境地。出于显而易见的原因，我们可能不会运行任何真实世界的实验——这就是为什么我们有计算机模拟是伟大的！</p><p id="0247" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">在最新版本的<a class="ae lh" href="https://herd-immunity.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">群体免疫</a>中，用户现在可以看到一个M-way树，显示在他们进行的实验中被病毒感染的人群。</p><h2 id="6422" class="md jl in bd jm me mf dn jq mg mh dp ju kt mi mj jy kx mk ml kc lb mm mn kg mo bi translated">这棵树展示了什么</h2><p id="0048" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">对于每个模拟，用户现在可以选择查看树形可视化，显示在实验的每个阶段(称为“时间步长”)有多少人感染了病毒。</p><p id="8978" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">例如，让我们用这些输入参数来分析我通过创建一个实验制作的树:</p><ul class=""><li id="dace" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf nh mx my mz bi translated"><em class="lg">人口数量:</em> 120人</li><li id="4182" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf nh mx my mz bi translated"><em class="lg">接种率:</em> 78%</li><li id="afd6" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf nh mx my mz bi translated"><em class="lg">初始感染:</em> 5</li><li id="bb3d" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf nh mx my mz bi translated"><em class="lg">病毒死亡率:</em> 1%</li><li id="8288" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf nh mx my mz bi translated"><em class="lg">病毒繁殖率:</em> 10%</li></ul><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi ni"><img src="../Images/a9500b0a6feda0def55557b420185f67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6EISd-RwTfFYiUUA8SvbIQ.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">一个M向树的例子，展示了一个虚构的流感病毒的传播。</figcaption></figure><p id="c47b" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">从该树中，我们可以得出以下观察结果:</p><ol class=""><li id="e1e6" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf mw mx my mz bi translated">这是一个5向树，因为5是任何父节点拥有的最大数量的子节点</li><li id="5610" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">树的根(最左边)是病毒本身，任何分支最右边的节点是叶子。</li><li id="cd07" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">除了根之外的每个节点都代表一个感染者。存储在每个节点的数据是这个人唯一的、随机分配的ID号。</li></ol><h2 id="3345" class="md jl in bd jm me mf dn jq mg mh dp ju kt mi mj jy kx mk ml kc lb mm mn kg mo bi translated">这项技术</h2><p id="7ad2" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">下面是构建这个网站时使用的三个主要web框架，以及我如何使用它们的简短描述:</p><ul class=""><li id="f1b0" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf nh mx my mz bi translated"><a class="ae lh" href="https://www.djangoproject.com" rel="noopener ugc nofollow" target="_blank"> Django </a>:配置服务器</li><li id="64e7" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf nh mx my mz bi translated"><a class="ae lh" href="https://www.django-rest-framework.org" rel="noopener ugc nofollow" target="_blank"> Django REST框架</a>:设置API端点将数据传递给浏览器</li><li id="d826" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf nh mx my mz bi translated"><a class="ae lh" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank">数据驱动文档</a>:用于在他们的站点上创建<a class="ae lh" href="https://observablehq.com/@d3/tidy-tree" rel="noopener ugc nofollow" target="_blank">“整洁树”。</a></li></ul><h2 id="2c59" class="md jl in bd jm me mf dn jq mg mh dp ju kt mi mj jy kx mk ml kc lb mm mn kg mo bi translated">框架是如何使用的</h2><p id="73ed" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">姜戈:制作模型</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nj"><img src="../Images/982b6c7977c7be6961f93e74ca458918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CgiD92lA6DxKeZcOdQnvWA.jpeg"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">创建新实验的请求-响应循环。</figcaption></figure><p id="0511" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">当用户第一次在站点上创建一个新实验时，服务器被配置为完成几个步骤:</p><ol class=""><li id="2f30" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf mw mx my mz bi translated">一个POST请求被发送到视图，它处理一个实验“对象”的创建，以及在疾病爆发过程中被感染的所有人的对象。</li><li id="72e7" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">在MVC架构方面，“Experiment”和person的类“InfectedNode”都是保存在数据库中的模型。数据库使用PostgresSQL，并使用“一对多”关系维护实验及其相关感染节点之间的连接。</li><li id="12f2" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">然后，用户被重定向到一个新视图，该视图显示模拟的结果。</li></ol><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nj"><img src="../Images/89ba24929dbc9a6eb9a415d7967d7ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l9O6RvBM9wJ7FnSoDe9jZw.jpeg"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">可视化实验感染树的请求-响应循环</figcaption></figure><p id="7d40" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated"><strong class="kk io"> Django REST框架:</strong>从后端向前端传递数据</p><ol class=""><li id="8088" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf mw mx my mz bi translated">从结果页面中，用户可以单击一个链接来查看一个单独的页面(为树的可视化留出尽可能多的空间)。这会向服务器发送一个HTTP GET请求。</li><li id="7c15" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">服务器做出响应，一旦用户到达下一个视图模板。我在这个页面的HTML中嵌入了一个AJAX调用，所以用户一登陆就触发另一个对API端点的GET请求，这个请求是使用Django REST框架建立的:InfectedNodeData。</li></ol><p id="7cd5" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated"><strong class="kk io">数据驱动文档(又名D3): </strong>可视化数据</p><p id="e9da" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">API端点的工作是将JSON响应发送回HTML模板，这样我就可以在D3框架上使用Javascript来可视化树。</p><p id="af15" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">这有点棘手，因为D3要求数据是递归结构的。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi nk"><img src="../Images/8f3ed053b37dc09b8a1e2237ba92fa7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iPmn5cs2lfOaseHXKXaWTg.png"/></div></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">以这棵小树为例。等效的JSON格式显示在左下方。</figcaption></figure><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/ec1357218d04614cb08f898389d0c293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*YZFhku3OPiu2oop029ccNA.png"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">为了生成树，JSON被格式化为根节点“嵌套”所有其他节点的所有数据。这个原则递归地应用于所有节点。</figcaption></figure><p id="90f9" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">这是因为InfectedNode模型本身的每个实例都必须保留两个引用:</p><ol class=""><li id="6b03" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf mw mx my mz bi translated">它的父节点(假定是一对一的关系)，是将病毒传递给它们的节点。</li><li id="b36e" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">它的子节点，也就是他们把病毒传给的节点。这是使用另一个一对多关系存储的。</li></ol><p id="989c" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">最终，通过使用预先排序的深度优先搜索，我能够以一种如左图所示的方式构建JSON:根节点。在字典的顶层(就像在树中一样)。</p><p id="f217" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">然后，它将引用嵌套到它的所有子节点，子节点将引用嵌套到它们的子节点，依此类推。嵌套仅在每个分支结束时结束:在一个叶节点，它没有对子节点的引用。</p><p id="3382" class="pw-post-body-paragraph ki kj in kk b kl ly kn ko kp lz kr ks kt ma kv kw kx mb kz la lb mc ld le lf ig bi translated">最后，这里是用于最终可视化树的Javascript代码，它再次使用了大量的D3 API来创建<a class="ae lh" href="https://observablehq.com/@d3/tidy-tree" rel="noopener ugc nofollow" target="_blank">“整齐的树。</a>“jQuery也被用来简化AJAX的使用。</p><figure class="lj lk ll lm gt ln"><div class="bz fp l di"><div class="nm mq l"/></div><figcaption class="lu lv gj gh gi lw lx bd b be z dk translated">嵌入HTML的Javascript代码，产生一个表示M向树的SVG。使用AJAX和jQuery从后端调用数据。</figcaption></figure><h1 id="cbbb" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">资源</h1><p id="09f8" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">感谢你读到这里，我个人感谢你对公共健康现状的足够关心来阅读我的作品。如果你觉得有用，请分享<a class="ae lh" href="https://herd-immunity.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">群体免疫</a>的链接。如果你是一名网页开发人员，想要提高你的技能，也请查看这些链接，以促进你的成长:</p><ol class=""><li id="e68c" class="mr ms in kk b kl ly kp lz kt mt kx mu lb mv lf mw mx my mz bi translated">通过探索<a class="ae lh" href="https://github.com/UPstartDeveloper/herd-immunity" rel="noopener ugc nofollow" target="_blank">群体免疫GitHub知识库</a>，了解更多关于网站架构的信息</li><li id="7152" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">在阿尔伯塔大学的这个<a class="ae lh" href="https://webdocs.cs.ualberta.ca/~holte/T26/m-way-trees.html" rel="noopener ugc nofollow" target="_blank">讲座中了解M-way树</a></li><li id="13b8" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">在Vaidehi Joshi的博客中了解<a class="ae lh" href="https://medium.com/basecs/deep-dive-through-a-graph-dfs-traversal-8177df5d0f13" rel="noopener">深度优先搜索树木</a></li><li id="3fc2" class="mr ms in kk b kl na kp nb kt nc kx nd lb ne lf mw mx my mz bi translated">查看关于在D3上创建整齐的树的笔记本</li></ol></div></div>    
</body>
</html>