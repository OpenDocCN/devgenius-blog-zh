<html>
<head>
<title>Creating Dropdown Menus with React Select</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 React Select 创建下拉菜单</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-dropdown-menus-with-react-select-94f053123a5e?source=collection_archive---------2-----------------------#2020-08-23">https://blog.devgenius.io/creating-dropdown-menus-with-react-select-94f053123a5e?source=collection_archive---------2-----------------------#2020-08-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1d373d79494b2999af6b33e71a3e5c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0D294MdsKKjZH6xy"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@lucija_ros?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Lucija Ros </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="ed40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React Select 是 React 应用程序的下拉菜单库。</p><p id="91af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它支持许多常规下拉菜单不支持的东西。</p><p id="ae4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用 React Select 添加菜单。</p><h1 id="e053" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">入门指南</h1><p id="de33" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过运行以下命令来安装该软件包:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="928f" class="mn lc iq mj b gy mo mp l mq mr">yarn add react-select</span></pre><p id="f94d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9a90" class="mn lc iq mj b gy mo mp l mq mr">npm i react-select</span></pre><p id="ced8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6026" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Select from "react-select";</span><span id="e858" class="mn lc iq mj b gy ms mp l mq mr">const options = [<br/>  { value: "apple", label: "Apple" },<br/>  { value: "orange", label: "Orange" },<br/>  { value: "grape", label: "Grape" }<br/>];</span><span id="355c" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Select options={options} /&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="6966" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了一个<code class="fe mt mu mv mj b">options</code>数组，每个条目都有<code class="fe mt mu mv mj b">value</code>和<code class="fe mt mu mv mj b">label</code>属性。</p><p id="6302" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将它传递给<code class="fe mt mu mv mj b">Select</code>组件。</p><p id="a224" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在标签显示在下拉列表中。</p><h1 id="9ed0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动画</h1><p id="2410" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b">makeAnimated</code>功能添加动画。</p><p id="048c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5429" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Select from "react-select";<br/>import makeAnimated from "react-select/animated";<br/>const animatedComponents = makeAnimated();</span><span id="d878" class="mn lc iq mj b gy ms mp l mq mr">const options = [<br/>  { value: "apple", label: "Apple" },<br/>  { value: "orange", label: "Orange" },<br/>  { value: "grape", label: "Grape" }<br/>];</span><span id="d6b7" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Select options={options} components={animatedComponents} /&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="e7be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">animatedComponents</code>作为<code class="fe mt mu mv mj b">components</code>道具的值传递，我们将看到一些动画。</p><h1 id="3445" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">自定义样式</h1><p id="03d4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用一个对象添加自定义样式。</p><p id="924c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dc5b" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Select from "react-select";</span><span id="de68" class="mn lc iq mj b gy ms mp l mq mr">const dot = (color = "#ccc") =&gt; ({<br/>  alignItems: "center",<br/>  display: "flex",</span><span id="e875" class="mn lc iq mj b gy ms mp l mq mr">":before": {<br/>    backgroundColor: color,<br/>    borderRadius: 10,<br/>    content: '" "',<br/>    display: "block",<br/>    marginRight: 8,<br/>    height: 10,<br/>    width: 10<br/>  }<br/>});</span><span id="3b49" class="mn lc iq mj b gy ms mp l mq mr">const styles = {<br/>  control: styles =&gt; ({ ...styles, backgroundColor: "white" }),<br/>  option: (styles, { data, isDisabled, isFocused, isSelected }) =&gt; {<br/>    return {<br/>      ...styles,<br/>      backgroundColor: "green",<br/>      color: "#ccc",<br/>      cursor: isDisabled ? "not-allowed" : "default",<br/>      ":active": {<br/>        ...styles[":active"],<br/>        backgroundColor: "orange"<br/>      }<br/>    };<br/>  },<br/>  input: styles =&gt; ({ ...styles, ...dot() }),<br/>  placeholder: styles =&gt; ({ ...styles, ...dot() }),<br/>  singleValue: (styles, { data }) =&gt; ({ ...styles, ...dot(data.color) })<br/>};</span><span id="b804" class="mn lc iq mj b gy ms mp l mq mr">const options = [<br/>  { value: "apple", label: "Apple" },<br/>  { value: "orange", label: "Orange" },<br/>  { value: "grape", label: "Grape" }<br/>];</span><span id="1e8f" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Select options={options} styles={styles} /&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="c932" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了一个<code class="fe mt mu mv mj b">dot</code>函数，它返回一个带有点样式的对象。</p><p id="c60c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">:before</code>包含了在文本左侧创建一个点的所有内容。</p><p id="ec8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">styles</code>具有控件、选项、输入、占位符和选定值的各种属性。</p><p id="146d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以根据<code class="fe mt mu mv mj b">isFocused</code>属性设置样式，该属性指示选择是否处于焦点中。</p><p id="72eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">isSelected</code>表示选择是否被选中。</p><p id="6d36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">data</code>是该项的数据。</p><p id="4177" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将所有这些内容传递给<code class="fe mt mu mv mj b">styles</code> prop。</p><h1 id="4dcd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">多选</h1><p id="98e3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe mt mu mv mj b">isMulti</code>道具启用多重选择。</p><p id="cfc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fc83" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import Select from "react-select";</span><span id="cf62" class="mn lc iq mj b gy ms mp l mq mr">const options = [<br/>  { value: "apple", label: "Apple" },<br/>  { value: "orange", label: "Orange" },<br/>  { value: "grape", label: "Grape" }<br/>];</span><span id="24d9" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Select options={options} isMulti /&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="b545" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以从列表中选择多个选项。</p><h1 id="ebbc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">异步加载选择</h1><p id="78ea" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以以异步方式加载选择。</p><p id="e4aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们使用了<code class="fe mt mu mv mj b">AsyncSelect</code>组件:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1891" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import AsyncSelect from "react-select/async";</span><span id="f3b2" class="mn lc iq mj b gy ms mp l mq mr">const options = [<br/>  { value: "apple", label: "Apple" },<br/>  { value: "orange", label: "Orange" },<br/>  { value: "grape", label: "Grape" }<br/>];</span><span id="c6ec" class="mn lc iq mj b gy ms mp l mq mr">const filterOptions = inputValue =&gt; {<br/>  return options.filter(i =&gt;<br/>    i.label.toLowerCase().includes(inputValue.toLowerCase())<br/>  );<br/>};</span><span id="f134" class="mn lc iq mj b gy ms mp l mq mr">const loadOptions = (inputValue, callback) =&gt; {<br/>  setTimeout(() =&gt; {<br/>    callback(filterOptions(inputValue));<br/>  }, 1000);<br/>};</span><span id="387f" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [inputValue, setInputValue] = React.useState("");<br/>  const handleInputChange = newValue =&gt; {<br/>    const inputValue = newValue.replace(/\W/g, "");<br/>    setInputValue(inputValue);<br/>    return inputValue;<br/>  };</span><span id="16b1" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;pre&gt;inputValue: "{inputValue}"&lt;/pre&gt;<br/>      &lt;AsyncSelect<br/>        cacheOptions<br/>        loadOptions={loadOptions}<br/>        defaultOptions<br/>        onInputChange={handleInputChange}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="ba20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们给出了按值过滤的<code class="fe mt mu mv mj b">filterOptions</code>方法。</p><p id="b824" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">loadOptions</code>让我们异步加载选项。</p><p id="efa1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它有一个<code class="fe mt mu mv mj b">inputValue</code>参数，当我们输入一些东西时，这个参数会被传入。</p><p id="aa30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">App</code>组件中，我们用输入框设置<code class="fe mt mu mv mj b">inputValue</code>。</p><p id="a879" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们有<code class="fe mt mu mv mj b">cacheOptions</code>来缓存选项。</p><p id="d515" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">defaultOptions</code>确定何时触发选项请求。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/136faa1dcf2a78f93de786092bfec8af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2KCvwzI1MoEiMWLI"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">彼得·奥斯拉内克在 Unsplash<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">拍摄的照片</a></figcaption></figure><h1 id="3b02" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="bea2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用 React Select 轻松创建下拉列表。</p><p id="2163" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建一个下拉菜单，支持选项的多重选择、样式和异步加载。</p></div></div>    
</body>
</html>