<html>
<head>
<title>PHP — P94: Sessions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PHP — P94:会话</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/php-p94-sessions-23e106ad374f?source=collection_archive---------2-----------------------#2022-11-11">https://blog.devgenius.io/php-p94-sessions-23e106ad374f?source=collection_archive---------2-----------------------#2022-11-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/55da8330767a52e26ce3d5d260afa224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-Oq88AH8mCD5QrgvKVbvA.jpeg"/></div></div></figure><p id="2aec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">什么是会话？这是一种在服务器上存储数据而不使用数据库的方法。当用户从一个页面转到另一个页面时，每个请求都会生成一组新的变量，用来帮助生成用户需要看到的页面。变量是临时的，这意味着一旦用户访问另一个页面，代码中的那些变量就消失了。到目前为止，为了实现数据持久性，我们使用了数据库。</p><p id="f566" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您需要永久的数据持久性，您绝对应该继续使用数据库。但是，如果您需要存储一些只在用户会话期间(他们主动访问您的 web 应用程序的时间)使用的数据，该怎么办呢？还能用数据库吗？当然了。但是比较慢，有点没必要。</p><p id="ee02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">PHP 有一个叫做会话的东西。会话是一个变量<code class="fe kw kx ky kz b">$_SESSION</code>，允许存储数据。<code class="fe kw kx ky kz b">$_SESSION</code>变量是一个超全局数组变量。</p><p id="04b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">会话是默认启用的，不需要任何类型的外部库或配置。</p><p id="b165" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">服务器如何不把用户的数据和其他用户的数据混淆？当会话初始化时，它是根据 PHP 为每个用户生成的唯一用户 id 来设置的。</p><p id="f1f5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了让会话跨页面保存数据，使用<code class="fe kw kx ky kz b">$_SESSION</code>的每个页面都需要用<code class="fe kw kx ky kz b">session_start()</code>函数启动。这将是你的文件的顶部。</p><h1 id="fbd8" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">例子</h1><p id="5319" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">解释够了，让我们看看它的行动。我们将创建两个文件:<code class="fe kw kx ky kz b">cart.php</code>和<code class="fe kw kx ky kz b">add_item.php</code>。<code class="fe kw kx ky kz b">cart</code>将显示总数，并且<code class="fe kw kx ky kz b">add_item</code>页面将每次将<code class="fe kw kx ky kz b">100</code>加到<code class="fe kw kx ky kz b">total</code>值上。</p><p id="a787" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">先来看看<code class="fe kw kx ky kz b">cart</code>吧。</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="da2c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们从调用<code class="fe kw kx ky kz b">session_start()</code>函数开始。这将允许我们的页面使用<code class="fe kw kx ky kz b">$_SESSION</code>变量。接下来，我们将检查<code class="fe kw kx ky kz b">$_SESSION['total']</code>数组键是否存在。记住<code class="fe kw kx ky kz b">$_SESSION</code>超全局是一个数组。如果不存在，我们就将其初始化为<code class="fe kw kx ky kz b">0</code>。接下来，我们将向用户显示总数。</p><p id="7eea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们访问购物车的第一次迭代中，我们将得到:<code class="fe kw kx ky kz b">The total price for items in your cart is: 0</code>。</p><p id="5b6f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来是<code class="fe kw kx ky kz b">add_item</code>页面。</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="7157" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">会话将再次启动。我们需要检查是否设置了总数，因为用户可能会在访问购物车之前访问该页面。如果尚未设置会话，则<code class="fe kw kx ky kz b">$_SESSION['total']</code>将被初始化为<code class="fe kw kx ky kz b">100</code>。如果设置了<code class="fe kw kx ky kz b">total</code>，那么我们只需增加<code class="fe kw kx ky kz b">100</code>。</p><p id="c6fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">访问该页面后，点击<code class="fe kw kx ky kz b">Visit the cart</code>链接，您会看到您的总数现在是<code class="fe kw kx ky kz b">100</code>。再次返回<code class="fe kw kx ky kz b">add_item</code>页面，再次访问<code class="fe kw kx ky kz b">cart</code>，查看<code class="fe kw kx ky kz b">total</code>值增加到<code class="fe kw kx ky kz b">200</code>的情况。这是唯一可能的，因为您正在使用<code class="fe kw kx ky kz b">$_SESSION</code>超全局。</p><p id="587b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了清除<code class="fe kw kx ky kz b">total</code>，我们可以只设置<code class="fe kw kx ky kz b">$_SESSION['total’] = 0</code>。如果我们想从$_SESSION 变量中完全删除总数会怎么样？我们使用<code class="fe kw kx ky kz b">unset()</code>功能。</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="63a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要完全删除特定用户的会话，使用<code class="fe kw kx ky kz b">session_destroy()</code>功能。</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><h1 id="04ee" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">摘要</h1><p id="0156" class="pw-post-body-paragraph jy jz iq ka b kb ly kd ke kf lz kh ki kj ma kl km kn mb kp kq kr mc kt ku kv ij bi translated">说到疗程就是这样。这是服务器端的临时数据持久性。接下来我们将看看 cookies，它是客户端的数据持久性。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><figure class="md me mf mg gt jr gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/3056cc608d3d72c2acf58be7f446d01c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*X1SmxZYgXqGhXyVQ.jpeg"/></div></figure><p id="d2ef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Dino Cajic 目前是<a class="ae mr" href="http://absolutebiotech.com/" rel="noopener ugc nofollow" target="_blank"> Absolute Biotech </a>的 IT 主管，该公司是<a class="ae mr" href="https://www.lsbio.com/" rel="noopener ugc nofollow" target="_blank"> LSBio(寿命生物科学公司)</a>、<a class="ae mr" href="https://absoluteantibody.com/" rel="noopener ugc nofollow" target="_blank"> Absolute 抗体</a>、<a class="ae mr" href="https://www.kerafast.com/" rel="noopener ugc nofollow" target="_blank"> Kerafast </a>、<a class="ae mr" href="https://everestbiotech.com/" rel="noopener ugc nofollow" target="_blank"> Everest BioTech </a>、<a class="ae mr" href="https://www.nordicmubio.com/" rel="noopener ugc nofollow" target="_blank"> Nordic MUbio </a>和<a class="ae mr" href="https://www.exalpha.com/" rel="noopener ugc nofollow" target="_blank"> Exalpha </a>的母公司。他还担任我的自动系统的首席执行官。他拥有计算机科学学士学位，辅修生物学，并拥有十多年的软件工程经验。他的背景包括创建企业级电子商务应用程序、执行基于研究的软件开发，以及通过写作促进知识的传播。</p><p id="2964" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在<a class="ae mr" href="https://www.linkedin.com/in/dinocajic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系他，在<a class="ae mr" href="https://instagram.com/think.dino" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上关注他，或者<a class="ae mr" href="https://dinocajic.medium.com/subscribe" rel="noopener">订阅他的媒体出版物</a>。</p><p id="6e55" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">阅读迪诺·卡吉克(以及媒体上成千上万的其他作家)的每一个故事。你的会员费直接支持迪诺·卡吉克和你阅读的其他作家。你也可以在媒体上看到所有的故事。T9】</p></div></div>    
</body>
</html>