# 当你输入一个网址并按下回车键时会发生什么？

> 原文：<https://blog.devgenius.io/what-happens-when-you-type-an-url-and-press-enter-ed94a3096002?source=collection_archive---------4----------------------->

我做了相当多的采访。所以我应该很擅长。熟能生巧，对吗？我们做得越多，我们就做得越好。或者至少，理论上是这样。实际上，我仍然觉得采访一个人很难。

![](img/f31fdb2d875c102ed5530076e6bc69b7.png)

萨姆·麦克格在 [Unsplash](https://unsplash.com/s/photos/interview?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上拍摄的照片

任何面试的目的都是审查候选人是否能为公司做出有价值的贡献，并评估他们的水平。就是这样！

不需要脑筋急转弯，不可能的情况，怪异的算法，或合成的学术风格问题。我们需要一个队友，而不是技术兰博。

对候选人进行评估是一个困难的话题，因为对于初级、中级和高级工程师没有一个清晰的定义，这个定义在整个行业都适用。不同的公司有很大的不同。我见过写不出单元测试的“学长”。或者认为一个 2000 多行的代码文件就足够了。

> 对于初级、中级和高级工程师没有一个清晰的定义，这个定义在整个行业都适用

通常，在任何给定的时间，在不同的团队，在不同的级别，公司都有几个职位。完成面试后，我应该能给候选人介绍最合适的人选。为了做到这一点，我需要在面试中调整我的期望值。

我是在面试一位资深人士吗，我应该跳过简单的问题吗？还是中级工程师？候选人是全才还是领域专家？这种校准应该在会议的前几分钟内快速进行，不要占用实际面试的太多时间。

确定这一点的一个简单方法是问求职者一个简单的问题:“*从你在浏览器的地址栏输入内容到页面完全加载之间发生了什么？*”。不到 5 分钟就能给出全面的回答。根据细节的层次，很容易判断候选人的水平。

> 从你在浏览器的地址栏中输入内容到页面完全加载之间会发生什么？

## 是搜索词还是网址？

现代浏览器允许用户直接从地址栏输入关键字并执行搜索，而不必先导航到搜索引擎。所以第一步是确定地址栏中的字符串是 URL 还是搜索词。在第二种情况下，字符串将被嵌入到搜索引擎 URL 中。

*我认为这个问题的答案应该来自一个注重细节的中级工程师。可以与产品紧密合作的人员。*

## DNS 解析

下一步是 DNS 或域名系统解析。DNS 的目的是通过将域名转换为 IP 地址来提供人性化的域名。记住[google.com](http://www.google.com)比记住[216.58.211.46](http://216.58.211.46)要容易得多。

*这是初级或中级应聘者给出的最低答案。*

我希望资深和完整堆栈的候选人能够进入细节。在查询 DNS 服务器之前，浏览器将首先查询自己的缓存。如果未找到匹配记录，它将查询操作系统的缓存。

OS 有自己的缓存，而且作为过去的一个工件，它还托管一个文件:

*   *nix 系统上的`/etc/hosts`
*   `c:\windows\system32\drivers\etc\hosts`在 Windows 上

其在发起外部连接之前被查询。

如果无法提供本地答案，浏览器将连接到 DNS 服务器，并询问与它尝试连接到的域关联的 IP 地址。

*这将是我从资深候选人那里得到的答案。任何额外的细节水平只是肉汁。*

DNS 在端口 53 上运行。在到达 DNS 服务器之前，可以从沿着路径的网络节点之一的高速缓存中检索与查询相关联的 IP。DNS 解析可以运行其他优化，例如将用户指向更靠近其地理位置的服务器，以减少网络延迟，或执行循环调度，在运行相同服务的多台服务器之间分配流量。

## 连接到服务器

一旦 IP 地址可用，浏览器将启动到服务器的连接。根据所使用的协议，连接将位于端口 80(用于 HTTP)或 443(用于 HTTPS)。

在这两种情况下，HTTP 方法或“动词”都是 GET，用于从服务器请求信息。其他常用的方法有:

*   POST —用于向服务器提交数据。在 REST 下，它被用来创建新的实体
*   PUT —也用于向服务器提交数据，但目标是更新现有资源
*   DELETE —用于指示必须删除资源

*这将是一个很好的回答，我认为从中层候选人开始*。

*资深候选人应该能够解释 HTTPS 相对于普通 HTTP 通信的优势*。

HTTPS 使用一种称为传输层安全性(简称 TLS)的协议来加密客户端和服务器之间的连接。通过这样做，即使流量被拦截，也能防止窃听或篡改，保证隐私和数据完整性。

除非面试的是一个对安全敏感的职位，否则我不会期望即使是资深候选人也会深入细节。

一个候选人能够提到更奇特的 HTTP 方法，如 HEAD、CONNECT、TRACE、OPTIONS 或 PATCH，这只是运气好而已。除非他们能想出一个惊人的用例，否则就我个人而言，除了良好的记忆力之外，我不会从展示这些知识的申请人那里得到任何深入的见解。

## 处理请求并发回响应

几乎总是，HTTP 服务器将请求传递给处理程序。处理程序是一个应用程序，它根据来自请求的信息，如路径、cookies、头、查询字符串或它们的组合，生成特定的响应并将其发送回客户端。

*我对初级候选人的这种详细程度感到满意。对于中级人员，我希望能够说出一些 HTTP 状态及其含义。*

响应有 3 个部分:状态行、标题和正文。状态行最重要的部分是响应代码，这是一个 3 位数的数字，属于以下类别之一:

*   1xx —信息性，请求已收到，客户端应继续
*   2xx — OK 响应，请求已被处理，没有错误
*   3xx 移动代码，请求的资源被移动到不同的 URL
*   4xx —客户端错误
*   5xx —服务器端错误

如果你喜欢动物，想了解更多关于 HTTP 状态码的知识，根据你的喜好: [HTTP 状态狗](https://httpstatusdogs.com/)或者 [HTTP 猫](https://http.cat/)。

头包含额外的信息，比如响应体的 [MIME 类型](https://en.wikipedia.org/wiki/Media_type)，内容应该缓存多长时间，有效负载是否被 gzipped，等等。

*我希望资深候选人能够解释请求/响应机制，并给出一些 HTTP 状态代码和响应头的示例。*

## 显示页面

客户端获得响应后，开始解析响应以显示页面。浏览器将解释 HTML 并创建 DOM 树。如果找到 CSS，浏览器也会创建 CSSOM 树。

这两个实体是彼此独立创建的，但它们组合在一起形成了“呈现树”，一种封装了最终将呈现在页面上的所有元素的树结构。渲染树只包含可见元素，不包含用`display: none`隐藏的元素。

CSS 被视为“呈现阻止资源”，这意味着无论何时遇到它，它都将停止组装呈现树，直到解析 CSS。由于其级联性质，CSS 不能以块的形式使用，这意味着在浏览器可以移动到下一步之前，必须对其进行完全分析。

从优化的角度来看，重要的是不要向浏览器发送未在当前页面上使用的 CSS。

Javascript 代码也是一种阻塞资源。由于 js 代码可以以编程方式更改 CSS 和 DOM，一旦遇到 Javascript，DOM 和 CSSOM 的呈现都将停止，直到代码完成执行。

*我认为中级工程师和全堆栈年长者应该了解阻塞/非阻塞内容，纯前端年长者应该能够深入了解细节。*

据 Medium 介绍，阅读这篇文章的时间大约为 6 分钟，其他时间不计在内。把这些都去掉，我们只剩下 4-5 分钟，这是一个有经验的应聘者给出一个全面的答案所需要的时间。