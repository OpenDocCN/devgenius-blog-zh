<html>
<head>
<title>Top React Hooks — Modals and Visibility</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">顶部反应挂钩—模态和可见性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/top-react-hooks-modals-and-visibility-33d2801f3705?source=collection_archive---------10-----------------------#2020-10-12">https://blog.devgenius.io/top-react-hooks-modals-and-visibility-33d2801f3705?source=collection_archive---------10-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/83ebf2a28f30458325ffb657890e24f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A-6bv92r5y57Qe6Y"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Todd Quackenbush 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e0da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Hooks 包含了 React 应用程序中的逻辑代码。</p><p id="4586" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以创建自己的钩子，使用别人提供的钩子。</p><p id="c5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看一些有用的 React 挂钩。</p><h1 id="b1ff" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应-挂钩-使用-模态</h1><p id="49fa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">react-hooks-use-modal 库让我们可以轻松地创建一个模型。</p><p id="3635" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a87c" class="mn lc iq mj b gy mo mp l mq mr">npm i react-hooks-use-modal</span></pre><p id="1756" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="aaac" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import useModal from "react-hooks-use-modal";</span><span id="e500" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [Modal, open, close, isOpen] = useModal("root", {<br/>    preventScroll: true<br/>  });<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;{isOpen ? "Yes" : "No"}&lt;/p&gt;<br/>      &lt;button onClick={open}&gt;OPEN&lt;/button&gt;<br/>      &lt;Modal&gt;<br/>        &lt;div&gt;<br/>          &lt;h1&gt;Title&lt;/h1&gt;<br/>          &lt;p&gt;hello world.&lt;/p&gt;<br/>          &lt;button onClick={close}&gt;CLOSE&lt;/button&gt;<br/>        &lt;/div&gt;<br/>      &lt;/Modal&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="24ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在一些参数中使用了<code class="fe mt mu mv mj b">useModal</code>钩子。</p><p id="1ddc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数是模态附加到的元素的 ID。</p><p id="6ad4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数有一些选项。</p><p id="5780" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">preventScroll</code>设置为<code class="fe mt mu mv mj b">true</code>时，防止主体滚动。</p><p id="1f4e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用它返回的数组。</p><p id="ffb6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Modal</code>有情态成分。</p><p id="9a52" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">open</code>是打开模态的功能。</p><p id="4e5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">close</code>是关闭模态的功能。</p><p id="f549" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">isOpen</code>具有指示模态是否打开的状态。</p><h1 id="ed16" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应-挂钩-可见</h1><p id="218c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">react-hooks-visible 库为我们提供了一个钩子来检测元素的可见性。</p><p id="3824" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它使用 Observer API 来检测元素的可见性。</p><p id="7f07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装它时，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3890" class="mn lc iq mj b gy mo mp l mq mr">yarn add react-hooks-visible</span></pre><p id="4249" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="960d" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { useVisible } from "react-hooks-visible";</span><span id="7fd9" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [targetRef, visible] = useVisible();<br/>  return (<br/>    &lt;div ref={targetRef}&gt;<br/>      &lt;p style={{ position: "fixed" }}&gt;{visible * 100} % visible&lt;/p&gt;<br/>      {Array(1000)<br/>        .fill()<br/>        .map((_, i) =&gt; (<br/>          &lt;p&gt;{i}&lt;/p&gt;<br/>        ))}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="fc77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe mt mu mv mj b">useVisible</code>钩子返回<code class="fe mt mu mv mj b">targetRef</code>，并将其传递给我们想要观察的元素的<code class="fe mt mu mv mj b">ref</code>道具。</p><p id="8560" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">visible</code>返回可见元素的百分比。</p><p id="b75d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会随着可见性百分比的变化而更新。</p><p id="eede" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以向钩子传递一个参数来格式化数字。</p><p id="7609" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b482" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { useVisible } from "react-hooks-visible";</span><span id="d404" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [targetRef, visible] = useVisible(vi =&gt; (vi * 100).toFixed(2));<br/>  return (<br/>    &lt;div ref={targetRef}&gt;<br/>      &lt;p style={{ position: "fixed" }}&gt;{visible} % visible&lt;/p&gt;<br/>      {Array(1000)<br/>        .fill()<br/>        .map((_, i) =&gt; (<br/>          &lt;p&gt;{i}&lt;/p&gt;<br/>        ))}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="38fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe mt mu mv mj b">visible</code>数字四舍五入到小数点后两位。</p><p id="7a09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以返回一个数字以外的东西。</p><p id="8679" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="611e" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { useVisible } from "react-hooks-visible";</span><span id="c34a" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [targetRef, isVisible] = useVisible(vi =&gt; vi &gt; 0.5);<br/>  return (<br/>    &lt;div ref={targetRef}&gt;<br/>      &lt;p style={{ position: "fixed" }}&gt;{isVisible.toString()} &lt;/p&gt;<br/>      {Array(10)<br/>        .fill()<br/>        .map((_, i) =&gt; (<br/>          &lt;p&gt;{i}&lt;/p&gt;<br/>        ))}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="5de4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个回调函数，它返回一个布尔表达式，将可见性小数与 0.5 进行比较。</p><p id="d5ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">isVisible</code>是一个布尔值，表示元素是否可见一半以上。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/48303c065504c2bdb61c672cffc686f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1afh2dhpwzDTtA41"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@mvdheuvel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马腾·范登·霍维尔</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="7807" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ad3d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">react-hooks-use-modal 库让我们可以轻松地创建一个模型。</p><p id="f323" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">react-hooks-visible 让我们观察元素的可见性。</p></div></div>    
</body>
</html>