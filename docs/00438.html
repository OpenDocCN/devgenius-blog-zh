<html>
<head>
<title>GIT Internals</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GIT 内部</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/git-internals-347ec16ba507?source=collection_archive---------15-----------------------#2020-06-07">https://blog.devgenius.io/git-internals-347ec16ba507?source=collection_archive---------15-----------------------#2020-06-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/af9fedf06832e83a0a484aebb7f2ce4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*4v07mdA6_SxpGJwX7hli8Q.png"/></div></figure><p id="f810" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">大多数开发者都知道版本控制系统，GIT 就是其中之一。</p><blockquote class="kp kq kr"><p id="c36c" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated"><strong class="jt io">GIT 是什么？</strong></p></blockquote><p id="d376" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">GIT 是一种用于实现所谓版本控制系统的技术。GIT 能够跟踪对源代码或其他文件或文件夹集合的更改，正如(<strong class="jt io"> VCS </strong> - <strong class="jt io">版本控制系统</strong>)的名字所暗示的那样，这些工具有助于跟踪某组文档的更改历史，除此之外，它们还促进了协作，因此它们对于在软件项目中与一组人合作非常有用。</p><p id="3006" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">GIT 在一系列快照中跟踪对文件夹及其内容的更改，因此您可以像软件项目一样捕获文件夹的整个状态以及其中的所有内容，并且在一系列快照中有多个这样的快照每个快照都封装了包含在某个顶级目录中的整个文件和文件夹集，然后版本控制系统还会维护大量元数据以及对内容的实际更改，这是为了使它 可以计算出谁对特定文件进行了特定的更改，或者何时进行了特定的更改，所有 GIT 都维护元数据，如作者和提交时间戳，您还可以将额外的消息附加到这些快照等。</p><blockquote class="kp kq kr"><p id="97fc" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated"><strong class="jt io">GIT 给我们增加了什么价值？</strong></p></blockquote><ul class=""><li id="2804" class="kw kx in jt b ju jv jy jz kc ky kg kz kk la ko lb lc ld le bi translated">它跟踪你的代码的变化。所以，如果你有代码，你创建一个文件，也许你正在做修改，Git 会跟踪你对你的代码所做的所有不同的修改，这样，在任何时候，你都可以回过头来看看你一直在做的任何事情的历史，看看你以前做了什么修改，你什么时候做的那些修改。当你回去试着调试，找出在代码过程的某个阶段出了什么问题时，这有时会有帮助。这就是 Git 的用处之一。</li><li id="bbd3" class="kw kx in jt b ju lf jy lg kc lh kg li kk lj ko lb lc ld le bi translated">这对于在不同的人之间同步代码是很有用的。尤其是当你和别人合作的时候。Git 对于确保您的代码可能匹配其他人正在处理的代码是很有价值的。所以想象一下，你和一个合作者都试图在同一时间一起处理同一段代码。因此，也许代码存在于某个服务器上，有一大堆服务器可以托管我们称之为 git 的存储库。</li><li id="d55b" class="kw kx in jt b ju lf jy lg kc lh kg li kk lj ko lb lc ld le bi translated">当我们想要测试我们的更改时，Git 会很有帮助。在我开始使用 Git 之前，我会尝试修改代码以使它变得更好，然后突然发现代码不再工作了。因此，我最初的解决方案是做一些事情，比如复制我的原始文件，保存旧文件，然后进行更改，这样，如果它出错了，我就可以回到原始文件，而不会丢失原始文件。结果变得非常非常混乱。特别是如果你进入一个更大的项目，并且与多人一起工作，你将会有很多不同的旧版本，并且可能很难保持跟踪。所以 Git 使得保存原始版本的代码变得非常容易，测试出你可能想要添加的新更改，并且，只有当你确定你喜欢这些更改，它们起作用，你想要将它们与你的原始文件合并，你才能将它们与你最初处理的原始文件合并。</li><li id="35dd" class="kw kx in jt b ju lf jy lg kc lh kg li kk lj ko lb lc ld le bi translated">Git 对于将更改恢复到代码的旧版本非常有用。假设您在开发过程中对代码进行了更改，但后来意识到这并不是您真正想要进行的更改，并且您想要回到旧版本。Git 使它变得非常容易。只要你知道你想回到哪个版本，你就可以回到那个旧版本，从你之前的地方重新开始。这是 Git 的概述，如果你能很好地利用它的功能，Git 能为你做些什么。</li></ul><blockquote class="kp kq kr"><p id="ceee" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated"><strong class="jt io"> GIT 仓库</strong></p></blockquote><p id="f395" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">GIT 存储库是一个数据库，包含了保留和管理项目的修订和历史所需的所有信息。在 GIT 中，一个存储库在其整个生命周期中保留了整个项目的完整副本。在存储库中，GIT 维护两种主要的数据结构，对象存储和索引。所有这些存储库数据都存储在工作目录的根目录下一个名为. git 的隐藏子目录中。</p><blockquote class="kp kq kr"><p id="9b18" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated"><strong class="jt io"> GIT 对象类型</strong></p></blockquote><p id="e93e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">GIT 的存储库实现的核心是对象存储。它包含您的原始数据文件和所有日志消息、作者信息、日期，以及重建项目的任何版本或分支所需的其他信息。</p><p id="f58d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">GIT 在对象存储中只放置四种类型的对象:blob<strong class="jt io"><em class="ks"/></strong>，<strong class="jt io"> <em class="ks"> trees </em> </strong>，<strong class="jt io"> <em class="ks"> commits </em> </strong>，以及<strong class="jt io"> <em class="ks"> tags </em> </strong>。这四个原子对象构成了 GIT 高级数据结构的基础。</p><ul class=""><li id="ede8" class="kw kx in jt b ju jv jy jz kc ky kg kz kk la ko lb lc ld le bi translated"><strong class="jt io">斑点</strong></li></ul><p id="2a45" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">文件的每个版本都表示为一个 blob。Blob 是“二进制大对象”的缩写，是一个在计算中常用的术语，指的是可以包含任何数据并且其内部结构被程序忽略的一些变量或文件。blob 被视为不透明的，它保存文件的数据，但不包含关于文件的任何元数据，甚至不包含其名称。</p><ul class=""><li id="5d0d" class="kw kx in jt b ju jv jy jz kc ky kg kz kk la ko lb lc ld le bi translated"><strong class="jt io">树木</strong></li></ul><p id="0987" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">树对象代表一级目录信息。它记录了一个目录中所有文件的 blob 标识符、路径名和一些元数据。它还可以递归地引用其他(子)树对象，从而构建完整的文件和子目录层次结构。</p><ul class=""><li id="c852" class="kw kx in jt b ju jv jy jz kc ky kg kz kk la ko lb lc ld le bi translated"><strong class="jt io">提交</strong></li></ul><p id="6f37" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">提交对象保存引入到存储库中的每个变更的元数据，包括作者、提交者、提交日期和日志消息。每次提交都指向一个树对象，该树对象在一个完整的快照中捕获执行提交时存储库的状态。</p><ul class=""><li id="1b88" class="kw kx in jt b ju jv jy jz kc ky kg kz kk la ko lb lc ld le bi translated"><strong class="jt io">标签</strong></li></ul><p id="542d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">tag 对象为一个特定的对象(通常是一个 commit)指定一个任意的但可能是人类可读的名称。</p><p id="2cf4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">随着时间的推移，对象存储中的所有信息都会发生变化和增长，从而对项目的编辑、添加和删除进行跟踪和建模。为了有效地使用磁盘空间和网络带宽，GIT 将对象压缩并存储在包文件中，这些文件也放在对象存储中。</p><blockquote class="kp kq kr"><p id="7514" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated"><strong class="jt io">内容可寻址名称</strong></p></blockquote><p id="f41f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Git 对象存储是作为一个内容可寻址存储系统来组织和实现的。具体来说，对象存储中的每个对象都有一个唯一的名称，这是通过对对象的内容应用 SHA1 而产生的，从而产生一个 SHA1 哈希值。因为对象的完整内容对散列值有贡献，并且散列值被认为对于该特定内容是有效唯一的，所以 SHA1 散列是对象数据库中该对象的足够的索引或名称。对文件的任何微小更改都会导致 SHA1 哈希发生变化，从而导致文件的新版本被单独索引。</p><p id="e576" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">SHA1 值是 160 位值，通常表示为 40 位十六进制数，如 9 da 581d 910 c 9 C4 AC 93557 ca 4859 e 767 F5 caf 5169。有时，在显示过程中，SHA1 值被缩写成一个较小的唯一前缀。Git 用户谈到 SHA1、哈希代码，有时对象 ID 也可以互换。</p><blockquote class="kp kq kr"><p id="15c5" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated"><strong class="jt io">GIT 和区块链的比较</strong></p></blockquote><p id="7b10" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">GIT 和区块链看起来很相似，因为它们都使用 merkle 树作为底层数据结构。merkle 树是这样一种树，其中每个节点都标有其内容的加密散列值，包括其子节点的标签。</p><p id="a5ac" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">GIT 的有向无环图就是这样一个 merkle 树，其中每个节点(标签、提交、树或 blob 对象)都用其内容的散列和其子节点的标签来标记。请注意，对于提交，子术语与 GIT 对父术语的理解有些冲突:父提交是提交的子，您只需要将图形视为一棵通过重新扎根而不断增长的树。</p><p id="c8a0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">区块链与此非常相似，因为他们也在以这种方式增长，并且他们也在使用 merkle tree 属性来确保数据完整性。但通常，区块链被理解为不仅仅是 merkle 树，这是他们与 GIT 分离的地方。例如，区块链通常也意味着在块级别上有一个高度分散的系统(不是所有的块都需要在同一个地方)。</p><blockquote class="kp kq kr"><p id="7222" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated">G <strong class="jt io">它命令</strong></p></blockquote><p id="8662" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">克隆:</strong>将一个存储库克隆到一个新目录中</p><p id="6d80" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> init: </strong>创建一个空的 Git 存储库或者重新初始化一个现有的</p><p id="0793" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">添加:</strong>将文件内容添加到索引</p><p id="a712" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">移动或重命名文件、目录或符号链接</p><p id="a263" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">复位:</strong>将当前机头复位到指定状态</p><p id="65d0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> rm: </strong>从工作树和索引中删除文件</p><p id="36cd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">二等分:</strong>使用二分搜索法来查找引入 bug 的提交</p><p id="14d7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> grep: </strong>打印匹配图案的线条</p><p id="2e52" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">日志:</strong>显示提交日志</p><p id="6706" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">显示:</strong>显示各种类型的物体</p><p id="b8d3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">状态:</strong>显示工作树状态</p><p id="1fdb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">分支:</strong>列出、创建或删除分支</p><p id="4d30" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">检出:</strong>切换分支或恢复工作树文件</p><p id="d4b2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">提交:记录对存储库的变更</p><p id="41df" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> diff: </strong>显示提交、提交和工作树等之间的变化</p><p id="539a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">合并:</strong>将两个或更多的开发历史结合在一起</p><p id="80b6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> rebase: </strong>转发端口本地提交到更新的上游头</p><p id="c17e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">标签:</strong>创建、列出、删除或验证用 GPG 签名的标签对象</p><p id="bd09" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">获取:</strong>从另一个存储库中下载对象和引用</p><p id="87eb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">拉取:</strong>从另一个存储库或本地分支获取并集成</p><p id="e35e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">推送:</strong>更新远程参考以及相关对象</p><p id="3c61" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> git 帮助&lt;命令&gt;</strong>——将帮助你如何使用该命令</p><blockquote class="kp kq kr"><p id="00c7" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated"><strong class="jt io">参考文献</strong></p></blockquote><div class="lk ll gp gr lm ln"><a href="https://www.oreilly.com/library/view/version-control-with/9781449345037/ch04.html#:~:text=Git%20places%20only%20four%20types,Git%27s%20higher%20level%20data%20structures.&amp;text=Each%20version%20of%20a%20file%20is%20represented%20as%20a%20blob" rel="noopener  ugc nofollow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd io gy z fp ls fr fs lt fu fw im bi translated">Git 版本控制，第二版</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">第四章。基本 Git 概念基本概念上一章介绍了 Git 的一个典型应用——可能…</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">www.oreilly.com</p></div></div><div class="lw l"><div class="lx l ly lz ma lw mb jp ln"/></div></div></a></div><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mg mh l"/></div></figure><div class="lk ll gp gr lm ln"><a href="https://stackoverflow.com/questions/46192377/why-is-git-not-considered-a-block-chain#:~:text=The%20reason%20why%20Git%20and,the%20labels%20of%20its%20children." rel="noopener  ugc nofollow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd io gy z fp ls fr fs lt fu fw im bi translated">为什么 Git 不被认为是“区块链”？</h2><div class="lu l"><h3 class="bd b gy z fp ls fr fs lt fu fw dk translated">正如 poke 所说:Git 和区块链看起来很相似，因为它们都使用 Merkle 树来存储有序的时间戳…</h3></div><div class="lv l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">stackoverflow.com</p></div></div><div class="lw l"><div class="mi l ly lz ma lw mb jp ln"/></div></div></a></div></div></div>    
</body>
</html>