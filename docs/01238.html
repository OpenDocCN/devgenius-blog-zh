<html>
<head>
<title>How to Customize the Git Bash Shell Prompt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何定制 Git Bash Shell 提示符</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-customize-the-git-bash-shell-prompt-336f6aefcf3f?source=collection_archive---------0-----------------------#2020-06-28">https://blog.devgenius.io/how-to-customize-the-git-bash-shell-prompt-336f6aefcf3f?source=collection_archive---------0-----------------------#2020-06-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4e66" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">所以您想在 Git Bash 提示符中隐藏您的用户名@主机名？以下是方法。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8bc94d6612aa8afadc33ac39973baab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bTLvi0t_YSsJFiF5N2W11g.png"/></div></div></figure><p id="f3fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Git for Windows 提供了许多原生和轻量级工具，以及一个 Bash 仿真，为用户带来了 shell 体验。默认的 Bash 终端如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lo"><img src="../Images/a03e416fc1bd600610d3c7796a5a9a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enjGPLH7SficAkXBeL0eNA.png"/></div></div></figure><p id="83d1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">终端窗口标题包含当前目录的完整路径，提示符显示当前用户名、主机名以及当前工作目录的路径。如果当前工作目录是一个 Git 存储库，那么提示符还会显示 Git 分支名称。我们应该意识到终端提供的信息非常丰富。</p><p id="1efa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，有时我们不想显示当前目录的完整路径或我们的用户名和主机名。比如我不想在博文里的截图里暴露我的用户名和我的机器名。所以我配置 Git Bash 终端窗口显示一个静态字符串“<code class="fe lp lq lr ls b">git@local</code>”作为用户名和主机名，只显示当前工作目录的<code class="fe lp lq lr ls b">basename</code>。这样，我可以隐藏一些个人信息。我的终端窗口如下图所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/90e38c14f0cdc029eb91334e6a56131f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lZDJVSmbPqtMEfV7L2Cr5w.png"/></div></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="ebcb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">根据 Alan P. Barber ( <a class="ae ln" href="https://alanbarber.com/post/how-to-customize-the-git-for-windows-bash-shell-prompt/" rel="noopener ugc nofollow" target="_blank">链接</a>)的一篇文章，定制 Bash 提示符实际上非常容易。</p><p id="254b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们需要确定 Git for Windows 的安装路径，并通过在 Git Bash 终端中执行以下命令找到配置文件定义文件夹。</p><pre class="kg kh ki kj gt mb ls mc md aw me bi"><span id="6238" class="mf mg iq ls b gy mh mi l mj mk">cd /etc/profile.d/<br/>explorer .</span></pre><p id="954d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的命令将在文件浏览器中打开一个文件夹，如下面的屏幕截图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/1f9e3729365ce222d1909d0a2f06cfae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qvO_LtQgrPCqOlCvXh8dEw.png"/></div></div></figure><p id="7986" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们正在<code class="fe lp lq lr ls b">profile.d</code>文件夹中寻找<code class="fe lp lq lr ls b">git-prompt.sh</code>文件。<code class="fe lp lq lr ls b">git-prompt.sh</code>文件包含 Git Bash 终端标题和 Bash 提示符字符串的配置。我们可以改变提示的颜色，并根据需要修改提示的内容。默认的<code class="fe lp lq lr ls b">git-prompt.sh</code>文件有以下内容。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="b55b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe lp lq lr ls b">git-prompt.sh</code>文件有详细的注释，对我们的定制有很大的帮助。我们可以修改这个文件来定制我们的 Git Bash 终端，或者我们可以保持这个文件不变，并将我们的配置保存到我们的主目录中(参见第 8 到 11 行)。我更喜欢后一种方式，因为我可以保持原始的<code class="fe lp lq lr ls b">git-prompt.sh</code>文件完好无损。因此，我创建了一个文件夹<code class="fe lp lq lr ls b">~/.config/git</code>，在这个文件夹中我创建了一个文件<code class="fe lp lq lr ls b">~/.config/git/git-prompt.sh</code>，它优先于默认的<code class="fe lp lq lr ls b">git-prompt.sh</code>文件。下面的代码片段显示了我的配置文件的内容。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="5829" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于这个文件，我的终端提示符如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/0ae8d41e5afc2cf5268cc00c8c6ec2f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U11bJafGVT9a87Qim2vJ-Q.png"/></div></div></figure><p id="dc9a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们主要需要自定义<code class="fe lp lq lr ls b">PS1</code>字符串(主要提示)。<code class="fe lp lq lr ls b">PS1</code>字符串使用一组 Bash 提示反斜杠转义的特殊字符来显示动态内容。例如，<code class="fe lp lq lr ls b">\u</code>代表当前用户的用户名，<code class="fe lp lq lr ls b">\w</code>(小写)是当前工作目录的路径，<code class="fe lp lq lr ls b">\W</code>(大写)是当前工作目录的基名，以此类推。下表显示了可用于配置提示符的所有转义字符。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk translated">Bash 提示转义字符</figcaption></figure><p id="5394" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe lp lq lr ls b">PS1</code>字符串的构造也使用了一些<a class="ae ln" href="https://en.wikipedia.org/wiki/ANSI_escape_code" rel="noopener ugc nofollow" target="_blank"> ANSI 颜色转义码</a>。颜色转义码以<code class="fe lp lq lr ls b">\[</code>开始，以<code class="fe lp lq lr ls b">\]</code>结束。颜色格式为<code class="fe lp lq lr ls b">\033[32m</code>，其中<code class="fe lp lq lr ls b">\033</code>代表 ASCII 转义字符，代码<code class="fe lp lq lr ls b">32</code>代表前景色绿色。我们可以在提示字符串中使用以下颜色代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="b522" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好吧。我想这就是我们为 Windows Bash 提示符定制 Git 的全部内容。感谢阅读。</p></div></div>    
</body>
</html>