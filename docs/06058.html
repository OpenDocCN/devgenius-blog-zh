<html>
<head>
<title>Golang in sixty seconds — tricks with maps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">60秒后的Golang地图技巧</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/golang-in-sixty-seconds-tricks-with-maps-74f8107d7e7d?source=collection_archive---------8-----------------------#2021-12-09">https://blog.devgenius.io/golang-in-sixty-seconds-tricks-with-maps-74f8107d7e7d?source=collection_archive---------8-----------------------#2021-12-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/f92c5fdd33d302a853824e69719c7a56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*LzjMzlUcl0YGKmXgQj3W0g.jpeg"/></div><figcaption class="ju jv gj gh gi jw jx bd b be z dk translated">不是这种地图……(1834年爱丁堡，作者<a class="ae jy" href="https://en.wikipedia.org/wiki/en:William_Barnard_Clarke" rel="noopener ugc nofollow" target="_blank">威廉·巴纳德·克拉克</a></figcaption></figure><p id="e5ee" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">在<a class="ae jy" href="https://richard-t-bell90.medium.com/golang-in-sixty-seconds-count-occurrences-in-a-string-984fe04dfa4f" rel="noopener">之前的一篇文章</a>中我提到了<code class="fe kx ky kz la b">strings.Count</code>函数。这里有一个更复杂用例的替代方案。</p><p id="6baf" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">假设我们有一群人:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="b4b4" class="lj lk iq la b gy ll lm l ln lo">type Person struct {<br/> name string<br/> age  int<br/>}<br/>people := []Person{{name: "Bob", age: 21}, {name: "Sam", age: 28}, {name: "Ann", age: 21}, {name: "Joe", age: 22}, {name: "Ben", age: 28}}</span></pre><p id="72bc" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">如果我们想了解我们的人的年龄频率，我们可以利用一个<code class="fe kx ky kz la b">map</code>:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="c7ae" class="lj lk iq la b gy ll lm l ln lo">ageDistribution := map[int]int<br/>for _, person := range people {<br/>  ageDistribution[person.age]++<br/>}<br/>fmt.Println(ageDistribution) // map[21:2 22:1 28:2]</span></pre><p id="2321" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">我们在这里所做的是循环遍历我们切片中的每个人，并递增我们为该年龄存储的值，本质上是对他们进行计数。你可以在这里<a class="ae jy" href="https://go.dev/play/p/IW1rpt2Znk0" rel="noopener ugc nofollow" target="_blank">试试</a></p><p id="53aa" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">知道年龄的分布可能不太有用，但是您可能希望能够快速获得某一年龄的所有人，在这种情况下，您可以这样做:</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="338b" class="lj lk iq la b gy ll lm l ln lo">peopleByAge := make(map[int][]Person)<br/>for _, person := range people {<br/>  peopleByAge[person.age] = append(peopleByAge[person.age], person)<br/>}<br/>fmt.Println(peopleByAge[21]) // [{Bob 21} {Ann 21}]</span></pre><p id="ad14" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><a class="ae jy" href="https://go.dev/play/p/ijkVE4-_f_l" rel="noopener ugc nofollow" target="_blank">你可以试试这里</a></p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="3e67" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated">更<a class="ae jy" href="https://richard-t-bell90.medium.com/list/golang-in-sixty-seconds-7a26c5131734" rel="noopener">六十秒后Golang</a></p><p id="9835" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><a class="ae jy" href="https://richard-t-bell90.medium.com/membership" rel="noopener"> <em class="lw">获取无限制访问介质</em> </a></p><p id="25cf" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><a class="ae jy" href="https://ko-fi.com/richardtbell" rel="noopener ugc nofollow" target="_blank"> <em class="lw">给我买杯咖啡</em> </a> <em class="lw">如果你喜欢这篇文章:)</em></p></div><div class="ab cl lp lq hu lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ij ik il im in"><p id="81f2" class="pw-post-body-paragraph jz ka iq kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ij bi translated"><em class="lw">更多内容请看</em><a class="ae jy" href="http://blog.devgenius.io" rel="noopener ugc nofollow" target="_blank"><em class="lw">blog . dev genius . io</em></a><em class="lw">。</em></p></div></div>    
</body>
</html>