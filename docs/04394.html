<html>
<head>
<title>A Dummies Guide to using AWS SNS for your business case</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在你的商业案例中使用AWS社交网站的傻瓜指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-dummies-guide-to-using-aws-sns-for-your-business-case-f3ed240687e9?source=collection_archive---------1-----------------------#2021-03-11">https://blog.devgenius.io/a-dummies-guide-to-using-aws-sns-for-your-business-case-f3ed240687e9?source=collection_archive---------1-----------------------#2021-03-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/5e4d62bb71df5426aa73d8327a987d59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dJoNK4qUYWUmZ_rY.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">AWS文档的SNS流程</figcaption></figure><p id="bc74" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">本文是虚拟云系列的一部分。我倾向于用外行的术语解释事情，如果你对我在云上讨论的其他话题感兴趣，请查看我的其他文章。在我们继续之前，我假设如下。</p><blockquote class="kx ky kz"><p id="e786" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">I .您对AWS和有所了解</p><p id="cc56" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">二。如果您愿意，可以拥有一个AWS帐户来指导本教程</p></blockquote><p id="7afd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">作为本文的一部分，我们将了解以下主题。</p><blockquote class="kx ky kz"><p id="1b7f" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">a.什么是SNS？</p><p id="9e97" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">b.什么是发布订阅模式？</p><p id="aec0" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">c.什么是话题？</p><p id="f111" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">d.SNS主题有哪些不同类型的订阅者？</p><p id="13f7" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">e.可以应用于SNS主题的各种控件。</p></blockquote><p id="6090" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">此外，我们将有一个实践指南来实现我们所学的内容。</p><h1 id="4b60" class="le lf in bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">SNS —简单通知服务</h1><p id="4b26" class="pw-post-body-paragraph jz ka in kb b kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw ig bi translated">SNS是AWS提供的通知服务。我一放下通知这个词，你就会明白它与“通知”有关。但是在后台和通知周围会发生很多事情。让我们更好地理解它。</p><p id="ef96" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">什么是通知？</strong></p><p id="3e40" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">通知本质上是由<strong class="kb io">“发布者”</strong>发送给<strong class="kb io">“订阅者”的消息。发布订阅只不过是发布者-订阅者二人组的简称。</strong></p><p id="340d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">来自SNS的通知包含什么？</strong></p><p id="2d37" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">正如我所说的，一个通知有很多信息来处理后台发生的事情。请看一下我用粗体字标出的全部内容。</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="d081" class="mq lf in mm b gy mr ms l mt mu">{<br/>  "<strong class="mm io">Type</strong>" : "<strong class="mm io">SubscriptionConfirmation</strong>",<br/>  "MessageId" : "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx",<br/>  "Token" : "xxxxxxxxxxxxxxxxxxxxxxxx",<br/>  "TopicArn" : "arn:aws:sns:us-east-1:xxxxxxxxxxxxx:MediumTopic",<br/>  "<strong class="mm io">Message</strong>" : "<strong class="mm io">You have chosen to subscribe to the topic arn:aws:sns:us-east-1:xxxxxxxxxxxxx:MediumTopic.\nTo confirm the subscription, visit the SubscribeURL included in this message.</strong>",<br/>  "<strong class="mm io">SubscribeURL</strong>" : "<a class="ae mv" href="https://sns.us-east-1.amazonaws.com/?Action=ConfirmSubscription&amp;TopicArn=arn:aws:sns:us-east-1:652890774194:MediumTopic&amp;Token=2336412f37fb687f5d51e6e2425e90ccf23f36222803291e6b44e184c05e7fb35aeab870986cfc9b3e06671a4b334b3aafea55de0a8110c38cb15e2335eddc82c666b6734e81ad9ad83e26fd095bc1aa706bc6b82667b82f9b4c378bd101d1a4fa4527ffafaa9a0eec2548ae0a28e65c" rel="noopener ugc nofollow" target="_blank">https://sns.us-east-1.amazonaws.com/?Action=ConfirmSubscription&amp;TopicArn=arn:aws:sns:us-east-1:xxxxxxxxxxxx:MediumTopic&amp;Token=x</a>xxxxxxxxxxxxxxxxxxx",<br/>  "<strong class="mm io">Timestamp</strong>" : "2021-03-11T10:15:45.844Z",<br/>  "SignatureVersion" : "1",<br/>  "Signature" : "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",<br/>  "SigningCertURL" : "<a class="ae mv" href="https://sns.us-east-1.amazonaws.com/SimpleNotificationService-010a507c1833636cd94bdb98bd93083a.pem" rel="noopener ugc nofollow" target="_blank">https://sns.us-east-1.amazonaws.com/SimpleNotificationService-x</a>xxxxxxxxxxxxxxxxxxxx"<br/>}</span></pre><p id="d991" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">通知包含如下属性</p><p id="1e22" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">a.通知类型</p><p id="b388" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">b.通知中的消息</p><p id="6d38" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">c.像SubscribeURL这样的附加属性(因为我们收到的通知属于“SubscriptionConfirmation”类型。</p><p id="4c81" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> So that指出通知可以具有动态属性，这些属性由我们正在处理的通知类型驱动。我们还可以为这个“通知”定制属性。那是相当有用和强大的功能。</strong></p><h1 id="8eed" class="le lf in bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">PubSub模型</h1><p id="d1d0" class="pw-post-body-paragraph jz ka in kb b kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw ig bi translated">发布-订阅模型本质上是在发布者和订阅者两方之间传递消息的协议。简单地说，发布者将只能够<strong class="kb io">“推送”</strong>消息，订阅者将能够<strong class="kb io">“接收”</strong>消息。</p><p id="cd74" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">SNS支持多对多的发布订阅模式，一个主题可以有多个发布者和多个订阅者。因此，本质上，当一个发布者推送一条消息时，它可以被“已经订阅了它的”多个订阅者立即接收到。顾名思义，订阅是订阅者需要执行的自愿操作(可以是点击订阅URL、点击OTP ),以让系统知道他们是可以被推送消息的合法订阅者。</p><p id="f25f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">想象一下，如果你是一个电子商务巨头(<strong class="kb io">让我们看看亚马逊</strong>)有很多订户(<strong class="kb io">让我们看看Prime订户</strong>)，每当Prime会员预览发生时，你所要做的就是通过主题发送通知，瞧，你所有可以联系到的<strong class="kb io">用户</strong>都会收到通知。</p><p id="d3b2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">发布者和订阅者是真实的人吗？</strong></p><p id="6c42" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">答案是，严格来说，发布者和订阅者不需要是真实的人。它甚至可以由一个发布消息的应用程序和另一个订阅该消息的应用程序来完成。因此，根据用户的类型，您可以定制您的消息。</p><h1 id="03f0" class="le lf in bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">主题</h1><p id="5d1f" class="pw-post-body-paragraph jz ka in kb b kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw ig bi translated">AWS官方的解释是，一个话题就是一个消息通道。当您发布一个消息到一个主题时，<strong class="kb io">它将消息扇出</strong>到所有订阅的端点。</p><p id="a752" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">简单地说，把一个主题看作一个文件夹，发布者将把消息"<strong class="kb io">推</strong>"到那里。</p><p id="521b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">但是官方解释中还有一个词<strong class="kb io">“扇出”</strong>需要我们去理解。</p><p id="a7d4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">扇出是使消息能够被发布者一次推送到所有订阅者的功能。还记得我之前举的Prime订户的例子吗？同样，您也可以在CRM或AWS基础设施中触发操作。</p><h1 id="1b06" class="le lf in bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">社交网站主题的订阅者</h1><p id="c4db" class="pw-post-body-paragraph jz ka in kb b kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw ig bi translated">如前所述，一个SNS主题可以有多种类型的订阅者。让我们快点看到他们。</p><p id="57b3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在教程的后面，我们会遇到更多的细节。但是现在，让我们关注SNS允许整合的订阅类型。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/0e0f27dfb3d3ef1065bf7ca726bac4ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Y_wbPTdmgHWeOUBGVIl3g.png"/></div></div></figure><p id="7de7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您可以识别其中一些订阅协议的性质，如<strong class="kb io">电子邮件、Email-JSON、SMS </strong>。这些可能是潜在的最终客户，或者是对收到的SMS或电子邮件作出反应的系统。</p><p id="1a3b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">还有HTTP(s)，应用程序端点，它允许您将SNS订阅扩展到您自己的内部系统。</p><p id="a168" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">再往下是AWS服务，如Lambda、SQS、Kinesis Data Firehose，它们可以接收来自SNS的消息并做出相应的反应。</p><p id="6598" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如何为主题选择正确订阅的快速流程图。(假设您不希望只有特定的协议来接收消息)。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/afaa1ad6a959baceae99b956a0763a6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1zFuSboqpXxxxK_KDAWJw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">选择合适订户的流程</figcaption></figure><h1 id="04dc" class="le lf in bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated"><strong class="ak">消息控制</strong></h1><p id="6b6b" class="pw-post-body-paragraph jz ka in kb b kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw ig bi translated">当一个消息发布到一个主题时，我们可以有多个过滤器来维护发布者和订阅者的安全性和完整性。这可通过以下选项实现。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/007e5fa18e79e43c7da999f20de173ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4JKpXil_D-8aqW_XQJ3t4A.png"/></div></div></figure><p id="515a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">订阅过滤器策略允许我们设置可用于过滤消息的过滤器，重新驱动策略允许我们重新尝试消息传递中可能发生的任何失败。</p><p id="f680" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们将在下面的教程中看到更多。</p><h1 id="0684" class="le lf in bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">辅导时间到了</h1><p id="7a6e" class="pw-post-body-paragraph jz ka in kb b kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw ig bi translated">对于本教程的范围，我将驱动下面的用例。</p><p id="d130" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们需要创建一个名为Medium Tutorial的主题，并向该主题发布一条消息。制约因素是</p><p id="df22" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">a.我们将有一个电子邮件用户和一个短信用户。</p><p id="561b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">b.对于电子邮件订阅者，我们将设置订阅过滤器策略</p><p id="f8f0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">c.对于短信用户，我们将有一个开放的政策。</p><p id="adea" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第一步:</strong></p><p id="3d30" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">创建一个名为“媒体主题”的主题</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/ddb93e6615d5fb703e44612d5146a9e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_oN7V9OK06pEWpZPdiw2ag.png"/></div></div></figure><p id="5f93" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第二步:</strong></p><p id="1f06" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">选择主题的类型。<strong class="kb io">这不应与我们之前看到的“通知类型”相混淆。</strong></p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/01c84f2d4b0b1b9c146906b89e2f4504.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1adlwVw_fCqkqD-xPD2pnQ.png"/></div></div></figure><p id="e8e2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里有一个FIFO(先进先出)和一个标准选项。</p><p id="d256" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">FIFO有一些限制，你可以在上图中看到。对于本教程的范围，我们将选择“标准”。</p><p id="a4ef" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第三步:</strong></p><p id="e8fd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">设置其他选项。对于访问，我们将接受默认值，尽管这是一个非常强大的设置，可以将发布/订阅的访问控制到精细的粒度级别。</p><p id="c29a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">只需向下滚动并点击创建主题。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/93f493599fffbbef08257babefe571bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*7OXeht-dRN9_FZbGajwkJw.png"/></div></figure><p id="8f09" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第四步:</strong></p><p id="c122" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">创建我们主题的订阅者。既然已经创建了主题，我们必须设置一个可以接收消息的订阅者。</p><p id="1df5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">单击“创建订阅”按钮(我已经为我的电子邮件ID创建了一个订阅)</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/aeab991522f904fd30f4b6fce5c99a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TXYUaZEdQf2Tqhvs6-Adjw.png"/></div></div></figure><blockquote class="kx ky kz"><p id="d368" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">选择Email-JSON作为协议。</p></blockquote><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/c1ac6f00c003a712bf58233af0af9cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jc_q1nk8ejAoJgtGd_lC1A.png"/></div></div></figure><p id="d6e6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，在端点中输入您的电子邮件ID，您会得到通知，您需要验证您的订阅。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/0abfb57d37b5bde1e25c2b93b38b8216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8LwA6EHWook6aaFlxib3qQ.png"/></div></div></figure><p id="2cfd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们设置一个订阅过滤器，只允许属性为“MessageSource”且值为“Medium”的消息。注意，您可以传递多个值来限定属性“MessageSource”</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/c2c5f1055719109009c21552c8783537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fz8wE5QmQx7NafbQXp4TNQ.png"/></div></div></figure><p id="a46d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">点击创建订阅按钮保存您的订阅</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/a0e6dadf5810d9899fbc4c17a14ea164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*g__a-4qzLPtRRax1eAJNhA.png"/></div></figure><p id="5994" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第五步:</strong></p><p id="6626" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">验证您的订阅</p><p id="1dc9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">此时，您应该看到订阅已成功添加到您的主题下。如前所述，当用户要求明确确认时，例如电子邮件/短信，状态显示为“待定确认”。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/aeab991522f904fd30f4b6fce5c99a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TXYUaZEdQf2Tqhvs6-Adjw.png"/></div></div></figure><p id="d461" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，到你的电子邮件收件箱去查看你将会收到的邮件。</p><p id="a49e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我的收件箱里有这个。</p><blockquote class="kx ky kz"><p id="0ea4" class="jz ka la kb b kc kd ke kf kg kh ki kj lb kl km kn lc kp kq kr ld kt ku kv kw ig bi translated">注意:主题名称显示为发件人姓名</p></blockquote><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/0dcfd26257d44cd6cc103bdd949ce072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N5XHQZ8yrW6xvig_OoD6UA.png"/></div></div></figure><p id="63a2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第六步:</strong></p><p id="4eca" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们使用相同的步骤创建另一个订阅，并进行以下更改。</p><ol class=""><li id="cfaa" class="ni nj in kb b kc kd kg kh kk nk ko nl ks nm kw nn no np nq bi translated">选择“短信”的协议</li><li id="a46f" class="ni nj in kb b kc nr kg ns kk nt ko nu ks nv kw nn no np nq bi translated">端点是您的手机号码(警告:并非所有国家都支持小心操作)</li></ol><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/6d79789ab0b1f6e75eb36e208826d99c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DEJZkYEckU04-8e-kVx3cA.png"/></div></div></figure><p id="a360" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">对于SMS协议，我们将保留订阅过滤器策略为空。</p><p id="37ef" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这样，不管任何过滤器，我们应该收到短信。</p><p id="f083" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第七步:</strong></p><p id="8dfd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">是时候为我们的电子邮件订阅范围发布消息了。</p><p id="0a48" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">设置好以下所有内容后，点击“发布消息”按钮。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/74c3b75bf24f694093e4536721d61c4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1nkKC4RHcbE1q-TAntKyfA.png"/></div></div></figure><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ny"><img src="../Images/dac99eec1e5a8a56bed738b00cb0086e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yPugn8zVHCFvav6Y0FedVQ.png"/></div></div></figure><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nz"><img src="../Images/163a2753511f41e756e45db48e9fcbf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HdSviivNVYquNV5iU5JY1A.png"/></div></div></figure><p id="5a49" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在检查你的邮箱，你应该有一封邮件。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oa"><img src="../Images/1d2ee17669aa1a8d2717f8391d0025c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ii3-CsIPmkW9yqb1yUOA7Q.png"/></div></div></figure><p id="6be0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们检查一下电子邮件的内容。</p><p id="94fb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">观察突出显示的项目。从上面的步骤认出他们了吗？</p><pre class="mh mi mj mk gt ml mm mn mo aw mp bi"><span id="b813" class="mq lf in mm b gy mr ms l mt mu">{<br/>  "Type" : "Notification",<br/>  "MessageId" : "xxxxxxxxxxxxxxxxxxxxxxxxxxxx",<br/>  "TopicArn" : "arn:aws:sns:us-east-1:xxxxxxxxxxx:MediumTopic",<br/>  <strong class="mm io">"Subject" : "Medium Topic Message with Attributes",</strong><br/>  <strong class="mm io">"Message" : "This is a test message for the tutorial with attributes "</strong>,<br/>  "Timestamp" : "2021-03-11T13:43:26.211Z",<br/>  "SignatureVersion" : "1",<br/>  "Signature" : "xxxxxxxxxxxxxxx",<br/>  "SigningCertURL" : "<a class="ae mv" href="https://sns.us-east-1.amazonaws.com/SimpleNotificationService-010a507c1833636cd94bdb98bd93083a.pem" rel="noopener ugc nofollow" target="_blank">https://sns.us-east-1.amazonaws.com/SimpleNotificationService-xxxxxxxxxxxx.pem</a>",<br/>  "UnsubscribeURL" : "<a class="ae mv" href="https://sns.us-east-1.amazonaws.com/?Action=Unsubscribe&amp;SubscriptionArn=arn:aws:sns:us-east-1:652890774194:MediumTopic:4c1cc1e1-030b-49b5-bc85-0629f9d6571e" rel="noopener ugc nofollow" target="_blank">https://sns.us-east-1.amazonaws.com/?Action=Unsubscribe&amp;SubscriptionArn=arn:aws:sns:us-east-1:xxxxxxxxxxxx:MediumTopic:x</a>xxxxxxxxxxxxxxxxxxxxxxxxx",<br/> <strong class="mm io"> "MessageAttributes" : {<br/>    "MessageSource" : {"Type":"String","Value":"Medium"}</strong><br/>  }<br/>}</span></pre><p id="a4be" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">同样，您的手机号码也应该收到同样的消息。</p><p id="c588" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，重复第7步，只是有一个变化，不要指定任何消息属性。</p><p id="94a5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">当你这样做的时候，你应该只在你的手机上收到这条信息，而不是在你的电子邮件上。</p><p id="0dc0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我设置消息来表示它是不带属性发送的。</p><figure class="mh mi mj mk gt jo gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/3dd62d71951f5e6282e8c49c75f906ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*gkOizlC3N45HVi9Nm7s4dw.png"/></div></figure><p id="cfc0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，我们设置了一个SNS服务，可以向多个订阅者大规模发送通知。有大量的用例，我将在接下来的文章中讨论其中的一些。</p><p id="6561" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">查看我在Medium上的其他文章。</p></div></div>    
</body>
</html>