# DA 组合项目-ETL/数据库设计/ MySQL(第一部分)

> 原文：<https://blog.devgenius.io/da-portfolio-project-etl-database-design-mysql-part-i-473b340806ca?source=collection_archive---------1----------------------->

![](img/014876c624af99d9b29142398f5dec4d.png)

大卫·普帕扎在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

在这个项目中，我将一步一步地向你介绍我最新的项目。我现在会咆哮得有点过分，但它确实是有目的的，相信我！

在我谈到项目本身之前，有些东西是绝对需要说的。几周前，我决定建立一个比以往任何时候都大的项目。有时我已经准备好了数据，只是做了一些分析和可视化，有时我确实收集了自己的数据，但都是用 Python 写的，而不是数据库。很重要的一点是，我从来没有想到，仅仅是决定做什么就要花这么多时间。所以如果你以前经历过这些，那绝对是正常的。

最后，我终于决定把“Fragantica”网站上的所有香水收集起来，放到 MySQL 数据库中，然后运行一些 EDA，建立一个仪表板，让自己感觉更好。首先，我必须考虑我希望我的数据库是什么样子，因为这将影响我收集和存储数据的方式。过了很久，我的 er 图做好了。

> 为了更好地了解如何设计数据库，我在这里使用了微软的指南链接[](https://support.microsoft.com/en-us/office/database-design-basics-eb2159cf-1e30-401a-8084-bd4f9c9ca1f5#bmtablerelationships)**。**

**然后我开始编码。天哪，这花了多长时间，多么乏味，但我一直向前推进，一个代码块接一个代码块，调整，删除，测试，再调整。我曾经测试每个代码块，以确保一切正常，幸运的是确实如此。两个星期后，是的，你没看错，两个星期后，我终于按下了运行按钮，所以它将开始收集所有与 75k+香水有关的信息。它会开始很好，然后在几分钟或几小时后崩溃。我想，有什么不对劲，那就让我们来解决它。但无论我修复了多少次我的谷歌 Chrome 版本，或者驱动程序版本，无论我引入了多少 try/catch 块，无论我添加了多少 webdriverwait，甚至是显式等待，都不起作用。它仍然会运行几个小时，然后崩溃，因为随机错误发生在不同的随机线在不同的随机时间。直到那时我才想到，也许问题不在于我的代码，而在于网站。的确，在仔细观察每一行被执行后，我终于发现了它！网站将只是简单地冻结，什么也不做。我打开一个新浏览器继续或者刷新的事实一点帮助都没有。所以我只是对代码说了最后的再见，然后关闭了 IDE，再也不会被看到了。我可以说听到破碎。所有的努力，所有的时间都没有用。好的一面是，我的硒元素技能飞速提升，这让我很容易使用后来的❤**

**把这个催人泪下的故事抛在脑后，我抬起疲惫的双手和流鼻涕的鼻子，开始思考我需要做的项目。所以，事不宜迟，让我告诉你我们这次将构建什么。**

# **项目:ETL 和数据库设计。**

**我做了什么:**

*   **使用 Selenium 从不同的网站收集数据。**
*   **使用 Python 的库 ***Faker*** 生成假数据。**
*   **将我们的数据转换成所需的格式。**
*   **使用 MySQL-Python 连接器，我们连接到我们的 MySQL 工作台并设计我们的数据库。**
*   **将我们的数据加载到我们建立的数据库中。**
*   **EDA 和一些使用 SQL 的清理。**
*   **运行查询以获取相关数据并保存在 xlsx 文件中，这样我们就可以连接到 Tableau 并构建一个仪表板。(注意:使用 Tableau Desktop 可以直接连接到数据库。但由于我用的是社区/公版，所以只能连接 csv/xlsx 文件)。**

**原来如此！我非常兴奋能和你分享它，我希望它能到达你的手中~**

**好了，现在谈谈项目本身。我们将从最基本的开始！**

# **创建一个单独的环境，将其用于项目。**

**我用来编码的 IDE 是 Visual Studio 代码。为了创建环境，我使用 Anaconda。现在，为什么我们的项目需要一个独立的环境呢？好吧，除了这是一个好的实践之外，它的使用是为了让我们可以使用不同的包和特定的版本，而不会和其他的版本冲突。所以让我们开始吧:**

**因为我已经有了自己的，我将创建一个新的测试。打开 Anaconda 提示符，键入以下内容，然后按回车键:**

**` conda create(双破折号)名称[您的环境名称]` 1**

**![](img/b877a200552766a2bd9be9a7bf46f638.png)**

**然后当它提示你时按 y 键，然后它就设置好了！现在要激活它，请运行:**

**` conda 激活[您的环境名称]`**

**![](img/5ba7873389e5d4e8f992f99e52fdff02.png)**

**现在我们的环境被激活了。在这一步，我们应该安装我们需要的所有库。**

**我们需要的是:selenium、faker、pandas、numpy、time、csv、random 和 mysql 连接器。**

**要安装它们，请运行 pip install[库名]。比如:硒。**

**![](img/3a05422f527a364771853c4a340617e0.png)**

**现在对我们提到的所有库都这样做。不过有一点，mysql 连接器需要另一种格式。要安装它，请运行:**

```
conda install -c anaconda mysql-connector-python
```

**应该就是这样了。**

**现在我们应该把这个环境设置成一个内核，因为我用 Jupyter notebook 写了这段代码。我用 stackoverflow 找到了答案:**

```
python -m ipykernel install --user --name=[your env name]
```

**![](img/de04169fcf7a3af7fc4cdea9e06676b6.png)**

**现在，我们已经有了一个所有产品包都可以使用的环境。请记住，您不需要一次安装所有这些软件。有时您需要一些新的东西，所以您应该启动 anaconda 提示符，激活环境，pip 安装您想要的库，然后返回到您的 IDE 并重启内核，这样应该就可以了。**

**最后，在你的电脑上创建一个文件夹，保存我们所有的代码和文件。转到 Visual Studio 代码，打开文件夹，创建一个新文件，并将其命名为 main 或其他名称(如果您想要一个 jupyter 笔记本，它应该是这样的 main.ipynb ),让我们将其连接到我们的内核(环境)。**

**![](img/bb7ed88a5529618f17278379eef89b07.png)**

**创建文件时我们得到了什么。**

**现在让我们找到我们的内核。如果你看右上方，你会看到“Python 3.9.0 ”,这是默认设置。我们改成测试吧。点击它，应该会出现一个列表:**

**![](img/e810992020845b7a304f9dad46f0d72d.png)**

**选一个你创造的就行了！让我们来测试一下:**

**![](img/9c2790f93980d76ea8a8983ccd9993c1.png)**

**起作用了！万岁！**

**在我们今天结束之前，有一件事，如果你愿意，在你的环境中安装 python 版本 3.10，因为基础版本是 3.9..所以是的..**

**今天到此为止。是的，我们只做了这么少，但即将到来的部分是残酷的，所以只需为今天创造环境，等待我们的下一部分，我们开始奠定基础和代码！**

> **页（page 的缩写）如果你已经想看完成的项目，我在我的 GitHub [**这里**](https://github.com/Armonia1999/Database-design-ETL-MySQL) **有它。它已经有了很多解释，所以你已经可以开始单独做了。****

**平安出来**🏃****