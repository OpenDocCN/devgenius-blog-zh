<html>
<head>
<title>Guide to Using Hooks in React Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React 路由器钩子使用指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/guide-to-using-hooks-in-react-router-7d9aabd6ae0e?source=collection_archive---------3-----------------------#2021-08-18">https://blog.devgenius.io/guide-to-using-hooks-in-react-router-7d9aabd6ae0e?source=collection_archive---------3-----------------------#2021-08-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8eee" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解 useHistory、useLocation、useRouteMatch 和 useParams 挂钩</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/100bb2418f699f6f9b6ee2725250a080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K-Pdz3rSZiPPZMWx"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@mohittzomar?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">莫希特·托马尔</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="32c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当使用 React 构建应用程序时，处理路由的最流行的库是 React Router。如果您不熟悉 React 路由器，请查看下面的文章开始使用。</p><div class="ls lt gp gr lu lv"><a href="https://javascript.plainenglish.io/tutorial-and-beginners-guide-to-react-router-ee19ca31d7d" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">React 路由器教程和初学者指南</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">如何在 React web 应用程序中使用客户端路由</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div><p id="ee72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">随着 React 16.8 的发布，React 路由器还引入了挂钩，可以轻松访问路由器的状态并执行导航。</p><p id="068d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将了解 React 路由器 API 中包含的 4 个挂钩，其中包括:</p><ul class=""><li id="34ca" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated"><code class="fe mt mu mv mw b">useHistory</code></li><li id="8b4a" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><code class="fe mt mu mv mw b">useLocation</code></li><li id="1660" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><code class="fe mt mu mv mw b">useRouteMatch</code></li><li id="7eb3" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><code class="fe mt mu mv mw b">useParams</code></li></ul></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="36ad" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">使用历史</h1><p id="08b6" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">React 路由器包有两个主要的依赖项。一个是反应本身；另一个是<a class="ae kv" href="https://github.com/ReactTraining/history" rel="noopener ugc nofollow" target="_blank">历史</a>包。历史包允许你在一个 JavaScript 应用程序中管理你的会话历史。</p><p id="a102" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用下面的任何一个钩子，我们首先需要从<code class="fe mt mu mv mw b">react-router-dom</code>导入它们。</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="8240" class="ok nk iq mw b gy ol om l on oo">import { useHistory } from 'react-router-dom';</span></pre><p id="cc86" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，就像任何 React 钩子一样，我们需要在一个功能组件中调用它。</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="fc3e" class="ok nk iq mw b gy ol om l on oo"><em class="op">// inside of a functional component</em><br/>const history = useHistory();</span></pre><p id="2a55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mt mu mv mw b">useHistory</code>钩子返回一个具有许多属性和方法的历史对象。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oq"><img src="../Images/a28bf79a59c2f9b6bff1f7602d08a315.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TVzhaLekYZ564EsK7QLywQ.png"/></div></div></figure><p id="2a7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一些最常用的属性和方法包括:</p><ul class=""><li id="3c49" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated"><strong class="ky ir"> go( <em class="op"> n </em> ) </strong> —(函数)将历史堆栈中的指针移动 n 个条目。</li><li id="5095" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir"> goBack() </strong> —(函数)将历史堆栈中的指针移动-1。</li><li id="9226" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated">goForward()  —(函数)将历史堆栈中的指针移动+1。</li><li id="41e8" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir"> length </strong> — (number)历史堆栈中的条目数。</li><li id="22f7" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir">位置</strong>——(对象)当前位置对象。</li><li id="e42e" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir"> push( <em class="op"> path </em> ) </strong> —(函数)将新条目推入历史堆栈。</li><li id="02b8" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir">替换(<em class="op">路径</em> ) </strong> —(函数)替换历史堆栈中的当前条目。</li></ul><p id="49b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我可以添加<code class="fe mt mu mv mw b">push</code>方法作为按钮的<code class="fe mt mu mv mw b">onClick</code>监听器。然后，如果我点击按钮，我将被路由到适当的网址。</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="eade" class="ok nk iq mw b gy ol om l on oo">&lt;button <em class="op">onClick</em>={() =&gt; history.push("/home")}&gt;<br/>  Home<br/>&lt;/button&gt;</span></pre><h1 id="c132" class="nj nk iq bd nl nm or no np nq os ns nt jw ot jx nv jz ou ka nx kc ov kd nz oa bi translated">使用位置</h1><p id="92c0" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated"><code class="fe mt mu mv mw b">useLocation</code>钩子返回一个位置对象。这与出现在<code class="fe mt mu mv mw b">useHistory</code>钩子中的是同一个物体。</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="23cf" class="ok nk iq mw b gy ol om l on oo">import { useLocation } from 'react-router-dom';</span><span id="68c8" class="ok nk iq mw b gy ow om l on oo"><em class="op">// inside of a functional component</em><br/>const location = useLocation();</span></pre><p id="f5f9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每当 URL 改变时，将返回一个新的位置对象。位置对象通常由以下属性组成:</p><ul class=""><li id="b606" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated"><strong class="ky ir">hash</strong>—(string)URL 哈希(#)片段。</li><li id="f12f" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir">路径名</strong> —(字符串)URL 的路径。</li><li id="badb" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir">搜索</strong> —(字符串)URL 查询字符串(？).</li></ul><p id="cd1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我将向 URL 添加一个搜索参数和一个散列。</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="8c22" class="ok nk iq mw b gy ol om l on oo"><a class="ae kv" href="http://localhost:3000/blog?search#hash" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/home?search#hash</a></span></pre><p id="9dd5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，如果我在这个 URL 上调用<code class="fe mt mu mv mw b">useLocation</code>钩子，位置对象将会是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/dee46659a8dad8515bfc33f2d787550e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HgscUxDBXCFD-Clm7kFMnw.png"/></div></div></figure><h1 id="c9ca" class="nj nk iq bd nl nm or no np nq os ns nt jw ot jx nv jz ou ka nx kc ov kd nz oa bi translated">useRouteMatch</h1><p id="57a2" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated"><code class="fe mt mu mv mw b">useRouteMatch</code>钩子返回一个匹配对象。</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="f39e" class="ok nk iq mw b gy ol om l on oo">import { useRouteMatch } from 'react-router-dom';</span><span id="1b9c" class="ok nk iq mw b gy ow om l on oo"><em class="op">// inside of a functional component</em><br/>const match = useRouteMatch();</span></pre><p id="9dff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">match 对象包含有关路由路径如何匹配 URL 的信息。它将包含以下属性:</p><ul class=""><li id="2d9d" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated"><strong class="ky ir"> isExact </strong> — (boolean)检查整个 URL 是否匹配。</li><li id="9ac1" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir"> params </strong> —(对象)从 URL 解析的键/值对。</li><li id="4d2f" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir">路径</strong> —(字符串)用于匹配的路径模式。</li><li id="67b1" class="mk ml iq ky b kz mx lc my lf mz lj na ln nb lr mp mq mr ms bi translated"><strong class="ky ir"> url </strong> —(字符串)url 的匹配部分。</li></ul><p id="7613" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比如，我会参观<code class="fe mt mu mv mw b"><a class="ae kv" href="http://localhost:3000/home" rel="noopener ugc nofollow" target="_blank"><em class="op">http://localhost:3000/home</em></a></code> <em class="op">。</em>那么匹配对象会是这样的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/687df0c2443f4603c009fdb029d275d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*quA6KB-964mw6nsy6qeAhQ.png"/></div></div></figure><p id="30a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我访问<code class="fe mt mu mv mw b"><a class="ae kv" href="http://localhost:3000/home/111" rel="noopener ugc nofollow" target="_blank"><em class="op">http://localhost:3000/home/111</em></a></code> <em class="op">，</em>，你可以看到<code class="fe mt mu mv mw b">isExact</code>属性现在被设置为 false。这是因为整个 URL 路径不完全匹配。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/177b7f60128a597ef9573d44155948f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MNx-00Soma672fx03e1CJA.png"/></div></div></figure><h1 id="75fd" class="nj nk iq bd nl nm or no np nq os ns nt jw ot jx nv jz ou ka nx kc ov kd nz oa bi translated">使用参数</h1><p id="a0e5" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated"><code class="fe mt mu mv mw b">useParams</code>钩子返回 URL 参数的键/值对对象。这是我们在来自<code class="fe mt mu mv mw b">useRouteMatch</code>钩子的 match 对象中看到的同一个 params 对象。</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="5c34" class="ok nk iq mw b gy ol om l on oo">import { useParams } from 'react-router-dom';</span><span id="a8ef" class="ok nk iq mw b gy ow om l on oo"><em class="op">// inside of a functional component</em><br/>const params = useParams();</span></pre><p id="248e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">密钥将来自我们在添加路由时设置的参数。例如，我将添加以下路线:</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="7f84" class="ok nk iq mw b gy ol om l on oo">&lt;<em class="op">Route</em> <em class="op">path</em>="/home/<strong class="mw ir">:id</strong>" <em class="op">component</em>={Home} /&gt;</span></pre><p id="1de9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">那么 params 对象将看起来像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/3f6306a1b9111f508e10a59e4e13ca92.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*m87Nq8-wZ0oEc9TCNS8KxQ.png"/></div></figure><p id="ecb3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我可以将 route 中的<strong class="ky ir"> ':id' </strong>的名称改为任意值，params 对象中的 key 也会随之改变。例如，我将添加以下路线:</p><pre class="kg kh ki kj gt og mw oh oi aw oj bi"><span id="ad62" class="ok nk iq mw b gy ol om l on oo">&lt;<em class="op">Route</em> <em class="op">path</em>="/home/<strong class="mw ir">:firstid/:secondid/:thirdid</strong>" <em class="op">component</em>={Home} /&gt;</span></pre><p id="a727" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后访问<code class="fe mt mu mv mw b"><a class="ae kv" href="http://localhost:3000/home/111/222/333" rel="noopener ugc nofollow" target="_blank"><em class="op">http://localhost:3000/home/111/222/333</em></a></code> <em class="op">。</em>params 对象将看起来像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pb"><img src="../Images/85a31bd04f9d0016754d8294861b50c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XbuNY5Qlhu1-grnJY90FRw.png"/></div></div></figure></div><div class="ab cl nc nd hu ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ij ik il im in"><h1 id="ea00" class="nj nk iq bd nl nm nn no np nq nr ns nt jw nu jx nv jz nw ka nx kc ny kd nz oa bi translated">结论</h1><p id="148e" class="pw-post-body-paragraph kw kx iq ky b kz ob jr lb lc oc ju le lf od lh li lj oe ll lm ln of lp lq lr ij bi translated">谢谢你的阅读！我希望本文有助于您更好地了解我们可以在 React Router 中使用的不同钩子。使用这些钩子可以很容易地访问路由器的状态，并在反应应用程序中执行导航。</p><p id="ed7e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请阅读下面的文章，继续学习反应路由器。</p><div class="ls lt gp gr lu lv"><a href="https://javascript.plainenglish.io/how-to-display-a-404-page-with-react-and-react-router-d16d66703e5e" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">如何使用反应和反应路由器显示 404 页</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">用 404 页捕捉所有未知路线</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="pc l mg mh mi me mj kp lv"/></div></div></a></div><p id="3abf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">资源</strong></p><ul class=""><li id="19c4" class="mk ml iq ky b kz la lc ld lf mm lj mn ln mo lr mp mq mr ms bi translated"><a class="ae kv" href="https://reactrouter.com/web/api/Hooks" rel="noopener ugc nofollow" target="_blank">https://reactrouter.com/web/api/Hooks</a></li></ul></div></div>    
</body>
</html>