<html>
<head>
<title>Part 2 — HOW TO: Configure Properties In Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第 2 部分—如何:在 Spring Boot 配置属性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/part-2-how-to-configure-properties-in-spring-boot-783c54a39304?source=collection_archive---------6-----------------------#2022-04-24">https://blog.devgenius.io/part-2-how-to-configure-properties-in-spring-boot-783c54a39304?source=collection_archive---------6-----------------------#2022-04-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="aada" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我确信所有的开发人员都喜欢他们正在处理的代码整洁干净。编写干净的代码是一项令人愉快的活动，它让我们都为自己的技能感到自豪；然而，查看干净的代码更加令人满意。</p><p id="1728" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Spring Boot 项目中的属性文件在一个位置包含所有具有不同用途的属性，管理久而久之会变得非常困难，并且代码库会增长。</p><p id="e058" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本教程中，我将教你一种最基本的方法，根据属性的含义和用途对属性进行分类。这将使开发过程以及未来的功能增强更加容易。</p><h2 id="f745" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">创建属性文件</h2><p id="b99d" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">向 Spring Boot 添加一个新的属性文件就像在类路径的 resources 文件夹中添加一个新文件一样简单。</p><p id="cde4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">假设您想要在<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">project/src/main/resources/properties</em></strong></code>中创建一个名为<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">mail.properties</em></strong></code>的新文件。将以下配置添加到文件中(<strong class="jm io"> <em class="lk">插入有效信息，而不是粗体短语</em> </strong>):</p><pre class="ll lm ln lo gt lp lj lq lr aw ls bi"><span id="062a" class="ki kj in lj b gy lt lu l lv lw">mail.host=<strong class="lj io"><em class="lk">mail.host.domain</em></strong><br/>mail.port=<strong class="lj io"><em class="lk">port</em></strong><br/>mail.transport.protocol=smtp<br/>mail.properties.smtp-starttls-enable=true<br/>mail.username=<strong class="lj io"><em class="lk">username@domain</em></strong><br/>mail.password=<strong class="lj io"><em class="lk">password</em></strong><br/>mail.properties.mail.smtp.auth=true<br/>mail.sender.address=<strong class="lj io"><em class="lk">mail-sender-address@domain</em></strong></span></pre><p id="53aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个文件中，我们列出了在应用程序中设置电子邮件服务可能需要的所有内容。请记住，我们一直使用同一个关键字来定义属性——“邮件”稍后，我将解释原因。</p><h2 id="84fa" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">在 Spring Boot 应用程序中注册属性文件</h2><p id="7c59" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">一旦准备好属性文件，就可以创建一个表示这些属性的类。在<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">project-name/src/main</em></strong></code>或其任何子文件夹中创建一个新的 Java 类<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">MailProperties</em></strong></code>，并将以下代码放入其中:</p><pre class="ll lm ln lo gt lp lj lq lr aw ls bi"><span id="5d5a" class="ki kj in lj b gy lt lu l lv lw">@Data<br/>@Lazy<br/>@Configuration<br/>@PropertySource("classpath:/properties/mail.properties")<br/>@ConfigurationProperties(prefix = "mail")<br/>public class MailProperties {<br/><br/>    @Value("${mail.host}")<br/>    private String host;<br/><br/>    @Value("${mail.port}")<br/>    private Integer port;<br/><br/>    @Value("${mail.transport.protocol}")<br/>    private String transportProtocol;<br/><br/>    @Value("${mail.properties.smtp-starttls-enable}")<br/>    private String enableSmtpStartTls;<br/><br/>    @Value("${mail.username}")<br/>    private String username;<br/><br/>    @Value("${mail.password}")<br/>    private String password;<br/><br/>    @Value("${mail.properties.mail.smtp.auth}")<br/>    private String smtpAuth;<br/><br/>    @Value("${mail.sender.address}")<br/>    private String senderAddress;<br/>}</span></pre><p id="3ec6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了让我们的生活更轻松，我们加入了一些注释:</p><p id="b617" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">@Data</em></strong></code>是一个方便的 Lombok 注释，包括<code class="fe lg lh li lj b">@Getter</code>、<code class="fe lg lh li lj b">@Setter</code>、<code class="fe lg lh li lj b">@ToString</code>、<code class="fe lg lh li lj b">@EqualsAndHashCode</code>和<code class="fe lg lh li lj b">@RequiredArgsConstructor</code>注释，并生成通常与 POJOs 相关的所有样板代码。您可以将<strong class="jm io"> <em class="lk"> Lombok </em> </strong>添加到您的依赖项中并使用它，或者您可以包含构造函数和其他结构。</p><p id="f739" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于默认情况下，Spring Boot 会在应用程序上下文开始时急切地创建所有 bean，<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">@Lazy</em></strong></code>确保只有在我们请求时才会创建 bean。当<code class="fe lg lh li lj b">@Lazy</code>注释被应用到<code class="fe lg lh li lj b">@Configuration</code>类时，这意味着所有方法都应该被延迟加载。</p><p id="c580" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当与<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">@PropertySource</em></strong></code>注释结合使用时，<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">@Configuration</em></strong></code>注释提供了一种简单的方法来将属性源添加到环境中，处理类，并创建合适的 beans。</p><p id="c44d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可能还记得，我们的属性被分组在一起，并以“邮件”开始。在我们使用<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">@ConfigurationProperties(prefix = “mail”)</em></strong></code>输入属性前缀之后，Spring Boot 应用它的配置技术，自动在属性名和它们各自的字段之间进行映射。</p><p id="c39c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是，您可能希望为本地字段指定与其对应的属性不同的名称。您可以通过用<code class="fe lg lh li lj b"><strong class="jm io"><em class="lk">@Value(“$mail.host”)</em></strong></code>注释字段来做到这一点，它指定了属性的确切名称。</p><h2 id="9f20" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">使用属性配置类</h2><p id="6621" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">当你完成这个配置类时，你可以<strong class="jm io"> <em class="lk">将它</em> </strong>注入到你的应用中的任何地方，并根据需要使用它:</p><pre class="ll lm ln lo gt lp lj lq lr aw ls bi"><span id="b7e8" class="ki kj in lj b gy lt lu l lv lw">@Service<br/>@Log4j2<br/>@AllArgsConstructor<br/>public class EmailService {<br/>    private final MailProperties mailProperties;<br/><br/>    public void testProperties() {<br/>        String host = mailProperties.getHost();<br/>        String password = mailProperties.getPassword();<br/>        String username = mailProperties.getUsername();<br/>        // ... <em class="lk">and so on</em></span><span id="4ea0" class="ki kj in lj b gy lx lu l lv lw">    }<br/>}</span></pre></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><p id="f633" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇短文中，我们以邮件属性为例，探讨了如何在 Spring Boot 中配置属性。</p><p id="672f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当然，这不是关于在 Spring Boot 应用程序中指定属性的最全面的指南；还有许多更高级的选项。然而，本教程应该给你一个坚实的概念，从哪里开始，它应该足够小规模的应用程序。</p><p id="0cc2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在下一篇教程中，我将向您展示如何为 Spring Boot 项目配置邮件发送者服务。</p><p id="04b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lk">敬请关注，在评论区随意推荐你希望在本系列后续文章中讨论的话题！</em> </strong></p></div></div>    
</body>
</html>