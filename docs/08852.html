<html>
<head>
<title>A Dive into SQL Aggregate Functions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SQL 聚合函数探究</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sql-aggregate-functions-22b2b6206b85?source=collection_archive---------16-----------------------#2022-07-14">https://blog.devgenius.io/sql-aggregate-functions-22b2b6206b85?source=collection_archive---------16-----------------------#2022-07-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/da3d47450734c8e30030d1f12f4b57a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMadPR85WEApdTs4xTshTQ.png"/></div></div></figure><p id="f01d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本文将解释什么是集合函数以及如何使用它们。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="6971" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">什么是<strong class="ak">聚合函数</strong></h2><p id="cafe" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">它们是对一组行进行操作以计算并返回单个值的函数，我们在这里看到聚合函数:</p><ol class=""><li id="4c7d" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks md me mf mg bi translated"><strong class="jx io"> AVG() </strong> : <em class="mh">返回一列的平均值</em>。</li><li id="1de3" class="ly lz in jx b jy mi kc mj kg mk kk ml ko mm ks md me mf mg bi translated"><strong class="jx io"> COUNT() </strong> : <em class="mh">返回一列中的行数</em>。</li><li id="3492" class="ly lz in jx b jy mi kc mj kg mk kk ml ko mm ks md me mf mg bi translated"><strong class="jx io"> MAX() </strong> : <em class="mh">返回一列的最高值</em>。</li><li id="276e" class="ly lz in jx b jy mi kc mj kg mk kk ml ko mm ks md me mf mg bi translated"><strong class="jx io"> MIN() </strong> : <em class="mh">返回一列的最小值</em>。</li><li id="d818" class="ly lz in jx b jy mi kc mj kg mk kk ml ko mm ks md me mf mg bi translated"><strong class="jx io"> SUM() </strong> : <em class="mh">返回一列值的总和</em>。</li></ol><h2 id="90b0" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak">使用聚合函数</strong></h2><p id="e7c9" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">SQL 提供了特殊的函数来汇总数据，而无需检索整个集合。这是一个普遍的要求。使用这些函数，SQL 查询经常用于检索数据以进行报告和分析。</p><p id="1ee4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:所有的聚合函数都可以使用标准的数学运算符对多列进行计算，例如:<code class="fe mn mo mp mq b">AVG(prod_price*quantity)</code>。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="5824" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak"/><code class="fe mn mo mp mq b"><strong class="ak">AVG()</strong></code><strong class="ak">功能</strong></h2><p id="1799" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated"><code class="fe mn mo mp mq b">AVG()</code>该函数通过计算行数及其值的总和来返回一列的平均值。AVG()可用于返回特定列或行的平均值。</p><p id="3ba7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:包含<code class="fe mn mo mp mq b">NULL</code>值的列行被<code class="fe mn mo mp mq b">AVG()</code>函数忽略。</p><p id="786a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">示例:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/a5d44f85a4d3b884cc1f64f10dae4860.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1f68XBKv1IA0jlMJokT0BA.png"/></div></div></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="79f5" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak"/><code class="fe mn mo mp mq b"><strong class="ak">COUNT()</strong></code><strong class="ak">功能</strong></h2><p id="10e4" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">从本质上来说，它是算数的。可以使用 COUNT()函数确定表格中的行数或满足特定条件的行数。</p><p id="afda" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mn mo mp mq b">COUNT()</code>可用于 2 种方式:</p><ol class=""><li id="db43" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks md me mf mg bi translated">使用<code class="fe mn mo mp mq b">COUNT(*)</code>计算表格中的行数，无论列包含值还是<code class="fe mn mo mp mq b">NULL</code>值。</li><li id="fcfe" class="ly lz in jx b jy mi kc mj kg mk kk ml ko mm ks md me mf mg bi translated">使用<code class="fe mn mo mp mq b">COUNT(column)</code>计算特定列中有值的行数，忽略<code class="fe mn mo mp mq b">NULL</code>值。</li></ol><p id="edad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:包含<code class="fe mn mo mp mq b">NULL</code>值的列行将被<code class="fe mn mo mp mq b">COUNT()</code>函数忽略，但如果使用星号(*)则不会。</p><p id="9c34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">示例:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/9624911617a80f59cfae15cfbbaf6e48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yt63tjrrRafAbMlOBCHLlQ.png"/></div></div></figure><p id="ef8e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">示例:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/85a30b6f260f75b61ef19077ca86f698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2d__RrCht3rc_VWZIKtJsw.png"/></div></div></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="0e9f" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak"/><code class="fe mn mo mp mq b"><strong class="ak">MAX()</strong></code><strong class="ak">功能</strong></h2><p id="5c29" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated"><code class="fe mn mo mp mq b">MAX()</code>返回指定列中的最大值。MAX()函数要求指定列名。</p><p id="48e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong> : MAX()通常用于查找最高的数值或日期值，但是许多 DBMSs(但不是全部)允许它返回任何列中的最高值，包括文本列。MAX()返回文本数据按指定列排序时的最后一行。</p><p id="fde6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:带有<code class="fe mn mo mp mq b">NULL</code>值的列行被<code class="fe mn mo mp mq b">MAX()</code>函数忽略。</p><p id="5f49" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">示例:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/e11b9ee1443e2c5baf48e63aacdc2438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bw6tglxusTtqbzVh6cASiA.png"/></div></div></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="e6c7" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak"/><code class="fe mn mo mp mq b"><strong class="ak">MIN()</strong></code><strong class="ak">功能</strong></h2><p id="c471" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated"><code class="fe mn mo mp mq b">MIN()</code>与<code class="fe mn mo mp mq b">MAX()</code>正好相反——它返回指定列中的最小值。Like <code class="fe mn mo mp mq b">MAX(), MIN()</code>要求指定列名。</p><p id="c7a2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:许多(但不是所有)DBMSs 允许 MIN()函数返回任何列中的最小值，包括文本列。MIN()返回文本数据按该列排序时最先出现的行。</p><p id="87ee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:带有<code class="fe mn mo mp mq b">NULL</code>值的列行被<code class="fe mn mo mp mq b">MIN()</code>函数忽略。</p><p id="4049" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">示例:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/6e6ab12718ad29104320f0f74b0bcdbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h33mTuEDU6a2obqIc5dicQ.png"/></div></div></figure><p id="5efb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"/><code class="fe mn mo mp mq b"><strong class="jx io">SUM()</strong></code><strong class="jx io">功能</strong></p><p id="b9f0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mn mo mp mq b">SUM()</code>用于返回特定列中值的总和。</p><p id="cf2a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:带有<code class="fe mn mo mp mq b">NULL</code>值的列行被<code class="fe mn mo mp mq b">SUM()</code>函数忽略。</p><p id="7000" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">示例:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/dc576c2268c97f46785cf21a6c9056f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tCyLpfR7NN0rtWLARPaW1w.png"/></div></div></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="d116" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak">不同值上的聚合</strong></h2><p id="6775" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">这五个集合函数都有两种用法:</p><ol class=""><li id="e940" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks md me mf mg bi translated">若要对所有行执行计算，请指定 all 参数或根本不指定任何参数(因为 ALL 是默认行为)，但不使用 COUNT(*)的 DISTINCT，DISTINCT 只能在指定了列名的情况下与 COUNT()一起使用。DISTINCT 不能与 COUNT(*)一起使用。同样，DISTINCT 必须与列名一起使用，而不能与计算或表达式一起使用。</li><li id="7ae8" class="ly lz in jx b jy mi kc mj kg mk kk ml ko mm ks md me mf mg bi translated">要仅包含唯一值，请指定<code class="fe mn mo mp mq b">DISTINCT</code>参数。</li></ol><p id="a3db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:除了这里显示的 DISTINCT 和 ALL 参数之外，一些 DBMSs 还支持 TOP 和 TOP PERCENT 参数，这允许您对查询结果的子集执行计算。请查阅 DBMS 的文档以确定哪些参数可用。</p><p id="4462" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">示例:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/aca67f04b9a1a5d1493713c13179795c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GgqAkQ3-5Edm2XF3yDVXbg.png"/></div></div></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="7f54" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak">组合聚合函数</strong></h2><p id="591f" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">示例:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/6f7645d8e42a137e01723791d4ae1d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sXKaaYA2C9zICAQAvqwu8w.png"/></div></div></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="e8ce" class="nb lb in bd lc nc nd ne lf nf ng nh li ni nj nk ll nl nm nn lo no np nq lr nr bi translated"><strong class="ak">总结</strong></h1><p id="569b" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">今天，我们学习了聚合函数，并了解了它们有多简单，为了扩展您的知识，我鼓励您检查分组。</p><p id="ae0f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望你喜欢这篇文章！</p></div></div>    
</body>
</html>