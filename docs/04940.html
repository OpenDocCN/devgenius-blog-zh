<html>
<head>
<title>Laravel Data-Driven Strategies #5: email tracking, did they read your emails?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel数据驱动策略#5:邮件跟踪，他们读过你的邮件吗？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/laravel-data-driven-strategies-5-email-tracking-did-they-read-your-emails-da86da049ec6?source=collection_archive---------1-----------------------#2021-05-25">https://blog.devgenius.io/laravel-data-driven-strategies-5-email-tracking-did-they-read-your-emails-da86da049ec6?source=collection_archive---------1-----------------------#2021-05-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2bf75316d11e2c7b1dff92051ce0a6c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A9p2F0FheStjHie7"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com/@solenfeyissa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">索伦·费伊萨</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><blockquote class="ka kb kc"><p id="1f9e" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ig bi translated">“电子邮件有一种许多渠道没有的能力:大规模地创造有价值的、个性化的接触”~戴维·纽曼</p></blockquote><p id="4eac" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">电子邮件是一种与你的受众联系的神奇方式，很多时候是一个企业与客户联系的关键。电子邮件是定制的，是彩色的，是强大的，是专业的，有时甚至是情绪化的。但是……你想过如果你读了吗？</p><p id="f436" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">许多人依赖于托管电子邮件服务，这些服务可以为你提供关于你的电子邮件的所有统计数据，但很多时候，这些都是付费服务，要建立一个小型服务，你的预算可能不符合你的需求。</p><p id="81d5" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">因此，在本文中，我们将为您的laravel项目构建一个电子邮件跟踪器！</p><h1 id="83f9" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">装置</h1><p id="9619" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">我尝试了许多软件包，我擅长的是<em class="kf"/><a class="ae jz" href="https://github.com/jdavidbakr/mail-tracker" rel="noopener ugc nofollow" target="_blank"><em class="kf">jdavidbakr/mail-tracker</em></a>。</p><blockquote class="ka kb kc"><p id="3d66" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ig bi translated">“MailTracker会连接到Laravel发出的所有电子邮件，并在其中注入一个跟踪代码。它还会将呈现的电子邮件存储在数据库中。还有查看已发邮件的界面。”~邮件跟踪器</p></blockquote><p id="d166" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">要开始，只需:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="2d00" class="mr lg in mn b gy ms mt l mu mv">composer require jdavidbakr/mail-tracker</span></pre><p id="df0c" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">拉弗尔会发现这个包裹:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="60b3" class="mr lg in mn b gy ms mt l mu mv">Discovered Package: <strong class="mn io">jdavidbakr/mail-tracker</strong></span></pre><p id="257d" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">现在发布与该包相关的所有内容</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="d4af" class="mr lg in mn b gy ms mt l mu mv">&gt; <strong class="mn io">php artisan vendor:publish --provider="jdavidbakr\MailTracker\MailTrackerServiceProvider"</strong></span><span id="30ca" class="mr lg in mn b gy mw mt l mu mv">Copied File [/vendor/jdavidbakr/mail-tracker/config/mail-tracker.php] To [/config/mail-tracker.php]<br/>Copied Directory [/vendor/jdavidbakr/mail-tracker/src/views] To [/resources/views/vendor/emailTrakingViews]<br/><em class="kf">Publishing complete.</em></span></pre><p id="5882" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这将发布配置文件和默认视图(我们将在后面得到这些)。</p><p id="b8a9" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这个包需要在数据库中存储东西，所以我们应该执行它的迁移</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="de0b" class="mr lg in mn b gy ms mt l mu mv">&gt; <strong class="mn io">php artisan migrate<br/></strong><em class="kf">Migrating: 2016_03_01_193027_create_sent_emails_table<br/>Migrated:  2016_03_01_193027_create_sent_emails_table (22.75ms)<br/>Migrating: 2016_09_07_193027_create_sent_emails_Url_Clicked_table<br/>Migrated:  2016_09_07_193027_create_sent_emails_Url_Clicked_table (40.97ms)<br/>Migrating: 2016_11_10_213551_add-message-id-to-sent-emails-table<br/>Migrated:  2016_11_10_213551_add-message-id-to-sent-emails-table (3.18ms)<br/>Migrating: 2020_04_15_112152_add_message_id_index_to_sent_emails_table<br/>Migrated:  2020_04_15_112152_add_message_id_index_to_sent_emails_table (6.74ms)<br/>Migrating: 2021_02_10_083945_add_sender_email_and_name_to_sent_emails_table<br/>Migrated:  2021_02_10_083945_add_sender_email_and_name_to_sent_emails_table (3.95ms)<br/>Migrating: 2021_02_10_095634_add_first_open_and_first_click_columns<br/>Migrated:  2021_02_10_095634_add_first_open_and_first_click_columns (4.72ms)</em></span></pre><p id="44ad" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">为了证明这一点非常简单，它已经准备好了！</p><p id="4b91" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">该包将注册以下路由</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="37eb" class="mr lg in mn b gy ms mt l mu mv">GET|HEAD  email-manager ................. mailTracker_Index<br/>GET|HEAD  email-manager/clear-search .... mailTracker_ClearSearch<br/>POST      email-manager/search .......... mailTracker_Search<br/>GET|HEAD  email-manager/show-email/{id} . mailTracker_ShowEmail<br/>GET|HEAD  email-manager/smtp-detail/{id}. mailTracker_SmtpDetail<br/>GET|HEAD  email-manager/url-detail/{id} . mailTracker_UrlDetail<br/>GET|HEAD  email/l/{url}/{hash} .......... mailTracker_l<br/>GET|HEAD  email/n ....................... mailTracker_n<br/>POST      email/sns ..................... mailTracker_SNS<br/>GET|HEAD  email/t/{hash} ................ mailTracker_t</span></pre><p id="4aef" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">要访问管理器，您应该注册一个名为<code class="fe mx my mz mn b">see-sent-emails</code>的门。出于测试目的，我只允许<code class="fe mx my mz mn b">AuthServiceProvider</code>中的每个人:</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="ca9b" class="mr lg in mn b gy ms mt l mu mv">Gate::define('see-sent-emails', function ($user) {<br/>    <strong class="mn io">return true;</strong><br/>});</span></pre><p id="d645" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">很明显，你会放一些自定义规则，比如<code class="fe mx my mz mn b">return <strong class="kg io">$user-&gt;is_admin</strong>;</code>或者类似的东西。</p><p id="2c53" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">然后访问<code class="fe mx my mz mn b">/email-manager</code>你就会明白了</p><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/86e78d7a147c2b945fa923fde59ba4ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-d1WTNWvA45b3xqayYig8Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">邮件跟踪器</figcaption></figure><h1 id="a1b1" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">你好世界</h1><p id="9b6a" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">最简单的方法是在某个地方设置一个只显示“Hello world”的视图。</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="5c21" class="mr lg in mn b gy ms mt l mu mv">Mail::<em class="kf">send</em>('<strong class="mn io">mails.test</strong>', [], <em class="kf">function </em>($mail) {<br/>    $mail-&gt;to('thisisa@test.com')-&gt;subject('Does this work?');<br/>});</span></pre><p id="0bb1" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">我目前正在使用Mailhog，所以我看到了这封邮件</p><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/d53e9492ed68ee0247b60241164e83c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-b-GfDgdkBodXVEUHkxwjw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">邮件猪</figcaption></figure><p id="93a3" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">刷新追踪器，你会看到这封邮件有0次打开和0次点击</p><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/f907b341586c81604c2d526f01eaf648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6oeG9S0y7o9aBp5WGJApg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">邮件跟踪器</figcaption></figure><p id="e27a" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">现在，回到mailhog，打开电子邮件，刷新跟踪器，你就可以做到这一点</p><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/45568d1e961037ab4844452fd6e33e56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6t9g2ET_hf-RiSys1pZqsQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">他们已经看过邮件了！</figcaption></figure><p id="5c23" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">用户看到了电子邮件，你会看到他第一次看到电子邮件的时间，如果有些东西是可点击的，比如行动号召，你会看到用户什么时候到达那个行动号召。</p><h1 id="79c3" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">但是…怎么做？</h1><p id="82aa" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">让我们看看邮件的来源</p><pre class="mi mj mk ml gt mm mn mo mp aw mq bi"><span id="4dd7" class="mr lg in mn b gy ms mt l mu mv">Hello World <strong class="mn io">&lt;img border="0" width="1" alt="" height="1" src="</strong><a class="ae jz" href="http://localhost:8080/email/t/45v3asPZjz7NzYPxY1NYNNBnoLvGH2gX" rel="noopener ugc nofollow" target="_blank"><strong class="mn io">http://localhost:8080/email/t/45v3asPZjz7NzYPxY1NYNNBnoLvGH2gX</strong></a><strong class="mn io">"&gt;</strong></span></pre><p id="1023" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">刀片刚刚有一个“Hello World”，img标签发挥了神奇的作用，因为图像实际上总是加载在电子邮件中(如果它们不被视为垃圾邮件并被提前阻止)。</p><p id="8ce1" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">如果您访问该URL，您会看到一个1x1px的图像:</p><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/b2f112e7b90d20173f5cc12f78b1bb96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J77GPSvy5Xh5Jq30jNiu2w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">神奇的图像</figcaption></figure><p id="fbc4" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">你会注意到你的邮件中有一个死角吗？</p><h1 id="8ce8" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">那么…他们看了你的邮件吗？</h1><p id="90ae" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">邮件真的很强大。当我收到一封为我设计的、包含我喜欢接收的内容的邮件时，我会花上几分钟，因为我认为它是值得的，即使它背后隐藏着一种算法，所以如果你是手动、编程或以任何其他方式创建电子邮件，请确保它们是值得的！</p><p id="69ad" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">现在该由你来创造伟大的东西了！🥂</p><p id="397f" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">请继续关注其他数据驱动的策略，如果你愿意，花一点时间️️to留下评论，谈谈你如何做出由工具支持的数据驱动的决策！☕️</p></div></div>    
</body>
</html>