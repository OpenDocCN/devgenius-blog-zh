<html>
<head>
<title>Creating a Geo-Redundant Path-based Web Application on Azure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Azure上创建基于地理冗余路径的Web应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-a-geo-redundant-path-based-web-application-on-azure-cc70bc146303?source=collection_archive---------0-----------------------#2021-09-26">https://blog.devgenius.io/creating-a-geo-redundant-path-based-web-application-on-azure-cc70bc146303?source=collection_archive---------0-----------------------#2021-09-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2cc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用负载平衡器、流量管理器、应用程序网关和Azure前门为我们的web应用程序构建高效的路由。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f8f8355a58a490ad1339a64f391fee7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYAd1aal5Et1A-Qzs6VAtQ.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">美国宇航局在<a class="ae lb" href="https://unsplash.com/s/photos/world?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h1 id="bcde" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">动机:</h1><p id="06a3" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们可能已经构建了一个应用程序，但从未想过大规模发布它，更不用说在全球范围内发布了。因此，在这篇文章中，我将向你展示我们如何利用Azure Traffic Manager、Azure Load Balancer、Application gateway和Azure Front Door等Azure服务来扩展我们对全球人民的分发。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="9da8" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">建筑:</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mr"><img src="../Images/e04cc2d501f7ac3503373b5e0b894a13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TM2754LJCwBUbG4l4BpVow.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 1上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="02ac" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">先决条件:</h1><ol class=""><li id="930f" class="ms mt iq jp b jq ma ju mb jy mu kc mv kg mw kk mx my mz na bi translated">Azure虚拟机</li><li id="927c" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">Azure虚拟机规模集</li><li id="8c68" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">Azure负载平衡器</li><li id="13a9" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">Azure流量管理器</li><li id="de6e" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">Azure应用程序网关</li><li id="b13b" class="ms mt iq jp b jq nb ju nc jy nd kc ne kg nf kk mx my mz na bi translated">蓝色前门</li></ol></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="0acb" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">Azure虚拟机:</h1><p id="1045" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">让我们从虚拟机开始，因为它们将托管我们的应用程序。我们将创建两个虚拟机。选择<strong class="jp ir">虚拟机，+创建，</strong>填写基本信息，在美国东部创建一个虚拟机，在北欧创建另一个虚拟机。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ng"><img src="../Images/0b001445e0f52844ab87b103519fc607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8jzQ44HxWeic41BXNAJEdg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 2上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="8017" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">提前添加这些代码块。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/65bdd5f5817b5e4da8ba6a62e7a26469.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UBtEOYDSlqRdJ1RGgSqJ1A.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 3上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><pre class="km kn ko kp gt ni nj nk nl aw nm bi"><span id="717c" class="nn ld iq nj b gy no np l nq nr">#!/bin/bash</span><span id="13d5" class="nn ld iq nj b gy ns np l nq nr">sudo apt update -y</span><span id="208e" class="nn ld iq nj b gy ns np l nq nr">sudo apt install apache2 -y</span></pre><p id="e9a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">部署成功后，您可以点击公共IP来查看apache网页的启动和运行。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nt"><img src="../Images/ddeb4bfef93f8ffac4ed9e1fa6ebc379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTo8YbJ3XGxcB9PMJ_sTfQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 4上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="b730" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在进入下一个主题之前，我们需要配置我们的VM的DNS。要创建虚拟机，请转到其中一个<strong class="jp ir">虚拟机</strong>，并点击<strong class="jp ir"> DNS。</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nu"><img src="../Images/b08037198b3b7b7aaca2cc0119cde21f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rl92JgUNnDOJuyzmpO24hA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 5上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="ee30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将任何唯一的名称添加到DNS栏中，以便流量管理员以后使用。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="c7cc" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">Azure虚拟机规模集:</h1><p id="6a95" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">假设我们上面创建的虚拟机是面向前端的web应用程序，但是我们希望将使用“/images”的特定用户定向到需要更多计算的单独web应用程序。这也可以在虚拟机上进行，但我们有另一种方便的服务，称为虚拟机规模集。我们称之为图像农场。转到<strong class="jp ir">虚拟机规模设置、+创建、</strong>并填写基本详细信息。现在，这些是在创建它时需要注意的事情。选择<strong class="jp ir">组网</strong>上的<strong class="jp ir">负载均衡器</strong>，将VMSS的虚拟机自动添加到后端池中。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nv"><img src="../Images/a2a0d7c381b66d3e50ff1caf832c1302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pDXnWLfQPth2Mmm7w_mZvQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 6上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="30a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将这些命令添加到<strong class="jp ir">自定义数据中。</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nw"><img src="../Images/fc27e2b8b9f6b675a99218e6ee93c3e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6U0CR3L0bouLuMPZYKByBA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 7上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><pre class="km kn ko kp gt ni nj nk nl aw nm bi"><span id="5c8e" class="nn ld iq nj b gy no np l nq nr">#!/bin/bash</span><span id="ec93" class="nn ld iq nj b gy ns np l nq nr">sudo apt update -y</span><span id="18b8" class="nn ld iq nj b gy ns np l nq nr">sudo apt install apache2 -y</span><span id="6f4e" class="nn ld iq nj b gy ns np l nq nr">echo "&lt;html&gt;&lt;h2&gt;This is images farmed page&lt;/h2&gt;&lt;/html&gt;" &gt; images.html</span><span id="408a" class="nn ld iq nj b gy ns np l nq nr">sudo cp images.html /var/www/html/</span></pre><p id="20a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">部署完成后，抓取<strong class="jp ir">负载平衡器IP </strong>并浏览它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nx"><img src="../Images/5904433c16d51feb66a30e6c0fc67222.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1QW2t3Ul_k1DWrS-Qw6gtw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 8上创建基于地理冗余路径的Web应用。2021.JPEG文件。</figcaption></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="cc94" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">Azure负载平衡器:</h1><p id="90e3" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们从来没有在这篇文章中单独使用负载平衡器，因为我们已经将它与Azure虚拟机规模集集成在一起。如果我们必须创建没有VMSS的虚拟机，那么我们只需使用负载平衡。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="97ab" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">Azure流量管理器:</h1><p id="47dc" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们总是谈论负载均衡器，但是流量管理器呢？为了便于描述，负载平衡器是针对区域的，而流量管理器是针对全局的。为了将这些点联系起来，我们的EASTUS虚拟机和NORTH EUROPE虚拟机位于不同的区域，但我们希望在它们之间实现负载平衡。答案是流量经理。让我们通过选择<strong class="jp ir"> Traffic Manager，+Create，</strong>来创建一个Traffic Manager，并填写您选择的Traffic Manager名称的基本详细信息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ny"><img src="../Images/0c492b783b704be6d6099386f62b9075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rIfWhW8OwwOuDvLPSCF7UA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 9上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="3124" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要配置端点。转到<strong class="jp ir">流量管理器、设置、端点、</strong>和<strong class="jp ir">+添加。</strong>如您所见，我已经添加了2台虚拟机作为我的端点。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nz"><img src="../Images/5d85ec94dd403cc070f9e9d3ff74bdea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*90kkUp-e4awoVbFUBUSPtw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 10上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="8bc2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir"> +Add </strong>后，填写基本信息，包括之前虚拟机的<strong class="jp ir"> DNS名称</strong>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/8050a32a4ae23bf69010eaabd170ec67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*FvGKG6LIOy-P82xv7feTDQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 11上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="b6c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们测试流量管理器是否正在加载网页。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ob"><img src="../Images/6e6e3fa1f71af40d68dd2922fb53a963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w26pKlq_2p0pSXXrBiaMww.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 12上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="c0c5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">看起来效果很好。现在我们进入Azure应用程序网关。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="4382" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">Azure应用程序网关:</h1><p id="cf6a" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">如前所述，如果用户想要进入“/images/”，那么我们需要将他/她路由到图像场，如果用户想要访问登录页面，那么我们将他们路由到最近的位置，这正是应用程序网关所做的工作。简单地说，基于路径路由它们会有所帮助。选择<strong class="jp ir">应用网关，+创建，</strong>，<strong class="jp ir">填写基本信息。</strong>记得添加一个<strong class="jp ir">新的虚拟网络。</strong></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oc"><img src="../Images/15b3943f00fd58be75699adbbca7e8e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V77HHySQuOCY0Y3XuVydaA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 13上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="304b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">创建一个新的面向公众的IP。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/c95ab79646688bb856cac7b08a64fe56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G6cSMYVlQRR8SYh-DFbRxQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 14上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="16e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">接下来是最重要的部分，后端池。因为我们有两个游泳池。一个用于图像和登录页面，所以我们需要创建两个后端池。使用负载平衡器IP为VMSS创建一个后端池，并使用流量管理器IP为其他虚拟机创建另一个后端池。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi od"><img src="../Images/8b956af9691d81224061c93de277fcd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eI6NP4bhii48SMmtE4oJ-A.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 15上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="9797" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在路由规则上，填写基本详细信息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ny"><img src="../Images/cf54594718a708c551ff60e56bb6cb46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VD6TYpcZli1frFR9cUw74A.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 16上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="ccb4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在后端目标上，由于我们根据路径进行更改，所以我们添加了基于路径的规则。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oe"><img src="../Images/51b4d39e4224178a0f17883909478be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbYcKRTEPJffaHeHp0TWmw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 17上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi of"><img src="../Images/4067672ad18d29919e9dee2f1bb249f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aZUi2aajaE7bCUeV3uTOvw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 18上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="f173" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">点击<strong class="jp ir">查看并创建</strong>，并等待20-25分钟以创建它。创建完成后，让我们点击URL，检查它是否工作。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ob"><img src="../Images/9b32bddfe76c3e7bcd76808051714359.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*86xPpRoS5EbiaIq_qONQQg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 19上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="9829" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">和images.html页面。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi og"><img src="../Images/130e5335d4f0c021bcd230d98d5099c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYIOZUnrbgCe6X5lfPiwyA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 20上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="5019" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它工作得完美无缺。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="19a2" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">天蓝色前门:</h1><p id="033c" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">现在让我们将Azure应用程序网关添加到Azure前门中，使其地理冗余。请记住，应用程序网关是基于区域的，而前台是全球性的服务。点击<strong class="jp ir">蓝色前门</strong>，你会看到一个设计好的景观。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oh"><img src="../Images/fa50c2553f447ac032252425cf9d79cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FAZGSuYHy_ga-_4tbDsvuw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 21上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="cb8c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在自己的后端池中添加应用网关IP</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/df479e0af3c0a6edbe11c25433c63e4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*R61teSK-q65hCd3700OJ2A.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 22上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="6036" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们的应用程序是唯一基于HTTP的，所以我们需要选择<strong class="jp ir"> HTTP Only </strong>选项。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/4c09f96b4da3d7cd84309a15ed170c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*epECFTi7dSgb7LlWX0ndzw.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 23上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="4755" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">最终演示:</h1><p id="71ec" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">让我们浏览Azure前门给我们的URL，并检查index.html和images.html页面的结果</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ok"><img src="../Images/dbd2006c875eebd6453d594df5ee81a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NUn28BwNq0Q3Dek-qEP9VA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 24上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ol"><img src="../Images/0eb88294706c23a0307408894bd3de21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kfoGu7hji6jysUjjss5I4g.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">苏拉布什雷斯塔。在Azure 25上创建基于地理冗余路径的Web应用程序。2021.JPEG文件。</figcaption></figure><p id="104a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太好了。成功了。目前可以通过这个<a class="ae lb" href="http://project5.sulabhshrestha.com/" rel="noopener ugc nofollow" target="_blank"> URL </a>播放样本。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="e72a" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">结论:</h1><p id="b8ff" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">这只是Azure服务的一小部分，当集成在一起时，可以产生一个美妙的结果。我们甚至可以在VMSS中进行自动扩展，使其具有容错能力，在您认为流量会增加的区域添加更多后端池，等等。可能性是无限的，选择是无限的，你想做什么取决于你自己。如果你遇到任何问题或难以遵循这些步骤，请在下面评论这篇文章或在tsulabh4@gmail.com给我发消息。你也可以在<a class="ae lb" href="https://www.linkedin.com/in/sulabhshrestha/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>和<a class="ae lb" href="https://github.com/codexponent" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上和我联系。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="3f58" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">资源:</h1><p id="0cea" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">[1] Azure流量管理器:<a class="ae lb" href="https://docs.microsoft.com/en-us/azure/traffic-manager/traffic-manager-overview" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/Azure/Traffic-Manager/Traffic-Manager-overview</a></p><p id="514d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">[2] Azure负载平衡器:<a class="ae lb" href="https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-overview" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/Azure/Load-Balancer/Load-Balancer-overview</a></p><p id="4287" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">[3] Azure应用网关:<a class="ae lb" href="https://docs.microsoft.com/en-us/azure/application-gateway/overview" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/Azure/Application-Gateway/overview</a></p><p id="a461" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">[4]蔚蓝前门:<a class="ae lb" href="https://azure.microsoft.com/en-us/services/frontdoor/" rel="noopener ugc nofollow" target="_blank">https://azure.microsoft.com/en-us/services/frontdoor/</a></p><p id="e005" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">[5]Azure VMSS:<a class="ae lb" href="https://docs.microsoft.com/en-us/azure/virtual-machine-scale-sets/overview" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/Azure/virtual-machine-scale-sets/overview</a></p></div></div>    
</body>
</html>