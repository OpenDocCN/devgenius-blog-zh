<html>
<head>
<title>Lambdas &amp; Higher-Order functions with Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Lambdas &amp;具有 Kotlin 的高阶函数</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/lambdas-higher-order-functions-with-kotlin-2508cab53609?source=collection_archive---------12-----------------------#2022-07-15">https://blog.devgenius.io/lambdas-higher-order-functions-with-kotlin-2508cab53609?source=collection_archive---------12-----------------------#2022-07-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/f23a6e2127147b9178700bf46d9d4b83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3m9JWiSlrgTPfTiGxRZStA.png"/></div></div></figure><h1 id="fce3" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">兰姆达斯</h1><p id="531e" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在 kotlin 中，每个函数都有一个名字，body &amp;名字前的关键字“fun ”,意思是，我们要声明一个函数，在 body 中加入代码，我们要做些什么，这就是函数的全部，但是 kotlin 也支持 lambda。</p><p id="ef6e" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">Lambda 是一个做函数的表达式，是一个匿名函数，不是像我们通常做的那样声明一个函数，而是声明一个没有名字的函数。</p><p id="82fa" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">Lambdas 表达式总是以花括号开始和结束，你也可以像变量值一样添加一个 lambda，以后再使用它。</p><p id="0d4b" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">这是一个如何声明 lambda 表达式的例子。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="8bbe" class="mf jw in mb b gy mg mh l mi mj">val expressionOne = <strong class="mb io">{ </strong>x: Int <strong class="mb io">-&gt; </strong>x +1 <strong class="mb io">}</strong></span></pre><p id="b5b3" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在上面的代码中我们可以看到括号内的表达式分为两部分，首先是接收这个函数的参数，我们需要指定变量的类型。然后它是一个箭头操作符，然后我们有一个要执行的代码。</p><p id="62d5" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">Kotlin 还允许我们，用一个可以接收变量的函数类型来声明变量。让我们看看如何实现这一点。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="8ffd" class="mf jw in mb b gy mg mh l mi mj">val expressionTwo: (x:Int) -&gt; (Int) = <strong class="mb io">{ </strong>x <strong class="mb io">-&gt; </strong>x +1 <strong class="mb io">}</strong></span></pre><p id="22d6" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在这个例子中，我们对 kotlin 说，可以接受的值是一个带有一个 Int 类型参数的函数，并返回一个 Int。在表达式中，我们不再需要添加对象类型，因为 kotlin 推断出了它。</p><p id="9119" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">要调用和执行这些函数，只需像调用普通函数一样，让我们看看。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="6138" class="mf jw in mb b gy mg mh l mi mj"><em class="mk">println</em>(expressionOne(1))<br/>    // x=1 return 2<br/><em class="mk">println</em>(expressionTwo(3))<br/>   // x=3 return 4</span></pre><p id="5278" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">现在，lambda 用起来有用吗？。</p><p id="eb73" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">嗯，lambda 在不同方面都很有用，但当我们在高阶函数中使用它时更好，那么什么是高阶函数呢？</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="9b6e" class="jv jw in bd jx jy ms ka kb kc mt ke kf kg mu ki kj kk mv km kn ko mw kq kr ks bi translated">高阶函数</h1><p id="0b56" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">高阶函数是将另一个函数作为参数或返回一个函数的函数。</p><p id="a8a5" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">但是让我们看一个例子来更好地理解，它到底是什么，kotlin 的标准库中有许多高阶函数，例如，repeat()。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="8253" class="mf jw in mb b gy mg mh l mi mj">public inline fun repeat(times: Int, action: (Int) -&gt; Unit) {<br/>    <em class="mk">contract </em><strong class="mb io">{ </strong>callsInPlace(action) <strong class="mb io">}<br/><br/>    </strong>for (index in 0 <em class="mk">until </em>times) {<br/>        action(index)<br/>    }<br/>}</span></pre><p id="305b" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">Repeat 函数接收两个参数，第一个是 Int，表示我们作为第二个参数传递的函数将重复多少次，第二个是接收 Int 但不返回任何值的函数。</p><p id="fef8" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在上面的函数中，action 参数是我们的 lambda 表达式，我们想执行多少次就执行多少次。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="37b4" class="mf jw in mb b gy mg mh l mi mj"><em class="mk">repeat</em>(2)<strong class="mb io">{ </strong>it -&gt;<br/>    <em class="mk">println</em>("${it+1} time")<br/><strong class="mb io">}</strong></span><span id="28fe" class="mf jw in mb b gy mx mh l mi mj">Result:<br/>    <strong class="mb io">// </strong>1 time<br/>    // 2 time</span></pre><p id="0c38" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">这些是标准库中的其他例子。</p><p id="41ec" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><strong class="kv io">让</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="c893" class="mf jw in mb b gy mg mh l mi mj">val fruits = <em class="mk">listOf</em>("apple","pineapple","watermelon","cherry")</span><span id="0143" class="mf jw in mb b gy mx mh l mi mj"><em class="mk">println</em>(fruits.<em class="mk">let </em><strong class="mb io">{ it</strong>.<em class="mk">last</em>() <strong class="mb io">}</strong>)</span><span id="9869" class="mf jw in mb b gy mx mh l mi mj">Result:<br/>    //cherry</span></pre><p id="e62d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><strong class="kv io">敷</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="0a58" class="mf jw in mb b gy mg mh l mi mj">data class Person(var name: String,var lastName: String)</span><span id="caf3" class="mf jw in mb b gy mx mh l mi mj">var john = Person("John","Smith").<em class="mk">apply </em><strong class="mb io">{ </strong>name="Tommy" <strong class="mb io">}</strong></span><span id="e8b3" class="mf jw in mb b gy mx mh l mi mj"><em class="mk">println</em>( john.name )</span><span id="526d" class="mf jw in mb b gy mx mh l mi mj">Result:<br/>   //Tommy</span></pre><p id="7349" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><strong class="kv io">亦作</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="0d79" class="mf jw in mb b gy mg mh l mi mj">"String".<em class="mk">also</em><strong class="mb io">{</strong><em class="mk">println</em>("$<strong class="mb io">it</strong> other String")<strong class="mb io">}</strong></span><span id="caae" class="mf jw in mb b gy mx mh l mi mj">Result:<br/>  //String other String</span></pre><p id="1a89" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><strong class="kv io">运行</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="7b8d" class="mf jw in mb b gy mg mh l mi mj"><em class="mk">println</em>("STRING".<em class="mk">run</em><strong class="mb io">{</strong><em class="mk">lowercase</em>()<strong class="mb io">}</strong>)</span><span id="cf19" class="mf jw in mb b gy mx mh l mi mj">Result:<br/>  //string</span></pre></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h2 id="cbba" class="mf jw in bd jx my mz dn kb na nb dp kf le nc nd kj li ne nf kn lm ng nh kr ni bi translated">制作高阶函数</h2><p id="a025" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">好了，我们已经看到了 lambda 是如何工作的，以及如何将它应用到函数中。</p><p id="5c5f" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">Kotlin 还支持向现有类添加方法，在下面的例子中，我们也会看到这一点。</p><p id="022d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">好吧，让我们想象一下，我们有一个整数列表，我们要添加新的功能，将列表中的每个整数乘以一个数，然后返回结果列表。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="2b7e" class="mf jw in mb b gy mg mh l mi mj">inline fun MutableList&lt;Int&gt;.multiple(block : (Int) -&gt; Int):List&lt;Int&gt;{<br/>    for(index in 0 <em class="mk">until </em>this.size){<br/>       this[index] = block(this[index])<br/>    }<br/>    return this<br/>}</span></pre><p id="3af3" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在上面的代码中，为一个包含整数的可变列表声明一个新的函数 o method，然后这个函数通过参数接收另一个函数，那个参数为了方便起见叫做 block，是一个接收整数并返回整数的函数。</p><p id="0b45" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">该函数遍历调用该函数的列表，并将其传递给块函数，以便它做它必须做的事情。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="6eb5" class="mf jw in mb b gy mg mh l mi mj">val lisNUmber: MutableList&lt;Int&gt;  = <em class="mk">arrayListOf</em>(1,2,3,4,5,6)<br/><em class="mk">println</em>(lisNUmber.<em class="mk">multiple </em><strong class="mb io">{ </strong>it -&gt; it *3 <strong class="mb io">}</strong>)</span><span id="c7d2" class="mf jw in mb b gy mx mh l mi mj">//Result: [3, 6, 9, 12, 15, 18]</span></pre><p id="ec48" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">如您所见，这个函数的结果与我们应用的 lambda 函数的结果相同。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><p id="8cf3" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">我希望这篇文章对你有帮助，如果你喜欢这篇文章，给我一个掌声，然后跟我来，谢谢。</p><p id="f4bc" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在<a class="ae nj" href="https://www.linkedin.com/in/alejandro-avi%C3%B1a-748a6a203?lipi=urn%3Ali%3Apage%3Ad_flagship3_profile_view_base_contact_details%3B9m5mWHEjS0a51dpm3IQ9bA%3D%3D" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系，或者在<a class="ae nj" href="https://twitter.com/Alejand10307258" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae nj" href="https://www.instagram.com/kotlin_tricks/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上关注我。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/d917b848ffd07890c29c30d042ffa0c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*UvrCrqurdurOQJRULBDr7g.png"/></div></figure><h2 id="4bd4" class="mf jw in bd jx my mz dn kb na nb dp kf le nc nd kj li ne nf kn lm ng nh kr ni bi translated">参考</h2><div class="nl nm gp gr nn no"><a href="https://kotlinlang.org/docs/lambdas.html#higher-order-functions" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">高阶函数和 lambdas | Kotlin</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">高阶函数是以函数为参数，或者返回函数的函数。一个很好的例子…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">kotlinlang.org</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc jt no"/></div></div></a></div></div></div>    
</body>
</html>