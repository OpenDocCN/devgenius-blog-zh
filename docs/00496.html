<html>
<head>
<title>How to Make JavaScript Sleep or Wait</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何让JavaScript休眠或等待</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-make-javascript-sleep-or-wait-d95d33c99909?source=collection_archive---------0-----------------------#2020-06-09">https://blog.devgenius.io/how-to-make-javascript-sleep-or-wait-d95d33c99909?source=collection_archive---------0-----------------------#2020-06-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="895b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">JavaScript没有一个<code class="fe kf kg kh ki b">sleep()</code>函数可以让代码在恢复执行之前等待一段指定的时间。那么如果你需要JavaScript等待，你会怎么做呢？</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/acec5eab179ae42b77f47e776a720228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yESI4Mp6kELu2F8W"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">凯特·斯通·马西森在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><blockquote class="la"><p id="c000" class="lb lc iq bd ld le lf lg lh li lj lk dk translated">在计算中，睡眠是Unix、类Unix和其它操作系统中的一个命令，它把程序的执行暂停一段时间— <a class="ae kz" href="https://en.wikipedia.org/wiki/Sleep_(command)" rel="noopener ugc nofollow" target="_blank">维基百科</a></p></blockquote><p id="92b6" class="pw-post-body-paragraph ll lm iq ln b lo lp jr lq lr ls ju lt lu lv lw lx ly lz ma mb mc md me mf lk ij bi mg translated">假设您想要将三条消息记录到Javascript的控制台中，每条消息之间有一秒钟的延迟。JavaScript中没有<code class="fe kf kg kh ki b"><a class="ae kz" href="https://en.wikipedia.org/wiki/Sleep_(command)" rel="noopener ugc nofollow" target="_blank">sleep()</a></code>方法，所以你尝试使用下一个最好的方法，<code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" rel="noopener ugc nofollow" target="_blank">setTimeout()</a></code>。</p><blockquote class="mp mq mr"><p id="88f5" class="ll lm ms ln b lo mt jr lq lr mu ju lt mv mw lw lx mx my ma mb mz na me mf lk ij bi translated">"<code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope" rel="noopener ugc nofollow" target="_blank">WindowOrWorkerGlobalScope</a></code> mixin的<code class="fe kf kg kh ki b"><strong class="ln ir">setTimeout()</strong></code>方法(和<code class="fe kf kg kh ki b">Window.setTimeout()</code>的继承者)设置一个定时器，一旦定时器到期，它就执行一个函数或指定的代码段。"— <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" rel="noopener ugc nofollow" target="_blank"> MDN文档</a></p></blockquote><p id="75bb" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">不幸的是，<code class="fe kf kg kh ki b">setTimeout()</code>并不像你想象的那样工作，这取决于你如何使用它。您可能在JavaScript循环中的某个时候尝试过，并发现<code class="fe kf kg kh ki b">setTimeout()</code>似乎根本不起作用。</p><p id="5e8a" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">问题产生于将<code class="fe kf kg kh ki b">setTimeout()</code>误解为<code class="fe kf kg kh ki b">sleep()</code>函数，而实际上它是按照自己的规则工作的。</p><p id="c26e" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">在本文中，我将解释如何使用<code class="fe kf kg kh ki b">setTimeout()</code>，包括如何使用它来创建一个睡眠函数，该函数将导致JavaScript暂停执行并在连续的代码行之间等待。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><p id="715c" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi mg translated"><span class="l mh mi mj bm mk ml mm mn mo di">如果</span>你只是快速浏览<code class="fe kf kg kh ki b">setTimeout()</code> <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" rel="noopener ugc nofollow" target="_blank">文档</a>，它似乎需要一个“延迟”参数，以毫秒为单位。</p><p id="d63d" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">回到最初的问题，在调用<code class="fe kf kg kh ki b">console.log()</code>函数之间，您尝试调用<code class="fe kf kg kh ki b">setTimeout(1000)</code>等待1秒钟。</p><p id="2c4e" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">不幸的是<code class="fe kf kg kh ki b">setTimeout()</code>不是这样工作的:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ni"><img src="../Images/5a1cbe822413da7de42042e439ea608b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*czu0eaZ16gdI0dKW_gStTw.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/b823cd65732e7a8df0b8b1280b146d44" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="d7ba" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">这段代码的结果是完全没有延迟，就好像<code class="fe kf kg kh ki b">setTimeout()</code>不存在一样。</p><p id="cce0" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">回头看看文档，你会发现问题在于第一个参数实际上应该是一个函数调用，而不是延迟。毕竟，<code class="fe kf kg kh ki b">setTimeout()</code>实际上并不是一个<code class="fe kf kg kh ki b">sleep()</code>方法。</p><p id="6c79" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">您重写代码，将一个<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" rel="noopener ugc nofollow" target="_blank">回调函数</a>作为第一个参数，将必要的延迟作为第二个参数:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nj"><img src="../Images/c57c2b527db469c2c9d7f631c449843c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6jli6aevVOBmqfMqc1itw.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/d3ac1f181c3d3a3194adba3b66eb7a54" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="4183" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">这导致在1000毫秒(1秒)的单一延迟后，所有三个<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/API/Console/log" rel="noopener ugc nofollow" target="_blank">控制台日志</a>信息一起显示，而不是每次重复呼叫之间延迟1秒的预期效果。</p><p id="0082" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">在我们讨论如何修复这个问题之前，让我们更详细地检查一下<code class="fe kf kg kh ki b">setTimeout()</code>函数。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="13d4" class="nk nl iq bd nm nn no np nq nr ns nt nu jw nv jx nw jz nx ka ny kc nz kd oa ob bi translated">检查<code class="fe kf kg kh ki b">setTimeout()</code></h1><p id="70b9" class="pw-post-body-paragraph ll lm iq ln b lo oc jr lq lr od ju lt lu oe lw lx ly of ma mb mc og me mf lk ij bi mg translated">你可能已经注意到了上面第二段代码中箭头函数的使用。这些都是必要的，因为您需要向<code class="fe kf kg kh ki b">setTimeout()</code>传递一个匿名回调函数，它将运行您希望在超时后执行的代码。</p><p id="e39a" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">在匿名函数中，您可以指定在超时期限后要执行的任意代码:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oh"><img src="../Images/790b5a111524e7d38155a460bae465ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Sey0aaVVz-p8gsAC59ZWQ.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/65564550009246a9b28f886327316c8a" rel="noopener ugc nofollow" target="_blank">将原始代码</a>视为GitHub要点</figcaption></figure><p id="37fc" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">理论上，您可以将函数作为第一个参数传递，将回调函数的参数作为其余参数传递，但这似乎对我来说从来都不合适:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oi"><img src="../Images/f45a539e989626f897701c25fc463c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvqZ_QjHzo0caPwrZ1Zl2w.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/f15fcae7708cd93b20a52dab88b41108" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="c5c7" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">人们使用一根绳子来解决这个问题，但是不建议这样做。从字符串执行JavaScript存在安全风险，因为任何坏人都可能运行以字符串形式注入的任意代码。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi oj"><img src="../Images/807517bb0ff6ec6bb2c47cb0bfbd38d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSREsretSAKeLg0LDFUHEg.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/3200f6bc170d41769f337af52d95c280" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="740a" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">那么为什么<code class="fe kf kg kh ki b">setTimeout()</code>在我们的第一组代码示例中失败了呢？看起来我们使用它是正确的，每次都有1000毫秒的重复延迟。</p><p id="118f" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">原因是<code class="fe kf kg kh ki b">setTimeout()</code>作为<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Glossary/Synchronous" rel="noopener ugc nofollow" target="_blank">同步代码</a>执行，对<code class="fe kf kg kh ki b">setTimeout()</code>的多个调用都同时运行。对<code class="fe kf kg kh ki b">setTimeout()</code>的每次调用都会创建<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing" rel="noopener ugc nofollow" target="_blank">异步代码</a>，该代码将在给定延迟后执行。由于代码片段中的每个延迟都是相同的(1000毫秒)，所有排队的代码在1秒钟的延迟后同时运行。</p><p id="c94c" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">如上所述，<code class="fe kf kg kh ki b">setTimeout()</code>实际上不是一个<code class="fe kf kg kh ki b">sleep()</code>函数；相反，它只是将异步代码排队以供以后执行。幸运的是，可以使用<code class="fe kf kg kh ki b">setTimeout()</code>在JavaScript中创建自己的<code class="fe kf kg kh ki b">sleep()</code>函数。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="1dc4" class="nk nl iq bd nm nn no np nq nr ns nt nu jw nv jx nw jz nx ka ny kc nz kd oa ob bi translated">如何写一个睡眠函数</h1><p id="6b68" class="pw-post-body-paragraph ll lm iq ln b lo oc jr lq lr od ju lt lu oe lw lx ly of ma mb mc og me mf lk ij bi mg translated"><span class="l mh mi mj bm mk ml mm mn mo di"> T </span>通过<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank">承诺</a>、<code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="noopener ugc nofollow" target="_blank">async</a></code>和<code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" rel="noopener ugc nofollow" target="_blank">await</a></code>的能力，你可以编写一个<code class="fe kf kg kh ki b">sleep()</code>函数，它将按照你期望的那样工作。</p><p id="e31d" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">然而，您只能从<code class="fe kf kg kh ki b">async</code>函数中调用这个自定义的<code class="fe kf kg kh ki b">sleep()</code>函数，并且您需要使用<code class="fe kf kg kh ki b">await</code>关键字。</p><p id="1b00" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">这段代码片段演示了如何编写一个<code class="fe kf kg kh ki b">sleep()</code>函数:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ok"><img src="../Images/267176e9884d4bc8330d8843a566d5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mN_t4i1A_0WBM5nvIf9cxg.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/66279195e05dc3e92a56d577ed9f961f" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="c08a" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">这个JavaScript sleep()函数完全按照您的预期工作，因为<code class="fe kf kg kh ki b">await</code>会导致代码的同步执行暂停，直到承诺得到解决。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="0798" class="nk nl iq bd nm nn no np nq nr ns nt nu jw nv jx nw jz nx ka ny kc nz kd oa ob bi translated">一个简单的选择</h1><p id="a988" class="pw-post-body-paragraph ll lm iq ln b lo oc jr lq lr od ju lt lu oe lw lx ly of ma mb mc og me mf lk ij bi mg translated"><span class="l mh mi mj bm mk ml mm mn mo di">答</span>或者，当您首先调用<code class="fe kf kg kh ki b">setTimeout()</code>时，您可以指定增加超时。</p><p id="cb3c" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">以下代码等效于上一个示例:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ol"><img src="../Images/22af0d3522dbb701ce2641cbb2fe0259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e4DUtGgU44I1_p2kWFY40Q.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/7c0711804ea9ad6de1209da3324a8c3b" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="c575" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">使用递增超时是可行的，因为代码都是同时执行的，所以指定的回调函数将在同步代码执行后的1秒、2秒和3秒执行。</p><p id="5cba" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">就我个人而言，我非常喜欢这种方法，尽管如果不使用某种类型的变量来跟踪(或猜测)超时时间，就无法创建这样的睡眠函数。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="ada7" class="nk nl iq bd nm nn no np nq nr ns nt nu jw nv jx nw jz nx ka ny kc nz kd oa ob bi translated">它能循环工作吗？</h1><p id="9942" class="pw-post-body-paragraph ll lm iq ln b lo oc jr lq lr od ju lt lu oe lw lx ly of ma mb mc og me mf lk ij bi mg translated">如你所料，以上暂停JavaScript执行的选项在循环中都能很好地工作。让我们看两个简单的例子。</p><p id="7d75" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">下面是使用自定义<code class="fe kf kg kh ki b">sleep()</code>函数的代码片段:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi om"><img src="../Images/dc54e980156d35e11aa3e966fb3be932.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5aJ8zToJz2Fy2l9igPVX7A.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/1cda61a6c8ae3ef7a80713d44f4b8376" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="07bf" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">下面是一个代码片段，它更简单地使用了递增超时:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi on"><img src="../Images/e67521a94d2583417e7bf819fdc42d65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JRXYvv9KJs1MkQFJtSkUMw.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/djD-REK/71f565ae11c6e56d5ab72e35d71d46a2" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为GitHub要点</figcaption></figure><p id="c4e0" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">同样，我更喜欢后一种语法，尤其是在循环中。</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="a260" class="nk nl iq bd nm nn no np nq nr ns nt nu jw nv jx nw jz nx ka ny kc nz kd oa ob bi translated">结论</h1><p id="b8fc" class="pw-post-body-paragraph ll lm iq ln b lo oc jr lq lr od ju lt lu oe lw lx ly of ma mb mc og me mf lk ij bi mg translated"><span class="l mh mi mj bm mk ml mm mn mo di"> J </span> avaScript可能没有<code class="fe kf kg kh ki b">sleep()</code>或<code class="fe kf kg kh ki b">wait()</code>函数，但是使用内置的<code class="fe kf kg kh ki b">setTimeout()</code>函数创建一个函数是很容易的——只要你小心使用它。</p><p id="f4e1" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">单独来看，<code class="fe kf kg kh ki b">setTimeout()</code>不能作为<code class="fe kf kg kh ki b">sleep()</code>函数工作，但是您可以使用<code class="fe kf kg kh ki b">async</code>和<code class="fe kf kg kh ki b">await</code>创建一个定制的JavaScript <code class="fe kf kg kh ki b">sleep()</code>函数。</p><p id="e6b0" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">采用不同的方法，您可以将交错的(递增的)超时传递给<code class="fe kf kg kh ki b">setTimeout()</code>来模拟<code class="fe kf kg kh ki b">sleep()</code>功能。这是因为所有对<code class="fe kf kg kh ki b">setTimeout()</code>的调用都是同步执行的，就像JavaScript通常做的那样。</p><p id="5441" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">希望这能帮助您在代码中引入一些延迟——只使用普通的JavaScript，不需要任何外部库或框架。</p><p id="ce0b" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">编码快乐！👍💻🔥😊🖖</p></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="3051" class="nk nl iq bd nm nn no np nq nr ns nt nu jw nv jx nw jz nx ka ny kc nz kd oa ob bi translated">延伸阅读:JavaScript中的<code class="fe kf kg kh ki b">sleep()</code></h1><ul class=""><li id="c06b" class="oo op iq ln b lo oc lr od lu oq ly or mc os lk ot ou ov ow bi translated"><a class="ox oy ep" href="https://medium.com/u/e3b33a68b484?source=post_page-----d95d33c99909--------------------------------" rel="noopener" target="_blank"> James Hibbard </a>在<a class="ox oy ep" href="https://medium.com/u/f211fb76f1fd?source=post_page-----d95d33c99909--------------------------------" rel="noopener" target="_blank">网站上有一篇关于<code class="fe kf kg kh ki b">sleep()</code>vs<code class="fe kf kg kh ki b">wait()</code>的好文章:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://www.sitepoint.com/delay-sleep-pause-wait/" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">JavaScript - SitePoint中的延迟、睡眠、暂停和等待</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">许多编程语言都有一个睡眠功能，它会将程序的执行延迟给定的秒数…</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">www.sitepoint.com</p></div></div><div class="pl l"><div class="pm l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="a346" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated"><a class="ox oy ep" href="https://medium.com/u/fe1c14f6cde?source=post_page-----d95d33c99909--------------------------------" rel="noopener" target="_blank"> Flavio Copes </a>在他的博客上提供了一些关于<code class="fe kf kg kh ki b">sleep()</code>和<a class="ae kz" href="https://flaviocopes.com/javascript-sleep/" rel="noopener ugc nofollow" target="_blank">的背景资料:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://flaviocopes.com/javascript-sleep/" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">如何让你的JavaScript函数休眠</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">有时，您希望函数暂停执行一段固定的时间(秒或毫秒)。在编程中…</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">flaviocopes.com</p></div></div><div class="pl l"><div class="pu l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="2079" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated">Ravinder L 在他的博客上有一个<code class="fe kf kg kh ki b">sleep()</code> <a class="ae kz" href="https://medium.com/@raviinit/hold-on-a-second-sleep-wait-or-delay-functionality-using-javascript-8521c7cecf0e" rel="noopener">的替代实现:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://medium.com/@raviinit/hold-on-a-second-sleep-wait-or-delay-functionality-using-javascript-8521c7cecf0e" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">稍等一下！使用JavaScript的sleep()、wait()或delay()功能</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">如何使用JavaScript实现sleep()、wait()或delay()功能或行为？</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="pv l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="5f67" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated"><a class="ox oy ep" href="https://medium.com/u/5253c50d76c1?source=post_page-----d95d33c99909--------------------------------" rel="noopener" target="_blank"> John Au-Yeung </a>在升级编码中对<code class="fe kf kg kh ki b">sleep()</code> <a class="ae kz" href="https://levelup.gitconnected.com/wheres-the-sleep-function-in-javascript-69dc15d54ac8" rel="noopener ugc nofollow" target="_blank">进行了更深入的探讨:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://levelup.gitconnected.com/wheres-the-sleep-function-in-javascript-69dc15d54ac8" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">JavaScript中的睡眠功能在哪里？</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">我们可以毫不费力地找到它。</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pl l"><div class="pw l pn po pp pl pq kt pc"/></div></div></a></div></div><div class="ab cl nb nc hu nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ij ik il im in"><h1 id="7082" class="nk nl iq bd nm nn no np nq nr ns nt nu jw nv jx nw jz nx ka ny kc nz kd oa ob bi translated">延伸阅读:异步JavaScript</h1><ul class=""><li id="e48f" class="oo op iq ln b lo oc lr od lu oq ly or mc os lk ot ou ov ow bi translated">阿莎·曼德瓦娅·🖋️💻🍕在他的博客上讨论<code class="fe kf kg kh ki b">async</code>和<code class="fe kf kg kh ki b">await</code> <a class="ae kz" href="https://medium.com/javascript-in-plain-english/async-await-javascript-5038668ec6eb" rel="noopener">:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://medium.com/javascript-in-plain-english/async-await-javascript-5038668ec6eb" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">如何在JavaScript中使用异步Await</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">把同步JS变成异步JS！</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="px l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="168c" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated"><a class="ox oy ep" href="https://medium.com/u/7ec6bd4cf41f?source=post_page-----d95d33c99909--------------------------------" rel="noopener" target="_blank">刘哲</a>在他的博客上对<code class="fe kf kg kh ki b">async</code>和<code class="fe kf kg kh ki b">await</code> <a class="ae kz" href="https://medium.com/@zellwk/an-introduction-to-javascripts-async-and-await-edb313356677" rel="noopener">有着清晰&amp;透彻的指引:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://medium.com/@zellwk/an-introduction-to-javascripts-async-and-await-edb313356677" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">JavaScript的异步和等待简介</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">异步JavaScript从来都不容易。有一段时间，我们使用回调。然后，我们用承诺。现在，我们有…</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="py l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="9b2f" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated"><a class="ox oy ep" href="https://medium.com/u/32d167073cdb?source=post_page-----d95d33c99909--------------------------------" rel="noopener" target="_blank"> Gokul N K </a>提供了<code class="fe kf kg kh ki b">async</code> <a class="ae kz" href="https://medium.com/better-programming/understanding-async-await-in-javascript-1d81bb079b2c" rel="noopener">在更好的编程中的有用例子</a>:</li></ul><div class="oz pa gp gr pb pc"><a href="https://medium.com/better-programming/understanding-async-await-in-javascript-1d81bb079b2c" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">理解JavaScript中的异步等待</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">何时以及如何使用async和await的经验法则和示例</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="pz l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="0f46" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated">AJ Meyghani 在他的博客上写了一篇关于异步JS <a class="ae kz" href="https://medium.com/@ajmeyghani/async-javascript-a-pocket-reference-2bb16ac40d21" rel="noopener">的文章:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://medium.com/@ajmeyghani/async-javascript-a-pocket-reference-2bb16ac40d21" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">异步JavaScript，袖珍参考</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">JavaScript异步编程基础</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="qa l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="2b6f" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated"><a class="ox oy ep" href="https://medium.com/u/951481faa856?source=post_page-----d95d33c99909--------------------------------" rel="noopener" target="_blank"> Nikhil Mohadikar </a>在他的博客上有关于事件循环<a class="ae kz" href="https://medium.com/swlh/asynchronous-javascript-in-depth-1e66c65f96fe" rel="noopener">的精彩插图:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://medium.com/swlh/asynchronous-javascript-in-depth-1e66c65f96fe" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">深入了解异步Javascript。</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">来自Ruby这样的同步代码执行背景，我总是对javascript如何执行感到困惑…</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="qb l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="5e05" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" rel="noopener ugc nofollow" target="_blank"> MDN文档</a>中有一些关于<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Promises" rel="noopener ugc nofollow" target="_blank">使用承诺</a>的有用文章:</li></ul><div class="oz pa gp gr pb pc"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">利用承诺</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">是表示异步操作最终完成或失败的对象。既然大多数人都是…</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">developer.mozilla.org</p></div></div><div class="pl l"><div class="qc l pn po pp pl pq kt pc"/></div></div></a></div><div class="oz pa gp gr pb pc"><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Promises" rel="noopener  ugc nofollow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">承诺优雅的异步编程</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">承诺是JavaScript语言的一个相对较新的特性，它允许您将进一步的操作推迟到…</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">developer.mozilla.org</p></div></div><div class="pl l"><div class="qd l pn po pp pl pq kt pc"/></div></div></a></div><ul class=""><li id="39ad" class="oo op iq ln b lo mt lr mu lu pr ly ps mc pt lk ot ou ov ow bi translated"><a class="ox oy ep" href="https://medium.com/u/258f47a22015?source=post_page-----d95d33c99909--------------------------------" rel="noopener" target="_blank"> Danny Moerkerke </a>在他的博客中讲述了异步JS <a class="ae kz" href="https://medium.com/swlh/what-you-need-to-know-about-asynchronous-programming-in-javascript-894f90a97941" rel="noopener">的要点:</a></li></ul><div class="oz pa gp gr pb pc"><a href="https://medium.com/swlh/what-you-need-to-know-about-asynchronous-programming-in-javascript-894f90a97941" rel="noopener follow" target="_blank"><div class="pd ab fo"><div class="pe ab pf cl cj pg"><h2 class="bd ir gy z fp ph fr fs pi fu fw ip bi translated">关于JavaScript中的异步编程，您需要知道什么</h2><div class="pj l"><h3 class="bd b gy z fp ph fr fs pi fu fw dk translated">你不能犯这个错误</h3></div><div class="pk l"><p class="bd b dl z fp ph fr fs pi fu fw dk translated">medium.com</p></div></div><div class="pl l"><div class="qe l pn po pp pl pq kt pc"/></div></div></a></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi qf"><img src="../Images/d180cdf9433f356035a7582a92a38804.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AOL-RWrwwLxVTGnF"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://unsplash.com/@davidclode?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> David Clode </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="74ae" class="pw-post-body-paragraph ll lm iq ln b lo mt jr lq lr mu ju lt lu mw lw lx ly my ma mb mc na me mf lk ij bi translated">德里克·奥斯丁博士是《职业规划:如何在6个月内成为一名成功的6位数程序员 一书的作者，该书现已在亚马逊上架。</p></div></div>    
</body>
</html>