<html>
<head>
<title>Vue 3 — JavaScript Transitions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 3 — JavaScript转换</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vue-3-javascript-transitions-7ca6ad10d109?source=collection_archive---------4-----------------------#2020-11-07">https://blog.devgenius.io/vue-3-javascript-transitions-7ca6ad10d109?source=collection_archive---------4-----------------------#2020-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/4da3155cc442515804c3c60287fae63b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ro8mMIHaI3omvemo"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">摄影:周在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="6c02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3处于测试阶段，可能会有变化。</p><p id="d5d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是Vue前端框架的最新版本。</p><p id="1584" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它建立在Vue 2的普及性和易用性之上。</p><p id="577f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何设置转场持续时间和创建JavaScript转场。</p><h1 id="3ad9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">过渡持续时间</h1><p id="8c91" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">duration</code>属性设置过渡持续时间。</p><p id="f94d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="81dd" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      .bounce-enter-active {<br/>        animation: bounce-in 1.5s;<br/>      }<br/>      .bounce-leave-active {<br/>        animation: bounce-in 1.5s reverse;<br/>      }<br/>      @keyframes bounce-in {<br/>        0% {<br/>          transform: scale(0);<br/>        }<br/>        50% {<br/>          transform: scale(1.5);<br/>        }<br/>        100% {<br/>          transform: scale(1);<br/>        }<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="show = !show"&gt;<br/>        Toggle<br/>      &lt;/button&gt;</span><span id="99dc" class="mq lc iq mh b gy mv ms l mt mu">      &lt;transition name="bounce" :duration="1000"&gt;<br/>        &lt;p v-if="show"&gt;hello&lt;/p&gt;<br/>      &lt;/transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            show: false<br/>          };<br/>        }<br/>      });<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="56f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需将<code class="fe me mf mg mh b">duration</code>道具添加到<code class="fe me mf mg mh b">transition</code>组件来设置持续时间。</p><p id="c398" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">持续时间以毫秒为单位。</p><p id="807a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以为进入和离开转换设置单独的值:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="76fb" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      .bounce-enter-active {<br/>        animation: bounce-in 1.5s;<br/>      }<br/>      .bounce-leave-active {<br/>        animation: bounce-in 1.5s reverse;<br/>      }<br/>      <a class="ae kc" href="http://twitter.com/keyframes" rel="noopener ugc nofollow" target="_blank">@keyframes</a> bounce-in {<br/>        0% {<br/>          transform: scale(0);<br/>        }<br/>        50% {<br/>          transform: scale(1.5);<br/>        }<br/>        100% {<br/>          transform: scale(1);<br/>        }<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="show = !show"&gt;<br/>        Toggle<br/>      &lt;/button&gt;</span><span id="5bcc" class="mq lc iq mh b gy mv ms l mt mu">      &lt;transition name="bounce" :duration="{ enter: 500, leave: 1000 }"&gt;<br/>        &lt;p v-if="show"&gt;hello&lt;/p&gt;<br/>      &lt;/transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            show: false<br/>          };<br/>        }<br/>      });<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="9ddf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们再次用<code class="fe me mf mg mh b">enter</code>和<code class="fe me mf mg mh b">leave</code>属性以毫秒为单位来设置每个效果的持续时间。</p><h1 id="bdce" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript挂钩</h1><p id="a7bf" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">转换的每个阶段都有JavaScript挂钩。</p><p id="9133" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们包括:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a5f8" class="mq lc iq mh b gy mr ms l mt mu">&lt;transition<br/>  @before-enter="beforeEnter"<br/>  @enter="enter"<br/>  @after-enter="afterEnter"<br/>  @enter-cancelled="enterCancelled"<br/>  @before-leave="beforeLeave"<br/>  @leave="leave"<br/>  @after-leave="afterLeave"<br/>  @leave-cancelled="leaveCancelled"<br/>  :css="false"<br/>&gt;<br/>  &lt;!-- ... --&gt;<br/>&lt;/transition&gt;</span></pre><p id="4166" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">css</code>设置为<code class="fe me mf mg mh b">false</code>意味着我们使用JavaScript来应用过渡效果。</p><p id="508e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和往常一样，钩子在组件的<code class="fe me mf mg mh b">methods</code>属性中。</p><p id="ac63" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">的签名是:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5739" class="mq lc iq mh b gy mr ms l mt mu">methods: {<br/>  beforeEnter(el) {<br/>    // ...<br/>  },<br/><br/>  enter(el, done) {<br/>    // ...<br/>    done()<br/>  },</span><span id="97f0" class="mq lc iq mh b gy mv ms l mt mu">  afterEnter(el) {<br/>    // ...<br/>  },</span><span id="f8a0" class="mq lc iq mh b gy mv ms l mt mu">  enterCancelled(el) {<br/>    // ...<br/>  },</span><span id="8d31" class="mq lc iq mh b gy mv ms l mt mu">  beforeLeave(el) {<br/>    // ...<br/>  },<br/><br/>  leave(el, done) {<br/>    // ...<br/>    done()<br/>  },</span><span id="27fa" class="mq lc iq mh b gy mv ms l mt mu">  afterLeave(el) {<br/>    // ...<br/>  },<br/><br/>  leaveCancelled(el) {<br/>    // ...<br/>  }<br/>}</span></pre><p id="45e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">el</code>是元素，<code class="fe me mf mg mh b">done</code>是指示转换完成的函数。</p><p id="7dce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用Greensock库进行JavaScript转换。</p><p id="8071" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d94f" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/gsap.min.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="show = !show"&gt;<br/>        Toggle<br/>      &lt;/button&gt;</span><span id="aa73" class="mq lc iq mh b gy mv ms l mt mu">      &lt;transition<br/>        @before-enter="beforeEnter"<br/>        @enter="enter"<br/>        @leave="leave"<br/>        :css="false"<br/>      &gt;<br/>        &lt;p v-if="show"&gt;<br/>          hello world<br/>        &lt;/p&gt;<br/>      &lt;/transition&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const app = Vue.createApp({<br/>        data() {<br/>          return {<br/>            show: false<br/>          };<br/>        },<br/>        methods: {<br/>          beforeEnter(el) {<br/>            gsap.set(el, {<br/>              scaleX: 0.9,<br/>              scaleY: 1.6<br/>            });<br/>          },<br/>          enter(el, done) {<br/>            gsap.to(el, {<br/>              duration: 1,<br/>              scaleX: 1.2,<br/>              scaleY: 0.9,<br/>              opacity: 1,<br/>              x: 150,<br/>              ease: "elastic.inOut(2.8, 1)",<br/>              onComplete: done<br/>            });<br/>          },<br/>          leave(el, done) {<br/>            gsap.to(el, {<br/>              duration: 0.5,<br/>              scaleX: 1,<br/>              scaleY: 1,<br/>              x: 300,<br/>              ease: "elastic.inOut(2.5, 1)"<br/>            });<br/>            gsap.to(el, {<br/>              duration: 0.2,<br/>              delay: 0.5,<br/>              opacity: 0,<br/>              onComplete: done<br/>            });<br/>          }<br/>        }<br/>      });<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="c99f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用格林斯托克创作我们的动画。</p><p id="793b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了带有脚本标签的Greensock库。</p><p id="710f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">gsap.set</code>方法在开始动画之前设置元素的初始比例。</p><p id="34f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">enter</code>方法具有输入转换效果。</p><p id="19f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">duration</code>设置为1持续1秒钟</p><p id="219e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">scaleX</code>和<code class="fe me mf mg mh b">scaleY</code>改变我们p元素的大小。</p><p id="f5b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">opacity</code>改变不透明度。</p><p id="ec5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">x</code>是向右平移的距离，以像素为单位。</p><p id="fdb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">ease</code>是缓和效果。</p><p id="d9a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">onComplete</code>是一个回调，表示过渡已经完成。</p><p id="a4c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">leave</code>方法中也有类似的东西。</p><p id="4e51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有两个过渡效果，而不是一个离开过渡效果。</p><p id="e882" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些方法被设置为<code class="fe me mf mg mh b">transition</code>组件中相应指令的值，因此我们可以使用它。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/d43326766225e325eaa5b41e26276129.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NgjKTRQ1eux0EEdF"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">安妮·兰贝克在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="367d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="c8d0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用JavaScript代替CSS来创建我们的过渡。</p><p id="7bd3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像Greensock这样的库使这个过程变得很容易。</p></div></div>    
</body>
</html>