<html>
<head>
<title>Simplest way to add CI to iOS project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向 iOS 项目添加配置项的最简单方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/simplest-way-to-add-ci-to-ios-project-36f345ae3cb2?source=collection_archive---------3-----------------------#2022-01-19">https://blog.devgenius.io/simplest-way-to-add-ci-to-ios-project-36f345ae3cb2?source=collection_archive---------3-----------------------#2022-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3178" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过利用 Github 动作的力量</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi kf"><img src="../Images/309c64ae091211f53b358629cb3df161.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*T35tW3DWaUeTPcvhPxd8jg.png"/></div><figcaption class="kn ko gj gh gi kp kq bd b be z dk translated">照片由<a class="ae kr" href="https://www.pexels.com/@sam-lion?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">山姆·里恩</a>从<a class="ae kr" href="https://www.pexels.com/photo/glad-woman-with-cat-writing-in-planner-while-using-laptop-6002000/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>拍摄</figcaption></figure><p id="926f" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们都听说过 CI/CD 在 iOS 开发中的重要性。大多数大公司都希望你了解这一点，这不是偶然的。</p><p id="4e21" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">老实说，当我第一次了解它的时候，我认为它是非常复杂的事情，我甚至不知道从哪里开始。我希望有这样一篇简单的文章。</p><p id="c330" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">我们将一起看看如何通过使用<strong class="ku ir"> Github Actions </strong>来轻松地为您的项目设置您自己的 CI。是的，零成本！</p><blockquote class="lo lp lq"><p id="076c" class="ks kt lr ku b kv kw jr kx ky kz ju la ls lc ld le lt lg lh li lu lk ll lm ln ij bi translated">它不会花你一分钱，因为它对 Github 公共项目是免费的。🔥</p></blockquote><h2 id="261b" class="lv lw iq bd lx ly lz dn ma mb mc dp md lb me mf mg lf mh mi mj lj mk ml mm mn bi translated">🤓要求:</h2><ul class=""><li id="c6ea" class="mo mp iq ku b kv mq ky mr lb ms lf mt lj mu ln mv mw mx my bi translated">Github 帐户</li><li id="395a" class="mo mp iq ku b kv mz ky na lb nb lf nc lj nd ln mv mw mx my bi translated">至少有一个单元测试</li><li id="3725" class="mo mp iq ku b kv mz ky na lb nb lf nc lj nd ln mv mw mx my bi translated">推送 iOS 项目的公共存储库</li></ul><h2 id="92e7" class="lv lw iq bd lx ly lz dn ma mb mc dp md lb me mf mg lf mh mi mj lj mk ml mm mn bi translated">🙈CI 是什么？</h2><p id="60b6" class="pw-post-body-paragraph ks kt iq ku b kv mq jr kx ky mr ju la lb ne ld le lf nf lh li lj ng ll lm ln ij bi translated">每次新代码被放入存储库时，都应该有一个<strong class="ku ir">连续的</strong>方法来确保一切正常，没有任何功能中断。这是通过运行所有单元测试并期望它们成功来实现的。</p><blockquote class="lo lp lq"><p id="3eb5" class="ks kt lr ku b kv kw jr kx ky kz ju la ls lc ld le lt lg lh li lu lk ll lm ln ij bi translated">CI 代表持续集成，是将所有开发人员的工作安全可靠地合并到一个分支<em class="iq">(又名开发或主分支)</em>中的实践</p></blockquote><p id="5ac3" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">因此，当有人将新代码放入存储库时，拥有 CI 的计算机就会被触发，然后开始测试一切。</p><h2 id="d650" class="lv lw iq bd lx ly lz dn ma mb mc dp md lb me mf mg lf mh mi mj lj mk ml mm mn bi translated">💪为什么要用 CI？</h2><p id="29b6" class="pw-post-body-paragraph ks kt iq ku b kv mq jr kx ky mr ju la lb ne ld le lf nf lh li lj ng ll lm ln ij bi translated">我们生活在一个变化无常的世界里，一切都变化得如此之快。<br/>我们的存储库变化也很快，我们需要一种方法来确保每次提交都通过所有测试，并且完全正常。</p><p id="a770" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">没有 CI，版本控制的想法就失去了它的价值，因为我们不知道哪些提交是健壮的和功能性的(通过所有测试)。CI 被证明可以提高开发人员的体验和生产力。</p><p id="cc9c" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">但最重要的是，我们向客户提供高质量的一流产品🎉</p><h2 id="73f0" class="lv lw iq bd lx ly lz dn ma mb mc dp md lb me mf mg lf mh mi mj lj mk ml mm mn bi translated">🚀让我们的 iOS 项目有 CI</h2><p id="faf5" class="pw-post-body-paragraph ks kt iq ku b kv mq jr kx ky mr ju la lb ne ld le lf nf lh li lj ng ll lm ln ij bi translated">在开始之前，让我们特别感谢 GitHub 团队给了我们提升❤️开发者体验的工具</p><p id="ea39" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">第 1 步—创建文件:</strong> <br/>首先在<code class="fe nh ni nj nk b"><a class="ae kr" href="https://github.com/Nikoloutsos/fancyGradient/tree/master/.github" rel="noopener ugc nofollow" target="_blank">.github</a>/workflows/<br/></code>创建并推送一个新的 ci.yml 文件，如果您的 github 中没有这些文件夹，请创建它们</p><blockquote class="lo lp lq"><p id="60cb" class="ks kt lr ku b kv kw jr kx ky kz ju la ls lc ld le lt lg lh li lu lk ll lm ln ij bi translated">📒你知道吗？yml 文件代表另一种标记语言？</p></blockquote><p id="1399" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">第二步—配置文件:</strong> <br/>创建后，需要进行配置。(这将让 GitHub Action 知道何时运行什么)</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><ul class=""><li id="77ae" class="mo mp iq ku b kv kw ky kz lb nn lf no lj np ln mv mw mx my bi translated">这是您工作流程的名称，将显示在此处</li></ul><blockquote class="lo lp lq"><p id="3327" class="ks kt lr ku b kv kw jr kx ky kz ju la ls lc ld le lt lg lh li lu lk ll lm ln ij bi translated">📒如果省略<code class="fe nh ni nj nk b">name</code>，GitHub 会将其设置为相对于存储库根目录的工作流文件路径。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nq"><img src="../Images/c4049546c1ced51e423bc19cec00be19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FfD2EBAIdKmRZrSeWajOYg.png"/></div></div></figure><ul class=""><li id="daa7" class="mo mp iq ku b kv kw ky kz lb nn lf no lj np ln mv mw mx my bi translated"><code class="fe nh ni nj nk b">on → push → branches<br/></code>只在需要的分支上运行 CI。在这种情况下，主分支或开发分支上的新提交将触发 CI。</li><li id="ddfa" class="mo mp iq ku b kv mz ky na lb nb lf nc lj nd ln mv mw mx my bi translated"><code class="fe nh ni nj nk b">on → pull_request → branches<br/></code>仅对那些将被合并到 master 或 develop 的 pr 运行 CI。<br/>现在你的公关将会有那些绿色的勾号✅.</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nv"><img src="../Images/9bc93b822f27a198fe78d48aa42863b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0tpvCf_YU7tqKynLs9Few.png"/></div></div></figure><ul class=""><li id="3258" class="mo mp iq ku b kv kw ky kz lb nn lf no lj np ln mv mw mx my bi translated"><code class="fe nh ni nj nk b">jobs → build → runs-on</code> <br/>你希望你的项目运行的 MAC-OS 版本。</li><li id="675d" class="mo mp iq ku b kv mz ky na lb nb lf nc lj nd ln mv mw mx my bi translated"><code class="fe nh ni nj nk b">jobs → build → name</code> <br/>这是您为该步骤指定的名称，它显示在这里。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="nr ns di nt bf nu"><div class="gh gi nw"><img src="../Images/39b5297f464da75b025b98dc70193394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S2J3q6McyhLZPobFO9A6Xw.png"/></div></div></figure><p id="5e66" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">现在最重要的是。CI 如何知道如何运行我们项目的测试？让我们看看如何指导我们的 CI 做到这一点。👀👇👇</p><ul class=""><li id="f36c" class="mo mp iq ku b kv kw ky kz lb nn lf no lj np ln mv mw mx my bi translated"><code class="fe nh ni nj nk b">jobs → build → steps → run<br/></code>这里我们说<strong class="ku ir">运行⚡️的终端命令</strong>在我们的例子中，我们需要在 iphone 12 mini 上运行所有测试。<br/> <strong class="ku ir"> XCode 命令行工具</strong>为我们提供了一些有用的终端命令，用于与我们的项目进行交互。那就是构建、测试等等🔥！</li></ul><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="696f" class="lv lw iq nk b gy ob oc l od oe">xcodebuild -scheme {{Your_SchemeName}} test -destination "platform=iOS Simulator,name=iPhone 12 mini"</span></pre><p id="9b98" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">上述命令通过运行名为{{Your_SchemeName}}的方案的所有单元测试来测试该方案。</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="bfb4" class="lv lw iq nk b gy ob oc l od oe">xcodebuild build-<strong class="nk ir">for</strong>-testing <br/>[-workspace &lt;your_workspace_name&gt;]<br/>[-project &lt;your_project_name&gt;]<br/>-scheme &lt;your_scheme_name&gt;<br/>-destination &lt;destination-specifier&gt;</span></pre><p id="6ed4" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">这里有一个关于这个命令语法的简短指南。<code class="fe nh ni nj nk b">-workspace </code>和<code class="fe nh ni nj nk b">-project</code>是可选的。如果你想了解更多这方面的知识，请查看</p><div class="of og gp gr oh oi"><a href="https://www.appsdeveloperblog.com/run-xcode-unit-tests-from-the-command-line/" rel="noopener  ugc nofollow" target="_blank"><div class="oj ab fo"><div class="ok ab ol cl cj om"><h2 class="bd ir gy z fp on fr fs oo fu fw ip bi translated">从命令行运行 Xcode 单元测试——应用开发者博客</h2><div class="op l"><h3 class="bd b gy z fp on fr fs oo fu fw dk translated">在本教程中，您将学习如何从命令行构建和运行 Xcode 单元测试。命令行工具…</h3></div><div class="oq l"><p class="bd b dl z fp on fr fs oo fu fw dk translated">www.appsdeveloperblog.com</p></div></div><div class="or l"><div class="os l ot ou ov or ow kl oi"/></div></div></a></div><p id="e7b7" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">想象一下我们在终端上运行这个命令。除了在 Github 这边的不同机器上运行之外，都是一样的。</p><blockquote class="lo lp lq"><p id="9bca" class="ks kt lr ku b kv kw jr kx ky kz ju la ls lc ld le lt lg lh li lu lk ll lm ln ij bi translated">不要使用 XCode 命令行工具，你可以使用大多数公司大量使用的<strong class="ku ir"> fastlane </strong>。它基本上提供了一个更简单的界面和更性感的输出。使用 fastlane，你可以用更少的写作获得更多。<br/><a class="ae kr" href="https://fastlane.tools" rel="noopener ugc nofollow" target="_blank">https://fast lane . tools</a></p></blockquote><p id="9fd7" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><strong class="ku ir">第三步——推动你的改变</strong></p><p id="d423" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">就这样祝贺你🎉，您正式为您的 iOS 项目设置了第一个 CI。</p><h2 id="6a00" class="lv lw iq bd lx ly lz dn ma mb mc dp md lb me mf mg lf mh mi mj lj mk ml mm mn bi translated">❤️额外提示(在 github 上获得状态徽章)</h2><p id="6094" class="pw-post-body-paragraph ks kt iq ku b kv mq jr kx ky mr ju la lb ne ld le lf nf lh li lj ng ll lm ln ij bi translated">这真的很简单，你所要做的就是修改你的 README.md 文件，并添加如下内容</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="e6e0" class="lv lw iq nk b gy ob oc l od oe">[![ci](<a class="ae kr" href="https://github.com/Nikoloutsos/fancy-gradient/actions/workflows/ci.yml/badge.svg" rel="noopener ugc nofollow" target="_blank">https://github.com/</a>&lt;OWNER&gt;<a class="ae kr" href="https://github.com/Nikoloutsos/fancy-gradient/actions/workflows/ci.yml/badge.svg" rel="noopener ugc nofollow" target="_blank">/</a>&lt;REPOSITORY&gt;<a class="ae kr" href="https://github.com/Nikoloutsos/fancy-gradient/actions/workflows/ci.yml/badge.svg" rel="noopener ugc nofollow" target="_blank">/actions/workflows/ci.yml/badge.svg</a>)]</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/952693e7d842977f9c4d2db2b8e9ffc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:256/format:webp/1*QA3yO7F_bLECm0d0tqwSdw.png"/></div></figure><p id="85f2" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果您希望每个分支有不同的状态，请使用以下命令:</p><pre class="kg kh ki kj gt nx nk ny nz aw oa bi"><span id="56ac" class="lv lw iq nk b gy ob oc l od oe">![example branch parameter](https://github.com/github/docs/actions/workflows/ci.yml/badge.svg?branch=feature-1)</span></pre><p id="4f73" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated"><a class="ae kr" href="https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/adding-a-workflow-status-badge" rel="noopener ugc nofollow" target="_blank">https://docs . github . com/en/actions/monitoring-and-trouble shooting-workflows/adding-a-workflow-status-badge</a></p><h2 id="b22c" class="lv lw iq bd lx ly lz dn ma mb mc dp md lb me mf mg lf mh mi mj lj mk ml mm mn bi translated">❓现在该怎么办？：</h2><p id="5616" class="pw-post-body-paragraph ks kt iq ku b kv mq jr kx ky mr ju la lb ne ld le lf nf lh li lj ng ll lm ln ij bi translated">我希望你觉得这很有趣。单元测试和 CI 是给公司带来很多价值的事情之一，因为它们减少了手动测试并有助于构建高质量的产品。</p><p id="f63e" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">大多数高薪工作都需要这种技能，这不是偶然的。很高兴在这里看到你，这意味着你关心成为一个更好的自己，毫无疑问，你很快就会得到回报🤩！</p><p id="64c0" class="pw-post-body-paragraph ks kt iq ku b kv kw jr kx ky kz ju la lb lc ld le lf lg lh li lj lk ll lm ln ij bi translated">如果你喜欢读这篇文章，别忘了留下👏</p></div></div>    
</body>
</html>