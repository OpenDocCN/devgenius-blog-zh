<html>
<head>
<title>Be careful! Trojan horse in iOS codebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">小心点！iOS代码库中的特洛伊木马</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/be-careful-trojan-horse-in-ios-codebase-75ba3662f8a2?source=collection_archive---------3-----------------------#2021-12-18">https://blog.devgenius.io/be-careful-trojan-horse-in-ios-codebase-75ba3662f8a2?source=collection_archive---------3-----------------------#2021-12-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0601b8d10f971f803659debb54ded467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrUX5l_WQdBXP2jKWA33xg.jpeg"/></div></div></figure><p id="019c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">尽管我们开发人员创造了漂亮的用户界面，并一直在努力提高客户的UX，但我们需要了解并消除一些安全问题。在本文中，我们将看到一个名为<strong class="jx io">特洛伊木马的安全问题。</strong></p><h2 id="c187" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">看到问题了吗⚠️</h2><p id="0377" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">众所周知，每个字符对应一个特定的unicode。但是你知道吗，那里有一些特别的角色。</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="6fab" class="kt ku in lw b gy ma mb l mc md"><strong class="lw io">func</strong> test() {</span><span id="5d64" class="kt ku in lw b gy me mb l mc md"><strong class="lw io">    let</strong> accessLevel = "user"</span><span id="e018" class="kt ku in lw b gy me mb l mc md"><strong class="lw io">    if</strong> accessLevel != "user⁦// check if admin⁩⁦" {</span><span id="53e3" class="kt ku in lw b gy me mb l mc md">        print("You're an admin")</span><span id="736c" class="kt ku in lw b gy me mb l mc md">    }</span><span id="45cb" class="kt ku in lw b gy me mb l mc md">}</span><span id="ff5d" class="kt ku in lw b gy me mb l mc md">test()</span></pre><p id="e09d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这段代码乍一看会输出“您是管理员”？但是尝试将它复制粘贴到XCode中，看看它看起来是什么样子。这是结果。</p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/79239ea9056188282cff7086ef6bf3f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*U2-CoFQtjwsBW4sYQNwcwQ.png"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">不是开玩笑</figcaption></figure><p id="753c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">稍等..😱这是我的第一反应。现在看起来它不会有任何输出。</p><p id="b1c7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里的每个开发人员都会说，当if语句中的谓词等于false时，输出将是空的。</p><p id="9894" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">猜猜输出是什么:</p><pre class="lr ls lt lu gt lv lw lx ly aw lz bi"><span id="9ea1" class="kt ku in lw b gy ma mb l mc md">You're an admin</span></pre><p id="2dc5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以有人可能会改变你的申请流程。如果你为自动驾驶汽车开发了一个软件，并且在代码库中有这样的东西。然后司机会踩刹车，汽车会加速到‼️</p><blockquote class="mk ml mm"><p id="57bd" class="jv jw mn jx b jy jz ka kb kc kd ke kf mo kh ki kj mp kl km kn mq kp kq kr ks ig bi translated">这不会发生，因为单元测试，但你仍然得到了我的观点！</p></blockquote><h2 id="c24c" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">✅解决方案</h2><p id="032c" class="pw-post-body-paragraph jv jw in jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">别急，有解决的办法。Idea的解决方案很简单。<br/> <strong class="jx io">不要让那些特殊的字符出现在代码库中。</strong></p><p id="837a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这可以通过使用<a class="ae mr" href="https://github.com/realm/SwiftLint" rel="noopener ugc nofollow" target="_blank"> Swiftlint </a>并添加自定义lint规则来完成。</p><p id="2b80" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您需要添加的规则如下</p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/83cb947ea69e2f3f734d170830ea6d31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*6NdcF1JwAa7xTrEtXR3hdg.png"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">捕捉这些特殊字符的自定义规则</figcaption></figure><blockquote class="mk ml mm"><p id="395d" class="jv jw mn jx b jy jz ka kb kc kd ke kf mo kh ki kj mp kl km kn mq kp kq kr ks ig bi translated">如macdrevx在此<a class="ae mr" href="https://github.com/realm/SwiftLint/issues/3751" rel="noopener ugc nofollow" target="_blank">拉动请求</a>中所建议的</p></blockquote><p id="0369" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你想了解什么是swiftLint，我推荐你读一下这个👇</p><div class="mt mu gp gr mv mw"><a rel="noopener  ugc nofollow" target="_blank" href="/enforce-swift-style-and-conventions-for-ios-7f5047837e82"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">对iOS实施Swift风格和惯例</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">一种让您团队中的所有开发人员使用相同的编码标准和规则编写代码的方法</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">blog.devgenius.io</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jt mw"/></div></div></a></div><p id="9447" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你从这篇文章中学到了什么，别忘了跟随<strong class="jx io"> </strong>和👏。</p></div></div>    
</body>
</html>