<html>
<head>
<title>Fail Hard, Save Time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">努力失败，节省时间</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/fail-hard-save-time-3555a1dc1458?source=collection_archive---------3-----------------------#2020-12-19">https://blog.devgenius.io/fail-hard-save-time-3555a1dc1458?source=collection_archive---------3-----------------------#2020-12-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5446" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi kl translated">ugs 是不可避免的。调试错误是对时间的巨大浪费。更好的错误消息让工程师们行动更快。为了获得更好的错误，我们需要更努力地失败。</p><p id="a540" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下规则是我总结的最佳实践，按照实现难度的顺序排列</p><h1 id="fa91" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">1.大声失败</h1><p id="67aa" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">无声的失败是可怕的。</p><p id="15fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">产品代码应该在 UI 里大声<strong class="jp ir">失败</strong> <strong class="jp ir">，而不是控制台或者日志</strong>。基础代码应该<strong class="jp ir">在日志中失败，而不是返回空值</strong>。</p><p id="f051" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们正在编写一个库或服务，默认应该是 throw/spew，用户应该尽力让它静音。永远不要隐藏异常(例如<strong class="jp ir"><em class="lx">catch</em></strong>(<strong class="jp ir"><em class="lx">Exception $ e)</em></strong>)，除非我们只是记录日志并打算立即重新抛出。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/8384ec6e0f723ed221011977ef467c8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*7y1exzQwj2rOauKl9tph3A.png"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">错误对话框</figcaption></figure><h1 id="dee2" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">2.含糊地失败</h1><p id="0ca8" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">失败时不要言简意赅。足够详细的错误有助于重现 bug。错误包含的信息应该比您可能期望的要多得多。</p><p id="b577" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">交互模式(或<strong class="jp ir"> cmd 线工具</strong>)就是最好的例子。当我们输入东西时，电脑会给我们一个结果。理想的错误消息或日志消息将捕获您粘贴“python -i”或再现错误所需的任何内容。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/9be71e2795386de3bacc8b535c0c8b60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*Z9rILfIioLwDZWt3YBGXTA.png"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">错误示例</figcaption></figure><h1 id="95f1" class="ku kv iq bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">3.接近根本原因的失败</h1><p id="2cf1" class="pw-post-body-paragraph jn jo iq jp b jq ls js jt ju lt jw jx jy lu ka kb kc lv ke kf kg lw ki kj kk ij bi translated">与#1 和#2 不同，这条规则涉及修改代码，而<em class="lx">不处理</em>错误处理。这意味着让我们的软件更加脆弱。</p><p id="97e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您获得堆栈跟踪时，它通常指向最接近的原因。我们想在终极原因上失败。出了问题，你想尽快知道。</p><p id="17bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的代码越脆弱、越不宽容，就越容易找到错误的最终原因。</p></div></div>    
</body>
</html>