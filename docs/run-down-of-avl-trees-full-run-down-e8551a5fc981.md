# AVL æ ‘çš„è¡°è´¥

> åŸæ–‡ï¼š<https://blog.devgenius.io/run-down-of-avl-trees-full-run-down-e8551a5fc981?source=collection_archive---------7----------------------->

å¦‚æœä½ æ˜¯æ•°æ®ç»“æ„çš„çµé­‚ä¼´ä¾£ï¼Œä½ å¯èƒ½å·²ç»å¬è¯´è¿‡å¾ˆå¤šå…³äºé‚£äº›æ€ªå¼‚çš„ğŸ‘¹èƒ½å¤Ÿè‡ªåŠ¨é‡æ–°å¹³è¡¡è‡ªèº«çš„è‡ªå¹³è¡¡æ ‘ã€‚å¬èµ·æ¥å¾ˆæœ‰é­…åŠ›ï¼Œä¸æ˜¯å—ï¼ŸğŸ¤©

è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒä»¬æ˜¯ç”±ä»€ä¹ˆç»„æˆçš„ï¼Œä»¥åŠä½ å¯ä»¥å¦‚ä½•åš soğŸ§‘â€ğŸ’»

ç›®å½•:

1.  æ•°æ®ç»“æ„ç®€ä»‹
2.  æ ‘æœ¨çš„é—®é¢˜
3.  AVL æ ‘ç®€ä»‹

*   å¹³è¡¡ç³»æ•°:å¹³è¡¡å’Œé«˜åº¦
*   æ—‹è½¬

4.ä»£ç éƒ¨åˆ†

5.ç»“å°¾éƒ¨åˆ†

![](img/0f5ef479f299aab8b27e63e8ae3fdb05.png)

ç”±[å¸ƒè±å…‹Â·åº·çº³åˆ©](https://unsplash.com/@blakeconnally?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

# å…³äºæ ‘çš„ç®€çŸ­ä»‹ç»

å¦‚æœä½ éœ€è¦å‚¨å­˜ï¼Œæœ‰å¾ˆå¤šç§æ ‘å¯ä»¥è®©ä½ åˆ©ç”¨å®ƒä»¬çš„é•¿å¤„ğŸ“‚å’Œæœç´¢æ•°æ®ã€‚ä»…ä¸¾å‡ ä¸ªä¾‹å­:

*   æ™®é€šäºŒå‰æ ‘
*   äºŒåˆ†æœç´¢æ³•æ ‘(åˆåè‹±å›½å¤ä»¤æ—¶)
*   å †(æœ€å°/æœ€å¤§å †ã€æ–æ³¢é‚£å¥‘å †ç­‰)
*   Trie(å‘éŸ³åƒ t-r-y)
*   è‡ªå¹³è¡¡æ ‘(æœ€è‘—åçš„æ˜¯ AVLï¼Œçº¢é»‘æ ‘):å®ƒä»¬æºäº BST

## æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å®ƒä»¬ï¼Ÿ

ä¾‹å¦‚ï¼Œä½ éœ€è¦å­˜å‚¨å’Œæœç´¢æ•°æ®ã€‚æœ‰å“ªäº›æ›¿ä»£æ–¹æ¡ˆï¼Ÿ

*   **array:** å½“æˆ‘ä»¬éå†æ•´ä¸ªç»“æ„æ—¶ï¼Œæœç´¢çš„å¹³å‡é€Ÿåº¦æ˜¯ O(n ),ä½†æ˜¯ä¸€åˆ‡éƒ½æ˜¯æœ‰åºçš„
*   **å“ˆå¸Œè¡¨:**æœç´¢å¹³å‡ä¸º O(1)ï¼Œå› ä¸ºæ•°æ®åœ¨**è€Œä¸æ˜¯**æ‰€è°“çš„â€œ*èƒŒé èƒŒ*çš„å†…å­˜æ§½å†…ã€‚ä½†å®ƒæ˜¯æ— åºçš„ã€‚
*   **å›¾è¡¨:**å¤æ‚/éœ€è¦ä½¿ç”¨å„ç§æŠ€æœ¯& &å¯¹äºéœ€è¦å¿«é€Ÿæœç´¢çš„ä»»åŠ¡æ¥è¯´å¹¶ä¸å®Œç¾
*   **é›†åˆ:**æ— åºä¸ºå“ˆå¸Œè¡¨ã€‚ä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒä»¬æ˜¯å“ˆå¸Œè¡¨å’Œæ•°ç»„çš„æ··åˆï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å‰è€…çš„é”®å€¼å¯¹ï¼Œè€Œæ˜¯åƒåè€…ä¸€æ ·æ— åºã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦å¿«é€Ÿæ£€æŸ¥å­˜åœ¨ï¼Œsearch æ˜¯ O(1)ã€‚
*   **é“¾è¡¨(åŒé“¾è¡¨å’Œå•é“¾è¡¨):**å¦‚æœæ‚¨éœ€è¦è®¿é—®ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿™å¯¹äºå­˜å‚¨æ•°æ®éå¸¸æœ‰ç”¨ã€‚å¦å¤–ï¼Œé™¤äº†å› ä¸ºéœ€è¦åœ¨å†…å­˜ä¸­é‡å»ºé“¾æ¥è€Œä½¿æ’å…¥ä¸º O(n)çš„æ•°ç»„ä¹‹å¤–ï¼Œåœ¨è¿™é‡Œæ‰¾åˆ°å…ƒç´ å¹¶ä»*ä¸Šä¸€ä¸ª*å’Œ*ä¸‹ä¸€ä¸ª*æ”¹å˜é“¾æ¥è¦å¿«å¾—å¤š

å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ•°æ®ç»“æ„æ¥å­˜å‚¨å…ƒç´ å¹¶å¿«é€Ÿæ‰¾åˆ°å®ƒä»¬å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ ‘æœ¨ã€‚å°¤å…¶æ˜¯å½“æˆ‘ä»¬è°ˆåˆ° BST æ—¶ã€‚æœç´¢/æ’å…¥/åˆ é™¤æ˜¯ O(log n):æˆ‘ä»¬åœ¨æ¯ä¸€æ­¥ä¸Šå‡åŠæœç´¢ï¼Œå°±åƒåœ¨**äºŒåˆ†æœç´¢æ³•ä¸­ä¸€æ ·ã€‚**

> æ³¨æ„:ä» python 3.6 å®ç°çš„**æ•£åˆ—è¡¨**ç§°ä¸º**å­—å…¸**æ˜¯æœ‰åºçš„ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªä¾‹å¤–è€Œä¸æ˜¯è§„åˆ™

## æ ‘æœ¨çš„é—®é¢˜

å¬èµ·æ¥æˆ‘ä»¬ä¸€èˆ¬ä¸éœ€è¦å¯¹ BST åšä»»ä½•ä¿®æ”¹ï¼Ÿå”‰ï¼Œä¸€åˆ‡éƒ½è¦å¤æ‚å¾—å¤šğŸ˜µ

M eet **åæ–œåº¦**ã€‚ç®€å•æ¥è¯´ï¼Œé—®é¢˜æ˜¯æ ‘å‘æŸä¸€éƒ¨åˆ†å€¾æ–œï¼Œè¿™ç ´åäº† O(log n)æœç´¢çš„ç¾è§‚ã€‚å®é™…ä¸Šï¼Œå®ƒé€€åŒ–ä¸º O(n)ã€‚

```
 n
	/ \
       n   n
      /
     n
    /
   n
```

é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆå‘¢ï¼Ÿæ€»çš„æ¥è¯´ï¼Œæ²¡ä»€ä¹ˆğŸ¤·â€â™‚ï¸:ä½†æ˜¯è¿˜æœ‰å¦ä¸€ç§æ•°æ®ç»“æ„ï¼Œæˆ–è€…è¯´ï¼Œè¢«æ”¹å˜çš„æ•°æ®ç»“æ„ï¼Œè¢«ç§°ä¸ºè‡ªå¹³è¡¡ BSTã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³æŠŠé‡ç‚¹æ”¾åœ¨ AVL æ ‘ä½œä¸ºä¸Šè¿°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚

# AVL æ ‘

æœ‰ä¸¤ä»¶äº‹è¦è®°ä½:å¹³è¡¡å’Œæ—‹è½¬ã€‚è®©æˆ‘ä»¬æ›´è¿›ä¸€æ­¥äº†è§£ä»–ä»¬ã€‚

## ä¿æŒå¹³è¡¡

> Tl æ˜¯å·¦å­æ ‘ï¼ŒTr æ˜¯å³å­æ ‘

**é«˜åº¦**çš„å…¬å¼:`H = max(H(Tl), H(Tr)) + 1`

**å¹³è¡¡**çš„å…¬å¼:`B(n) = H(Tl) â€” H(Tr)`

ä¸ºäº†è®­ç»ƒï¼Œè®©æˆ‘ä»¬è§‚å¯Ÿä¸‹é¢çš„ä¾‹å­å’Œè®¡ç®—ã€‚**é«˜åº¦**å’Œ**å¹³è¡¡ã€‚**

**è‡³å…³é‡è¦**ğŸ¤šğŸ¤šå…³äºèº«é«˜å’Œå¹³è¡¡çš„å…³ç³»ï¼Œæˆ‘å›°æƒ‘äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ã€‚**å®é™…ä¸Šï¼Œå®ƒä»¬æ˜¯äº¤ç»‡åœ¨ä¸€èµ·çš„ã€‚**å¦‚ä½•ï¼Ÿ- >æˆ‘ä»¬ç»§ç»­å§

> è¯·è®°ä½ï¼Œå•ä¸ªèŠ‚ç‚¹çš„é«˜åº¦æ˜¯ 0ï¼Œä½†ç¼ºå°‘èŠ‚ç‚¹çš„é«˜åº¦æ˜¯-1

```
 3
	   / \
	  1   4
	 / \
	0   2
```

**é«˜åº¦:**

1.  H(0) = max(-1ï¼Œ-1) + 1 = 0
2.  H(2) = max(-1ï¼Œ-1) + 1 = 0
3.  H(3) = max(0ï¼Œ0) + 1 = 1
4.  H(4) = max(-1ï¼Œ-1) + 1 = 0
5.  H(3) = max(1ï¼Œ0) + 1 = 2

**å¹³è¡¡:**

1.  B(0) = -1-(-1) = 0
2.  B(2) = -1-(-1)= 0
3.  b(1)= 0â€“0 = 0ã€‚**å–é«˜åº¦ä¸º 0ï¼Œé«˜åº¦ä¸º 2ã€‚**
4.  B(4) = -1-(-1)=0
5.  b(3)= 1â€“0 = 0ã€‚**å–èº«é«˜ 3ï¼Œèº«é«˜ 4ã€‚**

æˆ‘ä»¬æœ‰ä¸€æ£µå¹³è¡¡çš„æ ‘ã€‚ä¸‹ä¸€æ­¥æ˜¯è§‚å¯Ÿä¸å¹³è¡¡çš„ä¸€ä¸ª:

```
 4
	    /
	   3
	  /
	 2
	/ \
       1   0
```

é«˜åº¦:

1.  H(1) = max(-1ï¼Œ-1) + 1 = 0
2.  H(0) = max(-1ï¼Œ-1) + 1 = 0
3.  H(2) = max(0ï¼Œ0) + 1 = 1
4.  H(3) = max(1ï¼Œ-1) + 1 = 2
5.  H(4) = max(2ï¼Œ-1) + 1 = 3

å¿«é€Ÿâ€œç›®æµ‹â€åï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­:

1.  B(1) = -1-(-1) = 0
2.  B(0) = -1 -(-1) = 0
3.  B(2) = 0-0 = 0ã€‚å–é«˜åº¦ 1 å’Œ 0ã€‚
4.  B(3) = 1 -(-1) = 2ã€‚å– 2 çš„é«˜åº¦
5.  B(4) = 2-(-1) = 3ã€‚å– 3 çš„é«˜åº¦

æ‰€ä»¥ï¼Œæ˜¯ 3ã€‚åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿ

## å¹³è¡¡å› ç´ 

ä¸€èˆ¬å®šä¹‰çš„ä½™é¢æ˜¯ abs(1)ã€‚è¿™æ„å‘³ç€å¦‚æœæŸä¸ªéƒ¨åˆ†å¤§äº 1 æˆ–å°äº-1 `=>`åæ–œåº¦ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ç”šè‡³ä¼šæœ‰æ­£è´Ÿ**å¹³è¡¡å› å­**ï¼Ÿå®ƒä¸æ‰€è°“çš„*é‡é‡*æœ‰å…³ã€‚

**å·¦é‡æ ‘& &å³é‡æ ‘**æ˜¯å­æ ‘åå‘å…¶ä¸­ä¸€ä¸ªå­æ ‘çš„æ ‘ã€‚æˆ‘æ‰€è¯´çš„å­æ ‘å¹¶ä¸æ˜¯æŒ‡`root`ï¼Œè€Œæ˜¯ä»»ä½•å¸¦æœ‰å­æ ‘çš„`node`ã€‚å³ï¼Œåœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œ3 å¯ä»¥è¢«è®¤ä¸ºæ˜¯å·¦å€¾çš„èŠ‚ç‚¹ï¼Œè€Œä¸ä»…ä»…æ˜¯ 4ã€‚è®°ä½è¿™ä¸€ç‚¹ã€‚

> å·¦é‡:å¤§äº 1 çš„æ­£å¹³è¡¡ç³»æ•°
> 
> å³é‡:è´Ÿå¹³è¡¡ç³»æ•°å°äº-1

## æ—‹è½¬

æ˜¾è€Œæ˜“è§çš„ä¸€æ­¥æ˜¯ä»¥æŸç§æ–¹å¼é‡æ–°å¹³è¡¡æ ‘ï¼Œä½¿å®ƒå†æ¬¡å¹³è¡¡ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬èšé›†åœ¨è¿™é‡Œçš„ç›®çš„ã€‚æœ‰ 4 ç§ä¸»è¦æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹:

*   å·¦æ—‹è½¬(ä¹Ÿç§°ä¸ºå·¦-å·¦)
*   å³æ—‹(ä¹Ÿç§°ä¸ºå³-å³)
*   å·¦å³æ—‹è½¬
*   å·¦å³æ—‹è½¬

å½“ä»¥è¿™ç§æ–¹å¼è¢«æ¨æ¡æ—¶ï¼Œå®ƒä»¬å¯èƒ½çœ‹èµ·æ¥å¥‡æ€ªå’Œä¸æ¸…æ¥šï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘æƒ³æŠŠå®ƒä»¬å½’ç±»ã€‚ä»ä¸Šé¢å›å¿†**æ²‰é‡**ã€‚

> å·¦é‡æ ‘:å³æ—‹è½¬&å·¦å³æ—‹è½¬
> 
> å³é‡æ ‘:å·¦æ—‹è½¬&å·¦å³æ—‹è½¬

åœ¨æˆ‘ä»¬ç¡®å®šäº†ä»–ä»¬çš„å­ç¾¤ä¹‹åï¼Œè®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä»–ä»¬åº”ç”¨çš„ç‰¹æ®Šæƒ…å†µã€‚

**å³æ—‹è½¬**

æˆ‘ä»¬æœ‰ä¸‹é¢çš„æ ‘ï¼Œå®ƒæ˜æ˜¾ä¸å¹³è¡¡ï¼Œ2 æ˜¯å¹³è¡¡ï¼Œæˆ‘ä»¬æƒ³ä¿®å¤å®ƒã€‚

```
 3       2
    /	    / \
   2    => 1   3
  /
 1
```

è®©æˆ‘ç»™ä½ çœ‹ä¸€ä¸ªæœ‰è¶£çš„æ¨¡å¼:

```
 x
          / \
         y  purple
        / \
      red blue
```

è¿™å°±æ˜¯å¯¹å¾…å¸®åŠ©æˆ‘çš„æ ‘çš„æ–¹å¼ã€‚çœ‹ï¼Œ3 æ˜¯ xï¼Œ2 æ˜¯ yï¼Œ1 æ˜¯çº¢è‰²ã€‚ä½ çŸ¥é“ä»–ä»¬ä¼šæ€ä¹ˆç…§é¡¾å³è½¬çš„ T7 å—ï¼Ÿ

```
 y
     / \
   red  x
       / \
     blue purple
```

ä¸ºä»€ä¹ˆè¿™æ ·`=>`å›æƒ³ä¸€ä¸‹å®ƒæ˜¯ **BST** çš„å½¢å¼ï¼Œå…¶ä¸­å·¦è¾¹å°äºä¸Šé¢çš„èŠ‚ç‚¹ï¼Œå³è¾¹å¤§äº/ç­‰äºã€‚**è“è‰²**æ¯” y å¤§ï¼Œä½†æ¯” x å°**çº¢è‰²**æ¯” x å°ï¼Œy. **ç´«è‰²**æ¯” x å¤§æˆ‘ä»¬æŠŠ y æ‹–åˆ°ä¸Šé¢ï¼ŒæŠŠ x æ”¾åœ¨å³è¾¹ï¼Œè“è‰²æ”¾åœ¨ x çš„å·¦è¾¹ï¼Œç´«è‰²ä¸‹åˆ° x çš„å³è¾¹ï¼Œçº¢è‰²å‘ä¸Šæ‹–åˆ° y çš„å·¦è¾¹(å‡†ç¡®çš„è¯´ï¼Œå˜åŒ–ä¸å¤§)ã€‚

å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠ 2 å‘ä¸Šæ‹‰(å®ƒæ˜¯ y)ï¼ŒæŠŠ x æ”¾åœ¨å³è¾¹ï¼Œçº¢è‰²æ˜¯ 1 ä¿æŒä¸å˜ã€‚å¦‚æœ 2 çš„å³è¾¹æœ‰ 2ï¼Œå®ƒä¼šå»å“ªé‡Œï¼Ÿ`=>`å…ˆåˆ°äº† 2 çš„å³è¾¹ï¼Œç„¶ååˆ°äº† 3 çš„å·¦è¾¹ã€‚

**å·¦å³æ—‹è½¬**

```
 3       3     2
	   /       /     / \
	  1   =>  2  => 1   3 
	   \     /
	    2   1
```

åœ¨è¿™é‡Œæˆ‘ä»¬ä¸èƒ½ç®€å•åœ°åšå³æ—‹ã€‚ä¸ºä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬è¯•è¯•:

```
 3       1
   /         \
  1   =>      3
   \         /
    2       2
```

ä¸€ç‚¹ä¹Ÿä¸å¹³è¡¡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦åšä¸€ä¸ªç‰¹æŠ€ï¼Œé¦–å…ˆåš 1 å’Œ 2 çš„å·¦è½¬ã€‚ä¹‹åï¼Œå¯¹æ•´æ£µæ ‘åšå³æ—‹è½¬ã€‚ä½ å¯ä»¥åœ¨ä¸Šå›¾å‰ä¸€å¼ å›¾çœ‹åˆ°å®ƒã€‚

> ä¸è¦å®³æ€•å¦‚æœä½ ä¸çŸ¥é“ï¼Œæˆ‘ä¼šæä¾›ä»£ç æ‘˜å½•

**å‘å·¦æ—‹è½¬**

```
 1                2
	 \              / \
	  2      =>    1   3
	   \
	    3
```

ä¸**å³ä¸€**ç›¸ä¼¼ï¼Œä½†é‡‡ç”¨é•œåƒæ–¹å¼

ä¹‹å‰:

```
 x
          / \
      purple y 
            / \
          red blue
```

ä¹‹å:

```
 y
       / \
      x  blue
     / \
 purple red
```

ä¸ºä»€ä¹ˆè¿™æ ·`=>` **ç´«è‰²**æœ€å°ã€‚**çº¢è‰²**æ¯” x å¤§ï¼Œä½†æ¯” y å°ã€‚**è“è‰²** â€”æ¯” x å¤§& & yï¼Œæ—‹è½¬åä¸€åˆ‡çœ‹èµ·æ¥éƒ½å’Œ**å³**ä¸€æ ·ã€‚

**å·¦å³æ—‹è½¬**

```
 1        1          2  
	 \        \        / \
	  3  =>    2   => 1   3
	 /          \
	2            3
```

> ç»ƒä¹ :å°è¯•åº”ç”¨å·¦å³æ—‹è½¬çš„é€»è¾‘ï¼Œæ‰¾å‡ºä¸ºä»€ä¹ˆç®€å•çš„å·¦**ä¸èƒ½æ‹¯æ•‘æˆ‘ä»¬**

å¦‚æœä½ æ²¡æœ‰å¾—åˆ°ä»€ä¹ˆï¼Œè¯·åœ¨è¯„è®ºä¸­ç•™è¨€ï¼Œæˆ‘å¯ä»¥å¸®åŠ©ä½ ï¼ğŸ™Œ

æˆ‘çŸ¥é“è¿™å¾ˆè‰°éš¾ğŸ˜“ã€‚ä¼‘æ¯ä¸€ä¼šå„¿ï¼Œçœ‹ä¸‹ä¸€å¼ å›¾â€¦

![](img/a2cfb9fa4f882b4f64c4553ae5462390.png)

[Sei](https://unsplash.com/@itssecondkaki?utm_source=medium&utm_medium=referral) åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

## ä»£ç éƒ¨åˆ†

å¦‚æœä½ æƒ³è§‚å¯Ÿç”¨ **Python** å’Œ **Kotlin** å†™çš„å…¨éƒ¨ä»£ç ï¼Œä½ å¯ä»¥è®¿é—®ä¸‹é¢çš„é“¾æ¥åˆ°æˆ‘çš„å›è´­ã€‚

[](https://github.com/SleeplessChallenger/Self-Balancing-Trees/tree/main/AVL_trees) [## è‡ªæˆ‘å¹³è¡¡æ ‘/ä¸»æ— çœ æŒ‘æˆ˜è€…çš„ AVL æ ‘/è‡ªæˆ‘å¹³è¡¡æ ‘

### è‡ªå¹³è¡¡æ ‘çš„è§£é‡Šå’Œä»£ç ã€‚é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸ºæ— çœ æŒ‘æˆ˜è€…/è‡ªå¹³è¡¡æ ‘çš„å‘å±•åšå‡ºè´¡çŒ®â€¦

github.com](https://github.com/SleeplessChallenger/Self-Balancing-Trees/tree/main/AVL_trees) 

> é‡è¦æç¤º:ä¸è¦å¿˜è®°ï¼Œå†å¹³è¡¡ä¸ä»…å‘ç”Ÿåœ¨æ•´æ£µæ ‘çš„æ ¹éƒ¨ï¼Œä¹Ÿå‘ç”Ÿåœ¨å­æ ‘ä¸Š

å‡è®¾æˆ‘ä»¬æœ‰ä¸‹é¢çš„æ ‘ï¼Œ`7`æ˜¯æˆ‘ä»¬æ–°æ·»åŠ çš„èŠ‚ç‚¹ã€‚

```
 13
     /  \   11   21
   /
  8
 /
7
```

å¾ˆæ˜æ˜¾ï¼Œè¿™æ£µæ ‘ä¸å¹³è¡¡ï¼Œè€Œä¸”å‘å·¦å€¾æ–œã€‚å›æƒ³ä¸€ä¸‹ä¸Šé¢çš„æ³¨é‡Š:ä¸ä»…ä»…æ˜¯`root`å……å½“äº†å‰ä¸€ä¸ªæ‰‡åŒºä¸­æ¨¡å¼çš„`x`ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒå°†`11`æŒ‡å‡ºå·®å¼‚ã€‚

å¤„ç†è¯¥æ–¹æ³•çš„æ­¥éª¤:

> å¶èŠ‚ç‚¹æ˜¯æ²¡æœ‰å·¦å³å­èŠ‚ç‚¹çš„èŠ‚ç‚¹

1.åœ¨æ­£ç¡®ä½ç½®æ’å…¥æ–°å€¼ä½œä¸º**å¶**èŠ‚ç‚¹
2ã€‚æ›´æ–°é«˜åº¦
3ã€‚æ£€æŸ¥å¹³è¡¡
4ã€‚å½“æˆ‘ä»¬é€’å½’è¿›å…¥æ ‘æ—¶ï¼Œæˆ‘ä»¬å°†
é€å±‚è¿”å›ï¼Œæ›´æ–°é«˜åº¦å¹¶æ£€æŸ¥
çš„å¹³è¡¡ã€‚å› æ­¤ï¼Œåœ¨æŸä¸ªæ—¶åˆ»ï¼Œæˆ‘ä»¬å¯ä»¥æ•æ‰ä¸å¹³è¡¡çš„ä¸œè¥¿

æˆ‘ä»¬åœ¨ğŸ§å‘ç°äº†å®ƒ

ç­‰ç­‰ï¼Œç­‰ç­‰ï¼Œç­‰ç­‰â€¦ä½ æ˜¯æ€ä¹ˆå‘ç°çš„ï¼Ÿæˆ‘ä¸çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ğŸ˜©

## é¢˜å¤–è¯:

1.  åŸºæœ¬æƒ…å†µæ˜¯å¦‚æœ`node`æ˜¯ Noneï¼Œæˆ‘ä»¬è¿”å›æˆ‘ä»¬çš„æ–°èŠ‚ç‚¹ã€‚
2.  æˆ‘ä»¬æŠŠå®ƒç³»åœ¨å·¦è¾¹æˆ–å³è¾¹çš„å­©å­èº«ä¸Šã€‚åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­:

```
8.left = Node(7)
```

3.æˆ‘ä»¬å°†**é«˜åº¦**å¢åŠ  1ï¼Œå¹¶æ£€æŸ¥**å¹³è¡¡**æ˜¯å¦æ­£å¸¸
4ã€‚é€šè¿‡`return root`å†æ¬¡è¿”å›ä¸Šä¸€å±‚ï¼Œè¿™é‡Œ:

```
11.left = Node(8)
```

ä»ä¸Šé¢é‡åšæ­¥éª¤ï¼Œè¿™é‡Œæˆ‘ä»¬å‘ç°äº†**å·¦ä¾§é‡**çš„é—®é¢˜ã€‚

## ä»é¢˜å¤–è¯å›æ¥

1.  æˆ‘ä»¬çœ‹åˆ°é‚£æ£µæ ‘æ˜¯**å·¦å€¾**ï¼Œå› æ­¤æˆ‘ä»¬è¾“å…¥`curr_balance > 1`
2.  `root`åœ¨è¿™ç§æƒ…å†µä¸‹å°±æ˜¯`11` ã€‚æˆ‘ä»¬éœ€è¦å¼„æ¸…æ¥š:æˆ‘ä»¬çš„æ–°`Node(7)`æ˜¯å¦æ¯”`root`çš„`.left/.right`æ›´`**> || <**`ã€‚
    æ­£å¦‚æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œå®ƒæ›´å°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åªåš`_right_rotate()`ã€‚ä¸‹é¢è§‚å¯Ÿä¸€ä¸‹
3.  ä¸ºäº†æ¾„æ¸…ï¼Œè®©æˆ‘ä»¬ç”¨æ•°å­—æ¥ä½¿ç”Ÿæ´»å˜å¾—æ›´å®¹æ˜“ã€‚æˆ‘ä»¬ç”¨`11`ä½œä¸º`node`è¾“å…¥è¿™ä¸ªæ–¹æ³•

```
8 = 11.left
None = 8.right

# perform rotation
8.right = 11
11.left = None
```

4.æ¥ä¸‹æ¥ï¼Œè¿”å›ä½œä¸ºå­æ ‘çš„æ–°æ ¹çš„`y_node`ï¼ŒåŒæ—¶`11`ç§»åŠ¨åˆ°è¿™ä¸ªæ ¹çš„å³è¾¹ã€‚æ¨¡å¼ä¸­æè¿°çš„ä¸€åˆ‡ã€‚

> å¦‚ä½ æ‰€è§ï¼Œ8 ç”¨å®ƒæ‹–ç€ 7ï¼Œ
> å¼¹å‡ºä¸€å±‚ï¼Œè€Œ 11 åˆ°è¾¾ 8 çš„`.right`æ‹–ç€`.right`ï¼Œå¦‚æœè¿™æ ·çš„
> å­˜åœ¨çš„è¯(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯æ²¡æœ‰)

å¦‚æœ..ğŸ˜²ğŸ˜²ğŸ˜²æˆ‘ä»¬è¦ä¸¾ä¾‹è¯´æ˜**å·¦å³æ—‹è½¬ã€‚**

```
 Other nodes
     /
    11
   /
  8
   \    9
```

è¿™é‡Œæˆ‘ä»¬ç”¨`Node(9)`ä»£æ›¿ 7

æ”¾ç½®èŠ‚ç‚¹çš„æ‰€æœ‰è¿‡ç¨‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬ç”šè‡³å†æ¬¡åœ¨`11`å‘ç°é—®é¢˜ã€‚æ€ä¹ˆä¼šï¼Ÿæ‰€ä»¥:

*   èµ·åˆ**é«˜åº¦** :
    1ã€‚H(9) = max(-1ï¼Œ-1) + 1 = 0
    2ã€‚H(8) = max(-1ï¼Œ0) + 1 = 1
    3ã€‚H(11) = max(1ï¼Œ-1) + 1 = 2
*   æ¥ä¸‹æ¥ï¼Œ**å¹³è¡¡** :
    1ã€‚b(8)=-1â€“0 = 0
    2ã€‚B(11) = 1-(-1)=2

ç°åœ¨ï¼Œæ‚¨æ¸´æœ›çœ‹åˆ°æ¨¡å¼ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼Œä»¥ä¾¿åœ¨å¤´è„‘ä¸­ææ¸…æ¥šäº‹æƒ…:

> ä½ å¯ä»¥å†æ£€æŸ¥ä¸€ä¸‹**å·¦å³**æ—‹è½¬éƒ¨åˆ†ä¸ºä»€ä¹ˆç®€å•çš„**å·¦å³**æ—‹è½¬ä¸èµ·ä½œç”¨

é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨ä½œä¸º`root`ä¾›åº”çš„`11.left`åˆ¶é€ `_left_rotate()`ã€‚è§‚å¯Ÿä¸‹é¢çš„æ–¹æ³•:

è®©æˆ‘ä»¬æ¯”è¾ƒå›¾å½¢å’Œæ¨¡å¼:

```
9 = 8.right
None = 9.left

# perform rotation
9.left = 8
8.right = None
```

å®ƒçœ‹èµ·æ¥ä¼šåƒè¿™æ ·:

```
 11
        /
       9
      /
     8
      \
       None 
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†`9`ä½œä¸ºæ–°çš„`.left`è¿”å›åˆ°`11`ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¦‚å‰æ‰€è¿°æ‰§è¡Œ`_right_rotate()`ã€‚

> ä¸ªäººè®­ç»ƒ:çœ‹`left`æ—‹è½¬& & `right-left`æ—‹è½¬

éå¸¸å›°éš¾çš„äº‹æƒ…ğŸ‘ºâ€¦

åœ¨æœ€åä¸€å¤§å—ä¹‹å‰å†ä¼‘æ¯ä¸€æ¬¡ğŸ™ŒğŸ»

![](img/67fdda6c3016ad7310e25168fdca53d1.png)

ç…§ç‰‡ç”±[å…‹é‡Œæ–¯è’‚å®‰é™ˆ](https://unsplash.com/@christianchen?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„

## åˆ é™¤èŠ‚ç‚¹

æœ€åï¼Œå¦‚æœæˆ‘ä»¬æƒ³åˆ é™¤èŠ‚ç‚¹å‘¢ï¼Ÿè¿™æ£µæ ‘æ˜¯å¦‚ä½•æ§åˆ¶ä¸€åˆ‡çš„ï¼ŸğŸ•µğŸ»â€â™‚ï¸

æ ‘çš„ç¤ºä¾‹:

```
# Some nodes
     /
    8
     \      10
     /  \    9   11
```

æƒ³è±¡ä¸€ä¸‹ï¼Œ`8`ä¸‹é¢æ˜¯è¦æˆä¸º deletedâŒçš„ä»£ç ï¼Œåœ¨é‚£ä¹‹åè®©æˆ‘æ¥å¼•å¯¼ä½ é€šè¿‡å®ƒã€‚

**åç»­æ­¥éª¤:**

1.  é€’å½’éå†ï¼Œç›´åˆ°æˆ‘ä»¬åœ¨æ–¹æ³•çš„ä¸ŠåŠéƒ¨åˆ†ç‚¹å‡»`else`ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†ç›®æ ‡
2.  æˆ‘ä»¬çœ‹åˆ°`.left` & & `.right`éƒ½ä¸ä¸ºç©ºï¼Œäºæ˜¯å†æ¬¡è¾“å…¥`else`
3.  è°ƒç”¨`._get_min_value_node(node.right)`ï¼Œæˆ‘ä»¬å°†å°è¯•ä»å½“å‰**è¦åˆ é™¤çš„èŠ‚ç‚¹**ä¸­æ‰¾åˆ°å³è¾¹å­æ ‘ä¸Šæœ€å°çš„èŠ‚ç‚¹
4.  å½“æˆ‘ä»¬ä»¥`10`ä¸ºæ ¹è¿›å…¥è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œé¦–å…ˆå°†åŸºäºå®ƒè¿›è¡Œæ£€æŸ¥:`10 != None`å’Œ`10.left != None` = >å†æ¬¡ç”¨`10.left`è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿™æ„å‘³ç€`9`æ˜¯ä¸‹ä¸€æ¬¡è°ƒç”¨çš„`root`ã€‚
5.  `9 != None` **ä½†** `9.left == None` = >è¿”å›`9`åˆ°ä¸Šå±‚
6.  å›åˆ°`delete_node()`å¤„ï¼Œå°†`node.value`æ›¿æ¢ä¸º`8` - > `9`
7.  æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä»å³è¾¹çš„å­æ ‘ä¸­åˆ é™¤`9`ã€‚å®é™…ä¸Šï¼Œä¸ä¸Šè¿°æ“ä½œç›¸åŒ:

*   æ³¨æ„æˆ‘ä»¬åœ¨`node.right`ä¸Šè°ƒç”¨`delete_node`(`9.right`ä¹Ÿå°±æ˜¯`8.right`)
*   `delete_node()`ä¸­çš„`node.left == None`æ˜¯æˆ‘ä»¬ç‚¹å‡»çš„åœ°æ–¹ï¼Œæˆ‘ä»¬è¿”å› Noneï¼Œå› ä¸º`9.right`æ˜¯ None

8.å¯¹æ¯ä¸€ä¸ª`root`é‡æ–°è®¡ç®—**å¹³è¡¡** & & **é«˜åº¦**

> è®°ä½æ ¹æ˜¯æ¯ä¸ªæœ‰å­æ ‘çš„èŠ‚ç‚¹

9.ä½†æ˜¯è¿™é‡Œä¸æ˜¯ç®€å•çš„**å·¦é‡** / **å³é‡**ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥å­æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹æ˜¯å¦ä¹Ÿæ˜¯å¹³è¡¡çš„ï¼Œå› æ­¤é€»è¾‘æœ‰ç‚¹å¤æ‚ã€‚

## ç»“å°¾éƒ¨åˆ†

æˆ‘å¸Œæœ›ä½ ç†¬è¿‡äº†è¿™æ¬¡è‰°éš¾çš„æ—…ç¨‹ğŸŒŠè¿™ç»å¯¹æ˜¯å¤æ‚çš„ï¼Œæˆ‘æ•¢è‚¯å®šä½ çš„å¤´æ˜¯æ‚¸åŠ¨ğŸ¤¯

ä¸è¦åŒ†å¿™ï¼Œå¤šè¯»å‡ éï¼Œä¸€å®šè¦ç”¨ä¹…ç»è€ƒéªŒçš„é’¢ç¬”å’Œé“…ç¬”æ³•åšç¬”è®°ğŸ“ã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä¸‹é¢çš„ä»»ä½•åœ°æ–¹å†™è¯„è®ºæˆ–è”ç³»æˆ‘:

*   é¢†è‹±:[www.linkedin.com/in/sleeplesschallenger](http://www.linkedin.com/in/sleeplesschallenger)
*   GitHub:[https://github.com/SleeplessChallenger](https://github.com/SleeplessChallenger)
*   leet code:[https://leetcode.com/SleeplessChallenger/](https://leetcode.com/SleeplessChallenger/)
*   ç”µæŠ¥:@æ— çœ æŒ‘æˆ˜è€…

PS:éå¸¸æ„Ÿè°¢->

*   Back2Back SWE è§†é¢‘:ã€https://youtu.be/vRwi_UcZGjU 
*   GeeksForGeeks ä»£ç :ã€https://www.geeksforgeeks.org/avl-tree-set-1-insertion/ 