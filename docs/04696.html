<html>
<head>
<title>Developing Vue Apps with Class-Based Components — TypeScript, Superclasses, Hooks, and Mixins</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用基于类的组件开发Vue应用——类型脚本、超类、钩子和混合</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/developing-vue-apps-with-class-based-components-typescript-superclasses-and-mixins-b621e3f75ac3?source=collection_archive---------3-----------------------#2021-04-21">https://blog.devgenius.io/developing-vue-apps-with-class-based-components-typescript-superclasses-and-mixins-b621e3f75ac3?source=collection_archive---------3-----------------------#2021-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/65fb72e5e41ccbe2fefb9ab4cedc4daf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-d-jJVvAfRPMlnyq"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="1f81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们更喜欢使用类，我们可以使用Vue自带的基于类的组件API。</p><p id="2767" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用基于类的组件开发Vue应用。</p><h1 id="99dd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">类型脚本、超类和混合</h1><p id="92ff" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在Vue TypeScript项目中使用<code class="fe me mf mg mh b">mixins</code>方法添加props和继承超类组件。</p><p id="658b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0c35" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;p&gt;{{ message }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="3ecc" class="mq lc iq mh b gy mv ms l mt mu">&lt;script lang="ts"&gt;<br/>import Vue from "vue";<br/>import Component, { mixins } from "vue-class-component";</span><span id="bf47" class="mq lc iq mh b gy mv ms l mt mu">const GreetingProps = Vue.extend({<br/>  props: {<br/>    name: String,<br/>  },<br/>});</span><span id="bdf3" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>class Super extends Vue {<br/>  lastName = "smith";<br/>}</span><span id="5fb5" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>export default class HelloWorld extends mixins(GreetingProps, Super) {<br/>  get message(): string {<br/>    return `Hello, ${this.name} ${this.lastName}`;<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="9c5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">1astName</code>属性创建了<code class="fe me mf mg mh b">Super</code>组件类。</p><p id="9b75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有用<code class="fe me mf mg mh b">Vue.extend</code>方法创建的<code class="fe me mf mg mh b">GreetProps</code>类，这样我们可以用一种TypeScript可以接受的方式接受道具。</p><p id="dd84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">GreetProps</code>和<code class="fe me mf mg mh b">Super</code>方法调用<code class="fe me mf mg mh b">mixins</code>方法，这样我们可以从两个类中继承。</p><p id="ac04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从两个类中继承，所以<code class="fe me mf mg mh b">this.name</code>是<code class="fe me mf mg mh b">'james'</code>，而<code class="fe me mf mg mh b">this.lastName</code>是<code class="fe me mf mg mh b">'smith'</code>。</p><p id="bb39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用类型定义来定义属性。</p><p id="207b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bc98" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;p v-for="p of persons" :key="p"&gt;{{ p.firstName }} {{ p.lastName }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="0626" class="mq lc iq mh b gy mv ms l mt mu">&lt;script lang="ts"&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="6db5" class="mq lc iq mh b gy mv ms l mt mu">interface Person {<br/>  firstName: string;<br/>  lastName: string;<br/>}</span><span id="58d1" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>export default class HelloWorld extends Vue {<br/>  persons!: Person[] = [<br/>    { firstName: "james", lastName: "smith" },<br/>    { firstName: "jane", lastName: "doe" },<br/>  ];<br/>}<br/>&lt;/script&gt;</span></pre><p id="01d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了<code class="fe me mf mg mh b">Person</code>接口，并使用它来定义<code class="fe me mf mg mh b">persons</code>类属性的类型。</p><p id="a7bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">!</code>意味着类属性不可为空。</p><p id="55ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果<code class="fe me mf mg mh b">persons</code>数组条目有额外的属性，我们将从TypeScript编译器得到一个错误。</p><h1 id="0c4b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">参考文献和打字稿</h1><p id="c41f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了用基于TypeScript类的Vue组件定义和分配ref，我们编写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="97f6" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input ref="input" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="86be" class="mq lc iq mh b gy mv ms l mt mu">&lt;script lang="ts"&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="7bfc" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>export default class HelloWorld extends Vue {<br/>  $refs!: {<br/>    input: HTMLInputElement;<br/>  };</span><span id="e0a9" class="mq lc iq mh b gy mv ms l mt mu">  mounted() {<br/>    this.$refs.input.focus();<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="cd6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须为我们分配的每个<code class="fe me mf mg mh b">$refs</code>属性设置类型。</p><p id="8333" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">input</code>是一个HTML输入元素，所以我们将其设置为<code class="fe me mf mg mh b">HTMLInputElement</code>类型。</p><p id="16b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用call <code class="fe me mf mg mh b">focus</code>对它进行聚焦。</p><p id="e5eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加了类型注释后，当我们在<code class="fe me mf mg mh b">mounted</code>钩子中键入代码时，我们得到了自动完成。</p><h1 id="2b3d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">挂钩自动完成</h1><p id="97ef" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了给钩子添加自动完成功能，我们编写:</p><p id="c805" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">main.ts</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="343c" class="mq lc iq mh b gy mr ms l mt mu">import Vue from "vue";<br/>import App from "./App.vue";<br/>import "vue-class-component/hooks";<br/>Vue.config.productionTip = false;</span><span id="7f35" class="mq lc iq mh b gy mv ms l mt mu">new Vue({<br/>  render: (h) =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="2d79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">App.vue</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="273e" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;HelloWorld /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="af1e" class="mq lc iq mh b gy mv ms l mt mu">&lt;script lang='ts'&gt;<br/>import HelloWorld from "./components/HelloWorld.vue";</span><span id="9c77" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  name: "App",<br/>  components: {<br/>    HelloWorld,<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="346b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">components/HelloWorld.vue</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0cd8" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    {{ message }}<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="fb82" class="mq lc iq mh b gy mv ms l mt mu">&lt;script lang="ts"&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="e78a" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>export default class HelloWorld extends Vue {<br/>  data() {<br/>    return {<br/>      message: "hello world",<br/>    };<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="7249" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们加上:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e552" class="mq lc iq mh b gy mr ms l mt mu">import "vue-class-component/hooks";</span></pre><p id="9352" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">main.ts</code>中，当我们在<code class="fe me mf mg mh b">HelloWorld</code>组件中键入<code class="fe me mf mg mh b">data</code>时，我们得到自动完成。</p><h1 id="228b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="a17c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在用TypeScript编写的基于类的Vue组件中添加钩子自动完成、混合和超类继承以及引用类型注释。</p></div></div>    
</body>
</html>