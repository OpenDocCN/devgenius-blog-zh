<html>
<head>
<title>Developing Vue Apps with Class-Based Components — Custom Decorators and Superclass Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用基于类的组件开发 Vue 应用程序——定制装饰器和超类组件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/developing-vue-apps-with-class-based-components-custom-decorators-and-superclass-component-e6b2f8834627?source=collection_archive---------8-----------------------#2021-04-19">https://blog.devgenius.io/developing-vue-apps-with-class-based-components-custom-decorators-and-superclass-component-e6b2f8834627?source=collection_archive---------8-----------------------#2021-04-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5e151a6f2412b12a300ae6738b676a4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9WVC_AaMNaHBukxj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> NeONBRAND </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">unsprash</a>上拍摄</figcaption></figure><p id="9912" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们更喜欢使用类，我们可以使用 Vue 附带的基于类的组件 API。</p><p id="2767" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何使用基于类的组件开发 Vue 应用程序。</p><h1 id="813f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">定制装饰人员</h1><p id="c5cd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在基于 Vue 类的组件中添加我们自己的装饰器。</p><p id="6549" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1501" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;button @click="increment(2)"&gt;increment&lt;/button&gt;<br/>    &lt;p&gt;{{ count }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="50c7" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component, { createDecorator } from "vue-class-component";</span><span id="e294" class="mn lc iq mj b gy ms mp l mq mr">const Log = createDecorator((options, key) =&gt; {<br/>  const originalMethod = options.methods[key];</span><span id="9540" class="mn lc iq mj b gy ms mp l mq mr">  options.methods[key] = function wrapperMethod(...args) {<br/>    console.log(`Invoked: ${key}(`, ...args, ")");<br/>    originalMethod.apply(this, args);<br/>  };<br/>});</span><span id="199d" class="mn lc iq mj b gy ms mp l mq mr">@Component<br/>export default class HelloWorld extends Vue {<br/>  count = 0;</span><span id="316e" class="mn lc iq mj b gy ms mp l mq mr">  @Log<br/>  increment(val) {<br/>    this.count += val;<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="61e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">createDecorator</code>方法创建<code class="fe mt mu mv mj b">Log</code>装饰器。</p><p id="e8ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传入一个带有<code class="fe mt mu mv mj b">options</code>和<code class="fe mt mu mv mj b">key</code>参数的回调。</p><p id="8242" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">options</code>拥有 Vue 类组件中的项目。</p><p id="68db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">key</code>是 Vue 组件类中属性的名称。</p><p id="8edf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">options.methods</code>进入方式。</p><p id="e711" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过分配另一个函数作为它的值来覆盖这个方法。</p><p id="21f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">wrappedMethod</code>内部，我们调用<code class="fe mt mu mv mj b">originalMethod.apply</code>来调用<code class="fe mt mu mv mj b">originalMethod</code>，其中<code class="fe mt mu mv mj b">this</code>是组件类实例。</p><p id="68fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">args</code>是我们传递给组件方法的参数。</p><p id="65f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我们将 2 作为<code class="fe mt mu mv mj b">val</code>的值传入<code class="fe mt mu mv mj b">increment</code>，当我们调用<code class="fe mt mu mv mj b">increment</code>时，将会是<code class="fe mt mu mv mj b">args</code>数组中的值</p><p id="c2fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">key</code>是我们点击按钮时的<code class="fe mt mu mv mj b">'increment'</code>方法名称。</p><h1 id="89a8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">扩展组件</h1><p id="ee5d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用基于类的组件的好处之一是，我们可以创建一个超类组件，它具有我们想要继承的共享部分。</p><p id="b0d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="52a0" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;p&gt;{{ superValue }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="a9ca" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="cb9b" class="mn lc iq mj b gy ms mp l mq mr">@Component<br/>class Super extends Vue {<br/>  superValue = "Hello";<br/>}</span><span id="4d65" class="mn lc iq mj b gy ms mp l mq mr">@Component<br/>export default class HelloWorld extends Super {}<br/>&lt;/script&gt;</span></pre><p id="97fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有具有<code class="fe mt mu mv mj b">superValue</code>属性的<code class="fe mt mu mv mj b">Super</code>组件类。</p><p id="ffb5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe mt mu mv mj b">HelloWorld</code>组件类，它扩展了<code class="fe mt mu mv mj b">Super</code>类。</p><p id="1caf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">HelloWorld</code>具有从<code class="fe mt mu mv mj b">Super</code>继承的<code class="fe mt mu mv mj b">superValue</code>属性，可以在模板中使用。</p><p id="24e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以访问子组件类中的值。</p><p id="8a53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2417" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;p&gt;{{ superValue }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="258e" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="0217" class="mn lc iq mj b gy ms mp l mq mr">@Component<br/>class Super extends Vue {<br/>  superValue = "Hello";<br/>}</span><span id="9db5" class="mn lc iq mj b gy ms mp l mq mr">@Component<br/>export default class HelloWorld extends Super {<br/>  created() {<br/>    console.log(this.superValue);<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="a99b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe mt mu mv mj b">created</code>钩子中记录从<code class="fe mt mu mv mj b">Super</code>类继承的<code class="fe mt mu mv mj b">this.superValue</code>属性。</p><p id="76cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该会看到<code class="fe mt mu mv mj b">'Hello'</code>被记录。</p><h1 id="1791" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="575b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当我们使用基于类的组件时，我们可以将自定义装饰器和超类组件添加到我们的 Vue 应用程序中。</p></div></div>    
</body>
</html>