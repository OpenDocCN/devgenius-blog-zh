<html>
<head>
<title>Deploying dockerized shiny apps on Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Heroku 上部署 dockerized 闪亮的应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploying-dockerized-shiny-apps-on-heroku-892b96f010ca?source=collection_archive---------9-----------------------#2022-05-04">https://blog.devgenius.io/deploying-dockerized-shiny-apps-on-heroku-892b96f010ca?source=collection_archive---------9-----------------------#2022-05-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/af8061cb3858b459b454cd542cd72c3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wV0ZQqz_-rBw3ewFebFBtQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由 unsplash 拍摄</figcaption></figure><p id="9366" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">Heroku 是一个平台即服务(PaaS ),使开发人员能够完全在云中构建、运行和操作应用程序。他们提供免费服务，你最多可以运行 5 个应用程序，但如果你用信用卡验证你的帐户，你可以运行 5 个以上的应用程序。</p><p id="bda2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="kx">注意:我假设您已经创建了您的应用程序，并且在应用程序目录的根目录下有它的 dockerfile。否则，如果你不介意的话，可以看看我之前写的介绍使用 shiny 创建仪表板的文章和介绍 docker 的文章。</em></p><p id="f041" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">进入<a class="ae ky" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">注册</a>页面，创建一个账户，然后按照下面的说明操作。</p><h2 id="da48" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">安装 Heroku CLI</h2><p id="f3fe" class="pw-post-body-paragraph jz ka in kb b kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks lw ku kv kw ig bi translated">适用于 ubuntu 16 +版本</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="5401" class="kz la in mc b gy mg mh l mi mj">$ sudo snap install --classic heroku</span></pre><p id="468c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">对于 mac</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="cca3" class="kz la in mc b gy mg mh l mi mj">$ brew tap heroku/brew &amp;&amp; brew install heroku</span></pre><p id="e126" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">对于 windows</p><p id="f72e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">参见<a class="ae ky" href="https://devcenter.heroku.com/articles/heroku-cli#install-the-heroku-cli" rel="noopener ugc nofollow" target="_blank">文档</a></p><h2 id="8481" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">登录 Heroku</h2><p id="60f1" class="pw-post-body-paragraph jz ka in kb b kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks lw ku kv kw ig bi translated"><em class="kx">不适用如果您错过了第一步，您需要先创建一个帐户。</em>点击<a class="ae ky" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">此处</a>并按照说明操作即可。</p><p id="877e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">通过终端导航到您闪亮的应用程序目录所在的位置，并输入以下命令。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="43ab" class="kz la in mc b gy mg mh l mi mj">$ heroku login </span></pre><p id="d77c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这将在您的浏览器上打开登录页面，输入所需的详细信息，如果成功，您将看到一个<strong class="kb io"> <em class="kx">登录…完成</em> </strong>，然后* <strong class="kb io"> <em class="kx">作为您的电子邮件登录。</em> </strong></p><h2 id="2200" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">创建 Heroku 应用程序</h2><p id="94d2" class="pw-post-body-paragraph jz ka in kb b kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks lw ku kv kw ig bi translated">以下命令将在 Heroku 服务器上创建一个 Heroku 应用程序。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="faaa" class="kz la in mc b gy mg mh l mi mj">$ heroku create</span></pre><h2 id="eaa8" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">部署代码</h2><p id="fc91" class="pw-post-body-paragraph jz ka in kb b kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks lw ku kv kw ig bi translated">登录 heroku 容器注册表</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="b3e2" class="kz la in mc b gy mg mh l mi mj">$ heroku container:login</span></pre><p id="45f9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="kx">注:</em></p><p id="dda6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="kx">确保冒号前后没有空格。<br/>你需要在电脑上安装 docker。</em></p><h2 id="5f62" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">建立形象</h2><p id="7f84" class="pw-post-body-paragraph jz ka in kb b kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks lw ku kv kw ig bi translated">导航到您的项目目录，然后运行下面的命令。<br/>这将构建图像并将其推送到容器注册中心。你需要在包含你的应用程序代码的目录下有一个 docker 文件。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="a950" class="kz la in mc b gy mg mh l mi mj">$ heroku container:push web</span></pre><h2 id="96ff" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">推送现有图像</h2><p id="db40" class="pw-post-body-paragraph jz ka in kb b kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks lw ku kv kw ig bi translated">或者，您可以使用以下命令将现有映像推送到 heroku 注册表:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="62d8" class="kz la in mc b gy mg mh l mi mj">$ docker tag yourimage registry.heroku.com/&lt;app&gt;/&lt;process-type&gt;   <br/>$ docker push registry.heroku.com/&lt;app&gt;/process-type&gt;</span></pre><p id="6ca1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上面的命令会将映像推送到 heroku registry，就像推送到 docker hub 一样。</p><h2 id="b0c9" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">将图像发布到您的应用程序</h2><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="3efb" class="kz la in mc b gy mg mh l mi mj">$ heroku container:release web</span></pre><p id="d782" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上述命令将把图像发布到 heroku 服务器上的应用程序中。</p><h2 id="2c1d" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">我现在如何查看我的申请？</h2><p id="745f" class="pw-post-body-paragraph jz ka in kb b kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks lw ku kv kw ig bi translated">使用下面的命令可以看到应用程序并与之交互。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="ff24" class="kz la in mc b gy mg mh l mi mj">$ heroku open</span></pre><h2 id="8ee2" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">要禁用您的应用程序</h2><p id="d766" class="pw-post-body-paragraph jz ka in kb b kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks lw ku kv kw ig bi translated">如果你想停止你的应用程序，只需运行下面的命令。</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="9a09" class="kz la in mc b gy mg mh l mi mj">$ heroku ps:scale web=0</span></pre><h2 id="0352" class="kz la in bd lb lc ld dn le lf lg dp lh kk li lj lk ko ll lm ln ks lo lp lq lr bi translated">重启一下怎么样？</h2><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="ca6f" class="kz la in mc b gy mg mh l mi mj">$ heroku ps:scale web=1</span></pre><p id="4cde" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">一些简单快捷的步骤就可以让你的闪亮应用免费部署了！</p><p id="1646" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">为了进一步阅读，我推荐你查看 heroku 上的文档。</p><p id="1f2c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">亲爱的编码快乐！</p></div></div>    
</body>
</html>