<html>
<head>
<title>Jazz Up your ZSH Terminal with Prezto</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Prezto为您的ZSH码头增添活力</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/enhance-your-terminal-with-zsh-and-prezto-ab9abf9bc424?source=collection_archive---------0-----------------------#2020-07-20">https://blog.devgenius.io/enhance-your-terminal-with-zsh-and-prezto-ab9abf9bc424?source=collection_archive---------0-----------------------#2020-07-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/95ed97021f98e3e7efb84e218d1a4b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-AycMi6gbWFcKMHv"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com/@aaronburden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Aaron Burden </a>在<a class="ae jz" href="https://unsplash.com/s/photos/sea-shell?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><p id="8e9c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一段时间以来，我一直使用zsh作为我的默认Unix shell，它是一个扩展的Bourne shell，有许多改进，包括bash、ksh和tcsh的一些特性。我最喜欢的贝壳之一是鱼壳。它很容易设置，我使用的许多功能都是预装的，因为它不支持POSIX，它有一个非常可读的(fish)脚本语法。</p><blockquote class="ky"><p id="0169" class="kz la in bd lb lc ld le lf lg lh kx dk translated">为什么我从fish切换到zsh，并使用Prezto而不是oh-my-zsh。</p></blockquote><p id="f1b4" class="pw-post-body-paragraph ka kb in kc b kd li kf kg kh lj kj kk kl lk kn ko kp ll kr ks kt lm kv kw kx ig bi translated">后者也可能是一个缺点。我使用的许多bash脚本都是用bash编写的。这意味着fish不支持所有的语法。出于这个原因，我去寻找一个替代方案，并很快来到了<a class="ae jz" href="https://en.wikipedia.org/wiki/Z_shell" rel="noopener ugc nofollow" target="_blank"> zsh </a>(发音为Z shell)。尽管zsh默认不支持POSIX，但zsh使模拟POSIX成为可能。</p><p id="1495" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最流行的zsh框架是Oh-My-Zsh。哦，我的zsh为您提供了许多选项来设置您的zsh环境。我使用Oh-My-Zsh已经有一段时间了，对于大多数人来说，这是一个很好的选择。然而，在使用Oh-My-Zsh之后，我发现自己没有使用Oh-My-Zsh必须提供的许多功能。</p><p id="8716" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以我在寻找另一种选择。我很快来到了普雷斯托。<em class="ln">和Oh-My-Zsh一样，Prezto是Zsh的一个配置框架。它带有自动完成，别名，功能和提示主题。</em></p><blockquote class="ky"><p id="85d9" class="kz la in bd lb lc ld le lf lg lh kx dk translated">如果你想添加你自己的定制配置，框架是不必要的，但是它确实使事情更容易设置。</p></blockquote><h2 id="e99b" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">我将讨论以下内容:如何安装zsh和Prezto，有用的插件，主题化，别名和自定义函数等功能。</h2><p id="9fcc" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">我的安装将在macOS上，但如果你是Linux用户，这不会有太大的不同。如果你使用的是Windows，情况会略有不同。如果你想知道如何在Windows上安装zsh和Prezto，请在评论中告诉我，这样我可以在以后添加这些步骤。</p><p id="24f0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">TLDR；</strong></p><p id="d448" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你喜欢马上开始，你可以<a class="ae jz" href="https://gist.github.com/rickdaalhuizen90/2ce9eb662e71024ca12e0635cfb44dab" rel="noopener ugc nofollow" target="_blank">在这里</a>下载我的zsh配置<a class="ae jz" href="https://gist.github.com/rickdaalhuizen90/2ce9eb662e71024ca12e0635cfb44dab" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="bbb4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">安装</strong></p><p id="cff0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您使用的是macOS Catalina或更高版本，那么您可能听说过他们已经用zsh代替bash作为默认shell 。</p><p id="1c35" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">运行以查看您当前的shell是什么</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7e8a" class="lo lp in mr b gy mv mw l mx my">echo $SHELL</span></pre><p id="d3fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果没有安装zsh，可以用自制。<a class="ae jz" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">家酿</a>是macOS的软件包管理器。对于Linux，你可以使用用于windows的<a class="ae jz" href="https://snapcraft.io/" rel="noopener ugc nofollow" target="_blank"> Snapcraft </a>或<a class="ae jz" href="https://flatpak.org/" rel="noopener ugc nofollow" target="_blank"> Flatpak </a>和<a class="ae jz" href="https://chocolatey.org/" rel="noopener ugc nofollow" target="_blank"> Chocolatey </a>。在继续之前，请确保您安装了软件包管理器。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="bb6b" class="lo lp in mr b gy mv mw l mx my">brew install zsh</span></pre><p id="9fd9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后将zsh设置为默认shell:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="0560" class="lo lp in mr b gy mv mw l mx my">chsh -s /bin/zsh</span></pre><p id="4d8f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Zsh使用~ / 5启动文件。这些将在我们安装Prezto后可见。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7a71" class="lo lp in mr b gy mv mw l mx my">$ZDOTDIR/.zshenv<br/>$ZDOTDIR/.zprofile<br/>$ZDOTDIR/.zshrc<br/>$ZDOTDIR/.zlogin<br/>$ZDOTDIR/.zlogout</span></pre><blockquote class="ky"><p id="850b" class="kz la in bd lb lc mz na nb nc nd kx dk translated">从您的终端可以回显$ ZDOTDIR来查看它所指的内容。默认情况下，它指的是$HOME。</p></blockquote><ul class=""><li id="61bd" class="ne nf in kc b kd li kh lj kl ng kp nh kt ni kx nj nk nl nm bi translated">的。每次启动zsh都会用到zshenv。这是为您的环境变量，如$PATH，$EDITOR，$VISUAL，$PAGER，$LANG。</li><li id="b034" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">的。zprofile是。zlogin和这两个不打算一起使用。</li><li id="38ce" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">的。zshrc是我们添加别名、函数和其他定制的地方。在本教程中，我们将主要讨论. zshrc。</li><li id="eac4" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">的。zlogin在您登录shell时启动，但在您的. zshrc之后。</li><li id="61e8" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">的。当你关闭你的外壳时，使用zlogout。</li></ul><p id="46ca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们会回来的。zshrc以后，现在我们将让它保持原样。让我们从安装Prezto开始。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="efb6" class="lo lp in mr b gy mv mw l mx my">git clone --recursive <a class="ae jz" href="https://github.com/sorin-ionescu/prezto.git" rel="noopener ugc nofollow" target="_blank">https://github.com/sorin-ionescu/prezto.git</a> "${ZDOTDIR:-$HOME}/.zprezto"</span></pre><p id="cc42" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后将以下内容复制粘贴到您的终端中:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="c3e6" class="lo lp in mr b gy mv mw l mx my">setopt EXTENDED_GLOB<br/>for rcfile in "${ZDOTDIR:-$HOME}"/.zprezto/runcoms/^README.md(.N); do<br/>  ln -s "$rcfile" "${ZDOTDIR:-$HOME}/.${rcfile:t}"<br/>done</span></pre><p id="d459" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们安装了Prezto之后，您会在zsh启动文件旁边的HOME文件夹中找到一个. zpreztorc文件。在这里，我们编辑我们的Prezto选项。</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/45b6e37b984e68532ad4bb8e3afeef4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u-73qKDzI9OA6vrn"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><em class="ns">带状态栏的iTerm2】</em></figcaption></figure><p id="bf69" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">插件</strong></p><p id="7cc2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要在zsh中安装插件，我们需要一个插件管理器，我更喜欢使用<a class="ae jz" href="https://github.com/zplug/zplug" rel="noopener ugc nofollow" target="_blank"> zplug </a>，但也可以随意使用任何其他的<a class="ae jz" href="https://www.reddit.com/r/zsh/comments/ak0vgi/a_comparison_of_all_the_zsh_plugin_mangers_i_used/" rel="noopener ugc nofollow" target="_blank">插件管理器</a>。Zplug也使得安装Oh-My-Zsh插件没有任何麻烦成为可能。</p><p id="6e3c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要安装zplug，请运行以下命令:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="763e" class="lo lp in mr b gy mv mw l mx my">curl -sL --proto-redir -all,https <a class="ae jz" href="https://raw.githubusercontent.com/zplug/installer/master/installer.zsh" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/zplug/installer/master/installer.zsh</a> | zsh</span></pre><p id="3023" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将安装以下内容</p><ul class=""><li id="8536" class="ne nf in kc b kd ke kh ki kl nt kp nu kt nv kx nj nk nl nm bi translated">Git—<em class="ln">Git的标签完成库</em></li><li id="fd3e" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">OS x<em class="ln">——为macOS </em>提供一些实用程序</li><li id="506b" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">Zsh自动建议— <a class="ae jz" href="http://fishshell.com/" rel="noopener ugc nofollow" target="_blank"> <em class="ln">鱼</em></a><em class="ln">—喜欢快速/不唐突的zsh自动建议。</em></li><li id="7f63" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">Fasd <em class="ln"> —为POSIX shells提供对文件和目录的快速访问</em></li><li id="cce4" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">Enhancd <em class="ln"> —带有交互式过滤器的下一代cd命令</em></li><li id="b265" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">Fzf — <em class="ln">一个通用命令行模糊查找器。</em></li><li id="2e00" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">Lsdeluxe — <em class="ln">用颜色和图标给ls输出着色</em></li><li id="4dbc" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">纱——<em class="ln">为</em> <a class="ae jz" href="https://yarnpkg.com/en/" rel="noopener ugc nofollow" target="_blank"> <em class="ln">纱包管理器</em> </a>添加常用别名和补全</li><li id="f849" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated">Powerlevel10k — <em class="ln">带有配置向导的zsh的Powerlevel10k主题。</em></li></ul><p id="0b48" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这些是我使用的基本插件，每个人都不一样，所以花点时间看看哪些插件适合你。更多插件见:<a class="ae jz" href="https://github.com/unixorn/awesome-zsh-plugins" rel="noopener ugc nofollow" target="_blank">牛逼的zsh插件</a>。</p><p id="1697" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将以下内容添加到您的~/中。zshrc文件。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="971c" class="lo lp in mr b gy mv mw l mx my"># Customize to your needs...<br/>source ~/.zplug/init.zsh</span><span id="6aa8" class="lo lp in mr b gy nw mw l mx my"># Plugins<br/>zplug "plugins/git",   from:oh-my-zsh<br/>zplug "plugins/osx",   from:oh-my-zsh<br/>zplug "zsh-users/zsh-autosuggestions"<br/>zplug "clvv/fasd"<br/>zplug "b4b4r07/enhancd"<br/>zplug "junegunn/fzf"<br/>zplug "Peltoche/lsd"<br/>zplug "g-plane/zsh-yarn-autocompletions"<br/>zplug "romkatv/powerlevel10k", as:theme, depth:1</span></pre><p id="043c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后我们运行:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="2fbc" class="lo lp in mr b gy mv mw l mx my">source ~/.zshrc &amp;&amp; zplug install</span></pre><p id="7dfd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">添加字体</strong></p><p id="49a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们从安装一个Nerd字体开始，这确保了我们的主题中所有的字形和图标都被支持。</p><p id="a875" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">去书呆子字体网站<a class="ae jz" href="https://www.nerdfonts.com/" rel="noopener ugc nofollow" target="_blank">下载你选择的字体，我更喜欢Hack。</a></p><p id="2350" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后在终端中设置您的字体:</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/982b1d829f14657ce047c75b8240b97f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PozvMIFhjz_xjYVC"/></div></div></figure><p id="a948" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">添加主题</strong></p><p id="ed3f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Prezto标配了许多您可以使用的主题。一旦你输入提示-l ，你会看到一个当前可用主题的列表。比如用<em class="ln"> prompt -s paradox </em>设置一个主题。</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7bebc264e685dea15235776a1d029e29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*exldWU0pJUMw3OHZ"/></div></div></figure><p id="203e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你对你的主题满意，你可以把它保存在你的。zpreztorc文件如下。在这种情况下，我们选择powerlevel10k，这可能是最知名的主题之一。</p><p id="dc64" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了设置这个，我们在preztorc文件中选择“主题”。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="04da" class="lo lp in mr b gy mv mw l mx my"># Set the prompt theme to load.<br/># Setting it to 'random' loads a random theme.<br/># Auto set to 'off' on dumb terminals.<br/>zstyle ':prezto:module:prompt' theme 'powerlevel10k'</span></pre><p id="5078" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后启动p10k安装向导，启动方式如下:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="6a73" class="lo lp in mr b gy mv mw l mx my">p10k configure</span></pre><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/9995f3ddf984dd104307ae4a26fb5c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NxNDg0Qce7LNa9ei"/></div></div></figure><p id="cf2d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">按照设置向导完成后，您的powerlevel10k就设置好了。这是我的结果</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b8d6aa51c4d680caa50e3b87670eac06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QNfulVkZ9Nr_YlDC"/></div></div></figure><p id="7496" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">别名</strong></p><p id="3545" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通用别名插件让我们可以访问我们可以使用的别名列表。但是，如果您想添加自己的别名，可以在您的。zshrc文件。</p><p id="113b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">特定别名的示例</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="b5f4" class="lo lp in mr b gy mv mw l mx my"># Aliases<br/>alias untar='tar -zxvf' # Unpack .tar file<br/>alias wget='wget -c' # Download and resume<br/>alias getpass='openssl rand -base64 20' # Generate password<br/>alias sha='shasum -a 256' # Check shasum<br/>alias ping='ping -c 5' # Limit ping to 5'<br/>alias www='php -S localhost:8000' # Run local web server</span></pre><p id="1a04" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">自定义功能</strong></p><p id="083e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于一些复杂的命令，别名是不够的，长命令很难维护。我们可以为此使用自定义函数。有几种方法可以在zsh中创建自定义函数。我举两个最常见的例子。</p><p id="834c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一种是在你的~/中如下定义你的函数。zshrc:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="fd55" class="lo lp in mr b gy mv mw l mx my"># Custom functions<br/>hello_world () {<br/>    echo "Hello world"<br/>}</span></pre><p id="b0dd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之后，使用source命令加载您的函数并如下运行它。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="4f9d" class="lo lp in mr b gy mv mw l mx my">source ~/.zshrc &amp;&amp; hello_world</span></pre><p id="d054" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二种方法是定义您的自定义函数。</p><p id="37ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将使您的zsh配置更有条理，而不是把所有东西都放在~/中。zshrc文件。</p><p id="0c22" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当您在控制台中回显$fpath 时，您可以看到一组正在定义的目录，其中包含可以标记为自动加载的文件。要将一个文件夹添加到您的fpath中，我们需要在您的<em class="ln"> ~/中添加以下内容。zshrc </em>。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="a060" class="lo lp in mr b gy mv mw l mx my">fpath=( ~/.zfunc "${fpath[@]}" )</span></pre><p id="3ef2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后我们检查zfunc是否被添加到$fpath中。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="6de9" class="lo lp in mr b gy mv mw l mx my">source ~/.zshrc &amp;&amp; echo $fpath | grep -o zfunc</span></pre><p id="1faf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后我们需要创建一个目录~/。zfunc带有一个“hello”文件——你可以随意命名，但这是我喜欢的方式。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="1162" class="lo lp in mr b gy mv mw l mx my">mkdir ~/.zfunc &amp;&amp; touch ~/.zfunc/hello</span></pre><p id="fa00" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，我创建了一个简单的hello函数。</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7782" class="lo lp in mr b gy mv mw l mx my">hello () {<br/>    echo "Hello $@"<br/>}</span><span id="86ef" class="lo lp in mr b gy nw mw l mx my">hello</span></pre><p id="1b09" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在您需要将函数标记为自动加载后，U选项抑制别名扩展，z代表使用zsh而不是kash样式:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="1cf2" class="lo lp in mr b gy mv mw l mx my">autoload -Uz hello</span></pre><p id="a6e2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">记得每次更新函数的时候都要这样做:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="cf6e" class="lo lp in mr b gy mv mw l mx my">source ~/.zshrc/hello</span></pre><p id="d2e7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以运行后:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="f01f" class="lo lp in mr b gy mv mw l mx my">hello John</span></pre><p id="633a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们已经到了这个博客的结尾。我希望我已经为您提供了足够的信息来创建您自己的zsh配置。如果有任何问题或建议，请在评论中告诉我。</p><h1 id="e918" class="ny lp in bd lq nz oa ob lt oc od oe lw of og oh lz oi oj ok mc ol om on mf oo bi translated">觉得这个帖子有用吗？请点击👏下面的按钮！:)</h1><p id="01d7" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated"><em class="ln">来源:</em></p><ul class=""><li id="082e" class="ne nf in kc b kd ke kh ki kl nt kp nu kt nv kx nj nk nl nm bi translated"><a class="ae jz" href="http://zsh.sourceforge.net/Doc/Release/index.html" rel="noopener ugc nofollow" target="_blank"><em class="ln">Z壳手册</em> </a></li><li id="d688" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated"><a class="ae jz" href="http://zsh.sourceforge.net/Intro/intro_3.html" rel="noopener ugc nofollow" target="_blank"> <em class="ln">启动文件</em> </a></li><li id="228f" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated"><a class="ae jz" href="https://unix.stackexchange.com/questions/71253/what-should-shouldnt-go-in-zshenv-zshrc-zlogin-zprofile-zlogout" rel="noopener ugc nofollow" target="_blank"> <em class="ln">什么应该/不应该进去。zshenv，。zshrc，。兹洛金，。zprofile，。zlogout？</em> </a></li><li id="ff11" class="ne nf in kc b kd nn kh no kl np kp nq kt nr kx nj nk nl nm bi translated"><a class="ae jz" href="https://unix.stackexchange.com/questions/33255/how-to-define-and-load-your-own-shell-function-in-zsh" rel="noopener ugc nofollow" target="_blank"> <em class="ln">如何在zsh </em> </a>中定义并加载自己的shell函数</li></ul></div></div>    
</body>
</html>