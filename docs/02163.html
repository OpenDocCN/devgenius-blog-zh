<html>
<head>
<title>The three questions I ask when reviewing a pull request</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在审查拉动式请求时，我会问三个问题</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-three-questions-i-ask-when-reviewing-a-pull-request-8791b142e6cd?source=collection_archive---------9-----------------------#2020-07-21">https://blog.devgenius.io/the-three-questions-i-ask-when-reviewing-a-pull-request-8791b142e6cd?source=collection_archive---------9-----------------------#2020-07-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fa02594f2ac8f824924f29994bd835a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v4Mp4pN3h9TM5-nwueQeFw.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">查看拉动式请求很像查看 takewalks.com 的艺术图片<a class="ae jz" href="https://www.takewalks.com/paris-tours/louvre-tour-mona-lisa/" rel="noopener ugc nofollow" target="_blank"/></figcaption></figure><h2 id="f548" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">是否可读(又名“漂亮”)？</strong></h2><p id="3899" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">容易理解吗？代码是否在必要的时候被注释，否则自文档化？有没有一种方法可以让这段代码更容易阅读？</p><p id="7934" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">例如，变量和方法名应该尽可能短，同时保持直观。例如，我将使用像<code class="fe lx ly lz ma b">unprocessedOrdersHash</code>这样的变量名，不管它有多长，因为它比<code class="fe lx ly lz ma b">uOrdersHash</code>更易读。</p><p id="34c7" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">我是那些将编写代码比作绘画的开发人员之一，我喜欢花一点时间考虑代码看起来的间距、缩进、顺序和其他“元”方面，即使这可能不会使代码更具可读性或更具性能<em class="lr">。</em></p><h2 id="7acb" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">是 performant 吗？</strong></h2><p id="bc1f" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">代码是可执行的吗？它能有效地完成预期的结果吗？</p><p id="65f1" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">可能无法执行的代码的一个常见示例是著名的“foreach 内的 foreach”(顺便说一下，当我在 foreach 内签入 foreach 时，至少有一个其他开发人员总是<em class="lr"/>暂停，但是代码最终总是<em class="lr"/>投入生产——在 foreach 内质疑类似 foreach 的东西是好的，但是根据我的经验，有时这确实是最好的解决方案)。</p><h2 id="8beb" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">是否一致？</strong></h2><p id="d89a" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">“一致性”是指代码格式的一致性以及与最佳实践的一致性。</p><p id="c1d6" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">这包括:</p><ul class=""><li id="7592" class="mb mc in ky b kz ls ld lt kj md kn me kr mf lq mg mh mi mj bi translated">花括号放在哪里(新行还是同一行)？</li><li id="4492" class="mb mc in ky b kz mk ld ml kj mm kn mn kr mo lq mg mh mi mj bi translated">新变量是用<code class="fe lx ly lz ma b">var</code>声明的还是显式类型？</li><li id="84d6" class="mb mc in ky b kz mk ld ml kj mm kn mn kr mo lq mg mh mi mj bi translated">代码如何与数据库接口(例如 ORM vs native library)？</li></ul><p id="186c" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">在一些开发商店，开发人员训练有素，以至于我从来不需要考虑代码是否一致，是否遵循既定的惯例。例如，每个人都知道在一项工作中使用<code class="fe lx ly lz ma b">var</code>而不是显式类型。在这家公司，我从未见过有人，甚至是实习生，用显式类型代替<code class="fe lx ly lz ma b">var</code>来签入代码。</p><p id="fb5a" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">在其他开发商店，你需要注意是否遵循了惯例，但是我怀疑开发人员可以被“训练”到你不再需要考虑代码是否一致的程度。<strong class="ky io">所有的开发商店都应该努力只担心前两个——可读性和性能。</strong></p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h2 id="c9bb" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">拉请求礼仪</h2><p id="3ae8" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">所有开发人员审查拉请求的方式都不同。对于何时按下“批准”按钮以及何时“拒绝”拉式请求，所有人都有不同的标准。通常“公关协议”——什么时候批准，什么时候拒绝，是否拒绝，什么值得评论或挑剔——是由开发团队的文化设定的。许多人认为“拒绝”一个拉取请求过于苛刻，而是选择发表评论，并简单地<em class="lr">而不是</em>批准它，直到评论得到处理——这种现象可能是它自己的文章。</p><p id="de39" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">对于是否所有的问题都应该被代码审查者发现，或者是否 PRs 应该被简单地审查并且在没有彻底和完整的审查变更的情况下被批准，也可能有不同的期望。其中一些归结于个体开发人员——不是每个人都喜欢停下他们正在做的工作去阅读和审查别人的代码——但是这是从开发车间的“文化”开始的。</p><h2 id="d552" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">我如何处理拉取请求</h2><p id="2a2f" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">就我个人而言，我喜欢花时间处理拉取请求。我认为这是一种特权，而不是世俗的负担(我不喜欢每天花整整 8 个小时写代码)。</p><p id="7394" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">我有时会下拉特性分支，在我喜欢的 IDE 中查看和使用代码。这比快速浏览代码花费的时间要长得多(实际上只适用于筛选明显的问题)，但我认为这是有价值的。有时候，当我审查一份简历时，有一个我不知道答案的理由去搜索(或者“堆栈溢出”)。偶尔，这甚至会让我产生一个关于堆栈溢出的新问题。通过这种方式，我已经了解了 C#语言及其 Roslyn 编译器的一些非常具体的细微差别。此外，你看公关的时间越长，就越有可能发现一个不那么明显的问题。</p><p id="ab47" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">我将回顾一个公关与观看艺术相比较。当一些人观看艺术时，他们不仅仅是花几分钟看一件作品，他们也在思考他们会改变什么。作为开发者，我们很幸运，因为我们可以复制一幅《蒙娜丽莎》并进行实验。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h2 id="eeae" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">加分|审核别人的 PR 时不要做的事:</h2><h2 id="624b" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">不要吹毛求疵</strong></h2><p id="faa0" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">对某人的代码吹毛求疵是打击他们士气的好方法。考虑到我们都有自己的编码风格和我们认为的解决问题的“最佳”方案。代码块之间的额外空间、与您所选择的不同的变量名可能会让您烦恼，并且可能会使代码库“不完美”，但是在共享代码库中总是会出现这种情况。在这种情况下，性能和可读性不会受到影响，惯例或多或少会得到遵守，我发现最好不要去管它。</p><p id="d98e" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">如果这些小“不完美”对你来说真的很重要，试着以身作则。创建 pull 请求，您可以在其中修复缺陷，并将有问题的开发人员作为评审人员放在 PR 上。不一定是他们签入的确切代码，至少一开始不是。大多数开发人员会得到提示。</p><h2 id="f408" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">不要传授不恰当的知识</h2><p id="2219" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">这个很有意思。不要传授你不恰当的知识。这里有一个例子来说明我的意思。前一天晚上在浏览 Reddit 时，你读到了 C#新的“range”操作符。您看到了在您正在审阅的对等代码中使用范围运算符的机会。你在 PR 上做了一个评论，他们应该使用新的范围操作符(因为他们可以！).即使你赞成 PR，不管他们是否实现了 range 操作符，我也反对。</p><p id="e3d0" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">明确地说，pr 是一个很好的地方，可以在指出他们代码的问题的同时教导其他人。这包括领域知识、最佳实践以及特定于公司的协议和约定。PRs 不是告诉某人如何以同样可读和同样高性能的方式重写代码的地方。除此之外，您将引入大多数开发团队在野外遇到时可能不熟悉的代码。</p><p id="c509" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">把它留到午餐时间吧！</p><h2 id="5d6b" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">不要盲目赞同</h2><p id="a424" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">我们都这样做。现在是正午，你很饿，准备去吃午饭。一位同事阻止了你——“詹姆斯，你能尽快批准这个公关吗？？？?"(总是<em class="lr">真快</em>)。你冲回你的电脑，输入密码，这个密码和你在他们让你改密码之前输入的密码非常相似，就在这里，有史以来最大的<em class="lr"/>，<em class="lr">最胖的</em>公关。当你开始疯狂地翻看 diffs 时，你的胃提醒你现在是 12:03，午餐帮正走向电梯。去他妈的。<em class="lr">批准</em>。</p><p id="bdc6" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">这很冒险，但有时效果很好。也就是说，更多的时候，我吃完午饭回来，就有后续的公关在等着我。一些明显的，愚蠢的错误被遗漏了(哇，太神奇了，它被两个，三个，四个开发者漏掉了！)，构建崩溃了，需要立即进行修复<em class="lr">！你的肚子已经吃饱了，你有足够的时间来审查这份公关——除了你没有，因为它打破了构建，每个人都受到了影响。这里希望这第二次公关没有错误。</em></p><p id="ea45" class="pw-post-body-paragraph kw kx in ky b kz ls lb lc ld lt lf lg kj lu li lj kn lv ll lm kr lw lo lp lq ig bi translated">如果这是因为没有足够的时间审查其他人的 PRs，那么商店开发软件的方式需要改变。</p></div></div>    
</body>
</html>