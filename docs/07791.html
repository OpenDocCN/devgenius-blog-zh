<html>
<head>
<title>Transforming / Map Operators in Combine Framework</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">组合框架中的转换/映射运算符</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/transforming-map-operators-in-combine-framework-2cdc809195c1?source=collection_archive---------7-----------------------#2022-04-23">https://blog.devgenius.io/transforming-map-operators-in-combine-framework-2cdc809195c1?source=collection_archive---------7-----------------------#2022-04-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="3190" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我们将讨论转换，也称为 iOS 中组合框架的映射操作符，这些操作符提供了转换数据的方法，就像收集和过滤操作符一样，它们对一系列数据进行操作。</p><p id="6571" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">用例:</strong>映射数据集是一项常见的编程任务。Combine 框架提供了许多映射、过滤和简化数据序列的方法，这些操作被链接在一起，并且在每个元素通过操作符时对其进行转换，而不是对数据集进行操作。<br/>我想在本文中介绍一些运算符，并邀请您探索更多由 Combine 提供的功能。</p><p id="303d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">先决条件:</strong></p><ul class=""><li id="2255" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">Xcode 11 及以上支持<code class="fe kr ks kt ku b">Combine framework</code></li><li id="93ae" class="ki kj in jm b jn kv jr kw jv kx jz ky kd kz kh kn ko kp kq bi translated">出版商、订户和主题的基本知识。</li></ul><p id="042e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们开始吧:</p><h1 id="a968" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">收集:</h1><p id="1110" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">collect 操作符是一个以数组形式发布结果的发布者。如果您想将数据分解成具有传染性的数据类型，以便可以按顺序使用，这将非常有用。我们还可以传递一个整数作为参数来分块输出。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">在组合框架中收集转换运算符。</figcaption></figure><p id="ac21" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的例子中，我们使用了 collect 操作符两次来展示我们如何使用 collect with 和 unless limit。<br/>在第 3 行，如果我们没有限制，发布者将返回一个数组中的所有数据。<br/>在第 6 行，如果我们给集合操作符设置一个限制，发布者将返回数据块。</p><h1 id="2960" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">替换零:</h1><p id="0b56" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">顾名思义，这个操作符用于用提供的数据替换数据集中的 nil。在我们得到不一致的数据集的情况下，这是非常有用的。我们可以通过用这样的数据集替换 nil 来设置后备。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">替换合并框架中的 Nil 转换运算符。</figcaption></figure><p id="6fb8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的例子中，我们有一个小型的字母数组，元素的值为零。我们将数组作为发布者，并对元素“*”使用“replaceNil”运算符，接收器中的结果将始终有一个值，这就是它被强制解包的原因。</p><h1 id="d5e7" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">扫描:</h1><p id="9dc3" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">扫描运算符用于根据要求将上游数据转换为特定的值序列。在使用扫描操作符后，我们有两个参数:<br/> a .部分结果:第一个参数，可以在每个循环中轻松访问。<br/> b .当前元素:第二个参数可用于指定模式的部分结果。<br/>扫描操作符最好的部分是我们可以设置我们的返回类型，如下两个例子所示:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">联合框架中的扫描变换算子。</figcaption></figure><p id="d612" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的例子中，我们使用了一个扫描操作符来返回不同例子中的数组和整数。<br/>在第 4 行和第 9 行，我们可以看到扫描运算符的用法，在括号中，我们已经输入了初始值。在数组的情况下，它是一个空数组，在整数的情况下，它是 0。<br/>当我们开始闭包时，我们得到数字和值。数字是以前的值，而值是当前元素实例。我们有自定义的返回类型[Int]和 Int，因为我们分别在第 5 行和第 10 行执行操作。</p><h1 id="9dc4" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">地图:</h1><p id="b5ce" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">联合收割机中的地图操作符与 Swift 中的地图操作符类似。它提供了一个闭包，我们可以根据需要添加逻辑来映射数据集中的数据。我们将看两遍地图用例。<br/>让我们看下面的第一个例子:</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">联合框架下的地图转换操作。</figcaption></figure><p id="3b3a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的例子中，我们使用 map 操作符来转换带有拼写字符的数字数组。这只是 map operator 的一个用例。我们还可以使用 map 进行日期格式化，向数据集添加自定义逻辑，等等。</p><h1 id="69e2" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">映射关键路径:</h1><p id="7622" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">我们也可以使用映射操作符来映射对象的键。在我们的日常编程生活中，这种用法我们已经见过很多次了，不过是用 swift map operator。Combine 还在 publisher 上提供了相同类型的映射机制，以便我们可以直接在上游操作。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">在联合框架中映射关键路径转换操作符。</figcaption></figure><p id="6da3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的例子中，我们制作了一个名为 Point 的对象，它有两个属性，即 x 和 y，都是整数。<br/>我们在第 8 行使用 pass through subject 作为发布者，在第 9 行订阅它。然而，在第 12 行之前什么都不会打印，我们实际上是将对象发送到下游。<br/>这是地图最简单的用例之一，你可以发现它类似于 swift 地图。</p><h1 id="6490" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">平面地图:</h1><p id="6ec2" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">平面映射运算符的语法与 swift 中的平面映射相似。然而，使用它有一个显著的区别。组合框架中的平面映射用于将上游发布者组合为单个下游发布者，最多可达最大发布者。如果未指定，最大发布者也可以是无限制的。</p><figure class="md me mf mg gt mh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk translated">联合框架中的平面映射变换算子。</figcaption></figure><p id="c592" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的例子中，我们使用当前值主题作为办公室和 2 个对象，即村庄和城镇办公室。<br/> -在第 17 行中，我们使用了办公室主题的员工数量平面图，该平面图被初始化以跟踪第 15 行中的村办公室。<br/> -在第 20 行，我们将 town office 对象合并到 office subject <br/> -现在，每当我们更改两个对象上的雇员数量时，它将在第 19 行打印雇员数量。</p><p id="6cd5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是 Combine 框架中的转换/映射操作符。我将带回来 Combine 中最有趣的操作符之一，叫做“组合操作符”。</p><h1 id="f0ef" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">何去何从:</h1><p id="44b1" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">当我们使用订户从数据库或服务器获取数据时，我们可以尝试这些操作符，这将帮助我们获得转换后的数据，并避免开始时不需要的数据。您可以在我的<a class="ae mo" href="https://github.com/NilaakashSingh/CombineConcepts" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> GitHub </strong> </a>资源库中找到不同的组合运算符及其用法。</p><p id="1a77" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">更多内容:<br/> </strong> <strong class="jm io">组合中的序列操作符:</strong><a class="ae mo" rel="noopener ugc nofollow" target="_blank" href="/sequence-operators-in-combine-framework-c942182150a">https://blog . devgenius . io/Sequence-operators-in-Combine-framework-c 942182150 a</a></p><p id="d255" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">组合框架中的过滤操作符</strong>:<a class="ae mo" href="https://medium.com/dev-genius/filtering-operators-in-combine-framework-d51798d4e2a9" rel="noopener">https://medium . com/dev-genius/Filtering-Operators-in-Combine-Framework-d 51798d 4 e2a 9</a></p><p id="ac42" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">分享这个博客来传播知识|一定要关注，喜欢就鼓掌！快乐编码:)</strong></p><p id="9232" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">在</strong><a class="ae mo" href="https://www.linkedin.com/in/nilaakash-singh-79a386b2/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Linkedin</strong></a><strong class="jm io">和</strong><a class="ae mo" href="https://twitter.com/NilaakashSingh" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Twitter</strong></a><strong class="jm io">上加我。</strong></p></div></div>    
</body>
</html>