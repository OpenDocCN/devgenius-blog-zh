<html>
<head>
<title>The New Photos Picker in iOS 14 -Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS 14 中新的照片拾取器-第 2 部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-new-photos-picker-in-ios-14-part-2-f4864b5df837?source=collection_archive---------4-----------------------#2020-07-01">https://blog.devgenius.io/the-new-photos-picker-in-ios-14-part-2-f4864b5df837?source=collection_archive---------4-----------------------#2020-07-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="fb77" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">这篇文章是我上一篇文章<a class="ae kc" href="https://medium.com/@aarsh.parekh/the-new-photos-picker-in-ios-14-part-1-c15e4820b335" rel="noopener">“iOS 14 中的新照片拾取器-第一部分”</a>的延续。</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/cf0802f6504c76cea676786f5903f0c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NcF1IKHcBUHGeY0w3MjBcw.jpeg"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">来自<a class="ae kc" href="https://www.pexels.com/photo/selective-focus-photography-of-person-using-iphone-x-1542252/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank"> Pexels </a>的<a class="ae kc" href="https://www.pexels.com/@kseverin?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">凯德·塞弗林</a>拍摄的照片</figcaption></figure><p id="7ca9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我以一个关于如何使用 PHPickerResult 解析实时照片和视频的未回答问题结束了我的上一篇帖子。除此之外，也没有什么其他问题需要讨论。所以让我们继续。</p><h2 id="30c8" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">如何解析现场照片和视频？</h2><p id="0187" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">解析实时照片就像解析图像一样简单。我们已经有了一个 PHLivePhoto 类，它可以用来检查 itemProvider 是否可以加载该类的对象，如果可以，我们可以加载 PHLivePhoto 的对象并将其设置为 PHLivePhotoView。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">从 NSItemProvider 对象解析实时照片的代码</figcaption></figure><p id="e20b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在来看视频，<strong class="kv io">现在还没有通过 NSItemProvider 对象解析视频</strong>的演示方法。但是我已经想出了一个很好的解决方法。我们可以在 itemProvider 中查找符合"<strong class="kv io">com . apple . QuickTime-movie "</strong>类型的项目。要加载项目，我们可以使用项目提供程序的 loadItem(forTypeIdentifier:)方法，并加载视频的文件 url。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">从 NSItemProvider 对象解析视频的代码</figcaption></figure><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi mp"><img src="../Images/d5f464488b34241d90d904a3bb9237a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*OsRj58BX6zyVVyIL9Z-tAw.gif"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated">运行中的 PHPicker</figcaption></figure><h2 id="11c1" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">UIImagePicker 会在 iOS 14 中工作吗？</h2><p id="61eb" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">是的，事实上它将在 iOS 14 中呈现时采用 PHPicker 的 UI。从视觉上看，UIImagePicker 和 PHPicker 没有区别，PHPicker 被配置为一次只选择一个资产。遗憾的是，即使 UIImagePicker 继承了 UI，它仍然不能获取多个项目。</p><h2 id="d705" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">我们可以用 PHPicker 打开相机吗？</strong></h2><p id="5e49" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">目前它不支持打开相机拍照和录像。我们将不得不依赖于 UIImagePicker。</p><h2 id="f878" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">结论</strong></h2><p id="ca23" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">PHPicker 提供了许多令人兴奋的特性，但它还不完全稳定。由于该 API 处于测试阶段，它不能按预期工作。有时它会拾取图像，但大多数情况下它会显示错误，即文件不可用或文件不存在，即使它以前可以处理相同的图像/视频。我将继续用这个 API 的最新更新和变化来更新这篇文章。</p><p id="2729" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要试用这个选择器，你可以从以下链接下载演示<a class="ae kc" href="https://github.com/aarsh518/PHPickerViewDemo" rel="noopener ugc nofollow" target="_blank">https://github.com/aarsh518/PHPickerViewDemo</a></p></div><div class="ab cl mq mr hr ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ig ih ii ij ik"><blockquote class="mx my mz"><p id="5302" class="kt ku na kv b kw kx jo ky kz la jr lb nb ld le lf nc lh li lj nd ll lm ln lo ig bi translated">如果你想雇我做 app 开发，可以从<a class="ae kc" href="https://www.fiverr.com/aarsh_parekh" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">这里</strong> </a>开始</p></blockquote></div></div>    
</body>
</html>