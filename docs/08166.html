<html>
<head>
<title>PHP — P49: Constructors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PHP — P49:构造函数</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/php-p49-constructors-5956272de3bc?source=collection_archive---------9-----------------------#2022-05-22">https://blog.devgenius.io/php-p49-constructors-5956272de3bc?source=collection_archive---------9-----------------------#2022-05-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3864f85926bfd55f3a86e2d7dbc67cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0GwmliiZSy0fPQnWqBPeEg.jpeg"/></div></div></figure><p id="e2fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你习惯于其他面向对象的编程语言，你可能对构造函数很熟悉。您可能也熟悉被命名为类名的构造函数；它只是一个与类名同名的方法。</p><p id="0fd5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在 PHP 里，在我看来其实是简化了的。你命名构造器方法，<strong class="ka ir">构造</strong>前面有<strong class="ka ir">两个下划线</strong>:<em class="kw">_ _ construct()</em>。很好，但是构造函数的意义是什么。它在实例化时初始化对象内部的属性；当对象被实例化时，PHP 自动调用构造函数方法。让我们看一些代码来详细了解构造函数。</p><p id="93e8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您没有阅读 PHP 系列文章，在这篇文章之前，我还有 48 篇文章。要获取代码并继续学习，请查阅上一篇关于类型声明的文章。</p><div class="kx ky gp gr kz la"><a rel="noopener  ugc nofollow" target="_blank" href="/php-p48-type-declarations-47114a7a0e0b"><div class="lb ab fo"><div class="lc ab ld cl cj le"><h2 class="bd ir gy z fp lf fr fs lg fu fw ip bi translated">PHP — P48:类型声明</h2><div class="lh l"><h3 class="bd b gy z fp lf fr fs lg fu fw dk translated">如果您来自 PHP 的旧时代，您可能已经被 PHP 自动为您声明类型所宠坏了…</h3></div><div class="li l"><p class="bd b dl z fp lf fr fs lg fu fw dk translated">blog.devgenius.io</p></div></div><div class="lj l"><div class="lk l ll lm ln lj lo jw la"/></div></div></a></div><p id="b475" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">评估下面的代码，您会注意到我们的 GermanShepherd 类的所有属性都已初始化。这对于像<strong class="ka ir">$王国</strong>和<strong class="ka ir">$品种</strong>这样的普通<a class="ae lp" href="https://dinocajic.medium.com/php-p44-class-properties-277c7c17b74b" rel="noopener">属性</a>来说是很棒的，然而，并不是所有的德国牧羊犬都有相同的出生日期。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="f8eb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们进行修改之前，让我们向该类添加一个空白的构造函数。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="d92d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们希望在对象实例化时将参数传递给构造函数。构造函数是在任何事情发生之前首先被调用的方法。需要在对象实例化时初始化的属性有:</p><ul class=""><li id="616e" class="lw lx iq ka b kb kc kf kg kj ly kn lz kr ma kv mb mc md me bi translated">眼睛的颜色</li><li id="aed2" class="lw lx iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated">出生日期</li><li id="8e76" class="lw lx iq ka b kb mf kf mg kj mh kn mi kr mj kv mb mc md me bi translated">毛皮颜色</li></ul><p id="4e08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就像普通的方法一样，我们将从声明参数开始。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="c95a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，我们需要用传递的<a class="ae lp" href="https://dinocajic.medium.com/php-7-x-p36-function-arguments-f0b4c131ad1b" rel="noopener">参数</a>设置我们的<strong class="ka ir"> $eye_color </strong>、<strong class="ka ir"> $dob </strong>和<strong class="ka ir"> $fur_color </strong>属性。记住，要访问对象内部的属性，我们需要<a class="ae lp" href="https://dinocajic.medium.com/php-p47-this-keyword-f7397e560949" rel="noopener"> <strong class="ka ir"> $this </strong>关键字</a>的帮助。</p><p id="6834" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于这个例子，我选择用与我们的属性完全相同的方式来命名参数。<strong class="ka ir"> $this </strong>关键字有助于区分我们访问的是属性还是参数值。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="6032" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以随意命名您的参数。只需确保在方法体中也进行修改。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="f7e0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">尽管上面的代码可以工作，但并不理想，因为它不够描述性。在本文的剩余部分，我们将回到以前的命名约定。现在我们已经创建了构造函数，让我们实际使用它。</p><p id="8104" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如何将参数传递给构造函数？到目前为止，您已经在没有构造函数的情况下实例化了对象,所以让我们看看这是如何完成的。</p><p id="e3d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">$ GS = new german shepherd()；</strong></p><p id="377b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要将参数传递给构造函数，请将它们添加到类名后面的括号中。</p><p id="7ce0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> $gs =新日耳曼牧羊犬(“棕色”、“2019 年 2 月 20 日”、“黑色”)；</strong></p><p id="e830" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">确保以正确的顺序传递参数，即定义参数的顺序。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="e897" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上面代码的输出会是<strong class="ka ir">棕色</strong>。</p><p id="cd1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">看看我们的汽车类，构造器变得超级有用。汽车是一个抽象的概念，而不是一个实际的物体。我们稍后将讨论抽象类。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="77d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">正如您在上面看到的，我们有相当多的属性需要在对象实例化时初始化。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="1f5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每次实例化都很痛苦，尤其是如果你想快速创建一辆车。我们可以只要求传递一小部分参数，而让其他参数可选。我们需要做的修改很简单:为您想要标记为可选的参数设置默认值。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="c920" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在设置可选参数时，唯一要记住的是，它们都应该进行到底。在上面的示例中，我们将<strong class="ka ir"> $year、$make、</strong>和<strong class="ka ir"> $model </strong>作为唯一必需的参数。如果我们将<strong class="ka ir"> $model </strong>移动到<strong class="ka ir"> $color </strong>之后，那么颜色将是必需的，尽管它有一个默认值。为了简单起见，将您的强制参数移到前面。为了进行测试，我创建了一个新方法，它在一个关联数组中返回我们的一些属性，我还创建了日产天际线 GTR 对象。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><p id="e5f1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">GTR 的创作如期开始。我们添加了年份、品牌和型号，因为这些是我们必需的属性。我也想添加颜色和扭矩。颜色很简单，因为它排在第二位，但扭矩排在燃料类型和马力规格之后。如上所示，如果您想将默认值保留为默认值，您必须将默认值传递给构造函数。如果我们跳过为马力添加-1，1000 将被标记为马力，这不是我们想要的。</p><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/39dd469627bc9790e1d84ae72c74fd3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pjhq_Qqa3q6NDG1OFr5Mzw.png"/></div></div></figure><p id="23cd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们的输出也显示了传输。尽管我们没有在构造函数中传递它，但它确实有一个默认值，因此变速器显示为 5 速手动变速器。</p><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="lu lv l"/></div></figure><figure class="lq lr ls lt gt jr"><div class="bz fp l di"><div class="ml lv l"/></div></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><div class="lq lr ls lt gt la"><a href="https://github.com/dinocajic/php-7-youtube-tutorials" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab fo"><div class="lc ab ld cl cj le"><h2 class="bd ir gy z fp lf fr fs lg fu fw ip bi translated">dinocajic/PHP-7-YouTube-教程</h2><div class="lh l"><h3 class="bd b gy z fp lf fr fs lg fu fw dk translated">PHP 7.x YouTube 教程的代码。</h3></div><div class="li l"><p class="bd b dl z fp lf fr fs lg fu fw dk translated">github.com</p></div></div><div class="lj l"><div class="mt l ll lm ln lj lo jw la"/></div></div></a></div></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><figure class="lq lr ls lt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/16fc709ced0b39147a09c916aeda8c20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ABVc_jQ-ab4LqGX2.jpeg"/></div></div></figure><p id="d9b3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">迪诺·卡伊奇目前是<a class="ae lp" href="https://www.lsbio.com/" rel="noopener ugc nofollow" target="_blank"> LSBio(生命周期生物科学公司)</a>、<a class="ae lp" href="https://absoluteantibody.com/" rel="noopener ugc nofollow" target="_blank">绝对抗体</a>、<a class="ae lp" href="https://www.kerafast.com/" rel="noopener ugc nofollow" target="_blank"> Kerafast </a>、<a class="ae lp" href="https://everestbiotech.com/" rel="noopener ugc nofollow" target="_blank">珠穆朗玛生物</a>、<a class="ae lp" href="https://www.nordicmubio.com/" rel="noopener ugc nofollow" target="_blank">北欧 MUbio </a>和<a class="ae lp" href="https://www.exalpha.com/" rel="noopener ugc nofollow" target="_blank"> Exalpha </a>的 IT 主管。他还担任我的自动系统的首席执行官。他有十多年的软件工程经验。他拥有计算机科学学士学位，辅修生物学。他的背景包括创建企业级电子商务应用程序、执行基于研究的软件开发，以及通过写作促进知识的传播。</p><p id="50ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在<a class="ae lp" href="https://www.linkedin.com/in/dinocajic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系他，在<a class="ae lp" href="https://instagram.com/think.dino" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上关注他，或者<a class="ae lp" href="https://dinocajic.medium.com/subscribe" rel="noopener">订阅他的媒体出版物</a>。</p><p id="9dbb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae lp" href="https://dinocajic.medium.com/membership" rel="noopener"> <em class="kw">阅读迪诺·卡吉克(以及媒体上成千上万其他作家)的每一个故事。你的会员费直接支持迪诺·卡吉克和你阅读的其他作家。你也可以在媒体上看到所有的故事。</em> </a></p></div></div>    
</body>
</html>