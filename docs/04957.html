<html>
<head>
<title>The Easiest Way to Deal With Dates and Times in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript 中处理日期和时间的最简单方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-easiest-way-to-deal-with-dates-and-times-in-javascript-5c74db8fb535?source=collection_archive---------2-----------------------#2021-05-27">https://blog.devgenius.io/the-easiest-way-to-deal-with-dates-and-times-in-javascript-5c74db8fb535?source=collection_archive---------2-----------------------#2021-05-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="61c8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Day.js 简介及有用函数的示例</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/34ce7c3ad02bfdc4d171bfadb3e51d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nyPZgOcq7O50PpQs"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@eliza28diamonds?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">伊莱扎·戴蒙德</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="6f06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在 JavaScript 中处理日期和时间是众所周知的挑战。这就是为什么像<a class="ae kv" href="https://www.npmjs.com/package/moment" rel="noopener ugc nofollow" target="_blank"> Moment.js </a>这样的图书馆在 npm 上有将近 1500 万的周下载量。</p><p id="3397" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，如果你检查 Moment.js 的文档，你会看到，当涉及到现代开发时，甚至他们也推荐一些替代方案。Moment.js 的一个问题是包的大小。如果您需要国际化或时区支持，包的大小会变得很大。</p><p id="e09c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个替代方案是<a class="ae kv" href="https://day.js.org/" rel="noopener ugc nofollow" target="_blank"> Day.js </a>包，只有 2kb。</p><blockquote class="ls lt lu"><p id="e419" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">Day.js 是一个极简主义的 JavaScript 库，它通过一个很大程度上与 Moment.js 兼容的 API 为现代浏览器解析、验证、操作和显示日期和时间。</p></blockquote><p id="36a7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你之前用过 Moment.js，用 Day.js 会让你觉得很舒服。</p><p id="7d16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将看看 Day.js 包，其中包含一些您将使用的最常见函数的示例。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="fd94" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">使用 Day.js</h1><p id="05ef" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">对于我们的例子，我们将使用 JavaScript 在 React 应用程序中工作。</p><p id="6679" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要开始使用 Day.js，将<a class="ae kv" href="https://www.npmjs.com/package/dayjs" rel="noopener ugc nofollow" target="_blank">包</a>安装到您的项目中。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="2634" class="ni mh iq ne b gy nj nk l nl nm">npm install dayjs</span></pre><p id="3faa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">导入<code class="fe nn no np ne b">dayjs</code>，现在你可以在你的文件中使用它了。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="43a7" class="ni mh iq ne b gy nj nk l nl nm">import dayjs from 'dayjs';</span></pre><h2 id="e0b7" class="ni mh iq bd mi nq nr dn mm ns nt dp mq lf nu nv ms lj nw nx mu ln ny nz mw oa bi translated">现在</h2><p id="79aa" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">要获得当前日期，调用<code class="fe nn no np ne b">dayjs()</code>。但是，如果我们试图将它呈现到页面上，我们将会得到一个错误。这是因为 Day.js 为<code class="fe nn no np ne b">Date</code>对象创建了一个包装器。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/57230c593bf5d736ce7196bfff6147d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*z8stUnDgtgJxCWrobJBXcg.png"/></div></figure><p id="edfb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要查看 ISO8601 格式的日期和时间，将一个<code class="fe nn no np ne b">.format()</code>链接到<code class="fe nn no np ne b">dayjs()</code>函数调用的末尾。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="bff6" class="ni mh iq ne b gy nj nk l nl nm">dayjs().format(); <em class="lv">// 2021-05-26T07:43:28+09:00</em></span></pre><h2 id="e97f" class="ni mh iq bd mi nq nr dn mm ns nt dp mq lf nu nv ms lj nw nx mu ln ny nz mw oa bi translated">格式</h2><p id="ea3c" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">我们可以向<code class="fe nn no np ne b">.format()</code>函数传递参数，将日期和时间转换成可读性更好的字符串。</p><p id="2d10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果我们调用<code class="fe nn no np ne b">.format("YYYY-MM-DD")</code>，我们将看到以下内容:</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="c4f8" class="ni mh iq ne b gy nj nk l nl nm">dayjs().format("YYYY-MM-DD"); <em class="lv">// 2021-05-26</em></span></pre><p id="b5d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以将<strong class="ky ir">“YYYY-MM-DD”</strong>更改为任何其他可用的格式。查看<a class="ae kv" href="https://day.js.org/docs/en/display/format" rel="noopener ugc nofollow" target="_blank">文档</a>以查看完整列表。</p><h2 id="b2cb" class="ni mh iq bd mi nq nr dn mm ns nt dp mq lf nu nv ms lj nw nx mu ln ny nz mw oa bi translated">得到</h2><p id="1d93" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">如果只想获得日期或时间的一个值，可以调用其中一个 getter 方法。</p><p id="7374" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，要获得年份，在一个<code class="fe nn no np ne b">dayjs()</code>函数调用的末尾添加一个<code class="fe nn no np ne b">.year()</code>。这将返回代表当前年份的数字 2021。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="2b3c" class="ni mh iq ne b gy nj nk l nl nm">dayjs().year(); <em class="lv">// 2021</em></span></pre><p id="08ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者，您也可以调用字符串 getter 来返回相同的信息。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="aabe" class="ni mh iq ne b gy nj nk l nl nm">dayjs().get('year'); <em class="lv">// 2021</em></span></pre><h2 id="eb77" class="ni mh iq bd mi nq nr dn mm ns nt dp mq lf nu nv ms lj nw nx mu ln ny nz mw oa bi translated">一组</h2><p id="b630" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">你能得到的每一个单位，你也可以设定。</p><p id="921b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们想将年份设置为 2025 年，将 2025 年作为参数传递给<code class="fe nn no np ne b">.year()</code>函数。这将把年份设定为 2025 年。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="391f" class="ni mh iq ne b gy nj nk l nl nm">dayjs().year(2025).format('YYYY'); <em class="lv">// 2025</em></span></pre><p id="9020" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者，您也可以调用<code class="fe nn no np ne b">.set()</code>，它接受一个单位作为第一个参数，一个值作为第二个参数。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="3a36" class="ni mh iq ne b gy nj nk l nl nm">dayjs().set('year', 2025).format('YYYY'); <em class="lv">// 2025</em></span></pre><p id="1a89" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以获取和设置以下单位的日期和时间:</p><ul class=""><li id="f31c" class="oc od iq ky b kz la lc ld lf oe lj of ln og lr oh oi oj ok bi translated">毫秒</li><li id="8263" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">第二</li><li id="f20c" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">分钟</li><li id="a427" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">小时</li><li id="51a9" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">月份日期</li><li id="a674" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">星期几</li><li id="3846" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">月</li><li id="de48" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">年</li></ul><h2 id="e39b" class="ni mh iq bd mi nq nr dn mm ns nt dp mq lf nu nv ms lj nw nx mu ln ny nz mw oa bi translated">增加</h2><p id="956a" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">假设您想要获取当前日期 1 年后的日期。您可以使用<code class="fe nn no np ne b">.add()</code>功能来完成。这个函数将一个值作为第一个参数，将一个单位作为第二个参数。</p><p id="de9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，要获得一年后的日期，调用<code class="fe nn no np ne b">.add(1, 'year')</code>。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="0459" class="ni mh iq ne b gy nj nk l nl nm">dayjs().add(1, 'year').format("YYYY-MM-DD"); <em class="lv">// 2022-05-26</em></span></pre><h2 id="4a05" class="ni mh iq bd mi nq nr dn mm ns nt dp mq lf nu nv ms lj nw nx mu ln ny nz mw oa bi translated">减去</h2><p id="76c2" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">类似于加法，我们可以用减法做同样的事情。</p><p id="c4b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果您想获得 1 个月前的日期，请调用<code class="fe nn no np ne b">.subtract(1, 'month')</code>。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="d8e3" class="ni mh iq ne b gy nj nk l nl nm">dayjs().subtract(1, 'month').format("YYYY-MM-DD"); <em class="lv">// 2021-04-26</em></span></pre><p id="2714" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如需查看所有可用单元的列表，请点击此处的列表<a class="ae kv" href="https://day.js.org/docs/en/manipulate/add#list-of-all-available-units" rel="noopener ugc nofollow" target="_blank"/>。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="6d68" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">结论</h1><p id="b0f1" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">感谢阅读！这些只是我发现自己在使用 Day.js 时使用最多的几个函数。</p><p id="d4e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在未来，还有另一个 API 正在开发中，叫做 Temporal。它将是 JavaScript 中一个新的全局对象，充当顶级名称空间，类似于<code class="fe nn no np ne b">Math</code>。Temporal 目前处于 TCP39 流程的第 3 阶段，因此还没有准备好用于生产，但可能很快就会了。希望这将使 JavaScript 中的日期和时间更容易处理。但是现在，请为您的下一个项目访问 Day.js。</p><p id="f9a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想了解另一个有用的 JavaScript 库，请查看下面的文章来了解 Chroma.js。</p><div class="oq or gp gr os ot"><a href="https://levelup.gitconnected.com/build-a-color-scale-generator-with-chroma-js-810b7cf7b587" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd ir gy z fp oy fr fs oz fu fw ip bi translated">用 Chroma.js 构建色标生成器</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">让我们来看看 chroma.js 缩放函数</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph kp ot"/></div></div></a></div></div></div>    
</body>
</html>