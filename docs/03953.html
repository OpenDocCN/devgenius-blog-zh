<html>
<head>
<title>Vuetify — Edit Table Content</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vuetify —编辑表格内容</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vuetify-edit-table-content-cd57d11ae850?source=collection_archive---------2-----------------------#2021-01-08">https://blog.devgenius.io/vuetify-edit-table-content-cd57d11ae850?source=collection_archive---------2-----------------------#2021-01-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c76cf469917568fd8a9ae94c75ff9c64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8hORixQePG1kHEue"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Raphael Gritschke 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="994c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuetify 是一个流行的 Vue 应用程序 UI 框架。</p><p id="4633" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用 Vuetify 框架。</p><h1 id="d590" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">可编辑的表格列</h1><p id="2575" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加<code class="fe me mf mg mh b">v-edit-dialog</code>组件来使一些列可编辑。</p><p id="6623" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e529" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;v-data-table :headers="headers" :items="desserts"&gt;<br/>      &lt;template v-slot:item.name="props"&gt;<br/>        &lt;v-edit-dialog<br/>          :return-value.sync="props.item.name"<br/>          @save="save"<br/>          @cancel="cancel"<br/>          @open="open"<br/>          @close="close"<br/>        &gt;<br/>          {{ props.item.name }}<br/>          &lt;template v-slot:input&gt;<br/>            &lt;v-text-field<br/>              v-model="props.item.name"<br/>              :rules="[max25chars]"<br/>              label="Edit"<br/>              single-line<br/>              counter<br/>            &gt;&lt;/v-text-field&gt;<br/>          &lt;/template&gt;<br/>        &lt;/v-edit-dialog&gt;<br/>      &lt;/template&gt;<br/>    &lt;/v-data-table&gt;</span><span id="1ab5" class="mq lc iq mh b gy mv ms l mt mu">    &lt;v-snackbar v-model="snack" :timeout="3000" :color="snackColor"&gt;<br/>      {{ snackText }}<br/>      &lt;template v-slot:action="{ attrs }"&gt;<br/>        &lt;v-btn v-bind="attrs" text @click="snack = false"&gt;Close&lt;/v-btn&gt;<br/>      &lt;/template&gt;<br/>    &lt;/v-snackbar&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>  name: "HelloWorld",<br/>  data() {<br/>    return {<br/>      snack: false,<br/>      snackColor: "",<br/>      snackText: "",<br/>      max25chars: (v) =&gt; v.length &lt;= 25 || "Input too long!",<br/>      pagination: {},<br/>      headers: [<br/>        {<br/>          text: "Dessert (100g serving)",<br/>          align: "start",<br/>          sortable: false,<br/>          value: "name",<br/>        },<br/>        { text: "Calories", value: "calories" },<br/>        { text: "Fat (g)", value: "fat" },<br/>      ],<br/>      desserts: [<br/>        {<br/>          name: "Frozen Yogurt",<br/>          calories: 159,<br/>          fat: 6.0,<br/>        },<br/>        {<br/>          name: "Ice cream sandwich",<br/>          calories: 237,<br/>          fat: 9.0,<br/>        },<br/>        {<br/>          name: "Eclair",<br/>          calories: 262,<br/>          fat: 16.0,<br/>        },<br/>      ],<br/>    };<br/>  },<br/>  methods: {<br/>    save() {<br/>      this.snack = true;<br/>      this.snackColor = "success";<br/>      this.snackText = "Data saved";<br/>    },<br/>    cancel() {<br/>      this.snack = true;<br/>      this.snackColor = "error";<br/>      this.snackText = "Canceled";<br/>    },<br/>    open() {<br/>      this.snack = true;<br/>      this.snackColor = "info";<br/>      this.snackText = "Dialog opened";<br/>    },<br/>    close() {<br/>      console.log("Dialog closed");<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="ae53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使<code class="fe me mf mg mh b">name</code>列可编辑。</p><p id="7e16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe me mf mg mh b">v-edit-dialog</code>，它的<code class="fe me mf mg mh b">input</code>槽填充了<code class="fe me mf mg mh b">v-text-field</code>组件，让我们在单击单元格时编辑文本。</p><p id="41b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">rules</code>道具让我们设置验证规则。</p><p id="e2a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们要么返回<code class="fe me mf mg mh b">undefined</code>要么返回一个错误消息(如果有的话)。</p><h1 id="d05d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">CRUD 操作</h1><p id="0a80" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加一个对话框，当我们单击表格行中的一个按钮时，这个对话框就会打开。</p><p id="2ef7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a123" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;v-data-table :headers="headers" :items="desserts" sort-by="calories" class="elevation-1"&gt;<br/>    &lt;template v-slot:top&gt;<br/>      &lt;v-toolbar flat color="white"&gt;<br/>        &lt;v-toolbar-title&gt;My CRUD&lt;/v-toolbar-title&gt;<br/>        &lt;v-divider class="mx-4" inset vertical&gt;&lt;/v-divider&gt;<br/>        &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>        &lt;v-dialog v-model="dialog" max-width="500px"&gt;<br/>          &lt;template v-slot:activator="{ on, attrs }"&gt;<br/>            &lt;v-btn color="primary" dark class="mb-2" v-bind="attrs" v-on="on"&gt;New Item&lt;/v-btn&gt;<br/>          &lt;/template&gt;<br/>          &lt;v-card&gt;<br/>            &lt;v-card-title&gt;<br/>              &lt;span class="headline"&gt;{{ formTitle }}&lt;/span&gt;<br/>            &lt;/v-card-title&gt;</span><span id="d655" class="mq lc iq mh b gy mv ms l mt mu">&lt;v-card-text&gt;<br/>              &lt;v-container&gt;<br/>                &lt;v-row&gt;<br/>                  &lt;v-col cols="12" sm="6" md="4"&gt;<br/>                    &lt;v-text-field v-model="editedItem.name" label="Dessert name"&gt;&lt;/v-text-field&gt;<br/>                  &lt;/v-col&gt;<br/>                  &lt;v-col cols="12" sm="6" md="4"&gt;<br/>                    &lt;v-text-field v-model="editedItem.calories" label="Calories"&gt;&lt;/v-text-field&gt;<br/>                  &lt;/v-col&gt;<br/>                  &lt;v-col cols="12" sm="6" md="4"&gt;<br/>                    &lt;v-text-field v-model="editedItem.fat" label="Fat (g)"&gt;&lt;/v-text-field&gt;<br/>                  &lt;/v-col&gt;<br/>                &lt;/v-row&gt;<br/>              &lt;/v-container&gt;<br/>            &lt;/v-card-text&gt;</span><span id="b32e" class="mq lc iq mh b gy mv ms l mt mu">            &lt;v-card-actions&gt;<br/>              &lt;v-spacer&gt;&lt;/v-spacer&gt;<br/>              &lt;v-btn color="blue darken-1" text @click="close"&gt;Cancel&lt;/v-btn&gt;<br/>              &lt;v-btn color="blue darken-1" text @click="save"&gt;Save&lt;/v-btn&gt;<br/>            &lt;/v-card-actions&gt;<br/>          &lt;/v-card&gt;<br/>        &lt;/v-dialog&gt;<br/>      &lt;/v-toolbar&gt;<br/>    &lt;/template&gt;<br/>    &lt;template v-slot:item.actions="{ item }"&gt;<br/>      &lt;v-icon small class="mr-2" @click="editItem(item)"&gt;mdi-pencil&lt;/v-icon&gt;<br/>      &lt;v-icon small @click="deleteItem(item)"&gt;mdi-delete&lt;/v-icon&gt;<br/>    &lt;/template&gt;<br/>    &lt;template v-slot:no-data&gt;<br/>      &lt;v-btn color="primary" @click="initialize"&gt;Reset&lt;/v-btn&gt;<br/>    &lt;/template&gt;<br/>  &lt;/v-data-table&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>export default {<br/>  name: "HelloWorld",<br/>  data: () =&gt; ({<br/>    dialog: false,<br/>    headers: [<br/>      {<br/>        text: "Dessert (100g serving)",<br/>        align: "start",<br/>        sortable: false,<br/>        value: "name",<br/>      },<br/>      { text: "Calories", value: "calories" },<br/>      { text: "Fat (g)", value: "fat" },<br/>      { text: "Actions", value: "actions", sortable: false },<br/>    ],<br/>    desserts: [],<br/>    editedIndex: -1,<br/>    editedItem: {<br/>      name: "",<br/>      calories: 0,<br/>      fat: 0,<br/>      carbs: 0,<br/>      protein: 0,<br/>    },<br/>    defaultItem: {<br/>      name: "",<br/>      calories: 0,<br/>      fat: 0,<br/>      carbs: 0,<br/>      protein: 0,<br/>    },<br/>  }),</span><span id="3a38" class="mq lc iq mh b gy mv ms l mt mu">  computed: {<br/>    formTitle() {<br/>      return this.editedIndex === -1 ? "New Item" : "Edit Item";<br/>    },<br/>  },</span><span id="e544" class="mq lc iq mh b gy mv ms l mt mu">  watch: {<br/>    dialog(val) {<br/>      val || this.close();<br/>    },<br/>  },</span><span id="06f0" class="mq lc iq mh b gy mv ms l mt mu">  created() {<br/>    this.initialize();<br/>  },</span><span id="604c" class="mq lc iq mh b gy mv ms l mt mu">  methods: {<br/>    initialize() {<br/>      this.desserts = [<br/>        {<br/>          name: "Frozen Yogurt",<br/>          calories: 159,<br/>          fat: 6.0,<br/>        },<br/>        {<br/>          name: "Ice cream sandwich",<br/>          calories: 237,<br/>          fat: 9.0,<br/>        },<br/>        {<br/>          name: "Eclair",<br/>          calories: 262,<br/>          fat: 16.0,<br/>        },<br/>      ];<br/>    },</span><span id="5ea2" class="mq lc iq mh b gy mv ms l mt mu">    editItem(item) {<br/>      this.editedIndex = this.desserts.indexOf(item);<br/>      this.editedItem = Object.assign({}, item);<br/>      this.dialog = true;<br/>    },</span><span id="5b91" class="mq lc iq mh b gy mv ms l mt mu">    deleteItem(item) {<br/>      const index = this.desserts.indexOf(item);<br/>      confirm("Are you sure you want to delete this item?") &amp;&amp;<br/>        this.desserts.splice(index, 1);<br/>    },</span><span id="34ab" class="mq lc iq mh b gy mv ms l mt mu">    close() {<br/>      this.dialog = false;<br/>      this.$nextTick(() =&gt; {<br/>        this.editedItem = Object.assign({}, this.defaultItem);<br/>        this.editedIndex = -1;<br/>      });<br/>    },</span><span id="5049" class="mq lc iq mh b gy mv ms l mt mu">    save() {<br/>      if (this.editedIndex &gt; -1) {<br/>        Object.assign(this.desserts[this.editedIndex], this.editedItem);<br/>      } else {<br/>        this.desserts.push(this.editedItem);<br/>      }<br/>      this.close();<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="88b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用对话框填充<code class="fe me mf mg mh b">top</code>槽。</p><p id="670e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">dialog</code>状态让我们控制它何时打开。</p><p id="3867" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击铅笔按钮时，运行<code class="fe me mf mg mh b">editItem</code>方法。</p><p id="25c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设置了<code class="fe me mf mg mh b">this.editedIndex</code>并设置了<code class="fe me mf mg mh b">this.editedItem</code>对象，以便用值填充表单。</p><p id="f8a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，当我们点击垃圾桶按钮时，我们运行<code class="fe me mf mg mh b">deleteItem</code>方法。</p><p id="f8a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们显示确认对话框，并删除具有给定索引的项目。</p><h1 id="d5c0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="910e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用一些方法在表中添加和删除条目。</p><p id="d3fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过点击带有<code class="fe me mf mg mh b">v-edit-dialog</code>组件的单元格来编辑列内容。</p></div></div>    
</body>
</html>