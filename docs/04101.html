<html>
<head>
<title>React Native — Section List and Back Button Handling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native —部分列表和后退按钮处理</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/react-native-section-list-and-back-button-handling-83c44dba713f?source=collection_archive---------6-----------------------#2021-01-25">https://blog.devgenius.io/react-native-section-list-and-back-button-handling-83c44dba713f?source=collection_archive---------6-----------------------#2021-01-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a411c0117881c41b414b0b25836d3c58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CwEXFIOgCmjbjpp8"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Brandon Hoogenboom 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="cc32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React Native 是基于 React 的移动开发，我们可以用它来进行移动开发。</p><p id="67a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何使用它来创建一个带有 React Native 的应用程序。</p><h1 id="8c63" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">章节列表</h1><p id="8264" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加<code class="fe me mf mg mh b">SectionList</code>组件来显示部分列表视图。</p><p id="4946" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它是跨平台的，支持水平模式。</p><p id="097c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，它还支持页眉、页脚和分隔符。</p><p id="6c44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以拉出来刷新数据。</p><p id="2b79" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以一边滚动一边加载数据。</p><p id="f95e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还支持多列。</p><p id="6ca8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e34f" class="mq lc iq mh b gy mr ms l mt mu">import React from 'react';<br/>import { SafeAreaView, StyleSheet, Text, View, SectionList } from 'react-native';<br/>const DATA = [<br/>  {<br/>    title: "Main dishes",<br/>    data: ["Pizza", "Burger", "Risotto"]<br/>  },<br/>  {<br/>    title: "Sides",<br/>    data: ["French Fries", "Onion Rings", "Fried Shrimps"]<br/>  },<br/>  {<br/>    title: "Drinks",<br/>    data: ["Water", "Coke", "Beer"]<br/>  },<br/>  {<br/>    title: "Desserts",<br/>    data: ["Cheese Cake", "Ice Cream"]<br/>  }<br/>];<br/>const Item = ({ title }) =&gt; (<br/>  &lt;View style={styles.item}&gt;<br/>    &lt;Text style={styles.title}&gt;{title}&lt;/Text&gt;<br/>  &lt;/View&gt;<br/>);<br/>export default function App() {<br/>  return (<br/>    &lt;SafeAreaView style={styles.container}&gt;<br/>      &lt;SectionList<br/>        sections={DATA}<br/>        keyExtractor={(item, index) =&gt; item + index}<br/>        renderItem={({ item }) =&gt; &lt;Item title={item} /&gt;}<br/>        renderSectionHeader={({ section: { title } }) =&gt; (<br/>          &lt;Text style={styles.header}&gt;{title}&lt;/Text&gt;<br/>        )}<br/>      /&gt;<br/>    &lt;/SafeAreaView&gt;<br/>  );<br/>}</span><span id="4c8a" class="mq lc iq mh b gy mv ms l mt mu">const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    marginTop: 0<br/>  },<br/>  item: {<br/>    backgroundColor: 'pink',<br/>    padding: 20,<br/>    marginVertical: 8,<br/>    marginHorizontal: 16,<br/>  },<br/>  title: {<br/>    fontSize: 32,<br/>  },<br/>});</span></pre><p id="fabb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe me mf mg mh b">SafeAreaView</code>和<code class="fe me mf mg mh b">SectionList</code>来显示一个列表，该列表带有部分标题，每个部分都有自己的内容。</p><p id="6b5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">sections</code>道具有数据。</p><p id="f545" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">keyExtractor</code>是一个返回项目唯一索引的函数。</p><p id="f966" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">renderItem</code>是渲染物品的函数。</p><p id="c5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">renderSectionHeader</code>属性用一个函数来呈现标题。</p><h1 id="0dc9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">后台处理程序</h1><p id="d79b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用 BackHandler API 来处理后退按钮按压。</p><p id="2107" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b3fd" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from 'react';<br/>import { Text, View, StyleSheet, BackHandler, Alert } from "react-native";</span><span id="4d44" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const backAction = () =&gt; {<br/>      Alert.alert("Are you sure?", "Are you sure you want to go back?", [<br/>        {<br/>          text: "Cancel",<br/>          onPress: () =&gt; null,<br/>          style: "cancel"<br/>        },<br/>        { text: "YES", onPress: () =&gt; BackHandler.exitApp() }<br/>      ]);<br/>      return true;<br/>    };</span><span id="5fd5" class="mq lc iq mh b gy mv ms l mt mu">    const backHandler = BackHandler.addEventListener(<br/>      "hardwareBackPress",<br/>      backAction<br/>    );</span><span id="b274" class="mq lc iq mh b gy mv ms l mt mu">    return () =&gt; backHandler.remove();<br/>  }, []);</span><span id="40a1" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Text style={styles.text}&gt;Click Back button!&lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  );<br/>}</span><span id="1111" class="mq lc iq mh b gy mv ms l mt mu">const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    alignItems: "center",<br/>    justifyContent: "center"<br/>  },<br/>  text: {<br/>    fontSize: 18,<br/>    fontWeight: "bold"<br/>  }<br/>});</span></pre><p id="deff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们为带有<code class="fe me mf mg mh b">BackHandler.addEventListener</code>的<code class="fe me mf mg mh b">hardwareBackPress</code>事件附加一个事件处理程序。</p><p id="301a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">backAction</code>事件处理函数中，我们用<code class="fe me mf mg mh b">Alert.alert</code>方法显示了一个警告。</p><p id="52d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将警报的标题和内容作为参数。</p><p id="0463" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第三个参数是一个数组，其中的对象包含 cancel 按钮的内容。</p><p id="03ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">text</code>属性是按钮的文本。</p><p id="5dd4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">onPress</code>是我们按下按钮时运行的功能。</p><p id="33d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">style</code>有按钮的样式。</p><p id="78b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当组件卸载时，我们调用<code class="fe me mf mg mh b">backHandler.remove()</code>来移除<code class="fe me mf mg mh b">hardwareBackPress</code>监听器。</p><h1 id="397d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="2b81" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加<code class="fe me mf mg mh b">SectionList</code>组件，为每个部分添加一个带有部分标题和列表项的列表。</p><p id="552c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以为 back 按钮添加一个处理程序。</p></div></div>    
</body>
</html>