<html>
<head>
<title>Unity’s Navigation and Pathfinding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity的导航和寻路</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/unitys-navigation-and-pathfinding-f91f4335e5e5?source=collection_archive---------1-----------------------#2021-05-26">https://blog.devgenius.io/unitys-navigation-and-pathfinding-f91f4335e5e5?source=collection_archive---------1-----------------------#2021-05-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="b675" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用导航网格和导航代理</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b2c75cf1ac06d69edebdf9a1b41dd60f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SCCRHFDHPsFFP9aaxZRc4Q.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated"><a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-NavigationSystem.html" rel="noopener ugc nofollow" target="_blank">图片来自Unity中的Unity手动导航系统</a></figcaption></figure><p id="b604" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">场景设置好了，过场动画也完成了，现在是时候开始玩游戏了。为了实现我的角色四处走动，我需要一种方法来了解可以行走的区域，哪里有障碍，以及如何从一个地方移动到另一个地方。</p><p id="2f02" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我知道Unity提供了一个<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/Navigation.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">导航和寻路</strong> </a>系统，我可以用它来实现这个目的。</p><blockquote class="lp lq lr"><p id="942e" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">导航系统允许你使用从你的<strong class="kv io">场景</strong>几何图形自动创建的导航网格来创建可以在游戏世界中智能移动的角色。动态障碍允许您在运行时改变角色的导航，而脱离网格链接允许您建立特定的动作，如开门或从壁架上跳下。本节详细介绍Unity的导航和寻路系统。</p></blockquote><p id="7c17" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如你所看到的，Unity的内置导航包非常强大。对于这个游戏，我将不需要<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-CreateOffMeshLink.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">脱离网格链接</strong> </a>，或者<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-CreateNavMeshObstacle.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">导航网格障碍</strong> </a>。我需要一个<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-BuildingNavMesh.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">导航网</strong> </a>和一个<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-CreateNavMeshAgent.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">导航网代理</strong> </a> <strong class="kv io"> </strong>因为这些都是使用导航系统必不可少的组件。</p><h1 id="3717" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">导航网格</h1><p id="feeb" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">由<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-NavigationSystem.html" rel="noopener ugc nofollow" target="_blank">定义<strong class="kv io">统一手册</strong>定义</a></p><blockquote class="lp lq lr"><p id="406e" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated"><strong class="kv io"> NavMesh </strong>(导航网格的缩写)是一种数据结构，描述了游戏世界的可行走表面，并允许在游戏世界中找到从一个可行走位置到另一个位置的路径。数据结构是从级别几何体自动构建或烘焙的。</p></blockquote><p id="e2eb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我需要为我的游戏构建一个<strong class="kv io"> NavMesh </strong>，可以分4步完成:</p><ol class=""><li id="1821" class="mt mu in kv b kw kx kz la lc mv lg mw lk mx lo my mz na nb bi translated"><strong class="kv io">选择</strong>会影响导航的场景几何图形——可行走的表面和障碍物。</li><li id="9c39" class="mt mu in kv b kw nc kz nd lc ne lg nf lk ng lo my mz na nb bi translated"><strong class="kv io">选中导航静态</strong>打开，将选定的对象包含在NavMesh烘焙过程中。</li><li id="b9d8" class="mt mu in kv b kw nc kz nd lc ne lg nf lk ng lo my mz na nb bi translated"><strong class="kv io">调整</strong>烘焙设置来匹配你的代理大小。</li><li id="a615" class="mt mu in kv b kw nc kz nd lc ne lg nf lk ng lo my mz na nb bi translated"><strong class="kv io">点击烘焙</strong>构建NavMesh。</li></ol><p id="e09f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果我有一个更复杂的场景，比如在运行时修改的场景，我可能会考虑使用来自<a class="ae ks" href="https://docs.unity3d.com/Manual/NavMesh-BuildingComponents.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> NavMesh构建组件</strong> </a> <strong class="kv io">的<a class="ae ks" href="https://docs.unity3d.com/Manual/class-NavMeshSurface.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> NavMesh曲面</strong>。</a></strong></p><h2 id="0cb8" class="nh lx in bd ly ni nj dn mc nk nl dp mg lc nm nn mi lg no np mk lk nq nr mm ns bi translated"><strong class="ak">选择</strong>会影响导航的场景几何图形。</h2><p id="251c" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">对于几何图形，我有一个地板碰撞器来代表游戏中可以行走的地板。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/ffb361340892c18f660b9c7f1ac91356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZskyuB8FO-RJlEmR-NSpuw.gif"/></div></div></figure><h2 id="7c56" class="nh lx in bd ly ni nj dn mc nk nl dp mg lc nm nn mi lg no np mk lk nq nr mm ns bi translated">检查导航静态</h2><p id="5260" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">我需要修改导航窗口对象选项卡中的设置。要到达那里，进入窗口-&gt;人工智能-&gt;导航。然后单击对象选项卡。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/137e646392a804c00354b2f1f8298697.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zrvtFGyUOQq6vlVU8Ktdcw.gif"/></div></div></figure><p id="9834" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">确保地板碰撞器在我的场景中仍然被选中，我在导航窗口的对象标签上单击导航静态复选框，然后我可以设置使用什么类型的<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-AreasAndCosts.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">区域</strong> </a>当然这是可行走区域。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/a958ffcaf22bc61f92442117a4f0dec4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/1*KGEBeIP1tLSnMWZbra6A0g.gif"/></div></figure><p id="e485" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我也可以在inspector选项卡中完成此操作，而不用打开导航窗口，只需使用inspector并将此对象标记为静态导航即可。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/f834887ab19aed6009d4e9c556f6d8da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/1*CLHF0dJQ9GNdcaexE5MxDw.gif"/></div></figure><p id="4bd0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我也去了，并确保所有的环境预设都被标记为不可行走，以确保这些在<strong class="kv io"> NavMesh </strong>中得到考虑。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/ac0b1625b5eb21907fc05f5429047302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/1*nKCWwtLLZei1_n-vVCj0lg.gif"/></div></figure><h2 id="20d0" class="nh lx in bd ly ni nj dn mc nk nl dp mg lc nm nn mi lg no np mk lk nq nr mm ns bi translated"><strong class="ak">调整</strong>烘焙设置</h2><p id="7dbb" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">接下来，我去烘焙标签，并确保设置是正确的。我将使用默认设置，如果这些对我来说不太好，我会回来调整这些设置，并重新烘焙<strong class="kv io"> NavMesh </strong>后者。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/148433e55a5a461be70825bc60840ea9.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/1*pYnAXf100w_6Mpd9Wl2MfQ.gif"/></div></figure><h2 id="887e" class="nh lx in bd ly ni nj dn mc nk nl dp mg lc nm nn mi lg no np mk lk nq nr mm ns bi translated"><strong class="ak">点击烘焙</strong>来构建导航网格</h2><p id="9a63" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">现在我所要做的就是点击烘焙来构建我的<strong class="kv io"> NavMesh。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/cd2fef307e1acd9682d4cc62d7a45956.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/1*rushcplo99wPURIFOCkqsg.gif"/></div></figure><p id="703f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">只要我选择了导航窗口，它就会在场景中显示我的导航网格。场景中可行走的区域将是蓝色的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/d359f335c8d0bc9fff99b6ce0f589972.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yrxzvgwdsEarNW5NSoF9JA.gif"/></div></div></figure><h1 id="d6f6" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">导航代理</h1><p id="5cfc" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">现在我有了一个NavMesh，我需要一个可以用来在场景中导航的角色。为了在场景中导航，我的角色需要一个<strong class="kv io"> NavMesh代理</strong>。</p><p id="5c94" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">由<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-NavigationSystem.html" rel="noopener ugc nofollow" target="_blank">定义<strong class="kv io">统一手册</strong>定义</a></p><blockquote class="lp lq lr"><p id="772d" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated"><strong class="kv io"> NavMesh Agent </strong>组件帮助你创建人物，这些人物在朝着各自的目标前进的同时相互躲避。代理使用NavMesh推理游戏世界，他们知道如何避免彼此以及移动障碍物。</p></blockquote><p id="e345" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就像将<strong class="kv io"> NavMesh代理组件</strong>添加到<strong class="kv io">游戏对象</strong>一样简单。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/977129b74337f3fca45ab3b220b0625f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/1*r5A7KnXPqCiKK83y50DKbg.gif"/></div></figure><p id="45fa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">NavMesh代理有各种各样的<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/class-NavMeshAgent.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">设置</strong> </a> <strong class="kv io"> </strong>可以更改，但我认为默认设置会对我有用。</p><h2 id="3cd1" class="nh lx in bd ly ni nj dn mc nk nl dp mg lc nm nn mi lg no np mk lk nq nr mm ns bi translated">与其他组件一起使用</h2><p id="393f" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">当将此组件与修改<strong class="kv io">游戏对象</strong>的位置和旋转的其他组件组合时，也需要进行一些考虑。如果动画有根运动，两个主要组件是<strong class="kv io"> Unity物理系统</strong>和<strong class="kv io">动画系统</strong>。参见<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-MixingComponents.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">将NavMesh代理与其他组件一起使用</strong> </a>了解注意事项的完整列表。</p><p id="5a08" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用<strong class="kv io">刚体</strong>时，确保打开运动学。</p><p id="c8f4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用<strong class="kv io">动画</strong>时，您可以使用<strong class="kv io"> NavMeshAgent.velocity </strong>作为动画制作人的输入，并关闭动画的根部运动，或者您可以通过禁用<strong class="kv io"> NavMesh代理</strong>上的更新位置和更新旋转来使代理跟随动画。然后使用根位置来计算位置的差异。详见<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-CouplingAnimationAndNavigation.html" rel="noopener ugc nofollow" target="_blank">耦合动画和导航</a>。</p><h1 id="2ab2" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">把它放在一起</h1><p id="d3af" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">首先，我需要为代理提供一条路径。路径由<strong class="kv io">导航网格</strong>上的起始位置和目的地组成。起点将是<strong class="kv io">导航员</strong>的位置，终点是我希望<strong class="kv io">导航员</strong>移动到的点。一旦我有了这两样东西，Unity就会计算出它需要的路径。要找到统一的路径，请使用一种称为A* "A star "的算法，这是一种图形搜索算法，通常在游戏中用于找到目的地。有关A*和其他搜索算法的更多信息，请参见<a class="ae ks" href="http://theory.stanford.edu/~amitp/GameProgramming/AStarComparison.html" rel="noopener ugc nofollow" target="_blank">http://theory . Stanford . edu/~ amitp/game programming/astar comparison . html</a>或更新版本的互动图表<a class="ae ks" href="https://www.redblobgames.com/pathfinding/a-star/introduction.html" rel="noopener ugc nofollow" target="_blank">https://www . redblobgames . com/path finding/A-star/introduction . html</a></p><p id="07e4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，现在我需要做的就是为NavMesh代理提供一个移动到的目的地。<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-HowTos.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> Unity文档</strong> </a>提供了几个关于如何做这件事的例子<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-MoveToDestination.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">告诉一个NavMeshAgent移动到一个目的地</strong> </a>、<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-MoveToClickPoint.html" rel="noopener ugc nofollow" target="_blank">、<strong class="kv io">移动一个Agent到一个被鼠标点击的位置</strong>、</a>、<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-AgentPatrol.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">让一个Agent在一组点</strong> </a>之间巡视。</p><h2 id="ce5b" class="nh lx in bd ly ni nj dn mc nk nl dp mg lc nm nn mi lg no np mk lk nq nr mm ns bi translated">向目标前进</h2><p id="866f" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">在本文中，我将使用<a class="ae ks" href="https://docs.unity3d.com/2021.1/Documentation/Manual/nav-MoveToDestination.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">告诉NavMeshAgent移动到目的地</strong> </a> <strong class="kv io"> </strong>，因为这是移动<strong class="kv io"> NavMesh Agent </strong>的最基本和最简单的方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/1d5f077df5db235ee6ef1eb2732f77d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*v8l0rCe25EWUbKQ_6Yd0Lw.png"/></div></figure><p id="b886" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">统一引擎。AI需要进入Unity的导航系统。NavMesh代理是必需的。</p><p id="e2c3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我需要一个转换来设置目的地。(可在检查器中设置)</p><p id="683b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">确定有目标，有代理人。</p><p id="6071" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将目的地设置为目标位置。</p><p id="3d5f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">球员向球形球门移动</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/8efc3f262da6798b3b33c00c2e37d154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*USQJ_GKfDpbwMNvrOUhRtQ.gif"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/1890a486f939459622706fbab5754087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eFUivuij_LQ3L8z1oT4XyQ.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">导航窗口打开时。</figcaption></figure><p id="babf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">只是它选择的最佳路径移动到了守卫后面，这不是故意的，现在有一组代码让它避开守卫。</p><p id="2e78" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> NavMesh代理移动</strong></p><p id="950d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我有了一个工作的运动，我将创建一个抽象类，我可以用它来使未来的类，如点击移动和在路点之间移动，在未来更容易实现。</p><p id="cefe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我使代理受到保护，以防我需要访问子类中的代理属性。</p><p id="1538" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我有一个Vector3，子类也可以用它来设置期望的目的地。</p><p id="4348" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我有一个私人的矢量，所以我可以跟踪目的地的变化。</p><p id="1e55" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在Start方法中，我得到了NavMesh代理。如果代理由于某种原因为空，我会记录一条异常消息，指出有些地方不对劲。</p><p id="1711" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然后，我将目标和当前目标设置为转换位置。</p><p id="340d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在更新方法a中调用抽象方法来设置目的地。我检查目的地是否改变了，如果没有，我退出这个方法。如果目的地改变了，那么我将当前目的地和代理目的地设置为目的地</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oe"><img src="../Images/0891ba6ffe4c96c30b439fbafd8c6e1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C85BO3DQ1f3_SC24r9k5ZQ.png"/></div></div></figure><p id="d517" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然后，我将Move To Behavior更改为使用新的抽象类。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi of"><img src="../Images/c8f9756f7c3d9e34c5f699fb44e933d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uPtONxtWzDXG_p9XhQ2G8w.gif"/></div></div></figure><p id="51a6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">测试以确保移动到仍能正常工作。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/6b5d5ab4ab142f158c099ccc7e156262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AoXzik9RqSI6atnuNV1UFQ.gif"/></div></div></figure><p id="76ba" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，当我移动目标时，代理将继续移动到新的目的地。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi og"><img src="../Images/a3cb5a5b96f8ec99d2d49bb84a744724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*o6Oj3w7pfyZjiloibD_JwQ.gif"/></div></div></figure></div></div>    
</body>
</html>