<html>
<head>
<title>How to Architect IOT Based Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设计基于IOT的应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-architect-iot-based-applications-e5b94ac5d1f?source=collection_archive---------8-----------------------#2020-06-20">https://blog.devgenius.io/how-to-architect-iot-based-applications-e5b94ac5d1f?source=collection_archive---------8-----------------------#2020-06-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="4010" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">为物联网(IoT)设计产品从根本上不同于为web或移动设备设计产品。</h1><p id="cd9f" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在<a class="ae lg" href="https://www.tempest.house/" rel="noopener ugc nofollow" target="_blank"> Tempest House </a>，我们已经构建了几十个高质量、可扩展的应用，包括物联网和其他应用。从这些丰富的经验中，我们总结出了构建物联网产品的7个技巧(最后还有一个架构示例):</p><h1 id="73f0" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">1.预计会有大量数据</h1><p id="57d1" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">物联网产品创造了<a class="ae lg" href="https://blogs.cisco.com/datacenter/internet-of-things-iot-data-continues-to-explode-exponentially-who-is-using-that-data-and-how" rel="noopener ugc nofollow" target="_blank">海量数据</a>。组织数据的方法有很多，最佳设计必然会因具体情况而异。然而，我们选择设计的过程是相对一致的:</p><p id="b885" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">首先，我们问:</p><ul class=""><li id="b503" class="lm ln in kk b kl lh kp li kt lo kx lp lb lq lf lr ls lt lu bi translated">对数据有什么要求？</li><li id="f390" class="lm ln in kk b kl lv kp lw kt lx kx ly lb lz lf lr ls lt lu bi translated">什么需要传递给服务器？</li></ul><p id="7968" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">然后，我们与固件架构师密切合作，询问如下问题:</p><ul class=""><li id="1f62" class="lm ln in kk b kl lh kp li kt lo kx lp lb lq lf lr ls lt lu bi translated">他们应该如何组织他们的数据？</li><li id="aec1" class="lm ln in kk b kl lv kp lw kt lx kx ly lb lz lf lr ls lt lu bi translated">我们需要多大的速度？(例如，如果理想的格式对于管道来说太大，我们将需要一种简化的方式来传递数据。)</li></ul><p id="25f6" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">最后，我们编写转换器，将数据转换成我们需要传递给服务器的内容。</p><p id="4017" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">一旦有人了解了他们的需求，他们就可以设计出一个甚至可以承受大量数据需求的结构。<strong class="kk io">在设计这个结构时，最重要的部分是在数据传输架构师、web架构师和有能力的固件团队之间有清晰的沟通。</strong></p><h1 id="349f" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">2.高质量的固件物有所值</h1><p id="a24b" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">虽然高质量的固件会显著提高设备的功能和可靠性，但低质量的固件会引发各种各样的问题。</p><p id="08af" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">高质量的固件是什么样子的？</p><ul class=""><li id="285d" class="lm ln in kk b kl lh kp li kt lo kx lp lb lq lf lr ls lt lu bi translated">一切都可以读/写。</li><li id="1cb1" class="lm ln in kk b kl lv kp lw kt lx kx ly lb lz lf lr ls lt lu bi translated">通知写得清晰、有效、高效。</li><li id="cfd3" class="lm ln in kk b kl lv kp lw kt lx kx ly lb lz lf lr ls lt lu bi translated">所有的安全验证都由移动应用和设备适当地处理。</li><li id="bb8e" class="lm ln in kk b kl lv kp lw kt lx kx ly lb lz lf lr ls lt lu bi translated">应用程序可以全面了解设备(这对于解决问题和错误尤为重要)。</li></ul><p id="5eff" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">如何识别低质量的固件？</p><p id="243b" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">结构混乱(通常是由于计划不周)。</p><h1 id="0de5" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">3.沟通是关键</h1><p id="dfb5" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><strong class="kk io">由于连接是物联网产品的基础，来自物联网设备的通信至关重要。</strong>出于这个原因，我们在我们的标准工具包中构建了一个消息队列，它会一直发送消息，直到收到消息。这个使用<a class="ae lg" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>构建的队列还允许我们标记优先级，以便根据需要动态地重新排序队列，并为失败的请求设置应急措施。因为沟通是如此重要，所以确保每条信息到达预期目的地是非常关键的。</p><h1 id="c0d6" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">4.认识物联网独特的安全威胁</h1><p id="baa7" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">由于物联网设备的连接性和漏洞越来越多，它们具有独特的、更高的危险。 <strong class="kk io">要消除这些漏洞，遵循行业标准的安全实践将会帮助您走得更远。</strong>这三项实践尤其重要:</p><h2 id="ec89" class="ma jl in bd jm mb mc dn jq md me dp ju kt mf mg jy kx mh mi kc lb mj mk kg ml bi translated">1.在后端和传递数据时都要加密数据。</h2><p id="0783" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">有一些<a class="ae lg" href="https://blog.syncsort.com/2018/09/data-availability/data-encryption-101-guide-best-practices/" rel="noopener ugc nofollow" target="_blank">数据加密的最佳实践</a>…但是大多数人并没有使用它们。然而，如果使用得当，黑客在无法完全访问您的系统的情况下，几乎不可能解密您的数据。</p><h2 id="a619" class="ma jl in bd jm mb mc dn jq md me dp ju kt mf mg jy kx mh mi kc lb mj mk kg ml bi translated">2.使用令牌进行身份验证。</h2><p id="b22c" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在Tempest House，我们存储加密令牌，以确保我们的前端与我们的后端进行正确的身份验证。就我个人而言，我喜欢Ionic Identity Vault，因为它可以防止黑客从我们的移动设备上获取令牌。虽然这种安全措施会额外增加一些成本，但在避免违规方面却是无价的。</p><h2 id="d831" class="ma jl in bd jm mb mc dn jq md me dp ju kt mf mg jy kx mh mi kc lb mj mk kg ml bi translated">3.与一家公司合作测试你的安全性。</h2><p id="c3a8" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">归根结底，我们的安全专家无法独自向客户提供我们推荐的每一项服务。我们为客户构建安全软件，但我们也建议我们的合作公司之一<a class="ae lg" href="https://www.edgescan.com/" rel="noopener ugc nofollow" target="_blank"> EdgeScan </a>提供手动和自动渗透测试。他们会检查我们所有的端点，并在发现问题时进一步探查。作为额外的好处，当设备/服务通过测试时，他们会提供安全认证。</p><h1 id="a439" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">5.考虑合规性…否则后果不堪设想。</h1><p id="2738" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">虽然合规性不仅仅是物联网相关的话题，但设备之间增加的通信确实使其变得更加复杂。</p><p id="5d0b" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">GDPR是目前最复杂的合规问题。每当我们设计一些东西的时候，我们都会走一遍GDPR需求的个人清单。这是一份很长的多页文件，但无疑值得花时间。<strong class="kk io">如果来自欧盟的任何人使用您的应用程序，而您没有遵守GDPR的规定，您可能需要承担高达贵公司全球收入4%的责任</strong> <a class="ae lg" href="https://www.csoonline.com/article/3234685/gdpr-fines-how-much-will-non-compliance-cost-you.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kk io">。</strong> </a></p><h1 id="3183" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">6.构建可扩展性。</h1><p id="3805" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">可扩展的产品是公司成功的关键。这对物联网设备来说更加重要，因为<a class="ae lg" href="https://www.mckinsey.com/~/media/McKinsey/Business%20Functions/McKinsey%20Digital/Our%20Insights/The%20Internet%20of%20Things%20The%20value%20of%20digitizing%20the%20physical%20world/The-Internet-of-things-Mapping-the-value-beyond-the-hype.ashx" rel="noopener ugc nofollow" target="_blank">它们的大部分价值来自联网。</a></p><p id="78b4" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">对于可扩展的后端，我们经常使用我们内部开发的<a class="ae lg" href="https://www.tempest.house/tempest-tools/" rel="noopener ugc nofollow" target="_blank"> Tempest工具、</a>。它有许多内置功能，可以快速构建后端。</p><p id="0358" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">对于一些高负载项目，我们喜欢将Tempest工具与已经扩展的后端结合起来，如<a class="ae lg" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express </a>或<a class="ae lg" href="https://lumen.laravel.com/" rel="noopener ugc nofollow" target="_blank"> Lumen。</a>我们确定哪些请求提供大量负载，并使用带有<a class="ae lg" href="https://en.wikipedia.org/wiki/Thin_client" rel="noopener ugc nofollow" target="_blank">瘦端点</a>的<a class="ae lg" href="https://en.wikipedia.org/wiki/Microservices" rel="noopener ugc nofollow" target="_blank">微服务架构</a>来平衡负载。</p><p id="32c9" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">除了以上选项，我们还有开发人员可以用所有流行的编码语言和框架创建后端。我们很清楚使用每一种工具的利弊，所以我们总是会为这项工作推荐最好的工具集。</p><h1 id="17aa" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">7.考虑应用程序的混合方法</h1><p id="dd78" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在构建应用程序时，我们更喜欢混合方法(即在应用程序中运行JavaScript的虚拟浏览器)。由于JavaScript开发人员很多，这种方法允许简单且廉价的开发。它还使每个开发人员的工作可移植，因为相同的代码可以在Android、iOS和web上工作，只需很少的更改。</p><p id="cbf1" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">这种混合方法确实有其缺点。一些活动——尤其是处理器密集型的活动——在虚拟浏览器中运行太慢。对于这些处理器密集型的情况，我们使用插件架构师来编写本地代码。这是一个大多数公司都不熟悉的技巧，但它允许我们优化电池和CPU的使用。</p><h1 id="e8aa" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">示例架构</h1><p id="ea15" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">下面是Tempest House通常如何使用混合应用来设计物联网产品:</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mm"><img src="../Images/2c29319ea4377881478928868f38e04d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u_DqeHsqCqpVNlB5.jpeg"/></div></div></figure><p id="18dc" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">A.)我们在一个移动应用程序中运行一个虚拟浏览器，该应用程序使用<a class="ae lg" href="https://en.wikipedia.org/wiki/Bluetooth_Low_Energy" rel="noopener ugc nofollow" target="_blank">蓝牙低能耗</a>与物联网设备来回连接，使用一个在移动设备上本地运行的插件。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/9e6e710dd43738c91c414bd7f076fba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/0*BrCp0HSMUmgA7Hl-.png"/></div></figure><p id="bc77" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">B.)在设备与我们的服务器通信之后，我们的负载平衡器找到合适的节点来处理它。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/533a48a4943a876d62e2ce4922055800.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/0*GT41tY-UXQoHdfm9.png"/></div></figure><p id="b1d3" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">C.)该节点通过HTTP或实时消息传递传递响应。(我们喜欢使用<a class="ae lg" href="https://www.pubnub.com/" rel="noopener ugc nofollow" target="_blank"> Pubnub </a>，因为它易于设置，节省时间，并且工作可靠，开发成本低)。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi na"><img src="../Images/eadb32e7d25ff77a15f0bde5b0cf822f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_f2fy6UOJ3fRsK91.png"/></div></div></figure><p id="807c" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">D.)后端节点还与缓存和数据库(SQL或NoSQL)通信。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi nb"><img src="../Images/96460cedecd312713eadf005fc109929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*l4qswaWf9RANVsG9.png"/></div></div></figure><p id="49f5" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">E.)此外，如果我们需要向移动设备发送推送通知，我们会通过苹果/安卓消息服务发送。</p><figure class="mn mo mp mq gt mr gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/579b1b6dbdc8685e1b93b205fd36fe0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/0*ePJOCgw-3uU1lyqv.png"/></div></figure><h1 id="6de1" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">前进</h1><p id="6b31" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">虽然这些提示和例子是我们可以在这里轻松分享的，但它远不是我们所知道的一切。构建物联网产品是一项复杂的工作。</p><p id="c524" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">如果你喜欢IOT，请联系<a class="ae lg" href="https://www.tempest.house" rel="noopener ugc nofollow" target="_blank">风暴屋</a>的专家！</p><p id="c6d0" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi">‍</p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="9ce6" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated"><em class="nk">原载于</em><a class="ae lg" href="https://www.tempest.house/blog-posts/how-to-architect-iot-based-apps" rel="noopener ugc nofollow" target="_blank"><em class="nk">https://www . tempest . house</em></a><em class="nk">。</em></p></div></div>    
</body>
</html>