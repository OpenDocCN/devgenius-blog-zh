<html>
<head>
<title>Learning Moments Creating a React Calendar Component: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习时刻创建React日历组件:第2部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-a-react-calendar-component-part-2-8992af1426fb?source=collection_archive---------7-----------------------#2020-07-08">https://blog.devgenius.io/creating-a-react-calendar-component-part-2-8992af1426fb?source=collection_archive---------7-----------------------#2020-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f8af53e095c263a9d5662b9d66281773.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8xUY5Fyxn1MMc6kf"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@flowforfrank?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">费伦茨·阿尔马西</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="6db7" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在web开发中寻找一个新的框架可能会令人望而生畏。这个行业的技术发展很快，学习新技能是必要的。谢天谢地，新技能并不意味着我们每次开始一个新项目都需要学习一个新的框架。深入一个现有的领域，甚至过一段时间后重新审视它，以跟上新的变化也同样重要。</p><p id="b634" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在本系列的第一部分<a class="ae kc" href="https://medium.com/@elbert.bae/learning-moments-creating-a-react-calendar-component-part-1-e7a95a3f5b1" rel="noopener">中，我们探索了创建日期并在React日历组件上显示的逻辑。现在，我们将使用我们在第1部分中创建的函数<code class="fe li lj lk ll b">getDatesInMonthDisplay</code>深入React本身以及日历组件在JSX世界中是如何形成的。如果你不熟悉我们是如何创建这个函数的，并且想知道的话，请查看系列文章</a>的第一部分<a class="ae kc" href="https://medium.com/@elbert.bae/learning-moments-creating-a-react-calendar-component-part-1-e7a95a3f5b1" rel="noopener">。</a></p><p id="4ff4" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在我们开始之前，我不会深入探究React是如何工作的，假设你，我的读者，理解React渲染引擎的基本概念，以及它是如何被<code class="fe li lj lk ll b">state</code>和<code class="fe li lj lk ll b">props</code>控制的。如果您不熟悉React，我建议您创建一个简单的项目，通过他们的<a class="ae kc" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">官方入门页面</a>来理解基本概念。否则，请继续阅读！</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lm"><img src="../Images/646be737e353469fb24c999d0a828126.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*SRfQZcG9eFTBPHDHT44_cA.png"/></div></div></figure><p id="24a9" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这是完整的React组件，今天，我们将把它分成4个部分。</p><ol class=""><li id="72ab" class="lr ls iq km b kn ko kr ks kv lt kz lu ld lv lh lw lx ly lz bi translated"><em class="ma">日历标题组件</em></li><li id="99b5" class="lr ls iq km b kn mb kr mc kv md kz me ld mf lh lw lx ly lz bi translated"><em class="ma">工作日指示器组件</em></li><li id="eaba" class="lr ls iq km b kn mb kr mc kv md kz me ld mf lh lw lx ly lz bi translated"><em class="ma">日期指示器组件</em></li><li id="5dd4" class="lr ls iq km b kn mb kr mc kv md kz me ld mf lh lw lx ly lz bi translated"><em class="ma">月份指示器组件</em></li></ol><p id="172d" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在每一部分中，我们将花时间讨论状态管理，并讨论其背后的原因</p></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="5776" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="km ir">第1部分:日历标题</strong></p><p id="18a2" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">React最常用于单页应用程序，如果编码正确，它可以非常高效地在数据变化时重新呈现web或应用程序的各个部分。这是通过一个叫做<code class="fe li lj lk ll b">state</code>的东西来完成的，代码通过它来寻找我们想要跟踪的已定义状态的数据变化。</p><p id="6eaa" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">因为日历组件希望一次显示一个月，所以让它显示用户选择的日期的月份。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="4a97" class="mk ml iq ll b gy mm mn l mo mp">import React, { useState } from 'react';<br/>import moment from 'moment'<br/>import './bae-calendar.scss';</span><span id="179e" class="mk ml iq ll b gy mq mn l mo mp">const BaeCalendar = () =&gt; {<br/>  const [selectDate, setSelectDate] = useState(moment().toDate());</span><span id="9e50" class="mk ml iq ll b gy mq mn l mo mp">  return (<br/>    &lt;div className="bae-calendar-container"&gt;<br/>      Hello World<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="296a" class="mk ml iq ll b gy mq mn l mo mp">export default BaeCalendar;</span></pre><p id="b051" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">使用React的<code class="fe li lj lk ll b">useState</code>钩子，我们像这样创建一个名为<code class="fe li lj lk ll b">selectDate</code>的状态，并通过使用MomentJs调用<code class="fe li lj lk ll b">moment().toDate()</code>来设置一个初始状态，以获得今天的日期对象(例如<code class="fe li lj lk ll b">2020–07–08T00:00:00.000Z</code>)。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="db18" class="mk ml iq ll b gy mm mn l mo mp">...<br/>const [selectDate, setSelectDate] = useState(moment().toDate());<br/>...</span></pre><p id="4fa1" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在我们有了一个日期对象，让我们看看日历标题。在我看来，日历有4个逻辑部分，标题是最容易开始的地方。这是完整的组件，以及如何将名为<code class="fe li lj lk ll b">CalendarHeader</code>的子组件拉入到<code class="fe li lj lk ll b">BaeCalendar</code>组件中，该组件将成为文件夹的根文件<code class="fe li lj lk ll b">index.js</code>。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="48ea" class="mk ml iq ll b gy mm mn l mo mp">import React, { useState } from 'react';<br/>import moment from 'moment'<br/>import './bae-calendar.scss';</span><span id="ad1d" class="mk ml iq ll b gy mq mn l mo mp">import CalendarHeader from './components/calendar-header';</span><span id="44ed" class="mk ml iq ll b gy mq mn l mo mp">const BaeCalendar = () =&gt; {<br/>  const [selectDate, setSelectDate] = useState(moment().toDate());</span><span id="467d" class="mk ml iq ll b gy mq mn l mo mp">  return (<br/>    &lt;div className={`bae-calendar-container ${themes[theme]}`}&gt;<br/>      &lt;CalendarHeader selectDate={selectDate}/&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="734b" class="mk ml iq ll b gy mq mn l mo mp">export default BaeCalendar;</span></pre><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/07b2a01673cfd76eb4859b550c8bcb31.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*scc4PGsUgOOTouBPzYy0og.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">这是<code class="fe li lj lk ll b">CalendarHeader</code>自己的样子！</figcaption></figure><p id="82a0" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">让我们看一下header组件文件，它利用MomentJs将date对象格式化成我们需要的格式。简单吧？MomentJs的格式化功能是顶级的，如果你想了解更多，可以查看官方文档中关于<code class="fe li lj lk ll b">MMMM do</code>和<code class="fe li lj lk ll b">dddd</code>的功能的文档。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="59e9" class="mk ml iq ll b gy mm mn l mo mp">import React from 'react';<br/>import moment from 'moment'</span><span id="cb08" class="mk ml iq ll b gy mq mn l mo mp">const CalendarHeader = ({ selectDate }) =&gt; {<br/>  return (<br/>    &lt;div className="bae-calendar-header"&gt;<br/>      &lt;div className="left-container"&gt;<br/>        &lt;h1&gt;{moment(selectDate).format('dddd')}&lt;/h1&gt;<br/>        &lt;h1&gt;{moment(selectDate).format('MMMM Do')}&lt;/h1&gt;<br/>      &lt;/div&gt;<br/>      &lt;div className="right-container"&gt;<br/>        &lt;h3&gt;{moment(selectDate).year()}&lt;/h3&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="2fb0" class="mk ml iq ll b gy mq mn l mo mp">export default CalendarHeader;</span></pre><p id="8b6e" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">您还会注意到，不知何故，我们的<code class="fe li lj lk ll b">CalendarHeader</code>组件可以访问我们在主<code class="fe li lj lk ll b">BaeCalendar</code>父组件中创建的<code class="fe li lj lk ll b">state</code>。这是通过传入我们所谓的<code class="fe li lj lk ll b">props</code>来完成的。下面是它在主组件中通过道具时的样子:</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="fb03" class="mk ml iq ll b gy mm mn l mo mp">&lt;CalendarHeader selectDate={selectDate}/&gt;</span></pre><p id="f5d7" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在<code class="fe li lj lk ll b">CalendarHeader</code>组件中访问:</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="4bcd" class="mk ml iq ll b gy mm mn l mo mp">const CalendarHeader = ({ selectDate }) =&gt; {<br/>  ...<br/>}</span></pre><p id="03a4" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在这个组件可以访问这些数据了！道具可以是任何东西，不一定非得是严格的数据，所以要有创意。如果你仍然不确定<code class="fe li lj lk ll b">props</code>如何工作，查看React的<a class="ae kc" href="https://reactjs.org/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">官方入门页面</a>并创建一个小项目来玩。</p><p id="68e1" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在..这是一个很好的开始，但是我们还有可以改进的地方。我们将在整个日历组件中进行大量的格式化，重复的代码是不好的。因此，让我们花点时间创建一个名为<code class="fe li lj lk ll b">moment-utils.js</code>的实用程序文件，它将为我们处理格式化。下面是我们最终将在组件中使用的各种格式，我们将继续使用这些格式。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="9d71" class="mk ml iq ll b gy mm mn l mo mp">import moment from 'moment';</span><span id="9963" class="mk ml iq ll b gy mq mn l mo mp">export const getSpecificDate = (month, dayOfMonth, year) =&gt; {<br/>  return moment(`${month}-${dayOfMonth}-${year}`, 'MM-DD-YYYY').toDate();<br/>};</span><span id="3088" class="mk ml iq ll b gy mq mn l mo mp">export const getDayOfMonth = (date) =&gt; moment(date).date();</span><span id="8ea5" class="mk ml iq ll b gy mq mn l mo mp">export const getMonth = (date) =&gt; moment(date).month();</span><span id="bd8a" class="mk ml iq ll b gy mq mn l mo mp">export const getYear = (date) =&gt; moment(date).year();</span><span id="6f31" class="mk ml iq ll b gy mq mn l mo mp">export const getToday = () =&gt; moment().toDate();</span><span id="bff0" class="mk ml iq ll b gy mq mn l mo mp">export const getReadableWeekday = (date) =&gt; moment(date).format('dddd');</span><span id="d8a1" class="mk ml iq ll b gy mq mn l mo mp">export const getReadableMonthDate = (date) =&gt; moment(date).format('MMMM Do');</span><span id="eb2e" class="mk ml iq ll b gy mq mn l mo mp">export const getMonthDayYear = (date) =&gt; moment(date).format('MM-DD-YYYY');</span></pre><p id="d750" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">所以我们的<code class="fe li lj lk ll b">CalendarHeader</code>现在看起来像这样。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="2926" class="mk ml iq ll b gy mm mn l mo mp">import React from 'react';<br/>import {<br/>  getReadableMonthDate,<br/>  getReadableWeekday,<br/>  getYear,<br/>} from '../utils/moment-utils';</span><span id="e0af" class="mk ml iq ll b gy mq mn l mo mp">const CalendarHeader = ({ selectDate }) =&gt; {<br/>  return (<br/>    &lt;div className="bae-calendar-header"&gt;<br/>      &lt;div className="left-container"&gt;<br/>        &lt;h1&gt;{getReadableWeekday(selectDate)}&lt;/h1&gt;<br/>        &lt;h1&gt;{getReadableMonthDate(selectDate)}&lt;/h1&gt;<br/>      &lt;/div&gt;<br/>      &lt;div className="right-container"&gt;<br/>        &lt;h3&gt;{getYear(selectDate)}&lt;/h3&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="47b5" class="mk ml iq ll b gy mq mn l mo mp">export default CalendarHeader;</span></pre></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="25cc" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="km ir">第2部分:工作日指示器组件</strong></p><p id="dabf" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在，我们要处理的下一部分是工作日指示器，它显示了我们组件中的[周日—周六]表示。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="3b50" class="mk ml iq ll b gy mm mn l mo mp">import React, { useState } from 'react';<br/>import { getToday } from './utils/moment-utils';<br/>import './bae-calendar.scss';</span><span id="4020" class="mk ml iq ll b gy mq mn l mo mp">import CalendarHeader from './components/calendar-header';<br/>import WeekdayIndicator from './components/weekday-indicator';</span><span id="269d" class="mk ml iq ll b gy mq mn l mo mp">const BaeCalendar = () =&gt; {<br/>  const [selectDate, setSelectDate] = useState(moment().toDate());<br/>  return (<br/>    &lt;div className={`bae-calendar-container ${themes[theme]}`}&gt;<br/>      &lt;CalendarHeader selectDate={selectDate}/&gt;<br/>      &lt;WeekdayIndicator /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};<br/>export default BaeCalendar;</span></pre><p id="adde" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><code class="fe li lj lk ll b">WeekdayIndicator</code>很简单。对于所有的意图和目的，我们实际上不需要传递任何状态或道具给它。事实上，它的唯一职责就是显示一周中的每一天。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="9505" class="mk ml iq ll b gy mm mn l mo mp">import React from 'react';</span><span id="e742" class="mk ml iq ll b gy mq mn l mo mp">const WeekdayIndicator = () =&gt; {<br/>  return (<br/>    &lt;div className="bae-weekday-indicators"&gt;<br/>      &lt;div className="weekday-indicator-icon"&gt;<br/>        Sun<br/>      &lt;/div&gt;<br/>      &lt;div className="weekday-indicator-icon"&gt;<br/>        Mon<br/>      &lt;/div&gt;<br/>      &lt;div className="weekday-indicator-icon"&gt;<br/>        Tue<br/>      &lt;/div&gt;<br/>      &lt;div className="weekday-indicator-icon"&gt;<br/>        Wed<br/>      &lt;/div&gt;<br/>      &lt;div className="weekday-indicator-icon"&gt;<br/>        Thu<br/>      &lt;/div&gt;<br/>      &lt;div className="weekday-indicator-icon"&gt;<br/>        Fri<br/>      &lt;/div&gt;<br/>      &lt;div className="weekday-indicator-icon"&gt;<br/>        Sat<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;;<br/>  )<br/>};</span><span id="5f72" class="mk ml iq ll b gy mq mn l mo mp">export default WeekdayIndicator;</span></pre><p id="5aa3" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">从技术上讲，这是可行的，但是要把它打出来是多么的痛苦啊！让我们在“反应方式”中重新做一遍。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="58f8" class="mk ml iq ll b gy mm mn l mo mp">import React from 'react';</span><span id="4465" class="mk ml iq ll b gy mq mn l mo mp">const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];</span><span id="d5cc" class="mk ml iq ll b gy mq mn l mo mp">const WeekdayIndicator = () =&gt; {<br/>  const weekdayIcons = weekdays.map((day, key) =&gt; {<br/>    return (<br/>      &lt;div className="weekday-indicator-icon" key={key}&gt;<br/>        {day}<br/>      &lt;/div&gt;<br/>    );<br/>  });<br/>  return &lt;div className="bae-weekday-indicators"&gt;{weekdayIcons}&lt;/div&gt;;<br/>};</span><span id="8f0a" class="mk ml iq ll b gy mq mn l mo mp">export default WeekdayIndicator;</span></pre><p id="652e" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">首先，通过创建一个工作日数组，我们可以利用JavaScript的<code class="fe li lj lk ll b">.map</code>迭代器方法来创建React JSX代码。因为<code class="fe li lj lk ll b">.map</code>返回一个新数组，这个新数组被赋给变量<code class="fe li lj lk ll b">weekdayIcons</code>，变量<code class="fe li lj lk ll b">weekdayIcons</code>每次迭代返回如下…</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="89a6" class="mk ml iq ll b gy mm mn l mo mp">&lt;div className="weekday-indicator-icon" key={key}&gt;<br/>  {day}<br/>&lt;/div&gt;</span></pre><p id="9bd3" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">你会注意到这里的一些事情。为什么每个元素都有一个<code class="fe li lj lk ll b">key</code>道具传入其中，而<code class="fe li lj lk ll b">{...}</code>在做什么？</p><p id="00d1" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">当使用循环创建多个元素时，React希望您传递一个包含唯一值的<code class="fe li lj lk ll b">key</code>属性。否则，它会抱怨一个警告，在我们的网络控制台上看到这个警告总是很烦人。至于花括号，React自动假设放入其中的任何数据都可以是变量。当然，您可以传入一个字符串值，但是这违背了它的用途。</p><p id="0094" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这允许我们将<code class="fe li lj lk ll b">weekdayIcons</code>传递到包装的<code class="fe li lj lk ll b">div</code>元素中，以获得与像这样单独输入每个元素相同的结果。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="e8be" class="mk ml iq ll b gy mm mn l mo mp">...<br/>return &lt;div className="bae-weekday-indicators"&gt;{weekdayIcons}&lt;/div&gt;<br/>...</span></pre><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/367e1d00aeb931ecd5efbef7e3ebca86.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*ae_dfJ_d92lV5hfkJrVIcA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">这就是我们现在所处的位置！</figcaption></figure></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="6463" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="km ir">第三节:日期指示器</strong></p><p id="385a" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">谢天谢地，在之前的文章中(<a class="ae kc" href="https://medium.com/@elbert.bae/learning-moments-creating-a-react-calendar-component-part-1-e7a95a3f5b1" rel="noopener">日历日期显示逻辑</a>)，我们完成了创建日期指示器的大部分工作。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="6071" class="mk ml iq ll b gy mm mn l mo mp">import React, { useState } from 'react';<br/>import { getToday } from './utils/moment-utils';<br/>import './bae-calendar.scss';</span><span id="e7c1" class="mk ml iq ll b gy mq mn l mo mp">import CalendarHeader from './components/calendar-header';<br/>import WeekdayIndicator from './components/weekday-indicator';<br/>import DateIndicator from './components/date-indicator';</span><span id="2a33" class="mk ml iq ll b gy mq mn l mo mp">const BaeCalendar = () =&gt; {<br/>  const [selectDate, setSelectDate] = useState(moment().toDate());<br/>  return (<br/>    &lt;div className={`bae-calendar-container ${themes[theme]}`}&gt;<br/>      &lt;CalendarHeader selectDate={selectDate}/&gt;<br/>      &lt;WeekdayIndicator /&gt;<br/>      &lt;DateIndicator<br/>        selectDate={selectDate}<br/>        setSelectDate={setSelectDate}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};<br/>export default BaeCalendar;</span></pre><p id="6a02" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">你会注意到我们将两个<code class="fe li lj lk ll b">props</code>传递给了<code class="fe li lj lk ll b">DateIndicator</code>组件，但是对于本系列的这一部分，忽略第二个叫做<code class="fe li lj lk ll b">setSelectDate </code>的组件，专注于我们将如何使用<code class="fe li lj lk ll b">selectDate</code>。我们来看看吧！</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="012b" class="mk ml iq ll b gy mm mn l mo mp">import React from 'react';<br/>import {<br/>  getDayOfMonth,<br/>  getMonthDayYear,<br/>  getMonth,<br/>  getYear,<br/>} from '../utils/moment-utils';<br/>import { getDatesInMonthDisplay } from '../utils/date-utils';</span><span id="cda1" class="mk ml iq ll b gy mq mn l mo mp">const DateIndicator = ({ selectDate, setSelectDate }) =&gt; {<br/>  const datesInMonth = getDatesInMonthDisplay(<br/>    getMonth(selectDate) + 1,<br/>    getYear(selectDate)<br/>  );</span><span id="9bbb" class="mk ml iq ll b gy mq mn l mo mp">  const monthDates = datesInMonth.map((i, key) =&gt; {<br/>    return (<br/>      &lt;div<br/>        className="date-icon"}<br/>        data-active-month={i.currentMonth}<br/>        data-date={i.date.toString()}<br/>        key={key}<br/>        onClick={changeDate}<br/>      &gt;<br/>        {getDayOfMonth(i.date)}<br/>      &lt;/div&gt;<br/>    );<br/>  });</span><span id="0e39" class="mk ml iq ll b gy mq mn l mo mp">return &lt;div className="bae-date-indicator"&gt;{monthDates}&lt;/div&gt;;<br/>};</span><span id="e8a1" class="mk ml iq ll b gy mq mn l mo mp">export default DateIndicator;</span></pre><p id="491b" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">通过利用MomentJs和辅助函数<code class="fe li lj lk ll b">getMonth</code>和<code class="fe li lj lk ll b">getYear</code>，我们可以使用<code class="fe li lj lk ll b">selectDate</code>道具获得一个具有属性<code class="fe li lj lk ll b">date</code>和<code class="fe li lj lk ll b">currentMonth</code>的对象数组！因此无论<code class="fe li lj lk ll b">selectDate</code>代表哪个日期，<code class="fe li lj lk ll b">DateIndicator</code>都可以使用<code class="fe li lj lk ll b">getDatesInMonthDisplay</code>来提取任何月份和年份的每个日期。</p><p id="8112" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">首先，我们之前已经在<code class="fe li lj lk ll b">getDatesInMonthDisplay</code>函数中完成了确定一个月中需要显示多少个日期的逻辑，难道你不高兴吗？</p><p id="f11d" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">类似于我们如何在<code class="fe li lj lk ll b">WeekIndicator</code>组件中创建一周中的每一天，我们在这里也使用了<code class="fe li lj lk ll b">.map</code>迭代器。理所当然，因为如果我们不得不把这个打42次…那么让我先去拿些啤酒。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="49fa" class="mk ml iq ll b gy mm mn l mo mp">const monthDates = datesInMonth.map((i, key) =&gt; {<br/>  return (<br/>    &lt;div<br/>      className="date-icon"<br/>      data-active-month={i.currentMonth}<br/>      data-date={i.date.toString()}<br/>      key={key}<br/>    &gt;<br/>      {getDayOfMonth(i.date)}<br/>    &lt;/div&gt;<br/> );<br/>});</span></pre><p id="c910" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">让我们来分析一下我们是如何利用数组中的每一项的，数组中的每一项都代表一个具有属性<code class="fe li lj lk ll b">date</code>(日期对象)和<code class="fe li lj lk ll b">currentMonth</code>(布尔型)的对象。</p><p id="56ef" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">首先，<code class="fe li lj lk ll b">div</code>元素有一个使用<code class="fe li lj lk ll b">getDayOfMonth(i.date)</code>的内部内容，它利用<code class="fe li lj lk ll b">moment(<em class="ma">date</em>).date()</code>返回一个月中的第几天。如果我们没有这样做，只是简单的通过了<code class="fe li lj lk ll b">i.date.toString()</code>(。toString()，因为我们不能将日期对象传入HTML)…好吧，这里的混乱会让任何UX/UI设计师对你尖叫。</p><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/036184de96f669e411321d38cc09b9c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*niEZAJXxbi0QD55pWd0a2A.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">恶…</figcaption></figure><p id="f41c" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">然而，这个日期对象非常有用，即使在组件的UI上看起来并不友好，这就是为什么我们将它作为字符串传递到名为<code class="fe li lj lk ll b">data-date</code>的数据属性中。以下是该元素在web控制台中的外观。</p><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/b6d5fa0d3c61e50e9f2aaba877c71c57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PvZGIVjPpKq3FevHTXmaew.png"/></div></div></figure><p id="7b35" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">只需使用普通的Javascript，我们就可以访问特定元素的日期对象，稍后我们会像这样使用它。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="0366" class="mk ml iq ll b gy mm mn l mo mp">document.querySelector('.selected[data-date]').getAttribute('data-date')<br/>// Fri Jul 10 2020 00:00:00 GMT-0700 (Pacific Daylight Time)</span></pre><p id="9b07" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">最后，<code class="fe li lj lk ll b">data-active-month={i.currentMonth}</code>为数据属性提供了一个<code class="fe li lj lk ll b">"true"</code>或<code class="fe li lj lk ll b">"false"</code>。你能猜出它是用来做什么的吗？如果您不确定，请务必继续阅读本系列的第三部分，在那里我将进一步讨论这个问题。</p><p id="4808" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">考虑到我们现在所处的位置，我们有足够的东西让我们的组件具有交互性。正如您在一些照片中看到的，有一个圆圈突出显示了用户选择的日期。让我们看看如何使用名为<code class="fe li lj lk ll b">setSelectDate</code>的<code class="fe li lj lk ll b">useState</code> React钩子。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="c544" class="mk ml iq ll b gy mm mn l mo mp">import React from 'react';<br/>import {<br/>  getDayOfMonth,<br/>  getMonthDayYear,<br/>  getMonth,<br/>  getYear,<br/>} from '../utils/moment-utils';<br/>import { getDatesInMonthDisplay } from '../utils/date-utils';</span><span id="cfdd" class="mk ml iq ll b gy mq mn l mo mp">const DateIndicator = ({ activeDates, selectDate, setSelectDate }) =&gt; {</span><span id="350b" class="mk ml iq ll b gy mq mn l mo mp">  // EVENT HANDLING CALLBACK<br/>  const changeDate = (e) =&gt; {<br/>    setSelectDate(e.target.getAttribute('data-date'));<br/>  };</span><span id="4506" class="mk ml iq ll b gy mq mn l mo mp">  const datesInMonth = getDatesInMonthDisplay(<br/>    getMonth(selectDate) + 1,<br/>    getYear(selectDate)<br/>  );</span><span id="c628" class="mk ml iq ll b gy mq mn l mo mp">  const monthDates = datesInMonth.map((i, key) =&gt; {<br/>    const selected =<br/>      getMonthDayYear(selectDate) === getMonthDayYear(i.date) ? 'selected' : '';<br/>    const active =<br/>      activeDates &amp;&amp; activeDates[getMonthDayYear(i.date)] ? 'active' : '';</span><span id="3ecc" class="mk ml iq ll b gy mq mn l mo mp">    return (<br/>      &lt;div<br/>        className={`date-icon ${selected} ${active}`}<br/>        data-active-month={i.currentMonth}<br/>        data-date={i.date.toString()}<br/>        key={key}</span><span id="2003" class="mk ml iq ll b gy mq mn l mo mp">        // EVENT HANDLER<br/>        onClick={changeDate}<br/>      &gt;<br/>        {getDayOfMonth(i.date)}<br/>      &lt;/div&gt;<br/>    );<br/>  });</span><span id="25f3" class="mk ml iq ll b gy mq mn l mo mp">return &lt;div className="bae-date-indicator"&gt;{monthDates}&lt;/div&gt;;<br/>};</span><span id="bf71" class="mk ml iq ll b gy mq mn l mo mp">export default DateIndicator;</span></pre><p id="6493" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">看一下上面的代码，找到<code class="fe li lj lk ll b">setSelectDate</code>，你会注意到它是在一个叫做<code class="fe li lj lk ll b">changeDate</code>的函数中使用的。Javascript本质上是一种浏览器语言，事件处理是它的专长。如果您不熟悉Javascript中的事件，请阅读<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/Events" rel="noopener ugc nofollow" target="_blank"> MDN </a>中的相关内容，它是浏览器语言的支柱。</p><p id="507b" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">根据使用<code class="fe li lj lk ll b">changeDate</code>的地方，您会注意到每个<code class="fe li lj lk ll b">date-icon</code>元素都有一个名为<code class="fe li lj lk ll b">onClick</code>的<code class="fe li lj lk ll b">prop</code>，它作为回调函数传入<code class="fe li lj lk ll b">changeDate</code>。这意味着当任何一个<code class="fe li lj lk ll b">date-icon</code>元素被点击时，都会触发<code class="fe li lj lk ll b">setSelectDate</code>的功能设置。它作为参数传递给<code class="fe li lj lk ll b">setSelectDate</code>的值利用了我在上面使用数据属性<code class="fe li lj lk ll b">data-date</code>展示的内容。</p><p id="2e5f" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">下面的代码响应由<code class="fe li lj lk ll b">e</code>表示的点击事件。通过访问目标和<code class="fe li lj lk ll b">data-date</code>属性，我们可以获取我们想要选择的新日期，并更改名为<code class="fe li lj lk ll b">selectDate</code>的<code class="fe li lj lk ll b">state</code>。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="2aba" class="mk ml iq ll b gy mm mn l mo mp">(e) =&gt; e.target.getAttribute('data-date')</span></pre><p id="88f6" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在，您可以将功能<code class="fe li lj lk ll b">changeDate</code>更改为以下内容，以查看控制台登录到web控制台的新选定日期，但由于您尚未应用任何样式，因此您不会看到图标的变化。然而，由于<code class="fe li lj lk ll b">state</code>仍在变化，您应该看到<code class="fe li lj lk ll b">CalendarHeader</code>组件的数据更新，因为它利用状态<code class="fe li lj lk ll b">selectDate</code>重新渲染任何组件！</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="a6e2" class="mk ml iq ll b gy mm mn l mo mp">const changeDate = (e) =&gt; {<br/>  console.log(e.target.getAttribute('data-date');<br/>  setSelectDate(e.target.getAttribute('data-date'));<br/>}</span></pre></div><div class="ab cl kd ke hu kf" role="separator"><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki kj"/><span class="kg bw bk kh ki"/></div><div class="ij ik il im in"><p id="e9ba" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><strong class="km ir">差不多了…第4节:月指标</strong></p><p id="b501" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">到目前为止，您应该已经有了一个正常工作的日历组件，它可以用新选择的日期更改<code class="fe li lj lk ll b">CalendarHeader</code>数据，甚至可以通过单击一个溢出日期来更改月份的显示。让我们通过添加<code class="fe li lj lk ll b">MonthIndicator</code>组件来结束本系列的第2部分！</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="1b39" class="mk ml iq ll b gy mm mn l mo mp">import React, { useState } from 'react';<br/>import { getToday } from './utils/moment-utils';<br/>import './bae-calendar.scss';<br/>import CalendarHeader from './components/calendar-header';<br/>import WeekdayIndicator from './components/weekday-indicator';<br/>import DateIndicator from './components/date-indicator';<br/>import MonthIndicator from './components/month-indicator';</span><span id="e705" class="mk ml iq ll b gy mq mn l mo mp">const BaeCalendar = () =&gt; {<br/>  const [selectDate, setSelectDate] = useState(moment().toDate());<br/>  return (<br/>    &lt;div className={`bae-calendar-container ${themes[theme]}`}&gt;<br/>      &lt;CalendarHeader selectDate={selectDate}/&gt;<br/>      &lt;WeekdayIndicator /&gt;<br/>      &lt;DateIndicator<br/>        selectDate={selectDate}<br/>        setSelectDate={setSelectDate}<br/>      /&gt;<br/>      &lt;MonthIndicator <br/>        selectDate={selectDate} <br/>        setSelectDate={setSelectDate}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};<br/>export default BaeCalendar;</span></pre><p id="e59e" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">最后一个子组件，让我们看看它是如何构造的。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="db97" class="mk ml iq ll b gy mm mn l mo mp">import React from 'react';<br/>import { getMonth } from '../utils/moment-utils';<br/>import { getMonthSet } from '../utils/date-utils';<br/>import './month-indicator.scss';</span><span id="3c9c" class="mk ml iq ll b gy mq mn l mo mp">import { monthsFull } from '../constants/dates';</span><span id="0872" class="mk ml iq ll b gy mq mn l mo mp">const MonthIndicator = ({ selectDate, setSelectDate }) =&gt; {<br/>  const changeMonth = (e) =&gt; {<br/>    setSelectDate(e.target.getAttribute('data-date'));<br/>  };</span><span id="d835" class="mk ml iq ll b gy mq mn l mo mp">  const monthSet = getMonthSet(selectDate);</span><span id="e3e7" class="mk ml iq ll b gy mq mn l mo mp">  return (<br/>    &lt;div className="bae-month-indicator"&gt;<br/>      &lt;h4 data-date={monthSet.prev} onClick={changeMonth}&gt;<br/>        {monthsFull[getMonth(monthSet.prev)]}<br/>      &lt;/h4&gt;<br/>      &lt;h3&gt;{monthsFull[getMonth(monthSet.current)]}&lt;/h3&gt;<br/>      &lt;h4 data-date={monthSet.next} onClick={changeMonth}&gt;<br/>        {monthsFull[getMonth(monthSet.next)]}<br/>      &lt;/h4&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="ecc5" class="mk ml iq ll b gy mq mn l mo mp">export default MonthIndicator;</span></pre><p id="bd3a" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我们在这里又看到了两个<code class="fe li lj lk ll b">props</code>(<code class="fe li lj lk ll b">selectDate</code>和<code class="fe li lj lk ll b">setSelectDate</code>)。现在，我们为什么需要<code class="fe li lj lk ll b">selectDate</code>已经很清楚了。使用当前选择的日期，我们可以拉出当前、上一个和下一个月。你能想到我们在根据当前月份确定前几个月和后几个月时可能会遇到的挑战吗？</p><p id="bac5" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">两个月立刻浮现在脑海中，分别是<code class="fe li lj lk ll b">December</code>和<code class="fe li lj lk ll b">January</code>。根据设计，我们希望这些元素可以点击来改变显示的月份。如果我们只取当前月份，用矩来加减月份，显然不适用于所有情况。从<code class="fe li lj lk ll b">January</code>到<code class="fe li lj lk ll b">December</code>意味着年份以相反的逻辑变化。</p><p id="5919" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">所以…让我们创建一个小助手函数来处理这个问题！</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="e78d" class="mk ml iq ll b gy mm mn l mo mp">const getMonthSet = (selectDate) =&gt; {<br/>  const month = getMonth(selectDate) + 1;<br/>  const result = {<br/>    current: selectDate,<br/>    prev: getSpecificDate(month - 1, 1, getYear(selectDate)),<br/>    next: getSpecificDate(month + 1, 1, getYear(selectDate)),<br/>  };</span><span id="05a5" class="mk ml iq ll b gy mq mn l mo mp">  if (month === 1) {<br/>    result.prev = getSpecificDate(12, 1, getYear(selectDate) - 1);<br/>  }</span><span id="a7fc" class="mk ml iq ll b gy mq mn l mo mp">  if (month === 12) {<br/>    result.next = getSpecificDate(1, 1, getYear(selectDate) + 1);<br/>  }</span><span id="5067" class="mk ml iq ll b gy mq mn l mo mp">  return result;<br/>};</span></pre><p id="e73f" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">直截了当对吗？通过获取当前所选日期的月份(+1，因为月份以索引形式返回)，我们可以使用MomentJs来构造<code class="fe li lj lk ll b">prev</code>和<code class="fe li lj lk ll b">next</code>月份的日期对象。如果一月的月份是<code class="fe li lj lk ll b">1</code>，我们将获取年份并减去1。如果12月的月份是<code class="fe li lj lk ll b">12</code>，反过来加一。</p><p id="860c" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">与<code class="fe li lj lk ll b">DateIndicator</code>组件中的<code class="fe li lj lk ll b">date-icons</code>类似，这个组件将数据属性<code class="fe li lj lk ll b">data-date</code>添加到之前和之后的月份元素中。</p><pre class="ln lo lp lq gt mg ll mh mi aw mj bi"><span id="cfad" class="mk ml iq ll b gy mm mn l mo mp">...<br/>&lt;div className="bae-month-indicator"&gt;<br/>  &lt;h4 data-date={monthSet.prev} onClick={changeMonth}&gt;<br/>    {monthsFull[getMonth(monthSet.prev)]}<br/>  &lt;/h4&gt;<br/>  &lt;h3&gt;{monthsFull[getMonth(monthSet.current)]}&lt;/h3&gt;<br/>  &lt;h4 data-date={monthSet.next} onClick={changeMonth}&gt;<br/>    {monthsFull[getMonth(monthSet.next)]}<br/>  &lt;/h4&gt;<br/>&lt;/div&gt;<br/>...</span></pre><p id="0fe9" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如您所见，这两个元素似乎也有一个调用函数<code class="fe li lj lk ll b">changeMonth</code>的<code class="fe li lj lk ll b">onClick</code>事件监听器。类似于<code class="fe li lj lk ll b">DateIndicator</code>中的回调函数，它通过调用<code class="fe li lj lk ll b">setSelectDate</code>来改变<code class="fe li lj lk ll b">selectDate</code>的状态。</p><p id="9754" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">虽然有点问题。名称<code class="fe li lj lk ll b">changeMonth</code>似乎有点误导，因为我们在技术上改变了<code class="fe li lj lk ll b">selectDate</code>状态的整个日期，而这段代码是重复的！在这样的时刻，您应该考虑对此进行重构，以减少重复的代码，并更改函数的名称，使其行为更加准确。</p><p id="f6fc" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">现在，让我们将名称改为<code class="fe li lj lk ll b">changeDate</code>并保留在组件中。在这种情况下，对于是否要重构重复的代码有很多不同的看法。然而，对于一个小项目，我更喜欢将回调函数放在使用它们的组件中。随着时间的推移，项目变得越来越大，这是应该重新考虑的事情，但现在应该没问题。</p><figure class="ln lo lp lq gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lm"><img src="../Images/45bb8c4985ec34eb58234c30db24102a.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*i1vPnrovWbg2jI8gwKJ_ug.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">带样式的组件</figcaption></figure><p id="6616" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">不错吧？现在，您应该有了一个正常工作的React日历组件，当您单击日期时，它会更改<code class="fe li lj lk ll b">CalendarHeader</code>和<code class="fe li lj lk ll b">MonthIndicator</code>中的日期。</p><p id="f763" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">如果你想看看整个组件的代码，看看G <a class="ae kc" href="https://github.com/bert-bae/bae-components/tree/master/src/components/calendar" rel="noopener ugc nofollow" target="_blank"> ithub库</a>。</p><p id="3932" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在本系列的最后一部分中，我们将向组件添加一些特性，使其对其他人可用，显示选定的日期以及样式。我们将触及的一些概念是组件的可重用性、样式表组织以及使用Flex和Grid的一般CSS/SASS技巧。</p><p id="d76e" class="pw-post-body-paragraph kk kl iq km b kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">希望你喜欢阅读，并发现它有助于激发你继续通过有趣的迷你项目发展你的技能！</p></div></div>    
</body>
</html>