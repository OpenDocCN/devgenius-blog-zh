<html>
<head>
<title>DSA | Cycle detection using Floydâ€™s algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨å¼—æ´›ä¼Šå¾·ç®—æ³•çš„å¾ªç¯æ£€æµ‹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/beginners-guide-to-cycle-detection-in-linked-list-ca610f8a7980?source=collection_archive---------8-----------------------#2022-03-12">https://blog.devgenius.io/beginners-guide-to-cycle-detection-in-linked-list-ca610f8a7980?source=collection_archive---------8-----------------------#2022-03-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="34e5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æœ¬æ–‡æ˜¯æ•°æ®ç»“æ„ä¸ç®—æ³•ç³»åˆ—çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªç³»åˆ—ä¸­ï¼Œæˆ‘å°†å°è¯•è¯¦ç»†è§£é‡Šé‡è¦è€Œæ£˜æ‰‹çš„æ•°æ®ç»“æ„å’Œç®—æ³•ä¸»é¢˜ã€‚</p><p id="91f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®ºä¸‰ä¸ªè‡­åæ˜­è‘—çš„é“¾è¡¨é—®é¢˜</p><ol class=""><li id="340d" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">å¾ªç¯æ£€æµ‹</li><li id="b6f1" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">å¦‚æœå¾ªç¯å­˜åœ¨ï¼Œåˆ™å¯»æ‰¾å¾ªç¯çš„èµ·ç‚¹</li><li id="89bc" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">å¦‚æœå¾ªç¯å­˜åœ¨ï¼Œæ±‚å¾ªç¯çš„é•¿åº¦</li></ol><p id="e256" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç”¨<a class="ae kw" href="https://en.wikipedia.org/wiki/Cycle_detection" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">å¼—æ´›ä¼Šå¾·çš„å‘¨æœŸå¯»æ‰¾ç®—æ³•</strong> </a> <strong class="jm io"> </strong>é€šä¿—æ˜“æ‡‚ã€‚</p><p id="0eca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">åœ¨æµªè´¹æˆ‘ä»¬çš„æ—¶é—´ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç›´æ¥å¼€å§‹å§ã€‚</p><figure class="ky kz la lb gt lc gh gi paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="gh gi kx"><img src="../Images/f624e005b65e878a3faaeb5704c49eac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w10_zuxm-PTNOoMsE46gVw.jpeg"/></div></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk translated">é“¾è¡¨å¾ªç¯è¡¨ç¤ºæ³•ã€‚(å›¾ç‰‡ç”±ä½œè€…æä¾›)</figcaption></figure><p id="5262" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸ºäº†ä¾¿äºç†è§£ï¼Œåœ¨æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å‚è€ƒè¿™å¼ å›¾ç‰‡ã€‚</p><h1 id="0b93" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">é—®é¢˜ 1:å‘¨æœŸæ£€æµ‹</h1><p id="cc82" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated">ç¬¬ä¸€ä¸ªé—®é¢˜å¾ˆç®€å•ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€åªå…”å­å’Œä¸€åªä¹Œé¾Ÿï¼Œå…”å­çš„é€Ÿåº¦æ˜¯ä¹Œé¾Ÿçš„ä¸¤å€ã€‚ç°åœ¨ä¸¤äººéƒ½ä»<strong class="jm io">èµ·ç‚¹</strong>å¼€å§‹æ¯”èµ›ã€‚</p><blockquote class="mu mv mw"><p id="2815" class="jk jl mx jm b jn jo jp jq jr js jt ju my jw jx jy mz ka kb kc na ke kf kg kh ig bi translated">è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ã€‚å¦‚æœèµ›é“ä¸Šæœ‰ä¸€ä¸ªå¾ªç¯ï¼Œé‚£ä¹ˆæ²¡æœ‰äººä¼šå®Œæˆæ¯”èµ›ï¼Œä»–ä»¬ä¼šç»§ç»­è·‘ä¸‹å»ï¼Œå¯¹å—ï¼Ÿå¦‚æœä»–ä»¬ç»§ç»­ä»¥ä¸åŒçš„é€Ÿåº¦å¥”è·‘ï¼Œä»–ä»¬ä¸€å®šä¼šç›¸é‡ï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ‰ä¸€ä¸ªä»¥å¯æ€œçš„å…”å­å’Œé‡å…”ä¸ºä»£ä»·çš„å¾ªç¯ğŸ˜…</p></blockquote><p id="8d46" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸ºä¸Šè¿°æƒ…å†µç¼–å†™ç®—æ³•ã€‚</p><pre class="ky kz la lb gt nb mt nc nd aw ne bi"><span id="8ad5" class="nf lo in mt b gy ng nh l ni nj">public class Solution {<br/>    public boolean detectCycle(ListNode head) {<br/>        // If the track is of 0 length or,<br/>        // if the track is of length 1,<br/>        // it obviously means there is no cycle<br/>        if (null == head ||  null == head.next) return false;<br/>        <br/>        // Slow pointer is our tortoise<br/>        ListNode slow = head;<br/>  <br/>        // Fast pointer is our rabbit<br/>        ListNode fast = head;<br/>        <br/>        // Rabbit and tortoise will keep running<br/>        // until they meet or rabbit finishes the race.<br/>        // We are only checking for rabbit as it is twice faster<br/>        while (fast != null &amp;&amp; fast.next != null) {<br/>            slow = slow.next;<br/>            fast = fast.next.next;<br/>            if (slow == fast) break;<br/>        }<br/>        <br/>        // If rabbit and tortoise are at the same position<br/>        // that means the cycle exist, otherwise it doesn't<br/>        if (slow != fast) return false;<br/>    }<br/>}</span></pre><h1 id="0a61" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">é—®é¢˜ 2:å¯»æ‰¾å¾ªç¯çš„èµ·ç‚¹</h1><p id="cdd2" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated">ä»ä¸Šä¸€ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•ç”¨å…”å­æ¥æ±‚å¾ªç¯ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¾ªç¯ï¼Œé‚£ä¹ˆä»–ä»¬ä¼šåœ¨å¾ªç¯ä¸­çš„æŸå¤„ç›¸é‡ï¼Œåœ¨ä½ç½®<strong class="jm io"> M </strong>ã€‚</p><p id="8868" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è®©æˆ‘ä»¬æŠŠæˆ‘ä»¬æ‰€çŸ¥é“çš„ä¸€åˆ‡éƒ½ç”¨æ–¹ç¨‹å¼æ¥è¡¨ç¤ºã€‚(ä¸ºä¾¿äºç†è§£ï¼Œè¯·å‚è€ƒå›¾ç‰‡)</p><pre class="ky kz la lb gt nb mt nc nd aw ne bi"><span id="a8b2" class="nf lo in mt b gy ng nh l ni nj">Length of the cycle = N</span><span id="a812" class="nf lo in mt b gy nk nh l ni nj">Tortoise distance covered = X + Y</span><span id="47e8" class="nf lo in mt b gy nk nh l ni nj">Rabbit distance covered = X + k x N + Y (Where k is the number of repetition)</span><span id="a5a4" class="nf lo in mt b gy nk nh l ni nj">Rabbit distance covered = 2 x Tortoise distance covered (As Rabbit is twice faster than Tortoise)</span><span id="ba4a" class="nf lo in mt b gy nk nh l ni nj">X + k x N + Y = 2 x (X + Y)</span><span id="a1f4" class="nf lo in mt b gy nk nh l ni nj">=&gt; X = k x N - Y</span><span id="5e4b" class="nf lo in mt b gy nk nh l ni nj">=&gt; X = (k - 1) x N + N - Y</span><span id="c6e5" class="nf lo in mt b gy nk nh l ni nj">=&gt; X = (k - 1) x N + Z  (Since N = Y + Z)</span><span id="c529" class="nf lo in mt b gy nk nh l ni nj">=&gt; Z = X % N  (% is modulo operator)</span></pre><p id="7e41" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä»ä¸Šé¢çš„ç­‰å¼ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†<code class="fe mq mr ms mt b">X = (k â€” 1)N + Z</code>æˆ–<code class="fe mq mr ms mt b">Z = X modulo N </code>ï¼Œå…¶ä¸­<code class="fe mq mr ms mt b">k</code>æ˜¯å…”å­åœ¨é‡åˆ°ä¹Œé¾Ÿä¹‹å‰é‡å¤è·‘çš„æ¬¡æ•°ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬å°†ç¬¬ä¸€åªä¹Œé¾Ÿä¿æŒåœ¨<strong class="jm io"> M </strong>å¤„ï¼Œå¹¶å°†ç¬¬äºŒåªä¹Œé¾Ÿå¸¦åˆ°<strong class="jm io">èµ·å§‹ä½ç½®</strong>å¤„ï¼Œç„¶åè®©ç¬¬ä¸€åªä¹Œé¾Ÿå’Œç¬¬äºŒåªä¹Œé¾Ÿéƒ½è·‘ï¼Œå®ƒä»¬è‚¯å®šä¼šåœ¨å¾ªç¯çš„èµ·å§‹ä½ç½®<strong class="jm io">s</strong>å¤„ç›¸é‡</p><p id="c205" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸ºä¸Šè¿°æƒ…å†µç¼–å†™ç®—æ³•ã€‚</p><pre class="ky kz la lb gt nb mt nc nd aw ne bi"><span id="f10b" class="nf lo in mt b gy ng nh l ni nj">public class Solution {<br/>    public ListNode detectCycle(ListNode head) {<br/>        // If the track is of 0 length or<br/>        // if the track is of length 1,<br/>        // it obviously means there is no cycle<br/>        if (null == head ||  null == head.next) return null;<br/>        <br/>        // Slow pointer is our tortoise<br/>        ListNode slow = head;<br/>  <br/>        // Fast pointer is our rabbit<br/>        ListNode fast = head;<br/>        <br/>        // Rabbit and tortoise will keep running<br/>        // until they meet or rabbit finishes the race.<br/>        // We are only checking for rabbit as it twice faster<br/>        while (fast != null &amp;&amp; fast.next != null) {<br/>            slow = slow.next;<br/>            fast = fast.next.next;<br/>            if (slow == fast) break;<br/>        }<br/>        <br/>        // If rabbit and tortoise are at the same position<br/>        // that means the cycle exist, otherwise it doesn't<br/>        if (slow != fast) return null;<br/>  <br/>        // This is the second tortoise pointer,<br/>        // and we put it to the starting position<br/>        Listnode slow2 = head;<br/>  <br/>        // Both tortoise will keep running until they meet<br/>        while (slow != slow2) {<br/>            slow = slow.next;<br/>            slow2 = slow2.next;<br/>        }<br/>        <br/>        // Then we can return the first or second tortoise pointer<br/>        return slow;<br/>    }<br/>}</span></pre><h1 id="8a19" class="ln lo in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">é—®é¢˜ 3:å¯»æ‰¾å‘¨æœŸçš„é•¿åº¦</h1><p id="2177" class="pw-post-body-paragraph jk jl in jm b jn ml jp jq jr mm jt ju jv mn jx jy jz mo kb kc kd mp kf kg kh ig bi translated">ä»å‰é¢ä¸¤ä¸ªé—®é¢˜æˆ‘ä»¬çŸ¥é“å¦‚ä½•æ£€æµ‹ä¸€ä¸ªå¾ªç¯ï¼Œä¹ŸçŸ¥é“å¦‚ä½•æ‰¾åˆ°å¾ªç¯çš„èµ·ç‚¹ã€‚</p><pre class="ky kz la lb gt nb mt nc nd aw ne bi"><span id="9533" class="nf lo in mt b gy ng nh l ni nj">N = Y + Z </span></pre><p id="cfaa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘ä»¬è®°å¾—å…”å­åœ¨ Mï¼Œä¸¤åªä¹Œé¾Ÿåœ¨ sã€‚</p><pre class="ky kz la lb gt nb mt nc nd aw ne bi"><span id="bc76" class="nf lo in mt b gy ng nh l ni nj">Y = distance between S -&gt; M<br/>Z = distance between M -&gt; S</span></pre><p id="d144" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ‰€ä»¥ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¬¬äºŒåªä¹Œé¾Ÿå¯ä»¥è®¡ç®—ä¸¤ä¸ªè·ç¦»ã€‚</p><ol class=""><li id="6f22" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">é¦–å…ˆï¼Œå®ƒå°†ä»ç°åœ¨çš„ä½ç½®(S)å‡ºå‘ï¼Œä¸(M)å¤„çš„å…”å­ç›¸é‡ï¼Œä»è€Œæ‰¾åˆ° yã€‚</li><li id="ad0c" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">ç„¶åå®ƒä¼šä»(M)å›åˆ°ç¬¬ä¸€åªä¹Œé¾Ÿçš„ä½ç½®(S ),åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å®ƒä¼šæ‰¾åˆ° zã€‚</li></ol><p id="f394" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸ºä¸Šè¿°æƒ…å†µç¼–å†™ç®—æ³•ã€‚</p><pre class="ky kz la lb gt nb mt nc nd aw ne bi"><span id="43f4" class="nf lo in mt b gy ng nh l ni nj">public class Solution {<br/>    public int detectCycle(ListNode head) {<br/>        // If the track is of 0 length or<br/>        // if the track is of length 1,<br/>        // it obviously means there is no cycle<br/>        if (null == head ||  null == head.next) return 0;<br/>        <br/>        // Slow pointer is our tortoise<br/>        ListNode slow = head;<br/>  <br/>        // Fast pointer is our rabbit<br/>        ListNode fast = head;<br/>        <br/>        // Rabbit and tortoise will keep running<br/>        // until they meet or rabbit finishes the race.<br/>        // We are only checking for rabbit as it twice faster<br/>        while (fast != null &amp;&amp; fast.next != null) {<br/>            slow = slow.next;<br/>            fast = fast.next.next;<br/>            if (slow == fast) break;<br/>        }<br/>        <br/>        // If rabbit and tortoise are at the same position<br/>        // that means the cycle exist, otherwise it doesn't<br/>        if (slow != fast) return 0;<br/>  <br/>        // This is the second tortoise pointer,<br/>        // and we put it to the starting position<br/>        Listnode slow2 = head;<br/>  <br/>        // Both tortoise will keep running until they meet<br/>        while (slow != slow2) {<br/>            slow = slow.next;<br/>            slow2 = slow2.next;<br/>        }<br/>  <br/>        // y and z is represeting distance Y and Z respectively<br/>        int y = 0, z = 0;<br/>  <br/>        // Second tortoise is running from point S to M<br/>        // and in that process it will find Y<br/>        while (slow2 != rabbit) {<br/>            slow2 = slow2.next;<br/>            y++;<br/>        }<br/>  <br/>        // After that seconnd tortoise will run from M to S<br/>        // and in that process it will find Z<br/>        while (slow2 != slow) {<br/>            slow2 = slow2.next;<br/>            z++;<br/>        }<br/>        <br/>        // Then we can return sum of Y + Z which will be N<br/>        return y+z;<br/>    }<br/>}</span></pre><p id="70b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•æ£€æµ‹ä¸€ä¸ªå¾ªç¯ï¼Œæ‰¾åˆ°å¾ªç¯çš„èµ·ç‚¹ï¼Œæ‰¾åˆ°å¾ªç¯çš„é•¿åº¦ã€‚</p></div></div>    
</body>
</html>