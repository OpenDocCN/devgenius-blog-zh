# 在 Typescript 中不再需要空检查

> 原文：<https://blog.devgenius.io/no-need-of-null-checks-anymore-in-typescript-226d1604eea6?source=collection_archive---------2----------------------->

![](img/1786031a92c6acf074be8fc960d1cee0.png)

在与 Angular 合作的某个时候，我们喜欢安全导航，也就是猫王操作员(？。)在角模板中。因为这有助于我们在使用对象时忘记额外的空检查，而只是使用那个操作符来为我们处理同样的事情。让我们看一个非常基本的代码片段，这个操作符是如何在角度模板中使用的。

在上面的例子中，只有当 person 对象不为 null 时，我们才使用带有 person 对象的操作符来检查名称是否存在。如果没有这个操作符，还需要检查 person 对象是否不为空。

这对于开发人员来说是一个令人兴奋的特性，因为它易于使用，并且有助于避免到处都有空检查。这个操作符已经成为许多新的流行语言的一部分，比如 Kotlin。许多人要求同样的打字稿。

虽然你可以通过下面的代码来实现。

仍然感觉不太好，就像使用猫王运营商。并且在长时间的情况下，代码变得不太可读。

因为 typescript 是 JavaScript 的超级集合，并且支持 ECMAScript 即将推出的特性。3.7 版的 Typescript 附带了以下操作符，该操作符具有一个名为可选链接的特性。

假设您想将用户名分配给一个属性。早些时候，它可能是这样的:-

但是在 Typescript v3.7 中，您可以像下面这样简单地使用它

上面的 **validateUser** 方法现在可以修改如下。

您可能会发现自己在使用 Elvis 操作符来替换大量执行无效检查的代码。

同一个操作符现在可以用于元素访问和可选调用。让我们一个一个看他们的例子。

1.  **元素访问**

假设你想访问数组的任何索引，如果数组不是未定义的，那么你现在可以直接拥有它，如下所示。

2.**随意调用**

假设您有一个接受回调函数作为参数的方法。但是这个参数是可选的，但是如果这个参数存在，那么我们想从我们的方法中调用回调函数。现在可以像下面这样做。

所以现在 callbackFunc 只有在传递给 getValue 时才会被调用，我们甚至没有执行任何空值检查。

> 但是这个操作符给了我们在访问属性或调用方法时不使用空检查的灵活性。需要正确决定在哪里不使用该运算符。

在某些情况下使用它时，我们必须非常小心。例如，假设您正在执行加法，并且您有一个方法来添加两个用户的年龄。假设您有如下代码。

假设 secondUser 的值是未定义的，firstUser 的年龄是 24 岁。elvis 操作员将不会停止加法，并且输出将为 **NaN** ，因为将有 24 和未定义的加法。

因此，当在表达式中使用时，我们需要小心避免意外的结果。但是在条件语句或属性/方法访问中，它确实有助于避免不必要的空检查。

希望您喜欢这个新的操作符，并且拥有更健壮和空安全的代码，而不需要不必要的空检查。

没有更多的错误值得称赞，如:-

> 无法读取未定义的属性名