<html>
<head>
<title>Django-Tests | Writing Tests in Django</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django-Tests |用 Django 编写测试</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/django-tests-writing-tests-in-django-dd8d061e8334?source=collection_archive---------11-----------------------#2022-05-16">https://blog.devgenius.io/django-tests-writing-tests-in-django-dd8d061e8334?source=collection_archive---------11-----------------------#2022-05-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a1df5dfee21ff041064847f6d5f7560a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mCzQJO3BEX3xzDOv"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">克里斯·里德在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="6eec" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为您的应用程序编写测试确实是一项重要的任务。这确实有助于开发人员验证他的代码。</p><p id="ba59" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这篇文章将主要关注“<strong class="kc io">在 Django </strong>中编写测试”，我们将为我们的“<strong class="kc io">博客克隆</strong>”应用程序编写测试。因此，如果有人没有浏览过之前的博客，我强烈推荐阅读之前的文章。</p><p id="b6da" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们首先了解更多关于 django 测试的知识。</p><p id="4418" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">默认情况下，Django 使用<code class="fe ky kz la lb b"><strong class="kc io">unittest</strong></code>模块来编写测试。我们将在帖子中涉及的内容是:</p><ul class=""><li id="44fa" class="lc ld in kc b kd ke kh ki kl le kp lf kt lg kx lh li lj lk bi translated">为模型编写测试</li><li id="759e" class="lc ld in kc b kd ll kh lm kl ln kp lo kt lp kx lh li lj lk bi translated">为视图编写测试</li><li id="2789" class="lc ld in kc b kd ll kh lm kl ln kp lo kt lp kx lh li lj lk bi translated">为序列化程序编写测试</li></ul><p id="7613" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，我们将对应用程序中编写的所有模块进行非常小的单元测试。</p><p id="a3c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们开始吧！！💥</p><p id="69aa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，首先我们将为我们的<code class="fe ky kz la lb b"><strong class="kc io">models</strong></code>编写测试。为此，首先打开我们的<code class="fe ky kz la lb b"><strong class="kc io">app</strong></code>即<code class="fe ky kz la lb b"><strong class="kc io">blogs</strong></code>中的<code class="fe ky kz la lb b"><strong class="kc io"><em class="lq">tests.py</em></strong></code>文件，并将下面的代码粘贴到其中。</p><figure class="lr ls lt lu gt jo"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="0b09" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们快速了解这个类。在这里，我们创建了一个名为<code class="fe ky kz la lb b"><strong class="kc io">BlogsTestModels</strong></code>的类，它将包含所有与我们的模型相关的单元测试。这个类继承了名为<code class="fe ky kz la lb b"><strong class="kc io">TestCase</strong></code>的 Django 测试类。</p><p id="0505" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这个类中，我们首先创建了一个<code class="fe ky kz la lb b"><strong class="kc io">setUp</strong></code>(名称必须相同)方法。在运行测试之前，这个<code class="fe ky kz la lb b"><strong class="kc io">setUp</strong></code>方法必须包含这个类的所有<code class="fe ky kz la lb b"><strong class="kc io">setUp</strong></code>指令。因此，这里我们使用这个方法创建我们的<code class="fe ky kz la lb b"><strong class="kc io"><em class="lq">user</em></strong></code>，并给这个用户一些足够的权限(<code class="fe ky kz la lb b"><strong class="kc io"><em class="lq">admin</em></strong></code>)。这意味着每当在这个类中运行一个测试时，这个<code class="fe ky kz la lb b"><strong class="kc io">setUp</strong></code>方法将触发并创建一个具有上述细节的<code class="fe ky kz la lb b"><strong class="kc io">admin</strong></code>用户。</p><p id="4f1a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，让我们来看另一种方法。这个方法名为<code class="fe ky kz la lb b"><strong class="kc io">test_blog_model</strong></code></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lx"><img src="../Images/bb9769047dccab8d95523ed040c40f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0wDy_SME238wwXaNk2Hv9A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><strong class="bd ly">测试 _ 博客 _ 模型</strong> <code class="fe ky kz la lb b"><strong class="bd ly"> </strong>method</code></figcaption></figure><p id="fb67" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，在这个方法中，我们首先确认<code class="fe ky kz la lb b"><strong class="kc io">test database</strong></code>是否为空，并且在我们的<code class="fe ky kz la lb b"><strong class="kc io">Blog</strong></code>模型中是否没有数据。之后，我们为<code class="fe ky kz la lb b"><strong class="kc io">Blogs</strong></code>模型创建一个数据对象，然后确认它已成功插入数据库。</p><p id="baca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的，另一个方法名是<code class="fe ky kz la lb b"><strong class="kc io">test_likes_model</strong></code></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lz"><img src="../Images/e1ae9caee113ff9f6934900457481321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eAMVWVEjpx8MzvyYFK4jEw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><code class="fe ky kz la lb b"><strong class="bd ly">test_likes_model </strong>method</code></figcaption></figure><p id="b30e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，就像以前的模型一样，我们首先在这里验证以前的数据不存在，然后为<code class="fe ky kz la lb b"><strong class="kc io">Blogs</strong></code>和<code class="fe ky kz la lb b"><strong class="kc io">Likes</strong></code>模型创建新的数据点。此外，我们还测试了这个模型的一个更重要的特性，那就是，如果我们不将博客引用传递给它，它将无法保存✔️</p><h1 id="f2b0" class="ma mb in bd ly mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw bi translated">让我们先进行这些测试。</h1><p id="f341" class="pw-post-body-paragraph ka kb in kc b kd mx kf kg kh my kj kk kl mz kn ko kp na kr ks kt nb kv kw kx ig bi translated">为了运行这些测试，请使用以下命令</p><p id="989a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b"><strong class="kc io">python manage.py test blogs.tests</strong></code></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/06cdb65b0579612d3edae3d2e93dd94a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mPRKMmMQ0CCzJeNmS01WqA.png"/></div></div></figure><p id="ae52" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">恭喜🎉，您的测试已成功通过。现在让我们也为其他模块创建测试。</p><p id="a448" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们开始为<code class="fe ky kz la lb b"><strong class="kc io">serializers</strong></code>编写测试</p><figure class="lr ls lt lu gt jo"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="81d6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，就像前面的测试类一样，我们创建了一个测试我们的<code class="fe ky kz la lb b"><strong class="kc io">serializers</strong></code>的类，并将其命名为<code class="fe ky kz la lb b"><strong class="kc io">BlogsTestSerializers</strong></code>。它也包含相同的方法是<code class="fe ky kz la lb b"><strong class="kc io">setUp</strong></code>，我们在其中创建一个管理员用户。让我们深入研究一下类方法。</p><p id="6c33" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">先来看看我们的<code class="fe ky kz la lb b"><strong class="kc io">test_about_user_serializer</strong></code>方法。</p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/d51abda4a9c493f0cf661930c857f463.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kTB2lYeg4GPluEL9_vYuSA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><strong class="bd ly">test _ about _ user _ serializer</strong>方法</figcaption></figure><p id="9537" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们现在通过传递一个<code class="fe ky kz la lb b"><strong class="kc io">User</strong></code>对象来验证我们的<code class="fe ky kz la lb b"><strong class="kc io">AboutUserSerializer</strong></code> <strong class="kc io"> </strong>，然后通过<code class="fe ky kz la lb b"><strong class="kc io">serializer</strong></code>检查所有返回的字段。然后，我们通过用户创建一个新的博客数据再次检查这一点，并通过解析<code class="fe ky kz la lb b"><strong class="kc io">serializer</strong></code>响应进行验证。</p><p id="1d62" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看我们的另一个测试方法是<code class="fe ky kz la lb b"><strong class="kc io">test_get_blog_serializer</strong></code> <strong class="kc io">。</strong></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/6f0440d6dc27aa615d6418785432ef79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ON3yv80e8jUvKhRsFYBzfA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><strong class="bd ly">test _ get _ blog _ serializer</strong>方法</figcaption></figure><p id="efb8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这次测试比我们之前的测试要长一点。在这里，我们首先创建一个博客，并用我们的<code class="fe ky kz la lb b"><strong class="kc io">GetBlogsSerializer serializer</strong></code>来验证。现在，我们创建与这个博客相关联的<code class="fe ky kz la lb b"><strong class="kc io">Likes</strong></code>，并使用我们的<code class="fe ky kz la lb b"><strong class="kc io">serializer</strong></code>来验证它。在我们的最后一个案例中，我们创建了一个新的<code class="fe ky kz la lb b"><strong class="kc io">user</strong></code> <code class="fe ky kz la lb b">(now for this test we have 2 different users)</code>，并使用我们的<code class="fe ky kz la lb b"><strong class="kc io">serializer</strong></code>简单地验证了我们之前创建的博客上的总赞数。</p><p id="a459" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看我们的其他测试方法，即<code class="fe ky kz la lb b"><strong class="kc io">test_update_blogs_serializer</strong></code> <strong class="kc io">。</strong></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/b75075f45b95c3796aa7ea68c39dc98c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*twf5j4QAfXDhHaO0pcy29A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><strong class="bd ly">测试 _ 更新 _ 博客 _ 序列化器</strong>方法</figcaption></figure><p id="0258" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，我们首先创建一个博客数据点，并使用我们的<code class="fe ky kz la lb b"><strong class="kc io">serializer GetBlogsSerializer</strong></code>获取该博客数据点。现在，我们以我们博客的一些价值观为例；这里我们是<code class="fe ky kz la lb b">updating the title of the blog</code>并使用<code class="fe ky kz la lb b"><strong class="kc io">serializer.update</strong></code>方法调用更新并验证结果。</p><p id="fa0e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看对我们的串行化器的最后一个测试是<code class="fe ky kz la lb b"><strong class="kc io">test_like_serializer</strong></code>。</p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/15a915d6f73f85bb10fabfbff95f2c4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LANPw_hR9jn4ojowysNXAA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><code class="fe ky kz la lb b"><strong class="bd ly">test_like_serializer </strong>method</code></figcaption></figure><p id="255b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们首先创建一个博客数据点，然后创建一个与我们的博客帖子相关联的 like。然后我们使用我们的<code class="fe ky kz la lb b"><strong class="kc io">LikeSerializer</strong></code>并验证结果。</p><p id="dc6b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们使用命令再次运行这些测试</p><p id="1ee2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b"><strong class="kc io">python manage.py test blogs.tests</strong></code></p><p id="0231" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您正确地遵循了上述步骤，那么在运行测试时您将不会得到任何错误。</p><p id="6cb7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，最后让我们开始为我们的<code class="fe ky kz la lb b"><strong class="kc io">views</strong></code> <strong class="kc io">编写测试。</strong></p><figure class="lr ls lt lu gt jo"><div class="bz fp l di"><div class="lv lw l"/></div></figure><p id="fb23" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，就像前面的测试类一样，我们创建了一个测试我们的<code class="fe ky kz la lb b"><strong class="kc io">views</strong></code>的类，并将其命名为<code class="fe ky kz la lb b"><strong class="kc io">BlogsTestViews</strong></code>。它还包含相同的方法<code class="fe ky kz la lb b"><strong class="kc io">setUp</strong></code>，我们在其中创建了一个管理员用户。同样，对于这个类，我们的<code class="fe ky kz la lb b"><strong class="kc io">setUp</strong></code>方法也将包含一个可以从<code class="fe ky kz la lb b"><strong class="kc io">django.tests</strong></code>导入的<code class="fe ky kz la lb b"><strong class="kc io">Client</strong></code>类的对象。让我们深入研究一下类方法。</p><p id="581a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们先来看看我们的<code class="fe ky kz la lb b"><strong class="kc io">test_get_user_information_view</strong></code>方法。</p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/0ac225e97c5c29f28b69885467df5d0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L30WguKbHWlM9dEweMsD2g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><code class="fe ky kz la lb b"><strong class="bd ly">test_get_user_information_view </strong>method</code></figcaption></figure><p id="b1b5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，我们首先<code class="fe ky kz la lb b"><strong class="kc io">authenticate</strong></code>我们的用户，因为<code class="fe ky kz la lb b">apis won’t work if the user is not authenticated</code>。接下来，我们创建了一个博客数据点，然后点击了对端点<code class="fe ky kz la lb b"><strong class="kc io">“/blogs/users”</strong></code>的<code class="fe ky kz la lb b"><strong class="kc io">GET</strong></code>请求。我们验证了从 API 得到的所有响应。现在，我们创建另一个用户并再次点击 api，我们现在获得在上一步中验证过的<code class="fe ky kz la lb b"><strong class="kc io">2</strong></code>用户的数据。</p><p id="076d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看我们的其他测试方法，即<code class="fe ky kz la lb b"><strong class="kc io">test_blog_list</strong></code> <strong class="kc io">。</strong></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lz"><img src="../Images/a8715e462a18483dc7f212caa7f905c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1nIMcSJMJede5ZldaxwgtA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><code class="fe ky kz la lb b"><strong class="bd ly">test_blog_list </strong>method</code></figcaption></figure><p id="58c8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们再次首先验证我们的用户。用户登录后，我们做的第一件事是点击<code class="fe ky kz la lb b"><strong class="kc io">GET</strong></code>请求获取所有博客，因为我们没有写任何博客，它只是返回给我们一个<code class="fe ky kz la lb b"><strong class="kc io">[]</strong></code>。现在，我们创建一个博客数据点，并再次点击 api，我们得到的数据将在后面的步骤中进行验证。</p><p id="c2fb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看我们的其他测试方法是<code class="fe ky kz la lb b"><strong class="kc io">test_blog_update</strong></code> <strong class="kc io">。</strong></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/f358b4af6695574de3710ba0057bb0ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sIcfy6oyjvIxRlS8aBvrBw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><code class="fe ky kz la lb b"><strong class="bd ly">test_blog_update </strong>method</code></figcaption></figure><p id="6841" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，在认证用户之后，我们首先创建一个与用户相关的博客文章，然后使用 api <code class="fe ky kz la lb b"><strong class="kc io">“/blogs/{blogId}”</strong></code>的<code class="fe ky kz la lb b"><strong class="kc io">PUT</strong></code>方法创建<code class="fe ky kz la lb b">update the title and content for this blog</code>，我们稍后会验证这个方法。现在，我们测试了我们代码中的一个主要的重要逻辑<code class="fe ky kz la lb b"><strong class="kc io">“Not letting any other user to update some other person’s blog”</strong></code>，因此我们为这种情况编写了测试，我们也验证了这一点。</p><p id="4e72" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看我们的其他测试方法是<code class="fe ky kz la lb b"><strong class="kc io">test_likes_created</strong></code> <strong class="kc io">。</strong></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/9eed5d5e3408d01c27530e46d97a72d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B4Bt-o8SZNP64CjiQIcJVg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><code class="fe ky kz la lb b"><strong class="bd ly">test_likes_created </strong>method</code></figcaption></figure><p id="dc25" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，在认证和创建博客文章之后的测试中，我们使用 api <code class="fe ky kz la lb b"><strong class="kc io">POST</strong></code>方法为使用<code class="fe ky kz la lb b"><strong class="kc io">“/blogs/{blogId}/like”</strong></code>的博客发送一个<code class="fe ky kz la lb b">like</code>。然后，我们检查<code class="fe ky kz la lb b">liking the same post again</code>的案例，稍后我们使用定制消息对其进行验证。</p><p id="925e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">同样，我们验证一个类似的<code class="fe ky kz la lb b"><strong class="kc io">DELETE</strong></code>请求，这意味着<code class="fe ky kz la lb b">someone who had already liked the blog wants to unlike the blog</code>。最后我们还解决了<code class="fe ky kz la lb b"><strong class="kc io">deleting an already deleted like</strong></code>的一个棘手问题。所有的回答都得到了验证。</p><p id="3cb6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看最后的测试方法是<code class="fe ky kz la lb b"><strong class="kc io">test_blog_destroy</strong></code> <strong class="kc io">。</strong></p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/487bc4354c94197a450f1b4848aa1aae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JooB9St3q9xliRynvOy42g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><code class="fe ky kz la lb b"><strong class="bd ly">test_blog_destroy </strong>method</code></figcaption></figure><p id="57c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，在这个测试案例中，在认证用户之后。我们首先创建一个博客数据，然后使用我们的端点<code class="fe ky kz la lb b"><strong class="kc io">“/blogs/{blogId}/delete”</strong></code>删除这个博客，并通过 api 响应验证这一点。此外，我们还介绍了一个重要的测试用例<code class="fe ky kz la lb b"><strong class="kc io">“if the user can delete someone else’s blog or not”</strong></code>,我们在后面的测试中对其进行了测试，并通过自定义消息验证了结果。</p><p id="004a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，是时候运行我们所有的测试用例了，看看我们的任何一个用例是否失败。</p><figure class="lr ls lt lu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/066fea617973abd682ed7bb6fc4e5ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fSfGdhk02mrq4pjmBSj1Hw.png"/></div></div></figure><figure class="lr ls lt lu gt jo"><div class="bz fp l di"><div class="nj lw l"/></div></figure><p id="597e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们开始吧🎉 🎉。我们所有的测试案例都已经通过了✔️</p><p id="7aef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">结论</strong></p><p id="4633" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">到目前为止，我们已经在 django-tests 中介绍了很多内容。我确信你在编写自己的测试时不会遇到太多问题。如果你想要完整的 tests.py 文件，我们在博文中部分讨论过，那么你可以在这里找到它<a class="ae jz" href="https://github.com/hghimanshu/Blog/blob/master/blogit/blogs/tests.py" rel="noopener ugc nofollow" target="_blank"/>。在用 django 编写测试时，如果有任何问题，请在评论中告诉我。</p></div></div>    
</body>
</html>