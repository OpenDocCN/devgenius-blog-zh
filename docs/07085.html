<html>
<head>
<title>Integrating Rust With Android Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Rust 与 Android 开发的集成</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/integrating-rust-with-android-development-ef341c2f9cca?source=collection_archive---------0-----------------------#2022-02-24">https://blog.devgenius.io/integrating-rust-with-android-development-ef341c2f9cca?source=collection_archive---------0-----------------------#2022-02-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/5ee4a803ed9563c505bf14d9a93df37c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*asJ0X12wzo_gN_zxscdV5Q.jpeg"/></div></div></figure><div class=""/><p id="70fb" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.rust-lang.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx iz"> Rust </strong> </a>是一种通用的系统编程语言，已经存在很长时间了。作为一种系统编程语言，它可以用来执行类似于语言<strong class="jx iz"> C </strong>和<strong class="jx iz"> C++ </strong>的任务，但具有更高的内存安全性。这使得 Rust 可以用于在包括 Android 在内的众多操作系统上编写程序或脚本。你可能想知道这怎么可能，是否有一个简单的方法可以做到这一点。嗯，这就是这篇文章的内容！</p><p id="3c8d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">目前，没有太多关于如何为 android 应用程序编写 Rust 代码的信息。Google <a class="ae kt" href="https://source.android.com/setup/build/rust/building-rust-modules/overview" rel="noopener ugc nofollow" target="_blank">在这里</a>提供了一些信息，但是对于初学者来说理解起来很复杂。本演练的目标是为 Rust 代码与 android 开发的集成提供一个简单而有效的指南，并最终成为<strong class="jx iz">最佳指南。不需要事先了解 C 或 C++或 JNI！</strong></p><p id="d2cf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将使用<a class="ae kt" href="https://developer.android.com/studio" rel="noopener ugc nofollow" target="_blank"> Android Studio </a>。让我们从设置它开始。</p><h1 id="e616" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">设置🌱</h1><h2 id="4d5c" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">Rust 插件⚙️</h2><p id="7b3e" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">首先，我们需要 Rust 插件。打开 Android Studio。将会打开一个类似如下所示的对话框。选择插件选项卡，搜索“Rust”，然后安装 JetBrains 的官方 Rust 插件。或者，如果你已经打开了一个项目，点击 Android Studio 左上角的文件并选择设置。点击插件。</p><blockquote class="mj mk ml"><p id="3fd8" class="jv jw mm jx b jy jz ka kb kc kd ke kf mn kh ki kj mo kl km kn mp kp kq kr ks ig bi translated">Rust 插件要求在您的系统上安装 Rust。你可以按照这个<a class="ae kt" href="https://www.rust-lang.org/tools/install" rel="noopener ugc nofollow" target="_blank"> <strong class="jx iz">链接</strong> </a>在你的系统上安装 Rust。</p></blockquote><figure class="mr ms mt mu gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mq"><img src="../Images/823fda2d67520986670df4be6745c052.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vIp429xNBAmk56_FdhOZmw.png"/></div></div></figure><h2 id="2e82" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">创建空应用程序📱</h2><p id="d183" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">现在让我们创建一个新的空应用程序。首先完成标准的新项目设置。</p><figure class="mr ms mt mu gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mv"><img src="../Images/d04d8a5e74b60e86c9a30af8f35e2d04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eMtX0LGhY1ZVlBt7p12CGg.png"/></div></div></figure><p id="4915" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们将项目命名为 Rust 应用程序，然后单击 finish。</p><p id="f968" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将会出现一个类似如下所示的窗口。</p><figure class="mr ms mt mu gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mw"><img src="../Images/24ce00e4fa5d97f7ebc0aa25444d470d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*75wCKhDm7MfQ0UPu3m8ZSQ.png"/></div></div></figure><h2 id="d3ae" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">合并货物项目💼</h2><p id="28d9" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">下面我们再来添加一个<a class="ae kt" href="https://doc.rust-lang.org/cargo/" rel="noopener ugc nofollow" target="_blank">货物项目</a>，这里跟随教程提供的<a class="ae kt" href="https://doc.rust-lang.org/cargo/guide/creating-a-new-project.html" rel="noopener ugc nofollow" target="_blank"><strong class="jx iz"/></a>。要嵌入一个 Rust 项目，只需在 Android Studio 中点击<strong class="jx iz">终端</strong> <strong class="jx iz">，输入<code class="fe mx my mz na b">cargo new rust_lib --lib</code>，然后回车即可。</strong></p><pre class="mr ms mt mu gt nb na nc nd aw ne bi"><span id="fc91" class="ls kv iy na b gy nf ng l nh ni">C:\Users\USER1\AndroidStudioProjects\RustApplication&gt;<strong class="na iz">cargo new rust_lib --lib</strong></span></pre><p id="ec84" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将创建一个新的库，因此可以在我们的应用程序中使用它。我们把图书馆命名为<code class="fe mx my mz na b">rust_lib</code>。记下文件夹的创建位置。</p><p id="ddb0" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要在 Android Studio 中查看该文件夹，请导航到项目窗格，并从下拉菜单中选择项目，而不是 Android。</p><figure class="mr ms mt mu gt ip gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/d4f0dadf8fceeff7b692ea7e6c175a61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*T-2-mcR6WYG_qKYLfgj0ZQ.png"/></div></figure><p id="dd29" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后您会看到一个名为<code class="fe mx my mz na b">rust_lib</code>的新文件夹。这个文件夹默认包含一个新的<code class="fe mx my mz na b">git</code>库，一个<code class="fe mx my mz na b">Cargo.toml</code>文件，和一个包含<code class="fe mx my mz na b">lib.rs</code>的<code class="fe mx my mz na b">src</code>文件夹。现在让我们修改我们刚刚使用<code class="fe mx my mz na b">Cargo.toml</code>文件创建的<a class="ae kt" href="https://doc.rust-lang.org/cargo/reference/cargo-targets.html#configuring-a-target" rel="noopener ugc nofollow" target="_blank">类型的库</a>。对于移动应用程序开发，库应该是动态的。</p><p id="771e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将以下内容添加到<code class="fe mx my mz na b">Cargo.toml</code>文件的内容中。</p><pre class="mr ms mt mu gt nb na nc nd aw ne bi"><span id="870c" class="ls kv iy na b gy nf ng l nh ni">[lib]<br/>name = "rust_lib"<br/>crate-type = ["cdylib"]</span></pre><p id="6018" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">点击查看要点<a class="ae kt" href="https://gist.github.com/Kofituo/e02bd971b75866103438961e98e3711f" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="47b2" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">添加相关性🧶</h2><p id="7544" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">让我们添加一些依赖项来创建必要的文件，以便将我们的 rust 代码链接到 Android 终端，这是一个平稳的过程。</p><figure class="mr ms mt mu gt ip"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="1d2d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用“<strong class="jx iz"> * </strong>”获取依赖关系的最新版本。</p><p id="43ed" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mx my mz na b"><a class="ae kt" href="https://crates.io/crates/flapigen" rel="noopener ugc nofollow" target="_blank"><strong class="jx iz">flapigen</strong></a></code> <strong class="jx iz"> </strong>是主要的构建依赖，用于从我们的 rust 代码中生成适当的代码，以便在我们的 android 应用程序中使用。使用一个接口文件，但是每次代码改变时都要修改接口文件，这可能会很乏味。这就是<code class="fe mx my mz na b"><a class="ae kt" href="https://crates.io/crates/rifgen" rel="noopener ugc nofollow" target="_blank"><strong class="jx iz">rifgen</strong></a></code> <strong class="jx iz"> </strong>的由来。它使得创建接口文件变得如此容易。</p><p id="b6c5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">额外的依赖项用于日志记录。</p><h2 id="33cd" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">创建构建文件📄</h2><p id="3895" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">如前所述，flapigen 和 rifgen 是构建依赖项，并与<code class="fe mx my mz na b"><a class="ae kt" href="https://doc.rust-lang.org/cargo/reference/build-scripts.html#build-scripts" rel="noopener ugc nofollow" target="_blank">build.rs</a></code>文件交互。右击<code class="fe mx my mz na b">rust_lib</code>文件夹并选择新建&gt;锈文件。</p><figure class="mr ms mt mu gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nm"><img src="../Images/8e1ebdbf5aff045da4299fc5908a81cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N7IPHePJFtDux9YTVt0JwA.png"/></div></div></figure><p id="d541" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将文件命名为<code class="fe mx my mz na b">build.rs</code>。</p><p id="b896" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">按照<code class="fe mx my mz na b"><a class="ae kt" href="https://dushistov.github.io/flapigen-rs/java-android-example.html" rel="noopener ugc nofollow" target="_blank">flapigen</a></code>和<code class="fe mx my mz na b"><a class="ae kt" href="https://docs.rs/rifgen/latest/rifgen/" rel="noopener ugc nofollow" target="_blank">rifgen</a></code>给出的教程，我们的<code class="fe mx my mz na b">build.rs</code>应该看起来如下:</p><figure class="mr ms mt mu gt ip"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">build.rs</figcaption></figure><p id="43fa" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可能想知道<code class="fe mx my mz na b">build.rs</code>里发生了什么。<code class="fe mx my mz na b">flapigen</code>将界面文件中的内容转换成<code class="fe mx my mz na b">java_glue</code> rust 文件。所以我们首先为接口文件(<code class="fe mx my mz na b">in_src</code>)指定源文件，然后是输出文件(<code class="fe mx my mz na b">java_glue.rs</code>)。<code class="fe mx my mz na b">java_glue.rs</code>的目录必须与<code class="fe mx my mz na b">OUT_DIR </code>环境变量相同。之后，使用<code class="fe mx my mz na b">rifgen</code>生成接口文件，根据我们添加 rust 项目的语言指定我们的偏好。<code class="fe mx my mz na b">Generator::new</code>的最后一个参数指定包含我们的 rust 代码的文件夹的开始位置，而<code class="fe mx my mz na b">generate_interface</code>函数采用接口文件的路径。即<code class="fe mx my mz na b">in_scr</code>。<code class="fe mx my mz na b">java_folder</code>指定了创建的 java 文件应该放在哪里。调用<code class="fe mx my mz na b">swig_gen.expand</code>告诉<code class="fe mx my mz na b">flapigen</code>生成适当的文件。当我们在 Gradle 构建中使用这些参数时，请注意它们。</p><p id="cc14" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，在<code class="fe mx my mz na b">rust_lib/src</code>文件夹中创建一个名为<code class="fe mx my mz na b">java_glue.rs</code>的文件，并放入以下内容:</p><figure class="mr ms mt mu gt ip"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="35be" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并补充:</p><pre class="mr ms mt mu gt nb na nc nd aw ne bi"><span id="f0b2" class="ls kv iy na b gy nf ng l nh ni">mod java_glue;<br/>pub use crate::java_glue::*;</span></pre><p id="ea25" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">到您的<code class="fe mx my mz na b">lib.rs</code>文件。这样做可以将您的 rust 代码与生成的代码连接起来。</p><h2 id="1f89" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">添加 Android 工具链和链接器⛓</h2><p id="5a50" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">为了给 android 编译 Rust，我们需要给<code class="fe mx my mz na b">rustup</code>添加 android 工具链。为此，只需在终端中运行以下命令:</p><pre class="mr ms mt mu gt nb na nc nd aw ne bi"><span id="d47f" class="ls kv iy na b gy nf ng l nh ni">&gt;<strong class="na iz">rustup default nightly<br/></strong>&gt;<strong class="na iz">rustup target add aarch64-linux-android armv7-linux-androideabi</strong></span></pre><p id="79f5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由于<code class="fe mx my mz na b">rifgen</code>机箱在夜间工作，你必须先在夜间安装 Rust。</p><p id="96de" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后分别为 64 位和 32 位 android 版本添加 rust 工具链和标准库。现在，让我们添加<a class="ae kt" href="https://en.wikipedia.org/wiki/Linker_(computing)" rel="noopener ugc nofollow" target="_blank">编译器连接器</a>。应该添加到<code class="fe mx my mz na b">rust_lib/.cargo/config.toml</code>文件中。</p><p id="f48e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">右键单击<code class="fe mx my mz na b">rust_lib</code>文件夹，创建一个名为<code class="fe mx my mz na b">.cargo</code>的新目录，然后在<code class="fe mx my mz na b">.cargo</code>目录中创建一个名为<code class="fe mx my mz na b">config.toml</code>的新文件。</p><p id="37a3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">合适的连接器随<strong class="jx iz"> Android NDK </strong>一起提供，因此应该在继续之前<a class="ae kt" href="https://developer.android.com/studio/projects/install-ndk#default-version" rel="noopener ugc nofollow" target="_blank">下载</a>。</p><p id="d32a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将以下内容添加到您创建的配置文件中。</p><figure class="mr ms mt mu gt ip"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="5b13" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用 ANDROID SDK 路径(或包含 NDK 包的文件夹)替换<strong class="jx iz"> ANDROID SDK </strong>。此外，用您的操作系统版本替换<strong class="jx iz">操作系统版本</strong>。例如，在我的 Windows pc 上，完整路径是:</p><pre class="mr ms mt mu gt nb na nc nd aw ne bi"><span id="c8bd" class="ls kv iy na b gy nf ng l nh ni">[<strong class="na iz">target.aarch64-linux-android</strong>]<br/>linker = "<strong class="na iz">C:\\Users\\taimoor\\AppData\\Local\\Android\\Sdk\\</strong>ndk-bundle\\toolchains\\llvm\\prebuilt\\<strong class="na iz">windows-x86_64</strong>\\bin\\<strong class="na iz">aarch64-linux-android21-clang++.cmd</strong>"</span></pre><p id="ae46" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意 Windows 版本末尾的<code class="fe mx my mz na b">.cmd</code>。</p><blockquote class="mj mk ml"><p id="b141" class="jv jw mm jx b jy jz ka kb kc kd ke kf mn kh ki kj mo kl km kn mp kp kq kr ks ig bi translated">如果您使用的是 NDK v25 的 Mac OS，您可能会面临一个问题。如果您确实面临一个问题，您可以尝试以前版本的 NDK。或者，您可以<a class="ae kt" href="https://www.upwork.com/freelancers/~0196d30a485de56f48" rel="noopener ugc nofollow" target="_blank">联系 more 以获得更多帮助</a>。</p></blockquote><h2 id="8c59" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">使用 Gradle 实现自动化构建🐘</h2><p id="fd0c" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">每当我们想要测试应用程序时，Gradle 可以用来自动运行<code class="fe mx my mz na b">cargo build</code>。这将导致我们在 Rust 端所做的更改自动更新到我们的应用程序中。</p><figure class="mr ms mt mu gt ip"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">build.gradle</figcaption></figure><p id="f216" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意，这是<strong class="jx iz">应用程序或模块级</strong>梯度文件，而不是项目级梯度文件。添加线路<strong class="jx iz"> 20 至 27 </strong>和线路<strong class="jx iz"> 65 起</strong>。从第 65 行开始，只要我们运行应用程序，Gradle 就会运行 cargo build。运行 cargo build 命令后，我们复制 java 文件和动态库文件(。<strong class="jx iz">所以</strong>)创建并粘贴它们到 Android 可以读取并在我们的 Kotlin 代码中使用的目录中。</p><p id="ae23" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">应用程序现在应该可以运行了😄。如果你在运行它的时候有困难，请在下面留下你的评论或者发邮件给我，地址是<em class="mm">otukof@gmail.com</em>！</p><h2 id="7e40" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated"><strong class="ak">奖励部分:伐木</strong>📃</h2><p id="69ff" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">让我们快速实现日志记录来帮助调试 Rust 代码。在<code class="fe mx my mz na b">lib.rs</code>文件中，添加以下内容:</p><figure class="mr ms mt mu gt ip"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="0d59" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们使用<code class="fe mx my mz na b"><a class="ae kt" href="https://docs.rs/android_logger/0.10.1/android_logger/index.html" rel="noopener ugc nofollow" target="_blank">android_logger</a></code>箱生成日志，然后调用<code class="fe mx my mz na b"><a class="ae kt" href="https://docs.rs/log-panics/2.0.0/log_panics/fn.init.html" rel="noopener ugc nofollow" target="_blank">log_panics::init()</a></code>将所有 panics 重定向到日志中，而不是打印到标准错误中。注意属性<code class="fe mx my mz na b">#[generate_interface]</code>。这告诉<code class="fe mx my mz na b">rifgen</code>我们将从 Kotlin 调用这个函数，因此它应该将这个方法调用添加到接口文件中。</p><h2 id="5c8b" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">从 Kotlin 加载库📲</h2><p id="36c2" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">现在我们已经设置了铁锈面，让我们继续 Kotlin 面。我们现在将从单例加载库:</p><figure class="mr ms mt mu gt ip"><div class="bz fp l di"><div class="nk nl l"/></div><figcaption class="nn no gj gh gi np nq bd b be z dk translated">主活动. kt</figcaption></figure><p id="5e14" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为我们创建的日志类添加各种导入。请注意，即使我们将函数命名为<code class="fe mx my mz na b">initialise_logging</code>，我们也可以将其用作<code class="fe mx my mz na b">initialiseLogging</code>。这是因为我们在设置<code class="fe mx my mz na b">rifgen</code>的时候指定了 CamelCase。</p><p id="106f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">运行程序，查看记录的 Rust 代码中的信息。</p></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><h1 id="f2f0" class="ku kv iy bd kw kx ny kz la lb nz ld le lf oa lh li lj ob ll lm ln oc lp lq lr bi translated">后续步骤🍀</h1><p id="0928" class="pw-post-body-paragraph jv jw iy jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">本系列的第一部分到此结束。在下一部分中，我们将把 Rust 代码与一些 GUI 混合起来，以完成这个演练。请订阅，以便在该系列的第二部分发布时获得通知。</p><h1 id="66a0" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">参考</h1><h2 id="6b06" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">如果你需要任何帮助，或者你正在做的项目需要更多的帮助，让我们在 Upwork 上联系起来！</h2><h2 id="da9d" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated"><a class="ae kt" href="https://www.upwork.com/freelancers/~0196d30a485de56f48" rel="noopener ugc nofollow" target="_blank">我也编辑图像(修图、合成、图像增强等。)所以随时联系我！😄😄</a></h2><h2 id="8ace" class="ls kv iy bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated"><a class="ae kt" href="https://github.com/Kofituo/RustApplication/tree/FirstPart" rel="noopener ugc nofollow" target="_blank">储存库</a></h2></div></div>    
</body>
</html>