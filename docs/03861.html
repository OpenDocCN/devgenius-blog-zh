<html>
<head>
<title>Vuex 4 — Modules Namespace</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vuex 4 —模块名称空间</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vuex-4-modules-namespace-e0b4f751119e?source=collection_archive---------5-----------------------#2020-12-26">https://blog.devgenius.io/vuex-4-modules-namespace-e0b4f751119e?source=collection_archive---------5-----------------------#2020-12-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c4efe99ec643e7283b2f8aa7c6f6eb95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ciJ6mBX5sM9blSZ-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">丹尼尔·赫雷斯在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="4197" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex 4 处于测试阶段，可能会有变化。</p><p id="15d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex 是一个流行的 Vue 状态管理库。</p><p id="a15e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuex 4 是专为 Vue 3 设计的版本。</p><p id="5bb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何将 Vuex 4 与 Vue 3 配合使用。</p><h1 id="6c18" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在命名空间模块中访问全局资产</h1><p id="2609" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在命名空间模块中访问全局资产。</p><p id="52d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b33a" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="this['moduleA/increment']"&gt;increment&lt;/button&gt;<br/>      &lt;p&gt;{{this['moduleA/doubleCount']}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const moduleA = {<br/>        state: () =&gt; ({<br/>          count: 0<br/>        }),<br/>        mutations: {<br/>          increment(state) {<br/>            state.count++;<br/>          }<br/>        },<br/>        actions: {<br/>          increment({ commit, dispatch }) {<br/>            commit("increment");<br/>            commit("someAction", null, { root: true });<br/>          }<br/>        },<br/>        getters: {<br/>          doubleCount(state) {<br/>            return state.count * 2;<br/>          }<br/>        }<br/>      };</span><span id="debd" class="mn lc iq mj b gy ms mp l mq mr">      const store = new Vuex.Store({<br/>        mutations: {<br/>          someAction(state) {<br/>            console.log("someAction");<br/>          }<br/>        },<br/>        modules: {<br/>          moduleA: {<br/>            namespaced: true,<br/>            ...moduleA<br/>          }<br/>        }<br/>      });<br/>      const app = Vue.createApp({<br/>        methods: {<br/>          ...Vuex.mapActions(["moduleA/increment"])<br/>        },<br/>        computed: {<br/>          ...Vuex.mapGetters(["moduleA/doubleCount"])<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="e2df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有从根名称空间提交<code class="fe mt mu mv mj b">someAction</code>变异的<code class="fe mt mu mv mj b">increment</code>动作。</p><p id="1125" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们调度<code class="fe mt mu mv mj b">moduleA/increment</code>动作时，我们应该看到<code class="fe mt mu mv mj b">'someAction'</code>被记录。</p><p id="bea4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个带有<code class="fe mt mu mv mj b">root: true</code>属性的对象调用了<code class="fe mt mu mv mj b">commit</code>，让它调度根突变。</p><p id="f412" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用行动做同样的事情。例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2bfa" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="this['moduleA/increment']"&gt;increment&lt;/button&gt;<br/>      &lt;p&gt;{{this['moduleA/doubleCount']}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const moduleA = {<br/>        state: () =&gt; ({<br/>          count: 0<br/>        }),<br/>        mutations: {<br/>          increment(state) {<br/>            state.count++;<br/>          }<br/>        },<br/>        actions: {<br/>          increment({ commit, dispatch }) {<br/>            commit("increment");<br/>            dispatch("someOtherAction", null, { root: true });<br/>          }<br/>        },<br/>        getters: {<br/>          doubleCount(state) {<br/>            return state.count * 2;<br/>          }<br/>        }<br/>      };</span><span id="5586" class="mn lc iq mj b gy ms mp l mq mr">      const store = new Vuex.Store({<br/>        mutations: {<br/>          someAction(state) {<br/>            console.log("someAction");<br/>          }<br/>        },<br/>        actions: {<br/>          someOtherAction({ commit }) {<br/>            commit("someAction");<br/>          }<br/>        },<br/>        modules: {<br/>          moduleA: {<br/>            namespaced: true,<br/>            ...moduleA<br/>          }<br/>        }<br/>      });<br/>      const app = Vue.createApp({<br/>        methods: {<br/>          ...Vuex.mapActions(["moduleA/increment"])<br/>        },<br/>        computed: {<br/>          ...Vuex.mapGetters(["moduleA/doubleCount"])<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="5099" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个带有<code class="fe mt mu mv mj b">root: true</code>属性的对象调用<code class="fe mt mu mv mj b">dispatch</code>来设置让它调度根动作。</p><p id="ad99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b">rootGetters</code>属性访问根 getters。</p><p id="9c15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="495c" class="mn lc iq mj b gy mo mp l mq mr">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vuex@4.0.0-beta.4/dist/vuex.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;button @click="this['moduleA/increment']"&gt;increment&lt;/button&gt;<br/>      &lt;p&gt;{{this['moduleA/doubleCount']}}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const moduleA = {<br/>        state: () =&gt; ({<br/>          count: 0<br/>        }),<br/>        mutations: {<br/>          increment(state) {<br/>            state.count++;<br/>          }<br/>        },<br/>        actions: {<br/>          increment({ commit, dispatch, rootGetters }) {<br/>            console.log("increment", rootGetters.one);<br/>            commit("increment");<br/>          }<br/>        },<br/>        getters: {<br/>          doubleCount(state, getters, rootState, rootGetters) {<br/>            console.log("doubleCount", rootGetters.one);<br/>            return state.count * 2;<br/>          }<br/>        }<br/>      };</span><span id="e1cd" class="mn lc iq mj b gy ms mp l mq mr">      const store = new Vuex.Store({<br/>        getters: {<br/>          one(state) {<br/>            return 1;<br/>          }<br/>        },<br/>        modules: {<br/>          moduleA: {<br/>            namespaced: true,<br/>            ...moduleA<br/>          }<br/>        }<br/>      });<br/>      const app = Vue.createApp({<br/>        methods: {<br/>          ...Vuex.mapActions(["moduleA/increment"])<br/>        },<br/>        computed: {<br/>          ...Vuex.mapGetters(["moduleA/doubleCount"])<br/>        }<br/>      });<br/>      app.use(store);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="9826" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在商店的根中有一个<code class="fe mt mu mv mj b">one</code>根 getter 方法。</p><p id="d1b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在<code class="fe mt mu mv mj b">increment</code>方法的对象参数中有了<code class="fe mt mu mv mj b">rootGetters</code>属性。</p><p id="c3c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以从<code class="fe mt mu mv mj b">rootGetters.one</code>属性中获得 getter 的返回值。</p><p id="ba09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其他 getters 可以从<code class="fe mt mu mv mj b">rootGetters</code>参数中获取值。</p><h1 id="d57a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="42cc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以命名我们的存储，这样我们就可以把我们的存储分成更小的块，它们有自己的状态。</p></div></div>    
</body>
</html>