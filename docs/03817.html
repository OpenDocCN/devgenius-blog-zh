<html>
<head>
<title>Vue Router 4–Route Props and History Mode</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue路由器4–路由属性和历史模式</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vue-router-4-route-props-and-history-mode-d58700255fdf?source=collection_archive---------3-----------------------#2020-12-20">https://blog.devgenius.io/vue-router-4-route-props-and-history-mode-d58700255fdf?source=collection_archive---------3-----------------------#2020-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b381493c612d1acc643f572d3e5f206e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vp5fjHq7dyXvNB7_"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">凯尔·格伦在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="a866" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue Router 4处于测试阶段，可能会有变化。</p><p id="637d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了轻松地构建一个单页面应用程序，我们需要添加路由，以便将URL映射到呈现的组件。</p><p id="0ba0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何使用Vue路由器4与Vue 3。</p><h1 id="de22" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">路由属性对象模式</h1><p id="7571" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以设置路线的<code class="fe me mf mg mh b">props</code>属性来接受道具。</p><p id="c1cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="69fb" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vue-router@4.0.0-beta.7/dist/vue-router.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p&gt;<br/>        &lt;router-link to="/foo"&gt;foo&lt;/router-link&gt;<br/>        &lt;router-link to="/bar"&gt;bar&lt;/router-link&gt;<br/>      &lt;/p&gt;<br/>      &lt;router-view&gt;&lt;/router-view&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const Foo = {<br/>        template: "&lt;div&gt;foo&lt;/div&gt;"<br/>      };<br/>      const Bar = {<br/>        template: "&lt;div&gt;bar {{id}}&lt;/div&gt;",<br/>        props: ["id"]<br/>      };<br/>      const routes = [<br/>        {<br/>          path: "/foo",<br/>          component: Foo<br/>        },<br/>        {<br/>          path: "/bar",<br/>          component: Bar,<br/>          props: { id: 1 }<br/>        }<br/>      ];<br/>      const router = VueRouter.createRouter({<br/>        history: VueRouter.createWebHistory(),<br/>        routes<br/>      });<br/>      const app = Vue.createApp({});<br/>      app.use(router);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="430b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在带有对象的<code class="fe me mf mg mh b">routes</code>条目中有<code class="fe me mf mg mh b">props</code>属性:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f14e" class="mq lc iq mh b gy mr ms l mt mu">{ id: 1 }</span></pre><p id="94ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们导航到<code class="fe me mf mg mh b">/bar</code>，那么<code class="fe me mf mg mh b">id</code>道具会自动传入。</p><p id="522e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">router-link</code>将<code class="fe me mf mg mh b">/bar</code>作为<code class="fe me mf mg mh b">to</code>属性的值。</p><p id="076e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击<code class="fe me mf mg mh b">bar</code>链接时，我们会看到<code class="fe me mf mg mh b">bar 1</code>显示出来。</p><p id="218b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">1来自道具。</p><p id="2fb7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这种传递路线道具的方式对于静态路线道具很有用。</p><h1 id="a4de" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">路线道具功能模式</h1><p id="a4be" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">props</code>属性也可以有一个函数作为它的值。</p><p id="f234" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8a2c" class="mq lc iq mh b gy mr ms l mt mu">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;script src="https://unpkg.com/vue@next"&gt;&lt;/script&gt;<br/>    &lt;script src="https://unpkg.com/vue-router@4.0.0-beta.7/dist/vue-router.global.js"&gt;&lt;/script&gt;<br/>    &lt;title&gt;App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;<br/>      &lt;p&gt;<br/>        &lt;router-link to="/foo"&gt;foo&lt;/router-link&gt;<br/>        &lt;router-link to="/bar?id=1"&gt;bar&lt;/router-link&gt;<br/>      &lt;/p&gt;<br/>      &lt;router-view&gt;&lt;/router-view&gt;<br/>    &lt;/div&gt;<br/>    &lt;script&gt;<br/>      const Foo = {<br/>        template: "&lt;div&gt;foo&lt;/div&gt;"<br/>      };<br/>      const Bar = {<br/>        template: "&lt;div&gt;bar {{id}}&lt;/div&gt;",<br/>        props: ["id"]<br/>      };<br/>      const routes = [<br/>        {<br/>          path: "/foo",<br/>          component: Foo<br/>        },<br/>        {<br/>          path: "/bar",<br/>          component: Bar,<br/>          props: (route) =&gt; ({ id: route.query.id })<br/>        }<br/>      ];<br/>      const router = VueRouter.createRouter({<br/>        history: VueRouter.createWebHistory(),<br/>        routes<br/>      });<br/>      const app = Vue.createApp({});<br/>      app.use(router);<br/>      app.mount("#app");<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6581" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个将<code class="fe me mf mg mh b">route</code>对象作为参数的函数。</p><p id="0b0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">query</code>属性中获取查询参数。</p><p id="2ee2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是返回一个对象，它的键是查询参数的键。</p><p id="bd46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该值是查询参数值。</p><p id="35b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">/bar</code>路线的<code class="fe me mf mg mh b">router-link</code>有<code class="fe me mf mg mh b">id</code>查询参数。</p><p id="28d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们点击<code class="fe me mf mg mh b">bar</code>链接时，我们会看到<code class="fe me mf mg mh b">bar 1</code>显示出来。</p><h1 id="a1ad" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">HTML5历史模式</h1><p id="adb4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">哈希模式是映射路由的默认方式。</p><p id="06ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它使用URL来模拟一个完整的URL，这样当URL改变时就不会重新加载页面。</p><p id="76e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在历史模式下，我们去掉了散列符号，这样URL看起来就像我们看到的任何其他URL。</p><p id="aec4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使HTML5模式适用于各种服务器，我们可能需要对它进行配置，以便当我们转到不同的URL时，浏览器仍保留在应用程序中。</p><p id="9a7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，在Apache中，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c27c" class="mq lc iq mh b gy mr ms l mt mu">&lt;IfModule mod_rewrite.c&gt;<br/>  RewriteEngine On<br/>  RewriteBase /<br/>  RewriteRule ^index\.html$ - [L]<br/>  RewriteCond %{REQUEST_FILENAME} !-f<br/>  RewriteCond %{REQUEST_FILENAME} !-d<br/>  RewriteRule . /index.html [L]<br/>&lt;/IfModule&gt;</span></pre><p id="725d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使所有的URL映射到<code class="fe me mf mg mh b">index.html</code>，以便在发出任何请求时加载我们的Vue应用程序的<code class="fe me mf mg mh b">index.html</code>。</p><h1 id="e12e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="c08d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Vue Router 4以各种方式传递路由属性。</p><p id="5523" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们对Vue 3应用程序使用历史模式，那么我们可能必须配置我们的web服务器，以便在发出任何请求时转到我们的应用程序。</p></div></div>    
</body>
</html>