# 用 Java 优雅地记录运行时间

> 原文：<https://blog.devgenius.io/elegantly-log-elapsed-time-in-java-aa6f91938344?source=collection_archive---------3----------------------->

避免重复你的代码

![](img/58cde261b56386d3b2a6c2e231e83311.png)

保罗·库科在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

您是否曾经需要比较两种方法的性能？最简单的方法是记录每个方法的执行时间，您可能会得到如下结果:

但是如果你想比较两种以上的方法，这个过程会变得很难看，因为你最终会重复你自己:

在这篇文章中，我将解释一个更好的方法。

## 不要重复你自己

如果我们可以编写一个方法，让**将另一个方法**作为参数，并在时间记录代码中运行那个方法(比如上面的那个)，那就更好了，事实证明我们可以使用 ***Java 函数接口*** 和引用 的 ***方法来编写这样一个方法，但是那些是什么呢？***

## Java 功能接口

*函数接口*是包含**且仅有一个**抽象方法的接口。

因为它只有一个方法，这意味着我们可以使用 lambda 实现这个接口，或者我们可以使用方法引用。

## Java 方法引用

顾名思义，方法引用就是传递一个要存储在变量中的方法的引用的过程，对于上面的接口，变量的类型将是 *MyFunctional，*我们是这样做的:

首先，我们创建一个**静态**方法，它匹配我们接口中抽象方法的签名

然后我们将引用放入一个变量中，如下所示:

类似地，我们可以将方法引用传递给接受类型为 *MyFunctional* 的参数的方法

我们可以这样调用上面的方法:

## 把所有的放在一起

剩下的就是在我们的 *logTime* 方法中添加时间日志记录，结果是这样的:

## 微小的改进

上面的代码使用了一个我们手工创建的函数接口，事实证明 Java 有内置的函数接口，我们可以用它来加快速度，

在这种情况下，我们将使用 ***双函数< T，U，R >*** ，因为它符合 *myAdd 的*签名(它接受两个参数并返回结果)，您可以查找符合大多数常见方法签名的函数接口的[列表。](https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html)

使用 ***双函数< T，U，R >*** 我们的代码将如下所示:

所以现在，每当我们想要记录一个接受两个整数参数并返回一个整数结果的方法时，我们可以简单地将它传递给上面的 *log* 方法，如下所示

## 额外注释

在 Python 中，我们会做同样的事情，除了我们会使用 ***装饰者*** 来代替，并且由于函数是一级公民，我们会得到一个更有用的方案。