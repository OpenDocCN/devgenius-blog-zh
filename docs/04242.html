<html>
<head>
<title>Framer Motion — Animation Sequence and Layout Animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">帧运动-动画序列和布局动画</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/framer-motion-animation-sequence-and-layout-animations-499086ab7a7f?source=collection_archive---------1-----------------------#2021-02-15">https://blog.devgenius.io/framer-motion-animation-sequence-and-layout-animations-499086ab7a7f?source=collection_archive---------1-----------------------#2021-02-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/12574c4e4566a42f063f37d8e079f3a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U8f1fLPltDaSEtwb"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">JOSHUA COLEMAN 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a289" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了成帧器运动库，我们可以轻松地在React应用程序中渲染动画。</p><p id="dec8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何开始与帧运动。</p><h1 id="75f2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">定序</h1><p id="8b4f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">controls.start</code>方法返回一个承诺，因此我们可以用它来对动画进行排序。</p><p id="136b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a649" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import { motion, useAnimation } from "framer-motion";</span><span id="5130" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const controls = useAnimation();</span><span id="0bcd" class="mq lc iq mh b gy mv ms l mt mu">  const sequence = async () =&gt; {<br/>    await controls.start({ x: 0 });<br/>    return await controls.start({ opacity: 1 });<br/>  };</span><span id="2cb1" class="mq lc iq mh b gy mv ms l mt mu">  useEffect(() =&gt; {<br/>    sequence();<br/>  }, []);</span><span id="5651" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;motion.div<br/>      animate={controls}<br/>      style={{ backgroundColor: "red", width: 100, height: 100 }}<br/>    /&gt;<br/>  );<br/>}</span></pre><p id="3d09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有调用不同风格的<code class="fe me mf mg mh b">controls.start</code>的<code class="fe me mf mg mh b">sequence</code>函数。</p><p id="7238" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这就是我们在加载组件时看到的。</p><h1 id="9018" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动态S <code class="fe me mf mg mh b">tart</code></h1><p id="b51a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以动态地调用<code class="fe me mf mg mh b">controls.start</code>。</p><p id="e7c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3919" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import { motion, useAnimation } from "framer-motion";</span><span id="9476" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const controls = useAnimation();</span><span id="57ba" class="mq lc iq mh b gy mv ms l mt mu">  useEffect(() =&gt; {<br/>    controls.start((i) =&gt; ({<br/>      opacity: 0,<br/>      x: 100,<br/>      transition: { delay: i * 0.3 }<br/>    }));<br/>  }, []);</span><span id="36af" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;ul&gt;<br/>      &lt;motion.li custom={0} animate={controls}&gt;<br/>        foo<br/>      &lt;/motion.li&gt;<br/>      &lt;motion.li custom={1} animate={controls}&gt;<br/>        bar<br/>      &lt;/motion.li&gt;<br/>      &lt;motion.li custom={2} animate={controls}&gt;<br/>        baz<br/>      &lt;/motion.li&gt;<br/>    &lt;/ul&gt;<br/>  );<br/>}</span></pre><p id="a582" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用参数<code class="fe me mf mg mh b">i</code>传入一个回调，这是我们传入属性<code class="fe me mf mg mh b">custom</code>的值。</p><p id="1c6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传递给<code class="fe me mf mg mh b">animate</code>道具来设置<code class="fe me mf mg mh b">controls</code>来控制动画。</p><h1 id="3ca3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">布局动画</h1><p id="5b30" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用帧运动来激活布局</p><p id="1912" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="ba0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">App.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2e19" class="mq lc iq mh b gy mr ms l mt mu">import React, { useState } from "react";<br/>import { motion } from "framer-motion";<br/>import "./styles.css";</span><span id="f1b2" class="mq lc iq mh b gy mv ms l mt mu">const spring = {<br/>  type: "spring",<br/>  stiffness: 700,<br/>  damping: 30<br/>};</span><span id="f56c" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [isOn, setIsOn] = useState(false);</span><span id="68c1" class="mq lc iq mh b gy mv ms l mt mu">  const toggleSwitch = () =&gt; setIsOn(!isOn);</span><span id="f656" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div className="switch" data-isOn={isOn} onClick={toggleSwitch}&gt;<br/>      &lt;motion.div className="handle" layout transition={spring} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="efae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">styles.css</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6a14" class="mq lc iq mh b gy mr ms l mt mu">html,<br/>body {<br/>  min-height: 100vh;<br/>  padding: 0;<br/>  margin: 0;<br/>}</span><span id="a41b" class="mq lc iq mh b gy mv ms l mt mu">* {<br/>  box-sizing: border-box;<br/>}</span><span id="63d2" class="mq lc iq mh b gy mv ms l mt mu">.App {<br/>  font-family: sans-serif;<br/>  text-align: center;<br/>}</span><span id="aeba" class="mq lc iq mh b gy mv ms l mt mu">.switch {<br/>  width: 160px;<br/>  height: 100px;<br/>  background-color: green;<br/>  display: flex;<br/>  justify-content: flex-start;<br/>  border-radius: 50px;<br/>  padding: 10px;<br/>  cursor: pointer;<br/>}</span><span id="fcc7" class="mq lc iq mh b gy mv ms l mt mu">.switch[data-isOn="true"] {<br/>  justify-content: flex-end;<br/>}</span><span id="d2e1" class="mq lc iq mh b gy mv ms l mt mu">.handle {<br/>  width: 80px;<br/>  height: 80px;<br/>  background-color: white;<br/>  border-radius: 40px;<br/>}</span></pre><p id="aa26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe me mf mg mh b">spring</code>动画效果，并将其传递到<code class="fe me mf mg mh b">transition</code>道具中。</p><p id="3e49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">onClick</code>支柱具有控制<code class="fe me mf mg mh b">isOn</code>状态的功能。</p><p id="e408" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">道具让我们制作div布局的动画。</p><p id="7600" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加样式来将div样式化为一个开关。</p><p id="0ddf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">justify-content</code>设置为<code class="fe me mf mg mh b">flex-start</code>开关底部在左侧。<code class="fe me mf mg mh b">flex-end</code>将开关按钮置于右侧。</p><h1 id="169d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="cc99" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用帧运动来控制我们的动画进度。</p><p id="acd8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将动画应用于布局。</p></div></div>    
</body>
</html>