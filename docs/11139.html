<html>
<head>
<title>Get Set Kubernetes!!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">准备好 Kubernetes！！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/get-set-kubernetes-4e86f94ff0ab?source=collection_archive---------15-----------------------#2022-12-20">https://blog.devgenius.io/get-set-kubernetes-4e86f94ff0ab?source=collection_archive---------15-----------------------#2022-12-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="40fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kubernetes 是一个用于管理容器化应用程序的开源平台。它允许您以一致和高效的方式部署、扩展和管理容器化的应用程序。</p><p id="6abe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kubernetes 的入门一开始看起来有些吓人，但是一旦你理解了基本的概念和工作流程，它就变得容易使用了。在本文中，我们将介绍 Kubernetes 的入门步骤，包括设置本地开发环境、部署您的第一个应用程序，以及扩展它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/b40858cdffe809730d71ce8d56b1d356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3MEgvgTd_ooVK6yI.png"/></div></div></figure><p id="598f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们开始之前，对容器及其工作原理有一个基本的了解是很重要的。容器是一个轻量级和可移植的包，包含运行应用程序所需的所有依赖项和代码。容器允许您打包应用程序及其所有依赖项，并在任何环境中运行它，从而使部署和管理应用程序变得容易。</p><p id="b23c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要开始使用 Kubernetes，您需要在系统上安装 Docker。Docker 是一个允许你构建、运行和管理容器的工具。你可以从官方网站下载 Docker，按照你的操作系统的安装说明进行操作。</p><p id="37c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦安装了 Docker，就可以使用 Minikube 启动一个本地 Kubernetes 集群。Minikube 是一个允许您在本地机器上运行单节点 Kubernetes 集群的工具。要安装 Minikube，可以按照官网上的说明操作。</p><p id="d753" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">安装 Minikube 后，可以通过运行以下命令启动本地 Kubernetes 集群:</p><pre class="kj kk kl km gt ku kv kw bn kx ky bi"><span id="49c2" class="kz la in kv b be lb lc l ld le">minikube start</span></pre><p id="e1a0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将启动一个本地 Kubernetes 集群，并设置所有必要的组件，包括 Kubernetes API 服务器、etcd 和 kubelet。</p><p id="6530" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本地 Kubernetes 集群启动并运行后，您现在可以部署您的第一个应用程序了。在 Kubernetes 中，应用程序被部署为一组副本，它们是运行在集群中不同节点上的应用程序的相同副本。</p><p id="51ab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要在 Kubernetes 中部署应用程序，您需要创建一个部署配置文件。该文件定义了部署的属性，例如副本的数量、要使用的容器映像以及运行应用程序所需的资源。</p><p id="0a11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是一个简单 Node.js 应用程序的示例部署配置文件:</p><pre class="kj kk kl km gt ku kv kw bn kx ky bi"><span id="6f06" class="kz la in kv b be lb lc l ld le">apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>  name: node-app<br/>spec:<br/>  replicas: 3<br/>  selector:<br/>    matchLabels:<br/>      app: node-app<br/>  template:<br/>    metadata:<br/>      labels:<br/>        app: node-app<br/>    spec:<br/>      containers:<br/>      - name: node-app<br/>        image: node:10<br/>        ports:<br/>        - containerPort: 8080</span></pre><p id="ea40" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个部署配置文件创建了一个名为“node-app”的部署，其中包含一个容器的三个副本，该容器在端口 8080 上运行 Node.js 10 映像。</p><p id="9ad3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要部署这个应用程序，您可以使用<code class="fe lf lg lh kv b">kubectl</code>命令行工具。<code class="fe lf lg lh kv b">kubectl</code>是与 Kubernetes 集群交互的命令行界面。要部署应用程序，您可以运行以下命令:</p><pre class="kj kk kl km gt ku kv kw bn kx ky bi"><span id="ef13" class="kz la in kv b be lb lc l ld le">kubectl apply -f deployment.yaml</span></pre><p id="a0e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将创建部署并启动复制副本。您可以通过运行以下命令来验证部署是否正在运行:</p><pre class="kj kk kl km gt ku kv kw bn kx ky bi"><span id="48d5" class="kz la in kv b be lb lc l ld le">kubectl get deployments</span></pre><p id="dca7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将列出集群中的所有部署，您应该看到您的“node-app”部署以“Running”状态列出。</p><p id="a6e3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要访问该应用程序，您需要创建一个服务。Kubernetes 中的服务是一组副本的逻辑抽象，使外部流量能够访问应用程序。</p><p id="4f2e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要为您的应用程序创建服务，您需要创建一个服务配置文件。该文件定义了服务的属性，例如服务的类型、要公开的端口以及用于标识要包含在服务中的副本的选择器。</p><p id="6706" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以下是 Node.js 应用程序的服务配置文件示例:</p><pre class="kj kk kl km gt ku kv kw bn kx ky bi"><span id="536a" class="kz la in kv b be lb lc l ld le">apiVersion: v1<br/>kind: Service<br/>metadata:<br/>  name: node-app-service<br/>spec:<br/>  type: NodePort<br/>  selector:<br/>    app: node-app<br/>  ports:<br/>  - protocol: TCP<br/>    port: 8080<br/>    targetPort: 8080<br/>    nodePort: 30001</span></pre><p id="abbd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此服务配置文件创建一个名为“node-app-service”的“NodePort”类型的服务，该服务公开集群中节点上的端口 8080，并将其映射到副本上的目标端口 8080。它还将节点端口 30001 分配给服务，这允许您在集群中的任何节点上访问该端口上的应用程序。</p><p id="3579" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要创建服务，您可以像部署一样使用<code class="fe lf lg lh kv b">kubectl</code>命令行工具。运行以下命令:</p><pre class="kj kk kl km gt ku kv kw bn kx ky bi"><span id="a2e3" class="kz la in kv b be lb lc l ld le">kubectl apply -f service.yaml</span></pre><p id="9d51" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将创建服务，并在集群中节点的指定端口上公开它。您可以通过运行以下命令来验证服务是否正在运行:</p><pre class="kj kk kl km gt ku kv kw bn kx ky bi"><span id="179b" class="kz la in kv b be lb lc l ld le">kubectl get services</span></pre><p id="2cc4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将列出集群中的所有服务，您应该看到您的“节点-应用程序-服务”服务以“正在运行”的状态列出。</p><p id="c68e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要访问应用程序，您可以使用<code class="fe lf lg lh kv b">minikube</code>命令行工具来获取服务的 URL。运行以下命令:</p><pre class="kj kk kl km gt ku kv kw bn kx ky bi"><span id="4082" class="kz la in kv b be lb lc l ld le">minikube service node-app-service --url</span></pre><p id="d1ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将输出服务的 URL，您可以使用它在 web 浏览器中访问应用程序。</p><p id="f65e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">恭喜你！您已经成功地在 Kubernetes 上部署并访问了您的第一个应用程序。这只是你能用 Kubernetes 做的事情的开始。您可以增加或减少副本的数量，向您的应用程序推出更新，等等。</p><p id="ec8b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">希望这篇教程对你入门 Kubernetes 有所帮助。如果你有任何问题或意见，请在下面的评论中留下。集装箱化快乐！</p></div></div>    
</body>
</html>