<html>
<head>
<title>Making Basic HTTP GET Requests in React Using Axios</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Axios在React中生成基本的HTTP GET请求</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/making-basic-http-get-requests-in-react-using-axios-53c73018213b?source=collection_archive---------6-----------------------#2021-12-30">https://blog.devgenius.io/making-basic-http-get-requests-in-react-using-axios-53c73018213b?source=collection_archive---------6-----------------------#2021-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5cd795512e65e5f57b8e059f0b4ba3a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ywBH8TbjENA0Ti3e.jpg"/></div></div></figure><p id="2169" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我还在学习如何做这件事的时候，这实际上花了我比我预期更长的时间。因此，本文旨在成为我在学习如何在React中发出HTTP请求时所希望拥有的文档。让我们开始吧。</p><h1 id="5404" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们的HTTP GET请求端点</h1><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="312f" class="md kx iq lz b gy me mf l mg mh">https://api.npoint.io/df2c42f9149aa832ea14</span></pre><p id="cc25" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我使用npoint . io——一个免费的JSON存储服务——创建了这个简单的端点。如果我们向这个url发出GET请求，我们将得到:</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="ab7a" class="md kx iq lz b gy me mf l mg mh">{"message": "hello world from npoint!!"}</span></pre><p id="3ea5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您愿意，您可以将这个url粘贴到您的浏览器中，您也应该在浏览器中看到这个JSON字符串。我们今天的目标只是在React应用程序的主屏幕上显示这条消息。</p><h1 id="104e" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">我们的目标是建立什么</h1><figure class="lu lv lw lx gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/89dcf0ff995163984dccefae7ca04d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c3yTD7FI9jegM7xZwRpXMg.png"/></div></div></figure><p id="6b1b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个完全空白的页面，显示来自我们端点的<code class="fe mj mk ml lz b">message</code>。(不允许对此消息进行硬编码)</p><h1 id="edb9" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">安装Axios</h1><p id="1375" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">Axios是我们用来发出HTTP GET请求的库。</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="da9a" class="md kx iq lz b gy me mf l mg mh">npm install --save axios</span></pre><p id="e115" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">是的，有其他可用的库可以做同样的事情，但这个足够简单，对我来说足够好。</p><h1 id="c176" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">测试是否安装了Axios</h1><p id="3984" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">要检查axios安装是否没有任何问题，只需导入它并检查是否出现错误信息。</p><h2 id="fafc" class="md kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated">在你开始的时候。jsx文件</h2><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="e479" class="md kx iq lz b gy me mf l mg mh">import axios from "axios"</span></pre><p id="6542" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当你运行你的应用程序，没有任何错误，axios已经安装没有问题。</p><h1 id="a187" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">组件代码</h1><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="c329" class="md kx iq lz b gy me mf l mg mh">import React from "react"<br/>import axios from "axios"</span><span id="49de" class="md kx iq lz b gy nc mf l mg mh">class HomePage extends React.Component {<br/>    <br/>    state = {<br/>        message: "default message"<br/>    }</span><span id="1a13" class="md kx iq lz b gy nc mf l mg mh">    componentDidMount() {<br/>        axios.get("<a class="ae nd" href="https://api.npoint.io/df2c42f9149aa832ea14" rel="noopener ugc nofollow" target="_blank">https://api.npoint.io/df2c42f9149aa832ea14</a>")<br/>        .then((response) =&gt; {<br/>            this.setState({<br/>                message: response.data.message<br/>            })<br/>        })<br/>    }</span><span id="244e" class="md kx iq lz b gy nc mf l mg mh">    render () {<br/>        return &lt;div&gt;<br/>            {this.state.message}<br/>        &lt;/div&gt;<br/>    }<br/>}</span><span id="5fb0" class="md kx iq lz b gy nc mf l mg mh">export default HomePage</span></pre><h1 id="c694" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">代码的一些解释</h1><h2 id="e9a0" class="md kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated">导入我们需要的库— React &amp; axios</h2><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="6861" class="md kx iq lz b gy me mf l mg mh">import React from "react"<br/>import axios from "axios"</span></pre><h2 id="1727" class="md kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated">组件状态</h2><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="7bf2" class="md kx iq lz b gy me mf l mg mh">class HomePage extends React.Component {<br/>    <br/>    state = {<br/>        message: "default message"<br/>    }</span><span id="5af1" class="md kx iq lz b gy nc mf l mg mh">    // the other stuff<br/>}</span></pre><p id="16fc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，每个组件都有一个<code class="fe mj mk ml lz b">state</code>——本质上是创建组件类时存储的一些数据。为了简单起见，我们的状态有一个值为T3的变量T2。</p><h2 id="f202" class="md kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated">显示我们的消息</h2><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="ccd6" class="md kx iq lz b gy me mf l mg mh">render() {<br/>    return &lt;div&gt;<br/>        {this.state.message}<br/>    &lt;/div&gt;<br/>}</span></pre><p id="03cc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了显示来自我们的<code class="fe mj mk ml lz b">state</code>的<code class="fe mj mk ml lz b">message</code>，我们可以在我们返回的HTML部分使用这个语法<code class="fe mj mk ml lz b">this.state.message</code>。默认情况下，如果我们不做任何GET请求，我们的应用程序将只显示<code class="fe mj mk ml lz b">"default message"</code>而不是<code class="fe mj mk ml lz b">"hello world from npoint!!"</code>。</p><h2 id="4214" class="md kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated">componentDidMount()函数</h2><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="0ce1" class="md kx iq lz b gy me mf l mg mh">componentDidMount() {<br/>    //stuff<br/>}</span></pre><p id="eb8e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当我们的app组件被<em class="ne">挂载</em>(完成加载)时，该函数运行。我们在这个函数中写的东西会在组件中的东西加载完成后立即执行。我们将把我们的axios代码放在<code class="fe mj mk ml lz b">componentDidMount</code>函数中来发出GET请求。</p><h2 id="7dcf" class="md kx iq bd ky mr ms dn lc mt mu dp lg kj mv mw lk kn mx my lo kr mz na ls nb bi translated">Axios代码—发出HTTP GET请求</h2><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="bdda" class="md kx iq lz b gy me mf l mg mh">axios.get("<a class="ae nd" href="https://api.npoint.io/df2c42f9149aa832ea14" rel="noopener ugc nofollow" target="_blank">https://api.npoint.io/df2c42f9149aa832ea14</a>")<br/>        .then((response) =&gt; {<br/>            this.setState({<br/>                message: response.data.message<br/>            })<br/>        })</span></pre><p id="94b7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了发出GET请求，我们调用<code class="fe mj mk ml lz b">axios.get(url)</code>。为了处理响应(我们在发出get请求后返回的JSON内容)，我们在后面使用了<code class="fe mj mk ml lz b">.then</code>方法。</p><p id="abd6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，<code class="fe mj mk ml lz b">response</code>是我们在发出get请求后得到的全部内容，<code class="fe mj mk ml lz b">response.data</code>是我们得到的JSON对象。在这种情况下，<code class="fe mj mk ml lz b">response.data</code>就会是:</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="30b5" class="md kx iq lz b gy me mf l mg mh">{"message": "hello world from npoint!!"}</span></pre><p id="1591" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe mj mk ml lz b">this.setState</code>方法改变了组件的状态，本质上是将<code class="fe mj mk ml lz b">message</code>设置为<code class="fe mj mk ml lz b">response.data.message</code>，而T5恰好是字符串<code class="fe mj mk ml lz b">"hello world from npoint!!"</code>。在这个<code class="fe mj mk ml lz b">setState</code>方法之后，我们的状态将是:</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="7cf8" class="md kx iq lz b gy me mf l mg mh">{message: "hello world from npoint!!"}</span></pre><p id="8064" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">而不是:</p><pre class="lu lv lw lx gt ly lz ma mb aw mc bi"><span id="5b9e" class="md kx iq lz b gy me mf l mg mh">{message: "default message"}</span></pre><h1 id="a789" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">数据流的摘要</h1><ol class=""><li id="79ca" class="nf ng iq ka b kb mm kf mn kj nh kn ni kr nj kv nk nl nm nn bi translated">我们的组件状态被设置为<code class="fe mj mk ml lz b">{message: "default message"}</code></li><li id="c465" class="nf ng iq ka b kb no kf np kj nq kn nr kr ns kv nk nl nm nn bi translated">我们使用<code class="fe mj mk ml lz b">componentDidMount</code>函数中的<code class="fe mj mk ml lz b">axios</code>库发出HTTP GET请求，这在组件加载时运行</li><li id="df23" class="nf ng iq ka b kb no kf np kj nq kn nr kr ns kv nk nl nm nn bi translated">我们拿回一个<code class="fe mj mk ml lz b">response</code></li><li id="c851" class="nf ng iq ka b kb no kf np kj nq kn nr kr ns kv nk nl nm nn bi translated"><code class="fe mj mk ml lz b">response.data</code>是<code class="fe mj mk ml lz b">{"message": "hello world from npoint!!"}</code></li><li id="fd8c" class="nf ng iq ka b kb no kf np kj nq kn nr kr ns kv nk nl nm nn bi translated">我们使用<code class="fe mj mk ml lz b">this.setState</code>方法将<code class="fe mj mk ml lz b">state.message</code>设置为字符串<code class="fe mj mk ml lz b">"hello world from npoint!!"</code></li><li id="ca13" class="nf ng iq ka b kb no kf np kj nq kn nr kr ns kv nk nl nm nn bi translated"><code class="fe mj mk ml lz b">state.message</code>现在是<code class="fe mj mk ml lz b">"hello world from npoint!!"</code>而不是<code class="fe mj mk ml lz b">"default message"</code></li><li id="8d5d" class="nf ng iq ka b kb no kf np kj nq kn nr kr ns kv nk nl nm nn bi translated">当我们渲染<code class="fe mj mk ml lz b">this.state.message</code>时，我们的字符串<code class="fe mj mk ml lz b">"hello world from npoint!!"</code>现在显示在我们的组件中</li></ol><h1 id="c78c" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">Github回购供参考</h1><div class="nt nu gp gr nv nw"><a href="https://github.com/zlliu246/react_examples/tree/http-get-request-axios" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">http-get-request-axios上的GitHub - zlliu246/react_examples</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">这个项目是用Create React App引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok jw nw"/></div></div></a></div><h1 id="cb38" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">一些最后的话</h1><p id="25b9" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">这是我们如何在React中创建基本HTTP GET请求的基本形式。</p><h1 id="95bf" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="0be6" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">如果这篇文章有价值，并且你希望支持我成为一名作家，请考虑注册一个Medium会员——每月5美元，你可以无限制地访问Medium上的故事。如果你注册使用我的链接，我会赚一小笔佣金。</p><p id="c308" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae nd" href="https://zl-liu.medium.com/membership" rel="noopener"> <strong class="ka ir"> <em class="ne">点击此处无限制访问媒体</em> </strong> </a></p><p id="62f8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你希望在我发布时得到通知，请考虑加入我的电子邮件列表。</p><div class="nt nu gp gr nv nw"><a href="https://zl-liu.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">每当Zlliu发布时收到一封电子邮件。</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">每当Zlliu发布时收到一封电子邮件。注册后，如果您还没有中型帐户，您将创建一个…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">zl-liu.medium.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok jw nw"/></div></div></a></div></div></div>    
</body>
</html>