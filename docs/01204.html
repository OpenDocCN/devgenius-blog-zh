<html>
<head>
<title>JavaScript Problems — Timers, Cases, Request Bodies, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript 问题——计时器、案例、请求体等等</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-problems-timers-cases-request-bodies-and-more-2b9588864051?source=collection_archive---------29-----------------------#2020-06-26">https://blog.devgenius.io/javascript-problems-timers-cases-request-bodies-and-more-2b9588864051?source=collection_archive---------29-----------------------#2020-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2c41a7202eedc953efb67684b60414b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bquk8YWzR1e3a56-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">迈克尔·波德格在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="ff10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，当我们编写 JavaScript 应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些常见 JavaScript 问题的解决方案。</p><h1 id="da21" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在 Express 应用程序中检索 POST 参数</h1><p id="6de8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用 body-parser 包在 Express 应用程序中获取 POST 参数。</p><p id="51b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们可以运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e690" class="mn lc iq mj b gy mo mp l mq mr">npm install --save body-parser</span></pre><p id="8282" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9368" class="mn lc iq mj b gy mo mp l mq mr">const bodyParser = require('body-parser');<br/>app.use(bodyParser.json());      <br/>app.use(bodyParser.urlencoded({    <br/>  extended: true<br/>}));</span></pre><p id="6d73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在包中有<code class="fe ms mt mu mj b">bodyParser</code>，它包含了<code class="fe ms mt mu mj b">json</code>中间件，我们可以用它来解析来自 POST 请求的 JSON 数据。</p><p id="59fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">urlencoded</code>让我们解析 URL 编码的请求负载。</p><p id="88ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Express 4 没有 body-parser，所以我们必须按照上面的说明自己安装它。</p><p id="8ce2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Express 3 有这个包所以我们不用安装。</p><p id="671c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1791" class="mn lc iq mj b gy mo mp l mq mr">app.use(express.json());      <br/>app.use(express.urlencoded());</span></pre><p id="4c25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">分别解析 JSON 和 URL 编码的有效负载。</p><p id="5aa0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在有效载荷被解析之后，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b242" class="mn lc iq mj b gy mo mp l mq mr">app.post('/test', (req, res) =&gt; {<br/>  const name = req.body.name;<br/>  // ...<br/>});</span></pre><p id="3c66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">req.body</code>拥有我们在请求有效负载中包含的所有参数。</p><h1 id="f756" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在浏览器控制台中包含 jQuery</h1><p id="04f3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们在脚本标签中包含 jQuery，那么我们可以在控制台中使用它。</p><p id="90c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果不是，那么我们可以通过编写以下代码用 JavaScript 创建脚本标记:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="50ca" class="mn lc iq mj b gy mo mp l mq mr">const jq = document.createElement('script');<br/>jq.src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js";<br/>document.getElementsByTagName('head')[0].appendChild(jq);<br/>jQuery.noConflict();</span></pre><p id="8ebf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用 jQuery 的 URL 创建脚本标签，并将其附加到页面的 head 标签上。</p><h1 id="5f7f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 jQuery 打开一个引导模式窗口</h1><p id="2fe0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用 jQuery 很容易打开一个引导模型。</p><p id="9dab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以只获取模态的 DOM 元素，然后使用<code class="fe ms mt mu mj b">modal</code>方法。</p><p id="0ac9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要打开或关闭它，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4b58" class="mn lc iq mj b gy mo mp l mq mr">$('#modal').modal('toggle');</span></pre><p id="8dda" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">#modal</code>是模态的选择器。</p><p id="08a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了打开它，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8349" class="mn lc iq mj b gy mo mp l mq mr">$('#modal').modal('show');</span></pre><p id="24d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了结束它，我们写下:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9678" class="mn lc iq mj b gy mo mp l mq mr">$('#modal').modal('show');</span></pre><p id="cb7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以添加一个按钮来打开模态，方法是编写“</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f924" class="mn lc iq mj b gy mo mp l mq mr">&lt;button type="button" data-toggle="modal" data-target="#modal"&gt;open modal&lt;/button&gt;</span></pre><p id="619c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">data-target</code>将模态的选择器作为值。</p><p id="2614" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">data-toggle</code>设置为<code class="fe ms mt mu mj b">modal</code>让我们打开模态。</p><h1 id="6411" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">setTimeout 或 setInterval</h1><p id="1609" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">setTimeout</code>或<code class="fe ms mt mu mj b">setInterval</code>虽然听起来很像，但却是不同的。</p><p id="ebcb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">setTimeout</code>用于延时后运行代码。</p><p id="87f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">setInterval</code>用于定期运行代码。</p><p id="9188" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">setInterval</code>也可能因为 JavaScript 的单线程性质而延迟。</p><p id="93f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b5ec" class="mn lc iq mj b gy mo mp l mq mr">setTimeout(() =&gt; console.log('hello'), 1000);</span></pre><p id="6e0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后<code class="fe ms mt mu mj b">'hello'</code>在大约一分钟后被记录到控制台，因为它是 1000 毫秒。</p><p id="eec1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e4b2" class="mn lc iq mj b gy mo mp l mq mr">setInterval<!-- -->(() =&gt; console.log('hello'), 1000);</span></pre><p id="9a44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每秒将<code class="fe ms mt mu mj b">'hello'</code>记录到控制台。</p><p id="e4ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用两个函数返回的定时器对象来清除两个定时器。</p><p id="ed1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6460" class="mn lc iq mj b gy mo mp l mq mr">const timer = setTimeout(() =&gt; console.log('hello'), 1000);</span></pre><p id="c8cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c8c7" class="mn lc iq mj b gy mo mp l mq mr">const timer = setInterval<!-- -->(() =&gt; console.log('hello'), 1000);</span></pre><p id="bb94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a636" class="mn lc iq mj b gy mo mp l mq mr">clearTimeout(timer);</span></pre><p id="5bd1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8071" class="mn lc iq mj b gy mo mp l mq mr">clearInteval(timer);</span></pre><p id="e833" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从内存中删除计时器。</p><p id="432f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们不需要它们，我们应该这样做来将它们从内存中清除。</p><h1 id="130d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JavaScript 中具有多种情况的 Switch 语句</h1><p id="69b9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在一个案例中有多个<code class="fe ms mt mu mj b">case</code>子句。</p><p id="ba05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="902f" class="mn lc iq mj b gy mo mp l mq mr">switch (val){<br/>  case "foo":<br/>  case "bar":<br/>  case "baz": <br/>    alert('hello');<br/>    break;<br/>  default: <br/>    alert('default');<br/>}</span></pre><p id="a959" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个包含 3 个<code class="fe ms mt mu mj b">case</code>语句的子句，所以当<code class="fe ms mt mu mj b">val</code>为<code class="fe ms mt mu mj b">'foo'</code>、<code class="fe ms mt mu mj b">'bar;</code>或<code class="fe ms mt mu mj b">'baz'</code>时。</p><p id="41e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">'hello'</code>将显示在警报中。</p><p id="9583" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，将显示<code class="fe ms mt mu mj b">'default'</code>。</p><h1 id="b4b2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将带有 jQuery 的 div 放在屏幕中央</h1><p id="9787" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用 jQuery 将一个 div 居中显示在屏幕上。</p><p id="d7fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e9e5" class="mn lc iq mj b gy mo mp l mq mr">const center = (div) =&gt; {<br/>  div.css("position", "absolute");<br/>  div.css("transform", translate(-50%, -50%)");<br/>}</span></pre><p id="6866" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是带有我们想要居中的 div 的 DOM 元素。</p><p id="f03d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe ms mt mu mj b">position</code>设置为<code class="fe ms mt mu mj b">absolute</code>，这样我们就可以移动 div 了。</p><p id="29f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们使用<code class="fe ms mt mu mj b">transform</code>属性根据宽度和高度将 div 平移屏幕的 50%。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/ef7d1baa75a90ce610b9d9d96457d1aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kdi7DYJgLcbBZZhH"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@lukemichael?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卢克·麦克</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><h1 id="2e6b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d9c6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过用<code class="fe ms mt mu mj b">translate</code>属性平移 div 并将位置设置为<code class="fe ms mt mu mj b">abosolute</code>来使它居中。</p><p id="d8c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">switch</code>可以有一个匹配多个值的事例。</p><p id="0f1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过 body-parser 包在 Express 应用程序中获得 POST 参数。</p><p id="c7f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">setTimeout</code>和<code class="fe ms mt mu mj b">setInterval</code>是延时或周期性运行代码的定时器。</p></div></div>    
</body>
</html>