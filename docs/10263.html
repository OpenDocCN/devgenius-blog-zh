<html>
<head>
<title>DevOps — Basic Linux Commands Part 3, Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DevOps —基本 Linux 命令第 3 部分，网络</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/devops-basic-linux-commands-part-3-network-c81bba441f2?source=collection_archive---------7-----------------------#2022-10-19">https://blog.devgenius.io/devops-basic-linux-commands-part-3-network-c81bba441f2?source=collection_archive---------7-----------------------#2022-10-19</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="3290" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">网络故障排除</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj kg"><img src="../Images/78ecd5683a25b3d4615b2c856e6e025a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/0*cfyt2OwO35FeprQd.png"/></div></figure><p id="4ae6" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">一般网络配置和故障排除是 DevOps 日常工作中必不可少的<strong class="kq is"> </strong>部分。即使对于使用 Linux 系统的开发人员来说，了解 Linux 网络命令<strong class="kq is">也是一个额外的优势。</strong></p><p id="2020" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">在本文中，我将向您展示一些用于排除网络问题的常用 Linux 命令。</p><h1 id="d25b" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">主机名</h1><p id="9ee3" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">hostname</code>:获取 DNS(域名系统)名称，设置系统主机名或 NIS(网络信息系统)域名。主机名是赋予计算机的名称，它连接到网络。它的主要目的是在网络上唯一地识别。</p><p id="30cf" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="1729" class="mp ll ir mk b gz mq mr l ms mt">$ hostname -a ==&gt; Get alias name of the host system<br/>$ hostname -A ==&gt; Get all FQDNs<br/>$ hostname -f ==&gt; Get the FQDN. Contains short hostname and DNS domain name<br/>$ hostname -d ==&gt; Get the domain if local domains are set<br/>$ hostname -F file_name ==&gt; Set hostname from file<br/>$ hostname -i ==&gt; Get IP<br/>$ hostname -I ==&gt; Get all IPs</span></pre><h1 id="e542" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">砰</h1><p id="7d8d" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">ping</code>:用于检查主机之间的网络连通性。</p><p id="5ccc" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="8384" class="mp ll ir mk b gz mq mr l ms mt">$ ping google.com ==&gt; Check connectivity to google.com<br/>$ ping -c 5 google.com ==&gt; Send only 5 packets<br/>$ ping -s 40 google.com ==&gt; Set packet size<br/>$ ping -i 2 google.com ==&gt; Change time interval to 2 sec<br/>$ ping -c 2 -q google.com ==&gt; Only get summary<br/>$ ping -f google.com ==&gt; Send packets as soon as possible</span></pre><h1 id="a3a1" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">宿主</h1><p id="09b7" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">host</code>:获取主机 DNS 详细信息。查找特定域名的 IP 地址。</p><p id="1a6f" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="dc55" class="mp ll ir mk b gz mq mr l ms mt">$ host google.com ==&gt; Get IP(s) of google.com<br/>$ host ip_address ==&gt; Get domain details of ip_address<br/>$ host -v google.com ==&gt; Enable verbose output<br/>$ host -t ns google.com ==&gt; Get name servers<br/>$ host -t mx google.com ==&gt; Get mail servers<br/>$ host -R 3 google.com ==&gt; Specify number of retries</span></pre><h1 id="e3bc" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">卷曲</h1><p id="d4d9" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">curl</code>:用于传输数据的跨平台实用程序。它可用于解决几个网络问题。</p><p id="a9b1" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="dd16" class="mp ll ir mk b gz mq mr l ms mt">$ curl <a class="ae mu" href="https://url" rel="noopener ugc nofollow" target="_blank">https://url</a> ==&gt; Display content of url<br/>$ curl -# -O <a class="ae mu" href="https://url" rel="noopener ugc nofollow" target="_blank">https://url</a> ==&gt; Show progress meter<br/>$ curl -o file <a class="ae mu" href="https://url" rel="noopener ugc nofollow" target="_blank">https://url</a> ==&gt; Save to local file<br/>$ curl -O <a class="ae mu" href="https://url" rel="noopener ugc nofollow" target="_blank">https://url</a> ==&gt; Save the file with the same name as in url<br/>$ curl -C - -P <a class="ae mu" href="https://url" rel="noopener ugc nofollow" target="_blank">https://url</a> ==&gt; Resume download that was interrupted<br/>$ curl --limit-rate 1000K -O ==&gt; Limit download to 1000KB<br/>$ curl -u demo:password ==&gt; Download with authentication<br/>$ curl -x [proxy_name]:[port] ==&gt; Set proxy<br/>$ curl --noproxy "google.com" url ==&gt; Not to use proxy for google.com</span></pre><h1 id="e403" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">互联网协议（Internet Protocol 的缩写）</h1><p id="dbed" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">ip</code>:ifconfig 的替代品。可用于配置和检索有关系统网络接口的信息。</p><p id="9920" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="da56" class="mp ll ir mk b gz mq mr l ms mt">$ ip addr ==&gt; Show all interface information<br/>$ ip addr show eth1 ==&gt; Show eht1 interface information<br/>$ ip link ==&gt; Display link layer information<br/>$ ip -s link ==&gt; Show link statistics as well<br/>$ ip route ==&gt; Show route information<br/>$ ip a add/del 192.168.1.50/24 dev enp3s0 ==&gt; Add/delete IP to an interface<br/>$ ip link set eth1 up/down ==&gt; Enable/disable eth1<br/>$ ip neighbour ==&gt; View MAC address of the devices<br/>$ ip neighbour add/del (ip_address) dev eth1 ==&gt; Modify ARP entry</span></pre><h1 id="27b1" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">traceroute</h1><p id="2b87" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">traceroute</code>:使用 ICMP 协议，查找读取目的服务器所涉及的跳数。它还显示了跳之间所用的时间。</p><p id="fa52" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="4f68" class="mp ll ir mk b gz mq mr l ms mt">$ traceroute google.com ==&gt; Print hop info<br/>$ traceroute -4 google.com ==&gt; IPv4 hop info<br/>$ traceroute -6 google.com ==&gt; TPv6 hop info<br/>$ traceroute -f 5 google.com ==&gt; Start from 5th hop<br/>$ traceroute -g 192.168.33.24 google.com ==&gt; Route packet trhpugh gate<br/>$ traceroute -m 5 google.com ==&gt; Set max hops to 5<br/>$ traceroute -n google.com ==&gt; Do not resolve IP to domains<br/>$ traceroute -p 20211 google.com ==&gt; Set dest port to use, default is 33434</span></pre><h1 id="f548" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">挖苦</h1><p id="93a7" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">dig</code>:帮助您获取与域名相关的 DNS 记录。</p><p id="d057" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="3a51" class="mp ll ir mk b gz mq mr l ms mt">$ dig google.com ==&gt; Query domain A record<br/>$ dig google.com +short ==&gt; Compact information<br/>$ dig google.com +nocomments ==&gt; Remoev comments<br/>$ dig google.com ANY ==&gt; Query all DNS record<br/>$ dig google.com MX ==&gt; Query MX record<br/>$ dig google.com +trace ==&gt; Enable trace info<br/>$ dig google.com @8.8.8.8 ==&gt; Specify name servers<br/>$ dig google.com +noall +answer +stats ==&gt; Query statistics section</span></pre><h1 id="c030" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">网络管理命令行工具</h1><p id="12c6" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">nslookup</code>:检查 DNS 条目。它类似于 dig 命令。</p><p id="4ea1" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="3d8a" class="mp ll ir mk b gz mq mr l ms mt">$ nslookup google.com ==&gt; Query domain and get details<br/>$ nslookup 172.217.167.174 ==&gt; Reverse DNS lookup<br/>$ nslookup -type=any google.com ==&gt; Lookup for any record<br/>$ nslookup -type=MX google.com ==&gt; Lookup for MX record</span></pre><h1 id="9251" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">netcat (nc)</h1><p id="2944" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">nc</code>:强大的联网工具、安全工具、网络监控工具。</p><p id="1339" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="1056" class="mp ll ir mk b gz mq mr l ms mt">$ nc -l -p 1234 ==&gt; Listing on port 1234<br/>$ nc 168.134.12.34 1234 ==&gt; Connect to IP:port<br/>$ nc -z -v 127.0.0.1 22 ==&gt; Scanning single port<br/>$ nc -z -v 127.0.0.1 22 23 ==&gt; Scanning multi ports<br/>$ nc -z -v 127.0.0.1 22-244 ==&gt; Scanning multi ports by range</span></pre><h1 id="d6e5" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">tcpdump</h1><p id="b384" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">tcpdump</code>:用于捕获、过滤和分析网络流量。</p><p id="353e" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="0037" class="mp ll ir mk b gz mq mr l ms mt">$ tcpdump -i eth1 ==&gt; Capture packets from interface eth1<br/>$ tcpdump -n -i eth1 ==&gt; Capture from eth1 with IPs<br/>$ tcpdump -i eth1 tcp ==&gt; Capture only tcp packets<br/>$ tcpdump -c 5 -i eth1 ==&gt; Capture only 5 packets<br/>$ tcpdump -A -i eth1 ==&gt; Capture packets in ASCII format<br/>$ tcpdump -D ==&gt; Display all available interfaces<br/>$ tcpdump -XX -i eht1 ==&gt; Display packets in both HEX and ASCII format<br/>$ tcpdump -w captured.pcap -i eth1 ==&gt; Save captured packets to file<br/>$ tcpdump -r captured.pcap ==&gt; Read in captured file</span></pre><h1 id="c5ef" class="lk ll ir bd lm ln lo lp lq lr ls lt lu jx lv jy lw ka lx kb ly kd lz ke ma mb bi translated">nmap</h1><p id="aee4" class="pw-post-body-paragraph ko kp ir kq b kr mc js kt ku md jv kw kx me kz la lb mf ld le lf mg lh li lj ik bi translated"><code class="fe mh mi mj mk b">nmap</code>:用于做网络探测和安全审计。</p><p id="9771" class="pw-post-body-paragraph ko kp ir kq b kr ks js kt ku kv jv kw kx ky kz la lb lc ld le lf lg lh li lj ik bi translated">常见用法:</p><pre class="kh ki kj kk gu ml mk mm mn aw mo bi"><span id="ffcb" class="mp ll ir mk b gz mq mr l ms mt">$ nmap google.com ==&gt; Scan with hostname<br/>$ namp 142.250.31.138 ==&gt; Scan with IP<br/>$ nmap -v google.com ==&gt; Show verbose output<br/>$ nmap ip1 ip2 ip3 ==&gt; Scan multiple host<br/>$ nmap 103.76.228.* ==&gt; Scan whole subnet<br/>$ nmap -sA ip ==&gt; Scan to detect firewall settings<br/>$ nmap -iL input.txt ==&gt; Scan from file<br/>$ namp -A ip ==&gt; Scan aggressively provides more valuable info</span></pre></div></div>    
</body>
</html>