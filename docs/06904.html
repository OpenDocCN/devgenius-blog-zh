<html>
<head>
<title>SwiftUI Tutorial: Working with Toggle</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI 教程:使用切换</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/swiftui-tutorial-working-with-toggle-5393d8e83f0b?source=collection_archive---------5-----------------------#2022-02-10">https://blog.devgenius.io/swiftui-tutorial-working-with-toggle-5393d8e83f0b?source=collection_archive---------5-----------------------#2022-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e243" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何制作拨动开关</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1251e40af7c12ce2fa1a89775854ab11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jgcxfUXNzaoWQpcgzpC12g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图一。</figcaption></figure><p id="b156" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">SwiftUI 的 Toggle 允许开发人员轻松地创建一个类似开关的控件，用于打开和关闭状态。从程序员的角度来看，这意味着真和假状态。Toggle 的工作方式与 UIKit 框架中的 UISwitch 相同。</p><blockquote class="lr ls lt"><p id="7e0e" class="kv kw lu kx b ky kz jr la lb lc ju ld lv lf lg lh lw lj lk ll lx ln lo lp lq ij bi translated"><em class="iq">本文是我的</em> <a class="ae ly" href="https://arc-sosangyo.medium.com/list/swiftui-tutorial-03734e631240" rel="noopener"> <em class="iq"> SwiftUI 教程</em> </a> <em class="iq">系列的一部分。</em></p></blockquote><p id="e4f1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">确保您已经有一个打开的项目来进行本练习。如果你需要一步一步的过程，你可以使用这个<a class="ae ly" rel="noopener ugc nofollow" target="_blank" href="/introduction-to-swiftui-creating-new-project-9adc502e1804">链接</a>。</p><p id="2343" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">由于 toggle 的工作方式类似于开关，所以它首先需要一个<a class="ae ly" href="https://medium.com/geekculture/swiftui-tutorial-state-and-binding-b7e80b4de622" rel="noopener">状态</a>变量<a class="ae ly" href="https://medium.com/@arc-sosangyo/swift-programming-tutorial-variables-670ceea20bd1" rel="noopener">来存储布尔值。在内容视图中写下:</a></p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="bb8e" class="me mf iq ma b gy mg mh l mi mj">@State private var darkMode: Bool = false</span></pre><p id="cdfa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lu">切换按钮</em>有两个强制参数:<em class="lu">标签</em>和<em class="lu">标签</em>用于绑定布尔状态变量。用以下代码修改 body 视图:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="3e24" class="me mf iq ma b gy mg mh l mi mj">var body: some View {<br/>    <br/>    Toggle("Dark Mode", isOn: $darkMode)<br/>    <br/>} //body</span></pre><p id="cbcd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你迷路了，这是全部代码:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="2e7b" class="me mf iq ma b gy mg mh l mi mj">struct ContentView: View {<br/>    <br/>    @State private var darkMode: Bool = false<br/>    <br/>    var body: some View {<br/>        <br/>        Toggle("Dark Mode", isOn: $darkMode)<br/>        <br/>    } //body<br/>    <br/>} //ContentView</span></pre><p id="05c5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是创建切换的简单之处。您可以运行应用程序并尝试按下开关。你应该看到一个开关一样的动画，每次你按下开关。</p><h1 id="11cb" class="mk mf iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">附加修改器</h1><p id="bccf" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">还有另一种创建 Toggle 的方法，允许您自定义标签。像这样修改切换代码:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="6eb4" class="me mf iq ma b gy mg mh l mi mj">Toggle(isOn: $darkMode) {<br/>    Text("Dark Mode")<br/>}</span></pre><p id="1a48" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你熟悉 SwiftUI 中的<a class="ae ly" href="https://medium.com/dev-genius/swiftui-tutorial-working-with-text-15de81494a07" rel="noopener">文本</a>视图是如何工作的。然后你就会知道这种格式允许你在文本下面放置修饰语。比方说，我们想改变字体，增加它的重量。作为一个额外的修改器，我们也将添加填充来切换。记下这段代码:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="7bf6" class="me mf iq ma b gy mg mh l mi mj">Toggle(isOn: $darkMode) {<br/>    Text("Dark Mode")<br/>        .font(.title3)<br/>        .fontWeight(.black)<br/>}<br/>.padding()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/a120de091966303b348b9f3a9ea2de3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*SRNTAVW2GHLZp0_sul_ECQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图二。带修饰符的 Toggler</figcaption></figure><p id="efac" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您还可以通过使用来更改开态颜色。<em class="lu">色调</em>修改器。假设我们想把它改成紫色。像这样修改现有代码:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="dd12" class="me mf iq ma b gy mg mh l mi mj">Toggle(isOn: $darkMode) {<br/>    Text("Dark Mode")<br/>        .font(.title3)<br/>        .fontWeight(.black)<br/>}<br/>.tint(.purple)<br/>.padding()</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/47837a8ad1acfaa916e6f28fadcd7905.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*L0LfGcsXLhYQxMk8QkWVLg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 3。更改色调颜色</figcaption></figure><p id="354b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于 iOS 15 及更高版本，您可以使用<em class="lu">更改切换按钮的外观。toggleStyle(。按钮)</em>修饰符。下面的代码显示了它是如何工作的:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="c2eb" class="me mf iq ma b gy mg mh l mi mj">Toggle(isOn: $darkMode) {<br/>    Text("Dark Mode")<br/>        .font(.title3)<br/>        .fontWeight(.black)<br/>}<br/>.tint(.purple)<br/>.toggleStyle(.button)<br/>.padding()</span></pre><p id="6f2e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">图 4 和图 5 显示了开和关的情况:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/c58726fbce9c8ff1dc9aa461b6a2a40e.png" data-original-src="https://miro.medium.com/v2/resize:fit:460/format:webp/1*4EA3b0O83DFseZsod5qtRg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 4。关闭</figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/2059dfe03c278dcb136a28bbf92b4be2.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*x0CPGrOn9GYpWeIlVe8Tfg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 5。打开</figcaption></figure><h1 id="74e6" class="mk mf iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">运用我们所学</h1><p id="c578" class="pw-post-body-paragraph kv kw iq kx b ky nb jr la lb nc ju ld le nd lg lh li ne lk ll lm nf lo lp lq ij bi translated">现在是时候使用我们练习时使用的代码库来进行一些应用了。当 toggle 打开时，我们将应用程序转换为黑暗模式。下面是该应用程序的外观:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/91644c5ec52ccb5ac524468e414eaad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*-HPYW0-RhdaCmHHUapLrsw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 6。关闭切换时应用程序的外观</figcaption></figure><p id="f494" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">打开切换会将其外观更改为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/75198390fe60f0b2dfeb7f87ec912570.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*Si3mmQpNh1nhTmkT9l1HhQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 7。打开时应用程序的外观</figcaption></figure><p id="1f8a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们开始吧。使用相同的代码库，移除。toggleStyle(。按钮)。然后我们将添加一个<a class="ae ly" href="https://medium.com/@arc-sosangyo/swift-programming-tutorial-conditional-statement-f57aefd630ce" rel="noopener"> if 语句</a>，如果 darkMode 变量为真，它将把 ZStack 的颜色改为黑色。在 ZStack 中添加以下代码:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="1681" class="me mf iq ma b gy mg mh l mi mj">if darkMode == true {<br/>    Color.black.ignoresSafeArea(.all)<br/>}</span></pre><p id="310a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，如果 darkMode 为真，文本颜色需要是白色，如果为假，文本颜色需要是黑色。这可以通过使用内部的<a class="ae ly" href="https://medium.com/@arc-sosangyo/swift-programming-tutorial-basic-operators-72dc48116b1c" rel="noopener">三元</a>运算符来完成。<em class="lu">前景颜色</em>修饰符是这样的:</p><pre class="kg kh ki kj gt lz ma mb mc aw md bi"><span id="bbbe" class="me mf iq ma b gy mg mh l mi mj">Toggle(isOn: $darkMode) {<br/>    Text("Dark Mode")<br/>        .font(.title3)<br/>        .fontWeight(.black)<br/>        .foregroundColor(darkMode ? .white : .black)<br/>}<br/>.tint(.purple)<br/>.padding()</span></pre><p id="996b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是源代码的截图，以防你迷路:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/1a48b0c1eb7a3fa809595e68bc203c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I__4ubwWAJp2C2GhPlOfyQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">图 8。最终源代码</figcaption></figure><p id="df46" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">运行应用程序并尝试按下切换开关。该应用程序应该改变到黑暗模式，如果打开，如果关闭返回。干得好！</p><p id="f0b7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我在 github 上传了源代码。点击这个<a class="ae ly" href="https://github.com/athurion/SwiftUI-Tutorial-Working-with-Toggle/blob/main/ContentViewToggle.swift" rel="noopener ugc nofollow" target="_blank">链接</a>就可以了。</p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><p id="e561" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">愿法典与你同在，</p><p id="6a9b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">-电弧</p></div></div>    
</body>
</html>