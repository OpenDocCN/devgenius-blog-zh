<html>
<head>
<title>Code Smell 28 — Setters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">气味代码28 —设定器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/code-smell-28-setters-5b0e764049aa?source=collection_archive---------4-----------------------#2020-11-19">https://blog.devgenius.io/code-smell-28-setters-5b0e764049aa?source=collection_archive---------4-----------------------#2020-11-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="6700" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">初级程序员做的第一个练习。ide、教程和高级开发人员不断教他们这种反模式。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/dea3ffac1a8897a085b3fdb0b2ecc0cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N8vJoRVwo-s6srcl0kTTCQ.jpeg"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">由<a class="ae kz" href="https://unsplash.com/@vimarovi" rel="noopener ugc nofollow" target="_blank">维克多·罗德里格斯</a>在<a class="ae kz" href="https://unsplash.com/s/photos/crowded" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="098a" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">问题</h1><ul class=""><li id="2003" class="ly lz in jm b jn ma jr mb jv mc jz md kd me kh mf mg mh mi bi translated">易变性</li><li id="bff3" class="ly lz in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated">信息隐蔽</li><li id="9da1" class="ly lz in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated">贫血模型</li><li id="1068" class="ly lz in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated">快速失败</li><li id="c0d7" class="ly lz in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated">完整</li><li id="03c2" class="ly lz in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated">重复代码</li></ul><h1 id="672a" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">解决方法</h1><ol class=""><li id="731d" class="ly lz in jm b jn ma jr mb jv mc jz md kd me kh mo mg mh mi bi translated">避免Setters</li><li id="d7cc" class="ly lz in jm b jn mj jr mk jv ml jz mm kd mn kh mo mg mh mi bi translated">设置私有初始化的基本属性。</li></ol><h1 id="876a" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">示例代码</h1><h2 id="134b" class="mp lb in bd lc mq mr dn lg ms mt dp lk jv mu mv lo jz mw mx ls kd my mz lw na bi translated">错误的</h2><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="cf5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">突变带来了很多问题</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="dcee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">违反了信息隐藏</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h1 id="c734" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">对吧</h1><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h1 id="67b1" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">侦查</h1><p id="edf3" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv nd jx jy jz ne kb kc kd nf kf kg kh ig bi translated">第一步是禁止公共属性(如果语言允许的话)。</p><p id="ff62" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">其次，我们将搜索方法<em class="ki"> setXXXX() </em>，分析方法结构(应该是对属性<em class="ki"> xxxx </em>的赋值)。</p><p id="3d3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们不应该禁止设置<em class="ki">意外状态</em>的方法，因为这是有效的。他们不应该被命名为<em class="ki">设置者</em>，因为他们要求对象<em class="ki">改变</em>，但是他们不<em class="ki">设置</em>任何东西。</p><h1 id="5ff5" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">例子</h1><ul class=""><li id="e4d4" class="ly lz in jm b jn ma jr mb jv mc jz md kd me kh mf mg mh mi bi translated">DTOs</li></ul><h1 id="7009" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">例外</h1><p id="bc58" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv nd jx jy jz ne kb kc kd nf kf kg kh ig bi translated">对于非必要的属性，设置属性是安全的。</p><p id="307b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本质行为是区分一个物体和另一个物体的东西。</p><p id="af63" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">与行为有关，与<em class="ki">数据</em>无关。它不是一个<em class="ki">主键</em>定义。</p><p id="615e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一些模式，像<a class="ae kz" href="https://en.wikipedia.org/wiki/Builder_pattern" rel="noopener ugc nofollow" target="_blank"> Builder </a>需要以一种受控的、递增的方式设置部件。验证在最后完成，并且<a class="ae kz" href="https://codeburst.io/what-is-software-9a78c1172cf9" rel="noopener" target="_blank">真实实体隐喻</a>需要它。</p><p id="28f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">设置<em class="ki">偶然值</em>有许多已经提到的缺点和考虑。</p><h1 id="1a89" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">标签</h1><ul class=""><li id="e36e" class="ly lz in jm b jn ma jr mb jv mc jz md kd me kh mf mg mh mi bi translated">变化</li><li id="7f3c" class="ly lz in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated">信息隐蔽</li></ul><h1 id="d13b" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">结论</h1><p id="272e" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv nd jx jy jz ne kb kc kd nf kf kg kh ig bi translated">创建不完整和贫血的对象是一种非常糟糕的做法，违反了<br/>可变性、快速失效原则和真实世界<a class="ae kz" href="https://codeburst.io/the-one-and-only-software-design-principle-5328420712af" rel="noopener" target="_blank">双射</a>。</p><h1 id="70e3" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">关系</h1><div class="ng nh gp gr ni nj"><a href="https://medium.com/dev-genius/code-smell-01-anemic-models-f9fb5a1323b3" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">代码气味01——贫血模型</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">你的对象是一堆没有行为的公共属性。</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kt nj"/></div></div></a></div><h1 id="1994" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">更多信息</h1><div class="ng nh gp gr ni nj"><a href="https://codeburst.io/fail-fast-3f3f036032b0" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">快速失败</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">失败是时尚。制造比思考容易得多，失败不是耻辱，让我们把这个想法带到我们的…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">codeburst.io</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx kt nj"/></div></div></a></div><p id="d513" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里是关于<em class="ki">设置器</em>的完整讨论</p><div class="ng nh gp gr ni nj"><a href="https://medium.com/dev-genius/nude-models-part-i-setters-77ac784a91f3" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">裸体模特第一部分:模特</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">可靠的数据结构及其有争议的(写)访问。</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx kt nj"/></div></div></a></div></div><div class="ab cl oa ob hr oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ig ih ii ij ik"><blockquote class="oh oi oj"><p id="8c62" class="jk jl ki jm b jn jo jp jq jr js jt ju ok jw jx jy ol ka kb kc om ke kf kg kh ig bi translated">面向对象的编程语言支持封装，从而提高了软件重用、精炼、测试、维护和扩展的能力。只有在设计过程中最大化封装，才能实现这种支持的全部好处。</p></blockquote><p id="4b01" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">丽贝卡·沃斯-布洛克</em></p></div><div class="ab cl oa ob hr oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ig ih ii ij ik"><p id="557f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本文是CodeSmell系列的一部分。</p><div class="ng nh gp gr ni nj"><a href="https://medium.com/dev-genius/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">如何找到你的代码中有问题的部分</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">代码很难闻。让我们看看如何改变香味。</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="on l nu nv nw ns nx kt nj"/></div></div></a></div></div></div>    
</body>
</html>