<html>
<head>
<title>Heroku container deploy button: Deploy Multilanguage Jupyter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Heroku容器部署按钮:部署多语言Jupyter</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/heroku-container-deploy-button-deploy-multilanguage-jupyter-d58677f45bea?source=collection_archive---------15-----------------------#2021-12-14">https://blog.devgenius.io/heroku-container-deploy-button-deploy-multilanguage-jupyter-d58677f45bea?source=collection_archive---------15-----------------------#2021-12-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="a570" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建和配置Heroku app.json以部署内容化应用的指南。</p><p id="38f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我需要一个web <a class="ae ki" href="https://jupyter.org/" rel="noopener ugc nofollow" target="_blank"> Jupyter笔记本</a>与<a class="ae ki" href="https://github.com/SpencerPark/IJava" rel="noopener ugc nofollow" target="_blank"> Java </a>，我需要这个程序可以被许多其他人以一种简单的方式复制。因此，我创建了一个带有Heroku deploy按钮的git repo:你可以在Heroku注册，点击该按钮，按照程序操作，你就拥有了自己的多语言jupyter笔记本。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/9312a4f2bd8de73d688932e97f619cc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/format:webp/1*q9nqweuFNW7I0SD-HYg6NA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Heroku部署按钮</figcaption></figure><p id="acb5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我从使用IJava作为Jupyter内核的<a class="ae ki" href="https://z-uo.medium.com/jupyter-with-multiple-languages-1ae58e98dc8e" rel="noopener">多语言容器</a>开始。我创建了Heroku文件，我想解释配置Heroku按钮来部署您的容器化应用程序的过程。</p><p id="a476" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我的结果在repo<a class="ae ki" href="https://github.com/nicolalandro/java_junit_jupyter" rel="noopener ugc nofollow" target="_blank">Java _ JUnit _ jupyter</a>witch中，我放了一些学习<a class="ae ki" href="https://junit.org/junit5/" rel="noopener ugc nofollow" target="_blank"> JUnit </a>和<a class="ae ki" href="https://site.mockito.org/" rel="noopener ugc nofollow" target="_blank"> Mockyto </a>基础知识的示例笔记本来创建自动化测试。</p><p id="dd51" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个jupyter包含:<a class="ae ki" href="https://coq.inria.fr/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> Coq </strong> </a> <strong class="jm io">，</strong><a class="ae ki" href="https://vatlab.github.io/sos-docs/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">SoS</strong></a><strong class="jm io">，</strong><a class="ae ki" href="https://www.oracle.com/java/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Java</strong></a><strong class="jm io">，</strong><a class="ae ki" href="https://www.python.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">python 3</strong></a><strong class="jm io">。</strong></p><h2 id="7363" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated">Dockerfile文件</h2><p id="bd27" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">开始创建Dockerfile文件:</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="61ac" class="kv kw in lu b gy ly lz l ma mb">FROM nicolalandro/multilanguage-jupyter:1.0                                                           ADD notebooks /server/notebook</span></pre><p id="8165" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我的例子中很简单，因为我从一个准备好的容器开始，我添加了笔记本文件夹，但是您可以根据需要创建Docker容器。</p><h2 id="7735" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated">Heroku配置</h2><p id="1d98" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">heroku配置需要两个东西一个app.json和一个heroku.yml(仅用于容器配置)。</p><p id="bc08" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">heroku.yml可以配置我们的容器的名称和运行命令:</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="cd03" class="kv kw in lu b gy ly lz l ma mb">build:                               <br/>  docker:                                 <br/>   web: Dockerfile                             <br/>  run:                               <br/>   web: jupyter notebook --ip=0.0.0.0 --port=$PORT --allow-root --NotebookApp.token="$JUPYTER_TOKEN" --no-browser</span></pre><p id="d50f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">记住要指定$PORT和一个环境变量，因为heroku容器会自动选择暴露的端口。我还添加了$JUPYTER_TOKEN，这是JUPYTER的密码，每个pearson都可以在部署过程中选择它。</p><p id="01f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">添加app.json文件，该文件是heroku为部署您的应用程序而搜索的文件:</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="ac85" class="kv kw in lu b gy ly lz l ma mb">{<br/>  "name": "APP NAME",<br/>  "description": "APP DESC",<br/>  "repository": "https://YOUR/REPO/LINK.git",<br/>  "keywords": [<br/>    "productivity",<br/>    "java",<br/>    "jupyter"<br/>  ],<br/>  "stack": "container",<br/>  "formation": {<br/>    "web": {<br/>      "quantity": 1<br/>    }<br/>  },<br/>  "env": {<br/>    "JUPYTER_TOKEN": {<br/>      "description": "A token to put into the url to use jupyter.",<br/>      "value": ""<br/>    }<br/>  }<br/>}</span></pre><p id="7a59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">名称、描述和报告简单易懂，关键字可以由你自由编写。我们选择容器作为堆栈，并且我们需要将服务器定义到该结构中。我们也可以用env字段定义环境变量。</p><h2 id="5014" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated">部署按钮</h2><p id="1d70" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">使用github repo链接(https://YOUR/REPO/LINK.git)将heroku deploy按钮添加到README.md中:</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="5b84" class="kv kw in lu b gy ly lz l ma mb">[![Deploy](https://www.herokucdn.com/deploy/button.svg)](https://YOUR/REPO/LINK.git)</span></pre><p id="5793" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">提交并推送您的repo所有这些内容，然后您就可以一键部署到heroku上了。</p><h2 id="ee1c" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated">部署Heroku</h2><p id="2f6e" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">可以在repo git上的<a class="ae ki" href="https://github.com/nicolalandro/java_junit_jupyter" rel="noopener ugc nofollow" target="_blank">自述文件</a>中找到可视化指南。</p><ul class=""><li id="273e" class="mc md in jm b jn jo jr js jv me jz mf kd mg kh mh mi mj mk bi translated">登录heroku</li><li id="01a2" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">单击您的部署按钮</li><li id="6dc3" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">选择您最喜欢的应用程序名称</li><li id="e269" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">填充环境</li><li id="169b" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">点击“部署应用程序”按钮</li><li id="6795" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">等等…</li><li id="45ab" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">点击“查看”按钮</li><li id="5dd4" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">你在线了！</li></ul><h2 id="91ba" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated">注释和“问题”</h2><p id="cbd5" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">我不知道为什么，但默认情况下，Scala、Ruby和javascript内核在开始时不工作，但你可以运行这个命令并刷新jupyter页面来拥有它:你可以点击文件新建并查看这些语言。</p><p id="a098" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Javascript:</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="95a6" class="kv kw in lu b gy ly lz l ma mb">ijsinstall</span></pre><p id="ffa3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">红宝石:</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="b8b9" class="kv kw in lu b gy ly lz l ma mb">iruby register --force</span></pre><p id="e478" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Scala:</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="fd35" class="kv kw in lu b gy ly lz l ma mb">cd /server<br/>./almond --install</span></pre><h2 id="ace9" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated">结论</h2><p id="9d02" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">Heroku是一个非常有用的服务，提供免费和付费的潜力，但也有了免费版本，我们可以做很多事情。我认为这个指南足够简单，让每个人都可以使用这个简单的服务，只需点击一下按钮就可以部署开源项目。</p></div></div>    
</body>
</html>