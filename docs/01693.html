<html>
<head>
<title>Javascript Prototypes and the “new” keyword — As simple as possible</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Javascript 原型和“new”关键字——尽可能简单</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-prototypes-and-the-new-keyword-as-simple-as-possible-df303c84167b?source=collection_archive---------19-----------------------#2020-07-09">https://blog.devgenius.io/javascript-prototypes-and-the-new-keyword-as-simple-as-possible-df303c84167b?source=collection_archive---------19-----------------------#2020-07-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4fe25a49087207e94b67d4b1afa0e959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BdTRBRoFIDk8pfsfeHHa9Q.png"/></div></div></figure><p id="6d92" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">JavaScript 是一种基于 T2 原型的语言。这种语言有一个不太常见但很强大的特性，你可以直接创建对象而不需要类或其他抽象。这是语言的核心部分。</p><p id="a66b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所有 JavaScript 对象都从原型继承属性和方法，其中 Object.prototype 位于原型继承链的顶端。</p><p id="7670" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将用[[Prototype]]来引用这个链中的一个链接。所以每当你看到[[Prototype]]的时候，就把它当成一个对象到另一个对象的链接。</p><p id="2097" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">边注:</strong> [[Prototype]]在大多数但不是所有的 Javascript 环境中被称为“__proto__”。</p><p id="5b5b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了更深入地研究 Javascript 原型，看一看“new”操作符是个好主意。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kt"><img src="../Images/3e75b93b0eb25e487d4da8a1cd1ee074.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wbPgczGD-tMwp-jguLXmHA.png"/></div></div></figure><p id="5a95" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当您使用“新”关键字时，会发生 5 种情况:</p><ol class=""><li id="b7ba" class="ky kz in jx b jy jz kc kd kg la kk lb ko lc ks ld le lf lg bi translated">创建了一个新对象。这个对象的类型就是 object。</li></ol><p id="1830" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.在这个新对象上，[[Prototype]]属性被设置为构造函数的原型对象。</p><p id="f56e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">3.“this”变量被设置为指向新创建的对象。</p><p id="8fe3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">4.每当使用“this”时，它就使用新创建的对象来执行构造函数。</p><p id="814c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">5.除非构造函数返回对象引用，否则将返回新创建的对象。</p><p id="a94e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最难理解的一步可能是第二步。每个对象和函数都有这个[[Prototype]]属性，并且有一些限制。它只能在创建时设置，并且只能通过 object . getprototypeof(someObject)读取。</p><p id="4549" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">除了[[Prototype]]，函数还有另一个属性叫做“Prototype”，这个可以像我们习惯的那样读取和更改。此属性可用于为您创建的对象实现继承的属性和方法。如果请求了 ourNewThing 的一个未定义的属性，Javascript 将检查该对象的[[Prototype]]对象以获得该属性。这就是 Javascript 如何实现类似于类继承的东西。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/e620c1eb7fb25b456d73fe73aec5b06f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*3c65t_sHV_b7iBulGpY5yg.png"/></div></figure><p id="e818" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们看看上面的例子。objectCreator 只不过是您的标准 Javascript。它什么也不返回，只是在“this”上添加一个名为“one”的属性，值为 1。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi li"><img src="../Images/1cbeba0812a6a586d1ffb1c0c10e9606.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*xvT-fD6omkQWFItLTYFiEA.png"/></div></figure><p id="5323" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">objectCreator 的原型现在已经用新的属性进行了修改。</p><p id="f566" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了这个改变。让我们试试我们的 objectCreator 构造函数。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/85d2ebd2b10f0c725b34927abdb88499.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/format:webp/1*cnZlXnEg4yDbqRt67nXy7g.png"/></div></figure><p id="c6a3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">刚刚发生了什么？我可以分成四个步骤:</p><p id="88af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">1.创建了一个名为 createdObject 的对象。作为这样一个新生的对象，createdObject 就像你从 object literal {}中得到的一样。</p><p id="5a1f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.createdObject 的[[Prototype]]属性被设置为 objectCreator.prototype 的当前值。</p><p id="a339" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">3.运行 objectCreator 函数，将“this”设置为 createdObject。因此，createdObject.one 被设置为 1。</p><p id="f360" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">4.新创建的对象被返回。</p><p id="927c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们通过查看 createdObject 的属性来研究它:</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/bac2874120fbf02d25199bc90718daa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*tVjm_c3I2d5wxp3f7Yc3SA.png"/></div></figure><p id="abd4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">createdObject 没有名为“two”的属性，因此 JavaScript 查看<br/>它的[[Prototype]]。createdObject 的[[Prototype]]与 objectCreators.prototype 相同，其中有一个值为 2 的“two”属性。</p><p id="c138" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如您所见，这很容易让人联想到类继承。</p><p id="eb41" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在是压轴戏！如果我们改变 objectCreator.prototype 会发生什么？</p><p id="5b4e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果 objectCreator.prototype 被赋予一个新的对象值，createdObject 的[[Prototype]]将不会改变。但是！如果您<br/>修改 objectCreator.prototype 的属性，那么<br/>原型和[[Prototype]]都会被修改。所以 createdObject 也变了。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/a0d7f890869f8c49f19a3f14f0c552c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1196/format:webp/1*zHWjJJqq6wgeoTxefl-QOA.png"/></div></figure><h1 id="65b6" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">一些结尾词</h1><p id="0b51" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">呸。那是很难接受的。如果你能走到这一步，我向你致敬。</p><p id="3b90" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以我的经验来看，理解这些概念可能需要几年的时间，所以不要为此而紧张。如果这对你来说是新的，你可能会理解它，然后感到困惑。然后再理解一遍，多次。</p><p id="3e9d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望我说服了你，理解 Javascript 中的原型、“新”和“这个”是值得投资的。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="e675" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">祝你在未来的 Javascript 背书中好运！</p></div></div>    
</body>
</html>