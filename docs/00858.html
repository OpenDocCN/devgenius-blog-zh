<html>
<head>
<title>Don’t just test the happy path</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要只测试快乐路径</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/dont-just-test-the-happy-path-e3fd565bad53?source=collection_archive---------4-----------------------#2020-06-18">https://blog.devgenius.io/dont-just-test-the-happy-path-e3fd565bad53?source=collection_archive---------4-----------------------#2020-06-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div class="gh gi jn"><img src="../Images/f8e6821707cf319c188b4465f72ce290.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/0*pEJInoDqm-ENeSCT.jpg"/></div></figure><p id="ce79" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">这篇文章的要点是，当涉及到编写和测试代码时，脾气暴躁的开发人员仍然可以在快乐的道路上蹦蹦跳跳。</p><p id="c656" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://crmbusiness.wordpress.com/2015/04/29/developers-need-to-stop-being-so-happy/A%20Practical%20Handbook%20of%20Software%20Construction" rel="noopener ugc nofollow" target="_blank">代码完成2 </a>有一个有趣的段落。</p><h2 id="6134" class="kt ku iq bd kv kw kx dn ky kz la dp lb kf lc ld le kj lf lg lh kn li lj lk ll bi translated">避免失败</h2><blockquote class="lm"><p id="88ce" class="ln lo iq bd lp lq lr ls lt lu lv kr dk translated"><em class="lw"> Petroski认为，许多引人注目的桥梁故障之所以发生，是因为专注于以前的成功，而没有充分考虑可能的故障模式。他的结论是，如果设计者仔细考虑了桥梁可能发生故障的方式，而不仅仅是复制其他成功设计的属性，像塔科马海峡大桥这样的故障是可以避免的</em></p></blockquote><h1 id="01d6" class="lx ku iq bd kv ly lz ma ky mb mc md lb me mf mg le mh mi mj lh mk ml mm lk mn bi translated">开发商太高兴了</h1><p id="9386" class="pw-post-body-paragraph ju jv iq jw b jx mo jz ka kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr ij bi translated">发展的过程通常是</p><ul class=""><li id="19ce" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr my mz na nb bi translated">收集的需求</li><li id="ebf0" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated">指定的功能要求</li><li id="f7b3" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated">规定的技术要求</li><li id="0be2" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated">为交付需求而编写的代码</li><li id="fa46" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated">测试-&gt;修复错误周期</li></ul><p id="f92f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">开发人员通常专注于交付功能，这通常被称为遵循<a class="ae ks" href="http://en.wikipedia.org/wiki/Happy_path" rel="noopener ugc nofollow" target="_blank">快乐路径</a></p><p id="7a77" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">维基描述为<a class="ae ks" href="http://en.wikipedia.org/wiki/Happy_path" rel="noopener ugc nofollow" target="_blank">快乐之路</a></p><blockquote class="nh ni nj"><p id="b28b" class="ju jv nk jw b jx jy jz ka kb kc kd ke nl kg kh ki nm kk kl km nn ko kp kq kr ij bi translated"><em class="iq">在软件或信息建模的上下文中，一个</em> <strong class="jw ir"> <em class="iq">快乐路径</em> </strong> <em class="iq">是一个默认的</em> <a class="ae ks" href="http://en.wikipedia.org/wiki/Scenario_(computing)" rel="noopener ugc nofollow" target="_blank"> <em class="iq">场景</em> </a> <em class="iq">以没有</em> <a class="ae ks" href="http://en.wikipedia.org/wiki/Exception_handling" rel="noopener ugc nofollow" target="_blank"> <em class="iq">异常或错误条件</em> </a> <em class="iq">为特征，并且包含了如果一切按预期进行所执行的活动序列。</em><a class="ae ks" href="http://en.wikipedia.org/wiki/Happy_path#cite_note-1" rel="noopener ugc nofollow" target="_blank"><em class="iq"/></a><a class="ae ks" href="http://en.wikipedia.org/wiki/Happy_path#cite_note-2" rel="noopener ugc nofollow" target="_blank"><em class="iq">【2】</em></a><em class="iq">例如，函数验证信用卡号码的最佳路径是</em> <a class="ae ks" href="http://en.wikipedia.org/wiki/Validation_rule" rel="noopener ugc nofollow" target="_blank"> <em class="iq">验证规则</em> </a> <em class="iq">都不会引发错误，从而让执行成功地继续到最后，生成肯定的响应。</em></p></blockquote><p id="931c" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">当最终用户偏离了快乐的道路，进入了可选择的道路或异常的道路时，专注于快乐的道路和创建所需的功能就为错误留下了空间。</p><p id="3a7f" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">开发人员自然倾向于快乐路径，经常关注快乐路径测试。开发人员不会从最终用户的角度来看功能，而是主要从代码的角度来看功能。</p><p id="c6be" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">对于开发者来说，为什么用户会使用意外的值，用户将如何使用该功能，或者他们试图使用该功能来实现什么，这些都不是显而易见的。</p><p id="638b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">快乐路径测试可能会给空值、不正确的值和大量错误检查/验证错误留下漏洞，从而溜进生产系统，因为没有人测试过这些路径。</p><p id="cf44" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">另一个问题是，开发人员低估了终端用户的随机行为。</p><h1 id="283a" class="lx ku iq bd kv ly lz ma ky mb mc md lb me no mg le mh np mj lh mk nq mm lk mn bi translated">开发人员不是好的测试人员</h1><figure class="ns nt nu nv gt jr gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/c874025d36cd8936bce2bf7ce1b6e100.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/0*mL7c1bTyw8Fy6ZAX.jpg"/></div></figure><p id="2a88" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">开发人员不擅长测试他们自己的代码，让其他人测试代码被认为是一种很好的做法。</p><p id="056b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">开发人员忽略bug的一个原因是他们使用系统管理员角色测试所有东西，这避免了许多权限错误。</p><p id="e011" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://crmbusiness.wordpress.com/2015/04/10/the-system-administrator-role-is-a-benefit-and-a-curse-to-crm-developers/" rel="noopener ugc nofollow" target="_blank">系统管理员的角色对CRM开发人员来说是一种好处，也是一种诅咒</a></p><p id="2247" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">开发人员很难退后一步测试功能，而不是测试代码。就像作家编辑自己的作品一样，他们对自己的作品有一种依恋感，以至于很难客观地评价它。</p><h1 id="c552" class="lx ku iq bd kv ly lz ma ky mb mc md lb me no mg le mh np mj lh mk nq mm lk mn bi translated">如何避免失败</h1><p id="c401" class="pw-post-body-paragraph ju jv iq jw b jx mo jz ka kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr ij bi translated">避免失败的有效方法是为代码编写单元测试。编写单元测试的行为让开发人员思考</p><ul class=""><li id="866d" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr my mz na nb bi translated">该功能应该做什么，例如，我在测试什么</li><li id="b326" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated">允许什么值(最小值，最大值)</li><li id="5081" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated">可能会呈现哪些替代值</li><li id="42e5" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated">当错误发生时会发生什么</li></ul><p id="adc5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">编码前思考是有益的，有时开发人员急于得到编码，他们错过了这一步。</p><p id="d460" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">一旦编写了代码，对开发人员来说编写单元测试就没有吸引力了，所以单元测试的最佳方法是在您创建代码的同时编写单元测试，并使用这些单元测试来确保它按预期工作。</p><p id="307b" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">思考错误和失败是非常有益的。你将捕捉并避免许多错误。开发人员将决定如何处理错误，这通常是一个选择</p><ul class=""><li id="a771" class="mt mu iq jw b jx jy kb kc kf mv kj mw kn mx kr my mz na nb bi translated">快速失败，中止操作</li><li id="3071" class="mt mu iq jw b jx nc kb nd kf ne kj nf kn ng kr my mz na nb bi translated">继续并警告用户</li></ul><p id="40f5" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">错误是不好的，但是错误地修改了预期值的一半的代码可能会造成更大的混乱，并且需要更长的时间来清理，所以最好预先有一个计划。</p><p id="3acd" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">不要让这些通常很简单的错误从您的开发环境中泄露给最终用户，确保您强化了您的代码。</p><p id="5903" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果你不写单元测试，你应该考虑这样做</p><p id="fa53" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://crmbusiness.wordpress.com/2015/03/31/why-crm-developers-should-unit-test-their-code/" rel="noopener ugc nofollow" target="_blank">为什么CRM开发人员应该对他们的代码进行单元测试</a></p><p id="2ea4" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="https://crmbusiness.wordpress.com/2015/04/28/experiences-of-unit-testing-with-microsoft-dynamics-crm-projects/" rel="noopener ugc nofollow" target="_blank">使用Microsoft Dynamics CRM项目进行单元测试的经验</a></p><p id="efa7" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated">如果你仍然没有被说服去写单元测试，确保你检查你的代码，寻找潜在的错误，验证检查。确保您已经决定了如何处理代码中的错误。在开发环境中管理错误比以后再添加要好得多/快得多/容易得多。</p><h1 id="d090" class="lx ku iq bd kv ly lz ma ky mb mc md lb me no mg le mh np mj lh mk nq mm lk mn bi translated">给你更多的阅读</h1><p id="d3af" class="pw-post-body-paragraph ju jv iq jw b jx mo jz ka kb mp kd ke kf mq kh ki kj mr kl km kn ms kp kq kr ij bi translated"><a class="ae ks" href="http://dcycleproject.org/blog/63/test-your-sad-path-first" rel="noopener ugc nofollow" target="_blank">先测试一下你的悲伤之路</a></p><p id="81e0" class="pw-post-body-paragraph ju jv iq jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ij bi translated"><a class="ae ks" href="http://www.sei.cmu.edu/library/assets/happy.pdf" rel="noopener ugc nofollow" target="_blank">幸福之路测试</a></p></div></div>    
</body>
</html>