<html>
<head>
<title>Make a grid-based game with Unity: dev-log day 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Unity 制作一个基于网格的游戏:开发日志第 5 天</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/make-a-grid-based-game-with-unity-dev-log-day-5-4e02f9eae5b5?source=collection_archive---------2-----------------------#2021-01-02">https://blog.devgenius.io/make-a-grid-based-game-with-unity-dev-log-day-5-4e02f9eae5b5?source=collection_archive---------2-----------------------#2021-01-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8b21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">造几个关卡，在 em 上打一面外墙。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/6a69b9be0a95a67fdbaf27c8cf594787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FigaVyvI916NO8rXKg6Vjw.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">带墙和超级墙的格式化级别。</figcaption></figure><h1 id="148d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">目标</h1><p id="c071" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">让我们用我到目前为止所做的来生成一些基本的关卡，用于进一步的制作。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h1 id="b450" class="lb lc iq bd ld le ml lg lh li mm lk ll lm mn lo lp lq mo ls lt lu mp lw lx ly bi translated">我该怎么做？</h1><p id="c659" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我现在有了一个方法来稳定关卡，不会导致任何破坏游戏的崩溃。我的 grid_manager 可以接收任何文本文件并生成级别。</p><p id="c502" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我希望在我制作的任何地图的外面都有一圈墙，并且我希望在它的外面有一堵超级墙。向前看，超级墙在任何情况下都是完全不可逾越的。</p><p id="ad60" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我要做的第一件事是制作一个超级墙壁精灵和预制体。</p><p id="8d22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我将快速编写一个 ruby 脚本，将墙环和超级墙标签添加到我的楼层文件中。之后，我会制作一些地板并保存在我的 Unity 环境中。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="1ca4" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">超级墙壁精灵</h2><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nc"><img src="../Images/ccdc276c731ff5cf27399e79840db1ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uu3dpz1k3_G2hZIzaFcW0g.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">超级墙的占位符精灵</figcaption></figure><p id="0d96" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们找到了。一个简单的占位超级墙精灵。</p><p id="502e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顺便说一下，我一直在考虑这个游戏的美术设计。对于最终产品，我想我会尽量避免复古的像素艺术风格。我可能会使用像素，但如果我这样做，它们会像这样小:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/6df0242e53498156ae4e3f8d64f410db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*EkYf3dOlIpfhLuluTdiu7g.jpeg"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">精细像素艺术鹦鹉</figcaption></figure><p id="50f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们很快就要到达我可能需要做更严肃的艺术作品的点，但现在，这只是一些头脑风暴。</p><p id="221c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好吧，我把我的超级墙壁精灵做成一个预制体，就像我把其他东西做成一个预制体一样。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="fa10" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">更新 grid_generator 以查看超级墙标签</h2><p id="8906" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我更新了我的 grid_generator，接受了一个新的标签“x ”,并在那里放置了一面超级墙。</p><p id="b422" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这段代码乱七八糟，但我可能稍后会清理它。基本上，它只是从预置目录中创建一个新的超级墙，并把它放在屏幕和模型中。它还在那里放了一层地板，因为我希望墙的下面总是有一层地板。</p><p id="c86f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它还更新了游戏对象的属性，这样每个游戏对象都可以跟踪它在模型中的位置。这可能是不必要的，但我实现了这个约定，因为我认为它可以在以后帮助我。</p><p id="8a90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在墙下放置地板的原因是，在最终版本中，我希望墙比地板略小，这样当艺术品以这种方式覆盖时，我们可以看到墙下地板艺术的边缘。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ne"><img src="../Images/55103db5fe903ec814c334a26a576dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*bFIz4ezOFQ8ZbVAadYXDTA.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">超级墙标签的 case 语句</figcaption></figure></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="13b1" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">到我的地板上</h2><p id="1f18" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我希望我在 ruby 中的 floor 格式化程序接收一个文本文件(就像我的 unity c#生成器一样)，然后它将清理标签，以便生成另一个文本文件，这将是一个更加机械完整的级别。</p><p id="09a1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以我的测试水平为例:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/a40e2aec6d8807649f827e7d4ebe360a.png" data-original-src="https://miro.medium.com/v2/resize:fit:344/format:webp/1*HuH2doB9vZeJyXF0YArugw.jpeg"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">我最初的测试水平</figcaption></figure><p id="b0d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想让我的 ruby 生成器在外面加上一圈墙。然后在它的外面有一圈超级墙。</p><p id="2237" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一个简单的算法:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="f7e5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我的等级都不会超过 300x300，而且这个格式化程序可能不会在游戏过程中运行，所以我完全不顾性能地把它拼凑了起来。</p><p id="87dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是 ruby 格式化程序的一个简短视频:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ni nh l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">格式化关卡的视频</figcaption></figure><p id="c290" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我继续并缩小了所有的瓷砖。这是我新设置的游戏关卡:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ni nh l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">我在游戏中格式化级别的视频</figcaption></figure><p id="8db5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有了我构建的这个系统，我可以很容易地一个接一个地添加新的精灵，给它们分配各种标签，然后让我的 grid_generator 从那里获取。一旦它们进入模型，我就可以构建一些功能，让它们做一些事情，比如移动和攻击玩家。</p><p id="926d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最终，我将能够从手动角度在一天内生成 10 个级别，这些级别可以包括各种各样的精灵，如果我想，我甚至可以自动生成级别。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="49b0" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">一些好消息和坏消息</h2><p id="072a" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">好消息是，我的新游戏对象测试网格在加载后似乎不会出现任何性能问题。我希望 unity 足够聪明，能够知道绝大多数对象没有改变，因此不需要重新绘制。似乎是这样的。</p><p id="aba2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">坏消息是我的测试网格是 32x 50，第一次加载到屏幕上需要 1.5 秒。</p><p id="85fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我把它放大，最初的游戏加载可能会变成一个加载条，或者从一个级别到下一个级别会有一个很短的 5 秒的加载周期。我们会看到的。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="f56b" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">让我们进行压力测试</h2><p id="9e54" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我继续前进，产生了一个异常大的水平。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nj"><img src="../Images/c3e380ac57363cb1ede9f92eb6c0b766.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MToPPDTk8Mebof5fq_0mxw.jpeg"/></div></div></figure><p id="26c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个级别大约是 160 x 160</p><p id="a912" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它在大约 3 秒钟内加载完毕，同样，加载后不会出现性能问题。这是个好消息。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/b15f1e26fb77efe506d99234ce63ab40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DT1dLRXHe7Nx1-XUYVL5zg.jpeg"/></div></div></figure><p id="6b88" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我继续生成了另外两个测试等级，我将在接下来的特性中使用它们。今天是轻松的一天，我很高兴。</p></div><div class="ab cl me mf hu mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="ij ik il im in"><h2 id="51b0" class="mq lc iq bd ld mr ms dn lh mt mu dp ll jy mv mw lp kc mx my lt kg mz na lx nb bi translated">明天</h2><p id="1a3f" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">对于明天，我想我会试着让角色从一层走到下一层。下次见。</p></div></div>    
</body>
</html>