<html>
<head>
<title>Building a Serverless Job Board with Next.js and Contentful</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Next.js 和 Contentful 构建一个无服务器的工作板</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/building-a-serverless-job-board-with-next-js-and-contentful-4978b1cff26f?source=collection_archive---------9-----------------------#2020-07-19">https://blog.devgenius.io/building-a-serverless-job-board-with-next-js-and-contentful-4978b1cff26f?source=collection_archive---------9-----------------------#2020-07-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/a1e31837c80354bd0577087f3c46d454.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*NfxOBiZNmSYPt3qA7j8Tgg.png"/></div></figure><p id="dd95" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">本周，我从头开始构建了一个<a class="ae kp" href="https://reactnative.co.il" rel="noopener ugc nofollow" target="_blank">工作板</a>。</p><p id="04ae" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它主要关注 React 在以色列的本地工作。</p><p id="e6d6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我用过 NextJS 和 Contentful，只用了 5 个小时。我也会教你怎么做。</p><p id="8195" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当我开始时，我检查了无代码工具来帮助我快速构建它。仅仅是搭建一个求职平台，一切都显得如此昂贵。</p><p id="8424" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Web Flow 将花费大约 30 美元，如果使用 Airtable 或类似的东西，甚至可能会花费更多。</p><p id="51c7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后我开始使用 MongoDB 为此构建一个自定义数据库。</p><p id="bdfb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">但是对于这样一个简单的网站来说，这似乎是太多的工作了。</p><p id="8fa9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">有了 Contentful free tier 和 Vercel free for developers deployment，生活真是太棒了。</p><h2 id="63c4" class="kq kr in bd ks kt ku dn kv kw kx dp ky kc kz la lb kg lc ld le kk lf lg lh li bi translated">什么是 NextJS 和 Contentful？</h2><p id="b983" class="pw-post-body-paragraph jr js in jt b ju lj jw jx jy lk ka kb kc ll ke kf kg lm ki kj kk ln km kn ko ig bi translated">据其<a class="ae kp" href="http://contentful.com" rel="noopener ugc nofollow" target="_blank">网站</a>介绍，Contentful 是一个 API 优先的内容管理平台。正是我们需要的。</p><p id="e413" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Next.js 由<a class="ae kp" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>构建，是一个生产就绪的框架，可以帮助你创建快速反应的应用。</p><h1 id="90af" class="lo kr in bd ks lp lq lr kv ls lt lu ky lv lw lx lb ly lz ma le mb mc md lh me bi translated"><strong class="ak">先决条件</strong></h1><ul class=""><li id="5be3" class="mf mg in jt b ju lj jy lk kc mh kg mi kk mj ko mk ml mm mn bi translated">我假设您有基本的 Javascript 或 React 知识。</li><li id="bf44" class="mf mg in jt b ju mo jy mp kc mq kg mr kk ms ko mk ml mm mn bi translated">您的计算机上应该安装了 Node。</li><li id="2d6b" class="mf mg in jt b ju mo jy mp kc mq kg mr kk ms ko mk ml mm mn bi translated"><a class="ae kp" href="https://www.contentful.com/sign-up/" rel="noopener ugc nofollow" target="_blank">心满意足的用户</a></li><li id="b38e" class="mf mg in jt b ju mo jy mp kc mq kg mr kk ms ko mk ml mm mn bi translated">Vercel CLI 已安装(或者只是 npm install -g vercel)</li></ul><h1 id="cb10" class="lo kr in bd ks lp lq lr kv ls lt lu ky lv lw lx lb ly lz ma le mb mc md lh me bi translated"><strong class="ak">步骤 1:内容丰富的职位发布实体</strong></h1><p id="59fe" class="pw-post-body-paragraph jr js in jt b ju lj jw jx jy lk ka kb kc ll ke kf kg lm ki kj kk ln km kn ko ig bi translated">我们网站上最重要的实体是招聘信息。</p><p id="ee78" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae kp" href="https://app.contentful.com/" rel="noopener ugc nofollow" target="_blank">转到连续仪表板</a>，首先<a class="ae kp" href="https://www.contentful.com/faq/basics/#how-do-i-create-a-space" rel="noopener ugc nofollow" target="_blank">创建一个新空间</a>。</p><p id="f97f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后，从您的空间主页，导航到内容模型，并点击<code class="fe mt mu mv mw b">Add Content Type</code>，应该会出现一个表单。输入 jobPost 作为名称，输入 JobPost 作为 API 标识符。</p><p id="6ed3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">点击创建。</p><p id="5de4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，使用正确的类型将以下字段添加到您的内容模型中:</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="71f6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">你的<em class="nd"> JobPost </em>内容模型应该是这样的:</p><figure class="mx my mz na gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ne"><img src="../Images/f7f6703b9b685461fd0c6a249875abfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8SDfG3xXxihXDOILQlaAwg.png"/></div></div></figure><p id="ad6e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，我们需要获取我们的 API 键，以便从 Contentful 请求职位。单击设置选项卡并选择 API 密钥选项，然后单击<code class="fe mt mu mv mw b">Add API Key</code>按钮。</p><p id="d352" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">可以走了！我们心满意足地做了我们需要的一切。看看创建内容是多么容易。</p><h1 id="459a" class="lo kr in bd ks lp lq lr kv ls lt lu ky lv lw lx lb ly lz ma le mb mc md lh me bi translated"><strong class="ak">第二步:创建 NextJS 应用</strong></h1><p id="54c7" class="pw-post-body-paragraph jr js in jt b ju lj jw jx jy lk ka kb kc ll ke kf kg lm ki kj kk ln km kn ko ig bi translated">在项目文件夹中，创建一个新文件夹并在其中导航:</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="9417" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在让我们初始化项目并安装我们需要的依赖项。</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="d201" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">创建使用 next.js 所需的文件夹和文件:</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="e1e0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">目前为止干得不错。</p><p id="cbd5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在打开你最喜欢的代码编辑器，在<code class="fe mt mu mv mw b">package.json</code>中，添加这两个脚本，它告诉 NPM 如何运行我们的代码:</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="ec0c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">太神奇了！现在让我们黑一个网站。</p><h1 id="2188" class="lo kr in bd ks lp lq lr kv ls lt lu ky lv lw lx lb ly lz ma le mb mc md lh me bi translated"><strong class="ak">第三步:内容丰富的 JS 客户端</strong></h1><p id="2f07" class="pw-post-body-paragraph jr js in jt b ju lj jw jx jy lk ka kb kc ll ke kf kg lm ki kj kk ln km kn ko ig bi translated">为了通过 API 与我们的 Headless CMS 交互，我们需要在代码中创建一个内容丰富的客户端。</p><p id="0fc0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">首先，我们需要让 Contentful 知道我们是谁。因为这是外部世界的秘密(我们不希望人们使用我们令人满意的凭证)，所以让我们将环境变量添加到我们的项目中。</p><p id="32d6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">从您的内容面板中从<code class="fe mt mu mv mw b">Settings -&gt; General Settings -&gt; Space ID</code>获取您的内容空间 id。</p><p id="5003" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在让我们告诉 Vercel 在构建时使用这些变量。在根文件夹中创建一个<code class="fe mt mu mv mw b">vercel.json</code>文件，并在里面粘贴这个文件。</p><p id="314b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">不要忘记更改我们之前获取的内容空间 id 和 API 访问令牌！</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="fdcf" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">并更新 vercel CLI:</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="7b0a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">太好了。现在我们也想在开发中使用这些。</p><p id="cfd4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">创建一个名为<code class="fe mt mu mv mw b">.env.local</code>的文件，并在其中输入:</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="5363" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">太神奇了！我们终于可以写代码了。</p><p id="5f1f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在 index.js 文件中，创建内容丰富的客户端来使用它们令人惊叹的 API。</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="5ea6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在下一步中，我们将获取作业，创建 UI 并获取作业。</p><h1 id="8582" class="lo kr in bd ks lp lq lr kv ls lt lu ky lv lw lx lb ly lz ma le mb mc md lh me bi translated"><strong class="ak">第四步:主页组件</strong></h1><p id="0464" class="pw-post-body-paragraph jr js in jt b ju lj jw jx jy lk ka kb kc ll ke kf kg lm ki kj kk ln km kn ko ig bi translated">在我们的客户端下，让我们添加主页组件。贴上这段代码，我们马上解释。</p><figure class="mx my mz na gt jo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="468b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这是怎么回事？</p><p id="d596" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们创建一个返回 JobPost 项的函数，称为 fetchJobPosts。我们的工作(再次双关)是通过我们之前创建的 contentful 客户端发送请求，并解析项目以仅返回它们的字段。</p><p id="b372" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后，我们通过创建一个同名的新函数来定义主页组件。在组件 1 行，我们为作业定义了一个反应状态。它将以一个空数组开始。</p><p id="7b0d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">稍后，我们定义一个将在组件挂载上运行的效果(由于第二个参数是空数组)。在其中，我们调用 getPosts，这是一个异步函数，它调用 fetchJobPosts，并将作业设置为状态。</p><p id="1b7c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在组件的 JSX 部分，我们检查每个工作，并将其呈现到屏幕上，同时链接到实际的工作发布。</p><h1 id="fc34" class="lo kr in bd ks lp lq lr kv ls lt lu ky lv lw lx lb ly lz ma le mb mc md lh me bi translated">第五步:部署</h1><p id="2744" class="pw-post-body-paragraph jr js in jt b ju lj jw jx jy lk ka kb kc ll ke kf kg lm ki kj kk ln km kn ko ig bi translated">感谢 Vercel 的巨人，我们可以使用他们的神奇工具将我们的工作板部署到生产中。</p><p id="dc04" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们所需要的就是在我们的终端上运行这个命令，我们的网站将在互联网上运行。</p><pre class="mx my mz na gt nj mw nk nl aw nm bi"><span id="8e75" class="kq kr in mw b gy nn no l np nq">$ now --prod</span></pre></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><p id="dce8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">就这样——你刚刚创建了一个 NextJS 工作板。</p><p id="0e87" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">接下来，您可能想要设计工作帖子的样式，<a class="ae kp" href="https://leerob.io/blog/mailchimp-next-js" rel="noopener ugc nofollow" target="_blank">将其连接到邮件订阅服务</a>，并允许向您发送工作帖子。<a class="ae kp" href="https://getform.io" rel="noopener ugc nofollow" target="_blank">你可以用 GetForm.io </a>做到这一点。</p><p id="f40e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">欢迎在 Twitter 上给我发 DM，或者访问<a class="ae kp" href="https://coheneyal.com" rel="noopener ugc nofollow" target="_blank">我的网站</a>获取更多类似的内容。</p></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><p id="7d12" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="nd">原载于</em>【coheneyal.com】<em class="nd"/></p></div></div>    
</body>
</html>