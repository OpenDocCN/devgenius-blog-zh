<html>
<head>
<title>APIs Explained In Practical Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以实际方式解释的 API</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/apis-explained-in-practical-way-4280dfa401e6?source=collection_archive---------16-----------------------#2022-07-24">https://blog.devgenius.io/apis-explained-in-practical-way-4280dfa401e6?source=collection_archive---------16-----------------------#2022-07-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="6ca8" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">学习成果</h1><ul class=""><li id="47db" class="ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">了解 API 的含义</li><li id="a74e" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">了解 rest API 的基础知识</li><li id="be33" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">能够阅读和理解 API 文档</li></ul><h1 id="e878" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">什么是 API？</h1><p id="1f20" class="pw-post-body-paragraph lf lg in kk b kl km lh li kn ko lj lk kp ll lm ln kr lo lp lq kt lr ls lt kv ig bi translated">API 被用作两个应用程序相互通信的一种方式。API 是为应用程序使用而构建的，不像应用程序是为用户使用而构建的。当您听到 API 时，一个常见的误解是，人们会直接从网络的角度来考虑 API。API 的使用并不局限于网络。程序员可以调用操作系统的 APIs 例如，当打开文件时，通过 API 调用操作系统，然后操作系统处理打开文件的所有逻辑。您可能听说过的 API 是 rest APIs，这些是 web 服务中使用的 API。</p><h1 id="25ca" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">休息 API</h1><p id="fc98" class="pw-post-body-paragraph lf lg in kk b kl km lh li kn ko lj lk kp ll lm ln kr lo lp lq kt lr ls lt kv ig bi translated">Rest APIs 基本上是为网络定制的 API。Rest APIs 的主要目标是标准化 web 服务之间的数据交换。你可能在想我们为什么要这么做？网络已经有了很大的发展，网络上的主要用户界面曾经是 HTML。因此，网络服务器只会将 HTML 发送到网络浏览器，但是随着前端的发展，我们现在有许多不同的东西连接到互联网上，比如移动应用、智能设备甚至烤面包机！所有这些新设备都不呈现 HTML，这是其余 API 介入的地方。</p><h1 id="207a" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">API 是做什么的？</h1><p id="4c19" class="pw-post-body-paragraph lf lg in kk b kl km lh li kn ko lj lk kp ll lm ln kr lo lp lq kt lr ls lt kv ig bi translated">那么，Rest APIs 实际上是做什么的呢？API 允许提取数据，并对该数据执行 CRUD(创建、读取、上传和删除)操作。</p><blockquote class="lu"><p id="bee9" class="lv lw in bd lx ly lz ma mb mc md kv dk translated">注意:CRUD 并不总是存在于 API 中</p></blockquote><p id="19c5" class="pw-post-body-paragraph lf lg in kk b kl me lh li kn mf lj lk kp mg lm ln kr mh lp lq kt mi ls lt kv ig bi translated">API 使用一种称为<a class="ae mj" href="https://www.json.org/json-en.html" rel="noopener ugc nofollow" target="_blank"> JSON </a>的语言作为通信手段，描述 JSON 最简单的方法是它基本上是一个字典。所有 web 应用程序都可以查看 JSON 数据。下面是 JSON 的一个例子</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="c9a3" class="mt jl in mp b gy mu mv l mw mx">{<br/>    "name": "John",<br/>    "age": 22,<br/>    "gender": "male",<br/><br/>}</span></pre><p id="b768" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">使用 api 的应用程序的一个例子是 Spotify。</p><figure class="mk ml mm mn gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi nd"><img src="../Images/c33e551aee77355d66032d0386649965.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eqzu2Cd70YHQVOqMxcJNXA.png"/></div></div></figure><p id="8a0c" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">正如您所看到的，网络浏览器对端点进行调用。端点基本上是您想要调用的 API 的 URL，例如，如果您想在耐克网站上查看 Jordan 的，您可以导航到<a class="ae mj" href="https://nike.com/air-Jordan" rel="noopener ugc nofollow" target="_blank">https://nike.com/air-Jordan</a>。在这种情况下，终点是“/我”。网络浏览器发出我们所说的获取请求。当向 API 点发出请求时，我们可以发出不同类型的请求，我们称之为<a class="ae mj" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods" rel="noopener ugc nofollow" target="_blank"> API 动词或 HTTP 请求方法</a>。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="b6a2" class="mt jl in mp b gy mu mv l mw mx">{<br/>   "birthdate":"xxxx–xx–xx",<br/>   "country":"GB",<br/>   "display_name":"xxx",<br/>   "email":"<a class="ae mj" href="mailto:hamadnassor5@gmail.com" rel="noopener ugc nofollow" target="_blank">xxx@gmail.com</a>",<br/>   "explicit_content":{<br/>      "filter_enabled":false,<br/>      "filter_locked":false<br/>   },<br/>   "external_urls":{<br/>      "spotify":"<a class="ae mj" href="https://open.spotify.com/user/4521.13" rel="noopener ugc nofollow" target="_blank">https://open.spotify.com/user/x</a>xxx"<br/>   },<br/>   "followers":{<br/>      "href":null,<br/>      "total":xx<br/>   },<br/>   "href":"<a class="ae mj" href="https://api.spotify.com/v1/users/4521.13" rel="noopener ugc nofollow" target="_blank">https://api.spotify.com/v1/users/x</a>xxx",<br/>   "id":"xxxx",<br/>   "images":[<br/>      {<br/>         "height":null,<br/>         "url":"<a class="ae mj" href="https://i.scdn.co/image/ab6775700000ee85743e7a3771dc7132ca47c01b" rel="noopener ugc nofollow" target="_blank">https://i.scdn.co/image/ab6775700000ee85743e7a3771dc7132ca47c01b</a>",<br/>         "width":null<br/>      }<br/>   ],<br/>   "policies":{<br/>      "opt_in_trial_premium_only_market":false<br/>   },<br/>   "product":"premium",<br/>   "type":"user",<br/>   "uri":"spotify:user:xxxx"<br/>}</span></pre><p id="e0e8" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">这是“/me”端点返回的 JSON 数据，正如您所看到的，这个端点用于检索关于我的用户配置文件的所有数据，但是它如何知道要检索哪个配置文件数据呢？API 就是我们所说的<strong class="kk io">无状态。</strong>这意味着，与服务器不同，每个端点不会跟踪您的身份，因此您需要使用授权来向 API 证明您的身份，这可以通过多种方式实现。API 授权是一个独立的主题，我将在后面的文章中讨论，但是请记住，您需要向每个端点证明您是谁。现在你可能会想，我们怎么知道哪个端点做什么，我们接收什么数据，我们需要发送什么数据？这就是 API 文档的用武之地。</p><h1 id="6c59" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">API 文档</h1><p id="b779" class="pw-post-body-paragraph lf lg in kk b kl km lh li kn ko lj lk kp ll lm ln kr lo lp lq kt lr ls lt kv ig bi translated">现在我们有了所有的背景知识，可以开始阅读 API 文档来使用它们了。让我们来看几个例子</p><h2 id="0a31" class="mt jl in bd jm nl nm dn jq nn no dp ju kp np nq jy kr nr ns kc kt nt nu kg nv bi translated">Spotify API 文档</h2><p id="54a8" class="pw-post-body-paragraph lf lg in kk b kl km lh li kn ko lj lk kp ll lm ln kr lo lp lq kt lr ls lt kv ig bi translated">让我们更详细地看看“/me”的例子</p><div class="nw nx gp gr ny nz"><a href="https://developer.spotify.com/documentation/web-api/reference/#/operations/get-current-users-profile" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd io gy z fp oe fr fs of fu fw im bi translated">Web API 参考|面向开发者的 Spotify</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">音乐，遇见代码。简单和高级应用程序的强大 API、SDK 和小部件。</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">developer.spotify.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on nj nz"/></div></div></a></div><figure class="mk ml mm mn gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi oo"><img src="../Images/16fce694bab64db1e138d3a0b8aa4322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*j9s8PC_dR6leKiCH.png"/></div></div><figcaption class="op oq gj gh gi or os bd b be z dk translated">获取请求</figcaption></figure><p id="625b" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">我们可以看到的第一件事是，为了与这个端点通信，必须使用 GET 方法。我们还可以看到端点“/我”</p><figure class="mk ml mm mn gt ne gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/7304510f6b5c2cdd76e24e12a1d94fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/0*q8OUtRF1rvr8oTs4.png"/></div><figcaption class="op oq gj gh gi or os bd b be z dk translated">卷曲命令</figcaption></figure><p id="48e5" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">这是我们需要使用 cURL 命令发出请求的一个例子。<a class="ae mj" href="https://curl.se/" rel="noopener ugc nofollow" target="_blank"> cURL </a>是一种使用 shell (cmd)发出 HTTP 请求的方法。</p><p id="64a4" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">如你所见，我们需要包含一个标题。让我们深入了解一下 HTTP 请求的实际情况。HTTP 请求包括端点、头部，有时还包括主体。标题附在请求上，包括任何附加信息。将数据发送到端点时会附加正文。正如你在这个例子中看到的，因为我们正在发出一个 get 请求，所以我们不需要发送任何数据，因此不需要主体。</p><p id="ad1c" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">在这个例子中，头部告诉 API 我们只接受 JSON 格式的数据，我们发送授权来证明我们是用户。</p><figure class="mk ml mm mn gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ou"><img src="../Images/7b4c8c3de422fb9ff8756a4cd774b9c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CbaLja7CBTRwzl-B.png"/></div></div><figcaption class="op oq gj gh gi or os bd b be z dk translated">Spotify /me 端点 200 响应</figcaption></figure><p id="ce25" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">我们首先能看到的是我们期望得到的回应。它在顶部向我们显示状态代码。<a class="ae mj" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" rel="noopener ugc nofollow" target="_blank">状态码</a>主要用来告诉我们数据是否发送成功，所有的状态码在一般的 web 服务器和 API 中都是通用的。</p><p id="9b71" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">正如我们看到的，当我们成功地获得 200 响应时，我们还可以看到主体 JSON 数据。它还向我们展示了返回的数据和数据类型。我们可以在右边看到一个数据的例子。</p><figure class="mk ml mm mn gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ov"><img src="../Images/c28781384ad0edf5ee1a3493ffc60af7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LMBkhGeAxe50O-6n.png"/></div></div><figcaption class="op oq gj gh gi or os bd b be z dk translated">Spotify /me 端点 401 响应</figcaption></figure><p id="cb7b" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">正如我们看到的，当我们收到 401 响应时，这意味着发送的授权令牌已过期或无效。</p><h1 id="a0e0" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">Swagger 文档检查</h1><p id="a983" class="pw-post-body-paragraph lf lg in kk b kl km lh li kn ko lj lk kp ll lm ln kr lo lp lq kt lr ls lt kv ig bi translated">这是一个虚构的 API，使用一个名为<a class="ae mj" href="https://petstore.swagger.io/?_ga=2.40788132.708436162.1658671977-680043374.1656792702#/pet/updatePetWithForm" rel="noopener ugc nofollow" target="_blank"> swagger.io </a>的平台。许多 API 文档可能看起来与此类似。</p><figure class="mk ml mm mn gt ne gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ow"><img src="../Images/424aac58507607a65b0d88fbd8493781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rEF8oyoQfzcFzSO-.png"/></div></div><figcaption class="op oq gj gh gi or os bd b be z dk translated">Swagger.io 文档中的 Pet 端点</figcaption></figure><p id="94b3" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">如我们所见，这是一个 post 请求。这个端点看起来有点不同，这是因为这个端点带有一个参数。</p><p id="b190" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">同样值得一提的是，一些端点也会接受我们所说的查询参数。它们出现在请求 URL 的末尾，在问号 GET /notes 之后。offset = 100 &amp; limit = 50/查询参数可以是必需的，也可以是可选的，但主要用于过滤条件、排序条件或表示分页集合中的当前页码<strong class="kk io">。</strong></p><p id="c3bf" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">因此，当发出这个 post 请求时，我们可以看到在端点中需要包含宠物 ID。在正文中，我们需要包括宠物的名字和宠物的状态。如果宠物更新成功，我们可以假设我们将得到 200 响应，如果没有，我们将得到 405，这意味着无效输入。</p><p id="7565" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated"><strong class="kk io">总结</strong></p><p id="8827" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">现在，在吸收了所有知识之后，我们现在理解了 API 的实际含义，并且我们已经深入了解了 REST APIs。我们现在知道了</p><ul class=""><li id="fa44" class="ki kj in kk b kl my kn mz kp ox kr oy kt oz kv kw kx ky kz bi translated">REST APIs 如何工作，在哪里使用，为什么</li><li id="5874" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">我们已经看到了 API 的真实例子</li><li id="b625" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">JSON 如何工作</li><li id="4138" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">API 端点</li><li id="3c1b" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">不同的 API 动词</li><li id="e7ab" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">无国籍的</li><li id="d010" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">API 文档</li><li id="d274" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">标题和正文</li><li id="ba29" class="ki kj in kk b kl la kn lb kp lc kr ld kt le kv kw kx ky kz bi translated">API 状态代码</li></ul><p id="6003" class="pw-post-body-paragraph lf lg in kk b kl my lh li kn mz lj lk kp na lm ln kr nb lp lq kt nc ls lt kv ig bi translated">我建议继续研究 API 授权是如何工作的，同时慢慢积累使用您最喜欢的编程语言或 cURL 从 API 获取数据的实践经验。然后开始真正理解 API</p></div></div>    
</body>
</html>