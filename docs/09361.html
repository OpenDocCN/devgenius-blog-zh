<html>
<head>
<title>Avoid this thing while calculating mid value in data structures.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在数据结构中计算中间值时避免这种情况。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/avoid-this-thing-while-calculating-mid-value-in-data-structures-73d834ed5fb8?source=collection_archive---------10-----------------------#2022-08-16">https://blog.devgenius.io/avoid-this-thing-while-calculating-mid-value-in-data-structures-73d834ed5fb8?source=collection_archive---------10-----------------------#2022-08-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="371d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在数据结构中，我们经常需要使用<strong class="jp ir">二分搜索法</strong>，因为我们需要找到给定排序数组的<strong class="jp ir"> mid </strong>值。</p><p id="7bdf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以很容易地通过以下方式找到<strong class="jp ir"> mid </strong>值:</p><blockquote class="kl km kn"><p id="a5a9" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq">第一次接近→ mid =(开始+结束)/2 </em> </strong></p></blockquote><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ks"><img src="../Images/094f2701b76270e0ebcffa623a364596.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sshoRDtUpWMj1HzCDWM4mg.png"/></div></div></figure><p id="95b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是如果<strong class="jp ir">大数</strong> : →</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi le"><img src="../Images/61bea8a6b8d7d2c947caa0f969feb712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2f2ghMBkcSUbL1JPr4gLyw.png"/></div></div></figure><p id="1d31" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">但是在<strong class="jp ir"> Java </strong>中，输出会有所不同:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lf"><img src="../Images/5e6b477e9fdb2c1fbfb1d1d2ba8a989d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ILtQyl9FydaUAyee1x7l7g.png"/></div></div></figure><p id="cb22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，要理解为什么这个<strong class="jp ir">输出变得不同</strong>，我们就理解为 Java 中的<strong class="jp ir">二进制加法</strong>。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lf"><img src="../Images/9a8918700352d7d7f2b3b7a4ff57aa57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQBsbE-ipfbKw91UDsvL2w.png"/></div></div></figure><p id="e890" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果是否定的，这是因为，<strong class="jp ir"> int </strong>数据类型是一个<strong class="jp ir"> 32 位有符号二进制补码整数</strong>。</p><p id="a12f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">其最小值为<strong class="jp ir">-2147483648(0x 8000000)</strong></p><p id="013e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">最大值 2147483647(0x 7 fffffff)</strong>(含)</p><p id="8463" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以当你给一个<strong class="jp ir">整数的最大值</strong>加 1 时:</p><p id="8e23" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">→2147483647+1 =-2147483648</strong></p><p id="5584" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，<strong class="jp ir">除以 2 </strong>，也是负数。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lg"><img src="../Images/cf0d19af8bd3f8a4e9414b4247345d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UfPBYYPDahQfT5iPKyFNuw.png"/></div></div></figure><p id="424b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，你可以看到，实际结果应该是<code class="fe lh li lj lk b">1073741824</code>，但是我们得到的是- <code class="fe lh li lj lk b">1073741824.</code></p><p id="2a68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个问题叫做<strong class="jp ir">整数溢出</strong>。</p><p id="1d8e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了克服这个问题，我们需要使用<strong class="jp ir">不同的方法</strong>来获得<strong class="jp ir">的中间值</strong>。</p><blockquote class="kl km kn"><p id="8b9b" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq">第二种方法→ mid = min + (max-min)/2 </em> </strong></p></blockquote><p id="be54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用这种方法，我们可以得到适当的结果，如下所示:</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ll"><img src="../Images/af0ed74b5cee1e5efb2927a4899aaaad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S4HzCVjxrTO1imTM-eLikg.png"/></div></div></figure><p id="6c4f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ko">很明显</em> <strong class="jp ir"> (max-min)/2 </strong>小于<strong class="jp ir"> <em class="ko"> max </em> </strong>，对于<em class="ko">开始</em>和<em class="ko">结束</em>的大值，该公式不会导致<strong class="jp ir">整数溢出</strong>。</p><p id="b20c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然，第二种方法很好，但让我们看看更快的方法，<strong class="jp ir">第三种方法</strong>寻找中间值。</p><blockquote class="kl km kn"><p id="d93d" class="jn jo ko jp b jq jr js jt ju jv jw jx kp jz ka kb kq kd ke kf kr kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="iq">第三种方法→((min+max)&gt;&gt;&gt;1)</em></strong></p></blockquote><p id="558b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">&gt; &gt; &gt;(无符号右移)</p><p id="7b48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">什么是无符号右移运算符？</strong></p><ul class=""><li id="5294" class="lm ln iq jp b jq jr ju jv jy lo kc lp kg lq kk lr ls lt lu bi translated">右移运算符将数字的位向右<strong class="jp ir">移动</strong>指定的位置。</li><li id="5196" class="lm ln iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">用 0 填充的符号位</li><li id="75ec" class="lm ln iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">该运算符的符号是&gt; &gt; &gt;。</li><li id="9de9" class="lm ln iq jp b jq lv ju lw jy lx kc ly kg lz kk lr ls lt lu bi translated">写<strong class="jp ir"> x &gt; &gt; &gt; n </strong>时，意思是将<strong class="jp ir"> x </strong>的位向右<strong class="jp ir"> n 指定的</strong>位置移动。</li></ul><p id="ee32" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们先做加法，<strong class="jp ir"> <em class="ko"> (min + max) </em> </strong></p><p id="4c02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> → min = 1 </strong>，<br/>→<strong class="jp ir">max =</strong><strong class="jp ir">2147483647</strong></p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi lf"><img src="../Images/9a8918700352d7d7f2b3b7a4ff57aa57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RQBsbE-ipfbKw91UDsvL2w.png"/></div></div></figure><p id="b00f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们在做<strong class="jp ir">无符号右移运算。</strong></p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="gh gi ma"><img src="../Images/8d61f50ab70e291027933ca3d226f552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hf4DtcTsPSh9-5-rQUQ6Mw.png"/></div></div></figure><p id="b088" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以，你可以看到，我们得到了实际的结果<code class="fe lh li lj lk b">1073741824.</code></p><p id="0e9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，总之，我们应该避免第一种方法来寻找中间值，因为它会造成<strong class="jp ir">整数溢出</strong>，而是应该使用第二种或第三种方法。</p><p id="63a5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢你阅读这篇文章，❤</p><p id="1ac8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果这篇文章对你有帮助，请鼓掌👏这篇文章。</p><p id="3ac8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请在<a class="ae mb" href="https://medium.com/@alexmurphyas8" rel="noopener">媒体</a>上关注我，我会像上面一样发布有用的信息。</p><p id="91cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我做错了什么？让我在评论中。我很想进步。</p></div></div>    
</body>
</html>