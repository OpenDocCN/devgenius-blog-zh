<html>
<head>
<title>Machine Learning Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">机器学习测试</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/machine-learning-testing-dbdd55a45bf7?source=collection_archive---------16-----------------------#2022-08-19">https://blog.devgenius.io/machine-learning-testing-dbdd55a45bf7?source=collection_archive---------16-----------------------#2022-08-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/3dcc099ef1ad100bcbd285964722f63f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rySFu1b-EUwetDWAbeKXZg.jpeg"/></div></div></figure><div class=""/><p id="aba1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是与自动创建机器学习模型、用于训练神经网络的数据集以及模型不可知元学习相关的系列博客文章的一部分。如果你对这个故事的背景感兴趣，你可以滚动到文章的底部，找到以前博客文章的链接。您也可以前往<a class="ae kt" href="https://serpapi.com/use-cases/machine-learning-and-artificial-intelligence" rel="noopener ugc nofollow" target="_blank">使用 SERP 数据构建机器学习模型</a>页面，以清楚地了解您可以创建什么样的自动化 ML 模型，或者如何将它们用于机器学习系统。</p><p id="14e7" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在前几周，我们已经在数据库中创建了一个对象，并在其中存储了机器学习训练、测试和数据集信息。本周我们将做向公众发布源代码的最后一步，单元测试机器学习工具。这些测试中的度量将给出一个关于哪些 ml 模型可以被创建，哪些不能被创建的想法。这些单元测试不应该与测试机器学习模型本身混淆。这些测试是检查机器学习的可扩展性方面，而不是单个的 ML 模型。我将在结论部分谈论下周的源代码发布。同时，您可以<a class="ae kt" href="https://serpapi.com/users/sign_up" rel="noopener ugc nofollow" target="_blank">注册申请免费积分</a>来了解<a class="ae kt" href="https://serpapi.com" rel="noopener ugc nofollow" target="_blank"> SerpApi </a>生态系统。</p><p id="cfe4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将使用 Python 的 PyTest 作为我们的测试库。单元测试将集中在单个端点和机器学习过程的其他方面。我将分享机器学习测试的一些常见命名，以澄清我没有谈到的内容，并分享我提到的 ml 测试子集的例子。</p><h1 id="c47a" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">什么是机器学习测试？</h1><p id="6887" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">机器学习测试可能是指通过机器学习模型进行软件测试的过程。用经过训练的模型测试传统软件可以提高测试性能，或者减少维护的需要。</p><p id="b0b4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我分享这些信息是为了说明我没有提到哪个术语。为此，我尝试了一种不同的 Rails 方法，但失败了。您可以通过我的个人资料查看五个系列博客帖子的详细信息。当然，这并不是说这不是不可能的。在本文的范围内，我们将只使用影像分类数据集。</p><h1 id="0ad6" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">机器学习模型是如何测试的？</h1><p id="d45a" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">机器学习模型通过测试数据或真实世界数据的迭代进行测试，并基于其任务的验证进行评分。这些测试可以指示 ml 模型是否被充分训练或者是否需要进一步优化。</p><p id="e6ef" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个其实在这个系列的范围之内。我已经通过从本地存储服务器获取随机图像，根据它测试机器学习模型，并创建一个验证分数，触及了该工具的自动机器学习模型测试功能。但同样，这不是这篇博文的范围。</p><h1 id="d6ba" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">机器学习测试有什么好处？</h1><p id="938c" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">在本文的背景下，我们正在测试机器学习工具的可扩展性。为了编写测试，我们必须在很大程度上采用与软件开发相同的方法。目的是测试工具的健壮性，然后有条不紊地将它暴露给测试用例。训练过程结束时的模型预测超出了本文的范围。然而，这里采用的方法可以在本教程中使用，可以重新用于负责测试模型行为的最小功能测试。此外，由于我们有一个工具，可以大规模地异步执行工作流，具有最小功能测试的自动化测试可以减少选择正确模型的时间，从而减少整个模型测试的时间。这种再利用也可以用于测试由具有不同能力的模型组成的机器学习系统。就像软件系统一样，ml 系统可以被分解成小块，然后进行模型评估测试。连接系统的单个数据点可以放在一个测试套件中，以创建一致性。它还允许对单个 ml 模型进行更精确的调试。尽管如此，我们编写的测试将着重于调试可伸缩性。目标是像软件工程师为软件系统编写单元测试一样编写测试，然后将健壮的工具提供给软件工程师，这些软件工程师是 ML 爱好者、从事数据科学的数据科学家或 MLOps 中的机器学习工程师。然后，它可以用于通过 SerpApi 的 Google Images Scraper API 创建数据集，获得不同算法的验证指标，轻松进行优化，并用于创建机器学习系统。</p><h1 id="b2b1" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">单元测试自动数据集创建端点</h1><p id="3fa3" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">下面是通过使用一个查询自动将一个带标签的图像作为训练数据添加到存储服务器的单元测试。这是由<a class="ae kt" href="https://serpapi.com/images-results" rel="noopener ugc nofollow" target="_blank"> SerpApi 的谷歌图片抓取 API </a>实现的。</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="e699" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是调用多个查询的另一个测试，如果需要，还会有一个规范(例如，只有苹果这个水果，没有电话)。这是通过利用 SerpApi 的 Google Images Scraper API 中的芯片参数<a class="ae kt" href="https://serpapi.com/images-results#api-parameters-chips" rel="noopener ugc nofollow" target="_blank">实现的，这对于预处理训练数据来说是非常好的。</a></p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="4042" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当然，还有其他方法可以提高训练数据预处理的质量保证，例如在查询中定义输入数据的大小(例如，imagesize:500x500)。</p><p id="5fed" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些测试在存储服务器中创建训练数据对象，然后检查是否存在这样的标记图像对象。为了防止假阳性结果，我们随后删除输入数据。</p><h1 id="f381" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">单元测试优化器</h1><p id="e4e5" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">下面是机器学习训练过程中使用的优化器的单元测试。这些测试将表明工具支持哪些优化器，不支持哪些优化器。</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="8fc0" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">默认情况下，TrainingCommands 对象有自己的有效输入，通过更改优化器，我们可以检查它对工具的有效性。在每次迭代中，我们训练一个小模型，最小批量为 2，最小时期为 1。这样，单元测试不会花费太多时间。我们还在优化器中添加了不同的参数，以获取特定优化器支持或不支持哪些参数的信息。模型评估在这一点上是不相关的。训练结束后，我们获取存储 ml 模型信息的尝试对象，并删除它以防止在下一次迭代中出现误报。</p><p id="f859" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些类型的测试也有点像集成测试，因为我们做的是除测试端点之外的整个工具范围。</p><h1 id="58fa" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">单元测试损失函数</h1><p id="4010" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">对于损失函数，我们遵循相同的时间表。我们将在训练命令中保持一切不变，只改变损失函数(标准)。像优化器一样，模型评估在这一点上是不相关的。在测试损失函数时，我实际上捕捉到了一些未记录的不推荐使用的参数。我将在下周的博客中分享它们，并展示如何使用它们。</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="a0d3" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">卷积层算法的单元测试</h1><p id="3883" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">测试顺序层比测试函数容易得多。之前，我们已经创建了一个名为 CustomModel 的对象，它从一个可定制的字典中获取连续的层作为输入，并创建一个定制的机器学习模型。如果任何过程在初始化定制 ml 模型时出错，都会引发一个异常。因此，我们只需要测试创建的对象的类型是否是 CustomModel。</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="2880" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">单元测试池层算法</h1><p id="b2c7" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">测试用于池算法的顺序层与测试卷积层是一样的。针对不同的池层运行测试就足够了。</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="dfcf" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">单元测试线性层算法</h1><p id="b604" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">深度学习模型中常用层的这些类型的测试有利于工具的质量保证。例如，该工具可以很容易地进行调整，以便在未来进行线性回归。</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="ca87" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">来自其他功能的单元测试实用程序</h1><p id="c256" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">python 中的以下代码行用于其他函数的实用程序。正如你所看到的，虽然扁平化工作，UnFlatten 还不适合这个工具。这是因为我们还不能在训练中传递变量。</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="dd48" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">单元测试非线性激活层算法</h1><p id="eef8" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">在深度学习模型中，非线性激活层可以提高模型性能，并有助于解决消失梯度问题。结果可以在评估指标中观察到。以下是它们的单元测试:</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure><h1 id="386d" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="4a70" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我感谢读者的关注，也感谢才华横溢的塞尔帕皮人(T2)的支持。我认为，我在创造这个工具的过程中经历的所有干扰都是值得的。下周，我将在<a class="ae kt" href="https://github.com/serpapi/" rel="noopener ugc nofollow" target="_blank"> SerpApi Github 页面</a>上分享一个链接，并开放源代码。有几点我想提几点。我已经收回了代码中一些不重要的部分，因为我认为它们不够好。第一种是将训练数据手动添加到图像数据库中。当时，我使用系统存储来完成这样的任务，我想在将来将其更新为存储服务器解决方案。该工具将需要一个<a class="ae kt" href="https://serpapi.com/users/sign_up" rel="noopener ugc nofollow" target="_blank"> SerpApi 帐户</a>。你可以通过注册申请免费积分。但这并不意味着没有它就不能更新数据集。您可以直接进入您的服务器仪表板并创建一个新对象。所以我不认为它违反了代码的开源标准。毕竟，可伸缩性背后的源代码将会公开展示。我想讨论的第二部分是代码只为图像自动更新数据集。不同数据分布的各种任务(如 NLP)或大多数其他人工智能任务需要接受其他文件格式作为输入数据。目前，只支持图像。此外，一些测试，如回归测试，或者不变性测试，可能无法使用该工具。我没试过。我想提及的另一点是，测试的指标显示，在机器学习训练过程中使用的一些优化器、损失函数和算法不受支持，而其中一些在有限数量的参数下得到部分支持。我没有测试过的那些并不一定意味着不能在机器学习系统中使用它们。我做过软件测试，就像我在传统软件上做的一样。不支持的肯定会在下周的博文中详细记录。您可以尝试为其他人找出答案，也可以编写自己的测试来为存储库做出贡献。我想提的最后一个问题是，我已经收回了关于前端开发的部分。这并不意味着您将无法访问前端部件，在那里您可以轻松地修改您的可定制词典。endpoint 会列出一些端点供你在现实世界中使用。再次感谢您的关注，并且很高兴能够开放这个工具的源代码。</p><figure class="lx ly lz ma gt ip"><div class="bz fp l di"><div class="mb mc l"/></div></figure></div><div class="ab cl mh mi hr mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ig ih ii ij ik"><p id="9919" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mo">原载于 2022 年 8 月 19 日</em><a class="ae kt" href="https://serpapi.com/blog/machine-learning-testing/" rel="noopener ugc nofollow" target="_blank"><em class="mo">【https://serpapi.com】</em></a><em class="mo">。</em></p></div></div>    
</body>
</html>