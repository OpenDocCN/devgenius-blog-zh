<html>
<head>
<title>What is JWT &amp; how does it work?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是 JWT &amp;它是如何工作的？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-is-jwt-how-does-it-work-f6877a73e705?source=collection_archive---------14-----------------------#2022-08-23">https://blog.devgenius.io/what-is-jwt-how-does-it-work-f6877a73e705?source=collection_archive---------14-----------------------#2022-08-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/847b00196678cefd56453e4788ccd755.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4tuinOor6vAkygY7"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">由<a class="ae jz" href="https://unsplash.com/@urielsc26?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">乌列尔 SC </a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="9aba" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">JWT 是什么？</h1><p id="6997" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">JWT(JSON Web Token)是一种身份验证方法，它以令牌的形式将用户的会话信息完全存储在客户端。</p><h1 id="732a" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">它与会话认证有什么不同？</h1><p id="dc9f" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">会话身份验证将会话信息存储在数据库中。登录后，浏览器上会存储一个 cookie。cookie 存储服务器发送的 session_id。在来自该客户端(同一站点)的每个后续请求中，浏览器还会在请求中附加会话 id cookie。然后，服务器使用 cookie 从数据库中查询会话信息。</p><p id="cc87" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">然而，JWT 不再需要使用数据库来存储会话信息。因为关于经过身份验证的用户和令牌到期日期的实际信息是以令牌的形式存储在客户端的。</p><h1 id="facb" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">令牌是如何创建的？</h1><p id="61c7" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">JWT 令牌由点分隔的三部分组成。</p><ol class=""><li id="131b" class="mb mc in la b lb lw lf lx lj md ln me lr mf lv mg mh mi mj bi translated">第一部分，即标头，是关于所用哈希算法的 base64 编码信息。</li><li id="b4f8" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">第二部分是有效负载，是关于会话的 base64 编码信息(user_id、令牌发布日期或到期日期、令牌类型:访问或刷新)</li><li id="ad8f" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">第三部分，即哈希值，是第一部分和第二部分使用服务器的秘密密钥的哈希输出。</li></ol><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/5f868a737da4c3b7c8ae0e0ebcbd3d81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PYDp9gaLlYxTkcpqhvDgHQ.png"/></div></div></figure><h1 id="6c76" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">服务器如何用令牌授权用户？</h1><ol class=""><li id="3650" class="mb mc in la b lb lc lf lg lj mu ln mv lr mw lv mg mh mi mj bi translated">当您使用凭据登录时，服务器会创建两个令牌(访问和刷新)并将它们发送给客户端。</li><li id="4fa8" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">客户端存储这些令牌，并在其所有后续请求中向服务器发送访问令牌。</li><li id="2d84" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">服务器获取令牌的第一部分和第二部分，并使用秘密密钥对其进行哈希处理。如果输出与最后一部分匹配，那么令牌未被篡改，信息是可信的。</li><li id="26a8" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">它还可以读取有效载荷数据以检查令牌是否过期。</li><li id="1427" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">当访问令牌过期时，客户端将使用刷新令牌请求新的访问令牌。当刷新令牌过期时，用户必须再次登录。</li></ol><h1 id="7d38" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">使用 JWT 代币有什么好处？</h1><ol class=""><li id="36be" class="mb mc in la b lb lc lf lg lj mu ln mv lr mw lv mg mh mi mj bi translated">不需要表格来存储会话信息。</li><li id="02b0" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">因为验证完全依赖于秘密密钥，所以我们可以拥有一组具有相同秘密密钥的分布式服务器。并且由其中一个服务器创建的令牌将被另一个服务器识别。此外，重要的是提醒您要对密钥保密。</li></ol></div></div>    
</body>
</html>