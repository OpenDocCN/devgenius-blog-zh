<html>
<head>
<title>Code Smell 91 — Test Asserts without Description</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">代码气味 91 —没有描述的测试断言</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/code-smell-91-test-asserts-without-description-fcf1ea2bcbf9?source=collection_archive---------4-----------------------#2021-10-08">https://blog.devgenius.io/code-smell-91-test-asserts-without-description-fcf1ea2bcbf9?source=collection_archive---------4-----------------------#2021-10-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3c5b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">我们是 xUnit 的忠实粉丝。但是我们不太关心程序员。</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/85e502234dd680ef3f481a6c6a316c47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VfnF0HqWpgZQVDVCMtu_TQ.jpeg"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk translated"><a class="ae kt" href="https://unsplash.com/@startaeteam" rel="noopener ugc nofollow" target="_blank"> Startaê Team </a>在<a class="ae kt" href="https://unsplash.com/s/photos/dialogue" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><blockquote class="ku kv kw"><p id="e821" class="kx ky kz la b lb lc jo ld le lf jr lg lh li lj lk ll lm ln lo lp lq lr ls lt ig bi translated"><em class="in">TL；DR:使用带有声明性描述的断言。</em></p></blockquote><h1 id="6a82" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">问题</h1><ul class=""><li id="56da" class="mm mn in la b lb mo le mp mq mr ms mt mu mv lt mw mx my mz bi translated">可读性</li><li id="2815" class="mm mn in la b lb na le nb mq nc ms nd mu ne lt mw mx my mz bi translated">硬调试</li><li id="2160" class="mm mn in la b lb na le nb mq nc ms nd mu ne lt mw mx my mz bi translated">浪费时间</li></ul><h1 id="4684" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">解决方法</h1><ol class=""><li id="188f" class="mm mn in la b lb mo le mp mq mr ms mt mu mv lt nf mx my mz bi translated">放一个漂亮的描述性断言</li><li id="b44d" class="mm mn in la b lb na le nb mq nc ms nd mu ne lt nf mx my mz bi translated">分享解决问题的指南</li></ol><h1 id="ce56" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">示例代码</h1><h2 id="554a" class="ng lv in bd lw nh ni dn ma nj nk dp me mq nl nm mg ms nn no mi mu np nq mk nr bi translated">错误的</h2><pre class="ke kf kg kh gt ns nt nu nv aw nw bi"><span id="8474" class="ng lv in nt b gy nx ny l nz oa">&lt;?</span><span id="ce0d" class="ng lv in nt b gy ob ny l nz oa">public function testNoNewStarsAppeared(): void<br/>  {<br/>     $expectedStars = $this-&gt;historicStarsOnFrame();<br/>     $observedStars = $this-&gt;starsFromObservation();<br/>     //These sentences get a very large collection</span><span id="93f7" class="ng lv in nt b gy ob ny l nz oa">     $this-&gt;assertEquals($expectedStars, $observedStars);<br/>     //If something fails we will have a very hard debugging time<br/>    }</span></pre><h2 id="b111" class="ng lv in bd lw nh ni dn ma nj nk dp me mq nl nm mg ms nn no mi mu np nq mk nr bi translated">对吧</h2><pre class="ke kf kg kh gt ns nt nu nv aw nw bi"><span id="a41f" class="ng lv in nt b gy nx ny l nz oa">&lt;?</span><span id="0b6f" class="ng lv in nt b gy ob ny l nz oa">public function testNoNewStarsAppeared(): void<br/>  {<br/>     $expectedStars = $this-&gt;historicStarsOnFrame();<br/>     $observedStars = $this-&gt;starsFromObservation();<br/>     //These sentences get a very large collection</span><span id="d522" class="ng lv in nt b gy ob ny l nz oa">     $newStars = array_diff($expectedStars, $observedStars);</span><span id="2f01" class="ng lv in nt b gy ob ny l nz oa">     $this-&gt;assertEquals($expectedStars, $observedStars ,<br/>         'There are new stars ' . print_r($newStars,true));<br/>     //Now we can see EXACTLY why the assertion failed with a clear and<br/>     //Declarative Message <br/>    }</span></pre><h1 id="4c8d" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">侦查</h1><p id="0b7d" class="pw-post-body-paragraph kx ky in la b lb mo jo ld le mp jr lg mq oc lj lk ms od ln lo mu oe lr ls lt ig bi translated">由于<em class="kz">断言</em>和<em class="kz">断言描述</em>是不同的函数，我们可以调整策略以支持后者。</p><h1 id="2fde" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">标签</h1><ul class=""><li id="3eea" class="mm mn in la b lb mo le mp mq mr ms mt mu mv lt mw mx my mz bi translated">测试气味</li></ul><h1 id="64cc" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">结论</h1><p id="7401" class="pw-post-body-paragraph kx ky in la b lb mo jo ld le mp jr lg mq oc lj lk ms od ln lo mu oe lr ls lt ig bi translated">尊重你的主张的读者。</p><p id="3db2" class="pw-post-body-paragraph kx ky in la b lb lc jo ld le lf jr lg mq li lj lk ms lm ln lo mu lq lr ls lt ig bi translated">甚至可能是你自己！</p><h1 id="d4de" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">更多信息</h1><ul class=""><li id="ccb8" class="mm mn in la b lb mo le mp mq mr ms mt mu mv lt mw mx my mz bi translated"><a class="ae kt" href="https://github.com/xunit/xunit/issues/350" rel="noopener ugc nofollow" target="_blank">XUnit:Assert Description Deprecation</a></li></ul></div><div class="ab cl of og hr oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ig ih ii ij ik"><blockquote class="ku kv kw"><p id="7a7a" class="kx ky kz la b lb lc jo ld le lf jr lg lh li lj lk ll lm ln lo lp lq lr ls lt ig bi translated">总是这样编码，就好像最终维护你的代码的人会是一个知道你住在哪里的暴力精神病患者。</p></blockquote><p id="71bf" class="pw-post-body-paragraph kx ky in la b lb lc jo ld le lf jr lg mq li lj lk ms lm ln lo mu lq lr ls lt ig bi translated">约翰·伍兹</p><div class="om on gp gr oo op"><a rel="noopener  ugc nofollow" target="_blank" href="/software-engineering-great-quotes-3af63cea6782"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd io gy z fp ou fr fs ov fu fw im bi translated">软件工程名言</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">有时一个简短的想法可以带来惊人的想法。</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">blog.devgenius.io</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd kn op"/></div></div></a></div></div><div class="ab cl of og hr oh" role="separator"><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok ol"/><span class="oi bw bk oj ok"/></div><div class="ig ih ii ij ik"><p id="734d" class="pw-post-body-paragraph kx ky in la b lb lc jo ld le lf jr lg mq li lj lk ms lm ln lo mu lq lr ls lt ig bi translated">本文是 CodeSmell 系列的一部分。</p><div class="om on gp gr oo op"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-find-the-stinky-parts-of-your-code-fa8df47fc39c"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd io gy z fp ou fr fs ov fu fw im bi translated">如何找到你的代码中有问题的部分</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">代码很难闻。让我们看看如何改变香味。</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">blog.devgenius.io</p></div></div><div class="oy l"><div class="pe l pa pb pc oy pd kn op"/></div></div></a></div></div></div>    
</body>
</html>