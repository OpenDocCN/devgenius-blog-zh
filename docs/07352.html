<html>
<head>
<title>Cat Facts: UnityWebRequest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡特彼勒事实:UnityWebRequest</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/cat-facts-unitywebrequest-f8a5725c15f4?source=collection_archive---------8-----------------------#2022-03-17">https://blog.devgenius.io/cat-facts-unitywebrequest-f8a5725c15f4?source=collection_archive---------8-----------------------#2022-03-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="6f5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">目标:使用 UnityWebRequest 检索猫的图像和猫的事实。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/1db074e28e56345c109d600cc00c6374.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qgnDwaB6VdNQwn_ZF32R3w.gif"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用 UnityWebRequest 下载的图像和事实。</figcaption></figure><p id="3892" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建一个新场景，添加一个 UI &gt; RawImage 和 UI &gt; Text，分别命名为<strong class="jm io"> Cat_img </strong>和<strong class="jm io"> Fact_txt </strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/febc4630a4e16f296b74a9f2f0ebb236.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*l-qa2BcMFELv9bOvemNAeg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">WebRequest 场景的层次结构。</figcaption></figure><p id="f6c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将<strong class="jm io"> Cat_img </strong>锚定器设置为拉伸-拉伸并归零<em class="kz">左侧、右侧、位置 Z、顶部</em>和<em class="kz">底部</em>。将颜色设置为浅灰色，以使图像变暗，从而突出文字。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi la"><img src="../Images/38094b6fbb0ec9263d81d35ffb21462f.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*dBDK88eQnzCyaUUaheu2ow.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Cat_img 组件设置</figcaption></figure><p id="2dfa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> Fact_txt </strong>尺寸在位置 X，Y，Z 零点为 72，宽度为 1400，高度为 700。将文本居中对齐，水平<em class="kz">换行</em>和垂直<em class="kz">溢出</em>。将文本颜色设置为白色，以便从图像中突出出来。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/117abeeb523478095ffa94829b2bcc80.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*rTiQ4N6t8Ny1BmCc_Pi65w.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Fact_txt 组件设置。</figcaption></figure><p id="b231" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">画布</strong>设置如下图所示。<em class="kz"> UI 比例模式</em>设置为<em class="kz">比例，屏幕尺寸</em>，分辨率为 1920x1080。向<strong class="jm io">画布</strong>添加一个名为<strong class="jm io">的新 C#脚本下载</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lc"><img src="../Images/5984b828155740ec767d7793abcfa90d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZjHT4GdBnIlzDICkWhiwaA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">画布组件设置，包括下载脚本变量赋值。</figcaption></figure><p id="b5a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下载脚本包含两个类:<strong class="jm io"> CatFact </strong>和<strong class="jm io"> Download </strong>。<strong class="jm io"> CatFact </strong>是一个包含 Json 定义的类，由<strong class="jm io"> fact </strong> <em class="kz"> string </em>的<em class="kz"> string </em> <strong class="jm io"> fact </strong>和<em class="kz"> int </em> <strong class="jm io"> length </strong>组成，下载管理<em class="kz"> UnityWebRequests </em>，需要图片、<strong class="jm io"> _url </strong>和事实、<strong class="jm io"> _url2 的网站字符串<strong class="jm io"> UnityWebRequest </strong>变量使用<em class="kz"> SerializeField </em>，因此它们可以在检查器中定义，如上所示。将<strong class="jm io"> Cat_img </strong>分配给<strong class="jm io"> _catImg </strong>，将<strong class="jm io"> Fact_txt </strong>分配给<strong class="jm io"> _factText </strong>。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/ff23569c59df387326514ca8eb3ae81f.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*WiG4yPgMcL3mfB8j-xH3Tg.png"/></div></figure><p id="629c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io"> void Start() </strong>中，启动<strong class="jm io"> DownloadImageRoutine </strong>。<em class="kz">unity brequest</em><strong class="jm io">请求</strong>从网站<strong class="jm io"> _url </strong>获取纹理。<em class="kz">使用</em>确保这个<strong class="jm io">请求</strong>一旦完成就被处理掉。<strong class="jm io">请求。SendWebRequest </strong>在这个 IEnumerator 中等待，直到完成。如果<strong class="jm io">请求.结果</strong>成功，使用<em class="kz">下载处理纹理</em>分配变量<strong class="jm io">纹理</strong>，并将<strong class="jm io">_ 图像</strong>分配给此<strong class="jm io">纹理</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi le"><img src="../Images/5e0b84b99a3c86f9884e7151f1f3088e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*zEhtmX6OwqkGdfN7plPJqg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">用于从网上抓取 jpg 图像的程序。</figcaption></figure><p id="a1ae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io"> void Update() </strong>中，当用户按下空格键时，启动<strong class="jm io"> CatFactRoutine </strong>。<em class="kz"> UnityWebRequest </em> <strong class="jm io">请求</strong>从网站<strong class="jm io"> _url2 </strong>获取结果。在<strong class="jm io">请求之后。SendWebRequest </strong>成功完成，使用<em class="kz"> DownLoadHandler.text </em>设置<em class="kz">字符串</em> <strong class="jm io"> jsonString </strong>。事实由前面描述的<strong class="jm io"> CatFact </strong>类使用<em class="kz"> JsonUtility 定义。FromJson </em>。<strong class="jm io"> _factText </strong>被设置为这个<strong class="jm io"> fact.fact </strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/20526d308373fd1c93703a28faa95037.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*WNVUv5899a0mJN8Oyp35JA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">CatFactRoutine 用于从 web 上获取 cat 事实。</figcaption></figure><p id="13ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">享受悬停猫和事实！</p></div></div>    
</body>
</html>