# 肮脏的代码和全球变暖

> 原文：<https://blog.devgenius.io/dirty-code-and-global-warming-27f04623178d?source=collection_archive---------27----------------------->

## 干净代码和对抗全球变暖有什么共同点？

*并不是脏代码导致全球变暖，而是导致全球变暖的相同行为也导致了脏代码。*

![](img/cce3292c47e9c34a51da205409da11bc.png)

由 [NASA](https://unsplash.com/@nasa?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

几天前，我看到了这个视频:

25 分 58 秒:罗伯特·c·马丁解释了恶意代码的影响。

Robert C. Martin 警告说，任何代码都会随着时间变得越来越乱，除非我们努力保持代码的整洁。如果我们不保持代码的整洁，我们在第一次迭代中会更快。然而，在接下来的迭代中，我们交付的价值越来越少，最终，成本上升，项目几乎冻结。代码腐烂了，变得一塌糊涂。

我们在任何地方都读到过这种警告。你可以从敏捷宣言的其他创造者那里听到同样的话；没有干净的代码，敏捷是不可行的。在开发人员中，Robert C. Martin 的《Clean Code book》被认为是必读书。我们都知道这一点，我们都知道后果。但是由于某些原因，我们仍然在交付肮脏的代码。看起来像全球变暖，每个人都知道我们必须改变我们的行为，但没有人做任何重要的步骤。

# 全球变暖

全球变暖要克服两个问题:解决全球变暖没有立竿见影的个人回报，未来大家分担同样的成本。

如果我们今天试图解决全球变暖，我们在个人层面上付出了高昂的代价:更长的通勤时间，更昂贵的产品，以及许多其他东西。如果我们改变我们家的窗户，我们可以在十年内节省一些钱，但今天它更便宜支付更多的能源。

但是不管我们每个人付出多少努力都没有关系；我们每个人都是亿万人中的一员。我们需要其他人跟随我们，因为如果我们付钱去做改变，但是没有其他人做，我们付双倍的钱。我们今天为试图改变某些事情付出代价，明天又为全球变暖付出代价。

# 肮脏的代码

脏代码有同样的两个主要问题。保持代码肮脏对个人有短期的好处，但从长期来看，每个人都会受到影响。

个人的短期利益通常被忽视，但它总是存在的。它可以是显式的，也可以是隐式的。它可以是像试图比你的同事看起来更好一样卑鄙的事情，“你更快，你更好”。但是它通常是像简单的“做得好”或者指出在任意期望下实现的点的比率一样简单的事情。有多少次你觉得有必要给出一些解释来保持你的代码整洁？

但是，如果团队中的所有成员都没有持续保持代码的整洁，几个月后，每个人都会开始为此付出代价。编码者变得更慢，特性变得更长，延迟和挣扎增加，大重构的影子出现了。尽管如此，在这一点上，尽管任何人都慢十倍，但总是有不清理代码的动机。

# 公地的悲剧

同样的人类行为导致了全球变暖和肮脏的代码。朝着错误的方向前进会有短期回报。集体行为也有一个后果。

![](img/ed24e985aab6acd369b5427ab5e0c471.png)

霍利·曼达里奇在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

这两种情况都是[公地悲剧](https://en.wikipedia.org/wiki/Tragedy_of_the_commons) : *在共享资源系统中，个体用户根据自身利益独立行动，并通过集体行动耗尽或破坏共享资源而违背所有用户的共同利益*。

我们都从其他例子中知道这种现象。钓鱼是最著名的例子。许多渔民共享同一个渔场；如果他们中的任何一个人比其他人捕鱼多赚更多的钱，但同时会减少未来的鱼类种群，并影响每个人的未来利润。还有很多其他的例子，比如共享草地，甚至办公室冰箱。

# 还原脏代码

全球变暖是缓慢的，需要几代人才能看到影响。它始于一百多年前。但是脏代码效果很快。短短两年，它就毁掉了任何一个成本高、bug 多的项目。

![](img/ba05dafe13fc1e1fe1e07fd76cab880b.png)

照片由 [Samantha Gades](https://unsplash.com/@srosinger3997?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

关于脏代码最令人不安的事实是，您可能因为脏代码而处于一个被破坏的项目中，而看不到它。也许你意识到它需要一些清理，但你可能更关注下一个功能和截止日期。

不，“伟大的重构”永远不是解决方案。如果你认为你需要“重构”——你不能继续编写应用程序——你就晚了。在这个过程中，您错过了许多微小的重构。

脏代码有什么解决办法吗？对于公地悲剧，它有着同样的答案:我们能强迫每个人为了共同利益而工作吗？每个问题都有它的解决方案。在计算机软件方面，我们有敏捷和精益。敏捷定义了一个衡量进展的框架，一些实现称之为点，但它不是目标度量。你可以用它来估计未来，但不能用来评估进步。寻找其他指标来评估进展、开发人员，以及整个团队和项目是否在正确的方向上。精益可以帮助你做到这一点。它声明特性和构建时间不是目标；目标是他们的结果。

简而言之:如果您不希望项目中出现脏代码，就不要根据快速交付的特性来创造奖励。

![](img/6146b14c9819dc993782348e9babef51.png)

照片由 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的 [Naufal Ardi Santoso](https://unsplash.com/@naufalardisantoso?utm_source=medium&utm_medium=referral) 拍摄

*感谢阅读。我通常喜欢写故事来思考我们如何理解和应用软件工程，并让我们思考我们可以改进什么。如果你喜欢这篇文章，* [*查看我在媒体上最成功的故事*](https://drpicox.medium.com/my-most-viewed-stories-95b5d96ade0e) *阅读更多。您也可以通过访问此推荐链接* *成为* [*中等会员。*](https://drpicox.medium.com/membership)