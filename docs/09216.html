<html>
<head>
<title>Data Processing Architectures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据处理架构</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/data-processing-architectures-aaa4cd2437e?source=collection_archive---------6-----------------------#2022-08-07">https://blog.devgenius.io/data-processing-architectures-aaa4cd2437e?source=collection_archive---------6-----------------------#2022-08-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/aeaac12babeb683d0f3b18bf716f0651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QjSx0r4Z9B9CHq55x1_FxA.jpeg"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">克劳迪奥·施瓦兹在<a class="ae ja" href="https://unsplash.com/s/photos/pipelines?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><p id="f41b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">λ和κ</p><p id="487c" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">除了更传统的数据管道之外，现代数据处理平台还需要处理实时流事件。决定正确的架构，Lambda 或 Kappa 是迈向良好平台战略的重要一步。</p><h1 id="3b33" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">数据处理架构的设计目标:</h1><ul class=""><li id="a8a6" class="lw lx jd kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated">读取一致的数据</li><li id="cda0" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">从大型表/数据集中增量读取</li><li id="f59f" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">反转</li><li id="3b8d" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">回放历史事件的能力</li><li id="03ec" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">数据迟到的处理</li></ul><p id="a076" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们来看看这两种架构。</p><h1 id="5caf" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">希腊字母的第 11 个</h1><p id="af30" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">Lambda 架构是一种处理大数据的混合(流和批处理)方法。lambda 架构本身由 3 层组成:</p><ul class=""><li id="078b" class="lw lx jd kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">批处理图层-定期处理数据</li><li id="6ead" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">流图层-处理不包括在最后一个批处理窗口中的数据</li><li id="9a5f" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">服务层—从批处理和流中获取数据的统一层</li></ul><figure class="mt mu mv mw gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ms"><img src="../Images/ae5c9619b8217a2446ec91f2e0a66937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JI3wPnEPuQKUCJuh1JK3qw.png"/></div></div></figure><figure class="mt mu mv mw gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/b51e3c222bd1f6eaa96c18cdc0fd3fe9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jmVY0IE50f6ot8caGhM8-w.png"/></div></div></figure><h2 id="9c2e" class="my kz jd bd la mz na dn le nb nc dp li kl nd ne lm kp nf ng lq kt nh ni lu nj bi translated">赞成的意见</h2><ul class=""><li id="b3cc" class="lw lx jd kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated">Lambda 架构的批处理层是容错的，因为它使用分布式存储。</li><li id="9b1e" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">它在速度和可靠性之间取得了平衡。</li><li id="95ec" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">因为流和批处理是分开的，所以我们可以分别对它们进行缩放。</li></ul><h2 id="0fa9" class="my kz jd bd la mz na dn le nb nc dp li kl nd ne lm kp nf ng lq kt nh ni lu nj bi translated">骗局</h2><ul class=""><li id="77be" class="lw lx jd kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated">编码开销。</li><li id="da05" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">它会在下一个批处理周期重新处理流中的数据。</li><li id="5d03" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">难以迁移。</li></ul><h1 id="2c0a" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">卡帕</h1><p id="7e23" class="pw-post-body-paragraph ka kb jd kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">Kappa 架构被认为是 Lambda 架构的更简单版本。</p><blockquote class="nk"><p id="ed4b" class="nl nm jd bd nn no np nq nr ns nt kx dk translated">在卡帕，一切都是溪流。</p></blockquote><p id="6f53" class="pw-post-body-paragraph ka kb jd kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">Kappa 架构通过单一技术堆栈(流)执行实时和批处理。在这个设计中，传入的一系列数据首先存储在一个消息引擎中，比如 Apache Kafka(也可以使用类似的工具，比如 Pulsar、Kinesis 和 EventHub)。流处理引擎将读取数据并将其转换为所需的格式，然后将其存储在分析数据库中供最终用户查询。</p><figure class="mt mu mv mw gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nz"><img src="../Images/09203da7968937d90f1d6617eeefe6d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7FCbGOK5pZwiKEKQy3yKuA.png"/></div></div></figure><figure class="mt mu mv mw gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi oa"><img src="../Images/c936960284fe64a196ab540710635042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VZLChd1b8tWTiPlZL-J7YQ.png"/></div></div></figure><p id="4a01" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在 Kappa 架构中，读取和写入是分离的。读写模型只是一个投影。</p><h2 id="7156" class="my kz jd bd la mz na dn le nb nc dp li kl nd ne lm kp nf ng lq kt nh ni lu nj bi translated">赞成的意见</h2><ul class=""><li id="135c" class="lw lx jd kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated">由于使用了单个处理堆栈，代码开销更少</li><li id="199e" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">没有事件的重复处理</li><li id="e5b7" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">查询只需要查看单一视图，无需创建统一视图。</li><li id="5055" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">Kappa 架构已在 Twitter、优步、网飞、迪士尼和 Shopify 等公司实施。因此，从良好的文档和实践经验开始。</li></ul><h2 id="0d88" class="my kz jd bd la mz na dn le nb nc dp li kl nd ne lm kp nf ng lq kt nh ni lu nj bi translated">骗局</h2><ul class=""><li id="2025" class="lw lx jd kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated">需要复杂的设置来处理重复事件、交叉引用事件或维护顺序。</li><li id="14de" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">困难的回填，但有了像 Iceberg 这样的新表格格式，就简单了。</li><li id="ed39" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">需要实现一个全局水印。</li><li id="7c5e" class="lw lx jd kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">通常的元数据解决方案不能用于治理。</li></ul><p id="343f" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Kappa 不是 Lambda 的替代品，它是批处理层的活动性能不需要满足标准服务质量的情况下的替代方案。在大多数情况下，您将从 lambda 层开始，并剥离一些最适合 Kappa 架构的用例。</p></div></div>    
</body>
</html>