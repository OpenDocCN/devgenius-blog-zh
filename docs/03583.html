<html>
<head>
<title>Display Firebase Firestore data inside UITableView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在UITableView中显示Firebase Firestore数据</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/display-firebase-firestore-data-inside-uitableview-e838f4213689?source=collection_archive---------0-----------------------#2020-11-21">https://blog.devgenius.io/display-firebase-firestore-data-inside-uitableview-e838f4213689?source=collection_archive---------0-----------------------#2020-11-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="70ea" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何以编程方式创建UITableView来显示Firestore集合中的数据</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6ee1ff7d6575b056ac54d06f653b1c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SKXC6jp19rqoR1Iz5EvzGw.png"/></div></div></figure><p id="4ce3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">难度:初级|简单| <strong class="kt ir">普通</strong> |挑战</p><p id="aada" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">环境:Xcode 12和Swift 5.3(以编程方式)</p><p id="61bd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要求:</p><ul class=""><li id="cf24" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">让<a class="ae lw" href="https://firebase.google.com/docs/ios/setup" rel="noopener ugc nofollow" target="_blank"> Firebase SDK </a>与您的项目和Firebase/Firestore pod一起安装。</li><li id="2d2a" class="ln lo iq kt b ku lx kx ly la lz le ma li mb lm ls lt lu lv bi translated"><a class="ae lw" href="https://developer.apple.com/documentation/uikit/uitableview" rel="noopener ugc nofollow" target="_blank"><em class="mc">ui tableview</em></a>&amp;<a class="ae lw" href="https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html" rel="noopener ugc nofollow" target="_blank"><em class="mc">MVC</em></a>模式的知识</li></ul></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="8592" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">快速设置</h2><blockquote class="nd ne nf"><p id="30ff" class="kr ks mc kt b ku kv jr kw kx ky ju kz ng lb lc ld nh lf lg lh ni lj lk ll lm ij bi translated">如果您的项目中没有集成Firebase SDK，请先查看我的教程:</p></blockquote><div class="nj nk gp gr nl nm"><a href="https://medium.com/ios-design-code/integrate-firebase-with-an-ios-project-xcode-12-28512f202bb0" rel="noopener follow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">将Firebase与iOS项目集成| Xcode 12</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">了解如何将Firebase SDK与现有的iOS项目集成。</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">medium.com</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa kp nm"/></div></div></a></div><p id="8e01" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">转到您的Firebase控制台&gt;云Firestore &gt;创建一个新数据库</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/ad2cf47c38c95dfd9d645ec17e109de2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*atgQTazX2RjADMHWJ3js7w.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">Firebase控制台的屏幕截图</figcaption></figure><p id="6c8a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，创建一个名为"<strong class="kt ir"> <em class="mc"> User </em> </strong>"的集合，并从这个集合中创建一堆带有两个字段的文档:"<strong class="kt ir"> <em class="mc"> name </em> </strong>"和"<strong class="kt ir"> <em class="mc"> surname </em> </strong>"，然后给它们取您想要的名字和姓氏。</p><blockquote class="nd ne nf"><p id="fa4f" class="kr ks mc kt b ku kv jr kw kx ky ju kz ng lb lc ld nh lf lg lh ni lj lk ll lm ij bi translated">确保在任何地方都使用相同的措辞，否则不会起作用。</p></blockquote><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/a40b30aaafe493df3f9871add6db9dc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W_--SSfxjyTDJM6IGuAn9g.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">Firebase控制台的屏幕截图</figcaption></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="9c32" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">让我们创建我们的模型</h2><p id="1cbf" class="pw-post-body-paragraph kr ks iq kt b ku oh jr kw kx oi ju kz la oj lc ld le ok lg lh li ol lk ll lm ij bi translated">在Xcode中新建一个组，命名为“<strong class="kt ir"> <em class="mc">用户</em> </strong>”，它将保存3个Swift文档。</p><p id="8169" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来，启动一个新的Swift文件，将其命名为“<strong class="kt ir"> <em class="mc">用户</em> </strong>”，并将下面的代码粘贴到该文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="7cc5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，启动另一个Swift文件，将其命名为“<strong class="kt ir"> <em class="mc"> userFirebase </em> </strong>”。复制/粘贴下面的代码，这个代码对于从Firestore数据库中查询带有我们给他们的条目的文档很有用:姓名。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="d60f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，创建最后一个Swift文件，将其命名为“<strong class="kt ir"> <em class="mc"> userService </em> </strong>”，并粘贴下面的代码:这段代码允许我们对Firestore数据库集合进行快照。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="5bbd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们已经准备好了模型，那么从Firestore加载数据并在我们的用户界面中显示它就变得很容易了。您的项目现在应该如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/bf814fb07be9332094c331a1a3230bf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nom2zKD2S-RkrtuIPMltSg.png"/></div></div><figcaption class="oc od gj gh gi oe of bd b be z dk translated">Xcode截图</figcaption></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="b3cc" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">让我们创建表格视图！</h2><p id="7b49" class="pw-post-body-paragraph kr ks iq kt b ku oh jr kw kx oi ju kz la oj lc ld le ok lg lh li ol lk ll lm ij bi translated">继续为您的项目创建一个新文件，将其命名为“<em class="mc"> ListViewController </em>”，并选择<em class="mc"> UIViewController </em>作为子类。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi op"><img src="../Images/9a3f981d2ec270a624867e17cd57997e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1N98ukAt64x14xh788MESw.png"/></div></div></figure><p id="b6db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，将下面的代码复制/粘贴到您刚刚创建的<em class="mc"> ListViewController </em>中。这是一个简单的<em class="mc">表格视图</em>，通过编程创建，适合整个屏幕，但没有数据呈现！</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="35e7" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">让我们展示来自Firebase Firestore的数据</h2><p id="3551" class="pw-post-body-paragraph kr ks iq kt b ku oh jr kw kx oi ju kz la oj lc ld le ok lg lh li ol lk ll lm ij bi translated">在你的<em class="mc"> UIViewController: </em>顶部导入Firestore框架</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="df4c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过<em class="mc"> viewDidLoad </em>方法声明这3个变量:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="cdab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们从Firestore加载数据。复制/粘贴下面的函数，并在<em class="mc"> viewDidLoad </em>函数中调用<em class="mc"> loadData() </em>函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="b71a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好吧！我们已经成功地从集合“<em class="mc">用户</em>”中加载了文档。我们已经到了最后一步:在我们的<em class="mc">表格视图</em>中显示它。用这个函数替换<em class="mc">表格视图(cellForRowAt) </em>函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="c451" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后用下面的函数替换<em class="mc"> numberOfRowsInSection </em>函数，这样<em class="mc">表格视图</em>返回我们当前拥有的文档数量:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="9934" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">将您的ListViewController作为项目的<em class="oq"> rootViewController </em>并运行它！🏃‍♂️</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi or"><img src="../Images/01ad380a0a863d6b4181522556d8f4c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fcdw5UwfJZW_-hDfi1Xs8A.png"/></div></div></figure><p id="b070" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">瞧啊！我们来自Firebase的文档现在可以正确显示在我们的<em class="mc">表格视图</em>中。好消息是，Firestore是一个基于云的数据库，我们在代码中重新加载了<em class="mc"> tableView </em>，每次您添加一个文档，它都会在几秒钟内显示在我们的用户界面上！</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><blockquote class="os"><p id="e99e" class="ot ou iq bd ov ow ox oy oz pa pb lm dk translated">感谢阅读！如果你有任何问题，请给我留言，如果你觉得有用，请与可能也会觉得有趣的人分享！</p></blockquote></div></div>    
</body>
</html>