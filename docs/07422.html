<html>
<head>
<title>Building Your Own Python Data Visualization Desktop App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建自己的 Python 数据可视化桌面应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/building-your-own-python-data-visualization-desktop-app-f82dd1f9b2ed?source=collection_archive---------1-----------------------#2022-03-24">https://blog.devgenius.io/building-your-own-python-data-visualization-desktop-app-f82dd1f9b2ed?source=collection_archive---------1-----------------------#2022-03-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="a7a2" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用 PyQt5、Pyecharts 和 echarts 构建可视化应用程序</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/54de27e589e291096c815f5b526600aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AvwFuI_ClNKZAgjJ"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ks" href="https://unsplash.com/@austindistel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Austin Distel </a>拍摄的照片</figcaption></figure><p id="258e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ECharts 是百度的一款开源数据可视化工具，缩写自企业级图表，商业级数据图表。这是一个非常吸引人的、用户友好的、广泛使用的数据可视化工具。</p><p id="93f9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">【https://echarts.apache.org/en/index.html 官方文件:<a class="ae ks" href="https://echarts.apache.org/en/index.html" rel="noopener ugc nofollow" target="_blank"/></p><p id="a9d0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我就不赘述了，因为网上有很多关于 ECharts 的信息。本文主要讲的是如何用 10 分钟的时间，结合 PyQt5 和 Echarts，构建自己的数据可视化桌面 App。</p><p id="c686" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">表格内容:</strong></p><p id="5680" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="#400a" rel="noopener ugc nofollow"> PyQt5 用于数据可视化</a> <br/> <a class="ae ks" href="#a3ee" rel="noopener ugc nofollow">实现</a><br/>∘<a class="ae ks" href="#2a74" rel="noopener ugc nofollow">pyqt 5 和 Pyecharts 的组合(不在 Pyinstaller 打包时工作)</a> <br/> ∘ <a class="ae ks" href="#e250" rel="noopener ugc nofollow">获取股票数据</a> <br/> ∘ <a class="ae ks" href="#7f8c" rel="noopener ugc nofollow">创建 AppMainWindow </a> <br/> ∘ <a class="ae ks" href="#7485" rel="noopener ugc nofollow">完整代码片段:</a><br/>∘<a class="ae ks" href="#1cba" rel="noopener ugc nofollow">pyqt 5 和 echarts 的组合(在 Pyinstaller 打包时工作)【T29</a></p><h1 id="400a" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">用于数据可视化的 PyQt5</h1><p id="bd0e" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在开始编码之前，我们先来谈谈 PyQt5 的数据可视化。有许多数据可视化工具可以与 PyQt5 集成，如 QtChart、PyQtGraph、Plotly，当然包括 Pyecharts 和 echarts 等等。</p><p id="fa98" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">就我个人而言，我最近才开发了一些可视化工具，比如 Plotly、Boken、Matplotlib、Seaborn、Pyecharts、echarts 等等。我发现 Pyecharts 和 echarts 是最吸引人的，也是最实用的，但是用的人比较少。</p><p id="003b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">【可选】如果想了解更多可视化工具之间的区别，请看我之前的</strong><a class="ae ks" href="https://edwardlow0620.medium.com/the-battle-among-4-python-data-visualization-tools-f4e90ab157ac" rel="noopener"><strong class="kv io"/></a><strong class="kv io">。</strong></p><p id="9f64" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">此外，当使用 pyinstaller 打包 PyQt5 时，所有这些库(不包括 QtChart)都面临同样的问题。所以，最后，Pyecharts 和 echarts 是我做这个演示的选择。</p><p id="1e3f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为什么我一直把 Pyecharts 和 echarts 分开说？因为您可以在 PyQt5 程序中单独使用 Pyecharts 或 echarts 进行数据可视化，但有一点不同。虽然 Pyecharts 和 echarts 的核心思想非常相似，但是在 pyqt 5 应用程序中有一个显著的变化。</p><p id="8ee1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下面我提供 Pyecharts 和 echarts 实现代码，希望对大家有所帮助。</p><h1 id="a3ee" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">履行</h1><h2 id="2a74" class="mm lq in bd lr mn mo dn lv mp mq dp lz lc mr ms mb lg mt mu md lk mv mw mf mx bi translated">PyQt5 和 Pyecharts 的组合(当 Pyinstaller 打包时不起作用)</h2><p id="d05c" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">如果您的环境中还没有安装相关的包，不要忘记安装。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="65e1" class="mm lq in mz b gy nd ne l nf ng">pip install PyQt5<br/>pip install PyQtWebEngine<br/>pip install pyecharts<br/>pip install pandas_datareader<br/>pip install pandas</span></pre><p id="c0c0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">导入模块:</strong></p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="e715" class="mm lq in mz b gy nd ne l nf ng">import sys<br/>from PyQt5.QtWidgets import *<br/>from PyQt5.QtCore import *<br/>from PyQt5.QtWebEngineWidgets import QWebEngineView<br/><br/>from pyecharts.charts import Line<br/>from pyecharts import options as opts<br/><br/>from datetime import datetime<br/>from datetime import timedelta<br/>import pandas_datareader as data_reader<br/>import pandas as pd<br/>import os</span></pre><p id="291e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这个阶段，我将为这个应用程序的实现导入必要的模块。</p><h2 id="e250" class="mm lq in bd lr mn mo dn lv mp mq dp lz lc mr ms mb lg mt mu md lk mv mw mf mx bi translated"><strong class="ak">获取股票数据</strong></h2><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="87ae" class="mm lq in mz b gy nd ne l nf ng">def get_stock_data(stocktickers, days):<br/><br/>    start = (datetime.now() - timedelta(days=days)).strftime('%Y-%m-%d')<br/>    end = (datetime.now()).strftime('%Y-%m-%d')<br/>    stock = []<br/>    for stockticker in stocktickers:<br/>        data = data_reader.DataReader(stockticker, 'yahoo', start, end)<br/>        data['stock_ticker'] = stockticker<br/>        stock.append(data)<br/><br/>    return pd.concat(stock)</span></pre><p id="8972" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用 pandas_reader 定义一个从 Yahoo Finance 中提取数据的函数。如果你读过我以前的帖子，这个函数在最小改动中被重用了几次。如果你是数据科学领域的新生，可以看看这篇<a class="ae ks" href="https://medium.datadriveninvestor.com/stock-market-analysis-with-python-plotly-dash-and-powerbi-48975c48fe73" rel="noopener ugc nofollow" target="_blank">帖子</a>。</p><h2 id="7f8c" class="mm lq in bd lr mn mo dn lv mp mq dp lz lc mr ms mb lg mt mu md lk mv mw mf mx bi translated">创建 AppMainWindow</h2><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="45f0" class="mm lq in mz b gy nd ne l nf ng">class MainWindow(QMainWindow):<br/><br/>    def __init__(self, *args, **kwargs):<br/>        super().__init__(*args, **kwargs)<br/>        self.setWindowTitle('Stock Market App with Pyecharts')<br/>        self.showMaximized()<br/><br/>        self.view = QWebEngineView()<br/>        self.setCentralWidget(self.view)<br/><br/>        self.create_line_chart()</span></pre><p id="0871" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这一节中，我们使用 OOP 继承思想定义了这个类。</p><p id="fc33" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">代码解释:</strong></p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="2262" class="mm lq in mz b gy nd ne l nf ng">#Initialize the QMainWindow Object<br/>super().__init__(*args, **kwargs)</span><span id="ac8e" class="mm lq in mz b gy nh ne l nf ng">#Set the app title<br/>self.setWindowTitle('Stock Market App with Pyecharts')</span><span id="2c4d" class="mm lq in mz b gy nh ne l nf ng">#Set Maximum Screen<br/>self.showMaximized()</span><span id="85cc" class="mm lq in mz b gy nh ne l nf ng"># Create QWebEngineView Widget, for embedded the chart from html<br/>self.view = QWebEngineView()<br/>self.setCentralWidget(self.view)<br/>self.create_line_chart()</span></pre><p id="9235" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">使用 Pyecharts 创建折线图</strong></p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="3b72" class="mm lq in mz b gy nd ne l nf ng">def create_line_chart(self):<br/>    data = get_stock_data(['GOOG'], 14)<br/>    stockDate = data.index.tolist()<br/>    open = data['Open'].tolist()<br/>    close = data['Close'].tolist()<br/><br/>    line = (<br/>        Line()<br/>            .add_xaxis(xaxis_data=stockDate)<br/>            .add_yaxis(series_name="Open", y_axis=open, symbol="circle", is_symbol_show=True,is_smooth=True,is_selected=True)<br/>            .add_yaxis(series_name="Close", y_axis=close, symbol="circle", is_symbol_show=True,is_smooth=True,is_selected=True)<br/>            .set_series_opts(label_opts=opts.LabelOpts(is_show=False))<br/>            .set_global_opts(title_opts=opts.TitleOpts(title="Stock Market Info"))<br/>    )<br/><br/>    html_file = (os.getcwd() + "\\stockchart.html")<br/>    line.render(path=html_file)<br/>    self.view.load(QUrl.fromLocalFile(html_file))</span></pre><p id="3703" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">代码解释:</strong></p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="1b9c" class="mm lq in mz b gy nd ne l nf ng"># Get the Stock Data, and convert to ArrayList from Dataframe, the reason, PyEcharts only allow for Array Input</span><span id="8d97" class="mm lq in mz b gy nh ne l nf ng">data = get_stock_data(['GOOG'], 14)<br/>stockDate = data.index.tolist()<br/>open = data['Open'].tolist()<br/>close = data['Close'].tolist()</span><span id="e391" class="mm lq in mz b gy nh ne l nf ng"># Creating the line chart and passing the data<br/>line = (<br/>        Line()<br/>            .add_xaxis(xaxis_data=<strong class="mz io">stockDate</strong>)<br/>            .add_yaxis(series_name="Open", y_axis=<strong class="mz io">open</strong>, symbol="circle", is_symbol_show=True,is_smooth=True,is_selected=True)<br/>            .add_yaxis(series_name="Close", y_axis=<strong class="mz io">close</strong>, symbol="circle", is_symbol_show=True,is_smooth=True,is_selected=True)<br/>            .set_series_opts(label_opts=opts.LabelOpts(is_show=False))<br/>            .set_global_opts(title_opts=opts.TitleOpts(title="Stock Market Info"))<br/>    )</span><span id="d79f" class="mm lq in mz b gy nh ne l nf ng">#Render the line chart and save as html file<br/>html_file = (os.getcwd() + "\\stockchart.html")<br/>line.render(path=html_file)</span><span id="c63d" class="mm lq in mz b gy nh ne l nf ng"># Insert into the PyEcharts Window<br/>self.view.load(QUrl.fromLocalFile(html_file))</span></pre><p id="5023" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">爽！！！10 分钟打造我们自己的桌面应用。让我们看看输出。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/0e4440f675f4d4f3fe38df5d70e41cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uzFa9xLLRQ3UlbcKqUAqsw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><p id="c5d8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们的第一个 DIY 可视化工具已经准备好了。但是正如副标题所说，这个与 Pyinstaller 打包不兼容。让我们证明这一点。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="dd27" class="mm lq in mz b gy nd ne l nf ng">pip install pyinstaller</span></pre><p id="f8bd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您的环境中没有安装 pyinstaller，请安装它。</p><p id="1b3a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> Pyinstaller 生成 Exe 文件</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/c72d1e540ed05cbfb0b126edb1843ab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2uY7sKkf5uzGRlNqYx0UTw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="03e8" class="mm lq in mz b gy nd ne l nf ng">pyinstaller pyqt5_app.py --onefile --noconsole</span><span id="8a62" class="mm lq in mz b gy nh ne l nf ng">Format: pyinstaller &lt;app_file&gt; &lt;Optional&gt;</span><span id="0094" class="mm lq in mz b gy nh ne l nf ng">--onefile ## Bundle all file into a single file<br/>--noconsole ## Generate without command prompt console</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nk"><img src="../Images/f7166c36bcc568634982279499650ab1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iM-ULMmKg8a2jITNwGdp8w.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><p id="70a5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦你看到这几行，你的应用程序就成功生成了。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/9fba4e1676ce00adb1a915034724720b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*TI1_QSB0r4BAdlgAXT7eiw.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><p id="9734" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">转到您找到的文件目录，检查 dist 文件夹并运行<your_app_file> .exe。</your_app_file></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f52208335b27d1e93b4c89e9988f6c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*bM3SDbG9a1bmMmK0kLfZCw.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><p id="b12c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">不幸的是，如果这个异常窗口出现，它意味着您的应用程序没有成功执行。要解决这个问题，请看我将在下一节提到的第二个解决方案。</p><h2 id="7485" class="mm lq in bd lr mn mo dn lv mp mq dp lz lc mr ms mb lg mt mu md lk mv mw mf mx bi translated">完整的代码片段:</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><h2 id="1cba" class="mm lq in bd lr mn mo dn lv mp mq dp lz lc mr ms mb lg mt mu md lk mv mw mf mx bi translated">PyQt5 和 Echarts 的组合(在 Pyinstaller 打包时工作)</h2><p id="7ecb" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">代码几乎一样，只是与 create_line_chart 函数略有不同。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="4745" class="mm lq in mz b gy nd ne l nf ng">def create_line_chart(self):<br/><br/>        data = get_stock_data(['GOOG'], 14)<br/><br/>        date = ['Measure'] + [x.strftime('%Y-%m-%d') for x in data.index.tolist()]<br/>        open = ['Open'] + data['Open'].tolist()<br/>        close = ['Close'] +  data['Close'].tolist()<br/>        source_data = [date, open, close]<br/><br/>        the_html_content ='''<br/>&lt;!DOCTYPE html&gt;<br/>&lt;html style="height: 50%; width:50%"&gt;<br/>    &lt;head&gt;<br/>        &lt;meta charset="utf-8"&gt;<br/>    &lt;/head&gt;<br/>    &lt;body style="height: 100%; margin: 0"&gt;<br/>        &lt;div id="container" style="height: 100%"&gt;&lt;/div&gt;<br/><br/>        &lt;script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"&gt;&lt;/script&gt;<br/>        <br/>        &lt;script type="text/javascript"&gt;<br/>var dom = document.getElementById("container");<br/>var myChart = echarts.init(dom);<br/>var app = {};<br/><br/>var option;<br/><br/>setTimeout(function () {<br/><br/>    option = {<br/>        legend: {},<br/>        tooltip: {<br/>            trigger: 'axis',<br/>            showContent: false<br/>        },<br/>        dataset: {<br/>            source: '''+ '{}'.format(source_data) +'''<br/>        },<br/>        xAxis: {type: 'category'},<br/>        yAxis: {gridIndex: 0},<br/>        series: [<br/>            {type: 'line', smooth: true, seriesLayoutBy: 'row', emphasis: {focus: 'series'}},<br/>            {type: 'line', smooth: true, seriesLayoutBy: 'row', emphasis: {focus: 'series'}},<br/>            {type: 'line', smooth: true, seriesLayoutBy: 'row', emphasis: {focus: 'series'}},<br/>            {type: 'line', smooth: true, seriesLayoutBy: 'row', emphasis: {focus: 'series'}},<br/>           <br/>        ]<br/>    };<br/>    myChart.setOption(option);<br/>});<br/><br/>if (option &amp;&amp; typeof option === 'object') {<br/>    myChart.setOption(option);<br/>}<br/><br/>        &lt;/script&gt;<br/>    &lt;/body&gt;<br/>&lt;/html&gt;<br/>        '''<br/><br/>        self.view.setHtml(the_html_content)</span></pre><p id="835f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">显然，我们将 Python 代码与 Javascript 和 HTML 结合使用。折线图由 e chart 使用 Javascript 呈现。</p><p id="7292" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">代码解释(重要部分):</strong></p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="3e2a" class="mm lq in mz b gy nd ne l nf ng">#Note the structure of the data <strong class="mz io">(Nested Array)</strong> is different as PyEcharts</span><span id="2276" class="mm lq in mz b gy nh ne l nf ng">date = ['Measure'] + [x.strftime('%Y-%m-%d') for x in data.index.tolist()]<br/>open = ['Open'] + data['Open'].tolist()<br/>close = ['Close'] +  data['Close'].tolist()<br/>source_data = [date, open, close]</span><span id="a4f4" class="mm lq in mz b gy nh ne l nf ng">#Include the<strong class="mz io"> echarts.min.js</strong> file<br/>&lt;script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"&gt;&lt;/script&gt;</span><span id="f01e" class="mm lq in mz b gy nh ne l nf ng">#Pass data that need to render into the chart<br/>dataset: {<br/>            source: '''+ '{}'.format(source_data) +'''<br/>},</span><span id="f1be" class="mm lq in mz b gy nh ne l nf ng">#Different from Pyechart, skip one step for render HTML FILE, direct set to the PyQt5<br/>self.view.setHtml(the_html_content)</span></pre><p id="4751" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">输出:</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/a622cb96092c65942de53bcdb6cb3140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qjIaW8XaN3pcB_m85yIUoQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><p id="ada9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">太神奇了！！！3 分钟修改代码并呈现相同的输出。</strong></p><p id="9a6b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">还有一步，让我们用 Pyinstaller 进行测试。</p><pre class="kd ke kf kg gt my mz na nb aw nc bi"><span id="3556" class="mm lq in mz b gy nd ne l nf ng">pyinstaller pyqt5_echart.py --onefile --noconsole</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/dbcc7bf605b977c022a7d5d68cf0d84b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1094/format:webp/1*Wlac68zgQ51a8IZlh5NV1Q.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nr"><img src="../Images/74ddb34385c6018330b65ab77838da05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5iRRE-OfTH2TPSNzD986rw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/6745ce2876aa87aadbd5583647031423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zq4cyOopVdkN-9vw3BkTGQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><p id="479c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">妙极了！！！！它正在成功地工作。</strong></p><p id="4f56" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">完整代码片段:</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nn no l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">由作者编码(版权归作者所有)</figcaption></figure><h1 id="295f" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论</h1><p id="3672" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">总之，如果您需要 pyinstaller 打包，您应该混合使用 pyqt5 和 Echarts。</p><p id="9011" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Echarts chart HTML 模板可从官方网站的示例中获得和下载。</p><p id="de1b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最基本的字符串操作是 HTML 文本编辑和参数传递。这里我不打算讲太多细节。基本操作有点笨拙，但不难。</p><h1 id="b168" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">参考</h1><ol class=""><li id="b5d1" class="nt nu in kv b kw mh kz mi lc nv lg nw lk nx lo ny nz oa ob bi translated"><a class="ae ks" href="https://echarts.apache.org/examples/en/index.html" rel="noopener ugc nofollow" target="_blank">https://echarts.apache.org/examples/en/index.html</a></li><li id="bba4" class="nt nu in kv b kw oc kz od lc oe lg of lk og lo ny nz oa ob bi translated"><a class="ae ks" href="https://pyecharts.org/#/" rel="noopener ugc nofollow" target="_blank">https://pyecharts.org/#/</a></li></ol></div></div>    
</body>
</html>