<html>
<head>
<title>Animate with the react-spring Library — useSpring Hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用反应弹簧库制作动画——使用弹簧挂钩</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/animate-with-the-react-spring-library-usespring-hook-a1987d7567db?source=collection_archive---------2-----------------------#2021-02-14">https://blog.devgenius.io/animate-with-the-react-spring-library-usespring-hook-a1987d7567db?source=collection_archive---------2-----------------------#2021-02-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5af646d1ee50f461e0b0ae345c194103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dA5sXJOdcGt4bG1Z"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">阿诺·斯密特在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="b712" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了 react-spring 库，我们可以轻松地在 react 应用程序中渲染动画。</p><p id="dec8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何开始使用 react-spring。</p><h1 id="1e49" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用弹簧</h1><p id="a9cd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">useSpring</code>钩子来添加我们的动画。</p><p id="f3e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9121" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect, useState } from "react";<br/>import { useSpring, animated } from "react-spring";</span><span id="0ce3" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [props, set, stop] = useSpring(() =&gt; ({ opacity: 1 }));<br/>  const [toggle, setToggle] = useState();</span><span id="be06" class="mq lc iq mh b gy mv ms l mt mu">  useEffect(() =&gt; {<br/>    set({ opacity: toggle ? 1 : 0 });<br/>  }, [toggle]);</span><span id="7621" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;button onClick={() =&gt; setToggle(!toggle)}&gt;start&lt;/button&gt;<br/>      &lt;button onClick={() =&gt; stop()}&gt;stop&lt;/button&gt;<br/>      &lt;animated.div style={props}&gt;i will fade&lt;/animated.div&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="3cc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将回调函数传入<code class="fe me mf mg mh b">useSpring</code>钩子来创建我们的动画。</p><p id="1139" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有<code class="fe me mf mg mh b">toggle</code>状态，让我们用<code class="fe me mf mg mh b">set</code>功能切换不透明度。</p><p id="087c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们点击开始，我们会看到文本切换褪色。</p><p id="e4ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe me mf mg mh b">stop</code>功能来停止动画。</p><p id="74d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以通过传入一个对象来使用<code class="fe me mf mg mh b">useSpring</code>。</p><p id="150b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4c56" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useSpring, animated } from "react-spring";</span><span id="0241" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const props = useSpring({<br/>    from: { opacity: 0 },<br/>    to: { opacity: 1, color: "red" }<br/>  });</span><span id="8799" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;animated.div style={props}&gt;i will fade&lt;/animated.div&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="389f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从带有<code class="fe me mf mg mh b">from</code>属性的样式到带有<code class="fe me mf mg mh b">to</code>属性的样式制作动画。</p><p id="eea8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以将其简化为:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b7a7" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useSpring, animated } from "react-spring";</span><span id="b9c1" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const props = useSpring({<br/>    from: { opacity: 0 },<br/>    opacity: 1,<br/>    color: "red"<br/>  });</span><span id="1803" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;animated.div style={props}&gt;i will fade&lt;/animated.div&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><h1 id="2e00" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">异步链和脚本</h1><p id="094d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">next</code>函数异步制作动画。</p><p id="0d4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8c06" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useSpring, animated } from "react-spring";</span><span id="2c14" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const props = useSpring({<br/>    to: async (next, cancel) =&gt; {<br/>      await next({ opacity: 1, color: "#ffaaee" });<br/>      await next({ opacity: 0, color: "rgb(14,26,19)" });<br/>    },<br/>    from: { opacity: 0, color: "red" }<br/>  });</span><span id="ad56" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;animated.div style={props}&gt;i will fade&lt;/animated.div&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="1130" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">to</code>方法是一个异步函数，将<code class="fe me mf mg mh b">next</code>和<code class="fe me mf mg mh b">cancel</code>函数作为参数。</p><p id="fb97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">next</code>让我们设置想要在动画中应用的样式。</p><p id="ecf2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe me mf mg mh b">cancel</code>让我们取消动画。</p><p id="97bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">from</code>仍然是一个具有 div 初始样式的对象。</p><p id="3022" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过编写以下代码来创建带有数组的<code class="fe me mf mg mh b">to</code>属性:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f3c6" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useSpring, animated } from "react-spring";</span><span id="3898" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const props = useSpring({<br/>    to: [<br/>      { opacity: 1, color: "#ffaaee" },<br/>      { opacity: 0, color: "rgb(14,26,19)" }<br/>    ],<br/>    from: { opacity: 0, color: "red" }<br/>  });</span><span id="8f8d" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;animated.div style={props}&gt;i will fade&lt;/animated.div&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="a13c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该数组包含具有我们要应用的样式的对象。</p><h1 id="919f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="f1a5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">useSpring</code>钩子让我们可以很容易地为单个元素创建动画。</p></div></div>    
</body>
</html>