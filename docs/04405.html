<html>
<head>
<title>The Easiest Way to Deal with Forms in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中处理表单的最简单方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-easiest-way-to-deal-with-forms-in-react-ad6bc1250829?source=collection_archive---------0-----------------------#2021-03-13">https://blog.devgenius.io/the-easiest-way-to-deal-with-forms-in-react-ad6bc1250829?source=collection_archive---------0-----------------------#2021-03-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="722d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用React钩子形式来提高应用程序的性能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c1b2586f0f3bab8d59ad9969e7fb0ecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IE_tefIk5VoCz5Gv"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">莱昂·德维耶在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="0c76" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">表单是任何网站或应用程序的重要组成部分。从登录/注册屏幕到添加和更新数据，你会发现它们无处不在。</p><p id="cf22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当使用React时，我们通常希望在处理输入时创建一个受控组件。</p><p id="5a8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，我们需要创建一个状态变量，并将其设置为输入的值。然后，我们需要在输入中添加一个onChange事件监听器。现在，每当输入被更新时，我们在应用程序中就有了一个受控状态。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="c2e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您从上面所看到的，要实现这一点还需要几行额外的代码。想象一下，如果我们有一个有多个输入的表单呢？我们需要为每个输入创建一个单独的状态，并为每个输入添加值和onChange侦听器。而且，每次我们改变输入的值，都会导致组件的重新渲染。</p><p id="8769" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使事情变得简单，欢迎使用<a class="ae kv" href="https://www.npmjs.com/package/react-hook-form" rel="noopener ugc nofollow" target="_blank"> React Hook Form </a>库。它被描述为，</p><blockquote class="lu"><p id="d82d" class="lv lw iq bd lx ly lz ma mb mc md lr dk translated">"高性能，灵活和可扩展的形式，易于使用的验证."</p></blockquote><p id="6853" class="pw-post-body-paragraph kw kx iq ky b kz me jr lb lc mf ju le lf mg lh li lj mh ll lm ln mi lp lq lr ij bi translated">听起来不错，不是吗？在本文中，我们将看看React钩子表单库。我们将从学习如何在我们的应用程序中实现它开始，然后看看如何处理验证。</p></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="980c" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">入门指南</h1><p id="7e3f" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">为了展示这个库，我们将构建一个简单的表单。首先，让我们在React项目中创建一个表单，如下所示。这是一个简单的表单，有三个输入字段和一个提交按钮。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="5d05" class="ns mr iq no b gy nt nu l nv nw">const App = () =&gt; {<br/>  return (<br/>    &lt;form className="App"&gt;<br/>      &lt;input type="text" placeholder="Username" name="username" /&gt;<br/>      &lt;input type="email" placeholder="Email" name="email" /&gt;<br/>      &lt;input type="password" placeholder="Password" name="password" /&gt;<br/>      &lt;input type="submit" /&gt;<br/>    &lt;/form&gt;<br/>  );<br/>};</span></pre><p id="224a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我也添加了一些基本的风格，只是为了让它看起来更好一点。现在，如果我们打开我们的应用程序，它将看起来像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/7c025bf317ebc25bdbdc5f7003f1cf73.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*zfe5W1VS8wyR56xR7YSB-g.png"/></div></figure><h1 id="7dcc" class="mq mr iq bd ms mt ny mv mw mx nz mz na jw oa jx nc jz ob ka ne kc oc kd ng nh bi translated">使用React挂钩形式</h1><p id="7abc" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">要使用React Hook表单库，让我们首先将它安装到我们的项目中。你可以在这里找到npm包<a class="ae kv" href="https://www.npmjs.com/package/react-hook-form" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="f7cf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将从库中导入<code class="fe od oe of no b">useForm</code>钩子。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="69a6" class="ns mr iq no b gy nt nu l nv nw">import { useForm } from 'react-hook-form';</span></pre><p id="5d48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在函数组件内部调用它。这个钩子在我们调用的时候会给我们三个变量，<code class="fe od oe of no b">register</code> <code class="fe od oe of no b">handleSubmit</code>和<code class="fe od oe of no b">errors</code>。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="ce77" class="ns mr iq no b gy nt nu l nv nw">const { register, handleSubmit, errors } = useForm();</span></pre><p id="5358" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了跟踪我们输入的变化，我们将传递<code class="fe od oe of no b">register</code>作为我们想要跟踪的每个输入的引用。现在每个输入看起来像这样。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="7902" class="ns mr iq no b gy nt nu l nv nw">&lt;input<br/>  type="text"<br/>  placeholder="Username"<br/>  name="username"<br/>  ref={register}<br/>/&gt;</span></pre><p id="b184" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，让我们来处理表单的提交功能。我们将创建一个<code class="fe od oe of no b">onSubmit</code>函数，它将接受数据。现在，我们将把它输出到控制台。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="c820" class="ns mr iq no b gy nt nu l nv nw">const onSubmit = (data) =&gt; {<br/>  console.log(data);<br/>};</span></pre><p id="cee0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在表单上，添加<code class="fe od oe of no b">handleSubmit</code>函数作为道具，并传递<code class="fe od oe of no b">onSubmit</code>作为回调函数。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="a7ef" class="ns mr iq no b gy nt nu l nv nw">&lt;form className="App" onSubmit={handleSubmit(onSubmit)}&gt;</span></pre><p id="166f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，当我们向表单添加数据并提交它时，我们将在控制台中看到输出。我们现在有了一个包含所有表单数据的漂亮对象。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/f21ff9913c5c2366283bc67251260f3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*I4mu3webRxQmxEAaqkbNDg.png"/></div></figure><p id="8d2b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不要忘记在输入中添加一个名称属性。我们传递给输入的名称将被用作我们的数据对象中的键。</p><h1 id="7ede" class="mq mr iq bd ms mt ny mv mw mx nz mz na jw oa jx nc jz ob ka ne kc oc kd ng nh bi translated">添加验证</h1><p id="4658" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">为了向表单添加验证规则，我们可以将一个可选对象作为参数传递给<code class="fe od oe of no b">register</code>。</p><p id="73d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果我们想要一个必需的输入，我们可以简单地将下面的内容添加到任何输入中。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="f043" class="ns mr iq no b gy nt nu l nv nw">&lt;input<br/>  type="text"<br/>  placeholder="Username"<br/>  name="username"<br/>  ref={register({ required: true })}<br/>/&gt;</span></pre><p id="cd6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果我们尝试在没有用户名的情况下提交表单，它将无法工作。</p><p id="4cf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以通过使用之前的<code class="fe od oe of no b">errors</code>值来显示一条错误消息。发生的任何错误都将成为errors对象上的一个道具，我们可以用它来显示错误。</p><p id="c0fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果用户没有输入用户名(这是我们要求的)，我们可以显示这样的错误。</p><pre class="kg kh ki kj gt nn no np nq aw nr bi"><span id="683d" class="ns mr iq no b gy nt nu l nv nw">{errors.username &amp;&amp; &lt;p&gt;Username required&lt;/p&gt;}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/f2578ad03eb03b0c86500490a8adcaf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*8L8_wS5sxkXuOCuzC1aTSw.png"/></div></figure><p id="1e87" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">支持的验证规则列表包括:</p><ul class=""><li id="72a0" class="oh oi iq ky b kz la lc ld lf oj lj ok ln ol lr om on oo op bi translated">需要</li><li id="b5d0" class="oh oi iq ky b kz oq lc or lf os lj ot ln ou lr om on oo op bi translated">部</li><li id="bc61" class="oh oi iq ky b kz oq lc or lf os lj ot ln ou lr om on oo op bi translated">最大</li><li id="4e72" class="oh oi iq ky b kz oq lc or lf os lj ot ln ou lr om on oo op bi translated">最小长度</li><li id="b3b3" class="oh oi iq ky b kz oq lc or lf os lj ot ln ou lr om on oo op bi translated">maxLength</li><li id="c827" class="oh oi iq ky b kz oq lc or lf os lj ot ln ou lr om on oo op bi translated">模式</li><li id="d510" class="oh oi iq ky b kz oq lc or lf os lj ot ln ou lr om on oo op bi translated">使生效</li></ul><p id="a4e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您按照代码进行了操作，我们现在应该有一个带有验证设置的表单，如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure></div><div class="ab cl mj mk hu ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ij ik il im in"><h1 id="5abc" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">包扎</h1><p id="914c" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">感谢阅读！我希望这篇文章对你开始使用React Hook表单库有所帮助。</p><p id="26ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它易于使用，性能良好，并且需要的代码少得多。在下一个需要表单的应用程序中尝试一下。</p><p id="1829" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想查看我们创建的示例的完整源代码，请在这里查看GitHub库<a class="ae kv" href="https://github.com/chadmuro/medium-react-hook-form" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="1a1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要了解另一个有用的React库，请查看下面我们查看React图标库的文章。</p><div class="ov ow gp gr ox oy"><a href="https://javascript.plainenglish.io/tutorial-and-beginners-guide-to-using-react-icons-77c614696301" rel="noopener  ugc nofollow" target="_blank"><div class="oz ab fo"><div class="pa ab pb cl cj pc"><h2 class="bd ir gy z fp pd fr fs pe fu fw ip bi translated">使用React图标的初学者指南</h2><div class="pf l"><h3 class="bd b gy z fp pd fr fs pe fu fw dk translated">在一个地方获得您需要的所有图标</h3></div><div class="pg l"><p class="bd b dl z fp pd fr fs pe fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ph l"><div class="pi l pj pk pl ph pm kp oy"/></div></div></a></div></div></div>    
</body>
</html>