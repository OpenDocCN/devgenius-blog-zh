<html>
<head>
<title>Birds, Chickens and Penguins: how to implement the Class Hierarchy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">鸟、鸡和企鹅:如何实现类层次结构</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/birds-chickens-and-penguins-how-to-implement-the-class-hierarchy-f2ef50ab80ef?source=collection_archive---------10-----------------------#2022-12-17">https://blog.devgenius.io/birds-chickens-and-penguins-how-to-implement-the-class-hierarchy-f2ef50ab80ef?source=collection_archive---------10-----------------------#2022-12-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="e008" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Python 中的面向对象范例、类层次结构、继承和覆盖</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/a6d8d9272da60a6fdc5d21dfda245b93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O2YJc9isR2OpC8mX"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">伊恩·帕克在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="4a4b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最近，有人问我实现类层次结构的最正确的方法是什么，使用了一个具体的例子:Bird 的超类，三个子类派生自这个超类:</p><ul class=""><li id="7013" class="lq lr in kv b kw kx kz la lc ls lg lt lk lu lo lv lw lx ly bi translated"><strong class="kv io"> Generic_Bird </strong>，是后面要实现的通用鸟，</li><li id="38a9" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo lv lw lx ly bi translated"><strong class="kv io">鸡</strong>，是一种飞行能力有限的鸟，</li><li id="7ed9" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo lv lw lx ly bi translated"><strong class="kv io">企鹅</strong>，根本不准飞。</li></ul><p id="5c8e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我认为这将是一个有趣的话题，也是一个原始的案例研究，与 OOP 手册中常见的案例相比，可以用作教育材料。所以我实现了类的层次结构，现在我在这里，与你分享我的想法。</p><p id="fef8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，让我们定义一下<code class="fe me mf mg mh b"><strong class="kv io">Bird</strong></code>类:</p><pre class="kd ke kf kg gt mi mh mj bn mk ml bi"><span id="bba9" class="mm mn in mh b be mo mp l mq mr">class Bird:<br/>    <br/>    __max_altitude__ = 0.3  # kilometers  <br/>    __max_distance__ = 5000 # kilometers<br/>    __ability_to_fly__ = True <br/>    <br/>    def __init__(self):<br/>        self.__max_altitude__ = Bird.__max_altitude__<br/>        self.__max_distance__ = Bird.__max_distance__<br/>        self.__ability_to_fly__ = Bird.__ability_to_fly__<br/><br/>    def introduction(self):<br/>        print("\nI introduce myself:")<br/>        print(f"I am an object of the '{type(self).__name__}' class")<br/>                <br/>        if self.__ability_to_fly__ == True:<br/>            print("I can fly. Yippee!")<br/>        else:<br/>            print("I can't fly. What a pity...")<br/>            <br/>        print(f"I can reach the max altitude of {self.__max_altitude__ * 1000} meters e travel by air for {self.__max_distance__} km")<br/>    <br/>    def fly(self, altitude, distance):    # altitude and distance in km<br/>        if (altitude &lt;= self.__max_altitude__):<br/>            if (distance &lt;=self.__max_distance__):<br/>                # If the input values are compliant, proceed<br/>                self.__take_flight__(altitude)<br/>                self.__travel_by_air__(distance)<br/>                self.__land__()<br/>            else:<br/>                raise Exception("OutOfRange: the input value for 'altitude' exceeds the allowed range.")<br/>        else:<br/>            raise Exception("OutOfRange: the input value for 'altitude' exceeds the allowed range.")<br/><br/>    def __take_flight__(self, altitude):<br/>        # the __take_flight__ method will be valid for all the birds with the ability to fly<br/>        print(f"I take fly and reach {altitude*1000} meters altitude.")<br/>        <br/>    def __travel_by_air__(self, distance):<br/>        # the __travel_by_air__ method will be valid for all the birds with the ability to fly<br/>        print(f"I travel by air for {distance} km.")<br/>        <br/>    def __land__(self):<br/>        # the __land__ method is valid for all sublcasses (I will not override it)<br/>        print("I land.")<br/>        <br/></span></pre><p id="e740" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的代码中，我们定义了一个名为<code class="fe me mf mg mh b"><strong class="kv io">Bird</strong></code>的类，它代表一个通用的 bird。这个类有三个私有类常量:<code class="fe me mf mg mh b"><strong class="kv io">__max_altitude__</strong></code>、<code class="fe me mf mg mh b"><strong class="kv io">__max_distance__</strong></code>、<code class="fe me mf mg mh b"><strong class="kv io">__ability_to_fly__</strong></code>，分别代表一只鸟能达到的最大高度、能飞的最大距离(都用公里表示)、是否有飞行能力。</p><p id="9f0b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">方法<code class="fe me mf mg mh b"><strong class="kv io">__init__()</strong></code>是 Python 中的一个特殊方法，它被称为<strong class="kv io">构造器</strong>，它创建一个对象实例并初始化对象的内部状态。在<code class="fe me mf mg mh b"><strong class="kv io">Bird</strong></code>类的特定情况下，该方法将对象的<code class="fe me mf mg mh b"><strong class="kv io">__max_altitude__</strong></code>、<code class="fe me mf mg mh b"><strong class="kv io">__max_distance__</strong></code>和<code class="fe me mf mg mh b"><strong class="kv io">__ability_to_fly__</strong></code>属性的值设置为相应的类常量。</p><p id="58f3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">方法打印关于物体的信息，包括它的类名和它是否有飞行的能力。这是一个公共方法，因为它前面没有两个下划线。可以从类外部调用公共方法。</p><p id="5c9c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">公共方法<code class="fe me mf mg mh b"><strong class="kv io">fly()</strong></code>有两个参数:<code class="fe me mf mg mh b"><strong class="kv io">altitude</strong></code>和<code class="fe me mf mg mh b"><strong class="kv io">distance</strong></code>，代表鸟要飞的高度和距离。如果<code class="fe me mf mg mh b"><strong class="kv io">altitude</strong></code>和<code class="fe me mf mg mh b"><strong class="kv io">distance</strong></code>的输入值在特定鸟的允许范围内，该方法调用<code class="fe me mf mg mh b"><strong class="kv io">__take_flight__()</strong></code>、<code class="fe me mf mg mh b"><strong class="kv io">__travel_by_air__()</strong></code>和<code class="fe me mf mg mh b"><strong class="kv io">__land__()</strong></code>方法。如果输入值不在允许的范围内，该方法将引发异常。</p><p id="2da4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">分别模拟鸟起飞、飞行和降落的<code class="fe me mf mg mh b"><strong class="kv io">__take_flight__()</strong></code>、<code class="fe me mf mg mh b"><strong class="kv io">__travel_by_air__()</strong></code>和<code class="fe me mf mg mh b"><strong class="kv io">__land__()</strong></code>私有方法。它们都是私有方法，因为它们前面有两个下划线。私有方法是只能在类内部调用，而不能从类外部调用的方法。<strong class="kv io">私有方法通常用于实现与类用户无关的类细节</strong>。</p><p id="f3bf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们已经定义了<em class="lp">超类</em>，让我们开始寻找<em class="lp">子类</em>。</p><p id="3511" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">第一个子类<code class="fe me mf mg mh b"><strong class="kv io">Generic_Bird</strong></code>没有任何额外的属性或方法。该类的行为类似于一个属性为默认值的<code class="fe me mf mg mh b"><strong class="kv io">Bird</strong></code>对象。</p><pre class="kd ke kf kg gt mi mh mj bn mk ml bi"><span id="3021" class="mm mn in mh b be mo mp l mq mr">class Generic_Bird(Bird):<br/>    def __init__(self):<br/>        super().__init__()</span></pre><p id="04aa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在让我们看看如何实现<code class="fe me mf mg mh b"><strong class="kv io">Chicken</strong></code>子类，尽管有飞行的能力，但不能执行适当的飞行，它将宁愿是一个跳远(1.5 米高，2 米远)。</p><p id="de9f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe me mf mg mh b"><strong class="kv io">Chicken</strong></code>重新定义了自己的私有类常量:<code class="fe me mf mg mh b"><strong class="kv io">__max_altitude__</strong></code>、<code class="fe me mf mg mh b"><strong class="kv io">__max_distance__</strong></code>(也用公里表示)和<code class="fe me mf mg mh b"><strong class="kv io">__ability_to_fly__</strong></code>。</p><p id="a349" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">虽然<code class="fe me mf mg mh b"><strong class="kv io">Chicken</strong></code>类可以从<code class="fe me mf mg mh b"><strong class="kv io">Bird, </strong></code>继承<code class="fe me mf mg mh b"><strong class="kv io">__ability_to_fly__</strong></code>，因为它仍然被设置为值<strong class="kv io"> True，</strong>我更喜欢再次声明它，以获得一个清晰易读的代码。</p><p id="3276" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe me mf mg mh b"><strong class="kv io">Chicken</strong></code>有自己的<code class="fe me mf mg mh b"><strong class="kv io">__init__()</strong></code>方法，将对象的<code class="fe me mf mg mh b"><strong class="kv io">__max_altitude__</strong></code>、<code class="fe me mf mg mh b"><strong class="kv io">__max_distance__</strong></code>和<code class="fe me mf mg mh b"><strong class="kv io">__ability_to_fly__</strong></code>属性设置为相应的<code class="fe me mf mg mh b"><strong class="kv io">Chicken</strong></code>类常量。</p><p id="7f87" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如上所述，<code class="fe me mf mg mh b"><strong class="kv io">Chicken</strong></code>类重新定义了它的方法:<code class="fe me mf mg mh b"><strong class="kv io">fly()</strong></code>、<code class="fe me mf mg mh b"><strong class="kv io">__take_flight__()</strong></code>和<code class="fe me mf mg mh b"><strong class="kv io">__travel_by_air__()</strong></code>方法，反映了一只鸡有限的飞行能力。<code class="fe me mf mg mh b"><strong class="kv io">__land__()</strong></code>方法不需要改变，只是简单的继承。</p><pre class="kd ke kf kg gt mi mh mj bn mk ml bi"><span id="9200" class="mm mn in mh b be mo mp l mq mr">class Chicken(Bird):<br/>    __max_altitude__ = 0.0015  # kilometers  <br/>    __max_distance__ = 0.002 # kilometers<br/>    __ability_to_fly__ = True <br/>    <br/>    def __init__(self):<br/>        super().__init__()<br/>        self.__max_altitude__ = Chicken.__max_altitude__   <br/>        self.__max_distance__ = Chicken.__max_distance__    <br/>        self.__ability_to_fly__ = Chicken.__ability_to_fly__   <br/><br/>    def fly(self):        # override the fly method of Bird superclass <br/>        print("... Low-flying of the chicken:")<br/>        self.__take_flight__()<br/>        self.__travel_by_air__()<br/>        self.__land__()<br/>        <br/>    def __take_flight__(self):<br/>        print(f"... I can only jump {self.__max_altitude__*1000} meters height.")<br/>        <br/>    def __travel_by_air__(self):<br/>        print(f"... I can only jump {self.__max_distance__*1000} meters long.")</span></pre><p id="6609" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，让我们来看看最可爱的:<code class="fe me mf mg mh b"><strong class="kv io">Penguin</strong></code>类。</p><p id="2882" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们再次假设<code class="fe me mf mg mh b"><strong class="kv io">Penguin</strong></code>没有飞行能力。常量<code class="fe me mf mg mh b"><strong class="kv io">__ability_to_fly__</strong></code>被设置为<strong class="kv io">假</strong>并且<code class="fe me mf mg mh b"><strong class="kv io">fly()</strong></code>方法被重新定义以告知它不能被执行。</p><pre class="kd ke kf kg gt mi mh mj bn mk ml bi"><span id="d3f8" class="mm mn in mh b be mo mp l mq mr">class Penguin(Bird):<br/>    __max_altitude__ = 0.0005 # Let's assume that Penguin can jump only 0.5 meters height<br/>    __max_distance__ = 0 <br/>    __ability_to_fly__ = False<br/>    <br/>    def __init__(self):    <br/>        super().__init__()<br/>        self.__max_altitude__ = Penguin.__max_altitude__ <br/>        self.__max_distance__ = Penguin.__max_distance__    <br/>        self.__ability_to_fly__ = Penguin.__ability_to_fly__<br/>        <br/>    def fly(self):<br/>        print("Fly: Action not allowed")<br/>        </span></pre><p id="419f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，让我们实例化这些对象，看看它们的性能。</p><pre class="kd ke kf kg gt mi mh mj bn mk ml bi"><span id="a5e9" class="mm mn in mh b be mo mp l mq mr">generic_Bird = Generic_Bird()<br/>generic_Bird.introduction()<br/>generic_Bird.fly(0.1, 2000)<br/><br/>chicken = Chicken()<br/>chicken.introduction()<br/>chicken.fly()<br/><br/>penguin = Penguin()<br/>penguin.introduction()<br/>penguin.fly()</span></pre><p id="55cb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是生成的输出:</p><pre class="kd ke kf kg gt mi mh mj bn mk ml bi"><span id="1e35" class="mm mn in mh b be mo mp l mq mr">I introduce myself:<br/>I am an object of the 'Generic_Bird' class<br/>I can fly. Yippee!<br/>I can reach the max altitude of 300.0 meters e travel by air for 5000 km<br/>I take fly and reach 100.0 meters altitude.<br/>I travel by air for 2000 km.<br/>I land.<br/><br/>I introduce myself:<br/>I am an object of the 'Chicken' class<br/>I can fly. Yippee!<br/>I can reach the max altitude of 1.5 meters e travel by air for 0.002 km<br/>... Low-flying of the chicken:<br/>... I can only jump 1.5 meters height.<br/>... I can only jump 2.0 meters long.<br/>I land.<br/><br/>I introduce myself:<br/>I am an object of the 'Penguin' class<br/>I can't fly. What a pity...<br/>I can reach the max altitude of 0.5 meters e travel by air for 0 km<br/>Fly: Action not allowed</span></pre><p id="ef87" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">和往常一样，并不只有一种编写代码的方法。在我看来，这种结构更整洁，更易于维护。我从编写这段代码中获得了很多乐趣。希望你也能享受阅读的乐趣！</p></div><div class="ab cl ms mt hr mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ig ih ii ij ik"><p id="6f41" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你喜欢这篇文章，请鼓掌并分享！</p></div></div>    
</body>
</html>