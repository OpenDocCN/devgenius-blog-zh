<html>
<head>
<title>Property Wrapper (Swift 5.1) ✔️📦</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">✔️酒店包装(Swift 5.1)📦</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/property-wrapper-swift-5-1-9bc7981019fc?source=collection_archive---------25-----------------------#2020-06-19">https://blog.devgenius.io/property-wrapper-swift-5-1-9bc7981019fc?source=collection_archive---------25-----------------------#2020-06-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/1d3df0f47a1612a714370b306a8c71a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*4r4VGrOIo5L7IQzn4sf1Xg.jpeg"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">来自<a class="ae jv" href="http://www.pexels.com" rel="noopener ugc nofollow" target="_blank">www.pexels.com</a></figcaption></figure><h2 id="726b" class="jw jx in bd jy jz ka dn kb kc kd dp ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">据苹果公司称:</h2><blockquote class="ks kt ku"><p id="9507" class="kv kw kx ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ig bi translated">属性包装器在管理如何存储属性的代码和定义属性的代码之间添加了一个分离层。</p><p id="3419" class="kv kw kx ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ig bi translated">要定义一个属性包装器，需要创建一个结构、枚举或类来定义一个<code class="fe lu lv lw lx b">wrappedValue</code>属性</p></blockquote><h1 id="6d9d" class="ly jx in bd jy lz ma mb kb mc md me ke mf mg mh ki mi mj mk km ml mm mn kq mo bi translated"><strong class="ak">例如:1 </strong>🔢对于简单的单个属性🍀</h1><p id="e960" class="pw-post-body-paragraph kv kw in ky b kz mp lb lc ld mq lf lg kf mr lj lk kj ms ln lo kn mt lr ls lt ig bi translated">假设我们想要创建一个属性包装器，它自动将分配给它的所有<code class="fe lu lv lw lx b">String</code>值大写。可以是这样的:</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi mu"><img src="../Images/a420e8b0bd90b1db4eaf6aff225c2e6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DP6i4J6GVwfmB92fUYYdLQ.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">大写定义</figcaption></figure><blockquote class="ks kt ku"><p id="fa4a" class="kv kw kx ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ig bi translated">通过将包装器的名称作为属性写在属性之前，可以将包装器应用于属性。</p></blockquote><p id="d328" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated">我们如何利用这一点:</p><p id="de22" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated">要将新的属性包装器应用于我们的任何<code class="fe lu lv lw lx b">String</code>属性，我们只需用<code class="fe lu lv lw lx b">@Capitalized</code>对其进行注释，Swift会自动将该注释与我们的上述类型进行匹配。下面是我们如何确保一个<code class="fe lu lv lw lx b">User</code>类型的<code class="fe lu lv lw lx b">firstName</code>和<code class="fe lu lv lw lx b">lastName</code>属性总是大写的:</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nd"><img src="../Images/3848b7152fa886116070833bf90d750f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fbpJYCqkFksEgwAb0nKxHQ.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">大写用途</figcaption></figure><h1 id="9a7a" class="ly jx in bd jy lz ma mb kb mc md me ke mf mg mh ki mi mj mk km ml mm mn kq mo bi translated"><strong class="ak">例:2 </strong>🔢有更多的条件😺</h1><p id="dba4" class="pw-post-body-paragraph kv kw in ky b kz mp lb lc ld mq lf lg kf mr lj lk kj ms ln lo kn mt lr ls lt ig bi translated">在下面的代码中，<code class="fe lu lv lw lx b">TwelveOrLess</code>结构确保它包装的值总是包含一个小于或等于12的数字。如果你要求它存储一个更大的数字，它会存储12。</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ne"><img src="../Images/6e596bd1c33ced9a371e9d434e7411f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zwASZZFsy3j-08K4u7T5iQ.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">无十二层定义</figcaption></figure><p id="9a38" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated">这里有一个存储小矩形的结构，使用由<code class="fe lu lv lw lx b">TwelveOrLess</code>属性包装器实现的相同(相当随意)的“小”定义:</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nf"><img src="../Images/0e92e20462aaaeed34585eccc985303b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RpGoVEnjQUx7c3rqQHEeoQ.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">无十二用途</figcaption></figure><p id="9962" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated"><code class="fe lu lv lw lx b">height</code>和<code class="fe lu lv lw lx b">width</code>属性从<code class="fe lu lv lw lx b">TwelveOrLess</code>的定义中获取初始值，该定义将<code class="fe lu lv lw lx b">TwelveOrLess.number</code>设置为零。将数字10存储到<code class="fe lu lv lw lx b">rectangle.height</code>成功，因为它是一个小数字。尝试存储24实际上存储的是值12，因为24对于属性设置器的规则来说太大了。</p><blockquote class="ks kt ku"><p id="7152" class="kv kw kx ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ig bi translated"><strong class="ky io">上例中对number的声明将变量标记为private，这确保了number仅用于TwelveOrLess的实现中。在其他地方编写的代码使用wrappedValue的getter和setter来访问值，不能直接使用number</strong></p></blockquote><h1 id="680f" class="ly jx in bd jy lz ma mb kb mc md me ke mf mg mh ki mi mj mk km ml mm mn kq mo bi translated"><strong class="ak">例:3 </strong>🔢设置包装属性的初始值👷👷</h1><p id="5244" class="pw-post-body-paragraph kv kw in ky b kz mp lb lc ld mq lf lg kf mr lj lk kj ms ln lo kn mt lr ls lt ig bi translated">为了支持设置初始值或其他定制，属性包装器需要添加一个初始化器。这里有一个名为<code class="fe lu lv lw lx b">SmallNumber</code>的<code class="fe lu lv lw lx b">TwelveOrLess</code>的扩展版本，它定义了设置换行和最大值的初始化器:</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ng"><img src="../Images/1ad4bcbd9d1df3e881b990a52514206a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8LnKu-rCuk94dC-vxUU5LA.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">设置包装属性的初始值</figcaption></figure><p id="eade" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated"><code class="fe lu lv lw lx b">SmallNumber</code>的定义包括三个初始值——<code class="fe lu lv lw lx b">init()</code>、<code class="fe lu lv lw lx b">init(wrappedValue:)</code>和<code class="fe lu lv lw lx b">init(wrappedValue:maximum:)</code>。我们将看到一个接一个的使用例子。</p><p id="c797" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated"><strong class="ky io">让我们继续第一个</strong> 1️⃣ <strong class="ky io">初始化器，即:</strong> <code class="fe lu lv lw lx b"><strong class="ky io">init()</strong></code></p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nh"><img src="../Images/dd76481dd683b4ea948c03815c588a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IKpFUWXgHyH4jmfVuxQGeQ.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">使用<strong class="bd jy"> init() </strong>设置初始值</figcaption></figure><p id="8d1a" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated">包装<code class="fe lu lv lw lx b">height</code>和<code class="fe lu lv lw lx b">width</code>的<code class="fe lu lv lw lx b">SmallNumber</code>实例是通过调用<code class="fe lu lv lw lx b">SmallNumber()</code>创建的。初始化器中的代码使用默认值0和12设置初始包装值和初始最大值。</p><p id="c331" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated"><strong class="ky io">第二个</strong> 2️⃣ <strong class="ky io">初始化器即:</strong> <code class="fe lu lv lw lx b"><strong class="ky io">init(wrappedValue:)</strong></code></p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi ni"><img src="../Images/cf0b108852cf753579085138eec87db9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_N-tAMR15CEguV3TDlj_kA.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">使用<code class="fe lu lv lw lx b"><strong class="bd jy">init(wrappedValue:)</strong></code>设置初始值</figcaption></figure><p id="2b9c" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated"><strong class="ky io">当你用一个包装器在一个属性上写</strong> <code class="fe lu lv lw lx b"><strong class="ky io">= 1</strong></code> <strong class="ky io">时，那就转化成了对</strong> <code class="fe lu lv lw lx b"><strong class="ky io">init(wrappedValue:)</strong></code> <strong class="ky io">初始化器的调用。</strong>包装<code class="fe lu lv lw lx b">height</code>和<code class="fe lu lv lw lx b">width</code>的<code class="fe lu lv lw lx b">SmallNumber</code>实例是通过调用<code class="fe lu lv lw lx b">SmallNumber(wrappedValue: 1)</code>创建的。初始化器使用这里指定的包装值，它使用默认的最大值12。</p><p id="10cc" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated"><strong class="ky io">第三个</strong> 3️⃣ <strong class="ky io">初始化器即:</strong> <code class="fe lu lv lw lx b"><strong class="ky io">init(wrappedValue:maximum:)</strong></code></p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi nj"><img src="../Images/32bffe04ade5f85dc242b7f86c9449cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DBxCDNzl2GgRgXptZY7TPQ.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">使用<code class="fe lu lv lw lx b"><strong class="bd jy">init(wrappedValue:maximum:)</strong></code>设置初始值</figcaption></figure><p id="a441" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated">包装<code class="fe lu lv lw lx b">height</code>的<code class="fe lu lv lw lx b">SmallNumber</code>实例通过调用<code class="fe lu lv lw lx b">SmallNumber(wrappedValue: 2, maximum: 5)</code>创建，包装<code class="fe lu lv lw lx b">width</code>的实例通过调用<code class="fe lu lv lw lx b">SmallNumber(wrappedValue: 3, maximum: 4)</code>创建。</p><p id="8ead" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated">有关更多细节和参考资料，</p><p id="fe3e" class="pw-post-body-paragraph kv kw in ky b kz la lb lc ld le lf lg kf li lj lk kj lm ln lo kn lq lr ls lt ig bi translated"><a class="ae jv" href="https://docs.swift.org/swift-book/LanguageGuide/Properties.html" rel="noopener ugc nofollow" target="_blank">https://docs . swift . org/swift-book/language guide/properties . html</a></p></div></div>    
</body>
</html>