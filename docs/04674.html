<html>
<head>
<title>Developing Vue Apps with Class-Based Components — Hooks and Computed Properties</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用基于类的组件开发 Vue 应用——挂钩和计算属性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/developing-vue-apps-with-class-based-components-hooks-and-computed-properties-5b0e2870b478?source=collection_archive---------4-----------------------#2021-04-18">https://blog.devgenius.io/developing-vue-apps-with-class-based-components-hooks-and-computed-properties-5b0e2870b478?source=collection_archive---------4-----------------------#2021-04-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ca7922888d8f6ffbc517f01f08bc9082.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PQeaivPnYrJianj7"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@dncerullo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹妮尔·塞鲁洛</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="7b21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们更喜欢使用类，我们可以使用 Vue 自带的基于类的组件 API。</p><p id="2767" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用基于类的组件开发 Vue 应用。</p><h1 id="baa1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">基于类的组件中的计算属性</h1><p id="a240" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要将计算属性添加到基于类的组件中，我们可以将 getters 和 setters 添加到我们的类中。</p><p id="5fc9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="338a" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="name" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="0b5a" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="c821" class="mn lc iq mj b gy ms mp l mq mr">@Component<br/>export default class HelloWorld extends Vue {<br/>  firstName = "jane";<br/>  lastName = "smith";</span><span id="4d4f" class="mn lc iq mj b gy ms mp l mq mr">  get name() {<br/>    return `${this.firstName} ${this.lastName}`;<br/>  }</span><span id="40d2" class="mn lc iq mj b gy ms mp l mq mr">  set name(value) {<br/>    const [firstName, lastName] = value.split(" ");<br/>    this.firstName = firstName;<br/>    this.lastName = lastName || "";<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="7ff2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个用<code class="fe mt mu mv mj b">v-model</code>绑定到<code class="fe mt mu mv mj b">name</code>计算属性的输入。</p><p id="8cdc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在组件类中，我们有<code class="fe mt mu mv mj b">firstName</code>和<code class="fe mt mu mv mj b">lastName</code>反应属性。</p><p id="cc5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在那下面，我们有返回组合的<code class="fe mt mu mv mj b">firstName</code>和<code class="fe mt mu mv mj b">lastName</code>的<code class="fe mt mu mv mj b">name</code> getter 方法。</p><p id="a7aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们添加一个<code class="fe mt mu mv mj b">name</code> setter 来获取<code class="fe mt mu mv mj b">value</code>并用<code class="fe mt mu mv mj b">split</code>分割它。</p><p id="16e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将分割值分配回<code class="fe mt mu mv mj b">this.firstName</code>和<code class="fe mt mu mv mj b">this.lastName</code>。</p><h1 id="2c70" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">钩住</h1><p id="3de2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当组件被挂载时,<code class="fe mt mu mv mj b">mounted</code>钩子允许我们运行代码。</p><p id="9c7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe mt mu mv mj b">render</code>钩子让我们在类组件中呈现模板内容:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d1bb" class="mn lc iq mj b gy mo mp l mq mr">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="d1f9" class="mn lc iq mj b gy ms mp l mq mr">@Component<br/>export default class HelloWorld extends Vue {<br/>  mounted() {<br/>    console.log("mounted");<br/>  }</span><span id="2a8d" class="mn lc iq mj b gy ms mp l mq mr">  render() {<br/>    return &lt;div&gt;Hello World&lt;/div&gt;;<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="d984" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">render</code>方法替换了<code class="fe mt mu mv mj b">template</code>标签。</p><h1 id="a32e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">注册组件</h1><p id="e71f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在传递给<code class="fe mt mu mv mj b">Component</code>装饰器的对象中用<code class="fe mt mu mv mj b">components</code>属性注册组件。</p><p id="fe95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7247" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;Greeting /&gt;<br/>&lt;/template&gt;</span><span id="0e0e" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="3665" class="mn lc iq mj b gy ms mp l mq mr">const Greeting = {<br/>  template: `&lt;div&gt;hello&lt;/div&gt;`,<br/>};</span><span id="dc04" class="mn lc iq mj b gy ms mp l mq mr">@Component({<br/>  components: {<br/>    Greeting,<br/>  },<br/>})<br/>export default class HelloWorld extends Vue {}<br/>&lt;/script&gt;</span></pre><p id="d97a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注册我们创建的<code class="fe mt mu mv mj b">Component</code>。</p><h1 id="a666" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Vue 路由器挂钩</h1><p id="e098" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们想在基于 Vue 类的组件中添加其他挂钩，我们必须注册它们。</p><p id="a360" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="664b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">main.js</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d03f" class="mn lc iq mj b gy mo mp l mq mr">import Vue from "vue";<br/>import App from "./App.vue";<br/>import Foo from "./views/Foo";<br/>import Bar from "./views/Bar";<br/>import VueRouter from "vue-router";<br/>Vue.config.productionTip = false;</span><span id="a889" class="mn lc iq mj b gy ms mp l mq mr">const routes = [<br/>  { path: "/foo", component: Foo },<br/>  { path: "/bar", component: Bar }<br/>];</span><span id="3f1c" class="mn lc iq mj b gy ms mp l mq mr">const router = new VueRouter({<br/>  routes<br/>});</span><span id="eab8" class="mn lc iq mj b gy ms mp l mq mr">Vue.use(VueRouter);</span><span id="c025" class="mn lc iq mj b gy ms mp l mq mr">new Vue({<br/>  router,<br/>  render: (h) =&gt; h(App)<br/>}).$mount("#app");</span></pre><p id="738b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">App.vue</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="050e" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;router-link to="/foo"&gt;Foo&lt;/router-link&gt;<br/>    &lt;router-link to="/bar"&gt;Bar&lt;/router-link&gt;<br/>    &lt;router-view&gt;&lt;/router-view&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="c653" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>export default {<br/>  name: "App",<br/>};<br/>&lt;/script&gt;</span></pre><p id="410a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">views/Foo.vue</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7126" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;foo&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="b810" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";<br/>Component.registerHooks([<br/>  "beforeRouteEnter",<br/>  "beforeRouteLeave",<br/>  "beforeRouteUpdate",<br/>]);<br/>@Component<br/>export default class Foo extends Vue {<br/>  beforeRouteEnter(to, from, next) {<br/>    console.log("beforeRouteEnter");<br/>    next();<br/>  }</span><span id="fa53" class="mn lc iq mj b gy ms mp l mq mr">  beforeRouteUpdate(to, from, next) {<br/>    console.log("beforeRouteUpdate");<br/>    next();<br/>  }</span><span id="5746" class="mn lc iq mj b gy ms mp l mq mr">  beforeRouteLeave(to, from, next) {<br/>    console.log("beforeRouteLeave");<br/>    next();<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="21ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">views/Bar.vue</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="65f2" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;bar&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="e2b5" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";<br/>Component.registerHooks([<br/>  "beforeRouteEnter",<br/>  "beforeRouteLeave",<br/>  "beforeRouteUpdate",<br/>]);</span><span id="3931" class="mn lc iq mj b gy ms mp l mq mr">@Component<br/>export default class Bar extends Vue {<br/>  beforeRouteEnter(to, from, next) {<br/>    console.log("beforeRouteEnter");<br/>    next();<br/>  }</span><span id="6721" class="mn lc iq mj b gy ms mp l mq mr">  beforeRouteUpdate(to, from, next) {<br/>    console.log("beforeRouteUpdate");<br/>    next();<br/>  }</span><span id="7490" class="mn lc iq mj b gy ms mp l mq mr">  beforeRouteLeave(to, from, next) {<br/>    console.log("beforeRouteLeave");<br/>    next();<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="6fc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">main.js</code>中的<code class="fe mt mu mv mj b">routes</code>数组将 Vue 路由器添加到我们的 Vue 应用程序中。</p><p id="ff4d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">routes</code>数组创建<code class="fe mt mu mv mj b">VueRouter</code>实例。</p><p id="9f5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe mt mu mv mj b">Vue.use(VueRouter);</code>来注册组件和组件方法。</p><p id="5e1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">router</code>传递给<code class="fe mt mu mv mj b">Vue</code>实例。</p><p id="9303" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">App.vue</code>中，我们添加了<code class="fe mt mu mv mj b">router-link</code>和<code class="fe mt mu mv mj b">router-view</code>来呈现路线和链接，我们可以点击这些链接来浏览路线。</p><p id="1f56" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">Component.registerHooks</code>注册<code class="fe mt mu mv mj b">Foo.vue</code>和<code class="fe mt mu mv mj b">Bar.vue</code>中的 Vue 路由器钩子。</p><p id="d59c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将带有钩子名称的字符串传入数组。</p><p id="f257" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们在组件类中添加同名的方法。</p><p id="0a4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们浏览页面时，钩子将会运行。</p><h1 id="fb18" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e816" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在基于 Vue 类的组件中添加计算属性和挂钩。</p></div></div>    
</body>
</html>