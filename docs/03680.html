<html>
<head>
<title>But What is Container Orchestration?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">但是什么是容器编排呢？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/but-what-is-container-orchestration-b81dfde784f3?source=collection_archive---------3-----------------------#2020-12-02">https://blog.devgenius.io/but-what-is-container-orchestration-b81dfde784f3?source=collection_archive---------3-----------------------#2020-12-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/75093fb909d8ac8239629600c07edf8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ntG-9d8gPvZPsURYZ2poAA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">像任何伟大的管弦乐队一样，伟大的软件架构通常依赖于多个独立的部分和谐地走到一起。文斯·维拉斯在<a class="ae jz" href="https://unsplash.com/s/photos/orchestra?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="86d1" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">容器编排——分布式计算的入场券</h1><p id="ed0f" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">像任何伟大的管弦乐队一样，伟大的软件架构通常依赖于将多个部分和谐地组合在一起。就像指挥的指挥棒引导管弦乐队中的音乐家一样，一个利用<strong class="la io">分布式计算</strong>的系统将让它的每个部分共享它们将如何通信的期望，并共享运行我们的应用程序的工作。</p><p id="056a" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">容器编排</strong>简单地说就是如何协调应用程序的不同部分——在本博客的上下文中，即Docker容器——作为一个分布式系统和谐地协同工作。如果操作得当，它可以为最终用户提供<em class="mb">惊人的</em>性能。</p><p id="7c2c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">当我第一次开始学习容器编排时，这比在波士顿新冠肺炎封锁期间试图找到哈利波特系列音乐会的门票还要难——但是不要害怕！比听起来容易，我保证。</p><h2 id="82d9" class="mc kb in bd kc md me dn kg mf mg dp kk lj mh mi ko ln mj mk ks lr ml mm kw mn bi translated"><strong class="ak">Docker编写的问题</strong></h2><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/85aae2484f413a452ba4dbf748100d2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*882ro_KbbQRk6Kmt_45GQA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Docker Compose是一个在Docker上运行多容器应用程序的工具。图片来源:<a class="ae jz" href="https://github.com/docker/compose" rel="noopener ugc nofollow" target="_blank"> Docker编写GitHub库</a></figcaption></figure><p id="f734" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">许多使用Docker的软件开发人员都知道，在他们的本地环境中，Docker Compose是运行多容器应用程序的一种很好的方式——唯一的问题是它<em class="mb">只</em>在本地工作(目前)。那么，你将如何把你的惊人的产品从本地机器的幕后拿出来，展示在你的目标用户面前呢？</p><h2 id="9b1e" class="mc kb in bd kc md me dn kg mf mg dp kk lj mh mi ko ln mj mk ks lr ml mm kw mn bi translated">学习目标</h2><p id="92b7" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">我最近在部署<a class="ae jz" href="https://consciousconsumer.herokuapp.com" rel="noopener ugc nofollow" target="_blank"> Conscious Consumer </a>时遇到了这个问题，这是我用Django后端和PostgreSQL数据库构建的一个web应用程序。我将在这篇博文中分享我最终使用的方法，最后我打算向你展示:</p><ol class=""><li id="0c39" class="mt mu in la b lb lw lf lx lj mv ln mw lr mx lv my mz na nb bi translated">如何在CapRover上配置部署的Django设置</li><li id="6c09" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated">如何<strong class="la io">编写一个Shell脚本</strong>来帮助设置您的容器环境</li><li id="9c0d" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated">如何<strong class="la io">为你的项目连接CapRover </strong>上的多个应用</li></ol><p id="386e" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在博客的最后，我希望向您展示一个例子，来说明我之前谈到分布式计算时的意思！</p><p id="28ac" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">先决条件:</strong>在这篇博客中，我假设你已经知道<em class="mb">Docker是如何为单容器应用程序工作的，</em>并且你对Django有很深的理解。但是如果你还不明白——没问题！我推荐阅读Docker网站上的<a class="ae jz" href="https://www.docker.com/resources/what-container" rel="noopener ugc nofollow" target="_blank">解释，先了解更多信息，然后你就可以回来继续阅读了。Django web框架上的资源将在底部链接，因为这是一个更广泛的主题。</a></p><h1 id="d63c" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">如何在CapRover上部署Django-PostgreSQL应用程序(示例)</h1><p id="60d1" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated"><strong class="la io">先决条件</strong>:</p><ol class=""><li id="b55f" class="mt mu in la b lb lw lf lx lj mv ln mw lr mx lv my mz na nb bi translated">从诸如<a class="ae jz" href="https://www.namecheap.com/" rel="noopener ugc nofollow" target="_blank"> Namecheap </a>或<a class="ae jz" href="https://www.name.com/" rel="noopener ugc nofollow" target="_blank">Name.com</a>之类的服务购买网站域名。</li><li id="aec0" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated">我们将使用虚拟专用服务器(VPS)来托管我们的网站，因为这比担心维护我们自己的物理服务器更实际。在这个例子中，我将使用<a class="ae jz" href="https://www.digitalocean.com/" rel="noopener ugc nofollow" target="_blank"> DigitalOcean </a>，因为他们特别提供了CapRover实例。</li><li id="4f8d" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated">使用本<a class="ae jz" href="https://caprover.com/" rel="noopener ugc nofollow" target="_blank">教程</a>在CapRover上设置您的个人PaaS。</li></ol><h2 id="7cc5" class="mc kb in bd kc md me dn kg mf mg dp kk lj mh mi ko ln mj mk ks lr ml mm kw mn bi translated">台阶</h2><p id="1069" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated"><strong class="la io">步骤1:为CapRover创建一个单独的Django设置文件</strong></p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/4fbbba49932ac66da545a6c05ae0e7d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0oH2rV9sz5E1vs1qekfCbg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">确保放置在数据库设置中的值与我们将输入到CapRover PostgreSQL实例中的值相匹配(将在本教程中出现)！</figcaption></figure><p id="ddd9" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">作为一个很好的经验法则，我喜欢在我的Django项目中有单独的设置文件，这样可以更容易地将特定设置在给定环境中应该具有的值分开。在左边，你可以看到当在VSCode中查看时，有意识的消费者的文件结构看起来像什么。</p><p id="1ede" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在特定于CapRover的设置模块中，最重要的是数据库设置。我们很快会回到这个话题，但只要说你的价值观是什么就够了。env很重要，因为它们需要与您稍后在CapRover上创建的PostgreSQL数据库中输入的值相匹配！</p><p id="2d68" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">第二步:将Django项目归档</strong></p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/8dc324db2814232a20de3dcbd3e12a74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zIfQAHUFWJySoA4sssDJXg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Django项目的文档</figcaption></figure><p id="5747" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在下一步中，我向存储库添加了一个Dockerfile，与requirements.txt和manage.py在同一个目录中(虽然您不必这样做，但在将您的文件复制到容器映像中时，记住这一点很重要)。</p><p id="030c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">如注释所示，Dockerfile然后继续安装需求，将Django文件复制到容器映像中。<strong class="la io">容器映像</strong>仅仅是一个花哨的tarball，它包含了在其他环境中支持您的应用程序所需的一切——在本例中，是CapRover！</p><p id="f1c0" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">注意，如果您遵循这里的方法，那么您<strong class="la io">必须</strong>在您的存储库中有一个. env文件。尽管这个文件没有出现在GitHub存储库中，但是它<em class="mb">非常重要— </em>，因为这是您的容器为了设置以下数据库环境变量的值而要查看的文件，如上面步骤中的设置文件所示:</p><ul class=""><li id="5b93" class="mt mu in la b lb lw lf lx lj mv ln mw lr mx lv nj mz na nb bi translated">POSTGRES_DB</li><li id="6040" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv nj mz na nb bi translated">POSTGRES_USER</li><li id="6aea" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv nj mz na nb bi translated">POSTGRES_PASSWORD</li><li id="b16f" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv nj mz na nb bi translated">POSTGRES_HOST</li></ul><p id="42f9" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">步骤3:为Docker容器创建一个entrypoint.sh脚本</strong></p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/fcd108a61ae17f01044751bbb1927e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*quLBag1gVmq0iLuac9H1vg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">这个文件基本上告诉Docker容器一构建好就运行一堆命令。</figcaption></figure><p id="a585" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在下一步中，继续创建一个entrypoint.sh脚本。这个文件基本上告诉Docker容器一构建好就运行一堆命令。</p><p id="5605" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在这里，我使用这个脚本基本上设置了Django服务器。它将DJANGO_SETTINGS_MODULE设置为使用我们在步骤1中的CapRover设置来运行数据库迁移(在接下来的步骤中，我们需要确保该命令执行时数据库已经在运行)。然后，它收集所有的静态文件。如果应用程序有任何数据迁移或装置，我们也可以在这里这样做——但是由于web应用程序没有任何持久数据，我只是添加了运行Django server的命令！</p><p id="ddb5" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">注意，您并不真的需要这个文件——从技术上讲，您可以使用RUN命令在docker文件中完成所有这些工作。然而，使用这种方法，您将避免向Docker映像添加额外的层(毕竟1行代码= 1层)，这实际上提高了性能！</p><p id="f29d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">步骤4:创建队长定义文件</strong></p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/ad6a749a391be42d57a2ec0b55642812.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hbf5y7xT-jMpdjUGRuivNw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">这个小小的JSON就是您准备在CapRover上部署的全部内容。</figcaption></figure><p id="f808" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">如果你能走到这一步——太好了！我们的Dockerfile已经完成了运行这个Django项目所需的标准化环境的大部分工作。</p><p id="f5f5" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">这意味着仅用4行JSON代码，captain-definition文件就给了我们现在部署在CapRover上所需的全部内容！</p><p id="fefd" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">第五步:在CapRover上创建PostgreSQL应用</strong></p><p id="ce0a" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">如前所述，我们准备在CapRover上部署Django项目——除了如果我们想让它实际工作，我们需要首先在我们的帐户上创建一个PostgreSQL实例！</p><p id="8b7f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">幸运的是，使用CapRover提供的PostgreSQL模板可以很容易地做到这一点。请观看这段1分钟的视频教程，了解如何:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><p id="49ac" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">您需要添加到PostgreSQL实例的特定环境变量如下所示:</p><pre class="mp mq mr ms gt no np nq nr aw ns bi"><span id="7335" class="mc kb in np b gy nt nu l nv nw">CAPROVER=True<br/>CR_SECRET_KEY=YOUR_KEY<br/>CR_HOSTS=demo-django.YOUR_CAPROVER_DOMAIN,CUSTOM_DOMAIN<br/>CR_DB_NAME=XXX<br/>CR_DB_USER=XXX<br/>CR_DB_PASSWORD=XXX<br/>CR_DB_HOST=srv-captain--demo-db<br/>CR_DB_PORT=5432</span></pre><p id="bfe5" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">当设置这些变量时，TL；DR基本上是为了确保这里的值和Django项目中的CapRover设置模块上的值一致:</p><ul class=""><li id="e444" class="mt mu in la b lb lw lf lx lj mv ln mw lr mx lv nj mz na nb bi translated">确保CR_SECRET_KEY等于您的Django SECRET_KEY</li><li id="5477" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv nj mz na nb bi translated">并且在CR_HOSTS中包含您的网站域名</li><li id="b537" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv nj mz na nb bi translated">CR_DB_NAME、CR_DB_USER和CR_DB_PASSWORD都应该与您在创建PostgreSQL实例时设置的值相同(这又应该等于您在Django DATABASES设置中拥有的等价键的值)。</li><li id="6510" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv nj mz na nb bi translated">CapRover和数据库中的CR _ DB _ HOST from必须相等。</li></ul><p id="fd55" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">第六步:在CapRover上创建Django应用</strong></p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/41fb2407d75e8ae9382e973475637150.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ExqTq1nc7MzGeCaKd11R3A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">如果你想使用web dashboard，你可以进入CapRover的应用程序标签，使用页面顶部的“创建新应用程序”表单。</figcaption></figure><p id="ec1e" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">快到了！现在你需要在你的CapRover帐户上为Django应用程序创建一个新的应用程序。如果你想使用web dashboard，你可以进入CapRover的应用程序标签，使用页面顶部的“创建新应用程序”表单。不要选中“有持久数据”框，因为它不适用于web应用程序(因为我们的数据库已经为我们保存了持久数据)。</p><p id="eef0" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">或者，你可以通过终端来完成所有这些——不过我还是推荐CapRover的仪表板，因为你无论如何都需要使用它，以便在我们制作的网站上启用HTTPS。</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/757ab5f9c0c46e75c37b18c6ec8f63b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ssrhxRhNqs-caAH-NBkOhA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">“启用HTTPS”按钮可以在你点击一个CapRover应用程序后看到的页面上找到。</figcaption></figure><p id="67e5" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">步骤7:部署您的Django项目！</strong></p><p id="1688" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">如果您正在使用上面提到的web dashboard方法，您将需要上传Django项目的Tarfile到您在CapRover上的应用程序。</p><p id="3d1e" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">要在基于Unix的机器(即运行macOS或Linux内核的机器)上创建tar文件，我们可以通过终端使用“tar”命令。该命令的语法如下:</p><pre class="mp mq mr ms gt no np nq nr aw ns bi"><span id="fb92" class="mc kb in np b gy nt nu l nv nw">tar -czf {{target.tar}} {{path/to/directory being zipped}}</span></pre><p id="60f9" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">对于本例，我们只需导航到保存队长定义文件的目录，输入如下内容(显然，您可以随意命名正在创建的tarfile):</p><pre class="mp mq mr ms gt no np nq nr aw ns bi"><span id="a166" class="mc kb in np b gy nt nu l nv nw">tar -cvf conscious.tar ./</span></pre><p id="7b1e" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">我们现在可以将这个文件上传到我们的CapRover应用程序的“Deployment”选项卡中。</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ny"><img src="../Images/43b98c56a9d504f922da11b9900ff613.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9fFOkJXp5tF0GjLMq9XGfA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">我们现在可以将这个文件上传到我们的CapRover应用程序的“Deployment”选项卡中。</figcaption></figure><p id="a18a" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">您所需要做的就是拖动Tarfile(用。tar扩展名)放到本页的适当部分。</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ny"><img src="../Images/6218bf5d16458fc6e87ac50a86adea54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lq55ZxiBM90IYuikhZShvQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">您所需要做的就是拖动Tarfile(用。tar扩展名)放到本页的适当部分。</figcaption></figure><p id="4a1d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">如果一切正常，您的构建日志将类似于以下内容！</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nz"><img src="../Images/cb900d6364ef2bd622f6495b86d23647.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hg6s5HLEJcW3LHneyjnDRA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在卡普洛人上建立日志</figcaption></figure><p id="9bf2" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">应用程序的日志消息将类似于下面这样(注意，这个输出与我们放在entrypoint.sh中的命令相匹配)！</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oa"><img src="../Images/25209d50ae895339bf8af415c65e7d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kDxCt3DYghC5FbnkqHqW2w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">CapRover上的应用程序日志</figcaption></figure><p id="648c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io">哒哒</strong>！您现在可以在提供的URL地址上看到您的应用程序。</p><h1 id="c52d" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">复习时间！</h1><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ca"><img src="../Images/5baff1fcd0ccf2da91a58e937ee585fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lSxSdfXd7feA3kVF8gKEKw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">我们在CapRover上编排的Docker容器的架构</figcaption></figure><p id="78e4" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">你可能会问，“嘿，这很酷，但是我怎么知道发生了什么？”</p><p id="ff0e" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">很棒的问题！让我们使用左边的图表作为工具来回顾一些大的概念:</p><ol class=""><li id="eaad" class="mt mu in la b lb lw lf lx lj mv ln mw lr mx lv my mz na nb bi translated">在这个堆栈的最底层，我们有<strong class="la io">VPS</strong>——这是托管我们站点的物理机器。</li><li id="40f2" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated">在软件方面，我们基本上为应用程序的两个不同部分创建了两个Docker容器，也称为<strong class="la io">服务</strong>——Django，它为我们的服务器编程并提供MVC模式，以及PostgreSQL，它为我们提供一个关系数据库。</li><li id="133c" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated">通过<strong class="la io">配置端口号并为两个容器提供一致的环境变量</strong>，我们给了它们关于如何相互“通信”的共同期望。web应用程序知道如何通过HTTP向数据库发送请求，作为响应，PostgreSQL可以发回适当的数据——因此，我们的<strong class="la io"> container orchestra是一个分布式系统！两个容器都运行自己的网络或数据库服务器，如果其中一个崩溃了，也不一定会导致整个网络瘫痪。</strong></li></ol><h1 id="b716" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">进一步阅读</h1><p id="9fc4" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">后退一步，欣赏你的大脑，因为容器编排、分布式系统和DevOps通常是很大的话题！当你准备好继续前进时，这里有一些资源可以满足你的好奇心:</p><ol class=""><li id="6030" class="mt mu in la b lb lw lf lx lj mv ln mw lr mx lv my mz na nb bi translated"><a class="ae jz" href="https://github.com/UPstartDeveloper/conscious-consumer#run-the-project-locally" rel="noopener ugc nofollow" target="_blank"> GitHub知识库</a>面向<a class="ae jz" href="https://consciousconsumer.herokuapp.com" rel="noopener ugc nofollow" target="_blank">有意识的消费者</a>——我在这篇博客中提到的项目</li><li id="c527" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated"><a class="ae jz" href="https://gitlab.com/kamneros/caprover-django/-/tree/master" rel="noopener ugc nofollow" target="_blank"> Marcos Kamner的GitLab存储库</a> —在CapRover上部署Django和PostgreSQL的示例项目</li><li id="6ce0" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated"><a class="ae jz" href="https://docs.docker.com/compose/django/" rel="noopener ugc nofollow" target="_blank">quick start:Compose and Django</a>——初学者友好的教程，介绍如何使用Docker Compose在本地编排Django和PostgreSQL容器(这是一个很好的跳板，因为它与生产中发生的事情有许多相似之处)！</li><li id="d5d9" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated"><a class="ae jz" href="https://caprover.com/docs/complete-webapp-tutorial.html" rel="noopener ugc nofollow" target="_blank">完整的Webapp教程</a>文档——这一页将有助于填补CapRover上这篇文章的任何空白，例如，队长定义文件、连接不同的服务等。</li><li id="3227" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated">使用Tar命令，内核开始对话</li><li id="1fcf" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated"><a class="ae jz" href="https://dailydoseoftech.com/how-to-open-and-create-tar-files-on-windows/" rel="noopener ugc nofollow" target="_blank">如何在Windows上创建和打开Tar文件</a>，每日一剂科技</li><li id="73b9" class="mt mu in la b lb nc lf nd lj ne ln nf lr ng lv my mz na nb bi translated"><a class="ae jz" href="https://blog.alfred.software/2020/02/12/how-to-create-your-own-heroku-clone-and-setup-django-and-postgres/#Creating_a_Django_project,_with_a_Postgres_DB_on_our_new_server" rel="noopener ugc nofollow" target="_blank">如何创建你自己的廉价Heroku-Clone并在上面设置Django和Postgres</a>，博客。Alfred . Software——另一个博客，它将带你完成一个与上面类似的项目</li></ol></div></div>    
</body>
</html>