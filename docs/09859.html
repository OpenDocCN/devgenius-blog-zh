<html>
<head>
<title>Apache Kafka: 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿帕奇卡夫卡:101</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/apache-kafka-101-d85e6ee402e0?source=collection_archive---------4-----------------------#2022-09-18">https://blog.devgenius.io/apache-kafka-101-d85e6ee402e0?source=collection_archive---------4-----------------------#2022-09-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c5e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这篇博客是我们从零开始讨论 101 个<strong class="jm io"> </strong>概念的系列文章的一部分，读者的入门知识有限。这篇文章属于<strong class="jm io"> <em class="ki">中级</em> </strong>系列，因为它涉及到理解<strong class="jm io"> Apache Kafka </strong>的原语及其作为基于异步的分布式架构的主干的重要性。</p><p id="7edb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/sidecar-and-service-mesh-101-134d342bdad9"> <strong class="jm io"> SideCar 和 service mesh 101</strong><br/></a><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/data-encryption-101-f0a25db7d913"><strong class="jm io">数据加密 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/database-replication-101-d148514598a7"><strong class="jm io">数据库复制 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/caching-strategy-101-3bc974d2a6cd"><strong class="jm io">缓存策略 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" href="http://kubernetes-deployments-101/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Kubernetes 部署 101 </strong> </a></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/76e59f41a449481efb240cce38096ee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dTJredgCS0fpUq8zwgc7NQ.png"/></div></div></figure><h1 id="ef06" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">什么是阿帕奇卡夫卡？</h1><p id="7faa" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">Kafka 是一个实时<strong class="jm io">数据流平台</strong>，旨在克服传统单片架构同步处理的局限性。通常用作分布式消息传递层，它是低延迟和高流量基于微服务的应用程序的一站式解决方案。</p><p id="950f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通常部署为单个/多个节点的集群，可以跨越可用性区域和地区，它提供<strong class="jm io">弹性</strong>消息传递保证选项。</p><h1 id="73e8" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">基础建筑</h1><h2 id="16ac" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">生产者</h2><p id="5bdc" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">生产者是生成消息/数据流的应用程序。他们使用<strong class="jm io">代理</strong>或<strong class="jm io"> Zookeeper </strong> URL 连接到 Kafka 集群。</p><h2 id="9c3e" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">顾客</h2><p id="9ae5" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">消费者是使用单个消息/批处理流的应用程序。</p><h2 id="dbbd" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">主题</h2><p id="02a8" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">主题是在 Kafka 集群中存储消息的类别/逻辑分离。Kafka 将消息记录保留为日志。<strong class="jm io">偏移</strong>决定了生产者/消费者消费日志的相对位置。</p><h2 id="626d" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">划分</h2><p id="dc5b" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">主题被细分为<strong class="jm io">个分区</strong>，是卡夫卡层级中最小的存储单元。每个分区存储单个<strong class="jm io">日志文件，这些日志文件在分布到多个代理的节点间复制</strong>，以实现容错。</p><h2 id="51f3" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">经纪人</h2><p id="64cb" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">Kafka 集群由多个满足高可用性需求的服务器组成，称为代理。它们还有助于跨分区复制消息数据。</p><h2 id="0a6b" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">动物园管理员</h2><p id="2714" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">zookeeper 帮助管理 Kafka 集群的活动，例如在代理之间进行协调，为复制选择主分区等。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi ml"><img src="../Images/fb13d2d5536b1242b005b2478e04a2a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UezfwL2D2Bbm8zXJ3hDb3Q.jpeg"/></div></div></figure><h1 id="3999" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">写作策略</h1><p id="07f9" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">向 Kafka 集群编写消息的生产者可以根据<strong class="jm io">弹性与延迟</strong>需求选择不同的策略。</p><h2 id="b238" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated"><strong class="ak"> Ack=0 </strong></h2><p id="b80a" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">生产者不等待来自 Kafka 经纪人的确认来将发布事件标记为成功。尽管这种方法是最快的，但它对于应用程序来说是最不可靠的。</p><h2 id="548c" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated"><strong class="ak"> Ack=1 </strong></h2><p id="2be2" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">在这个策略中，生产者等待来自给定主题的领导者分区的确认。因此，它被认为是安全的生产使用。</p><h2 id="53b4" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated"><strong class="ak"> Ack= 2 </strong></h2><p id="b5ed" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">在这种策略中，生产者只有在将主题写入其他复制副本之后，才会等待来自给定主题的领导者分区的确认。因此它被认为是最慢的技术。</p><h1 id="b879" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">阅读策略</h1><p id="8810" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">发布在主题上的消息可以由消费者使用不同的读取语义来读取。</p><h2 id="91af" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated"><strong class="ak">最多一次</strong></h2><p id="0b5d" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">在这种默认的消息传递语义中，消费者将读取/使用消息，不会超过一次。</p><h2 id="9e5a" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated"><strong class="ak">正好一次</strong></h2><p id="5c71" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">在这个方案中，给定的发布消息将只被消费者阅读一次。</p><h2 id="2cc7" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated"><strong class="ak">至少一次</strong></h2><p id="a682" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">这种容错方案保证消息至少被可用消费者池读取一次，但是，它可能导致同一条消息被读取多次。</p><h1 id="3f42" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">本地设置</h1><h2 id="047a" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">Docker 合成文件</h2><figure class="kl km kn ko gt kp"><div class="bz fp l di"><div class="mm mn l"/></div></figure><h2 id="7aa6" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">本地运行</h2><pre class="kl km kn ko gt mo mp mq mr aw ms bi"><span id="9f3a" class="lz kx in mp b gy mt mu l mv mw">docker-compose-up</span></pre><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi mx"><img src="../Images/d629f690b7a5aa46432405e225560419.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TF_YV2SANUbFel-z-E_T8Q.png"/></div></div></figure><h1 id="a785" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">摘要</h1><p id="7fb5" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">这篇博客讨论了 Kafka 作为一个消息传递系统和 Kafka 集群的本地设置的基础知识。考虑到这个主题的广度，我们将详细讨论拱门的其他元素，如业务用例、Kafka 流 API 或 kSql，我们将在后面的高级博客中讨论。</p><p id="6d4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">如需反馈，请留言至</em><strong class="jm io"><em class="ki">Amit[dot]894[at]Gmail[dot]com</em></strong><em class="ki">或联系</em><a class="ae kj" href="https://about.me/amit_raj" rel="noopener ugc nofollow" target="_blank"><em class="ki">https://about.me/amit_raj</em></a><em class="ki">的任何链接。</em></p></div></div>    
</body>
</html>