<html>
<head>
<title>How To Setup a Basic Server Using NodeJS And Express.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用NodeJS和Express.js设置基本服务器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-setup-a-basic-server-using-nodejs-and-express-js-a6d9b31d18ef?source=collection_archive---------0-----------------------#2021-05-23">https://blog.devgenius.io/how-to-setup-a-basic-server-using-nodejs-and-express-js-a6d9b31d18ef?source=collection_archive---------0-----------------------#2021-05-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0ab2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当使用nodeJS和javascript构建服务器时，Express是最可取的框架，今天，我们将了解如何设置一个基本的express服务器，我们将尽可能使它简单，没有进一步的讨论，让我们开始吧:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d6ee7c3a158bb7d004da3fecee5a0132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t40l2rOzSEXZbvGWClW-Pw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">快递. js</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="6cbb" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">1.初始化NodeJS项目:</h1><p id="d55c" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">首先，您需要初始化一个简单的NodeJS项目，您可以使用下面的npm命令简单地完成这项工作:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="816c" class="mn lg in mj b gy mo mp l mq mr">npm init</span></pre><p id="4380" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之后，将为您生成几个问题来初始化您的NodeJS项目，如果您不想回答这些问题并将其保留为默认值，您可以使用:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="7cba" class="mn lg in mj b gy mo mp l mq mr">npm init -y </span></pre><p id="1100" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">或者:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="810f" class="mn lg in mj b gy mo mp l mq mr">npm init --yes</span></pre><h1 id="373f" class="lf lg in bd lh li ms lk ll lm mt lo lp lq mu ls lt lu mv lw lx ly mw ma mb mc bi translated">2.安装所需的依赖项:</h1><p id="b4c3" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">成功初始化NodeJS项目后，您就可以安装所有需要的依赖项来开始设置您的服务器了。第一个也是最重要的依赖项是express包，您可以使用npm install简单地安装它:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="0f56" class="mn lg in mj b gy mo mp l mq mr">npm install express </span></pre><p id="f5c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">另外，我强烈建议的一个非常重要的步骤是安装nodemon依赖项，什么是nodemon？很高兴你问了这个问题:</p><blockquote class="mx my mz"><p id="80ee" class="jk jl na jm b jn jo jp jq jr js jt ju nb jw jx jy nc ka kb kc nd ke kf kg kh ig bi translated"><strong class="jm io"> nodemon </strong>是一款帮助开发node的工具。当检测到目录中的文件改变时，通过自动重启节点应用程序来启动基于js的应用程序。</p></blockquote><p id="6210" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">基本上，使用nodemon，当您在nodeJS项目中保存一个文件时，您的服务器将自动重启，为了安装nodemon，您需要键入:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="7612" class="mn lg in mj b gy mo mp l mq mr">npm install nodemon --save-dev</span></pre><p id="4bd8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Nodemon需要另一个步骤来准备工作，这个步骤是在根目录的package.json文件中添加运行nodemon的命令，在“脚本”下添加这一行:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="d157" class="mn lg in mj b gy mo mp l mq mr">"dev": "nodemon index.js"</span></pre><p id="ea3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，无论何时你想运行你的服务器，你只需在终端上键入:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="39a7" class="mn lg in mj b gy mo mp l mq mr">npm run dev</span></pre><p id="2ff2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">否则，如果您不想使用nodemon，只需在终端上键入:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="0ebc" class="mn lg in mj b gy mo mp l mq mr">npm start</span></pre><p id="baf1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每当您在项目中进行更改并希望重启服务器时，您只需进入终端，使用ctrl+c(对于windows和Linux)或Command+C(对于macOS)，然后再次键入“npm start”。</p><h1 id="e9cd" class="lf lg in bd lh li ms lk ll lm mt lo lp lq mu ls lt lu mv lw lx ly mw ma mb mc bi translated">3.设置Express服务器:</h1><p id="d514" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">现在，您已经准备好设置您的服务器了，首先，在项目的根目录下创建一个index.js文件。</p><p id="590e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，要求快递包装如下:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="7758" class="mn lg in mj b gy mo mp l mq mr">const express = require("express");</span></pre><p id="6d68" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后像这样简单地创建express的app对象:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="6ae8" class="mn lg in mj b gy mo mp l mq mr">const app = express();</span></pre><p id="58e3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你想要一种奇特的方法(这是我个人使用的)，你可以简单地忽略上面的两行，用下面的一行代替:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="aa61" class="mn lg in mj b gy mo mp l mq mr">const app = require("express")();</span></pre><p id="12d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您需要设置一个您的服务器将在其上运行的端口，如果您不知道端口是什么，您可以查看此视频，它解释了端口在网络世界中的含义:<a class="ae ne" href="https://youtu.be/7HwtRrnPOVk" rel="noopener ugc nofollow" target="_blank"> link </a>，要为您的服务器选择一个端口，您需要首先在一个单独的变量或常量上定义您的端口号(完全可选的步骤)，然后在app对象中将其传递给listen方法，listen方法的第二个参数将是一个回调函数，每当服务器成功运行时都会调用该函数:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="4994" class="mn lg in mj b gy mo mp l mq mr">const port = 5000;<br/>app.listen(<br/>    port,<br/>    () =&gt; console.log(`Server Running On Port ${port}...`)<br/>);</span></pre><p id="cdde" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">建议:</strong>当你要为你的服务器选择端口号时，避免使用一些著名的端口号，如80、8080或20，因为所有这些端口通常被你计算机上的其他服务和应用程序使用。</p><h1 id="bbe6" class="lf lg in bd lh li ms lk ll lm mt lo lp lq mu ls lt lu mv lw lx ly mw ma mb mc bi translated">4.路由:</h1><p id="d193" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">现在，您需要做的就是设置用户在访问您的服务器中的一条路线时将获得或看到什么数据，让我们假设我有一个运行在本地主机上的服务器，当我访问:<a class="ae ne" href="http://localhost:5000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000/ </a>或<a class="ae ne" href="http://localhost:5000/" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/</a>home时，我会看到一些错误消息，比如:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="fb53" class="mn lg in mj b gy mo mp l mq mr">Cannot GET /</span></pre><p id="8a10" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">或者:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="be3b" class="mn lg in mj b gy mo mp l mq mr">Cannot GET /home</span></pre><p id="b4fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了设置这些链接中到底会显示什么，我们需要使用routing，这是一个例子:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="4d3c" class="mn lg in mj b gy mo mp l mq mr">app.get("/", (req,res) =&gt;{<br/>    return res.send("Hello World!!!");<br/>});</span></pre><p id="058e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们确定当用户调用我们的服务器时，服务器将响应什么操作，我们在这个例子中使用GET，但是也可以执行其他操作，比如GET、POST、PUT、PATCH、DELETE等等。get方法得到两个参数，第一个是指定的路由，第二个是回调函数，当用户访问指定的路由时将执行该函数，这里我们使用res.send方法，它负责将数据发送回用户。基本上，所有这些代码意味着，当用户访问<a class="ae ne" href="http://localhost:5000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5000/ </a>时，将会在浏览器上看到一条消息，上面写着“Hello World ”,同样需要注意的是，我们可以使用res.send方法向用户发回HTML:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="53c8" class="mn lg in mj b gy mo mp l mq mr">res.send("&lt;h1&gt;Hello World&lt;/h1&gt;");</span></pre><p id="b755" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">浏览器会把你的信息解释成普通的HTML。</p><h1 id="b789" class="lf lg in bd lh li ms lk ll lm mt lo lp lq mu ls lt lu mv lw lx ly mw ma mb mc bi translated">4.服务器静态文件:</h1><p id="19e7" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">使用res.send为用户呈现使用HTML、CSS和Javascript编写的大型复杂网站是不切实际的，如果这是您设置express web服务器的主要目标，那么我建议您考虑使用express.js提供静态文件。</p><p id="a672" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，您需要使用express.static指定网站代码的存储位置，然后使用app.use函数来完成配置，让我们假设您网站的代码源存储在项目根目录下的public文件夹中，以便为您需要键入的用户呈现该网站:</p><pre class="kj kk kl km gt mi mj mk ml aw mm bi"><span id="da02" class="mn lg in mj b gy mo mp l mq mr">app.use(express.static('public'));</span></pre><p id="f2ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">瞧，您已经使用express.js构建了一个web服务器，可以部署了。</p><p id="45ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最终，我希望这篇短文能赢得您的赞赏，并感谢您的关注。</p></div></div>    
</body>
</html>