<html>
<head>
<title>Make Complex RecyclerViews Easily with Groupie in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Android 中的 Groupie 轻松制作复杂的 RecyclerViews</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/make-complex-recyclerviews-easily-with-groupie-in-android-659227b207f3?source=collection_archive---------4-----------------------#2020-07-16">https://blog.devgenius.io/make-complex-recyclerviews-easily-with-groupie-in-android-659227b207f3?source=collection_archive---------4-----------------------#2020-07-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="bb37" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Groupie 是一个 android 库，它可以让你的 android 应用程序中复杂的 RecyclerViews 变得超级简单。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/fb954ea47850e62306aa310a48f15dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F8FDN-TBBRuHSM2s"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">杰西卡·刘易斯在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="51a5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">RecyclerView 是一个超级有用的小部件，用于在 android 应用程序中显示大型列表。但是实现 RecyclerView 需要大量的样板代码，比如创建适配器、视图容器等。这包括创建一个条目列表的大量工作。</p><p id="1417" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就是追星族的由来。Groupie 是一个开源的 android 库，让你的应用程序中的 RecyclerViews 变得非常简单。Groupie 将您的列表项视为逻辑组，并为您处理更改通知。您还可以为列表项制作页眉和页脚。Groupie 还支持 android 数据绑定来创建适配器。它删除了创建视图容器、适配器、视图类型等的样板代码。</p><p id="ecfb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这篇文章中，我们将看到如何用 Groupie 创建一个简单的回收视图。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="ae3b" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated">将 Groupie 添加到您的项目中</h2><p id="c5ff" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">通过在您的应用级别<code class="fe mu mv mw mx b">build.gradle</code>文件中添加最新版本，在您的项目中添加 Groupie。</p><pre class="kd ke kf kg gt my mx mz na aw nb bi"><span id="bd27" class="lw lx in mx b gy nc nd l ne nf">implementation "com.xwray:groupie:2.8.0"<br/>implementation "com.xwray:groupie-kotlin-android-extensions:2.8.0"</span></pre><p id="d76c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们将创建一个应用程序，在一个 RecyclerView 中显示超级英雄的名字和真实姓名列表。假设我们从一个 Api 中获取一个超级英雄列表，并在我们的活动中获取它。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">主活动. kt</figcaption></figure><p id="77a4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">超级英雄对象的模型类如下:</p><pre class="kd ke kf kg gt my mx mz na aw nb bi"><span id="b629" class="lw lx in mx b gy nc nd l ne nf">data class Superhero(<br/>    val name: String,<br/>    val realName: String<br/>)</span></pre></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="b299" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated">创建布局文件</h2><p id="1192" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">在创建 recycle view 时，我们会为单个项目创建一个单独的布局文件，还会将 recycle view 添加到您的活动或片段中，因此这里也是一样的。</p><p id="d6f8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在布局文件中添加<code class="fe mu mv mw mx b">RecyclerView</code>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">main.xml</figcaption></figure><p id="b20a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在为单个项目创建一个单独的布局文件。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">item_superhero.xml</figcaption></figure><p id="5c82" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是一个非常简单的布局，只有两个<code class="fe mu mv mw mx b">TextViews</code>和一个垂直的<code class="fe mu mv mw mx b">LinearLayout</code>分隔符。这两个文本视图只是用来显示超级英雄的名字和他们的真实姓名。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="1840" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated">使用 Groupie 创建 RecyclerView</h2><p id="ad8c" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">Groupie 抽象出了制作适配器的复杂性，取而代之的是，我们将创建一个<code class="fe mu mv mw mx b">SuperHeroItem</code>类并扩展 Groupie 的<code class="fe mu mv mw mx b">Item</code>类。<code class="fe mu mv mw mx b">Item</code>类为您提供了简单的回调，将您的模型对象绑定到生成的字段。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">超级英雄</figcaption></figure><p id="b065" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在扩展了<code class="fe mu mv mw mx b">Item</code>类之后，我们必须覆盖两个函数<code class="fe mu mv mw mx b">getLayout() </code>和<code class="fe mu mv mw mx b">bind()</code>。在<code class="fe mu mv mw mx b">getLayout()</code>函数中，我们将返回我们希望在 recycle view 中使用的单个项目布局，在<code class="fe mu mv mw mx b">bind()</code>函数中，我们将像在普通 recycle view 适配器的<code class="fe mu mv mw mx b">onBindViewHolder()</code>中一样，将视图与超级英雄数据绑定。注意，我们在<code class="fe mu mv mw mx b">SuperHeroItem</code>类的构造函数中获得了<code class="fe mu mv mw mx b">SuperHero</code>对象。</p><p id="e792" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，Groupie 使用一个<code class="fe mu mv mw mx b">GroupAdapter</code>而不是普通的适配器来创建列表。因此，在我们的 MainActivity 中，我们将创建一个 GroupAdapter，并将从 api 获得的超级英雄列表添加到 GroupAdapter 中，并将 is 设置为 RecyclerView 的适配器。</p><p id="6be2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在这里的问题是 GroupAdapter 接受项目作为<code class="fe mu mv mw mx b">List&lt;SuperHeroItem&gt;</code>，但是我们获取超级英雄作为<code class="fe mu mv mw mx b">List&lt;Superhero&gt;</code>。所以我们将创建一个扩展函数，将<code class="fe mu mv mw mx b">SuperHero</code>类的列表更改为<code class="fe mu mv mw mx b">SuperHeroItem</code>类的列表。</p><pre class="kd ke kf kg gt my mx mz na aw nb bi"><span id="e3c8" class="lw lx in mx b gy nc nd l ne nf">fun List&lt;Superhero&gt;.toSuperHeroITem() : List&lt;SuperHeroItem&gt;{<br/>    return this.<em class="ni">map </em><strong class="mx io">{<br/>        </strong>SuperHeroItem(<strong class="mx io">it</strong>)<br/>    <strong class="mx io">}<br/></strong>}</span></pre><p id="f881" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我们将在 MainActivity 中创建 GroupAdapter，并使用<code class="fe mu mv mw mx b">addAll()</code>方法添加其中的所有项目，然后将其设置为回收器适配器。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">主活动. kt</figcaption></figure><p id="5167" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">结束了。您的回收器视图已创建，如下所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/b9d25cbbf8ed044854ff651fdea8fb38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*De7ZNa25mMgH88iGf2GiYw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">用 groupie 创建的 RecyclerView</figcaption></figure><h2 id="e60f" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated">结论</h2><p id="43bc" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">现在，您已经用几行代码创建了一个回收器视图，更不用说没有制作适配器、视图容器等。这只是创建回收器视图的一个简单示例，但是使用 groupie，您可以创建更复杂的回收器视图，例如向回收器视图添加页眉和页脚，甚至向回收器视图添加节。我们将在本系列的其他部分看到更复杂的制作回收器视图的例子。</p><p id="68fd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">与此同时，你可以阅读我的另一篇文章，用 android 中的 Stetho 库轻松调试你的网络请求和数据库。</p><div class="nk nl gp gr nm nn"><a href="https://medium.com/dev-genius/stetho-the-ultimate-debugging-tool-for-android-1e7573554d04" rel="noopener follow" target="_blank"><div class="no ab fo"><div class="np ab nq cl cj nr"><h2 class="bd io gy z fp ns fr fs nt fu fw im bi translated">ste tho:Android 的终极调试工具。</h2><div class="nu l"><h3 class="bd b gy z fp ns fr fs nt fu fw dk translated">Stetho 是一个易于使用的库，由脸书调试网络请求和 android 应用程序中的数据库。</h3></div><div class="nv l"><p class="bd b dl z fp ns fr fs nt fu fw dk translated">medium.com</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob km nn"/></div></div></a></div><h2 id="5590" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated">参考</h2><p id="0f3f" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated"><a class="ae ks" href="https://github.com/lisawray/groupie" rel="noopener ugc nofollow" target="_blank">追星族官方文件</a></p><p id="9790" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢阅读。请在评论中给我你的建议。</p></div></div>    
</body>
</html>