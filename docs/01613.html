<html>
<head>
<title>Express.js course with TypeScript Lesson 1 — How to build GraphQL API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">包含 TypeScript 的 Express.js 课程第 1 课—如何构建 GraphQL API</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/express-js-course-with-typescript-lesson-1-how-to-build-graphql-api-2ed47dafb9e9?source=collection_archive---------41-----------------------#2020-07-07">https://blog.devgenius.io/express-js-course-with-typescript-lesson-1-how-to-build-graphql-api-2ed47dafb9e9?source=collection_archive---------41-----------------------#2020-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e0366004cb69bdba46b806a120ace195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iVdOXezzAsoDeF3Rzx85HQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://www.blog.duomly.com" rel="noopener ugc nofollow" target="_blank"> Duomly —编程在线课程</a></figcaption></figure><p id="628e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文原载于<a class="ae kc" href="https://www.blog.duomly.com/how-to-build-graphql-api-tutorial-express-js-course-lesson-1/" rel="noopener ugc nofollow" target="_blank">https://www . blog . duomly . com/how-to-build-graph QL-API-tutorial-express-js-course-lesson-1/</a></p></div><div class="ab cl lb lc hu ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ij ik il im in"><h1 id="8c93" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">介绍如何构建 GraphQL API 教程</h1><p id="671d" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在快车的第一课。JS 课程，我们将重点介绍用 typescript 构建 GraphQL API 教程。</p><p id="6574" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Express.js 是 Node 之一。JS 最流行的框架，它帮助我们使用 Javascript 或 Typescript 为应用程序创建后端。</p><p id="ef65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这很方便，因为我们只需要了解 Javascript 就可以进行全栈开发。</p><p id="5bc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你还不知道 Javascript，不要担心，我们创建了一门课程，可以帮助你学习这种优秀的编程语言。</p><p id="eb19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以在此找到面向初学者的 Javascript 课程的 Url:</p><p id="cfca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">【https://www.duomly.com/course/javascript-course/ T4】</p><p id="fdd8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将创建一个个人财务应用程序，从 JSON 文件转换财务数据，并通过 GraphQL API 提供服务。</p><p id="71ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所有这些都与 React.js 前端完美配合，我的队友安娜将在 Duomly 的 youtube 频道上上传这些内容。</p><p id="ba47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您还不知道 React，您可以在此找到完整的互动课程:</p><p id="d315" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://www.duomly.com/course/react-js-course/" rel="noopener ugc nofollow" target="_blank">https://www.duomly.com/course/react-js-course/</a></p><p id="1d92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你准备好迎接这次激动人心的旅行了吗？</p><p id="0c13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">开始吧！</p><p id="0b46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你喜欢视频，这是 youtube 的版本:</p><figure class="ml mm mn mo gt jr"><div class="bz fp l di"><div class="mp mq l"/></div></figure><h1 id="1ba7" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何创建项目目录</h1><p id="e9fc" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">作为 Express.js 课程的第一步，我们需要为项目创建一个目录。</p><p id="4541" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开您的终端并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="6a97" class="nb lj iq mx b gy nc nd l ne nf">mkdir express-js-duomly</span></pre><p id="c6ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，通过以下方式进入文件夹:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="da7f" class="nb lj iq mx b gy nc nd l ne nf">cd express-js-duomly</span></pre><h1 id="a549" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">Npm 初始化</h1><p id="29d3" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在我们的项目目录中，我们应该初始化 npm 包，这将让我们处理 NPM 包。</p><p id="409f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，您需要在项目目录中打开一个终端，并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="2d6f" class="nb lj iq mx b gy nc nd l ne nf">npm init</span></pre><p id="0f15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，您需要填写一些输入，或者您可以将它们留空。</p><p id="3674" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由您来确认所有信息和问题的结尾，即使它们是空白的。</p><h1 id="b36b" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何安装 typescript</h1><p id="7dd2" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">现在，我们需要安装一些将在项目中使用的依赖项。</p><p id="3298" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个是“typescript”，要安装 dep，您需要打开终端并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="2266" class="nb lj iq mx b gy nc nd l ne nf">npm i -S typescript</span></pre><h1 id="4c86" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何安装终端服务节点</h1><p id="2f2b" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我们需要的第二个 npm 包是“ts-node”。</p><p id="26ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开终端，并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="ceb5" class="nb lj iq mx b gy nc nd l ne nf">npm i -S ts-node</span></pre><h1 id="06d3" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何安装 express</h1><p id="0927" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">现在，我们应该安装“express”。</p><p id="cd01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开终端，并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="743c" class="nb lj iq mx b gy nc nd l ne nf">npm i -S express</span></pre><h1 id="c08e" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何安装 GraphQL</h1><p id="9d7b" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">在这一步中，我们将安装 GraphQL，我们将使用它作为 API 的基础。</p><p id="9af7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开终端，并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="4d8c" class="nb lj iq mx b gy nc nd l ne nf">npm i -S graphql</span></pre><h1 id="fea6" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何安装 graphql-express</h1><p id="c185" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我们应该安装的最后一个依赖项是“graphql-express”。</p><p id="90b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开终端，并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="752d" class="nb lj iq mx b gy nc nd l ne nf">npm i -S graphql-express</span></pre><h1 id="b5d5" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">创建服务器文件</h1><p id="0d62" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">太好了！所有的依赖项都已安装，所以我们可以开始编码了。</p><p id="2a93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们应该专注于创建 server.ts 文件，我们将使用它来处理 express.js 应用程序的主要逻辑。<br/>在项目的根目录下，你要创建一个名为“server.ts”的文件。</p><p id="5ba4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在“server.ts”文件中，我们应该导入一些依赖项。</p><p id="25e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个是“express”，第二个是“graphqlHTTP”。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="53f5" class="nb lj iq mx b gy nc nd l ne nf">import * as express from 'express';<br/>import {graphqlHTTP} from 'express-graphql';</span></pre><h1 id="425a" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何创建 GraphQL 模式</h1><p id="2b38" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我们应该进入的下一步是模式。</p><p id="77ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Schema 是一种模式，它告诉我们可以进行什么类型的查询或变化。</p><p id="f8b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将为查询费用创建一个模式，该模式将返回一个“费用”类型的数组。</p><p id="ae8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该做的第二件事是在我们的模式中创建“Expense”类型。</p><p id="4e83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将声明“Expense”项应该包含什么类型的数据。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="1d1f" class="nb lj iq mx b gy nc nd l ne nf">var { buildSchema } = require('graphql');</span><span id="14a1" class="nb lj iq mx b gy ng nd l ne nf">const schema = buildSchema(`<br/>  type Query {<br/>    expenses: [Expense]<br/>  },<br/>  type Expense {<br/>    id: Int,<br/>    date: String,<br/>    amount: Int,<br/>    type: String,<br/>    category: String<br/>  }<br/>`);</span><span id="12c0" class="nb lj iq mx b gy ng nd l ne nf">export default schema;</span></pre><h1 id="dcf7" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">添加数据</h1><p id="2dbf" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">现在我们可以进入数据。</p><p id="e559" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为第一步，我们应该创建一个名为“data”的目录，并在该目录中创建一个文件“expenses.json”。</p><p id="31b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了生成数据，我使用了 mockaroo，并有 1000 个项目，但你可以创建自己的，或只是克隆我们的回购，并复制文件。</p><p id="5d81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">包含数据的文件应包含一个包含 1000 个对象的数组，其结构如下例所示:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="b758" class="nb lj iq mx b gy nc nd l ne nf">{"id":2,"date":"1/12/2020","amount"1567,"type":"incoming","category":"passive"}</span></pre><h1 id="2c95" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何创建 GraphQL 解析器</h1><p id="291e" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我认为解析器有点类似于 REST API 中的端点。</p><p id="8401" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们定义了应该对类型化查询触发什么逻辑。</p><p id="26af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要创建解析器，作为第一步，我们需要在“graphql”目录中创建名为“resolvers.ts”的文件。</p><p id="a8d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二步，我们应该导入数据，在函数“getExpenses”中返回数据，并在名为“resolvers”的对象中将“getExpenses”设置为“Expenses”方法的返回。</p><p id="84c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们需要默认导出对象“解析器”。</p><p id="4c2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以看看下面的例子:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="0c24" class="nb lj iq mx b gy nc nd l ne nf">const expenses = require('../data/expenses');</span><span id="5f8b" class="nb lj iq mx b gy ng nd l ne nf">const getExpenses = () =&gt; {<br/>  return expenses;<br/>}</span><span id="1e41" class="nb lj iq mx b gy ng nd l ne nf">const resolvers = {<br/>  expenses: () =&gt; {<br/>    return getExpenses();<br/>  },<br/>};</span><span id="7dd4" class="nb lj iq mx b gy ng nd l ne nf">export default resolvers;</span></pre><h1 id="8f4a" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">如何安装类型</h1><p id="648a" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">为了处理 typescript 中的所有 node.js 逻辑，我们需要安装类型。<br/>为此，我们需要打开终端并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="e214" class="nb lj iq mx b gy nc nd l ne nf">npm i @types/node</span></pre><h1 id="f425" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">创建应用程序</h1><p id="072e" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">很好，现在，我们可以进入 server.ts，进入与“app”相关的逻辑。</p><p id="c610" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为第一步，我们应该调用 express，并将它赋给名为“app”的变量。</p><p id="6ec9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们应该创建端点“/graphql”，并调用“graphqlHTTP”函数。</p><p id="173c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在端点下面，我们应该设置端口 4000 的监听，并返回任何 console.log 来通知我们服务器何时准备好。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="3914" class="nb lj iq mx b gy nc nd l ne nf">var app = express();<br/>app.use('/graphql', graphqlHTTP({</span><span id="70f6" class="nb lj iq mx b gy ng nd l ne nf">}));<br/>app.listen(4000);<br/>console.log('Running a GraphQL API server at <a class="ae kc" href="http://localhost:4000/graphql');" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/graphql');</a></span></pre><h1 id="737b" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">导入模式和解析器</h1><p id="afb7" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">好了，我们差不多完成了，离测试只有三小步了。</p><p id="ee8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，我们应该将模式和解析器导入 server.ts。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="a338" class="nb lj iq mx b gy nc nd l ne nf">import schema from './graphql/schema';<br/>import resolvers from './graphql/resolvers';</span></pre><h1 id="abdb" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">应用模式和解析器</h1><p id="f54c" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">如果我们的模式被导入，我们可以应用它，作为“graphqlHTPP”函数的参数。</p><p id="ac3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们应该将“schema”、as“schema”和“resolvers”分配给“rootValue”参数。</p><p id="240c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该添加到“graphqlHTTP”函数中的另一个参数是“graphiql ”,值应该是“true”。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="d513" class="nb lj iq mx b gy nc nd l ne nf">var app = express();<br/>app.use('/graphql', graphqlHTTP({<br/>  schema: schema,<br/>  rootValue: resolvers,<br/>  graphiql: true,<br/>}));<br/>app.listen(4000);<br/>console.log('Running a GraphQL API server at <a class="ae kc" href="http://localhost:4000/graphql');" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/graphql');</a></span></pre><h1 id="d7ac" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">修改 package.json</h1><p id="1cc5" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">呜哇！我们的应用已经准备好了。</p><p id="a013" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用两种方式启动 API，第一种是打开终端并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="2461" class="nb lj iq mx b gy nc nd l ne nf">ts-node server.js</span></pre><p id="2095" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者，我们可以设置 package.json 脚本。</p><p id="1a7d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，您需要在“脚本”对象中添加“ts-node server.js”作为“启动”脚本。</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="eb8c" class="nb lj iq mx b gy nc nd l ne nf">"scripts": {<br/>  "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",<br/>  "start": "ts-node server.ts"<br/>},</span></pre><h1 id="881a" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">启动应用程序</h1><p id="7de7" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">我们完成了，app 准备好了，可以开始测试了，恭喜！</p><p id="6c04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打开终端并键入:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="5d5b" class="nb lj iq mx b gy nc nd l ne nf">npm start</span></pre><p id="e621" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，进入 URL: localhost:4000 并键入 GraphQL 查询:</p><pre class="ml mm mn mo gt mw mx my mz aw na bi"><span id="cd9b" class="nb lj iq mx b gy nc nd l ne nf">{<br/>  expenses {<br/>    id,<br/>    date,<br/>    amount,<br/>    type,<br/>    category<br/>  }<br/>}</span></pre><h1 id="efd3" class="li lj iq bd lk ll mr ln lo lp ms lr ls lt mt lv lw lx mu lz ma mb mv md me mf bi translated">关于如何构建 GraphQL API 教程的总结</h1><p id="0d41" class="pw-post-body-paragraph kd ke iq kf b kg mg ki kj kk mh km kn ko mi kq kr ks mj ku kv kw mk ky kz la ij bi translated">恭喜你，你学会了如何在 Express.js 中创建 GraphQL API！</p><p id="0929" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是第一课，但不是最后一课。</p><p id="9c23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在下一集，我们将关注 Web Sockets 与 GraphQL 的结合，这将让我们创建实时更新的应用程序。</p><p id="906b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这里你可以找到包含当前课程代码的 GitHub 存储库:<br/><a class="ae kc" href="https://github.com/Duomly/express-js-with-graphql-and-websockets/tree/Express-js-course-Lesson-1" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/Duomly/Express-js-with-graph QL-and-web sockets/tree/Express-js-course-Lesson-1</a></p><p id="acfd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">别忘了访问我们的 youtube 频道，观看 Anna 创建的 React.js 课程，并构建前端以拥有一个完整的应用程序。</p><p id="640c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下是我们 youtube 频道的网址:<br/>【https://www.youtube.com/c/duomly T4】</p><figure class="ml mm mn mo gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/03d18bac6abce30b3e43642dbc2e8504.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fkPMC44a-mwUTL1FE_VBlw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://www.duomly.com?code=lifetime-80" rel="noopener ugc nofollow" target="_blank"> Duomly 促销代码</a></figcaption></figure><p id="cb8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">感谢您和我们一起学习，Duomly 的 Radek</p></div></div>    
</body>
</html>