<html>
<head>
<title>Form Validation in a Vue 3 App with Vee-Validate 4 — Validation Behavior and Error Messages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vee-Validate 4在Vue 3应用程序中进行表单验证—验证行为和错误消息</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/form-validation-in-a-vue-3-app-with-vee-validate-4-validation-behavior-and-error-messages-c5c2d6f92c90?source=collection_archive---------3-----------------------#2021-02-25">https://blog.devgenius.io/form-validation-in-a-vue-3-app-with-vee-validate-4-validation-behavior-and-error-messages-c5c2d6f92c90?source=collection_archive---------3-----------------------#2021-02-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0527777e2fa4a03f357bb0c083cfa530.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yjRcjFg_Cc6Fwddz"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@aessieaudio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">δξIξδUDIO</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="c222" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">表单验证是任何应用程序的重要组成部分。</p><p id="620f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何在我们的Vue 3应用程序中使用Vee-Validate 4进行表单验证。</p><h1 id="7704" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">验证行为</h1><p id="5ae5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vee-Validate在发出<code class="fe me mf mg mh b">change</code>事件或外部更改值时运行验证。</p><h1 id="6e7d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">自定义验证触发器</h1><p id="f5c5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当字段被验证时，我们可以改变。</p><p id="221a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们使用<code class="fe me mf mg mh b">configure</code>函数来改变这种行为:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2cd6" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;Form @submit="submit" :validation-schema="schema" v-slot="{ errors }"&gt;<br/>    &lt;Field name="email" as="input" /&gt;<br/>    &lt;span&gt;{{ errors.email }}&lt;/span&gt;<br/>    &lt;br /&gt;<br/>    &lt;Field name="password" as="input" type="password" /&gt;<br/>    &lt;span&gt;{{ errors.password }}&lt;/span&gt;<br/>    &lt;br /&gt;<br/>    &lt;button&gt;Submit&lt;/button&gt;<br/>  &lt;/Form&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { configure, Field, Form } from "vee-validate";<br/>import * as yup from "yup";<br/>configure({<br/>  validateOnBlur: true,<br/>  validateOnChange: true,<br/>  validateOnInput: false,<br/>  validateOnModelUpdate: true,<br/>});<br/>export default {<br/>  components: {<br/>    Field,<br/>    Form,<br/>  },<br/>  data() {<br/>    const schema = yup.object().shape({<br/>      email: yup.string().required().email(),<br/>      password: yup.string().required().min(8),<br/>    });<br/>    return {<br/>      schema,<br/>    };<br/>  },<br/>  methods: {<br/>    submit() {},<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="a105" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">validateOnBlur</code>表示验证将在<code class="fe me mf mg mh b">blur</code>事件发出时运行。</p><p id="2183" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">validateOnChange</code>表示当发出<code class="fe me mf mg mh b">change</code>事件时将运行验证。</p><p id="bb1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">validateOnInput</code>表示发出<code class="fe me mf mg mh b">input</code>事件时验证运行。</p><p id="256d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">validateInModelUpdate</code>表示当模型反应特性更新时验证运行。</p><h1 id="60b5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">显示错误消息</h1><p id="e47f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建自己的字段，并通过使用slot props显示错误消息。</p><p id="ae41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a6b9" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;Form @submit="submit" :validation-schema="schema"&gt;<br/>    &lt;Field :rules="rules" v-slot="{ field, errors, errorMessage }" name="email"&gt;<br/>      &lt;input v-bind="field" type="text" /&gt;<br/>      &lt;p&gt;{{ errors[0] }}&lt;/p&gt;<br/>      &lt;p&gt;{{ errorMessage }}&lt;/p&gt;<br/>    &lt;/Field&gt;<br/>    &lt;br /&gt;<br/>    &lt;button&gt;Submit&lt;/button&gt;<br/>  &lt;/Form&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { Field, Form } from "vee-validate";<br/>import * as yup from "yup";</span><span id="987f" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  components: {<br/>    Form,<br/>    Field,<br/>  },<br/>  data() {<br/>    const schema = yup.object().shape({<br/>      email: yup.string().required().email(),<br/>    });</span><span id="fd8b" class="mq lc iq mh b gy mv ms l mt mu">    return {<br/>      schema,<br/>    };<br/>  },<br/>  methods: {<br/>    submit() {},<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="72ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有带有验证模式的<code class="fe me mf mg mh b">validation-schema</code> prop。</p><p id="2447" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">Field</code>组件中，我们有<code class="fe me mf mg mh b">input</code>元素。</p><p id="08c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">field</code>属性作为道具传入，以在输入上生成验证触发器。</p><p id="764c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们显示了<code class="fe me mf mg mh b">errors[0]</code>或<code class="fe me mf mg mh b">errorMessage</code>表达式的错误。</p><p id="cb77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过迭代<code class="fe me mf mg mh b">errors</code>对象来显示字段的所有错误消息:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="51e4" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;Form v-slot="{ errors }" :validation-schema="schema"&gt;<br/>    &lt;template v-if="Object.keys(errors).length"&gt;<br/>      &lt;p&gt;Please correct the following errors&lt;/p&gt;<br/>      &lt;ul&gt;<br/>        &lt;li v-for="(message, field) in errors" :key="field"&gt;<br/>          {{ message }}<br/>        &lt;/li&gt;<br/>      &lt;/ul&gt;<br/>    &lt;/template&gt;</span><span id="733f" class="mq lc iq mh b gy mv ms l mt mu">    &lt;Field name="name" as="input" :rules="rules" /&gt;<br/>    &lt;Field name="email" as="input" :rules="rules" /&gt;<br/>    &lt;Field name="password" as="input" :rules="rules" /&gt;<br/>  &lt;/Form&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { Field, Form } from "vee-validate";<br/>import * as yup from "yup";</span><span id="6d0a" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  components: {<br/>    Field,<br/>    Form,<br/>  },<br/>  data() {<br/>    const schema = yup.object().shape({<br/>      email: yup.string().required().email(),<br/>      password: yup.string().required().min(8),<br/>      name: yup.string().required(),<br/>    });<br/>    return {<br/>      schema,<br/>    };<br/>  },<br/>  methods: {<br/>    submit() {},<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="9882" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">errors</code>对象获取密钥，并用<code class="fe me mf mg mh b">v-for</code>指令遍历它们。</p><p id="6d47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">message</code>是值，我们在<code class="fe me mf mg mh b">li</code>中显示它们。</p><h1 id="8b9f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="aa2e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过Vee-Validate 4更改验证运行的时间，并在Vue 3应用中显示错误消息。</p></div></div>    
</body>
</html>