<html>
<head>
<title>Introduction to prisma</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">prisma ç®€ä»‹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/introduction-to-prisma-4d05989f8130?source=collection_archive---------2-----------------------#2022-06-07">https://blog.devgenius.io/introduction-to-prisma-4d05989f8130?source=collection_archive---------2-----------------------#2022-06-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/77ed2e65fc849ccf2f034caca9289dbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nVgxCx6t1Hl-n2iT6n0jzQ.jpeg"/></div></div></figure><p id="b256" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç¼–å†™ SQL æŸ¥è¯¢æ˜¯ä¸€ä»¶éº»çƒ¦çš„äº‹æƒ…ã€‚å˜å¾—æ›´éš¾ç»´æŠ¤ï¼Œä¹Ÿå®¹æ˜“æç ¸ã€‚ORMs è¢«å¼•å…¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h1 id="a7da" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">ä»€ä¹ˆæ˜¯ ORMï¼Ÿ</h1><p id="bfef" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">ORM ä»£è¡¨<em class="lx">å¯¹è±¡å…³ç³»æ˜ å°„å™¨</em>ã€‚å¯¹è±¡å…³ç³»æ˜ å°„å™¨æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå…è®¸æ‚¨ä½¿ç”¨é¢å‘å¯¹è±¡çš„èŒƒä¾‹æŸ¥è¯¢å’Œæ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®ã€‚<a class="ae kt" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank">å§œæˆˆ</a>æ˜¯æœ€å—æ¬¢è¿çš„ ORM ä¹‹ä¸€ã€‚ä¸ç®¡ä½¿ç”¨ä»€ä¹ˆæ•°æ®åº“ï¼Œæ“ä½œæ•°æ®åº“çš„ä»£ç éƒ½æ˜¯ä¸€æ ·çš„ã€‚è¿™ä½¿å¾—åœ¨éœ€è¦æ—¶åˆ‡æ¢åˆ°ä¸åŒçš„æ•°æ®åº“å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><h1 id="aea1" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Prisma æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p id="05a6" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Prisma æ˜¯ NodeJS çš„ ORMã€‚Prisma æ”¯æŒ MySQLã€SQLiteã€PostgreSQLã€SQL Server å’Œ MongoDBã€‚ä½†æ˜¯å¯¹ MongoDB çš„æ”¯æŒè¿˜ä¸ç¨³å®šã€‚Prisma æœ‰ 3 ç§å·¥å…·:</p><p id="1d56" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://github.com/prisma/prisma-client-js" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Prisma Client JS </strong> </a>æ˜¯ä¸€ä¸ªæ•°æ®åº“å®¢æˆ·ç«¯ï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡æ™®é€šçš„ JavaScript æ–¹æ³•å’Œå¯¹è±¡è®¿é—®æ•°æ®åº“ï¼Œè€Œä¸å¿…ç”¨æ•°æ®åº“è¯­è¨€æœ¬èº«ç¼–å†™æŸ¥è¯¢ã€‚</p><p id="abe8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://github.com/prisma/migrate" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">Prisma Migrate</strong></a>æ˜¯ä¸€æ¬¾æ•°æ®åº“æ¨¡å¼è¿ç§»å·¥å…·ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬è·Ÿè¸ªè¿ç§»å†å²ï¼Œå¹¶è®©æˆ‘ä»¬è½»æ¾åœ°æ¢å¤å’Œé‡æ”¾è¿ç§»ã€‚</p><p id="e933" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://github.com/prisma/studio" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Prisma Studio </strong> </a>æ˜¯ä¸€ä¸ªç®¡ç†ç•Œé¢ï¼Œå…è®¸æˆ‘ä»¬æŸ¥çœ‹ã€æ·»åŠ å’Œæ›´æ”¹æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p><h2 id="9cb6" class="ly kv in bd kw lz ma dn la mb mc dp le kg md me li kk mf mg lm ko mh mi lq mj bi translated">å…ˆå†³æ¡ä»¶</h2><ul class=""><li id="5c14" class="mk ml in jx b jy ls kc lt kg mm kk mn ko mo ks mp mq mr ms bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨ NodeJS åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Prismaï¼Œå› æ­¤å»ºè®®æ‚¨å¯¹ NodeJS å’Œ npm æœ‰ä¸€äº›åŸºæœ¬çš„äº†è§£ã€‚</li><li id="bbd0" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated">æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨<a class="ae kt" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL </a>ï¼Œæ‰€ä»¥äº†è§£ä¸€ç‚¹ PostgreSQL çŸ¥è¯†ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</li></ul><h1 id="2b2e" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">è®¾ç½® Prisma:</h1><p id="b8e7" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">è®©æˆ‘ä»¬é¦–å…ˆè®¾ç½®ä¸€ä¸ªç©ºçš„ nodejs åº”ç”¨ç¨‹åºã€‚åœ¨é¡¹ç›®ç›®å½•ä¸­æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="d6a2" class="ly kv in nd b gy nh ni l nj nk">npm init -y<br/>npm install prisma --save-dev</span></pre><p id="1a7e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¸Šè¿°å‘½ä»¤å°†åˆ›å»ºä¸€ä¸ªç©ºèŠ‚ç‚¹ js é¡¹ç›®ï¼Œå¹¶å°† prisma ä½œä¸º dev ä¾èµ–é¡¹æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚</p><p id="39f1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¸‹ä¸€æ­¥æ˜¯é€šè¿‡ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ª<a class="ae kt" href="https://www.prisma.io/docs/concepts/components/prisma-schema" rel="noopener ugc nofollow" target="_blank">æ¨¡å¼</a>æ–‡ä»¶æ¥è®¾ç½® Prisma</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="0842" class="ly kv in nd b gy nh ni l nj nk">npx prisma init</span></pre><p id="2262" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å“åº”</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="2495" class="ly kv in nd b gy nh ni l nj nk">âœ” Your Prisma schema was created at prisma/schema.prisma<br/>You can now open it in your favorite editor.<br/><br/>Next steps:<br/>1. Set the DATABASE_URL in the .env file to point to your existing database. If your database has no tables yet, read https://pris.ly/d/getting-started<br/>2. Set the provider of the datasource block in schema.prisma to match your database: postgresql, mysql, sqlite, sqlserver, mongodb or cockroachdb (Preview).<br/>3. Run prisma db pull to turn your database schema into a Prisma schema.<br/>4. Run prisma generate to generate the Prisma Client. You can then start querying your database.<br/><br/>More information in our documentation:<br/>https://pris.ly/d/getting-started</span></pre><p id="36ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™ä¼šåœ¨<strong class="jx io"> prisma </strong>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<strong class="jx io"> schema.prisma </strong>çš„æ¨¡å¼æ–‡ä»¶ï¼Œå¹¶ä¸ºæ‚¨çš„ç¯å¢ƒå˜é‡åˆ›å»ºä¸€ä¸ª. env æ–‡ä»¶ã€‚</p><h1 id="e760" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Prisma æ¶æ„æ–‡ä»¶:</h1><p id="3da0" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">è®©æˆ‘ä»¬æ£€æŸ¥æ¨¡å¼æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œæ¨¡å¼æ–‡ä»¶åº”è¯¥æœ‰å¦‚ä¸‹ä»£ç </p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="db53" class="ly kv in nd b gy nh ni l nj nk">// This is your Prisma schema file,<br/>// learn more about it in the docs: https://pris.ly/d/prisma-schema<br/><br/>generator client {<br/>  provider = "prisma-client-js"<br/>}<br/><br/>datasource db {<br/>  provider = "postgresql"<br/>  url      = env("DATABASE_URL")<br/>}</span></pre><p id="76ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">generator</code>éƒ¨åˆ†æ˜¯æˆ‘ä»¬æŒ‡å®šæƒ³è¦ç”Ÿæˆ Prisma çš„å®¢æˆ·ç«¯çš„åœ°æ–¹ã€‚å®¢æˆ·ç«¯é€šè¿‡è¿è¡Œ<strong class="jx io"> prisma generate </strong>å‘½ä»¤ç”Ÿæˆã€‚æ¯å½“å¯¹æ•°æ®åº“æ¨¡å¼è¿›è¡Œæ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è¿è¡Œè¿™ä¸ªå‘½ä»¤ã€‚</p><p id="802c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">datasource</code>éƒ¨åˆ†æ˜¯æˆ‘ä»¬æä¾›å°†è¦ä½¿ç”¨çš„æ•°æ®åº“æä¾›è€…çš„åœ°æ–¹ã€‚é»˜è®¤æƒ…å†µä¸‹å·²ç»é€‰æ‹©äº†<strong class="jx io"> postgresql </strong>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡<strong class="jx io"> DATABASE_URL </strong>ç»™å‡ºæ•°æ®åº“è¿æ¥ URLã€‚ç°åœ¨åœ¨<strong class="jx io"> url </strong>ä¸‹æ·»åŠ ä¸€ä¸ªæ–°è¡Œï¼Œå¹¶æ·»åŠ ã€‚</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="5326" class="ly kv in nd b gy nh ni l nj nk">shadowDatabaseUrl = env(â€œSHADOW_DATABASE_URLâ€)</span></pre><p id="fecc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ¯æ¬¡è¿è¡Œå¼€å‘å‘½ä»¤æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨åˆ›å»ºå’Œåˆ é™¤<a class="ae kt" href="https://www.prisma.io/docs/concepts/components/prisma-migrate/shadow-database" rel="noopener ugc nofollow" target="_blank">å½±å­æ•°æ®åº“</a>ï¼Œä¸»è¦ç”¨äºæ£€æµ‹æ¨¡å¼æ¼‚ç§»ç­‰é—®é¢˜ã€‚å¦‚æœæ‚¨æä¾›ç»™ prisma çš„æ•°æ®åº“ç”¨æˆ·æ‹¥æœ‰åˆ›å»ºæ–°æ•°æ®åº“çš„æƒé™ï¼Œåˆ™ä¸éœ€è¦è¿™æ ·åšã€‚å½“è®¾ç½® prisma æ—¶ï¼Œæ‚¨ä¸éœ€è¦å®ƒï¼Œä½†æ˜¯å½“æ‚¨å¼€å§‹å¯¹æ•°æ®åº“è¿›è¡Œæ›´æ”¹æ—¶ï¼Œæ‚¨å°†éœ€è¦å®ƒ</p><p id="6fe9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‰“å¼€<code class="fe nl nm nn nd b">.env</code>æ–‡ä»¶ï¼Œå¹¶æ›´æ–°è¿æ¥ URL ä»¥æŒ‡å‘æ‚¨è‡ªå·±çš„æ•°æ®åº“ã€‚</p><p id="cf61" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿æ¥ URL çš„æ ¼å¼å–å†³äºæ‚¨ä½¿ç”¨çš„æ•°æ®åº“ã€‚çš„ã€‚env æ–‡ä»¶åº”è¯¥æœ‰ 2 ä¸ªå˜é‡ï¼Œå¸¦æœ‰æ›´æ–°çš„è¿æ¥ URL</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="5968" class="ly kv in nd b gy nh ni l nj nk">DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA"<br/>SHADOW_DATABASE_URL="postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA"</span></pre><p id="2076" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ¥ä¸‹æ¥æ‰“å¼€<strong class="jx io"> schema.prisma </strong>æ–‡ä»¶ï¼Œè®©æˆ‘ä»¬åœ¨<strong class="jx io">æ¨¡å‹</strong>å—ä¸­æ·»åŠ <code class="fe nl nm nn nd b">User</code>å’Œ<code class="fe nl nm nn nd b">Post</code>æ¨¡å‹ã€‚åœ¨æ‰€æœ‰çš„æ”¹å˜ä¹‹åï¼Œschema.prisma æ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºã€‚</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="1985" class="ly kv in nd b gy nh ni l nj nk">generator client {<br/>  provider = "prisma-client-js"<br/>}<br/><br/>datasource db {<br/>  provider = "postgresql"<br/>  url      = env("DATABASE_URL")<br/>  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")<br/>}<br/><br/>model Post {<br/>  id        Int      @id @default(autoincrement())<br/>  createdAt DateTime @default(now())<br/>  title     String   @db.VarChar(255)<br/>  content   String?<br/>  published Boolean  @default(false)<br/>  author    User     @relation(fields: [authorId], references: [id])<br/>  authorId  Int<br/>}<br/><br/>model User {<br/>  id      Int      @id @default(autoincrement())<br/>  email   String   @unique<br/>  name    String?<br/>  posts   Post[]<br/>}</span></pre><p id="1aa9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ¨¡æ€æ˜¯æ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„å®ä½“ã€‚<strong class="jx io">ç”¨æˆ·</strong>æ¨¡æ€å…·æœ‰ä»¥ä¸‹å±æ€§</p><p id="8ed1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">id</code>æ˜¯<strong class="jx io"> Int </strong>æ•°æ®ç±»å‹çš„ä¸»é”®ï¼Œè‡ªåŠ¨é€’å¢ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong class="jx io"> @id </strong>å±æ€§ä½¿ä¸€ä¸ªå­—æ®µæˆä¸ºä¸»é”®</p><p id="394a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">email</code>å’Œ<code class="fe nl nm nn nd b">name</code>å±äº<strong class="jx io">å‹ä¸²</strong></p><p id="2620" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">posts</code>å±äºç±»å‹<strong class="jx io"> Post </strong>ï¼Œå¸¦æœ‰ç±»å‹ä¿®é¥°ç¬¦<strong class="jx io"> [] </strong>ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªç”¨æˆ·ä¸‹ä¿å­˜ä¸€ä¸ªå¸–å­åˆ—è¡¨</p><p id="1700" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬çš„ Post æ¨¡å¼å…·æœ‰ä»¥ä¸‹å±æ€§</p><p id="caea" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">id</code>æ˜¯<strong class="jx io"> Int </strong>ç±»å‹çš„ä¸»é”®ã€‚</p><p id="bcba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">createdAt</code>çš„ç±»å‹ä¸º<strong class="jx io">æ—¥æœŸæ—¶é—´</strong>ã€‚</p><p id="8d70" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">title</code>å’Œ<code class="fe nl nm nn nd b">content</code>å±äº<strong class="jx io">å­—ç¬¦ä¸²</strong>ç±»å‹</p><p id="f6c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">published</code>å±äºç±»å‹<strong class="jx io">å¸ƒå°”</strong></p><p id="3ec8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">author</code>å±äºç±»å‹<strong class="jx io">ç”¨æˆ·</strong>ã€‚è¿™æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å‘Šè¯‰ Prisma that æ¨¡æ€ä¸ç”¨æˆ·æ¨¡æ€æœ‰ä¸€ä¸ªå¤–é”®(åœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯å¤šå¯¹å¤šå…³ç³»)ã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®šæ–‡ç« æ¨¡å¼ä¸­çš„å“ªä¸ªå­—æ®µå¯ä»¥ç”¨æ¥å­˜å‚¨æ–‡ç« çš„ç”¨æˆ· idï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­æˆ‘ä»¬å·²ç»æåˆ°äº†ä½¿ç”¨<strong class="jx io">@ relation(fields:[author id]</strong></p><p id="7090" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe nl nm nn nd b">authorId</code>ä¸º<strong class="jx io"> Int </strong>ç±»å‹ï¼Œç”¨äºä¸ç”¨æˆ·æ¨¡å‹å»ºç«‹å¤šå¯¹å¤šå…³ç³»ã€‚</p><h1 id="4fe0" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">ä½¿ç”¨ Prisma è¿ç§»</h1><p id="8fb4" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">è¿è¡Œä»¥ä¸‹å‘½ä»¤åœ¨æ•°æ®åº“ä¸­ç”Ÿæˆè¡¨ã€‚</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="163a" class="ly kv in nd b gy nh ni l nj nk">npx prisma migrate dev â€” name init</span></pre><p id="2ed0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¯¥å‘½ä»¤è¿˜ä¼šåœ¨<code class="fe nl nm nn nd b">prisma/migrations </code>ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªè¿ç§»æ–‡ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ SQL æ–‡ä»¶ï¼Œè®©ç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°çœ‹åˆ° Prisma åœ¨å¹•ååšäº†ä»€ä¹ˆã€‚</p><h1 id="6fcd" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">å®‰è£… Prisma å®¢æˆ·ç«¯</h1><p id="f98f" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… Prisma æ•°æ®åº“å®¢æˆ·ç«¯</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="6fd8" class="ly kv in nd b gy nh ni l nj nk">npm install @prisma/client</span></pre><p id="8bf9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ç”Ÿæˆ Prisma å®¢æˆ·ç«¯</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="dbe9" class="ly kv in nd b gy nh ni l nj nk">npx prisma generate</span></pre><p id="d8df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å°†æ¥æ— è®ºä½•æ—¶å¯¹ prisma æ¨¡å¼è¿›è¡Œæ›´æ”¹ï¼Œæ‚¨éƒ½éœ€è¦æ‰‹åŠ¨è°ƒç”¨<strong class="jx io"> prisma generate </strong>ï¼Œä»¥é€‚åº” Prisma å®¢æˆ·ç«¯ API ä¸­çš„æ›´æ”¹ã€‚</p><h1 id="8325" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">æŸ¥è¯¢æ•°æ®åº“</h1><p id="f6d2" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">åˆ›å»ºä¸€ä¸ªåä¸º<strong class="jx io"> index.js </strong>çš„æ–°æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç </p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="92f5" class="ly kv in nd b gy nh ni l nj nk">const { PrismaClient } = require('@prisma/client')<br/><br/>const prisma = new PrismaClient()<br/><br/>async function main() {<br/>    <em class="lx">// insert a record into user table and post table</em><br/>    await prisma.user.create({<br/>        data: {<br/>            name: 'John',<br/>            email: 'john@example.com',<br/>            posts: {<br/>                create: { title: 'Hello World' },<br/>            }<br/>        },<br/>    })<br/>    <em class="lx">// fetch all the records</em><br/>    const allUsers = await prisma.user.findMany({<br/>        include: {<br/>            posts: true,<br/>        },<br/>    })<br/>    console.dir(allUsers, { depth: null })<br/>}<br/><br/>main()<br/>    .catch((e) =&gt; {<br/>        throw e<br/>    })<br/>    .finally(async () =&gt; {<br/>        await prisma.$disconnect()<br/>    })</span></pre><p id="a316" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† prisma å®¢æˆ·ç«¯ï¼Œå¹¶ä½¿ç”¨<code class="fe nl nm nn nd b">const prisma = new PrismaClient()</code>åˆ›å»ºäº†ä¸€ä¸ªæ–°å®ä¾‹ã€‚</p><p id="3f87" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç„¶åï¼Œæˆ‘ä»¬å£°æ˜äº†<code class="fe nl nm nn nd b"><strong class="jx io">main()</strong></code>å‡½æ•°ï¼Œå¹¶åœ¨ç”¨æˆ·æ¨¡å¼ä¸­æ’å…¥äº†ä¸€æ¡æ–°è®°å½•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨åŒä¸€ä¸ªå‘½ä»¤ä¸­æ’å…¥ä¸ç”¨æˆ·ç›¸å…³çš„å¸–å­ã€‚Prisma å°†åœ¨ç”¨æˆ·è¡¨å’Œ post è¡¨ä¸­æ·»åŠ ä¸€æ¡è®°å½•ã€‚</p><p id="563a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç„¶åï¼Œæˆ‘ä»¬è·å–äº†ç”¨æˆ·è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ä»¥åŠä¸ç”¨æˆ·ç›¸å…³çš„å¸–å­</p><p id="9636" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬å·²ç»è°ƒç”¨äº† main å‡½æ•°æ¥è¿è¡ŒæŸ¥è¯¢ã€‚ç°åœ¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œ index.js æ–‡ä»¶</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="a0a5" class="ly kv in nd b gy nh ni l nj nk">node ./index.js</span></pre><p id="d7ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç”¨æˆ·è®°å½•è¿åŒå¸–å­å°†åœ¨ç»ˆç«¯ä¸­æ‰“å°å‡ºæ¥</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="6a8d" class="ly kv in nd b gy nh ni l nj nk">[<br/>    {<br/>        id: 1,<br/>        email: 'john@example.com',<br/>        name: 'John',<br/>        posts: [<br/>            {<br/>                id: 1,<br/>                createdAt: 2022-05-26T00:53:45.909Z,<br/>                title: 'Hello World',<br/>                content: null,<br/>                published: false,<br/>                authorId: 1<br/>            }<br/>        ]<br/>    }<br/>]</span></pre><p id="708e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç±»ä¼¼åœ°ï¼Œå¦‚æœæ‚¨æƒ³è¦è·å–æ‰€æœ‰çš„å¸–å­å¹¶è·å–ä¸å®ƒä»¬ç›¸å…³è”çš„ç”¨æˆ·ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç </p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="6412" class="ly kv in nd b gy nh ni l nj nk">const allPosts = await prisma.post.findMany({<br/>    include: {<br/>        author: true,<br/>    },<br/>})</span></pre><p id="09f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™å°†æ‰“å°ä»¥ä¸‹å†…å®¹</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="8d1c" class="ly kv in nd b gy nh ni l nj nk">[<br/>    {<br/>        id: 1,<br/>        createdAt: 2022-05-26T00:53:45.909Z,<br/>        title: 'Hello World',<br/>        content: null,<br/>        published: false,<br/>        authorId: 1,<br/>        author: { id: 1, email: 'john@example.com', name: 'John' }<br/>    }<br/>]</span></pre><p id="78d4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ­å–œğŸ‰æ‚¨å·²ç»æˆåŠŸå®‰è£…äº† Prismaã€‚</p><h1 id="a06a" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">æ¢ç´¢ Prisma Studio ç®¡ç†</h1><p id="d349" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Prisma é™„å¸¦äº†ä¸€ä¸ªç®¡ç† UIï¼Œç”¨äºå¯¹æˆ‘ä»¬çš„æ•°æ®æ‰§è¡Œ CRUD æ“ä½œã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æ‰“å¼€ Prisma studioã€‚</p><pre class="my mz na nb gt nc nd ne nf aw ng bi"><span id="9bb0" class="ly kv in nd b gy nh ni l nj nk">npx prisma studio</span></pre><p id="b9a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœæ‚¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<a class="ae kt" href="http://localhost:5555/" rel="noopener ugc nofollow" target="_blank"> http://localhost:5555/ </a>ï¼Œæ‚¨å¯ä»¥è®¿é—®ç®¡ç†ç•Œé¢ã€‚</p><figure class="my mz na nb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/7794b27a1b53fe8017429d440afe7802.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q1v07E4Iug4d1wBlFs5A4w.png"/></div></div></figure><p id="54fb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ‚¨å¯ä»¥å•å‡»å¹¶æ‰“å¼€è¡¨æ ¼</p><p id="cc8d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½ å¯ä»¥åœ¨è¿™ä¸ª<a class="ae kt" href="https://github.com/dinesh24murali/prisma_example/tree/javascript-setup" rel="noopener ugc nofollow" target="_blank"> github repo </a>ä¸­å‚è€ƒä¸Šé¢çš„å…¨éƒ¨æºä»£ç ã€‚</p></div><div class="ab cl np nq hr nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ig ih ii ij ik"><p id="7d25" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœä½ æƒ³äº†è§£ä»€ä¹ˆæ˜¯ Next.js ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„<a class="ae kt" href="https://codeknight.in/react/next_js_crash_course" rel="noopener ugc nofollow" target="_blank">åšå®¢</a>ã€‚</p></div></div>    
</body>
</html>