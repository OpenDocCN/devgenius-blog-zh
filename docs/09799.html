<html>
<head>
<title>Common Issues in Data platforms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据平台中的常见问题</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/common-issues-in-data-platforms-3a735a4b7a42?source=collection_archive---------1-----------------------#2022-09-14">https://blog.devgenius.io/common-issues-in-data-platforms-3a735a4b7a42?source=collection_archive---------1-----------------------#2022-09-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/99a3372ba982ef5e10cdf0de80054c94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cXpYpOzPie_hHvNikUNjfQ.jpeg"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">肯尼·埃利亚松在<a class="ae ja" href="https://unsplash.com/s/photos/issue?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><div class=""/><p id="1a29" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以及避免它们的方法。</p><h2 id="f4c5" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">缺乏数据定义</h2><p id="45fc" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">当一个新的数据工程师加入一个团队时，他/她努力寻找所考虑的数据的意义。如果有一个来源可以找到数据的含义，这将有助于他们正确地解释这些值。数据定义的单一来源还消除了两个不同团队对相同数据有不同含义的情况。因此，拥有一个数据定义和业务术语表的中央目录是避免这个问题的关键。</p><h2 id="f506" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">跨系统不匹配</h2><p id="44ee" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">通常，公司有不同的系统分布在不同的业务线，每个系统都有自己的数据视图。在处理这些系统时，我们可能会看到与相同数据的差异相关的问题。为了避免这种情况，我们需要一种机制来以一致的方式跨系统映射数据。</p><blockquote class="lw"><p id="411f" class="lx ly jd bd lz ma mb mc md me mf kx dk translated">数据工程师大约 80%的时间花在更新、维护和保证数据管道的质量上。</p></blockquote><h2 id="eecb" class="ky kz jd bd la lb mg dn ld le mh dp lg kl mi li lj kp mj ll lm kt mk lo lp lq bi translated">孤立数据</h2><p id="bae9" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">有两个类别:</p><p id="0853" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">数据存在于平台中，但没有系统拥有它。例如，数据文件存在于对象存储中，但目录(Hive)中没有引用它的表。这是由于对对象存储中的数据处理不当造成的。理想情况下，所有数据文件都应该被索引/编目。它们的生命周期应该与目录/索引系统相联系。如果表被删除/版本化/存档，数据也应该被删除/版本化/存档。</p><p id="c51a" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二类是当我们在系统的一部分有数据，而另一部分没有任何相关信息时。客户存在于客户系统表中，但其帐户不存在于任何帐户相关系统表中。这类问题应该定期进行协调。</p><h2 id="9a46" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">无关数据</h2><p id="0ad2" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">对于数据湖，我们看到许多不太相关的数据保存在原始层或暂存层之外的层中。这是对资源的浪费。银层和金层(在 medallion 架构中)应该只包含与数据平台消费者相关的数据。</p><h2 id="2552" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">相同数据的多个副本</h2><p id="f0b2" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">在数据湖中，对于单一数据源，我们应该有一个单一的事实。如果团队在孤岛中工作，他们将在不同地方拥有来自相同来源的相同数据副本。一般来说，数据集应该映射到源并保持集中，消费者应该只保留转换数据的副本。没有直接的文件拷贝。像 dbt 这样的工具可以方便地为不同的团队在相同的数据上创建不同的视图。</p><h2 id="5ebd" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">缺乏历史</h2><p id="661c" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">在理想情况下，数据是按时间顺序接收的。维护其版本和历史非常关键。要获得这种固定的数据，应该始终用它的版本进行映射。最新版本是默认版本。像 delta table / Iceberg 这样的新工具拥有快照等技术来实现这一功能。</p><h2 id="73fe" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">后期数据处理不当</h2><p id="2f35" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">很多时候，我们会遇到数据到达较晚的情况，由于处理不当，导致了一些问题。我们应该为回填创建一个单独的数据管道，并且应该在最短的停机时间内完成。比如使用重命名表的 A/B 开关。</p><h2 id="1fda" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">缺少属性</h2><p id="cba8" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">有时我们会发现数据源中缺少键列。这可能是由于数据从源传输到数据管道时，数据收集系统或两者之间存在问题。这些缺失的属性会导致下游管道失败。解决这个问题的最佳方法是实施模式验证检查和协调框架控制。</p><h2 id="d5aa" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">缺少值</h2><p id="2e55" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">有时一些单元格会有缺失值，我们需要一个适当的策略来处理这些记录。通过插补或删除。</p><h2 id="f343" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">缺失记录</h2><p id="adee" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">预期记录数与实际记录数不匹配。总是使用元数据来检查数据的一致性。我们可以通过要求源团队发送一个元数据文件来做到这一点，该文件包含数据摘要，如模式、行数和其他相关信息。此外，我们可以进行基于趋势的检查，以查看行数是否在过去 15 天记录计数的+/-5 %范围内。</p><h2 id="300d" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">默认值</h2><p id="111a" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">系统/软件/过程/开发人员引入的默认值应该以某种方式识别和处理。例如，1970 年 1 月 1 日(Unix 默认日期)。<strong class="kc je"> </strong>这可以使用目录来处理，其中数据定义有明确提到的默认值。</p><h2 id="6360" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">记录的复制</h2><p id="1440" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">由于许多问题，如(非等幂管道)，数据平台中的重复记录可能会悄悄出现。要解决这个问题，最好在数据转换/加载任务的前期和后期阶段添加一个惟一性检查。此控件将检查记录的精确副本，并且应该/可以清除一条记录。</p><h2 id="95c9" class="ky kz jd bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">属性格式不一致</h2><p id="afb2" class="pw-post-body-paragraph ka kb jd kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">数据可以以多种格式存储的属性，如日期，不同的系统可能有不同的格式来存储相同的数据。整个数据生命周期中的属性标准化将消除这个问题。</p><p id="8de6" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">平台中需要进行的一些检查:</p><ul class=""><li id="a475" class="ml mm jd kc b kd ke kh ki kl mn kp mo kt mp kx mq mr ms mt bi translated">检查过去趋势值的属性是否异常</li><li id="718f" class="ml mm jd kc b kd mu kh mv kl mw kp mx kt my kx mq mr ms mt bi translated">平均值、最小值、最大值、标准差、计数等的统计趋势。</li></ul><p id="c65c" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将有助于尽早发现与数据相关的问题。</p><p id="07bf" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">总之，我们应该在不同的级别设置控制措施，以解决数据平台中的问题</p><ol class=""><li id="f50a" class="ml mm jd kc b kd ke kh ki kl mn kp mo kt mp kx mz mr ms mt bi translated">源系统的修复</li><li id="6a25" class="ml mm jd kc b kd mu kh mv kl mw kp mx kt my kx mz mr ms mt bi translated">转换过程中的修复</li><li id="c03a" class="ml mm jd kc b kd mu kh mv kl mw kp mx kt my kx mz mr ms mt bi translated">连续数据剖析</li><li id="372d" class="ml mm jd kc b kd mu kh mv kl mw kp mx kt my kx mz mr ms mt bi translated">元数据层的护栏</li><li id="4bbe" class="ml mm jd kc b kd mu kh mv kl mw kp mx kt my kx mz mr ms mt bi translated">DQ 在消费层进行检查和警告。</li></ol></div></div>    
</body>
</html>