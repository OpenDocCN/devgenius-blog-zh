<html>
<head>
<title>Up your Mongo API Game with Mongo Filter Generator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Mongo 过滤器生成器升级您的 Mongo API 游戏</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/up-your-mongo-api-game-with-mongo-filter-generator-54368d966a17?source=collection_archive---------12-----------------------#2022-09-04">https://blog.devgenius.io/up-your-mongo-api-game-with-mongo-filter-generator-54368d966a17?source=collection_archive---------12-----------------------#2022-09-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="77a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">大家好，感谢加入！</p><p id="41bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天，我想分享一个我已经工作了 8 个月，并在生产中使用的库的新版本！</p><p id="f6c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Mongo Filter Generator 快速添加高级过滤和分页选项，同时标准化您的 API 请求，而无需编写定制的重复代码。</p><p id="b473" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">向<code class="fe ki kj kk kl b">@the-devoyage/mongo-filter-generator v0.4.0</code>问好！<a class="ae km" href="https://github.com/The-Devoyage/mongo-filter-generator" rel="noopener ugc nofollow" target="_blank"> Github。</a></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/a3e28585c2541e9b4a6b45efda43d68b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F07RGDZjuiUweNrH"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">美国宇航局在<a class="ae km" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h1 id="7c85" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">您的 API 已扩展</h1><p id="52c3" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">MFG 将发送到 API 的请求标准化，同时使其易于查找、过滤和分页返回的数据。</p><h2 id="8d0b" class="mg le in bd lf mh mi dn lj mj mk dp ln jv ml mm lr jz mn mo lv kd mp mq lz mr bi translated">转换请求</h2><p id="7c7a" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">将传入的请求直接传递给<code class="fe ki kj kk kl b">GenerateMongo</code>函数，以立即创建可用于原生 Mongoose 方法的 Mongo 过滤器。</p><pre class="ko kp kq kr gt ms kl mt mu aw mv bi"><span id="0d90" class="mg le in kl b gy mw mx l my mz">const { filter, options } = GenerateMongo({<br/>  fieldFilters: req.body<br/>});<br/><br/>const results = await User.find(filter, options);</span></pre><h2 id="d2a5" class="mg le in bd lf mh mi dn lj mj mk dp ln jv ml mm lr jz mn mo lv kd mp mq lz mr bi translated">对响应进行分页</h2><p id="9965" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">将上面生成的<code class="fe ki kj kk kl b">filter</code>和<code class="fe ki kj kk kl b">options</code>属性直接传递给提供的<code class="fe ki kj kk kl b">findAndPaginate</code>方法，以快速放大 API 的功能。</p><pre class="ko kp kq kr gt ms kl mt mu aw mv bi"><span id="d07d" class="mg le in kl b gy mw mx l my mz">const paginatedResponse = await User.findAndPaginate(filter, options);</span></pre><h2 id="4d18" class="mg le in bd lf mh mi dn lj mj mk dp ln jv ml mm lr jz mn mo lv kd mp mq lz mr bi translated">有用的统计数据和历史统计数据(新！)</h2><p id="027d" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated"><code class="fe ki kj kk kl b">findAndPaginate</code>方法还返回有用的数据，可以帮助您分页或了解模型的统计历史。</p><pre class="ko kp kq kr gt ms kl mt mu aw mv bi"><span id="868b" class="mg le in kl b gy mw mx l my mz">type Stats = {<br/>  remaining: Number;<br/>  total: Number;<br/>  page: Number;<br/>  cursor: Date;<br/>  history: HistoricalStats[];<br/>};</span></pre><p id="e526" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Historical Stats 允许您请求关于具有自定义指定时间范围的模型的信息，允许您使用历史统计数据轻松地创建图形和图表。</p><p id="8ed4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，您可能想计算从 3 月到 11 月每个月在 API 中创建的用户数量。</p><h1 id="7ff5" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">简单的查询</h1><p id="cf81" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">使用 MFG 允许客户机轻松地请求它需要的数据，而不必编写定制的处理程序，同时使客户机请求数据所用的格式标准化。</p><h2 id="fe80" class="mg le in bd lf mh mi dn lj mj mk dp ln jv ml mm lr jz mn mo lv kd mp mq lz mr bi translated">字段过滤器</h2><p id="d34f" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">只需使用提供的<code class="fe ki kj kk kl b">fieldFilter</code>类型来形成发送到服务器的查询，MFG 将处理剩下的工作。</p><p id="8713" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有五个内置的过滤器，允许您查询具有几乎任何类型属性的文档。</p><pre class="ko kp kq kr gt ms kl mt mu aw mv bi"><span id="f696" class="mg le in kl b gy mw mx l my mz">type IntFieldFilter = {<br/>  filterBy: "EQ" | "GT" | "GTE" | "LT" | "LTE" | "NE";<br/>  int: number;<br/>  operator?: "AND" | "OR";<br/>  groups: string[];<br/>};</span><span id="24f1" class="mg le in kl b gy na mx l my mz">type StringFieldFilter = {<br/>  filterBy: "MATCH" | "REGEX" | "OBJECTID";<br/>  string: string;<br/>  operator?: "AND" | "OR";<br/>  groups: string[];<br/>};</span><span id="4293" class="mg le in kl b gy na mx l my mz">type BooleanFieldFilter = {<br/>  filterBy: "EQ" | "NE";<br/>  bool: Boolean;<br/>  operator?: "AND" | "OR";<br/>  groups: string[];<br/>};</span><span id="10d9" class="mg le in kl b gy na mx l my mz">type DateFieldFilter = {<br/>  date: Date;<br/>  filterBy: "EQ" | "NE" | "LT" | "GT" | "LTE" | "GTE";<br/>  operator?: "AND" | "OR";<br/>  groups: string[];<br/>};</span><span id="1333" class="mg le in kl b gy na mx l my mz">type StringArrayFieldFilter = {<br/>  filterBy: "MATCH" | "REGEX" | "OBJECTID";<br/>  string: string[];<br/>  arrayOptions: "IN" | "NIN";<br/>  operator?: "AND" | "OR";<br/>  groups: string[];<br/>};</span></pre><p id="0fd7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">MFG 可以解析对象或字段过滤器数组，允许您根据需要筛选数据。</p><h2 id="65d0" class="mg le in bd lf mh mi dn lj mj mk dp ln jv ml mm lr jz mn mo lv kd mp mq lz mr bi translated">形成请求</h2><p id="abb2" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">只需使用与您请求的文档相同的形状发送请求。</p><p id="0605" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该文档:</p><pre class="ko kp kq kr gt ms kl mt mu aw mv bi"><span id="7ec7" class="mg le in kl b gy mw mx l my mz">interface User {<br/>  _id: string;<br/>  name: string;<br/>  age: number;<br/>  active: boolean;<br/>}</span></pre><p id="c632" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">查找姓名中包含字母<code class="fe ki kj kk kl b">jo</code>的活跃用户:</p><pre class="ko kp kq kr gt ms kl mt mu aw mv bi"><span id="790f" class="mg le in kl b gy mw mx l my mz">const requestBody = {<br/>  name: { string: "jo", filterBy: "REGEX" },<br/>  active: { bool: true, filterBy: "MATCH" }<br/>}</span></pre><p id="57a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">查找年龄大于 20 岁的用户:</p><pre class="ko kp kq kr gt ms kl mt mu aw mv bi"><span id="93bf" class="mg le in kl b gy mw mx l my mz">const requestBody = {<br/>  age: { int: 20, filterBy: "GT" }<br/>}</span></pre><p id="eb94" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将请求传递给<code class="fe ki kj kk kl b">GenerateMongo</code>并使用您认为合适的过滤器。</p><pre class="ko kp kq kr gt ms kl mt mu aw mv bi"><span id="47d0" class="mg le in kl b gy mw mx l my mz">const { filter } = GenerateMongo({<br/>  fieldFilters: requestBody<br/>})</span><span id="dad0" class="mg le in kl b gy na mx l my mz">const users = await User.find(filter)</span></pre><h1 id="f781" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">签出存储库</h1><p id="1eb1" class="pw-post-body-paragraph jk jl in jm b jn mb jp jq jr mc jt ju jv md jx jy jz me kb kc kd mf kf kg kh ig bi translated">存储库有文档向您展示高级特性，如<code class="fe ki kj kk kl b">and/or</code>过滤、分组条件、字段规则等等。</p><div class="nb nc gp gr nd ne"><a href="https://github.com/The-Devoyage/mongo-filter-generator" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd io gy z fp nj fr fs nk fu fw im bi translated">GitHub-The-devo yage/mongo-filter-generator:为 Mongoose 提供查找、过滤和分页插件</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">只需几行代码就可以轻松地在 API 中添加查找、过滤和分页功能。Mongo 过滤器生成器…</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">github.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns kx ne"/></div></div></a></div><p id="b2b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢支持，如果你认为这很酷，请点击明星，或者如果你发现有什么要补充的，请做出贡献。</p></div></div>    
</body>
</html>