<html>
<head>
<title>Three reasons why you need a Log Aggregation Architecture today</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么您现在需要日志聚合架构的三个原因</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/three-reasons-why-you-need-a-log-aggregation-architecture-today-e285d18bb1ef?source=collection_archive---------13-----------------------#2020-06-22">https://blog.devgenius.io/three-reasons-why-you-need-a-log-aggregation-architecture-today-e285d18bb1ef?source=collection_archive---------13-----------------------#2020-06-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="665f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">日志聚合不再是一种商品，而是基于容器的平台中的一个关键组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/85f7425e9198de2b1205bd0cbe4c639a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OpfQ4EjKmXsf_D-R"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">奥拉夫·阿伦斯·罗特内在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="ff59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">日志管理似乎不是一个很好的话题。不是你看到的题目说:“哦！太神奇了！这是我一生的梦想”。不，我知道这并不奇怪，但这并不意味着它比您的架构需要的其他功能更不重要。</p><p id="3c5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从一开始，我们就将日志文件作为唯一可信任的数据源，用于对您的应用程序进行故障排除，或者了解您的部署中出现了什么故障，或者与计算机相关的任何其他操作。</p><p id="bd4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">程序很简单:</p><ul class=""><li id="6bdd" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">发射“某物”</li><li id="23b3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">“有事”失败了。</li><li id="9be6" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">检查日志</li><li id="ab2d" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">改变一些东西</li><li id="d8d3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">重复</li></ul><p id="05f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们已经这样做了很久很久了。即使使用其他更健壮的错误处理和管理方法，如 Audit System，当我们需要获得关于错误的细粒度细节时，我们也会回到日志。在那里寻找堆栈跟踪，更多关于插入到审计系统中的错误的细节，或者更多的数据，而不仅仅是 REST API 提供的错误代码和描述。</p><p id="6ad4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">系统开始增长，架构变得更加复杂，但即使如此，我们还是一遍又一遍地用同样的方法结束。您知道 ELK stack 等日志聚合架构或 Splunk 等商业解决方案，甚至是 Loggly 等 SaaS 产品，但您只是认为它们不仅仅适合您。</p><p id="9ab1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">购买或设置它们的成本很高，而且您非常了解您的生态系统，直接进入一台机器并跟踪日志文件会更容易。也许你也有自己的脚本工具箱来完成这项工作，任何人都可以打开 Kibana，尝试在那里搜索实例 ID，以查看特定事务的错误。</p><p id="d90a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好吧，我需要告诉你一些事情:是时候改变了，我要向你解释为什么。</p><p id="21dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事物在不断变化，它和所有新范式都基于一些共同的基础:</p><ul class=""><li id="02b6" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">您将会有更多的组件与它的日志文件和数据隔离运行。</li><li id="f582" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">在您的生产环境中，部署将变得更加有规律，这意味着事情会变得更加不正常(以一种可控的方式，但是更加常见)</li><li id="0050" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">技术将会共存，所以日志在模式和布局方面将会非常不同，您需要为此做好准备。</li></ul><p id="1c99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，让我们来讨论这三个论点，我希望它们能让你以不同的方式思考日志管理架构和方法。</p><h1 id="db37" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">1.-您的方法无法扩展</h1><p id="7369" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">您的方法对于传统系统来说非常优秀。您管理多少台机器？30?50?100?你可以做得很好。现在想象一个典型企业基于容器的平台。我认为平均数量可能是 1000 个左右，仅仅是为了商业目的，不考虑架构或基本服务。你能准备好逐个容器地检查 1000 个日志流以了解错误吗？</p><p id="62ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">即使这是可能的，你会成为公司发展的瓶颈吗？您可以跟踪多少个容器日志？2000?正如我在开始时所说的，这不符合规模。</p><h1 id="50b1" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">2.-原木不会永远在那里</h1><p id="8885" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">现在，你读了第一个主题，可能你只是在对你用来阅读的屏幕说。加油！我已经知道日志不在那里，它们被旋转、丢失等等。</p><p id="1c9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是的，的确如此，这在云原生方法中甚至更加重要。对于基于容器的平台，日志是短暂的，而且，如果我们遵循 12 因素应用程序宣言，没有日志文件。所有日志跟踪都应该打印到标准输出中，就这样。</p><p id="c36e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">日志在哪里被删除？当容器失效时..哪些记录是你更需要的？失败的那些。</p><p id="d987" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，如果您不做任何事情，您最需要的日志跟踪将会丢失。</p><h1 id="22d3" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">3.-你需要能够预测事情何时会失败</h1><p id="b48f" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">但是日志不仅在出错时有效，而且足以检测出什么时候会出错，还可以预测什么时候会出错。你需要能够聚集这些数据，以便从中产生信息和见解。能够运行 ML 模型来检测事情是否如预期的那样进行，或者可能导致一些问题的不同情况是否正在发生。</p><h1 id="0f97" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">摘要</h1><p id="d11b" class="pw-post-body-paragraph kw kx iq ky b kz my jr lb lc mz ju le lf na lh li lj nb ll lm ln nc lp lq lr ij bi translated">我希望这些争论已经让您认识到，即使对于您的小型公司或者您的系统，您现在也需要能够建立一种日志聚合技术，而不是等待另一个可能为时已晚的时刻。</p></div></div>    
</body>
</html>