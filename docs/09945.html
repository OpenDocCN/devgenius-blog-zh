<html>
<head>
<title>Build Python web APIs using FastAPI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 FastAPI 构建 Python web APIs</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/build-python-web-apis-using-fastapi-7f1524139428?source=collection_archive---------1-----------------------#2022-09-25">https://blog.devgenius.io/build-python-web-apis-using-fastapi-7f1524139428?source=collection_archive---------1-----------------------#2022-09-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/5dfb1a5b3a6af3ec2754c49790681154.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UxjX2Lxko0N6GwthfYKRaA.png"/></div></div></figure><p id="ed18" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">应用程序编程接口是一个重要的组件，它使您的应用程序可以被广泛的用户访问。如今，创建 API 并不是一件困难的事情，然而，选择合适的框架却是一个挑战。</p><p id="77c2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Python 以其实现各种 AI、ML、DL 任务的能力而闻名。它有一些微框架，如 flask 和 Django，用于构建 web APIs。如今，开发人员正在转向一个更年轻的框架 FastAPI。</p><p id="ab54" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本节中，我们将学习 FastAPI 的基础知识。</p><h1 id="93aa" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">入门指南</h1><h2 id="5558" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">目录</h2><ul class=""><li id="7adc" class="md me in jx b jy mf kc mg kg mh kk mi ko mj ks mk ml mm mn bi translated"><a class="ae mo" href="#208e" rel="noopener ugc nofollow">什么是 FastAPI </a></li><li id="b5af" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#7b54" rel="noopener ugc nofollow">烧瓶 vs FastAPI </a></li><li id="a776" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#d6d2" rel="noopener ugc nofollow">立项</a></li><li id="2ebb" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#6adc" rel="noopener ugc nofollow"> FastAPI Hello World </a></li><li id="00d8" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#0d47" rel="noopener ugc nofollow">交互式 API 文档</a></li><li id="48bb" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#2be8" rel="noopener ugc nofollow">基本 FastAPI 构建模块</a></li><li id="65c2" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#84d9" rel="noopener ugc nofollow">路径参数</a></li><li id="14c5" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#3c32" rel="noopener ugc nofollow">查询参数</a></li><li id="a808" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#0a6b" rel="noopener ugc nofollow">请求体</a></li><li id="6c02" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#2c3c" rel="noopener ugc nofollow">数据转换</a></li><li id="1c70" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><a class="ae mo" href="#e3f5" rel="noopener ugc nofollow">数据验证</a></li></ul><h2 id="208e" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">什么是<a class="ae mo" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank"> FastAPI </a></h2><p id="707f" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">FastAPI 是一个现代的、高性能的、受 Python 3.7+版本支持的 web 框架。它于 2018 年作为基于标准 Python 类型提示的开源框架发布。它构建在异步服务器网关接口(ASGI) web 服务器 Uvicorn 上，Uvicorn 还安装了 web 服务器网关接口(WSGI)应用程序。</p><p id="3247" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">关键特性</strong></p><ul class=""><li id="3346" class="md me in jx b jy jz kc kd kg mx kk my ko mz ks mk ml mm mn bi translated"><strong class="jx io">高速</strong> — FastAPI 是一个高性能的 Python web 框架，因为 ASGI，它通过声明端点来支持并发和异步代码。</li><li id="0139" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><strong class="jx io">内置并发</strong> — FastAPI 消除了对事件循环或异步/等待管理的需求。然后可以使用 async def 将初始路径函数指定为协程，并等待特定的位置。</li><li id="86b9" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><strong class="jx io">依赖注入支持</strong> — FastAPI 支持依赖注入，这使得修改代码变得更加容易。它增加了代码的模块化和系统的可伸缩性。</li><li id="3762" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><strong class="jx io">内置文档</strong> — FastAPI 提供自动交互文档，简化前端工程师对后端的使用，并简化 API 端点测试。</li><li id="9e8e" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><strong class="jx io">内置验证</strong> — FastAPI 内置验证检测不正确的数据类型，并返回 JSON 中的底层推理。它使用 Pydantic 模块来简化验证。</li><li id="4889" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><strong class="jx io">基于标准的</strong> —基于 API 的开放标准:OpenAPI 和 JSON Schema。</li></ul><h2 id="7b54" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">烧瓶 vs FastAPI</h2><p id="9dc9" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">Flask 是一个微型 python web 框架，用于构建轻量级 web 应用程序。它基于 Werkzeug 工具包和 Jinja2 模板引擎，部署在 WSGI (Python Web 服务器网关接口)上。</p><p id="fad4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">FastAPI 是一个现代的高性能 web 框架，用于开发 Python 3.7+版本支持的 API。</p><p id="5de3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Flask 是一个古老流行的微型 web 框架，适合轻量级应用程序，而 FastAPI 是一个全栈框架，用于构建具有丰富文档和验证的解决方案。FastAPI 支持并发性，并使它比 flask 快得多。</p><blockquote class="na nb nc"><p id="bc92" class="jv jw nd jx b jy jz ka kb kc kd ke kf ne kh ki kj nf kl km kn ng kp kq kr ks ig bi translated"><strong class="jx io"> Flask 更适合具有几个 API 端点的简单微服务，而 FastAPI 在速度和性能方面更受青睐。</strong></p></blockquote><figure class="ni nj nk nl gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/2e0781cf8e1f6ca00cf99b0322e4150c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7u5FQi1QTzWIUxiyFIWZw.png"/></div></div></figure><h2 id="d6d2" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">设置项目</h2><p id="8b00" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">我们可以通过通常的 Python 项目设置步骤来设置 fastapi 项目。</p><ul class=""><li id="6ebc" class="md me in jx b jy jz kc kd kg mx kk my ko mz ks mk ml mm mn bi translated">为项目创建一个文件夹，并导航到该文件夹。</li></ul><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="1dc5" class="lr ku in nn b gy nr ns l nt nu">mkdir firstapp<br/>cd firstapp</span></pre><ul class=""><li id="2ced" class="md me in jx b jy jz kc kd kg mx kk my ko mz ks mk ml mm mn bi translated">创建一个虚拟环境并激活它。</li></ul><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="4f78" class="lr ku in nn b gy nr ns l nt nu">python -m venv venv<br/>venv/Scripts/activate</span></pre><ul class=""><li id="349f" class="md me in jx b jy jz kc kd kg mx kk my ko mz ks mk ml mm mn bi translated">安装 FastAPI 和 uvicorn，一个 ASGI 服务器:</li></ul><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="2439" class="lr ku in nn b gy nr ns l nt nu">pip install fastapi uvicorn</span></pre><figure class="ni nj nk nl gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nv"><img src="../Images/82e6e9827d03c9fa23d3ec946bf49516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Y3pTxSW2fT_-uUTl9dsXA.png"/></div></div></figure><h2 id="6adc" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">FastAPI Hello World</h2><p id="48f3" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">让我们尝试在 FastAPI 中创建传统的“Hello World”应用程序并运行。它将帮助您了解应用程序的初始设置。</p><ul class=""><li id="8379" class="md me in jx b jy jz kc kd kg mx kk my ko mz ks mk ml mm mn bi translated">创建一个文件<code class="fe nw nx ny nn b">main.py</code>，并向其中添加以下代码。</li></ul><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="a5d3" class="lr ku in nn b gy nr ns l nt nu">from fastapi import FastAPI</span><span id="1fda" class="lr ku in nn b gy nz ns l nt nu">app = FastAPI()</span><span id="a5df" class="lr ku in nn b gy nz ns l nt nu"><a class="ae mo" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.get("/")<br/>async def root():<br/>    return {"message": "Hello World"}</span></pre><p id="d41f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">理解代码:</strong></p><ul class=""><li id="d1b9" class="md me in jx b jy jz kc kd kg mx kk my ko mz ks mk ml mm mn bi translated">从 fastapi 包导入<code class="fe nw nx ny nn b">FastAPI</code></li><li id="4d67" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated">创建一个 FastAPI()的实例，并将其赋给<code class="fe nw nx ny nn b">app</code>变量</li><li id="30d5" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><code class="fe nw nx ny nn b">@app.get(“/”)</code>用于在用户请求<code class="fe nw nx ny nn b">/</code>路径时执行以下方法</li><li id="eefd" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><code class="fe nw nx ny nn b">async def root():</code>作为 python 协程运行<code class="fe nw nx ny nn b">root()</code>方法</li><li id="154b" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><code class="fe nw nx ny nn b">return {“message”: “Hello World”}</code>发送到前端</li></ul><h2 id="9c6a" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated"><strong class="ak">运行 app </strong></h2><ul class=""><li id="0718" class="md me in jx b jy mf kc mg kg mh kk mi ko mj ks mk ml mm mn bi translated">执行以下命令来运行应用程序</li></ul><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="38be" class="lr ku in nn b gy nr ns l nt nu">uvicorn main:app --reload</span></pre><p id="9e49" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">命令<code class="fe nw nx ny nn b">uvicorn main:app</code>是指:</p><ul class=""><li id="2706" class="md me in jx b jy jz kc kd kg mx kk my ko mz ks mk ml mm mn bi translated"><code class="fe nw nx ny nn b">main</code>:文件<code class="fe nw nx ny nn b">main.py</code></li><li id="3780" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><code class="fe nw nx ny nn b">app</code>:用线<code class="fe nw nx ny nn b">app = FastAPI()</code>创建的对象</li><li id="b3a0" class="md me in jx b jy mp kc mq kg mr kk ms ko mt ks mk ml mm mn bi translated"><code class="fe nw nx ny nn b">--reload</code>:修改代码后重启服务器</li></ul><p id="653d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果应用程序启动并运行，您将在控制台中获得一个 URL。在 web 浏览器中打开 URL 以查看 API 响应。</p><div class="ni nj nk nl gt ab cb"><figure class="oa jo ob oc od oe of paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/5f6b9afcc9b9112004b77dd4e6e5f66f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*cIKVcQSDuRRXXoneh3YqYQ.png"/></div></figure><figure class="oa jo og oc od oe of paragraph-image"><img src="../Images/97224f7ca09741b7650a6fc91155c786.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*KF2k8raVO9PtyxmX-xOH5A.png"/></figure></div><h2 id="0d47" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">交互式 API 文档</h2><p id="116d" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">FastAPI 自动为您的项目生成完全交互式的 API 文档。你可以在浏览器中点击网址<a class="ae mo" href="http://127.0.0.1:8000/docs" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/docs</a>来查看。</p><figure class="ni nj nk nl gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oh"><img src="../Images/282864ab913e09c354ae961d07bf9846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1NEDmpVe3UPEK-s3lrGw5Q.png"/></div></div></figure><p id="f98f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">可以使用<code class="fe nw nx ny nn b">redoc</code>查阅文档(打开网址<a class="ae mo" href="http://127.0.0.1:8000/redoc" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/redoc</a>)。</p><figure class="ni nj nk nl gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oi"><img src="../Images/f2654c361aaae6d9aa62b56ba233a8b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nvX6eEINA9R7kR_Fbets2A.png"/></div></div></figure><h2 id="2be8" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">基本 FastAPI 构建块</h2><p id="1352" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">让我们探索一下 FastAPI 的一些构件，比如路径参数、查询参数和请求体。</p><h2 id="84d9" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">路径参数</h2><p id="f4a3" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">路径参数包含在花括号<code class="fe nw nx ny nn b">{}</code>中，这有助于将 API 调用的范围缩小到单个资源。</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="a472" class="lr ku in nn b gy nr ns l nt nu">from fastapi import FastAPI</span><span id="f0dd" class="lr ku in nn b gy nz ns l nt nu">app = FastAPI()</span><span id="fa2f" class="lr ku in nn b gy nz ns l nt nu"><a class="ae mo" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.get("/user/{name}")<br/>async def read_name(name):<br/>    return {"user name": name}</span></pre><p id="e53f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">路径参数<code class="fe nw nx ny nn b">name</code>的值将作为参数<code class="fe nw nx ny nn b">name</code>传递给函数<code class="fe nw nx ny nn b">read_name()</code>。</p><figure class="ni nj nk nl gt jo gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/f07bb040551ac5be987f64f76c620a89.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*gkLEWjTkInjwZS41NtW3ow.png"/></div></figure><h2 id="3c32" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">查询参数</h2><p id="5b28" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">不属于路径参数的函数参数会被自动解释为查询参数。它们以 URL 字符串中的问号<code class="fe nw nx ny nn b">?</code>开始。</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="1585" class="lr ku in nn b gy nr ns l nt nu">from fastapi import FastAPI<br/>import random</span><span id="be12" class="lr ku in nn b gy nz ns l nt nu">app = FastAPI()</span><span id="0f4a" class="lr ku in nn b gy nz ns l nt nu"><a class="ae mo" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.get("/user/")<br/>async def create_user_id(start: int, end: int):<br/>    return {"user id": random.randint(start,end)}</span></pre><p id="85bb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该查询是 URL 中问号<code class="fe nw nx ny nn b">?</code>后面的一组键-值对，由一个&amp;符号<code class="fe nw nx ny nn b">&amp;</code>分隔。打开网址<a class="ae mo" href="http://127.0.0.1:8000/user/?start=1&amp;end=10" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/user/？start=1 &amp; end=10 </a>查看结果。</p><figure class="ni nj nk nl gt jo gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/6593d8502e9fbbfe757fa58bc8a7bd46.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*3MZUpaWKamHvpqezXcGPdg.png"/></div></figure><h2 id="0a6b" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">请求正文</h2><p id="b6e1" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">我们还可以在请求体中向服务器发送数据。使用<code class="fe nw nx ny nn b">Pydantic</code>模型来格式化我们从请求主体接收的数据。</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="7e46" class="lr ku in nn b gy nr ns l nt nu">from fastapi import FastAPI<br/>from typing import Optional<br/>from pydantic import BaseModel</span><span id="f9c7" class="lr ku in nn b gy nz ns l nt nu">class User(BaseModel):<br/>    name: str<br/>    age: Optional[int] = None<br/>    gender: str<br/>    phone: Optional[str] = None</span><span id="5ea5" class="lr ku in nn b gy nz ns l nt nu">app = FastAPI()</span><span id="db61" class="lr ku in nn b gy nz ns l nt nu"><a class="ae mo" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.post("/user/")<br/>async def create_user(user: User):<br/>    return user</span></pre><p id="bbc9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以使用 FastAPI 文档试用选项检查用户发布 API ( <code class="fe nw nx ny nn b">“/user”</code>)。为此，打开网址<a class="ae mo" href="http://127.0.0.1:8000/docs" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/docs</a>。选择创建用户发布 API，然后单击试用按钮。在请求正文中提供用户信息，然后点击执行按钮。如果请求成功，您可以在响应正文中看到响应。</p><p id="7e83" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，您可以使用 postman 尝试 post API。</p><div class="ni nj nk nl gt ab cb"><figure class="oa jo ol oc od oe of paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/e79b863f1e84f18c3508bed6dc55ddc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*djb6QgbZDfsmR7BzdBQJ2A.png"/></div></figure><figure class="oa jo om oc od oe of paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/b608af6e89f315e8ada9e64431be3182.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*3Xxm3qlCWe5yAPhNCT3z0w.png"/></div></figure><figure class="oa jo on oc od oe of paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/bf93f67d188c3d20aff2ae875603e7df.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*KPoB7XCvgODaOLJSAzrQ9g.png"/></div></figure></div><h2 id="2c3c" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">数据变换</h2><p id="b486" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">声明路径参数的类型将为错误检查、数据转换等提供支持。如果您提到参数的类型，FastAPI 会自动解析请求。</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="6b70" class="lr ku in nn b gy nr ns l nt nu">from fastapi import FastAPI</span><span id="ef71" class="lr ku in nn b gy nz ns l nt nu">app = FastAPI()</span><span id="279c" class="lr ku in nn b gy nz ns l nt nu"><a class="ae mo" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.get("/user/id/{id}")<br/>async def read_name(id: int):<br/>    return {"user id": id}</span></pre><figure class="ni nj nk nl gt jo gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/1c68c3c7492ecff54f9a7cdaf2b22856.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*KLIxzqkNjmcWHlmzVVIaGg.png"/></div></figure><p id="1d36" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意，返回值是<code class="fe nw nx ny nn b">5</code>，是<code class="fe nw nx ny nn b">int</code>而不是字符串<code class="fe nw nx ny nn b">"5"</code>。</p><h2 id="e3f5" class="lr ku in bd kv ls lt dn kz lu lv dp ld kg lw lx lh kk ly lz ll ko ma mb lp mc bi translated">数据有效性</h2><p id="a2e9" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mu ki kj kk mv km kn ko mw kq kr ks ig bi translated">FastAPI 还为您提供内置的数据验证支持，并在发生任何验证错误时向您提供错误消息。</p><pre class="ni nj nk nl gt nm nn no np aw nq bi"><span id="706f" class="lr ku in nn b gy nr ns l nt nu">from fastapi import FastAPI</span><span id="21c9" class="lr ku in nn b gy nz ns l nt nu">app = FastAPI()</span><span id="66fa" class="lr ku in nn b gy nz ns l nt nu"><a class="ae mo" href="http://twitter.com/app" rel="noopener ugc nofollow" target="_blank">@app</a>.get("/user/id/{id}")<br/>async def read_name(id: int):<br/>    return {"user id": id}</span></pre><p id="be9b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你点击了 URL<a class="ae mo" href="http://127.0.0.1:8000/user/id/foo" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:8000/user/id/foo</a>，那么你会得到一个错误消息<code class="fe nw nx ny nn b">“value is not a valid integer”</code>，由于类型不匹配。</p><figure class="ni nj nk nl gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi op"><img src="../Images/fbb10104bf32e8a60c380025a2dbd203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V7Tvlb0-Ox24UgLJVXUJbQ.png"/></div></div></figure><p id="95d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢阅读这篇文章。</p><p id="7b6b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢<a class="ae mo" href="https://www.linkedin.com/in/gowri-m-bhatt-85b31814b/" rel="noopener ugc nofollow" target="_blank"> Gowri M Bhatt </a>审阅内容。</p><p id="d2c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢这篇文章，请点击拍手按钮👏并且分享出来帮别人找！</p><p id="0e34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这篇文章也可以在<a class="ae mo" href="https://dev.to/codemaker2015/build-python-web-apis-using-fastapi-4gba" rel="noopener ugc nofollow" target="_blank"> Dev </a>上找到。</p><p id="d0e2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本教程的完整源代码可以在这里找到，</p><div class="oq or gp gr os ot"><a href="https://github.com/codemaker2015/fastapi-examples" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd io gy z fp oy fr fs oz fu fw im bi translated">GitHub-codemaker 2015/fastapi-示例:两个 fast API 示例项目</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">两个 fastapi 示例项目。通过在…上创建帐户，为 codemaker2015/fastapi-examples 开发做出贡献</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">github.com</p></div></div><div class="pc l"><div class="pd l pe pf pg pc ph jt ot"/></div></div></a></div><p id="feff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有用的链接，</p><div class="oq or gp gr os ot"><a href="https://fastapi.tiangolo.com/" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd io gy z fp oy fr fs oz fu fw im bi translated">FastAPI</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">FastAPI 框架，高性能，简单易学，快速编码，准备生产文档…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">fastapi.tiangolo.com</p></div></div><div class="pc l"><div class="pi l pe pf pg pc ph jt ot"/></div></div></a></div><div class="oq or gp gr os ot"><a href="https://github.com/ChristopherGS/ultimate-fastapi-tutorial" rel="noopener  ugc nofollow" target="_blank"><div class="ou ab fo"><div class="ov ab ow cl cj ox"><h2 class="bd io gy z fp oy fr fs oz fu fw im bi translated">GitHub-Christopher GS/Ultimate-fastapi-Tutorial:终极 FastAPI 教程</h2><div class="pa l"><h3 class="bd b gy z fp oy fr fs oz fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="pb l"><p class="bd b dl z fp oy fr fs oz fu fw dk translated">github.com</p></div></div><div class="pc l"><div class="pj l pe pf pg pc ph jt ot"/></div></div></a></div></div></div>    
</body>
</html>