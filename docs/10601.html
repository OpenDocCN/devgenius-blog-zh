<html>
<head>
<title>Setting up Redux Tool Kit (RTK), Redux and Redux-Persist for React.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为 React 设置 Redux 工具包(RTK)、Redux 和 Redux-Persist。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/setting-up-redux-tool-kit-rtk-redux-and-redux-persist-for-react-f56d35808240?source=collection_archive---------1-----------------------#2022-11-15">https://blog.devgenius.io/setting-up-redux-tool-kit-rtk-redux-and-redux-persist-for-react-f56d35808240?source=collection_archive---------1-----------------------#2022-11-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/effe18b3ffd47e5736412e0e7737d718.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CLBjfVfrVoz-7yOyvtCoUw.png"/></div></div></figure><p id="f258" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用 Redux 总是有很多工作要做，特别是因为你有很多样板代码要写。不再是因为<a class="ae kt" href="https://redux-toolkit.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux Toolkit </a> (RTK)。您可以在官方文档中阅读所有相关内容，但重点是 Redux 工具包提供了<strong class="jx io"> <em class="ku">“抽象设置过程和处理最常见用例的工具，以及一些有用的实用程序，让用户简化他们的应用程序代码”。</em>T12】</strong></p><p id="9518" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这曾经是我在 RTK 之前 Redux 的文件夹结构。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8fad8e62712de21de4d17179e06b92ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-CkEVwJSRcU-nkK4f6Ga6Q.png"/></div></div></figure><p id="0a4e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我正在使用的新结构。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kz"><img src="../Images/9b1bcce1d1362b953a743390ae731f90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XBSBwdeQb5fA5bTrPhdQQg.png"/></div></div></figure><p id="a1a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如您在这里看到的，APIs 文件夹的行为与前面的一样，但是我们不再有两个用于操作和缩减器的文件夹。当然我们仍然可以使用它们，但是有一种更方便的方法叫做 Redux“切片”。</p><p id="54ad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以我们能做的是，不去定义各种动作创建者和缩减者，而是创建使用 Redux 切片的特定“特性”。</p><p id="6071" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的代码中，我有一个“<strong class="jx io">用户”</strong>特性，它有一个名为“<strong class="jx io"> authSlice.js </strong>的 Redux 片</p><h2 id="0495" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">authSlice.js</h2><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="bc1f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如你所见，我们可以使用 RTK 的<code class="fe lv lw lx ly b">createSlice</code>方法在同一个<strong class="jx io">片</strong>中为一个特征定义动作和减速器。</p><h2 id="2fd2" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">索引. js</h2><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="38ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<strong class="jx io">特征文件夹</strong>的根目录下的 index.js 文件中，让我们合并减速器并将其导出为根减速器。</p><h2 id="c19b" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">配置商店. js</h2><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="200e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是我们在为<code class="fe lv lw lx ly b">redux-persist</code>设置持久化缩减器时使用 RTK 中的<code class="fe lv lw lx ly b">configureStore</code>的地方。第 26 行是我不得不四处搜索并做的事情，以得到一些讨厌的警告:)。然后像往常一样返回<code class="fe lv lw lx ly b">store</code>和<code class="fe lv lw lx ly b">persistor</code>，这样我们就可以在项目中使用它。</p><h2 id="05b5" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">使用存储和持久化器。</h2><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="lt lu l"/></div></figure><h2 id="dfb5" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">在操作中添加异步逻辑</h2><p id="5b08" class="pw-post-body-paragraph jv jw in jx b jy lz ka kb kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks ig bi translated">使用 RTK，这也很简单。为此，我们可以使用<code class="fe lv lw lx ly b">createAsyncThunk</code>方法。作为一个例子，让我转换“authSlice.js”文件中的<code class="fe lv lw lx ly b">saveProfile</code>动作，使其包含异步逻辑。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="lt lu l"/></div></figure><h2 id="dac6" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">结论</h2><p id="f888" class="pw-post-body-paragraph jv jw in jx b jy lz ka kb kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks ig bi translated">伙计们，差不多就是这样。现在，我写这篇短文的原因是，当我从传统的 Redux 方法切换到这个方法时，我得到了一些令人讨厌的错误和警告。因为我已经搜索了这些错误/警告并修复了它们，这可以作为一个小样本，希望能节省你一些时间…干杯。😄</p><p id="f42f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由，<strong class="jx io"> <em class="ku">鹤山</em> </strong></p></div></div>    
</body>
</html>