<html>
<head>
<title>Swift | Stored and Lazy Properties</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift |存储和惰性属性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/swift-stored-and-lazy-properties-40e6d2fcc4b9?source=collection_archive---------18-----------------------#2022-02-07">https://blog.devgenius.io/swift-stored-and-lazy-properties-40e6d2fcc4b9?source=collection_archive---------18-----------------------#2022-02-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8917" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">属性第 1 部分</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d538f74bba598c109523e9b80d4fb3d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rd4slOSe2Fo8agUJ_WmXLw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated"><a class="ae ks" href="https://unsplash.com/@ubahnverleih?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> C M </a>在<a class="ae ks" href="https://unsplash.com/s/photos/collect?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="5330" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">存储属性是存储与类或结构的实例关联的值的基本属性。</p><ul class=""><li id="e54f" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">var →变量存储属性</li><li id="0bb0" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">let →常量存储属性</li></ul><h1 id="81c9" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">可以指定默认值和初始值。</h1><h2 id="6568" class="mv me in bd mf mw mx dn mj my mz dp mn lc na nb mp lg nc nd mr lk ne nf mt ng bi translated">结构</h2><blockquote class="nh ni nj"><p id="b374" class="kt ku nk kv b kw kx jo ky kz la jr lb nl ld le lf nm lh li lj nn ll lm ln lo ig bi translated">即使存储的属性不是可选的，也自动创建初始值设定项</p></blockquote><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="0953" class="mv me in np b gy nt nu l nv nw">struct Person{<br/>    var age: Int = 13 // stored property<br/>    let name: String // stored property<br/>}</span><span id="c2e0" class="mv me in np b gy nx nu l nv nw">let person1 : Person = Person(age:21, name: "Elizabeth") </span></pre><h2 id="2943" class="mv me in bd mf mw mx dn mj my mz dp mn lc na nb mp lg nc nd mr lk ne nf mt ng bi translated">班级</h2><blockquote class="nh ni nj"><p id="a474" class="kt ku nk kv b kw kx jo ky kz la jr lb nl ld le lf nm lh li lj nn ll lm ln lo ig bi translated">如果不是可选的，你必须指定一个默认值或者通过初始化器初始化它</p></blockquote><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="6a76" class="mv me in np b gy nt nu l nv nw">class Person{<br/>    var age: Int  = 13 // variable stored property <br/>    let name: String //constant stored property <br/>    <br/>    init(age:Int, name:String){<br/>         self.age = age <br/>         self.name = name <br/>    }</span><span id="16a2" class="mv me in np b gy nx nu l nv nw">}</span><span id="516f" class="mv me in np b gy nx nu l nv nw">let person2 : Person = Person(age:21, name: "Elizabeth")</span></pre><p id="d01a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面的结构自动提供了一个默认的初始化器，但是类需要指定一个用户定义的初始化器或者设置一个初始值。如果您指定了类的存储属性的初始值，就没有必要实现上面的自定义初始化器。</p><h1 id="e396" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">更复杂的例子</h1><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="bf50" class="mv me in np b gy nt nu l nv nw">struct Mammal{<br/>    var name:String  = "John"<br/>    var age: Int  = 15<br/>}</span><span id="743d" class="mv me in np b gy nx nu l nv nw">class Person{<br/>    var mammal:Mammal = Mammal()<br/>    var occupation:String = "Student"<br/>}</span><span id="500f" class="mv me in np b gy nx nu l nv nw">let person1:Person = Person()<br/>person1.occupation = "Barista"<br/>person1.mammal = Mammal(name:"Joshua", age: 21)</span><span id="fcf7" class="mv me in np b gy nx nu l nv nw">print("name:\(person1.mammal.name), age:\(person1.mammal.age), occupation: \(person1.occupation)")</span></pre><p id="a966" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">输出如下所示</p><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="ed4d" class="mv me in np b gy nt nu l nv nw">name:Joshua, age:21, occupation: Barista</span></pre><h1 id="6016" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">惰性存储属性</h1><p id="46e0" class="pw-post-body-paragraph kt ku in kv b kw ny jo ky kz nz jr lb lc oa le lf lg ob li lj lk oc lm ln lo ig bi translated">如果在创建实例时没有属性值，可以将存储的属性声明为可选的。延迟存储属性是在需要时赋值的属性，<strong class="kv io">只能在调用后初始化该值。</strong></p><p id="a6a5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请注意，它只能用在变量之后。常量与在需要时赋值的惰性存储属性不兼容，因为它们必须在实例完全创建之前进行初始化。</p><p id="c9ba" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用惰性属性有助于清理不必要的性能或空间浪费。</p><p id="a51e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">懒惰的财产规则</p><ol class=""><li id="bdfb" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo od lv lw lx bi translated">惰性属性必须与变量一起使用。默认情况下，声明为 lazy 的变量不能用 let 声明，因为一个值最初并不存在，后来才被创建。</li><li id="7db3" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo od lv lw lx bi translated">默认情况下，lazy 只能用于结构和类</li><li id="0dd2" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo od lv lw lx bi translated">不能与计算属性一起使用</li></ol><p id="d7cc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用可选</p><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="c3bf" class="mv me in np b gy nt nu l nv nw">struct Mammal{<br/>    var name:String<br/>    var age: Int<br/>}</span><span id="6654" class="mv me in np b gy nx nu l nv nw">class Person{<br/>    var mammal:Mammal?<br/>    var occupation:String = "Student"<br/>}</span><span id="7d4a" class="mv me in np b gy nx nu l nv nw">let person1:Person = Person()<br/>person1.occupation = "Barista"</span><span id="1997" class="mv me in np b gy nx nu l nv nw">//There is no mammal property when creating instance <br/>print("occupation: \(person1.occupation)")</span><span id="7bbb" class="mv me in np b gy nx nu l nv nw">//Mammal property created<br/>person1.mammal = Mammal(name: "Joshua", age: 21)</span><span id="3930" class="mv me in np b gy nx nu l nv nw">print("name:\(person1.mammal!.name), age:\(person1.mammal!.age)")</span></pre><p id="765b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用惰性属性</p><pre class="kd ke kf kg gt no np nq nr aw ns bi"><span id="b24e" class="mv me in np b gy nt nu l nv nw">struct Mammal{<br/>    var name:String<br/>    var age: Int<br/>}</span><span id="09d6" class="mv me in np b gy nx nu l nv nw">class Person{<br/>    lazy var mammal = Mammal(name:"new Name",age:100)<br/>    var occupation:String = "Student"<br/>}</span><span id="95c2" class="mv me in np b gy nx nu l nv nw">let person1:Person = Person()<br/>person1.occupation = "Barista"</span><span id="e300" class="mv me in np b gy nx nu l nv nw">//There is no mammal property when creating instance <br/>print("occupation: \(person1.occupation)")</span><span id="56ca" class="mv me in np b gy nx nu l nv nw">//Lazy property mammal is now initialized. <br/>print(person1.mammal.name)<br/>print(person1.mammal.age)</span></pre></div><div class="ab cl oe of hr og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ig ih ii ij ik"><p id="921a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就是懒惰和存储属性的全部内容。有 3 个关键词你需要从这个博客中带走</p><ul class=""><li id="543d" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">var →变量存储属性</li><li id="cacc" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">let →常量存储属性</li><li id="0b6c" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">惰性→惰性存储属性</li></ul><p id="52c3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢您的阅读！如果有任何问题，请告诉我！</p></div></div>    
</body>
</html>