<html>
<head>
<title>Deploying Node.js to Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将 Node.js 部署到 Heroku</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploying-node-js-to-heroku-2ebe4c6bd946?source=collection_archive---------10-----------------------#2022-04-14">https://blog.devgenius.io/deploying-node-js-to-heroku-2ebe4c6bd946?source=collection_archive---------10-----------------------#2022-04-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/148966ec8710fe4d33422f2caf570233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFOhE-zM_rzo1MKAjXAEFQ.png"/></div></div></figure><div class=""/><p id="3c17" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个简短的故事中，我们将快速浏览一个简单的 Node.js 项目，具体来说，是一个 express 服务器，展示几个端点并将其部署到 Heroku。</p><p id="ea1d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们开始之前，看看下面的先决条件</p><h1 id="e0aa" class="kt ku iy bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">先决条件</h1><ul class=""><li id="ecf0" class="lr ls iy jx b jy lt kc lu kg lv kk lw ko lx ks ly lz ma mb bi translated">这不是一个扫兴的人。你需要在 Heroku 上有一个经过验证的账户。无需添加类似 CC 的支付方式。虽然那会给你每个月额外的空闲时间，但这完全取决于你<br/>这是到 https://signup.heroku.com/<a class="ae mc" href="https://signup.heroku.com/" rel="noopener ugc nofollow" target="_blank">Heroku 的链接</a></li><li id="b8ce" class="lr ls iy jx b jy md kc me kg mf kk mg ko mh ks ly lz ma mb bi translated">安装了流行的 Git(流行的 VCS 工具)<br/><a class="ae mc" href="https://git-scm.com/downloads" rel="noopener ugc nofollow" target="_blank">https://git-scm.com/downloads</a></li><li id="36b8" class="lr ls iy jx b jy md kc me kg mf kk mg ko mh ks ly lz ma mb bi translated">接下来是 Heroku CLI 工具，它将在这里找到<br/><a class="ae mc" href="https://devcenter.heroku.com/articles/heroku-cli#install-the-heroku-cli" rel="noopener ugc nofollow" target="_blank">https://dev center . Heroku . com/articles/Heroku-CLI # install-the-Heroku-CLI</a></li><li id="b2ae" class="lr ls iy jx b jy md kc me kg mf kk mg ko mh ks ly lz ma mb bi translated">最后，从这里安装<strong class="jx iz"> node.js </strong>，这个大男孩(我们为本文选择的框架)<br/><a class="ae mc" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">https://nodejs.org/en/download/</a></li></ul><blockquote class="mi mj mk"><p id="dca4" class="jv jw ml jx b jy jz ka kb kc kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ks ig bi translated">确保安装 Node.js 的<strong class="jx iz"> LTS </strong>版本，以获得最大兼容性。在撰写本文时，我使用的是 v16.14.0</p></blockquote><h1 id="a0a3" class="kt ku iy bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">服务器设置</h1><h2 id="46b8" class="mp ku iy bd kv mq mr dn kz ms mt dp ld kg mu mv lh kk mw mx ll ko my mz lp na bi translated">创建新项目</h2><p id="93e9" class="pw-post-body-paragraph jv jw iy jx b jy lt ka kb kc lu ke kf kg nb ki kj kk nc km kn ko nd kq kr ks ig bi translated">好了，让我们打开你最喜欢的代码编辑器(Visual studio 代码)</p><p id="cae0" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开指向项目根目录的终端，创建一个新的节点项目</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="f4bb" class="mp ku iy nj b gy nn no l np nq">npm init</span></pre><p id="56ce" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将在命令提示符下打开一个表单。只要继续按下一步或填写你认为合适的值(大多与项目名称，关键字等有关。这是一个示例屏幕</p><figure class="ne nf ng nh gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi nr"><img src="../Images/4eac7bd9bc265daf24389145de9f8b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p9JcmIoOHtMgIdbfjsxKQQ.png"/></div></div></figure><p id="e134" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成了吗？太好了！让我们进入下一步</p><h2 id="066b" class="mp ku iy bd kv mq mr dn kz ms mt dp ld kg mu mv lh kk mw mx ll ko my mz lp na bi translated">设置 Git</h2><p id="1b5e" class="pw-post-body-paragraph jv jw iy jx b jy lt ka kb kc lu ke kf kg nb ki kj kk nc km kn ko nd kq kr ks ig bi translated">对于 Heroku 部署，我们需要将项目设置为 git 存储库。只需在项目的根目录中键入以下命令</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="acfd" class="mp ku iy nj b gy nn no l np nq">git init     // Setup up a new Git Repository<br/>git add .    // Add already existing filed for Tracking changes<br/>git stage .  // Add tracked files to the staging area<br/>git commit -m "INITIAL COMMIT"  <br/>// Commit all the changes in the staged area with a message</span></pre><p id="f49b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们有了一个 Node.js 项目，它被设置为 git 存储库，并提交了初始更改</p><h2 id="d320" class="mp ku iy bd kv mq mr dn kz ms mt dp ld kg mu mv lh kk mw mx ll ko my mz lp na bi translated">添加依赖关系</h2><p id="0023" class="pw-post-body-paragraph jv jw iy jx b jy lt ka kb kc lu ke kf kg nb ki kj kk nc km kn ko nd kq kr ks ig bi translated">因为我们应该在我们的项目中使用 Express 构建一个 web 服务器，所以我们需要添加相关的包依赖项。现在我们只需要快递包裹。使用 NPM(节点程序包管理器)添加程序包</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="97eb" class="mp ku iy nj b gy nn no l np nq">npm i --save express</span></pre><p id="4590" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于典型的 Node.js 项目，我们对通过 git 跟踪存储在<strong class="jx iz"> node_modules </strong>中的包不感兴趣。所以我们会告诉 git 忽略一些这样的文件和文件夹。这里有一个完全成熟的<strong class="jx iz">。gitignore </strong>文件，它可以很好地设置您可以创建的所有节点项目</p><figure class="ne nf ng nh gt ip"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="f62c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">太多了？？？嗯，这个项目用比较简单的版本。给<strong class="jx iz">加上下面一行。gitignore </strong></p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="d6b6" class="mp ku iy nj b gy nn no l np nq">node_modules</span></pre><h2 id="84d9" class="mp ku iy bd kv mq mr dn kz ms mt dp ld kg mu mv lh kk mw mx ll ko my mz lp na bi translated">编码吧</h2><p id="47e7" class="pw-post-body-paragraph jv jw iy jx b jy lt ka kb kc lu ke kf kg nb ki kj kk nc km kn ko nd kq kr ks ig bi translated">这里有一个简单的服务器代码，您可以参考它快速启动</p><figure class="ne nf ng nh gt ip"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="3e91" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">确实很简单！！！。只需从根目录点击<code class="fe nu nv nw nj b">node app.js</code>,您就可以让您的服务器在端口 80 上本地运行</p><p id="a954" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意第 3 行<br/> Heroku 分配了一个动态端口来运行您的应用程序。通常存储在环境变量<strong class="jx iz">端口</strong>中。因此，请确保表达式如代码片段所示</p><p id="79b2" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是一个简单的入门项目。现在让我们转到实际部署</p><h1 id="4c1f" class="kt ku iy bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">部署到 Heroku</h1><h2 id="6bc5" class="mp ku iy bd kv mq mr dn kz ms mt dp ld kg mu mv lh kk mw mx ll ko my mz lp na bi translated">登录 Heroku CLI</h2><p id="413e" class="pw-post-body-paragraph jv jw iy jx b jy lt ka kb kc lu ke kf kg nb ki kj kk nc km kn ko nd kq kr ks ig bi translated">首先要做的是用我们的 Heroku 凭证认证 CLI 工具。打开终端，输入以下命令</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="99df" class="mp ku iy nj b gy nn no l np nq">heroku login</span></pre><p id="eba5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将打开一个新的浏览器标签，你会看到 Heroku 登录页面。完成该过程并返回到项目根目录。</p><h2 id="53e5" class="mp ku iy bd kv mq mr dn kz ms mt dp ld kg mu mv lh kk mw mx ll ko my mz lp na bi translated">新 Heroku 应用程序</h2><p id="d063" class="pw-post-body-paragraph jv jw iy jx b jy lt ka kb kc lu ke kf kg nb ki kj kk nc km kn ko nd kq kr ks ig bi translated">Heroku 的部署以<strong class="jx iz">应用</strong>的形式管理。我们第一次部署某个东西的时候，Heroku 会为它创建一个 app，后续的部署，app 版本会递增。让我们先创建一个应用程序</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="bcb2" class="mp ku iy nj b gy nn no l np nq">heroku apps:create &lt;app-name&gt;</span></pre><p id="3645" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将创建一个以你选择的名字命名的 Heroku 应用程序(考虑到它是可用的)。这样做的目的是在 Heroku 的域下创建一个空的远程 Git 存储库，它将作为远程库添加到我们的本地项目中。我们将把我们的更改推送到远程分支，以创建新的部署。所以我们就这么做吧。</p><h2 id="124b" class="mp ku iy bd kv mq mr dn kz ms mt dp ld kg mu mv lh kk mw mx ll ko my mz lp na bi translated">部署到 Heroku</h2><p id="be9b" class="pw-post-body-paragraph jv jw iy jx b jy lt ka kb kc lu ke kf kg nb ki kj kk nc km kn ko nd kq kr ks ig bi translated">配置了本地 Git 并创建了一个新的 Heroku 应用程序后，我们需要做的就是将本地更改推送到 Heroku 的远程存储库。下面是相同的命令</p><pre class="ne nf ng nh gt ni nj nk nl aw nm bi"><span id="1c92" class="mp ku iy nj b gy nn no l np nq">git push heroku master</span></pre><p id="e158" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">瞧！！！！</p><p id="b9e3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果一切顺利，你会得到一个指向 Heroku 应用的 URL，这是你在互联网上的服务器代码。享受你在赫罗库🥂的第一次部署</p><blockquote class="mi mj mk"><p id="91c7" class="jv jw ml jx b jy jz ka kb kc kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ks ig bi translated">注意:对于免费部署，Heroku 会让你的应用程序休眠 15 分钟。下一个电话可能需要比通常更长的时间来给你回应，因为应用程序实际上是从睡眠状态中醒来的(冷启动)。<br/>不要担心，因为后续请求会非常快</p></blockquote><h1 id="38bb" class="kt ku iy bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">最后…..</h1><p id="732c" class="pw-post-body-paragraph jv jw iy jx b jy lt ka kb kc lu ke kf kg nb ki kj kk nc km kn ko nd kq kr ks ig bi translated">这就是本教程的全部内容。我希望你部署成功。请继续关注 Code Panthers，获取更多类似的袖珍教程和关于所有编程和云的详细系列。</p><p id="82c9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">谢谢！！！</strong></p><figure class="ne nf ng nh gt ip gh gi paragraph-image"><a href="https://www.buymeacoffee.com/fardeen9983"><div class="gh gi nx"><img src="../Images/802454acdeaf403cf283fca52b1d0f22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ca5H_LEso-0c7GG4bsssBA.png"/></div></a></figure></div></div>    
</body>
</html>