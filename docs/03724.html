<html>
<head>
<title>Gantt Charts in Python with Plotly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 Python 和 Plotly 制作甘特图</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/gantt-charts-in-python-with-plotly-e7213f932f1e?source=collection_archive---------0-----------------------#2020-12-08">https://blog.devgenius.io/gantt-charts-in-python-with-plotly-e7213f932f1e?source=collection_archive---------0-----------------------#2020-12-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ca13b7d2aa5aa8e1654308cff014718f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0QsE-jecR1hNiT6Kg7d5aA.png"/></div></div></figure><h1 id="1702" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">目标</h1><p id="a22b" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我不会给你上甘特图的课。创建它们是为了显示较大计划的单个任务/项目的进展。</p><p id="0bbb" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">由于这真的不是一个令人印象深刻的图表，人们可能不会从中获得太多，我张贴这个的唯一原因是因为许多这些神秘的数字参数相当模糊；很难找到关于其中一些的信息——没有太多的例子。把这个放到网上，因为我想这将会节省一些人在试图修改诸如刻度大小或 xaxis 标签格式时的时间/麻烦。</p><p id="842c" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><em class="ma">*提示季度格式不容易找到。基本上就是个黑。</em></p><h1 id="525d" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">密码</h1><p id="7d16" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">*完整代码在我的<a class="ae mb" href="https://github.com/maxwellbade/plotly_gantt_chart" rel="noopener ugc nofollow" target="_blank"> github </a>上。我去掉了类别顺序，因为我需要把上面的图表排列得井井有条，而把那个参数留在这里，就像给代码示例添加了一个小故事，所以我把它去掉了。但是电子表格和 jupyter 笔记本在我的 github 里，如果你想要这个的话。</p><pre class="mc md me mf gt mg lz mh mi aw mj bi"><span id="3b9b" class="mk jw in lz b gy ml mm l mn mo">import pandas as pd<br/>import plotly.express as px<br/>import plotly.figure_factory as ff<br/>import plotly.graph_objs as go<br/>import chart_studio<br/>import chart_studio.plotly as py <br/>import chart_studio.tools as tls</span><span id="2cbd" class="mk jw in lz b gy mp mm l mn mo">df = pd.read_csv('gantt_chart_new.csv',encoding='latin1')<br/>df['Start'] = df['Start'].astype('datetime64')<br/>df['Finish'] = df['Finish'].astype('datetime64')<br/># print(df.dtypes)<br/># print(df.head())</span><span id="1325" class="mk jw in lz b gy mp mm l mn mo">colors = {'Technology' : 'rgb(30,144,255)'<br/>          , 'Technology - Date TBD' : 'rgb(211,211,211)'<br/>          , 'People' : 'rgb(95,158,160)'<br/>          , 'Process' : 'rgb(0,0,128)'<br/>          , 'Process - Date TBD' : 'rgb(211,211,210)'}<br/>    <br/>orders = list(df['Task'])</span><span id="92c5" class="mk jw in lz b gy mp mm l mn mo">fig = px.timeline(df<br/>                  , x_start="Start"<br/>                  , x_end="Finish"<br/>                  , y="Resource"<br/>                  , hover_name="Task"<br/>#                   , facet_col="Dimension"<br/>#                   , facet_col_wrap=40<br/>#                   , facet_col_spacing=.99<br/>#                   , color_discrete_sequence=['green']*len(df)<br/>                  , color_discrete_sequence=px.colors.qualitative.Prism<br/>                  , opacity=.7<br/>#                   , text="Task"<br/>                  , range_x=None<br/>                  , range_y=None<br/>                  , template='plotly_white'<br/>                  , height=1200<br/>#                   , width=1500<br/>                  , color='Dimension'<br/>                  , title ="&lt;b&gt;IE 3.0 Gantt Chart 2021&lt;/b&gt;"<br/>#                   , color=colors<br/>                 )</span><span id="d23c" class="mk jw in lz b gy mp mm l mn mo">fig.update_layout(<br/>    bargap=0.5<br/>    ,bargroupgap=0.1<br/>    ,xaxis_range=[df.Start.min(), df.Finish.max()]<br/>    ,xaxis = dict(<br/>        showgrid=True<br/>        ,rangeslider_visible=True<br/>        ,side ="top"<br/>        ,tickmode = 'array'<br/>        ,dtick="M1"<br/>        ,tickformat="Q%q %Y \n"<br/>        ,ticklabelmode="period"        <br/>        ,ticks="outside"<br/>        ,tickson="boundaries"<br/>        ,tickwidth=.1<br/>        ,layer='below traces'<br/>        ,ticklen=20<br/>        ,tickfont=dict(<br/>            family='Old Standard TT, serif',size=24,color='gray')<br/>        ,rangeselector=dict(<br/>            buttons=list([<br/>                dict(count=1, label="1m", step="month", stepmode="backward"),<br/>                dict(count=6, label="6m", step="month", stepmode="backward"),<br/>                dict(count=1, label="YTD", step="year", stepmode="todate"),<br/>                dict(count=1, label="1y", step="year", stepmode="backward"),<br/>                dict(step="all")<br/>            ])<br/>            ,x=.37<br/>            ,y=-.05<br/>            ,font=dict(<br/>                family="Arial",<br/>                size=14,<br/>                color="darkgray"<br/>    )))<br/>    <br/>    ,yaxis = dict(<br/>        title= ""<br/>        ,autorange="reversed"<br/>        ,automargin=True<br/>#         ,anchor="free"<br/>        ,ticklen=10<br/>        ,showgrid=True<br/>        ,showticklabels=True<br/>        ,tickfont=dict(<br/>            family='Old Standard TT, serif', size=16, color='gray'))<br/>    <br/>    ,legend=dict(<br/>        orientation="h"<br/>        ,yanchor="bottom"<br/>        ,y=1.1<br/>        ,title=""<br/>        ,xanchor="right"<br/>        ,x=1<br/>        ,font=dict(<br/>            family="Arial"<br/>            ,size=14<br/>            ,color="darkgray"))<br/>)</span><span id="b6b9" class="mk jw in lz b gy mp mm l mn mo">fig.update_traces( #marker_color='rgb(158,202,225)'<br/>                   marker_line_color='rgb(8,48,107)'<br/>                  , marker_line_width=1.5, opacity=0.95)</span><span id="38d1" class="mk jw in lz b gy mp mm l mn mo">fig.update_layout(<br/>    title="&lt;b&gt;IE 3.0 Gantt Chart 2021&lt;/b&gt;",<br/>    xaxis_title="",<br/>#     margin_l=400,<br/>    yaxis_title="Initiatives",<br/>#     legend_title="Dimension: ",<br/>    font=dict(<br/>        family="Arial",<br/>        size=24,<br/>        color="darkgray"<br/>    )<br/>)</span><span id="75a9" class="mk jw in lz b gy mp mm l mn mo"># fig.show()<br/>fig.write_html("C:/Users/maxwell.bade/Downloads/ie_3_gantt.html")<br/>go.FigureWidget(fig)</span></pre><h1 id="f629" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">修改颜色序列</h1><p id="dad6" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated"><code class="fe lw lx ly lz b">template</code>和<code class="fe lw lx ly lz b">color_discrete_sequence</code>是改变图表外观/感觉的两种方式/参数。还有一些方法——如果需要，您当然可以手动更改条形图的颜色，但是下面是一些关于颜色的想法。</p><p id="63b2" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">使用<code class="fe lw lx ly lz b">dark24</code>颜色序列:</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/62f52ee2ea9698a48ad25c7145439b32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4zQzQJP7s0mUAfZQxdoIow.png"/></div></div></figure><p id="242f" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">通过<code class="fe lw lx ly lz b">seaborn</code>模板使用<code class="fe lw lx ly lz b">safe</code>颜色序列:</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/b045a4943a124b76f261f2735d5f7856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AUfiXxj1KQbg0ENcHsTmbQ.png"/></div></div></figure><p id="d19b" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">使用带有<code class="fe lw lx ly lz b">D3</code>颜色序列的<code class="fe lw lx ly lz b">plotly_dark</code>模板</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/8e69eed4aee4320fb236a08da7b2f806.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dBRzigU7SnFVId2eRsAdRg.png"/></div></div></figure><p id="d276" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">使用<code class="fe lw lx ly lz b">plotly</code>默认模板和<code class="fe lw lx ly lz b">Light24</code>颜色序列:</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/fb828b7391dd25fcd07f34f565018a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l3f-qfKQBeS_gfPTKuqcIA.png"/></div></div></figure><h2 id="ff4e" class="mk jw in bd jx mt mu dn kb mv mw dp kf le mx my kj li mz na kn lm nb nc kr nd bi translated">感谢阅读。</h2><p id="4d14" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated"><strong class="kv io">最大值</strong></p></div></div>    
</body>
</html>