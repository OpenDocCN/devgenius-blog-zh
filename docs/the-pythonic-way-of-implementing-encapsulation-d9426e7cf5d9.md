# 实现封装的 Pythonic 方式

> 原文：<https://blog.devgenius.io/the-pythonic-way-of-implementing-encapsulation-d9426e7cf5d9?source=collection_archive---------2----------------------->

![](img/47982870436c59d79eebc6c073c574e9.png)

由 [Roman Synkevych](https://unsplash.com/@synkevych?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

## 介绍

封装是将变量和方法包装成一个单元的概念。它是面向对象编程(OOP)的支柱之一。目标是确保您的数据可信。为了赢得信任，软件开发人员创建*私有*变量，包括 *getter* 和 *setter* 方法。一个*获取器*返回一个值，而一个*设置器*更新或设置一个值。

## 让我们开始吧

下面是你可以想到的用 Python 实现封装的方法。

在下面的代码中，我们创建了一个上面的`Person`类的对象，并试图使用变量`name`，这并没有给我们带来任何安宁，因为私有变量不能从 person 对象中访问。

要访问它，你必须使用`get_name()`方法。设置其值时也是如此。我们必须使用`set_name(self, name)`方法。

如果我告诉你实现封装的 pythonic 方式是首先将所有东西都公开，那会怎么样？并且不将变量声明为私有。我相信 Java 开发者正在为我的喉咙冲刺。向我抛出一些问题，比如没有私有变量你如何实现封装？放松点。请继续阅读。看看下面的 python 代码。这是以 pythonic 方式实现封装的第一步。

变量`name`不再是私有的了。这意味着之前导致错误的下面的代码将会工作。

我知道你一定在问如果我们以后要隐藏数据怎么办，这样不会破坏这个类用户访问的接口吗？
以后试图将变量`name`私有会破解代码，因为外界再也无法访问它了。
我们如何防止这样的问题，并通过 getters 和 setters 确保数据可信？

Python 使用 ***属性*** 为我们关心的问题提供了一个愉快的解决方案。属性是实例属性的接口。它们封装实例属性，就像 Java 等其他面向对象语言中的 getters 和 setters 一样。下面是一个例子。

属性是使用 getter 的 property decorator 创建的，相同的名称用于创建 setter。这样，您可以在设置名称时应用规则。如下所示，一个例子是在设置值之前更改 setter 方法来验证值。

通过一个对象访问或改变`name`将是非常可能的。下面的代码会很开心。

如果您试图像这样设置名称`person.name = “ab”`，将会失败，因为 setter 方法中存在检查。

请注意，接口没有断开。如果您首先将变量名设为公共，然后在不使用属性的情况下将其设为私有，那么接口会中断(因为一个`person.name`会失败)，并且`Person`类的所有用户都必须重构他们的代码。这在处理数千行代码时会带来问题。在 Java 等其他 OOP 语言中面临这样的问题是非常令人沮丧的。它迫使你在项目开始时将所有变量私有，即使在不必要的时候。在 Python 中，可以先将它们公开，如果以后需要数据保护和隐藏，可以在类的用户不改变其实现的情况下实现属性。变量`name`仍然是“公开的”,但它的值是可信的。不遵守规则是改不了的。

## 结论

说了这么多，我对 Java(其实是我的初恋)没有什么反感。我希望您和我一样对 Python 感兴趣。
快乐封装！！！