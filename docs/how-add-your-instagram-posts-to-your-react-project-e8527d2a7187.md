# å¦‚ä½•å°† Instagram å¸–å­æ·»åŠ åˆ° React é¡¹ç›®ä¸­

> åŸæ–‡ï¼š<https://blog.devgenius.io/how-add-your-instagram-posts-to-your-react-project-e8527d2a7187?source=collection_archive---------4----------------------->

![](img/07fa46a8fdfffb3536a68e6ebdf77dc9.png)

**æˆ‘çš„ç›®æ ‡:** *å°†æˆ‘åœ¨ React é¡¹ç›®ä¸­çš„æœ€æ–° Instagram å›¾ç‰‡æ˜¾ç¤ºåœ¨ä¸€ä¸ªå“åº”å¼çš„ 3*3 æ­£æ–¹å½¢ç½‘æ ¼ä¸­ã€‚*

# è·å– Instagram è®¿é—®ä»¤ç‰Œ

ç¬¬ä¸€æ­¥æ˜¯æ‹¿åˆ°`access_token`ã€‚facebook å¼€å‘è€…æ–‡æ¡£éå¸¸å¥½ï¼Œä½†æ˜¯æˆ‘å‘ç°è¿™ä¸ªæ•™ç¨‹æ›´å¥½ï¼

**ç¡®ä¿ä»ç„¶é˜…è¯»æ–‡æ¡£ï¼Œä»¥ç¡®ä¿æ‚¨æ­£åœ¨ä½¿ç”¨æ‚¨çš„ç”¨ä¾‹çš„æ­£ç¡®æ–¹æ³•ï¼Œå¹¶ä¸”æ‚¨éµå®ˆ T & Csã€‚**

![](img/3e32e54a1d67d6db450006859e8b22b3.png)

è„¸ä¹¦å¼€å‘è€…æ–‡æ¡£

è¿™å¯¹äºæˆ‘çš„ç”¨ä¾‹æ¥è¯´å·²ç»è¶³å¤Ÿäº†ï¼Œå› ä¸ºæˆ‘æ­£è¯•å›¾åœ¨è‡ªå·±çš„ç½‘ç«™ä¸Šæ˜¾ç¤ºè‡ªå·±çš„ Instagram æ•°æ®ã€‚

# è·å– Instagram ç”¨æˆ· Id

ä¸€æ—¦æœ‰äº†è®¿é—®ä»¤ç‰Œï¼Œè·å–ç”¨æˆ· id å°±éå¸¸ç®€å•äº†ã€‚åœ¨ Postman ä¸­ï¼Œå¯¹è¿™ä¸ªç«¯ç‚¹æ‰§è¡Œä¸€ä¸ª GET è¯·æ±‚ï¼Œå¦‚[æ–‡æ¡£](https://developers.facebook.com/docs/instagram-basic-display-api/reference/me)ä¸­æ‰€è¿°:

*   **https://graph.instagram.com/me?access_token={access_token}**

![](img/20091b12f7380d0bf95a137e81fc3747.png)

é‚®é€’å‘˜å›å¤

è¿™æ˜¯å¿…éœ€çš„`user_id`ã€‚

# åœ¨ React ä¸­è·å– Instagram ç…§ç‰‡

## åˆ›å»ºæ¼”ç¤ºç»„ä»¶

Instagram ä¸­çš„åª’ä½“é¡¹ç›®æœ‰`media_url`å’Œ`permalink`å­—æ®µï¼Œå¦‚[æ–‡æ¡£](https://developers.facebook.com/docs/instagram-basic-display-api/reference/media#reading)ä¸­æ‰€è¿°ã€‚è¿™äº›æ˜¯æˆ‘ä½¿ç”¨çš„å­—æ®µã€‚

é¦–å…ˆï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª`InstaItem`ç±»å‹ã€‚è¿™ç§ç±»å‹çš„å¯¹è±¡å°†ç”¨äºå­˜å‚¨ä»ç«¯ç‚¹è¿”å›çš„`media_url`å’Œ`permalink`å­—æ®µ:

![](img/001ca310828baed8b61705ef1fa09956.png)

InstaItem ç±»å‹

ç„¶åï¼Œè¡¨ç¤ºç»„ä»¶å¯ä»¥æ¥æ”¶ä¸€ä¸ª`InstaItem`åˆ—è¡¨ï¼Œå¹¶æ•´é½åœ°è¡¨ç¤ºå®ƒä»¬ï¼Œè€Œä¸ç”¨æ‹…å¿ƒ`InstaItem`åˆ—è¡¨æ˜¯å¦‚ä½•è·å–çš„ã€‚ä¸‹é¢æ˜¯æˆ‘å¦‚ä½•åœ¨æˆ‘çš„å¥½æœ‹å‹ç»´å…‹å¤šçš„å¸®åŠ©ä¸‹å®ç°ç»„ä»¶çš„:

![](img/640820884095468ad435951d6b2de063.png)

æ¼”ç¤ºç»„ä»¶

`itemStyle`çš„é•¿å®½æ¯”æ˜¯`1 / 1`ç”¨äº`itemStyle`ä»¥ç¡®ä¿é¡¹ç›®æ˜¯æ–¹å½¢çš„ã€‚

å¦‚æœ`items`åˆ—è¡¨ä¸ºç©º(å½“å›¾ç‰‡ä»åœ¨è·å–æ—¶)ï¼Œç½‘æ ¼æ˜¾ç¤º 9 ä¸ªæ­£æ–¹å½¢ [MUI éª¨æ¶](https://mui.com/material-ui/react-skeleton/#main-content)ã€‚è¿™æ˜¯ä¸å¿…è¦çš„ï¼Œä½†æˆ‘è®¤ä¸ºè¿™çœŸçš„å¾ˆå¥½ã€‚

## åˆ›å»ºå®¹å™¨ç»„ä»¶

ç°åœ¨æ˜¯æœ‰è¶£çš„éƒ¨åˆ†ï¼æˆ‘é¦–å…ˆåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ª. env æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘æ·»åŠ äº†ä¸¤ä¸ªå˜é‡ï¼Œ`REACT_APP_ACCESS_CODE`å’Œ`REACT_APP_USER_ID`ã€‚

![](img/cfc9aaa68b6f042a823d50993542b008.png)

ç¯å¢ƒå˜é‡

**æ³¨æ„:å°†å˜é‡å­˜å‚¨åœ¨ã€‚env æ–‡ä»¶ä¸å®‰å…¨ï¼Œè¿™äº›å˜é‡å°†æ˜¯å¯è§çš„ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘å¾ˆä¹æ„å°†æˆ‘çš„** `**access_token**` **ä½œä¸ºåªè¯»ï¼Œè€Œ** `**user_id**` **åæ­£æ˜¯å…¬å…±çš„ã€‚**

ç„¶åï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªå®¹å™¨ç»„ä»¶æ¥è·å–åª’ä½“é¡¹ã€‚ç”¨äºè·å–æ‰€æœ‰åª’ä½“é¡¹ç›®çš„ [URL å¦‚ä¸‹æ‰€ç¤º:](https://developers.facebook.com/docs/instagram-basic-display-api/reference/user/media)

*   **https://graph.instagram.com/{user_id}/media?è®¿é—®ä»¤ç‰Œ= {è®¿é—®ä»¤ç‰Œ}**

é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†æ£€ç´¢åˆ°çš„é¡¹ç›®å­˜å‚¨åœ¨çŠ¶æ€ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å°†å®ƒä¼ é€’ç»™è¡¨ç¤ºç»„ä»¶ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç”¨æˆ· id çš„ç¯å¢ƒå˜é‡å’Œã€‚ç¯å¢ƒæ–‡ä»¶:

![](img/915b4cacf43bab8e3902f00337512169.png)

ä»`instaUrl`è·å–æ•°æ®å°†è¿”å›åª’ä½“é¡¹ç›®çš„åˆ—è¡¨`id`ï¼Œè¯¥åˆ—è¡¨å¯ç”¨äºæ£€ç´¢å®é™…çš„åª’ä½“é¡¹ç›®ã€‚

ç”¨äºè·å– `[media_url](https://developers.facebook.com/docs/instagram-basic-display-api/reference/media#reading)` [å’Œ](https://developers.facebook.com/docs/instagram-basic-display-api/reference/media#reading) `[permalink](https://developers.facebook.com/docs/instagram-basic-display-api/reference/media#reading)` [å­—æ®µ](https://developers.facebook.com/docs/instagram-basic-display-api/reference/media#reading)çš„ [URL å¦‚ä¸‹æ‰€ç¤º:](https://developers.facebook.com/docs/instagram-basic-display-api/reference/media#reading)

*   **https://graph.instagram.com/${id}?è®¿é—®ä»¤ç‰Œ= $ {è®¿é—®ä»¤ç‰Œ} &å­—æ®µ=åª’ä½“ urlï¼Œæ°¸ä¹…é“¾æ¥**

å¯¹äºæˆ‘ä»¬è·å¾—çš„æ¯ä¸ªåª’ä½“`id`ï¼Œæˆ‘ä»¬å¯ä»¥æ£€ç´¢å…¶å¯¹åº”çš„`media_url`å’Œ`permalink`å­—æ®µï¼Œå¹¶å°†å®ƒä»¬ä¿å­˜ä¸ºä¸€ä¸ª`InstaItem`å¯¹è±¡ã€‚

æˆ‘å®šä¹‰äº†ä¸€ä¸ª`useEffect`æ¥åšè¿™ä»¶äº‹(è™½ç„¶å›æƒ³èµ·æ¥ç”¨`React Query`æ›´å¥½ï¼Œä½†æ˜¯è¿‡ç¨‹æ˜¯ä¸€æ ·çš„)ã€‚

![](img/0c3d82bdc10c3b8d5a5d20284fd095b3.png)

æ­£åœ¨è·å– Instagram åª’ä½“â€œmedia_urlâ€å’Œâ€œpermalinkâ€

æŠ˜å äº†`useEffect`çš„æ•´ä¸ªå®¹å™¨ç»„ä»¶çœ‹èµ·æ¥åƒè¿™æ ·ï¼Œæˆ‘å°†å…¶å‘½åä¸º`InstaFeed`:

![](img/e0eb4e3b84d9e5ed317522e20431ac8a.png)

ç”¨äºè·å– Instagram é¡¹ç›®çš„å®¹å™¨ç»„ä»¶

å°±æ˜¯è¿™æ ·ï¼æœ€ç»ˆç»“æœæ˜¯ï¼Œæˆ‘çš„ Instagram å¸–å­å˜æˆäº†ä¸€ä¸ªå“åº”æ€§çš„ 3*3 æ–¹å½¢ç½‘æ ¼:

![](img/49acbfd298e647019f15bbdd44419569.png)

# ç»“è®º

æˆ‘æè¿°äº†å¦‚ä½•å°† Instagram å¸–å­æ·»åŠ åˆ° React é¡¹ç›®ä¸­ã€‚

å¼„æ¸…æ¥šå¦‚ä½•å®ç°è¿™ä¸€ç‚¹æœ‰ç‚¹éº»çƒ¦ã€‚ä»è·å¾—`access_token`å’Œ`user_id`åˆ°ä½¿å…¶ååº”çµæ•ï¼Œåœ¨æˆ‘å¾—å‡ºè¿™ä¸ªè§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘å¿…é¡»ç»å†å¤šæ¬¡è¿­ä»£ï¼Œè°¢è°¢[ç»´å…‹å¤š](https://sharpvik.medium.com/)ğŸ˜„

æˆ‘å¿…é¡»æŒ‡å‡ºï¼Œæœ‰ 3 ç§ç±»å‹çš„åª’ä½“ï¼Œ`IMAGE`ã€`VIDEO`æˆ–`CAROUSEL_ALBUM`ã€‚è¿™æ®µä»£ç åªæ¶µç›–äº†`IMAGE`åª’ä½“ç±»å‹ï¼Œæ‰€ä»¥è¿˜æœ‰ä¸€äº›å·¥ä½œè¦åšã€‚

å°†`access_token`å’Œ`user_id`å­˜å‚¨ä¸ºç¯å¢ƒå˜é‡**æ˜¯ä¸å®‰å…¨çš„**ã€‚å¦‚æœè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯æ„å»ºä¸€ä¸ªå°å‹åç«¯æˆ–æ— æœåŠ¡å™¨åŠŸèƒ½ï¼Œå­˜å‚¨è¿™äº›å˜é‡å¹¶ä»£è¡¨ React é¡¹ç›®æ‰§è¡ŒæŸ¥è¯¢ï¼Œåªè¿”å›åª’ä½“é¡¹ï¼Œè€Œä¸æ³„éœ²ä»»ä½•æ•æ„Ÿä¿¡æ¯ã€‚