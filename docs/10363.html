<html>
<head>
<title>Java Singleton is most important feature to understand</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java Singleton 是理解起来最重要的特性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/java-singleton-is-most-important-feature-to-understand-cca2411047fb?source=collection_archive---------2-----------------------#2022-10-27">https://blog.devgenius.io/java-singleton-is-most-important-feature-to-understand-cca2411047fb?source=collection_archive---------2-----------------------#2022-10-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="13b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Singleton 是一种设计模式，其中一个类在每个应用程序中只能有一个实例。</p><p id="5597" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">日志记录、驱动程序对象、缓存等。是单例设计模式的一些例子。</p><p id="2a36" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">单例类在大多数时候会遵循以下三条规则:</p><ol class=""><li id="e999" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">它总是有一个<strong class="jm io">私有默认构造函数</strong>，它永远不允许在单例类之外创建实例。</li><li id="6cbc" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">静态变量来分配实例。</li><li id="1a6d" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">静态方法来访问或单例类外部的单例类实例。</li></ol><p id="bbe7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:</strong>单例类将总是返回类的同一个实例。</p><p id="fe7d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建单例实例有两种方法:</p><p id="b2b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">急切加载</strong>是在类加载的时候创建一个实例。</p><p id="c246" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">延迟加载</strong>是在需要的时候创建一个实例。</p><h1 id="c828" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">急切装载</h1><p id="7f3d" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">按照下面的内联步骤创建急切加载单例类实例。</p><ol class=""><li id="a3d4" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">在第 6 行创建的静态实例变量将在编译或加载时执行。</li><li id="e5f0" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">将默认构造函数声明为 private，这将有助于我们避免在 Singleton 类之外创建实例。</li><li id="15e4" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">现在，为了访问一个实例，我们需要一个静态方法，因为实例变量和构造函数都是私有的。</li><li id="55fc" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">返回在第 6 行创建的私有实例变量，作为静态方法的一部分。</li></ol><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi lz"><img src="../Images/6e173f6b35daa7554933db79f4ad2d05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SAW1sM24uWfSSl4-HqCFrA.png"/></div></div></figure><p id="ff99" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输出<br/>真</p><p id="63c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输出为真，因为这个类是单例的，并且将总是返回相同的实例。</p><h1 id="9bfe" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">惰性装载</h1><p id="94a7" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">按照下面内联的 4 个步骤来创建延迟加载单例类实例。</p><ol class=""><li id="1d5e" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated">创建连接类的静态对象。</li><li id="6140" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">将默认构造函数声明为 private，这将有助于我们避免在 Singleton 类之外创建实例。</li><li id="6956" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">现在，创建静态方法来创建和返回类的一个实例。</li><li id="a5ec" class="ki kj in jm b jn kr jr ks jv kt jz ku kd kv kh kn ko kp kq bi translated">返回在第 6 行创建的私有实例变量，作为静态方法的一部分。</li></ol><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi ml"><img src="../Images/d683833a34f1bf680a6d92ba000c7cc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bPZaePVmPiyfOmMB-VaT9A.png"/></div></div></figure><p id="51e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输出<br/>真</p><p id="2767" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输出为真，因为这个类是单例的，并且将总是返回相同的实例。</p><h1 id="fdd5" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">线程安全单例类</h1><p id="c1ab" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">对于线程安全的单例类，同一时间只有一个线程可以访问单例类实例。</p><p id="33bf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io"> static getInstance() </strong>方法中添加<strong class="jm io"> synchronized </strong>关键字会将上面的惰性加载单例类转换为同步或线程安全单例类，如下图所示，以红色突出显示。</p><figure class="ma mb mc md gt me gh gi paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="gh gi mm"><img src="../Images/1bb21ced243f71a8bb4beaccb58cb70e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4DWUoE0wttqUo-nDdb5sA.png"/></div></div></figure><p id="7075" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输出<br/>为真</p><p id="cc18" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输出为真，因为这个类是单例的，并且将总是返回相同的实例。</p><p id="ac24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望你发现这篇文章有趣且内容丰富。请分享给你的朋友来传播知识。</p><p id="3a77" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以关注我即将发布的博客<a class="ae mn" href="https://medium.com/@toimrank" rel="noopener">关注</a>。<br/>谢谢！</p></div></div>    
</body>
</html>