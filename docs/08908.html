<html>
<head>
<title>How to connect Databricks community edition with Power BI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将 Databricks community edition 与 Power BI 连接</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-connect-databricks-community-edition-with-power-bi-6864f071c3cd?source=collection_archive---------4-----------------------#2022-07-18">https://blog.devgenius.io/how-to-connect-databricks-community-edition-with-power-bi-6864f071c3cd?source=collection_archive---------4-----------------------#2022-07-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1179" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi ki translated">任何时候，我都见过人们在将社区数据块与他们的 power bi 桌面连接起来进行可视化时遇到困难。因此，在本文中，您将了解如何将 databricks 的免费版或社区版与您的 power bi 桌面连接起来。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/6fe1fe93385584ddc5d11772d256ca18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N556XbgAno9pbOayuBEa2Q.png"/></div></div></figure></div><div class="ab cl ld le hr lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ig ih ii ij ik"><h2 id="e964" class="lk ll in bd lm ln lo dn lp lq lr dp ls jv lt lu lv jz lw lx ly kd lz ma mb mc bi translated">首先，从 databricks 的 dbutils 中上传并读取您的 CSV 文件。</h2><p id="db32" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">在您上传 CSV 或任何其他文件以便在 databricks 笔记本中读取之前，首先您需要创建一个目标文件夹，您将在其中上传您的数据。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/792b0ac03420dbdc883d3fec8f05c00a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KQMXoLX-dFYTZflHvm3-Hw.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">在 dbfs 中制作一个目录</strong></figcaption></figure><p id="47e9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要创建空白目录，请使用以下代码:</p><blockquote class="mn mo mp"><p id="91be" class="jk jl mq jm b jn jo jp jq jr js jt ju mr jw jx jy ms ka kb kc mt ke kf kg kh ig bi translated">dbutils . fs . mkdirs('/file store/temporary ')</p></blockquote><p id="8a13" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，要上传 dbfs 中的数据，您必须选择选项<strong class="jm io">数据&gt; DBFS &gt;文件存储&gt;临时</strong>，然后单击上传按钮。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/58480777c2b75d82a27cbf087b8e5133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E02VlvC7ckjYHvjlbyr5hg.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">数据块中的上传选项</strong></figcaption></figure><p id="b6f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后从本地机器中选择 CSV 文件，并按下<strong class="jm io">打开。这将把您的文件上传到 databricks 的<strong class="jm io"> dbfs </strong>中。</strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/4791de56849b6598383c654ce661c042.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MqjfJCUuQKA9PaPJAG7k_g.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">选择 CSV 文件上传到数据块</strong></figcaption></figure><p id="8d33" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上传完成后，您可以在 CSV 文件上看到绿色勾号。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/2c19dc382ff2732b96caa6add4b55f38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PL2IY9152S2Bual-RCPYCg.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm"> CSV 文件现已上传</strong></figcaption></figure><p id="e5f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">成功上传 CSV 文件后，现在您可以开始 power bi 连接的主要工作，即通过在笔记本中编写简单的代码来读取 databricks spark 中的数据:</p><blockquote class="mn mo mp"><p id="481f" class="jk jl mq jm b jn jo jp jq jr js jt ju mr jw jx jy ms ka kb kc mt ke kf kg kh ig bi translated">customer = spark . read . format(' CSV ')。选项(header = True，inferSchema = True)。load('<strong class="jm io">Your _ File _ Location</strong>')|在我的情况下是它的"<strong class="jm io">/File store/temporary/olist _ customers _ dataset . CSV</strong>"</p></blockquote><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/1a1895f34c1f6198e694c6418683baf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEwMTHzgNgr4pO1Qu9ubBw.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">读取 spark 中的 CSV 文件并显示</strong></figcaption></figure><p id="0a3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当您成功读取 spark 中的数据并将其存储在数据帧中时，最重要的事情就来了，您必须使用您的数据帧<strong class="jm io">创建一个增量表，即客户，</strong>使用这一行代码创建一个增量表:</p><blockquote class="mn mo mp"><p id="0fe7" class="jk jl mq jm b jn jo jp jq jr js jt ju mr jw jx jy ms ka kb kc mt ke kf kg kh ig bi translated">customer . write . option('<strong class="jm io">path '，'/power_bi' </strong>)。saveAsTable(<strong class="jm io">‘客户’</strong>)</p></blockquote><p id="2d58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的代码将在 dbfs 中创建一个名为<strong class="jm io"> 'power_bi' </strong>的新文件夹，并在该文件夹中创建增量表，在创建增量表后，您可以像这样描述您的表以检查其属性:</p><blockquote class="mn mo mp"><p id="67fe" class="jk jl mq jm b jn jo jp jq jr js jt ju mr jw jx jy ms ka kb kc mt ke kf kg kh ig bi translated">%sql</p><p id="3d4b" class="jk jl mq jm b jn jo jp jq jr js jt ju mr jw jx jy ms ka kb kc mt ke kf kg kh ig bi translated"><strong class="jm io">描述表扩展</strong>客户</p></blockquote><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/728f7b1f80db9641ae01954b1a1c34e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7L3YRVYvtR6egj2n8b3fXQ.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">使用客户数据帧创建增量表</strong></figcaption></figure><p id="8df6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建增量表后，您可以在选项<strong class="jm io">数据&gt;数据库表、</strong>中看到您的表，如下图所示:</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/2917d6b1fffb1ca0db171cb86b4ffc17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTLqTeBSEA-Up6VUPrcliw.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">检查创建的增量表</strong></figcaption></figure><p id="d985" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦您彻底完成了上述所有步骤，那么您就已经准备好在 databricks 中使用 delta 表，现在是时候将您的 databricks community edition 与您的 power bi 桌面连接起来了。</p></div><div class="ab cl ld le hr lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ig ih ii ij ik"><h2 id="7808" class="lk ll in bd lm ln lo dn lp lq lr dp ls jv lt lu lv jz lw lx ly kd lz ma mb mc bi translated"><strong class="ak">其次，连接并导入所需的表格。</strong></h2><p id="940d" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">为此，您必须打开 power bi 的桌面应用程序，单击选项<strong class="jm io">获取数据&gt;更多&gt;T3】，并在搜索框中键入<strong class="jm io">“数据块”</strong>，然后单击连接按钮:</strong></p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/d14fa3e187fbd95b2f25d4661913e22d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Iqv8WUU1HGoMin5qF-D5Q.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">使用获取数据选项创建连接</strong></figcaption></figure><p id="1a80" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">单击 connect 按钮后，您将获得另一个窗口，在该窗口中，您必须指定可以从您的 databricks 集群获取的<strong class="jm io">服务器主机名&amp; HTTP 路径、</strong>。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/5cd2792336107f72090544e76eae4b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_mWsn56FR1_SnvkAVtkdpQ.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">所需的连接输入</strong></figcaption></figure><p id="e389" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要获得上述两个输入的值，您必须按照此选项进入您的集群<strong class="jm io"> Compute &gt;您的集群&gt; JDBC/ODBC，</strong>，一旦到达那里，您将找到服务器主机名和 HTTP 路径的值，现在您只需复制这些值并将其粘贴到 power bi 中的必填字段。</p><blockquote class="mn mo mp"><p id="7eb6" class="jk jl mq jm b jn jo jp jq jr js jt ju mr jw jx jy ms ka kb kc mt ke kf kg kh ig bi translated">在我的例子中，集群名称是<strong class="jm io">分析</strong>。</p></blockquote><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/a2e4439825188b66347b155b9c975b73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q8H_JY7YOvJ71kVC9RqgJA.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">获取连接凭证</strong></figcaption></figure><p id="ded5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在连接提示中指定了所有必需的值后，在下一步中，您只需指定登录社区数据块所使用的登录凭据。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/bf5571b8c2514a58bd447bf35493a777.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MqILv1lEUet1TGI_fw01Kw.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">登录凭证</strong></figcaption></figure><p id="bc6d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当您点击 connect 按钮时，您将在最后一个提示上结束，这个提示被称为<strong class="jm io"> Navigator </strong>，在这里您可以选择您想要导入到 power bi 桌面的所需表，只需点击表旁边的复选框即可。</p><blockquote class="mn mo mp"><p id="7348" class="jk jl mq jm b jn jo jp jq jr js jt ju mr jw jx jy ms ka kb kc mt ke kf kg kh ig bi translated">在我们的例子中，我们只有一个客户表需要导入，但是如果你有很多表，你可以一次导入所有的表。</p></blockquote><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/61591b4ffc7038091c061830c772f10d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2vB8Jm_HK4nj_S0cznqXMA.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">加载所需的表格</strong></figcaption></figure><blockquote class="mn mo mp"><p id="f03a" class="jk jl mq jm b jn jo jp jq jr js jt ju mr jw jx jy ms ka kb kc mt ke kf kg kh ig bi translated">您可能想知道上图中的这个<strong class="jm io"> hive_metastore </strong>是什么，因为您根本没有使用过它，但它仍然出现在导航器提示符中，为此我将写另一篇博客，您将会了解它。</p></blockquote><p id="c990" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将数据加载到 power bi 桌面后，您可以看到 power bi 的<strong class="jm io">字段窗格</strong>中包含所有列的表格。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi mi"><img src="../Images/0abe15fe1429147fe8f03cf8dcab76cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zsBNY7cTMSfU1qac2utxXw.png"/></div></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk translated"><strong class="bd lm">字段窗格中的客户表</strong></figcaption></figure></div><div class="ab cl ld le hr lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ig ih ii ij ik"><p id="800b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">结论</strong></p><p id="39e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我解释了如果您使用 databricks 的社区版，如何将 databricks 表或 delta 表与 power bi desktop 连接起来。此外，请随时在我的<a class="ae mu" href="https://www.linkedin.com/in/rohitjram/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上建议/联系我，获取更多不同主题的文章。</p></div></div>    
</body>
</html>