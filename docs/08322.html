<html>
<head>
<title>Deployment Stamps 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">部署戳 101</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deployment-stamps-101-7c04a6f704a2?source=collection_archive---------9-----------------------#2022-06-05">https://blog.devgenius.io/deployment-stamps-101-7c04a6f704a2?source=collection_archive---------9-----------------------#2022-06-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="b420" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这篇博客是我们从零开始讨论 101 个<strong class="jm io"> </strong>概念的系列文章的一部分，读者的入门知识有限。这篇文章属于<strong class="jm io"> <em class="ki">中级</em> </strong>系列，因为它涉及到理解<strong class="jm io">部署标记的</strong>，它被用作在多租户设置<strong class="jm io">中扩展<strong class="jm io"/><strong class="jm io"/>异构工作负载的模式。</strong>该模式允许隔离租户需求— <em class="ki">数据、计算和其他部署模块</em>。</p><p id="70b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">101 系列中的一些早期博客如下:</p><p id="3075" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/cors-101-72b462396deb"><strong class="jm io">CORS 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/circuit-breaker-pattern-101-be2d7fdb656"><strong class="jm io">断路器 101 </strong> <br/> </a> <a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/priority-queues-101-40eb4f6f5ee9"> <strong class="jm io">优先级队列 101 </strong> </a> <a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/async-communication-101-b04d5c95333a"> <strong class="jm io"> <br/>异步通信 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/database-101-13d593ec4078"><strong class="jm io">数据库 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/database-design-101-7c019d69b97f"><strong class="jm io"/></a></p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/7277c1ac3a5809e91ccda402d684fa55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NsTSv7FLKNhDc0Ii3X2Q3g.png"/></div></div></figure><h1 id="b2ff" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">什么是部署戳？</h1><p id="121d" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">部署标记的名称来源于术语“<strong class="jm io">橡皮标记</strong>”，因为它有助于使用更小的可复制单元(称为<strong class="jm io">服务单元/扩展单元)扩展大型分布式工作负载。</strong>每个单元可以为<strong class="jm io">1-N 个租户</strong>提供流量，这取决于为资源划分选择的隔离标准。这种模式有助于限制<strong class="jm io">多租户</strong>平台在随着客户需求增长而扩展其生产环境时受到任何云资源提供商的限制。</p><p id="6f11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用这种模式的其他优势包括<strong class="jm io"> <em class="ki">成本优化、工作负载地理分布的低延迟、部署/系统更新爆炸半径减小等</em> </strong> <em class="ki">。</em>应对选择时间戳的非功能性要求进行尽职调查，以避免生产中出现过小或过大的时间戳。</p><h1 id="7f1e" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结束 2 结束流程</h1><p id="5a29" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">如果工作量<strong class="jm io"> <em class="ki">即 TPS 和生命周期数据需求</em> </strong>超过了将租户单独托管到唯一 Stamp 的成本影响，则每个 Stamp 单元被映射到至少一个租户，并且在某些情况下映射到多个租户。此外，如果租户有合规需求，如<a class="ae kj" href="https://en.wikipedia.org/wiki/Health_Insurance_Portability_and_Accountability_Act" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">【HIPAA】</strong></a><strong class="jm io"/>、<a class="ae kj" href="https://www.pcicomplianceguide.org/faq/#1" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">PCI</strong></a><strong class="jm io"/>数据等，建议单独托管租户，以隔离<strong class="jm io"> <em class="ki">访问管理和审计需求</em> </strong>。</p><h2 id="7aac" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated"><strong class="ak">租户盖章映射</strong></h2><figure class="kl km kn ko gt kp gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/e039097ea45c8cfc956be26fbed2df20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*RvEHwR-HBY8uFizWI2G62w.jpeg"/></div></figure><h2 id="35f8" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">交通路线</h2><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi mm"><img src="../Images/8bb3c765a16b58764e31c0fcf69140b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0uX3PtHqNTmRII9EM5gaw.jpeg"/></div></div></figure><h2 id="d497" class="lz kx in bd ky ma mb dn lc mc md dp lg jv me mf lk jz mg mh lo kd mi mj ls mk bi translated">顺序流程</h2><ol class=""><li id="807c" class="mn mo in jm b jn lu jr lv jv mp jz mq kd mr kh ms mt mu mv bi translated">所有租户都将<em class="ki">称为全局负载平衡器端点</em>。这在所有地区都是可用的。</li><li id="4c42" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><em class="ki">全局负载均衡器</em>将流量路由到地理上最近的<em class="ki">区域负载均衡器</em>。</li><li id="ecdf" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><em class="ki">区域负载平衡器</em>查询包含租户的数据库，以标记所有用例的映射。</li><li id="884d" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">如果 stamp 部署与<em class="ki">区域负载均衡器</em>在同一区域，则选择相同的区域网络路径来服务 E2E 流量。</li><li id="f03c" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">如果 stamp 部署与<em class="ki">区域负载平衡器</em>位于不同的区域，则<em class="ki">全局负载平衡器</em>会将流量路由到正确的区域网络路径。</li></ol><h1 id="cf88" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">优势</h1><ul class=""><li id="5b33" class="mn mo in jm b jn lu jr lv jv mp jz mq kd mr kh nb mt mu mv bi translated"><strong class="jm io">爆炸半径减小</strong>–在断电的情况下，只有给定的邮票和租户受到影响，以确保与其他租户的独立性。</li><li id="82cd" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh nb mt mu mv bi translated"><strong class="jm io">推广—</strong>平台更新可以单独进行，因此租户可以灵活地避免在业务关键时段进行更新。</li><li id="9196" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh nb mt mu mv bi translated"><strong class="jm io">成本优势</strong>–在某些情况下，运行两个较小的云服务副本有利于降低云成本，而不是按照非线性定价模式扩展到更高的自定义 SKU。</li><li id="2ef2" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh nb mt mu mv bi translated"><strong class="jm io">可扩展性限制—</strong>大多数云服务对单个服务实例有限制，因此拥有多租户分区实例有助于隔离不断增长的数据需求。</li></ul><h1 id="6114" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">摘要</h1><p id="c453" class="pw-post-body-paragraph jk jl in jm b jn lu jp jq jr lv jt ju jv lw jx jy jz lx kb kc kd ly kf kg kh ig bi translated">我们讨论了<strong class="jm io">部署标记</strong>的基础，这是一种可靠的模式，用于托管服务于具有不同业务需求的租户的平台，这些租户分布在不同的地理位置，具有独立的扩展和版本要求，以确保满足高性能的端到端 SLA。不同的云供应商有自己选择的全球和区域负载平衡器来设置自定义流量规则，以确保平台的高可用性。一些受欢迎的选择有<a class="ae kj" href="https://docs.microsoft.com/en-us/azure/frontdoor/front-door-overview" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> Azure Front Doo </strong> </a> r、<a class="ae kj" href="https://azure.microsoft.com/en-in/services/api-management/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> Azure API 管理</strong> </a>、<a class="ae kj" href="https://aws.amazon.com/global-accelerator/?blogs-global-accelerator.sort-by=item.additionalFields.createdDate&amp;blogs-global-accelerator.sort-order=desc&amp;aws-global-accelerator-wn.sort-by=item.additionalFields.postDateTime&amp;aws-global-accelerator-wn.sort-order=desc" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> AWS 加速器</strong> </a> <strong class="jm io"> </strong>等<strong class="jm io">。</strong></p><p id="3c3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">如需反馈，请留言至</em><strong class="jm io"><em class="ki">Amit[dot]894[at]Gmail[dot]com</em></strong><em class="ki">或联系</em><a class="ae kj" href="https://about.me/amit_raj" rel="noopener ugc nofollow" target="_blank"><em class="ki">https://about.me/amit_raj</em></a><em class="ki">的任何链接。</em></p></div></div>    
</body>
</html>