<html>
<head>
<title>React Tips — SVGs and Scroll Events</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应提示—SVG 和滚动事件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/react-tips-svgs-and-scroll-events-cc258817958e?source=collection_archive---------7-----------------------#2020-07-24">https://blog.devgenius.io/react-tips-svgs-and-scroll-events-cc258817958e?source=collection_archive---------7-----------------------#2020-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3527b1438d16c86a49778d7c00383f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GKQ8U1CjPyJtzPN-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@spdumb2025?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">陈彦蓉</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="387f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React 是一个用于创建 web 应用程序和移动应用程序的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些编写更好的 React 应用程序的技巧。</p><h1 id="cf6f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将 SVG 嵌入 ReactJS</h1><p id="daf0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将 SVG 代码直接放入 React 组件中</p><p id="171f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2b90" class="mn lc iq mj b gy mo mp l mq mr">function SvgApple() {<br/>  return (<br/>       &lt;svg id="svg2" viewBox="0 0 624.38 604.71" version="1.0"&gt;<br/>      &lt;defs id="defs3"&gt;<br/>        &lt;linearGradient<br/>          id="linearGradient2847"<br/>          x1="340.66"<br/>          gradientUnits="userSpaceOnUse"<br/>          y1="322.86"<br/>          gradientTransform="translate(164.44 185.74)"<br/>          x2="398.88"<br/>          y2="322.86"<br/>        &gt;<br/>          &lt;stop id="stop2831" stop-color="#ccc" offset="0" /&gt;<br/>          &lt;stop id="stop2833" stop-color="#ccc" stop-opacity="0" offset="1" /&gt;<br/>        &lt;/linearGradient&gt;<br/>        &lt;radialGradient<br/>          id="radialGradient2849"<br/>          gradientUnits="userSpaceOnUse"<br/>          cy="586.46"<br/>          cx="366.79"<br/>          gradientTransform="matrix(1 0 0 .90909 246.44 239.05)"<br/>          r="258.49"<br/>        &gt;<br/>          &lt;stop id="stop2807" stop-color="#e6e6e6" offset="0" /&gt;<br/>          &lt;stop<br/>            id="stop2809"<br/>            stop-color="#e6e6e6"<br/>            stop-opacity="0"<br/>            offset="1"<br/>          /&gt;<br/>        &lt;/radialGradient&gt;<br/>        &lt;radialGradient<br/>          id="radialGradient2851"<br/>          gradientUnits="userSpaceOnUse"<br/>          cy="274.22"<br/>          cx="490.32"<br/>          gradientTransform="matrix(1 0 0 .61041 168.44 290.57)"<br/>          r="123.39"<br/>        &gt;<br/>          &lt;stop id="stop2821" stop-color="#ccc" offset="0" /&gt;<br/>          &lt;stop id="stop2823" stop-color="#ccc" stop-opacity="0" offset="1" /&gt;<br/>        &lt;/radialGradient&gt;<br/>      &lt;/defs&gt;<br/>      &lt;g id="layer1" transform="translate(-89.704 -231.29)"&gt;<br/>        &lt;g<br/>          id="g2837"<br/>          transform="matrix(.93776 .34729 -.34729 .93776 206.95 -108.99)"<br/>        &gt;<br/>          &lt;path<br/>            id="path10856"<br/>            stroke="#000"<br/>            transform="translate(731.28 508.81)"<br/>            d="m-320.82 328.99c1.62-1.61-22.63-13.81-20.59-14.85 2.03-1.04-2.35 25.75-0.09 25.39 2.25-0.36-10.2-24.47-7.94-24.12 2.26 0.36-17.03 19.45-15 20.49 2.04 1.04 6.14-25.79 7.76-24.18 1.62 1.62-25.21 5.73-24.17 7.76 1.03 2.04 20.12-17.25 20.48-15 0.36 2.26-23.76-10.19-24.12-7.93-0.35 2.26 26.43-2.13 25.39-0.09-1.03 2.03-13.23-22.21-14.85-20.6-1.61 1.62 22.63 13.81 20.6 14.85-2.04 1.04 2.35-25.75 0.09-25.39s10.19 24.48 7.94 24.12c-2.26-0.36 17.03-19.45 14.99-20.49-2.03-1.03-6.14 25.79-7.75 24.18-1.62-1.62 25.21-5.72 24.17-7.76s-20.13 17.26-20.48 15c-0.36-2.26 23.76 10.19 24.11 7.93 0.36-2.25-26.42 2.13-25.39 0.1 1.04-2.04 13.24 22.21 14.85 20.59z"<br/>          /&gt;<br/>          &lt;path<br/>            id="path10853"<br/>            stroke="#000"<br/>            fill="red"<br/>            d="m625.29 586.46c0 138.74-115.81 235-258.5 235-142.68 0-258.49-96.26-258.49-235s115.81-234.99 258.49-234.99c142.69 0 258.5 96.25 258.5 234.99z"<br/>          /&gt;<br/>          &lt;path<br/>            id="rect10858"<br/>            stroke="#000"<br/>            stroke-width=".62806"<br/>            fill="#803300"<br/>            d="m381.01 236.85c8.59 0 17.56 0.03 17.56 0.07l-14.31 171.88c0 0.04-6.92 0.07-15.51 0.07s-15.51-0.03-15.51-0.07l-12.26-171.88c0-0.04 31.44-0.07 40.03-0.07z"<br/>          /&gt;<br/>          &lt;path<br/>            id="path2827"<br/>            opacity=".6729"<br/>            fill="url(#linearGradient2847)"<br/>            d="m381.01 236.85c8.59 0 17.56 0.03 17.56 0.07l-14.31 171.88c0 0.04-6.92 0.07-15.51 0.07s-15.51-0.03-15.51-0.07l-12.26-171.88c0-0.04 31.44-0.07 40.03-0.07z"<br/>          /&gt;<br/>          &lt;path<br/>            id="path10861"<br/>            stroke="#000"<br/>            stroke-width="3.063"<br/>            fill="none"<br/>            d="m337 394.28c2.62 5 12.11 14.08 19.7 14.09 7.77 0.02 27.78 0.58 29.61-1.57 3-3.54 10.81-15.89 12.33-20.76"<br/>          /&gt;<br/>          &lt;path<br/>            id="path10868"<br/>            stroke="#000"<br/>            stroke-width=".35974"<br/>            fill="#338000"<br/>            d="m538.62 313.49c-56.1 31.56-164.82 43.23-171.29 31.7-6.46-11.54 64.93-89.87 121.02-121.43 56.1-31.56 117.89-28.15 124.35-16.61 6.46 11.53-17.99 74.78-74.08 106.34z"<br/>          /&gt;<br/>          &lt;path<br/>            id="path2803"<br/>            opacity=".40654"<br/>            fill="url(#radialGradient2849)"<br/>            d="m707.29 586.46c0 138.74-115.81 235-258.5 235-142.68 0-258.49-96.26-258.49-235s115.81-234.99 258.49-234.99c142.69 0 258.5 96.25 258.5 234.99z"<br/>          /&gt;<br/>          &lt;path<br/>            id="path2817"<br/>            opacity=".78364"<br/>            fill="url(#radialGradient2851)"<br/>            d="m542.62 311.49c-56.1 31.56-164.82 43.23-171.29 31.7-6.46-11.54 64.93-89.87 121.02-121.43 56.1-31.56 117.89-28.15 124.35-16.61 6.46 11.53-17.99 74.78-74.08 106.34z"<br/>          /&gt;<br/>        &lt;/g&gt;<br/>      &lt;/g&gt;<br/>    &lt;/svg&gt;<br/>  );<br/>}</span></pre><p id="69aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了一个来自<a class="ae kc" href="https://publicdomainvectors.org/en/free-clipart/Apple-vector-drawing/2168.html" rel="noopener ugc nofollow" target="_blank">https://publicdomainvectors . org/en/free-clip art/Apple-vector-drawing/2168 . html</a>的苹果 SVG，删除了原始 SVG 代码中的所有命名空间标签。</p><h1 id="ec04" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在 React 中更新滚动组件的样式</h1><p id="377a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过在组件中附加一个<code class="fe ms mt mu mj b">scroll</code>事件监听器来监听滚动事件。</p><p id="39d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="caa2" class="mn lc iq mj b gy mo mp l mq mr">class App extends React.Component {<br/>  constructor(){<br/>    this.state = {}<br/>  }</span><span id="053f" class="mn lc iq mj b gy mv mp l mq mr">  componentDidMount() {<br/>    window.addEventListener('scroll', this.handleScroll);<br/>  },</span><span id="5295" class="mn lc iq mj b gy mv mp l mq mr">  componentWillUnmount() {<br/>    window.removeEventListener('scroll', this.handleScroll);<br/>  },</span><span id="ae55" class="mn lc iq mj b gy mv mp l mq mr">  handleScroll() {<br/>    const scrollY = window.scrollY;</span><span id="e4a2" class="mn lc iq mj b gy mv mp l mq mr">    this.setState({<br/>      scrollY<br/>    });<br/>  }<br/>  <br/>  render(){<br/>    return &lt;div&gt;{this.state.scrollY}&lt;/div&gt;;<br/>  }<br/>}</span></pre><p id="c78b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe ms mt mu mj b">componentDidMount</code>方法中附加了带有<code class="fe ms mt mu mj b">addEventListener</code>方法的<code class="fe ms mt mu mj b">scroll</code>事件监听器，以便在组件挂载时添加事件监听器。</p><p id="ed2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe ms mt mu mj b">removeEventListener</code>来移除监听器。</p><p id="b967" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">handleScroll</code>是我们的倾听者。</p><p id="72ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe ms mt mu mj b">window.scrollY</code>属性得到滚动距离。</p><p id="42ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe ms mt mu mj b">setState</code>来设置<code class="fe ms mt mu mj b">scrollY</code>状态，这样我们就可以在组件的任何地方使用它。</p><p id="3aa3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe ms mt mu mj b">componentWillUnmount</code>方法中，当组件卸载时，我们移除<code class="fe ms mt mu mj b">scroll</code>事件监听器。</p><p id="b26c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有一个函数组件，我们写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="05fc" class="mn lc iq mj b gy mo mp l mq mr">import React, { useState, useEffect } from "react"</span><span id="5dd8" class="mn lc iq mj b gy mv mp l mq mr">const ScrollingElement = () =&gt; {<br/>  const [scrollY, setScrollY] = useState(0);</span><span id="2985" class="mn lc iq mj b gy mv mp l mq mr">  function handleScroll() {<br/>    setScrollY(window.scrollY);<br/>  }</span><span id="1b02" class="mn lc iq mj b gy mv mp l mq mr">  useEffect(() =&gt; {<br/>    function watchScroll() {<br/>      window.addEventListener("scroll", handleScroll);<br/>    }<br/>    watchScroll();<br/><br/>    return () =&gt; {<br/>      window.removeEventListener("scroll", handleScroll);<br/>    };<br/>  }, []);</span><span id="c878" class="mn lc iq mj b gy mv mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;div&gt;{scrollY}px&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="ba8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该代码相当于类示例。</p><p id="784f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe ms mt mu mj b">useEffect</code>回调中添加监听来监听滚动事件。</p><p id="f307" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过移除回调中的监听器来停止监听，该监听器在<code class="fe ms mt mu mj b">useEffect</code>回调中返回。</p><p id="8acf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">处理程序调用<code class="fe ms mt mu mj b">setScrollY</code>函数来设置<code class="fe ms mt mu mj b">scrollY</code>状态。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/f5fc5bf80d7557e7fad55d769e893a3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2xIipqp2vYe2Xk_6"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@hg_photo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Herbert Goetsch </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="1e9b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="a188" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在 React 组件中直接嵌入 SVG，只要我们移除所有的命名空间标签。</p><p id="b345" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了监听滚动事件，我们在组件中附加了一个滚动事件监听器。</p></div></div>    
</body>
</html>