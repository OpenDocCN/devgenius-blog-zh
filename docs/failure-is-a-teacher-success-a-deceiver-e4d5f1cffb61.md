# 失败是老师；成功，一个骗子

> 原文：<https://blog.devgenius.io/failure-is-a-teacher-success-a-deceiver-e4d5f1cffb61?source=collection_archive---------6----------------------->

## 错误地通过单元测试可能是所有编写的代码中最糟糕的。

![](img/57ad65d2952a8f0777bb51cc087ef9d5.png)

照片由 [Brusk Dede](https://unsplash.com/@bruskrd?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

**tldr；**

*   不要因为你已经成功了一次，就认为你知道该怎么做。
*   保持谦逊。任何时候你遇到一个新想法，在你批评它或以你的方式推广它之前，先理解它。

# 欺骗性成功代码

错误地通过单元测试可能是所有编写的代码中最糟糕的。尽管只有一次，我确实偶然发现了一个类似这样的测试。

很明显，这是恶魔之子。如果您正在查看测试输出，它看起来就像是测试过的函数。问与答，从 CI/CD 工具查看报告可能不会注意到。然而，我更多时候看到的是类似这样的事情。

这种缺陷很微妙，有多种形式。这个测试通过 Jest 的当前状态。但是，如果您添加第二个`expect`语句:`expect(username).toBe("Mullen");`，测试将会失败。如果你写代码 TAD fashion(开发后测试),总有一天你会达到`toBeDefined()`,称之为好。事实上，你创造了一个谎言，这并不好。他会尽可能地撒谎，直到最后在某个端到端的测试中，问答变得暴躁。

旁注:这就是为什么 TDD 采取了“做出假设，然后验证它”的科学方法。在 TDD 中，你的第一个测试更可能是`expect(username).toBe("Mullen");`而不是`expect(username).toBeDefined()`。它并不完美，但更好。

第二点注意:问题是你需要`await user.getUsername()`来解决承诺。这在使用`done`回调的代码中更为常见。当没有运行任何`expect()`语句时，可以调用`done`。

![](img/856f533e10c23f0747bf160bd6be4716.png)

约书亚·厄尔在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# 欺骗性的成功经历

考虑团队领域的另一个例子。当我在一个特定的项目中时，我们花了数年时间与利益相关者建立信任，并围绕我们的开发过程建立严谨性。我们在一些场合让领导层感到自豪，并在多年的时间里慢慢提高了自动化和工具化的水平。我们确实设计了文档，我们有代码审查的清单，我们有很多项目和支持库的自动化 CI/CD。在这种环境下，我作为领导者的角色相当简单，压力也不大。我觉得很有成就感。我采用了 TAD 方法，并想，“嗯，这似乎是可行的，我将假设这是*的方式*。

但是成功就像一个局部最大值。栖息在我的小山丘上，通过许多次回顾，我去过山丘的两边，都带领*向下*。强化了我的立场，在这个小小的高度，在这个特殊的图像缩放水平，我是在顶峰。

有一天，我发现自己参与了一个新项目，面临许多挑战。我开始以在之前的项目中运作良好的相同方式运作，期望用我现有方式的已证明的力量来征服挑战。唯一被证明的是我的方法和这个新环境是多么的不匹配。新团队中几乎没有信任，严谨性必须从 0 开始，而不是我试图钻研的 100。

我过去的成功被*骗了。在团队开始之前，我在这个项目上持续了大约 5 周，我明白需要一种不同的方法。我离开去和一个开发人员一起做一个副业项目，一个不同的领导进来了，采取了一种相当不同的方法，但效果相当好。*

# 成功的问题

我是这样想的。当我们在某件事上取得成功时，我们并不真正知道*为什么*我们真的成功了。我们可能有想法，但这不是科学计算。在我读过的几本商业建议书中，他们用“你仍然需要运气”来告诫自己所说的话。他们说运气是一个不可或缺的因素。为什么？因为如果你拿一个人的成功为例，在相似的情况下对另一个人重复这些步骤，你很可能得不到成功的结果。每一个人和每一个环境都是独一无二的，不可能有一个详细的成功公式。

让我们比较一下制定计划的具体行为和项目管理的流动行为。一项计划的成功实施需要成千上万的部分和流程同步工作。我们可以说，成功取决于每个部分在正确的时间以正确的方式完成其定义的和有限的功能。在少数不可预测的变量中，天气可能是成功的最高风险因素，因为我们无法像控制自己的系统设计那样控制它。一个成功的项目可能有类似的成功定义。然而，在项目中，我们不可能解构系统来理解各个部分——也就是人。我们无法完全理解鲍勃是如何与爱丽丝互动的，或者爱丽丝是如何在鲍勃生病时顶替他的，或者爱丽丝和鲍勃是如何分享相同的背景，因此从来没有沟通问题。作为一名领导者，你可能有一个成功的项目，你可能看着它，就像看飞机一样，并认为你理解了构成成功的部分和过程。但是，成功是在骗你。你可能认为这是同行评审过程，但事实上，这是鲍勃。你可能认为是鲍勃，但事实上，这是同行评审过程。

![](img/ffad608afb751b9b3ee3aa08266498d7.png)

由 [Dev Asangbam](https://unsplash.com/@devasangbam?utm_source=medium&utm_medium=referral) 在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

# 失败的召唤

另一方面，失败需要被人知道。他要求真相。失败是你鞋子里的石头，你不能忽视它，直到你停下来，脱掉鞋子，把它抖落出来。在工程领域，我们有根本原因分析，我们有 5 个为什么的方法，我们有怪异的鱼骨图和测试框架，我们有围绕工具构建的工具来解决故障。但是我们只能在它发生的时候解决它*。*

*因此，我们必须*创造一个失败*来追求它。与成功不同，在大多数情况下，我们可以得到一个明确的答案，即为什么失败会发生。然后我们可以开始解决它。*

# *战胜成功*

*医生做模拟手术，军队做模拟任务(并使它们尽可能真实)，交易基本上是一个长时间的配对编程会话，直到你获得旅行者徽章。开发商做…嗯，我们做… TDD。好的，我们*说*我们做 TDD。但只有当我们不得不这样做，而且有人在看着的时候……领导者往往会先失败，然后满怀希望地学习，并有勇气坚持下去，不会灰心丧气。*

*他们说，在军队的某些领域，“如果你没有失败，说明你还不够努力”。这个想法是为了创造一种创造性测试和反自满的文化。在一个支持性的环境中失败也许是获得能力的最快途径。剔除成功谎言并从失败中学习真理的最快方法。*

*我们必须想办法让*成功，让*失败。在这里，我将避免谈论失败，因为它们与一个人的性格有关。让我们继续关注诚实的错误、天真和技能路径。*

*我们必须保持谦逊，不要让我们的自我(成功的密友，骗子)告诉我们失败是软弱的表现。我们不能让我们的自我玩弄我们的冒名顶替综合症，诱使我们隐藏或避免失败。*

*有一句老话说，“如果你不瞄准任何东西，你每次都会击中它”。另一个极端是目标过高，造成灾难性的问题，你无法从中恢复。所以我建议对代码和生活采用 TDD 方法。创建小假设或小实验。创建小环境来测试和测量这些假设和实验。有时，如果你能举办一次黑客马拉松，在内华达州的试验场尝试一些全新的、危险的东西，那就想尽一切办法去做吧！事实上，抓住机会尝试一些与你通常会做的相反的事情。但是为了您的代码和您所爱的人，请安全地完成它。*