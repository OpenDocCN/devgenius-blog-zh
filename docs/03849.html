<html>
<head>
<title>Adding SQLite.db file from the assets/internet (in Flutter).</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从资产/互联网添加 SQLite.db 文件(在 Flutter 中)。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/adding-sqlite-db-file-from-the-assets-internet-in-flutter-3ec42c14cd44?source=collection_archive---------0-----------------------#2020-12-25">https://blog.devgenius.io/adding-sqlite-db-file-from-the-assets-internet-in-flutter-3ec42c14cd44?source=collection_archive---------0-----------------------#2020-12-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e033d888edfb1c0e5271bfdececa0547.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZksSS_FA0NNHGfxg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">马库斯·温克勒在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="f92d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢这个令人敬畏的 flutter 社区，因为它喜欢我的第一篇关于状态栏和导航栏颜色定制的简单文章，这启发了我写下一篇文章。你可以在这里阅读那篇文章<a class="ae jz" href="https://medium.com/dev-genius/different-ways-to-change-the-status-bar-and-navigation-bar-color-ios-and-android-in-flutter-a786e098f573" rel="noopener"/>。</p><p id="76d8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您希望应用程序离线运行，那么在移动应用程序上本地存储数据是非常重要的。有多种方法可以做到这一点。今天我们将讨论如何在 Flutter 应用程序中使用现有的 SQLite 数据库。</p><p id="d1d0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们将寻找一种从资产导入数据库的方法。其次，我们将寻找一种从网络文件导入数据库的方法。如果我们的数据库很大，并且我们不希望我们的应用程序大得吓人，这是很方便的。</p><p id="6c25" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们开始:<br/>第一步是添加必要的包。</p><p id="17f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">1.sqflite 包<a class="ae jz" href="https://pub.dev/packages/sqflite" rel="noopener ugc nofollow" target="_blank"/>。(较新的 flutter 版本支持 flutter 框架中的 SQLite，不知道是从哪个版本开始的，我懒得去做那个研究。😜 ).<br/> 2。<a class="ae jz" href="https://pub.dev/packages/path_provider/" rel="noopener ugc nofollow" target="_blank">路径提供者</a>。(获取应用程序目录的路径)。或者您可以使用 SQLite 包中的 getDatabasesPath()(当我写这篇文章时，我不知道这是可能的，所以我没有测试过。)</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><ol class=""><li id="20bc" class="lf lg in kc b kd ke kh ki kl lh kp li kt lj kx lk ll lm ln bi translated">从资产添加 SQLite 数据库。</li></ol><p id="db32" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要添加您的<strong class="kc io"> <em class="lo"> database.db </em> </strong>文件，在根项目目录中创建一个名为 assets 的文件夹，并在 assets 下创建另一个名为 db 的目录，并在此添加数据库文件。</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lp"><img src="../Images/0eeebe388c13c3baa2c8f4d50d68fc06.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*lQCGdzifv_LqZfIjeL_Q9w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">这里的 eng_dictionary.db 和 nep_dict.sqlite3 是 db 文件。</figcaption></figure><p id="d77b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lo">(注意:flutter 插件 SQLite 两者都支持。db，. sqlite3，文件据我所知)</em></p><p id="faa0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在在 pubspec.yaml 中添加资产。</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/6693f8e00a0be2d35a847426836d74ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*YgChOPNv7HmCCOrqfcOpMQ.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在资产上添加字典。</figcaption></figure><p id="9881" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.为你的数据库表写一个模型。</p><p id="fead" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦我们有了数据库，我们就需要数据库文件中存在的表的模型。</p><p id="7a74" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，在关于数据库<strong class="kc io"><em class="lo">eng _ dictionary . db</em></strong>中，有一个名为<strong class="kc io"> <em class="lo"> words </em> </strong>的表，该表包含 6 列。要查看 db 文件中的数据，您可以使用<a class="ae jz" href="https://dbeaver.io/" rel="noopener ugc nofollow" target="_blank"> dbeaver </a>等工具。</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/24e12ef0f4f2d909c228abb76b1c0899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2nqlvmC2k0dMOypb5WTRsA.png"/></div></div></figure><p id="0404" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要为该表创建模型，您可以手动创建它。或者你可以使用工具自动生成模型，比如<a class="ae jz" href="https://app.quicktype.io/" rel="noopener ugc nofollow" target="_blank"> quicktype </a>。但是 quiketype 从 JSON 创建模型。因此，您可以将数据库从 dbeaver 导出到 JSON，并使用该 JSON 数据从<a class="ae jz" href="https://app.quicktype.io/" rel="noopener ugc nofollow" target="_blank"> quicktype </a>创建模型。</p><p id="6eb6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该模型将如下所示:</p><figure class="lq lr ls lt gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="749a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.现在让我们创建<strong class="kc io"> <em class="lo"> database_helper。dart </em> </strong>从资产创建并启动数据库。并执行数据库 crud 操作。</p><figure class="lq lr ls lt gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="313b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里的<strong class="kc io"><em class="lo">dictionarydatabasehelper . init()</em></strong>函数初始化数据库。为了提高性能，只有一次 DB 文件是第一次从资产文件中创建的。</p><p id="60c7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，如果您想使用托管在互联网上的数据库，您可以下载并初始化数据库，如下所示:</p><figure class="lq lr ls lt gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="f42f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">而函数<strong class="kc io"><em class="lo">dictionarydatabasehelper . getallthewordsenglish()</em></strong>函数从表<strong class="kc io"> <em class="lo">字</em> </strong>中得到所有行的<strong class="kc io"> <em class="lo"> en_word </em> </strong>和<strong class="kc io"><em class="lo">en _ definition</em></strong>。</p><p id="da90" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果数据库很大，这可能会严重影响性能。所以我建议在获取数据库时使用这些限制。您可以在 SQLite 中使用<em class="lo"> limit </em>来查询数据库:</p><figure class="lq lr ls lt gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="6afc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lo">注意:如果要做分页，总要用一个</em> <code class="fe ly lz ma mb b"><em class="lo">oderBy</em></code> <em class="lo">子句；否则，顺序是任意的。</em></p><p id="022c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">类似地，您可以在数据库上执行所有 CRUD 操作。</p><p id="59c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢大家阅读这篇文章。希望这有所帮助。请留下反馈，这样我可以改进我即将发表的文章。</p></div></div>    
</body>
</html>