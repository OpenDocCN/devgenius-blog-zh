<html>
<head>
<title>Cloudforming an Autoscaling NGINX server inside a custom VPC.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云在定制的 VPC 中形成自动扩展的 NGINX 服务器。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/cloudforming-an-autoscaling-nginx-server-inside-a-custom-vpc-be3510012dd7?source=collection_archive---------9-----------------------#2022-05-03">https://blog.devgenius.io/cloudforming-an-autoscaling-nginx-server-inside-a-custom-vpc-be3510012dd7?source=collection_archive---------9-----------------------#2022-05-03</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/8f032246dcbf44a369978b3a974afc1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qttgu3R9W3QIfHdxLwBX_g.png"/></div></div></figure><p id="d0fe" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">又见面了！本周，我们将构建一个 AWS CloudFormation 模板，它将构建一系列相关的 AWS 服务。这些服务包括:</p><ul class=""><li id="54ef" class="kx ky ir kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">VPC</li><li id="955a" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">自动缩放组</li><li id="0d8d" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">子网</li><li id="025e" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">路由表</li><li id="2c3a" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">互联网网关</li><li id="3aed" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">安全组</li><li id="3eb7" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">启动模板</li><li id="6111" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">云观察</li><li id="0696" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">EC2</li></ul><p id="dc91" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">哇，太多了，为什么要形成云呢？原因很简单，它允许您创建一个模板，将所有这些服务放在一个“堆栈”中一起使用，并且允许您一次性部署所有这些服务，一起配置！创建这个文档需要大量的查找片段、复制/粘贴和深入研究 AWS CloudFormation 文档。但是别担心，我们会度过难关的！</p><p id="073c" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">云形成堆栈由几个不同的部分组成:</p><ul class=""><li id="091c" class="kx ky ir kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">描述</li><li id="fdb7" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">[计]元数据</li><li id="9715" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">因素</li><li id="2731" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">规则</li><li id="d93c" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">映射</li><li id="28c0" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">情况</li><li id="178e" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">改变</li><li id="8f26" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">资源</li><li id="fb02" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">输出</li></ul><p id="ac2f" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">然而，对于我们的项目，我们只需要资源和输出。<em class="ll">请注意，最佳实践也将利用参数，而不是“硬编码”某些值，但是我决定直接将这些值混合在一起。</em></p><p id="c12a" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">资源将是我们创造所有以下需求的地方。</p><p id="a5d0" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">输出将是我们让堆栈扔给我们一些值的地方，所以我们可以验证事情是否按预期工作！</p><p id="ab27" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">让我们看一下我们的最终目标，然后我们将讨论如何实现它。</p><h1 id="df6d" class="lm ln ir bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">项目规格</h1><p id="47d3" class="pw-post-body-paragraph jz ka ir kb b kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw ik bi translated">对于这个项目，我们需要创建以下内容:</p><ul class=""><li id="b4bf" class="kx ky ir kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">CIDR 为 10.10.0.0/16 的自定义 VPC</li><li id="7b71" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">2 个子网</li><li id="ea6f" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">基于 CPU 使用率超过 80%的策略，自动扩展组可以从最少 2 个实例扩展到最多 5 个实例</li><li id="01fe" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">EC2 实例，使用 t2.micros 并安装 NGINX 来显示测试页面。</li></ul><p id="8477" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">该项目还基于几个假设:</p><ul class=""><li id="703a" class="kx ky ir kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">您有一个拥有控制台访问权限的 AWS IAM 用户(非超级用户)</li><li id="c84c" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">你有一个文本编辑器。最好是像 Visual Studio 代码这样的东西，它有一些很棒的特性，可以让生活变得更简单。</li></ul><p id="56f6" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">一旦我们将所有的拼图放入我们的 CloudFormation 文件(可以是 JSON 或 YAML)，我们将创建我们的堆栈，并运行一些验证测试。</p></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="dd7e" class="lm ln ir bd lo lp mw lr ls lt mx lv lw lx my lz ma mb mz md me mf na mh mi mj bi translated">我们开始吧！</h1><p id="3127" class="pw-post-body-paragraph jz ka ir kb b kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw ik bi translated">我们已登录 AWS 控制台，让我们导航到 CloudFormation 并选择“创建堆栈”。</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nb"><img src="../Images/f305719159faed5d7ad4968dddb68f47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dEAwgT1bBKKKsJ5fIPK_Nw.png"/></div></div></figure><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj ng"><img src="../Images/cac9a8f4251bf0d357094baa5416b573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ey1pcTvH696q6PNYueTziA.png"/></div></div></figure><p id="188e" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">如上图所示，我们将使用自己的文件创建堆栈。不要担心，稍后您将看到文件的样子。向导将让我们命名堆栈，我们将继续点击 next，直到实际的堆栈创建开始。对于这些照片，我的云层模板只是创建了一个 VPC，没有别的。这让我们看到了成功的过程是什么样的！(提示:这个项目有很多不成功的堆栈创建。在这个项目的创建过程中，许多咖啡豆受到了伤害。)</p><p id="680c" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">给它几分钟，我们可以在“事件”标签中看到一些生命。</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nh"><img src="../Images/253b2bc55a910d121533a16eeb230c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o27aAHELNI9Wy61FGSgMWw.png"/></div></div><figcaption class="ni nj gk gi gj nk nl bd b be z dk translated">右边的小刷新按钮允许您查看运行中的流程。</figcaption></figure><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nm"><img src="../Images/375dec5cb2b441b52b85f83b57ecf692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhZkVZme-GwghetR2ahmqA.png"/></div></div><figcaption class="ni nj gk gi gj nk nl bd b be z dk translated">万岁，今天是我们的了！</figcaption></figure><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nn"><img src="../Images/9c3969b3e61e8885c90836a4e7d3226b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-mSIih1ZDkZNbJu1MVfrA.png"/></div></div></figure><p id="4dab" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">现在我们已经使用模板创建了一个简单的 VPC，我们有几个选项。</p><ul class=""><li id="3948" class="kx ky ir kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated">使用设计器通过文本编辑器查看和编辑我们的模板</li><li id="f6e3" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">使用设计器通过拖放资源图形化编辑我们的模板</li><li id="93bf" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated">在我们选择的编辑器中编辑模板，然后重新上传。</li></ul><p id="1ee5" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">请注意，虽然第二种选择听起来容易得多……但是有一种简单的美，即在模板文件中没有一堆奇怪的元数据的情况下清理代码。但这只是我！</p></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="ed2a" class="lm ln ir bd lo lp mw lr ls lt mx lv lw lx my lz ma mb mz md me mf na mh mi mj bi translated">最长的一天</h1><p id="5f41" class="pw-post-body-paragraph jz ka ir kb b kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw ik bi translated">现在，在这个阶段，我们已经开始添加所有其他组件。老实说，这是这个项目最丑陋的部分。有这么多预先构建的模板，但是真正理解所有的部分是如何组合在一起的，当你需要为你的项目调整一个模板时，这是非常有价值的。</p><p id="1f99" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">即使试图一次添加一个小组件，我也会遇到一个又一个错误。幸运的是，我有一个了不起的教练团队支持我，给我指明正确的方向。</p><p id="abbd" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">这也是我学到的，有时候在官方文档中寻找比简单地使用谷歌更有效，因为不管你怎么说，你都会得到相同的页面。实际上并不是你所需要的页面！</p><p id="7513" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">但是继续，下面的代码是我目前的进展。我终于可以完全启动这个堆栈了，但是我仍然缺少一些参数来真正完成这个项目。</p></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><figure class="nc nd ne nf gu js"><div class="bz fq l di"><div class="no np l"/></div></figure></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><p id="e00a" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">现在有很多代码，你可能会觉得眼睛交叉，但如果我们*做*上传我们的模板，然后在 Designer 中打开，我们可以得到所有部分的酷视觉，以及它们如何连接。</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nq"><img src="../Images/4cda136e69184648585dd17fabb8df25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9QlmoLb_JhAJ0hMK_XxkuA.png"/></div></div></figure><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nr"><img src="../Images/a1bc84fc6f86e1e6a57a7c21b6eb5bda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WtyxCmTBEN2vRWcvpRXU4A.png"/></div></div><figcaption class="ni nj gk gi gj nk nl bd b be z dk translated">注意 MKVIII。这还不算在我决定加入我的光环天赋之前失败的那些。</figcaption></figure></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="0916" class="lm ln ir bd lo lp mw lr ls lt mx lv lw lx my lz ma mb mz md me mf na mh mi mj bi translated">最后冲刺！</h1><p id="f352" class="pw-post-body-paragraph jz ka ir kb b kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw ik bi translated">现在我们已经成功地部署了我们的堆栈，在我们尝试压力测试之前，我还需要解决一些问题。</p><p id="f9f4" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">首先，我们需要调整我们的 MJOLNIR 安全组，允许我们看到 EC2 NGINX 服务器托管的 html 页面。为此，我们将创建一个“变更集”。变更集可用于推出云形成堆栈的不同“版本”。请注意，我们只能从成功部署的堆栈中创建变更集。</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj ns"><img src="../Images/32863540400cd18f38df705caeb44987.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R0SdeSDxVhDhS5RpxDqS4A.png"/></div></div></figure><p id="7d45" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">这将把我们带到一个现在熟悉的屏幕，在这里可以选择上传模板文件，或者转到 Designer。老实说，在整个项目过程中，我在这两种方法之间来回切换，我更喜欢在自己的编辑器中编辑文件，然后上传。但这是它在设计器中的样子:</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nt"><img src="../Images/3d3cfa1ef282dff804ed010a66253db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3qYClLkmTN1Xh1OsdemlQ.png"/></div></div></figure><p id="6aaa" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">这一次，我选择在 Designer 中打开模板，并进行更改(#1)。然后，我将通过选择页面顶部的复选标记(#2)来验证模板，获得我们当天的确认(#3)，最后，创建堆栈(#4)。</p><p id="69c3" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">这将带我们命名变更集(通常用版本号或类似的东西)</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div class="gi gj nu"><img src="../Images/0df14b892f027c02b56b9242e0f16b4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*fZ93j4Rr1EbltOu-XGbuFA.png"/></div></figure><p id="5404" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">创建的下一个屏幕显示了变更集的概述页面。如果一切正常，我们可以选择“执行”变更集。</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nv"><img src="../Images/df974dd0941ee49412011fe2ae661391.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pv-7FVrYmx_YLBXb3_zpjQ.png"/></div></div></figure><p id="63cc" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">如果一切都乱了，快速确认该做什么:</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div class="gi gj nw"><img src="../Images/cb746915f3d81002d068095b40e6df35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*z3gB9XPzxe6QE4wVE5Matw.png"/></div></figure><p id="951e" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">…我们做到了！</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nx"><img src="../Images/e2ff6b66a347464670254396657234a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hOuqBVR9z8EMnItLQc6cCQ.png"/></div></div></figure></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="fd10" class="lm ln ir bd lo lp mw lr ls lt mx lv lw lx my lz ma mb mz md me mf na mh mi mj bi translated">确认</h1><p id="f1f7" class="pw-post-body-paragraph jz ka ir kb b kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw ik bi translated">现在，我们已经创建了所有的资源，点缀了所有的“我”,跨越了所有的“t”..让我们确保这东西能用！</p><p id="fff4" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">首先，简单的测试页面…导航到我们的 EC2 仪表板，并获取我们的一个实例的公共 IP 或 DNS，太棒了！</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj ny"><img src="../Images/950c0adf5e1bf3585b57cba801eb6084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j8EJWxzBjvJJ4otdrNY33Q.jpeg"/></div></div><figcaption class="ni nj gk gi gj nk nl bd b be z dk translated">是不是很美？</figcaption></figure><p id="9280" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">测试一个完整的✅</p><p id="7f32" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">最后，压力测试。在一系列启动命令中，有一个命令让我有点崩溃:<code class="fe nz oa ob oc b">sudo install stress</code></p><p id="c4df" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">作为参考，我必须运行的完整命令链如下:</p><ul class=""><li id="f813" class="kx ky ir kb b kc kd kg kh kk kz ko la ks lb kw lc ld le lf bi translated"><code class="fe nz oa ob oc b">sudo amazon-linux-extras install epel -y</code></li><li id="bfa1" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated"><code class="fe nz oa ob oc b">sudo yum install stress -y</code></li><li id="af7a" class="kx ky ir kb b kc lg kg lh kk li ko lj ks lk kw lc ld le lf bi translated"><code class="fe nz oa ob oc b">sudo stress --cpu 8 --vm-bytes $(awk '/MemAvailable/{printf "%d\n", $2 * 0.9;}' &lt; /proc/meminfo)k --vm-keep -m 1</code></li></ul><p id="ba17" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">我打开了我的 EC2/Instances 仪表板和 CloudWatch 警报仪表板，这样我就可以看到这种情况发生，几分钟后，我们成功了！</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div class="gi gj od"><img src="../Images/b25d75f8cbf28df4b82c33ea7f8c8f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*4ryRlBpaG9tVqzm6hnJw9Q.png"/></div><figcaption class="ni nj gk gi gj nk nl bd b be z dk translated">花了不少时间才到达那里！</figcaption></figure><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj oe"><img src="../Images/be26a5af43b282c007df294e1db9672e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tXWenwCQLvNerPse2j3fxA.png"/></div></div><figcaption class="ni nj gk gi gj nk nl bd b be z dk translated">正如所料，第三个实例已经初始化</figcaption></figure><p id="d348" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">让我们一起去看云吧…</p><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj of"><img src="../Images/ab881826b9a0fbedaffbd718ea9b81f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oQvHnfseFbS_Ek4RkNiOcA.png"/></div></div><figcaption class="ni nj gk gi gj nk nl bd b be z dk translated">这里我们可以看到我们创建的警报何时被触发！</figcaption></figure><figure class="nc nd ne nf gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj og"><img src="../Images/01bf2213f94610795e6a51e45cc64e84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVrcQhfES3Q2JP7sB37xMA.png"/></div></div><figcaption class="ni nj gk gi gj nk nl bd b be z dk translated">…以及正在执行的操作。</figcaption></figure></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><h1 id="bdb3" class="lm ln ir bd lo lp mw lr ls lt mx lv lw lx my lz ma mb mz md me mf na mh mi mj bi translated">结论</h1><p id="161a" class="pw-post-body-paragraph jz ka ir kb b kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks mo ku kv kw ik bi translated">朋友们，这是我迄今为止最大的挑战。我希望我能够在写作中保持足够的连贯性，因为项目的执行肯定不是这样！</p><p id="4ec6" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">但现在我们可以看到如何创建一个使用各种服务的云形成模板，到目前为止，我们真的只与小团体一起玩。谢谢你坚持和我在一起！</p></div><div class="ab cl mp mq hv mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ik il im in io"><p id="1c97" class="pw-post-body-paragraph jz ka ir kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ik bi translated">精益求精！</p></div></div>    
</body>
</html>