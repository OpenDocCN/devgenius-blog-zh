<html>
<head>
<title>How to start WordPress plugin development with Docker, Part 1: Docker and Admin Panel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Docker开始WordPress插件开发，第1部分:Docker和管理面板</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-start-wordpress-plugin-development-with-docker-part-1-docker-and-admin-panel-6ac9673c9a22?source=collection_archive---------2-----------------------#2021-04-14">https://blog.devgenius.io/how-to-start-wordpress-plugin-development-with-docker-part-1-docker-and-admin-panel-6ac9673c9a22?source=collection_archive---------2-----------------------#2021-04-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/478002ff448b4f284770582d939b7fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_jLctqZWXWRmhwDi"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">由<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jz" href="https://unsplash.com/@launchpresso?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Launchpresso </a>拍摄的照片</figcaption></figure><blockquote class="ka kb kc"><p id="37b8" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ig bi translated">“漂亮的设计、强大的功能，以及构建您想要的任何东西的自由。WordPress既是免费的，同时也是无价的。~ Wordpress.org</p></blockquote><p id="3684" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">如果你从事网络工作，你应该听说过WordPress。这是必须的！使用WordPress，你可以创建任何东西。</p><p id="6119" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">从一个新用户的角度来看，WordPress是一个不错的CMS:你安装一个主题，设置它，安装你需要的插件，你甚至可以使用插件来调整一些SEO方面。</p><p id="0149" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">从开发者的角度来看，就不一样了。WordPress就像一个框架。想一想，有了WordPress你就有了:</p><ul class=""><li id="0d7b" class="lf lg in kg b kh ki kl km lc lh ld li le lj lb lk ll lm ln bi translated"><strong class="kg io">路由</strong>:你可以随心所欲地编写你的自定义网址。</li><li id="4584" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">数据库接口:你有很多有用的功能，比如准备好的语句和参数清理。</li><li id="8630" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">模板化:你可以添加你自己的模板，扩展一个插件或者甚至分割视图，并且单独定义每个子视图。</li><li id="673f" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated"><strong class="kg io">媒体管理</strong>:无需编写代码即可处理图像、音频和视频。</li><li id="fb9b" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated"><strong class="kg io">认证/权限处理</strong>:角色管理可以随意调整。</li><li id="3b63" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">管理面板:你有一个可以扩展的漂亮的仪表板。您可以添加菜单、页面和设置，而无需重新构建任何内容。</li></ul><p id="02b5" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">它不是一个框架，但确实与此类似。从这个角度出发，开始设计我们的插件吧！</p><h1 id="5e32" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">WordPress的一次性开发环境🔧</h1><p id="87ea" class="pw-post-body-paragraph kd ke in kg b kh mr kj kk kl ms kn ko lc mt kr ks ld mu kv kw le mv kz la lb ig bi translated">如果你已经开发了"<em class="kf"> WordPress stuff </em>"，你应该已经有了一个你满意的开发环境，如果你不想改变，你可以跳过这一部分，直接进入生成器，但是如果你想有另一个视角，这里就是。如果你使用一个不同的策略，认为它更简单或者更有效，让我在评论中知道，它总是很感谢得到其他开发者的评论！</p><p id="b021" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">Docker社区维护着WordPress的官方形象:</p><ul class=""><li id="dc44" class="lf lg in kg b kh ki kl km lc lh ld li le lj lb lk ll lm ln bi translated">作为web服务器的Apache</li><li id="3ce3" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">PHP-FPM担任流程经理</li><li id="2302" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">WP-CLI作为命令行助手(不知道WP-CLI？发现它<a class="ae jz" href="https://wp-cli.org/it/" rel="noopener ugc nofollow" target="_blank">在这里</a></li><li id="63db" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">MySQL作为数据库管理系统</li><li id="31ab" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">PHPMyAdmin作为数据库浏览器实用程序</li></ul><p id="09f5" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这是一个有趣的事实:这些图片是<em class="kf">现成的</em>，你不需要知道docker如何在你的本地机器上使用它，你只需要按照步骤，启动图片，开发你的WordPress，最后清除一切。</p><p id="9be3" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">使用docker设置环境非常简单:</p><ul class=""><li id="7c99" class="lf lg in kg b kh ki kl km lc lh ld li le lj lb lk ll lm ln bi translated">docker的官方图片可以在Github 上找到<a class="ae jz" href="https://github.com/nezhar/wordpress-docker-compose.git" rel="noopener ugc nofollow" target="_blank">，你应该克隆这个<code class="fe mw mx my mz b">git clone <a class="ae jz" href="https://github.com/nezhar/wordpress-docker-compose.git" rel="noopener ugc nofollow" target="_blank">https://github.com/nezhar/wordpress-docker-compose.git</a></code>。</a></li><li id="4e83" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">进入克隆的文件夹，让docker用<code class="fe mw mx my mz b">docker-compose up -d</code>完成剩下的工作。</li></ul><p id="9cce" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这将触发docker从<a class="ae jz" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> DockerHub </a>获取图像，并捆绑您的环境。如果你查看文件夹内容，你应该看到一个<code class="fe mw mx my mz b">.env</code>文件:</p><pre class="na nb nc nd gt ne mz nf ng aw nh bi"><span id="6faa" class="ni lu in mz b gy nj nk l nl nm">IP=127.0.0.1<br/>DB_ROOT_PASSWORD=password<br/>DB_NAME=wordpress</span></pre><p id="a18b" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这个文件应该可以帮助你在构建之前调整这三个参数，以改变默认的图像行为。一旦docker完成，你只需要打开<code class="fe mw mx my mz b">localhost</code>，你的WordPress就准备好了！</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/e980982055b52623c5aeda617e78e5fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jn7eWsSjqPC6ETnFLZzABA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">使用Docker安装WordPress</figcaption></figure><p id="ac44" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">你的WordPress文件在<code class="fe mw mx my mz b">wp-app</code>文件夹里！</p><h1 id="bbde" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">WordPress插件样板文件生成器✏️</h1><p id="4c31" class="pw-post-body-paragraph kd ke in kg b kh mr kj kk kl ms kn ko lc mt kr ks ld mu kv kw le mv kz la lb ig bi translated">WordPress插件可以按照你的意愿构建，你可以把文件放在里面，没有特定的结构，如果你遵循了Codex中写的2/3规则，你的插件将会工作。如果你已经有了自己的结构，很好，继续，如果你想尝试一个新的结构或者你是第一次做，一个样板可以是一个很好的起点。</p><p id="7962" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">我尝试了不同的样板文件，我最喜欢的是<a class="ae jz" href="https://wppb.me/" rel="noopener ugc nofollow" target="_blank"><strong class="kg io">WPPB</strong></a><strong class="kg io"/><em class="kf">(WordPress插件样板文件)。</em></p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/d4f2111f66f806708c31a803a931fea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6pu0jp-_ZD9LfL85To-LGg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">wppb.me:样板文件生成器</figcaption></figure><p id="9612" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">要真正创新，让我们建立一个Hello World。</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/c4641f6db303bde193029135408cc5ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wWwVSZsaSeAZOX-4LHXb4A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">wppb.me</figcaption></figure><p id="4722" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">点击“构建插件”后，你会在你的下载文件夹中得到你的插件样本压缩文件！解压后，你会看到很多文件。它们被组织到3个方便的文件夹中:</p><ul class=""><li id="37cb" class="lf lg in kg b kh ki kl km lc lh ld li le lj lb lk ll lm ln bi translated"><code class="fe mw mx my mz b">admin</code>:行政相关人员所在位置。</li><li id="1a79" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated"><code class="fe mw mx my mz b">public</code>:公共相关的东西在哪里。</li><li id="087e" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">奇迹发生的地方。</li></ul><p id="c33f" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">我们将采用“<em class="kf">先使用，后学习</em>”的方法，这意味着我们将通过实践来学习，然后我们将通过检查该样板文件的确切工作流程来更深入地学习。</p><h1 id="d800" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">在您的本地环境中安装插件</h1><p id="b789" class="pw-post-body-paragraph kd ke in kg b kh mr kj kk kl ms kn ko lc mt kr ks ld mu kv kw le mv kz la lb ig bi translated">我们之前说过，你的本地WordPress环境位于<code class="fe mw mx my mz b">wp-app</code>文件夹，为了更快的开发你的插件，把插件文件夹复制到<code class="fe mw mx my mz b">wp-app/wp-content/plugins</code>，到<code class="fe mw mx my mz b"><a class="ae jz" href="http://localhost/wp-admin/plugins." rel="noopener ugc nofollow" target="_blank">http://localhost/wp-admin/plugins</a></code>T12。</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/16c796801f07e0ba396303dedb7201ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v7kOgUxNObee3sngrdVw3A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">安装的插件</figcaption></figure><p id="5ab2" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这个插件已经准备好被激活了，它的好处是你可以激活、开发、刷新并实时获得你刚刚做的事情。激活它并开始开发过程！</p><h1 id="4cc9" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">管理面板上的Hello world</h1><p id="95a8" class="pw-post-body-paragraph kd ke in kg b kh mr kj kk kl ms kn ko lc mt kr ks ld mu kv kw le mv kz la lb ig bi translated">要开始开发管理面板，您应该从<code class="fe mw mx my mz b">admin/class-kalizi-hello-world-admin.php</code>中的admin类开始。在<code class="fe mw mx my mz b">partials</code>文件夹里会有你对每一页的看法。要开始注册一个页面，首先在admin类中创建一个方法，这个方法包含页面的逻辑和视图，非常简单。</p><pre class="na nb nc nd gt ne mz nf ng aw nh bi"><span id="1a26" class="ni lu in mz b gy nj nk l nl nm">public function adminHello() {<br/>    include 'partials/kalizi-hello-world-admin-display.php';<br/>}</span></pre><p id="fdc7" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">如果你打开收录页面，会有很多评论，你可以把你的HTML代码放在PHP标签的开头，比如</p><pre class="na nb nc nd gt ne mz nf ng aw nh bi"><span id="8f82" class="ni lu in mz b gy nj nk l nl nm">&lt;h1&gt;Hello world&lt;/h1&gt;</span></pre><p id="9a22" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">但是这样，什么都没做，你应该通过<code class="fe mw mx my mz b"><a class="ae jz" href="https://developer.wordpress.org/reference/hooks/admin_menu/" rel="noopener ugc nofollow" target="_blank">admin_menu</a></code>钩子告诉WordPress你的页面。要注册一个钩子，您应该看一下<code class="fe mw mx my mz b">includes/class-kalizi-hello-world.php</code>，在那里您会发现一个名为<code class="fe mw mx my mz b">define_admin_hooks</code>的方法，在这里管理类被实例化，两个动作将脚本排队。为了注册菜单页面，我们应该在admin类中添加另一个方法来处理钩子。</p><pre class="na nb nc nd gt ne mz nf ng aw nh bi"><span id="4c11" class="ni lu in mz b gy nj nk l nl nm">public function register_menu() { }</span></pre><p id="c5cc" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">然后在<code class="fe mw mx my mz b">define_admin_hooks</code>里把它绑到钩子上:</p><pre class="na nb nc nd gt ne mz nf ng aw nh bi"><span id="b361" class="ni lu in mz b gy nj nk l nl nm">$this-&gt;loader-&gt;add_action( 'admin_menu', $plugin_admin, 'register_menu' );</span></pre><p id="72f2" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">在<code class="fe mw mx my mz b">register_menu</code>中，您可以使用<code class="fe mw mx my mz b"><a class="ae jz" href="https://developer.wordpress.org/reference/functions/add_menu_page/" rel="noopener ugc nofollow" target="_blank">add_menu_page</a></code>注册管理页面:</p><pre class="na nb nc nd gt ne mz nf ng aw nh bi"><span id="6de5" class="ni lu in mz b gy nj nk l nl nm">public function register_menu() {<br/>  <strong class="mz io">add_menu_page(<br/>   'Hello Page Title',<br/>   'Hello Menu',<br/>   'manage_options',<br/>   'hello_from_kalizi',<br/>   [ &amp;$this, 'adminHello' ]<br/>  );</strong><br/> }</span></pre><p id="e16c" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">其参数依次为:</p><ul class=""><li id="059e" class="lf lg in kg b kh ki kl km lc lh ld li le lj lb lk ll lm ln bi translated">页面标题。</li><li id="b6d7" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">菜单标题。</li><li id="6358" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">功能:这允许你控制谁可以访问什么，<code class="fe mw mx my mz b">manage_options</code>用户可以访问管理屏幕的权限(在这里<a class="ae jz" href="https://wordpress.org/support/article/roles-and-capabilities/#manage_options" rel="noopener ugc nofollow" target="_blank">检查它们</a>)。</li><li id="0636" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">菜单条。</li><li id="f093" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">可调用函数:这将遵循PHP <code class="fe mw mx my mz b">call_user_func</code>的方式，要调用一个方法你应该使用语法<code class="fe mw mx my mz b"><strong class="kg io">[$className, $methodName]</strong></code>。</li><li id="d44b" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">图标网址:这是可选的，你可以添加一个图标到你的文件，并通过<code class="fe mw mx my mz b">plugin_dir_url(__FILE__).’/path/to/image’</code>获得它的网址。</li><li id="d49b" class="lf lg in kg b kh lo kl lp lc lq ld lr le ls lb lk ll lm ln bi translated">位置:WordPress菜单遵循索引顺序，为了检查你的菜单顺序，你应该像在<a class="ae jz" href="https://codex.wordpress.org/Administration_Menus" rel="noopener ugc nofollow" target="_blank">管理页面文档</a>中一样使用<code class="fe mw mx my mz b">print_r($GLOBALS['menu')</code>。</li></ul><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/e78592cf0195110aac938d3451f8700c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*02kb8029X3yGVCovgeOw9g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">注册的菜单</figcaption></figure><p id="913f" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">一旦你点击它，这将调用包含视图的<code class="fe mw mx my mz b">adminHello</code>。</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/a345e61260af484b26d23069c0cf0a63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Wt2LR0CZhLYypKLCZCBsA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">你好世界</figcaption></figure><blockquote class="ka kb kc"><p id="28c0" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ig bi translated"><em class="in">🔥</em>现在是火的洗礼时间，孩子<em class="in">🔥</em></p></blockquote><h1 id="a085" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">数据库ˌ资料库💾</h1><p id="d344" class="pw-post-body-paragraph kd ke in kg b kh mr kj kk kl ms kn ko lc mt kr ks ld mu kv kw le mv kz la lb ig bi translated">如果你正在构建一个插件，除非你在做一些静态的东西，你应该需要一些表格。要摆放桌子，请看一下<code class="fe mw mx my mz b">includes/class-kalizi-hello-world-activator.php</code>。在那里，有一个叫做<code class="fe mw mx my mz b">activate</code>的方法，你应该把DB init逻辑放在那里。</p><p id="016c" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">要执行<code class="fe mw mx my mz b">CREATE</code>语句，你应该首先这样告诉WordPress:</p><pre class="na nb nc nd gt ne mz nf ng aw nh bi"><span id="b2d9" class="ni lu in mz b gy nj nk l nl nm">global $wpdb;<br/>require_once(ABSPATH . 'wp-admin/includes/upgrade.php');</span></pre><p id="a7f4" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">第一行将回忆起<code class="fe mw mx my mz b"><a class="ae jz" href="https://developer.wordpress.org/reference/classes/wpdb/" rel="noopener ugc nofollow" target="_blank">$wpdb</a></code>，WordPress数据库访问抽象类。</p><p id="ed33" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">第二行将要求<code class="fe mw mx my mz b">upgrade.php</code>使用<code class="fe mw mx my mz b"><a class="ae jz" href="https://developer.wordpress.org/reference/functions/dbdelta/" rel="noopener ugc nofollow" target="_blank">dbDelta</a></code>，这是一个用SQL修改数据库的函数。因此，要执行<code class="fe mw mx my mz b">CREATE</code>语句，您应该:</p><pre class="na nb nc nd gt ne mz nf ng aw nh bi"><span id="0af2" class="ni lu in mz b gy nj nk l nl nm">$query = "<br/><strong class="mz io"> CREATE TABLE IF NOT EXISTS {$wpdb-&gt;prefix}hello_from_the_database (<br/>  id BIGINT(20) NOT NULL AUTO_INCREMENT,<br/>  hello_from VARCHAR(20) NOT NULL,<br/>  hello_message LONGTEXT NOT NULL<br/>  PRIMARY KEY(id)<br/> ) {$wpdb-&gt;get_charset_collate()};</strong><br/>";<br/><strong class="mz io">dbDelta</strong>($query);<br/>if (! empty($wpdb-&gt;last_error)) {<br/> // <em class="kf">What you gonna do if this fails?</em><br/>}</span></pre><p id="7329" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">如果你已经在WordPress中，你应该知道所有的WordPress表格都有一个前缀，所以你也必须用<code class="fe mw mx my mz b">$wpdb-&gt;prefix</code>添加它，并且使用WP collate。</p><p id="8a1c" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">要执行查询，你必须再次调用<code class="fe mw mx my mz b">$wpdb</code>，你可以在<a class="ae jz" href="https://developer.wordpress.org/reference/classes/wpdb/" rel="noopener ugc nofollow" target="_blank"> WordPress文档中获得更多关于WPDB </a>的信息。</p><h1 id="a1ce" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">从行政，都是今天！</h1><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/1150e66cc56554e8c6dbb013079b08a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xJ2sWg6jn6BUszF2"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">斯蒂芬·菲利普斯-Hostreviews.co.uk在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="6558" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">一旦你了解了管理部分的基础知识，你就可以做任何你能想象到的事情，WordPress Documentation有很多动作你可以用委托的方法。</p><p id="ee55" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">如果你对这个部分有任何疑问，想了解更多关于wp-admin的信息或者对插件开发有任何疑问，请在下面留下评论。💬</p><p id="8370" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">请继续关注本系列的下一篇文章，我们将深入到样板文件中，讨论如何在公共部分做一些事情，如何使用ajax或您最喜欢的JS框架或库，以及更多的东西！如果你想让我专注于WP插件开发的某些方面，祝你愉快，请告诉我！☕️</p></div></div>    
</body>
</html>