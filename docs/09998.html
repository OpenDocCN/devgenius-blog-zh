<html>
<head>
<title>Python Environment management</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 环境管理</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/python-environment-management-d920f20ea53e?source=collection_archive---------3-----------------------#2022-09-28">https://blog.devgenius.io/python-environment-management-d920f20ea53e?source=collection_archive---------3-----------------------#2022-09-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c5bd" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Python 版本、虚拟环境、依赖性、包管理</h2></div><p id="878e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">曾几何时，开发人员的笔记本电脑上只有一个 Python 版本和一个 Python 环境，一切都运行得很完美。直到有一天，你需要处理多个项目，这些项目有不同的 Python 包需求，你的老板希望你的应用程序支持最新最好的 Python 版本。对于第一个问题，您可能已经使用 conda、venv、pip 来管理您的 Python 环境，对于第二个问题，您可以安装最新的 Python 版本。然而，如果呢</p><ol class=""><li id="434e" class="kz la in ke b kf kg ki kj kl lb kp lc kt ld kx le lf lg lh bi translated">您的应用程序需要支持多个 Python 版本</li><li id="2da0" class="kz la in ke b kf li ki lj kl lk kp ll kt lm kx le lf lg lh bi translated">您希望虚拟环境与 Python 项目相关联并随项目一起管理，而不必手动管理。</li></ol><p id="3fbb" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">注意，我们只讨论 Python 开发环境。对于部署，通常的做法应该是将 Python 依赖关系容器化，每个容器化的环境只支持一个版本。</p><h1 id="47ea" class="ln lo in bd lp lq lr ls lt lu lv lw lx jt ly ju lz jw ma jx mb jz mc ka md me bi translated">Python 版本管理</h1><p id="1b90" class="pw-post-body-paragraph kc kd in ke b kf mf jo kh ki mg jr kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">当你使用上面的<a class="ae ky" rel="noopener ugc nofollow" target="_blank" href="/interesting-python-tricks-77567d75e2bd">方法</a>安装 Python 时，Python 实际上是系统 Python，与你的项目无关。<a class="ae ky" href="https://realpython.com/intro-to-pyenv/" rel="noopener ugc nofollow" target="_blank"> pyenv </a>可以为你的项目创建本地 Python。链接解释了一个场景:一个项目需要支持 Python 3.6，并使用 3.8-dev 进行实验。可以使用“pyenv local&lt;project&gt;3 . 6 . 8”在不同 Python 版本之间快速切换。</p><figure class="ml mm mn mo gt mp gh gi paragraph-image"><a href="https://realpython.com/intro-to-pyenv/"><div class="gh gi mk"><img src="../Images/86bc372df63a26410ab2289fdb393099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xgxEMLD75xUfC6-6Brqzxw.png"/></div></a></figure><h1 id="4e9e" class="ln lo in bd lp lq lr ls lt lu lv lw lx jt ly ju lz jw ma jx mb jz mc ka md me bi translated">虚拟环境管理</h1><p id="7979" class="pw-post-body-paragraph kc kd in ke b kf mf jo kh ki mg jr kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated"><a class="ae ky" href="https://realpython.com/python-virtual-environments-a-primer/" rel="noopener ugc nofollow" target="_blank"> Python 虚拟环境</a>管理 Python 包。在项目环境中，你的项目正常运行所依赖的是依赖关系(例如 pandas，yaml 包，通常可以在<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> Python 包索引</a>中找到)。这方面的主要工具有:</p><ul class=""><li id="57be" class="kz la in ke b kf kg ki kj kl lb kp lc kt ld kx ms lf lg lh bi translated">virtualenv: Python 2 没有原生虚拟环境管理器，由 virtualenv 提供 venv:这是一个 Python 原生模块，用于创建轻量级虚拟环境。</li><li id="288b" class="kz la in ke b kf li ki lj kl lk kp ll kt lm kx ms lf lg lh bi translated">Pip:这是 Python 的包安装程序。您可以使用它从 Python 包索引和其他索引安装包。</li><li id="7b09" class="kz la in ke b kf li ki lj kl lk kp ll kt lm kx ms lf lg lh bi translated">Conda: Conda 是一个软件包和环境管理系统，可以在你的本地机器上创建、保存、加载和切换环境。它主要关注数据科学</li><li id="f4e5" class="kz la in ke b kf li ki lj kl lk kp ll kt lm kx ms lf lg lh bi translated">Pipenv:这是一个包管理器，用于管理 Python 项目的依赖性。</li><li id="3644" class="kz la in ke b kf li ki lj kl lk kp ll kt lm kx ms lf lg lh bi translated">诗歌:这是最近才出现的，通常被认为是用于项目依赖管理的简单 Python 工具。</li></ul><p id="769f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面的文章有一个表格来比较不同的工具</p><p id="28f2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">https://testdriven.io/blog/python-environments<br/>pipenv 和诗歌很有趣，因为他们和 pyenv 一起工作。他们很像<a class="ae ky" href="https://johnfraney.ca/blog/pipenv-poetry-benchmarks-ergonomics" rel="noopener ugc nofollow" target="_blank"/>但是诗歌甚至支持<a class="ae ky" href="https://www.earthinversion.com/utilities/easiest-way-to-publish-a-python-package-using-poetry/" rel="noopener ugc nofollow" target="_blank">发布你的包</a>到<a class="ae ky" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank"> PyPI </a>。</p><div class="mt mu gp gr mv mw"><a href="https://remastr.com/blog/pip-pipenv-poetry-comparison" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">发展您的业务- Remastr</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">在开发 Django 应用程序时，有几种方法可以管理项目依赖关系。在本文中，它…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">remastr.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk mq mw"/></div></div></a></div><p id="21c6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用 poems<br/>* py project . toml 作为中央配置文件的好处<br/> *一个配置文件用于所有依赖项及其配置<br/> *无需手动创建和管理虚拟环境<br/> *自动解析已安装插件的依赖项</p><p id="0aa8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最流行的 Python IDE 之一 Pycharm 集成了一些工具，例如<a class="ae ky" href="https://www.jetbrains.com/help/pycharm/creating-virtual-environment.html" rel="noopener ugc nofollow" target="_blank"> virtualenv </a>、<a class="ae ky" href="https://www.jetbrains.com/help/pycharm/conda-support-creating-conda-virtual-environment.html" rel="noopener ugc nofollow" target="_blank"> conda </a>、<a class="ae ky" href="https://www.jetbrains.com/help/pycharm/pipenv.html" rel="noopener ugc nofollow" target="_blank"> pipenv </a>、<a class="ae ky" href="https://www.jetbrains.com/help/pycharm/poetry.html" rel="noopener ugc nofollow" target="_blank">poetics</a>。这里还有一篇<a class="ae ky" href="https://www.pythoncheatsheet.org/blog/python-projects-with-poetry-and-vscode-part-1" rel="noopener ugc nofollow" target="_blank"> VSCode 带诗</a>的文章，也表明了这些工具的流行。</p><h1 id="f6c7" class="ln lo in bd lp lq lr ls lt lu lv lw lx jt ly ju lz jw ma jx mb jz mc ka md me bi translated">试用 pyenv</h1><p id="be7f" class="pw-post-body-paragraph kc kd in ke b kf mf jo kh ki mg jr kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">让我们看看 pyenv 支持基于项目的 Python 版本管理有多容易。我在用谷歌 Colab。</p><h2 id="fd52" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">安装 pyenv</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="ce68" class="nl lo in ny b gy oc od l oe of">#<a class="ae ky" href="https://github.com/pyenv/pyenv-installer" rel="noopener ugc nofollow" target="_blank">https://github.com/pyenv/pyenv-installer</a><br/>!curl <a class="ae ky" href="https://pyenv.run" rel="noopener ugc nofollow" target="_blank">https://pyenv.run</a> | bash</span></pre><h2 id="7be8" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">初始化 pyenv</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="776a" class="nl lo in ny b gy oc od l oe of">!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; eval "$(pyenv init — path)"</span></pre><p id="1c2d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果:您可以看到 pyenv 在“$HOME/”下有自己的文件夹。pyenv "</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="9ba0" class="nl lo in ny b gy oc od l oe of"># Load pyenv automatically by appending<br/># the following to <br/>your shell's login startup file (for login shells)<br/>and your shell's interactive startup file (for interactive shells) :</span><span id="e7e4" class="nl lo in ny b gy og od l oe of">export PYENV_ROOT="$HOME/.pyenv"<br/>command -v pyenv &gt;/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"<br/>eval "$(pyenv init -)"</span><span id="f783" class="nl lo in ny b gy og od l oe of"># Restart your shell for the changes to take effect.</span></pre><h2 id="1e4e" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">检查 pyenv 支持的 Python 版本</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="ff0a" class="nl lo in ny b gy oc od l oe of">!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; pyenv install -list | grep "3\.[89]"</span></pre><p id="a206" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果:以下是使用 pyenv 的可安装和可管理的 Python 版本。</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="59ba" class="nl lo in ny b gy oc od l oe of">  3.8.0<br/>  3.8-dev<br/>  3.8.1<br/>  3.8.2<br/>  3.8.3<br/>  3.8.4<br/>  3.8.5<br/>  3.8.6<br/>  3.8.7<br/>  3.8.8<br/>  3.8.9<br/>  3.8.10<br/>  3.8.11<br/>  3.8.12<br/>  3.8.13<br/>  3.9.0<br/>  3.9-dev<br/>  3.9.1<br/>  3.9.2<br/>  3.9.4<br/>  3.9.5<br/>  3.9.6<br/>  3.9.7<br/>  3.9.8<br/>  3.9.9<br/>  3.9.10<br/>  3.9.11<br/>  3.9.12<br/>  3.9.13<br/>  miniconda-3.8.3<br/>  miniconda-3.9.1<br/>  miniconda3-3.8.3<br/>  ...</span></pre><h2 id="de75" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">安装 Python 3.9.10，列出 pyenv 管理的 Python 版本</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="59b5" class="nl lo in ny b gy oc od l oe of"># install python 3.9.10<br/>!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; pyenv install 3.9.10<br/>!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; pyenv versions</span></pre><p id="c7cb" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="99d6" class="nl lo in ny b gy oc od l oe of">Downloading Python-3.9.10.tar.xz...<br/>-&gt; <a class="ae ky" href="https://www.python.org/ftp/python/3.9.10/Python-3.9.10.tar.xz" rel="noopener ugc nofollow" target="_blank">https://www.python.org/ftp/python/3.9.10/Python-3.9.10.tar.xz</a><br/>Installing Python-3.9.10...<br/>WARNING: The Python ctypes extension was not compiled. Missing the libffi lib?<br/>Installed Python-3.9.10 to /root/.pyenv/versions/3.9.10<br/># pyenv list<br/>system<br/>* 3.9.10 (set by /content/.python-version)</span></pre><h2 id="1afe" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">创建项目 1，设置 Python 版本并列出 Python 版本</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="ee06" class="nl lo in ny b gy oc od l oe of">!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; mkdir -p /content/project1 &amp;&amp; cd /content/project1 &amp;&amp; pyenv virtualenv 3.9.10 project1<br/>!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; pyenv versions</span></pre><p id="e1e7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="aa35" class="nl lo in ny b gy oc od l oe of">  system<br/>* 3.9.10 (set by /content/.python-version)<br/>  3.9.10/envs/project1<br/>  project1</span></pre><h2 id="2307" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">检查项目 1 与哪个 Python 版本相关联</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="c880" class="nl lo in ny b gy oc od l oe of">export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; pyenv local project1 &amp;&amp; pyenv which python<br/>!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; eval "$(pyenv init --path)" &amp;&amp; pyenv local project1 &amp;&amp; cd /content/project1 &amp;&amp; python -V</span></pre><p id="13bf" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果:当我们使用“pyenv 本地项目 1”时，它使用的是项目 1 的相关 Python。</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="88aa" class="nl lo in ny b gy oc od l oe of">/root/.pyenv/versions/project1/bin/python<br/>Python 3.9.10</span></pre><h2 id="2bb2" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">安装 Python 3.8.10，项目 2 将使用它</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="9459" class="nl lo in ny b gy oc od l oe of">!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; pyenv install 3.8.10</span></pre><h2 id="4b32" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">立即列出版本</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="b779" class="nl lo in ny b gy oc od l oe of">!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; pyenv versions</span></pre><p id="b695" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果:我们现在在 pyenv 列表中有 3.8.10，但是全局 Python 仍然是 3.9.10</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="c89c" class="nl lo in ny b gy oc od l oe of">  system<br/>  3.8.10<br/>* 3.9.10 (set by /content/.python-version)<br/>  3.9.10/envs/project1<br/>  project1</span></pre><p id="0bf8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是项目 2 可以通过以下命令使用 Python 3.8.10</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="27e6" class="nl lo in ny b gy oc od l oe of">!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; eval "$(pyenv init --path)" &amp;&amp; mkdir -p /content/project2 &amp;&amp; cd /content/project2 &amp;&amp; pyenv local 3.8.10 <br/>&amp;&amp; python -V</span></pre><p id="eb61" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="4e93" class="nl lo in ny b gy oc od l oe of">Python 3.8.10</span></pre><h1 id="9181" class="ln lo in bd lp lq lr ls lt lu lv lw lx jt ly ju lz jw ma jx mb jz mc ka md me bi translated">尝试诗歌</h1><h2 id="8fd0" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">安装</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="ca6b" class="nl lo in ny b gy oc od l oe of">!curl -sSL <a class="ae ky" href="https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py</a> | python3 -</span></pre><h2 id="4749" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">创建一个包</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="51ad" class="nl lo in ny b gy oc od l oe of">!source $HOME/.poetry/env &amp;&amp; poetry new my-package</span></pre><h2 id="646f" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">查看包配置</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="b184" class="nl lo in ny b gy oc od l oe of">!cat my-package/pyproject.toml</span></pre><p id="807e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="dd31" class="nl lo in ny b gy oc od l oe of">[tool.poetry]<br/>name = "my-package"<br/>version = "0.1.0"<br/>description = ""<br/>authors = ["Your Name &lt;you@example.com&gt;"]<br/><br/>[tool.poetry.dependencies]<br/>python = "^3.7"<br/><br/>[tool.poetry.dev-dependencies]<br/>pytest = "^5.2"<br/><br/>[build-system]<br/>requires = ["poetry-core&gt;=1.0.0"]<br/>build-backend = "poetry.core.masonry.api"</span></pre><h2 id="3df6" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">用诗歌来建造包裹</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="3961" class="nl lo in ny b gy oc od l oe of">!cd /content/my-package &amp;&amp; source $HOME/.poetry/env &amp;&amp; poetry build<br/>!ls /content/my-package<br/>!ls /content/my-package/dist</span></pre><p id="771d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="4573" class="nl lo in ny b gy oc od l oe of">dist  my_package  poetry.lock  pyproject.toml  README.rst  tests<br/>my_package-0.1.0-py3-none-any.whl  my-package-0.1.0.tar.gz</span></pre><h2 id="5cfb" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">添加包依赖项</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="c055" class="nl lo in ny b gy oc od l oe of">!cd /content/my-package &amp;&amp; source $HOME/.poetry/env &amp;&amp; poetry add PyYAML==6.0</span></pre><h2 id="eb04" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">诗歌自动更新包配置</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="f7c9" class="nl lo in ny b gy oc od l oe of">!cat my-package/pyproject.toml</span></pre><p id="b00d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果:诗歌在 tool . poem . dependencies 中添加 PyYAML</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="4ff9" class="nl lo in ny b gy oc od l oe of">[tool.poetry]<br/>name = "my-package"<br/>version = "0.1.0"<br/>description = ""<br/>authors = ["Your Name &lt;<a class="ae ky" href="mailto:you@example.com" rel="noopener ugc nofollow" target="_blank">you@example.com</a>&gt;"]</span><span id="c003" class="nl lo in ny b gy og od l oe of">[tool.poetry.dependencies]<br/>python = "^3.7"<br/><strong class="ny io"><em class="oh">PyYAML = "6.0"</em></strong></span><span id="8bb4" class="nl lo in ny b gy og od l oe of">[tool.poetry.dev-dependencies]<br/>pytest = "^5.2"</span><span id="65a9" class="nl lo in ny b gy og od l oe of">[build-system]<br/>requires = ["poetry-core&gt;=1.0.0"]<br/>build-backend = "poetry.core.masonry.api"</span></pre><p id="567f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更新依赖项，诗歌更新包配置</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="3c94" class="nl lo in ny b gy oc od l oe of">!cd /content/my-package &amp;&amp; source $HOME/.poetry/env &amp;&amp; poetry add PyYAML==6.0b1<br/>!cat my-package/pyproject.toml</span></pre><p id="8297" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="5261" class="nl lo in ny b gy oc od l oe of">[tool.poetry]<br/>name = "my-package"<br/>version = "0.1.0"<br/>description = ""<br/>authors = ["Your Name &lt;you@example.com&gt;"]<br/><br/>[tool.poetry.dependencies]<br/>python = "^3.7"<br/><strong class="ny io"><em class="oh">PyYAML = "6.0b1"</em></strong><br/><br/>[tool.poetry.dev-dependencies]<br/>pytest = "^5.2"<br/><br/>[build-system]<br/>requires = ["poetry-core&gt;=1.0.0"]<br/>build-backend = "poetry.core.masonry.api"</span></pre><h2 id="ccfb" class="nl lo in bd lp nm nn dn lt no np dp lx kl nq nr lz kp ns nt mb kt nu nv md nw bi translated">诗与诗的融合</h2><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="26f1" class="nl lo in ny b gy oc od l oe of"># <a class="ae ky" href="https://python-poetry.org/docs/managing-environments/" rel="noopener ugc nofollow" target="_blank">https://python-poetry.org/docs/managing-environments/</a><br/>!export PYENV_ROOT="$HOME/.pyenv" &amp;&amp; export PATH="$PYENV_ROOT/bin:$PATH" &amp;&amp; eval "$(pyenv init --path)" &amp;&amp; pyenv local project1 &amp;&amp; cd /content/my-package &amp;&amp; source $HOME/.poetry/env &amp;&amp; poetry env use $(pyenv which python) &amp;&amp; poetry env info</span></pre><p id="d914" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">结果</p><pre class="ml mm mn mo gt nx ny nz oa aw ob bi"><span id="ac11" class="nl lo in ny b gy oc od l oe of">Creating virtualenv my-package-wwvm3iRB-py3.9 in /root/.cache/pypoetry/virtualenvs<br/>Using virtualenv: /root/.cache/pypoetry/virtualenvs/my-package-wwvm3iRB-py3.9<br/><br/><strong class="ny io">Virtualenv</strong><br/>Python:         3.9.10<br/>Implementation: CPython<br/>Path:           /root/.cache/pypoetry/virtualenvs/my-package-wwvm3iRB-py3.9<br/>Valid:          True<br/><br/><strong class="ny io">System</strong><br/>Platform: linux<br/>OS:       posix<br/>Python:   /root/.pyenv/versions/3.9.10</span></pre><h1 id="6b52" class="ln lo in bd lp lq lr ls lt lu lv lw lx jt ly ju lz jw ma jx mb jz mc ka md me bi translated">附录</h1><div class="mt mu gp gr mv mw"><a href="https://www.cyberithub.com/python-introduction-to-pipenv-and-poetry-with-examples/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">python:Pipenv 和诗歌介绍及最佳范例| CyberITHub</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">在本教程中，我们将研究两个著名的 Python 包管理器 pipenv 和 poems。在 python 世界中…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.cyberithub.com</p></div></div><div class="nf l"><div class="oi l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://medium.com/@sri_40116/starting-with-pyenv-poetry-for-python-development-9180720bbed5" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">Python 开发从 pyenv &amp; poem 开始</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">Python 是数据科学社区中使用最广泛的编程语言之一。虽然 Python 有…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">medium.com</p></div></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://serpapi.com/blog/python-virtual-environments-using-virtualenv-and-poetry/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">使用虚拟和诗歌的 Python 虚拟环境教程</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">这篇博文讲的是什么这篇博文大部分是针对没有与之共事的人。在这里你会发现…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">serpapi.com</p></div></div><div class="nf l"><div class="oj l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://dev.to/bowmanjd/python-tools-for-managing-virtual-environments-3bko" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">用于管理虚拟环境的 Python 工具</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">Python 虚拟环境是“一个自包含的目录树，其中包含针对特定应用程序的 Python 安装……</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">开发到</p></div></div><div class="nf l"><div class="ok l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://pythonspeed.com/articles/conda-vs-pip/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">pip vs Conda:Python 两种打包系统的深入比较</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">如果您在数据科学或科学计算领域使用 Python，您将很快发现 Python 有两个…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">pythonspeed.com</p></div></div><div class="nf l"><div class="ol l nh ni nj nf nk mq mw"/></div></div></a></div><p id="3a57" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">据我所知，<a class="ae ky" href="https://docs.conda.io/en/latest/" rel="noopener ugc nofollow" target="_blank"> conda </a>在数据科学界非常受欢迎，尤其是因<a class="ae ky" href="https://www.anaconda.com/products/distribution" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>而受欢迎。</p><div class="mt mu gp gr mv mw"><a href="https://whiteboxml.com/blog/the-definitive-guide-to-python-virtual-environments-with-conda" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">使用 conda - WhiteBox 的 Python 虚拟环境指南</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">有两种类型的数据科学家，一种是花时间掌握 conda 的，另一种是没花时间掌握 conda 的</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">whiteboxml.com</p></div></div><div class="nf l"><div class="om l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://www.freecodecamp.org/news/manage-multiple-python-versions-and-virtual-environments-venv-pyenv-pyvenv-a29fb00c296f" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">如何管理多个 Python 版本和虚拟环境</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">2019 年 1 月补充:如果你在升级到 macOS Mojave 后回到这个博客，请查看这个 github 问题…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.freecodecamp.org</p></div></div><div class="nf l"><div class="on l nh ni nj nf nk mq mw"/></div></div></a></div><p id="4387" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">*多个 Python 版本:在同一台机器上安装不同的 Python，例如 2.7 和 3.4。<br/> *虚拟环境:隔离的独立环境，可以安装特定版本的 Python 和任何特定于项目的包，而不影响任何其他项目。<br/>如果您使用的是单一版本的 Python，比如 3.3+版本，并且想要管理不同的虚拟环境，那么 venv 就是您所需要的。<br/>如果你想在 3.3+中使用多个版本的 Python，不管有没有虚拟环境，那么继续阅读 pyenv。如果你也想使用 Python 2，那么 pyenv-virtualenv 是一个可以考虑的工具。</p><div class="mt mu gp gr mv mw"><a href="https://medium.com/semantixbr/getting-started-with-conda-or-poetry-for-data-science-projects-1b3add43956d" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">数据科学项目的 Conda 或诗歌入门</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">如何在 Python 中管理虚拟环境、包和依赖关系，并使用 Conda 启动您的数据科学项目</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">medium.com</p></div></div><div class="nf l"><div class="oo l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://stackoverflow.com/questions/38217545/what-is-the-difference-between-pyenv-virtualenv-anaconda" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">pyenv，virtualenv，anaconda 有什么区别？</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">我是一名试图学习 python 的 ruby 程序员。我非常熟悉 pyenv，因为它就像是从……复制和粘贴</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">stackoverflow.com</p></div></div><div class="nf l"><div class="op l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://towardsdatascience.com/python-the-system-path-and-how-conda-and-pyenv-manipulate-it-234f8e8bbc3e" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">Python，系统路径以及 conda 和 pyenv 如何操纵它</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">深入探究当您在 shell 中键入“python”时会发生什么，以及流行的环境管理工具如何操纵…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="oq l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://blogs.sap.com/2022/05/08/why-you-should-use-poetry-instead-of-pip-or-conda-for-python-projects/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">为什么在 Python 项目中应该使用诗歌而不是 Pip 或 Conda</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">依赖管理是任何编程项目的一个重要方面，它要求我们使用…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">blogs.sap.com</p></div></div><div class="nf l"><div class="or l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://ealizadeh.com/blog/guide-to-python-env-pkg-dependency-using-conda-poetry" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">Python 环境、依赖和包管理指南:Conda +诗歌</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">如果您在不同的开发阶段从事多个 Python 项目，您可能会有不同的环境…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">ealizadeh.com</p></div></div><div class="nf l"><div class="os l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://github.com/python-poetry/poetry/issues/105" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">Conda 兼容性问题# 105 python-诗歌/诗歌</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">嗨！我试着在我的 miniconda env 旁边安装诗歌。它是通过 curl 安装程序安装的。起初，似乎…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">github.com</p></div></div><div class="nf l"><div class="ot l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://www.activestate.com/blog/which-python-dependency-manager-should-i-choose/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">我应该选择哪个 Python 依赖管理器？-活动状态</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">Python 的美妙之处之一是它全面的库生态系统，通常称为包。他们…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.activestate.com</p></div></div><div class="nf l"><div class="ou l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://www.adaltas.com/en/2021/06/09/pyrepo-project-initialization/" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">现代 Python 第 1 部分:用 pyenv &amp; poem 开始一个项目</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">当学习一门编程语言时，重点基本上是理解语法、代码风格和…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.adaltas.com</p></div></div><div class="nf l"><div class="ov l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://ahmed-nafies.medium.com/pip-pipenv-poetry-or-conda-7d2398adbac9" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">Pip，Pipenv，诗歌或康达</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">2020 年用哪个 python 包管理器？pip 的替代方案。</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">ahmed-nafies.medium.com</p></div></div><div class="nf l"><div class="ow l nh ni nj nf nk mq mw"/></div></div></a></div><p id="cd68" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面的文章讲述了每个工具的典型工作流程，容易上手<br/><a class="ae ky" href="https://github.com/python-poetry/poetry/issues/5252" rel="noopener ugc nofollow" target="_blank">https://github.com/python-poetry/poetry/issues/5252</a></p><div class="mt mu gp gr mv mw"><a href="https://towardsdatascience.com/python-environment-101-1d68bda3094d" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">Python 环境 101</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">pyenv 和 pipenv 有何不同，何时应该使用它们</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="ox l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://towardsdatascience.com/a-guide-to-python-environment-dependency-and-package-management-conda-poetry-f5a6c48d795" rel="noopener follow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">Python 环境、依赖和包管理指南:Conda +诗歌</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">如何将包自动添加到您的环境文件中，而不必担心依赖关系</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">towardsdatascience.com</p></div></div><div class="nf l"><div class="oy l nh ni nj nf nk mq mw"/></div></div></a></div><div class="mt mu gp gr mv mw"><a href="https://betterprogramming.pub/5-reasons-why-poetry-beats-pip-python-setup-6f6bd3488a04" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">诗歌击败 Pip Python 设置的 5 个原因</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">通过切换到诗歌的依赖性和虚拟环境管理，使您的 python 开发过程现代化。</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">better 编程. pub</p></div></div><div class="nf l"><div class="oz l nh ni nj nf nk mq mw"/></div></div></a></div><p id="9cac" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Dev dependencies，npm package.json 配置文件<br/><a class="ae ky" href="https://python.plainenglish.io/poetry-a-better-version-of-python-pipenv-561611a029d1" rel="noopener ugc nofollow" target="_blank">https://python . plain English . io/poem-a-better-version-of-python-pipenv-561611 a029 D1</a></p><p id="9c6b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用 PEP 518 推出的新标准 pyproject.toml 文件管理项目的依赖列表和各种元信息，用于替换 Pipfile、requirements.txt、setup.py、setup.cfg、MANIFEST.in 等各种配置文件。<br/> *依赖关系有两种类型，生产环境和开发依赖关系。例如 pytest</p></div></div>    
</body>
</html>