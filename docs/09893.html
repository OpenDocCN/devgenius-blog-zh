<html>
<head>
<title>Ruby Selection &amp; Transformation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby 选择和转换</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ruby-selection-e12ec35ba79e?source=collection_archive---------7-----------------------#2022-09-20">https://blog.devgenius.io/ruby-selection-e12ec35ba79e?source=collection_archive---------7-----------------------#2022-09-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c4f8c5633b647d77e9676348edabc1df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qb4rALczfHxcgp4b"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">粘土堤</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="9bef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">除了迭代之外，对集合最常见的两种操作是选择和转换。</p><p id="f2e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">选择是基于某种标准从集合中选择特定元素的过程。例如，从一个数组中选择所有奇数。相反，转换指的是操作集合中的每个元素。例如，将所有数组元素的值增加 1。如果集合包含<code class="fe ky kz la lb b">n</code>元素，选择返回<code class="fe ky kz la lb b">n</code>或更少，而转换总是返回正好<code class="fe ky kz la lb b">n</code>元素。使用这两个操作，我们几乎可以对集合做任何事情。因此，不仅要了解如何执行这些操作，还要提高熟练程度，以便能够快速、流畅地使用收藏，这一点至关重要。</p><p id="05ff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">选择和转换都利用了循环的基本原理:一个循环、一个计数器、一个检索当前值的方法和一个退出循环的方法。记住这四点。此外，选择和转化都需要一些标准；选择使用这些标准来确定选择哪些元素，而转换使用这些标准来确定如何执行转换。</p><blockquote class="lc"><p id="4b78" class="ld le in bd lf lg lh li lj lk ll kx dk translated">“我把这个原则叫做自然选择，根据这个原则，每一个细微的变化，如果有用的话，都会被保存下来。”</p><p id="d7c0" class="ld le in bd lf lg lh li lj lk ll kx dk translated"><strong class="ak"> —查尔斯·达尔文</strong></p></blockquote></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><h1 id="d408" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">选择</h1><p id="bae3" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">Ruby 中的<code class="fe ky kz la lb b">select</code>方法可以用来过滤对象数组。例如，在一个列表中，您可以找到所有偶数。没有<code class="fe ky kz la lb b"> select</code>，看起来是这样的:</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><h2 id="9465" class="nc lu in bd lv nd ne dn lz nf ng dp md kl nh ni mh kp nj nk ml kt nl nm mp nn bi translated">选择方法</h2><p id="1838" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">使用 select 时需要一个块。您必须在块中返回计算结果为 true 或 false 的值，select 将使用该值来过滤您的数组。</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6b50" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将做与第一个例子相同的事情，但是代码要少得多。</p><p id="7e39" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您也可以将<code class="fe ky kz la lb b">select</code>与哈希一起使用:</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="5848" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">其中<code class="fe ky kz la lb b">k</code>代表键&amp; <code class="fe ky kz la lb b">v</code>代表值。</p><h2 id="e071" class="nc lu in bd lv nd ne dn lz nf ng dp md kl nh ni mh kp nj nk ml kt nl nm mp nn bi translated">用索引选择</h2><p id="fbf0" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">您可以将 select 方法与任何其他可枚举方法结合使用。</p><p id="3b5d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最显著的是<code class="fe ky kz la lb b">with_index</code>。</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="3b37" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这使您能够使用索引而不是对象(在本例中为字符串)进行筛选。</p><h2 id="07e9" class="nc lu in bd lv nd ne dn lz nf ng dp md kl nh ni mh kp nj nk ml kt nl nm mp nn bi translated">破坏性选择</h2><p id="6d77" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">当您在数组上使用 select 时，它总是会创建一个新数组。</p><p id="34cc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">相反，您可以使用<code class="fe ky kz la lb b">select!</code>方法来修改原始数组。</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><h2 id="a1ce" class="nc lu in bd lv nd ne dn lz nf ng dp md kl nh ni mh kp nj nk ml kt nl nm mp nn bi translated">选择与查找</h2><p id="da0b" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">当你想过滤一个列表并得到一组结果时,<code class="fe ky kz la lb b">select</code>是很有用的。但是如果只需要找一个对象呢？可以用<code class="fe ky kz la lb b">find</code>的方法。</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="d37d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">查找给出第一个匹配，如果找不到，则返回<code class="fe ky kz la lb b">nil</code>。</p><h2 id="dfca" class="nc lu in bd lv nd ne dn lz nf ng dp md kl nh ni mh kp nj nk ml kt nl nm mp nn bi translated">拒绝</h2><p id="260b" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">您可以删除不需要的元素，而不是选择需要的元素。</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="9479" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您不会获得任何技术优势，无论是在性能方面还是其他方面，但是它会提高代码的质量。</p><h1 id="ef92" class="lt lu in bd lv lw no ly lz ma np mc md me nq mg mh mi nr mk ml mm ns mo mp mq bi translated">转换</h1><p id="185a" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">Ruby 中的<code class="fe ky kz la lb b">map</code>方法可以用于数组、散列和范围。<code class="fe ky kz la lb b">map</code>的主要功能是转换数据。</p><h2 id="91f9" class="nc lu in bd lv nd ne dn lz nf ng dp md kl nh ni mh kp nj nk ml kt nl nm mp nn bi translated">地图语法</h2><p id="f8a3" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated"><code class="fe ky kz la lb b">map</code>的语法如下:</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="8706" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你从一个数组开始，但它也可以是一个散列或一个范围。然后你用一个块调用<code class="fe ky kz la lb b">map</code>。块是在方括号<code class="fe ky kz la lb b">{…}</code>之间的东西，在块中，你指定你想要如何变换数组的每个元素。本质上是一个函数。用<code class="fe ky kz la lb b">map</code>会怎么样？<code class="fe ky kz la lb b">map</code>返回包含结果的新数组，但不改变原始数组。如果要修改原始数组，使用<code class="fe ky kz la lb b">map!</code>。</p><p id="b37c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">哈希的语法略有不同，因为它既有键又有值:</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><h2 id="fdeb" class="nc lu in bd lv nd ne dn lz nf ng dp md kl nh ni mh kp nj nk ml kt nl nm mp nn bi translated">地图与每个</h2><p id="808b" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated"><code class="fe ky kz la lb b">map </code>和<code class="fe ky kz la lb b">each</code>有什么区别？<code class="fe ky kz la lb b">each</code>是<code class="fe ky kz la lb b">map</code>的更原始版本。它为您提供了所有的元素，以便您可以使用它们，但是它不收集结果。<code class="fe ky kz la lb b">each</code>方法总是返回原始的、未改变的对象。而<code class="fe ky kz la lb b">map</code>执行相同的功能，但它返回一个包含已转换元素的新数组。</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><h2 id="ec60" class="nc lu in bd lv nd ne dn lz nf ng dp md kl nh ni mh kp nj nk ml kt nl nm mp nn bi translated">带索引的地图</h2><p id="6932" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">如果您需要包含您的值的索引，您可以使用<code class="fe ky kz la lb b">with_index</code>方法。</p><figure class="mw mx my mz gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="2aed" class="lt lu in bd lv lw no ly lz ma np mc md me nq mg mh mi nr mk ml mm ns mo mp mq bi translated">摘要</h1><p id="d256" class="pw-post-body-paragraph ka kb in kc b kd mr kf kg kh ms kj kk kl mt kn ko kp mu kr ks kt mv kv kw kx ig bi translated">我们已经讨论了在 Ruby 中使用像<code class="fe ky kz la lb b">arrays</code>或<code class="fe ky kz la lb b">hashes</code>这样的对象集合最有用的方法之一<code class="fe ky kz la lb b">select</code>。我们已经展示了<code class="fe ky kz la lb b">select</code>方法允许您搜索、过滤或查找集合中的内容。最后，知道这些方法可用于任何包含可枚举模块的对象是很有用的。我们还谈到了转型，以<code class="fe ky kz la lb b">map</code>为例。转换同样重要，同样适用于任何包含可枚举模块的对象。</p></div></div>    
</body>
</html>