<html>
<head>
<title>Creating Notification Wrapper in Swift</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Swift 中创建通知包装</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-notification-wrapper-in-swift-ab91a3ef2767?source=collection_archive---------8-----------------------#2022-08-08">https://blog.devgenius.io/creating-notification-wrapper-in-swift-ab91a3ef2767?source=collection_archive---------8-----------------------#2022-08-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5484" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用属性包装器封装通知的一种不寻常的方法</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/239810b98b94fb81433df41b5f9e312a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gmPdsj9JvjYcS8J5Yh7Bpw.png"/></div></div></figure><p id="97b9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">通知是通知应用程序一些事件或绕过瓶颈的便捷方式。</p><p id="6bc9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="lk"> NotificationCenter </em>是一个调度机制，向注册的观察者(<a class="ae ll" href="https://developer.apple.com/documentation/foundation/notificationcenter" rel="noopener ugc nofollow" target="_blank">苹果</a>)广播信息。</p><p id="a3a8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是并不是那么方便。控制通知有许多步骤:添加一个观察者，创建一个“objc”方法，发布通知，以及删除一个观察者。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="1e28" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="lk">属性包装器</em>是一个灵活方便的工具，用于创建封装子逻辑属性的助手或服务。</p><p id="1590" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本文中，我将向您展示如何使用它来制作通知包装器，这是一种封装<em class="lk">通知</em>逻辑的独创方法。</p><blockquote class="lo lp lq"><p id="4ee3" class="ko kp lk kq b kr ks jo kt ku kv jr kw lr ky kz la ls lc ld le lt lg lh li lj ig bi translated">在开始阅读之前，确保你不是俄罗斯人。通过继续阅读，你确认你谴责俄罗斯发动的乌克兰战争。</p><p id="2993" class="ko kp lk kq b kr ks jo kt ku kv jr kw lr ky kz la ls lc ld le lt lg lh li lj ig bi translated">光荣属于乌克兰！🇺🇦</p></blockquote><h1 id="cb93" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">正在创建属性包装</h1><p id="3ea8" class="pw-post-body-paragraph ko kp in kq b kr mm jo kt ku mn jr kw kx mo kz la lb mp ld le lf mq lh li lj ig bi translated">首先，我们需要创建一个名为 Observing 的<em class="lk">属性包装器</em>。我选了<code class="fe mr ms mt mu b">Bool</code>作为<code class="fe mr ms mt mu b">wrappedValue</code>类型，不过你也可以选别的。这取决于你的愿望。我想用我的<code class="fe mr ms mt mu b">wrappedValue</code>来启用/禁用观察通知。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="5c6b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">接下来，我需要创建一个<code class="fe mr ms mt mu b">objc</code>方法来处理通知，并在<code class="fe mr ms mt mu b">init</code>中设置通知观察。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="c94e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们创建允许重新添加和删除<em class="lk">通知</em>观察者的切换方法。在两个地方调用:当<code class="fe mr ms mt mu b">wrappedValue</code>改变时和在<code class="fe mr ms mt mu b">deinit</code>中。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="c887" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在完成了！我将通知观察器的添加、删除和处理封装在包装器中。但是我需要完成的另一件事是将通知处理扔在外面。</p><h1 id="275f" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">使用投影值插入闭合</h1><p id="5ba2" class="pw-post-body-paragraph ko kp in kq b kr mm jo kt ku mn jr kw kx mo kz la lb mp ld le lf mq lh li lj ig bi translated">闭包是实现我需要的外部逻辑的快捷方式。我认为使用<code class="fe mr ms mt mu b">projectedValue</code>在包装器中设置我的处理程序是一个好主意。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="9aed" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如您所见，我使用<code class="fe mr ms mt mu b">projectValue</code>作为计算属性，将转义闭包设置为<code class="fe mr ms mt mu b">handler</code>属性。然后每当收到通知时，我就在<code class="fe mr ms mt mu b">handleNotification</code>方法中调用它。</p><h1 id="fa90" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">包装用法</h1><p id="ec38" class="pw-post-body-paragraph ko kp in kq b kr mm jo kt ku mn jr kw kx mo kz la lb mp ld le lf mq lh li lj ig bi translated">现在完成了。让我们看看如何使用它。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="f65a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">利润！</p><h1 id="a30f" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">完整代码</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lm ln l"/></div></figure><h1 id="2781" class="lu lv in bd lw lx ly lz ma mb mc md me jt mf ju mg jw mh jx mi jz mj ka mk ml bi translated">还有一件事…</h1><p id="03e1" class="pw-post-body-paragraph ko kp in kq b kr mm jo kt ku mn jr kw kx mo kz la lb mp ld le lf mq lh li lj ig bi translated">如果你喜欢我的内容并想支持我，请<a class="ae ll" href="https://savelife.in.ua/en/" rel="noopener ugc nofollow" target="_blank">向复活基金会</a>捐款以支持乌克兰。</p><p id="3a21" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">还有，我在 UA 有电报频道<a class="ae ll" href="https://t.me/swiua" rel="noopener ugc nofollow" target="_blank"> Swift，在那里你可以找到更多精彩的东西。</a></p><p id="4f26" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">感谢您的阅读。回头见！</p></div></div>    
</body>
</html>