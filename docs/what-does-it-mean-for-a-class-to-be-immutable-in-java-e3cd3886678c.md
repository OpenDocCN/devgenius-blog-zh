# Java 中一个类不可变是什么意思？

> 原文：<https://blog.devgenius.io/what-does-it-mean-for-a-class-to-be-immutable-in-java-e3cd3886678c?source=collection_archive---------2----------------------->

![](img/0ca9ba8a0eb601f81fa32b4a2c7e5a0c.png)

当您想到 Java 中的不变性时，应该想到一组核心概念。

在本文中，我将列举一些要点，希望您能更好地理解在 Java 中如何实现不可变。

# 不可变意味着它的状态不能改变

Java 中高层次的不变性本质上意味着它在英语中的不变性。换句话说，Java 里不可变的东西是不能变的。

在 Java 中，这意味着不可变对象的内容或状态不能被改变。语言不允许。

# 该类应被声明为最终类

这样做的原因是因为在 Java 中，类是可以扩展的。类声明中的关键字`final`使得类*不能被*扩展。换句话说，改变不了。

# 类中的所有字段都必须有 private 关键字

这意味着不再简单地声明变量，`private`关键字需要放在变量之前。

这使得变量不能被直接访问。直接访问的能力会将不变性置于危险之中，因为这样访问者就可以更改它。

# 类中的所有字段都必须有`final`关键字

这意味着所有字段或数据成员前面都必须有关键字`final`和前面部分的`private`。

`final`使得一旦变量的值被声明，就不能改变。这与类声明中的`final`是同一个关键字，工作原理也差不多。

# 类中的所有字段都必须用执行深度复制的构造函数进行初始化

这并不像听起来那么糟糕。

在类中，您只需创建一个构造函数(将类名及其数据成员作为参数)，将数据成员分配给它的`this`值:

这使得数据成员不会被对象引用意外修改。

# 所有 getter 方法都需要执行可变对象的深度复制

当 getters 在类中时，它们必须使用 Java 中的`clone()`对任何可变的对象执行深度复制。

让我们看看我作为例子使用的`Dog`类会是什么样子。

嗯。这看起来没什么不同。

这里的问题是`String`在 Java 中已经是一个默认不可变的对象。你不必担心深度复制它，因为根据 Java 的定义，它是不可更改的。

嗯，它*可以*，但是如果你改变它的值，Java 会创建一个新的对象在后台存储新的值。原始*对象*从不改变。

无论如何，回到`String`是不可变的。Java 里还有什么是默认不可变的？

## 字符串、整数、布尔和包装类是不可变的

在 Java 中，有许多包装类:

*   `String`
*   `Integer`
*   `Boolean`
*   `Character`
*   `Short`
*   `Float`
*   `Double`
*   `Long`
*   `Byte`

在 Java 中，这些都被认为是不可变的，所以你不需要担心在你创建的任何不可变类中深度复制它们。

# 不可变类不能有 setters

你在可变类中看到的 setter 方法不能出现在不可变类中。毕竟，我们在 Java 中对不可变的定义依赖于不能被改变的对象。设置不能改变的东西是没有意义的，因此你可以很容易地记住，当涉及到不可变的类时，setters 应该被排除在外。

[](https://tremaineeto.medium.com/membership) [## 通过我的推荐链接加入媒体

### 作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…

tremaineeto.medium.com](https://tremaineeto.medium.com/membership)