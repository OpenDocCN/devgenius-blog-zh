<html>
<head>
<title>Stetho: The ultimate debugging tool for android.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ste tho:Android的终极调试工具。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/stetho-the-ultimate-debugging-tool-for-android-1e7573554d04?source=collection_archive---------19-----------------------#2020-07-12">https://blog.devgenius.io/stetho-the-ultimate-debugging-tool-for-android-1e7573554d04?source=collection_archive---------19-----------------------#2020-07-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2e94" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Stetho是一个易于使用的库，由脸书调试网络请求和android应用程序中的数据库。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/386f93b4db392381a13f7cf3823d3432.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WhqRMagqSe7Hndbk"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">凯文·Ku在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="d1c1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在当今世界，很难找到一款不发出任何网络请求或不使用数据库存储某些信息的应用程序。一些开发人员使用日志来调试网络请求或数据库操作，这是一项非常累人的任务。</p><p id="d25b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">脸书的Stetho是一个功能强大且易于使用的库，只需在项目中添加几行代码就可以调试应用程序资源。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="9593" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated"><strong class="ak">将Stetho添加到您的项目中</strong></h2><p id="315c" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">要将Stetho添加到您的项目中，请将最新版本添加到您的应用程序级别<code class="fe mu mv mw mx b">build.gradle</code>文件中。</p><pre class="kd ke kf kg gt my mx mz na aw nb bi"><span id="5ea0" class="lw lx in mx b gy nc nd l ne nf">dependencies <strong class="mx io">{<br/>    <br/>    </strong>//Stetho<br/>    implementation 'com.facebook.stetho:stetho:1.5.1'<br/>}</span></pre><p id="3d73" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您使用翻新，您还需要为<code class="fe mu mv mw mx b">okhttp</code>添加网络助手依赖项。</p><pre class="kd ke kf kg gt my mx mz na aw nb bi"><span id="7d94" class="lw lx in mx b gy nc nd l ne nf">implementation ‘com.facebook.stetho:stetho-<strong class="mx io">okhttp3</strong>:1.5.1’</span></pre><p id="c36b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">同步项目后，必须在应用程序类中初始化Stetho，如下所示:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">MyApp.kt</figcaption></figure><p id="505a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在您的清单文件中注册<code class="fe mu mv mw mx b">MyApp.kt</code>类。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="23eb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您使用reform来执行网络请求，那么您可以向它的<code class="fe mu mv mw mx b">okhttp</code>层添加一个网络拦截器，这样Stetho就可以检查您的网络请求。因此，创建一个<code class="fe mu mv mw mx b">okhttp</code>客户端，将<code class="fe mu mv mw mx b">StethoInterceptor</code>添加到客户端，然后将客户端添加到您的改造构建器。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="bfb8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">结束了。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="ddbd" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated"><strong class="ak">使用Chrome的开发者工具查看输出</strong></h2><p id="af47" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">Stetho使用Chrome浏览器的开发工具向您显示所有关于您的网络请求的信息，如标题、响应、状态、响应大小等。</p><p id="206f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将你的设备与桌面连接，然后打开chrome浏览器，在地址栏输入<code class="fe mu mv mw mx b">chrome://inspect</code>。现在运行您的应用程序，您将能够看到所有与您的桌面连接的设备以及所有与<code class="fe mu mv mw mx b">Stetho</code>集成的正在运行的应用程序。</p><p id="6066" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ni">确保您在开发者设置中启用了USB调试选项。</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/e5d07e112ee0d15c3e0e9654827e2e3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EbRRojYUAlH6IrnUgGa9sw.png"/></div></div></figure><p id="9e5d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在点击你的应用名称下面的<strong class="kv io">检查</strong>，它会打开一个新窗口，显示你的应用的所有信息。在“网络”选项卡中，它显示了您的应用程序发出的所有请求。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nk"><img src="../Images/7796a5bf08f1635b3639e879ba778607.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xzdye3pR2-AY5P5x-1MYmQ.png"/></div></div></figure><p id="1dd8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">通过单击任何一个请求，您可以看到该请求的详细视图以及所有信息，如请求标题和响应。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nl"><img src="../Images/0ab242ad3da6d0f5bad95d7e1286e349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Th42-fHbpRXekMU5HgRmYA.png"/></div></div></figure><p id="357a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">headers部分显示了所有的请求头和响应头。您可以在发出请求时找到任何缺少的参数。</p><p id="65d4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">响应部分以原始格式显示响应数据，而预览部分以JSON树格式显示。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="3549" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，您可以看到，调试网络请求非常容易，因为您可以在浏览器中看到所有响应、请求头以及响应头。同样，您也可以在调试窗口的资源选项卡中看到应用程序中的所有SQLite数据库。您还可以直接在窗口中执行SQL查询。</p><p id="d9a1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢阅读。这是我的第一篇文章，所以请让我知道你的建议和评论。</p></div></div>    
</body>
</html>