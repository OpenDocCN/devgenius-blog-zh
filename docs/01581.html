<html>
<head>
<title>My favorite git alias to keep my branches in check</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我最喜欢的git别名来检查我的分支</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/my-favorite-git-alias-to-keep-my-branches-in-check-e0b49b7cbfd5?source=collection_archive---------9-----------------------#2020-07-07">https://blog.devgenius.io/my-favorite-git-alias-to-keep-my-branches-in-check-e0b49b7cbfd5?source=collection_archive---------9-----------------------#2020-07-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="a7c8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每个人都有自己喜欢的git快捷方式或别名。他们太多了！</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="6d0a" class="kr ks in kn b gy kt ku l kv kw">gc - git checkout<br/>gm - git merge<br/>gb - git branch</span></pre><p id="6293" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是，缺少一个别名来解决我经常遇到的问题:</p><blockquote class="kx"><p id="d4cf" class="ky kz in bd la lb lc ld le lf lg kh dk translated">如何保持本地和原产地分支机构的清洁？</p></blockquote><p id="73dc" class="pw-post-body-paragraph jk jl in jm b jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd ll kf kg kh ig bi translated">我需要在我的每一个分支上运行<code class="fe lm ln lo kn b">git branch -d &lt;branch name&gt;</code>吗？</p><figure class="ki kj kk kl gt lq gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/e25d7f2046e4bb99d2eb47792c881fd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*JzuGbE0A6K1lP4MPZtXe5g.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">所以。很多。分支机构…</figcaption></figure><p id="5a9a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">或者必须运行<code class="fe lm ln lo kn b">git fetch --prune</code>来确保我正在清除已删除的远程分支。如果我把<code class="fe lm ln lo kn b">-a</code>旗加到<code class="fe lm ln lo kn b">git branch</code>上会更糟</p><figure class="ki kj kk kl gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lx"><img src="../Images/b680260f05ca030ac1dd8207c45a1b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r0H2baVku-CElwKD-9Ei_Q.png"/></div></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk">😰</figcaption></figure></div><div class="ab cl mc md hr me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ig ih ii ij ik"><h1 id="038a" class="mj ks in bd mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf bi translated">构建新功能</h1><figure class="ki kj kk kl gt lq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/d079a4aff4fb7b59169867f4aa1e77fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*zYCGOmiveN6u8W2fNKrvpA.jpeg"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">幽默是如此的相关</figcaption></figure><p id="0694" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我决定构建一个处理整个操作的函数。我将把它命名为<code class="fe lm ln lo kn b">gclean</code>。这个问题从两个方面着手解决:</p><p id="87d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">一个</strong>:从远程清理删除的分支。这个很简单。它内置在git中。只需要运行<code class="fe lm ln lo kn b">git fetch --prune</code>。问题解决了！</p><figure class="ki kj kk kl gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi ni"><img src="../Images/4526959d08e4ac78f708ef839bea0f9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4FfzgD4q0O09qIIB"/></div></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">简单的柠檬汽水！Giorgio Trovato 在<a class="ae nh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="a20c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">二:</strong>清理不再需要的本地分支。这个问题有点棘手，但是没有什么是谷歌搜索不能解决的(毕竟，我是专业的谷歌搜索者)。使用一点bash，StackOverflow社区集体想出了:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="e150" class="kr ks in kn b gy kt ku l kv kw">git branch | grep -v '&lt;branch to keep&gt;' | xargs git branch -d</span></pre><p id="3362" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们都很高兴！</p><p id="63b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">厉害！现在，我只需要把它们放在一起，加上一点“花哨”的输出就可以了。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="3dee" class="kr ks in kn b gy kt ku l kv kw"># ~/.aliases<br/>gclean () {<br/>  echo "----------------------------"<br/>  echo "       Syncing Change       "<br/>  echo "----------------------------"<br/>  git pull<br/>  echo ""</span><span id="e692" class="kr ks in kn b gy nj ku l kv kw">echo "----------------------------"<br/>  echo "  Removing Remote Branches  "<br/>  echo "----------------------------"<br/>  git fetch --prune<br/>  echo ""</span><span id="3544" class="kr ks in kn b gy nj ku l kv kw">echo "----------------------------"<br/>  echo "  Removing Local Branches   "<br/>  echo "----------------------------"<br/>  git branch | grep -v 'development' | xargs git branch -d<br/>  echo ""<br/>  echo "----------------------------"<br/>  echo "            DONE            "<br/>  echo "----------------------------"<br/>}</span></pre></div><div class="ab cl mc md hr me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ig ih ii ij ik"><h1 id="193d" class="mj ks in bd mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf bi translated">一个小小的警示故事</h1><p id="63a9" class="pw-post-body-paragraph jk jl in jm b jn nk jp jq jr nl jt ju jv nm jx jy jz nn kb kc kd no kf kg kh ig bi translated">当我第一次构建这个别名时，我最初构建的函数是先删除本地分支，然后删除远程分支。</p><p id="6476" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这引发了一个有趣的问题。我当时正在做一个专题，最初负责推动当地的分支机构。然而，我最终还是从Github上删除了这个分支(不记得为什么了)，并且再也没有修剪过我的分支。</p><p id="59ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我运行了这个函数</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="9cec" class="kr ks in kn b gy kt ku l kv kw">----------------------------<br/>  Removing Local Branches<br/>----------------------------<br/>warning: deleting branch 'medium' that has been merged to<br/>         'refs/remotes/origin/medium', but not yet merged to HEAD.<br/>Deleted branch medium (was e615bce).</span><span id="129f" class="kr ks in kn b gy nj ku l kv kw">----------------------------<br/>  Removing Remote Branches<br/>----------------------------<br/>From github.com:davidhu2000/react-spinners<br/> - [deleted]         (none)     -&gt; origin/medium</span><span id="5cde" class="kr ks in kn b gy nj ku l kv kw">----------------------------<br/>            DONE<br/>----------------------------</span></pre><p id="cf12" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Git认为我的特性分支仍然远程存在，并决定删除我的本地分支，然后修剪原始分支。现在工作时间已经过去了。我甚至不得不学习<code class="fe lm ln lo kn b">git reflog</code>来取回我的树枝。</p></div><div class="ab cl mc md hr me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ig ih ii ij ik"><p id="56fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您有兴趣查看完整的输出:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="e127" class="kr ks in kn b gy kt ku l kv kw">----------------------------<br/>       Syncing Change<br/>----------------------------<br/>remote: Enumerating objects: 20, done.<br/>remote: Counting objects: 100% (20/20), done.<br/>remote: Compressing objects: 100% (20/20), done.<br/>remote: Total 20 (delta 13), reused 0 (delta 0), pack-reused 0<br/>Unpacking objects: 100% (20/20), done.<br/>From github.com:davidhu2000/react-spinners<br/> * [new branch]      dependabot/npm_and_yarn/babel/plugin-transform-typescript-7.10.4 -&gt; origin/dependabot/npm_and_yarn/babel/plugin-transform-typescript-7.10.4<br/>...<br/>Already up-to-date.</span><span id="90b6" class="kr ks in kn b gy nj ku l kv kw">----------------------------<br/>  Removing Remote Branches<br/>----------------------------<br/>From github.com:davidhu2000/react-spinners<br/> - [deleted]         (none)     -&gt; origin/clock-loader<br/> - [deleted]         (none)     -&gt; origin/dependabot/npm_and_yarn/acorn-5.7.4<br/> - [deleted]         (none)     -&gt; <br/>... (cut for spacing)<br/>origin/dependabot/npm_and_yarn/webpack-4.42.0</span><span id="4ce8" class="kr ks in kn b gy nj ku l kv kw">----------------------------<br/>  Removing Local Branches<br/>----------------------------<br/>Deleted branch bug-1 (was f2cdd3e).<br/>...<br/>error: The branch 'eslint' is not fully merged.<br/>If you are sure you want to delete it, run 'git branch -D eslint'.<br/>Deleted branch feature-1 (was f2cdd3e).<br/>...<br/>Deleted branch why-so-many-branches (was f2cdd3e).</span><span id="a95b" class="kr ks in kn b gy nj ku l kv kw">----------------------------<br/>            DONE<br/>----------------------------</span></pre></div><div class="ab cl mc md hr me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ig ih ii ij ik"><p id="6c2c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">老实说，这是我最常运行的命令之一。我希望这篇文章对你有所帮助。编码快乐！</p><figure class="ki kj kk kl gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi np"><img src="../Images/dd1947013b71dc4186a1eefde366d058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*41qXXPbCha1_sWij"/></div></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">卡尔·海尔达尔在<a class="ae nh" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div></div>    
</body>
</html>