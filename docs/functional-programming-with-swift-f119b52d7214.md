# Swift 函数式编程

> 原文：<https://blog.devgenius.io/functional-programming-with-swift-f119b52d7214?source=collection_archive---------0----------------------->

![](img/db8162c934fe6880ee6f0013370f49e5.png)

我希望当我第一次用谷歌搜索术语[函数式编程](https://en.wikipedia.org/wiki/Functional_programming)或者简称 FP 的时候也是这么简单。我努力阅读各种文章和博客来理解 FP，并且我仍然通过每天在我的代码中使用它来学习它是如何工作的。

在我们理解函数式编程之前，让我们看看非函数式编程是如何工作的。

我知道许多读者可能会跳过这一部分，认为他们知道什么是非函数式编程，因为他们早上醒来去办公室，坐在椅子上，盯着它的脸。

但如果你愿意读的话，我会告诉你 FP 和非 FP 的一个基本区别(当然后者用‘non’做前缀。咄！).当我们谈到非浮点或命令式编程时。

让我们假设给你一个任务，在 swift 中创建一个简单的代码来对一组字符串进行排序，你会怎么做呢？

现在我们看到了什么，我们创建了一个函数来排序字符串数组。此外，我们在函数中创建了一个变量来存储结果排序列表。

现在你会认为这就是我们用任何语言写程序时所做的，我们创建一些文字，作为常量，和一些变量，随着程序的进行，它们的状态会改变。

但是我们有没有想过在多线程环境中使用变量会有一些副作用？当我们编写程序时，我们经常会遇到这样的情况:我们需要处理多个线程访问一个函数，并改变变量的状态，从而导致错误的输出。如果我说我们可以用函数式编程来克服这个所谓的“副作用”呢？

> ***注意:*** *在我们继续之前，我会推荐你多读一些关于 swift 闭包和一点泛型的内容。*

说够了，什么是解决上述问题的函数式编程方法？

如果我告诉你，我可以把上面的代码减少到 4 行代码，并且仍然得到相同的结果，甚至不需要创建一个变量。(**神奇！是吗？**)

# 函数编程方法

**Dafaq！那是什么？**
嗯，这就是 swift 的[闭包](https://docs.swift.org/swift-book/LanguageGuide/Closures.html)的魔力，这里我们只是使用了 Swift 标准库的内置函数

基本上，`.sorted()`是在一个数组上调用的，它将一个函数作为参数(闭包),并返回一个满足闭包中声明的谓词的新元素数组。或者我们可以说闭包获取一个数组元素并返回一个`Bool`值，这个值是基于闭包中定义的谓词的`true`或`false`。

如果我能把上面的实现减少到只有一行代码，而输出和效率是一样的，会怎么样呢？

欢迎来到强大的世界，**函数式编程**。

# 函数式编程概念

让我们快速地看看它们对于函数式编程意味着什么

# 1.一阶和高阶函数

一种编程语言据说有**一级函数**如果它允许下面

*   接受一个或多个函数作为参数的函数。
*   将函数作为函数的结果返回
*   将一个函数赋给一个变量，并将它们存储在数据结构中。

**高阶函数**是满足至少一个上述条件的函数。

因此，如果您可以创建一个函数，并将一个函数作为参数传递给该函数，或者您可以将一个函数赋给一个变量，以后再使用它，或者您可以将一个函数作为函数的结果返回，那么您的编程语言就是函数式编程范式。我们可以用 Swift 编程语言完成所有这些工作。

# 2.纯函数

纯函数通常是对内存或 I/O 没有副作用的函数或表达式。因此，如果一个函数返回一个不被使用的结果，那么它可以被删除而不影响表达式。与 [**密切相关的参照透明度**](https://en.wikipedia.org/wiki/Referential_transparency)

# 3.递归

递归是一种问题解决技术，其解决方案依赖于同一问题的较小实例的解决方案。编程语言中的迭代/循环是通过递归实现的，在这里，函数递归地调用自己，直到得到结果。

# 4.对透明性有关的

如果一个函数或表达式的求值对相同的输入没有副作用，就说它是引用透明的。引用透明的编程语言没有赋值语句，所以变量的值一旦定义就不会改变。

举个小例子`**x = x + 10**`无论何时执行都会改变 x 的状态。所以这个声明不是透明的。

# 其他 Swift 功能-

`.filter()`、`.map()`、`.compactMap()`、`.sorted()`是 Swift 中您可以使用和展示您的功能方法的一些其他方法。

`.filter()`基本上是用来迭代一个数组，返回一个满足提供谓词(闭包)的数组。

当我们需要从一个数组中取出一个元素，对其应用一个函数或变换，并将其添加到一个新的数组中时，可以使用`.map()`。参见下面的例子

//输出

```
["1", "3", "6", "2", "0", "5"]
```

`.compactMap()`类似于`.map()`，此外它忽略零值。

//输出

```
[1, 3, 6, 2, 5]
```

**等待终于结束了，让我们创建自己的功能表达式。**

带输出

```
6
8
```

这就是这篇文章的全部内容，请在下面的评论中让我知道你的功能编程代码。

*原载于 2018 年 7 月 17 日*[*http://siddharthpaneri . in*](http://siddharthpaneri.in/)*。*