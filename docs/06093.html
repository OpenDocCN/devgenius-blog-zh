<html>
<head>
<title>The Pythonic Way of Implementing Encapsulation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">实现封装的Pythonic方式</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-pythonic-way-of-implementing-encapsulation-d9426e7cf5d9?source=collection_archive---------2-----------------------#2021-12-13">https://blog.devgenius.io/the-pythonic-way-of-implementing-encapsulation-d9426e7cf5d9?source=collection_archive---------2-----------------------#2021-12-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/47982870436c59d79eebc6c073c574e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EiTOFnwdCBZXPwtv"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">由<a class="ae jz" href="https://unsplash.com/@synkevych?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Roman Synkevych </a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h2 id="089e" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h2><p id="42c2" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">封装是将变量和方法包装成一个单元的概念。它是面向对象编程(OOP)的支柱之一。目标是确保您的数据可信。为了赢得信任，软件开发人员创建<em class="lr">私有</em>变量，包括<em class="lr"> getter </em>和<em class="lr"> setter </em>方法。一个<em class="lr">获取器</em>返回一个值，而一个<em class="lr">设置器</em>更新或设置一个值。</p><h2 id="f658" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">让我们开始吧</h2><p id="a7f9" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">下面是你可以想到的用Python实现封装的方法。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="3b23" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">在下面的代码中，我们创建了一个上面的<code class="fe md me mf mg b">Person</code>类的对象，并试图使用变量<code class="fe md me mf mg b">name</code>，这并没有给我们带来任何安宁，因为私有变量不能从person对象中访问。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="2d82" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">要访问它，你必须使用<code class="fe md me mf mg b">get_name()</code>方法。设置其值时也是如此。我们必须使用<code class="fe md me mf mg b">set_name(self, name)</code>方法。</p><p id="a42f" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">如果我告诉你实现封装的pythonic方式是首先将所有东西都公开，那会怎么样？并且不将变量声明为私有。我相信Java开发者正在为我的喉咙冲刺。向我抛出一些问题，比如没有私有变量你如何实现封装？放松点。请继续阅读。看看下面的python代码。这是以pythonic方式实现封装的第一步。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="896b" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">变量<code class="fe md me mf mg b">name</code>不再是私有的了。这意味着之前导致错误的下面的代码将会工作。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="eddf" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">我知道你一定在问如果我们以后要隐藏数据怎么办，这样不会破坏这个类用户访问的接口吗？<br/>以后试图将变量<code class="fe md me mf mg b">name</code>私有会破解代码，因为外界再也无法访问它了。<br/>我们如何防止这样的问题，并通过getters和setters确保数据可信？</p><p id="a666" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">Python使用<strong class="ky io"> <em class="lr">属性</em> </strong>为我们关心的问题提供了一个愉快的解决方案。属性是实例属性的接口。它们封装实例属性，就像Java等其他面向对象语言中的getters和setters一样。下面是一个例子。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="ea9c" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">属性是使用getter的property decorator创建的，相同的名称用于创建setter。这样，您可以在设置名称时应用规则。如下所示，一个例子是在设置值之前更改setter方法来验证值。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="1869" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">通过一个对象访问或改变<code class="fe md me mf mg b">name</code>将是非常可能的。下面的代码会很开心。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="a6de" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">如果您试图像这样设置名称<code class="fe md me mf mg b">person.name = “ab”</code>，将会失败，因为setter方法中存在检查。</p><p id="aef1" class="pw-post-body-paragraph kw kx in ky b kz ly lb lc ld lz lf lg kj ma li lj kn mb ll lm kr mc lo lp lq ig bi translated">请注意，接口没有断开。如果您首先将变量名设为公共，然后在不使用属性的情况下将其设为私有，那么接口会中断(因为一个<code class="fe md me mf mg b">person.name</code>会失败)，并且<code class="fe md me mf mg b">Person</code>类的所有用户都必须重构他们的代码。这在处理数千行代码时会带来问题。在Java等其他OOP语言中面临这样的问题是非常令人沮丧的。它迫使你在项目开始时将所有变量私有，即使在不必要的时候。在Python中，可以先将它们公开，如果以后需要数据保护和隐藏，可以在类的用户不改变其实现的情况下实现属性。变量<code class="fe md me mf mg b">name</code>仍然是“公开的”,但它的值是可信的。不遵守规则是改不了的。</p><h2 id="1b13" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h2><p id="02bc" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">说了这么多，我对Java(其实是我的初恋)没有什么反感。我希望您和我一样对Python感兴趣。<br/>快乐封装！！！</p></div></div>    
</body>
</html>