# 干净代码的艺术

> 原文：<https://blog.devgenius.io/art-of-clean-code-b921142a05e9?source=collection_archive---------1----------------------->

## 编写可以像故事一样阅读的代码。

![](img/42d97fdd1bd56ce6fcf0c31123e8ce19.png)

[Pixabay](https://pixabay.com/illustrations/hand-painting-drawing-painter-2433477/)

如果有人问我谁是我的 Java 大师，我会说“Sun 微系统”和“Apache 基金会”。

在我这一代人中，大多数编程学习都是通过阅读 Java 源代码来完成的。互联网上没有很多丰富的博客或论坛，因此阅读代码是最好的学习资源。此外，如果不了解我们正在扩展的系统的行为，我们就不可能构建这样的组件。因此，通读 Java 库和组件的代码对于构建正确的扩展和产品几乎是强制性的。

关于 Java 和 Apache 类产品的源代码，值得注意的一点是代码结构的清晰性和丰富的文档，代码非常清楚地表达了它的意图。这使得代码阅读体验像故事书一样愉快而简单。代码写得如此漂亮，我相信任何人都可以很容易地理解这些代码，即使是二十年后的将来。

阅读如此庞大的代码库很大程度上归功于有效的编码和文档风格，开发人员遵循这种风格来编写代码。

快进到今天，我们正处于一个通过编写更少的代码来做更多事情的时代。随着函数式语言、许多抽象语言结构和 lambada 表达式支持的出现，它变得很有意义，并使代码变得不那么庞大。

昨天或今天，那时或现在，编写干净代码的基本原则是相同的，也是同等需要的。归根结底，这是关于编写可读代码的艺术，一个清楚地说出其意图的代码，一个很难隐藏错误的代码，一个可以大声说出任何功能障碍的代码，一个可以被同事或未来任何人轻松阅读而不用旋转脑袋的代码。

# 什么是干净代码

> 任何傻瓜都能写出计算机能理解的代码。优秀的程序员编写人类能够理解的代码——马丁·福勒

*   任何人都可以轻松阅读的代码，而不仅仅是作者。
*   明确表达其意图的代码
*   bug 很难隐藏的代码
*   一个可以大声说出系统中任何功能障碍的代码

让我们简单谈谈干净代码的一些关键促成因素。

# 透露意图的有意义的名字

如果我需要为干净的代码选择一个最重要的东西，我会选择这个。这就是它对代码可读性和可维护性的重要性。

挑选一个合适的名字，能够清楚地揭示它的存在意图，是非常重要的。选择正确的名称需要时间，但是，这种努力和时间是值得的，因为它可以节省以后理解代码或任何问题的时间。

简单的经验法则，当你读到一个类、变量或函数的名字时，它应该大声地告诉你“我为什么存在”。这个规则适用于包、类、变量、函数、数据库表、列、属性文件、属性等的名称。即使是 for 循环中迭代器变量的名称，对于保持代码的可读性也同样重要。

如果由于任何原因或复杂性，任何代码都不能仅仅通过名称来反映其意图，那么添加文档以使读者容易理解是有意义的。

## 几个指针

1.  使用容易发音的名字。使用完整的描述性名称，而不要使用缩写，因为它以后需要字典。例如:ctrlGpForPt >患者的控制组。
2.  如果长的描述性名称便于阅读，不要害怕。让 VM，编译器，IDE 为我们处理长度。
3.  避免相似结构的混淆名称，明确区分。例如:accountActivation，account activated< has a high potential of confusion while reading the code.
4.  Use the same pattern for similar operations. Ex: getRecords to get data from the database, instead of using the get, fetch, retrieve at different places.
5.  Use domain names as much as possible, as it helps readers later to make sense of code quickly as long as they understand the product domain. Ex: jobProcQueue >accountProcessorQueue。

名字应该使代码的阅读变得简单，而不是需要玩弄多个名字并在头脑中为读者构建关系。

# 检查结构的长度

有人可能会问，如果名字好，代码干净，那么长度是多少。然而，对于读者来说，任何构造的实现长度都定义了复杂性。人脑一次只能在内存中保存有限的复杂性和数据。我们添加的越多，就越需要记忆和交叉参考。

解决方案是在检查类和函数时保持长度。最简单的方法是，如果有一些代码在做相关的工作，将它捆绑在一个单独的函数中并调用。阅读一个 15 行的函数并调用 5 个有意义的名字比阅读和理解一个 100 行的函数要容易得多。

因此，将实现分成多个具有有意义名称的更小的函数。

> *保持小比小！*

# 单一责任原则

这不仅是架构原则(在这里阅读更多)，而且同样适用于底层设计、功能实现和代码可读性。

我们以名字应该揭示意图的原则开始这篇文章。如果一个函数或类承担多重责任，这怎么可能呢？

> *如果任何类或函数服务于多个目的，请进一步破坏它。*

# 没有副作用代码

这是上一点的延伸。

> 代码应该做它应该做的事情。不多不少。

例:登录功能应检查认证，可能检查和初始化授权信息。但是，它不应该为 UI 呈现初始化 JSON 结构。这就像跨越顾虑一样，破坏了单一责任和明确意图的原则。

# 在一个产品中有相同的代码格式

如果阅读一本在 10 个章节中有 10 种不同字体、缩进和颜色样式的书，你会有什么感觉？肯定不舒服。代码也是如此。在类、包和模块中使用相同的格式使得阅读代码变得容易。

解决方案:与团队一起定义格式规则，并在任何地方都遵循它。通过同意和定义 IDE 中所有开发人员使用的通用代码格式化配置，这是最容易实现的事情之一。

# 线的长度

有关系吗…..？

是的，这很重要。线的长度应根据通常使用的显示器的宽度来设置。早期较小的屏幕有 40 或 80 线长度是好的，但现在有了更宽的屏幕显示器，至少有 120 线作为标准是有道理的。

它通过将内容保存在同一行而不是读取多行来使代码可读。想象在 3 行中读取一个带有很少参数的函数名，而不是在一行中。

# 将相关代码放在一起——最好是自上而下

尽管使用 IDE 快捷键很容易找到函数。然而，阅读应该很容易，只需在课堂上滚动鼠标。因此，建议将相关的代码放在一起，最好采用自上而下的格式，这样读者可以从顶部开始，然后像阅读这本书一样，继续遵循下面的方法。

离编写像故事书一样可读的代码又近了一步！

# 断言某事是否与预期不同

断言(或警报)不仅仅是检查参数。这些都是强大的工具，可以在没人看的时候验证系统的行为。

难道我们不指望我们的车能说出机油或冷却液是否少了吗？或者燃油中是否有杂质。为什么，因为及时采取主动行动使我们的生活变得轻松，也不用在汽车抛锚前花几个小时去了解原因。

软件系统也是如此。一个系统应该知道其中是否有不正确的地方。精心设计的断言(+监控、警告)可以让开发人员的生活变得更加轻松，因为它可以在错误情况变成大问题(比如系统中整个数据的损坏)之前大声疾呼。

因此，花大量时间在代码中设计断言和警告。在此之前，定义一个标准来记录和报告这些断言。

> 自我验证系统(代码)是最好的系统！

# 摘要

对于软件开发人员来说，代码就像画家画的画一样。

编写即使是新书读者、团队新成员也能像读故事一样阅读的代码。编写足够灵活的代码，以便能够轻松扩展任何新功能或改进。编写对其他开发人员有同情心的代码，并且在未来几年内易于维护。

像写故事书一样写代码，每个读者都爱看。

快乐学习，快乐编码！

# 然后

干净和可维护的代码还有更多方面，包括错误处理、日志记录、自验证系统的测试和文档。我们将在以后的文章中讨论这些内容。

干净代码的艺术——错误处理。这里参考[](https://medium.com/dev-genius/art-of-clean-code-error-handling-7951587eac98)

*干净代码的艺术——文档。 [*此处参照*](https://medium.com/dev-genius/art-of-clean-code-documentation-177b62a8320)*

**干净代码的艺术——日志。* [*此处参照*](https://medium.com/dev-genius/art-of-clean-code-logging-d760b0918603)*

**如果你有什么建议，随时联系我****Linkedin****:*[*莫希特·古普塔*](https://www.linkedin.com/in/mohitkgupta/)*