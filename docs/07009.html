<html>
<head>
<title>Implement Interactive Plotly Dash Plot Within Your Django Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Django 项目中实现交互式 Plotly Dash Plot</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/implement-interactive-plotly-dash-plot-within-your-django-project-66f3f4fbef94?source=collection_archive---------1-----------------------#2022-02-19">https://blog.devgenius.io/implement-interactive-plotly-dash-plot-within-your-django-project-66f3f4fbef94?source=collection_archive---------1-----------------------#2022-02-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="ceed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Plotly 是 Python 中一个极其有用和复杂的可视化库。它不仅提供简单的绘图功能，还提供了一堆高级功能。Dash 是一个基于 plotly 的 web 应用程序的 web 框架。在 dash 应用程序的帮助下，我们能够只用几行代码创建复杂且高度功能化的绘图。</p><h1 id="a746" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">介绍</h1><p id="d53b" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">在本文中，我将向您展示如何在 Django 框架中实现普通的 plotly 可视化以及高级的 dash 应用程序可视化(以及 MySQL 数据库)。Django 是一个用 Python 编写的 web 框架，以可伸缩性和快速开发著称。这些特性使得 Django 成为最受欢迎的框架之一，无论是对于初学者还是 web 开发专家。</p><h1 id="a10d" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">先决条件和配置</h1><p id="a9cf" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">在我们深入 django 和 plotly 之前，有一些包我们必须确保它们被正确安装。其中包括:</p><ul class=""><li id="dda3" class="ll lm in jm b jn jo jr js jv ln jz lo kd lp kh lq lr ls lt bi translated">姜戈</li><li id="8304" class="ll lm in jm b jn lu jr lv jv lw jz lx kd ly kh lq lr ls lt bi translated">Plotly</li><li id="0e44" class="ll lm in jm b jn lu jr lv jv lw jz lx kd ly kh lq lr ls lt bi translated">姜戈 _ 普罗特利 _ 达什</li><li id="11f5" class="ll lm in jm b jn lu jr lv jv lw jz lx kd ly kh lq lr ls lt bi translated">频道</li><li id="7636" class="ll lm in jm b jn lu jr lv jv lw jz lx kd ly kh lq lr ls lt bi translated">渠道-redis</li></ul><p id="97aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">除了这些包之外，您还必须在 django 项目中配置设置文件。打开 django 项目的 settings.py，修改如下。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk translated">Django_plotly_dash 设置的相关修改. py</figcaption></figure><p id="cad1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">还要通过在 urls.py 中添加 urlpatterns 来注册 django_plotly_dash 路由结构。</p><pre class="lz ma mb mc gt mk ml mm mn aw mo bi"><span id="2a39" class="mp kj in ml b gy mq mr l ms mt">urlpatterns = [<br/>    ...<br/>    path('django_plotly_dash/', include('django_plotly_dash.urls')),<br/>]</span></pre><p id="d9e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">关于 django_dash_plotly 安装的更多信息，你可以在这里查看官方文件<a class="ae mu" href="https://django-plotly-dash.readthedocs.io/en/latest/installation.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="4289" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">普通情节</h1><p id="7936" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">这部分向你展示了如何在 django 框架中实现普通的 plotly 情节。我们将以 MySQL 数据库和 pymysql 包进行连接为例。首先，创建一个正常的 plotly 绘图，并使用 plotly 下的 graph_objs 模块将其转换为 graph 对象。第二，调用对象，分配对象在你的 views.py 中渲染上下文，为了更好的管理，最好用 view.py 把绘图功能分开。您可以在项目文件夹下创建一个额外的 py 文件，并调用 views.py 中的脚本。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="49d0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后在 views.py 中，您应该有一个部分调用您刚刚创建的函数，并将生成的 graph 对象分配给 context。</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="0e17" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，在 html 中，只需使用双花括号(django 中模板语言)从上下文中调用 graph 对象。</p><p id="06b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mv mw mx ml b">{{target_plot|safe}}</code></p><p id="6379" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有关使用 graph_objs 绘图的更多信息，请查看<a class="ae mu" href="https://plotly.com/python/creating-and-updating-figures/" rel="noopener ugc nofollow" target="_blank">本页</a>。</p><h1 id="381d" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">互动破折号 Plotly 情节</h1><p id="b0b9" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">现在，如果我们想建立高水平的互动情节，仅仅使用 plotly 是不够的。这就是破折号发挥作用的时候。在本文中，我们以回调为例。回调允许您在某些输入变量改变时更新绘图。例如，您可能希望显示几个城市的人口分布。通过使用回拨功能，您将能够在城市之间切换，情节将自动调整。</p><p id="6f67" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是带回调函数的 dash plotly plot 的样例代码。创建此脚本</p><figure class="lz ma mb mc gt md"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="f6d0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了让 Django 识别 dashapp 名称，请将 dash plotly 绘图脚本导入 urls.py 或 views.py。</p><p id="d6ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mv mw mx ml b">from .Dash_Apps import dash_plot</code></p><p id="2568" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，在 html 文件中使用如下语法调用 dash 应用程序(通过注册的 DjangoDash 对象名)。</p><pre class="lz ma mb mc gt mk ml mm mn aw mo bi"><span id="ff68" class="mp kj in ml b gy mq mr l ms mt">{%load plotly_dash%}<br/>{%plotly_app name=”CityPlot”}</span></pre><p id="8d62" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是用回调函数成功实现 dash plotly plot 后的结果。</p><figure class="lz ma mb mc gt md gh gi paragraph-image"><div role="button" tabindex="0" class="mz na di nb bf nc"><div class="gh gi my"><img src="../Images/bd8f51de044315f19c316d111d241097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3UnQ_oas_7qP2xR4r1zyXg.png"/></div></div></figure><p id="f9d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您需要更多关于基本回调的信息，请参考本页<a class="ae mu" href="https://dash.plotly.com/basic-callbacks" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="c269" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">结论</h1><p id="6f66" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">虽然实现 dash plotly 应用程序有点复杂，但由于 dash 提供的强大功能，它确实是值得的。如果你需要 dash plotly plot 是如何实现的参考，你可以在这里查看我的 Github repo <a class="ae mu" href="https://github.com/BurgerWu/Covid19_Django_Webapp" rel="noopener ugc nofollow" target="_blank">关于可视化台湾政府公开数据的 covid19 统计数据。</a></p><h1 id="04c3" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">参考</h1><ol class=""><li id="3660" class="ll lm in jm b jn lg jr lh jv nf jz ng kd nh kh ni lr ls lt bi translated"><a class="ae mu" href="https://django-plotly-dash.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank"> django-plotly-dash 官方文件</a></li><li id="2fb5" class="ll lm in jm b jn lu jr lv jv lw jz lx kd ly kh ni lr ls lt bi translated"><a class="ae mu" href="https://dash.plotly.com/" rel="noopener ugc nofollow" target="_blank">破折号公文</a></li><li id="9fd0" class="ll lm in jm b jn lu jr lv jv lw jz lx kd ly kh ni lr ls lt bi translated"><a class="ae mu" href="https://plotly.com/python/" rel="noopener ugc nofollow" target="_blank"> Plotly Python 官方文档</a></li></ol></div></div>    
</body>
</html>