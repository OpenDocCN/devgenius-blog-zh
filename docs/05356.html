<html>
<head>
<title>Multi Laravel Sail Sites with Custom Domain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">多Laravel帆网站与自定义域</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/multi-laravel-sail-sites-with-custom-domain-e13c07d9dd0c?source=collection_archive---------0-----------------------#2021-07-26">https://blog.devgenius.io/multi-laravel-sail-sites-with-custom-domain-e13c07d9dd0c?source=collection_archive---------0-----------------------#2021-07-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c716" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi ki translated">你是快乐的Laravel Sail用户，刚刚从Laravel Homestead迁移过来，但是在你的Homestead中有多个站点。Laravel Sail不像Homestead一样支持多站点。</p><p id="1a49" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是解决办法，像你的老情人一样工作——家园</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/8fee5fd82991c10bf0a0470b281fc004.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*RbmDaInh1Od8wdSck34GSA.png"/></div></figure><p id="90b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">先决条件:</strong></p><ul class=""><li id="151d" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">带有WSL2的Windows(用于Linux 2的Windows子系统)</li><li id="2087" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">运行在WSL2上的Docker桌面</li></ul><p id="9ce5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">阅读<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/kickstart-your-laravel-web-app-using-laravel-sail-30276265e588?source=your_stories_page-------------------------------------"> Kickstart你的Laravel Web App使用Laravel Sail </a>(或<a class="ae ln" href="https://youtu.be/rr6AngDpgnM" rel="noopener ugc nofollow" target="_blank">视频教程</a>)，<br/>如果你是一个新鲜的新人。</p><h1 id="057a" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">Nginx代理管理器</h1><p id="6b2f" class="pw-post-body-paragraph jk jl in jm b jn mm jp jq jr mn jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ig bi translated">我们将使用这个用户友好的工具— <a class="ae ln" href="https://github.com/jc21/nginx-proxy-manager" rel="noopener ugc nofollow" target="_blank"> Nginx代理管理器</a>来管理我们的站点。</p><p id="3d5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 1 </strong>。使用<code class="fe mr ms mt mu b">wsl</code>输入你的Ubuntu</p><p id="0081" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2 </strong>。<code class="fe mr ms mt mu b">cd ~</code>转到你在Ubuntu的主目录</p><p id="b893" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3 </strong>。<code class="fe mr ms mt mu b">mkdir proxy-manager</code>为这个工具创建一个文件夹</p><p id="6a1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4 </strong>。<code class="fe mr ms mt mu b">cd proxy-manager &amp;&amp; nano docker-compose.yml</code>用于合成容器<br/>复制并粘贴下面的内容</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="mv mw l"/></div></figure><blockquote class="mx my mz"><p id="fc81" class="jk jl na jm b jn jo jp jq jr js jt ju nb jw jx jy nc ka kb kc nd ke kf kg kh ig bi translated">我假设你的站点应该少于10个，所以我们可以用SQLite代替MariaDB。如果你想使用MariaDB，你可以查看官方文档。</p></blockquote><p id="01f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 5 </strong>。保存并退出</p><p id="768c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 6 </strong>。<code class="fe mr ms mt mu b">docker-compose up -d</code>启动容器(关闭:<code class="fe mr ms mt mu b">docker-compose down</code>)</p><p id="3208" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 7 </strong>。在浏览器中键入http://localhost:81 ，您应该能够看到GUI</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi ne"><img src="../Images/26327042e0f62de1ccfb736c13cff566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3fx3co6RgZMpNukZQqzBeQ.png"/></div></div></figure><blockquote class="mx my mz"><p id="ba79" class="jk jl na jm b jn jo jp jq jr js jt ju nb jw jx jy nc ka kb kc nd ke kf kg kh ig bi translated"><strong class="jm io">默认登录<br/> </strong>邮箱:admin@example.com<br/>密码:changeme</p></blockquote><p id="dc29" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 8 </strong>。完成必要的新帐户设置，稍后再回来。</p><h1 id="ba2f" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">配置非冲突端口</h1><p id="b790" class="pw-post-body-paragraph jk jl in jm b jn mm jp jq jr mn jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ig bi translated"><strong class="jm io"> 1 </strong>。<code class="fe mr ms mt mu b">cd ~ &amp;&amp; mkdir code</code>将我的所有项目放在代码文件夹下</p><p id="d374" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2 </strong>。<code class="fe mr ms mt mu b">cd code</code>然后</p><pre class="ks kt ku kv gt nj mu nk nl aw nm bi"><span id="83ab" class="nn lp in mu b gy no np l nq nr">curl -s https://laravel.build/sail-project-1 | bash<br/>curl -s https://laravel.build/sail-project-2 | bash</span></pre><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/8b255121ff02a72663609be8afa59ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:348/format:webp/1*HuqdEyqWVKhZSoBNx0rLRQ.png"/></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">这是我保存文件夹的方式</figcaption></figure><p id="5756" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我刚刚开始了两个新的项目进行演示，对于从非Sail Laravel项目迁移，你可以参考<a class="ae ln" href="https://laravel.com/docs/8.x/sail#installing-sail-into-existing-applications" rel="noopener ugc nofollow" target="_blank">官方Laravel文档</a>。新人则参考 上面的<a class="ae ln" href="#9ce5" rel="noopener ugc nofollow"> <em class="na">链接。</em></a></p><p id="1d28" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3 </strong>。使用各自文件夹中的<code class="fe mr ms mt mu b">code .</code>打开VS代码，然后编辑<code class="fe mr ms mt mu b">.env </code>文件。</p><p id="f1dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所有服务不能使用同一个端口。如果有任何端口发生冲突，您应该在运行<code class="fe mr ms mt mu b">sail up</code>时看到<code class="fe mr ms mt mu b">Ports are not available</code>错误。</p><pre class="ks kt ku kv gt nj mu nk nl aw nm bi"><span id="5b07" class="nn lp in mu b gy no np l nq nr">APP_PORT=48080<br/>FORWARD_DB_PORT=43306<br/>FORWARD_REDIS_PORT=46379<br/>FORWARD_MEILISEARCH_PORT=47700<br/>FORWARD_MAILHOG_PORT=41025<br/>FORWARD_MAILHOG_DASHBOARD_PORT=48025</span></pre><blockquote class="nx"><p id="a847" class="ny nz in bd oa ob oc od oe of og kh dk translated">💡端口49152到65535使用起来相当“安全”。如有冲突，只需更改您的。环境文件。</p></blockquote><blockquote class="mx my mz"><p id="c584" class="jk jl na jm b jn oh jp jq jr oi jt ju nb oj jx jy nc ok kb kc nd ol kf kg kh ig bi translated">您可以考虑减少默认服务，这样就不需要配置这么多端口。<a class="ae ln" href="https://laravel.com/docs/8.x/installation#choosing-your-sail-services" rel="noopener ugc nofollow" target="_blank">Laravel官方文档</a>提供了相关步骤。</p></blockquote><p id="8a18" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4 </strong>。一旦您配置了所有不冲突的端口，在每个项目文件夹中向上-d导航以启动容器。</p><h1 id="20c4" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">添加代理站点</h1><p id="d5e6" class="pw-post-body-paragraph jk jl in jm b jn mm jp jq jr mn jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ig bi translated">一旦你的帆船项目都是绿色的，你可以通过</p><pre class="ks kt ku kv gt nj mu nk nl aw nm bi"><span id="26ca" class="nn lp in mu b gy no np l nq nr">http://localhost:(PORT YOU ASSIGNED)</span></pre><p id="0aaf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 1 </strong>。返回代理主机以设置您的自定义域</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi om"><img src="../Images/9ca76f75d1b21ef9a73f9f38bd11e93d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aARNQhjBnX4Y3PaxrmnXtg.png"/></div></div></figure><p id="ee57" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2 </strong>。如下图所示创建新的代理主机:<br/>您只需要相应地更改“<strong class="jm io">域名</strong>”和“<strong class="jm io">转发端口</strong>”。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi on"><img src="../Images/502cfbe4c9cda6c2727e7b9c1df5d634.png" data-original-src="https://miro.medium.com/v2/resize:fit:1016/format:webp/1*hrtLEFD_5CHUqQNqdKiOpw.png"/></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">使用<strong class="bd lq"> host.docker.internal </strong>访问您的Laravel应用程序</figcaption></figure><p id="5896" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3 </strong>。最后，您仍然需要设置<code class="fe mr ms mt mu b">hosts</code>文件，让Windows指向正确的IP。<br/>只添加了两行，下面的行是由Docker桌面生成的。</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/fb381cab5b459e2efb34b23fdf20a797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*cfiaGczg77Hy4T0B_iajbg.png"/></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">c:\ Windows \ System32 \ drivers \ etc \ hosts</figcaption></figure><p id="9843" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4 </strong>。一切都准备好了，你可以在你的浏览器中试用它们</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi op"><img src="../Images/26cb8b628b3a2a9e459ea2c7014c7300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*Y87MTCFdy-KopWMClakhig.png"/></div></figure><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="gh gi oq"><img src="../Images/13dc0755e1a9998f15190bd6cd11eeb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_aFRDzp0hJoxuTkBbFtDA.png"/></div></div></figure><p id="2cde" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更多关于Laravel Sail <a class="ae ln" href="https://medium.com/@dogcomp/b7b73e3dedf7" rel="noopener">调试</a>、<a class="ae ln" href="https://dogcomp.medium.com/quick-tip-laravel-mix-hot-reloading-in-sail-with-browsersync-555b6c97bca3" rel="noopener">热装</a>、<a class="ae ln" href="https://medium.com/p/ddab7f5303ec" rel="noopener"> Swoole HTTPS </a>的内容，更多即将到来…关注我获取最新更新！感谢阅读😉</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="or mw l"/></div></figure><h1 id="559c" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">你准备好把你的网站放在网上，每月只需10美元就可以无限制地托管应用程序了吗？</h1><p id="654e" class="pw-post-body-paragraph jk jl in jm b jn mm jp jq jr mn jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ig bi translated">Cloudways 提供了大量的功能，让你可以轻松托管你的Laravel、WordPress或任何PHP网站，而不用担心网络安全的噩梦。</p><p id="1d56" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，您可以在BFCM 2022活动期间享受额外折扣！</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div class="gh gi os"><img src="../Images/c4aa55855082de96c53455aff24930d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/0*p55Wmd7swOzYyGty.jpg"/></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk translated">链接:www.cloudways.com/en/?id=66136</figcaption></figure><p id="376b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们开始尝试<strong class="jm io">云道</strong>！</p><p id="153e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你喜欢我的文章，请鼓掌，关注并分享我的文章(或者你可以☕ <a class="ae ln" href="https://buy.stripe.com/7sI03C9S56Upcpi8ww" rel="noopener ugc nofollow" target="_blank">请我喝咖啡</a> ☕)。保重，再见！</p></div></div>    
</body>
</html>