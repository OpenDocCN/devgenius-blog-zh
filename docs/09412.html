<html>
<head>
<title>Load Testing a PHP Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对 PHP 应用程序进行负载测试</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/load-testing-your-web-application-cc97ac0ee3d9?source=collection_archive---------7-----------------------#2022-08-19">https://blog.devgenius.io/load-testing-your-web-application-cc97ac0ee3d9?source=collection_archive---------7-----------------------#2022-08-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1f88" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解你的应用在高负载下的表现对于任何成功的在线业务都是至关重要的</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/583233cca90a06d60e9934d2413daa60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C3hPBGQnvBWpnndN"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae ks" href="https://unsplash.com/@alex_brov?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Oleksandr Brovko </a>拍摄的照片</figcaption></figure><p id="06fd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你有没有问过自己“我的应用程序能处理多少用户？”多亏了负载测试工具，这个问题并不难回答。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="74da" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated">关于负载测试</h2><p id="1ddd" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated"><a class="ae ks" href="https://en.wikipedia.org/wiki/Load_testing" rel="noopener ugc nofollow" target="_blank">负载测试</a>是一种有用的测试技术，它允许你验证你的应用程序在暴露于大量并发会话时的行为。在发布之前测试应用程序给了你一个发现代码中难以预测的问题的机会。</p><p id="7fbc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有许多工具可以执行这种测试，分为两大类:</p><ul class=""><li id="cc9b" class="mu mv in kv b kw kx kz la lc mw lg mx lk my lo mz na nb nc bi translated">离线工具——比如 Apache 的最流行和免费的<a class="ae ks" href="https://jmeter.apache.org/" rel="noopener ugc nofollow" target="_blank">jMeter</a></li><li id="6e0a" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">在线服务—由<a class="ae ks" href="https://en.wikipedia.org/wiki/Load_testing#Load_testing_tools" rel="noopener ugc nofollow" target="_blank">各种云提供商</a></li></ul></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="2099" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated">如何进行测试？</h2><p id="b8ae" class="pw-post-body-paragraph kt ku in kv b kw mp jo ky kz mq jr lb lc mr le lf lg ms li lj lk mt lm ln lo ig bi translated">在运行任何负载测试之前，您需要定义场景。这些步骤可以是简单的，如“加载单个页面”,也可以是复杂的，由多个步骤组成:</p><ul class=""><li id="2a11" class="mu mv in kv b kw kx kz la lc mw lg mx lk my lo mz na nb nc bi translated">登录到应用程序</li><li id="2777" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">使用搜索查找产品</li><li id="b36f" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">打开产品页面</li></ul><p id="8af1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">应该定期监视应用程序，因为随着时间的推移，应用程序的性能可能会因数据库中数据量的增加而下降。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="80d0" class="lw lx in bd ly lz ma dn mb mc md dp me lc mf mg mh lg mi mj mk lk ml mm mn mo bi translated">在哪里进行测试？</h2><ul class=""><li id="0a4f" class="mu mv in kv b kw mp kz mq lc ni lg nj lk nk lo mz na nb nc bi translated">可以进行测试:</li><li id="405c" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">在生产环境中，最好不要在高峰时段，以免因可能的停机而干扰常规用户</li><li id="0521" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">在暂存环境中，最好是服务器基础架构与生产环境相匹配或接近，并且数据库中植入了相同数量的数据</li><li id="c155" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">除非环境使用生产就绪设置，否则不建议使用本地开发环境</li></ul><p id="d2d0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在当地环境下:</p><ul class=""><li id="87f0" class="mu mv in kv b kw kx kz la lc mw lg mx lk my lo mz na nb nc bi translated">服务器需要以某种方式暴露于互联网(例如，通过暴露的端口或隧道服务)</li><li id="7fc6" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">应该启用生产模式</li><li id="6b12" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">数据库应该包含足够的数据</li><li id="8e3b" class="mu mv in kv b kw nd kz ne lc nf lg ng lk nh lo mz na nb nc bi translated">网络吞吐量必须足够大，以处理数量增加的请求</li></ul></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="a32a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于基本用法，我推荐使用 SendGrid labs 的<a class="ae ks" href="https://loader.io" rel="noopener ugc nofollow" target="_blank"> Loader.io </a>服务。这项服务使用起来毫不费力，并且提供了慷慨的免费计划，每次测试有 10，000 个可能的客户，这对于开始使用这项服务来说绰绰有余。<strong class="kv io">免责声明</strong>:我与该提供商没有任何关系。</p><p id="d90b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了开始，您需要添加 web 应用程序的主机名，并通过在根目录中放置一个验证文件来证明所有权。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nl"><img src="../Images/b4b3dcca577c5f0d026463567d77f741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-J-2-iMw45ExRuK9yJ8jLA.png"/></div></div></figure><p id="5778" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">成功验证后，我们可以定义我们的场景。我将在我的开发环境中测试主页渲染速度。请记住，服务器没有以任何方式进行优化😊</p><p id="669d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我将选择“maintain client load”测试来验证在一分钟的测试中，当每秒钟有 50 个客户端请求主页时，我的环境表现如何。我将包含带有会话 id 的 cookie，以便在请求期间对会话进行身份验证，并包含同意 cookie，以免用 GDPR 模式干扰请求。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nm"><img src="../Images/3903296d81b0fe01eafa19167340dd2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DYz2CCKIbfTkaWC1wcwNHQ.png"/></div></div></figure><p id="7905" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我一点击“运行测试”按钮，它就开始运行。果然，正如我所料，过了一会儿，它没有完全执行。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/cf83704594acc4a0edf8876fd3802e94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YZV0PA0QYJz6gNcK83MGEQ.png"/></div></div></figure><p id="a19b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">从图表中可以看出，由于大量的并发请求，响应时间不断增加，直到达到 10 秒的限制，测试中止。我的开发环境无法处理 50 个并发会话。我将编辑场景，并同时进行 10 次会议。</p><p id="19d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这一次它设法完成了，平均响应时间为 4733 毫秒。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi no"><img src="../Images/41493fd43ceab7f71682670ba8f1b20c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0HnQoRbkVFmNTD49ynuk0Q.png"/></div></div></figure><p id="3465" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">不能称之为成功，但至少是有效的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi np"><img src="../Images/df1896a7783e248bf2c905872d6309ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/0*1B9AtkRzOzkRpRTW.jpg"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated"><a class="ae ks" href="https://imgflip.com" rel="noopener ugc nofollow" target="_blank">https://imgflip.com</a></figcaption></figure></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="a3c6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我喜欢负载测试，并且一直在做。它允许比较任何类型的性能修改的“之前”和“之后”的结果。</p><p id="fc61" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你会试一试吗？也许你知道一个你想分享的好服务，请在评论中告诉我。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="e874" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nq">有什么疑问吗？想法？请给我留下你的看法。让我们一起让我们的代码变得美丽。订阅我的出版物，获取更多类似的文章，成为更好的开发人员。</em></p><p id="94e6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个故事<em class="nq">对你有价值吗</em>？请留言支持我的工作👏鼓掌表示感谢你知道你可以不止一次鼓掌吗？🥰 <em class="nq">谢谢。</em></p></div></div>    
</body>
</html>