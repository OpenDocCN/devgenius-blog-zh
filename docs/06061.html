<html>
<head>
<title>Explore your favorite music data with Spotify API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Spotify API 探索您最喜爱的音乐数据</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/explore-your-favorite-music-data-with-spotify-api-2510a635947c?source=collection_archive---------11-----------------------#2021-12-09">https://blog.devgenius.io/explore-your-favorite-music-data-with-spotify-api-2510a635947c?source=collection_archive---------11-----------------------#2021-12-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="e6c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 Spotify API 提取一些关于您最喜欢的歌曲和专辑的有趣数据进行处理！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a966a8cf5cfe0f6e9a022e773cbf93d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zn0vsvnYDo9jxpiBm42sDg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由 Imtiyaz Ali 在 Unsplash 上拍摄</figcaption></figure><p id="b72a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Spotify 为用户提供了一个非常容易上手的 API。让我们首先从定义 API 开始。</p><p id="1de8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ky" href="https://www.ibm.com/cloud/learn/api" rel="noopener ugc nofollow" target="_blank"> IBM 提供了一个非常简单的解释</a>:<em class="kz">应用程序编程接口(API)使公司能够向外部第三方开发者、业务合作伙伴和公司内部部门开放其应用程序的数据和功能。</em>“把 Spotify 想象成一个巨大的歌曲数据库，我们用它来根据自己的喜好播放音乐。现在，Spotify 希望特别向程序员提供这些数据，以便他们可以在自己的项目中使用这些数据，提出创造性的应用程序，将它们提供给 ML 模型等。这些都可以借助应用编程接口来完成。此外，这也有助于在这个过程中为 Spotify 建立一个繁荣的开发者社区:)</p><h1 id="b315" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">如何入门</strong>？</h1><p id="9faa" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">首先，在开始实际项目之前，让我们熟悉一下 Spotify API——它是如何工作的，你可以获得什么样的数据，以什么格式获得，以及其他事情。为此，请访问<a class="ae ky" href="https://developer.spotify.com/?_gl=1*18e54ke*_gcl_aw*R0NMLjE2Mzc0ODA1ODAuRUFJYUlRb2JDaE1JaXJHMXVfcW85QUlWU1pKbUFoMThEQXkwRUFBWUFTQUFFZ0w0N2ZEX0J3RQ..*_gcl_dc*R0NMLjE2Mzc0ODA1ODAuRUFJYUlRb2JDaE1JaXJHMXVfcW85QUlWU1pKbUFoMThEQXkwRUFBWUFTQUFFZ0w0N2ZEX0J3RQ..&amp;_ga=2.263976204.1651096753.1637219209-1571326493.1637219209&amp;_gac=1.182577426.1637480580.EAIaIQobChMIirG1u_qo9AIVSZJmAh18DAy0EAAYASAAEgL47fD_BwE" rel="noopener ugc nofollow" target="_blank"> Spotify for Developers </a>网站，点击标题中的<strong class="jm io"> DOCS </strong>选项。你会看到不同的图标，这些图标都是指向各自指南的链接，点击<strong class="jm io"> WEB API </strong>图标。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi md"><img src="../Images/066ee8e1c1209f70eaefafcdf0a03ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sxD7UWQ8Qe2dLalXWURYuw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</figcaption></figure><p id="8cd2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个新窗口中，你会看到 Spotify 对其 WEB API 的解释——你可以发送的不同 HTTP 请求，它的响应格式，各种端点，对你请求的数据集进行分页等。快速浏览一下这一页，它会让你以后更容易理解:)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/7d3890a7f9964619029935120fb54c03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4fCEhYAu_Rw-G5716SVxyQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</figcaption></figure><p id="2260" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你认为你现在有点理解 Spotify API 是如何工作的，让我们看看探索不同 API 端点的各种例子。对我们来说很好，Spotify 为我们提供了一个简单的方法，实际上不需要写一行代码！为此，点击次级导航栏中的<strong class="jm io">参考</strong>选项卡。这将打开一个名为“Spotify Web API”的新页面，相关端点被分类到网站左侧列出的不同类别中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/639c2cc683b2b9feb1430d5cd326605c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PtWHgTP0SI5SFB_jw9LhvA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">(图片由作者提供)</figcaption></figure><p id="59ea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">单击您选择的端点后，您将看到使用该端点生成的请求和响应的示例。如您所见，响应是以 JSON 格式生成的，如 WEB API 页面中所述。该页面还解释了请求和响应中使用的各种查询和参数。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/9cc4bbf1890384420064b976e5b3137f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W51GtNk92j08xiL2UMoiQA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">使用的端点:获取艺术家的热门曲目(图片由作者提供)</figcaption></figure><p id="7c81" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kz">注意</em>:如果您想了解更多，请选择顶部横幅中除了我们之前了解的文档之外的<strong class="jm io">控制台</strong>选项。该选项将允许您发送一个带有您自己选择的 id 和参数的请求，并再次得到结果响应——而无需编写任何代码！</p><h1 id="e107" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">斯波特比</h1><p id="7689" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated"><em class="kz"> Spotipy </em>是 Spotify Web API 的轻量级 Python 库。有了 Spotify，你可以完全访问 Spotify 提供的所有音乐数据。在这个项目中，我们将使用 Spotipy 通过不同的端点发送请求。阅读<a class="ae ky" href="https://spotipy.readthedocs.io/en/2.19.0/" rel="noopener ugc nofollow" target="_blank">这个 Spotify 文档</a>对你来说很重要，这样你就可以毫无问题地创建自己的 Spotify API 项目。</p><h1 id="b824" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">创建应用程序</h1><p id="f792" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">既然您已经尝试了 Spotify API，让我们从这个项目开始吧。前往顶部横幅中的 Dashboard 选项，登录您的 Spotify 帐户。登录后，点击创建一个应用程序选项，并给它一个你选择的名称和描述。这一步将为您获取一个<strong class="jm io">客户端 Id </strong>和一个<strong class="jm io">客户端机密</strong>，您需要使用它们向 Spotify API 发出请求。请记住安全地存储它，因为如果它被泄露，有人可能会使用它来代表您的应用程序发送请求。在这个例子中，我们将使用 Http GET 方法。要使用 POST 方法，您需要使用 OAuth，您可以在 Spotify 的文档中了解它。</p><h1 id="9fb8" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">我们开始吧</h1><p id="8f8e" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv ma jx jy jz mb kb kc kd mc kf kg kh ig bi translated">我希望到目前为止，我们已经涵盖了使用 Spotify API 所需的所有基础知识。所以让我们从安装 Spotify 开始吧。</p><pre class="kj kk kl km gt mh mi mj mk aw ml bi"><span id="0f9e" class="mm lb in mi b gy mn mo l mp mq">pip install spotipy</span></pre><p id="2edb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你现在有了你的客户 ID 和客户密码。您可以直接在代码中使用它们，使用 os 库将它们设置为环境变量，或者将它们存储在 python 模块中，稍后您可以将其导入到代码中。</p><p id="4c9c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">提出请求</strong></p><p id="819c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们使用 Spotipy 的<em class="kz"> playlist_items() </em>请求获取播放列表项端点。</p><pre class="kj kk kl km gt mh mi mj mk aw ml bi"><span id="7acb" class="mm lb in mi b gy mn mo l mp mq">import spotipy<br/>from spotipy.oauth2 import SpotifyClientCredentials</span><span id="0389" class="mm lb in mi b gy mr mo l mp mq">sp = spotipy.Spotify(client_credentials_manager = SpotifyClientCredentials( client_id = '<em class="kz">your client id'</em>, client_secret = '<em class="kz">your client secret'</em>) )</span><span id="65f4" class="mm lb in mi b gy mr mo l mp mq">playlist = sp.playlist_items('<a class="ae ky" href="https://open.spotify.com/playlist/37i9dQZF1DX5q67ZpWyRrZ?si=19b6481d00fd4c2b',market='IN'" rel="noopener ugc nofollow" target="_blank"><em class="kz">add playlist url of your choice</em>'</a>)</span></pre><p id="b3ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，如果你打印<em class="kz">播放列表</em>，你会看到 JSON 格式的响应，就像我们之前在 Spotify 网站上看到的例子一样。现在观察数据。寻找您感兴趣并希望包含在数据集/项目中的内容。接下来，您要编写代码来提取您想要的特定数据。下面是从<em class="kz"> playlist_items </em>响应中获取一些具体数据的代码。</p><pre class="kj kk kl km gt mh mi mj mk aw ml bi"><span id="7abd" class="mm lb in mi b gy mn mo l mp mq">index=[]<br/>track_name = []<br/>album = []<br/>track_artist = []<br/>track_url = []<br/>popularity = []<br/>explicit = []<br/></span><span id="0f76" class="mm lb in mi b gy mr mo l mp mq">for idx, item in ennumerate(playlist['items'],1):<br/>    #index<br/>    index.append(idx)<br/>  <br/>    #track name<br/>    track_name.append(item['track']['name']) </span><span id="d44f" class="mm lb in mi b gy mr mo l mp mq">    #album<br/>    album.append(item['track']['album']['name'])</span><span id="7aaa" class="mm lb in mi b gy mr mo l mp mq">    #track artist<br/>    track_artist.append(item['track']['artists'][0]['name'])<br/>   <br/>    #track popularity<br/>    popularity.append(item['track']['popularity'])<br/>    <br/>    #track explicity<br/>    explicit.append(item['track']['explicit'])<br/>    <br/>    #track url<br/>    track_url.append(item['track']['external_urls']['spotify'])</span></pre><p id="ba93" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们现在已经收集了不同列表中的数据。现在让我们用一个熊猫的数据框架来更好地展示我们收集的数据。</p><pre class="kj kk kl km gt mh mi mj mk aw ml bi"><span id="10eb" class="mm lb in mi b gy mn mo l mp mq">import pandas as pd</span><span id="f72a" class="mm lb in mi b gy mr mo l mp mq"> playlist = pd.DataFrame( {’Track’:track_name, ’Track Artists’:track_artist,  'Track Popularity’:popularity, 'Explicit’:explicit, 'Album’:album, 'Track url’:track_url} )</span><span id="f75e" class="mm lb in mi b gy mr mo l mp mq">#Set index<br/>df1.index = index</span></pre><p id="75ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，对于任何给定的播放列表，我们的数据集应该看起来像这样</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/4d1ef5a4ccccf6b649c00082ced39e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XCRog0ZVlGeuNT1gOFgH7A.png"/></div></div></figure><p id="9491" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就是这个！我们完了！那不是很难吗？我希望如此:)你现在可以用这个 API 做很多有趣的事情了。想象力是你的极限…</p></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><p id="0dc5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kz">更多内容尽在</em><a class="ae ky" href="http://blog.devgenius.io" rel="noopener ugc nofollow" target="_blank"><em class="kz">blog . dev genius . io</em></a><em class="kz">。</em></p></div></div>    
</body>
</html>