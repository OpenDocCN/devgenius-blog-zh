<html>
<head>
<title>Object-Oriented JavaScript — Timers and the DOM</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向对象的JavaScript——计时器和DOM</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/object-oriented-javascript-timers-and-the-dom-a5d19a1f5f1b?source=collection_archive---------5-----------------------#2020-11-23">https://blog.devgenius.io/object-oriented-javascript-timers-and-the-dom-a5d19a1f5f1b?source=collection_archive---------5-----------------------#2020-11-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/581ba843c322b9fe2fa34beaa5f66ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*epZDPP3WqKUn0lBz"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@veri_ivanova?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">维里·伊万诺娃</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="cbfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript部分是面向对象的语言。</p><p id="7b04" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要学习JavaScript，我们必须学习JavaScript的面向对象部分。</p><p id="6eb1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看<code class="fe lb lc ld le b">window</code>和DOM的内置属性。</p><h1 id="289b" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">window.setTimeout()和window.setInterval()方法</h1><p id="f22f" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用<code class="fe lb lc ld le b">window.setTimeout</code>和<code class="fe lb lc ld le b">window.setInterval</code>方法来调度一些JavaScript代码的执行。</p><p id="550a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">setTimeout</code>让我们在延迟后运行一些代码。</p><p id="694c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="cb44" class="mq lg iq le b gy mr ms l mt mu">function foo() {<br/>  alert('foo');<br/>}<br/>setTimeout(foo, 2000);</span></pre><p id="8438" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回计时器的ID。</p><p id="7430" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用这个ID给<code class="fe lb lc ld le b">clearTimeout</code>打电话取消计时器。</p><p id="6459" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="b816" class="mq lg iq le b gy mr ms l mt mu">function foo() {<br/>  alert('foo');<br/>}<br/>const id = setTimeout(foo, 2000);<br/>clearTimeout(id);</span></pre><p id="438d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么警报将永远不会显示，因为2秒钟前的<code class="fe lb lc ld le b">clearTimeout</code>已经结束。</p><p id="0ebe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe lb lc ld le b">setInterval</code>方法来调度<code class="fe lb lc ld le b">foo</code>每2秒运行一次。</p><p id="1d93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="73aa" class="mq lg iq le b gy mr ms l mt mu">function foo() {<br/>  console.log('foo');<br/>}<br/>const id = setInterval(foo, 2000);</span></pre><p id="faa6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过编写以下代码调用<code class="fe lb lc ld le b">clearInterval</code>来取消计时器:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="88bf" class="mq lg iq le b gy mr ms l mt mu">clearInterval(id);</span></pre><p id="e479" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将一个函数调度在几毫秒内并不能保证它就在那个时间执行。</p><p id="3913" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数浏览器没有毫秒级的解析时间。</p><p id="69eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，浏览器维护了一个我们期望他们做什么的队列。</p><p id="dabf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">100毫秒意味着在100毫秒后加入队列</p><p id="aace" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是队列可能会被一些慢的东西延迟。</p><p id="5f6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">大多数最新的浏览器都有比超时功能更好的<code class="fe lb lc ld le b">requestAnimationFrame</code>功能，因为我们要求浏览器只要有资源就运行。</p><p id="ce09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">计划不是以毫秒为单位定义的。</p><p id="c60f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="7177" class="mq lg iq le b gy mr ms l mt mu">function animateDate() {<br/>  requestAnimationFrame(() =&gt; {<br/>    console.log(new Date());<br/>    animateDate();<br/>  });<br/>}<br/>animateDate();</span></pre><p id="e3db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当浏览器可以运行代码时记录最新日期。</p><h1 id="c1c0" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">window.document属性</h1><p id="b95c" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">window.document</code>属性是一个BOM对象，它引用当前加载的文档或页面。</p><h1 id="ffea" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">数字正射影像图</h1><p id="54a9" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">DOM将XML或HTML文档表示为节点树。</p><p id="fd8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用DOM方法和属性来访问页面上的任何元素。</p><p id="0bef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以使用它们来修改或删除元素。</p><p id="6194" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个独立于语言的API，可以用任何语言实现。</p><p id="c2d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以在浏览器的Elements选项卡中查看DOM树。</p><p id="cf3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该看到一个<code class="fe lb lc ld le b">p</code>元素是由<code class="fe lb lc ld le b">HTMLParagraphElement</code>构造函数创建的。</p><p id="3b1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">head标签是由<code class="fe lb lc ld le b">HTMLHeadElement</code>构造函数创建的。</p><h1 id="f840" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">核心DOM和HTML DOM</h1><p id="8fd3" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">核心DOM构成了DOM规范的最基本部分。</p><p id="1e47" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">HTML DOM规范建立在核心DOM之上。</p><p id="9e19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下构造函数位于核心DOM中:</p><ul class=""><li id="2561" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated"><code class="fe lb lc ld le b">Node</code> —树上的任何节点</li><li id="e320" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">Document</code> —文档对象</li><li id="b76f" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">Element</code> —树上的标签</li><li id="b242" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">CharacterData</code> —处理文本的构造器</li><li id="026e" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">Text</code> —标签中的文本节点</li><li id="b408" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">Comment</code> —文档中的注释</li><li id="2536" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">Attr</code> —标签的属性</li><li id="12d4" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">NodeList</code> —节点列表，这是一个具有<code class="fe lb lc ld le b">length</code>属性的类似数组的对象</li><li id="7c2b" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">NamedNodeMap</code> —与<code class="fe lb lc ld le b">NodeList</code>相同，但是可以通过名称而不是数字索引来访问节点。</li></ul><p id="a390" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">HTML DOM有以下构造函数:</p><ul class=""><li id="3593" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated"><code class="fe lb lc ld le b">HTMLDocument</code>—<code class="fe lb lc ld le b">document</code>对象的HTML特定版本</li><li id="52b1" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">HTMLElement</code> —所有HTML元素的父构造函数</li><li id="3f61" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">HTMLBodyElement</code> —表示主体标签的元素</li><li id="41cb" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">HTMLLinkElement</code>—<code class="fe lb lc ld le b">a</code>元素</li><li id="8961" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">HTMLCollection</code> —一个特定于HTML的<code class="fe lb lc ld le b">NamedNodeMap</code></li></ul><p id="038d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用它们来访问DOM节点，并修改、创建和删除节点。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nj"><img src="../Images/1794127ac24d3775a3f457d116fe89b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mj_jmkjIgKxY-q1M"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@muay0051?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Siri wan arunsiriwatana</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="6327" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="c170" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">HTML文档由DOM表示。</p><p id="e43d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以获取并操纵DOM树中的节点来做我们想做的事情。</p><p id="63aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">window</code>有定时器方法让我们调度代码运行。</p></div></div>    
</body>
</html>