<html>
<head>
<title>How to calculate the color of the sky with React.js Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 React.js 计算天空的颜色第二部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/show-me-the-sky-is-blue-using-react-js-part-2-a94f5bc0a44b?source=collection_archive---------14-----------------------#2022-05-09">https://blog.devgenius.io/show-me-the-sky-is-blue-using-react-js-part-2-a94f5bc0a44b?source=collection_archive---------14-----------------------#2022-05-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/5054fb9d7c208221b28063302f555880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6cMHvpR7PjlYyYQa9Yt41A.png"/></div></div></figure><p id="c12e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是描述<a class="ae kt" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> React </strong> </a>的介绍性项目的系列文章的第二篇。你可以在这里阅读第一篇文章<a class="ae kt" href="https://medium.com/@dominicchang/show-me-the-sky-is-blue-using-react-js-part-1-f851af7bfc84" rel="noopener"/>,在那里我也讨论了在给定太阳温度的情况下预测天空的颜色。以下内容将向您展示如何用 React 实现我所讨论的内容。<a class="ae kt" href="https://dchang10.github.io/blue-sky/" rel="noopener ugc nofollow" target="_blank">这里的</a>是最终结果应该是什么样子。</p><h1 id="fb35" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">密码</h1><h2 id="b0a1" class="ls kv in bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">自举反应</h2><p id="6a7a" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">你需要下载并安装节点包管理器(<a class="ae kt" href="http://npmjs.com" rel="noopener ugc nofollow" target="_blank"> npm </a>)来完成这个项目。</p><p id="231f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">React 是一个 JavaScript 库，对于构建动态用户界面非常有用。React 主要用于构建单页 JavaScript 应用程序，但也可以在使用<a class="ae kt" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> next.js </a>进行服务器端渲染的项目中实现。</p><p id="5b45" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">设置一个 react 应用程序可能会很繁琐，但是你可以用<a class="ae kt" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> create-react-app </a>来<strong class="jx io">引导</strong>这个过程。<code class="fe mj mk ml mm b">cd</code>到您希望保存和执行项目的文件夹，</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="b3c9" class="ls kv in mm b gy mv mw l mx my">npm install create-react-app<br/>npx create-react-app blue-sky</span></pre><p id="ddc6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您应该会看到一个名为 blue-sky 的文件夹。这个文件夹将是我们项目的主页。现在<code class="fe mj mk ml mm b">cd</code>进入<code class="fe mj mk ml mm b">blue-sky</code>，你应该会看到以下内容</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="c833" class="ls kv in mm b gy mv mw l mx my">\blue-sky<br/>├── node_modules<br/>├── package-lock.json<br/>├── package.json<br/>├── public<br/>├── README.md<br/>└── src</span></pre><p id="2e23" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您需要为这个项目安装 mathjs。您可以通过执行 npm 来实现这一点，</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="ade3" class="ls kv in mm b gy mv mw l mx my">npm install mathjs</span></pre><p id="83e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在可以用下面的命令启动 react 服务器，</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="771b" class="ls kv in mm b gy mv mw l mx my">npm start</span></pre><p id="8030" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您应该会看到:</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/4e09f1385481d7594735c4d98a081380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*x0ixs9OGofYHFQV5-fxKiQ.gif"/></div></div></figure><p id="e884" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mj mk ml mm b">cd</code>进入<code class="fe mj mk ml mm b">\src</code>，在你喜欢的文本编辑器中打开<code class="fe mj mk ml mm b">App.js</code>。文件的内容应该是这样的:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><h2 id="57a2" class="ls kv in bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">JSX</h2><p id="db2c" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">如果您以前使用过 HTML，您可能会认出<code class="fe mj mk ml mm b">return</code>代码块内部的语法。这种类似 HTML <strong class="jx io"> DOM 元素</strong>的语法被称为<strong class="jx io"> JSX。</strong> JSX 被<a class="ae kt" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">巴别塔</strong> </a> <strong class="jx io"> </strong>编译器编译成用于 React 的 JavaScript。create-react-app 已经为你设置好了。</p><p id="e8af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您将需要为我们的网页定义我们自己的 DOM 元素，所以您应该删除<code class="fe mj mk ml mm b">return</code>代码块的内容，并在它的位置放置天空、太阳和控件的 DOM 元素。您可以用<code class="fe mj mk ml mm b">&lt;div&gt;</code>元素添加它，并给它们<strong class="jx io">引用</strong>，以便您的代码与之交互。</p><p id="8185" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加以下内容作为 return 语句的参数:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="94a8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">与 HTML 一样，您可以以内联方式更改 DOM 元素<strong class="jx io">的属性。您可以通过更改代码来为 DOM 元素添加一些样式，如下所示:</strong></p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><blockquote class="nc nd ne"><p id="3db3" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated"><em class="in">如果你对这些样式选项的作用感到好奇，你可以查看一下</em><a class="ae kt" href="https://www.w3schools.com/" rel="noopener ugc nofollow" target="_blank"><em class="in">w3schools</em></a><em class="in">的 HTML 部分。HTML 的语法通常是在</em> <strong class="jx io"> <em class="in">肉串案</em> </strong> <em class="in">而不是</em> <strong class="jx io"> <em class="in">骆驼案</em> </strong> <em class="in">，所以</em> <code class="fe mj mk ml mm b"><em class="in">backgroundColor</em></code> <em class="in">会被称为</em> <code class="fe mj mk ml mm b"><em class="in">background-color</em></code> <em class="in">，但除此之外，名字应该是一样的。</em></p></blockquote><p id="d2a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您的应用程序现在应该看起来像这样:</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/e7261d3a2df691731cf270a93ce91279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1mJ53e4yNe4lAgj5Sk-yLQ.png"/></div></div></figure><h2 id="60b8" class="ls kv in bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">钩住</h2><p id="f209" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated"><code class="fe mj mk ml mm b">ref</code>关键字定义了对 DOM 元素的引用，这是代码查找和更改 DOM 元素所必需的。<strong class="jx io"> React-hooks </strong>将是你在本教程中用来定义引用的对象。</p><p id="30f9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先需要从 React 导入钩子<code class="fe mj mk ml mm b">useRef</code>。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="f9db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在可以通过将下面的代码插入到<code class="fe mj mk ml mm b">App()</code>函数体中来定义 DOM 元素的引用。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="186d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些引用将允许您访问和更改代码中 DOM 元素的属性。</p><p id="33f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你的应用程序的一个重要属性是它的外观由温度决定。因此，谨慎的做法是使用温度来定义应用程序的'<em class="nf">状态</em>，并编写代码来改变 DOM 元素的属性以响应状态的变化。你可以用<code class="fe mj mk ml mm b">useState</code>钩子定义状态。编辑您的导入语句，</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ff4b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后在<code class="fe mj mk ml mm b">App()</code>函数中插入以下内容:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="26fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mj mk ml mm b">useState</code>将初始状态作为其参数，并返回一个对名为<code class="fe mj mk ml mm b">temperature</code>的状态的引用。<code class="fe mj mk ml mm b">useState</code>也返回一个函数，可以用来引起一个叫做<code class="fe mj mk ml mm b">setTemperature</code>的状态变化。初始温度设定为<code class="fe mj mk ml mm b">3100</code> K</p><p id="6d0a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您的<code class="fe mj mk ml mm b">App.js</code>文件中的完整代码应该如下所示:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="f555" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你的温度滑块现在没有任何作用。理想情况下，它应该改变显示在顶部的数字，并改变天空和太阳的颜色，以响应滑块。第一个很容易做到。显示的温度是<code class="fe mj mk ml mm b">temperature</code>状态的值，因此只需根据滑块改变温度状态。您可以通过向<code class="fe mj mk ml mm b">input</code> DOM 元素添加一个<code class="fe mj mk ml mm b">onChange</code> <strong class="jx io">事件处理程序</strong>来实现这一点，当 DOM 元素的值改变时，它将调用一个函数。</p><p id="4c43" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将您的<code class="fe mj mk ml mm b">&lt;input&gt;</code> DOM 元素更改为:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="9756" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是反作用钩子的魔力所在。请看这段代码:</p><pre class="mn mo mp mq gt mr mm ms mt aw mu bi"><span id="c838" class="ls kv in mm b gy mv mw l mx my">() =&gt; {setTemperature(event.target.value);}</span></pre><p id="88a3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个片段就是所谓的匿名<strong class="jx io">箭头函数。</strong>该函数将用于动态地将温度状态更改为我们的输入滑块的当前值。React 能够做到这一点，因为代码将使用您之前定义的<code class="fe mj mk ml mm b">tempRef</code>引用找到滑块。</p><p id="e11d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您的应用程序现在应该具有以下行为。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/5cf9e00fc4c44631e5acd345f7325d7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gwHy_7eCkY0UoWoDFPeWmw.gif"/></div></div></figure><h2 id="ab0b" class="ls kv in bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">XYZ 到 sRGB</h2><p id="50d4" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">你需要实现之前在<a class="ae kt" href="https://medium.com/@dominicchang/show-me-the-sky-is-blue-using-react-js-part-1-f851af7bfc84" rel="noopener"> <em class="nf">第一部分</em> </a>中讨论过的数学。这通常最简单的方法是向后工作，所以这是你将要采取的方法。回想一下，sRGB 值由下式确定:</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/31eb5c8201e0ea3ee836ad8f7617d055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/0*uOHDNzwV8JeItTqA.png"/></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/ce44f78b956d501fc705c03a89dbd046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FzwZto5h05xLon3e.png"/></div></div></figure><p id="769f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<code class="fe mj mk ml mm b">App()</code>函数外定义一个函数<code class="fe mj mk ml mm b">xyzTorgb</code>，但在同一个<code class="fe mj mk ml mm b">App.js</code>文件内，</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="f387" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您还需要将这个 sRGB 值转换成十六进制的<strong class="jx io">以备后用。您可以使用以下两个函数来实现这一点:</strong></p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><h2 id="6dfd" class="ls kv in bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">获取 XYZ 值</h2><p id="7c11" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">现在你需要找到天空和太阳的 XYZ 值。这些值是通过将光谱强度与 X、Y、Z 响应函数进行卷积得到的。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/9871dfc323975bde2145b040173bc21c.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/0*vKXHJKwvaFg7e6Fy.png"/></div></figure><p id="e1cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由于太阳和天空的光谱强度分布不同，因此它们的 XYZ 值也不同。</p><p id="62c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你要做的第一件事是定义 X，Y 和 Z 分布，因为它们将用于天空的颜色和太阳的颜色。您可以使用第 1 部分中给出的定义，</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/ebbbdad726fcaa8dd250d4f72356ce07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cWFCVknV-eAknzWL.png"/></div></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/55c3854e62eda1c5daf4ebcdcbfae2ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UoMajUjocmrKwqcC.png"/></div></div></figure><p id="17c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对应的代码是:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="7820" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在你需要太阳和天空的光谱指数。回想一下，太阳的光谱强度是由黑体辐射体描述的</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/91b5f3d4db0638436c4dee88ca9c63e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/0*qxngyiWVRbZAyTLq.png"/></div></figure><p id="08a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，您可以用以下公式定义黑体光谱辐射亮度:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="384c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，您需要定义一个积分函数，这样您就可以将所有内容卷积在一起。有很多数值积分算法。你可以采用的一种方法是<a class="ae kt" href="https://en.wikipedia.org/wiki/Romberg%27s_method#:~:text=Romberg's%20method%20is%20a%20Newton,only%20a%20few%20derivatives%20exist." rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">龙伯格的方法</strong> </a> <strong class="jx io">。</strong>可在<a class="ae kt" href="https://autarkaw.wordpress.com/2021/04/14/a-javascript-code-for-romberg-integration/" rel="noopener ugc nofollow" target="_blank">这里</a>找到一个示例实现。将以下实现添加到您的代码中:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="0ceb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个集成函数使用您在本教程开始时安装的<code class="fe mj mk ml mm b">mathjs</code>库。您需要将它导入 react 应用程序，并在代码引用的全局范围内实例化它。您可以使用以下代码来实现这一点:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="4cc4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在你可以把所有的东西放入一个函数中，这个函数将给出在给定温度下太阳的计算颜色。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><blockquote class="nc nd ne"><p id="7165" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated"><strong class="jx io">注意</strong>:由于波长很小，你可能很难从积分中得到合理的答案。本教程中使用的示例实现将波长重新调整为更小的单位，以解决这个问题。</p></blockquote><p id="f754" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您现在可以告诉 React 动态地将太阳的颜色设置为由您的<code class="fe mj mk ml mm b">getSunColor</code>函数计算出的任何波长。改变，</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ff33" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">到</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="37e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它将背景颜色设置为<code class="fe mj mk ml mm b">getSunColor </code>函数的输出。</p><h2 id="95cc" class="ls kv in bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">造型元素</h2><p id="222f" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">你可能会注意到你仍然缺少一个太阳，或者你的太阳看起来不是圆形的。你需要设计你的<code class="fe mj mk ml mm b">div</code>元素来获得正确的太阳外观。你可以用<strong class="jx io"> CSS </strong>来实现。</p><p id="a9c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开<code class="fe mj mk ml mm b">App.css</code>文件，并在文件底部添加以下内容:</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="bf3c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码描述了带有<code class="fe mj mk ml mm b">className</code>太阳的<code class="fe mj mk ml mm b">&lt;div&gt;</code>元素的样式。你现在应该可以看到你的太阳了，它应该会对你的滑块做出反应。您的应用程序应该具有以下行为:</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/af7e7bb56331640009bace3e7a51a54d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*14nTlKZLi86DK-LMOzgOOA.gif"/></div></div></figure><h2 id="74e1" class="ls kv in bd kw lt lu dn la lv lw dp le kg lx ly li kk lz ma lm ko mb mc lq md bi translated">收尾工作</h2><p id="4899" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">你的太阳会变色，但天空不会。你可以重复你对太阳做的同样的步骤来得到天空相应的颜色。回想一下天空的光谱辐射亮度是由瑞利散射描述的，</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/5d3bf526390e0bdec44491f089086c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/0*xN1akkQ83RaOJuoC.png"/></div></figure><p id="00de" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> I₀ </strong>是源光谱辐射亮度，在这种情况下是太阳的光谱辐射亮度。你可能还记得，计算天空的颜色只需要λ的四次方关系。所以你可以忽略这里的大部分术语，在<code class="fe mj mk ml mm b">App.js</code>中定义下面的函数</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="e0e2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mj mk ml mm b">getSkyColor</code>与<code class="fe mj mk ml mm b">getSunColor</code>相同，但是<code class="fe mj mk ml mm b">integrate</code>的参数包括前面提到的额外的λ到第四个依赖项。现在对天空的<code class="fe mj mk ml mm b">backgroundColor</code>做和对太阳一样的操作。改变，</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ecfb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">到，</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="b345" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">恭喜你！你已经用 React 向某人展示了天空的颜色。最终的应用程序应该是这样的:</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/a41e66586caad19416c4380106ffa00e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*-weKl3zopEhOt0wcs-6KJA.gif"/></div></div></figure></div></div>    
</body>
</html>