<html>
<head>
<title>Producer and Consumer samples for Apache Kafka</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿帕奇卡夫卡的生产者和消费者样本</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/producer-and-consumer-samples-for-apache-kafka-74a560abe803?source=collection_archive---------15-----------------------#2022-12-04">https://blog.devgenius.io/producer-and-consumer-samples-for-apache-kafka-74a560abe803?source=collection_archive---------15-----------------------#2022-12-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="6c26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为 Kafka 服务器创建生产者和消费者的指南</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4773a1a2cee1f79f983dde2a64e8b37e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R8PilJuqIiAk0kVk"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@mirakemppainen?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Mira Kemppainen </a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="874d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您还没有在本地机器上安装 Apache Kafka，请在继续之前阅读下面的文章。</p><div class="kz la gp gr lb lc"><a rel="noopener  ugc nofollow" target="_blank" href="/apache-kafka-set-up-on-a-local-system-890c48202e64"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd io gy z fp lh fr fs li fu fw im bi translated">Apache Kafka 在本地系统上的设置</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">在 ubuntu 系统上安装 Kafka 的分步指南</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">blog.devgenius.io</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><p id="d5f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">嗯，如果你已经安装了它；我们继续吧！</p><p id="304e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用三个不同的终端运行以下命令；</p><p id="7d0e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">动物园管理员:<code class="fe lr ls lt lu b">bin/zookeeper-server-start.sh config/zookeeper.properties</code></p><p id="3d3d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">卡夫卡-服务器:<code class="fe lr ls lt lu b">bin/kafka-server-start.sh config/server.properties</code></p><p id="902b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">集群管理器:<code class="fe lr ls lt lu b">bin/cmak -Dconfig.file=conf/application.conf -Dhttp.port=8080</code></p><p id="8583" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，在浏览器上打开集群管理器:<code class="fe lr ls lt lu b">localhost:8080/</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/a9a98c498d3e9576ac8862465928e1b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/0*kR_w4lvt-triSpsc"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">集群管理器主页</figcaption></figure><p id="5bec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">选择选项<code class="fe lr ls lt lu b">Add Cluster</code>；您将看到下面的屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/30d8e7c1590159e4c761c1ed73408afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/0*iFr7fq7nLGZk62By"/></div></figure><p id="d0b3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">添加您喜欢的任何集群名称(即样本)，我们的 zookeeper 主机正在<code class="fe lr ls lt lu b">localhost:2181</code>上运行。(如果您在不同的端口上配置了它，请提供该端口。)选择您想要检查的所有其他选项。保存配置，它将引导您进入下面的屏幕。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/bbbbcfe7fc4553ac84aa77aed1255760.png" data-original-src="https://miro.medium.com/v2/resize:fit:1230/0*nntRbIQL4fCVN2ba"/></div></figure><p id="7d2c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，在群集摘要中，我们有主题 1 和经纪人 1。最初，当我们创建一个集群时，它将拥有默认的 1 个主题和 1 个代理。</p><p id="b606" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果检查主题，默认主题是<code class="fe lr ls lt lu b">__consumer_offsets</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ly"><img src="../Images/753949437f5aaf42c299bbc8c3ed246a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*34nySP7OzTiwa98-"/></div></div></figure><p id="f725" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们编写一个生成数据的示例程序，将数据发送到 Kafka 服务器，并通过消费者检索数据。(注意:代码是用 Python 写的)</p><p id="31f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">必需的库:</p><pre class="kj kk kl km gt lz lu ma bn mb mc bi"><span id="8e1b" class="md me in lu b be mf mg l mh mi">Faker==8.10.1<br/>kafka-python==2.0.2<br/>python-dateutil==2.8.1<br/>text-unidecode==1.3</span></pre><p id="709a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以按照下面的代码或者克隆它:<code class="fe lr ls lt lu b"><a class="ae ky" href="https://github.com/harmishpatel21/kafka-demo-app.git" rel="noopener ugc nofollow" target="_blank">kafka-demo-app</a></code></p><p id="3509" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">生成假数据:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="f340" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">制片人:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="6434" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">消费者</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="d44a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">克隆一个 repo/code 后，打开两个终端；</p><p id="caf9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">端子 1: <code class="fe lr ls lt lu b">python producer.py</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ly"><img src="../Images/569ee282f1a0560819907eaa8d634ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AUIRmXkuQMtVBLHo"/></div></div></figure><p id="eb3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当您运行生成器时，请注意集群管理器。创建了一个名为<code class="fe lr ls lt lu b">registered_user</code>的新主题(这是我们在 producer.py 代码中提供的名称。)打开主题，你会看到，随着生产者生成假数据，‘分区偏移量之和’增加，意味着我们的 Kafka 服务器通过我们的生产者接收数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ml"><img src="../Images/a85c03b9f32ce9f553b1f76bf212a512.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*KLBjhGNwwRgABsVV4EQK-g.png"/></div></figure><p id="87e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">端子 2: <code class="fe lr ls lt lu b">python consumer.py</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ly"><img src="../Images/c2893e7a825e5ebbf40fee41eca75d9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5NIMcDOKUIxmdU0u"/></div></div></figure><p id="a23a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当您运行消费者时，它将从 Kafka 服务器读取所有数据。如果我们想要更多的消费者，我们可以打开另一个终端并运行 python consumer.py</p><p id="888b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有许多选项来划分主题、进行分区以及在不同的端口检索产生的数据。使用官方文档进行更多的实验。</p><p id="fe8d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mm">Ping me on</em><a class="ae ky" href="https://www.linkedin.com/in/harmish2111patel/" rel="noopener ugc nofollow" target="_blank"><em class="mm">LinkedIn</em></a><em class="mm">如果你需要 Kafka 的更详细的解释以及如何运行和配置它，或者如果你有任何建议，请在下面留下评论。</em></p><p id="d92f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢你的时间，我希望你能学到一些东西。</p></div></div>    
</body>
</html>