# C#中添加整数数组的 12 种方法—第 3 部分:集合思维

> 原文：<https://blog.devgenius.io/12-ways-to-add-an-array-of-integers-in-c-part-3-thinking-in-sets-e2f456454f88?source=collection_archive---------6----------------------->

![](img/56b8a351e9ac7e121413443480dc201c.png)

如果我们用 JavaScript 而不是 C#来做我们一直在讨论的数组求和练习，我们能提出多少种解决方案？显然，第 1 部分[中的 for 循环解决方案可以在 JavaScript 中工作。](https://medium.com/dev-genius/12-ways-to-add-an-array-of-integers-in-c-part-1-34753ff7f17a?source=friends_link&sk=ffb9131efdf8777a4d01208093229f3d)

当然，那篇文章中的两个相关的解决方案，使用 goto 和指针，将*不能*工作。JavaScript 有标签，但它们不能用于这种事情。如果 JavaScript 可以访问指针，互联网很可能无法熬过 90 年代。

来自第 2 部分的[的“foreach”解决方案也将非常相似，使用 for..的。](https://medium.com/dev-genius/12-ways-to-add-an-array-of-integers-in-c-part-2-freeform-iteration-2f5c810a8e7b?source=friends_link&sk=ae3d73998d2e57811d3bea1374f7ddc7)

提出一个基于迭代器的解决方案也很容易，就像那篇文章中的解决方案一样。

正如您可能已经想到的，for..JavaScript 中的构造可以被简化。

让我们稍微分解一下。为什么`values`有一个可用的`forEach`方法？因为在运行时，`values`(我们假设)会包含一个数组。现代 JavaScript 有一套令人印象深刻的处理数组的方法。事实上，我们可以使用另一种数组方法进一步简化这个例子。

一句话 FTW！

实际上，你可以用`reduce`做很多很棒的事情，包括一些非常聪明的事情，让下一个看你代码的人看不懂你的代码，这个人可能是六个月后的你，所以要小心！但是这种用法恰恰符合`reduce`的目的，即把一组事物简化成同一事物的一个实例。这些参数是一个“累加器”(如果需要，可以初始化为一个特定的值)和一个“当前”值。函数体只是描述了如何将“当前”值与“累加器”相结合，在本例中是将两者相加。

# 总计

现代 C#也有一系列令人印象深刻的方法可用于处理集合(看我在那里做了什么？).我在上一篇文章中提到，IEnumerable 接口是 C#中的一个重要概念。原因？任何实现 IEnumerable 的东西都可以访问 Enumerable 类中所有可用的扩展方法。这是一个相当长的列表！

事实上其中一种方法是。NET 版的`array.reduce`，叫`Aggregate`。

与 JavaScript 版本惊人地相似，是吧？而且就像 JavaScript 中的`reduce`一样，`Aggregate`可以用于各种善恶目的。任何时候你有了一个“IEnumerable”的东西——数字、字符串、日期、小部件等等——你可以使用`Aggregate`将向量转换成标量，将群体转换成个体，使用任何适用的转换逻辑将这些部分或全部组合成一个整体。

# 总和

相比之下，低级的`Sum`方法似乎相当弱。`Aggregate`可以拿任何种类的对象集合，对它们做任何事情；只能接受数字，它所知道的就是如何将数字相加。蹩脚！

在第 1 部分中，我花了一些时间谈论我如何喜欢使用它作为面试程序员的编码练习。就像我刚才说的，大多数人都会想到 for 循环。但对于少数本能地想出这个解决方案的人来说，要特别指出:

为什么这是我最喜欢的现实世界的解决方案？因为它是三个字母和一点点标点符号，然后你继续解决一些实际的业务问题。如果后来有什么东西坏了，几乎肯定不在这个代码中。你写了这个一行程序，就再也不用去想它了。

但是我们能指望它像手工制作的整数加法算法一样运行吗？大概，也许，谁知道呢？大概 99.99%的时候不会有什么区别。也许你的整数集有些独特或不寻常的地方(基数？发行？？？？)可以使用其他方法进行优化。也许你的整数加法问题是代码中性能关键部分的长极点。好吧，做你该做的。但是在我实现任何更复杂的东西之前，我将首先做简单的事情，然后测量它以证明简单的方法是行不通的。

无论哪种方式，一个能够将八行代码(包括括号在内的`for`解决方案)变成一行可读性很高的代码的开发人员，在我看来，很可能是一个将你的代码库向好的方向发展的开发人员。

一个开发者可以无缝地从思考一个过程在一个循环中执行多次——我们从 Cobol 和 RPG 时代就开始这样做——转向思考一个应用于一组类似术语的功能转换，嗯，这可能是一个将你的*团队*推向好的方向的开发者。

另一方面，如果一个开发人员的第一直觉是“我打赌我可以写一个递归方法来做到这一点”，那么他至少会是一个有趣的面试。然而，尽管递归可能不是这个解决方案的最佳方法，但对于程序员来说，理解递归仍然是一个有价值的概念。下次我们将探讨一些递归解决方案。