# ä½¿ç”¨ç‚¹ç½‘ç»œè¿è¡Œè°ƒè¯•(CLI)

> åŸæ–‡ï¼š<https://blog.devgenius.io/debug-with-dotnet-run-cli-c70dcdc98237?source=collection_archive---------2----------------------->

åœ¨å¼€å‘é˜¶æ®µï¼Œå¼€å‘äººå‘˜ç»å¸¸è¦è¿è¡Œç¨‹åºæ¥æµ‹è¯•å®ƒã€‚è¿è¡Œè°ƒè¯•æ¨¡å¼æœ€å¸¸è§ã€æœ€ç®€å•çš„æ–¹æ³•æ˜¯å•å‡» Visual Studio ä¸Šçš„ç»¿è‰²æ’­æ”¾æŒ‰é’®ã€‚

![](img/eeb1135c02cb96b521771966820c857d.png)

è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ã€‚net CLI ä¸å‘½ä»¤`dotnet run`ã€‚æˆ‘çš„ä¸€ä¸ªåŒäº‹å–œæ¬¢ä½¿ç”¨å‘½ä»¤è¡Œã€‚ä¸€å¼€å§‹æˆ‘ä¸å¤ªå–œæ¬¢ã€‚ç‚¹å‡» VS æŒ‰é’®å°±æ˜¯è¿™ä¹ˆç®€å•å®¹æ˜“ã€‚è¦è¿è¡Œè¯¥å‘½ä»¤ï¼Œæ‚¨å¿…é¡»æ‰“å¼€ä¸€ä¸ªå‘½ä»¤çª—å£ï¼Œæ›´æ”¹ç›®å½•ï¼Œç„¶åé”®å…¥å‘½ä»¤ã€‚ä½†æ˜¯å½“æˆ‘ä½¿ç”¨ VS æŒ‰é’®å¼€å‘æ—¶ï¼Œå‡ºç°äº†ä¸€äº›é—®é¢˜â€¦

## é—®é¢˜ 1: WebSocket

æˆ‘ä½¿ç”¨çš„æ˜¯ä¸€ä¸ª JS åº“ï¼Œå®ƒä½¿ç”¨äº†å¦ä¸€ä¸ªåä¸º [pace.js](https://codebyzach.github.io/pace/) çš„ JS åº“ã€‚è¯¥å·¥å…·çš„ç›®çš„æ˜¯æ˜¾ç¤ºè£…è½½è¿›åº¦ã€‚å‡ºäºæŸç§åŸå› ï¼Œå®ƒä¼šæ£€æŸ¥ WebSocketï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå°†æ°¸è¿œæŒ‚èµ·çš„ä¸œè¥¿â€¦åœ¨ pace.js çš„æƒ…å†µä¸‹ï¼Œå¦‚æœç½‘ç«™ä½¿ç”¨ WebSocketï¼Œå®ƒå°†æ°¸è¿œä¸ä¼š 100%åŠ è½½ã€‚
å‘ç”Ÿåœ¨æˆ‘èº«ä¸Šçš„äº‹æƒ…æ˜¯ï¼Œæˆ‘ä¸æ–­çœ‹åˆ° WebSocket é”™è¯¯ï¼Œçœ‹èµ·æ¥å¥½åƒæ²¡æœ‰åŠ è½½ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸ºå®ƒåªæœ‰åœ¨å®Œå…¨åŠ è½½æ—¶æ‰ä¼šæ˜¾ç¤ºã€‚æœ‰è¶£çš„æ˜¯ï¼Œå¦‚æœæˆ‘ç”¨å‘½ä»¤`dotnet run`è¿è¡Œå®ƒï¼Œä¸€åˆ‡éƒ½æ­£å¸¸ã€‚åŸæ¥å½“ä½ ç”¨ VS æŒ‰é’®è¿è¡Œæ—¶ï¼ŒVS ä¼šè‡ªåŠ¨ä¸ºä½ æ‰“å¼€ WebSockets

![](img/00e96c75fd260e6e4b1ac52790b2c8fe.png)![](img/d6fa7d8b9dc3c337d962878a49e3c798.png)

## é—®é¢˜ 2:å†…å®¹å®‰å…¨ç­–ç•¥

æˆ‘ä¸èƒ½ç”¨æˆ‘ä¸ºè¿™ç¯‡æ–‡ç« è€Œæ„å»ºçš„æµ‹è¯•é¡¹ç›®æ¥å¤åˆ¶è¿™ä¸ªé—®é¢˜â€¦ä½†æ˜¯å®ƒç¡®å®å‘ç”Ÿåœ¨æˆ‘æ­£åœ¨å·¥ä½œçš„ä¸€ä¸ªé¡¹ç›®ä¸Šã€‚å®ƒå°†å†…å®¹å®‰å…¨ç­–ç•¥æ·»åŠ åˆ°æ‚¨çš„æ‰€æœ‰å›å¤ä¸­ï¼Œå³ä½¿æˆ‘æ˜ç¡®æŒ‡å®šäº†å†…å®¹å®‰å…¨ç­–ç•¥ï¼Œæˆ‘ä¹Ÿæ— æ³•è¦†ç›–å®ƒã€‚åŒæ ·ï¼Œå½“ä½¿ç”¨`dotnet run`è¿è¡Œå®ƒæ—¶ï¼Œå®ƒæ¶ˆå¤±äº†ã€‚è™½ç„¶è¿™ä¸ªé—®é¢˜çš„åŸå› è¿˜ä¸æ¸…æ¥šâ€¦å› ä¸ºå®ƒåªå‘ç”Ÿåœ¨ä½¿ç”¨ VS æŒ‰é’®æ—¶ï¼Œæˆ‘ç°åœ¨è¦æŠŠå®ƒå½’å’äº VSã€‚ğŸ˜…

æ¥è‡ªåŒä¸€é¡¹ç›®çš„åŒä¸€é¡µé¢çš„åŒä¸€è¯·æ±‚çš„å“åº”æ ‡å¤´:

![](img/06399851729ed1989440a01cc4b63e1a.png)

ç”± VS è¿è¡Œ

![](img/719ada8faaf471a0b163df52572df739.png)

å¸¦ç‚¹ç½‘è¿è¡Œ

åŸºäºä¸Šè¿°é—®é¢˜ï¼Œæ— è®ºå¦‚ä½•ä½¿ç”¨`dotnet run`æ˜¯æˆ‘å”¯ä¸€çš„é€‰æ‹©ã€‚ä½†æ˜¯ä½¿ç”¨`dotnet run`æœ‰ä¸€äº›é¢å¤–çš„å¥½å¤„ã€‚

## å¥–é‡‘ 1

ä½¿ç”¨ã€‚net CLI å‘½ä»¤å…è®¸æ‚¨åƒè®¾ç½®`--no-build`ä¸€æ ·è®¾ç½®[é€‰é¡¹](https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-run#options)ã€‚æˆ‘æ­£åœ¨åšçš„é¡¹ç›®åˆ° buildâ€¦ğŸ¥±éœ€è¦ 9 åˆ†é’Ÿï¼Œæ‰€ä»¥å½“æˆ‘ä¸æƒ³é‡å»ºå®ƒæ—¶ï¼Œä½¿ç”¨`--no-build`å¯ä»¥èŠ‚çœæˆ‘ç›¸å½“å¤šçš„æ—¶é—´ã€‚

## å¥–é‡‘ 2

å¯¹äºä¸€ä¸ªéå¸¸æ¶ˆè€—å†…å­˜çš„é¡¹ç›®ï¼Œæ¯”å¦‚æˆ‘æ­£åœ¨è¿›è¡Œçš„é¡¹ç›®ï¼Œä½¿ç”¨ VS æ¥è°ƒè¯•å¯èƒ½ä¼šä½¿æ•´ä¸ª VS è¶…çº§æ»åï¼Œæˆ‘çš„ç¬”è®°æœ¬ç”µè„‘éå¸¸æ…¢ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä½¿ç”¨`dotnet run`æ¥è¿è¡Œå®ƒï¼ŒVS ä¿æŒä¸å˜ï¼Œå°±åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿä¸€æ ·ã€‚

ä½†æ˜¯ä½¿ç”¨`dotnet run`æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯ä½ ä¸èƒ½ç”¨å®ƒæ¥è°ƒè¯•ã€‚ä¸‹é¢æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ã€‚

# **å¦‚ä½•ç”¨ dotnet run è¿›è¡Œè°ƒè¯•**

å¯¹äºæ¼”ç¤ºï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º`mvcTest`çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥é¡¹ç›®`mvcTestProj`ä½œä¸ºå…¶èµ·å§‹é¡¹ç›®ã€‚

![](img/51bc26e48bbd417211f5f2b0eb26c92b.png)![](img/376cb3a67c2199a7bafb4319a423b57f.png)![](img/48a5008d963057ce82d8c68ffad0f2e0.png)

åœ¨æˆ‘ä»¬ç”¨å‘½ä»¤`dotnet run`å¼€å§‹è¿è¡Œå®ƒä¹‹åï¼Œ [https://localhost:7201](https://localhost:7201/) ç°åœ¨å·¥ä½œäº†ã€‚ä½†æ˜¯æ–­ç‚¹ä¸èµ·ä½œç”¨ã€‚

![](img/5d279ca307097f74a953f6c911d8303a.png)

ä¸ºäº†è°ƒè¯•ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ç‚¹å‡»é¡¶éƒ¨èœå•ä¸Šçš„`Debug`æ¥é™„åŠ è¿›ç¨‹ï¼Œç„¶åé€‰æ‹©`Attach to Process...`

![](img/522d1fdc39b64f4d98918cedd987f475.png)

æ‰¾åˆ°æˆ‘ä»¬æ­£åœ¨è¿è¡Œçš„é¡¹ç›®çš„`.exe`,ç„¶åé™„åŠ å®ƒã€‚

![](img/cae53554658c66631fc8386a2f7c4ce3.png)

ç°åœ¨æ–­ç‚¹å°†è¢«å‘½ä¸­ã€‚ğŸ¥³

![](img/8a8b349d79bea156b09f5eeb8a211bea.png)

ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œä¸€å¼€å§‹æˆ‘é™„åŠ äº†é”™è¯¯çš„è¿›ç¨‹ã€‚æˆ‘é™„ä¸Šäº†æ‰§è¡Œ`dotnet run`å‘½ä»¤çš„`dotnet.exe`ã€‚

![](img/6186d10a9859b23c612f7b3c6ff44885.png)

å‘ç”Ÿçš„æƒ…å†µæ˜¯ï¼Œæ–­ç‚¹ä»ç„¶ä¸èƒ½æŒ‰é¢„æœŸå·¥ä½œï¼Œä¹Ÿæ²¡æœ‰åŠ è½½ç¬¦å·æ–‡ä»¶ã€‚

![](img/5fb0b463f5c142feccbab74b9162c628.png)

è¿™é‡Œçš„é—®é¢˜æ˜¯æˆ‘ä»¬æƒ³è¦è°ƒè¯•çš„`.exe`å®é™…ä¸Šæ˜¯åœ¨`dotnet.exe`ä¸‹è¿è¡Œçš„`mvcTestProj.exe`ã€‚

![](img/667ad269a7e257bd825548ff8b3fded2.png)

å¦‚æœæˆ‘ä»¬ç”¨æ­£ç¡®çš„`.exe`é‡æ–°è¿æ¥å®ƒï¼Œä½ å¯ä»¥çœ‹åˆ°`.pdb`æ–‡ä»¶æ­£åœ¨è¢«åŠ è½½ã€‚ç°åœ¨æ–­ç‚¹å·¥ä½œäº†ã€‚

![](img/1fbb293774ec295f232ef7259163e016.png)

## ä»€ä¹ˆæ˜¯. pdb æ–‡ä»¶ï¼Ÿ

> ç¨‹åºæ•°æ®åº“(*)ã€‚pdb* )æ–‡ä»¶ï¼Œä¹Ÿç§°ä¸ºç¬¦å·æ–‡ä»¶ï¼Œå°†é¡¹ç›®æºä»£ç ä¸­çš„æ ‡è¯†ç¬¦å’Œè¯­å¥æ˜ å°„åˆ°å·²ç¼–è¯‘åº”ç”¨ç¨‹åºä¸­ç›¸åº”çš„æ ‡è¯†ç¬¦å’ŒæŒ‡ä»¤ã€‚è¿™äº›æ˜ å°„æ–‡ä»¶å°†è°ƒè¯•å™¨é“¾æ¥åˆ°æ‚¨çš„æºä»£ç ï¼Œä»è€Œæ”¯æŒè°ƒè¯•ã€‚

æ¥è‡ª:[å¾®è½¯](https://docs.microsoft.com/en-us/visualstudio/debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger?view=vs-2022)

æ‚¨å¯ä»¥åœ¨é¡¹ç›®çš„`bin`æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°è¯¥æ–‡ä»¶ã€‚

![](img/33772bfa6a3d3d401f5e1f1c2ce14e81.png)

æ¯•ç«Ÿï¼Œç°åœ¨å³ä½¿ç»¿è‰²æŒ‰é’®å°±åœ¨é‚£é‡Œï¼Œæˆ‘ä¹Ÿç†è§£å¹¶æ¬£èµä½¿ç”¨å‘½ä»¤`dotnet run`æ¥è¿è¡Œå®ƒçš„å¥½å¤„ã€‚ğŸ˜Œ

#C# #dotnet #dotnetrun #debug

## ä¸­æ–‡ç‰ˆ Chinese Version:

[](https://medium.com/@jiang.tingyu/debug-with-dotnet-run-d78b2a48e28a) [## å¦‚ä½•è®“ dotnet run ç”¨ä¸­æ–·é» debug

### åœ¨é–‹ç™¼çš„æ™‚å€™é¿å…ä¸äº†è¦å¸¸å¸¸æŠŠç¨‹å¼é–‹èµ·ä¾†è·‘è·‘çœ‹ï¼Œä¸€èˆ¬ç”¨ Visual Studio é–‹ç™¼æ™‚æ¯”è¼ƒç›´è¦º&ç°¡å–®çš„åšæ³•å°±æ˜¯ç›´æ¥æŒ‰ä»–çš„ç¶ è‰² play æŒ‰éˆ•ï¼š

medium.com](https://medium.com/@jiang.tingyu/debug-with-dotnet-run-d78b2a48e28a)