<html>
<head>
<title>Jetpack Compose with ConstraintLayout Sample</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 ConstraintLayout 示例编写的 Jetpack</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/jetpack-compose-with-constraintlayout-sample-24d720cffa4a?source=collection_archive---------5-----------------------#2022-07-07">https://blog.devgenius.io/jetpack-compose-with-constraintlayout-sample-24d720cffa4a?source=collection_archive---------5-----------------------#2022-07-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/54364b5b25021e4adb9bed4d93b11c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DwOpgjGMki_aazUlAfqaBg.jpeg"/></div></div></figure><p id="b919" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">基于 developer.android 网站，Jetpack Compose 是一个用于构建原生 Android UI 的现代工具包。Jetpack Compose 通过更少的代码、强大的工具和直观的 Kotlin APIs 简化并加速了 Android 上的 UI 开发。</p><p id="f5c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们看看如何在我们的项目中使用 Jetpack Compose:</p><ul class=""><li id="0400" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated"><em class="lc">转到新项目页面，选择空合成活动</em></li><li id="841c" class="kt ku in jx b jy ld kc le kg lf kk lg ko lh ks ky kz la lb bi translated">它的语言只有一个选项，就是 Kotlin(不能用 Java 编写 Jetpack Compose 组件)</li><li id="d929" class="kt ku in jx b jy ld kc le kg lf kk lg ko lh ks ky kz la lb bi translated">你不需要使用 XML 文件来设计 UI</li><li id="58a6" class="kt ku in jx b jy ld kc le kg lf kk lg ko lh ks ky kz la lb bi translated">通过使用“@Composable”的注释，您可以设计 UI</li><li id="66e6" class="kt ku in jx b jy ld kc le kg lf kk lg ko lh ks ky kz la lb bi translated">通过使用“@Preview”注释，您可以看到您的设计结果</li></ul><p id="096b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下图是一个简单的用户界面设计:</p><figure class="lj lk ll lm gt jo gh gi paragraph-image"><div class="gh gi li"><img src="../Images/a67484aabd42517c98574efea442d5e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*A0gGrETbYAatPffnkeO4Sw.png"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">由<a class="ae lr" href="https://unsplash.com/@miklevasilyev?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">米哈伊尔·瓦西里耶夫</a>在<a class="ae lr" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的鹦鹉照片</figcaption></figure><p id="307a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了实现上述设计，</p><p id="e8c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在您的 Gradle 文件中添加以下依赖项</p><pre class="lj lk ll lm gt ls lt lu lv aw lw bi"><span id="7948" class="lx ly in lt b gy lz ma l mb mc">implementation 'androidx.constraintlayout:constraintlayout-compose:1.1.0-alpha03'</span></pre><p id="b2af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后创建一个新的 Kotiln 文件，并编写以下代码:</p><pre class="lj lk ll lm gt ls lt lu lv aw lw bi"><span id="68c7" class="lx ly in lt b gy lz ma l mb mc">@Composable<br/>fun SimpleComposePage(){<br/>    <em class="lc">Card</em>(elevation = 5.<em class="lc">dp</em>,<br/>        modifier = Modifier<br/>            .<em class="lc">border</em>(width = 3.<em class="lc">dp</em>, color = Color.White, shape = <em class="lc">RoundedCornerShape</em>(20.<em class="lc">dp</em>))<br/>            .<em class="lc">padding</em>(top = 100.<em class="lc">dp</em>, bottom = 100.<em class="lc">dp</em>, start = 24.<em class="lc">dp</em>, end = 16.<em class="lc">dp</em>)<br/>            .<em class="lc">fillMaxSize</em>()) <strong class="lt io">{<br/>        </strong><em class="lc">ConstraintLayout</em>() <strong class="lt io">{<br/>            </strong>val (animalImage, animalName, btnAbout, btnImage, btnUploadImage, btnUploadText) = createRefs()<br/><br/>            <em class="lc">Image</em>(painter = <em class="lc">painterResource</em>(id = R.drawable.<em class="lc">parrot</em>), contentDescription = "Parrot",<br/>                contentScale = ContentScale.Crop,<br/>                modifier = Modifier<br/>                    .<em class="lc">padding</em>(top = 30.<em class="lc">dp</em>)<br/>                    .<em class="lc">size</em>(150.<em class="lc">dp</em>)<br/>                    .<em class="lc">clip</em>(<em class="lc">CircleShape</em>)<br/>                    .<em class="lc">border</em>(width = 2.<em class="lc">dp</em>, color = Color.Gray, shape = <em class="lc">CircleShape</em>)<br/>                    .<em class="lc">constrainAs</em>(animalImage) <strong class="lt io">{<br/>                        </strong>top.linkTo(parent.top)<br/>                        start.linkTo(parent.start)<br/>                        end.linkTo(parent.end)<br/>                    <strong class="lt io">}</strong>)<br/><br/>            <em class="lc">Text</em>(text = "Parrot", fontWeight = FontWeight.Bold, modifier = Modifier<br/>                .<em class="lc">padding</em>(top = 10.<em class="lc">dp</em>)<br/>                .<em class="lc">constrainAs</em>(animalName) <strong class="lt io">{<br/>                    </strong>top.linkTo(animalImage.bottom)<br/>                    start.linkTo(parent.start)<br/>                    end.linkTo(parent.end)<br/>                <strong class="lt io">}</strong>)<br/><br/>            <em class="lc">Button</em>(onClick = <strong class="lt io">{ </strong>/*Write onClick code here*/ <strong class="lt io">}</strong>,<br/>                modifier = Modifier.<em class="lc">constrainAs</em>(btnAbout)<strong class="lt io">{<br/>                    </strong>start.linkTo(parent.start, margin = 16.<em class="lc">dp</em>)<br/>                    top.linkTo(animalName.bottom, margin = 32.<em class="lc">dp</em>)<br/>                    end.linkTo(btnImage.start)<br/><br/>            <strong class="lt io">}</strong>) <strong class="lt io">{<br/>                </strong><em class="lc">Text</em>(text = "About Parrot")<br/>            <strong class="lt io">}<br/><br/>            </strong><em class="lc">Button</em>(onClick = <strong class="lt io">{ </strong>/*Write onClick code here*/ <strong class="lt io">}</strong>,<br/>                modifier = Modifier.<em class="lc">constrainAs</em>(btnImage)<strong class="lt io">{<br/>                    </strong>start.linkTo(btnAbout.end)<br/>                    top.linkTo(animalName.bottom, margin = 32.<em class="lc">dp</em>)<br/>                    end.linkTo(parent.end)<br/>                <strong class="lt io">}</strong>) <strong class="lt io">{<br/>                </strong><em class="lc">Text</em>(text = "More Images")<br/>            <strong class="lt io">}<br/><br/>            </strong><em class="lc">Button</em>(onClick = <strong class="lt io">{ </strong>/*Write onClick code here*/ <strong class="lt io">}</strong>,<br/>                modifier = Modifier.<em class="lc">constrainAs</em>(btnUploadImage)<strong class="lt io">{<br/>                    </strong>start.linkTo(parent.start, margin = 16.<em class="lc">dp</em>)<br/>                    top.linkTo(btnAbout.bottom, margin = 32.<em class="lc">dp</em>)<br/>                    end.linkTo(btnUploadText.start)<br/>                <strong class="lt io">}</strong>) <strong class="lt io">{<br/>                </strong><em class="lc">Text</em>(text = "Upload Image")<br/>            <strong class="lt io">}<br/><br/>            </strong><em class="lc">Button</em>(onClick = <strong class="lt io">{ </strong>/*Write onClick code here*/ <strong class="lt io">}</strong>,<br/>                modifier = Modifier.<em class="lc">constrainAs</em>(btnUploadText)<strong class="lt io">{<br/>                    </strong>start.linkTo(btnAbout.end)<br/>                    top.linkTo(btnImage.bottom, margin = 32.<em class="lc">dp</em>)<br/>                    end.linkTo(parent.end)<br/>                <strong class="lt io">}</strong>) <strong class="lt io">{<br/>                </strong><em class="lc">Text</em>(text = "Upload Text")<br/>            <strong class="lt io">}<br/>        }<br/>    }<br/></strong>}<br/><br/>@Preview(showBackground = true)<br/>@Composable<br/>fun Preview() {<br/>    <em class="lc">JetpackComposeTestTheme </em><strong class="lt io">{<br/>        </strong><em class="lc">SimpleComposePage</em>()<br/>    <strong class="lt io">}</strong></span></pre><p id="aedf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，在主活动中，您可以删除“Greeting ”,代之以输入 Kotlin 文件的名称，以便在模拟器中查看结果。</p><p id="4a93" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是一个简单的设计与 Jetpack 组成，但正如你可以从下面的图片看到，这个设计有一个问题与景观模式。</p><figure class="lj lk ll lm gt jo gh gi paragraph-image"><div class="gh gi md"><img src="../Images/30108589d7e01aff95fa0958e21277e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*uJL9bseVdA7gGwI9z0xz_g.png"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">米哈伊尔·瓦西里耶夫在<a class="ae lr" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的鹦鹉照片</figcaption></figure><p id="6093" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，一种方法是将我们的 Compose 方法中的位置值分成两种不同的方法(纵向和横向)，并将我们所有的布局代码放在“BoxWithConstraints”中，在其中，您应该定义条件来确定手机是纵向还是横向，并使用其相关功能。</p><pre class="lj lk ll lm gt ls lt lu lv aw lw bi"><span id="6870" class="lx ly in lt b gy lz ma l mb mc"><em class="lc">BoxWithConstraints</em>() <strong class="lt io">{<br/>    </strong>val constraintStatus = if(minWidth &lt; 600.<em class="lc">dp</em>){<br/>        <em class="lc">portraitLayout</em>()<br/>    }else{<br/>        <em class="lc">landscapeLayout</em>()<br/>    }</span></pre><p id="2dee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以下是它的最终结果:</p><figure class="lj lk ll lm gt jo gh gi paragraph-image"><div class="gh gi li"><img src="../Images/a67484aabd42517c98574efea442d5e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*A0gGrETbYAatPffnkeO4Sw.png"/></div></figure><figure class="lj lk ll lm gt jo gh gi paragraph-image"><div class="gh gi md"><img src="../Images/65e6c20f0f1c35bc6838b44101838d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*w5kxVpfItt24Jx7-MvDV4w.png"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">米哈伊尔·瓦西里耶夫在<a class="ae lr" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的鹦鹉照片</figcaption></figure><p id="fff7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是它的相关代码:</p><pre class="lj lk ll lm gt ls lt lu lv aw lw bi"><span id="e9ad" class="lx ly in lt b gy lz ma l mb mc">@Composable<br/>fun PortLandCompose(){<br/>    <em class="lc">Card</em>(elevation = 5.<em class="lc">dp</em>,<br/>        modifier = Modifier<br/>            .<em class="lc">border</em>(width = 3.<em class="lc">dp</em>, color = Color.White, shape = <em class="lc">RoundedCornerShape</em>(20.<em class="lc">dp</em>))<br/>            .<em class="lc">padding</em>(top = 50.<em class="lc">dp</em>, bottom = 50.<em class="lc">dp</em>, start = 16.<em class="lc">dp</em>, end = 16.<em class="lc">dp</em>)<br/>            .<em class="lc">fillMaxSize</em>()) <strong class="lt io">{<br/>        <br/>        </strong><em class="lc">BoxWithConstraints</em>() <strong class="lt io">{<br/>            </strong>val constraintStatus = if(minWidth &lt; 600.<em class="lc">dp</em>){<br/>                <em class="lc">portraitLayout</em>()<br/>            }else{<br/>                <em class="lc">landscapeLayout</em>()<br/>            }<br/><br/>            <em class="lc">ConstraintLayout</em>(constraintStatus, modifier = Modifier.<em class="lc">fillMaxSize</em>()) <strong class="lt io">{<br/><br/>                </strong><em class="lc">Image</em>(painter = <em class="lc">painterResource</em>(id = R.drawable.<em class="lc">parrot</em>), contentDescription = "Parrot",<br/>                    contentScale = ContentScale.Crop,<br/>                    modifier = Modifier<br/>                        .<em class="lc">padding</em>(top = 30.<em class="lc">dp</em>)<br/>                        .<em class="lc">size</em>(150.<em class="lc">dp</em>)<br/>                        .<em class="lc">clip</em>(<em class="lc">CircleShape</em>)<br/>                        .<em class="lc">border</em>(width = 2.<em class="lc">dp</em>, color = Color.Gray, shape = <em class="lc">CircleShape</em>)<br/>                        .<em class="lc">layoutId</em>("animalImage"))<br/><br/>                <em class="lc">Text</em>(text = "Parrot", fontWeight = FontWeight.Bold, modifier = Modifier<br/>                    .<em class="lc">padding</em>(top = 10.<em class="lc">dp</em>)<br/>                    .<em class="lc">layoutId</em>("animalName"))<br/><br/>                <em class="lc">Button</em>(onClick = <strong class="lt io">{ </strong>/*Write onClick code here*/ <strong class="lt io">}</strong>,<br/>                    modifier = Modifier.<em class="lc">layoutId</em>("btnAbout")) <strong class="lt io">{<br/>                    </strong><em class="lc">Text</em>(text = "About Parrot")<br/>                <strong class="lt io">}<br/><br/>                </strong><em class="lc">Button</em>(onClick = <strong class="lt io">{ </strong>/*Write onClick code here*/ <strong class="lt io">}</strong>,<br/>                    modifier = Modifier.<em class="lc">layoutId</em>("btnImage")) <strong class="lt io">{<br/>                    </strong><em class="lc">Text</em>(text = "More Images")<br/>                <strong class="lt io">}<br/><br/>                </strong><em class="lc">Button</em>(onClick = <strong class="lt io">{ </strong>/*Write onClick code here*/ <strong class="lt io">}</strong>,<br/>                    modifier = Modifier.<em class="lc">layoutId</em>("btnUploadImage")) <strong class="lt io">{<br/>                    </strong><em class="lc">Text</em>(text = "Upload Image")<br/>                <strong class="lt io">}<br/><br/>                </strong><em class="lc">Button</em>(onClick = <strong class="lt io">{ </strong>/*Write onClick code here*/ <strong class="lt io">}</strong>,<br/>                    modifier = Modifier.<em class="lc">layoutId</em>("btnUploadText")) <strong class="lt io">{<br/>                    </strong><em class="lc">Text</em>(text = "Upload Text ")<br/>                <strong class="lt io">}<br/>            }<br/>        }<br/><br/>    }<br/></strong>}<br/><br/>private fun portraitLayout(): ConstraintSet{<br/>    return <em class="lc">ConstraintSet </em><strong class="lt io">{<br/>        </strong>val animalImage = createRefFor("animalImage")<br/>        val animalName = createRefFor("animalName")<br/>        val btnAbout = createRefFor("btnAbout")<br/>        val btnImage = createRefFor("btnImage")<br/>        val btnUploadImage = createRefFor("btnUploadImage")<br/>        val btnUploadText = createRefFor("btnUploadText")<br/><br/>        constrain(animalImage)<strong class="lt io">{<br/>            </strong>top.linkTo(parent.top)<br/>            start.linkTo(parent.start)<br/>            end.linkTo(parent.end)<br/>        <strong class="lt io">}<br/>        </strong>constrain(animalName)<strong class="lt io">{<br/>            </strong>top.linkTo(animalImage.bottom)<br/>            start.linkTo(parent.start)<br/>            end.linkTo(parent.end)<br/>        <strong class="lt io">}<br/>        </strong>constrain(btnAbout)<strong class="lt io">{<br/>            </strong>start.linkTo(parent.start, margin = 16.<em class="lc">dp</em>)<br/>            top.linkTo(animalName.bottom, margin = 32.<em class="lc">dp</em>)<br/>            end.linkTo(btnImage.start)<br/>        <strong class="lt io">}<br/>        </strong>constrain(btnImage)<strong class="lt io">{<br/>            </strong>start.linkTo(btnAbout.end)<br/>            top.linkTo(animalName.bottom, margin = 32.<em class="lc">dp</em>)<br/>            end.linkTo(parent.end)<br/>        <strong class="lt io">}<br/>        </strong>constrain(btnUploadImage)<strong class="lt io">{<br/>            </strong>start.linkTo(parent.start, margin = 16.<em class="lc">dp</em>)<br/>            top.linkTo(btnAbout.bottom, margin = 32.<em class="lc">dp</em>)<br/>            end.linkTo(btnUploadText.start)<br/>        <strong class="lt io">}<br/>        </strong>constrain(btnUploadText)<strong class="lt io">{<br/>            </strong>start.linkTo(btnAbout.end)<br/>            top.linkTo(btnImage.bottom, margin = 32.<em class="lc">dp</em>)<br/>            end.linkTo(parent.end)<br/>        <strong class="lt io">}<br/>    }<br/></strong>}<br/><br/>private fun landscapeLayout(): ConstraintSet{<br/>    return <em class="lc">ConstraintSet</em><strong class="lt io">{<br/>        </strong>val animalImage = createRefFor("animalImage")<br/>        val animalName = createRefFor("animalName")<br/>        val btnAbout = createRefFor("btnAbout")<br/>        val btnImage = createRefFor("btnImage")<br/>        val btnUploadImage = createRefFor("btnUploadImage")<br/>        val btnUploadText = createRefFor("btnUploadText")<br/><br/>        constrain(animalImage)<strong class="lt io">{<br/>            </strong>top.linkTo(parent.top, margin = 8.<em class="lc">dp</em>)<br/>            start.linkTo(parent.start, margin = 32.<em class="lc">dp</em>)<br/>        <strong class="lt io">}<br/>        </strong>constrain(animalName)<strong class="lt io">{<br/>            </strong>top.linkTo(animalImage.bottom, margin = 8.<em class="lc">dp</em>)<br/>            start.linkTo(animalImage.start)<br/>            end.linkTo(animalImage.end)<br/>        <strong class="lt io">}<br/>        </strong>constrain(btnAbout)<strong class="lt io">{<br/>            </strong>top.linkTo(animalImage.top, margin = 64.<em class="lc">dp</em>)<br/>            start.linkTo(animalImage.end)<br/>            end.linkTo(btnImage.start)<br/>        <strong class="lt io">}<br/>        </strong>constrain(btnImage)<strong class="lt io">{<br/>            </strong>top.linkTo(animalImage.top, margin = 64.<em class="lc">dp</em>)<br/>            start.linkTo(btnAbout.end)<br/>            end.linkTo(parent.end)<br/>        <strong class="lt io">}<br/>        </strong>constrain(btnUploadImage)<strong class="lt io">{<br/>            </strong>top.linkTo(btnAbout.bottom, margin = 32.<em class="lc">dp</em>)<br/>            start.linkTo(animalImage.end)<br/>            end.linkTo(btnUploadText.start)<br/>        <strong class="lt io">}<br/>        </strong>constrain(btnUploadText)<strong class="lt io">{<br/>            </strong>top.linkTo(btnImage.bottom, margin = 32.<em class="lc">dp</em>)<br/>            start.linkTo(btnUploadImage.end)<br/>            end.linkTo(parent.end)<br/>        <strong class="lt io">}<br/><br/>    }<br/></strong>}<br/><br/>@Preview(showBackground = true)<br/>@Composable<br/>fun preview() {<br/>    <em class="lc">JetpackComposeTestTheme </em><strong class="lt io">{<br/>        </strong><em class="lc">PortLandCompose</em>()<br/>    <strong class="lt io">}<br/></strong>}</span></pre><p id="6b50" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">祝你好运</p></div></div>    
</body>
</html>