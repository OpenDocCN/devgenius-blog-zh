<html>
<head>
<title>Wasp Beta brings major IDE improvements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Wasp Beta 带来了主要的 IDE 改进</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/wasp-beta-brings-major-ide-improvements-d985c8d07fae?source=collection_archive---------12-----------------------#2022-12-02">https://blog.devgenius.io/wasp-beta-brings-major-ide-improvements-d985c8d07fae?source=collection_archive---------12-----------------------#2022-12-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c9d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随着 Beta 版(0.7)，Wasp 将其 IDE 游戏带到了一个全新的水平！</p><p id="4098" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">到目前为止，Wasp 在 VSCode 中除了基本的语法突出显示之外没有太多功能，但是现在它有了:</p><p id="e9cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 1)Wasp 语言服务器，为您带来以下内容。wasp 文件:</strong> <br/> —编辑器中的实时错误报告<br/> —自动完成(目前是基本的)</p><p id="6328" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2) </strong> <strong class="jm io"> VSCode Wasp 语言扩展</strong> : <br/> —片段(用于<code class="fe ki kj kk kl b">page</code>、<code class="fe ki kj kk kl b">query</code>、<code class="fe ki kj kk kl b">action</code>、<code class="fe ki kj kk kl b">entity</code> ) <br/> —改进的语法突出显示。wasp 文件<br/> —与上述语言服务器集成</p><p id="89e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3)支持流行的 ide，全面支持 Wasp 项目中的 Javascript 和 Typescript 文件。</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/fd072c1ad4faf98d9d93dcbdb27eeac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Ep27Iqy3geT6mVLRhBBatw.gif"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">VSCode 中的 Wasp IDE 支持:语法高亮、代码片段、实时错误报告。</figcaption></figure><p id="0cc3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">VSCode 中的 Wasp IDE 支持:语法高亮、代码片段、实时错误报告。</p><h1 id="e531" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Wasp 语言服务器</h1><p id="3008" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">Wasp 语言服务器(WLS)是智能 IDE 功能(如实时错误报告和自动完成)背后的“大脑”——因此，如果 IDE 在某种程度上确实理解您的代码，那么它就是语言服务器！</p><blockquote class="mf mg mh"><p id="3503" class="jk jl mi jm b jn jo jp jq jr js jt ju mj jw jx jy mk ka kb kc ml ke kf kg kh ig bi translated">提示<br/>出于好奇，在 Github 上查看 WLS 的源代码:<a class="ae mm" href="https://github.com/wasp-lang/wasp/tree/main/waspc/waspls/src/Wasp/LSP" rel="noopener ugc nofollow" target="_blank">https://Github . com/Wasp-lang/Wasp/tree/main/wapc/waspls/src/Wasp/LSP</a></p></blockquote><h1 id="00d5" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">特征</h1><h2 id="4e41" class="mn ld in bd le mo mp dn li mq mr dp lm jv ms mt lq jz mu mv lu kd mw mx ly my bi translated">实时错误/警告报告<a class="ae mm" href="https://wasp-lang.dev/blog/2022/12/01/beta-ide-improvements#live-errorwarning-reporting" rel="noopener ugc nofollow" target="_blank"> </a></h2><p id="0fba" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">WLS 在你工作时为你编译 wasp 代码，并通过红色曲线直接在编辑器中显示任何错误。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mz"><img src="../Images/68bb8ee3a764444432b4f652f5a983b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2n32Ecv95KBIFGs_phfLoQ.gif"/></div></div></figure><h2 id="81df" class="mn ld in bd le mo mp dn li mq mr dp lm jv ms mt lq jz mu mv lu kd mw mx ly my bi translated">自动完成<a class="ae mm" href="https://wasp-lang.dev/blog/2022/12/01/beta-ide-improvements#autocompletion" rel="noopener ugc nofollow" target="_blank">和</a></h2><p id="30ae" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">WLS 知道你现在在代码的哪个部分，并为它提供适当的完成。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mz"><img src="../Images/4d9378b401b86cd12de5cab3c09336a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*C828LmK-l-vSMJPlLUhqUA.gif"/></div></div></figure><blockquote class="mf mg mh"><p id="07de" class="jk jl mi jm b jn jo jp jq jr js jt ju mj jw jx jy mk ka kb kc ml ke kf kg kh ig bi translated">注意</p><p id="ea38" class="jk jl mi jm b jn jo jp jq jr js jt ju mj jw jx jy mk ka kb kc ml ke kf kg kh ig bi translated">现在 WLS 在这方面相当幼稚，当它意识到你需要一个表达式时，它主要关注于提供可用的表达式。这很有帮助，但只是一个开始，在未来的版本中它会变得更加智能！</p></blockquote><h1 id="2643" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">一点历史:为什么语言服务器很酷<a class="ae mm" href="https://wasp-lang.dev/blog/2022/12/01/beta-ide-improvements#bit-of-history-why-are-language-servers-cool" rel="noopener ugc nofollow" target="_blank"> </a></h1><p id="2bc3" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">几年前，没有标准化的方法来为你的语言编写类似语言服务器的东西，相反，每种语言都做自己的事情，然后每个编辑器/IDE 也会实现自己的逻辑层来使用它，这是每个编辑器需要做的大量工作！</p><p id="11a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">幸运的是，微软随后提出了<a class="ae mm" href="https://microsoft.github.io/language-server-protocol/" rel="noopener ugc nofollow" target="_blank">语言服务器协议</a>——一种由语言创建者实现的“智能”部分和使用它的编辑器/IDE 部分(语言扩展)之间的标准化通信方式。这使得每个编辑器只需实现一次与语言服务器交互的逻辑，就可以用于任何语言服务器！</p><p id="9eee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这对我们语言的创造者来说是非常好的，因为这意味着一旦我们为我们的语言实现了一个语言服务器，大部分工作就完成了，并且我们需要为每个编辑器做的工作是可管理的。</p><p id="0ae0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在 WLS 只被 VSCode Wasp 语言扩展使用，但是由于语言服务器协议的本质，添加对其他编辑器的支持应该是相对容易的。如果你有兴趣帮忙，请查看这个 GH 问题。</p><h1 id="7bf6" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">设置<a class="ae mm" href="https://wasp-lang.dev/blog/2022/12/01/beta-ide-improvements#setup" rel="noopener ugc nofollow" target="_blank">和</a></h1><p id="10f4" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">最好的事情:作为一个 Wasp 用户，你不需要做任何事情来设置 WLS！它已经与您安装的<code class="fe ki kj kk kl b">wasp</code> →捆绑在一起，所以如果您可以在您的机器上运行<code class="fe ki kj kk kl b">wasp</code>项目，您就已经有了 WLS，并且它总是您当前 wasp 安装所需的正确版本。你唯一需要确保的是你有<code class="fe ki kj kk kl b">wasp</code>版本≥ 0.6，和一个相对新鲜的 VSCode Wasp 语言扩展。</p><p id="3304" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">检查你的<code class="fe ki kj kk kl b">wasp</code>版本是否包含 WLS 的一个简单方法是运行它并查看它的使用说明:它应该提到<code class="fe ki kj kk kl b">waspls</code>作为命令之一。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi na"><img src="../Images/af94ade36d21d638523e1ba359cfbc34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*58w5Cq4Lq2qx9lkg.png"/></div></div></figure><h1 id="9aca" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Wasp VSCode 扩展</h1><p id="a6ab" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">如果我们将 Wasp 语言服务器(WLS)称为“后端”，那么<a class="ae mm" href="https://marketplace.visualstudio.com/items?itemName=wasp-lang.wasp" rel="noopener ugc nofollow" target="_blank"> VSCode Wasp 语言扩展</a>将是“前端”→它负责一切，以确保您在 VSCode 中使用 Wasp 有良好的体验，同时将最困难的工作委托给 WLS。</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/e7e8f4bf1396cfdfd1e560f31e0783c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TmJqhzRLCVAusB5j.png"/></div></div></figure><blockquote class="mf mg mh"><p id="2a87" class="jk jl mi jm b jn jo jp jq jr js jt ju mj jw jx jy mk ka kb kc ml ke kf kg kh ig bi translated">提示<br/>出于好奇，你可以在这里查看它的源代码，它的核心只有一个文件:<a class="ae mm" href="https://github.com/wasp-lang/vscode-wasp/blob/main/src/extension.ts" rel="noopener ugc nofollow" target="_blank">https://github . com/wasp-lang/vs code-wasp/blob/main/src/extension . ts</a></p></blockquote><h1 id="88fc" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated"><a class="ae mm" href="https://wasp-lang.dev/blog/2022/12/01/beta-ide-improvements#features-1" rel="noopener ugc nofollow" target="_blank">功能</a></h1><h2 id="a89f" class="mn ld in bd le mo mp dn li mq mr dp lm jv ms mt lq jz mu mv lu kd mw mx ly my bi translated">语法高亮<a class="ae mm" href="https://wasp-lang.dev/blog/2022/12/01/beta-ide-improvements#syntax-highlighting" rel="noopener ugc nofollow" target="_blank">T5】</a></h2><p id="1ee7" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">这里没有什么出乎意料的:它识别 Wasp 语法的不同部分，比如类型、值、标识符、注释、字符串……并适当地给它们着色。</p><p id="4c2e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你想知道这是如何实现的，请查看<a class="ae mm" href="https://github.com/wasp-lang/vscode-wasp/blob/main/syntaxes/wasp.tmLanguage.yaml" rel="noopener ugc nofollow" target="_blank">https://github . com/Wasp-lang/vscode-Wasp/blob/main/syntaxes/Wasp . TM language . YAML</a>→Wasp 的整个语法是通过这种“神秘的”旧 TextMate 格式描述的，因为这是在 vs code 中实现的方式。</p><h2 id="cd3f" class="mn ld in bd le mo mp dn li mq mr dp lm jv ms mt lq jz mu mv lu kd mw mx ly my bi translated">片段<a class="ae mm" href="https://wasp-lang.dev/blog/2022/12/01/beta-ide-improvements#snippets" rel="noopener ugc nofollow" target="_blank"> </a></h2><p id="9ccd" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">Wasp 允许您快速生成新的<code class="fe ki kj kk kl b">page</code>、<code class="fe ki kj kk kl b">query</code>、<code class="fe ki kj kk kl b">action</code>或<code class="fe ki kj kk kl b">entity</code>的代码片段！</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi mz"><img src="../Images/0441c0dfe519fa8ef42abd615a37e48f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kadXuT4El1Q6KNgCayhaJA.gif"/></div></div></figure><p id="47fc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里查看我们的代码片段定义:<a class="ae mm" href="https://github.com/wasp-lang/vscode-wasp/blob/main/snippets/wasp.json" rel="noopener ugc nofollow" target="_blank">https://github . com/wasp-lang/vs code-wasp/blob/main/snippets/wasp . JSON</a>。在 VSCode 中，定义它们并添加新的其实很容易。</p><h2 id="3ede" class="mn ld in bd le mo mp dn li mq mr dp lm jv ms mt lq jz mu mv lu kd mw mx ly my bi translated">实时错误报告+自动完成<a class="ae mm" href="https://wasp-lang.dev/blog/2022/12/01/beta-ide-improvements#live-error-reporting--autocompletion" rel="noopener ugc nofollow" target="_blank"> </a></h2><p id="169e" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">如上所述，这是通过将工作委托给 WLS 来完成的！</p><h1 id="d081" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">Wasp 项目中对 Javascript / Typescript 的 IDE 支持</h1><p id="3de2" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">由于 Wasp 的方法非常独特，让 ide 为 Javascript / Typescript 提供所有常用功能并不完全可行，相反，IDE 会与文件所在的上下文有些混淆，例如，无法为某些值提供“转到定义”，或者不知道如何遵循导入路径。</p><p id="f8e5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Wasp Beta 解决了这个问题！我们通过稍微改变 Wasp 项目的结构并添加 tsconfig.json 文件来解决这个问题，这些文件为 ide 提供了正确分析 JS/TS 源文件所需的信息。</p><p id="3af1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要了解 Wasp Beta 中关于类型脚本支持的更多信息，请查看这篇博文！</p><h1 id="ca8c" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">未来会怎样？</h1><p id="4d62" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">尽管 Wasp Beta 极大地改进了 IDE 对 Wasp 的支持，但我们仍有很多地方需要改进:</p><p id="2117" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 1)通过 WLS 实现更智能的自动完成功能。</strong><br/>——现在当你需要一个表达式时，它表示任何表达式。将来，我们希望它能准确地知道所需表达式的类型，并只建议该类型的表达式！因此，如果我在<code class="fe ki kj kk kl b">route ... { to: &lt;my_cursor_here&gt; }</code>中，那么我只想在建议的完成中看到<code class="fe ki kj kk kl b">page</code> s，而不是<code class="fe ki kj kk kl b">queries</code>或<code class="fe ki kj kk kl b">actions</code>或其他什么。<br/> —此外，我们还希望它自动完成字典字段→因此，如果我在<code class="fe ki kj kk kl b">route ... { &lt;my_cursor_here&gt; }</code>，它应该为我提供<code class="fe ki kj kk kl b">path</code>和<code class="fe ki kj kk kl b">to</code>作为完成，因为它们是<code class="fe ki kj kk kl b">route</code>字典中唯一有效的字段。</p><p id="b3ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 2)除 VSCode 之外的其他编辑器的扩展。现在我们有了 Wasp 语言服务器，实现起来应该不会太难！对于潜在的贡献者来说，这也是一项伟大的任务:如果你感兴趣，请查看这期《生长激素》。</strong></p><p id="ad5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">实施 Wasp 代码格式化程序。我们可以让它成为 WLS 的一部分，然后让编辑器扩展在保存时调用它。</p><p id="f4f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">4)在中改进对 PSL (Prisma 模式语言)的支持。wasp 文件。</p><p id="2339" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果这些听起来很有趣，欢迎加入我们的<a class="ae mm" href="https://github.com/wasp-lang/wasp" rel="noopener ugc nofollow" target="_blank"> Github </a>，或者加入关于<a class="ae mm" href="https://discord.gg/rzdnErX" rel="noopener ugc nofollow" target="_blank">不和</a>的讨论！</p></div></div>    
</body>
</html>