<html>
<head>
<title>Raspberry Pi Powered Flying Geese Clock</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">树莓皮动力飞鹅时钟</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/raspberry-pi-powered-flying-geese-clock-ebde0c76ffe6?source=collection_archive---------2-----------------------#2022-05-28">https://blog.devgenius.io/raspberry-pi-powered-flying-geese-clock-ebde0c76ffe6?source=collection_archive---------2-----------------------#2022-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="bcd9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用 Python 编程并通过 MQTT 控制的 led 灯让这种传统的被子图案栩栩如生</h2></div><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="kk kl l"/></div></figure><p id="998a" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">时钟由一个被面组成，被面安装在嵌有发光二极管的纸板框架上。灯光连接到一个树莓派零点，通过织物发光来指示时间，并将墙壁涂成红色，以给出过去几分钟的模糊概念。</p><p id="b3ca" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">除了作为一个时间片，被子还包括各种定时器和环境设置，我确定这些控制会比我以前的项目更即时。受到 Kevin McAcleer 和其他人的启发，我决定像对待机器人一样对待这个被子，并通过 MQTT(一种轻量级的发布-订阅网络协议)来控制它。</p><h1 id="177c" class="lj lk iq bd ll lm ln lo lp lq lr ls lt jw lu jx lv jz lw ka lx kc ly kd lz ma bi translated">建筑</h1><p id="34bd" class="pw-post-body-paragraph km kn iq ko b kp mb jr kr ks mc ju ku kv md kx ky kz me lb lc ld mf lf lg lh ij bi translated">我按照 Etsy 上找到的<em class="mg"> </em>图案一<a class="ae li" href="https://www.etsy.com/uk/listing/976447670/circle-of-geese-paper-pieced-quilt-block" rel="noopener ugc nofollow" target="_blank">简单的“鹅圈”底纸拼接来做被子。通过这种方法，织物被一次一片地缝合到纸模板上，以创建精确的最终设计。完成后，纸被移除，留下被子顶部。</a></p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/d45ae73ddbcaf51f146a883b8bb11522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qE4wfp03Asqadmff7_BSNQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">钟面的四分之一准备好了</figcaption></figure><p id="380a" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">有许多灵感的现代作品都是用这种方式制作的，比如下面展示的<a class="ae li" href="http://The Heart of a Lion Foundation Paper Piece Pattern" rel="noopener ugc nofollow" target="_blank">“狮子之心”</a>图案。像这样的现代纸拼接设计让人想起用 Photoshop 制作的低多边形图形艺术，只有织物和三维。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ms"><img src="../Images/48d1fcf40017ecaa54028ad03a2aaa25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rMfi8LrgPd7OPWVkj8gVIg.jpeg"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">由<a class="ae li" href="http://The Heart of a Lion Foundation Paper Piece Pattern" rel="noopener ugc nofollow" target="_blank">priandjoyquilting</a>制作的“狮子之心”基础纸片图案</figcaption></figure><h2 id="f13b" class="mt lk iq bd ll mu mv dn lp mw mx dp lt kv my mz lv kz na nb lx ld nc nd lz ne bi translated">光漫射</h2><p id="ae16" class="pw-post-body-paragraph km kn iq ko b kp mb jr kr ks mc ju ku kv md kx ky kz me lb lc ld mf lf lg lh ij bi translated">我对这四个部分的组合非常满意，我想用一种能展示拼接和缝份隐藏细节的方式来点亮整个作品。然而，如果没有每只“鹅”被单独照亮，就很难显示钟面的 12 个小时。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/235c1b1636e5820454d99a25ba94f966.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NrOkV_3lMy7WcWubvlDk9Q.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">光线穿过鹅圈图案，显示出缝份</figcaption></figure><p id="1be7" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">被子填料是扩散 led 光线的良好材料。我用了双层来确保单个像素不会透过织物看起来像斑点。然后，在绕过每个三角形之前，我在中心缝了六根线，希望这能在边缘之间形成一道屏障。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nf"><img src="../Images/a6eefb87047c8fd19dca3d01989b1b40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LrktNDKoULMKQmNxy___tQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">被子顶部缝合到双层填料上，并勾勒出三角形截面</figcaption></figure><p id="adda" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">一旦被面的边缘装订完成，我就开始做一个框架。被子顶部的尺寸为 30 厘米 x 30cm 厘米，所以我剪了一块比这个略小的正方形纸板，并标出三角形的位置。为了更均匀地分散光线，我打算在被子顶部和安装 led 的纸板之间留一个小间隙。我会用 15 毫米的纸板条来创造这种高度。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/df51a5d955edfef639c0e2180179ebce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgaWKhP2HaSiFR1I7djsqw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">钟的纸板背衬</figcaption></figure><h2 id="8783" class="mt lk iq bd ll mu mv dn lp mw mx dp lt kv my mz lv kz na nb lx ld nc nd lz ne bi translated">树莓派</h2><p id="e3bc" class="pw-post-body-paragraph km kn iq ko b kp mb jr kr ks mc ju ku kv md kx ky kz me lb lc ld mf lf lg lh ij bi translated">RGB WS2812B LEDs 连接到 Raspberry Pi Zero，由 Python 脚本控制。和我之前的项目一样，我按照 Adafruit 网站上的<a class="ae li" href="https://learn.adafruit.com/adafruit-neopixel-uberguide/python-circuitpython" rel="noopener ugc nofollow" target="_blank">用户指南进行配置。我使用 5v 电源为 Pi 和灯供电。</a></p><p id="8559" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">为了避免焊接，我愚蠢地买了一些连接器，它们一面卡在 LED 灯带上，另一面卡在电源线和数据线上。我想这会给整个建造过程一个简单的乐高式的感觉，但是我从来没有把它们连接到足够的地方来防止非常明显的电压降。所以，这是回到焊接绘图板，这在最后没有回报。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/c900b100324a040f4d150c43d8e193be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OAUDghDfKRqTRemORhS8iA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">非常明显的电压降是由于接触不良造成的</figcaption></figure><p id="9d1a" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">时钟上的每个“小时”由三个发光二极管组成，在 12 点钟时，整个表面都亮了起来，就像大型质子对撞机发生了事故一样。将被子随意放在灯光上，会产生有趣的效果，但时间之间没有明显的区别。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/168ff3236c798df078e5943ed462ab08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DLtqh70Lo2YFCTV4mou0kQ.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">时钟的每个小时都有三个 LEDS</figcaption></figure><p id="30c5" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">一旦我把这些条粘上来创造立面，纸板背衬本身在点燃时开始看起来引人注目，尽管不完美，三角形的鹅在容纳光线方面做得很好。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/1bd0f81db9eef10b47a28fa593d1eb11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jfTQFcoGqhCqRBt7zzJ3CA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">每小时 15 毫米的条纹有助于提升高度，使光线均匀扩散</figcaption></figure><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/1eac4067a1f8f0851877487830ea17b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*klqDoVSAY61GyOvUiZUoHw.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">每个小时都闪着红光</figcaption></figure><p id="65a1" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">为了显示经过的时间，36 个 led 在背面形成一个圆圈，将光线从墙上反射回来——最初我打算每五分钟间隔三个灯，但最终我笨拙地使用它们来创建一个进度条。在 Python 脚本中，过去的分钟数表示为一小时的分数，然后乘以 36。例如，在过去 30 分钟(一小时的 30/60)时，18 个灯发出红光，其余的灯发出白光；在 5 分钟前(55/60 小时),只剩下 3 盏白光灯。</p><p id="0d13" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">这就是 8:25 的样子:</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ng"><img src="../Images/43c35e27f8132d8b68262bfac5b15ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UGOiSIUAmBcfT-ul4X6DHg.jpeg"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">钟面上显示 8:25</figcaption></figure><p id="5334" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">事后看来，我希望我把更多的灯放在更靠近正方形轮廓的边缘，因为圆形已经消失了。是圆钉方被的情况！</p><h2 id="69d8" class="mt lk iq bd ll mu mv dn lp mw mx dp lt kv my mz lv kz na nb lx ld nc nd lz ne bi translated">MQTT、Python 和 JavaScript 的融合</h2><p id="f515" class="pw-post-body-paragraph km kn iq ko b kp mb jr kr ks mc ju ku kv md kx ky kz me lb lc ld mf lf lg lh ij bi translated">对于时钟函数，python 脚本从互联网上获得时间，然后改变适当的灯光，这是程序的默认行为。其他程序将被子视为一盏灯，并设置各种环境背光颜色。最终程序的功能就像鸡蛋计时器，前端旋转就像现实生活中的加载屏幕。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nh"><img src="../Images/fe9fb2adf8295d206dec852d688feb79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*W45sbIFt9UptaDmk6Or42A.gif"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">时钟还可以作为计时器，墙壁会慢慢变红</figcaption></figure><p id="8279" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">半熟的鸡蛋有 4 分钟的计时器，而熟的鸡蛋有 10 分钟的计时器。计时器运行时，绿色值从 255 下降到 0，红色值则相反。快速看一眼墙壁，你就能大致知道鸡蛋煮到什么程度了。在中途，光是红色和绿色的等份，或者被称为橙色，一旦完成，在灯熄灭之前，墙发出绿色的光。</p><p id="8dd5" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">Raspberry Pi 被配置为使用 Mosquito 的 MQTT 代理和使用 Paho MQTT Python 库的客户机。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi ni"><img src="../Images/e40a4c0497b81eaa65b7a5746236a974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RALDVCgbKHtrGzFU6EEKLg.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">paho 客户端在 Python 文件中使用</figcaption></figure><p id="2539" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">它还使用 Apache web 服务器托管一个简单的嵌入了 JavaScript 的 HTML 页面，该页面为 Pi 上的代理创建一个开放的 web 套接字。这可以加载到我们网络上的任何设备上。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi nj"><img src="../Images/d3ee227d67b942a381ef37ee634f3e44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g7nwc8gPyG2JCoVDQdO0lA.png"/></div></div><figcaption class="mo mp gj gh gi mq mr bd b be z dk translated">JavaScript 向代理打开 websocket</figcaption></figure><p id="9b52" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">用户按下按钮触发一条消息发布到等待的 Python 脚本，最终结果感觉就像墙上安装的电灯开关一样即时。</p><p id="2ea8" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我使用了杰里米·库克的关于蚊子的教程和史蒂夫的关于 MQTT、Paho 和 websockets 的互联网指南，让我开始学习代码，我期待着在未来的项目中建立这种学习。一个需要考虑的问题是，Raspberry Pi Zero 是否真的是这项工作的最佳工具。我使用它是因为它是备用的，而且我知道我在用 Apache web 服务器做什么并获取当前时间。也许一个带有 Wifi 模块和实时时钟的微型计算机会是更好的方法。也许是时候让我深入了解 Node Red 及其所有应用程序了。</p><p id="d7fa" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">对于未来的项目，我脑海中有一个绗缝的二进制时钟或显示二进制算术结果的被子。如果这是你喜欢的类型，并且你喜欢阅读这个项目，请考虑在媒体上关注我或者订阅我的<a class="ae li" href="https://www.youtube.com/russelleveleigh" rel="noopener ugc nofollow" target="_blank"> YouTube 频道</a>。</p><p id="6edf" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">你可以在 GitHub 上看到这个项目的所有代码:<a class="ae li" href="https://github.com/reveleigh/Circle-of-Geese-Clock" rel="noopener ugc nofollow" target="_blank">https://github.com/reveleigh/Circle-of-Geese-Clock</a></p></div></div>    
</body>
</html>