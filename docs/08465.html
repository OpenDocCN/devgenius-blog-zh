<html>
<head>
<title>Data Visualization with Vanilla PHP: A introductory guide to charting with Chart.js and PHP/MySQL.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用普通 PHP 实现数据可视化:用 Chart.js 和 PHP/MySQL 制作图表的入门指南。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/data-visualization-with-vanilla-php-a-introductory-guide-to-charting-with-chart-js-and-php-mysql-f8e34a107c36?source=collection_archive---------5-----------------------#2022-06-16">https://blog.devgenius.io/data-visualization-with-vanilla-php-a-introductory-guide-to-charting-with-chart-js-and-php-mysql-f8e34a107c36?source=collection_archive---------5-----------------------#2022-06-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/302f51f8a296ff1328dcfca98674c195.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rj10TKWoDna4dmN8.jpg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来源:https://raconteur.net</figcaption></figure><p id="d3c4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi kx translated">视觉数据比任何其他形式的数据更快地传达给大脑，这是一个不争的事实，因此需要可视化。就数学和统计学而言，这已经走了很长的路，并且多年来已经被证明是数据科学中的一个重要学科。</p><blockquote class="lg lh li"><p id="5629" class="jz ka lj kb b kc kd ke kf kg kh ki kj lk kl km kn ll kp kq kr lm kt ku kv kw ig bi translated">“眼睛是身体的窗户，通过它来感受世界和欣赏世界的美丽。由于有了眼睛，灵魂满足于呆在肉体的监狱里，因为没有眼睛，这种肉体的监狱就是折磨。”</p><p id="1f2e" class="jz ka lj kb b kc kd ke kf kg kh ki kj lk kl km kn ll kp kq kr lm kt ku kv kw ig bi translated">—莱昂纳多·达·芬奇(1452-1519)</p></blockquote><p id="8fce" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">数据科学中的可视化是以图表的形式或通过任何其他图像手段来表示数据。在这篇文章中，我将讨论如何使用<a class="ae ln" href="https://www.chartjs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> Chart.js </strong> </a>和普通 PHP(或纯 PHP)以图表(饼状图、折线图、条形图等)的形式操作和表示跨时间框架的数据。这不是一个详尽的指南，但将证明对您的开发有用。</p><p id="b0c8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">PHP 是一种通用脚本语言，最常用于编写 web 应用程序后端代码。它是由拉斯马斯·勒德尔夫在 1994 年创造的。毫无疑问，它是网络上最常用的后端编程语言；尽管它的采用逐渐被更新更健壮的技术所取代。</p><p id="57ec" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">仅仅看一眼图表就可以更容易地做出快速估计和技术/金融分析，这一事实在涉及外汇市场图表、加密货币市场图表和财务报告图表时显而易见，人们可以快速观察价格的涨跌趋势。这样，就更容易说市场是熊市还是牛市。性能图也不能遗漏:)</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lo"><img src="../Images/910d8823d49436f1f4289b313263a775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LuvThvlOJNziZzn75BHCLg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来源:<a class="ae ln" href="https://tradingview.com" rel="noopener ugc nofollow" target="_blank">https://tradingview.com</a></figcaption></figure><p id="9a75" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你知道加密货币图表是如何解读的，你会看到比特币(BTC)的价格目前正对美元下跌。因为<strong class="kb io">的可视化，它很容易阅读。</strong></p><p id="cad0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如今，创建(或绘制)图表并不是一件困难的事情，因为有大量的开源工具可供使用。一般来说，对绘制在两个轴上的数据的处理是导致完成任务的难度的重要因素。</p><p id="8582" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">折线图、条形图或饼图由点系统中的 x 轴和 y 轴组成，该系统称为笛卡尔坐标系。</p><p id="af4e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在本系列中，我们将使用一个简单的 MySQL 表、PHP 和 JavaScript (ES6)以及 Chart.js。</p><h1 id="14a2" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">把事情安排妥当</h1><p id="3dea" class="pw-post-body-paragraph jz ka in kb b kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw ig bi translated">首先，我们将创建一个数据库表。本指南假设您已经创建了一个数据库，并且有一个名为<strong class="kb io"> financial_data </strong>的表，其结构如下:</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/39690b2f9b4827cd25a2fc3aa4e3d77b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-yOMak2roiXfvlC4AS8vw.png"/></div></div></figure><p id="1cc1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">从上图中可以看出，创建该表是为了填充与雇员相关的金额。在使用 Unix 时间戳插入行时，我们可以使用整数来表示给定时间点的货币值。</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/c1456f5223408a00bdc9af2a84dda29e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1qwMQFD4XmuhoSM0y_K0xA.png"/></div></div></figure><p id="333a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们假设我们已经用一些类似上面的数据填充了这个表，我们想要绘制一个图表来显示从付款的第一天到最后一天每天支付的数量。</p><p id="72a1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">一个简单的操作方法是获得第一个日期，获得最后一个日期，然后从开始到结束分成几天。</p><p id="30c8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上表包含的日期范围从 2022 年 6 月 12 日到 2022 年 6 月 14 日(三天间隔)。我们通常会这样分类:</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div class="gh gi my"><img src="../Images/d86b8e7cbda355ecc9dccd4df0050300.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*fpXNv0scbHb0K8aeOfC0zA.png"/></div></figure><p id="b687" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这很公平，也很容易计算，因为我们处理的是一小块数据。在更大的范围内，我们肯定需要自动化统计过程，还需要通过使用折线图来实现可视化。我们很快会深入探讨这个问题。</p><h1 id="dd2f" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">让我们开始编码吧</h1><p id="53fa" class="pw-post-body-paragraph jz ka in kb b kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw ig bi translated">我们已经得到了设置所需的一切，以及为我们的可视化练习整理的数据。我们现在所要做的就是编写网页和后端代码，这将帮助我们以编程方式操作数据，并反过来为我们提供一个图表，以帮助我们对日常支出进行一目了然的可视化。</p><p id="ed81" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">为了启动和运行，我们将使用 Chart.js、Bootstrap 5 和 JavaScript (ES6)作为简单的前端，通过 axios.js 向我们的后端发出 HTTP 请求，后端将使用 PHP 编写，使用 MySQL 数据库表进行数据存储。</p><p id="60b5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我的假设是，您必须设置数据库和表(financial_data ),并正确填充上面提供的记录。为了获得相同的结果，并在本指南的后续步骤中确认您的正确性，重复这一点至关重要。</p><p id="0da5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">万岁！我们深入研究数据科学:)</p><h2 id="3ddb" class="mz lu in bd lv na nb dn lz nc nd dp md kk ne nf mh ko ng nh ml ks ni nj mp nk bi translated">目录设置</h2><p id="cbff" class="pw-post-body-paragraph jz ka in kb b kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw ig bi translated">让我们从创建项目目录开始。我通常会做一个基本的设置来存放我们代码库的文件。</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/fdde2f15cbf275c7522c0b925e685338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QpEd5ZwlTp7pvE0izVyT7w.png"/></div></div></figure><p id="1f34" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">“js”文件夹旨在保存项目的所有 JavaScript 文件。我们将创建“main.js”来处理将在“index.html”文件中完成的所有脚本，该文件是该项目的入口文件。</p><p id="515f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">“css”文件夹旨在保存我们将要创建的所有样式表(如果需要的话),我们通常使用 main.css 进行这种方式的项目。</p><p id="872a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">“server”文件夹包含“main.php”和“connect.php ”,用于处理所有请求并连接到我们的数据库，以检索绘制图表所需的数据。</p><h2 id="26cb" class="mz lu in bd lv na nb dn lz nc nd dp md kk ne nf mh ko ng nh ml ks ni nj mp nk bi translated">前端编码</h2><p id="243c" class="pw-post-body-paragraph jz ka in kb b kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw ig bi translated">我们将有一个使用 Bootstrap 5 的容器的基本 HTML 页面设置。所有资源都将从 CDN 加载(引导、axios、jQuery 等)。</p><p id="ff78" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最可靠的前端库 cdn 之一是<a class="ae ln" href="https://cdnjs.com" rel="noopener ugc nofollow" target="_blank"> CDNJS </a>。您可以使用那里的资源来构建您的项目。它由 jQuery、Bootstrap、Vue、d3、axios、语义 UI 和更多对你想要的项目有用的东西组成。</p><p id="f0f1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，让我们开始为 HTML 页面导入资源。请注意，要发出 HTTP 请求，您需要为资源提供服务，因此您可以在 VS 代码中使用您的实时服务器或任何其他方式在本地运行项目(127.0.0.1)。</p><p id="2c1f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">原谅我的主题:)</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/7cc2ef6b2fed76f66032db617d08ddaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GdfA3zb6afE5-6gnS5ThFw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">。/索引. html</figcaption></figure><p id="5e5f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">从上面我们会注意到，我们已经使用 Bootstrap 和 HTML5 canvas 设置了一个具有全跨度行/列的容器，该容器将用于使用 Chart.js 初始化图表。在我们的例子中，它的 ID 是“chart”。</p><p id="e69d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">你可以访问官方的<a class="ae ln" href="https://www.chartjs.org/" rel="noopener ugc nofollow" target="_blank"> Chart.js </a>文档来全面了解 Chart.js 是如何配置的，因为我们不会深究。</p><p id="f037" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后，我们将编写我们的后端代码，该代码将返回一个 JSON 对象，其中包含我们将用来绘制图表的数据。这是给 main.php 的。本文将假设您已经连接到 connection 的一个数据库，并且已经将它包含在 main.php。</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/59d4826a1f0b454c4cca390e739741bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzQ7ne1XZv_fIhDOhYE3Ug.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">。/server/main.php</figcaption></figure><p id="cecc" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上面的代码片段将开始日期和结束日期之间的持续时间排序为一天的时间间隔。完成后，我们遍历数据库中的行，并添加与时间戳相对应的每天的数量。</p><p id="489e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> PS: </strong>我不认为我们会使用 CSS 文件:)</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/a3bfd3e01964eb4ae65c201f2f426110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yfy-xw-EWv1RcTUo1ChNZQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">。/js/main . JSP</figcaption></figure><p id="6c81" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上面的 main.js 文件从后端获取数据，并使用它来绘制图表。</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/94452b44ab1b8d4640e3f9787d6fac64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oonFljN7mEaqM-etvqQ2YA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Chart.js 日常支出的可视化结果。</figcaption></figure><p id="2d5b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">万岁！！我们已经使用数据库表(financial_data)中的数据成功绘制了图表。看看上面的结果。</p><p id="1c8f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">典型的 Chart.js 配置具有以下属性:</p><p id="1f9d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">类型</strong></p><p id="1a67" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这用于配置我们正在绘制的图表类型(在我们的例子中，它是一个折线图)。</p><p id="7704" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">数据</strong></p><p id="74f5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是将用于定义图表标签和数据集的对象。它包括:</p><ul class=""><li id="2e84" class="np nq in kb b kc kd kg kh kk nr ko ns ks nt kw nu nv nw nx bi translated"><strong class="kb io">标签:</strong>标题用于确定要绘制的图表的 x 轴标签。它可以是任何字符串或数值。</li><li id="bdd7" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated"><strong class="kb io">datasets:</strong>datasets 是一个 y 轴坐标数组，将根据 x 轴标签绘制。我们将讨论重要的钥匙。它们如下:<br/> * <strong class="kb io">标签:</strong>这是数据集的标签。可以在上面的图表中看到“每日支出量”。<br/> * <strong class="kb io">数据:</strong>这是要绘制在 y 轴上的点的数组。从上图中我们可以看到日期标签分别为<strong class="kb io">7150</strong>、<strong class="kb io"> 0 </strong>和<strong class="kb io">9800</strong>。<br/> * <strong class="kb io"> backgroundColor: </strong>指定图表中点的填充颜色和标签背景颜色。<br/> * <strong class="kb io">边框颜色:</strong>指定图表的线条颜色以及标签边框颜色。</li><li id="8470" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated"><strong class="kb io">选项:</strong>这用于指定图表的行为和其他特征。</li></ul><p id="60bb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">有了所有这些，我们可以确定我们可以探索各种各样的选项，并使用不同的标准(如时间框架、公式等)来处理数据。以及以图表的形式可视化结果数据。</p><h1 id="7f29" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">摘要</h1><p id="575a" class="pw-post-body-paragraph jz ka in kb b kc mr ke kf kg ms ki kj kk mt km kn ko mu kq kr ks mv ku kv kw ig bi translated">虽然可视化是数据科学和管理中非常重要的一个方面，但掌握编程技能也是非常重要的，这样可以更容易地执行数据操作和跨轴绘制数据。它不是特定于语言的任务，可以用任何语言复制，甚至可以从头开始构建。</p><p id="071b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">太棒了。非常感谢你的阅读。</p><p id="8b9c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">你可以看看我写的其他文章。请发表评论并留下您的反应:)</p></div></div>    
</body>
</html>