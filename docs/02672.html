<html>
<head>
<title>What happens when you type ls -l in the shell</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当您在shell中键入ls -l时会发生什么</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-happens-when-you-type-ls-l-in-the-shell-114ec16268d8?source=collection_archive---------10-----------------------#2020-08-19">https://blog.devgenius.io/what-happens-when-you-type-ls-l-in-the-shell-114ec16268d8?source=collection_archive---------10-----------------------#2020-08-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/4a08314d4423908477a0cc890b0e7635.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3pbkwpXx5SFBiIcU.jpg"/></div></div></figure><div class=""/><p id="9809" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面将解释系统执行命令所经历的过程，在这种情况下是基于Unix的过程。</p><p id="669d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，您必须从定义一些关键概念开始:</p><h2 id="d1e7" class="kt ku iy bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">外壳:</h2><p id="93df" class="pw-post-body-paragraph jv jw iy jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">shell是一个通过命令行界面接受命令的应用程序。shell允许您从内核请求操作。</p><h2 id="d961" class="kt ku iy bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">核心</h2><p id="ae00" class="pw-post-body-paragraph jv jw iy jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">内核对于操作系统来说是一个非常重要的程序，它控制着所有其他程序，并允许软件和硬件之间的通信。</p><h2 id="945c" class="kt ku iy bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">“ls”命令有什么作用？</h2><p id="ad71" class="pw-post-body-paragraph jv jw iy jx b jy lm ka kb kc ln ke kf kg lo ki kj kk lp km kn ko lq kq kr ks ig bi translated">如果不深入研究“ls”命令是如何工作的，它能做什么？“ls”命令简单地列出了目录的内容。例如:如果在终端中键入“ls ”,它将列出所有文件:</p><figure class="ls lt lu lv gt ip gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/c483dc9a52809d2c9be7b11ae88c2b32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/0*AfOE4te6P96cf6tM.png"/></div></figure><p id="0939" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在启动之后和运行程序之前，您可能会认为您的计算机包含了一个等待完成某件事情的进程世界。每个人都在等待事件的发生。一个事件可以是当你按下一个键或移动鼠标。或者，如果您的机器连接到网络，事件可以是通过该网络进入的数据包。</p><p id="f5f1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">内核就是这些过程中的一个。它很特殊，因为它控制用户的其他进程何时可以运行，并且通常是唯一可以直接访问机器硬件的进程。事实上，当用户进程想要获得键盘输入、写入屏幕、读取或写入磁盘，或者做除了将位处理到内存之外的任何事情时，它们必须向内核发出请求。这些请求被称为系统调用。</p><p id="bd44" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正常情况下，所有的I/o都要通过内核，这样你就可以对操作进行编程，防止进程之间互相干扰。一些特殊的用户进程被允许穿过内核，通常是通过直接访问I/O端口。</p><p id="9824" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">那么，我们在shell中键入“ls -l”到底会发生什么？<br/> </strong>我们可以定义流程在执行时经过的步骤序列:</p><ol class=""><li id="524e" class="lw lx iy jx b jy jz kc kd kg ly kk lz ko ma ks mb mc md me bi translated">shell使用“getline()”函数读取命令。Shell主要是用C编程语言编写的。函数“getline()”是一个标准的C函数，正如您可能猜到的那样，它从给出它的地方获取行，在我们的例子中是从shell命令行获取。</li><li id="7d2f" class="lw lx iy jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">Bash作为命令解释器检查自己的语言中是否有这样的特殊单词:shell关键字或shell内置(ls不在shell关键字中，那么它检查别名并用它的值替换别名)。</li><li id="25e0" class="lw lx iy jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">它在PATH env变量指定的路径中查找ls可执行文件。通常是<code class="fe mk ml mm mn b">/bin/ls.</code></li><li id="72ae" class="lw lx iy jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">它派生(fork())一个新进程并执行它的代码(exec())。进程env从父进程继承到新进程“ls”。</li><li id="b0b9" class="lw lx iy jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">新进程成为会话的领导者，并开始在前台工作(hit移到后台)。</li><li id="1cb8" class="lw lx iy jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">打印输出并退出，发送wait()信号，bash父进程完全终止它。</li><li id="361c" class="lw lx iy jx b jy mf kc mg kg mh kk mi ko mj ks mb mc md me bi translated">“ls”命令执行后，shell执行关闭命令，释放内存，并重新提示用户输入。</li></ol><p id="1109" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">回到本文标题的上下文，其中提到了“ls -l”，在进程找到命令后，它将继续寻找标记“-l”，对于unix系统，该标记用于以<strong class="jx iz"> <em class="mo">长格式列出目录的内容。</em>T3】</strong></p><p id="09f7" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是这篇博客的全部内容，感谢您的阅读，希望对您有所帮助。如有任何问题，请通过推特<a class="ae mp" href="http://twitter.com/jcamilovillah" rel="noopener ugc nofollow" target="_blank"> @jcamilovillah </a>和<a class="ae mp" href="http://twitter.com/oscardeleon95" rel="noopener ugc nofollow" target="_blank"> @oscardeleon95 </a>联系我们。<br/>永不停止学习！</p></div></div>    
</body>
</html>