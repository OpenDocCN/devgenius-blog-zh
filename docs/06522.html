<html>
<head>
<title>Algorithmic Trading - BUY LOW SELL HIGH strategy back-testing in python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python 中的算法交易——低买高卖策略回溯测试</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/algorithmic-trading-backtesting-a-simple-buy-low-sell-high-strategy-in-python-cb1f9692984e?source=collection_archive---------2-----------------------#2022-01-14">https://blog.devgenius.io/algorithmic-trading-backtesting-a-simple-buy-low-sell-high-strategy-in-python-cb1f9692984e?source=collection_archive---------2-----------------------#2022-01-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/58c48fac7f2c73a023b7a7033f023779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wia70eu4rvV6Vj9B"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上由<a class="ae jz" href="https://unsplash.com/@austindistel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Austin Distel </a>拍摄的照片</figcaption></figure><h2 id="4947" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h2><p id="9e6f" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">在本文中，我将展示如何使用 python 对简单的移动平均策略进行回溯测试。预测股票市场价格极其困难，但是通过转换股票价格变量可以推断出许多真知灼见。在这个例子中，我们探索移动平均线，这是一个很好的动量指标。动量是非常均值回归的，可能会提供低买高卖的机会。</p><h2 id="4102" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">步伐</h2><ol class=""><li id="d837" class="lr ls in ky b kz la ld le kj lt kn lu kr lv lq lw lx ly lz bi translated">导入必要的库</li><li id="d798" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq lw lx ly lz bi translated">下载 OHLCV 数据</li><li id="d0a0" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq lw lx ly lz bi translated">构建数据框</li><li id="40a0" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq lw lx ly lz bi translated">事件驱动测试</li><li id="e7d6" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq lw lx ly lz bi translated">结果</li><li id="e67c" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq lw lx ly lz bi translated">结论</li></ol><h2 id="462c" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第一步。导入必要的库</h2><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div></figure><h2 id="954f" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第二步。下载 OHLCV 数据</h2><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div></figure><h2 id="b19c" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第三步。构建数据框</h2><p id="0bd5" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">那么这里的直觉是什么呢？均线是建立动量策略的好方法。如果当前价格高于过去几天的平均价格，这意味着股票被高估，预计会出现修正。同样，当当前价格低于移动平均价格时，股票被低估，可能很快会有一个调整。</p><p id="f271" class="pw-post-body-paragraph kw kx in ky b kz ml lb lc ld mm lf lg kj mn li lj kn mo ll lm kr mp lo lp lq ig bi translated">所以，这里的策略是当当前价格低于移动平均线时做多。对于这个例子，我们将考虑 27 天移动平均线。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div></figure><pre class="mf mg mh mi gt mq mr ms mt aw mu bi"><span id="2d76" class="ka kb in mr b gy mv mw l mx my">Std on daily returns  : 0.0217<br/>Mean on daily returns : 0.0009 <br/><br/>     Close  ma20  daily returns  position<br/>0  1231.70   NaN            NaN         0<br/>1  1205.10   NaN      -0.021833         0<br/>2  1122.25   NaN      -0.071227         0<br/>3  1048.85   NaN      -0.067641         0<br/>4  1109.40   NaN       0.056125         0<br/>5  1090.05   NaN      -0.017596         0<br/>6  1102.10   NaN       0.010994         0</span></pre><h2 id="2eb1" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第四步。事件驱动的回溯测试</h2><p id="65c4" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">在这一步中，对每日数据进行迭代。移动平均数据列用于决定是做多还是做空，它存储在仓位数据列中。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div></figure><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="ab gu cl mz"><img src="../Images/757a26d1c5d5e8cd8e33d30b797dca99.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5bCDQz5pYf0-IBYVaTzQ8g.png"/></div></figure><h2 id="4eb2" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第五步。结果</h2><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div></figure><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="ab gu cl mz"><img src="../Images/c8134fdf52ad5fba060df662685ab6a7.png" data-original-src="https://miro.medium.com/v2/format:webp/1*qrtMY7ybo3vUGH9rRE2kpg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Reliance 每日股价及其 20 天移动平均线</figcaption></figure><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="ab gu cl mz"><img src="../Images/b6b40957783f40e52dc9fdf94a8e14f1.png" data-original-src="https://miro.medium.com/v2/format:webp/1*YUAsw4yCZgX7qq7NOKqtrA.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">比较每日回报和策略回报</figcaption></figure><h2 id="ed3b" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">第六步。结论</h2><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div></figure><pre class="mf mg mh mi gt mq mr ms mt aw mu bi"><span id="5404" class="ka kb in mr b gy mv mw l mx my">Buy and hold returns = 72.19 %<br/>Strategy returns = 123.64 %</span></pre><ul class=""><li id="b427" class="lr ls in ky b kz ml ld mm kj na kn nb kr nc lq nd lx ly lz bi translated">这些股票，如果被购买和持有，将在 800 个工作日内收回初始投资的 72%。</li><li id="0987" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq nd lx ly lz bi translated">该策略获得了初始投资的 125%的回报。</li><li id="4212" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq nd lx ly lz bi translated">请注意，该策略没有实施交易成本，这将完全改变结果</li><li id="751c" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq nd lx ly lz bi translated">如果回溯测试在历史数据上表现良好，并不保证它在未来数据上会给出相同的结果。很明显，通过改变天数，回报可能会有很大差异。这也可能取决于在某个时间段内观察到的总体库存趋势。</li><li id="6bad" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq nd lx ly lz bi translated">最好对不相关的股票投资组合实施策略，因为这样可以降低分散投资和对冲的风险。</li><li id="03ad" class="lr ls in ky b kz ma ld mb kj mc kn md kr me lq nd lx ly lz bi translated">可以优化上述策略，并添加更多的 alpha 和风险度量源，以提高回报、夏普比率并降低风险。</li></ul><p id="aed3" class="pw-post-body-paragraph kw kx in ky b kz ml lb lc ld mm lf lg kj mn li lj kn mo ll lm kr mp lo lp lq ig bi translated">代码片段可以在以下位置找到:<a class="ae jz" href="https://github.com/karthikramx/Backtesting-Buy-Low-Sell-High" rel="noopener ugc nofollow" target="_blank">https://github . com/karthikramx/back testing-Buy-Low-Sell-High</a></p></div></div>    
</body>
</html>