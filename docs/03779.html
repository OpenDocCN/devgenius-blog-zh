<html>
<head>
<title>How to Make a Chrome Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何制作一个Chrome扩展</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-make-a-chrome-extension-f37bdfb6edb3?source=collection_archive---------0-----------------------#2020-12-15">https://blog.devgenius.io/how-to-make-a-chrome-extension-f37bdfb6edb3?source=collection_archive---------0-----------------------#2020-12-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2b308240fab0fc6b338db50db48462b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qyshsLwhi25OGqnN"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">丹尼尔·罗梅罗在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="3785" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你有谷歌chrome，那么你会知道chrome扩展，比如一个应用程序或软件，它有一些算法来执行你的浏览器中的特定任务，最广泛使用的Chrome扩展例子包括LastPass扩展，它以加密形式在线存储你的密码。下载量很大，因为许多人需要一个应用程序来以安全模式存储密码。如果你想学习如何开发你自己的chrome扩展，那么在这篇文章中，我们将学习如何开发一个chrome扩展。我们需要的语言是<code class="fe lb lc ld le b">JavaScript</code>和一个<code class="fe lb lc ld le b">manifest.json</code>文件。</p><h1 id="14f8" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">Manifest.json</h1><p id="c28c" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">这个<code class="fe lb lc ld le b">manifest.json</code>文件将告诉google chrome关于你的chrome扩展的信息，比如扩展的权限和名称，版本和链接代码<code class="fe lb lc ld le b">JavaScript.</code>让我们创建一个目录并创建一个扩展名为<code class="fe lb lc ld le b">json</code>的清单名称文件，然后将下面的代码放入文件中。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="dea7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你已经看到了上面的代码，我添加了manfiest _ version，它是2，我们不能添加1，因为它在2014年后不受支持，所以如果你添加版本1扩展将无法工作。接下来我们将在谷歌浏览器中加载这个扩展。</p><h1 id="a0d1" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">加载扩展:</h1><p id="ae65" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">按照步骤在你的谷歌浏览器中加载扩展。</p><p id="87c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一步:在你的谷歌浏览器中打开<code class="fe lb lc ld le b">chrome://extensions/</code></p><p id="8a6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二步:点击右上角的<code class="fe lb lc ld le b">Developer mode</code></p><p id="9f08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第三步:现在点击<code class="fe lb lc ld le b">Load unpacked extension</code></p><p id="3a4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">步骤4:选择扩展的目录</p><p id="878f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">步骤5:现在你看到你的扩展将出现在<code class="fe lb lc ld le b">chrome://extensions/</code></p><p id="7fad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当你在你的chrome扩展中改变一些东西时，只要回到这个页面并重新加载你的扩展，谷歌chrome就会更新你的扩展中所做的任何改变。</p><h1 id="0173" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">内容。Js:</h1><p id="182e" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">内容脚本是在网页环境中运行的JavaScript文件，简单来说，内容脚本将与您在google chrome上访问的每个网页进行交互。内容脚本包含一段JavaScript代码，用于在Chrome浏览器中执行特定的任务。我在目录中创建了一个<code class="fe lb lc ld le b">content.js</code>文件，并在其中添加了下面的代码。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="00f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">Alert() </code>是JavaScript中的内置函数，当你重新加载谷歌浏览器并访问任何网页时，你都会看到一个弹出框，上面写着<code class="fe lb lc ld le b">Hello from a Coder</code>。为了注入脚本，我们需要将这个<code class="fe lb lc ld le b">content.js</code>文件与<code class="fe lb lc ld le b">manifest.json</code>文件连接起来，这样谷歌浏览器就可以读取它了。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="cfeb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第7行，我们用<code class="fe lb lc ld le b">content_scripts</code>来定义它，当google chrome读取这一行时，他们会知道他们需要根据content_scripts中的代码来执行操作。第9行显示我们使用了匹配模式并设置它<code class="fe lb lc ld le b">&lt;all_urls&gt;</code>这将在你访问的每个URL或网页上显示我们的弹出对话框，如果你想添加一些特定的网站，你的对话框应该在上面显示，然后使用第12行的<code class="fe lb lc ld le b">[“https://mail.google.com/*", “http://www.medium.com/*"].</code>我们告诉谷歌浏览器他们需要注入的内容脚本的名称<code class="fe lb lc ld le b">js:[“content.js]</code>。重新加载你的Chrome扩展。你现在访问的每一个页面都会弹出一个提示。让我们改为记录页面上的第一个URL。</p><h1 id="ce06" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">JQuery:</h1><p id="7100" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">jQuery不是必需的，但是在chrome扩展中，在某些方面，比如登录URL等，jQuery会很有用。首先，从jQuery CDN下载一个版本的jQuery，放在您的扩展的文件夹中，并添加jQuery的缩小版本的名称。要加载它，在<code class="fe lb lc ld le b">content.js</code>检查下面的代码之前，将其添加到manifest.json。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="dc51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们有了jQuery，让我们用它在content.js中记录页面上第一个外部链接的URL。注意，我们不需要使用jQuery来检查文档是否已经加载。默认情况下，Chrome在DOM完成后注入内容脚本。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="3212" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">试试看，你会在你访问的每个网页上看到谷歌控制台的输出。</p><h1 id="a3e2" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">浏览器操作:</h1><p id="9262" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">如果你已经注意到chrome extension有一些图标，当你点击那个图标时，他们会弹出一个消息框，给你一些选项，这些选项是他们的功能，叫做浏览器动作，你的扩展可以监听那个按钮上的点击，然后做一些事情。从google chrome下载一个示例图标，将icon.png放在带有<code class="fe lb lc ld le b">content.js</code>的目录中，并将以下代码放在content.js文件中。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="5fe4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第16行我添加了一个新的代码名browser_action，它将告诉google chrome我们正在为扩展定义浏览器动作，在下一行我将<code class="fe lb lc ld le b">default_icon</code>设置为我想在扩展上显示的图标的名称。如果你重新加载你的chrome扩展，你会看到变化。现在，我们希望我们的扩展显示一个消息框，当我们点击它，这可以通过消息传递来完成。</p><h1 id="2739" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">消息传递:</h1><p id="9ed5" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">内容脚本可以访问当前页面，但受限于它可以访问的API。例如，它不能监听浏览器动作上的点击。我们需要为我们的扩展添加一个不同类型的脚本，一个后台脚本，它可以访问每个Chrome API，但不能访问当前页面。创建一个新的文件名<code class="fe lb lc ld le b">background.js. </code>,这样内容脚本将能够从当前页面中提取一个URL，但需要将该URL交给后台脚本来做一些有用的事情。为了进行通信，我们将使用Google所谓的消息传递，它允许脚本发送和监听消息。它是内容脚本和后台脚本交互的唯一方式。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="2dff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们编辑background.js文件。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="bc92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当用户点击浏览器动作时调用第1行代码函数，下一行代码函数将发送一个JSON负载到活动标签。现在我们将background.js代码与content.js代码连接起来。</p><figure class="mi mj mk ml gt jr"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="93d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，我们之前的所有代码都被移到了侦听器中，因此它只在收到有效负载时运行。每当您单击浏览器操作图标时，您应该会看到一个URL被记录到控制台。如果不起作用，尝试重新加载扩展，然后重新加载页面。</p><p id="a64c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以在这篇文章中，我们学习了如何创建一个chrome扩展，我们还学习了创建chrome扩展需要什么，什么是manifest，什么是内容脚本。如果你是一名JavaScript开发人员，那么你应该知道一些功能，你可以编写代码使你的chrome扩展更加有用。希望这篇文章对你以后有所帮助，也可以随意分享你的看法。</p></div></div>    
</body>
</html>