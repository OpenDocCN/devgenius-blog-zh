<html>
<head>
<title>Comparing Machine Learning Models in R to Predict Death Due to Heart Failure and Diabetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比较 R 中的机器学习模型以预测心力衰竭和糖尿病导致的死亡</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/comparing-machine-learning-methods-in-r-to-predict-death-due-to-heart-failure-and-diabetes-3c0f40425a4b?source=collection_archive---------9-----------------------#2022-08-26">https://blog.devgenius.io/comparing-machine-learning-methods-in-r-to-predict-death-due-to-heart-failure-and-diabetes-3c0f40425a4b?source=collection_archive---------9-----------------------#2022-08-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c330" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第一部分:使用机器学习来预测由于心力衰竭导致的死亡事件</strong></p><p id="52d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这项分析的目标是在预测心力衰竭导致的死亡事件时比较机器学习方法。死亡事件的预测变量包括年龄、贫血、肌酸酐磷酸激酶、糖尿病、射血分数、高血压、血小板、血清肌酸酐、血清钠、性别、吸烟和时间。</p><p id="1edd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">图书馆(rpart) <br/>图书馆(gbm) <br/>图书馆(randomForest) <br/>图书馆(ISLR)</p><p id="ecc8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">心力衰竭 hf &lt; -心力衰竭<br/>头部(hf)</p><p id="a445" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将数据分成训练集和测试集。</p><p id="4e5b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">set . seed(21)<br/>test . d&lt;-sample(1:nrow(HF)，. 20 * nrow(HF))<br/>test&lt;-HF[test . d，] <br/> training &lt; - hf[-test.d，]<br/>y . true&lt;-as . numeric(test $ DEATH _ EVENT)<br/>y . true</p><p id="9c11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 10 进行交叉验证，生成一棵单独的树。<br/><br/>model . control&lt;-rpart . control(min split = 5，xval = 10，CP = 0)<br/>fit&lt;-rpart(DEATH _ EVENT ~)。，数据=训练，方法= "类"，控制=模型.控制)</p><p id="1c5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">plot(fit) <br/>文本(fit，use.n = TRUE，cex = .5)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="ab gu cl kn"><img src="../Images/f2faa868bdbedc3ae06c357f92027aee.png" data-original-src="https://miro.medium.com/v2/format:webp/1*1WvJYeV1WXoPgLMWl5c7RQ.png"/></div></figure><p id="ce61" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这棵树长得太多了。我要看看复杂度参数表。复杂度参数给出了每个节点所需的改进。如果添加另一个变量会使成本超过复杂性参数，则不会添加该变量。这将帮助我修剪这棵树。</p><p id="e27a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最小 cp 图(fit$cptable[，4]，main = "Cp for model selection "，ylab = "cv error ")</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="ab gu cl kn"><img src="../Images/5989be00d484118029bc455ea0b00fe9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*YhIwjmF2GZcDglDtlT8JKg.png"/></div></figure><p id="264d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个复杂度参数表显示 2 是最优的。</p><p id="25dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">pruned.fit </p><p id="7c3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">plot(pruned.fit)<br/>文本(pruned.fit，use.n = TRUE，cex = .5)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="ab gu cl kn"><img src="../Images/b99b5294ef52c64a1773e46fd1947293.png" data-original-src="https://miro.medium.com/v2/format:webp/1*pqrMSvrfFw7iN8kLDhzVAQ.png"/></div></figure><p id="6405" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">计算单棵树的测试误差。</p><p id="4c5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">my . predmy . pred<br/>y . hat&lt;-as . numeric(my _ pred)-1<br/>y . hat<br/>misclass . tree&lt;-sum(ABS(y . true-y . hat))/length(y . hat)<br/>misclass . tree</p><p id="5e01" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">单棵树的测试误差:0.1355932。</p><p id="aafb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">构建随机森林模型。<br/><br/>RF . fit&lt;-random forest(DEATH _ EVENT ~)。，数据=训练，n.tree = 10000)</p><p id="224a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">方差图(rf.fit)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kq"><img src="../Images/b97807ef8afbd9f90981ea8f90ca70bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qv3CrgQKXPv_a2i-FAEwKg.png"/></div></div></figure><p id="d57e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">重要性(rf.fit) <br/>增加纯度<br/>年龄 4.5938688 <br/>贫血 0.3684661 <br/>肌酐 _ 磷酸激酶 2.9997713 <br/>糖尿病 0.3819893 <br/>射血分数 7.3631650 <br/>高血压 0.5095131 <br/>血小板 3.3403799 <br/>血清</p><p id="54ef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">计算随机森林的测试误差。</p><p id="650b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">y . haty . hat&lt;-as . numeric(y . hat)<br/>y . hat<br/>misclass . RF&lt;-sum(ABS(y . true-y . hat))/length(y . hat)<br/>misclass . RF</p><p id="c846" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随机森林测试错误:0.2446791。</p><p id="ac0d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">制袋材料</p><p id="34bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">bag . fit </p><p id="b961" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">变量图(bag.fit)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="ab gu cl kn"><img src="../Images/8e0cffded5953cb217174e16549d5137.png" data-original-src="https://miro.medium.com/v2/format:webp/1*yEGdn-LYvIkwL_QzuY--Lg.png"/></div></figure><p id="46e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">重要性(bag.fit) <br/>增加纯度<br/>年龄 3.1057867 <br/>贫血 0.2509914 <br/>肌酐 _ 磷酸激酶 2.9177911 <br/>糖尿病 0.2167239 <br/>射血分数 6.2159849 <br/>高血压 0.3778630 <br/>血小板 2.8023183 <br/>血清肌酐 6.5533</p><p id="b0f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">计算装袋的测试误差。</p><p id="5948" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">y . haty . hat&lt;-as . numeric(y . hat)<br/>y . hat<br/>misclass . bag&lt;-sum(ABS(y . true-y . hat))/length(y . hat)<br/>misclass . bag</p><p id="fd65" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">装袋试验误差:0.2385333。</p><p id="1458" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">升压<br/> <br/> boost.train &lt; -训练；<br/>boost . train $ DEATH _ EVENT&lt;-as . numeric(training $ DEATH _ EVENT)<br/>boost . train $ DEATH _ EVENT<br/>boost . test&lt;-test；<br/>boost . test $ DEATH _ EVENT&lt;-as . numeric(test $ DEATH _ EVENT)<br/>boost . test $ DEATH _ EVENT</p><p id="17b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">boost.fit </p><p id="6c08" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">boost.fit2 </p><p id="e04a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">summary(boost.fit)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="ab gu cl kn"><img src="../Images/dcba44488cc227d24638d1cc07ff95f5.png" data-original-src="https://miro.medium.com/v2/format:webp/1*tz4Jy0rKpq0mP8aEmxuDJQ.png"/></div></figure><p id="8264" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Variable relative influence:<br/>时间 37.9954489 <br/>射血分数 14.0026115 <br/>血清 _ 肌酐 11.6500200 <br/>血小板 10.4647959 <br/>年龄 8.7592157 <br/>肌酐 _ 磷酸激酶 8.0280420 <br/>血清 _ 钠 4.4700776 <br/>性别 1.4631</p><p id="7391" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">摘要(boost.fit2)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="ab gu cl kn"><img src="../Images/7976b7773e4039ebece5c947fc040121.png" data-original-src="https://miro.medium.com/v2/format:webp/1*cGMmjKE0UAOpDQfmHVPu6Q.png"/></div></figure><p id="7d9e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">变量相对影响:<br/>时间 29.389490031 <br/>血清 _ 肌酐 14.053466311 <br/>血小板 13.644517810 <br/>射血分数 13.067936909 <br/>肌酐 _ 磷酸激酶 10.309038549 <br/>年龄 7.13039393657<br/>血清 _ 钠 5.0101</p><p id="3060" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看收缩率的测试误差= .1。</p><p id="0858" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">y . hatmisclass . boost . 1&lt;-sum(ABS(y . hat—y . true))/length(y . true)<br/>misclass . boost . 1</p><p id="7887" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">收缩率的测试误差= .1: 0.1677244</p><p id="e993" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看收缩率的测试误差= .6。</p><p id="55c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">y . hatmisclass . boost . 6&lt;-sum(ABS(y . hat—y . true))/length(y . true)<br/>misclass . boost . 6</p><p id="13ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">收缩率的测试误差= .6: 0.1865359</p><p id="5759" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不同收缩值的误差曲线:</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="ab gu cl kn"><img src="../Images/7fb1bb41ba555c211811442b8c9f3668.png" data-original-src="https://miro.medium.com/v2/format:webp/1*cJk-cKImHP8DKCK72DMDQQ.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">黑色=.1，红色=.4，蓝色=.6，绿色=.8</figcaption></figure><p id="1174" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">建立一个 k 最近邻模型。</p><p id="4b72" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><br/>库(类)库(factoextra)</p><p id="29cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">knn.total.data  set.seed(21)</p><p id="b64b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用肘形函数计算总的类内平方和。</p><p id="5c88" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">dev . off()<br/>fviz _ nbclust(KNN . total . data，kmeans，method = "wss "，k . max = 20)+theme _ minimal()+gg title("肘方法")</p><p id="d141" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">k = 5<br/>KNN&lt;-KNN(train = training，test= test，cl=training$DEATH_EVENT，k = 5)<br/>KNN<br/>KNN . cm&lt;-table(test $ DEATH _ EVENT，KNN)<br/>KNN . error&lt;-mean(KNN！= test $ DEATH _ EVENT)<br/>print(paste(' Accuracy = '，1-KNN . error))<br/>Accuracy = 0.728813559322034<br/>KNN . error</p><p id="f473" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">k=5 时的测试误差:0.2711864</p><p id="5c4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">建立逻辑回归模型。</p><p id="52ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">glm . fitsummary(glm . fit)<br/>names(glm . fit)<br/>round(glm . fit $ fitted . values)<br/>glm . probs . test&lt;-predict(glm . fit，newdata = test，type = " response ")<br/>y . hat . test&lt;-round(glm . probs . test)</p><p id="6120" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">log.tab </p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/edbda5dc5c8a5b5de82a0841c6482eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*KJzDYbEcIWZh3ArnbY0bAQ.png"/></div></figure><p id="b689" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">.86441 accuracy<br/> 1- .86441</p><p id="e1f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">逻辑回归检验误差:0.13559。</p><p id="2ef3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是所有模型中最低的，但它几乎等同于单树测试误差 0.1355932。</p><p id="0d80" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">逻辑回归发现重要的变量有:</p><p id="4018" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">p 值为 6.51e-09 <br/>射血分数为 1.47e-06 <br/>血清肌酐为 0.000592 <br/>年龄为 0.000911</p><p id="8b1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">单株误差为 0.1355932。随机林错误为 0.2446791。装袋误差为 0.2385333。最小提升误差为 0.1677244，收缩 0.1，树数为 1000。KNN 误差最高为 0.2711864，逻辑回归检验误差最低为 0.13559。</p><p id="2d67" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我感到惊讶的是，一些更简单的模型表现得比装袋，升压和随机森林更好。与装袋、推进和随机森林相比，单棵树模型的优势在于它更容易解释。KNN 没有做得那么好，在这种情况下选择 k 的肘方法是不可靠的，所以我不得不尝试一些不同的 k 值。我发现 k=5 导致 27%的最低误差，但这与装袋、助推和随机森林的结果不可比。logistic 回归的误差率最低，为 13.56%。这是最容易实现的，它将几个同样重要的变量标识为 boosting。</p><p id="8066" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第二部分:利用机器学习预测糖尿病</strong></p><p id="eb0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Pima 数据集来自国家糖尿病、消化和肾脏疾病研究所。我这次分析的目标是根据 7 个健康预测指标来预测糖尿病，这 7 个健康预测指标包括怀孕次数、血糖水平、舒张压、皮褶厚度、体重指数、血统和年龄。我还想对比一下用于预测的机器学习方法。</p><p id="195b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">pima<br/>pima&lt;-pima[-9]#移除多余的列<br/> pima <br/>头(pima)</p><p id="e45c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将数据分成训练集和测试集。</p><p id="df1a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">set . seed(21)<br/>test . d&lt;-sample(1:nrow(pima)，. 20 * nrow(pima))<br/>test&lt;-pima[test . d，]<br/>test $ class digit<br/>training&lt;-pima[-test . d，]<br/>training $ class digit<br/>y . true&lt;-as . numeric(test $ class digit)-1<br/>y . true</p><p id="bca5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 10 进行交叉验证，生成一棵单独的树。</p><p id="d4b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">model . controlfit&lt;-RP art(class digit ~)。，数据=训练，方法= "class "，控制= model.control)</p><p id="14d0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">绘制(拟合)<br/>文本(拟合，使用. n = TRUE，cex = .5)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi la"><img src="../Images/6c7f40d83304bf71b7f1ac989117f422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hQh_47QFpknWze3QmFBfug.png"/></div></div></figure><p id="4ff4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这棵树被过度砍伐了。我将查看复杂性参数表。复杂性参数给出了每个节点所需的改进。如果添加另一个变量会增加复杂性参数以上的成本，则不会添加该变量。这将帮助我修剪这棵树。</p><p id="18ab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">min.cp 图(fit$cptable[，4]，main = "Cp 用于模型选择"，ylab = "cv 错误")</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/eb023cdaea00227a1a01882e0979b79d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/format:webp/1*lepkuMbvwSTKz0czJCddDw.png"/></div></figure><p id="5920" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该复杂性参数表显示，5 是最佳值。</p><p id="d449" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">修剪. fit  quartz() <br/>绘图(修剪. fit) <br/>文本(修剪. fit，use.n = TRUE，cex = .5)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lc"><img src="../Images/4e9954a24a270695bb09f1d16b32720b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQXuaJomz6K94y0QCnDsGw.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">葡萄糖、年龄和系谱是确定的重要变量。</figcaption></figure><p id="16be" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">计算单个树的测试错误。</p><p id="42aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">my . predmy . pred<br/>y . hat&lt;-as . numeric(my . pred)-1<br/>y . hat<br/>y . hat<br/>错误类别. tree&lt;-sum(ABS(y . true-y . hat))/length(y . hat)<br/>错误类别树。</p><p id="b84a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">单个树测试错误:0.1886792。</p><p id="b139" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">构建随机森林模型。</p><p id="da55" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">RF . fit</p><p id="c3ef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">varImpPlot(rf.fit)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ld"><img src="../Images/776456432a1b20708c85f32827f45326.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b1PfrVtWrZtpKxam2_VvhA.png"/></div></div></figure><p id="9d20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">importance(rf.fit)</p><p id="2354" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">MeanDecreaseGini<br/>NP regent 17.61143<br/>葡萄糖 50.48042 <br/>舒张期. bp 16.43220 <br/>皮褶厚度 19.49788 <br/> bmi 30.02280 <br/>系谱 27.75305 <br/>年龄 27.51515000006</p><p id="72d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">计算随机林的测试错误。</p><p id="e7d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">y . haty . hat&lt;-as . numeric(y . hat)-1<br/>y . hat<br/>错误分类. rf&lt;-sum(ABS(y . true-y . hat))/length(y . hat)<br/>错误分类. RF</p><p id="09d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随机森林测试错误:0.2075472</p><p id="ceb6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">制袋材料</p><p id="f12a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">bag . fit</p><p id="249c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">varImpPlot(bag.fit)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi le"><img src="../Images/5ff483b70e5465bfd363725ed7473579.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OwYPVpp7ZlfmtsRYKfE_gA.png"/></div></div></figure><p id="4e8f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">importance(bag.fit)</p><p id="e951" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">MeanDecreaseGini<br/>NP regent 14.94415<br/>葡萄糖 64.91023 <br/>舒张期. bp 13.71250 <br/>皮褶厚度 15.64271 <br/> bmi 26.32955 <br/>系谱 27.82432 <br/>年龄 26.63557000006</p><p id="93b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">装袋的计算测试误差。</p><p id="f7d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">y . haty . hat&lt;-as . numeric(y . hat)-1<br/>y . hat<br/>误分类. bag&lt;-sum(ABS(y . true-y . hat))/length(y . hat)<br/>误分类. bag。</p><p id="70c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">装袋试验误差:0.2264151</p><p id="0af8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">boosting<br/><br/>boost . train&lt;-training<br/>boost . train<br/>boost . train $ class digit&lt;-as . numeric(training $ class digit)-1<br/>boost . train $ class digit<br/>boost . test&lt;-test<br/>boost . test $ class digit&lt;-as . numeric(test $ class digit)-1<br/>boost . test $ class digit</p><p id="38e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">boost . fit </p><p id="ed5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">尝试不同的收缩水平。</p><p id="90b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ebost . fit2 </p><p id="1a62" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">总结(boost.fit)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/af885168d9e47e9bbc7de631c784b511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*VJEKkahxH5hIZKA_WLP_2w.png"/></div></figure><p id="db52" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">变量相对影响:<br/>葡萄糖 23.613904 <br/>谱系 19.515308 <br/> bmi 18.367461 <br/>年龄 14.766844 <br/>皮褶厚度 8.672439<br/>npregent 8.059944<br/>舒张压 7.004100</p><p id="519c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">摘要(boost.fit2)</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/9ea62046c2b9a95c8c80ab7be9c77bf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*Q2vNcL9HxRLGk1eNPJqLkA.png"/></div></figure><p id="2ab6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">变量相对影响:<br/>葡萄糖 24.144609 <br/>家系 22.611261 <br/> bmi 15.964700 <br/>年龄 12.981947 <br/>皮褶厚度 11.247379<br/>npregent 6.664430<br/>舒张压 6.385674</p><p id="b378" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看收缩率的测试误差= .1。</p><p id="be4d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">y . hatmisclass . boost . 1&lt;-sum(ABS(y . hat—y . true))/length(y . true)<br/>misclass . boost . 1</p><p id="8e91" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">收缩率的测试误差= .1: 0.2382885</p><p id="5167" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看收缩率的测试误差= .6。</p><p id="6b01" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">y . hatmisclass . boost . 6&lt;-sum(ABS(y . hat—y . true))/length(y . true)<br/>misclass . boost . 6</p><p id="6496" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">收缩率的测试误差= .6: 0.2516983</p><p id="d9a8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不同收缩值的误差曲线:</p><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/27fb51d8ef841ae83cef4acb6e223431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*p2WuDmTiEDoNdeyOHMpdHg.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">黑色=.1，红色=.4，蓝色=.6，绿色=.8</figcaption></figure><p id="832f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随机森林重要变量不同于单树模型，该模型将葡萄糖、年龄和血统确定为重要变量。随机森林确定葡萄糖是最重要的，然后是身体质量指数，然后是年龄和血统。误差率较低的 0.1 的增强，按重要性顺序确定了血糖、血统、bmi，然后是年龄。另一方面，套袋更类似于单树模型，因为它确定葡萄糖、血统和年龄是最重要的，身体质量指数在重要性上类似于年龄。</p><p id="4180" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">与误差为 0.1886792 的单棵树相比，随机森林的测试误差增加了 0.2075472。增压进一步增加了 0.2382885 的测试误差，收缩了 0.1。收缩 0.6 的增强误差为 0.2516983。由于 boosting 没有 random forest 做得好，我很好奇 bagging 会如何比较。装袋误差为 0.2264151。这与我在心力衰竭数据中发现的情况类似，单树模型比随机森林、boosting 和 bagging 模型表现得更好。这样做的好处是减少了计算成本和更高的可解释性。</p></div></div>    
</body>
</html>