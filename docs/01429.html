<html>
<head>
<title>Laravel API — Repository Pattern (Make Your Code More Structured)- The Simple Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">laravel API——存储库模式(使你的代码更加结构化)——简单指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/laravel-api-repository-pattern-make-your-code-more-structured-the-simple-guide-5b770da766d7?source=collection_archive---------1-----------------------#2020-07-03">https://blog.devgenius.io/laravel-api-repository-pattern-make-your-code-more-structured-the-simple-guide-5b770da766d7?source=collection_archive---------1-----------------------#2020-07-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/adafa814e9c8fbae36bcf8f0b5971c0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t2NWR2JH2y1Ijx8A1voTZw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Laravel知识库模式</figcaption></figure><p id="e623" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">嗨，朋友们，就在这里，我们要再次谈论拉勒维尔。我们走吧！</p><h1 id="2205" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">遵循这篇文章的要求</h1><ol class=""><li id="5dad" class="lv lw in kb b kc lx kg ly kk lz ko ma ks mb kw mc md me mf bi translated">非常基础的OOP。</li><li id="5731" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw mc md me mf bi translated">基本拉勒维尔。</li><li id="0f4f" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw mc md me mf bi translated">基础API。</li></ol><h1 id="caa0" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">跟随本文的必备工具</h1><h2 id="d702" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">1.PHP / Laravel</h2><p id="c149" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">重要的是Laravel本身，你可以安装在这里(<a class="ae na" href="https://laravel.com/docs/7.x" rel="noopener ugc nofollow" target="_blank">https://laravel.com/docs/7.x</a>)。我目前使用的是Laravel 7 <em class="nb">。</em></p><h2 id="42e6" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">2.邮递员</h2><p id="baec" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">Postman是一个强大而友好的用户界面应用程序，可以在这里下载(【https://www.postman.com】T4)。</p><h2 id="78c1" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">3.文字编辑器</h2><p id="7860" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">有很多文本编辑器，我更喜欢使用VSCode，你可以在这里下载(<a class="ae na" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com</a>)。<br/>如果你想使用Sublime Text或Atom <strong class="kb io">，</strong>这样的文本编辑器没问题，只要选择适合你的工具就行了。</p><h2 id="b94c" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">4.数据库ˌ资料库</h2><p id="22ec" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">可以使用XAMPP <strong class="kb io">、</strong> LAMPP <strong class="kb io">、</strong>或者WAMPP。但是我用的是包含MySQL的XAMPP。这里有下载https://www.apachefriends.org/index.html的链接。</p><h1 id="ad52" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">看完这篇文章你得到了什么？</h1><ol class=""><li id="045c" class="lv lw in kb b kc lx kg ly kk lz ko ma ks mb kw mc md me mf bi translated">结构化的Laravel应用程序。</li><li id="b987" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw mc md me mf bi translated">做一个更好的API。</li><li id="a04e" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw mc md me mf bi translated">让你的代码更容易维护。</li></ol></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><h1 id="ea99" class="kx ky in bd kz la nj lc ld le nk lg lh li nl lk ll lm nm lo lp lq nn ls lt lu bi translated">知识库模式</h1><p id="efd1" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">在本文中，我们将讨论Laravel <strong class="kb io">中的存储库模式。顺便问一下，什么是存储库模式？根据微软文档，以下是解释:</strong></p><blockquote class="no np nq"><p id="1b7e" class="jz ka nb kb b kc kd ke kf kg kh ki kj nr kl km kn ns kp kq kr nt kt ku kv kw ig bi translated">存储库是封装了访问数据源所需的逻辑的类或组件。它们集中了常见的数据访问功能，提供了更好的可维护性，并将用于访问数据库的基础设施或技术从域模型层中分离出来。</p></blockquote><p id="6418" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如需进一步阅读，请访问下面由Microsoft提供的文档:</p><div class="nu nv gp gr nw nx"><a href="https://docs.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design#:~:text=The%20Repository%20pattern,from%20the%20domain%20model%20layer." rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd io gy z fp oc fr fs od fu fw im bi translated">设计基础设施持久层</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">数据持久性组件提供了对微服务边界内托管的数据的访问(即…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">docs.microsoft.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol jt nx"/></div></div></a></div><p id="a81e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">简单的解释就是，<strong class="kb io"> <em class="nb">存储库模式让你的应用更加结构化，易于维护，并且非常容易与数据库</em> </strong> <em class="nb">中的东西(比如模型)进行交互。当然，这在将来会更容易开发，因为代码有标准。最后一件事是，你的应用程序有主要的文件要配置，叫做<strong class="kb io">接口，储存库</strong>，<strong class="kb io">，</strong>和<strong class="kb io">提供者</strong>。</em></p></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><h2 id="e5b9" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">另一篇拉勒维尔的文章</h2><p id="4bb8" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">查看我之前的文章2019年谈论Laravel API和VueJS，这里是这篇文章，我顺便用印度尼西亚语写的。</p><div class="nu nv gp gr nw nx"><a href="https://medium.com/gits-apps-insight/laravel-6-membuat-api-menggunakan-resource-part-1-eec91149d7aa" rel="noopener follow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd io gy z fp oc fr fs od fu fw im bi translated">Laravel 6 —成员API Menggunakan资源(第1部分)</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">我们可以用API来管理6种资源吗？这是我的第一份工作。</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">medium.com</p></div></div><div class="og l"><div class="om l oi oj ok og ol jt nx"/></div></div></a></div><div class="nu nv gp gr nw nx"><a href="https://medium.com/gits-apps-insight/laravel-6-part-2-full-stack-dengan-vuejs-18911280901c" rel="noopener follow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd io gy z fp oc fr fs od fu fw im bi translated">Laravel 6(第二部分)—全栈[dengan VueJS]</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">第6类和第3类网站的建立需要大量资金。不，bagaimana…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">medium.com</p></div></div><div class="og l"><div class="on l oi oj ok og ol jt nx"/></div></div></a></div></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><h1 id="3a51" class="kx ky in bd kz la nj lc ld le nk lg lh li nl lk ll lm nm lo lp lq nn ls lt lu bi translated">准备我们的申请</h1><p id="2fe5" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">您可以按照这里的文档来安装Laravel。</p><div class="nu nv gp gr nw nx"><a href="https://laravel.com/docs/7.x/installation#installation" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd io gy z fp oc fr fs od fu fw im bi translated">装置</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">Laravel框架有一些系统需求。所有这些要求都由拉勒维尔家园满足…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">laravel.com</p></div></div></div></a></div><p id="d8c1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">好吧，我假设你已经安装了Laravel，让我们先设置我们的Laravel。</p><h2 id="4715" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">1.配置数据库</h2><p id="bd08" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">我这里用的是<strong class="kb io"> MySQL </strong>，所以这是我的数据库。环境配置:</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="e8b6" class="ml ky in ot b gy ox oy l oz pa">DB_CONNECTION=mysql</span><span id="f4b4" class="ml ky in ot b gy pb oy l oz pa">DB_HOST=127.0.0.1</span><span id="24fc" class="ml ky in ot b gy pb oy l oz pa">DB_PORT=3306</span><span id="b379" class="ml ky in ot b gy pb oy l oz pa">DB_DATABASE=laravel-repository-pattern</span><span id="9fb6" class="ml ky in ot b gy pb oy l oz pa">DB_USERNAME=root</span><span id="efca" class="ml ky in ot b gy pb oy l oz pa">DB_PASSWORD=</span></pre><h2 id="c75c" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">2.配置模型</h2><p id="0584" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">这对你来说是完全可选的，我只是更喜欢这样做来构建应用程序。</p><p id="4982" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">好了这里这篇文章的一个主要的东西，你看到Laravel模型位于<strong class="kb io"> <em class="nb"> app </em> </strong>文件夹里面对吗？我的意思是，这没关系，但我想将该模型移动到<strong class="kb io"><em class="nb">app</em></strong><em class="nb">/</em><strong class="kb io"><em class="nb">Models</em></strong>中，这是我将在这一步中创建的一个更好的开发环境文件夹。</p><p id="d7a1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">转到<strong class="kb io"><em class="nb">config/auth . PHP</em></strong>并搜索这一行，将代码改为。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="b3d1" class="ml ky in ot b gy ox oy l oz pa">'providers' =&gt; [</span><span id="bace" class="ml ky in ot b gy pb oy l oz pa">'users' =&gt; [</span><span id="5e29" class="ml ky in ot b gy pb oy l oz pa">'driver' =&gt; 'eloquent',</span><span id="425b" class="ml ky in ot b gy pb oy l oz pa">'model' =&gt; App\Models\User::class, <br/>        // I added "Models" Folder up there</span><span id="b306" class="ml ky in ot b gy pb oy l oz pa">],</span></pre><p id="820f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">之后，将名称空间模型<strong class="kb io">User.php</strong>改为这个。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="f2fb" class="ml ky in ot b gy ox oy l oz pa">namespace App\Models;</span></pre><p id="c3ac" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这样做之后，清除缓存，并通过在终端或CMD中键入以下命令，在应用程序中重新添加该类。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="e013" class="ml ky in ot b gy ox oy l oz pa">// clear cache<br/>php artisan config:cache</span><span id="f0ef" class="ml ky in ot b gy pb oy l oz pa">// re-add class<br/>composer dump-autoload</span></pre><h2 id="0480" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">3.制造假数据</h2><p id="1469" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">使用seeder为我们的API创建假数据，使用以下命令生成seeder。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="65d3" class="ml ky in ot b gy ox oy l oz pa">php artisan make:seeder UserSeeder</span></pre><p id="6fd5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">将这段代码复制到我们已经在<strong class="kb io"> <em class="nb">数据库/seeds/UserSeeder.php </em> </strong>中创建的播种机中</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">UserSeeder.php</figcaption></figure><p id="cfd6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">并且不要忘记进入<strong class="kb io"><em class="nb">database/factories/user factory . PHP</em></strong><em class="nb">，</em>当您生成Laravel项目并复制这段代码时，这个文件已经在那里了。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">UserFactory.php</figcaption></figure><p id="cd1e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">之后，在<strong class="kb io"> <em class="nb">数据库/seeds/database seeder . PHP</em></strong><em class="nb">，</em>中注册<strong class="kb io"><em class="nb">【UserSeeder.php</em></strong>，这样。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">DatabaseSeeder.php</figcaption></figure><p id="3b2f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，运行下面的代码，重新添加类，将假数据插入数据库并进行迁移。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="8dac" class="ml ky in ot b gy ox oy l oz pa">// Re-add the class<br/>composer dump-autoload</span><span id="cea2" class="ml ky in ot b gy pb oy l oz pa">// Migrating and inserting fake data from seeder to database<br/>php artisan migrate:fresh --seed</span></pre><p id="7bb7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">上面代码的结论</strong>是，我们要使用Laravel工厂生成假数据，确切地说是用户的20个数据。不同的是，我们只是改变了<strong class="kb io"><em class="nb">User.php</em></strong>模型的命名空间。</p><h2 id="76a4" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">4.创建用户控制器</h2><p id="e764" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">好吧，假设我们已经有了20个虚假用户的数据，对吗？现在，我将创建UserController，并将其放在用于处理用户数据的<strong class="kb io"><em class="nb">app/Http/Controllers/API</em></strong>文件夹中，运行以下代码。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="2b9d" class="ml ky in ot b gy ox oy l oz pa">php artisan make:controller API/UserController -r</span></pre><p id="6644" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">并在下面写下这段代码。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">UserController.php</figcaption></figure><h2 id="736f" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">5.在api.php注册路线</h2><p id="ad0c" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">转到<strong class="kb io"> <em class="nb"> routes/api.php </em> </strong>、<strong class="kb io"> <em class="nb"> </em> </strong>添加这段代码。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="9b68" class="ml ky in ot b gy ox oy l oz pa">Route::resource(‘users’, ‘API\UserController’);</span></pre><p id="41e9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">你可以在邮差app上查看，端点是:</p><ul class=""><li id="5e43" class="lv lw in kb b kc kd kg kh kk pe ko pf ks pg kw ph md me mf bi translated">获取所有用户，方法<strong class="kb io">获取</strong> (api/users)。</li><li id="4c91" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">创建新用户，方法<strong class="kb io">发布</strong> (api/users)。</li><li id="a34b" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">通过ID获取用户，方法<strong class="kb io"> GET </strong> (api/users/{id})。</li><li id="d9f1" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">更新用户，方法<strong class="kb io">放</strong> (api/users/{id})。</li><li id="6556" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">删除用户，方法<strong class="kb io">删除</strong> (api/users/{id})。</li></ul><blockquote class="no np nq"><p id="038a" class="jz ka nb kb b kc kd ke kf kg kh ki kj nr kl km kn ns kp kq kr nt kt ku kv kw ig bi translated">注意:对于创建用户，端点主体包含(名称、电子邮件和密码)，对于更新，主体包含(名称和电子邮件)，这些字段是必需的。</p></blockquote><p id="a2e0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">有什么问题吗？不会，只是一个普通的控制器对吗？你完全正确。但是，如果我们有效地看待编码，维护起来看起来很可怕。为什么？因为如果你有复杂的逻辑，<strong class="kb io">你的控制器会变胖，难以阅读</strong>。从现在开始，你要把逻辑搬到仓库去。从上面的代码来看，什么也不是。但是想象一下，如果你有一个很大的应用程序，你还在使用那个控制器，你在里面实现了很多逻辑。</p><blockquote class="no np nq"><p id="b1c3" class="jz ka nb kb b kc kd ke kf kg kh ki kj nr kl km kn ns kp kq kr nt kt ku kv kw ig bi translated">如果你实现了这个存储库模式，你的控制器看起来会更干净，逻辑会更少。但是，如果你想让你的控制器保持那样，没关系。这取决于你的应用程序有多复杂。</p></blockquote></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><h1 id="b1e3" class="kx ky in bd kz la nj lc ld le nk lg lh li nl lk ll lm nm lo lp lq nn ls lt lu bi translated">让我们实现存储库模式！</h1><p id="186f" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">我们开始吧！首先，你要在你的<strong class="kb io"> <em class="nb"> app </em> </strong>文件夹中创建三个文件夹，分别是存储库、接口和特征。所以在你的<strong class="kb io"> <em class="nb"> app </em> </strong>文件夹里面会是这样的。</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div class="gh gi pi"><img src="../Images/de95f07f330fe5f39376775004cd10a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/format:webp/1*jMJyWm3gD40RGQyU4ZXGnw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">应用程序文件夹列表</figcaption></figure><h2 id="d7b5" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">1.创造特质</h2><p id="9969" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">什么是特质？根据PHP文档，下面是解释。</p><blockquote class="no np nq"><p id="fa56" class="jz ka nb kb b kc kd ke kf kg kh ki kj nr kl km kn ns kp kq kr nt kt ku kv kw ig bi translated"><strong class="kb io">特征</strong>是单一继承中代码重用的一种机制</p></blockquote><p id="40bf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">简单解释一下</strong>，Trait是在你的app中放置一些可重用代码的文件，用于减少重复做同样的功能。在这种情况下，我们将创建向客户机发送JSON响应的函数。</p><p id="946f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我将<strong class="kb io">命名为ResponseAPI.php，</strong>将文件放在你的<strong class="kb io"> <em class="nb"> app/Traits </em> </strong>文件夹中。代码，你可以写在下面。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">ResponseAPI.php</figcaption></figure><p id="34b5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这只是我为这篇文章做的简单的特征，代码在那里是不言自明的。</p><h2 id="fe29" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">为什么我会有这种特质？</h2><p id="c963" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">如果我们回到我在那里创造的UserController.php。如您所见，我一遍又一遍地以相同的格式发送JSON响应。如果你有一个更大的应用程序要构建，你会厌倦写响应格式。很快，我们将重构控制器。</p><h2 id="e027" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">2.创建界面</h2><p id="6de8" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">在开始创建接口之前，我只想创建一个Laravel给出的验证类。<strong class="kb io">如果你使用一个存储库模式，你不允许在一个控制器或存储库中创建一个验证，它必须是单独的</strong>。下面是创建验证的代码。我正在使用FormRequest验证。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="85ce" class="ml ky in ot b gy ox oy l oz pa">php artisan make:request UserRequest</span></pre><p id="09a2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上面的命令将在<strong class="kb io"><em class="nb">app/Http/Requests/user request . PHP .</em></strong>中创建一个文件，下面是你可以写下来的代码。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">UserRequest.php</figcaption></figure><p id="f8ca" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接口是解释起来复杂的部分，但是接口就像一个类，是用来描述类在那里实现什么方法的。如果您仍然感到困惑，让我们创建界面。</p><p id="9d30" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我将<strong class="kb io">命名为UserInterface.php，</strong>将文件放在你的<strong class="kb io"><em class="nb">app/Interfaces</em></strong>文件夹中。代码，你可以写在下面。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">UserInterface.php</figcaption></figure><p id="2773" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我要重复上面界面中发生的事情。所以我们有一个包含四个方法的接口，对吗？这些方法是:</p><ul class=""><li id="0359" class="lv lw in kb b kc kd kg kh kk pe ko pf ks pg kw ph md me mf bi translated">getAllUsers()，从数据库中获取所有用户。</li><li id="c67e" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">从数据库中获取一个用户。</li><li id="eea2" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">requestUser()，从数据库创建或更新用户。</li><li id="37aa" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">deleteUser()，从数据库中删除用户。</li></ul><p id="ea2c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上面的四种方法将在我们的知识库中使用。接口只是为了描述我们的知识库或类的工作。如果您想要为应用程序的功能创建一个存储库，存储库中的方法必须与实现的接口相同。让我们创建存储库。</p><h2 id="fb05" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">3.创建存储库</h2><p id="bb98" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">在这里，我将创建一个存储库。储存库到底是什么？储存库是用于与控制器和数据通信的层，在这种情况下，与数据库进行交互。因此，我将把我之前创建的所有逻辑从<strong class="kb io">UserController.php</strong>移到这个存储库中。</p><p id="6df6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我命名为<strong class="kb io">UserRepostitory.php，</strong>将文件放在你的<strong class="kb io"><em class="nb">app/Repositories</em></strong>文件夹中。代码，你可以写在下面。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">UserRepository.php</figcaption></figure><p id="dee8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">看到了吗？就像我们刚刚在<strong class="kb io">UserController.php做的一样，</strong>但是我们做得更干净，我们只是创建方法来实现我们刚刚创建的<strong class="kb io">UserInterface.php</strong>。如果你没有实现UserInterface.php的方法，你会得到一个错误。</p><blockquote class="no np nq"><p id="a64d" class="jz ka nb kb b kc kd ke kf kg kh ki kj nr kl km kn ns kp kq kr nt kt ku kv kw ig bi translated">哦，对了，还有一件事，你看我用DB facades写代码。这只是为了防止如果我们的服务器有任何问题，如果我们向数据库发出请求，特别是创建/更新/删除数据，如果有错误，它会得到<strong class="kb io">回滚</strong>而不是保存到数据库。要获得更多解释，您可以在这里浏览文档。</p></blockquote><div class="nu nv gp gr nw nx"><a href="https://laravel.com/docs/7.x/database#database-transactions" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd io gy z fp oc fr fs od fu fw im bi translated">数据库:入门</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">Laravel使跨各种数据库后端与数据库的交互变得极其简单，使用原始SQL…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">laravel.com</p></div></div></div></a></div><h2 id="3163" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">4.重构UserController.php</h2><p id="262a" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">我们来重构一下<strong class="kb io"><em class="nb">app/Http/Controllers/API/user controller . PHP</em></strong><em class="nb"/>中那个看起来乱七八糟的<strong class="kb io">UserController.php</strong>。好了，这是代码。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">重构的UserController.php</figcaption></figure><p id="e615" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">看到了吗？所以控制器是干净整洁的，我们只需要得到用户接口，在构造函数中，得到我们想要的所有方法。控制器中不再有逻辑和验证，这很好。从现在开始，如果你有问题或调试，你只需去接口或仓库本身。</p><p id="2afb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，为了让这些事情工作，您必须向Laravel本身注册一个<strong class="kb io">提供者</strong>。怎么做呢？让我们再向下滚动。</p><h2 id="be58" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">5.注册新的提供商</h2><p id="83e9" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">我们要注册一个供应商，对吗？我们只是简单地在<strong class="kb io"><em class="nb">app/Providers</em></strong>文件夹<em class="nb">中创建新文件。</em></p><p id="f798" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我命名<strong class="kb io">RepositoryServiceProvider.php，</strong>把文件放在你的<strong class="kb io"><em class="nb">app/Providers</em></strong>文件夹里。代码，你可以写在下面。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">RepositoryServiceProvider.php</figcaption></figure><p id="b7d0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">之后就可以在<strong class="kb io"><em class="nb">config/app . PHP</em></strong>文件中注册提供者了。转到<strong class="kb io"> providers </strong>数组，放置这段代码。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="715b" class="ml ky in ot b gy ox oy l oz pa">App\Providers\RepositoryServiceProvider::class,</span></pre><p id="6633" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在注册了<strong class="kb io">提供者</strong>之后，运行下面的代码来重新添加类并清空缓存。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="57e2" class="ml ky in ot b gy ox oy l oz pa">// clear cache<br/>php artisan config:cache</span><span id="ca92" class="ml ky in ot b gy pb oy l oz pa">// re-add class<br/>composer dump-autoload</span></pre><p id="f0b9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，您应该能够再次运行服务器并到达同一个端点。</p><p id="02ae" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">看到了吗？在我们实现存储库模式之前和之后有什么不同。在我们实现了存储库模式之后，我们的代码更加结构化，可读性更强，更重要的是，易于开发。</p><h2 id="2b61" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">如果你有另一个回购和接口呢？怎么注册？</h2><p id="0c61" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">如果您有其他回购或接口，您可以通过前往，<strong class="kb io"><em class="nb">app/Providers/</em>RepositoryServiceProvider.php</strong>轻松注册。示例代码应该是这样的。</p><figure class="oo op oq or gt jo"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">注册新存储库和接口的示例。</figcaption></figure><p id="fa11" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">你只要每次做一个新的回购和接口就注册一个新的<strong class="kb io"><em class="nb">$ this-&gt;app-&gt;bind()</em></strong>，<em class="nb"> </em>。</p><p id="a9c2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们看看结果！</p><h2 id="2f8c" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">我们在那里做的结果</h2><p id="7379" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">好的，我会在<strong class="kb io">邮差</strong>上测试这个。我认为你之前已经完成了所有这些步骤。不要忘记运行服务器和数据库。</p><pre class="oo op oq or gt os ot ou ov aw ow bi"><span id="645c" class="ml ky in ot b gy ox oy l oz pa">php artisan serve</span></pre><ol class=""><li id="dc10" class="lv lw in kb b kc kd kg kh kk pe ko pf ks pg kw mc md me mf bi translated">获取所有用户端点，方法<strong class="kb io">获取</strong>(API/用户)</li></ol><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pj"><img src="../Images/85867ad561523ec973f0a11697b5d72b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zm7OaFxZfEIjuAGkEdVuEA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">获取所有用户</figcaption></figure><p id="3de5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">2.按ID获取用户，方法<strong class="kb io">获取</strong>(API/user/{ ID })</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pk"><img src="../Images/0fb424076e6761fdc37056b6664f42bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YF68ilAxADTK2V2oXiJ9UQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">按ID获取用户</figcaption></figure><p id="5f9a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3.创建新用户，方法<strong class="kb io">POST</strong>(API/用户)</p><p id="afbf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，你要把标题放在邮差里，应该是这样的。</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pl"><img src="../Images/d80ccd9393483ce93eddf40e49d3e6fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0133-xzpPIUqFhLHK0iZg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">请求的标头</figcaption></figure><p id="1453" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">其次，这是请求的主体，字段都是必需的。</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pm"><img src="../Images/ca70c6528a22dab54d5cd5ab2f615277.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1znF-5PJuLM6z0FEdtRNwA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">创建新用户主体</figcaption></figure><p id="abd4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后是结果。</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pn"><img src="../Images/906c141a59a9e0e57e0b0de6f6e5c93f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nr9DCID5ykWbzeNRRlBxrQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">创建新用户结果响应</figcaption></figure><p id="759c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">4.更新用户，方法<strong class="kb io">PUT</strong>(API/user/{ id })</p><p id="170c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这些步骤与创建新用户、差异位于正文和param相同。</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi po"><img src="../Images/7f55dffd8b8da4b05a7511fe908aa15a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UFP6yHyPUOmzAOkP-7FvIg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">更新用户</figcaption></figure><p id="0ad6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">结果。</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pj"><img src="../Images/15443f5af3aa4354c510653f204fc036.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LN3ENFW7ZBg9IjamhmPa9g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">用户更新结果</figcaption></figure><p id="7248" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">5.删除用户，方法<strong class="kb io">DELETE</strong>(API/user/{ id })</p><p id="cb2c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后一点是，删除用户。</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pp"><img src="../Images/62f1f7f7f03b74367f38eabac3b98bf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nyR0FWqrig8vQ5tiDEbsxw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">删除用户结果</figcaption></figure><p id="3eb6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">就是这样！你用存储库模式使API成为可能。</p><h2 id="ad51" class="ml ky in bd kz mm mn dn ld mo mp dp lh kk mq mr ll ko ms mt lp ks mu mv lt mw bi translated">错误响应结果</h2><p id="6fbe" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">对于错误响应，如果您从服务器获得任何错误，您将获得以下响应(例如)。</p><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pm"><img src="../Images/c688d41781411d492806e010e50e2b50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AqaqXuYE1HIzERLQ4MG2Ww.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">错误响应</figcaption></figure><figure class="oo op oq or gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi pm"><img src="../Images/e7d07f5dc05bd3b7fcc950a20f4c0493.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*89dOWFLHs1o_Hk_DarTOPA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">从数据库中查找未注册用户的错误响应</figcaption></figure></div><div class="ab cl nc nd hr ne" role="separator"><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh ni"/><span class="nf bw bk ng nh"/></div><div class="ig ih ii ij ik"><h1 id="14fb" class="kx ky in bd kz la nj lc ld le nk lg lh li nl lk ll lm nm lo lp lq nn ls lt lu bi translated">结论</h1><p id="df1d" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk mx km kn ko my kq kr ks mz ku kv kw ig bi translated">在阅读并实施了上面的操作之后，您将:</p><ul class=""><li id="0fbb" class="lv lw in kb b kc kd kg kh kk pe ko pf ks pg kw ph md me mf bi translated">让你的代码更有条理。</li><li id="1860" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">一致。</li><li id="834e" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">永远不要在controller中编写任何逻辑，如果必须这样做也没关系。</li><li id="04dd" class="lv lw in kb b kc mg kg mh kk mi ko mj ks mk kw ph md me mf bi translated">让你的代码在未来更加可重用。</li></ul><p id="440b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们刚刚使用存储库模式创建了一个Laravel应用程序。现在的代码更有结构性，也更易于维护。这样我们的响应API就更具可读性和一致性。这就是本文的目的，我希望你们在代码中编写的内容更加一致，但如果不这样做，就会使代码更难理解和维护。这只是我的观点，所以实际上取决于你。</p><p id="7fe8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您可以在此处贡献或克隆回购。</p><div class="nu nv gp gr nw nx"><a href="https://github.com/hudaprs/be_repository_pattern_api_laravel" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd io gy z fp oc fr fs od fu fw im bi translated">hud aprs/be _ repository _ pattern _ API _ Lara vel</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">用Laravel实现的存储库模式API。通过创建一个…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">github.com</p></div></div><div class="og l"><div class="pq l oi oj ok og ol jt nx"/></div></div></a></div><p id="7785" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以我们坚持到了最后一篇文章，很有意思，不是吗？我希望你得到我在那里解释的东西，如果你没有，请留下评论。下一篇文章见。</p></div></div>    
</body>
</html>