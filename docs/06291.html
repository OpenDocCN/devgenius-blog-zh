<html>
<head>
<title>How to compile Haskell on Termux for aarch64 architecture!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在 Termux 上为 aarch64 架构编译 Haskell！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-compile-haskell-on-termux-for-aarch64-architecture-cc15375d3595?source=collection_archive---------3-----------------------#2021-12-28">https://blog.devgenius.io/how-to-compile-haskell-on-termux-for-aarch64-architecture-cc15375d3595?source=collection_archive---------3-----------------------#2021-12-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0415" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">经过几周的尝试，我们让 Haskell 在 aarch64 架构上编译。这是在一部 Android 手机上完成的，Termux 运行了一个虚拟的 Ubuntu shell，这是由 PRoot 提供的，同时我们还付出了更大的努力来为 iOS 和 Android 移植 SimpleX。这个食谱假设一个新的 Termux 安装。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/529c9eceda216d8d2df8259b2e872e05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2fZAj0jG1O9JTBE2R3cxw.jpeg"/></div></div></figure><p id="06ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ki" href="https://github.com/simplex-chat/simplex-chat" rel="noopener ugc nofollow" target="_blank"> SimpleX </a>是一个瘦终端 UI 消息代理，使用<a class="ae ki" href="https://github.com/simplex-chat/simplexmq/blob/master/protocol" rel="noopener ugc nofollow" target="_blank"> SMP 协议</a>。单纯聊天的动机是<a class="ae ki" href="https://github.com/simplex-chat/simplex-chat/blob/master/simplex.md" rel="noopener ugc nofollow" target="_blank">这里介绍的</a>。</p><p id="eb20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更新:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="2712" class="la lb in kw b gy lc ld l le lf">pkg update</span></pre><p id="6927" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更新 termux:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="7e04" class="la lb in kw b gy lc ld l le lf">apt-get update &amp;&amp; apt-get upgrade -y</span></pre><p id="c433" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">安装依赖项:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="8739" class="la lb in kw b gy lc ld l le lf">apt-get install wget proot proot-distro git -y</span></pre><p id="e6ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">前往个人文件夹:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="981c" class="la lb in kw b gy lc ld l le lf">cd ~</span></pre><p id="859c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 PRoot 上安装 Ubuntu:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="dc39" class="la lb in kw b gy lc ld l le lf">proot-distro install ubuntu</span></pre><p id="2a5b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">登录 Ubuntu:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="9afa" class="la lb in kw b gy lc ld l le lf">proot-distro login ubuntu</span></pre><p id="2c6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更新和安装依赖关系:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="40eb" class="la lb in kw b gy lc ld l le lf">apt update &amp;&amp; apt install curl libnuma-dev git llvm-dev clang make zlib1g-dev</span></pre><p id="7d8d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">安装 ghcup:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="686f" class="la lb in kw b gy lc ld l le lf">mkdir -p ~/.ghcup/bin &amp;&amp; curl <a class="ae ki" href="https://downloads.haskell.org/~ghcup/aarch64-linux-ghcup" rel="noopener ugc nofollow" target="_blank">https://downloads.haskell.org/~ghcup/aarch64-linux-ghcup</a> -o ~/.ghcup/bin/ghcup &amp;&amp; chmod +x ~/.ghcup/bin/ghcup</span></pre><p id="c98c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将其添加到路径:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="0096" class="la lb in kw b gy lc ld l le lf">echo “export PATH=\”\$HOME/.cabal/bin:\$HOME/.ghcup/bin:\$PATH\”” &gt;&gt; ~/.bashrc &amp;&amp; source ~/.bashrc</span></pre><p id="71e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">设置 GHC 并安装 Cabal:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="50b2" class="la lb in kw b gy lc ld l le lf">ghcup install ghc &amp;&amp; ghcup set ghc &amp;&amp; ghcup install cabal &amp;&amp; ghcup set cabal</span></pre><p id="629e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将 SimpleX 和 cd 克隆到其中:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="4849" class="la lb in kw b gy lc ld l le lf">git clone <a class="ae ki" href="https://github.com/simplex-chat/simplex-chat" rel="noopener ugc nofollow" target="_blank">https://github.com/simplex-chat/simplex-chat</a> &amp;&amp; cd simplex-chat</span></pre><p id="1088" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了避免 Android 杀死编译器，请启用电源模式，给手机充电，并通过“设置”的“设备管理”中的“内存”将 Termux 从跟踪中移除。</p><p id="99c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更新阴谋集团，然后建立:</p><pre class="kk kl km kn gt kv kw kx ky aw kz bi"><span id="2b04" class="la lb in kw b gy lc ld l le lf">cabal update &amp;&amp; cabal build</span></pre><p id="5d73" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">单工目录-聊天将在最后的链接阶段打印。我的情况是:<code class="fe lg lh li kw b">/root/simplex-chat/dist-newstyle/build/aarch64-linux/ghc-8.10.7/simplex-chat-0.5.2/x/simplex-chat/build/simplex-chat/simplex-chat</code></p><p id="7839" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">抓取位于上面目录中的 simplex-chat 的二进制文件-&gt;将其放在某个地方-&gt;使用<code class="fe lg lh li kw b">chmod +x simplex-chat</code> - &gt;使其可执行，将放置二进制文件的位置添加到您的路径中。</p><p id="30c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后输入<code class="fe lg lh li kw b">simplex-chat</code>启动单纯形。</p><p id="ef8e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本文转自<a class="ae ki" href="https://sebastian-mineev.com/" rel="noopener ugc nofollow" target="_blank">我的个人博客</a>。</p></div></div>    
</body>
</html>