<html>
<head>
<title>Fancy Bubble Plot using ggplot2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 ggplot2 的花式气泡图</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/fancy-bubble-plot-using-ggplot2-ab8efefffded?source=collection_archive---------12-----------------------#2022-12-12">https://blog.devgenius.io/fancy-bubble-plot-using-ggplot2-ab8efefffded?source=collection_archive---------12-----------------------#2022-12-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="e94c" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">什么是 ggplot2？</h1><p id="3b18" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">如果您不熟悉 ggplot2，它是一个流行的 R 库，用于创建图形和图表。别担心，我将带您了解一些基本的 ggplot2 术语。更多详情可以参考—<a class="ae lg" href="https://ggplot2.tidyverse.org/" rel="noopener ugc nofollow" target="_blank">https://ggplot2.tidyverse.org/</a></p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h1 id="3378" class="jk jl in bd jm jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh bi translated">我们想要实现什么？</h1><p id="0371" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我们是不是觉得有点不可思议？让我们试着复制下图。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/d53c3078a5f36340d9c5d00cea96ee9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y6xH3VYnhUMJM_nfMehdcQ.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk translated">花式气泡图</figcaption></figure><p id="98e8" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">一个漂亮的气泡图，你可以用它来绘制两个变量的数据，这两个变量分别用 x 轴和 y 轴表示。天平可能会从好变坏，同意不同意等等。当你从左到右或从上到下移动时。相应地，您可以为象限想出实际上有意义的特殊名称。4 个气泡中的%s 加起来是 100%。</p><p id="f03c" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">为了生成此图，我将创建一个合成数据，并且为了方便起见，对 4 个象限中的每一个都使用了通用标签。</p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h1 id="4a74" class="jk jl in bd jm jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh bi translated">用 PowerPoint 制作这个图表不是更容易吗？</h1><p id="0c04" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">是的，当然。你可以用 PowerPoint 或 Excel 或 Word 在几分钟内创建它。那么，为什么要大费周章地通过代码创建它呢？</p><ol class=""><li id="84cd" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf mt mu mv mw bi translated">作为一种学习活动。创建这样的图表有助于我更深入地了解 ggplot2 的工作原理。</li><li id="6bf9" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf mt mu mv mw bi translated">如果您必须在基于 web 的仪表板上添加这样的图表，或者每两周或每月定期重新创建该图表，这将非常方便。</li></ol></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h1 id="92c4" class="jk jl in bd jm jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh bi translated">那我们开始吧</h1><h2 id="69a0" class="nc jl in bd jm nd ne dn jq nf ng dp ju kt nh ni jy kx nj nk kc lb nl nm kg nn bi translated">加载库</h2><p id="83b0" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">第一步是确保我们有必要的库。我将使用 data.table、scales 和 ggplot2。您可以坚持使用基本的 data.frame 类，但我喜欢使用 data.table. 'scales '库帮助将数字显示为百分比、逗号或美元或其他格式。</p><p id="032e" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">不过，我会先打电话给吃豆人图书馆。使用“pacman”加载库的优点是，如果您的环境中没有所需的库，它会安装这些库，而不是抛出错误。</p><pre class="lu lv lw lx gt no np nq bn nr ns bi"><span id="facb" class="nt jl in np b be nu nv l nw nx"># install 'pacman' package if it isn't already installed<br/>if (!require(pacman)) install.packages("pacman")<br/><br/># load the 'pacman' library in the environment<br/>library(pacman)<br/><br/># load 'data.table' and 'ggplot2'<br/>p_load(data.table, ggplot2, scales)</span></pre><h2 id="2ff2" class="nc jl in bd jm nd ne dn jq nf ng dp ju kt nh ni jy kx nj nk kc lb nl nm kg nn bi translated">获取您的数据</h2><p id="e92e" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我将为此演示创建一个虚拟数据集。数据集包含 6 列:</p><ul class=""><li id="7b95" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf ny mu mv mw bi translated">“象限”:4 个象限的名称/标签。</li><li id="2cca" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">“值”:要在气泡中显示的值。这些也决定了气泡的大小。</li><li id="d06f" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">“fillCol”:每个气泡的颜色。我给每个气泡不同的颜色，但如果你想坚持蓝色，你可以复制相同的颜色 4 次，或在' geom_point '函数调用中将其作为字符串提供给' fill '参数。这将在文件的后面部分介绍。</li><li id="b612" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">“fontCol”:每个气泡内显示的值标签的颜色。同样，如果您计划坚持使用相同的颜色，要么复制相同的颜色 4 次，要么在“geom_text”函数调用中将 is 作为字符串提供给“color”参数。</li><li id="d11d" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">“x”和“y”:这是 4 个气泡的 x 和 y 坐标。我选择了以下坐标作为开始:</li></ul><ol class=""><li id="a58a" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf mt mu mv mw bi translated">(0.35，0.2)用于四分之一气泡</li><li id="9692" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf mt mu mv mw bi translated">(0.85，0.25)用于第二象限气泡</li><li id="4420" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf mt mu mv mw bi translated">(0.25，0.8)适用于 Quad3 气泡</li><li id="f885" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf mt mu mv mw bi translated">(0.65，0.7)用于四边形 4 气泡</li></ol><p id="828d" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">如果需要，我们可以稍后更改坐标。</p><pre class="lu lv lw lx gt no np nq bn nr ns bi"><span id="89db" class="nt jl in np b be nu nv l nw nx">DT &lt;- data.table(<br/>  Quad = c("Quad1", "Quad2", "Quad3", "Quad4"),<br/>  Values = c(40, 15, 5, 30),<br/>  fillCol = c("#4472C4", "#ED7D31", "#70AD47", "#FFC000"),<br/>  fontCol = c("black", "black", "white", "white"),<br/>  x = c(0.35, 0.85, 0.25, 0.65),<br/>  y = c(0.2, 0.25, 0.8, 0.7)<br/>)</span></pre><h2 id="ed46" class="nc jl in bd jm nd ne dn jq nf ng dp ju kt nh ni jy kx nj nk kc lb nl nm kg nn bi translated">绘制图表</h2><p id="3ea6" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">现在我们已经有了所有需要的信息，让我们开始构建情节。</p><p id="7a06" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">“ggplot2”按照调用函数的顺序在层中构建图表。使用“ggplot”函数实例化绘图，然后您可以调用其他函数，如:</p><ul class=""><li id="5f34" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf ny mu mv mw bi translated">“几何点”(散点图)</li><li id="11c4" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">“几何线”(折线图)</li><li id="ae00" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">'几何条形图'(条形图)</li><li id="c50d" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">geom_text '(标签)</li></ul><p id="9407" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">因此，如果我们调用 ggplot+geom _ point+geom _ line+geom_text，gg plot 将首先创建散点图，将线图覆盖在它的顶部，由“geom _ text”生成的标注将是最顶层或最后一层。</p><p id="49be" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">这些函数中的每一个，包括“ggplot”都可以:</p><ul class=""><li id="1c19" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf ny mu mv mw bi translated">数据-用于绘图的数据集</li><li id="698e" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">aes(美学的缩写)-x 轴和 y 轴的参考列，这些列包含关于在绘制之前对数据进行分组的信息、颜色、标签等。</li></ul><p id="fa6c" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">如果我们知道每个元素将使用相同的数据，x 和 y 坐标，那么在“ggplot”函数调用中提及这些数据会更容易，并且默认情况下后续函数将“继承”这些信息。</p><p id="0149" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">除此之外，每个函数都有自己的一组参数。</p><p id="a31c" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">首先，我将创建一个带有标准主题格式的图表。</p><pre class="lu lv lw lx gt no np nq bn nr ns bi"><span id="6707" class="nt jl in np b be nu nv l nw nx"># 'ggplot' instantiates the plot<br/>ggplot(<br/>  data = DT, # The main dataset for the plot that other functions can inherit<br/>  # aesthetics     <br/>  aes(<br/>         x = x, # Column in dataset with x coordinates<br/>           y = y # Column in dataset with y coordinates<br/>         )) +<br/>  geom_point(<br/>    # aesthetics specific to 'geom_point' function<br/>    aes(<br/>      size = Values # Column in dataset that determines size of the bubbles<br/>      )) +<br/>  geom_text(<br/>    # aesthetics specific to 'geom_text' function<br/>    aes(<br/>      label = scales::percent(Values/100, 1) # Column in dataset to be used for labels. We divide the values by 100 and apply 'percent' formatting from 'scales' library<br/>      ))</span></pre><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nz"><img src="../Images/e4b46994e7c3ec1f322e397a799a3342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rv_fzHo17m2qfEDWcvy_tA.png"/></div></div></figure><p id="4198" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">我们正在实现这一目标，但仍有许多工作要做:</p><ul class=""><li id="5b23" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf ny mu mv mw bi translated">将 x 轴和 y 轴的界限扩展为 0 到 1</li><li id="8cc5" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">气泡尺寸需要更大</li><li id="4071" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">为标签和气泡应用颜色</li><li id="0ee9" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">摆脱</li></ul><ol class=""><li id="b6e2" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf mt mu mv mw bi translated">x 和 y 轴标签和标题</li><li id="7128" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf mt mu mv mw bi translated">神话；传奇</li><li id="a439" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf mt mu mv mw bi translated">网格线</li></ol><pre class="lu lv lw lx gt no np nq bn nr ns bi"><span id="f26f" class="nt jl in np b be nu nv l nw nx">ggplot(data = DT,<br/>       aes(x = x,<br/>           y = y)) +<br/>  geom_point(aes(<br/>    size = Values),<br/>    color = DT$fillCol # Column in dataset that has color information<br/>    ) +<br/>  scale_size(<br/>    range = c(10, 60) # Rescales the values so the bubbles are bigger<br/>    ) +<br/>  geom_text(aes(<br/>    label = scales::percent(Values/100, 1)),<br/>    color = DT$fontCol # Column in the dataset that as color information<br/>    ) +<br/>  ylim(0, 1) + # Sets limits of y-axis<br/>  xlim(0, 1) + # Sets limits of x-axis<br/>  theme_minimal() + # preset theme with 'white' background<br/>  theme(<br/>    axis.text = element_blank(), # Remove x and y axis labels<br/>    axis.title = element_blank(), # Remove x and y axis titles<br/>    panel.grid = element_blank(), # Remove major and minor gridlines<br/>    legend.position = "none" # Remove legend<br/>  )</span></pre><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nz"><img src="../Images/7ba0985e1118d21901e200fc1b60097a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oND8istMkZGYuzcrdpExaQ.png"/></div></div></figure><p id="e5ec" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">注意我们是如何指定 DT$fillCol 而不是 fillCol 的。这是因为我们在“美学”之外设置了“颜色”参数。如果我们在“美学”中指定了“颜色”参数，我们就会使用 fillCol。根据参数设置的位置，会影响 ggplot 对它的处理方式。我不想深入细节，因为这超出了本文的目的，但是我鼓励您尝试一下。</p><p id="e212" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">好吧，我们的图表看起来还不错。</p><p id="358c" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">我们正在接近。最后几次调整:</p><ul class=""><li id="8912" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf ny mu mv mw bi translated">添加两端带箭头的水平线和垂直线</li><li id="a37b" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">四标签</li></ul><p id="abe5" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">然而，这些元素使用不同的 x 和 y 坐标。例如，垂直线将绘图一分为二，左半部分和右半部分大小相等。所以，我们可以想象这条线连接(0.5，0)和(0.5，1)坐标。类似地，水平线将图分成两半，上半部分和下半部分大小相等。在这种情况下，我们可以想象连接(0，0.5)和(1，0.5)坐标的水平线。</p><p id="fe03" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">在同一行上，我们可以想象象限标签具有以下坐标:</p><ul class=""><li id="27d9" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf ny mu mv mw bi translated">象限 1: (0，0)</li><li id="80b1" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">象限 2: (1，0)</li><li id="1afa" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">象限 3: (0，1)</li><li id="c714" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">象限 4: (1，1)</li></ul><p id="f011" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">解决这个问题的方法是在各自的函数调用中提供 x 和 y 坐标，而不是让它们从“ggplot”函数调用中“继承”这个信息。</p><pre class="lu lv lw lx gt no np nq bn nr ns bi"><span id="0c5a" class="nt jl in np b be nu nv l nw nx">ggplot(data = DT,<br/>       aes(x = x,<br/>           y = y)) +<br/>  # Vertical line<br/>  geom_line(<br/>    # Dataset for plotting the vertical line<br/>    data = data.table(<br/>      x = c(0.5, 0.5), # x coordinates for the vertical line<br/>      y = c(0, 1) # y coordinates for the verticle line<br/>    ),<br/>    # aesthetics<br/>    aes(<br/>      x = x,<br/>      y = y<br/>    ),<br/>    # draw arrows<br/>    arrow = arrow(<br/>      ends = "both", # arrows required on both ends of the line<br/>      length = unit(0.3, "cm"), # size of the arrow<br/>      type = "closed" # type of the arrow. 'closed' creates an arrows that resembles a filled triangle. 'open' creates an arrows that looks like &gt; or &lt; depending the end of the line<br/>      )<br/>  ) +<br/>  # horizontal line. I am not repeating the comments as they are similar to what we used for creating the 'vertical' line except for the x and y coordinates<br/>  geom_line(<br/>    data = data.table(<br/>      x = c(0, 1),<br/>      y = c(0.5, 0.5)<br/>    ),<br/>    aes(<br/>      x = x,<br/>      y = y<br/>    ),<br/>    arrow = arrow(<br/>      ends = "both",<br/>      length = unit(0.3, "cm"),<br/>      type = "closed"<br/>      )<br/>  ) +<br/>  geom_point(aes(<br/>    size = Values),<br/>    color = DT$fillCol) +<br/>  scale_size(range = c(10, 60)) +<br/>  geom_text(aes(<br/>    label = scales::percent(Values/100, 1)),<br/>    color = DT$fontCol) +<br/>  # Label for quadrants<br/>  geom_text(<br/>    # Dataset used for labeling the Quadrants<br/>    data = data.table(<br/>      Quad = DT$Quad, # We pull the quardrant labels from 'Quad' column of 'DT' dataset<br/>      x = c(0, 1, 0, 1), # x coordinates<br/>      y = c(0, 0, 1, 1) # y coordinates<br/>    ),<br/>    # aesthetics<br/>    aes(x = x, y = y, label = Quad)) +<br/>  ylim(0, 1) +<br/>  xlim(0, 1) +<br/>  theme_minimal() +<br/>  theme(<br/>    axis.text = element_blank(),<br/>    axis.title = element_blank(),<br/>    panel.grid = element_blank(),<br/>    legend.position = "none"<br/>  )</span></pre><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nz"><img src="../Images/d4068c45aa073ec6866b88df07e455a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SB5W1L7kszoSJ8ZhmZS-5A.png"/></div></div></figure><p id="2b86" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">我们定义“几何线”函数，在调用“几何点”之前创建垂直线和水平线，以便气泡绘制在线上，而不是相反。请注意“Quad4”中的“黄色”气泡是如何与水平线重叠的。如果我们在“几何点”之后调用“几何线”，水平线将会与“黄色”气泡重叠。</p></div><div class="ab cl lh li hr lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="ig ih ii ij ik"><h1 id="e69b" class="jk jl in bd jm jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh bi translated">我们能把它变得更别致吗？也许吧，</h1><p id="b873" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我们可以添加另一个气泡图来增加阴影效果。这可以通过简单地复制生成气泡图的代码并稍微改变 x 和 y 坐标来实现，然后依靠‘geom _ point’的‘alpha’参数来增加透明度。</p><pre class="lu lv lw lx gt no np nq bn nr ns bi"><span id="1b16" class="nt jl in np b be nu nv l nw nx">ggplot(data = DT,<br/>       aes(x = x,<br/>           y = y)) +<br/>  # Vertical line<br/>  geom_line(<br/>    # Dataset for plotting the vertical line<br/>    data = data.table(<br/>      x = c(0.5, 0.5), # x coordinates for the vertical line<br/>      y = c(0, 1) # y coordinates for the verticle line<br/>    ),<br/>    # aesthetics<br/>    aes(<br/>      x = x,<br/>      y = y<br/>    ),<br/>    # draw arrows<br/>    arrow = arrow(<br/>      ends = "both", # arrows required on both ends of the line<br/>      length = unit(0.3, "cm"), # size of the arrow<br/>      type = "closed" # type of the arrow. 'closed' creates an arrows that resembles a filled triangle. 'open' creates an arrows that looks like &gt; or &lt; depending the end of the line<br/>      )<br/>  ) +<br/>  # horizontal line. I am not repeating the comments as they are similar to what we used for creating the 'vertical' line except for the x and y coordinates<br/>  geom_line(<br/>    data = data.table(<br/>      x = c(0, 1),<br/>      y = c(0.5, 0.5)<br/>    ),<br/>    aes(<br/>      x = x,<br/>      y = y<br/>    ),<br/>    arrow = arrow(<br/>      ends = "both",<br/>      length = unit(0.3, "cm"),<br/>      type = "closed"<br/>      )<br/>  ) +<br/>  # Create another set of bubbles to add shadow effect<br/>  geom_point(aes(<br/>    x = (x - 0.01), # x coordinates from the 'DT' dataset are shifted by 0.01<br/>    y = (y - 0.01), # y coordinates from the 'DT' dataset are shifted by 0.01<br/>    size = Values),<br/>    color = DT$fillCol,<br/>    alpha = 0.5 # makes the bubbles transparent<br/>    ) +<br/>  geom_point(aes(<br/>    size = Values),<br/>    color = DT$fillCol) +<br/>  scale_size(range = c(10, 60)) +<br/>  geom_text(aes(<br/>    label = scales::percent(Values/100, 1)),<br/>    color = DT$fontCol) +<br/>  # Label for quadrants<br/>  ## Geom label is essentially same as 'geom_text' except that it adds a background to the text.<br/>  geom_label(<br/>    # Dataset used for labeling the Quadrants<br/>    data = data.table(<br/>      Quad = DT$Quad, # We pull the quardrant labels from 'Quad' column of 'DT' dataset<br/>      x = c(0, 1, 0, 1), # x coordinates<br/>      y = c(0, 0, 1, 1) # y coordinates<br/>    ),<br/>    # aesthetics<br/>    aes(x = x, y = y, label = Quad),<br/>    size = 3, # Size of the labels<br/>    fontface="bold.italic" # Make the font bold and italic<br/>    ) +<br/>  ylim(0, 1) +<br/>  xlim(0, 1) +<br/>  theme_minimal() +<br/>  theme(<br/>    axis.text = element_blank(),<br/>    axis.title = element_blank(),<br/>    panel.grid = element_blank(),<br/>    legend.position = "none"<br/>  )</span></pre><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi nz"><img src="../Images/e04af754a11394631b1fcac749dcdf34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iDvzDSnHqH9vYdOChP0Amg.png"/></div></div></figure><h1 id="313f" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">概述</h1><p id="ff54" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在本文中，我们介绍了:</p><ul class=""><li id="6474" class="mo mp in kk b kl mj kp mk kt mq kx mr lb ms lf ny mu mv mw bi translated">ggplot 简介</li><li id="5a67" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">分层的概念</li><li id="2626" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">关键功能-几何图形，几何点，几何线，几何文本</li><li id="9eb4" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">如何提供数据、美学和其他功能参数</li><li id="2c21" class="mo mp in kk b kl mx kp my kt mz kx na lb nb lf ny mu mv mw bi translated">控制绘图的不同方面，如“轴标签”、“轴标题”、“网格线”、“图例”到“主题”</li></ul><p id="c1b2" class="pw-post-body-paragraph ki kj in kk b kl mj kn ko kp mk kr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">如果你觉得这篇文章有用并有任何反馈，请留下评论。快乐学习👍。</p></div></div>    
</body>
</html>