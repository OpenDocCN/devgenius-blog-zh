<html>
<head>
<title>Good Code: Unit tests may save your development time and TDD increases effectiveness.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">好的代码:单元测试可以节省你的开发时间，TDD可以提高效率。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/good-code-unit-tests-may-save-your-development-time-and-tdd-helps-in-effectiveness-379c42a74ff?source=collection_archive---------24-----------------------#2020-06-13">https://blog.devgenius.io/good-code-unit-tests-may-save-your-development-time-and-tdd-helps-in-effectiveness-379c42a74ff?source=collection_archive---------24-----------------------#2020-06-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="008f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇文章中，我将尝试解释单元测试如何节省你的开发时间。我解释了有和没有单元测试的三种不同的开发场景，最后解释了TDD如何使单元测试更加有效。在我看来，单元测试和TDD还有其他好处，但是本文主要关注单元测试如何影响开发时间。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/06c85780eff7953b52be09396ad52b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xem1rbG0Fa8DAhtez7mvsA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">来源:https://unsplash.com/photos/BXOXnQ26B7o</figcaption></figure><p id="e026" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是一个业务需求的例子</p><pre class="kj kk kl km gt kz la lb lc aw ld bi"><span id="0cb0" class="le lf in la b gy lg lh l li lj">1. Price of product should be base price if discount and unit price  is not present.<br/>2. If available price of product should be unit price when discount is not present. For example "5.0 Euro per Liter".<br/>3. Price of product should be discount price if present but discount per unit price is not present.<br/>4. Price of product should be discount per unit price if discount per unit price is present.</span></pre><p id="cd8b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我从测试的角度解释一下实现上述需求的三种方法。</p><h1 id="0602" class="lk lf in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">没有单元测试的开发</h1><p id="5f67" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">可以说，如果没有单元测试，实现上述需求将花费最短的时间。但是，如果您还想在开发期间或开发之后测试您的代码，该怎么办呢？你有什么选择？</p><p id="e7af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一种选择是手工测试。对于手工测试，你需要设置测试数据的所有变化。设置数据和测试所有场景需要时间，这需要额外的时间。数据可能来自微服务或数据库。外部系统或数据库中的数据不可靠，将来可能会改变。将来如果您想测试此功能，您可能需要再次设置此数据或验证它。在我看来，这种数据设置如果不是最初的，而是长期的，将会比编写一次单元测试花费更长的时间。每当您想要测试这些功能时，您还需要参考业务需求。</p><p id="e683" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您还可以编写集成测试和模拟测试数据。但是为每个业务需求运行集成测试将会花费更长的时间。集成测试会增加服务器的部署时间。我认为集成测试虽然重要，但不应该测试项目中的所有东西。</p><p id="bf80" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，您的代码审查人员可能会要求您对您的拉请求进行一些重构。同样，在重构完成后，您需要测试需求。</p><p id="6f7f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，简而言之，如果你和你的团队非常自信，并且遵循开发期间不测试的文化，那么单元测试可以被忽略以节省时间。尽管测试是软件开发中极其重要的一部分，不应该被忽视。</p><h1 id="ea81" class="lk lf in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">单元测试有助于节省测试时间</h1><p id="d5db" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">以下是对上述要求的测试。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="803c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">完整的测试可以在<a class="ae ky" href="https://github.com/sunnymattas/price-calculator/blob/master/src/test/java/com/price/calculator/PriceTest.java" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">这里找到</strong> </a>。上面的每个测试都验证了一个要求。每个测试名称解释了它正在测试的需求。现在测试意味着只是运行这些单元测试，这将需要几毫秒的时间。尽管最初需要编写测试，但是你可以自由地重构你的代码，而不需要重复的手工测试。单元测试将确保不会引入错误。如果你想增加新的需求或者修复bug，你只需要增加新的测试。您不需要测试以前实现的需求。</p><p id="0ab9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">退化的风险也小得多。所有的需求都以单元测试的形式记录在文档中，供开发人员使用，他们将在将来从事这个模块的工作。基于共同的理解，测试的命名模式应该在团队内部保持一致。在我看来，这无疑会节省开发时间。</p><h1 id="c366" class="lk lf in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">TDD使单元测试更加有效</h1><p id="250e" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">TDD是测试优先的方法。这意味着您首先为一个应该失败的需求编写一个测试。然后，您实现相应业务需求，以便只通过那一个测试。然后，如果测试失败，您再次编写第二个测试及其相应的需求。你不断重复这个循环，直到所有的需求都被实现。我认为这是编写单元测试的有效方法，因为你最终会为所有的需求编写单元测试。此外，您也不会编写不必要的单元测试或代码。</p><p id="2e96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">TDD还使开发人员能够一次专注于每个需求。这在解决复杂问题时非常有用。</p><h1 id="75ca" class="lk lf in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">编写单元测试时要记住的事情</h1><ul class=""><li id="f6ae" class="mo mp in jm b jn mh jr mi jv mq jz mr kd ms kh mt mu mv mw bi translated">单元测试应该测试业务需求，而不是你的类、方法等。</li><li id="b11b" class="mo mp in jm b jn mx jr my jv mz jz na kd nb kh mt mu mv mw bi translated">在模块或子模块级别编写单元测试。</li><li id="272d" class="mo mp in jm b jn mx jr my jv mz jz na kd nb kh mt mu mv mw bi translated">尽可能少地嘲笑数据。模拟系统边缘的数据，如来自缓存、微服务、数据库等的响应。</li><li id="6636" class="mo mp in jm b jn mx jr my jv mz jz na kd nb kh mt mu mv mw bi translated">单元测试不应该包含任何逻辑。不要在单元测试中创建循环、if-else条件、开关等。</li><li id="7be4" class="mo mp in jm b jn mx jr my jv mz jz na kd nb kh mt mu mv mw bi translated">复杂的单元测试可能意味着设计味道。</li></ul><p id="d9d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">完整的代码可以在<a class="ae ky" href="https://github.com/sunnymattas/price-calculator" rel="noopener ugc nofollow" target="_blank">这里</a>找到。感谢阅读</p></div></div>    
</body>
</html>