<html>
<head>
<title>How to Create a CI/CD pipeline using AWS CodePipeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用 AWS 代码管道创建 CI/CD 管道</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-create-a-ci-cd-pipeline-using-aws-codepipeline-fcfeb7bcb6e7?source=collection_archive---------2-----------------------#2022-02-18">https://blog.devgenius.io/how-to-create-a-ci-cd-pipeline-using-aws-codepipeline-fcfeb7bcb6e7?source=collection_archive---------2-----------------------#2022-02-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1d70316186f37530ed198e3b681c3ce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LmS7ZVk0etaJZZxTnSiABA.png"/></div></div></figure><p id="642c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">什么是 AWS CodePipeline？<br/> <strong class="jx io"> AWS CodePipline </strong>是一项持续的交付服务，有助于简化您的软件发布流程。</p><p id="2d58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">什么是 CI/CD？<br/> <strong class="jx io">持续集成和持续交付</strong>是一系列旨在简化应用程序开发的自动化步骤。这是通过管道实现的。</p><p id="300a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">好处:<br/> 1。测试和发布代码是自动化的<br/> 2。应用可以快速发展以满足您客户的需求<br/> 3。轻松适应不断变化的市场</p><p id="bfee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">目标</strong>:使用更新 GitHub repo 时触发的 AWS Codepipeline 创建 CI/CD 管道。管道应该包括一个构建来测试代码，然后它应该部署到一个 S3 静态站点。<br/> <em class="kt">我将在 GitHub 中使用一个角度应用</em>。</p><blockquote class="ku kv kw"><p id="b230" class="jv jw kt jx b jy jz ka kb kc kd ke kf kx kh ki kj ky kl km kn kz kp kq kr ks ig bi translated"><strong class="jx io"> <em class="in">先决条件:</em> </strong> <br/> GitHub 账号<br/> AWS 账号<br/>源代码</p></blockquote><h1 id="05d4" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤 1:创建一个 S3 存储桶</h1><p id="a4dc" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">首先，我们需要登录 AWS 并创建一个 S3 桶，应用程序将被托管在这里。登录后在上面的搜索栏中搜索 S3，然后点击<strong class="jx io">“创建桶”</strong>。</p><ol class=""><li id="2ed3" class="md me in jx b jy jz kc kd kg mf kk mg ko mh ks mi mj mk ml bi translated">创建全局唯一的名称</li><li id="fd0b" class="md me in jx b jy mm kc mn kg mo kk mp ko mq ks mi mj mk ml bi translated">取消选中“阻止所有公共访问”</li></ol><h1 id="271d" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤 2:创建 AWS 代码管道</h1><p id="5f0e" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">在上面的搜索栏中搜索 CodePipeline，然后<strong class="jx io">点击“创建管道”</strong>。您需要创建一个管道名称，并选择一个新的服务角色来访问管道。</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/33cbe82524d70a4aa6415453f3f48e13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ph0C__--MXtPztooyHdvog.png"/></div></div></figure><h1 id="88a5" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤 3:选择 GitHub 作为您的源代码提供者</h1><p id="0171" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">您需要选择承载代码的位置。<strong class="jx io">点击【连接 Github】</strong>登录授权。我将选择我在 GitHub 中分叉的库和分支。之后<strong class="jx io">点击【下一步】</strong>。</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/c4014b49a24cceef4a130e2307312858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SfJ-6oEI65ljfccFl-lB3w.png"/></div></div></figure><h1 id="ea18" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤 4:添加构建阶段</h1><p id="e91c" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">你需要这个来构建你的应用！</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/ea1f3b544054f5a41dc2753510f7b2ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SgrW7LJXuUh92mTQJAOwsg.png"/></div></div></figure><p id="184f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择 AWS CodeBuild 作为构建提供程序。最后，<strong class="jx io">点击【创建项目】</strong>。</p><h1 id="83fd" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">步骤 5:创建 AWS 代码构建项目</strong></h1><p id="be16" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">为 CodeBuild 项目选择一个新的项目名称，并使用以下设置:</p><ul class=""><li id="727f" class="md me in jx b jy jz kc kd kg mf kk mg ko mh ks my mj mk ml bi translated"><strong class="jx io">环境镜像:</strong> <em class="kt">管理镜像</em></li><li id="9f4b" class="md me in jx b jy mm kc mn kg mo kk mp ko mq ks my mj mk ml bi translated"><strong class="jx io">操作系统:</strong>T39】Ubuntu</li><li id="9f45" class="md me in jx b jy mm kc mn kg mo kk mp ko mq ks my mj mk ml bi translated"><strong class="jx io">运行时:</strong> <em class="kt">标准</em></li><li id="dd53" class="md me in jx b jy mm kc mn kg mo kk mp ko mq ks my mj mk ml bi translated"><strong class="jx io">图片:</strong><em class="kt">AWS/code build/standard:4.0</em></li><li id="8b68" class="md me in jx b jy mm kc mn kg mo kk mp ko mq ks my mj mk ml bi translated"><strong class="jx io">镜像版本:</strong> <em class="kt">始终使用该运行时版本的最新镜像</em></li><li id="c274" class="md me in jx b jy mm kc mn kg mo kk mp ko mq ks my mj mk ml bi translated"><strong class="jx io">服务角色:</strong> <em class="kt">新服务角色</em></li></ul><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/5dc731c874c4848a82798be4aec62caa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QK_Ao8LUrMygAXc-vdA7LA.png"/></div></div></figure><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/e1a8ce5247d19c2e4a1ac2322c9fbbca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vdIoWO-vHnA-KXcsMKT5bg.png"/></div></div></figure><p id="4ffe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">点击【继续管道】</strong>。</p><h1 id="3246" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">步骤 6:添加部署阶段 S3</h1><p id="2db8" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">选择 Amazon S3 作为您的部署提供商、您当前所在的地区以及您开始时创建的托管网站的存储桶。确保勾选底部的“部署前提取文件”!</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/9e328bfaf1ef6f5d29c465a34d239ee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9pu6hdUpZZ4dSn4RVineDA.png"/></div></div></figure><p id="b563" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">点击【下一步】</strong>，在下一页点击<strong class="jx io">【创建管道】</strong>。</p><h1 id="b41f" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">第七步:测试一下！</strong></h1><p id="eb78" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">发射后，它不会工作。您将得到下面的错误。</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/497fca9a809c53b213a2e0b252c2151b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EuA1oNPXGabOucd5epYBYw.png"/></div></div></figure><p id="c45a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要更新 S3 桶下的权限。使用以下代码插入到存储桶策略中:</p><pre class="ms mt mu mv gt nd ne nf ng aw nh bi"><span id="8af8" class="ni lb in ne b gy nj nk l nl nm">{<br/>  "Version": "2012-10-17",<br/>  "Statement": [<br/>    {<br/>      "Sid": "PublicReadGetObject",<br/>      "Effect": "Allow",<br/>      "Principal": "*",<br/>      "Action": [<br/>        "s3:GetObject"<br/>      ],<br/>      "Resource": "arn:aws:s3:::YOUR-BUCKET-NAME/*"<br/>    }<br/>  ]<br/>}</span></pre><p id="90f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们应该可以访问我们的静态网站了。转到您的桶的属性选项卡下的静态网站托管。</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/3a07b7a34d02188a0b2b84521c5dd6e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*X4Ko0EFdd2CSnjyOy42rLQ.png"/></div></figure><p id="cea0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，转到 GitHub 存储库并更新代码。我加了一句<strong class="jx io">“雇佣迈克尔·威廉斯！”</strong></p><p id="fb55" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">刷新您的浏览器，您应该会看到您在 GitHub 资源库中所做的任何更改！</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/d99434d09a29db5c0d5a8086032d9dd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*c2soQegeY3aCO6qdBa9HyQ.png"/></div></div></figure><p id="c2cb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">恭喜你成功了！您使用 AWS CodePipeline 创建了一个 CI/CD 管道，它是由对 GitHub 存储库的更新触发的。</p></div></div>    
</body>
</html>