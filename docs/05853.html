<html>
<head>
<title>Build Web-Scrapper using node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 node.js 构建 Web-Scrapper</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/build-web-scrapper-using-node-js-40438757661d?source=collection_archive---------6-----------------------#2021-11-09">https://blog.devgenius.io/build-web-scrapper-using-node-js-40438757661d?source=collection_archive---------6-----------------------#2021-11-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3ecc370d5c6dc4e61df7b125cdfde9d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6zS9q1HRS9gQT8adev3KVQ.png"/></div></div></figure><p id="854c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你好，太棒了😎今天的读者在这篇文章中，我将教你如何使用 Node.js 构建一个简单而神奇的 web scraper。</p><p id="454d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，如果没有，首先设置您的节点开发环境。如果你已经得到了祝贺🎉你已经准备好进入下一步了…</p><p id="5a8b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">进入技术层面👨‍💻东西…</p><p id="62fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们需要一些包装。</p><ul class=""><li id="3203" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated"><a class="ae lc" href="https://www.npmjs.com/package/axios" rel="noopener ugc nofollow" target="_blank"> Axios </a></li><li id="03d4" class="kt ku in jx b jy ld kc le kg lf kk lg ko lh ks ky kz la lb bi translated"><a class="ae lc" href="https://www.npmjs.com/package/cheerio" rel="noopener ugc nofollow" target="_blank">再见</a></li></ul><p id="b6fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">看完这些包的名字后，这个问题肯定会让你想到这些包是用来做什么的，所以我会给你简单而准确的定义。</p><p id="610a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">axios——浏览器和 node.js 的基于 Promise 的 HTTP 客户端</p><p id="9f34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">cheerio——专为服务器设计的快速、灵活和精简的核心 jQuery 实现。</p><p id="33a3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以，让我们从真正的交易开始…</p><p id="5f85" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开你的任何首选编辑器/IDE 我使用 Visual Studio 代码，因为它很容易使用，这就是为什么…</p><p id="e71b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在编辑器中打开一个终端，输入命令-</p><p id="e534" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe li lj lk ll b">npm init</code></p><p id="cf1f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">之后，您将看到一个 package.json 文件将被创建，它将保存关于该包及其版本的所有配置，我不会在这个包文件中做太深入的讨论，那是另一篇文章的内容。</p><p id="8176" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开 Package.json 文件，您会看到一个带花括号的脚本对象，如下所示</p><pre class="lm ln lo lp gt lq ll lr ls aw lt bi"><span id="4f32" class="lu lv in ll b gy lw lx l ly lz">"scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  }</span></pre><p id="37b4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在脚本对象中，将对象更改为启动对象，如下所示</p><pre class="lm ln lo lp gt lq ll lr ls aw lt bi"><span id="6d5d" class="lu lv in ll b gy lw lx l ly lz">"scripts": {<br/>    "start": "nodemon index.js"<br/>  }</span></pre><p id="9aae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">看完这个你会问我为什么加这个，会发生什么？</p><p id="a859" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，添加这个文件后，您可以运行 index.js 文件</p><p id="d7e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你发现有 nodemon 错误，试着先安装它，然后试着运行</p><pre class="lm ln lo lp gt lq ll lr ls aw lt bi"><span id="a648" class="lu lv in ll b gy lw lx l ly lz">npm i nodemon</span></pre><p id="bcfa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后创建 javascript 文件 index.js，让我们开始编码。</p><p id="3f27" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先安装软件包。Axios 和 cheerio，使用以下命令:-</p><pre class="lm ln lo lp gt lq ll lr ls aw lt bi"><span id="ca3a" class="lu lv in ll b gy lw lx l ly lz">npm i axios</span><span id="f871" class="lu lv in ll b gy ma lx l ly lz">npm i cheerio</span></pre><p id="000d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装软件包后，首先使用 const 导入软件包</p><pre class="lm ln lo lp gt lq ll lr ls aw lt bi"><span id="24ce" class="lu lv in ll b gy lw lx l ly lz">const axios = require('axios')<br/>const cheerio = require('cheerio')</span></pre><p id="2313" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后创建一个包含你想要抓取的网站链接的变量名 url，我在本教程中使用的是<a class="ae lc" href="https://www.theguardian.com/uk" rel="noopener ugc nofollow" target="_blank"> The Guardians news </a>。</p><p id="9d9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用 Axios，我们从 URL 获取数据。</p><pre class="lm ln lo lp gt lq ll lr ls aw lt bi"><span id="9b51" class="lu lv in ll b gy lw lx l ly lz">const url ='https://www.theguardian.com/uk'<br/>axios(url)<br/>    .then(response =&gt;{<br/>        const html = response.data<br/>        const ele =cheerio.load(html)<br/>        const article =[]</span></pre><p id="313a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用 cheerio，我们操作我们想要的数据类型，我们创建了包含数据的 ele 变量和包含从 URL 获取的数据列表的数组。</p><p id="c58f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们使用包含数据的 ele 变量</p><pre class="lm ln lo lp gt lq ll lr ls aw lt bi"><span id="ffb7" class="lu lv in ll b gy lw lx l ly lz">ele('.fc-item__title', html).each(function(){<br/>           const title = ele(this).text()<br/>           const url = ele(this).find('a').attr('href')<br/>            article.push({<br/>                title,<br/>                url<br/>            })<br/>        })</span><span id="4ac2" class="lu lv in ll b gy ma lx l ly lz">       console.log(article)</span></pre><p id="d2e5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，访问网站，因为你应该知道你想要什么类型的数据，所以你会看到文章列表，选择任何文章，检查元素，并从开发工具中找到 div 名称。</p><p id="6389" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">虽然我终于找到了 div 的名字。你可以在代码中看到。fc-item__title，我们使用每个函数来迭代数据集合。</p><p id="e209" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以看到两个变量，其中包含标题和 URL，在这一行之后，你可以看到我们在文章中使用的 push 函数。因此，我们将标题和 URL 推送到包含提取数据的文章。在底部，您会看到输出数据的 console.log()。</p><p id="55a2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完整的代码，如果你坚持❤</p><pre class="lm ln lo lp gt lq ll lr ls aw lt bi"><span id="7b6b" class="lu lv in ll b gy lw lx l ly lz">const axios = require('axios')<br/>const cheerio = require('cheerio')</span><span id="a27f" class="lu lv in ll b gy ma lx l ly lz">const url ='https://www.theguardian.com/uk'<br/>axios(url)<br/>    .then(response =&gt;{<br/>        const html = response.data<br/>        const ele =cheerio.load(html)<br/>        const article =[]<br/></span><span id="7f66" class="lu lv in ll b gy ma lx l ly lz">        ele('.fc-item__title', html).each(function(){<br/>           const title = ele(this).text()<br/>           const url = ele(this).find('a').attr('href')<br/>            article.push({<br/>                title,<br/>                url<br/>            })<br/>        })</span><span id="4a81" class="lu lv in ll b gy ma lx l ly lz">       console.log(article)</span><span id="d6af" class="lu lv in ll b gy ma lx l ly lz">    }).catch(err=&gt; console.log(err) )</span></pre><p id="076a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">希望这篇文章对你有所帮助，如果对你有帮助，请在评论框中发表你的意见，也请关注并点赞👍</p></div></div>    
</body>
</html>