<html>
<head>
<title>SAC ’22 Code Challenge 5 Junior P4 — Course Requirements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SAC '22 代码挑战 5 少年 P4 —课程要求</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sac-22-code-challenge-5-junior-p4-course-requirements-c314000ba8b1?source=collection_archive---------7-----------------------#2022-11-29">https://blog.devgenius.io/sac-22-code-challenge-5-junior-p4-course-requirements-c314000ba8b1?source=collection_archive---------7-----------------------#2022-11-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="ae69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我遇到了另一个图论问题。<a class="ae ki" href="https://dmoj.ca/problem/sac22cc5jp4" rel="noopener ugc nofollow" target="_blank">这个问题</a>要求我们找到一种订购课程的方法，以便满足先决条件。基本上，给你一个有向图，你必须找出一个顺序，在这个顺序中，所有的节点都被访问，同时考虑到先决条件。</p><p id="46b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">假设你还没有注意到这一点，这是一个经典的拓扑排序问题，其中每个节点必须出现在它所指向的节点之前。让我们复习一下什么是拓扑排序。</p><p id="f542" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">基本上，每个节点都有一个度数。索引是指向该节点的节点数。例如，如果节点 1 和节点 3 指向节点 2，则节点 2 的度数为 2。这是因为有两个节点指向它。这可以用 hashmap 结构来表示。接下来，对于拓扑排序，我们需要使用优先级队列。在优先级队列中，顺序很重要，因此在本例中，我们按照升序对其进行排序。然后，从那里开始，我们添加所有索引为 0 的节点，因为这些是外部节点，这意味着它们没有先决条件。</p><p id="0e8c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，在插入所有索引度为 0 的节点后，我们可以开始类似于广度优先搜索的操作。当队列中有项目时，我们循环，从顶部弹出，并遍历连接到当前节点的每个节点。然而，在这种情况下，我们对遍历到下一个节点的限制是，它的索引必须为 1。这是因为当它的索引为 1 并且跟在我们的当前节点之后时，先决条件是我们可以“删除”的当前节点。这将给出图的拓扑排序。</p><p id="d7aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们用一些 C++代码来实现它。拓扑排序的代码如下所示:</p><pre class="kj kk kl km gt kn ko kp bn kq kr bi"><span id="b291" class="ks kt in ko b be ku kv l kw kx">vector&lt;int&gt; topsort(map&lt;int, set&lt;int&gt;&gt; graph, map&lt;int, int&gt; indegree, int N) {<br/> vector&lt;int&gt; ans;<br/> priority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt;q;<br/> for (int i = 0; i &lt;= N; i++) {<br/>  if (indegree[i] == 0) {<br/>   q.push(i);<br/>  }<br/> }<br/> <br/> while (!q.empty()) {<br/>  int current = q.top();<br/>  q.pop();<br/>  ans.push_back(current);<br/>  for (auto next : graph[current]) {<br/>   if (--indegree[next] == 0) {<br/>    q.push(next);<br/>    <br/>   }<br/>  }<br/> }<br/> return ans;<br/>}</span></pre><p id="863b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">其中 ans 数组是存储拓扑排序的数组。然后，该函数将图作为输入(以 hashmap 格式表示)、图的索引和大小。然后在最后返回拓扑排序。然后我们有了主函数。</p><p id="47e3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为我们处理的是 DAG，所以我们必须这样表示它。接下来，您可以看到，仅在第二个节点上，索引增加。然后我们运行拓扑排序，然后打印出答案。</p><pre class="kj kk kl km gt kn ko kp bn kq kr bi"><span id="1892" class="ks kt in ko b be ku kv l kw kx">int main()<br/>{<br/> int N;<br/> cin &gt;&gt; N;<br/> map&lt;int, set&lt;int&gt;&gt; graph;<br/> map&lt;int, int&gt; indegree;<br/> for (int i = 1; i &lt;= N; i++) {<br/>  int t1;<br/>  cin &gt;&gt; t1;<br/>  for (int k = 0; k &lt; t1; k++) {<br/>   int t2;<br/>   cin &gt;&gt; t2;<br/>   graph[t2].insert(i);<br/>   indegree[i]++;<br/>  }<br/> }<br/> vector&lt;int&gt; ans = topsort(graph, indegree, N);<br/> for (int i = 1; i &lt; ans.size(); i++) {<br/>  cout &lt;&lt; ans[i] &lt;&lt; " ";<br/> }<br/><br/>}</span></pre><p id="d5cb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你认为这是有用的，请留下赞，并在下面评论任何你想回答的问题。</p><figure class="kj kk kl km gt kz gh gi paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="gh gi ky"><img src="../Images/fdc57300e389f510ad3e61b7498730b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5TQRZakp51KuwpBqt5R1w.png"/></div></div></figure></div></div>    
</body>
</html>