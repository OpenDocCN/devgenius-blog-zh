<html>
<head>
<title>Airflow, there’s a new competitor in town.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">气流，镇上有了新的竞争对手。</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/airflow-theres-a-new-competitor-in-town-d59b48a642ff?source=collection_archive---------2-----------------------#2022-02-05">https://blog.devgenius.io/airflow-theres-a-new-competitor-in-town-d59b48a642ff?source=collection_archive---------2-----------------------#2022-02-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6afe" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用 Prefect 让您的数据管道编排面向未来。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e54faf68ee3a8417597ebfd42eb8cb1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pTgjWv9ot-vkDnSp"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Boris Stefanik 在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="32c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我刚刚在一家伟大的公司开始了一个新的职位，我们正在重新评估我们的选择。为了提供一些背景，我们在 Azure 中，并且正在使用 Azure 数据工厂。我们对这种设置不太满意，因为我们没有大量的历史数据，并且监控显示有故障，例如管道在实际发生故障时是成功的。我们的选择？气流还是提督。</p><p id="2cd4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，气流也很糟糕。作为曾经使用过它的人，设置 airflow 服务器不是一件容易的事情，dag 必须与服务器同步，然后才能测试它是否工作。Dag 不是以 pythonic 方式设置的，并且不允许在任务之间轻松传输数据，除非您设置了 XCOM。最后，我们的代码被推向气流。</p><p id="1269" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这让我们感觉很好..和提督一起。哦，天哪，这完全改变了我对工作流管理的看法。</p><p id="5c79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们回顾一下选择提督的四大理由</p><ol class=""><li id="b61d" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">简约</strong></li><li id="15b1" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">测试能力</strong></li><li id="d22e" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">他们多样化的基础设施模式</strong></li><li id="cf94" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">开源社区</strong></li><li id="86ce" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><strong class="ky ir">免费(绝大部分)</strong></li></ol></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><ol class=""><li id="0202" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><strong class="ky ir">简单性</strong></li></ol><p id="86f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">任务和流程的设置类似于 Python 中的设置。你也可以添加装饰者。我从他们的 GitHub 页面上取了这个例子来展示它的简单性。</p><pre class="kg kh ki kj gt mn mo mp mq aw mr bi"><span id="4a2d" class="ms mt iq mo b gy mu mv l mw mx">from prefect import task, Flow, Parameter<br/><br/><br/>@task(log_stdout=True)<br/>def say_hello(name):<br/>    print("Hello, {}!".format(name))<br/><br/><br/>with Flow("My First Flow") as flow:<br/>    name = Parameter('name')<br/>    say_hello(name)<br/><br/><br/>flow.run(name='world') # "Hello, world!"<br/>flow.run(name='Marvin') # "Hello, Marvin!"</span></pre><p id="9c8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 2。测试能力</strong></p><p id="087c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">他们绝对相信测试。他们的平台有大量针对他们自己平台的测试，无论你是否想知道他们在他们的流程或任务上运行什么测试(更多细节见<a class="ae kv" href="https://github.com/PrefectHQ/prefect/tree/master/tests" rel="noopener ugc nofollow" target="_blank">这里</a>)。</p><p id="b338" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但这还不是全部。您可以轻松地将您自己的测试添加到任务和流程中。</p><pre class="kg kh ki kj gt mn mo mp mq aw mr bi"><span id="aa89" class="ms mt iq mo b gy mu mv l mw mx"><strong class="mo ir"><em class="my">from</em></strong> prefect <strong class="mo ir"><em class="my">import</em></strong> Task, Flow<br/><br/><strong class="mo ir"><em class="my">class</em></strong> <strong class="mo ir">Extract</strong>(Task):<br/>    <strong class="mo ir"><em class="my">def</em></strong> <strong class="mo ir">run</strong>(self):<br/>        <strong class="mo ir"><em class="my">return</em></strong> 10<br/><br/><strong class="mo ir"><em class="my">class</em></strong> <strong class="mo ir">Load</strong>(Task):<br/>    <strong class="mo ir"><em class="my">def</em></strong> <strong class="mo ir">run</strong>(self, x):<br/>        <strong class="mo ir"><em class="my">print</em></strong>(x)<br/><br/>flow <strong class="mo ir">=</strong> Flow("testing-example")<br/><br/>e <strong class="mo ir">=</strong> Extract()<br/>l <strong class="mo ir">=</strong> Load()<br/><br/>flow.add_edge(upstream_task<strong class="mo ir">=</strong>e, downstream_task<strong class="mo ir">=</strong>l, key<strong class="mo ir">=</strong>"x")</span><span id="1da3" class="ms mt iq mo b gy mz mv l mw mx">#Added this test for the example</span><span id="5eb7" class="ms mt iq mo b gy mz mv l mw mx">state <strong class="mo ir">=</strong> flow.run()<br/><strong class="mo ir"><em class="my">assert</em></strong> state.result[e].result <strong class="mo ir">==</strong> 10</span></pre><p id="d19a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">需要更多例子吗？这是测试文件。</p><p id="d616" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">他们还集成了数据构建工具(dbt)、远大前程等。这些库允许您轻松地测试已经创建的代码。</p><p id="ad58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 3。不同的基础设施模式</strong></p><p id="0461" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">无论基础设施是运行在完美的云还是完美的核心，代码都不会离开您的环境。</p><p id="426a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://docs.prefect.io/orchestration/faq/dataflow.html#how-is-data-persisted" rel="noopener ugc nofollow" target="_blank">他们的文档</a>也明确谈到了在什么情况下，Prefect 保存数据，并为<a class="ae kv" href="https://www.prefect.io/why-prefect/case-studies/" rel="noopener ugc nofollow" target="_blank"> Actium Health </a>提供了案例研究。</p><p id="e56c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 4。开源社区</strong></p><p id="63fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你将有一个开源的、有回应的社区来问问题。我个人已经查看了他们的 Slack 频道寻求建议，也查看了他们的 Github 和涵盖多种场景的文章。</p><p id="45e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">提督有 200 多个投稿人。但是如果您缺少一个，可以随意添加代码并提供一个集成？请随意创建集成，它们也可用于 PRs 的新功能。</p><p id="63c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> 5。免费(绝大部分)</strong></p><p id="2329" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Prefect 最棒的地方在于，它允许你每月免费使用该服务多达 20，000 次。没错。这意味着你作为一个开发者或小企业可以免费使用这项服务。</p><p id="8e1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">参考文献</strong></p><ol class=""><li id="fdf6" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated"><a class="ae kv" href="https://github.com/prefecthq/prefect" rel="noopener ugc nofollow" target="_blank">https://github.com/prefecthq/prefect</a></li><li id="e69a" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://www.prefect.io/pricing/" rel="noopener ugc nofollow" target="_blank">https://www.prefect.io/pricing/</a></li><li id="5673" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://medium.com/the-prefect-blog/the-prefect-hybrid-model-1b70c7fd296" rel="noopener">https://medium . com/the-prefect-blog/the-prefect-hybrid-model-1b 70 c 7 FD 296</a></li><li id="248f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://medium.com/geekculture/prefect-could-be-perfect-a318b9b1ad6e" rel="noopener">https://medium . com/geek culture/prefect-can-be-perfect-a 318 b 9 B1 ad 6 e</a></li></ol></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="a8a0" class="na mt iq bd nb nc nd ne nf ng nh ni nj jw nk jx nl jz nm ka nn kc no kd np nq bi translated"><strong class="ak">TL；博士</strong></h1><p id="27e7" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">Prefect 是一个优秀的工作流管理和编排工具，它鼓励测试和可靠性。</p><p id="5294" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你还在等什么？让我们一起创造完美的流量。</p></div></div>    
</body>
</html>