# 在 Go 中排序数据

> 原文：<https://blog.devgenius.io/sorting-data-in-go-29080fbc8009?source=collection_archive---------3----------------------->

![](img/930e6dc432014b8f07cf5b355a828019.png)

这是我每周系列*学围棋*的第十篇。上周我谈到了 Go 中的[指针、编组和解组数据。本周我将讨论如何在围棋程序中对数据进行排序。我们开始吧。](https://www.martincartledge.io/pointers-json-marshal-and-unmarshal-in-go/)

我将向您展示如何对数据进行排序的多个示例，这些示例可以分为两类:

*   使用`sort`包
*   编写自定义排序函数

# 使用排序包

*   可以与内置类型(`string`、`int`等)以及用户定义的类型一起使用
*   分类是“就地”进行的。例如，对一个`slice`的改变不会返回一个新的`slice`
*   与 JavaScript 中的`array`方法`sort`非常相似，Go 中的`sort`包比较 ASCII 值进行`string`排序

让我们试着排序一个`string`:

在我们的`func` `main`中，我们用标识符`str`创建了一个新变量

`str`的值是类型为`string`的值的`slice`。我们使用一个*复合文字*来分配这些值

然后我们使用`sort`包来调用`Strings`方法，并将`str`变量作为唯一的参数传递

> 注:`sort`方法是针对其内置类型的，即`string`->-`Strings`、`int` - >、`Ints`等。

我们使用`fmt`包打印结果，我们可以看到`str`的值现在已经被正确排序了

让我给你看一个对类型`int`的值进行排序的例子

在我们的`func` `main`中，我们用标识符`ints`创建了一个新变量

`ints`的值是`int`类型值的`slice`。我们使用一个*复合文字*来分配这些值

然后我们使用`sort`包调用`Ints`方法，并将`ints`变量作为唯一的参数传递

我们使用`fmt`包打印结果，我们可以看到`ints`的值现在已经被正确排序了

但是如果你需要更深入的东西，或者定制的东西呢？你当然可以在围棋中轻松做到这一点。让我给你展示一些自定义排序函数的例子，它们可以给你的程序增加很多价值。

# 自定义排序函数

让我们直接看一个例子

为了进行排序，我们必须确保导入了`sort`包

接下来，我们创建一个带有标识符`Person`的自定义类型，它的类型是`struct`

我们的`Person`类型的字段有:`string`类型的`First`和`int`类型的`Age`

我们创建另一个带有标识符`ByAge`的定制类型，它是我们另一个定制类型`Person`的`slice`

接下来，我们创建三个函数，它们都采用一个类型为的*接收器，标识符为类型为`ByAge`的`a`。*

> *注意:我们必须创建这三个函数，因为* `*Sort*` *函数调用一个* `*Len*` *函数来确定长度，然后调用* `*Less*` *和* `*Swap*` *。你可以在* [*官方围棋文档*](https://golang.org/pkg/sort/#Sort) 中了解更多信息

让我们从`Len`开始，浏览我创建的每一个函数

如前所述，该函数有一个类型为的*接收器，其标识符为`a`，类型为`ByAge`*

该功能的标识符为`Len`

我们传递从我们的*接收器*提供的`a`的值，作为我们从`Len`得到的`return`函数的唯一参数

接下来，我们创建`Swap`函数

与`Len`函数非常相似，`Swap`有一个*接收器类型*，标识符为`a`，类型为`ByAge`

`Swap`函数有两个参数`i`和`j`，都是`int`类型

在`Swap`内部，我们看到每次调用`Swap`时，我们都在*交换*值的顺序

值`a[i]`将被值`a[j]`替换，值`a[j]`将被值`a[i]`替换

`Sort`需要的最后一个函数是`Less`函数

`Less`功能有一个类型为的*接收器，其标识符为`a`，类型为`ByAge`*

`Less`函数有两个参数，`i`和`j`，都是`int`类型

`Less`函数返回一个`bool`类型的值

> 注意:该排序功能的目的是根据`Age`字段的值从最年轻到最老排序

在`return`语句中，我们看到我们正在编写一个检查`a[j].Age`是否大于`a[i].Age`的表达式

这是最后一步，帮助`Sort`功能确定哪些值应该使用“交换”功能进行交换

在`func`

我们创建一个标识符为`family`的新变量，它将是`Person`类型值的`slice`类型

我们用一个复合文字给`family`赋值

接下来，我们将`family`变量转换为自定义类型`ByAge`，这样我们就可以利用我们创建的函数，这些函数都有*接收器类型*和`ByAge`

我们将这个`ByAge(family)`值作为唯一的参数传递给`Sort`函数

在下一行，我们使用`fmt`包来打印`family`的值

就在那里！现在我们的数据从最年轻到最老排序。

# 概括起来

对数据进行排序是极其常见的事情；因此，知道如何在 Go 中有效且高效地排序数据是至关重要的。我希望您学到了一些关于使用`sort`包或编写自己的定制排序函数的知识。下周我将讨论 Go 中的*并发。到时候见！*