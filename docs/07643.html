<html>
<head>
<title>Convert Text to Speech with JavaScript Using the Web Speech API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Web Speech API 通过 JavaScript 将文本转换为语音</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/convert-text-to-speech-with-javascript-using-the-web-speech-api-97bc2a9df75d?source=collection_archive---------5-----------------------#2022-04-12">https://blog.devgenius.io/convert-text-to-speech-with-javascript-using-the-web-speech-api-97bc2a9df75d?source=collection_archive---------5-----------------------#2022-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f256" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何用几行 JavaScript 轻松地将文本转换成语音。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5046d36b464607f5c29e82403fcd59a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zMEJPMaPS2O04KqaCpgYNQ.jpeg"/></div></div></figure><p id="a88c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您还没有听说过 Web Speech API，现在是了解更多信息并看看您可以用它来做什么的好时机。在本文中，我将向您展示如何开始使用它。</p><p id="0753" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Web Speech API 是一个本地 API，可以用来在应用程序中将文本转换成语音。现在几乎每个主流浏览器都支持该 API，这意味着我们可以开始使用该 API，而不是依赖于 polyfills 和变通方法。</p><p id="413f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用 Web Speech API 对于写博客或在 Web 应用程序上发表文章非常有用。一个很好的例子是这个网站，medium.com。每篇文章都由文本组成，这意味着我们实际上可以通过一点 JavaScript 让浏览器为我们大声朗读文本。让我们深入研究一下。</p><h1 id="61e3" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">使用 JavaScript 进行文本到语音转换</h1><p id="1df8" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在我们开始之前，我们需要有一个网页。对于这个基本示例，我们将创建一个简单的 HTML 文件:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="7d97" class="mp lo iq ml b gy mq mr l ms mt">&lt;!DOCTYPE html&gt;<br/>  &lt;html&gt;<br/><br/>  &lt;head&gt;<br/>    &lt;title&gt;Text to Speech&lt;/title&gt;<br/>    &lt;meta charset="UTF-8" /&gt;<br/>  &lt;/head&gt;<br/><br/>  &lt;body&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>  <br/>    &lt;script src="<strong class="ml ir">src/index.js</strong>"&gt;<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="cb30" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在在/src 文件夹中创建 Javascript 文件——将文件命名为<strong class="kt ir"> index.js </strong>。</p><p id="db6c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，要在屏幕上显示一些内容，我们将从简单的开始，只需在屏幕上添加一个简单的文本:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="0740" class="mp lo iq ml b gy mq mr l ms mt"><strong class="ml ir"><em class="mu">document</em></strong>.getElementById("app").innerHTML = `<br/>  &lt;h1&gt;Check this out!&lt;/h1&gt;<br/>  &lt;div&gt;<br/>   This is my text<br/>  &lt;/div&gt;<br/> `;</span></pre><p id="3797" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，如果您打开 index.html 文件，您应该会看到标题和文本。<br/>到目前为止，一切顺利。现在让我们进入更有趣的部分——我们现在将使用包含一些文本的变量替换硬编码的文本。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="347c" class="mp lo iq ml b gy mq mr l ms mt">const text =<br/>  "If you can hear this, you are experiencing text that is spoken by a computer with code. Cool, right?";</span><span id="cf7d" class="mp lo iq ml b gy mv mr l ms mt"><strong class="ml ir"><em class="mu">document</em></strong>.getElementById("app").innerHTML = `<br/>  &lt;h1&gt;Check this out!&lt;/h1&gt;<br/>  &lt;div&gt;<br/>   <strong class="ml ir">${text}</strong><br/>  &lt;/div&gt;<br/> `;</span></pre><p id="d0e2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们进一步深入，看看我们如何使用语音 API…</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="666a" class="mp lo iq ml b gy mq mr l ms mt">const text =<br/>  "If you can hear this, you are experiencing text that is spoken by a computer with code. Cool, right?";<br/><br/>const speakNow = () =&gt; {<br/>  // Check if Speech Synthesis supported<br/>  if ("speechSynthesis" in <strong class="ml ir"><em class="mu">window</em></strong>) {<br/>    const msg = new <strong class="ml ir"><em class="mu">SpeechSynthesisUtterance</em></strong>();<br/>    msg.text = text;<br/>    <strong class="ml ir"><em class="mu">window</em></strong>.speechSynthesis.speak(msg);<br/>  } else {<br/>    // Speech Synthesis Not Supported<br/>    alert("Sorry, your browser doesn't support text to speech!");<br/>  }<br/>};<br/><br/><strong class="ml ir"><em class="mu">document</em></strong>.getElementById("app").innerHTML = `<br/>  &lt;h1&gt;Check this out!&lt;/h1&gt;<br/>  &lt;div&gt;<br/>   ${text}<br/>  &lt;/div&gt;<br/> `;<br/><br/>speakNow();</span></pre><p id="138a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您运行上面的代码，文本变量现在应该会被大声朗读出来。看，这很简单，对吧？我们甚至可以扩展这个例子来使用不同的声音和语言。</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="2979" class="mp lo iq ml b gy mq mr l ms mt">const text =<br/>  "If you can hear this, you are experiencing text that is spoken by a computer with code. Cool, right?";</span><span id="ce55" class="mp lo iq ml b gy mv mr l ms mt"><strong class="ml ir">const speech = <em class="mu">window</em>.speechSynthesis;</strong><br/><br/>const speakNow = () =&gt; {<br/>  // Check if Speech Synthesis is supported<br/>  if ("speechSynthesis" in <strong class="ml ir"><em class="mu">window</em></strong>) {<br/>    const msg = new <strong class="ml ir"><em class="mu">SpeechSynthesisUtterance</em></strong>();</span><span id="e834" class="mp lo iq ml b gy mv mr l ms mt">    <strong class="ml ir">const voices = speech.getVoices();<br/>    msg.voice = voices[1]; <br/>    msg.lang = 'en-US';</strong></span><span id="8daa" class="mp lo iq ml b gy mv mr l ms mt">    msg.text = text;<br/>    <em class="mu">window</em>.speechSynthesis.speak(msg);<br/>  } else {<br/>    // Speech Synthesis Not Supported<br/>    alert("Sorry, your browser doesn't support text to speech!");<br/>  }<br/>};<br/><br/><strong class="ml ir"><em class="mu">document</em></strong>.getElementById("app").innerHTML = `<br/>  &lt;h1&gt;Check this out!&lt;/h1&gt;<br/>  &lt;div&gt;<br/>   ${text}<br/>  &lt;/div&gt;<br/> `;<br/><br/>speakNow();</span></pre><p id="1fef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">用粗体标记的是你可以用来获得不同声音和语言的附加代码。事实上，关于声音，有超过 20 种不同类型的声音和口音可以使用——查看这里的文档:</p><div class="mw mx gp gr my mz"><a href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance/voice" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">speechsynthesisatinterance . voice-Web API | MDN</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">SpeechSynthesisUtterance 接口的属性获取并设置将用于朗读的声音…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">developer.mozilla.org</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn kp mz"/></div></div></a></div><p id="28c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除了控制声音和语言，你还可以控制音调、速率和音量。您甚至可以通过实现暂停和恢复等功能来控制语音。在使用 Web Speech API 时，这为您提供了很大的灵活性。</p><p id="8c26" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就是这样。在短短几行 JavaScript 代码中，您已经实现了可以在应用程序中使用的这个超级棒的特性。如果你想看它的运行，请查看我的 CodeSandbox:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="f642" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢阅读，我希望你喜欢这篇文章，如果是的话，请点击按钮或订阅来支持我。</p><p id="414c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mu">附言:首先，你应该在收件箱里收到我的帖子。</em> <a class="ae nx" href="https://nickychristensen.medium.com/subscribe" rel="noopener"> <strong class="kt ir"> <em class="mu">做到这里</em> </strong> <em class="mu">！</em>T12】</a></p><p id="9083" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mu">其次，如果你自己喜欢体验媒介，可以考虑通过注册会员</em>  <em class="mu">来支持我和其他成千上万的作家</em> <a class="ae nx" href="https://nickychristensen.medium.com/membership" rel="noopener"> <strong class="kt ir"> <em class="mu">。</em></strong></a><em class="mu"/><strong class="kt ir"><em class="mu">【5】</em></strong><em class="mu">每月只需花费 5 美元，它极大地支持了我们这些作家，你也有机会用你的写作赚钱。通过这个链接</em>   <em class="mu">报名</em> <a class="ae nx" href="https://nickychristensen.medium.com/membership" rel="noopener"> <strong class="kt ir"> <em class="mu">，你就直接用你的一部分费用支持我，不会多花你多少钱。如果你这样做了，万分感谢。</em></strong></a></p><div class="mw mx gp gr my mz"><a href="https://javascript.plainenglish.io/how-to-conditionally-add-properties-to-an-object-with-javascript-in-2-minutes-7cce88b316b4" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">如何在 2 分钟内用 JavaScript 有条件地向对象添加属性</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">您是否曾经遇到过想要有条件地给对象添加属性的情况？有几种方法可以…</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ni l"><div class="ny l nk nl nm ni nn kp mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://javascript.plainenglish.io/10-tips-for-frontend-developers-9c0dfc705b88" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">前端开发人员的 10 个有用提示</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">通过这些技巧成为更好的前端开发人员。</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ni l"><div class="nz l nk nl nm ni nn kp mz"/></div></div></a></div><div class="mw mx gp gr my mz"><a href="https://javascript.plainenglish.io/how-to-become-a-great-developer-it-requires-more-than-being-able-to-write-code-d1f9e856f2dc" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd ir gy z fp ne fr fs nf fu fw ip bi translated">如何成为一名优秀的开发人员——这需要的不仅仅是会写代码</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">成为一名优秀的开发人员不仅仅是写干净、好的代码！</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ni l"><div class="oa l nk nl nm ni nn kp mz"/></div></div></a></div><p id="0cf6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mu">如果你想找个时间和我聊聊，可以关注我的</em><a class="ae nx" href="https://twitter.com/nickycdk" rel="noopener ugc nofollow" target="_blank"><em class="mu">Twitter</em></a><em class="mu">|</em><a class="ae nx" href="https://www.linkedin.com/in/dknickychristensen/" rel="noopener ugc nofollow" target="_blank"><em class="mu">LinkedIn</em></a>，<em class="mu">或者直接访问我的</em> <a class="ae nx" href="https://nickychristensen.dk/" rel="noopener ugc nofollow" target="_blank"> <em class="mu">网站</em> </a> <em class="mu">。</em></p><p id="fca1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mu">更多内容看</em> <a class="ae nx" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mu">说白了就是</em> </strong> </a> <em class="mu">。报名参加我们的</em> <a class="ae nx" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mu">免费周报</em> </strong> </a> <em class="mu">。关注我们关于</em><a class="ae nx" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="mu">Twitter</em></strong></a><em class="mu">和</em><a class="ae nx" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="mu">LinkedIn</em></strong></a><em class="mu">。加入我们的</em> <a class="ae nx" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="mu">社区不和谐</em> </strong> </a> <em class="mu">。</em></p></div></div>    
</body>
</html>