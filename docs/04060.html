<html>
<head>
<title>Laravel Data-Driven Strategies #1: setup A/B testing in your application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel数据驱动策略#1:在应用程序中设置A/B测试</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/laravel-data-driven-strategies-1-setup-a-b-testing-in-your-application-83eebf3a9499?source=collection_archive---------1-----------------------#2021-01-21">https://blog.devgenius.io/laravel-data-driven-strategies-1-setup-a-b-testing-in-your-application-83eebf3a9499?source=collection_archive---------1-----------------------#2021-01-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/f2b8ac6f8691c130b55c145689f4a395.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ir92AqMhLvSC0AjY"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@sigmund?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">西格蒙德</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><blockquote class="ka kb kc"><p id="a334" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ig bi translated">平面设计师:“到目前为止，我们已经建立了高度互动的UX，我们专注于为一个简单的东西取一个奇妙的名字，让它变得漂亮，有反应，有吸引力。”我花了4个小时实现它，并看到用户如何使用它:“那么为什么没人理解它？”</p></blockquote><p id="7012" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">我不知道你是否有过这样的对话，但接下来的第一反应就像⚡🎯💣💥突然有人出现，说他也设计了一个替代版本，但由于某些原因被拒绝。实现某个东西的多个版本需要钱，但是如果某个东西不能像预期的那样工作，那么它的成本会比第二个实现的成本更高。</p><p id="7955" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">对于一个IT项目来说，了解某件事情如何运作以及是否运作的最佳方式是设置一些<strong class="kg io"> KPI </strong>，对于那些第一次听到这个的人来说，KPI代表<em class="kf">关键绩效指标</em>，它代表了一个您想要跟踪以检查特定东西的绩效的指标(例如，在营销合作之后，您可能想要跟踪某个时间范围内的销售增长)。对于图形组件，KPI可以设置在特定的子组件上，如按钮、可点击或可聚焦的子组件，但它们只是测量交互，可以与总访问量进行比较；如果您有同一个组件的多个实现，并且想要检查哪个执行得更好，您必须使用<strong class="kg io"> A/B测试</strong>。</p><p id="3fba" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated"><strong class="kg io"> A/B测试</strong>是一种测试，在这种测试中，你实际上将你的观众分成两部分，向他们推荐不同版本的内容:如果你有两个视图实现，通过A/B测试，你可以向50%的观众推荐版本A，向另外50%的观众推荐版本B，然后测量每个版本的KPI，这样你就得到了获胜的版本！(或者在非常罕见的情况下打成平手。)</p><h1 id="ca80" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">设置</h1><p id="8ecd" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">在大多数情况下，您不需要编写自己的a/b测试引擎，您可以坚持使用现有的引擎，设置好它并专注于您的业务逻辑实现。对于Laravel应用程序，<code class="fe mi mj mk ml b">ben182/laravel-ab</code>包让你在几分钟内准备好，你可以在<a class="ae jz" href="https://github.com/ben182/laravel-ab" rel="noopener ugc nofollow" target="_blank"> Github </a>上找到它。通过composer <code class="fe mi mj mk ml b">composer require ben182/laravel-ab</code>安装是一个直接的过程，您已经准备好了。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/973427bba277d35204c1ec3e15801e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2RewKpA3SLD9c-Gyyz2lWA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">A/B测试包安装</figcaption></figure><p id="463c" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">请注意，这并不意味着您不能编写您自己的a/b测试代码:如果您想创建一个具有许多方面的自定义漏斗，并且这个包不能满足您的野心，您可以随时实现您的自定义解决方案！</p><p id="89ce" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">正确安装软件包后，我们只需发布配置并迁移它！</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="cca7" class="mv lg in ml b gy mw mx l my mz">php artisan vendor:publish --provider="Ben182\AbTesting\AbTestingServiceProvider"</span></pre><p id="783c" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这将发布配置文件<code class="fe mi mj mk ml b">config/ab-testing.php</code>以便稍后调整。之后，您只需<code class="fe mi mj mk ml b">php artisan migrate</code>，这将发布两个预期的表:</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="3883" class="mv lg in ml b gy mw mx l my mz"><strong class="ml io">Migrating</strong>: 2019_02_02_200315_create_experiments_table<br/><strong class="ml io">Migrated</strong>:  2019_02_02_200315_create_experiments_table (0.01 seconds)<br/><strong class="ml io">Migrating</strong>: 2019_02_02_213123_create_goals_table<br/><strong class="ml io">Migrated</strong>:  2019_02_02_213123_create_goals_table (0.01 seconds)</span></pre><h1 id="6cb2" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">初试:A还是B？</h1><p id="7590" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">简单来说:您想在索引路径中测试一个文本和一个按钮样式。为了使<em class="kf">有创造性</em>，我们可以将我们的测试命名为<code class="fe mi mj mk ml b">blue-button</code>和<code class="fe mi mj mk ml b">purple-button</code>。要开始这些测试，只需打开配置文件并将测试名称添加到实验数组中:</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="fb6c" class="mv lg in ml b gy mw mx l my mz">return [<br/>    'experiments' =&gt; [<br/>        <strong class="ml io">'blue-button',<br/>        'purple-button',</strong><br/>    ],<br/>    // ...<br/>];</span></pre><p id="2e77" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">现在只关注内容，但是怎么做呢？对于视图部分，有一个<code class="fe mi mj mk ml b">@ab</code>工具可以让你在测试之间切换。</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="a281" class="mv lg in ml b gy mw mx l my mz"><strong class="ml io">@ab('blue-button')</strong></span><span id="b122" class="mv lg in ml b gy na mx l my mz">&lt;div class="title m-b-md"&gt;<br/>    This is the blue button test.<br/>&lt;/div&gt;<br/>&lt;a href="{!! url('/specialPage') !!}" class="blue-button"&gt;<br/>    Blue test<br/>&lt;/a&gt;</span><span id="aca9" class="mv lg in ml b gy na mx l my mz"><strong class="ml io">@elseab('purple-button')</strong></span><span id="82b1" class="mv lg in ml b gy na mx l my mz">&lt;div class="title m-b-md"&gt;<br/>    This is the purple button test.<br/>&lt;/div&gt;<br/>&lt;a href="{!! url('/specialPage') !!}" class="purple-button"&gt;<br/>    Purple test<br/>&lt;/a&gt;</span><span id="6f91" class="mv lg in ml b gy na mx l my mz"><strong class="ml io">@endab</strong></span></pre><p id="c659" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">就是这样，它真的很简单，你真的可以在你的刀片文件的任何地方使用它。这样，正如你在下面看到的，当你打开页面时，你会看到不同的内容，实验用户的分布是平均分布的。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/5b4bb4b86ded211096617efb93c4bda1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qa4BVIlzTzNXkQFb4jb3Kg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">a还是B？</figcaption></figure><p id="e577" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">运行命令<code class="fe mi mj mk ml b">php artisan ab:report</code>可以看到每个实验中有多少用户登陆。</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="a7c3" class="mv lg in ml b gy mw mx l my mz">$ php-fpm php artisan ab:report<br/>+---------------+----------+<br/>| <strong class="ml io">Experiment    </strong>| <strong class="ml io">Visitors </strong>|<br/>+---------------+----------+<br/>| <strong class="ml io">blue-button</strong>   | <strong class="ml io">1</strong>        |<br/>| <strong class="ml io">purple-button</strong> | <strong class="ml io">1</strong>        |<br/>+---------------+----------+</span></pre><p id="3181" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">如果你想仔细看看<code class="fe mi mj mk ml b">@ab</code>实用程序是如何工作的，这只是一个假设</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="e291" class="mv lg in ml b gy mw mx l my mz">@if (AbTesting::isExperiment('your-experiment-name'))</span></pre><p id="6fd9" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">这个工具被实现到服务提供商中，你也可以深入到Github的插件源代码中。</p><h1 id="aeee" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">开始测量</h1><p id="2a35" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">一般来说，a/b测试的目的是测量不同视图之间哪一个可以导致更好的<em class="kf">转换</em>。</p><p id="0f7f" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">为了开始测量转化率，我们在配置文件中设定目标。一个简单的目标可以是用户通过我们的按钮访问。</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="da6d" class="mv lg in ml b gy mw mx l my mz">'goals' =&gt; [<br/>    '<strong class="ml io">page-visited</strong>'<br/>],</span></pre><p id="ea11" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">命令<code class="fe mi mj mk ml b">php artisan ab:report</code>将让你看到你通过每个实验达到了多少转换。</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="7cb5" class="mv lg in ml b gy mw mx l my mz">$ php-fpm php artisan ab:report<br/>+---------------+----------+-------------------+<br/>| Experiment    | Visitors | <strong class="ml io">Goal page-visited</strong> |<br/>+---------------+----------+-------------------+<br/>| blue-button   | 1        |<strong class="ml io"> 0 (0%)            </strong>|<br/>| purple-button | 1        |<strong class="ml io"> 0 (0%)            </strong>|<br/>+---------------+----------+-------------------+</span></pre><p id="2b7c" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">要跟踪一个转换，根据你的条件，你只需要添加</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="6da2" class="mv lg in ml b gy mw mx l my mz">AbTesting::completeGoal('<strong class="ml io">your-goal-name</strong>');</span></pre><p id="5bdc" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">在这个特定的例子中，当点击按钮并加载页面时，目标就完成了。页面代码将非常简单，它将触发目标完成:</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="634f" class="mv lg in ml b gy mw mx l my mz"><strong class="ml io"><em class="kf">AbTesting</em>::completeGoal('page-visited');</strong><br/>return view('completed');</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/38ee08d71c7480a4dcca4da5cdbe2b0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AI6wPLnnpgheI0k8UMRBmQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">A/B测试示例目标</figcaption></figure><p id="9b12" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">要检查达到的目标统计数据，您可以再次运行<code class="fe mi mj mk ml b">php artisan ab:report</code>。</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="29cb" class="mv lg in ml b gy mw mx l my mz">+---------------+----------+-------------------+<br/>| Experiment    | Visitors | <strong class="ml io">Goal page-visited</strong> |<br/>+---------------+----------+-------------------+<br/>| blue-button   | 1        |<strong class="ml io"> 0 (0%)            </strong>|<br/>| <strong class="ml io">purple-button </strong>|<strong class="ml io"> 1        </strong>| <strong class="ml io">1 (100%)          </strong>|<br/>+---------------+----------+-------------------+</span></pre><p id="b047" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">就是这样，用这个来衡量和改进你的项目，一次一个统计数据！</p><p id="2b0f" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">请继续关注其他数据驱动的策略，如果你愿意，花一点时间️️to留下评论，谈谈你如何做出由工具支持的数据驱动的决策！☕️</p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><h1 id="06d5" class="lf lg in bd lh li nk lk ll lm nl lo lp lq nm ls lt lu nn lw lx ly no ma mb mc bi translated">包数据库结构</h1><p id="da69" class="pw-post-body-paragraph kd ke in kg b kh md kj kk kl me kn ko lc mf kr ks ld mg kv kw le mh kz la lb ig bi translated">如果您想在自定义页面中集成这些统计数据，该怎么办？让我们深入数据库结构。该包由两个工作台<code class="fe mi mj mk ml b">ab_experiments</code>和<code class="fe mi mj mk ml b">ab_goals</code>组成，对应型号为<code class="fe mi mj mk ml b">Goal</code>和<code class="fe mi mj mk ml b">Experiment</code>。</p><p id="657a" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated"><code class="fe mi mj mk ml b">ab_experiments</code>表结构:</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="c91d" class="mv lg in ml b gy mw mx l my mz">+------------+------------------+------+-----+----------------+<br/>| Field      | Type             | Null | Key | Extra          |<br/>+------------+------------------+------+-----+----------------+<br/>| id         | int(10) unsigned | NO   | PRI | auto_increment |<br/>| name       | varchar(255)     | NO   | UNI |                |<br/>| visitors   | int(11)          | NO   |     |                |<br/>| created_at | timestamp        | YES  |     |                |<br/>| updated_at | timestamp        | YES  |     |                |<br/>+------------+------------------+------+-----+----------------+</span></pre><p id="7a04" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated"><code class="fe mi mj mk ml b">ab_goals</code>表格结构:</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="0e75" class="mv lg in ml b gy mw mx l my mz">+---------------+------------------+------+-----+----------------+<br/>| Field         | Type             | Null | Key | Extra          |<br/>+---------------+------------------+------+-----+----------------+<br/>| id            | int(10) unsigned | NO   | PRI | auto_increment |<br/>| name          | varchar(255)     | NO   |     |                |<br/>| hit           | int(11)          | NO   |     |                |<br/>| experiment_id | int(11)          | NO   |     |                |<br/>| created_at    | timestamp        | YES  |     |                |<br/>| updated_at    | timestamp        | YES  |     |                |<br/>+---------------+------------------+------+-----+----------------+</span></pre><p id="d9a9" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">您可以从其名称空间<code class="fe mi mj mk ml b">Ben182\AbTesting\Models.</code>导入相关模型</p><p id="2a04" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">使用模型<code class="fe mi mj mk ml b">Experiment</code>让你访问所有的实验数据，你可以通过<code class="fe mi mj mk ml b">goals</code>属性获得目标数据(通过Laravel <em class="kf"> hasMany </em>实现)。</p><p id="6077" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">使用模型<code class="fe mi mj mk ml b">Goal</code>让你访问所有的目标数据，你可以通过<code class="fe mi mj mk ml b">experiment</code>属性直接访问它的实验(通过下面的Laravel <em class="kf">实现)。</em></p><p id="ee66" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">所以，如果你想得到紫色按钮实验，你可以使用一个标准的雄辩查询</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="15d7" class="mv lg in ml b gy mw mx l my mz">$purpleExperiment = Experiment::whereName('purple-button')-&gt;first();</span></pre><p id="0fe3" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">把它的目标放在接近它们的地方</p><pre class="mn mo mp mq gt mr ml ms mt aw mu bi"><span id="bf76" class="mv lg in ml b gy mw mx l my mz">$purpleExperiments-&gt;goals</span></pre><p id="b0d4" class="pw-post-body-paragraph kd ke in kg b kh ki kj kk kl km kn ko lc kq kr ks ld ku kv kw le ky kz la lb ig bi translated">通过使用包模型，您可以在自定义页面中显示您想要的每个统计数据！</p></div></div>    
</body>
</html>