<html>
<head>
<title>Singleton Pattern Made Easy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">单例模式变得简单</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/singleton-pattern-made-easy-ab47115570f3?source=collection_archive---------22-----------------------#2020-06-07">https://blog.devgenius.io/singleton-pattern-made-easy-ab47115570f3?source=collection_archive---------22-----------------------#2020-06-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fecd5598e520d78c6d2a08c364abb6b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sJeskmcR494BfyEYqpy78Q.jpeg"/></div></div></figure><p id="d89e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di">上图</span>中，只有一个发光的灯泡，如果有人想要一些光，他们会一直用同一个灯泡，就是发光的。</p><p id="666e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lc">但是为什么每个人都选择同样的灯泡呢？</em></p><p id="8044" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">因为这是获得发光灯泡最快的方法。毕竟对于其他灯泡，我们需要先照亮它。因此，选择发光灯泡是最有效的方法。</strong></p><p id="6ca0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">从上图可以推断出一个更重要的观察结果:</strong> <em class="lc">当我说每个人都会选择相同的发光灯泡时，我是在考虑他们只有上图所示的选项。表示在给定的范围内，一个发光的灯泡是</em> <strong class="jx io"> <em class="lc">中的一个。</em></strong></p><p id="251f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的解释可能已经给出了Singleton的一般概念。</p><p id="1e1b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">根据定义，</strong> <em class="lc"> Singleton的意思是</em> <strong class="jx io"> <em class="lc">在给定的范围内同类中的一个。</em> </strong></p><p id="804b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在看任何实际的代码之前，让我们试着看更多的例子来更好地理解Singleton。</p><h1 id="4f5f" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">更多的例子</h1><ul class=""><li id="6fd5" class="mb mc in jx b jy md kc me kg mf kk mg ko mh ks mi mj mk ml bi translated">你不会每次想看《网飞》的时候都买新电视。你可以用你客厅里已经有的那个。</li><li id="3826" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks mi mj mk ml bi translated">你不会每天晚上从办公室回来就买或租一个新家。你将去一个你已经拥有或租用的地方。</li><li id="958a" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks mi mj mk ml bi translated">你不会每次想去某个地方的时候都买新车。</li></ul><h1 id="20b7" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">技术实现</h1><p id="896e" class="pw-post-body-paragraph jv jw in jx b jy md ka kb kc me ke kf kg mr ki kj kk ms km kn ko mt kq kr ks ig bi translated">在知道如何实施之前，我们应该知道什么时候实施，为什么实施。</p><h2 id="2000" class="mu le in bd lf mv mw dn lj mx my dp ln kg mz na lr kk nb nc lv ko nd ne lz nf bi translated">什么时候？</h2><p id="8389" class="pw-post-body-paragraph jv jw in jx b jy md ka kb kc me ke kf kg mr ki kj kk ms km kn ko mt kq kr ks ig bi translated">如果您的场景需要某个对象的单个实例，那么您可以选择单例模式。</p><ul class=""><li id="c2ed" class="mb mc in jx b jy jz kc kd kg ng kk nh ko ni ks mi mj mk ml bi translated"><em class="lc">测井</em></li><li id="4416" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks mi mj mk ml bi translated"><em class="lc">数据库</em></li><li id="89de" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks mi mj mk ml bi translated"><em class="lc">缓存</em></li></ul><h2 id="4bce" class="mu le in bd lf mv mw dn lj mx my dp ln kg mz na lr kk nb nc lv ko nd ne lz nf bi translated">为什么？</h2><ul class=""><li id="ac42" class="mb mc in jx b jy md kc me kg mf kk mg ko mh ks mi mj mk ml bi translated">因为在JVM (Java虚拟机)中只有一个对象的实例，所以它提供了对内存的有效使用。</li><li id="d035" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks mi mj mk ml bi translated">它提供了对对象的快速访问，因为你不会在每次需要的时候构造一个新的对象。</li></ul><h2 id="0622" class="mu le in bd lf mv mw dn lj mx my dp ln kg mz na lr kk nb nc lv ko nd ne lz nf bi translated">怎么会？</h2><ol class=""><li id="8493" class="mb mc in jx b jy md kc me kg mf kk mg ko mh ks nj mj mk ml bi translated">创建私有构造函数— <em class="lc">这避免了类的实例化。</em></li><li id="ac39" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks nj mj mk ml bi translated">创建同一个类的私有静态变量— <em class="lc">这确保了只有一个实例可用。</em></li><li id="da4b" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks nj mj mk ml bi translated">创建一个全局访问点— <em class="lc">以允许访问上面提到的私有静态变量。</em></li></ol><h2 id="f28d" class="mu le in bd lf mv mw dn lj mx my dp ln kg mz na lr kk nb nc lv ko nd ne lz nf bi translated">示例代码</h2><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="no np l"/></div></figure><h2 id="2ee5" class="mu le in bd lf mv mw dn lj mx my dp ln kg mz na lr kk nb nc lv ko nd ne lz nf bi translated">骗局</h2><ul class=""><li id="9cf7" class="mb mc in jx b jy md kc me kg mf kk mg ko mh ks mi mj mk ml bi translated">单元测试很难— <em class="lc">单例类与客户端类紧密耦合，所以我们不可避免地要测试单例类以及客户端类。</em></li><li id="a3e6" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks mi mj mk ml bi translated">在多线程环境中需要额外的实现— <em class="lc">不同的线程可能有相同单例类的不同实例，这将导致不一致。一些额外的努力可以避免这个con. </em> <strong class="jx io"> <em class="lc">(通过使用synchronized关键字，或者通过Bill Pugh Singleton实现)</em> </strong></li></ul><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="no np l"/></div></figure><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="no np l"/></div></figure><ul class=""><li id="b727" class="mb mc in jx b jy jz kc kd kg ng kk nh ko ni ks mi mj mk ml bi translated">紧密耦合— <em class="lc">因为不能创建新的实例，我们不能在客户端类中注入它。</em></li><li id="3b68" class="mb mc in jx b jy mm kc mn kg mo kk mp ko mq ks mi mj mk ml bi translated">反射攻击— <em class="lc">私有构造函数确保单个实例，但是使用反射技术，访问修饰符可以从私有更新为公共。这个骗局可以通过一些额外的努力来避免。这个问题的解决方案将在以后的博客中讨论。</em></li></ul><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="74d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果这篇博客有助于你理解单体设计模式，请给我一个掌声。🙂</p><p id="4d32" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">关注我获取更多此类内容。</p><p id="c215" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">非常感谢任何评论和反馈。</p><p id="d5ea" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">编码快乐！！。🙂</p></div></div>    
</body>
</html>