<html>
<head>
<title>Add Routing to a React App with Wouter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Wouter将路由添加到React应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/add-routing-to-a-react-app-with-wouter-2d2b3de0cab5?source=collection_archive---------5-----------------------#2021-03-28">https://blog.devgenius.io/add-routing-to-a-react-app-with-wouter-2d2b3de0cab5?source=collection_archive---------5-----------------------#2021-03-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f2c1787e0309b3f252cd5918613eb09d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6IXq9RlPn6DiMvMq"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@diegojimenez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">迭戈·希门尼斯</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="a3e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Wouter是一个库，允许我们根据URL加载React组件。</p><p id="e1a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何使用Wouter向React应用程序添加路由。</p><h1 id="a0f2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">装置</h1><p id="0202" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d758" class="mn lc iq mj b gy mo mp l mq mr">npm i wouter</span></pre><h1 id="712c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">入门指南</h1><p id="3b9c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe ms mt mu mj b">Route</code>组件向React应用程序添加路线。</p><p id="328d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b605" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { Link, Route } from "wouter";</span><span id="53e7" class="mn lc iq mj b gy mv mp l mq mr">const InboxPage = () =&gt; &lt;p&gt;inbox&lt;/p&gt;;</span><span id="ba31" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Link href="/users/1"&gt;<br/>        &lt;a className="link"&gt;Profile&lt;/a&gt;<br/>      &lt;/Link&gt;</span><span id="8aea" class="mn lc iq mj b gy mv mp l mq mr">      &lt;Route path="/about"&gt;About Us&lt;/Route&gt;<br/>      &lt;Route path="/users/:name"&gt;<br/>        {(params) =&gt; &lt;div&gt;Hello, {params.name}!&lt;/div&gt;}<br/>      &lt;/Route&gt;<br/>      &lt;Route path="/inbox" component={InboxPage} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="add7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe ms mt mu mj b">Router</code>组件，让我们可以将地图路线添加到React组件中。</p><p id="d060" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">:name</code>是一个URL参数。</p><p id="8a7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe ms mt mu mj b">params.name</code>得到它的值。</p><p id="ecf3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Link</code>让我们创建装载路线的链接。</p><p id="2a03" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以添加<code class="fe ms mt mu mj b">component</code>道具来添加组件，就像我们对<code class="fe ms mt mu mj b">InboxPage</code>所做的那样。</p><h1 id="43b5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用户出口挂钩</h1><p id="5f7c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe ms mt mu mj b">useRouter</code>钩子从路由中提取URL参数。</p><p id="8faa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="714a" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { Transition } from "react-transition-group";<br/>import { useRoute } from "wouter";</span><span id="8eb7" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  const [match, params] = useRoute("/users/:id");</span><span id="75db" class="mn lc iq mj b gy mv mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;Transition in={match}&gt;<br/>        &lt;p&gt;Hi, this is: {params.id}&lt;/p&gt;<br/>      &lt;/Transition&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="ce69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用tyhe <code class="fe ms mt mu mj b">useRoute</code>钩子解析路由URL，将它传递给钩子。</p><p id="2f24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们获取<code class="fe ms mt mu mj b">params</code>对象来获取URL参数。</p><p id="c936" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有<code class="fe ms mt mu mj b">Transition</code>组件来在加载路线时添加转换。</p><h1 id="ed52" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe ms mt mu mj b">useLocation Hook</code></h1><p id="882d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe ms mt mu mj b">useLocation</code>钩子返回<code class="fe ms mt mu mj b">location</code>对象，以转到不同的路线。</p><p id="1223" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8641" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { Link, Route, useLocation } from "wouter";</span><span id="31f5" class="mn lc iq mj b gy mv mp l mq mr">const InboxPage = () =&gt; {<br/>  const [location, setLocation] = useLocation();</span><span id="2a1e" class="mn lc iq mj b gy mv mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;{`The current page is: ${location}`}&lt;/p&gt;<br/>      &lt;p&gt;<br/>        &lt;a onClick={() =&gt; setLocation("/about")}&gt;Click to update&lt;/a&gt;<br/>      &lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="3cbe" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Link href="/inbox"&gt;<br/>        &lt;a&gt;Inbox&lt;/a&gt;<br/>      &lt;/Link&gt;<br/>      &lt;Route path="/about"&gt;<br/>        &lt;p&gt;About Us&lt;/p&gt;<br/>      &lt;/Route&gt;<br/>      &lt;Route path="/users/:name"&gt;<br/>        {(params) =&gt; &lt;div&gt;Hello, {params.name}!&lt;/div&gt;}<br/>      &lt;/Route&gt;<br/>      &lt;Route path="/inbox" component={InboxPage} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="95c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">向<code class="fe ms mt mu mj b">InboxPage</code>组件添加链接。</p><p id="6588" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该链接使用<code class="fe ms mt mu mj b">useLocation</code>挂钩的<code class="fe ms mt mu mj b">setLocation</code>功能转到<code class="fe ms mt mu mj b">about</code>路线。</p><p id="e105" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，当我们点击“点击更新”链接时，我们会看到关于我们的内容。</p><h1 id="b403" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">自定义位置挂钩</h1><p id="5093" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以定制<code class="fe ms mt mu mj b">useLocation</code>钩子来做我们想做的事情。</p><p id="ecad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以从散列中提取URL段，而不是从URL参数中提取。</p><p id="1ce9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="44af" class="mn lc iq mj b gy mo mp l mq mr">import React, { useCallback, useEffect, useState } from "react";<br/>import { Link, Route, Router, useLocation } from "wouter";</span><span id="7bdc" class="mn lc iq mj b gy mv mp l mq mr">const currentLocation = () =&gt; {<br/>  return window.location.hash.replace(/^#/, "") || "/";<br/>};</span><span id="7438" class="mn lc iq mj b gy mv mp l mq mr">const useHashLocation = () =&gt; {<br/>  const [loc, setLoc] = useState(currentLocation());</span><span id="be5f" class="mn lc iq mj b gy mv mp l mq mr">  useEffect(() =&gt; {<br/>    const handler = () =&gt; setLoc(currentLocation());<br/>    window.addEventListener("hashchange", handler);<br/>    return () =&gt; window.removeEventListener("hashchange", handler);<br/>  }, []);<br/>  const navigate = useCallback((to) =&gt; (window.location.hash = to), []);<br/>  return [loc, navigate];<br/>};</span><span id="f02f" class="mn lc iq mj b gy mv mp l mq mr">const InboxPage = () =&gt; {<br/>  const [location] = useLocation();</span><span id="04e2" class="mn lc iq mj b gy mv mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;{`The current page is: ${location}`}&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="2438" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Link href="/inbox"&gt;<br/>        &lt;a&gt;Inbox&lt;/a&gt;<br/>      &lt;/Link&gt;<br/>      &lt;Router hook={useHashLocation}&gt;<br/>        &lt;Route path="/about"&gt;<br/>          &lt;p&gt;About Us&lt;/p&gt;<br/>        &lt;/Route&gt;<br/>        &lt;Route path="/users/:name"&gt;<br/>          {(params) =&gt; &lt;div&gt;Hello, {params.name}!&lt;/div&gt;}<br/>        &lt;/Route&gt;<br/>        &lt;Route path="/inbox" component={InboxPage} /&gt;<br/>      &lt;/Router&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="e4a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用了<code class="fe ms mt mu mj b">currentLocation</code>函数来获取经过散列后的URL部分。</p><p id="70a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将它传递给<code class="fe ms mt mu mj b">useState</code>钩子来设置初始的URL哈希值。</p><p id="e803" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们监听<code class="fe ms mt mu mj b">hashchange</code>事件来获取URL散列部分的变化。</p><p id="22ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有任何变化，我们返回<code class="fe ms mt mu mj b">loc</code>位置。</p><p id="3241" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">navigate</code>导航到URL的哈希部分。</p><p id="1e1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们把钩子传入<code class="fe ms mt mu mj b">hook</code>道具来使用它。</p><p id="ada9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以现在当我们转到<code class="fe ms mt mu mj b">/#/users/1</code>时，我们看到显示的<code class="fe ms mt mu mj b">Hello, 1!</code>。</p><p id="5733" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们到了<code class="fe ms mt mu mj b">/#/inbox</code>，我们看到了<code class="fe ms mt mu mj b">The current page is: /inbox</code></p><p id="15d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且转到<code class="fe ms mt mu mj b">/#/about</code>渲染<code class="fe ms mt mu mj b">About Us</code>。</p><h1 id="4244" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e791" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Wouter是React应用程序的轻量级路由器。</p></div></div>    
</body>
</html>