# 更有效的代码审查的原则

> 原文：<https://blog.devgenius.io/principles-for-more-effective-code-reviews-65122ff096d5?source=collection_archive---------17----------------------->

对于许多软件公司来说，代码评审是项目生命周期的重要组成部分。代码审查允许我们在测试和部署之前对一段代码进行多组检查。通常，评审人员会向作者提出反馈，指出新添加或更改的代码中可以改进的地方，甚至可能在代码运行之前就标记出问题。

![](img/b8654708cb49e93429f71894e2c450ca.png)

制造者在 [Unsplash](https://unsplash.com/s/photos/code-review?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上 [NESA 的照片](https://unsplash.com/@nesabymakers?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

有效的代码评审需要在技术和交流之间找到平衡。需要对代码以及任何质量或功能问题给予适当的考虑。发现问题固然很好，但是如果你不能有效和尊重地提供反馈，对你的团队凝聚力来说可能弊大于利。代码审查的目的不是为了显示你比其他人更聪明，或者指出他们做错的所有事情。本质上，代码评审是一个协作的过程，是一个质量过滤器，确保团队的产出尽可能的好。毕竟，没有人能做出完美的作品，不管他们有多少经验。

那么，我们如何构建我们的代码审查，以确保人们得到尊重，并听到反馈呢？以下是我发现在给予和接受代码评审反馈时有效的一组软原则。这些不是银弹，你的里程可能会有所不同。

# 我们反对这个问题

这是一个更常用于关系建议的原则，用它来框定你所有的反馈是非常有效的。您的反馈不应针对作者个人；它应该针对代码本身的问题。与其写“**你**做错了”，倒过来关注问题本身。当然，即使你把它翻转过来，说“这是错误的”也是没有建设性的，这就引出了我们的下一个观点。

# 提供解决方案，而不仅仅是一个问题

“这是错误的”几乎是无用的缩影。当然，在某些情况下，这可能是像打字错误这样简单的事情，但是有时您会遇到实现问题，其中所讨论的方法不起作用。在这些情况下，提供问题的潜在解决方案是很重要的。毕竟，如果作者知道“正确”的做法，如果这是一个比打字错误更深层次的问题，他们可能不会把这个问题放在第一位。出于这个原因，与其说“这是错误的”，不如花时间提供额外的细节，说明你为什么认为这是一个问题，以及如何解决这个问题。遵循这一原则的潜在反馈可能类似于“由于{reason}，这将不起作用”。而是考虑{alternative}”。

# 保持拉取请求简短

问问任何人事经理，给出好的反馈都是很费时间的。如果你参与了各种各样的代码评审，你可能会注意到的一个问题是，长的拉取请求不像它们的短的对应请求那样得到同等程度的关注和考虑。当然，情况并不总是这样，但是很难否认这样一个事实，即在一个小的差异(比如说 60 行)上给出深入的反馈比审阅 600 行中的一行更容易。

很自然，所有 600 条生产线都需要在某个时候进行审查。通过遵循良好的票证和分支管理过程，并将工作分解为足够小的块，您可以显著地减少任何给定代码审查的认知负担，这将导致更多的关注和高质量的反馈。

# 不仅仅是批评

从本质上讲，代码评审是必不可少的反馈会议。因此，你应该避免只给出批评性的反馈。批评性反馈对个人成长至关重要，因为它突出了我们可以改进和做得更好的地方，但这只是等式的一面。要成为一个有效的反馈者，你还需要在人们做好事时给予表扬，他们应该继续这样做。为此，当您在代码审查中看到一些特别值得注意的东西时，将它标记为做得很好是一个好主意。

请注意，其他原则在这里仍然适用。不要直接夸作者。告诉别人“你很棒”不是一个好的赞美，因为变得很棒不是一个人可以明确做得更多的事情。相反，关注他们做了什么，为什么值得关注。标出某人解决特定问题的方法，并说“我喜欢这个解决方案，因为{reason}，很好的工作”会更有帮助，因为它关注的是作者做了什么，而不是他们是谁或他们是什么。保持你的赞扬和批评集中在产出和情况上。无论哪种情况都不要把它私人化。

# 不要做独裁者

开发者固执己见。他们喜欢按自己的方式做事，很多时候他们不喜欢替代方案(看看 vim 和 emacs)。如果在如何应用反馈方面没有一些既定的界限，那么到了代码评审的时候，这些意见可能会成为一个问题。我认为错误和功能问题是阻碍问题，当这些问题持续存在时，我不会批准代码评审。另一方面，如果我提出反馈，而且是固执己见或主观的，在很多情况下，接受者拒绝反馈是合理的(除非它违背了您的代码标准或对代码质量有负面影响)。

为了有效地应用这一点，你在评论中使用的语言将是至关重要的。如果有人做了你主观认为可以做得更好的事情，不要告诉他们去改变它，相反，提示他们看看他们是否会考虑做出改变。他们可能会接受你的想法，但不知道你的解决方案，所以试着用“考虑用这种方式做，因为{reason}”这样的措辞来表达你的意见，而不是“因为{reason}而改变这一点”。

如果您没有关于这个特定问题的代码标准，并且它在技术上不是错误的，他们不必改变它，但是如果您认为有改进的空间，您仍然可以提出它。

# 每个人都有发言权

正如开头提到的，这些是我的个人偏好，你可能喜欢其中的一些，也可能讨厌它们。无论如何，这一点非常重要。代码评审是一个团队过程。如果不得不遵循流程的人讨厌这样做，那么您的流程有多好、设计得多好都没有用。创建代码审查过程并设置什么是可接受的，什么是不可接受的参数应该是一个协作的过程。每个受影响的人都应该有发言权，这个过程应该定期公开审查和修订。作为一个团队来设计代码评审过程将确保你最终得到一个每个人都理解并乐于遵循的过程。

这些只是我发现在代码审查中非常有用的一些原则。一般来说，如果每个人都以相互尊重的态度对待代码评审，并且都希望将代码做得尽可能好，那么您从整个过程中获得的好处将会比每个人都试图推动他们的代码风格议程更大。你有什么我没有提到的优秀的代码审查技巧吗？请在下面的评论中留下它们！