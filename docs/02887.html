<html>
<head>
<title>Static and Dynamic Libraries. What is it and how they are made?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">静态和动态库。它是什么，它们是如何制造的？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/static-and-dynamic-libraries-what-is-it-and-how-they-are-made-d28e76520d20?source=collection_archive---------6-----------------------#2020-09-08">https://blog.devgenius.io/static-and-dynamic-libraries-what-is-it-and-how-they-are-made-d28e76520d20?source=collection_archive---------6-----------------------#2020-09-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/c482daacdedf3a683acccc262783b6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UtRTJcPg94l-XF9N.jpg"/></div></div></figure><div class=""/><p id="1d83" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">库是一组可重用的函数。在编程中，重用资源是一种常见的做法，而库是其中必不可少的部分。</p><p id="c7b1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有静态库和动态库。静态库会将目标代码与您的主代码合并，这样会更快，因为它包含了函数的目标代码的完整副本，因此会使用更多的内存，并且在编译后无法更改。而动态库则是指其函数代码的内存位置，所以速度较慢，因为它搜索的是库文件路径。然而，它可以在执行前被容易地修改，并且不需要用你的主代码重新编译。</p><h2 id="1ff2" class="kt ku iy bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">动态库创建(仅限Linux)</h2><ol class=""><li id="20ee" class="lm ln iy jx b jy lo kc lp kg lq kk lr ko ls ks lt lu lv lw bi translated"><strong class="jx iz"> gcc *。c-c-fpic<br/>T2】来源<strong class="jx iz">。应该为在动态库中使用准备好c </strong>文件。因为几个程序可以使用一个动态库的实例，所以该库不能在固定地址存储数据。这是因为库在内存中的位置因程序而异。这是使用编译器标志<strong class="jx iz"> -fpic </strong>完成的。由于我们需要在编译过程生成目标代码后应用这个步骤，所以必须指示编译器停止并返回一个对象(。o)每个源文件的文件。这是通过使用<strong class="jx iz"> -c </strong>标志完成的。</strong></li><li id="3903" class="lm ln iy jx b jy lx kc ly kg lz kk ma ko mb ks lt lu lv lw bi translated"><strong class="jx iz"> gcc * 0 -shared -o liball.so </strong>这是通过编译所有。o文件使用-shared标志。后来，当编译程序文件时，编译器通过查找以“lib”开头并以库扩展名(.所以对于动态来说，。a表示静态)。因此，相应地命名库是很重要的。</li><li id="0565" class="lm ln iy jx b jy lx kc ly kg lz kk ma ko mb ks lt lu lv lw bi translated"><strong class="jx iz">导出LD_LIBRARY_PATH = $ PWD:$ LD _ LIBRARY _ PATH</strong><br/>因为一个程序需要知道在哪里寻找库文件，我们必须将那个位置添加到LD _ LIBRARY _ PATH环境变量中。</li></ol><h2 id="1504" class="kt ku iy bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">创建静态库(仅限Linux)</h2><p id="7ab5" class="pw-post-body-paragraph jv jw iy jx b jy lo ka kb kc lp ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated">创建静态库要容易得多。首先，以与上面步骤1相同的方式创建目标文件。然后使用'<strong class="jx iz">ar RCS liball . a</strong><strong class="jx iz">* . 0</strong>'对库进行归档。你的程序应该包括你的库中存在的每个函数的原型。如果你为这些原型使用一个头文件，确保使用#include " &lt;头文件&gt;"在你的其他文件中包含这个文件的名字。</p><h2 id="3f24" class="kt ku iy bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">编译程序</h2><p id="5052" class="pw-post-body-paragraph jv jw iy jx b jy lo ka kb kc lp ke kf kg mc ki kj kk md km kn ko me kq kr ks ig bi translated"><strong class="jx iz">gcc-l .-Lall-o my _ program main . c</strong><br/>在编译程序文件的时候，我们要告诉编译器使用库中的文件，在哪里可以找到这些文件。l '告诉它我们想要包含库文件。“all”告诉它寻找liball.so库。重要的是要留下'<strong class="jx iz"> lib </strong>'和'<strong class="jx iz">。因为编译器已经用这种方式识别了库文件。'告诉编译器它可以在当前目录中找到库文件。</strong></p><h1 id="76ff" class="mf ku iy bd kv mg mh mi ky mj mk ml lb mm mn mo le mp mq mr lh ms mt mu lk mv bi translated">静态库和共享库的区别</h1><figure class="mx my mz na gt ip gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/9be0dd4c7659bb6df9505ad9218749d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/0*4hHghvnlexXGgMsO.png"/></div><figcaption class="nb nc gj gh gi nd ne bd b be z dk translated">来源:<a class="ae nf" href="https://www.geeksforgeeks.org/difference-between-static-and-shared-libraries/" rel="noopener ugc nofollow" target="_blank">https://www . geeks forgeeks . org/difference-between-static-and-shared-libraries/</a></figcaption></figure><p id="7095" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">问题、评论或关注，欢迎在下方评论，关注我或在Twitter @jcamilovillah找到我。</p></div></div>    
</body>
</html>