<html>
<head>
<title>Automation is Easy — Convert FREE TEXT to DATE format using python dateutil package : AIE3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化很容易——使用 python dateutil 包:AIE3 将自由文本转换为日期格式</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/automation-is-easy-convert-free-text-to-date-format-using-python-dateutil-package-aie3-8cf199814580?source=collection_archive---------10-----------------------#2022-04-30">https://blog.devgenius.io/automation-is-easy-convert-free-text-to-date-format-using-python-dateutil-package-aie3-8cf199814580?source=collection_archive---------10-----------------------#2022-04-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3ee1156a91b8dd6f15120c3b49a4bc0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n-nG95bTX3DvF8e4ExdDGw.png"/></div></div></figure><p id="3d6d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi kt translated"><span class="l ku kv kw bm kx ky kz la lb di"> T </span>他的是<strong class="jx io">自动化易</strong>系列的<strong class="jx io">第三</strong>篇。本系列旨在作为您探索各种工具/技术来自动化枯燥的日常业务活动的第一点。</p><p id="c576" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae lc" href="https://nagarajsvaidya.medium.com/" rel="noopener"> <em class="ld">点击此处查看本系列</em> </a>往期文章。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><p id="fc8a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在自动化过程中，您是否遇到过这样的情况:您有一条与<strong class="jx io">日期</strong>相关的数据，它更像是一个<strong class="jx io">自由文本</strong>，您必须在输入到另一个应用程序之前将其转换成标准格式？在清理将<strong class="jx io">自由文本作为日期列</strong>的数据时，您肯定会遇到这样的用例！<br/>让我们了解如何使用<strong class="jx io"> python </strong>以各种方式将其转换成任何标准日期格式，以及使用 python 的<strong class="jx io"> dateutil </strong>包实现这一点的有效方式。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><h1 id="0683" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">📖介绍</h1><p id="8e90" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">假设您已经从 PDF 表单或发票中提取了字段值，如我们在<a class="ae lc" rel="noopener ugc nofollow" target="_blank" href="/automation-is-easy-how-to-use-pypdf2-package-in-python-9133bb3ab42a">之前的文章</a>中所讨论的，其中一个提取的数据片段与<strong class="jx io">日期</strong>相关，这更像是一个自由文本字段，即用户输入日期的方式因 PDF 表单或发票而异。例如<br/>29–04–2022<br/>04/29/2022<br/>2022 . 04 . 29<br/>2022 年 4 月 29 日<br/>或者可以是任何格式，用任何符号作为以任何顺序输入的日、月和年之间的分隔符。我们如何使用 python 清理并转换成特定的格式呢？让我们一起探索吧！</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><h1 id="a76c" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">📙传统方式—方法 1</h1><p id="43a7" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">在传统的方法中，我们可以通过定义输入可能的日期格式的所有可能组合来处理这一点，循环遍历这些格式中的每一种，以识别正确的匹配格式，然后将其从匹配格式转换为所需的格式。所有这些都可以使用 python 的基本<strong class="jx io"> datetime </strong>包来完成。让我们用代码来理解这种方法—</p><figure class="mo mp mq mr gt jo"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6e18" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的代码片段中，我们用一个输入参数定义了一个名为<code class="fe mu mv mw mx b"><strong class="jx io">dateFromatter</strong></code> <strong class="jx io"> </strong>的函数。</p><p id="f769" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第 3 行</strong> —导入 python 的 datetime 包。<em class="ld">为了理解本文中的功能，我们将包导入到函数中。但是强烈建议在模块或脚本级别导入包</em>。<br/> <strong class="jx io">第 6 行— </strong>我们在一个列表中定义输入日期格式的所有可能组合。让我们以 2022 年 4 月 29 日为日期来理解这一行中提到的各种解释。 <br/> ➡ <strong class="jx io"> %B </strong>表示月份为<strong class="jx io">四月。<br/> </strong> ➡ <strong class="jx io"> %b </strong>指月份为<strong class="jx io"> Apr </strong>。<br/> ➡ <strong class="jx io"> %d </strong>表示日，即 29 <br/> ➡ <strong class="jx io"> %m </strong>表示月为 04。<br/> ➡ <strong class="jx io"> %y </strong>指的是 22 年。<br/> ➡ <strong class="jx io"> %Y </strong>指的是 2022 年<br/>还有其他代码以各种方式解释日期、时间。如果你想学习日期&amp;时间解释的其他代码，这里是<a class="ae lc" href="https://strftime.org/" rel="noopener ugc nofollow" target="_blank">备忘单</a>。<br/> <strong class="jx io">第 7 行— </strong>我们在这些格式中循环查找与我们的输入相匹配的格式。<br/> <strong class="jx io">第 10 行— </strong>函数<code class="fe mu mv mw mx b"><strong class="jx io">strptime(string,format)</strong></code> <strong class="jx io"> </strong>将<strong class="jx io">输入的字符串转换为日期对象。</strong>该功能在<code class="fe mu mv mw mx b"><strong class="jx io">datetime</strong></code>类中可用。<br/> <strong class="jx io">第 11 行— </strong>函数<code class="fe mu mv mw mx b"><strong class="jx io">strftime(format)</strong></code> <strong class="jx io"> </strong>按照定义的格式对日期对象进行格式化。在本例中，我们尝试将输出格式化为<strong class="jx io"> MM-DD-YYYY </strong>，即本文上下文中的 04–29–2022。<br/> <strong class="jx io">第 14 行</strong> —通过尝试列表中所有已定义的格式来保持循环。</p><p id="cd72" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们通过传递<code class="fe mu mv mw mx b"><strong class="jx io">29/04/2022</strong></code> <strong class="jx io"> </strong>作为输入来调用这个函数。预期产量是<code class="fe mu mv mw mx b"><strong class="jx io">04–29–2022</strong></code></p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi my"><img src="../Images/dcc12a1d25dd643c686b228d2f9f8d68.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*fua6cE8hsow1_Jjdw0RjwQ.png"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">上述<strong class="bd ln"> dateFormatter </strong>函数的输出</figcaption></figure><p id="1fdd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们尝试几种不同的输入日期格式。输出格式应该是<strong class="jx io"> MM-DD-YYYY。</strong></p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/2e0920bef23a902a08f082648d19371e.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*kK3heIym2Wnow5X4Xs6u5Q.png"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">上述<strong class="bd ln"> dateFormatter </strong>函数的输出</figcaption></figure><p id="aa98" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们将输入作为<strong class="jx io"> 2022.12.10 传递。</strong>我们从上面定义的<code class="fe mu mv mw mx b"><strong class="jx io">dateFormatter()</strong></code> <strong class="jx io"> </strong>函数中得到什么响应？</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/c394677543fa42cc80532e5d6315c18c.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*ZHKAhIrnWpq4iTXllkvp0g.png"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">输入 2022.12.10 的上述<strong class="bd ln">数据格式器</strong>函数的输出</figcaption></figure><p id="d6b9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为什么我们没有得到预期的结果？为什么函数返回<strong class="jx io"> None？</strong>这是因为，上面代码片段的<strong class="jx io">行 6 </strong>中的<strong class="jx io"> POSSIBLE_DATE_FORMATS </strong>没有与输入匹配的格式。在这里，我们无法感知输入的日期格式。<br/>我们可以通过将<code class="fe mu mv mw mx b"><strong class="jx io">'%Y.%m.%d'</strong></code> <strong class="jx io"> </strong>添加到第<strong class="jx io">行第 6 </strong>行的列表中来解决这个问题，以获得预期的输出。</p><p id="d96b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但在现实中，这是一个可行的方法吗？如果用户输入的输入日期格式是像<code class="fe mu mv mw mx b"><strong class="jx io">23rd February 2022</strong></code> <strong class="jx io"> </strong>这种自由文本的<strong class="jx io">开箱即用的</strong>怎么办？我们如何处理这种情况？<br/>使用 python 的<strong class="jx io"> dateutil </strong>包有一个更有效的方法来处理这个问题。现在让我们来理解这种方法。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><h1 id="a4f2" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">📗使用 dateutil 包—方法 2</h1><p id="82f3" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated"><strong class="jx io"> dateutil </strong>模块为标准 datetime 模块提供了强大的扩展，在<strong class="jx io"> Python </strong>中可用。</p><h2 id="7352" class="nf lm in bd ln ng nh dn lr ni nj dp lv kg nk nl lz kk nm nn md ko no np mh nq bi translated">装置</h2><p id="d556" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">这个包可以使用 pip 从 PyPI 安装。运行此命令-<br/>T2】</p><figure class="mo mp mq mr gt jo"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="73a1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的代码片段中，我们用一个输入参数定义了一个名为<code class="fe mu mv mw mx b"><strong class="jx io">FormatDate</strong></code> <strong class="jx io"> </strong>的函数。<br/> <strong class="jx io">第 3 行— </strong>从<strong class="jx io"> dateutil </strong>包中导入<strong class="jx io">解析器</strong>模块。<em class="ld">这个模块提供了一个通用的日期/时间字符串解析器，它能够解析</em> <strong class="jx io"> <em class="ld">最常见的格式</em> </strong> <em class="ld">来表示日期和/或时间。我们不需要像在第一种方法中那样指定可能的日期格式列表。</em> <br/> <strong class="jx io">第 5 行— </strong>解析输入字符串创建日期时间对象。<br/> <strong class="jx io">第 7 行</strong> —将日期时间对象格式化为所需格式。在这段代码中，我们将日期格式化为<strong class="jx io"> MM-DD-YYYY </strong>，就像我们在第一种方法中所做的那样。</p><p id="f4d7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们通过传递不同格式的数据来检查这个函数，包括那些在第一种方法中无法获取输出的数据。我们期望得到<strong class="jx io"> MM-DD-YYYY </strong>格式的输出。</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/ed036790c5b56bb83ea753711022a3c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*ucWmBz79Bqwb2IC799K7dg.png"/></div><figcaption class="mz na gj gh gi nb nc bd b be z dk translated">上述<strong class="bd ln"> FormatDate() </strong>函数的输出</figcaption></figure><p id="dee9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此通过使用<strong class="jx io"> dateutil </strong>包的<strong class="jx io">解析器</strong>模块帮助我们-<br/>1。减少了逻辑实现的时间。<br/>T8】2。消除了明确提及输入日期格式的需要。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><h1 id="0d26" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">👢包扎</h1><p id="66e2" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">我们<strong class="jx io">讨论了两种将自由文本日期格式转换成标准格式的方法</strong>。</p><p id="4b34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<strong class="jx io">传统方法</strong>中，我们通过定义输入可能的日期格式列表来实现这一点，但更容易实时出错，因为如果没有找到合适的匹配，就需要不断更新格式列表。</p><p id="6c69" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<strong class="jx io">第二种方法</strong>中，我们看到更有效的方法是使用 python 的<strong class="jx io"> dateutil </strong>包，它为 Python 中可用的标准<strong class="jx io"> datetime </strong>模块提供了强大的扩展。使用这个包的<strong class="jx io">解析器</strong>模块，我们可以将任何更像自由文本格式的数据转换成需要的格式<strong class="jx io">，而不需要事先猜测</strong>输入的格式。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><h1 id="5d34" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">感谢阅读❤️继续分享📚</h1><blockquote class="ns nt nu"><p id="879f" class="jv jw ld jx b jy jz ka kb kc kd ke kf nv kh ki kj nw kl km kn nx kp kq kr ks ig bi translated"><strong class="jx io"><em class="in"># automationis easy</em></strong></p></blockquote></div></div>    
</body>
</html>