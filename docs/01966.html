<html>
<head>
<title>Noobs Guide: Amazon S3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Noobs指南:亚马逊S3</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/intro-to-amazon-s3-d8c140e96310?source=collection_archive---------17-----------------------#2020-07-15">https://blog.devgenius.io/intro-to-amazon-s3-d8c140e96310?source=collection_archive---------17-----------------------#2020-07-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a351bf08a89a6901839e064d78e4f7e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eHCxYA476bUAlWp08oYgxQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">杰西卡·约翰斯顿在<a class="ae kc" href="https://unsplash.com/s/photos/buckets?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="febf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章是为那些忙于学习AWS架构师认证的人准备的，无论是助理还是专业人员。这一个集中在你需要知道的关于S3的关键事情上。</p><h1 id="8ab7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">亚马逊为什么要创造S3？</h1><p id="46ac" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我想每个人都应该明白事情的原委。在像S3这样的云服务出现之前，构建需要大量存储的应用程序非常复杂。您要么将大量驱动器连接到物理服务器，要么必须使用它来设置NAS。我保证，两个都不好玩。</p><p id="621a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以S3是一个巨大的进步，因为它:</p><ul class=""><li id="b4bb" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated"><strong class="kf ir">无限制</strong>存储。</li><li id="d310" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">没有文件系统，因此没有驱动程序或兼容性问题。</li><li id="9718" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated"><strong class="kf ir">全球</strong>上市。</li><li id="463d" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">99.99%的正常运行时间</li><li id="580e" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">成本非常低</li></ul><h1 id="d693" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">大量</h1><p id="8d6a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">S3的核心概念是“桶”。桶只是一个存储数据的空间。每个铲斗都有几个您必须知道的关键方面:</p><ul class=""><li id="83aa" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated">全局命名空间(所有名称必须是唯一的)</li><li id="3383" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">保存对象或文件夹(保存对象)。</li></ul><h2 id="0fc2" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">S3物体</h2><p id="b2ec" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">S3的物品很容易理解。它们由一小组属性来标识:</p><ul class=""><li id="8ba8" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated">对象关键字(包括文件夹路径)</li><li id="5803" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">值(您存储的数据本身)</li><li id="45d4" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">对象版本ID(如果存储桶未版本化，则为空)</li><li id="09dc" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">[计]元数据</li></ul><p id="f0d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">S3对象的大小可以从零字节到5TB不等，因此它们非常灵活</p><h1 id="bb95" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">S3存储类</h1><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/db46be3ac49aa8dcf451d07310312d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_4D-6Vr-ILDSwXk9dwRGLg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@steve_j?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">斯蒂夫·约翰森</a>在<a class="ae kc" href="https://unsplash.com/s/photos/storage?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="d485" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个<strong class="kf ir">对象都有一个存储类。</strong>存储类别影响存储该对象的性能、耐用性和成本。</p><h2 id="09e7" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">标准</h2><ul class=""><li id="ff3e" class="me mf iq kf b kg lz kk ma ko nj ks nk kw nl la mj mk ml mm bi translated">快的</li><li id="d6fd" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">99.99%的可用性</li><li id="60b3" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated"><strong class="kf ir">自动将</strong>复制到3个可用性区域</li></ul><h2 id="5ab5" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">不经常访问(IA)</h2><ul class=""><li id="22ba" class="me mf iq kf b kg lz kk ma ko nj ks nk kw nl la mj mk ml mm bi translated">仍然很快</li><li id="1149" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">基础成本比标准成本低50%,但每次访问都要收费。</li></ul><h2 id="cfe7" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">很少访问的单区域</h2><ul class=""><li id="0dae" class="me mf iq kf b kg lz kk ma ko nj ks nk kw nl la mj mk ml mm bi translated">速度很快，但数据只存储在<strong class="kf ir">一个</strong>可用区(99.5%的持久性)</li><li id="fbc4" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">比不常访问的标准存储便宜20%。</li><li id="a86f" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">耐用性和可用性降低，数据<strong class="kf ir">可能会被破坏。</strong></li><li id="5112" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">额外检索费。</li></ul><h2 id="38de" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">冰川</h2><ul class=""><li id="7c17" class="me mf iq kf b kg lz kk ma ko nj ks nk kw nl la mj mk ml mm bi translated">用于因法律原因或长期存档而需要保留的数据</li><li id="a6ed" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">检索可能需要<strong class="kf ir">分钟到数小时。</strong></li></ul><h2 id="03e0" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated"><strong class="ak">冰川深处档案</strong></h2><ul class=""><li id="f04f" class="me mf iq kf b kg lz kk ma ko nj ks nk kw nl la mj mk ml mm bi translated">用于您真的真的不希望经常查看的数据</li><li id="1ec5" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">数据<strong class="kf ir">需要12个小时才能访问</strong>，并且需要支付相关费用。</li><li id="fb4d" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">他们提供的最便宜的存储设备。</li></ul><h1 id="2d2e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">智能分层</h1><p id="0525" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">AWS将使用机器学习来评估您如何使用您的数据，并自动将数据存储在他们认为对您的用例来说最佳(最便宜)的存储类别中。</p><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nm"><img src="../Images/310e2687f8c20561f6c09efe0d38373f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j7HxlBkCtyljL1wBPk7Ctg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来自<a class="ae kc" href="https://aws.amazon.com/s3/storage-classes/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/s3/storage-classes/</a></figcaption></figure><h1 id="8845" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">数据一致性</h1><h2 id="911b" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">写入或更新时的对象一致性</h2><p id="593a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当你<strong class="kf ir">第一次上传</strong>一个对象到S3，你得到<strong class="kf ir">写后读</strong>一致性。换句话说，你可以立即读回数据。</p><p id="5184" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，<strong class="kf ir">更新对象的情况</strong>并非如此。如果你用一个新版本覆盖一个对象，那么S3提供最终的一致性。AWS跨可用性区域复制S3对象需要时间。立即读取仍可能返回旧对象。通常情况下，S3只需要几秒钟就可以解决这种不一致，但update上的这种行为变化已经让不少工程师犯了错误。</p><h2 id="1a72" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">跨区域复制(CRR)</h2><p id="8461" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">AWS提供了将数据自动复制到另一个地区甚至另一个帐户的选项。这提供了额外的备份、耐用性和灾难保护层。</p><p id="dd94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使用CRR，源和目的地<strong class="kf ir">账户/桶</strong>都需要<strong class="kf ir">对象版本控制启用。</strong></p><h1 id="4eda" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">S3对象版本控制</h1><p id="e228" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">很多时候，您可能希望保留一个对象的多个版本。例如，如果您在S3保存了一个配置文件，那么能够跟踪随时间的变化或恢复旧版本可能会很有帮助。</p><p id="d0c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">S3允许你这样做。您可以为<strong class="kf ir">存储桶启用版本控制。</strong>一旦启用，只能暂停，不能禁用。</p><p id="db4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">启用版本控制后，对象的每个版本都将获得一个版本id。默认情况下，获取该对象将返回最新的版本，除非您提供一个版本id。</p><p id="1b00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">删除一个版本化对象的最新版本将意味着下一个最旧的版本将被用于将来的请求。</p><h1 id="accf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安全性—访问</h1><p id="2c62" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">过去，默认情况下，桶是不安全的。由于不安全的S3桶导致的多次安全漏洞，AWS现在默认创建新的S3桶作为<strong class="kf ir"> private。</strong>这意味着它们根本不可用于公共互联网<strong class="kf ir">。一般来说，你应该尽可能保持这种状态。</strong></p><p id="4a62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有两种方法可以细化S3安全性。</p><h2 id="a3a2" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">访问控制列表(ACL)</h2><p id="6ecc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">ACL是保护S3存储桶的原始方式，也是混乱和许多安全漏洞的来源之一。</p><h2 id="1944" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">木桶策略</h2><p id="6d37" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">机器可读(JSON)文档，描述了对bucket的一组更复杂的权限。</p><h1 id="aeb0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安全性—加密</h1><p id="7de0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">AWS允许您以多种方式加密数据。</p><h2 id="d506" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">传输中的加密</h2><p id="201d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用S3，您可以加密服务器(包括不在AWS内的服务器/计算机)和S3服务之间的数据。这是通过标准SSL/TLS完成的。</p><h2 id="9d4b" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">静态数据</h2><p id="6ae6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">SSE-AES、SSE-KMS和SSE-C是AWS提供的三个选项。</p><ul class=""><li id="2cb5" class="me mf iq kf b kg kh kk kl ko mg ks mh kw mi la mj mk ml mm bi translated"><strong class="kf ir"> SSE-AES </strong> : AWS使用AES-256算法为您管理所有密钥。最简单的选择。</li><li id="23d0" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated"><strong class="kf ir">上交所-KMS </strong> : AWS，你可以管理钥匙。稍微复杂一点，但也更灵活。</li><li id="f9c6" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated"><strong class="kf ir"> SSE-C </strong>:您通过上传的方式直接提供加密密钥。您需要手动负责密钥过期、轮换等。</li></ul><p id="c055" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上传到S3时，对象将被加密<strong class="kf ir">。</strong>这意味着，如果您打开了加密，并且之前已经上传了对象，那么这些旧对象将不会被加密<strong class="kf ir">。</strong></p><h2 id="ae75" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">S3安全-签名的URL</h2><p id="265f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">最常见的S3用例之一是让<strong class="kf ir">临时</strong>访问一个文件。例如，如果你正在销售一本电子书，你可能想给一个购买者一个链接来访问一个可下载的pdf，它在下载后停止工作。签名的URL允许你这样做。</p><p id="28ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个签名的URL创建一个<strong class="kf ir">有时间限制的</strong> URL，允许公众访问私有的S3对象。因此，您可以创建一个仅在5秒内有效的URL，以允许用户开始下载，然后该URL过期。</p><h1 id="78cb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">S3生命周期</h1><p id="44b2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在很多情况下，您存储在S3中的数据需要频繁访问，例如在创建之后，然后这些访问需求发生了变化。例如，法律文档可能会经历多次更改和更新，然后除了在法律诉讼的情况下，再也不会被查看。</p><p id="b9ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，S3的对象需要改变其存储类别，从标准访问变为不频繁访问，再变为Glacier。一段时间后，文档可能完全不相关，并且可以安全地删除以节省成本。</p><p id="b417" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像这样的序列是S3生命周期管理的一部分，它允许您声明<strong class="kf ir">自动转换和事件</strong>来更改存储类或删除S3对象。</p><h2 id="50ea" class="ms lc iq bd ld mt mu dn lh mv mw dp ll ko mx my lp ks mz na lt kw nb nc lx nd bi translated">生命周期规则</h2><p id="0623" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">S3生命周期通过<strong class="kf ir">生命周期规则处理。</strong>例如，您可以指定一个对象在一个月后自动移动到glacier，并在一年后删除。</p><p id="9b5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">强烈建议使用这些生命周期规则来<strong class="kf ir">节省成本</strong>和<strong class="kf ir">自动满足</strong>需求。</p><h1 id="8f1a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">摘要</h1><p id="bae6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">了解本文中的所有内容并在AWS控制台中练习使用S3非常重要。我试图用粗体字突出关键概念或想法。</p><p id="c735" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">S3是AWS提供的最简单、最容易和最古老的功能之一，并被其他AWS服务广泛使用。您必须熟悉S3的所有功能，这一点很重要。</p></div></div>    
</body>
</html>