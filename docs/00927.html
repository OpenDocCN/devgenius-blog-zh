<html>
<head>
<title>The simplest way to calculate the time taken using a context manager</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用上下文管理器计算时间的最简单方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-simplest-way-to-calculate-the-time-taken-using-a-context-manager-83070c49277f?source=collection_archive---------33-----------------------#2020-06-19">https://blog.devgenius.io/the-simplest-way-to-calculate-the-time-taken-using-a-context-manager-83070c49277f?source=collection_archive---------33-----------------------#2020-06-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f0f4e566cbbced8cfd25d1e42388a387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Cp6rfPvB-NtxnCC8.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来源:谷歌</figcaption></figure><p id="f28b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">有时需要计算我们的代码执行需要多少时间。有许多不同的方法可以做到这一点，但我最喜欢的是使用上下文管理器。</p><p id="a72e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我告诉你上下文管理器。上下文管理器允许您在需要时精确地分配和释放资源。上下文管理器最广泛使用的例子是<code class="fe la lb lc ld b">with</code>语句。假设您有两个相关的操作，您想成对执行，中间有一段代码。上下文管理器允许您专门做这件事。</p><p id="d234" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">有3种方法，即__init__，__enter__，__exit__，但至少上下文管理器定义了一个<code class="fe la lb lc ld b">__enter__</code>和<code class="fe la lb lc ld b">__exit__</code>方法。让我们制作自己的文件打开上下文管理器，并创建对象计时器，如下所示:</p><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="56b4" class="lm ln iq ld b gy lo lp l lq lr"><strong class="ld ir">class</strong> Timer(object):<br/>    <strong class="ld ir">def</strong> __init__(self, file_name, method):<br/>        self.file_obj = open(file_name, method)<br/>    <strong class="ld ir">def</strong> __enter__(self):<br/>        <strong class="ld ir">return</strong> self.file_obj<br/>    <strong class="ld ir">def</strong> __exit__(self, type, value, traceback):<br/>        self.file_obj.close()</span></pre><p id="0208" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">仅仅通过定义<code class="fe la lb lc ld b">__enter__</code>和<code class="fe la lb lc ld b">__exit__</code>方法，我们就可以在<code class="fe la lb lc ld b">with</code>语句中使用我们的新类。现在我们准备将它应用到我们的代码中。</p><p id="5799" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在这段代码之后，只需调用这个函数下面的整个代码“With”语句。因此，用我们定义的语句和定时器对象启动程序，如下所示:</p><h2 id="302c" class="lm ln iq bd ls lt lu dn lv lw lx dp ly kn lz ma mb kr mc md me kv mf mg mh mi bi translated">带计时器(“所用时间”):</h2><p id="5d6f" class="pw-post-body-paragraph kc kd iq ke b kf mj kh ki kj mk kl km kn ml kp kq kr mm kt ku kv mn kx ky kz ij bi translated">举个例子，我写了一段简单的python代码来打印两个数的相加。</p><h2 id="a901" class="lm ln iq bd ls lt lu dn lv lw lx dp ly kn lz ma mb kr mc md me kv mf mg mh mi bi translated">num1 = 45 #第一个数<br/> num2 = 20#第二个数<br/> #相加两个数<br/> sum = num1 + num2 <br/> #打印值<br/>print({ 0 }和{1}之和为{2})。格式(num1，num2，sum))</h2><pre class="le lf lg lh gt li ld lj lk aw ll bi"><span id="9cf9" class="lm ln iq ld b gy lo lp l lq lr">Sum of 45 and 20 is 65<br/>Time Taken: 0.00022077560424804688</span></pre><p id="5db0" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">所以我们打印了结果，并且我们的上下文管理器正在计算花费的时间。</p><p id="1a61" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">应用上下文管理器并检查代码的执行情况。</p><p id="96b7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">使用上下文管理器的好处是锁定和解锁资源以及关闭打开的文件。</p></div></div>    
</body>
</html>