<html>
<head>
<title>Achieving Infinite Scroll with react-infinite-loader npm Package</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 react-infinite-loader npm 包实现无限滚动</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/achieving-infinite-scroll-with-react-infinite-loader-npm-package-9d00e54935c7?source=collection_archive---------6-----------------------#2020-06-03">https://blog.devgenius.io/achieving-infinite-scroll-with-react-infinite-loader-npm-package-9d00e54935c7?source=collection_archive---------6-----------------------#2020-06-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/efded6f3d5de2c99492d8f544f084540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hJSDaQCL876b-EBA73gfTA.gif"/></div></div></figure><p id="6ca3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">无限滚动有助于让用户在你的网站上停留更长时间。在一个叫做 react-infinite-loader 的有用的 npm 包的帮助下，可以从 React 应用程序中消除点击按钮获取下一批信息的需要。</p><h1 id="97dc" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">如何使用 InfiniteLoader 组件</h1><p id="b9d6" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">首先，用命令<code class="fe lw lx ly lz b">npm i react-infinite-loader</code>安装包。接下来，将代码行<code class="fe lw lx ly lz b">import InfiniteLoader from ‘react-infinite-loader’;</code>包含在您想要包含它的任何组件中。现在你有了一个可以添加到组件底部的<code class="fe lw lx ly lz b">&lt;InfiniteLoader/&gt;</code>组件。该组件包括一个“已访问”的属性，您可以向其传递一个函数，当访问 InfiniteLoader 组件时(当滚动到该组件时)将调用该函数。带有已访问属性的组件可能如下所示:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="8664" class="mi ku in lz b gy mj mk l ml mm">&lt;InfiniteLoader <em class="mn">onVisited</em>={ () =&gt; <em class="mn">this</em>.handleVisit() } /&gt;</span></pre><p id="96b9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意，传递给 onVisited 的值是一个匿名函数定义，它调用一个名为“handleVisit”的组件函数。在 handleVisit 函数中，定义如何为页面加载下一批信息。</p><h1 id="0e0e" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">访问 InfiniteLoader 时要做什么</h1><p id="33bd" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">为了让 InfiniteLoader 组件完成任何事情，您必须定义 handleVisit 函数。如果您的组件从一个 API 获取，您的 handleVisit 函数可能需要发送另一个获取请求。假设您的 API 有太多的信息要一次加载，所以它一次只发送有限的一批信息。当您的组件第一次挂载时，您从 API 获取第一批信息。当用户滚动到网页底部时，你已经用完了第一批信息，需要获取第二批。这个过程会一直继续下去，直到你的 API 不再提供更多的信息，你的用户不能再滚动了。</p><p id="88a1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们看看这可能是什么样子。在您的状态中，您有一个对象数组，您将这些对象转化为页面上的元素，一个整数“pageNumber”表示您正在获取的 API 页码，一个整数“totalPages”表示 API 必须提供的总页数。访问 InfiniteLoader 组件后，pageNumber 将随着每个新的获取请求而递增。在发送获取请求之前，该函数在获取可能不存在的 API 页面之前检查 pageNumber 是否大于 totalPages。</p><p id="d2d6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">每次提取的结果都连接到组件状态中的对象数组。通过这种方式，可以用更多的对象重新呈现组件，从而为用户创建更多的滚动元素。总而言之，您的 handleVisit 函数可能如下所示:</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/b051216efe86f5fa0c69b37e9212e062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C_QRd5-TFKdUwqnALcH1fg.png"/></div></div></figure></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><div class="ma mb mc md gt mw"><a href="https://www.npmjs.com/package/react-infinite-loader" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd io gy z fp nb fr fs nc fu fw im bi translated">无限加载器</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">一个基于 react 的无限加载器 react 组件-访问 npm 安装 react-无限加载器-保存添加无限…</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">www.npmjs.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jt mw"/></div></div></a></div><p id="1517" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将 react-infinite-loader npm 包用于您自己的 react 应用程序，并保持您的用户滚动。</p></div></div>    
</body>
</html>