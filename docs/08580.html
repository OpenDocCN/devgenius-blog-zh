<html>
<head>
<title>Flutter: What is Equatable?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">扑:什么是等价的？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/flutter-equatable-f589a16b3744?source=collection_archive---------1-----------------------#2022-06-26">https://blog.devgenius.io/flutter-equatable-f589a16b3744?source=collection_archive---------1-----------------------#2022-06-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4f67b81e4093397c42162a5f0135065e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLupDtQcsJpT1vwM3UQZ8A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">封面设计</figcaption></figure><p id="1030" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我以问你一个问题开始这篇文章，下面的程序的输出会是什么？真的还是假的？</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kx"><img src="../Images/4dd48526d7ea7c19f310119775705496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PiVzyF17sYZ7xetH21-1pQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">猜测产量？</figcaption></figure><p id="8397" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">输出是<strong class="kb io">假</strong>，你可能会觉得奇怪，但让我告诉你怎么回事！</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/b48c47185b8fa8d61274fb8e248bf1e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:720/0*VJ4TXRBDeSZEh2Kv.gif"/></div></figure><p id="b89b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">默认情况下，<strong class="kb io"> <em class="ld"> == </em> </strong>比较运算符比较对象，只有当它们是同一个对象(a==a)时才会返回 true。但是我们可以通过实现一个覆盖来覆盖这个行为。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi le"><img src="../Images/e849bdd4e6e3345d3b431172f0414fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFUmJ3n0T6Bxbymen200Rw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">覆盖实现</figcaption></figure><p id="94da" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这次它返回<strong class="kb io"> true </strong>，因为我们已经更改了==操作符的实现，所以如果名称、年龄和运行时类型相同，它将返回 true。</p><p id="e4ce" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们还没有完成，因为这些对象的<strong class="kb io"> hashCodes </strong>仍然与输出中观察到的不一样。(哈希代码是代表对象状态的单个整数)</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lf"><img src="../Images/540443cd3a6d9fd952be422225fbbeaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gIi3X20eJTbWXuqnjESuuw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">关注输出，以便更快地理解它</figcaption></figure><p id="68b4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">根据<code class="fe lg lh li lj b"><em class="ld">operator ==</em></code>，对于彼此相等的对象，散列码必须相同。如果<code class="fe lg lh li lj b"><em class="ld">operator ==</em></code>被覆盖，那么散列码也必须被改变以表示该状态，否则，该对象不能在基于散列的数据结构中使用，如默认的<strong class="kb io">集合和映射</strong>实现。因此，我们需要覆盖<strong class="kb io"> hashCode </strong>实现，并加入我们的<code class="fe lg lh li lj b">==</code>实现变更。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lk"><img src="../Images/6fd77f89db9f33375c0306e5e3db9203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8UvYNYHGVJFveGY0ZxcD8Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">关注输出，以便更快地理解它</figcaption></figure><p id="34b1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">好了，现在<strong class="kb io"> hashCodes </strong>也是一样的，它不会给 Map 或 Set 实现带来任何麻烦。</p><p id="6daf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">但是啊！光是告诉编译器如何比较两个对象就要做很多工作！如果我们在 Person 类中再增加一个<code class="fe lg lh li lj b">email</code>的成员变量会怎么样？很多样板代码，对吗？</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/5f7f902ab56926cda97c85c8741c1108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*4sgfJVPGBjjQ5ocv.gif"/></div></figure><p id="bb4b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这就是当<a class="ae lm" href="https://pub.dev/packages/equatable" rel="noopener ugc nofollow" target="_blank">等同于</a>进入故事的时候！它为您编写了所有的样板代码。</p><p id="7a69" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">将 equatable 添加为依赖项:</p><pre class="ky kz la lb gt ln lj lo lp aw lq bi"><span id="cb4b" class="lr ls in lj b gy lt lu l lv lw">dependencies:<br/>  equatable: ^2.0.0</span></pre><p id="f854" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">用<strong class="kb io">等价的</strong>扩展你的类，在 props 里定义你的比较成员，像这样:</p><pre class="ky kz la lb gt ln lj lo lp aw lq bi"><span id="99df" class="lr ls in lj b gy lt lu l lv lw">import 'package:equatable/equatable.dart';<br/><br/>class Person extends Equatable {<br/>  const Person({this.name, this.age});<br/><br/>  final String name;<br/>  final int age;</span><span id="f3c5" class="lr ls in lj b gy lx lu l lv lw"><br/>  @override<br/>  List&lt;Object&gt; get props =&gt; [name, age];<br/>}</span></pre><p id="e405" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">仅此而已，它为您编写了所有的锅炉代码。您的代码保持可读，并且在向您的类中添加任何新的成员变量时，您不必惊慌。</p><p id="066d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">感谢你的阅读，为它鼓掌或者请我喝杯咖啡！</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><a href="https://www.buymeacoffee.com/hussainhabib"><div class="gh gi ly"><img src="../Images/c1ee2f589cd09623cbdf063bf6c50b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*dRxpOXApZorXsroKDPQkOg.png"/></div></a></figure></div></div>    
</body>
</html>