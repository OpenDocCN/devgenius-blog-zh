<html>
<head>
<title>Java 8: 3 Things You Must Know About Optional</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java 8: 3 关于可选的你必须知道的事情</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/java-8-3-things-you-must-know-about-optional-a96485c0d2be?source=collection_archive---------8-----------------------#2022-11-20">https://blog.devgenius.io/java-8-3-things-you-must-know-about-optional-a96485c0d2be?source=collection_archive---------8-----------------------#2022-11-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="d630" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph"><strong class="ak">软件工程之旅</strong></h2><div class=""/><div class=""><h2 id="709d" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">软件工程师更好地理解 Java 中的可选性</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/216a9c175e291eb54aedd86200fcc11d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lqnNhkMdDj5hP4ww"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk translated">来自 unsplash.com<a class="ae le" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">的<a class="ae le" href="https://unsplash.com/@4xel" rel="noopener ugc nofollow" target="_blank">阿克塞尔·鲁芬尼</a>的照片</a></figcaption></figure><h1 id="78dc" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">概观</h1><p id="621b" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">在这篇文章中，我将介绍 Java 中的可选。通过使用 Optional，您总是可以为您的方法返回一个结果，这也有助于我们避免在 Java 应用程序中经常遇到的 NullPointerException。</p><h1 id="48c0" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">#1 可选创作</h1><p id="5589" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">像 Java 中的许多其他对象一样，要使用 Optional 我们需要创建它的实例。为了创建可选的实例，我们有两种方法。如下例所示:</p><pre class="kp kq kr ks gt mt mu mv bn mw mx bi"><span id="ed36" class="my lg iq mu b be mz na l nb nc">import java.util.Optional;<br/><br/>public class Creation {<br/><br/>    /**<br/>     * Example using Optional's of<br/>     */<br/>    private static void optionalOf() {<br/>        System.out.println("Optional's of:");<br/>        String s1 = "Normal case";<br/>        String s2 = null;<br/><br/>        System.out.println(Optional.of(s1));<br/><br/>        try {<br/>            System.out.println(Optional.of(s2));<br/>        } catch (NullPointerException ex) {<br/>            System.out.println("Throw NullPointerException");<br/>        }<br/><br/>    }<br/><br/>    /**<br/>     * Example using Optional's ofNullable<br/>     */<br/>    private static void optionalOfNullable() {<br/>        System.out.println("Optional's ofNullable:");<br/>        String s1 = "Normal case";<br/>        String s2 = null;<br/>        System.out.println(Optional.ofNullable(s1));<br/>        System.out.println(Optional.ofNullable(s2));<br/><br/>    }<br/><br/>    public static void main(String[] args) {<br/>        optionalOf();<br/>        System.out.println();<br/>        optionalOfNullable();<br/>    }<br/>}</span></pre><p id="6979" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">下面是上面代码的结果:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ni"><img src="../Images/b49417cead4ddc48aa0b3d9ae7d6cea8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-6B5xxrJkeaFgLt4"/></div></div></figure><p id="d8ce" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">在为 optional 创建实例时，of 和 ofNullable 之间的区别在于，第一个会在值为 Null 的情况下给出一个 NullPointerException，第二个会给出一个空的 optional。因此，它取决于你想得到的值，你可以决定你想用哪种方式。</p><h1 id="1f95" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">#2 可选值返回</h1><p id="37ef" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">通过使用 Optional，我们有 4 种方法从 Optional 中获取返回值。每种方式都会给出相应的数据选项。让我们深入下面的例子来弄清楚它。</p><pre class="kp kq kr ks gt mt mu mv bn mw mx bi"><span id="e0e6" class="my lg iq mu b be mz na l nb nc">import java.util.NoSuchElementException;<br/>import java.util.Optional;<br/><br/>public class ValueGetBack {<br/>    /**<br/>     * Example using Optional's get<br/>     */<br/>    private static void optionalGet() {<br/>        System.out.println("Optional's get:");<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("test");<br/>        Optional&lt;String&gt; op2 = Optional.ofNullable(null);<br/><br/>        System.out.println("Get: " + op1.get());<br/>        try {<br/>            op2.get();<br/>        } catch (NoSuchElementException ex) {<br/>            System.out.println("Throw NoSuchElementException");<br/>        }<br/><br/><br/>    }<br/><br/>    /**<br/>     * Example using Optional's orElse<br/>     */<br/>    private static void optionalOrElse() {<br/>        System.out.println("Optional's orElse:");<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("test");<br/>        Optional&lt;String&gt; op2 = Optional.ofNullable(null);<br/>        System.out.println("orElse: " + op1.orElse("Empty"));<br/>        System.out.println("orElse: " + op2.orElse("Empty"));<br/>    }<br/><br/>    /**<br/>     * Example using Optional's orElseGet<br/>     */<br/>    private static void optionalOrElseGet() {<br/>        System.out.println("Optional's orElseGet:");<br/>        String empty = "Empty";<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("test");<br/>        Optional&lt;String&gt; op2 = Optional.ofNullable(null);<br/>        System.out.println("orElseGet: " + op1.orElseGet(empty::toString));<br/>        System.out.println("orElseGet: " + op2.orElseGet(empty::toString));<br/>    }<br/><br/>    /**<br/>     * Example using Optional's orElseThrow<br/>     */<br/>    private static void optionalOrElseThrow() {<br/>        Throwable emptyThrow = new Throwable("Empty data");<br/>        System.out.println("Optional's orElseThrow:");<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("test");<br/>        Optional&lt;String&gt; op2 = Optional.ofNullable(null);<br/>        try {<br/>            System.out.println("orElseThrow: " + op1.orElseThrow(emptyThrow::getCause));<br/>            System.out.println("orElseThrow: " + op2.orElseThrow(emptyThrow::getCause));<br/><br/>        } catch (Throwable e) {<br/>            System.out.println("Show throw orElseThrow: " + e.getMessage());<br/>        }<br/><br/>    }<br/><br/>    public static void main(String[] args) {<br/>        optionalGet();<br/>        System.out.println();<br/>        optionalOrElse();<br/>        System.out.println();<br/>        optionalOrElseGet();<br/>        System.out.println();<br/>        optionalOrElseThrow();<br/>    }<br/>}</span></pre><p id="a1c0" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">下面是上面代码的结果:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nj"><img src="../Images/714227c9e1241de22c4a304ca209919f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6xQH4n2mUvw1SB8O"/></div></div></figure><p id="916a" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">以下是使用上述可选功能的一些详细说明:</p><p id="2e05" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">- get:如果这个可选中存在一个值，则返回该值，否则抛出 NoSuchElementException。</p><p id="ed4e" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">- orElse:如果存在，则返回该值，否则返回另一个。</p><p id="953c" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">- orElseGet:如果存在，则返回值，否则调用另一个并返回该调用的结果。</p><p id="973b" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">-orelsthrow:返回包含的值(如果存在)，否则抛出一个由提供的供应商创建的异常。</p><h1 id="aaab" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">#3 可选功能</h1><p id="51a2" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">除了创造和价值，可选的还提供了一些额外的功能。现在，让我们通过例子来看看可选作品中的功能。</p><pre class="kp kq kr ks gt mt mu mv bn mw mx bi"><span id="8502" class="my lg iq mu b be mz na l nb nc">import java.util.Optional;<br/>import java.util.function.Consumer;<br/>import java.util.function.Function;<br/>import java.util.function.Predicate;<br/><br/>public class AdditionalFunctions {<br/>    /**<br/>     * Example using Optional's filter<br/>     */<br/>    private static void optionalFilter() {<br/>        System.out.println("Optional's filter:");<br/>        Predicate&lt;String&gt; filterCondition = str -&gt; "test".equals(str);<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("test");<br/>        System.out.println("Filter: " + op1.filter(filterCondition).orElse("Optional empty"));<br/>        System.out.println("Filter: " +op1.filter(filterCondition.negate()).orElse("Optional empty"));<br/><br/>    }<br/><br/>    /**<br/>     * Example using Optional's flatMap<br/>     */<br/>    private static void optionalFlatMap() {<br/>        System.out.println("Optional's flatMap:");<br/>        Function&lt;String, Optional&lt;Integer&gt;&gt; optionalLength = x -&gt; Optional.ofNullable(x.length());<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("test");<br/>        System.out.println("Flatmap for string length: " + op1.flatMap(optionalLength).get());<br/>    }<br/><br/>    /**<br/>     * Example using Optional's ifPresent<br/>     */<br/>    private static void optionalIfPresent() {<br/>        System.out.println("Optional's ifPresent:");<br/>        Consumer&lt;String&gt; printConsumer =  System.out::println;<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("test");<br/>        Optional&lt;String&gt; op2 = Optional.ofNullable(null);<br/>        op1.ifPresent(printConsumer);<br/>        op2.ifPresent(printConsumer);<br/>    }<br/><br/>    /**<br/>     * Example using Optional's isPresent<br/>     */<br/>    private static void optionalIsPresent() {<br/>        System.out.println("Optional's isPresent:");<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("test");<br/>        Optional&lt;String&gt; op2 = Optional.ofNullable(null);<br/>        if (op1.isPresent()) {<br/>            System.out.println("isPresent:" + op1.get());<br/>        }<br/><br/>        if (op2.isPresent()) {<br/>            System.out.println("isPresent:" + op2.get());<br/>        }<br/><br/>    }<br/><br/>    /**<br/>     * Example using Optional's map<br/>     */<br/>    private static void optionalMap() {<br/>        System.out.println("Optional's map:");<br/>        Function&lt;String, Integer&gt; toInteger = x -&gt; Integer.valueOf(x);<br/>        Optional&lt;String&gt; op1 = Optional.ofNullable("55");<br/>        System.out.println("It's an integer value: " + (1 + op1.map(toInteger).get()));<br/>    }<br/><br/>    public static void main(String[] args) {<br/>        optionalFilter();<br/>        System.out.println();<br/>        optionalFlatMap();<br/>        System.out.println();<br/>        optionalIfPresent();<br/>        System.out.println();<br/>        optionalIsPresent();<br/>        System.out.println();<br/>        optionalMap();<br/>    }<br/>}</span></pre><p id="49bf" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">下面是上面代码的结果:</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi nk"><img src="../Images/389f5347ae5558cddc313b5876e7e7d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3z2i4wiukD16skQq"/></div></div></figure><p id="95a6" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">同样，下面是对上述功能的详细描述:</p><p id="facc" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">- filter:如果存在一个值，并且该值与给定的谓词匹配，则返回一个描述该值的可选值，否则返回一个空可选值。</p><p id="cb6b" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">- flatMap:如果存在一个值，则将提供的可选映射函数应用于该值，返回结果，否则返回一个空的可选值。</p><p id="bd41" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">- ifPresent:如果值存在，则使用该值调用指定的使用者，否则不执行任何操作。</p><p id="bdaf" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">- isPresent:如果存在值，则返回 true，否则返回 false。</p><p id="2825" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated">- map:如果存在一个值，则对其应用提供的映射函数，如果结果为非空，则返回一个描述结果的可选值。</p><h1 id="e440" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">摘要</h1><p id="c5ed" class="pw-post-body-paragraph lx ly iq lz b ma mb ka mc md me kd mf mg mh mi mj mk ml mm mn mo mp mq mr ms ij bi translated">为了在你的代码中频繁地应用可选，你需要很好的了解它。通过这篇文章，我认为你已经对可选的有了更好的了解，并且可以很容易地把它应用到你的代码中。希望这些内容对你有所帮助，让你更好地掌握 java 技能。谢谢大家！</p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="bcfa" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated"><em class="ns">如果你喜欢这个故事，你也会喜欢:</em></p><ul class=""><li id="38e8" class="nt nu iq lz b ma nd md ne mg nv mk nw mo nx ms ny nz oa ob bi translated"><a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/java-18-top-4-features-you-must-know-1f36ee23e2ab"> <em class="ns"> Java 18: 4 特性你必须知道</em> </a></li><li id="d12e" class="nt nu iq lz b ma oc md od mg oe mk of mo og ms ny nz oa ob bi translated"><a class="ae le" href="https://medium.com/@techisbeautiful/new-features-you-must-know-in-java-11-and-examples-3fda2ad26def" rel="noopener"> <em class="ns">你必须知道的 Java 11: 8 特性</em> </a></li><li id="79f7" class="nt nu iq lz b ma oc md od mg oe mk of mo og ms ny nz oa ob bi translated"><a class="ae le" rel="noopener ugc nofollow" target="_blank" href="/java-8-seven-features-you-must-know-and-examples-1c3964ae7fe8"> <em class="ns">你必须知道的 Java 8 : 7 特性</em> </a></li></ul><p id="65c7" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated"><em class="ns">喜欢这篇文章？给我拿个</em><a class="ae le" href="https://ko-fi.com/techisbeautiful" rel="noopener ugc nofollow" target="_blank"><em class="ns">Ko-fi</em></a><em class="ns">。</em></p><p id="03d0" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated"><em class="ns">爱我的文字？加入我的</em> <a class="ae le" href="https://medium.com/subscribe/@techisbeautiful" rel="noopener"> <em class="ns">邮箱列表</em> </a> <em class="ns">。</em></p><p id="e762" class="pw-post-body-paragraph lx ly iq lz b ma nd ka mc md ne kd mf mg nf mi mj mk ng mm mn mo nh mq mr ms ij bi translated"><em class="ns">爱读书？加入</em> <a class="ae le" href="https://medium.com/@techisbeautiful/membership" rel="noopener"> <em class="ns">中等</em> </a> <em class="ns">(如果你用这个链接，也是支持我的，因为我有来自中等的小提成)。</em></p></div></div>    
</body>
</html>