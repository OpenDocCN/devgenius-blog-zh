<html>
<head>
<title>Build Xamarin apps with VS Code to M1 Macs, iPhones &amp; Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 VS 代码为 M1 苹果电脑、iPhones 和 Android 开发 Xamarin 应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/build-xamarin-apps-with-vs-code-to-m1-macs-iphones-android-11bc158f3773?source=collection_archive---------0-----------------------#2021-05-06">https://blog.devgenius.io/build-xamarin-apps-with-vs-code-to-m1-macs-iphones-android-11bc158f3773?source=collection_archive---------0-----------------------#2021-05-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ba16" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你不需要打开 IDE，在终端中开始构建应用程序</h2></div><p id="2f90" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在不同的论坛上有许多问题，开发人员询问如何使用终端/CLI 构建 Xamarin 应用程序。用于 Xamarin 跨平台开发的主要软件/程序是微软的 Visual Studio。 Visual Studio 被归类为用于构建 Xamarin 应用程序的集成开发环境(IDE)。因此，它拥有构建、调试和发布应用程序所需的所有功能。这自然使得 Visual Studio 体积庞大&amp;比仅仅使用 CLI 构建要慢。</p><p id="0e68" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">几十年来，软件开发人员在可能的情况下更喜欢使用轻量级的文本编辑器，因为它们修改起来既漂亮又快捷，因为很多任务不需要复杂的 IDE。微软的<a class="ae lb" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio 代码</a>是<a class="ae lb" href="https://insights.stackoverflow.com/survey/2020#technology-how-technologies-are-connected" rel="noopener ugc nofollow" target="_blank">最受开发者欢迎的文本编辑器</a>，拥有<a class="ae lb" href="https://marketplace.visualstudio.com/vscode" rel="noopener ugc nofollow" target="_blank">无数免费扩展</a>来增强开发者体验。</p><p id="9d8d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请注意，以下步骤不支持调试，iOS 命令需要在 Mac 上完成，并且如果您没有在 Apple Developer portal 中正确地<a class="ae lb" href="https://www.youtube.com/watch?v=DPCtq2whqg4" rel="noopener ugc nofollow" target="_blank">设置您的开发证书和预置描述文件</a>，构建将无法在 iPhones 和 Mac 上工作(<a class="ae lb" href="https://docs.microsoft.com/en-us/xamarin/ios/get-started/installation/device-provisioning/free-provisioning?tabs=macos" rel="noopener ugc nofollow" target="_blank">按照这些步骤</a>进行临时设置)。</p><p id="364f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="lc">第一个雏形是一个新兴的移动 App 设计开发咨询小企业，专门做</em> <a class="ae lb" href="https://thefirstprototype.com/mobile-app-development-detroit-ios-android.html" rel="noopener ugc nofollow" target="_blank"> <em class="lc">跨平台和原生 iOS&amp;Android apps</em></a><em class="lc">。在</em> <a class="ae lb" href="https://thefirstprototype.com" rel="noopener ugc nofollow" target="_blank"> <em class="lc">我们的网站</em> </a> <em class="lc">，和</em> <a class="ae lb" href="http://twitter.com/prototypemakers" rel="noopener ugc nofollow" target="_blank"> <em class="lc">支持</em> </a> <em class="lc">我们在</em> <a class="ae lb" href="http://instagram.com/prototypemakers" rel="noopener ugc nofollow" target="_blank"> <em class="lc">社交媒体</em> </a> <em class="lc">上注册，了解我们在 iOS 上的 5 星</em> <a class="ae lb" href="https://apps.apple.com/app/numberbomb/id1560372045" rel="noopener ugc nofollow" target="_blank"> <em class="lc">数字炸弹游戏</em><em class="lc">&amp;</em></a><a class="ae lb" href="https://play.google.com/store/apps/details?id=com.tfp.numberbomb" rel="noopener ugc nofollow" target="_blank"><em class="lc">安卓&amp;等项目中的简单创新</em></a></p><p id="7b6f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于所有这些步骤，您需要安装 VS 代码，然后打开包含您的 Xamarin 解决方案文件的目录。然后在工具栏中选择“终端”-&gt;“新建终端”来打开终端。使用<code class="fe ld le lf lg b">nuget restore</code>命令恢复 nuget 包。然后，根据您想要构建的平台，按照下面的步骤，简单地用您的项目名称替换<code class="fe ld le lf lg b">Sample</code>:</p><h2 id="21b8" class="lh li iq bd lj lk ll dn lm ln lo dp lp ko lq lr ls ks lt lu lv kw lw lx ly lz bi translated">使用 VS 代码构建和部署到 Android 的步骤</h2><ol class=""><li id="28ea" class="ma mb iq kh b ki mc kl md ko me ks mf kw mg la mh mi mj mk bi translated">在你的终端中，运行这个<code class="fe ld le lf lg b">msbuild Sample.Android/Sample.Android.csproj /verbosity:normal /t:Rebuild /t:PackageForAndroid /t:SignAndroidPackage /p:Configuration=Debug</code></li><li id="0a8a" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">然后，使用<code class="fe ld le lf lg b">cd Sample.Android/bin/Debug</code>切换目录，找到已签名的 APK 文件。</li><li id="cbeb" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">使用<a class="ae lb" href="https://docs.microsoft.com/en-us/xamarin/android/get-started/installation/set-up-device-for-development#connecting-over-wifi" rel="noopener ugc nofollow" target="_blank"> ADB(Android 调试桥)</a>，用这个命令<code class="fe ld le lf lg b">adb install com.tfp.sample-Signed.apk</code>、<a class="ae lb" href="https://stackoverflow.com/questions/7076240/install-an-apk-file-from-command-prompt/7076679#7076679" rel="noopener ugc nofollow" target="_blank">安装到你的设备/仿真器上，这里解释</a>。</li></ol><h2 id="54a6" class="lh li iq bd lj lk ll dn lm ln lo dp lp ko lq lr ls ks lt lu lv kw lw lx ly lz bi translated">使用 VS 代码构建和部署 iOS 模拟器的步骤</h2><ol class=""><li id="8dde" class="ma mb iq kh b ki mc kl md ko me ks mf kw mg la mh mi mj mk bi translated">在您的终端中，运行此<code class="fe ld le lf lg b">msbuild Sample.iOS/Sample.iOS.csproj /verbosity:normal /t:Rebuild /p:Platform=iPhoneSimulator /p:Configuration=Debug</code></li><li id="b629" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">然后，使用<code class="fe ld le lf lg b">cd Sample.iOS/bin/iPhoneSimulator/Debug</code>更改目录，找到 Sample.iOS APP 文件，</li><li id="840e" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">只需将该文件拖放到您的模拟器中进行安装，或者您可以只运行<code class="fe ld le lf lg b">xcrun simctl install booted Sample.iOS.app</code>。</li></ol><h2 id="6e7d" class="lh li iq bd lj lk ll dn lm ln lo dp lp ko lq lr ls ks lt lu lv kw lw lx ly lz bi translated">使用 VS 代码构建和部署到 iPhone 设备的步骤</h2><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi mq"><img src="../Images/632f21eaaa6fc76e7fc1859e9eec749e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jmcRqNysyJIfjWqXUKBGHQ.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">使用 Xcode 的设备和模拟器来直接安装应用程序</figcaption></figure><ol class=""><li id="77a4" class="ma mb iq kh b ki kj kl km ko ng ks nh kw ni la mh mi mj mk bi translated">在你的终端中，运行这个<code class="fe ld le lf lg b">msbuild Sample.iOS/Sample.iOS.csproj /verbosity:normal /t:Rebuild /p:Platform=iPhone /p:Configuration=Debug</code></li><li id="59aa" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">然后，去<code class="fe ld le lf lg b">Sample.iOS/bin/iPhone/Debug</code>找到<code class="fe ld le lf lg b">Sample.iOS</code> APP 文件</li><li id="1c3b" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">连接 iPhone 并解锁后，打开 Xcode-&gt; Window-&gt; Devices &amp; Simulators-&gt;点击+号并选择应用程序文件。</li></ol><h2 id="df02" class="lh li iq bd lj lk ll dn lm ln lo dp lp ko lq lr ls ks lt lu lv kw lw lx ly lz bi translated">使用 VS 代码在 Mac M1 上构建和安装 Xamarin 应用程序的步骤</h2><figure class="mr ms mt mu gt mv gh gi paragraph-image"><div role="button" tabindex="0" class="mw mx di my bf mz"><div class="gh gi nj"><img src="../Images/014b95894e92b5b3de2178fc26ea8fd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E_4rOtwKgPVpWCJDGYM0nw.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">双击空白处，iOS.ipa 会自动安装</figcaption></figure><ol class=""><li id="d5ea" class="ma mb iq kh b ki kj kl km ko ng ks nh kw ni la mh mi mj mk bi translated">在您的终端中，如果您还没有为上面的 iPhone 运行它，请运行此<code class="fe ld le lf lg b">msbuild Sample.iOS/Sample.iOS.csproj /verbosity:normal /t:Rebuild /p:Platform=iPhone /p:Configuration=Debug</code></li><li id="bb63" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">然后，使用<code class="fe ld le lf lg b">cd Sample.iOS/bin/iPhone/Debug/Sample.iOS.app</code>进入 app 文件的包内容。</li><li id="56a5" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la mh mi mj mk bi translated">最后，使用<code class="fe ld le lf lg b">zip -r Blank.iOS.ipa ./</code>创建 ipa，双击它安装到 MacOS 应用程序目录，然后打开。</li></ol></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h1 id="8bdd" class="nr li iq bd lj ns nt nu lm nv nw nx lp jw ny jx ls jz nz ka lv kc oa kd ly ob bi translated">其他注意事项</h1><ul class=""><li id="7552" class="ma mb iq kh b ki mc kl md ko me ks mf kw mg la oc mi mj mk bi translated">您可以同时运行多个命令，将<code class="fe ld le lf lg b">&amp;&amp;</code>放在多个独立的命令之间，这样您就不必手动执行每个步骤。</li><li id="baee" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la oc mi mj mk bi translated">如果您的 iPhone 模拟器版本有问题，您可以打开 Visual Studio，并在 iOS 项目设置中，将调试 iOS 模拟器捆绑签名标识和预置描述文件设置为自动。</li><li id="0cd9" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la oc mi mj mk bi translated">如果您的 iPhone/Mac M1 部署有问题，请确保安装的 Apple 开发者证书和预置描述文件与您的<code class="fe ld le lf lg b">info.plist</code>文件中的应用程序的授权和捆绑标识符完全对应。</li><li id="02d2" class="ma mb iq kh b ki ml kl mm ko mn ks mo kw mp la oc mi mj mk bi translated">除了<code class="fe ld le lf lg b">/t:Rebuild</code>，你还可以使用<code class="fe ld le lf lg b">/t:Build</code>来加快速度</li></ul><p id="c28e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时在追求知识的过程中，你会偶然发现比你最初寻找的更有价值的其他知识。不久前，我写了一篇关于 GitHub Actions 的文章，但是我没有发现任何其他文章将它提升到一个新的水平。我在为高级 GitHub Actions 文章(即将发布)进行研究时学到了这些很酷的技巧，所以我希望你也同样对它们感到兴奋！这里有一个简短的视频展示了所有这些工作:</p><figure class="mr ms mt mu gt mv"><div class="bz fp l di"><div class="od oe l"/></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk translated">Android、iPhone 和 Mac M1 部署和安装的视频演示</figcaption></figure></div></div>    
</body>
</html>