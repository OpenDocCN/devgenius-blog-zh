<html>
<head>
<title>How to Convert a JavaScript Array to JSON Format</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将 JavaScript 数组转换成 JSON 格式</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-convert-a-javascript-array-to-json-format-94daf35b8c21?source=collection_archive---------0-----------------------#2020-12-30">https://blog.devgenius.io/how-to-convert-a-javascript-array-to-json-format-94daf35b8c21?source=collection_archive---------0-----------------------#2020-12-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9e7e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">当您有一个数组并且需要 JSON 格式时，您可以格式化整个数组，也可以使用<code class="fe kf kg kh ki b">.map()</code>函数格式化单个项。</h2></div><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/6c4cea876427aeaeeb0547740cdb3087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*szS5mfMLxvaygsUx"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">照片由<a class="ae kz" href="https://unsplash.com/@verstuyftj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Jonas Verstuyft </a>在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a></figcaption></figure><h1 id="4177" class="la lb iq bd lc ld le lf lg lh li lj lk jw ll jx lm jz ln ka lo kc lp kd lq lr bi translated">JavaScript 中数组的 JSON 格式</h1><p id="6cfc" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">使用<a class="ae kz" href="https://medium.com/swlh/what-is-json-used-for-in-javascript-programming-9d71284359a9" rel="noopener">JSON(JavaScript Object Notation)</a>可以方便地将 JavaScript 对象作为文本数据使用，这就是为什么我们在如此多的项目中看到<a class="ae kz" href="https://medium.com/swlh/what-is-json-used-for-in-javascript-programming-9d71284359a9" rel="noopener"> JSON 格式的</a>配置文件，如<code class="fe kf kg kh ki b"><a class="ae kz" href="https://prettier.io/docs/en/configuration.html" rel="noopener ugc nofollow" target="_blank">.prettierrc</a></code>(用于<a class="ae kz" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">更漂亮的</a>)和<code class="fe kf kg kh ki b"><a class="ae kz" href="https://eslint.org/docs/user-guide/configuring" rel="noopener ugc nofollow" target="_blank">.eslintrc</a></code>(用于<a class="ae kz" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>)。</p><p id="8bba" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">有理由使用普通的<code class="fe kf kg kh ki b">.js</code> JavaScript 文件而不是 JSON 文件来存储数据，比如<a class="ae kz" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> webpack </a>如何使用<code class="fe kf kg kh ki b"><a class="ae kz" href="https://webpack.js.org/configuration/" rel="noopener ugc nofollow" target="_blank">webpack.config.js</a></code>文件。例如，某些值不是<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description" rel="noopener ugc nofollow" target="_blank"> JSON 安全的</a>，比如<code class="fe kf kg kh ki b"><a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-check-for-null-in-javascript-dffab64d8ed5" rel="noopener">null</a></code>。</p><p id="ab6c" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">也就是说，如果您的数据包含典型的<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" rel="noopener ugc nofollow" target="_blank">原始类型</a>，如<a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-check-for-a-string-in-javascript-a16b196915ff" rel="noopener">字符串</a>和<a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-check-for-a-number-in-javascript-8d9024708153" rel="noopener">数字</a>，JSON 格式仍然非常有用。JSON 语法使用<code class="fe kf kg kh ki b">[]</code>方括号语法<a class="ae kz" href="https://json-schema.org/understanding-json-schema/reference/array.html" rel="noopener ugc nofollow" target="_blank">来表示数组</a>。</p><h2 id="93b9" class="mt lb iq bd lc mu mv dn lg mw mx dp lk mb my mz lm mf na nb lo mj nc nd lq ne bi translated"><strong class="ak">那么如何将 JavaScript 数组转换成 JSON 格式呢？</strong></h2><p id="3115" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma mb mc md me mf mg mh mi mj mk ml mm mn ij bi translated">这个问题的答案取决于您是希望将整个数组保存为一个 JSON 字符串，还是希望将数组中的项分别转换为 JSON 字符串。</p><p id="f2e5" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">通过调用数组上的<code class="fe kf kg kh ki b"><a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-use-stringify-and-parse-in-javascript-6b637b571a32" rel="noopener">JSON.stringify()</a></code>将整个数组转换成 JSON 作为一个对象，这将产生一个 JSON 字符串。要从 JSON 转换回一个数组，你可以在字符串上调用<code class="fe kf kg kh ki b"><a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-use-stringify-and-parse-in-javascript-6b637b571a32" rel="noopener">JSON.parse()</a></code>，留下原始数组。</p><p id="3414" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">要将数组中的每一项转换成 JSON 格式，那么您需要对数组进行循环。这是使用<code class="fe kf kg kh ki b">.map()</code> ( <code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener ugc nofollow" target="_blank">Array.prototype.map()</a></code>)的好时机，将数组中的每一项转换成 JSON。</p><p id="644a" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">在我关于通过内容寻找唯一对象的文章中，我在一个<code class="fe kf kg kh ki b">.map()</code>调用中使用了一个类似的例子<code class="fe kf kg kh ki b">JSON.parse()</code>，我比较了每个对象的 JSON 字符串的唯一性。<a class="ae kz" href="https://medium.com/p/e698b7957736" rel="noopener">找到唯一的字符串</a>是<a class="ae kz" href="https://medium.com/better-programming/why-you-should-make-your-code-as-simple-as-possible-3b35e89f137" rel="noopener">简单的</a>使用<code class="fe kf kg kh ki b"><a class="ae kz" href="https://medium.com/coding-at-dawn/how-to-use-set-to-filter-unique-items-in-javascript-es6-196c55ce924b" rel="noopener">Set</a></code>，产生一个唯一对象的数组。</p><p id="06a9" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">让我们来看一个在 JavaScript 中将数组与 JSON 格式相互转换的代码示例:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nf"><img src="../Images/d8b6061a2eacd4fd7b1996aef135e9d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bi-CtyecfXkaF-4wNjOWDg.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/DoctorDerek/0b24deed7af25df3ac0f0c5738fc7267" rel="noopener ugc nofollow" target="_blank">将原始代码</a>视为 GitHub 要点</figcaption></figure><p id="3ceb" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">我们通过使用<code class="fe kf kg kh ki b">stringify()</code>生成一个 JSON 字符串，将数组转换成 JSON 格式。调用<code class="fe kf kg kh ki b">parse()</code>从 JSON 字符串创建一个对象与这个过程相反，会产生一个数组。</p><p id="552a" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">将数组中的每一项转换成 JSON 格式的工作方式略有不同，因为您必须添加一个<code class="fe kf kg kh ki b">.map()</code>调用。例如，如果您有一个对象的<a class="ae kz" href="https://medium.com/better-programming/how-to-find-unique-objects-in-an-array-in-javascript-by-object-reference-or-key-value-pairs-131338898d7a" rel="noopener">数组，这可能是您想要的解决方案。</a></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi ng"><img src="../Images/33c08622a45e773111b1f7d4e94fc7b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qbj39qjnjI01PVvmUsZv8A.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://gist.github.com/DoctorDerek/0b24deed7af25df3ac0f0c5738fc7267" rel="noopener ugc nofollow" target="_blank">查看原始代码</a>作为 GitHub 要点</figcaption></figure><p id="2d55" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">我希望这能清楚地说明在数组上调用<code class="fe kf kg kh ki b">JSON.stringify()</code>与使用<code class="fe kf kg kh ki b">.map()</code>将数组中的每一项单独转换成 JSON 格式之间的区别。</p><p id="3a74" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">当您希望将整个数组存储为一个文件时，可以将整个数组转换为 JSON 格式，作为一个 JSON 字符串。但是如果你有一个数组值，你想以 JSON 格式单独存储，你需要<code class="fe kf kg kh ki b">.map()</code>每个数组元素到它的 JSON 字符串。</p><p id="57ea" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">虽然我在数组中只使用了基本类型，但这两种方法都适用于包含其他对象的数组:内部嵌套了其他对象的“嵌套数组”。事实上，您甚至可以使用<code class="fe kf kg kh ki b">JSON.parse()</code>结合<code class="fe kf kg kh ki b">JSON.stringify()</code>来"<a class="ae kz" href="https://medium.com/javascript-in-plain-english/how-to-deep-copy-objects-and-arrays-in-javascript-7c911359b089" rel="noopener">深度复制</a>嵌套对象——只要要克隆的对象中只有<a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description" rel="noopener ugc nofollow" target="_blank"> JSON-safe </a>数据。</p><p id="3c1b" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated">要将 JavaScript 数组转换成 JSON，可以利用全局 <code class="fe kf kg kh ki b"><a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" rel="noopener ugc nofollow" target="_blank">JSON</a></code> <a class="ae kz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" rel="noopener ugc nofollow" target="_blank">对象</a>上的<code class="fe kf kg kh ki b">.stringify()</code>和<code class="fe kf kg kh ki b">.parse()</code>方法。</p><p id="16d1" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated"><strong class="lu ir">快乐编码！🎭🧶😸💻🧠 </strong></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nh"><img src="../Images/c12ae9978f977c0c8b5135f833b6602e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pnEhA9UU6Z0_gzV_v_0ogw.jpeg"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">Jonas Verstuyft 在<a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div><div class="ab cl ni nj hu nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ij ik il im in"><p id="b594" class="pw-post-body-paragraph ls lt iq lu b lv mo jr lx ly mp ju ma mb mq md me mf mr mh mi mj ms ml mm mn ij bi translated"><a class="ae kz" href="https://www.linkedin.com/in/derek-austin/" rel="noopener ugc nofollow" target="_blank">德里克·奥斯汀博士</a>是《职业规划:如何在 6 个月内成为一名成功的 6 位数程序员 》一书的作者，该书现已在亚马逊上架。</p></div></div>    
</body>
</html>