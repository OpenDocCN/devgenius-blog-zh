<html>
<head>
<title>Developing Vue Apps with Class-Based Components — Mixins and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用基于类的组件开发Vue应用——Mixins和TypeScript</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/developing-vue-apps-with-class-based-components-mixins-and-typescript-d30bcd0f56be?source=collection_archive---------5-----------------------#2021-04-20">https://blog.devgenius.io/developing-vue-apps-with-class-based-components-mixins-and-typescript-d30bcd0f56be?source=collection_archive---------5-----------------------#2021-04-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1a1458dc58a19b0e384d1bfca155a979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SY5wbX-lJZbyxe6e"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@jeswinthomas?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰斯温·托马斯</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="ef1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们更喜欢使用类，我们可以使用Vue自带的基于类的组件API。</p><p id="2767" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用基于类的组件开发Vue应用。</p><h1 id="58b6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">混合蛋白</h1><p id="17e5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">mixins</code>函数为基于Vue类的组件创建mixins。</p><p id="1003" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0794" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;p&gt;{{ hello }} {{ world }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="d307" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component, { mixins } from "vue-class-component";</span><span id="cb9d" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>class Hello extends Vue {<br/>  hello = "Hello";<br/>}</span><span id="4d00" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>class World extends Vue {<br/>  world = "World";<br/>}</span><span id="a6f2" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>export default class HelloWorld extends mixins(Hello, World) {<br/>  created() {<br/>    console.log(this.hello, this.world);<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="bbe2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">Hello</code>和<code class="fe me mf mg mh b">World</code>类组件来调用<code class="fe me mf mg mh b">mixins</code>。</p><p id="945e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">hello</code>和<code class="fe me mf mg mh b">world</code>类属性将可以从<code class="fe me mf mg mh b">Helloworld</code>组件类中访问。</p><p id="acf9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了在类中访问它们，我们可以从<code class="fe me mf mg mh b">this</code>对象中访问它们。</p><p id="d7c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以在模板中访问它们。</p><h1 id="ae57" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">这个值</h1><p id="e0f5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不能在组件类中使用箭头函数作为方法，因为我们需要访问里面的<code class="fe me mf mg mh b">this</code>。</p><p id="2b2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Arrow函数没有绑定到<code class="fe me mf mg mh b">this</code>，所以我们不能把它们作为类方法使用。</p><p id="2185" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="86a5" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;p @click="bar"&gt;{{ foo }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="0477" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="9cef" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>export default class HelloWorld extends Vue {<br/>  foo = 123;</span><span id="ee6e" class="mq lc iq mh b gy mv ms l mt mu">  bar = () =&gt; {<br/>    this.foo = 456;<br/>  };<br/>}<br/>&lt;/script&gt;</span></pre><p id="3e11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">bar</code>不会更新<code class="fe me mf mg mh b">foo</code>的值，因为<code class="fe me mf mg mh b">this</code>的值不是类实例。</p><h1 id="d485" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">构造器</h1><p id="22c2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们不应该在我们的类组件中添加<code class="fe me mf mg mh b">constructor</code>，因为它们不符合Vue的生命周期。</p><p id="9fc7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0bdb" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;p&gt;{{ foo }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="927d" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="54ac" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>export default class HelloWorld extends Vue {<br/>  foo = 123;</span><span id="1cf5" class="mq lc iq mh b gy mv ms l mt mu">  constructor() {<br/>    this.foo = 456;<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="8d8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们不能在<code class="fe me mf mg mh b">constructor</code>中访问反应属性，如果我们在构造函数中尝试，我们会得到一个错误。</p><h1 id="cdd7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用TypeScript创建类组件</h1><p id="7ac0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用TypeScript创建基于类的组件。</p><p id="aed9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="fffc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">src/components/HelloWorld.vue</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="360f" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;p&gt;{{ message }}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="64a9" class="mq lc iq mh b gy mv ms l mt mu">&lt;script lang="ts"&gt;<br/>import Vue from "vue";<br/>import Component from "vue-class-component";</span><span id="591a" class="mq lc iq mh b gy mv ms l mt mu">const GreetingProps = Vue.extend({<br/>  props: {<br/>    name: String,<br/>  },<br/>});</span><span id="e09a" class="mq lc iq mh b gy mv ms l mt mu">@Component<br/>export default class HelloWorld extends GreetingProps {<br/>  get message(): string {<br/>    return `Hello, ${this.name}`;<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="d007" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">src/App.vue</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7e3e" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;HelloWorld name="james" /&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="7c8c" class="mq lc iq mh b gy mv ms l mt mu">&lt;script lang='ts'&gt;<br/>import HelloWorld from "./components/HelloWorld.vue";</span><span id="0ae6" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  name: "App",<br/>  components: {<br/>    HelloWorld,<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="8e81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">tsconfig.json</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0b4f" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "compilerOptions": {<br/>    "esModuleInterop": true<br/>  }<br/>}</span></pre><p id="5566" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe me mf mg mh b">compilerOptions.esModuleInterop</code>属性并将其设置为<code class="fe me mf mg mh b">true</code>，这样我们就可以在代码中导入ES模块。</p><p id="f183" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">App.vue</code>中，我们注册了<code class="fe me mf mg mh b">HelloWorld</code>组件。</p><p id="c572" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而在<code class="fe me mf mg mh b">HelloWorld.vue</code>中，我们调用<code class="fe me mf mg mh b">Vue.extend</code>用道具创建<code class="fe me mf mg mh b">GreetProps</code>类。</p><p id="858b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe me mf mg mh b">extends</code>关键字创建一个扩展<code class="fe me mf mg mh b">GreetingsProp</code>以接受<code class="fe me mf mg mh b">name</code>道具的类。</p><p id="d88b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们显示了从<code class="fe me mf mg mh b">message</code> getter获取的<code class="fe me mf mg mh b">message</code>。</p><h1 id="5226" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="edfd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将基于Vue类的组件与TypeScript一起使用，并在我们的Vue项目中轻松定义mixin类。</p></div></div>    
</body>
</html>