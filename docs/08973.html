<html>
<head>
<title>Day 106 of Game Dev: Unity New Input System — Upgrading Player Movement from Legacy Input!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">游戏开发的第 106 天:Unity 新输入系统——从传统输入升级玩家动作！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/day-106-of-game-dev-unity-new-input-system-upgrading-player-movement-from-legacy-input-107ca4a933a1?source=collection_archive---------12-----------------------#2022-07-21">https://blog.devgenius.io/day-106-of-game-dev-unity-new-input-system-upgrading-player-movement-from-legacy-input-107ca4a933a1?source=collection_archive---------12-----------------------#2022-07-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b7dbc877ea077a97302dbd682fcf2c64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SJ5UsesuQI7pVHhj"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com/@everywheresean?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">肖恩·多</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="6a16" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">目标:</strong>从<strong class="kc io">玩家</strong>开始，用旧的输入系统做一个项目，换成新的输入系统。</p><p id="8800" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="kc io">播放器类</strong>中，有一个在<strong class="kc io"> Update() </strong>中被调用的方法叫做<strong class="kc io"> CalculateMovement() </strong>，其中有与播放器相关的大部分输入。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/bb94c8d55553b08a52fffb723f9c2995.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*-7zj4Sh5OmLq-mB3PILbLQ.png"/></div></figure><p id="cf38" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">播放器已经设置了旋转和移动功能。我在这里的工作不是改变这一切。只是输入来自哪里。</p><p id="c36e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我想对我的输入做的是保持它们的模块化。这意味着我希望我的输入脚本与播放器脚本分开，以保持一切整洁，而不是将我的所有输入放入与播放器相同的脚本中。我这样做是因为新的输入系统需要更多的代码。</p><p id="030b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将首先在与玩家脚本<strong class="kc io">相同的文件夹中创建一个新的<strong class="kc io">输入动作资产</strong>。</strong></p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/4749e0720a5a9bbae601562b5130cd91.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/1*MUONbtUIpCBaSavNQmowwQ.png"/></div></figure><p id="b6bf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我会设置一个<strong class="kc io">玩家动作图</strong>。基于<strong class="kc io"> CalculateMovement() </strong>方法，我只需要替换<strong class="kc io"> h </strong>和<strong class="kc io"> v </strong>变量的取值位置。我们一会儿会更深入地探讨这个问题，但这意味着在我的动作图中，我只需要一个侧面到侧面和前后移动的绑定，我可以通过 Vector 3 类型来实现。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi le"><img src="../Images/f73f468fc24aa228d724107c0f445872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YOAGPt5utjf6vUbxwvXEgQ.png"/></div></div></figure><p id="2868" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">确保保存资源并从中生成脚本。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lf"><img src="../Images/b295143006a018d9ff0386f5e770b421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aQN9j6sfQNG5PyktDY906g.gif"/></div></div></figure><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/3c24b2af9f8cc8c7bc02ed34fa9275a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*aVxpGYx1BlD5MPqm_MNSFw.png"/></div></figure><p id="ba33" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我将在同一个文件夹中创建一个新脚本，并将其命名为<strong class="kc io"> GameInputManager </strong>，因为它将不仅管理玩家的输入。这是保存输入值的脚本，播放器脚本在调用其<strong class="kc io"> CalculateMovement() </strong>方法时可以使用这些输入值。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/a78ea3648534ed4085dc4b308f5f9e09.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*vZMCBBBgMKUL_2WBUD3l0Q.png"/></div></figure><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi li"><img src="../Images/e6fd63db942f4cdec6181d8453b1a684.png" data-original-src="https://miro.medium.com/v2/resize:fit:470/format:webp/1*qEfi5bpBKtSpuG9bQvL4qw.png"/></div></figure><p id="061f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">回到<strong class="kc io">玩家</strong>脚本，我已经做了必要的修改，这是非常少的。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/e5c64f100f314151255ba5d63b522438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*lapLpvYKAxXjRjRwrRTxNA.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">你可能也注意到了我增加了旋转的速度。对我来说感觉很慢，但这并不是理解这篇文章的主要重点所需要的。</figcaption></figure><p id="7216" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在整个方法中，<strong class="kc io"> h </strong>和<strong class="kc io"> v </strong>变量用于计算该运动。所以我只想取代他们的输入来源。我现在就把它们注释掉，我会把变量变成参数，并从<strong class="kc io"> GameInputManager </strong>脚本中获取它们的值。</p><p id="69a0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请记住，必须从某个地方调用<strong class="kc io"> CalculateMovement() </strong>方法，如果我们从另一个脚本获取输入，就必须从那里调用它。这也是我们将<strong class="kc io"> h </strong>和<strong class="kc io"> v </strong>变量设为参数的原因。所以我停止了从<strong class="kc io">播放器</strong>脚本中的<strong class="kc io"> Update() </strong>方法调用<strong class="kc io"> CalculateMovement() </strong>，而是在<strong class="kc io">游戏输入管理器</strong>脚本中调用它。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lk"><img src="../Images/a59868d3eacbd59d95a9f2304c14ebd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0LPJgioxfiZSaO5ci65pSw.png"/></div></div></figure><p id="e888" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="kc io"> GameInputManager </strong>脚本中，我引用了我的<strong class="kc io">输入动作</strong>资产和我的<strong class="kc io">播放器</strong>。在<strong class="kc io"> Start() </strong>中，我将启用行动地图。在<strong class="kc io"> Update() </strong>中，我从我之前在动作映射中设置的动作中获取值，并将它们作为参数传入<strong class="kc io"> CalculateMovement() </strong>脚本中。</p><p id="6890" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们开始了，输入被替换为播放器，并准备就绪。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/41d81e8953b1355e2fc2a69a6abab008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jh_HkSLrDD8SpSs7UGRGJQ.gif"/></div></div></figure><p id="f547" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="lm">如有任何想法或问题，欢迎评论。让我们制作一些令人敬畏的游戏！</em>T29】</strong></p></div></div>    
</body>
</html>