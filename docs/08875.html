<html>
<head>
<title>How to change sidebar width by movable drawer with react</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过带 react 的可移动抽屉改变侧边栏宽度</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-change-sidebar-width-by-movable-drawer-with-react-16744acba10b?source=collection_archive---------2-----------------------#2022-07-16">https://blog.devgenius.io/how-to-change-sidebar-width-by-movable-drawer-with-react-16744acba10b?source=collection_archive---------2-----------------------#2022-07-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/86dd9b70f2624f298c5ba2bb38c7a6e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xkv8-IeSG33VZQw7.png"/></div></div></figure><h1 id="f4af" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">目的</h1><p id="48f3" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">因为我想创建一个函数来改变侧边栏的宽度，所以这个函数没有资源。我在努力创造它，所以我将与你分享。</p><h1 id="194f" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">目标</h1><p id="5e82" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我想创建如下所示的函数(以概念为例)</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/2c362fb3079a3167e0dc2784bae85d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*ck0NtHVpXhVj5HRv.gif"/></div></figure><h1 id="6386" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">我的计划</h1><p id="0d8a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">可能有几种解决方案，我考虑了两种方法，即调整侧边栏的大小或通过拖动可移动的抽屉来计算侧边栏的宽度。</p><h2 id="aa50" class="lw jw in bd jx lx ly dn kb lz ma dp kf le mb mc kj li md me kn lm mf mg kr mh bi translated">平面 1:调整大小</h2><p id="48d1" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">使用 resizing 函数似乎更容易，因为我们不需要通过计算来改变宽度。只需创建调整大小函数并使用它。</p><h2 id="61a6" class="lw jw in bd jx lx ly dn kb lz ma dp kf le mb mc kj li md me kn lm mf mg kr mh bi translated">平面 2:拖动</h2><p id="08ea" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">获取可移动抽屉的位置，并用它来改变侧边栏的宽度。这似乎比调整大小更困难，但似乎在细节上有所改变。</p><p id="c546" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">既然都试过了，我就跟你分享一下。</p><h1 id="a06c" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">为什么我使用平面 2:拖动？</h1><p id="4382" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">总之，我决定通过“Plan2 拖动”来实现。跟这个 app 的要求有关。</p><p id="8490" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">基本上，使用可调整大小的函数有三个问题。</p><p id="04eb" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">首先，我应该有 2 个不同类型的抽屉，因为我正在工作的应用程序有 3 个部分，如下图所示。当我尝试使用 react 的“可调整大小”库时，它完全适用于“一个”抽屉。然而，如果我有“两个”抽屉，这两个抽屉会奇怪地同步。换句话说，如果我移动左边的抽屉，右边的抽屉也在移动。这对我来说并不理想。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/550e62117ed60ee7d54bba387ae7c07b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pDIr9WdweV_4EgME.png"/></div></div></figure><p id="3cc1" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">其次，我需要使用定制设计的视图抽屉，并添加悬停功能。如果我可以使用正常的抽屉，如“边框 2px 固体浅灰色”，这是完全没问题的。因为它被认为是组件的一部分，所以如果我调整组件的大小，可能会调用 hover 方法。然而，当我想使用可移动视图抽屉时，它比我想象的要困难，因为它被识别为不同的组件。也就是说，当我调整侧边栏大小时，悬停功能不会被调用。“可调整大小”库有句柄方法，我们可以使用一些图标或任何东西作为调整大小的句柄，但它不适合我的情况。</p><p id="c0e4" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">第三，我想创建一个使用“显示:伸缩”的响应式设计。我尝试了几个库，但是几乎所有的库都将“position: absolute”作为默认行为。所以这些库和我的项目不太匹配。</p><p id="0d8d" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">如果你想创建一个不包括上述要求的简单应用程序，我建议你使用可调整大小的库，因为它非常简单(我会附上一个链接“可重新调整大小”，所以如果你对它感兴趣，请检查它。这个非常好用)。</p><p id="0417" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">我曾计划创建自己的可调整大小的组件，但我没有太多时间去做。所以我决定使用一个可拖动的函数。</p><h1 id="7954" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">如何实现拖动改变宽度功能(附例子)。</h1><p id="71ff" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我用了“反应可拖动”，因为它似乎在细节上进行调整。</p><p id="1883" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">最重要的是直接为可拖动组件“添加位置”,因为如果没有位置，可移动的抽屉将不会与侧边栏宽度同步。</p><h2 id="2669" class="lw jw in bd jx lx ly dn kb lz ma dp kf le mb mc kj li md me kn lm mf mg kr mh bi translated">步伐</h2><ol class=""><li id="85fa" class="mo mp in kv b kw kx la lb le mq li mr lm ms lq mt mu mv mw bi translated">与 CRA 一起创造你的环境</li></ol><pre class="ls lt lu lv gt mx my mz na aw nb bi"><span id="0be4" class="lw jw in my b gy nc nd l ne nf">&gt; npx create-react-app view-drawer-example // the name is up to you</span></pre><p id="c538" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">2.在添加可拖动功能之前创建基本布局。下面只是我的例子。为了演示的目的，我想更快地创建和管理 css，我将每个 css 和样式作为道具传递给 App.js 并在 App.css 中管理。但这完全取决于你。</p><p id="7067" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">图像(为部分添加背景，使其易于理解)</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/4f5032584c3aa9abbb947b3bb277feb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KaQXzsDfjLP5ZEmw.png"/></div></div></figure><p id="ad10" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">文件夹结构</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/d7ab95152e9d6c0c4b9bbefbb87ed980.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/0*P11EhyK0nw88-DLE.png"/></div></figure><h1 id="4ddb" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">每个文件(仅查看部分)</h1><p id="04b7" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">App.js</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="68f8" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">Sidebar.js</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="60fe" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">主页. js</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="2396" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">右空间. js</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="c4d1" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">view 抽屉. js</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="d2f5" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">App.css</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="ffa6" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">好了，准备结束了。所以让我们实现 draggable 函数。</p><p id="a4d1" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">3.安装 react draggable</p><pre class="ls lt lu lv gt mx my mz na aw nb bi"><span id="bcfa" class="lw jw in my b gy nc nd l ne nf">&gt; npm install react-draggable</span></pre><p id="2e89" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">4.在带有 useState 的 App.js 中使用它。有几点需要注意</p><ul class=""><li id="67c4" class="mo mp in kv b kw mi la mj le nk li nl lm nm lq nn mu mv mw bi translated">除非你准备好几个状态，否则这些可移动抽屉是同步的。</li><li id="188a" class="mo mp in kv b kw no la np le nq li nr lm ns lq nn mu mv mw bi translated">如果您直接在 Draggable 中设置位置，轴道具将不再起作用。如果你在 Draggable 的位置属性中有“y”位置，侧边栏宽度和抽屉位置不会同步。</li><li id="d5e4" class="mo mp in kv b kw no la np le nq li nr lm ns lq nn mu mv mw bi translated">您需要在每个内容中设置额外的宽度，或者宽度只是 0，因为默认位置是 0。</li></ul><p id="08dd" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">App.js</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="56f8" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">最终结果如下图。这并不完美，但效果很好。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/35391cb4aac53efe6b6e1ac278276f89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*I-CvGDZxVkzYIYoy.gif"/></div></figure><h1 id="dd14" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">结论</h1><p id="7f1a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">如果我们试图创造一些先进的东西，它可能只有几个资源来实现。我希望这篇文章能帮助你创建类似的功能。</p><h1 id="56fd" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">参考</h1><p id="cee1" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">react draggable:<a class="ae nt" href="https://www.npmjs.com/package/react-draggable#draggable-usage" rel="noopener ugc nofollow" target="_blank">https://www . npmjs . com/package/react-draggable # draggable-usage</a></p><p id="2ec6" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">可调整大小:【https://www.npmjs.com/package/re-resizable】T2</p><p id="6b19" class="pw-post-body-paragraph kt ku in kv b kw mi ky kz la mj lc ld le mk lg lh li ml lk ll lm mm lo lp lq ig bi translated">感谢您的阅读！！</p></div></div>    
</body>
</html>