<html>
<head>
<title>Pandas Rapid Reporting: Quick Exploration, Crosstab</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">熊猫快速报告:快速探索，交叉表</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/pandas-rapid-reporting-quick-exploration-crosstab-b6511400c48e?source=collection_archive---------4-----------------------#2021-11-21">https://blog.devgenius.io/pandas-rapid-reporting-quick-exploration-crosstab-b6511400c48e?source=collection_archive---------4-----------------------#2021-11-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3428" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用熊猫进行快速探索、低调报道和分析的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/965960950e452d57f729a91c1bb9b106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KgkEBWvr_hNu3ifRgIKIQg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">照片由来自<a class="ae ks" href="https://pixabay.com/" rel="noopener ugc nofollow" target="_blank"> pixabay </a>的<a class="ae ks" href="https://pixabay.com/users/pexels-2286921/" rel="noopener ugc nofollow" target="_blank"> Pexels </a>拍摄</figcaption></figure><p id="4a20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当您获得一组新数据，并被要求进行一些快速(不，不是肮脏)的探索，甚至一些低调的报告和分析时，会发生什么？</p><p id="62d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">嗯，你总是可以要求更多的时间，或者使用阿加莫托的<em class="lp">之眼，</em>但是你通常不能真正要求更多的时间，而且你很可能不是最高魔法师。</p><p id="b92a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">幸运的是，熊猫有一些巧妙的方法供你使用，让你非常容易获得令人印象深刻的洞察力，而无需花费数小时去挖掘、寻找、计算/求和。</p><p id="2613" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于本文，我将使用Kaggle 的<a class="ae ks" href="https://www.kaggle.com/pavansubhasht/ibm-hr-analytics-attrition-dataset?select=WA_Fn-UseC_-HR-Employee-Attrition.csv" rel="noopener ugc nofollow" target="_blank"> IBM HR Analytics员工流失&amp;性能数据集。</a></p><h1 id="0a2b" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated"><strong class="ak">偷看数据</strong></h1><p id="51c4" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">假设我们不必担心数据清理(这是我们接触科幻小说的最后一点，我保证)。我们只需要随便加载我们的CSV文件，调用<strong class="kv io"> head </strong>方法，看看到底是什么。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/3bbcc7c428d8aa0da5d566bfaa01daf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v4iv87ihMKTVed2-"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="1118" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">嗯，看起来不错，但是，如果不滚动，我们甚至无法看到一个堆栈中的所有列。幸运的是，Pandas为我们提供了<strong class="kv io"> DataFrame.columns() </strong>方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mo"><img src="../Images/9a906c623f60e4ec5cd89d649c665e46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D3ulYOFgvvBwZgW5"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="a184" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这不仅仅是你用来追踪租金的栏目。有多少行和多少列？简单:看看<strong class="kv io"> DataFrame.shape </strong>属性:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mp"><img src="../Images/c1426d4b3a829230c79825f9f036d5db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zPRP90CA3UPUn2yE"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="5a2a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我们已经绕着数据框架转了几圈，是时候看看内部了。这些数据是关于员工流失的，如你所见，我们列出了每个员工所在的部门。数据中的员工来自哪些部门？Series.unique()方法有答案:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mq"><img src="../Images/e841325368a09cb7ac3b8f3d9c71f221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r4IfGQRrGLhquM4M"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="e594" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下一个合乎逻辑的问题可能是:那么，这些部门的雇员分布情况如何。在Excel中，这将是countif函数。在熊猫中，我们有Series.value_counts()</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mr"><img src="../Images/82a0eb2d5711b8169b53b1b39d893b6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OXfbuAPDkBCHy0OP"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="85d7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想让结果更漂亮一点，就把它包在熊猫里。数据帧()</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ms"><img src="../Images/9dde90077ffac61e000ebcb773a2e52c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yPrt6fObSECUQWhU"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="a397" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因为我们正在处理流失数据，所以在数据收集期间看看流失情况会很好，对吗？类似pd.crosstab()这样的文件可以完成这个任务:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mt"><img src="../Images/f1d66e6e56f969fede3c54e8b9c4c1cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Tu6dAbNyGBH52IV"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="a1fc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您想包含更多维度吗？没问题。只需使用一个列表作为<em class="lp">索引</em> / <em class="lp">列</em>参数，并提供您希望看到的系列。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/2a3f86e1f4521be0fb643c22678f14b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tIcZD-a6mAxAUCbV"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="5e7b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">相当令人印象深刻吧，用一行甚至不长的代码？现在，crosstab有几个值得研究的参数。</p><blockquote class="mv mw mx"><p id="0003" class="kt ku lp kv b kw kx jo ky kz la jr lb my ld le lf mz lh li lj na ll lm ln lo ig bi translated">如果你想让我保持咖啡因创造更多这样的内容，请考虑支持我，只要一杯咖啡。</p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><a href="https://buymeacoffee.com/zoltanguba2"><div class="gh gi nb"><img src="../Images/42de2d890e13d488021d94ea1a1b9877.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*SMZM9K5hha91xzFtSBS88Q.png"/></div></a></figure><h2 id="6d98" class="nc lr in bd ls nd ne dn lw nf ng dp ma lc nh ni mc lg nj nk me lk nl nm mg nn bi translated"><strong class="ak">正常化</strong></h2><p id="8704" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">为了得到小计的比率，<em class="lp">规格化</em>参数开始起作用。您可以跨索引、列或整个表计算比率。看看各部门的人员流失率:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi no"><img src="../Images/54566b830f527afeaad2d70c92be6bba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Tveqnpr3conrZ5Sg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="3a84" class="nc lr in bd ls nd ne dn lw nf ng dp ma lc nh ni mc lg nj nk me lk nl nm mg nn bi translated"><strong class="ak">保证金</strong></h2><p id="8716" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">您可以一次获得小计、行和列总计以及雇员总数。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/f70e5168e36f4f81a4c5416973b0f0d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*slsO1vQuVQRkoVCc"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><h2 id="a8ba" class="nc lr in bd ls nd ne dn lw nf ng dp ma lc nh ni mc lg nj nk me lk nl nm mg nn bi translated"><strong class="ak">值</strong>和<strong class="ak"> aggfunc </strong></h2><p id="dd85" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">使用<em class="lp"> values </em>参数，您可以指定想要用于创建新数据帧值的列。例如，我选择了“年龄”列。重要的是要注意，如果你指定了这些值，你必须通过<em class="lp"> aggfunc </em>参数提供Pandas应该对这些值做什么:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nq"><img src="../Images/f623b516fde81102a64b3168df3092a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7t0RdAtRPCHnN5_0"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="bb9a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">目前这并不太令人兴奋，我们已经看到了这张图片，但是现在想象一下，您想知道每个部门/自然减员的平均年龄。你所要做的就是将<em class="lp"> aggfunc </em>改为“mean”:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nr"><img src="../Images/b51ddae70ccc7b8c0a1103faeb7e789e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-0LVRnxlLwWwOEI-"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="b96b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们看看如何将上述内容结合起来:我们想了解离家的距离是否会影响减员:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/87ba3829590d51222b131c539fd7c648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*h5feMVVwceQfmEjt"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">作者截图</figcaption></figure><p id="be89" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当然，这不是任何合适的数据科学家都会毫不犹豫地接受的分析，但是，这可能会给你一个线索，说明员工留在公司的意愿与他们到公司的距离之间的关系。</p></div><div class="ab cl nt nu hr nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ig ih ii ij ik"><p id="fd20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我写这篇文章的目的是为了说明，如果您想用一个看似难以理解的数据集展示有趣的东西，没有必要进行大量的数据争论。如果您经常遇到不熟悉的数据需要快速输出的情况，您甚至可以考虑为数据探索的基础编写一个通用的第一响应脚本，然后在此基础上，您可以使用一些交叉表魔术。</p><p id="b0f9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">更多内容看</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="lp">说白了. io </em> </a> <em class="lp">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="lp">免费周报在这里</em> </a> <em class="lp">。</em></p></div></div>    
</body>
</html>