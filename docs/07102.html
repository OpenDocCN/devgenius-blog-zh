<html>
<head>
<title>Logging in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Python 中登录</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/logging-in-python-adec94519755?source=collection_archive---------1-----------------------#2022-02-26">https://blog.devgenius.io/logging-in-python-adec94519755?source=collection_archive---------1-----------------------#2022-02-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/504018a3bd8280f648a1f754f6db3fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7p213O0onfVQJKpjmOPhcQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在 Python 中登录</figcaption></figure><p id="de7d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">本文旨在概述日志记录的基础，并创建一个简单的项目，将每个事件记录到一个日志文件中，然后使用这个日志文件来分析错误。</p><h1 id="8f38" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">什么是日志？</h1><p id="6eca" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">日志是与特定系统或服务相关的带有时间戳的事件文档，该过程称为日志记录。日志中的每个记录通常由时间戳(事件发生的时间)、用户信息、日志级别、事件信息组成。如果没有日志记录，并且如果程序或服务在执行过程中被中断，那么分析根本原因就变得很困难。</p><h1 id="582a" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">日志级别</h1><p id="3d9f" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">下表中的日志级别按照严重性递增的顺序排列。这些日志级别足以处理任何问题。</p><figure class="mb mc md me gt jo gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/0f0e6aa2dd0842176a0d4734ddaea361.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*KKRdM9BVxRvATt3StH1DIA.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">日志级别</figcaption></figure><h1 id="f770" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">入门指南</h1><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mf"><img src="../Images/6dd70dc9957f21175aa7f8cdaf55c5cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WX18fLIyy94MoeE0BbwR7g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">文件传输服务</figcaption></figure><p id="f03e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们将创建一个名为 File Transfer 的简单服务，其主要功能是将文件从<em class="mg"> server </em>目录移动到<em class="mg"> local_dir </em>目录，然后将移动文件的元数据推送到<a class="ae mh" rel="noopener ugc nofollow" target="_blank" href="/kafka-with-python-4eb017b41e83"> kafka </a>主题中。在此过程中，服务会将事件记录到事件日志文件中。</p><h2 id="d5f8" class="mi ky in bd kz mj mk dn ld ml mm dp lh kk mn mo ll ko mp mq lp ks mr ms lt mt bi translated">1.密码</h2><p id="95ca" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">创建两个名为<em class="mg"> server </em>和<em class="mg"> local_dir </em>的文件夹，并在 server 文件夹中放置一些示例文件。确保安装了<a class="ae mh" rel="noopener ugc nofollow" target="_blank" href="/kafka-with-python-4eb017b41e83"> kafka </a>和必要的 python 包。</p><figure class="mb mc md me gt jo"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h2 id="8a65" class="mi ky in bd kz mj mk dn ld ml mm dp lh kk mn mo ll ko mp mq lp ks mr ms lt mt bi translated">2.奔跑</h2><ul class=""><li id="18c6" class="mw mx in kb b kc lv kg lw kk my ko mz ks na kw nb nc nd ne bi translated">启动动物园管理员和卡夫卡。在单独的终端中运行这些命令</li></ul><pre class="mb mc md me gt nf ng nh ni aw nj bi"><span id="05e0" class="mi ky in ng b gy nk nl l nm nn">bin/zookeeper-server-start.sh config/zookeeper.properties<br/>bin/kafka-server-start.sh config/server.properties</span></pre><ul class=""><li id="3218" class="mw mx in kb b kc kd kg kh kk no ko np ks nq kw nb nc nd ne bi translated">运行文件传输服务</li></ul><h2 id="a710" class="mi ky in bd kz mj mk dn ld ml mm dp lh kk mn mo ll ko mp mq lp ks mr ms lt mt bi translated">3.分析日志</h2><p id="1ff4" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">下图显示了存储在<em class="mg"> events.log </em>文件中的一些记录。使用<em class="mg"> cat </em> (linux)或<em class="mg"> type </em> (windows)命令显示日志。</p><pre class="mb mc md me gt nf ng nh ni aw nj bi"><span id="906a" class="mi ky in ng b gy nk nl l nm nn">cat events.log</span></pre><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/2dc3d5931348672eaf452ade22e58cd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L8jvAR629EIrzA_iFo8YsQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">日志文件</figcaption></figure><p id="bfec" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">假设服务会一直运行/处理文件。如果发生了与文件传输服务相关的问题，并且要求您分析根本原因。浏览如此大的文件可能是一项乏味的任务，因为它包含大量的日志记录。所以要过滤掉日志记录，我们可以使用 grep (linux)或 findstr (windows)命令。</p><pre class="mb mc md me gt nf ng nh ni aw nj bi"><span id="0ed2" class="mi ky in ng b gy nk nl l nm nn">cat events.log | grep ERROR</span></pre><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/5bbff10cb1163b3ead73357f5935e43d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p7jKn9ZG0_Vv-t6beHfm7g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">使用 grep 命令过滤日志记录</figcaption></figure><h1 id="04dc" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论</h1><p id="7be6" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">在这个故事中，我们已经了解了日志记录的基本知识，并创建了一个简单的服务，它将事件记录在一个文件中。后来使用日志文件来分析问题，使用的命令有<em class="mg"> cat </em>和<em class="mg"> grep </em>。希望你喜欢。</p><p id="d504" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">感谢阅读！</p><p id="b9c1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><a class="ae mh" href="https://github.com/ashish-mj/logging" rel="noopener ugc nofollow" target="_blank">Github</a>T24】网站 T26】Linkedin</p></div></div>    
</body>
</html>