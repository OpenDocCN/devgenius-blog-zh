<html>
<head>
<title>Python for Beginners: How to Write a Simple File Organizer Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python 初学者:如何编写一个简单的文件管理器代码</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/python-for-beginners-how-to-write-a-simple-file-organizer-code-fd6a12eb4b3d?source=collection_archive---------5-----------------------#2020-06-17">https://blog.devgenius.io/python-for-beginners-how-to-write-a-simple-file-organizer-code-fd6a12eb4b3d?source=collection_archive---------5-----------------------#2020-06-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0431b23b02b986bfa7158cd690402554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDh5pwvVjdDw3k3L3tN4WA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Artem Sapegin 在 Unsplash 上拍摄的照片</figcaption></figure><p id="96a1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">每个月，我们都倾向于下载你知道你永远不会再使用的猫照片或提高生产力的程序，以及那些在你第一次安装新电脑后忘记删除的随机一次性安装程序。尽管如此，我们都知道它最终只是停留在你的桌面上，收集“字节”(明白吗？我搞笑)好几年了。我承认，在整理我的 PC 或 Macbook 上的文件时，我会非常懒惰，直到用完存储空间，我才会回头。今年，我决定学习使用 Python 编写一个简单的脚本来组织我的文件。</p><p id="5e48" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">文件管理器的目标是根据文件扩展名排列 PC 上的所有随机文件，它将创建通用名称文件夹，然后代码将文件拖到相应的文件夹中。代码将作为脚本运行。这样，当您运行它时，它将立即执行。在整篇文章中，我将讨论工作流和代码结构。</p><h1 id="c5dc" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">您首先需要了解的基础知识:</h1><p id="6410" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">我将链接一些资源，这样你可以用它们来学习下面所有的基础知识！</p><ul class=""><li id="2869" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">理解文件<a class="ae mj" href="https://www.geeksforgeeks.org/structures-of-directory-in-operating-system/" rel="noopener ugc nofollow" target="_blank">目录</a>的概念和基本原理。</li><li id="68ad" class="ma mb in kb b kc mk kg ml kk mm ko mn ks mo kw mf mg mh mi bi translated">研究一下各种操作系统接口(<a class="ae mj" href="https://docs.python.org/3/library/os.html" rel="noopener ugc nofollow" target="_blank"> OS </a>)和面向对象的文件系统路径(<a class="ae mj" href="https://docs.python.org/3/library/pathlib.html" rel="noopener ugc nofollow" target="_blank"> pathlib </a>)导入模块。</li><li id="48fb" class="ma mb in kb b kc mk kg ml kk mm ko mn ks mo kw mf mg mh mi bi translated">研究 Python 中不同的<a class="ae mj" href="https://www.programiz.com/python-programming/directory" rel="noopener ugc nofollow" target="_blank">文件目录函数</a>。</li><li id="2ba9" class="ma mb in kb b kc mk kg ml kk mm ko mn ks mo kw mf mg mh mi bi translated">学习并理解<a class="ae mj" href="https://www.programiz.com/python-programming/dictionary" rel="noopener ugc nofollow" target="_blank"> Python 字典</a>的概念。</li><li id="f0d4" class="ma mb in kb b kc mk kg ml kk mm ko mn ks mo kw mf mg mh mi bi translated">学习并练习使用<a class="ae mj" href="https://www.w3schools.com/python/python_for_loops.asp" rel="noopener ugc nofollow" target="_blank"> for 循环</a>和<a class="ae mj" href="https://www.w3schools.com/python/python_conditions.asp" rel="noopener ugc nofollow" target="_blank"> if 循环</a>(一般为条件语句)。</li><li id="c823" class="ma mb in kb b kc mk kg ml kk mm ko mn ks mo kw mf mg mh mi bi translated">学习在 Python 中创建和声明一个<a class="ae mj" href="https://www.w3schools.com/python/python_functions.asp" rel="noopener ugc nofollow" target="_blank">函数</a>。</li><li id="5d27" class="ma mb in kb b kc mk kg ml kk mm ko mn ks mo kw mf mg mh mi bi translated">不是必需的，但是在你的代码中使用<a class="ae mj" href="https://docs.python.org/3/tutorial/errors.html" rel="noopener ugc nofollow" target="_blank">错误处理异常</a>是一个好习惯。</li></ul><h1 id="ef83" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">整体工作流程:</h1><p id="af63" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">我开发了一个代码逻辑的快速工作流，演示了从哪里开始，以及在编写脚本时我的期望是什么。编写代码可能比你想象的要花更长的时间，并且可能会让你迷失方向。作为一个可视化的学习者，画出工作流，帮助我组织我的思想，提高编写成功代码的效率。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/ffa9f0284f1bb08585fe6b86057b9adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0oHB2xUatR6WxmNEH54oMg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">文件管理器工作流</figcaption></figure><h1 id="7d8f" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">代码结构的运行:</h1><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="ff44" class="mz ky in mv b gy na nb l nc nd">import os</span><span id="5ef9" class="mz ky in mv b gy ne nb l nc nd">from pathlib import Path</span></pre><p id="49f5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">经过一些研究，我知道我需要使用操作系统模块来操作文件目录。我还需要 pathlib 模块来访问<strong class="kb io">“path()”</strong>函数，这将允许我管理目录的路径。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="dbbc" class="mz ky in mv b gy na nb l nc nd">listOfDirectories = {</span><span id="d093" class="mz ky in mv b gy ne nb l nc nd">    “Picture_Folder”: [“.jpeg”, “.jpg”, “.gif”, “.png”],</span><span id="fe0c" class="mz ky in mv b gy ne nb l nc nd">    “Video_Folder”: [“.wmv”, “.mov”, “.mp4”,“.mpg”, “.mpeg”, “.mkv”],</span><span id="4ae8" class="mz ky in mv b gy ne nb l nc nd">    “Zip_Folder”: [“.iso”, “.tar”, “.gz”, “.rz”, “.7z”,”.dmg”,      “.rar”, “.zip”],</span><span id="b6a4" class="mz ky in mv b gy ne nb l nc nd">    “Music_Folder”: [“.mp3”, “.msv”,“.wav”, “.wma”],</span><span id="b0e6" class="mz ky in mv b gy ne nb l nc nd">    “PDF_Folder”: [“.pdf”],</span><span id="b32e" class="mz ky in mv b gy ne nb l nc nd">}</span></pre><p id="b001" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们需要用 Python 创建一个包含文件夹名和文件扩展名的字典。把字典想象成一盒巧克力，里面有不同种类的巧克力，但是巧克力里面都是不同的口味。我们可以说巧克力是关键，各种馅料是价值。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/cbbc689d4e399c15664a932a5babd8b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qN-iQHf_MP43nJFMsLhxmg.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">杰西卡·约翰斯顿在 Unsplash 上拍摄的照片</figcaption></figure><p id="7949" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下面是一个快速的工作流程，解释了我是如何使用 Python 字典的。这个函数的美妙之处在于，你可以在声明键的时候输出值。您可以在这里添加更多您认为需要的键(文件夹名)和值(文件扩展名)。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/f35fb4a113e8349b68087f375ea4a433.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*F3yvsEUq-L7DCQU0ENegmg.jpeg"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Python 字典工作流</figcaption></figure><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="e3ca" class="mz ky in mv b gy na nb l nc nd">File_Format_Dictionary = {</span><span id="c987" class="mz ky in mv b gy ne nb l nc nd">      final_file_format: directory</span><span id="493e" class="mz ky in mv b gy ne nb l nc nd">      for directory, file_format_stored in listOfDirectories.items()</span><span id="188d" class="mz ky in mv b gy ne nb l nc nd">      for final_file_format in file_format_stored</span><span id="6823" class="mz ky in mv b gy ne nb l nc nd">}</span></pre><p id="7827" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是 Python 字典的另一个用例。变量名<strong class="kb io">“文件格式字典”</strong>包含一项，其中<strong class="kb io">“最终文件格式”</strong>是包含名为<strong class="kb io">目录的值的关键字</strong>for 循环将文件扩展名列表与目录进行映射。现在我们有了包含文件扩展名长列表的变量。我们将继续创建代码的逻辑。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="9353" class="mz ky in mv b gy na nb l nc nd">def organizer():</span><span id="350c" class="mz ky in mv b gy ne nb l nc nd">    for entry in os.scandir():</span><span id="2c2b" class="mz ky in mv b gy ne nb l nc nd">        if entry.is_dir():</span><span id="9393" class="mz ky in mv b gy ne nb l nc nd">        continue</span><span id="fdf4" class="mz ky in mv b gy ne nb l nc nd">        file_path = Path(entry)</span><span id="c29f" class="mz ky in mv b gy ne nb l nc nd">        final_file_format = file_path.suffix.lower()</span><span id="7b6c" class="mz ky in mv b gy ne nb l nc nd">        if final_file_format in File_Format_Dictionary:</span><span id="bdc5" class="mz ky in mv b gy ne nb l nc nd">    directory_path = Path(File_Format_Dictionary[final_file_format])</span><span id="d415" class="mz ky in mv b gy ne nb l nc nd">        os.makedirs(directory_path, exist_ok=True)</span><span id="883b" class="mz ky in mv b gy ne nb l nc nd">        os.rename(file_path, directory_path.joinpath(file_path))</span></pre><p id="5662" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在我们正在定义一个名为<strong class="kb io">“组织者”的函数。</strong>管理器功能将开始组织您的文件，并创建当前位置不存在的目录。只要你理解基本的目录函数，比如<strong class="kb io"> "scandr()，"</strong> <strong class="kb io"> "is_dir，"</strong> <strong class="kb io"> "makedirs "，</strong>和<strong class="kb io"> "rename "，这个工作流程的逻辑就非常简单了。</strong><strong class="kb io">“scandr()”</strong>函数将扫描当前目录，<strong class="kb io">“makedirs”</strong>将创建一个新的文件目录，“重命名”将重命名文件。它继续根据目录列表组织文件和重命名文件夹。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="2ac1" class="mz ky in mv b gy na nb l nc nd">try:</span><span id="962a" class="mz ky in mv b gy ne nb l nc nd">   os.mkdir(“Other_Folder”)</span><span id="9e71" class="mz ky in mv b gy ne nb l nc nd">except ValueError:</span><span id="9a32" class="mz ky in mv b gy ne nb l nc nd">   print(“Failed to create new directory”)</span></pre><p id="5b53" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您可能想知道我没有添加到第一个字典中的文件扩展名发生了什么变化？这就是为什么我们将创建另一个目录，我忘记添加的任何扩展都将转到我正在创建的备份目录。</p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="d941" class="mz ky in mv b gy na nb l nc nd">for dir in os.scandir():</span><span id="b1d5" class="mz ky in mv b gy ne nb l nc nd">    try:</span><span id="572d" class="mz ky in mv b gy ne nb l nc nd">        if dir.is_dir():</span><span id="9391" class="mz ky in mv b gy ne nb l nc nd">           os.rmdir(dir)</span><span id="53a9" class="mz ky in mv b gy ne nb l nc nd">        else:</span><span id="eb11" class="mz ky in mv b gy ne nb l nc nd">            os.rename(os.getcwd() + ‘/’ + str(Path(dir)), os.getcwd() + ‘/Other_Folder/’ + str(Path(dir)))</span><span id="af9d" class="mz ky in mv b gy ne nb l nc nd">            except ValueError:<br/>                 print(“Failed to create new directory called Other Folder. File directory may already exist”)</span></pre><p id="e3dc" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们将需要调用变量名<strong class="kb io"> "dir" </strong>来扫描目录，然后条件语句将检查目录是否存在。如果有文件扩展名与目录列表不匹配，那么它将创建另一个名为<strong class="kb io">“其他 _ 文件夹”的文件夹</strong></p><pre class="mq mr ms mt gt mu mv mw mx aw my bi"><span id="176f" class="mz ky in mv b gy na nb l nc nd">if __name__ == “__main__”:</span><span id="125a" class="mz ky in mv b gy ne nb l nc nd">organizer()</span></pre><p id="82e5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在为了确保脚本运行，您需要在最后调用 organizer 函数。</p><h1 id="36d3" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">最终结果:</h1><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/2b1bb5b0aa184f581978bbf99cf47552.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b27iS5XcGliV6yZN_n4IfQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在我运行脚本之前</figcaption></figure><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/85d041f95ab89f0311d6361d14f8e167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jsgQ00O5Z_wxCKU1LFMtlg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">之后，我运行了脚本。</figcaption></figure><h1 id="ece5" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">总体思路:</h1><p id="6f36" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">在我看来，画出工作流程确实提高了我的效率，帮助我更好地理解从第一步到第二步我需要做什么。我所面临的挑战是弄清楚我需要使用哪个“OS”或“Path”函数来让代码做我想要做的事情。我知道你至少需要花两个小时来研究和查看语法和结构。</p></div><div class="ab cl nj nk hr nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ig ih ii ij ik"><p id="d5d7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">谢谢你花时间看我的文章。希望这对有兴趣学习编码的人有所帮助。我主要致力于成为一名更好的程序员，在空闲时间，我只是为了乐趣而编码。我很想收到你们所有人的来信！你可以在<a class="ae mj" href="https://www.linkedin.com/in/addison-chen/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>上和我联系。</p></div></div>    
</body>
</html>