<html>
<head>
<title>DistSQL Applications: Building a Dynamic Distributed Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DistSQL åº”ç”¨ç¨‹åº:æ„å»ºåŠ¨æ€åˆ†å¸ƒå¼æ•°æ®åº“</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/distsql-applications-building-a-dynamic-distributed-database-969690ec4c3a?source=collection_archive---------4-----------------------#2022-07-26">https://blog.devgenius.io/distsql-applications-building-a-dynamic-distributed-database-969690ec4c3a?source=collection_archive---------4-----------------------#2022-07-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0445" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">èƒŒæ™¯</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/269cfc65caf352a1b6954d4aacb8b15c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yrXAwEaQGES49lvB"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">æ‰¬Â·å®‰ä¸œå®Â·ç§‘æ‹‰å°”åœ¨<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</figcaption></figure><p id="bdb6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è‡ªä»<a class="ae ks" href="https://shardingsphere.apache.org/document/5.0.0/en/overview/" rel="noopener ugc nofollow" target="_blank"> ShardingSphere 5.0.0 </a>å‘å¸ƒä»¥æ¥ï¼Œ<a class="ae ks" href="https://shardingsphere.apache.org/document/5.1.0/en/concepts/distsql/" rel="noopener ugc nofollow" target="_blank"> DistSQL </a>ä¸€ç›´åœ¨ä¸º ShardingSphere ç”Ÿæ€ç³»ç»Ÿæä¾›å¼ºå¤§çš„åŠ¨æ€ç®¡ç†åŠŸèƒ½ã€‚</p><p id="13a1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">å¾—ç›Šäº DistSQLï¼Œç”¨æˆ·èƒ½å¤Ÿå®Œæˆä»¥ä¸‹ä»»åŠ¡:</p><ul class=""><li id="811f" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">åœ¨çº¿åˆ›å»ºé€»è¾‘æ•°æ®åº“ã€‚</li><li id="ae45" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">åŠ¨æ€é…ç½®è§„åˆ™(å³åˆ†ç‰‡ã€æ•°æ®åŠ å¯†ã€è¯»/å†™æ‹†åˆ†ã€æ•°æ®åº“å‘ç°ã€å½±å­æ•°æ®åº“å’Œå…¨å±€è§„åˆ™)ã€‚</li><li id="9aed" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">å®æ—¶è°ƒæ•´å­˜å‚¨èµ„æºã€‚</li><li id="3256" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">å³æ—¶åˆ‡æ¢äº¤æ˜“ç±»å‹ã€‚</li><li id="4ab0" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">éšæ—¶æ‰“å¼€å’Œå…³é—­ SQL æ—¥å¿—ã€‚</li><li id="35f5" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">é¢„è§ˆ SQL è·¯ç”±ç»“æœã€‚</li></ul><p id="a730" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä¸æ­¤åŒæ—¶ï¼Œåœ¨æ—¥ç›Šå¤šæ ·åŒ–çš„åœºæ™¯èƒŒæ™¯ä¸‹ï¼Œè¶Šæ¥è¶Šå¤šçš„ DistSQL ç‰¹æ€§è¢«åˆ›é€ å‡ºæ¥ï¼Œå„ç§æœ‰ä»·å€¼çš„è¯­æ³•ä¹Ÿè¶Šæ¥è¶Šå—ç”¨æˆ·æ¬¢è¿ã€‚</p><h2 id="9819" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">æ¦‚è§‚</h2><p id="6b24" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">æœ¬å¸–ä»¥æ•°æ®åˆ†ç‰‡ä¸ºä¾‹ï¼Œè¯´æ˜ DistSQL çš„åº”ç”¨åœºæ™¯å’Œç›¸å…³åˆ†ç‰‡æ–¹æ³•ã€‚</p><p id="f526" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä¸€ç³»åˆ— DistSQL è¯­å¥é€šè¿‡å®é™…æ¡ˆä¾‹ä¸²è”èµ·æ¥ï¼Œç»™ä½ ä¸€å¥—å®Œæ•´å®ç”¨çš„ DistSQL åˆ†ç‰‡ç®¡ç†æ–¹æ¡ˆï¼Œé€šè¿‡åŠ¨æ€ç®¡ç†åˆ›å»ºå’Œç»´æŠ¤åˆ†å¸ƒå¼æ•°æ®åº“ã€‚æœ¬ä¾‹ä¸­å°†ä½¿ç”¨ä»¥ä¸‹ DistSQL:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/9fef18888fbe771b8941ab035b29bf6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uBP3A5QEDskP4JzE"/></div></div></figure><h2 id="5d33" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">å®é™…æ¡ˆä¾‹</h2><h2 id="7ed4" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">å¿…éœ€çš„åœºæ™¯</h2><ul class=""><li id="eef6" class="lp lq in kv b kw mw kz mx lc nc lg nd lk ne lo lu lv lw lx bi translated">åˆ›å»ºä¸¤ä¸ªåˆ†ç‰‡è¡¨:<code class="fe nf ng nh ni b">t_order</code>å’Œ<code class="fe nf ng nh ni b">t_order_item.</code></li><li id="645e" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">å¯¹äºè¿™ä¸¤ä¸ªè¡¨ï¼Œæ•°æ®åº“ç¢ç‰‡æ˜¯ç”¨<code class="fe nf ng nh ni b">user_id</code>å­—æ®µæ‰§è¡Œçš„ï¼Œè¡¨ç¢ç‰‡æ˜¯ç”¨<code class="fe nf ng nh ni b">order_id</code>å­—æ®µæ‰§è¡Œçš„ã€‚</li><li id="c5be" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">ç¢ç‰‡çš„æ•°é‡æ˜¯ 2 ä¸ªæ•°æ®åº“* 3 ä¸ªè¡¨ã€‚</li></ul><p id="bd6e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">å¦‚ä¸‹å›¾æ‰€ç¤º:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/68c641241b445fadaa18e5060d05136f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v84QYOJnWbRroIji"/></div></div></figure><h2 id="62d9" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">è®¾ç½®ç¯å¢ƒ</h2><ol class=""><li id="78f7" class="lp lq in kv b kw mw kz mx lc nc lg nd lk ne lo nk lv lw lx bi translated">ä¸ºè®¿é—®å‡†å¤‡ä¸€ä¸ª MySQL æ•°æ®åº“å®ä¾‹ã€‚åˆ›å»ºä¸¤ä¸ªæ–°çš„æ•°æ®åº“:<code class="fe nf ng nh ni b">demo_ds_0</code>å’Œ<code class="fe nf ng nh ni b">demo_ds_1</code>ã€‚</li></ol><blockquote class="nl nm nn"><p id="5974" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io">è¿™é‡Œæˆ‘ä»¬ä»¥ MySQL ä¸ºä¾‹ï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨ PostgreSQL æˆ– openGauss æ•°æ®åº“ã€‚</strong></p></blockquote><p id="77b0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.éƒ¨ç½²<a class="ae ks" href="https://shardingsphere.apache.org/document/5.1.2/en/overview/" rel="noopener ugc nofollow" target="_blank">Apache sharding sphere-Proxy 5 . 1 . 2</a>å’Œ<a class="ae ks" href="https://zookeeper.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache ZooKeeper </a>ã€‚ZooKeeper å……å½“æ²»ç†ä¸­å¿ƒï¼Œå­˜å‚¨ ShardingSphere å…ƒæ•°æ®ä¿¡æ¯ã€‚</p><p id="029c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.åœ¨<code class="fe nf ng nh ni b">Proxy conf</code>ç›®å½•ä¸­é…ç½®<code class="fe nf ng nh ni b">server.yaml</code>,å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="dd59" class="md me in ni b gy nw nx l ny nz">mode:<br/>  type: Cluster<br/>  repository:<br/>    type: ZooKeeper<br/>    props:<br/>      namespace: governance_ds<br/>      server-lists: localhost:2181  # ZooKeeper address<br/>      retryIntervalMilliseconds: 500<br/>      timeToLiveSeconds: 60<br/>      maxRetries: 3<br/>      operationTimeoutMilliseconds: 500<br/>  overwrite: false</span><span id="fe48" class="md me in ni b gy oa nx l ny nz">rules:<br/>  - !AUTHORITY<br/>    users:<br/>      - root@%:root</span></pre><p id="4a0b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">4.å¯åŠ¨ ShardingSphere-Proxy å¹¶ä½¿ç”¨å®¢æˆ·ç«¯å°†å…¶è¿æ¥åˆ°ä»£ç†ï¼Œä¾‹å¦‚:</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="7822" class="md me in ni b gy nw nx l ny nz">mysql -h 127.0.0.1 -P 3307 -u root -p</span></pre><h2 id="6256" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">åˆ›å»ºåˆ†å¸ƒå¼æ•°æ®åº“</h2><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="409c" class="md me in ni b gy nw nx l ny nz">CREATE DATABASE sharding_db;</span><span id="b141" class="md me in ni b gy oa nx l ny nz">USE sharding_db;</span></pre><h2 id="abb1" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">æ·»åŠ å­˜å‚¨èµ„æº</h2><p id="a5e0" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">1.æ·»åŠ å‡†å¤‡å¥½çš„<a class="ae ks" href="https://www.mysql.com/" rel="noopener ugc nofollow" target="_blank"> MySQL </a>æ•°æ®åº“å¯¹åº”çš„å­˜å‚¨èµ„æºã€‚</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="c69f" class="md me in ni b gy nw nx l ny nz">ADD RESOURCE ds_0 (<br/>    HOST=127.0.0.1,<br/>    PORT=3306,<br/>    DB=demo_ds_0,<br/>    USER=root,<br/>    PASSWORD=123456<br/>), ds_1(<br/>    HOST=127.0.0.1,<br/>    PORT=3306,<br/>    DB=demo_ds_1,<br/>    USER=root,<br/>    PASSWORD=123456<br/>);</span></pre><p id="9439" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æŸ¥çœ‹å­˜å‚¨èµ„æº</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="83c4" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW DATABASE RESOURCES\G;<br/>*************************** 1. row ***************************<br/>                           name: ds_1<br/>                           type: MySQL<br/>                           host: 127.0.0.1<br/>                           port: 3306<br/>                             db: demo_ds_1<br/>                            -- Omit partial attributes<br/>*************************** 2. row ***************************<br/>                           name: ds_0<br/>                           type: MySQL<br/>                           host: 127.0.0.1<br/>                           port: 3306<br/>                             db: demo_ds_0<br/>                            -- Omit partial attributes</span></pre><blockquote class="nl nm nn"><p id="3004" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io">åœ¨æŸ¥è¯¢è¯­å¥ä¸­åŠ å…¥\G æ—¨åœ¨ä½¿è¾“å‡ºæ ¼å¼æ›´å…·å¯è¯»æ€§ï¼Œå¹¶éå¿…é¡»ã€‚</strong></p></blockquote><h2 id="5289" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">åˆ›å»ºåˆ†ç‰‡è§„åˆ™</h2><p id="e9f7" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">ShardingSphere çš„åˆ†ç‰‡è§„åˆ™æ”¯æŒå¸¸è§„åˆ†ç‰‡å’Œè‡ªåŠ¨åˆ†ç‰‡ã€‚è¿™ä¸¤ç§åˆ†ç‰‡æ–¹æ³•å…·æœ‰ç›¸åŒçš„æ•ˆæœã€‚ä¸åŒçš„æ˜¯ï¼Œè‡ªåŠ¨åˆ†ç‰‡çš„é…ç½®æ›´åŠ ç®€æ´ï¼Œè€Œè§„åˆ™åˆ†ç‰‡æ›´åŠ çµæ´»å’Œç‹¬ç«‹ã€‚</p><blockquote class="nl nm nn"><p id="79c6" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io"> <em class="in">å…³äºè‡ªåŠ¨åˆ†ç‰‡çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚è€ƒä»¥ä¸‹é“¾æ¥:</em> </strong></p></blockquote><p id="a13f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://medium.com/nerd-for-tech/intro-to-distsql-an-open-source-more-powerful-sql-bada4099211?source=your_stories_page-------------------------------------" rel="noopener">dist SQL ç®€ä»‹â€”â€”ä¸€ä¸ªå¼€æºä¸”æ›´å¼ºå¤§çš„ SQL </a></p><p id="dc46" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://medium.com/geekculture/autotable-your-butler-like-sharding-configuration-tool-9a45dbb7e285" rel="noopener"> AutoTable:æ‚¨çš„ç®¡å®¶å¼åˆ†ç‰‡é…ç½®å·¥å…·</a></p><p id="a45c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é‡‡ç”¨å¸¸è§„åˆ†ç‰‡ï¼Œå¹¶ä½¿ç”¨<code class="fe nf ng nh ni b">INLINE</code>è¡¨è¾¾å¼ç®—æ³•æ¥å®ç°éœ€æ±‚ä¸­æè¿°çš„åˆ†ç‰‡åœºæ™¯ã€‚</p><p id="afef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">ä¸»é”®ç”Ÿæˆå™¨</strong></p><p id="dac9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä¸»é”®ç”Ÿæˆå™¨å¯ä»¥ä¸ºåˆ†å¸ƒå¼åœºæ™¯ä¸­çš„æ•°æ®è¡¨ç”Ÿæˆå®‰å…¨ä¸”å”¯ä¸€çš„ä¸»é”®ã€‚è¯¦è§<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/key-generator/" rel="noopener ugc nofollow" target="_blank"> <em class="no">åˆ†å‘ä¸»é”®</em> </a> <em class="no">ã€‚</em></p><p id="423c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.åˆ›å»ºä¸»é”®ç”Ÿæˆå™¨ã€‚</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="1099" class="md me in ni b gy nw nx l ny nz">CREATE SHARDING KEY GENERATOR snowflake_key_generator (<br/>TYPE(NAME=SNOWFLAKE)<br/>);</span></pre><p id="1935" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æŸ¥è¯¢ä¸»é”®ç”Ÿæˆå™¨</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="acab" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING KEY GENERATORS;<br/>+-------------------------+-----------+-------+<br/>| name                    | type      | props |<br/>+-------------------------+-----------+-------+<br/>| snowflake_key_generator | snowflake | {}    |<br/>+-------------------------+-----------+-------+<br/>1 row in set (0.01 sec)</span></pre><p id="d477" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">åˆ†ç‰‡ç®—æ³•</strong></p><p id="8854" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.åˆ›å»ºä¸€ä¸ªæ•°æ®åº“åˆ†ç‰‡ç®—æ³•ï¼Œç”±<code class="fe nf ng nh ni b">t_order</code>å’Œ<code class="fe nf ng nh ni b">t_order_item</code>å…±åŒä½¿ç”¨ã€‚</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="520c" class="md me in ni b gy nw nx l ny nz">-- Modulo 2 based on user_id in database sharding<br/>CREATE SHARDING ALGORITHM database_inline (<br/>TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="ds_${user_id % 2}"))<br/>);</span></pre><p id="289e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.ä¸º<code class="fe nf ng nh ni b">t_order</code>å’Œ<code class="fe nf ng nh ni b">t_order_item</code>åˆ›å»ºä¸åŒçš„è¡¨æ ¼ç¢ç‰‡ç®—æ³•ã€‚</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="478b" class="md me in ni b gy nw nx l ny nz">-- Modulo 3 based on order_id in table sharding<br/>CREATE SHARDING ALGORITHM t_order_inline (<br/>TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="t_order_${order_id % 3}"))<br/>);<br/>CREATE SHARDING ALGORITHM t_order_item_inline (<br/>TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="t_order_item_${order_id % 3}"))<br/>);</span></pre><p id="33b3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.æŸ¥è¯¢åˆ†ç‰‡ç®—æ³•</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="d9d7" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING ALGORITHMS;<br/>+---------------------+--------+---------------------------------------------------+<br/>| name                | type   | props                                             |<br/>+---------------------+--------+---------------------------------------------------+<br/>| database_inline     | inline | algorithm-expression=ds_${user_id % 2}            |<br/>| t_order_inline      | inline | algorithm-expression=t_order_${order_id % 3}      |<br/>| t_order_item_inline | inline | algorithm-expression=t_order_item_${order_id % 3} |<br/>+---------------------+--------+---------------------------------------------------+<br/>3 rows in set (0.00 sec)</span></pre><p id="c15d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">é»˜è®¤åˆ†ç‰‡ç­–ç•¥</strong></p><p id="39a6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">åˆ†ç‰‡ç­–ç•¥ç”±åˆ†ç‰‡å¯†é’¥å’Œåˆ†ç‰‡ç®—æ³•ç»„æˆã€‚å…¶æ¦‚å¿µè¯·å‚è€ƒ<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/sharding/" rel="noopener ugc nofollow" target="_blank">åˆ†ç‰‡ç­–ç•¥</a>ã€‚</p><p id="c1ce" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">åˆ†ç‰‡ç­–ç•¥ç”±<code class="fe nf ng nh ni b">databaseStrategy</code>å’Œ<code class="fe nf ng nh ni b">tableStrategy</code>ç»„æˆã€‚</p><p id="4e3b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ç”±äº<code class="fe nf ng nh ni b">t_order</code>å’Œ<code class="fe nf ng nh ni b">t_order_item</code>å…·æœ‰ç›¸åŒçš„æ•°æ®åº“åˆ†ç‰‡å­—æ®µå’Œåˆ†ç‰‡ç®—æ³•ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤ç­–ç•¥ï¼Œè¯¥ç­–ç•¥å°†è¢«æ‰€æœ‰æœªé…ç½®åˆ†ç‰‡ç­–ç•¥çš„åˆ†ç‰‡è¡¨ä½¿ç”¨:</p><ol class=""><li id="9f93" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo nk lv lw lx bi translated">åˆ›å»ºé»˜è®¤çš„æ•°æ®åº“åˆ†ç‰‡ç­–ç•¥</li></ol><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="666d" class="md me in ni b gy nw nx l ny nz">CREATE DEFAULT SHARDING DATABASE STRATEGY (<br/>TYPE=STANDARD,SHARDING_COLUMN=user_id,SHARDING_ALGORITHM=database_inline<br/>);</span></pre><p id="c47e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æŸ¥è¯¢é»˜è®¤ç­–ç•¥</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="9da9" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW DEFAULT SHARDING STRATEGY\G;<br/>*************************** 1. row ***************************<br/>                    name: TABLE<br/>                    type: NONE<br/>         sharding_column:<br/> sharding_algorithm_name:<br/> sharding_algorithm_type:<br/>sharding_algorithm_props:<br/>*************************** 2. row ***************************<br/>                    name: DATABASE<br/>                    type: STANDARD<br/>         sharding_column: user_id<br/> sharding_algorithm_name: database_inline<br/> sharding_algorithm_type: inline<br/>sharding_algorithm_props: {algorithm-expression=ds_${user_id % 2}}<br/>2 rows in set (0.00 sec)</span></pre><blockquote class="nl nm nn"><p id="52ee" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io">æ²¡æœ‰é…ç½®é»˜è®¤çš„è¡¨æ ¼åˆ†ç‰‡ç­–ç•¥ï¼Œæ‰€ä»¥</strong> <code class="fe nf ng nh ni b"><strong class="kv io">TABLE</strong></code> <strong class="kv io">çš„é»˜è®¤ç­–ç•¥æ˜¯</strong> <code class="fe nf ng nh ni b"><strong class="kv io">NONE</strong></code> <strong class="kv io">ã€‚</strong></p></blockquote><p id="5ecd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">åˆ†ç‰‡è§„åˆ™</strong></p><p id="ed9d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä¸»é”®ç”Ÿæˆå™¨å’Œåˆ†ç‰‡ç®—æ³•éƒ½å‡†å¤‡å¥½äº†ã€‚ç°åœ¨åˆ›å»ºåˆ†ç‰‡è§„åˆ™ã€‚</p><p id="51b6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.<code class="fe nf ng nh ni b">t_order</code></p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="149a" class="md me in ni b gy nw nx l ny nz">CREATE SHARDING TABLE RULE t_order (<br/>DATANODES("ds_${0..1}.t_order_${0..2}"),<br/>TABLE_STRATEGY(TYPE=STANDARD,SHARDING_COLUMN=order_id,SHARDING_ALGORITHM=t_order_inline),<br/>KEY_GENERATE_STRATEGY(COLUMN=order_id,KEY_GENERATOR=snowflake_key_generator)<br/>);</span></pre><blockquote class="nl nm nn"><p id="e082" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><strong class="kv io">DATANODES</strong></code> <strong class="kv io">æŒ‡å®šåˆ†ç‰‡è¡¨çš„æ•°æ®èŠ‚ç‚¹ã€‚</strong></p><p id="bc25" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><strong class="kv io">TABLE_STRATEGY</strong></code> <strong class="kv io">æŒ‡å®šäº†è¡¨æ ¼ç­–ç•¥ï¼Œå…¶ä¸­</strong> <code class="fe nf ng nh ni b"><strong class="kv io">SHARDING_ALGORITHM</strong></code> <strong class="kv io">ä½¿ç”¨åˆ›å»ºçš„åˆ†ç‰‡ç®—æ³•</strong><code class="fe nf ng nh ni b"><strong class="kv io">t_order_inline</strong></code><strong class="kv io">ï¼›</strong></p><p id="5f84" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><strong class="kv io">KEY_GENERATE_STRATEGY</strong></code> <strong class="kv io">æŒ‡å®šäº†è¡¨çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚å¦‚æœä¸éœ€è¦ç”Ÿæˆä¸»é”®ï¼Œè¯·è·³è¿‡æ­¤é…ç½®ã€‚</strong></p></blockquote><p id="d9af" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.<code class="fe nf ng nh ni b">t_order_item</code></p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="febc" class="md me in ni b gy nw nx l ny nz">CREATE SHARDING TABLE RULE t_order_item (<br/>DATANODES("ds_${0..1}.t_order_item_${0..2}"),<br/>TABLE_STRATEGY(TYPE=STANDARD,SHARDING_COLUMN=order_id,SHARDING_ALGORITHM=t_order_item_inline),<br/>KEY_GENERATE_STRATEGY(COLUMN=order_item_id,KEY_GENERATOR=snowflake_key_generator)<br/>);</span></pre><p id="cb04" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.æŸ¥è¯¢åˆ†ç‰‡è§„åˆ™</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="0b4d" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING TABLE RULES\G;<br/>*************************** 1. row ***************************<br/>                            table: t_order<br/>                actual_data_nodes: ds_${0..1}.t_order_${0..2}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_${order_id % 3}<br/>              key_generate_column: order_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>*************************** 2. row ***************************<br/>                            table: t_order_item<br/>                actual_data_nodes: ds_${0..1}.t_order_item_${0..2}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_item_${order_id % 3}<br/>              key_generate_column: order_item_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>2 rows in set (0.00 sec)</span></pre><p id="5455" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ğŸ’¡è‡³æ­¤ï¼Œ<code class="fe nf ng nh ni b">t_order</code>å’Œ<code class="fe nf ng nh ni b">t_order_item</code>çš„åˆ†ç‰‡è§„åˆ™å·²ç»é…ç½®å®Œæ¯•ã€‚</p><p id="6812" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æœ‰ç‚¹å¤æ‚ï¼Ÿé‚£ä¹ˆï¼Œæ‚¨ä¹Ÿå¯ä»¥è·³è¿‡åˆ›å»ºä¸»é”®ç”Ÿæˆå™¨ã€åˆ†ç‰‡ç®—æ³•å’Œé»˜è®¤ç­–ç•¥çš„æ­¥éª¤ï¼Œä¸€æ­¥å®Œæˆåˆ†ç‰‡è§„åˆ™ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿å®ƒå˜å¾—æ›´å®¹æ˜“ã€‚</p><h2 id="c74b" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">å¥æ³•</h2><p id="444e" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å¿…é¡»æ·»åŠ ä¸€ä¸ªåˆ†ç‰‡è¡¨<code class="fe nf ng nh ni b">t_order_detail</code>ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¦‚ä¸‹çš„åˆ†ç‰‡è§„åˆ™:</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="9713" class="md me in ni b gy nw nx l ny nz">CREATE SHARDING TABLE RULE t_order_detail (<br/>DATANODES("ds_${0..1}.t_order_detail_${0..1}"),<br/>DATABASE_STRATEGY(TYPE=STANDARD,SHARDING_COLUMN=user_id,SHARDING_ALGORITHM(TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="ds_${user_id % 2}")))),<br/>TABLE_STRATEGY(TYPE=STANDARD,SHARDING_COLUMN=order_id,SHARDING_ALGORITHM(TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="t_order_detail_${order_id % 3}")))),<br/>KEY_GENERATE_STRATEGY(COLUMN=detail_id,TYPE(NAME=snowflake))<br/>);</span></pre><p id="7c05" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">æ³¨æ„:</strong>ä¸Šé¢çš„è¯­å¥æŒ‡å®šäº†æ•°æ®åº“åˆ†ç‰‡ç­–ç•¥ã€è¡¨ç­–ç•¥ã€ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œä½†æ˜¯æ²¡æœ‰ä½¿ç”¨ç°æœ‰çš„ç®—æ³•ã€‚</p><p id="d483" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">å› æ­¤ï¼ŒDistSQL å¼•æ“è‡ªåŠ¨ä½¿ç”¨è¾“å…¥è¡¨è¾¾å¼ä¸º<code class="fe nf ng nh ni b">t_order_detail</code>çš„åˆ†ç‰‡è§„åˆ™åˆ›å»ºç®—æ³•ã€‚ç°åœ¨ï¼Œä¸»é”®ç”Ÿæˆå™¨ã€åˆ†ç‰‡ç®—æ³•å’Œåˆ†ç‰‡è§„åˆ™å¦‚ä¸‹:</p><p id="14be" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.ä¸»é”®ç”Ÿæˆå™¨</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="536c" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING KEY GENERATORS;<br/>+--------------------------+-----------+-------+<br/>| name                     | type      | props |<br/>+--------------------------+-----------+-------+<br/>| snowflake_key_generator  | snowflake | {}    |<br/>| t_order_detail_snowflake | snowflake | {}    |<br/>+--------------------------+-----------+-------+<br/>2 rows in set (0.00 sec)</span></pre><p id="b4e9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.åˆ†ç‰‡ç®—æ³•</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="06c7" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING ALGORITHMS;<br/>+--------------------------------+--------+-----------------------------------------------------+<br/>| name                           | type   | props                                               |<br/>+--------------------------------+--------+-----------------------------------------------------+<br/>| database_inline                | inline | algorithm-expression=ds_${user_id % 2}              |<br/>| t_order_inline                 | inline | algorithm-expression=t_order_${order_id % 3}        |<br/>| t_order_item_inline            | inline | algorithm-expression=t_order_item_${order_id % 3}   |<br/>| t_order_detail_database_inline | inline | algorithm-expression=ds_${user_id % 2}              |<br/>| t_order_detail_table_inline    | inline | algorithm-expression=t_order_detail_${order_id % 3} |<br/>+--------------------------------+--------+-----------------------------------------------------+<br/>5 rows in set (0.00 sec)</span></pre><p id="9007" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.åˆ†å‰²è§„åˆ™</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="c012" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING TABLE RULES\G;<br/>*************************** 1. row ***************************<br/>                            table: t_order<br/>                actual_data_nodes: ds_${0..1}.t_order_${0..2}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_${order_id % 3}<br/>              key_generate_column: order_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>*************************** 2. row ***************************<br/>                            table: t_order_item<br/>                actual_data_nodes: ds_${0..1}.t_order_item_${0..2}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_item_${order_id % 3}<br/>              key_generate_column: order_item_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>*************************** 3. row ***************************<br/>                            table: t_order_detail<br/>                actual_data_nodes: ds_${0..1}.t_order_detail_${0..1}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_detail_${order_id % 3}<br/>              key_generate_column: detail_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>3 rows in set (0.01 sec)</span></pre><p id="f21a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">æ³¨:<code class="fe nf ng nh ni b">CREATE SHARDING TABLE RULE</code>è¯­å¥ä¸­çš„</strong>ã€<code class="fe nf ng nh ni b">DATABASE_STRATEGY</code>ã€<code class="fe nf ng nh ni b">TABLE_STRATEGY</code>ã€<code class="fe nf ng nh ni b">KEY_GENERATE_STRATEGY</code>éƒ½å¯ä»¥å¤ç”¨å·²æœ‰çš„ç®—æ³•ã€‚</p><p id="bb39" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ–è€…ï¼Œå¯ä»¥é€šè¿‡è¯­æ³•å¿«é€Ÿå®šä¹‰å®ƒä»¬ã€‚ä¸åŒä¹‹å¤„åœ¨äºåˆ›å»ºäº†é¢å¤–çš„ç®—æ³•å¯¹è±¡ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®åœºæ™¯çµæ´»ä½¿ç”¨ã€‚</p><p id="2120" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">åˆ›å»ºé…ç½®éªŒè¯è§„åˆ™åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡ŒéªŒè¯:</p><p id="b5d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">æ£€æŸ¥èŠ‚ç‚¹åˆ†å¸ƒ</strong></p><p id="d841" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">DistSQL æä¾›äº†<code class="fe nf ng nh ni b">SHOW SHARDING TABLE NODES</code>æ¥æ£€æŸ¥èŠ‚ç‚¹åˆ†å¸ƒï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿäº†è§£åˆ†ç‰‡è¡¨çš„åˆ†å¸ƒã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/0da127794fd11406b7f91cb92f22dc3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rX3seK3lKMaK0e1O"/></div></div></figure><p id="768e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘ä»¬å¯ä»¥çœ‹åˆ° shard è¡¨çš„èŠ‚ç‚¹åˆ†å¸ƒä¸éœ€æ±‚ä¸­æè¿°çš„ä¸€è‡´ã€‚</p><p id="c2b8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> SQL é¢„è§ˆ</strong></p><p id="de6d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">é¢„è§ˆ SQL ä¹Ÿæ˜¯éªŒè¯é…ç½®çš„ä¸€ç§ç®€å•æ–¹æ³•ã€‚å®ƒçš„è¯­æ³•æ˜¯<code class="fe nf ng nh ni b">PREVIEW SQL</code>:</p><p id="92f0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.å¯¹æ‰€æœ‰è·¯ç”±ä¸ä½¿ç”¨åˆ†ç‰‡é”®çš„æŸ¥è¯¢</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/51834e076b5d6629f3578ad29a842de7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YPgyLiPl4awqGkBC"/></div></div></figure><p id="731a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æŒ‡å®š<code class="fe nf ng nh ni b">user_id</code>ä½¿ç”¨å•ä¸€æ•°æ®åº“è·¯å¾„è¿›è¡ŒæŸ¥è¯¢</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/16b0e00e7747bdbb2d134d9fdf8f3aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vpv-wgrP9UZjt-vl"/></div></div></figure><p id="5ad2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.ç”¨å•ä¸ªå·¥ä½œå°è·¯çº¿æŒ‡å®š<code class="fe nf ng nh ni b">user_id</code>å’Œ<code class="fe nf ng nh ni b">order_id</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/c8edd50d838bd0a06c36a1654b5b42b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UmF6RC_OZAg_Q_ix"/></div></div></figure><blockquote class="nl nm nn"><p id="abcf" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated">å•è¡¨è·¯ç”±æ‰«ææœ€å°‘çš„ç¢ç‰‡è¡¨ï¼Œæä¾›æœ€é«˜çš„æ•ˆç‡ã€‚</p></blockquote><h2 id="5072" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">DistSQL è¾…åŠ©æŸ¥è¯¢</h2><p id="cf0b" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">åœ¨ç³»ç»Ÿç»´æŠ¤è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½éœ€è¦é‡Šæ”¾ä¸å†ä½¿ç”¨çš„ç®—æ³•æˆ–å­˜å‚¨èµ„æºï¼Œæˆ–è€…éœ€è¦é‡Šæ”¾çš„èµ„æºå¯èƒ½å·²ç»è¢«å¼•ç”¨ï¼Œæ— æ³•åˆ é™¤ã€‚ä¸‹é¢çš„ DistSQL å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚</p><p id="5524" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">æŸ¥è¯¢æœªä½¿ç”¨çš„èµ„æº</strong></p><p id="ca2a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.è¯­æ³•:<code class="fe nf ng nh ni b">SHOW UNUSED RESOURCES</code></p><p id="143c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æ ·æœ¬:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/7822ece9df98601e3986369ec51bc334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mpu13-kM7CC3i0mz"/></div></div></figure><p id="957d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">æŸ¥è¯¢æœªä½¿ç”¨çš„ä¸»é”®ç”Ÿæˆå™¨</strong></p><p id="5adb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.è¯­æ³•:<code class="fe nf ng nh ni b">SHOW UNUSED SHARDING KEY GENERATORS</code></p><p id="ae93" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æ ·æœ¬:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/0f0ba1944039e277a9c25c5a666464fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7r4tMPuhmEplnopY"/></div></div></figure><p id="e2a0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">æŸ¥è¯¢æœªä½¿ç”¨çš„åˆ†ç‰‡ç®—æ³•</strong></p><p id="1fb0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.è¯­æ³•:<code class="fe nf ng nh ni b">SHOW UNUSED SHARDING ALGORITHMS</code></p><p id="55fd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æ ·æœ¬:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/c2fa8753b1673c3acc9c105fffedc3ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xtTJl6yQ-oUhHsHq"/></div></div></figure><p id="2d75" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">æŸ¥è¯¢ä½¿ç”¨ç›®æ ‡å­˜å‚¨èµ„æºçš„è§„åˆ™</strong></p><p id="e886" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.è¯­æ³•:<code class="fe nf ng nh ni b">SHOW RULES USED RESOURCE</code></p><p id="bc3a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æ ·æœ¬:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/c2242ceb4ccf16f4b90fd894172cf966.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tIA3JjssE5SW5pW3"/></div></div></figure><blockquote class="nl nm nn"><p id="4d99" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io">å¯ä»¥æŸ¥è¯¢æ‰€æœ‰ä½¿ç”¨è¯¥èµ„æºçš„è§„åˆ™ï¼Œä¸é™äº</strong> <code class="fe nf ng nh ni b"><strong class="kv io">Sharding Rule</strong></code> <strong class="kv io">ã€‚</strong></p></blockquote><p id="ddf5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">ä½¿ç”¨ç›®æ ‡ä¸»é”®ç”Ÿæˆå™¨çš„æŸ¥è¯¢åˆ†ç‰‡è§„åˆ™</strong></p><p id="7876" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.è¯­æ³•:<code class="fe nf ng nh ni b">SHOW SHARDING TABLE RULES USED KEY GENERATOR</code></p><p id="7892" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æ ·æœ¬:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/618bdf2b091949e584eec89435cacdf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QLC4IL5dfgXX4n8R"/></div></div></figure><p id="599d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">ä½¿ç”¨ç›®æ ‡ç®—æ³•çš„æŸ¥è¯¢åˆ†ç‰‡è§„åˆ™</strong></p><p id="cfad" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.è¯­æ³•:<code class="fe nf ng nh ni b">SHOW SHARDING TABLE RULES USED ALGORITHM</code></p><p id="5bfe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.æ ·æœ¬:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/0ac0291365c0fb47d858d25554400928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U3CZBnibqSCVaXAt"/></div></div></figure><h2 id="e0d0" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">ç»“è®º</h2><p id="7458" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">æœ¬æ–‡ä»¥æ•°æ®åˆ†ç‰‡åœºæ™¯ä¸ºä¾‹ï¼Œä»‹ç»<a class="ae ks" href="https://shardingsphere.apache.org/document/5.1.0/en/concepts/distsql/" rel="noopener ugc nofollow" target="_blank"> DistSQL </a>çš„åº”ç”¨å’Œæ–¹æ³•ã€‚</p><p id="f224" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">DistSQL æä¾›çµæ´»çš„è¯­æ³•æ¥å¸®åŠ©ç®€åŒ–æ“ä½œã€‚é™¤äº†<code class="fe nf ng nh ni b">INLINE</code>ç®—æ³•ï¼ŒDistSQL è¿˜æ”¯æŒæ ‡å‡†åˆ†ç‰‡ã€å¤åˆåˆ†ç‰‡ã€æç¤ºåˆ†ç‰‡å’Œå®šåˆ¶åˆ†ç‰‡ç®—æ³•ã€‚æ›´å¤šçš„ä¾‹å­å°†åœ¨æœªæ¥çš„æ—¥å­é‡Œä»‹ç»ã€‚</p><p id="8b22" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">å¦‚æœä½ å¯¹<a class="ae ks" href="https://shardingsphere.apache.org/" rel="noopener ugc nofollow" target="_blank">Apache sharing sphere</a>æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·éšæ—¶åœ¨ GitHub é—®é¢˜åˆ—è¡¨ä¸Šå‘è¡¨ã€‚</p><h1 id="2a42" class="ob me in bd mf oc od oe mi of og oh ml jt oi ju mo jw oj jx mr jz ok ka mu ol bi translated">é¡¹ç›®é“¾æ¥:</h1><p id="6862" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated"><a class="ae ks" href="https://github.com/apache/shardingsphere/issues?page=1&amp;q=is%3Aopen+is%3Aissue+label%3A%22project%3A+OpenForce+2022%22" rel="noopener ugc nofollow" target="_blank"> ShardingSphere Github </a></p><p id="5c0f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://twitter.com/ShardingSphere" rel="noopener ugc nofollow" target="_blank"> ShardingSphere Twitter </a></p><p id="3ee1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://join.slack.com/t/apacheshardingsphere/shared_invite/zt-sbdde7ie-SjDqo9~I4rYcR18bq0SYTg" rel="noopener ugc nofollow" target="_blank">åˆ‡å‰²çƒæ¾å¼›åº¦</a></p><p id="1dfd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://shardingsphere.apache.org/community/cn/contribute/" rel="noopener ugc nofollow" target="_blank">æŠ•ç¨¿æŒ‡å—</a></p><p id="7383" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">GitHub é—®é¢˜</p><p id="c905" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://shardingsphere.apache.org/community/en/contribute/" rel="noopener ugc nofollow" target="_blank">æŠ•ç¨¿æŒ‡å—</a></p><h1 id="3d71" class="ob me in bd mf oc od oe mi of og oh ml jt oi ju mo jw oj jx mr jz ok ka mu ol bi translated"><strong class="ak">å‚è€ƒæ–‡çŒ®</strong></h1><p id="c611" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">1.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/concepts/distsql/" rel="noopener ugc nofollow" target="_blank">æ¦‚å¿µ-DistSQL </a></p><p id="0b75" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/key-generator/" rel="noopener ugc nofollow" target="_blank">æ¦‚å¿µ-åˆ†å¸ƒå¼ä¸»é”®</a></p><p id="94e6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/sharding/" rel="noopener ugc nofollow" target="_blank">æ¦‚å¿µåˆ†å‰²ç­–ç•¥</a></p><p id="5ad8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">4.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/inline-expression/" rel="noopener ugc nofollow" target="_blank">æ¦‚å¿µå†…åµŒè¡¨è¾¾å¼</a></p><p id="9e47" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">5.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/user-manual/shardingsphere-jdbc/builtin-algorithm/sharding/" rel="noopener ugc nofollow" target="_blank">å†…ç½®åˆ†ç‰‡ç®—æ³•</a></p><p id="3e15" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">6.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/user-manual/shardingsphere-proxy/distsql/syntax/" rel="noopener ugc nofollow" target="_blank">ç”¨æˆ·æ‰‹å†Œ:DistSQL </a></p><h2 id="e927" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">ä½œè€…</h2><h2 id="e24d" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated"><strong class="ak">æ±Ÿ</strong></h2><p id="a358" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated"><a class="ae ks" href="https://www.sphere-ex.com/en/" rel="noopener ugc nofollow" target="_blank"> <em class="no"> SphereEx </em> </a> <em class="no">ä¸­é—´ä»¶ R &amp; D å·¥ç¨‹å¸ˆ&amp;Apache sharding sphere Committerã€‚</em></p><p id="fc8f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">é¾™æ¶›å…³æ³¨ DistSQL çš„ R&amp;D å’Œç›¸å…³ç‰¹æ€§ã€‚</p></div></div>    
</body>
</html>