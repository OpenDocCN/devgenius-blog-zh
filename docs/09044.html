<html>
<head>
<title>DistSQL Applications: Building a Dynamic Distributed Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DistSQL 应用程序:构建动态分布式数据库</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/distsql-applications-building-a-dynamic-distributed-database-969690ec4c3a?source=collection_archive---------4-----------------------#2022-07-26">https://blog.devgenius.io/distsql-applications-building-a-dynamic-distributed-database-969690ec4c3a?source=collection_archive---------4-----------------------#2022-07-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0445" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">背景</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/269cfc65caf352a1b6954d4aacb8b15c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yrXAwEaQGES49lvB"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">扬·安东宁·科拉尔在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="bdb6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">自从<a class="ae ks" href="https://shardingsphere.apache.org/document/5.0.0/en/overview/" rel="noopener ugc nofollow" target="_blank"> ShardingSphere 5.0.0 </a>发布以来，<a class="ae ks" href="https://shardingsphere.apache.org/document/5.1.0/en/concepts/distsql/" rel="noopener ugc nofollow" target="_blank"> DistSQL </a>一直在为 ShardingSphere 生态系统提供强大的动态管理功能。</p><p id="13a1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">得益于 DistSQL，用户能够完成以下任务:</p><ul class=""><li id="811f" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">在线创建逻辑数据库。</li><li id="ae45" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">动态配置规则(即分片、数据加密、读/写拆分、数据库发现、影子数据库和全局规则)。</li><li id="9aed" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">实时调整存储资源。</li><li id="3256" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">即时切换交易类型。</li><li id="4ab0" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">随时打开和关闭 SQL 日志。</li><li id="35f5" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">预览 SQL 路由结果。</li></ul><p id="a730" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">与此同时，在日益多样化的场景背景下，越来越多的 DistSQL 特性被创造出来，各种有价值的语法也越来越受用户欢迎。</p><h2 id="9819" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">概观</h2><p id="6b24" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">本帖以数据分片为例，说明 DistSQL 的应用场景和相关分片方法。</p><p id="f526" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一系列 DistSQL 语句通过实际案例串联起来，给你一套完整实用的 DistSQL 分片管理方案，通过动态管理创建和维护分布式数据库。本例中将使用以下 DistSQL:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/9fef18888fbe771b8941ab035b29bf6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uBP3A5QEDskP4JzE"/></div></div></figure><h2 id="5d33" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">实际案例</h2><h2 id="7ed4" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">必需的场景</h2><ul class=""><li id="eef6" class="lp lq in kv b kw mw kz mx lc nc lg nd lk ne lo lu lv lw lx bi translated">创建两个分片表:<code class="fe nf ng nh ni b">t_order</code>和<code class="fe nf ng nh ni b">t_order_item.</code></li><li id="645e" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">对于这两个表，数据库碎片是用<code class="fe nf ng nh ni b">user_id</code>字段执行的，表碎片是用<code class="fe nf ng nh ni b">order_id</code>字段执行的。</li><li id="c5be" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">碎片的数量是 2 个数据库* 3 个表。</li></ul><p id="bd6e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如下图所示:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/68c641241b445fadaa18e5060d05136f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v84QYOJnWbRroIji"/></div></div></figure><h2 id="62d9" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">设置环境</h2><ol class=""><li id="78f7" class="lp lq in kv b kw mw kz mx lc nc lg nd lk ne lo nk lv lw lx bi translated">为访问准备一个 MySQL 数据库实例。创建两个新的数据库:<code class="fe nf ng nh ni b">demo_ds_0</code>和<code class="fe nf ng nh ni b">demo_ds_1</code>。</li></ol><blockquote class="nl nm nn"><p id="5974" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io">这里我们以 MySQL 为例，但也可以使用 PostgreSQL 或 openGauss 数据库。</strong></p></blockquote><p id="77b0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.部署<a class="ae ks" href="https://shardingsphere.apache.org/document/5.1.2/en/overview/" rel="noopener ugc nofollow" target="_blank">Apache sharding sphere-Proxy 5 . 1 . 2</a>和<a class="ae ks" href="https://zookeeper.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache ZooKeeper </a>。ZooKeeper 充当治理中心，存储 ShardingSphere 元数据信息。</p><p id="029c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.在<code class="fe nf ng nh ni b">Proxy conf</code>目录中配置<code class="fe nf ng nh ni b">server.yaml</code>,如下所示:</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="dd59" class="md me in ni b gy nw nx l ny nz">mode:<br/>  type: Cluster<br/>  repository:<br/>    type: ZooKeeper<br/>    props:<br/>      namespace: governance_ds<br/>      server-lists: localhost:2181  # ZooKeeper address<br/>      retryIntervalMilliseconds: 500<br/>      timeToLiveSeconds: 60<br/>      maxRetries: 3<br/>      operationTimeoutMilliseconds: 500<br/>  overwrite: false</span><span id="fe48" class="md me in ni b gy oa nx l ny nz">rules:<br/>  - !AUTHORITY<br/>    users:<br/>      - root@%:root</span></pre><p id="4a0b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">4.启动 ShardingSphere-Proxy 并使用客户端将其连接到代理，例如:</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="7822" class="md me in ni b gy nw nx l ny nz">mysql -h 127.0.0.1 -P 3307 -u root -p</span></pre><h2 id="6256" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">创建分布式数据库</h2><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="409c" class="md me in ni b gy nw nx l ny nz">CREATE DATABASE sharding_db;</span><span id="b141" class="md me in ni b gy oa nx l ny nz">USE sharding_db;</span></pre><h2 id="abb1" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">添加存储资源</h2><p id="a5e0" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">1.添加准备好的<a class="ae ks" href="https://www.mysql.com/" rel="noopener ugc nofollow" target="_blank"> MySQL </a>数据库对应的存储资源。</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="c69f" class="md me in ni b gy nw nx l ny nz">ADD RESOURCE ds_0 (<br/>    HOST=127.0.0.1,<br/>    PORT=3306,<br/>    DB=demo_ds_0,<br/>    USER=root,<br/>    PASSWORD=123456<br/>), ds_1(<br/>    HOST=127.0.0.1,<br/>    PORT=3306,<br/>    DB=demo_ds_1,<br/>    USER=root,<br/>    PASSWORD=123456<br/>);</span></pre><p id="9439" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.查看存储资源</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="83c4" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW DATABASE RESOURCES\G;<br/>*************************** 1. row ***************************<br/>                           name: ds_1<br/>                           type: MySQL<br/>                           host: 127.0.0.1<br/>                           port: 3306<br/>                             db: demo_ds_1<br/>                            -- Omit partial attributes<br/>*************************** 2. row ***************************<br/>                           name: ds_0<br/>                           type: MySQL<br/>                           host: 127.0.0.1<br/>                           port: 3306<br/>                             db: demo_ds_0<br/>                            -- Omit partial attributes</span></pre><blockquote class="nl nm nn"><p id="3004" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io">在查询语句中加入\G 旨在使输出格式更具可读性，并非必须。</strong></p></blockquote><h2 id="5289" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">创建分片规则</h2><p id="e9f7" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">ShardingSphere 的分片规则支持常规分片和自动分片。这两种分片方法具有相同的效果。不同的是，自动分片的配置更加简洁，而规则分片更加灵活和独立。</p><blockquote class="nl nm nn"><p id="79c6" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io"> <em class="in">关于自动分片的更多细节，请参考以下链接:</em> </strong></p></blockquote><p id="a13f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://medium.com/nerd-for-tech/intro-to-distsql-an-open-source-more-powerful-sql-bada4099211?source=your_stories_page-------------------------------------" rel="noopener">dist SQL 简介——一个开源且更强大的 SQL </a></p><p id="dc46" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://medium.com/geekculture/autotable-your-butler-like-sharding-configuration-tool-9a45dbb7e285" rel="noopener"> AutoTable:您的管家式分片配置工具</a></p><p id="a45c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，我们将采用常规分片，并使用<code class="fe nf ng nh ni b">INLINE</code>表达式算法来实现需求中描述的分片场景。</p><p id="afef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">主键生成器</strong></p><p id="dac9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">主键生成器可以为分布式场景中的数据表生成安全且唯一的主键。详见<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/key-generator/" rel="noopener ugc nofollow" target="_blank"> <em class="no">分发主键</em> </a> <em class="no">。</em></p><p id="423c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.创建主键生成器。</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="1099" class="md me in ni b gy nw nx l ny nz">CREATE SHARDING KEY GENERATOR snowflake_key_generator (<br/>TYPE(NAME=SNOWFLAKE)<br/>);</span></pre><p id="1935" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.查询主键生成器</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="acab" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING KEY GENERATORS;<br/>+-------------------------+-----------+-------+<br/>| name                    | type      | props |<br/>+-------------------------+-----------+-------+<br/>| snowflake_key_generator | snowflake | {}    |<br/>+-------------------------+-----------+-------+<br/>1 row in set (0.01 sec)</span></pre><p id="d477" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">分片算法</strong></p><p id="8854" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.创建一个数据库分片算法，由<code class="fe nf ng nh ni b">t_order</code>和<code class="fe nf ng nh ni b">t_order_item</code>共同使用。</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="520c" class="md me in ni b gy nw nx l ny nz">-- Modulo 2 based on user_id in database sharding<br/>CREATE SHARDING ALGORITHM database_inline (<br/>TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="ds_${user_id % 2}"))<br/>);</span></pre><p id="289e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.为<code class="fe nf ng nh ni b">t_order</code>和<code class="fe nf ng nh ni b">t_order_item</code>创建不同的表格碎片算法。</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="478b" class="md me in ni b gy nw nx l ny nz">-- Modulo 3 based on order_id in table sharding<br/>CREATE SHARDING ALGORITHM t_order_inline (<br/>TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="t_order_${order_id % 3}"))<br/>);<br/>CREATE SHARDING ALGORITHM t_order_item_inline (<br/>TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="t_order_item_${order_id % 3}"))<br/>);</span></pre><p id="33b3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.查询分片算法</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="d9d7" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING ALGORITHMS;<br/>+---------------------+--------+---------------------------------------------------+<br/>| name                | type   | props                                             |<br/>+---------------------+--------+---------------------------------------------------+<br/>| database_inline     | inline | algorithm-expression=ds_${user_id % 2}            |<br/>| t_order_inline      | inline | algorithm-expression=t_order_${order_id % 3}      |<br/>| t_order_item_inline | inline | algorithm-expression=t_order_item_${order_id % 3} |<br/>+---------------------+--------+---------------------------------------------------+<br/>3 rows in set (0.00 sec)</span></pre><p id="c15d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">默认分片策略</strong></p><p id="39a6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">分片策略由分片密钥和分片算法组成。其概念请参考<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/sharding/" rel="noopener ugc nofollow" target="_blank">分片策略</a>。</p><p id="c1ce" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">分片策略由<code class="fe nf ng nh ni b">databaseStrategy</code>和<code class="fe nf ng nh ni b">tableStrategy</code>组成。</p><p id="4e3b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">由于<code class="fe nf ng nh ni b">t_order</code>和<code class="fe nf ng nh ni b">t_order_item</code>具有相同的数据库分片字段和分片算法，我们创建了一个默认策略，该策略将被所有未配置分片策略的分片表使用:</p><ol class=""><li id="9f93" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo nk lv lw lx bi translated">创建默认的数据库分片策略</li></ol><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="666d" class="md me in ni b gy nw nx l ny nz">CREATE DEFAULT SHARDING DATABASE STRATEGY (<br/>TYPE=STANDARD,SHARDING_COLUMN=user_id,SHARDING_ALGORITHM=database_inline<br/>);</span></pre><p id="c47e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.查询默认策略</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="9da9" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW DEFAULT SHARDING STRATEGY\G;<br/>*************************** 1. row ***************************<br/>                    name: TABLE<br/>                    type: NONE<br/>         sharding_column:<br/> sharding_algorithm_name:<br/> sharding_algorithm_type:<br/>sharding_algorithm_props:<br/>*************************** 2. row ***************************<br/>                    name: DATABASE<br/>                    type: STANDARD<br/>         sharding_column: user_id<br/> sharding_algorithm_name: database_inline<br/> sharding_algorithm_type: inline<br/>sharding_algorithm_props: {algorithm-expression=ds_${user_id % 2}}<br/>2 rows in set (0.00 sec)</span></pre><blockquote class="nl nm nn"><p id="52ee" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io">没有配置默认的表格分片策略，所以</strong> <code class="fe nf ng nh ni b"><strong class="kv io">TABLE</strong></code> <strong class="kv io">的默认策略是</strong> <code class="fe nf ng nh ni b"><strong class="kv io">NONE</strong></code> <strong class="kv io">。</strong></p></blockquote><p id="5ecd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">分片规则</strong></p><p id="ed9d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">主键生成器和分片算法都准备好了。现在创建分片规则。</p><p id="51b6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.<code class="fe nf ng nh ni b">t_order</code></p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="149a" class="md me in ni b gy nw nx l ny nz">CREATE SHARDING TABLE RULE t_order (<br/>DATANODES("ds_${0..1}.t_order_${0..2}"),<br/>TABLE_STRATEGY(TYPE=STANDARD,SHARDING_COLUMN=order_id,SHARDING_ALGORITHM=t_order_inline),<br/>KEY_GENERATE_STRATEGY(COLUMN=order_id,KEY_GENERATOR=snowflake_key_generator)<br/>);</span></pre><blockquote class="nl nm nn"><p id="e082" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><strong class="kv io">DATANODES</strong></code> <strong class="kv io">指定分片表的数据节点。</strong></p><p id="bc25" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><strong class="kv io">TABLE_STRATEGY</strong></code> <strong class="kv io">指定了表格策略，其中</strong> <code class="fe nf ng nh ni b"><strong class="kv io">SHARDING_ALGORITHM</strong></code> <strong class="kv io">使用创建的分片算法</strong><code class="fe nf ng nh ni b"><strong class="kv io">t_order_inline</strong></code><strong class="kv io">；</strong></p><p id="5f84" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><strong class="kv io">KEY_GENERATE_STRATEGY</strong></code> <strong class="kv io">指定了表的主键生成策略。如果不需要生成主键，请跳过此配置。</strong></p></blockquote><p id="d9af" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.<code class="fe nf ng nh ni b">t_order_item</code></p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="febc" class="md me in ni b gy nw nx l ny nz">CREATE SHARDING TABLE RULE t_order_item (<br/>DATANODES("ds_${0..1}.t_order_item_${0..2}"),<br/>TABLE_STRATEGY(TYPE=STANDARD,SHARDING_COLUMN=order_id,SHARDING_ALGORITHM=t_order_item_inline),<br/>KEY_GENERATE_STRATEGY(COLUMN=order_item_id,KEY_GENERATOR=snowflake_key_generator)<br/>);</span></pre><p id="cb04" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.查询分片规则</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="0b4d" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING TABLE RULES\G;<br/>*************************** 1. row ***************************<br/>                            table: t_order<br/>                actual_data_nodes: ds_${0..1}.t_order_${0..2}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_${order_id % 3}<br/>              key_generate_column: order_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>*************************** 2. row ***************************<br/>                            table: t_order_item<br/>                actual_data_nodes: ds_${0..1}.t_order_item_${0..2}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_item_${order_id % 3}<br/>              key_generate_column: order_item_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>2 rows in set (0.00 sec)</span></pre><p id="5455" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">💡至此，<code class="fe nf ng nh ni b">t_order</code>和<code class="fe nf ng nh ni b">t_order_item</code>的分片规则已经配置完毕。</p><p id="6812" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有点复杂？那么，您也可以跳过创建主键生成器、分片算法和默认策略的步骤，一步完成分片规则。让我们看看如何使它变得更容易。</p><h2 id="c74b" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">句法</h2><p id="444e" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">现在，如果我们必须添加一个分片表<code class="fe nf ng nh ni b">t_order_detail</code>，我们可以创建如下的分片规则:</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="9713" class="md me in ni b gy nw nx l ny nz">CREATE SHARDING TABLE RULE t_order_detail (<br/>DATANODES("ds_${0..1}.t_order_detail_${0..1}"),<br/>DATABASE_STRATEGY(TYPE=STANDARD,SHARDING_COLUMN=user_id,SHARDING_ALGORITHM(TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="ds_${user_id % 2}")))),<br/>TABLE_STRATEGY(TYPE=STANDARD,SHARDING_COLUMN=order_id,SHARDING_ALGORITHM(TYPE(NAME=INLINE,PROPERTIES("algorithm-expression"="t_order_detail_${order_id % 3}")))),<br/>KEY_GENERATE_STRATEGY(COLUMN=detail_id,TYPE(NAME=snowflake))<br/>);</span></pre><p id="7c05" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">注意:</strong>上面的语句指定了数据库分片策略、表策略、主键生成策略，但是没有使用现有的算法。</p><p id="d483" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，DistSQL 引擎自动使用输入表达式为<code class="fe nf ng nh ni b">t_order_detail</code>的分片规则创建算法。现在，主键生成器、分片算法和分片规则如下:</p><p id="14be" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.主键生成器</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="536c" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING KEY GENERATORS;<br/>+--------------------------+-----------+-------+<br/>| name                     | type      | props |<br/>+--------------------------+-----------+-------+<br/>| snowflake_key_generator  | snowflake | {}    |<br/>| t_order_detail_snowflake | snowflake | {}    |<br/>+--------------------------+-----------+-------+<br/>2 rows in set (0.00 sec)</span></pre><p id="b4e9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.分片算法</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="06c7" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING ALGORITHMS;<br/>+--------------------------------+--------+-----------------------------------------------------+<br/>| name                           | type   | props                                               |<br/>+--------------------------------+--------+-----------------------------------------------------+<br/>| database_inline                | inline | algorithm-expression=ds_${user_id % 2}              |<br/>| t_order_inline                 | inline | algorithm-expression=t_order_${order_id % 3}        |<br/>| t_order_item_inline            | inline | algorithm-expression=t_order_item_${order_id % 3}   |<br/>| t_order_detail_database_inline | inline | algorithm-expression=ds_${user_id % 2}              |<br/>| t_order_detail_table_inline    | inline | algorithm-expression=t_order_detail_${order_id % 3} |<br/>+--------------------------------+--------+-----------------------------------------------------+<br/>5 rows in set (0.00 sec)</span></pre><p id="9007" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.分割规则</p><pre class="kd ke kf kg gt ns ni nt nu aw nv bi"><span id="c012" class="md me in ni b gy nw nx l ny nz">mysql&gt; SHOW SHARDING TABLE RULES\G;<br/>*************************** 1. row ***************************<br/>                            table: t_order<br/>                actual_data_nodes: ds_${0..1}.t_order_${0..2}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_${order_id % 3}<br/>              key_generate_column: order_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>*************************** 2. row ***************************<br/>                            table: t_order_item<br/>                actual_data_nodes: ds_${0..1}.t_order_item_${0..2}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_item_${order_id % 3}<br/>              key_generate_column: order_item_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>*************************** 3. row ***************************<br/>                            table: t_order_detail<br/>                actual_data_nodes: ds_${0..1}.t_order_detail_${0..1}<br/>              actual_data_sources:<br/>           database_strategy_type: STANDARD<br/>         database_sharding_column: user_id<br/> database_sharding_algorithm_type: inline<br/>database_sharding_algorithm_props: algorithm-expression=ds_${user_id % 2}<br/>              table_strategy_type: STANDARD<br/>            table_sharding_column: order_id<br/>    table_sharding_algorithm_type: inline<br/>   table_sharding_algorithm_props: algorithm-expression=t_order_detail_${order_id % 3}<br/>              key_generate_column: detail_id<br/>               key_generator_type: snowflake<br/>              key_generator_props:<br/>3 rows in set (0.01 sec)</span></pre><p id="f21a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">注:<code class="fe nf ng nh ni b">CREATE SHARDING TABLE RULE</code>语句中的</strong>、<code class="fe nf ng nh ni b">DATABASE_STRATEGY</code>、<code class="fe nf ng nh ni b">TABLE_STRATEGY</code>、<code class="fe nf ng nh ni b">KEY_GENERATE_STRATEGY</code>都可以复用已有的算法。</p><p id="bb39" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">或者，可以通过语法快速定义它们。不同之处在于创建了额外的算法对象。用户可以根据场景灵活使用。</p><p id="2120" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">创建配置验证规则后，可以通过以下方式进行验证:</p><p id="b5d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">检查节点分布</strong></p><p id="d841" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">DistSQL 提供了<code class="fe nf ng nh ni b">SHOW SHARDING TABLE NODES</code>来检查节点分布，用户可以快速了解分片表的分布。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/0da127794fd11406b7f91cb92f22dc3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rX3seK3lKMaK0e1O"/></div></div></figure><p id="768e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以看到 shard 表的节点分布与需求中描述的一致。</p><p id="c2b8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> SQL 预览</strong></p><p id="de6d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">预览 SQL 也是验证配置的一种简单方法。它的语法是<code class="fe nf ng nh ni b">PREVIEW SQL</code>:</p><p id="92f0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.对所有路由不使用分片键的查询</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/51834e076b5d6629f3578ad29a842de7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YPgyLiPl4awqGkBC"/></div></div></figure><p id="731a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.指定<code class="fe nf ng nh ni b">user_id</code>使用单一数据库路径进行查询</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/16b0e00e7747bdbb2d134d9fdf8f3aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vpv-wgrP9UZjt-vl"/></div></div></figure><p id="5ad2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.用单个工作台路线指定<code class="fe nf ng nh ni b">user_id</code>和<code class="fe nf ng nh ni b">order_id</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/c8edd50d838bd0a06c36a1654b5b42b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UmF6RC_OZAg_Q_ix"/></div></div></figure><blockquote class="nl nm nn"><p id="abcf" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated">单表路由扫描最少的碎片表，提供最高的效率。</p></blockquote><h2 id="5072" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">DistSQL 辅助查询</h2><p id="cf0b" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">在系统维护过程中，可能需要释放不再使用的算法或存储资源，或者需要释放的资源可能已经被引用，无法删除。下面的 DistSQL 可以解决这些问题。</p><p id="5524" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">查询未使用的资源</strong></p><p id="ca2a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.语法:<code class="fe nf ng nh ni b">SHOW UNUSED RESOURCES</code></p><p id="143c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.样本:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/7822ece9df98601e3986369ec51bc334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mpu13-kM7CC3i0mz"/></div></div></figure><p id="957d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">查询未使用的主键生成器</strong></p><p id="5adb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.语法:<code class="fe nf ng nh ni b">SHOW UNUSED SHARDING KEY GENERATORS</code></p><p id="ae93" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.样本:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/0f0ba1944039e277a9c25c5a666464fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7r4tMPuhmEplnopY"/></div></div></figure><p id="e2a0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">查询未使用的分片算法</strong></p><p id="1fb0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.语法:<code class="fe nf ng nh ni b">SHOW UNUSED SHARDING ALGORITHMS</code></p><p id="55fd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.样本:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/c2fa8753b1673c3acc9c105fffedc3ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xtTJl6yQ-oUhHsHq"/></div></div></figure><p id="2d75" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">查询使用目标存储资源的规则</strong></p><p id="e886" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.语法:<code class="fe nf ng nh ni b">SHOW RULES USED RESOURCE</code></p><p id="bc3a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.样本:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/c2242ceb4ccf16f4b90fd894172cf966.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tIA3JjssE5SW5pW3"/></div></div></figure><blockquote class="nl nm nn"><p id="4d99" class="kt ku no kv b kw kx jo ky kz la jr lb np ld le lf nq lh li lj nr ll lm ln lo ig bi translated"><strong class="kv io">可以查询所有使用该资源的规则，不限于</strong> <code class="fe nf ng nh ni b"><strong class="kv io">Sharding Rule</strong></code> <strong class="kv io">。</strong></p></blockquote><p id="ddf5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">使用目标主键生成器的查询分片规则</strong></p><p id="7876" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.语法:<code class="fe nf ng nh ni b">SHOW SHARDING TABLE RULES USED KEY GENERATOR</code></p><p id="7892" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.样本:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/618bdf2b091949e584eec89435cacdf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QLC4IL5dfgXX4n8R"/></div></div></figure><p id="599d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">使用目标算法的查询分片规则</strong></p><p id="cfad" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">1.语法:<code class="fe nf ng nh ni b">SHOW SHARDING TABLE RULES USED ALGORITHM</code></p><p id="5bfe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.样本:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/0ac0291365c0fb47d858d25554400928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*U3CZBnibqSCVaXAt"/></div></div></figure><h2 id="e0d0" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">结论</h2><p id="7458" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">本文以数据分片场景为例，介绍<a class="ae ks" href="https://shardingsphere.apache.org/document/5.1.0/en/concepts/distsql/" rel="noopener ugc nofollow" target="_blank"> DistSQL </a>的应用和方法。</p><p id="f224" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">DistSQL 提供灵活的语法来帮助简化操作。除了<code class="fe nf ng nh ni b">INLINE</code>算法，DistSQL 还支持标准分片、复合分片、提示分片和定制分片算法。更多的例子将在未来的日子里介绍。</p><p id="8b22" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你对<a class="ae ks" href="https://shardingsphere.apache.org/" rel="noopener ugc nofollow" target="_blank">Apache sharing sphere</a>有任何问题或建议，请随时在 GitHub 问题列表上发表。</p><h1 id="2a42" class="ob me in bd mf oc od oe mi of og oh ml jt oi ju mo jw oj jx mr jz ok ka mu ol bi translated">项目链接:</h1><p id="6862" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated"><a class="ae ks" href="https://github.com/apache/shardingsphere/issues?page=1&amp;q=is%3Aopen+is%3Aissue+label%3A%22project%3A+OpenForce+2022%22" rel="noopener ugc nofollow" target="_blank"> ShardingSphere Github </a></p><p id="5c0f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://twitter.com/ShardingSphere" rel="noopener ugc nofollow" target="_blank"> ShardingSphere Twitter </a></p><p id="3ee1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://join.slack.com/t/apacheshardingsphere/shared_invite/zt-sbdde7ie-SjDqo9~I4rYcR18bq0SYTg" rel="noopener ugc nofollow" target="_blank">切割球松弛度</a></p><p id="1dfd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://shardingsphere.apache.org/community/cn/contribute/" rel="noopener ugc nofollow" target="_blank">投稿指南</a></p><p id="7383" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">GitHub 问题</p><p id="c905" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><a class="ae ks" href="https://shardingsphere.apache.org/community/en/contribute/" rel="noopener ugc nofollow" target="_blank">投稿指南</a></p><h1 id="3d71" class="ob me in bd mf oc od oe mi of og oh ml jt oi ju mo jw oj jx mr jz ok ka mu ol bi translated"><strong class="ak">参考文献</strong></h1><p id="c611" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">1.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/concepts/distsql/" rel="noopener ugc nofollow" target="_blank">概念-DistSQL </a></p><p id="0b75" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">2.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/key-generator/" rel="noopener ugc nofollow" target="_blank">概念-分布式主键</a></p><p id="94e6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">3.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/sharding/" rel="noopener ugc nofollow" target="_blank">概念分割策略</a></p><p id="5ad8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">4.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/features/sharding/concept/inline-expression/" rel="noopener ugc nofollow" target="_blank">概念内嵌表达式</a></p><p id="9e47" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">5.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/user-manual/shardingsphere-jdbc/builtin-algorithm/sharding/" rel="noopener ugc nofollow" target="_blank">内置分片算法</a></p><p id="3e15" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">6.<a class="ae ks" href="https://shardingsphere.apache.org/document/current/en/user-manual/shardingsphere-proxy/distsql/syntax/" rel="noopener ugc nofollow" target="_blank">用户手册:DistSQL </a></p><h2 id="e927" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated">作者</h2><h2 id="e24d" class="md me in bd mf mg mh dn mi mj mk dp ml lc mm mn mo lg mp mq mr lk ms mt mu mv bi translated"><strong class="ak">江</strong></h2><p id="a358" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated"><a class="ae ks" href="https://www.sphere-ex.com/en/" rel="noopener ugc nofollow" target="_blank"> <em class="no"> SphereEx </em> </a> <em class="no">中间件 R &amp; D 工程师&amp;Apache sharding sphere Committer。</em></p><p id="fc8f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">龙涛关注 DistSQL 的 R&amp;D 和相关特性。</p></div></div>    
</body>
</html>