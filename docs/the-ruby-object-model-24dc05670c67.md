# Ruby 对象模型(Ruby 中的 OOP)

> 原文：<https://blog.devgenius.io/the-ruby-object-model-24dc05670c67?source=collection_archive---------10----------------------->

![](img/54ad3ed496dcfacce6199dfc38339b72.png)

[达里里](https://unsplash.com/es/@dari_lli?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍照

面向对象编程(OOP)是为解决大型软件系统日益增加的复杂性而开发的编程范例。程序员很快发现，随着应用程序的复杂性和规模的增长，它们变得非常难以维护。由于整个程序的依赖性，程序中任何一点的微小变化都会导致一连串的错误。

程序员需要一种方法来创建可以在不影响整个程序的情况下进行更改和操作的数据容器。他们需要一种方法来分离执行特定过程的代码区域，以便他们的程序可以是许多小部分的交互，而不是一个大块的依赖。

> "面向对象设计是计算的罗马数字."
> 
> —罗布·派克

# 术语

进入 OOP。一种新的编码方式，完全不同于过程式编程风格。首先，让我们回顾一些术语。

## 包装

封装是隐藏部分功能并使它们对代码库的其余部分不可访问的过程。这是一种数据安全性，确保数据在没有明显意图的情况下不会被操纵或更改。它定义了您的应用程序的边界，并允许您的代码达到新的复杂程度。Ruby 和许多其他面向对象语言一样，通过定义对象和暴露接口(即方法)来完成这个任务。

对象创建的另一个优点是它允许程序员在更高的抽象层次上思考。对象在现实世界中被表示为名词，并且可以被赋予描述程序员试图表示的行为的方法。

## 多态性

多态性指的是各种类型的数据响应公共接口的能力。例如，如果一个方法需要带有`move`方法的参数对象，我们可以传递给它任何类型的参数，只要它有一个兼容的`move`方法。这个物体可以代表一个人，一只猫，一只水母，甚至一辆汽车或火车。也就是说，它允许不同类型的对象响应相同的方法调用。

“Poly”的意思是“许多”，而“morph”的意思是“形式”OOP 允许我们为新的目的重用预先编写的代码。

## 遗产

在 Ruby 中，当一个类继承另一个类(称为超类)的行为时，就使用了继承的概念。这允许 Ruby 程序员定义具有高度可重用性的基本类和更小的子类，以实现更细粒度、更详细的行为。

## 混合蛋白

模块是将多态结构应用于 Ruby 程序的另一种方式。模块和类具有可比性，因为它们包含共享的行为。但是，模块不能用于创建对象。

必须通过调用 include 方法将模块包含在类中。这就是所谓的 mixin。在一个模块中声明的行为，在它被混合之后，对类和它的对象变得可用。

# 目标

短语“在 Ruby 中，一切都是对象！”在 Ruby 社区中经常听到。然而，这并不完全正确。任何可以说是有值的东西(比如数字、字符串、数组)在 Ruby 中都是对象，但是像方法、块和变量这样的东西不是。

类用于创建对象。把类看作模型，把对象看作模型的产品。尽管单个对象是同一个类的实例，但它们的信息与其他对象不同。

这里有两个`String`类对象作为例子:

```
 irb :001 > “hello”.class
 => String
 irb :002 > “world”.class
 => String
```

在前面的例子中，我们使用 class 实例方法来确定每个对象属于哪个类。如您所见，从字符串到整数，每个对象实际上都是从类实例化的对象。

# 班级

Ruby 类定义了其对象的属性和行为。类可以被认为是一个对象应该由什么组成和应该有什么能力的基本轮廓。我们使用类似于定义方法的语法来定义一个类。为了创建名称，我们用`class`替换`def`，并使用 CamelCase 命名约定。然后使用保留字`end`完成定义。Ruby 文件名应该在 snake_case 中，并且应该对应于类名。在下面的例子中，文件名是`good_dog.rb`，类名是`GoodDog`。

在前面的例子中，我们创建了一个`GoodDog`类的实例，并将其保存在变量`sparky`中。我们现在有了一个对象。`Sparky`是`GoodDog`类的一个对象或实例。我们也可以说我们从类`GoodDog`实例化了一个名为`sparky`的对象。OOP 中的术语你会习惯的，但是这里要记住的重要一点是对象是通过调用类方法`new`返回的。

# 模块

如前所述，模块是在 Ruby 中实现多态性的另一种方式。模块是一组行为，可以通过混合在其他类中使用。 `include`方法用于将一个模块“混合”到一个类中。假设我们想要一个`speak`方法用于我们的`GoodDog`类，但是我们也想要一个`speak`方法用于其他类。

我们是这样做的:

值得注意的是，在前面的例子中，我们称之为`sparky`的`GoodDog`对象和我们称之为`bob`的`HumanBeing`对象都可以访问`speak`实例方法。这是通过“混合”模块`Speak`完成的。就好像我们复制了`speak`方法，并将其粘贴到`GoodDog`和`HumanBeing`类中。

# 摘要

这是对 Ruby 中 OOP 的一个非常快速的概述。要记住的要点是，类就像模具，它们包含方法。这些模型可以实例化继承这些方法的对象。最后，如果我们想创建一个对许多类都可用的方法，我们可以创建一个模块并把它和类混合在一起。