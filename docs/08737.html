<html>
<head>
<title>Make your Flutter Apps touchless and voice-controlled using Alan AI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Alan AI 使您的 Flutter 应用程序无需触摸并通过语音控制</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/make-your-flutter-apps-touchless-and-voice-controlled-using-alan-ai-a37d18b14be0?source=collection_archive---------8-----------------------#2022-07-06">https://blog.devgenius.io/make-your-flutter-apps-touchless-and-voice-controlled-using-alan-ai-a37d18b14be0?source=collection_archive---------8-----------------------#2022-07-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e93bbb33a42abc0eee3e8143eb6213e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sTvJ6jV5HCj2HFaZ_PA6gw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">使用 Flutter 和 Alan AI 构建一个语音问答应用程序</figcaption></figure><p id="d475" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">随着 UI/UX 的最新趋势，与机器交互变得比以往任何时候都容易。我相信你至少会和一个语音助手互动过，或者听说过基于手势的用户界面。让我们从基础开始，什么是接口，为什么它们很重要？</p><p id="f490" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">界面是人机交互发生的地方——例如，计算机鼠标、遥控器、虚拟现实、自动取款机，或者甚至是你汽车的仪表板，它允许你与你的汽车交互并控制你的汽车，这些都是用户界面的例子。</p><h1 id="babe" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">用户界面的演变</h1><h2 id="7961" class="ly lb iq bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">CLI 或命令行界面</h2><p id="3251" class="pw-post-body-paragraph kc kd iq ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz ij bi translated">在过去，所有的人机交互都是在命令行界面上进行的。这包括记住并在黑屏上输入某些命令来完成任务。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/c538ebabeaa3387ccd232e982e4ed378.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*HvGd_mIJUSdE3GsdlOnRwA.gif"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">学分:<a class="ae mu" href="https://www.reddit.com/r/linuxmasterrace/" rel="noopener ugc nofollow" target="_blank"> r/linuxmasterrace </a></figcaption></figure><p id="76e7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，这在某些情况下可能非常有用，比如对我们程序员来说，但是，考虑到普通大众，它不是非常用户友好的。这导致了 GUI 的兴起。</p><h2 id="b98b" class="ly lb iq bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">GUI 或图形用户界面</h2><p id="a428" class="pw-post-body-paragraph kc kd iq ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz ij bi translated">顾名思义，这包括将对象和任务表示为图形，还引入了鼠标(指针)，这使得计算机更容易使用，并导致大规模采用，后来还引入了触摸屏。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/86f88ca61a2930a353a0df9e8997e795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/0*FldYCJ0QDdjMj2VQ.jpg"/></div></figure><p id="0c6a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">虽然图形用户界面很棒，但为什么不进一步简化交互，使之成为无触摸的用户界面呢？在无触摸的用户界面中，你甚至不需要触摸机器就能与它进行交互。介绍 VUIs。</p><h2 id="93b5" class="ly lb iq bd lc lz ma dn lg mb mc dp lk kn md me lo kr mf mg ls kv mh mi lw mj bi translated">VUI 或语音用户界面</h2><p id="adf8" class="pw-post-body-paragraph kc kd iq ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz ij bi translated">语音用户界面是通过语音控制的用户界面。语音助手的流行例子有 Alexa、谷歌助手、Siri、Cortana 等。VUIs 简化了交互，并使其适用于更多的观众，如视障人士。虽然你可能认为在你的应用程序或网站中有一个定制的语音助手非常困难，但有了像<a class="ae mu" href="https://alan.app/" rel="noopener ugc nofollow" target="_blank">艾伦·艾</a>这样的工具，它变得超级简单。</p><p id="a9d3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在让我们进入有趣的部分，即<em class="mw">编码。</em></p><h1 id="5827" class="la lb iq bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">走向声控问答 App</h1><p id="955e" class="pw-post-body-paragraph kc kd iq ke b kf mk kh ki kj ml kl km kn mm kp kq kr mn kt ku kv mo kx ky kz ij bi translated">首先，我有一个简单的测验应用程序，它有 5 个基于是非题的问题，在测验结束时，它会显示用户的分数(每个正确答案+10，每个错误答案-1)。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/362584e361cc7bee4820c20d5a6dcb89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ksZ1TQGkVnRUcaA1K6ItBQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">测验屏幕和分数屏幕</figcaption></figure><blockquote class="my mz na"><p id="41d9" class="kc kd mw ke b kf kg kh ki kj kk kl km nb ko kp kq nc ks kt ku nd kw kx ky kz ij bi translated">步骤 1:在 Alan Studio 上创建一个项目</p></blockquote><p id="1da9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">去 Alan Studio，如果你还没有帐号的话就注册吧。<br/> <strong class="ke ir">提示:</strong>连接你的 GitHub 账号，星至少 5 个 Alan 的回购，切换到开发者计划。点击“创建语音助手”按钮，然后选择“空项目”，给它起个名字，你的项目就准备好了。</p><blockquote class="my mz na"><p id="ac0b" class="kc kd mw ke b kf kg kh ki kj kk kl km nb ko kp kq nc ks kt ku nd kw kx ky kz ij bi translated">步骤 2:将 alan_voice 依赖项添加到您的应用程序中</p></blockquote><p id="3d6d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">转到您的 pubspec.yaml 文件并添加以下依赖项。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/c7b83ca8e293d518ab70e982657de564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*uW0gJ5ZKJO-4f7PHBH33KQ.png"/></div></figure><blockquote class="my mz na"><p id="fbe7" class="kc kd mw ke b kf kg kh ki kj kk kl km nb ko kp kq nc ks kt ku nd kw kx ky kz ij bi translated">步骤 3:获取 Alan AI SDK 密钥并初始化</p></blockquote><p id="5193" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">转到 Integrations 选项卡，复制 Alan SDK 密钥。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/c0ca4f81db1fceccddba754c055b6753.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6n6jAvdPJDg7Zeig-I1A1w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">获取 SDK 密钥</figcaption></figure><p id="0ba6" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在转到你的 main.dart 文件，像这样初始化 Alan AI 按钮:</p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="ccd2" class="ly lb iq nh b gy nl nm l nn no">@override<br/>  void initState() {<br/>    initAlan();<br/>    super.initState();<br/>  }<br/> <br/>  void initAlan() {<br/>    AlanVoice.addButton(<br/>        "YOUR_SDK_KEY",<br/>        buttonAlign: AlanVoice.BUTTON_ALIGN_RIGHT);<br/>  }</span></pre><blockquote class="my mz na"><p id="a2ae" class="kc kd mw ke b kf kg kh ki kj kk kl km nb ko kp kq nc ks kt ku nd kw kx ky kz ij bi translated">第五步:运行应用程序</p></blockquote><p id="f32b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">你会注意到 Alan Voice 按钮出现在屏幕的右下角。要向左移动，您可以写:</p><p id="589e" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><code class="fe np nq nr nh b">buttonAlign: AlanVoice.BUTTON_ALIGN_LEFT</code>。</p><p id="000a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">点击按钮，说<em class="mw"> hello world </em>来测试默认脚本，并检查 Alan 是否按照脚本中指定的正确回复进行响应。</p><p id="c4a7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">专业提示</strong>:您也可以从集成选项卡定制<em class="mw"> Alan 按钮视觉样式</em>。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ns"><img src="../Images/82e22a81b31ef8198082a4d162199e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s4MgzYTljC6kZhca2Dcn0w.png"/></div></div></figure><blockquote class="my mz na"><p id="9a1b" class="kc kd mw ke b kf kg kh ki kj kk kl km nb ko kp kq nc ks kt ku nd kw kx ky kz ij bi translated">步骤 6:编写语音脚本</p></blockquote><p id="a4b5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">声音脚本是项目的对话场景。它应该包含用户可以发出的所有可能的语音命令以及需要采取的相应操作。一个项目也可以有多个声音脚本。为了定义语音命令，我们使用意图。</p><p id="18b7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">意图:</strong> <br/>意图是接受两个参数的函数:<br/> 1。调用此命令的字符串<br/> 2。指定 Alan 响应的 arrow 函数。<br/>例如:</p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="57cc" class="ly lb iq nh b gy nl nm l nn no">intent('hello world', p =&gt; {<br/>    p.play('(hello|hi there)');<br/>});</span></pre><p id="31ed" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这里的<code class="fe np nq nr nh b">p</code>是一个特殊的对象，允许我们访问 Alan 的方法和预定义的对象。<br/>播放功能是最常用的响应功能。可用于以下:<br/> 1。作为响应函数<br/> 2。用于向客户端应用程序发送命令。</p><p id="918a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您也可以使用<code class="fe np nq nr nh b">reply()</code>函数来获得更小更简单的响应，如下所示:</p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="3a02" class="ly lb iq nh b gy nl nm l nn no">intent('Hello world',<br/>    reply('Hello'));</span></pre><p id="f6fa" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">使用调试聊天:</strong> <br/>调试聊天是我们测试语音脚本的地方。您可以键入或按下按钮并说话来测试您的脚本。<br/>在聊天中键入 hello world，看看艾伦是否做出了正确的回应(与应用程序中的回应相同)。</p><figure class="mq mr ms mt gt jr gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/da5f0cfa793b52fc18ef9f5a161ae4ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*4M0G3bFJJhDyJ2xDa7kM1A.png"/></div></figure><p id="104a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在开始编写我们的第一个声音脚本之前，让我们试着理解更多的概念。</p><p id="e61d" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">插槽</strong> <br/>插槽用于从用户输入中识别和检索信息。有两种主要类型的插槽。这些是:<br/> 1。用户定义的插槽(例如，在我们的情况下答案插槽)<br/> 2。预定义槽(如日期、时间、位置、名称、序号、数字)<br/>其他类型包括<em class="mw">正则表达式</em>和<em class="mw">动态</em>槽。</p><p id="b2d3" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><strong class="ke ir">语境:</strong> <br/>与其字典含义类似，语境是指围绕一个语音命令的情境，以帮助语音助手更好地理解用户的需求。</p><ul class=""><li id="7c3c" class="nu nv iq ke b kf kg kj kk kn nw kr nx kv ny kz nz oa ob oc bi translated">也可以从这里了解模式和替代方案:<a class="ae mu" href="https://alan.app/docs/server-api/patterns/" rel="noopener ugc nofollow" target="_blank">https://alan.app/docs/server-api/patterns/</a></li></ul><p id="e1d8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这些都是我们今天脚本中要用到的概念。</p><p id="ac64" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是我们的脚本看起来像什么。通过评论可以更好的理解。</p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="ff56" class="ly lb iq nh b gy nl nm l nn no">//The list of questions for our quiz app.<br/>const questions = [<br/>    { questionText:'Flutter is open-source', answer: 'true' },<br/>    { questionText:'Amazon owns Flutter', answer: 'false' },<br/>    { questionText:'Flutter for Web and Desktop is now stable', answer: 'true' },<br/>    { questionText:'Sparky is Flutter\'s official mascot', answer: 'false' },<br/>    { questionText:'Flutter was released in 2020', answer: 'false' },<br/>];</span><span id="c9cd" class="ly lb iq nh b gy od nm l nn no">//This intent is the starting point of our app.<br/>//The user can say Start, Start the quiz or Let's begin to start the quiz.<br/>intent('Start (the quiz|)','Let\'s begin', p =&gt; {<br/>    p.play('Instructions for the quiz: You can play this quiz either using the G.U.I that is by pressing the buttons on your screens or play it with touchless voice interactions');<br/>    p.play('Say ok to start the quiz');<br/>    //Go to the readQuestion context<br/>    p.then(readQuestion);<br/>});</span><span id="b6a1" class="ly lb iq nh b gy od nm l nn no">//initialising variables<br/>let index = 0;<br/>let score = 0;</span><span id="5751" class="ly lb iq nh b gy od nm l nn no">let readQuestion = context(()=&gt;{<br/>    intent('(Ok|Yes)',p=&gt;{<br/>    if(index&gt;0){<br/>        //send the command to the voice app in order to update the question on the screen.<br/>        p.play({command: 'next', item: score});<br/>    }<br/>    //Read the question at the current index.<br/>    p.play(`${questions[index].questionText}. True or False`);<br/>    //Go to the getAnswer context<br/>    p.then(getAnswer);<br/>    });<br/>    <br/>})</span><span id="3b9b" class="ly lb iq nh b gy od nm l nn no">let getAnswer = context(()=&gt;{<br/>    //Get the answer i.e either true or false<br/>    intent(`$(ANSWER true|false)`, p=&gt;{<br/>        if(p.ANSWER.value == questions[index].answer){<br/>           //If the answer is correct, update the score<br/>           score += 10;<br/>           p.play('(That\'s right|Great going)');<br/>        }<br/>        else{<br/>           //For every wrong answer deduct 1 from the score<br/>           score -= 1;<br/>           p.play('Sorry, That\'s not right');<br/>        }<br/>        <br/>        //increment the index by one<br/>        index++;<br/>        <br/>        //Read the next question if there are more questions left<br/>        if(index &lt; questions.length){<br/>        p.play('(Are you|) Ready for the next question?'); <br/>        p.then(readQuestion);<br/>        }<br/>       else{<br/>               //Otherwise got to the score page<br/>               p.play({command: 'next', item: score});<br/>               p.play(`Your score is: ${score}`);<br/>               p.resolve();<br/>               p.play('Thank you for playing!');<br/>               index=0;<br/>               score=0;<br/>           }<br/>    });<br/>});</span></pre><p id="0ed1" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">注意，我们通过<code class="fe np nq nr nh b">p.play({command: 'next', item: score})</code>向客户端应用程序发送命令。让我们在应用程序中处理这个问题。像这样更新 initAlan()函数:</p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="2a4f" class="ly lb iq nh b gy nl nm l nn no">void initAlan() {<br/>    AlanVoice.addButton(<br/>        "YOUR_SDK_KEY",<br/>        buttonAlign: AlanVoice.BUTTON_ALIGN_RIGHT);</span><span id="9a71" class="ly lb iq nh b gy od nm l nn no">AlanVoice.onCommand.add((command) {<br/>      debugPrint("got new command ${command.toString()}");<br/>      var commandName = command.data["command"];<br/>      if (commandName == "next") {<br/>        setState(() {<br/>          score = command.data["item"];<br/>          questionNumber++;<br/>          quizBrain.nextQuestion();<br/>        });<br/>      }<br/>    });<br/>  }</span></pre><p id="56ea" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您也可以使用 switch case 来代替 if-else-if，但是因为我们这里只有一个命令，所以 if 语句可以满足目的。</p><blockquote class="my mz na"><p id="1a93" class="kc kd mw ke b kf kg kh ki kj kk kl km nb ko kp kq nc ks kt ku nd kw kx ky kz ij bi translated">现在继续运行您的应用程序。按下艾伦按钮，并说开始看到它的行动。</p></blockquote><p id="07b8" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">瞧啊。这是你的第一个声控应用。在这里可以找到完整的代码。🎉</p><div class="oe of gp gr og oh"><a href="https://github.com/Aaliya-Ali/voice_quiz_app" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fo"><div class="oj ab ok cl cj ol"><h2 class="bd ir gy z fp om fr fs on fu fw ip bi translated">GitHub-aa liya-Ali/voice _ quiz _ app:用 Flutter 和 Alan 搭建的简单的语音控制问答 app…</h2><div class="oo l"><h3 class="bd b gy z fp om fr fs on fu fw dk translated">一个新的颤振项目。这个项目是颤振应用的起点。一些帮助您入门的资源…</h3></div><div class="op l"><p class="bd b dl z fp om fr fs on fu fw dk translated">github.com</p></div></div><div class="oq l"><div class="or l os ot ou oq ov jw oh"/></div></div></a></div><figure class="mq mr ms mt gt jr"><div class="bz fp l di"><div class="ow ox l"/></div></figure><p id="c3bf" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">有关更多信息，请参考 Alan AI 文档。</p><p id="9a31" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated"><a class="ae mu" href="https://alan.app/docs/" rel="noopener ugc nofollow" target="_blank">https://alan.app/docs/</a></p><p id="2dce" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果你觉得这篇文章很有见地，别忘了留下一些掌声👏</p></div></div>    
</body>
</html>