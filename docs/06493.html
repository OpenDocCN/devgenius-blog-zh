<html>
<head>
<title>Attacking ARP Tables: A Fundamental Networking Attack for Bug Bounty Hunters &amp; Penetration Testers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">攻击ARP表:对Bug赏金猎人和渗透测试人员的基本网络攻击</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/attacking-arp-learn-networking-by-breaking-stuff-for-bug-bounty-hunters-penetration-testers-and-73d33d30fbef?source=collection_archive---------7-----------------------#2022-01-12">https://blog.devgenius.io/attacking-arp-learn-networking-by-breaking-stuff-for-bug-bounty-hunters-penetration-testers-and-73d33d30fbef?source=collection_archive---------7-----------------------#2022-01-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0f793fbeefd1eb4d9aa6516797f385ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YI4lVH_4g3eG-h6E.jpg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来源:华为</figcaption></figure><h1 id="4166" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">介绍</h1><p id="c6eb" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi ly translated">让我们从一点事实开始吧:走上这条学习道路的大多数学生都会同意渗透测试的网络方面是乏味和完全单调的。你必须学习基础知识，这是不可避免的。然而，我希望像这样的帖子可以让它变得更容易忍受，甚至有时更有趣。</p><p id="d53c" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">也就是说，在本文中，我们将了解互联网究竟是如何传输数据的，以及我们如何利用公开可用且易于使用的工具来利用这种传输方法。我还将确保包含更多资源，您可以按照自己的进度自由探索。</p><p id="e3a3" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">我随时准备回答你的任何问题，不管你认为这有多“愚蠢”。请留言，我会尽快回复你。</p><p id="efa7" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">我们开始吧！</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="3bbd" class="kc kd iq bd ke kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv mx kx ky kz bi translated">小包裹</h1><p id="5cd6" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">整个互联网旨在促进信息以近乎瞬时的速度传递。这些信息，不管有多复杂，都被分解成<em class="my">包</em>。</p><p id="4884" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">就是这样。</p><p id="b6e9" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">很多很多的包…</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/f08e020c479fdf9c77fea64a0c721ccb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bTsmP0yyjc6yLPgc.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">资料来源:朱莉娅·埃文斯</figcaption></figure><p id="93cd" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">这些数据包非常复杂和无聊。因此，为了本文的目的，我们现在只关注必要的字段:</p><ul class=""><li id="1682" class="ne nf iq lc b ld mh lh mi ll ng lp nh lt ni lx nj nk nl nm bi translated">目的地MAC地址——目的地<em class="my">媒体访问控制</em>地址，通常称为MAC地址，是发送数据包的<em class="my">网络接口卡</em>的物理地址。我在这里做了区分，因为一台机器可以有多个物理和虚拟的MAC地址。请记住，最终，MAC地址真正重要的是在<em class="my">直接连接的网络上找到一台机器。</em>换句话说，您的路由器使用MAC地址将流量路由到您的本地网络。</li></ul><blockquote class="nn no np"><p id="16f4" class="la lb my lc b ld mh lf lg lh mi lj lk nq mj ln lo nr mk lr ls ns ml lv lw lx ij bi translated">注:<em class="iq"> </em>所有“直连网络”指的都是本地网络。</p></blockquote><ul class=""><li id="4de9" class="ne nf iq lc b ld mh lh mi ll ng lp nh lt ni lx nj nk nl nm bi translated">源MAC地址—创建并发送相关数据包的网络接口卡的地址。</li><li id="dd3c" class="ne nf iq lc b ld nt lh nu ll nv lp nw lt nx lx nj nk nl nm bi translated">目标IP地址—32(IP v4)或128 (IPv6)位数，代表数据包要发往的计算机网络。到达该网络后，路由器会使用MAC目的MAC地址发送数据包。</li><li id="1a42" class="ne nf iq lc b ld nt lh nu ll nv lp nw lt nx lx nj nk nl nm bi translated">源IP地址—创建并发送数据包的机器的IP地址。</li></ul><blockquote class="nn no np"><p id="20de" class="la lb my lc b ld mh lf lg lh mi lj lk nq mj ln lo nr mk lr ls ns ml lv lw lx ij bi translated">深入探讨:IANA(互联网号码分配机构)负责将互联网资源授权给五个RIR(地区互联网注册管理机构)，每个机构负责一个地理区域。地区互联网注册管理机构进一步将这些资源委托给lir(本地互联网注册管理机构)，lir通常被称为互联网服务提供商，后者随后将这些资源分配给企业和个人。更多信息可在<a class="ae ny" href="https://datatracker.ietf.org/doc/html/rfc7020" rel="noopener ugc nofollow" target="_blank"> rfc7020 </a>中找到。</p></blockquote></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="615b" class="kc kd iq bd ke kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv mx kx ky kz bi translated">ARP和ARP表</h1><p id="257d" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated"><strong class="lc ir">地址解析协议(ARP) </strong>是使网络通信能够到达网络上特定设备的底层协议。当只知道主机IP地址或MAC地址，但不知道两者时，ARP确保数据包到达正确的地址。</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/3f008755093bebe22ea6ad70b8efb0a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0hp4BusDl1uznrUZ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">来源:Auvik网络</figcaption></figure><p id="edc5" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">它通过在网络中的各种主机上保存数字记录来实现这一点，该记录列出了IP地址和MAC地址的当前映射。实际的数据结构通常被称为ARP表或ARP缓存。</p><p id="3253" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">ARP表被填充的过程本质上容易受到一种叫做<strong class="lc ir"> ARP中毒的简单攻击。</strong></p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="8862" class="kc kd iq bd ke kf mt kh ki kj mu kl km kn mv kp kq kr mw kt ku kv mx kx ky kz bi translated">ARP中毒方法</h1><p id="7bbc" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我非常相信学习做某事的基本方法，而不是把某人限制在一系列难以理解的命令中。因此，我将让您了解当前可用的工具，并允许您通过不使用命令来限制您，从而潜在地提出实现最终目标的替代方法。</p><figure class="na nb nc nd gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oa"><img src="../Images/9d0d53aa082c7dcb913f47d82758580e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xyBYwtyj1hlGN3nN.jpg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">资料来源:Amar Shekhar</figcaption></figure><ol class=""><li id="e9b9" class="ne nf iq lc b ld mh lh mi ll ng lp nh lt ni lx ob nk nl nm bi translated"><strong class="lc ir">接入</strong> —首先，你需要网络接入。它不一定是物理的，但是您需要通过直接访问机器上的外壳来访问网络。</li><li id="6a37" class="ne nf iq lc b ld nt lh nu ll nv lp nw lt nx lx ob nk nl nm bi translated"><strong class="lc ir">情报— </strong>一旦您获得了访问权限，您就需要关于您正在攻击的网络的信息。尽可能多的收集信息。你永远不会有足够的智慧。相信我。这是一个如此重要的话题，以至于我甚至不敢尝试在这个要点中给你一个你需要的总结。我给你的方法是我遵循的方法:首先运行你的快速工具以获得工作模型，并获得足够的信息以开始收集更多关于端点的信息，在手动枚举时开始手动枚举那些端点，在手动枚举时开始运行你的较慢的强力&amp;模糊化工作流。明白速度=噪音。</li><li id="7017" class="ne nf iq lc b ld nt lh nu ll nv lp nw lt nx lx ob nk nl nm bi translated"><strong class="lc ir"> ARP中毒第一阶段— </strong>开始广播ARP消息或等待请求传输。您的目标是用您的IP地址填充与网络上的目标/受害者机器相对应的ARP缓存条目。通过这样做，你将欺骗那些机器相信你是路由器。<strong class="lc ir">工具:</strong> dsniff、wireshark、ettercap、Arpspoof、Driftnet等</li><li id="26b0" class="ne nf iq lc b ld nt lh nu ll nv lp nw lt nx lx ob nk nl nm bi translated"><strong class="lc ir">连锁攻击</strong>——此时，你需要记住你的目标。无论这是一个pentest的外壳还是一个bug bounty，你的目标在你的方法论中必须是至高无上的。如果您的网页测试和网络钓鱼在范围内，您可以坐下来监控某些机器正在访问哪些网站，以便您可以为您的社会工程和鱼叉式网络钓鱼活动建立一个档案。如果你追逐奖金，那么就采取相应的行动，并获得报酬！如果你的目标是放松和收集包裹，那么做你的事情。工具: Wireshark、ettercap、MITM代理、urlsniff等…</li><li id="5155" class="ne nf iq lc b ld nt lh nu ll nv lp nw lt nx lx ob nk nl nm bi translated">清理<strong class="lc ir">——这一阶段至关重要。如果您在完成开窗后没有正确地在ARP表中填入有效值，所有中毒的机器都将无法访问互联网。最糟糕的情况是你在网络上失去了立足之地，并引起了IT团队的怀疑。因此，正确运行您的工具。出去，放下你的工具。Arpspoof是会自动清理的工具之一。</strong></li><li id="d81f" class="ne nf iq lc b ld nt lh nu ll nv lp nw lt nx lx ob nk nl nm bi translated"><strong class="lc ir">流程数据</strong> —超出了本文的范围，但我要说数据提供了新的、通常意想不到的见解。</li></ol></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><blockquote class="nn no np"><p id="2cc1" class="la lb my lc b ld mh lf lg lh mi lj lk nq mj ln lo nr mk lr ls ns ml lv lw lx ij bi translated"><strong class="lc ir">短暂的插曲……</strong></p><p id="07f9" class="la lb my lc b ld mh lf lg lh mi lj lk nq mj ln lo nr mk lr ls ns ml lv lw lx ij bi translated"><em class="iq">在我们结束这篇文章之前，我想做一件我从未做过的事情，告诉你一个叫做</em><a class="ae ny" href="https://www.sync.com/?_m=3kl" rel="noopener ugc nofollow" target="_blank"><em class="iq">Sync</em></a><em class="iq">的云存储提供商。他们为云存储提供了惊人的计划。比如价格无与伦比的无限云存储。如果你在生活中的某个时刻，存储是你个人项目或业务的关注点，那么请查看下面的附属链接，它帮助我制作更高质量的内容，并帮助你花更多的时间开发，而不是讨价还价寻找最好的云存储提供商。使用下面我的会员链接查看一个惊人的交易:</em></p><p id="0ecd" class="la lb my lc b ld mh lf lg lh mi lj lk nq mj ln lo nr mk lr ls ns ml lv lw lx ij bi translated"><a class="ae ny" href="https://www.sync.com/?_m=3kl" rel="noopener ugc nofollow" target="_blank">同步—云存储完成正确</a></p></blockquote></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><p id="eb34" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated"><strong class="lc ir">结论</strong></p><p id="3881" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">ARP欺骗很好地介绍了网络背后的一些更好的机制和协议，我们需要访问这些机制和协议才能获得报酬。你必须学会这些东西，现在是最好的时机。但是记住，你不必现在就全部学会。如果你能在几周内全部学会，你会更有力量，但大多数人做不到。就是太无聊了。</p><h1 id="49cf" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated"><strong class="ak">请阅读下面:</strong></h1><p id="9b80" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi ly translated"><span class="l lz ma mb bm mc md me mf mg di"> C </span>内容创作/机会——我自己和数字越狱可用于商业内容创作请求。我们很乐意帮助您以合理的价格制作高质量的内容。请在这里给我留言，我会尽快回复。</p><blockquote class="nn no np"><p id="be60" class="la lb my lc b ld mh lf lg lh mi lj lk nq mj ln lo nr mk lr ls ns ml lv lw lx ij bi translated"><em class="iq">非会员注意:我不想撒谎，Medium是一个了不起的平台，为各行各业提供了丰富的信息，所以请花点时间订阅吧。它帮助内容创作者，最重要的是帮助你。</em></p></blockquote><p id="a5aa" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated">来源:</p><p id="f5cb" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated"><a class="ae ny" href="https://datatracker.ietf.org/doc/html/rfc826" rel="noopener ugc nofollow" target="_blank">https://datatracker.ietf.org/doc/html/rfc826</a></p><div class="oc od gp gr oe of"><a href="https://www.varonis.com/blog/arp-poisoning" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd ir gy z fp ok fr fs ol fu fw ip bi translated">ARP中毒:是什么&amp;如何防止ARP欺骗攻击</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">ARP中毒是一种网络攻击，它滥用广泛使用的地址解析协议(ARP)中的弱点来…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">www.varonis.com</p></div></div></div></a></div><p id="55bc" class="pw-post-body-paragraph la lb iq lc b ld mh lf lg lh mi lj lk ll mj ln lo lp mk lr ls lt ml lv lw lx ij bi translated"><a class="ae ny" href="https://en.wikipedia.org/wiki/Address_Resolution_Protocol" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Address_Resolution_Protocol</a></p></div></div>    
</body>
</html>