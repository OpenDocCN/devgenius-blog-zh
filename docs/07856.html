<html>
<head>
<title>Analyzing salaries for United States of America using R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 R 分析美国的薪资</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/analyzing-salaries-for-united-states-of-america-using-r-83a4a3a160e9?source=collection_archive---------13-----------------------#2022-04-27">https://blog.devgenius.io/analyzing-salaries-for-united-states-of-america-using-r-83a4a3a160e9?source=collection_archive---------13-----------------------#2022-04-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d2753ccf01aa60626cdc6980b4037228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Edh5c81tC0XNWdHYF9VwwA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片来自<a class="ae jz" href="https://unsplash.com/s/photos/salary" rel="noopener ugc nofollow" target="_blank"> unsplash </a></figcaption></figure><p id="f4e6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这篇文章的目的是回答以下涉及美国工资的问题。这个想法是为了理解决定专业人员工资差异的各种因素。</p><ul class=""><li id="3878" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">哪个行业工资最高？</li><li id="10e7" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">男女工资如何比较？</li><li id="cc50" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">工作年限的增加会带来更多的薪水吗？</li><li id="3aa2" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">不同学历的专业人士薪酬是否有显著差异？</li><li id="ec09" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">在计算或技术领域，各年龄组的人数相比如何？</li></ul><h2 id="e465" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">数据简介</h2><p id="494a" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">分析中使用的数据来自 askamanager.org 在 T2 进行的薪资调查。当我下载数据的时候，它已经达到了 27k 记录，当我写这篇文章的时候，它可能已经超过了 27k。获得的数据已被进一步清理和争论，其脚本可以在<a class="ae jz" href="https://oyogo.github.io/r/2022/04/22/Data-cleaning.html" rel="noopener ugc nofollow" target="_blank">这里</a>访问。</p><p id="872a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">注意:分析的数据仅针对美国提交的数据。</p><h2 id="4a9b" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">加载库</h2><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="cb2a" class="lm ln in mp b gy mt mu l mv mw">library(data.table) #for data wrangling<br/>library(plotly)#data visualization package</span></pre><h2 id="e064" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">输入数据</h2><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="93e6" class="lm ln in mp b gy mt mu l mv mw">salary_data.US &lt;- fread("data/salary_data_cleaned.csv")</span></pre><ol class=""><li id="b6b5" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx mx le lf lg bi translated">哪个行业平均工资最高？</li></ol><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="c8a4" class="lm ln in mp b gy mt mu l mv mw"># calculate the average annual salary per industry<br/>salary.by.industry &lt;- salary_data.US[,.(avg.salary=mean(annual_salary)),<br/>                                  by=.(industry)][,.(avg.salary = sort(avg.salary, decreasing = TRUE),industry)]</span><span id="d190" class="lm ln in mp b gy my mu l mv mw">plot_ly(data = salary.by.industry[1:11,],<br/>        x = ~reorder(industry,-avg.salary),<br/>        y = ~avg.salary,<br/>        type = "bar") %&gt;% <br/>  layout(title = "Annual average Salary per Industry in U.S in 2021",<br/>         yaxis = list(title = "Average annual salary", tickformat = "$"),<br/>         xaxis = list(title = "Industry")<br/>         )%&gt;%<br/>       config(displayModeBar = FALSE, displaylogo = FALSE, <br/>              scrollZoom = FALSE, showAxisDragHandles = TRUE, <br/>              showSendToCloud = FALSE)%&gt;%<br/>       config(displayModeBar = FALSE, displaylogo = FALSE, <br/>              scrollZoom = FALSE, showAxisDragHandles = TRUE, <br/>              showSendToCloud = FALSE)</span></pre><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/aecb7c7f916f6bfed5ba638574236513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-z4ZFOghFS1wx4TC8LCbOA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图一</figcaption></figure><p id="ccaa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以清楚地看到，根据 2021 年收集的数据，教育、会计和银行、非营利行业是薪酬最高的三个行业。</p><p id="aebb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 2。男性和女性的工资相比如何？</strong></p><p id="9cd9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，让我们总结一下按性别分组的数据，看看每个性别类型的提交情况。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="e592" class="lm ln in mp b gy mt mu l mv mw">salary_gender_summarized &lt;- salary_data.US[,.(count=.N),by=.(gender)]</span><span id="f985" class="lm ln in mp b gy my mu l mv mw">knitr::kable(salary_gender_summarized)</span></pre><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/b921f56d41e184292dd6a8380f601758.png" data-original-src="https://miro.medium.com/v2/resize:fit:456/format:webp/1*MKTYLbpD3rIQOmERYo4AYw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图 2</figcaption></figure><p id="9510" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请注意，与男性相比，女性提交的总数量有如此巨大的差异。总之，回到我们正在讨论的问题。让我们算出两组的平均值，看看他们如何比较。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="6450" class="lm ln in mp b gy mt mu l mv mw"># calculate the averages and select only the required variables <br/>gender.data &lt;- salary_data.US[gender %in% c("Woman","Man" ),]</span><span id="0b38" class="lm ln in mp b gy my mu l mv mw">gender.data &lt;- gender.data[,.(avg.salary = mean(annual_salary)), by=.(gender)]<br/>  <br/>plot_ly(gender.data, <br/>        x = ~gender,<br/>        y = ~avg.salary,<br/>        color = ~gender,<br/>        showlegend = FALSE,<br/>        type = "bar") %&gt;%<br/>  layout(title = "Average annual salary - gender comparison in U.S in 2021",<br/>         <br/>         xaxis = list(title = "Gender"),<br/>         yaxis = list(tickformat = "$", title = "Average annual salary"))%&gt;%<br/>       config(displayModeBar = FALSE, displaylogo = FALSE, <br/>              scrollZoom = FALSE, showAxisDragHandles = TRUE, <br/>              showSendToCloud = FALSE)%&gt;%<br/>       config(displayModeBar = FALSE, displaylogo = FALSE, <br/>              scrollZoom = FALSE, showAxisDragHandles = TRUE, <br/>              showSendToCloud = FALSE)</span></pre><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/2c734ebc89e1b8f16b037e78b2d48143.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zNou32Gwa1aDeXHz12bk4w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图 3</figcaption></figure><p id="1034" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们知道，根据 2021 年在美国收集的数据，平均而言，男性比女性收入高。</p><p id="0629" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 3。与工作经验年限相比，薪水如何</strong></p><p id="7a43" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可能要解决的下一个问题是，薪水和工作年限之间的关系如何比较。薪资会随着工作年限的变化而变化吗？<br/>要回答这个问题，我们首先需要将具有多年经验的列排序为有序因子。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="81dd" class="lm ln in mp b gy mt mu l mv mw"># change the column professional_experience_years into an ordered factor. <br/>salary_data.US$professional_experience_years &lt;- factor(salary_data.US$professional_experience_years, levels = c("1 year or less","2 - 4 years","5-7 years",<br/>                                                                                                                "8 - 10 years","11 - 20 years","21 - 30 years",<br/>                                                                                                                "31 - 40 years","41 years or more"),ordered = TRUE)</span><span id="d6a7" class="lm ln in mp b gy my mu l mv mw"># let us now calculate the average annual salary with respect to years of experience.</span><span id="8569" class="lm ln in mp b gy my mu l mv mw">salary.experience &lt;- salary_data.US[,.(avg.salary=mean(annual_salary)),by=.(professional_experience_years)] %&gt;% arrange(professional_experience_years)</span><span id="9e0a" class="lm ln in mp b gy my mu l mv mw"># plot a line graph to see the relationship</span><span id="50b5" class="lm ln in mp b gy my mu l mv mw">plot_ly(salary.experience,<br/>        x = ~professional_experience_years,<br/>        y = ~avg.salary,<br/>        type = "scatter",<br/>        line = list(color = "pink", width = 5),<br/>        mode = "lines+markers") %&gt;%<br/>  layout(title="Average annual salary with respect to professional years of experience", <br/>         yaxis = list(title = "Average annual salary", tickformat = "$"),<br/>         xaxis = list(title = "Professional years of experience"))%&gt;%<br/>       config(displayModeBar = FALSE, displaylogo = FALSE, <br/>              scrollZoom = FALSE, showAxisDragHandles = TRUE, <br/>              showSendToCloud = FALSE)%&gt;%<br/>       config(displayModeBar = FALSE, displaylogo = FALSE, <br/>              scrollZoom = FALSE, showAxisDragHandles = TRUE, <br/>              showSendToCloud = FALSE)</span></pre><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/19a741790061d1394be33732ce5357ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OL2FUVuqwx2CzxF5_UcONA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图 4</figcaption></figure><p id="b771" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">从上面的线图可以看出，随着工作经验的增加，薪水也有可能增加。这告诉我们，经验水平是决定一个人薪资的重要因素。</p><p id="838e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 4。你的教育水平决定了你能挣多少钱吗？</strong></p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="bc61" class="lm ln in mp b gy mt mu l mv mw">salary.edulevel &lt;-  salary_data.US[,.(avg.salary=mean(annual_salary)),by=.(highest_edu_level)]# %&gt;% #arrange(-avg.salary) %&gt;%<br/>     salary.edulevel %&gt;%  arrange(-avg.salary) %&gt;%  <br/>     plot_ly(<br/>          type = 'scatterpolar',<br/>          mode = "lines+markers",<br/>          r = ~round(avg.salary,0),<br/>          theta = ~highest_edu_level,<br/>          fill = 'toself',<br/>          text = ~ paste0("Level of education: ", salary.edulevel$highest_edu_level,"\n", "Average annual salary: ", round(salary.edulevel$avg.salary)),<br/>          hoverinfo = "text"<br/>        )%&gt;%<br/>        layout(<br/>          title = "Which level of education attracts more salary?",<br/>          polar = list(<br/>            radialaxis = list(<br/>              tickformat = "$",<br/>              visible = T,<br/>              range = c(0,max(salary.edulevel$avg.salary))<br/>            )<br/>          ),<br/>          plot_bgcolor  = "rgba(0, 0, 0, 0)",<br/>          paper_bgcolor = "rgba(0, 0, 0, 0)",<br/>          fig_bgcolor   = "rgba(0, 0, 0, 0)",<br/>          showlegend = F<br/>          <br/>        ) %&gt;%<br/>       config(displayModeBar = FALSE, displaylogo = FALSE, <br/>              scrollZoom = FALSE, showAxisDragHandles = TRUE, <br/>              showSendToCloud = FALSE)</span></pre><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/b01bf98e0a269b1bd513910d17103769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y0s6reB3z_iJFMGHQ57yKw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图 5</figcaption></figure><p id="138a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">哇！很高兴看到雷达图显示，随着你受教育程度的提高，薪水也会增加。这些信息可能对那些希望从大学学位到硕士学位深造的人有所帮助。正如我们在上面看到的，多年的经验导致了与教育水平相似的工资的积极变化。因此，人们可能会问自己，我是应该去读硕士，还是应该随着时间的推移积累更多的经验，从而获得加薪？投资回报会值得吗？</p><p id="0789" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 5。在计算或技术领域，各年龄组的人数相比如何？</strong></p><p id="36c7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">嗯，我是一名技术人员，我很想知道计算或技术行业的大多数受访者是什么年龄段的人，至少从样本来看是这样的。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="dd02" class="lm ln in mp b gy mt mu l mv mw">salary.tech &lt;- salary_data.US[industry == "Computing or Tech",.(count=.N),by=.(age)]</span><span id="83b3" class="lm ln in mp b gy my mu l mv mw"># For this plot let us do a bubble chart just to explore the various data visualizations.</span><span id="fd07" class="lm ln in mp b gy my mu l mv mw">salary.tech %&gt;% <br/>  plot_ly() %&gt;%<br/>        add_trace(x = ~reorder(age, -count), <br/>                  y = ~count,<br/>                  size = ~count,<br/>                  color = ~age,<br/>                  alpha = 1.5,<br/>                  type = "scatter",<br/>                  mode = "markers",<br/>                  marker = list(symbol = 'circle', sizemode = 'diameter',<br/>                                line = list(width = 2, color = '#FFFFFF'), opacity=0.8)) %&gt;%<br/>        add_text(x = ~reorder(age, -count), <br/>                        y = ~age, text = ~count,<br/>                        showarrow = FALSE,<br/>                        color = I("black")) %&gt;%<br/>        layout(<br/>          showlegend = FALSE,<br/>          title="Most tech guys are from which age group?",<br/>          xaxis = list(<br/>            title = "Age group"<br/>          ),<br/>          yaxis = list(<br/>            title = "Number of Tech people from the sample."<br/>          )<br/>        ) %&gt;%<br/>        config(displayModeBar = FALSE, displaylogo = FALSE, <br/>              scrollZoom = FALSE, showAxisDragHandles = TRUE, <br/>              showSendToCloud = FALSE)</span></pre><figure class="mk ml mm mn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/70102f39b2018c9a886b6bbe3a767f3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KmiXRNSLP22UY7m3YnpL1Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图 6</figcaption></figure><p id="45dc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">太神奇了！<br/>有趣的是，大多数计算机或技术人员大多在 25-44 岁之间，至少从样本来看是这样。鉴于我们的样本不是 MECE，这可能不是结论性的(相互排斥和集体穷举)，但它确实有助于给出接近所有人都知道的迹象，我的意思是，任何人几乎都可以猜到大多数技术人员可能都很年轻。</p></div></div>    
</body>
</html>