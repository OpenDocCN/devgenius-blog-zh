<html>
<head>
<title>Find and Fix Transitive Dependency Version Upgrade/Conflicts in Maven</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Maven中查找并修复可传递的依赖关系版本升级/冲突</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/find-and-fix-transitive-dependency-version-upgrade-conflicts-in-maven-7ffb4ceae683?source=collection_archive---------3-----------------------#2022-01-10">https://blog.devgenius.io/find-and-fix-transitive-dependency-version-upgrade-conflicts-in-maven-7ffb4ceae683?source=collection_archive---------3-----------------------#2022-01-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/9390a30c31c0a638d379ae64c7826a8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*OrOmLHzCgE1Qg5kEHFlx6Q.jpeg"/></div></figure><p id="5f5a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们都知道，在处理Maven项目时，<strong class="jt io"> pom.xml文件</strong>是主要包配置、依赖声明和构建配置中最重要的部分。</p><h2 id="1c27" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">什么是传递依赖？</h2><p id="b4c0" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">我们可以使用<strong class="jt io"> mvn dependency:tree </strong>命令来查看我们包含在项目中的依赖项的结构。传递依赖，简单来说就是子依赖所依赖的依赖。如果A依赖于B and B依赖于C，则C是A的传递依赖</p><p id="8f7a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">有时，如果已知包C易受攻击，无论是逻辑还是安全，包B的开发人员可能不会更新来升级C的版本。包A的开发人员则需要手动执行C的漏洞修复。在本文中，我总结了我在修复可传递依赖项版本升级方面的经验。</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ln"><img src="../Images/a686e6895d44065c28de485397c3e68e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pk8Nz08xehaIIKoSeexDXQ.png"/></div></div></figure><h2 id="e31a" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">我如何发现我应该升级我的依赖关系？</h2><p id="2065" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">学长让我用一个扫码工具——<a class="ae lw" href="https://www.blackducksoftware.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jt io">黑鸭</strong> </a>。它基本上做了与命令<strong class="jt io"> mvn dependency:tree </strong>相同的工作，但是它更全面，帮助您确定可以做什么来解决问题。官方文件可以在<a class="ae lw" href="https://testing.blackduck.synopsys.com/doc/pdfs/user_guide.pdf" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="5d4d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">以下是blackduck代码扫描插件的样本结果截图。执行漏洞扫描的实际步骤可以在上面的链接中找到。</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/267b8ff1358ae1aa27174b5be4bb4dff.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*t1_CVNYCCxjKH0_W3hSNVQ.png"/></div></figure><p id="1039" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它帮助你列出所有潜在的弱点，所有直接的/可传递的依赖。此外，它还提供补救/升级建议。</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi ly"><img src="../Images/a731004f6e35c0697b0f58ea71caf34a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dgaQDuWRASInuozKtYnjSA.png"/></div></div></figure><p id="1112" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">了解了这些之后，我们就可以开始修改项目pom.xml文件来修复漏洞了。</p><h2 id="d641" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">如何修复我的依赖冲突/版本升级？</h2><h2 id="b519" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">步骤1)找到导致漏洞的父依赖项</h2><p id="638a" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">我的依赖之一是我的工件<strong class="jt io"> spring-boot-starter-web依赖的<strong class="jt io"> logback-core </strong>。它已被报告为中等漏洞，我想删除它。</strong></p><h2 id="cb5f" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">步骤2.1)如果您的项目不依赖于该漏洞，请排除该漏洞</h2><p id="7283" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">经过检查，我没有使用任何来自<strong class="jt io"> logback-core </strong>的功能，所以我能做的就是从我的<strong class="jt io">spring-boot-starter-web</strong>中排除那个包。这是我为自己的项目编写的pom.xml代码片段。</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/cf1247aa0a33f7da52cb35408f2fdce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*TXvtCVB0A7WISd56XuWAPA.png"/></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">将logback-core从其父依赖关系中排除</figcaption></figure><h2 id="fc1f" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">步骤2.2)如果您的项目依赖于漏洞，请修改依赖性管理</h2><p id="044c" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">在其他情况下，我的代码使用传递依赖。例如，<strong class="jt io"> spring-webmvc </strong>是我的可传递依赖项之一，我需要将这个包用于我代码的某些部分。据报告，该漏洞存在中等漏洞，因为已发布了更好的版本(5.3.14)。在<strong class="jt io"> pom.xml </strong>中，我需要做的就是添加<strong class="jt io">dependency manager</strong>部分来指定我想要的版本，这样我就可以告诉maven下载这个版本的<strong class="jt io"> spring-webmvc </strong>。此外，<strong class="jt io"> dependencyManagement </strong>不仅管理当前模块，还管理从当前模块扩展的子模块。如果一个项目中有多个模块共享同一个依赖项，则只需在项目根文件夹中声明一次该依赖项。</p><figure class="lo lp lq lr gt jo gh gi paragraph-image"><div class="gh gi me"><img src="../Images/6c665742596267b97580d0795a0d6432.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/format:webp/1*X7ie1rk_dCnvyhPLgtKOLw.png"/></div><figcaption class="ma mb gj gh gi mc md bd b be z dk translated">DependencyManagement允许下载特定版本的包</figcaption></figure><h2 id="e73b" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">步骤3)再次运行代码扫描</h2><p id="5549" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">作为双重检查，运行代码扫描以确保所有漏洞都得到处理。</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="134d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我希望这篇文章对你有所帮助。如果你像我一样渴望学习一些与技术相关的东西或定期反思工作和生活，请关注我的频道，了解我日常工作和生活中的最新灵感。</p></div></div>    
</body>
</html>