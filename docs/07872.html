<html>
<head>
<title>Strategy Pattern In Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">统一战略模式</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/strategy-pattern-in-unity-b82065aaa969?source=collection_archive---------0-----------------------#2022-04-29">https://blog.devgenius.io/strategy-pattern-in-unity-b82065aaa969?source=collection_archive---------0-----------------------#2022-04-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3892" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">能力系统</h2></div><p id="e090" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">比方说，我有一个技能系统，目前由一个枚举组成，包括火球术、狂怒、治疗和近战。我有一个使用当前选定能力的方法。在更新方法中，当空格键被按下时，它使用当前能力。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/002c281b34303bee75a0e950b597326a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8h8JprObSQFdBOn460cBUQ.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力赛跑者</figcaption></figure><p id="490b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在的问题是，一个技能越复杂，我需要添加到这个脚本中的代码就越多。真的没有办法把这些分离出来。另一个问题是，如果我想增加更多的能力，装备多个能力，或者根据按键的不同而拥有不同的能力。这可能会很快失控。</p><h2 id="2af3" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">更好的方法。</h2><p id="1c47" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">有能力跑者还有一个当前的能力场。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/0aeadb1184515396d92c777b5438e56d.png" data-original-src="https://miro.medium.com/v2/resize:fit:518/format:webp/1*WUVJ9sgv2WR-ROOGkdWoMA.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力赛跑者</figcaption></figure><p id="7046" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个能力指向一个有使用方法的接口。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mn"><img src="../Images/156aefdbf862df08bfdf3a800d4430c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*qAQQfxjD6jSGghZJEYOYLA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力界面</figcaption></figure><p id="ede3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这样我就可以从能力接口中获得能力</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/904a5f9d874add11078cf7b3e4d189d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*dEb0ikM950nZPfaouD_EPw.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力</figcaption></figure><p id="ced9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，如果我在这里更改名称，我刚才实现的是策略模式。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mp"><img src="../Images/ecfa673502297048c04a09ce990633d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5Kn5qgOBes5EyzaNUQlUrQ.gif"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力系统是战略模式</figcaption></figure><h1 id="6a83" class="mq lp in bd lq mr ms mt lt mu mv mw lw jt mx ju lz jw my jx mc jz mz ka mf na bi translated">策略模式到底是什么</h1><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/87bcb5145f5a039c3170b5a110701808.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*JdtBBh10OdGyMfNIAAjuEg.jpeg"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">战略模式</figcaption></figure><p id="75b6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">策略模式就是将行为或算法封装或包装在自己的类中。它的额外好处是允许在运行时分配行为或算法！如果您有一堆 If 语句或 switch 语句试图控制或调整行为，那么策略模式可能正是您清理代码所需要的。根据策略模式，类的行为不应该被继承。相反，它们应该使用接口封装。这与开放但封闭的实体原则是一致的，该原则提出类应该对扩展开放，但对修改封闭。这是一个很好的模式来创造能力系统，人工智能行为，或者武器系统。尽管我更喜欢用 Unity 的动画系统来创造我的人工智能行为。</p><h2 id="5c45" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">定义</h2><ul class=""><li id="58d1" class="nc nd in ke b kf mh ki mi kl ne kp nf kt ng kx nh ni nj nk bi translated"><strong class="ke io">策略</strong> —声明一个所有支持的算法通用的接口。上下文使用这个接口来调用由具体策略定义的算法。</li><li id="0126" class="nc nd in ke b kf nl ki nm kl nn kp no kt np kx nh ni nj nk bi translated"><strong class="ke io">具体策略</strong> —使用策略接口实现算法。</li><li id="a2db" class="nc nd in ke b kf nl ki nm kl nn kp no kt np kx nh ni nj nk bi translated"><strong class="ke io">上下文</strong> —配置有具体的策略对象。维护对策略对象的引用。可以定义一个接口，让策略访问它的数据。</li></ul><h1 id="4037" class="mq lp in bd lq mr ms mt lt mu mv mw lw jt mx ju lz jw my jx mc jz mz ka mf na bi translated">履行</h1><h2 id="cc7b" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">可靠性</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mn"><img src="../Images/156aefdbf862df08bfdf3a800d4430c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*qAQQfxjD6jSGghZJEYOYLA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力界面</figcaption></figure><p id="1e35" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一步是创建能力界面</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/b8a44b47f74264f488e9c8df7dd7f021.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/1*IkF18av8dPi98Obr365ipQ.gif"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力接口代码</figcaption></figure><p id="dfe3" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">转换能力跑步者使用新的界面</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nr"><img src="../Images/518f4dad10a6729d8fef25574055d7f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*K9g2QLHJ1eezszt2u3mh0A.gif"/></div></div></figure><h2 id="6b16" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">能力</h2><p id="e176" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">下一步是创建每种能力，让它们实现责任接口。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ns"><img src="../Images/2ddcd3adf3c9b4dc9fe5ceb86f68eb8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*n2YFa3bGlGlIIUub6bSGdQ.gif"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">火球能力</figcaption></figure><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nt"><img src="../Images/2e6038dd73678bb38f22aec92adbc206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*88GAlFbKEY6qpDVSITfnFw.gif"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">愤怒能力</figcaption></figure><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nu"><img src="../Images/5b08bc65c55f867fbd3f4dae457914bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AwGjTqhATrgYChBDhFfMdg.gif"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">治愈能力</figcaption></figure><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nv"><img src="../Images/59cba2f100203c19169a7b23fbf407f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gGMEfz6ghaAJWFqwf4TItA.gif"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">近战能力</figcaption></figure><h2 id="ea17" class="lo lp in bd lq lr ls dn lt lu lv dp lw kl lx ly lz kp ma mb mc kt md me mf mg bi translated">使用能力</h2><p id="6919" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">目前能力跑者不使用我新创造的任何能力。我需要一种方法来改变能力跑步者的当前能力，我目前不能用检查器这样做，因为 Unity 不序列化接口(内置)，这意味着我不能在检查器中分配这个字段。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/ff9ad5bd9f894f9e4f81db62b4fc9a87.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*vtmDQKqMPjiKzDg8Gtf2aA.png"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力赛跑者游戏对象</figcaption></figure><p id="c7ea" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有许多不同的方法来实现这一点，我打算用最快的方法。我将添加一个当前能力属性，并创建一个单独的 Monobehavior 来改变能力。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/587f3fadb8e3c404484eb710d42f7dff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/1*2AAe2F8dn6ODugVw_onKKw.gif"/></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">添加当前能力属性</figcaption></figure><p id="6093" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我可以很容易地改变能力。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ny"><img src="../Images/fdaf6795bf663e89538ed0c339e7bef5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CE0Q6Z23GIjiReYUg3mu8w.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">能力改变者</figcaption></figure><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nz"><img src="../Images/7a0ac5ad6b967bdd3cd2885f2ab35017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yE4PfV83rmy01mWT1aGo2w.gif"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk translated">行动能力</figcaption></figure><h1 id="9534" class="mq lp in bd lq mr ms mt lt mu mv mw lw jt mx ju lz jw my jx mc jz mz ka mf na bi translated">结论</h1><p id="1454" class="pw-post-body-paragraph kc kd in ke b kf mh jo kh ki mi jr kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">策略模式是工具箱中的一个有用工具。我可以用它来清理我能力系统中的代码，使它更加可靠。现在我的代码对扩展开放，但对修改关闭。这也使得我的每个代码都有一个单独的职责。我可以很容易地在我的系统中添加新的能力来做不同的事情。如果我想改变一个能力的工作方式，我需要做的就是改变一个能力，我不需要在 switch 语句中找到它。，也很容易改变能力的使用方式。事实上，它们是一个接口，允许我把任何东西都变成一种能力。例如，我可以把火球变成一个单体行为，然后把它变成一个预置，或者我可以把治疗能力变成一个可脚本化的物体。我可以把近战能力变成一种武器。只要他们坚持接口，这并不重要。</p><p id="9e12" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当然，它也遵循了利斯科夫的替换法——“<em class="oa">派生类或子类必须可以替换它们的基类或父类</em>”、接口分离——“<em class="oa">不要强迫任何客户端实现与它们无关的接口</em>”、以及依赖倒置——<em class="oa">“高级模块不应该依赖于低级模块，而应该依赖于抽象。抽象不应该依赖于细节；更确切地说，细节应该取决于抽象。”，</em>但这是设计好的。策略模式本身实际上只解决了前两个基本原则，其余的都是在设计代码时遵循的。</p><p id="20fe" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">代码可以在我的 Git Hub 页面上找到</p><div class="ob oc gp gr od oe"><a href="https://github.com/JamesLaFritz/Design-Patterns-For-Unity/tree/release-StrategyPattern" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">GitHub-JamesLaFritz/Design-Patterns-For-Unity 发布时-StrategyPattern</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">报告 Bug 请求特性展示了 Unity 中不同的编程设计模式。有许多不同的…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">github.com</p></div></div><div class="on l"><div class="oo l op oq or on os li oe"/></div></div></a></div></div></div>    
</body>
</html>