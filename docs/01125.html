<html>
<head>
<title>JavaScript and the Web — Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript 和网络表单</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-and-the-web-forms-ba0d7e3bd0d5?source=collection_archive---------36-----------------------#2020-06-24">https://blog.devgenius.io/javascript-and-the-web-forms-ba0d7e3bd0d5?source=collection_archive---------36-----------------------#2020-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f70fc1859616675f72475f4c513695cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*60ARX0HgRJA1cxfO"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@severinstalder?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Severin Stalder </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="ee89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript 是世界上最流行的编程语言之一。为了有效地使用它，我们必须了解它的基本知识。</p><p id="c189" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用表单。</p><h1 id="694c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">焦点</h1><p id="f612" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">表单域可以获得键盘焦点。</p><p id="94a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们以某种方式单击或激活它时，它们就成为当前活动的元素，并接收键盘输入。</p><p id="c567" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当它被聚焦时，我们可以在文本字段中输入内容。</p><p id="b2cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其他字段对键盘事件的响应不同。</p><p id="4ef7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">select</code>菜单试图移动到包含用户输入文本的选项。</p><p id="b54e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们也通过上下移动选择来响应箭头键。</p><p id="b3ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">focus</code>和<code class="fe me mf mg mh b">blur</code>方法聚焦一个输入元素。</p><p id="3615" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1265" class="mq lc iq mh b gy mr ms l mt mu">document.querySelector("input").focus();</span></pre><p id="f79b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后<code class="fe me mf mg mh b">document.activeElement.tagName</code>变为<code class="fe me mf mg mh b">'INPUT'</code>。</p><p id="237f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们叫<code class="fe me mf mg mh b">blur</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b217" class="mq lc iq mh b gy mr ms l mt mu">document.querySelector("input").blur();</span></pre><p id="8e09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后<code class="fe me mf mg mh b">document.activeElement.tagName</code>变为<code class="fe me mf mg mh b">'BODY'</code>。</p><p id="ac95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">HTML 还提供了<code class="fe me mf mg mh b">autofocus</code>属性来产生聚焦输入的相同效果。</p><p id="20a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">tabinddex</code>属性让我们设置何时通过按 Tab 键到达元素。</p><p id="e681" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">tabindex</code>为 1，那么第一个 Tab 键就聚焦在那个元素上。</p><p id="6af4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加<code class="fe me mf mg mh b">tabindex</code>可以使任何 HTML 元素成为焦点。</p><p id="b820" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">tabindex</code> of -1 使跳转跳过一个元素。</p><h1 id="57c8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">禁用字段</h1><p id="58d9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">可以通过<code class="fe me mf mg mh b">disabled</code>属性禁用表单字段。</p><p id="418b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以将它添加到一个按钮上:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="db8a" class="mq lc iq mh b gy mr ms l mt mu">&lt;button disabled&gt;disabled&lt;/button&gt;</span></pre><p id="e00f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">则禁用按钮将被禁用。</p><h1 id="56a9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">形状要素</h1><p id="2fa1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果存在一个<code class="fe me mf mg mh b">form</code>元素，那么<code class="fe me mf mg mh b">document</code>对象有一个<code class="fe me mf mg mh b">forms</code>属性链接到页面上的表单。</p><p id="83a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">表单具有<code class="fe me mf mg mh b">elements</code>属性，其中包含表单内部的元素。</p><p id="4214" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="253e" class="mq lc iq mh b gy mr ms l mt mu">&lt;form&gt;<br/>  &lt;input type='text'&gt;<br/>&lt;/form&gt;</span></pre><p id="874f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后当我们写下:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6c9f" class="mq lc iq mh b gy mr ms l mt mu">const form = document.querySelector('form');<br/>console.log(form.elements[0].type);</span></pre><p id="9446" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到<code class="fe me mf mg mh b">'text'</code>日志。</p><p id="c206" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">form.elements[0]</code>是输入字段本身。</p><p id="3c29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果输入的<code class="fe me mf mg mh b">type</code>为<code class="fe me mf mg mh b">submit</code>，那么当输入按钮被按下时，表单将被提交。</p><p id="a83c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如何由<code class="fe me mf mg mh b">action</code>属性提交。这可以通过 GET 或 POST 请求来完成。</p><p id="de87" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在此之前，触发了<code class="fe me mf mg mh b">submit</code>事件。</p><p id="a7e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过在提交事件处理程序中调用<code class="fe me mf mg mh b">preventDefault</code>来阻止默认的提交行为。</p><p id="d974" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有下面的 HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d0d6" class="mq lc iq mh b gy mr ms l mt mu">&lt;form&gt;<br/>  &lt;input type='text'&gt;<br/>  &lt;input type='submit'&gt;<br/>&lt;/form&gt;</span></pre><p id="f13b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="442d" class="mq lc iq mh b gy mr ms l mt mu">const form = document.querySelector('form');<br/>form.addEventListener("submit", event =&gt; {<br/>  event.preventDefault();<br/>  console.log(form.elements[0].value);<br/>});</span></pre><p id="9acf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可能希望拦截 JavaScript 中的提交事件，以便在提交之前检查表单值的有效性。</p><p id="ac08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可能希望通过<code class="fe me mf mg mh b">fetch</code>提交它，而不需要重新加载页面。</p><h1 id="346e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">文本字段</h1><p id="8a08" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">type</code>设置为<code class="fe me mf mg mh b">text</code>或<code class="fe me mf mg mh b">password</code>的文本区或输入共用一个接口。</p><p id="2179" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们都有将输入值作为字符串的<code class="fe me mf mg mh b">value</code>属性。</p><p id="c62a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">文本字段的<code class="fe me mf mg mh b">selectionStart</code>和<code class="fe me mf mg mh b">selectionEnd</code>属性为我们提供了关于光标和文本选择的信息。</p><p id="44f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当未选择任何内容时，它们返回相同的数字。</p><p id="54cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">0 表示文本的开始，1 是第二个字符，依此类推。</p><p id="58e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">replaceSelection</code>功能用给定的单词替换当前选中的文本部分，并将光标移到该单词之后，以便用户可以继续输入。</p><p id="4d83" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">文本字段的<code class="fe me mf mg mh b">change</code>事件不会在每次输入内容时触发。</p><p id="8c64" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它在内容更改后失去焦点时触发。</p><p id="49f7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了监听所有输入值的变化，我们应该监听<code class="fe me mf mg mh b">input</code>事件。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/19ba8f585c929ef93f1fa6a5275fe375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B_GOKX_LPskjwdZR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@gr8muzamil?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">穆罕默德·穆扎米尔</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="8839" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">复选框和单选按钮</h1><p id="7846" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了监听复选框的变化，我们可以使用<code class="fe me mf mg mh b">checked</code>属性。</p><p id="a918" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有下面的 HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7198" class="mq lc iq mh b gy mr ms l mt mu">&lt;input type="checkbox" id="green"&gt;</span></pre><p id="3157" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6858" class="mq lc iq mh b gy mr ms l mt mu">const checkbox = document.querySelector("#green");<br/>checkbox.addEventListener("change", () =&gt; {<br/>  document.body.style.background =<br/>    checkbox.checked ? "green" : "";<br/>});</span></pre><p id="3a74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用了<code class="fe me mf mg mh b">checked</code>属性来检查复选框的值。</p><p id="daf3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">勾选的话就是<code class="fe me mf mg mh b">true</code>了。</p><p id="0a0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当 body 元素被选中时，我们将它的背景颜色设置为<code class="fe me mf mg mh b">'green'</code>。</p><p id="3122" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">label 标签将一段文档与一个输入字段相关联。</p><p id="ddc0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3f8c" class="mq lc iq mh b gy mr ms l mt mu">&lt;label&gt;<br/>  &lt;input type="radio" name="fruit" value="orange"&gt; Orange<br/>&lt;/label&gt;<br/>&lt;label&gt;<br/>  &lt;input type="radio" name="fruit" value="banana"&gt; Banana<br/>&lt;/label&gt;<br/>&lt;p id='fruit'&gt;</span><span id="bfc5" class="mq lc iq mh b gy mw ms l mt mu">&lt;/p&gt;</span></pre><p id="875a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以按如下方式检查单选按钮的:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5348" class="mq lc iq mh b gy mr ms l mt mu">const buttons = document.querySelectorAll("[name=fruit]");<br/>for (let button of Array.from(buttons)) {<br/>  button.addEventListener("change", () =&gt; {<br/>    document.querySelector('#fruit').innerText = button.value;<br/>  });<br/>}</span></pre><p id="76af" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们单击一个单选按钮时，我们会看到在 p 元素中填充了 select 选项。</p><h1 id="62a2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="5b81" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过不同的方式获得单选按钮、复选框和文本输入的值。</p><p id="574f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以监听 change 事件来获取输入控件模糊后的值。</p></div></div>    
</body>
</html>