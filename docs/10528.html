<html>
<head>
<title>PHP — P91: MySQL CRUD</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PHP — P91: MySQL CRUD</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/php-p91-mysql-crud-1988f82072f5?source=collection_archive---------6-----------------------#2022-11-08">https://blog.devgenius.io/php-p91-mysql-crud-1988f82072f5?source=collection_archive---------6-----------------------#2022-11-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cf481ad475eac255bcdd911f53af920a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*22Jfw6-mkaF9nfQtaOEpjA.jpeg"/></div></div></figure><p id="6648" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">什么是 CRUD 操作？创建、读取、更新、删除。这就是我们在过去几篇文章中所创造的。拼图的最后一块是将它们组合成一个知道如何管理我们的<code class="fe kw kx ky kz b">authors</code>表的文件。如果您直接进入这篇文章，我建议您先阅读这篇文章之前的文章。你不需要，但会有帮助的。</p><ul class=""><li id="c0da" class="la lb iq ka b kb kc kf kg kj lc kn ld kr le kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/dev-genius/php-p82-mysql-introduction-8153280e16a8" rel="noopener"> MySQL 简介</a></li><li id="d6a4" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/dev-genius/php-p83-mysql-db-connection-8a34c4056863" rel="noopener"> MySQL 数据库连接</a></li><li id="2b55" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/dev-genius/php-p84-mysql-tables-83b203d28ff7" rel="noopener"> MySQL 表</a></li><li id="d755" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/dev-genius/php-p85-mysql-insert-51a9e3bfedd3" rel="noopener"> MySQL 插入</a></li><li id="aafa" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/dev-genius/php-p86-mysql-insert-with-prepared-statements-57f37daeb109" rel="noopener">包含准备好的语句的 MySQL Insert</a></li><li id="e548" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/p/php-p87-mysql-insert-multiple-records-with-prepared-statements-c5c7bcfb42a3" rel="noopener"> MySQL 用准备好的语句插入多条记录</a></li><li id="57e0" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/dev-genius/php-p88-mysql-select-d7a633e736b" rel="noopener"> MySQL 选择</a></li><li id="aa9e" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/dev-genius/php-p89-mysql-update-put-and-patch-3d917804d8fb" rel="noopener"> MySQL 更新(上传 vs 补丁)</a></li><li id="7e51" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://medium.com/dev-genius/php-p90-mysql-delete-ec6f3a969591" rel="noopener"> MySQL 删除</a></li></ul><h1 id="d033" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">概述</h1><p id="a202" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">回顾前几篇文章中的代码。我们已经建立了大部分操作，但可能需要在这里和那里调整一些东西。</p><ul class=""><li id="9323" class="la lb iq ka b kb kc kf kg kj lc kn ld kr le kv lf lg lh li bi translated"><a class="ae lj" href="https://github.com/dinocajic/php-youtube-tutorials/tree/master/app" rel="noopener ugc nofollow" target="_blank">插入</a></li><li id="4da1" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://github.com/dinocajic/php-youtube-tutorials/tree/master/app/86%20MySQL%20Select" rel="noopener ugc nofollow" target="_blank">选择</a></li><li id="376a" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://github.com/dinocajic/php-youtube-tutorials/tree/master/app/87%20MySQL%20Update" rel="noopener ugc nofollow" target="_blank">更新</a></li><li id="df79" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated"><a class="ae lj" href="https://github.com/dinocajic/php-youtube-tutorials/tree/master/app/88%20Delete" rel="noopener ugc nofollow" target="_blank">删除</a></li></ul><h1 id="7457" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">路线文件</h1><p id="32a6" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">在前面的文章中，我们使用路由文件来路由到各种不同的文件。我们在这里也可以这样做。因为我们结合了面向对象和非面向对象的原则，所以现有的代码会有点乱，但有时你会得到这样的结果。这将是创建作者控制器和视图的最佳时机，但出于篇幅原因，我们将忽略这一点。相反，我们的路由文件(index.php)将使用<code class="fe kw kx ky kz b">header</code>函数来移动用户。我们将在下一篇文章中讨论 AuthorController。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="2f10" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">到目前为止，我们的路由文件所做的就是检查是否存在<code class="fe kw kx ky kz b">page</code> url 参数。如果没有，它将显示链接以查看所有作者。链接指向<code class="fe kw kx ky kz b">index.php</code>，通过<code class="fe kw kx ky kz b">authors</code>的<code class="fe kw kx ky kz b">page</code>论证。一旦再次点击<code class="fe kw kx ky kz b">index.php</code>，就会出现<code class="fe kw kx ky kz b">page</code>参数，并将用户导向<code class="fe kw kx ky kz b">ViewAll.php</code>页面。</p><p id="c818" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这只是第一阶段。该文件将继续增长。</p><h1 id="6c6a" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">作者类别</h1><p id="0466" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">Author 类现在看起来像一个正确的文件。我们已经添加了之前创建、读取、更新和删除作者的所有方法。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><h1 id="6ee8" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">查看全部</h1><p id="54d8" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">“查看全部”页面尚未创建。它的全部目的是显示数据库中的所有作者。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="19c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将只显示所有作者的名和姓，并将他们的名字包装在一个链接中。链接指向<code class="fe kw kx ky kz b">index.php</code>并传递作者的<code class="fe kw kx ky kz b">id</code>和<code class="fe kw kx ky kz b">page</code>参数。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/6dd2d273914d28fdc1ad4d79e7283ee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kNxcRBO0LtOlpn1FNZAzhA.png"/></div></div></figure><h1 id="fb80" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">显示</h1><p id="502a" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">View All 显示所有的作者，但是如果我们需要查看个人的详细信息呢？这就是<code class="fe kw kx ky kz b">Show.php</code>派上用场的地方。我们将显示作者的名字、姓氏和电子邮件。作者的详细信息将被添加到一个表单中，这样我们也可以在必要时更新它们。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="e415" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果<code class="fe kw kx ky kz b">Show.php</code>中缺少<code class="fe kw kx ky kz b">author_id</code>参数，我们将终止该应用程序。如果用户想要更新作者，他们可以在进行修改后单击 update 按钮。在我们开始更新之前，让我们看看我们的路线需要如何从 ViewAll 更新到 Show。换句话说，当用户点击<code class="fe kw kx ky kz b">ViewAll.php</code>中的链接时，我们如何将数据传输到<code class="fe kw kx ky kz b">Show.php</code>。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/cc2b39535681521f1731ec7e0b48a1de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZfZ_3kk7dJoGofLMc-2kiQ.png"/></div></div></figure><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="5066" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们正在寻找设置为<code class="fe kw kx ky kz b">author</code>的<code class="fe kw kx ky kz b">page</code>参数，以及包含<code class="fe kw kx ky kz b">author_id</code>参数的 url。如果是，用户被重定向到<code class="fe kw kx ky kz b">Show.php</code>，并且<code class="fe kw kx ky kz b">author_id</code>参数被传递。</p><h1 id="c615" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">更新作者</h1><p id="bd67" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">我们已经在以前的文章中定义了更新功能，所以移动它会非常简单。在这种情况下，我们将只移动<code class="fe kw kx ky kz b">put</code>功能。</p><p id="fa8c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">Show.php</code>中的表单指向<code class="fe kw kx ky kz b">index.php?page=author</code>并且<code class="fe kw kx ky kz b">put</code>的<code class="fe kw kx ky kz b">_method</code>隐藏值被传递给我们的 route。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="1221" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">首先我们检查<code class="fe kw kx ky kz b">page</code>参数是否是作者。如果是，我们检查<code class="fe kw kx ky kz b">_method</code>参数。请记住，它将跳过第一个<code class="fe kw kx ky kz b">$page == author</code>检查，因为我们没有通过<code class="fe kw kx ky kz b">url</code>中的<code class="fe kw kx ky kz b">author_id</code>。这是一个 POST 请求。</p><p id="9b52" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦我们进入主题，我们将更新作者并将用户重定向回<code class="fe kw kx ky kz b">Show</code>页面。</p><h1 id="1d3d" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">删除</h1><p id="c8c8" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">删除功能也是内置的。问题是我们把删除按钮放在哪里？我将把它放在我们的展示页面上的“更新”按钮下。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/b6ee914e10c24db61e3eedb724869bce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sKGCvXccN0vhKRk7sEWqfw.png"/></div></div></figure><p id="8633" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们添加路线，以便完成删除过程。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="0313" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该路线检查<code class="fe kw kx ky kz b">_method</code>参数，类似于<code class="fe kw kx ky kz b">update</code>，并确保它被设置为<code class="fe kw kx ky kz b">delete</code>。一旦在<code class="fe kw kx ky kz b">Author</code>类中调用了<code class="fe kw kx ky kz b">delete</code>方法，用户就会被重定向回查看所有作者。</p><h1 id="9731" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">插入</h1><p id="b8cf" class="pw-post-body-paragraph jy jz iq ka b kb mn kd ke kf mo kh ki kj mp kl km kn mq kp kq kr mr kt ku kv ij bi translated">最后但并非最不重要的是插入。我们需要两条路线:一条是创建，另一条是实际插入数据。我们的路由文件中的链接将指向一个创建页面。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="71d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe kw kx ky kz b">Create.php</code>文件只是一个 HTML，其中包含一个与我们的<code class="fe kw kx ky kz b">Update.php</code>表单相同的空白表单，但是没有任何内容。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="5e9a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们也没有通过隐藏的<code class="fe kw kx ky kz b">_method</code>。这只是纯粹的<code class="fe kw kx ky kz b">post</code>方法。让我们捕获它并将数据插入到我们的路由文件中。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="4c75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就是这样。我们创建了所有的 CRUD 操作，并将它们添加到一个文件中。我们可以:</p><ul class=""><li id="34a5" class="la lb iq ka b kb kc kf kg kj lc kn ld kr le kv lf lg lh li bi translated">查看所有作者</li><li id="aa03" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated">点击作者查看个人作者</li><li id="b404" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated">更新作者详细信息</li><li id="700a" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated">删除作者</li><li id="564a" class="la lb iq ka b kb lk kf ll kj lm kn ln kr lo kv lf lg lh li bi translated">并插入作者</li></ul><p id="596f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">只剩下一些东西要清理，我很乐意送你去拉弗尔。</p><div class="mz na gp gr nb nc"><a href="https://github.com/dinocajic/php-youtube-tutorials" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd ir gy z fp nh fr fs ni fu fw ip bi translated">GitHub-dinocajic/PHP-YouTube-tutorials:PHP YouTube 教程的代码</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">PHP YouTube 教程的代码确保你已经安装了 Docker。克隆回购。运行以下命令…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">github.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq jw nc"/></div></div></a></div></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/270dfc9f24b5e441904baea004aa3d93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1DEb_1DxSEFqQf-N.jpeg"/></div></figure><p id="bcbb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Dino Cajic 目前是<a class="ae lj" href="http://absolutebiotech.com/" rel="noopener ugc nofollow" target="_blank"> Absolute Biotech </a>的 IT 负责人，该公司是<a class="ae lj" href="https://www.lsbio.com/" rel="noopener ugc nofollow" target="_blank"> LSBio(寿命生物科学公司)</a>、<a class="ae lj" href="https://absoluteantibody.com/" rel="noopener ugc nofollow" target="_blank"> Absolute 抗体</a>、<a class="ae lj" href="https://www.kerafast.com/" rel="noopener ugc nofollow" target="_blank"> Kerafast </a>、<a class="ae lj" href="https://everestbiotech.com/" rel="noopener ugc nofollow" target="_blank"> Everest BioTech </a>、<a class="ae lj" href="https://www.nordicmubio.com/" rel="noopener ugc nofollow" target="_blank"> Nordic MUbio </a>和<a class="ae lj" href="https://www.exalpha.com/" rel="noopener ugc nofollow" target="_blank"> Exalpha </a>的母公司。他还担任我的自动系统的首席执行官。他拥有计算机科学学士学位，辅修生物学，并拥有十多年的软件工程经验。他的背景包括创建企业级电子商务应用程序、执行基于研究的软件开发，以及通过写作促进知识的传播。</p><p id="80d8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在<a class="ae lj" href="https://www.linkedin.com/in/dinocajic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系他，在<a class="ae lj" href="https://instagram.com/think.dino" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上关注他，或者<a class="ae lj" href="https://dinocajic.medium.com/subscribe" rel="noopener">订阅他的媒体出版物</a>。</p><p id="0041" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">阅读 Dino Cajic(以及 Medium 上成千上万的其他作家)的每一个故事。你的会员费直接支持迪诺·卡吉克和你阅读的其他作家。你也可以在媒体上看到所有的故事。T25】</p></div></div>    
</body>
</html>