<html>
<head>
<title>Easiest way to setup a MERN Stack application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">设置 MERN 堆栈应用程序的最简单方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-get-started-with-the-mern-stack-the-easy-way-b9758fe45956?source=collection_archive---------0-----------------------#2022-03-05">https://blog.devgenius.io/how-to-get-started-with-the-mern-stack-the-easy-way-b9758fe45956?source=collection_archive---------0-----------------------#2022-03-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jk jl jm jn gh gi paragraph-image"><div class="ab gu cl jo"><img src="../Images/c57fdd879aa02c3480e487e1046514c3.png" data-original-src="https://miro.medium.com/v2/format:webp/0*hU4zJiyVwWcM0L-w.png"/></div></figure><p id="28a8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="kp">声明:本文是原文章的更新版本— </em> <a class="ae kq" href="https://www.digitalocean.com/community/tutorials/getting-started-with-the-mern-stack" rel="noopener ugc nofollow" target="_blank"> <em class="kp">此处</em> </a> <em class="kp">。</em></p><h1 id="a113" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">介绍</h1><p id="695e" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">MERN 栈由 MongoDB、Express、React 和 Node.js 组成。MERN 栈是构建现代单页面 web 应用程序最流行的 JavaScript 栈之一。</p><p id="0bf1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在本教程中，您将构建一个使用 RESTful API 的<strong class="jt io"> todo 应用程序</strong>，您也将在本教程的后面构建该应用程序。</p><h1 id="39e0" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">先决条件</h1><p id="8480" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">要完成这个教程，你需要<a class="ae kq" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> Node.js </strong> </a>。</p><p id="008f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">遵循安装说明并在本地运行 MongoDB，但本教程不会涵盖该过程，出于教育目的，按原样保留。</p><p id="6b29" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">下载并安装一个类似<a class="ae kq" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank">邮差</a>、<a class="ae kq" href="https://insomnia.rest/" rel="noopener ugc nofollow" target="_blank">失眠</a>的工具，或者一个 VSCODE 扩展<a class="ae kq" href="https://www.thunderclient.com/" rel="noopener ugc nofollow" target="_blank"> ThunderClient </a>测试 API 端点。</p><h1 id="da10" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 1 —设置应用程序</h1><p id="6c3c" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">让我们从设置开始。打开终端，在本地机器上任何方便的位置创建一个新的文件目录。您可以将其命名为任何名称，但在本例中，它被称为<code class="fe lu lv lw lx b">mern-todo</code>。</p><p id="d33b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，进入文件目录:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="11fb" class="mg ks in lx b gy mh mi l mj mk">cd mern-todo</span></pre><p id="1142" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">下一步是用一个<code class="fe lu lv lw lx b">package.json</code>文件初始化项目。该文件将包含一些关于您的应用程序及其运行所需的依赖项的信息。</p><p id="72be" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您可以使用:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="dde1" class="mg ks in lx b gy mh mi l mj mk">npm init -y</span></pre><p id="03c7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">并按照提示进行操作。或者您可以使用:</p><p id="bd4c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">使用默认值。</p><h1 id="6e86" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 2 —设置节点服务器</h1><p id="099e" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">要在后端运行 JavaScript 代码，您需要启动一个服务器来编译您的代码。</p><p id="fbac" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">服务器可以通过两种方式创建:第一种是使用 Node 内置的<code class="fe lu lv lw lx b">http</code>模块；其次是利用<a class="ae kq" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express.js 框架</a>。</p><p id="0e61" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">本教程将使用 Express.js。它是一个 Node.js HTTP 框架，可以处理许多现成的东西，并且只需要很少的代码就可以创建全功能的 RESTful APIs。要使用 Express，请使用 npm 安装它:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="0a61" class="mg ks in lx b gy mh mi l mj mk">npm install express</span></pre><p id="94cd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，创建一个文件<code class="fe lu lv lw lx b">index.js</code>，在其中键入以下代码并保存:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="1c57" class="mg ks in lx b gy mh mi l mj mk">const express = require('express');<br/>const app = express();<br/>const port = process.env.PORT || 5000;</span><span id="2ede" class="mg ks in lx b gy ml mi l mj mk">app.use((req, res, next) =&gt; {<br/>  res.header('Access-Control-Allow-Origin', '*');<br/>  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');<br/>  next();<br/>});</span><span id="6d89" class="mg ks in lx b gy ml mi l mj mk">app.use((req, res, next) =&gt; {<br/>  res.send('Welcome to Express');<br/>});</span><span id="9815" class="mg ks in lx b gy ml mi l mj mk">app.listen(port, () =&gt; {<br/>  console.log(`Server running on port ${port}`);<br/>});</span></pre><p id="f924" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">上述代码的这个片段有助于处理您在开发和测试期间尝试从不同域访问 API 时可能会遇到的与 CORS 相关的问题:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="6967" class="mg ks in lx b gy mh mi l mj mk">app.use((req, res, next) =&gt; {<br/>  res.header('Access-Control-Allow-Origin', '*');<br/>  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');<br/>  next();<br/>});</span></pre><p id="f060" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">是时候启动你的服务器看看它是否工作了。在与您的<code class="fe lu lv lw lx b">index.js</code>文件相同的目录中打开您的终端，并键入:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="9f24" class="mg ks in lx b gy mh mi l mj mk">node index.js</span></pre><p id="fa46" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果一切顺利，您将在您的终端中看到运行在端口 5000 上的<strong class="jt io">服务器。</strong></p><h1 id="4538" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 3-创建路线</h1><p id="b901" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">该应用程序需要做三件事:</p><ul class=""><li id="a6b5" class="mm mn in jt b ju jv jy jz kc mo kg mp kk mq ko mr ms mt mu bi translated">创建任务</li><li id="7434" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">查看所有任务</li><li id="55ba" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">删除已完成的任务</li></ul><p id="5388" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">对于每个任务，您将需要创建路由，这些路由将定义 todo 应用程序将依赖的多个端点。因此，让我们创建文件夹<code class="fe lu lv lw lx b">routes</code>并创建一个包含以下代码的文件<code class="fe lu lv lw lx b">api.js</code>。</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="b26d" class="mg ks in lx b gy mh mi l mj mk">mkdir routes</span></pre><p id="a759" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">编辑<code class="fe lu lv lw lx b">api.js</code>,并在其中粘贴以下代码:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="9d54" class="mg ks in lx b gy mh mi l mj mk">const express = require('express');<br/>const router = express.Router();</span><span id="cb68" class="mg ks in lx b gy ml mi l mj mk">router.get('/todos', (req, res, next) =&gt; {<br/>  // get placeholder<br/>});</span><span id="7753" class="mg ks in lx b gy ml mi l mj mk">router.post('/todos', (req, res, next) =&gt; {<br/>  // post placeholder<br/>});</span><span id="77ec" class="mg ks in lx b gy ml mi l mj mk">router.delete('/todos/:id', (req, res, next) =&gt; {<br/>  // delete placeholder<br/>});</span><span id="cc37" class="mg ks in lx b gy ml mi l mj mk">module.exports = router;</span></pre><p id="203a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这为 GET、POST 和 DELETE 提供了占位符路径。</p><h1 id="7b71" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 4 —定义模型</h1><p id="7d84" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">现在，有趣的部分来了。由于应用程序将使用 NoSQL 数据库<a class="ae kq" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>，我们需要创建一个<em class="kp">模型</em>和一个<em class="kp">模式</em>。模型是使用模式接口定义的。该模式允许您定义存储在每个文档中的字段以及它们的验证要求和默认值。本质上，模式是如何构建数据库的蓝图。此外，您可以定义静态和实例帮助器方法，以便更容易地处理您的数据类型，还可以定义虚拟属性，您可以像使用任何其他字段一样使用这些虚拟属性，但它们不存储在数据库中。</p><p id="d384" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">要创建一个模式和一个模型，安装<a class="ae kq" href="https://mongoosejs.com/" rel="noopener ugc nofollow" target="_blank">mongose</a>，这是一个使 MongoDB 工作更容易的节点包。</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="4cc7" class="mg ks in lx b gy mh mi l mj mk"># ensure that you are in the `mern-todo` project directory<br/>npm install mongoose</span></pre><p id="325a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在根目录下创建一个新文件夹，命名为<code class="fe lu lv lw lx b">models</code>。在其中创建一个文件并命名为<code class="fe lu lv lw lx b">todo.js</code>，包含以下代码:</p><p id="f650" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">用文本编辑器将以下内容粘贴到<code class="fe lu lv lw lx b">todo.js</code>中:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="671e" class="mg ks in lx b gy mh mi l mj mk">const mongoose = require('mongoose');<br/>const Schema = mongoose.Schema;</span><span id="ce36" class="mg ks in lx b gy ml mi l mj mk">// Create schema for todo<br/>const TodoSchema = new Schema({<br/>  action: {<br/>    type: String,<br/>    required: [true, 'The todo text field is required'],<br/>  },<br/>});</span><span id="79a3" class="mg ks in lx b gy ml mi l mj mk">// Create model for todo<br/>const Todo = mongoose.model('todo', TodoSchema);</span><span id="b503" class="mg ks in lx b gy ml mi l mj mk">module.exports = Todo;</span></pre><p id="61a8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，我们需要更新我们的路线，以利用新的模型。</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="8863" class="mg ks in lx b gy mh mi l mj mk">const express = require('express');<br/>const router = express.Router();<br/>const Todo = require('../models/todo');</span><span id="00ab" class="mg ks in lx b gy ml mi l mj mk">router.get('/todos', (req, res, next) =&gt; {<br/>  // This will return all the data, exposing only the id and action field to the client<br/>  Todo.find({}, 'action')<br/>    .then((data) =&gt; res.json(data))<br/>    .catch(next);<br/>});</span><span id="1626" class="mg ks in lx b gy ml mi l mj mk">router.post('/todos', (req, res, next) =&gt; {<br/>  if (req.body.action) {<br/>    Todo.create(req.body)<br/>      .then((data) =&gt; res.json(data))<br/>      .catch(next);<br/>  } else {<br/>    res.json({<br/>      error: 'The input field is empty',<br/>    });<br/>  }<br/>});</span><span id="dfea" class="mg ks in lx b gy ml mi l mj mk">router.delete('/todos/:id', (req, res, next) =&gt; {<br/>  Todo.findOneAndDelete({ _id: req.params.id })<br/>    .then((data) =&gt; res.json(data))<br/>    .catch(next);<br/>});</span><span id="7eb1" class="mg ks in lx b gy ml mi l mj mk">module.exports = router;</span></pre><h1 id="a082" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 5 —连接到数据库</h1><p id="1aa9" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">你需要一个数据库来存储你的数据。为此，您将使用<a class="ae kq" href="https://mlab.com/" rel="noopener ugc nofollow" target="_blank"> mLab </a>。按照<a class="ae kq" href="https://docs.mlab.com/connecting" rel="noopener ugc nofollow" target="_blank">文档</a>开始使用 mLab。</p><p id="e981" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">设置好数据库后，您需要用以下代码更新<code class="fe lu lv lw lx b">index.js</code>文件:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="0134" class="mg ks in lx b gy mh mi l mj mk">const express = require('express');<br/>const bodyParser = require('body-parser');<br/>const mongoose = require('mongoose');<br/>const routes = require('./routes/api');<br/>require('dotenv').config();</span><span id="71c7" class="mg ks in lx b gy ml mi l mj mk">const app = express();</span><span id="947b" class="mg ks in lx b gy ml mi l mj mk">const port = process.env.PORT || 5000;</span><span id="36d9" class="mg ks in lx b gy ml mi l mj mk">// Connect to the database<br/>mongoose<br/>  .connect(process.env.DB, { useNewUrlParser: true })<br/>  .then(() =&gt; console.log(`Database connected successfully`))<br/>  .catch((err) =&gt; console.log(err));</span><span id="785b" class="mg ks in lx b gy ml mi l mj mk">// Since mongoose's Promise is deprecated, we override it with Node's Promise<br/>mongoose.Promise = global.Promise;</span><span id="272b" class="mg ks in lx b gy ml mi l mj mk">app.use((req, res, next) =&gt; {<br/>  res.header('Access-Control-Allow-Origin', '*');<br/>  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept');<br/>  next();<br/>});</span><span id="acb8" class="mg ks in lx b gy ml mi l mj mk">app.use(bodyParser.json());</span><span id="be33" class="mg ks in lx b gy ml mi l mj mk">app.use('/api', routes);</span><span id="0f99" class="mg ks in lx b gy ml mi l mj mk">app.use((err, req, res, next) =&gt; {<br/>  console.log(err);<br/>  next();<br/>});</span><span id="1856" class="mg ks in lx b gy ml mi l mj mk">app.listen(port, () =&gt; {<br/>  console.log(`Server running on port ${port}`);<br/>});</span></pre><p id="b960" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">前面的代码利用<code class="fe lu lv lw lx b">process.env</code>来访问需要创建的环境变量。在根目录下创建一个名为<code class="fe lu lv lw lx b">.env</code>的文件，并编辑:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="5e6a" class="mg ks in lx b gy mh mi l mj mk">DB = 'mongodb://&lt;USER&gt;:&lt;PASSWORD&gt;@example.mlab.com:port/todo'</span></pre><p id="ed56" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">确保在创建了数据库和用户之后，使用 mLab 中自己的 MongoDB URL。用用户名替换<code class="fe lu lv lw lx b">&lt;USER&gt;</code>,用您创建的用户的密码替换<code class="fe lu lv lw lx b">&lt;PASSWORD&gt;</code>。</p><p id="76e4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">要使用环境变量，你必须安装一个名为<code class="fe lu lv lw lx b">dotenv</code>的节点包，确保你可以访问存储在<code class="fe lu lv lw lx b">.env</code>文件中的环境变量。</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="5a2b" class="mg ks in lx b gy mh mi l mj mk"># ensure that you are in the `mern-todo` project directory<br/>npm install dotenv</span></pre><p id="19a7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后在<code class="fe lu lv lw lx b">index.js</code>中要求并配置:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="ef8e" class="mg ks in lx b gy mh mi l mj mk">require('dotenv').config()</span></pre><p id="6cb3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">使用环境变量而不是直接将凭据写入应用程序代码，可以对您的版本控制系统隐藏敏感信息。以这种方式将配置和机密数据从应用程序代码中分离出来被认为是一种最佳实践。</p><h1 id="bef6" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 6 —测试 API</h1><p id="00b1" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">这是我们开始尝试确保你的 RESTful API 工作的部分。由于您的前端还没有准备好，您可以利用一些 API 开发客户端来测试您的代码。</p><p id="b4d1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">你可以使用<a class="ae kq" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>、<a class="ae kq" href="https://insomnia.rest/" rel="noopener ugc nofollow" target="_blank">失眠症</a>或者一个 VSCODE 扩展<a class="ae kq" href="https://www.thunderclient.com/" rel="noopener ugc nofollow" target="_blank"> ThunderClient </a>测试 API。</p><p id="55f0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">使用以下命令启动服务器:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="39b7" class="mg ks in lx b gy mh mi l mj mk">node index.js</span></pre><p id="e58f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，打开您的客户端，创建一个 GET 方法并导航到<code class="fe lu lv lw lx b"><a class="ae kq" href="http://localhost:5000/api/todos" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/api/todos</a></code>。</p><p id="1415" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">测试所有的 API 端点，确保它们工作正常。对于需要<code class="fe lu lv lw lx b">body</code>的端点，发送 JSON 和必要的字段，因为这是您在代码中设置的。</p><p id="8e53" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">示例发布请求:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="de0b" class="mg ks in lx b gy mh mi l mj mk">POST localhost:5000/api/todos<br/>Body<br/>raw</span></pre><p id="6733" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">示例帖子值:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="d1eb" class="mg ks in lx b gy mh mi l mj mk">{<br/>  "action": "build a mern stack application"<br/>}</span></pre><p id="92d4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">获取请求示例:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="82f9" class="mg ks in lx b gy mh mi l mj mk">GET localhost:5000/api/todos</span></pre><p id="257a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">获取响应示例:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="f175" class="mg ks in lx b gy mh mi l mj mk">[<br/>  {<br/>    "id": "5bd4edfc89d4c3228e1bbe0a",<br/>    "action": "build a mern stack application"<br/>  }<br/>]</span></pre><p id="b6ac" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">样本删除请求:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="1b58" class="mg ks in lx b gy mh mi l mj mk">DELETE localhost:5000/api/todos/5bd4edfc89d4c3228e1bbe0ad</span></pre><p id="665f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">测试并观察 GET、POST 和 DELETE 的结果。</p><h1 id="571e" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 7 —创建前端</h1><p id="f788" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">既然您已经完成了希望从 API 获得的功能，那么是时候为客户机创建一个与 API 交互的接口了。从 todo 应用程序的前端开始，您将使用<code class="fe lu lv lw lx b"><a class="ae kq" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-react-project-with-create-react-app" rel="noopener ugc nofollow" target="_blank">create-react-app</a></code>命令来搭建您的应用程序。</p><p id="3ca9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在与后端代码相同的根目录下，即<code class="fe lu lv lw lx b">mern-todo</code>目录，运行:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="2561" class="mg ks in lx b gy mh mi l mj mk">npx create-react-app frontend</span></pre><p id="390b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这将在您的<code class="fe lu lv lw lx b">mern-todo</code>目录中创建一个名为<code class="fe lu lv lw lx b">frontend</code>的新文件夹，您将在其中添加所有的 React 代码。</p><h1 id="88a6" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 8 —运行 React 应用程序</h1><p id="5eec" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">在测试 React app 之前，需要在项目根目录下安装很多依赖项。</p><p id="c8b9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">首先，安装<code class="fe lu lv lw lx b"><a class="ae kq" href="https://www.npmjs.com/package/concurrently" rel="noopener ugc nofollow" target="_blank">concurrently</a></code>作为开发依赖项:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="f320" class="mg ks in lx b gy mh mi l mj mk">npm install concurrently --save-dev</span></pre><p id="cdde" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Concurrently 用于从同一个终端窗口同时运行多个命令。</p><p id="e47b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后，安装<code class="fe lu lv lw lx b"><a class="ae kq" href="https://nodemon.io/" rel="noopener ugc nofollow" target="_blank">nodemon</a></code>作为开发依赖项:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="2fa0" class="mg ks in lx b gy mh mi l mj mk">npm install nodemon --save-dev</span></pre><p id="f190" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Nodemon 用于运行服务器并对其进行监控。如果服务器代码有任何变化，Nodemon 将使用新的变化自动重启它。</p><p id="b33e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">接下来，在 app 项目的根文件夹中打开您的<code class="fe lu lv lw lx b">package.json</code>文件，并粘贴以下代码:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="58de" class="mg ks in lx b gy mh mi l mj mk">{<br/>  // ...<br/>  "scripts": {<br/>    "start": "node index.js",<br/>    "start-watch": "nodemon index.js",<br/>    "dev": "concurrently \\\\"npm run start-watch\\\\" \\\\"cd frontend &amp;&amp; npm start\\\\""<br/>  },<br/>  // ...<br/>}</span></pre><p id="e374" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">进入前端文件夹，然后找到<code class="fe lu lv lw lx b">package.json</code>文件，并在其中添加以下键值对。</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="f9a9" class="mg ks in lx b gy mh mi l mj mk">{<br/>  // ...<br/>  "proxy": "http://localhost:5000"<br/>}</span></pre><p id="1c4a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们的<code class="fe lu lv lw lx b">package.json</code>文件中的这个代理设置将使您能够进行 API 调用，而不必键入完整的 URL，只需<code class="fe lu lv lw lx b">/api/todos</code>将获得您所有的 todos</p><p id="26d8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">打开您的终端并运行<code class="fe lu lv lw lx b">npm run dev</code>，确保您在<code class="fe lu lv lw lx b">todo</code>目录中，而不是在<code class="fe lu lv lw lx b">frontend</code>目录中。</p><p id="a258" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您的应用将在<code class="fe lu lv lw lx b">localhost:3000</code>打开并运行。</p><h1 id="3fe0" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">步骤 9 —创建 React 组件</h1><p id="1a5b" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">React 的优势之一是它利用了组件，这些组件是可重用的，并且还使代码模块化。对于您的 todo 应用程序，将有两个状态组件和一个无状态组件。</p><p id="7637" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在您的<code class="fe lu lv lw lx b">src</code>文件夹中创建另一个名为<code class="fe lu lv lw lx b">components</code>的文件夹，并在其中创建三个文件<code class="fe lu lv lw lx b">Input.js</code>、<code class="fe lu lv lw lx b">ListTodo.js</code>和<code class="fe lu lv lw lx b">Todo.js</code>。</p><p id="e52b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">打开<code class="fe lu lv lw lx b">Input.js</code>文件并粘贴以下内容:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="bdfc" class="mg ks in lx b gy mh mi l mj mk">import React, { Component } from 'react';<br/>import axios from 'axios';</span><span id="4a0f" class="mg ks in lx b gy ml mi l mj mk">class Input extends Component {<br/>  state = {<br/>    action: '',<br/>  };</span><span id="89ac" class="mg ks in lx b gy ml mi l mj mk">  addTodo = () =&gt; {<br/>    const task = { action: this.state.action };</span><span id="34ea" class="mg ks in lx b gy ml mi l mj mk">    if (task.action &amp;&amp; task.action.length &gt; 0) {<br/>      axios<br/>        .post('/api/todos', task)<br/>        .then((res) =&gt; {<br/>          if (res.data) {<br/>            this.props.getTodos();<br/>            this.setState({ action: '' });<br/>          }<br/>        })<br/>        .catch((err) =&gt; console.log(err));<br/>    } else {<br/>      console.log('input field required');<br/>    }<br/>  };</span><span id="9186" class="mg ks in lx b gy ml mi l mj mk">  handleChange = (e) =&gt; {<br/>    this.setState({<br/>      action: e.target.value,<br/>    });<br/>  };</span><span id="5ada" class="mg ks in lx b gy ml mi l mj mk">  render() {<br/>    let { action } = this.state;<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;input type="text" onChange={this.handleChange} value={action} /&gt;<br/>        &lt;button onClick={this.addTodo}&gt;add todo&lt;/button&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span><span id="6066" class="mg ks in lx b gy ml mi l mj mk">export default Input;</span></pre><p id="02aa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">要使用 Axios，这是一个用于浏览器和 Node.js 的基于 Promise 的 HTTP 客户端，您需要从终端导航到您的<code class="fe lu lv lw lx b">frontend</code>目录:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="7588" class="mg ks in lx b gy mh mi l mj mk">cd frontend</span></pre><p id="e5fa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">并运行<code class="fe lu lv lw lx b">npm install axios</code>:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="3a82" class="mg ks in lx b gy mh mi l mj mk">npm install axios</span></pre><p id="5057" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">之后，打开您的<code class="fe lu lv lw lx b">ListTodo.js</code>文件并粘贴以下代码:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="25fd" class="mg ks in lx b gy mh mi l mj mk">import React from 'react';</span><span id="793e" class="mg ks in lx b gy ml mi l mj mk">const ListTodo = ({ todos, deleteTodo }) =&gt; {<br/>  return (<br/>    &lt;ul&gt;<br/>      {todos &amp;&amp; todos.length &gt; 0 ? (<br/>        todos.map((todo) =&gt; {<br/>          return (<br/>            &lt;li key={todo._id} onClick={() =&gt; deleteTodo(todo._id)}&gt;<br/>              {todo.action}<br/>            &lt;/li&gt;<br/>          );<br/>        })<br/>      ) : (<br/>        &lt;li&gt;No todo(s) left&lt;/li&gt;<br/>      )}<br/>    &lt;/ul&gt;<br/>  );<br/>};</span><span id="9cf0" class="mg ks in lx b gy ml mi l mj mk">export default ListTodo;</span></pre><p id="bd80" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后，在你的<code class="fe lu lv lw lx b">Todo.js</code>文件中写下如下代码:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="cfae" class="mg ks in lx b gy mh mi l mj mk">import React, { Component } from 'react';<br/>import axios from 'axios';<br/>import Input from './Input';<br/>import ListTodo from './ListTodo';</span><span id="a56c" class="mg ks in lx b gy ml mi l mj mk">class Todo extends Component {<br/>  state = {<br/>    todos: [],<br/>  };</span><span id="9e7c" class="mg ks in lx b gy ml mi l mj mk">  componentDidMount() {<br/>    this.getTodos();<br/>  }</span><span id="0e22" class="mg ks in lx b gy ml mi l mj mk">  getTodos = () =&gt; {<br/>    axios<br/>      .get('/api/todos')<br/>      .then((res) =&gt; {<br/>        if (res.data) {<br/>          this.setState({<br/>            todos: res.data,<br/>          });<br/>        }<br/>      })<br/>      .catch((err) =&gt; console.log(err));<br/>  };</span><span id="72a6" class="mg ks in lx b gy ml mi l mj mk">  deleteTodo = (id) =&gt; {<br/>    axios<br/>      .delete(`/api/todos/${id}`)<br/>      .then((res) =&gt; {<br/>        if (res.data) {<br/>          this.getTodos();<br/>        }<br/>      })<br/>      .catch((err) =&gt; console.log(err));<br/>  };</span><span id="0ae0" class="mg ks in lx b gy ml mi l mj mk">  render() {<br/>    let { todos } = this.state;</span><span id="48e2" class="mg ks in lx b gy ml mi l mj mk">    return (<br/>      &lt;div&gt;<br/>        &lt;h1&gt;My Todo(s)&lt;/h1&gt;<br/>        &lt;Input getTodos={this.getTodos} /&gt;<br/>        &lt;ListTodo todos={todos} deleteTodo={this.deleteTodo} /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span><span id="69b6" class="mg ks in lx b gy ml mi l mj mk">export default Todo;</span></pre><p id="bf54" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您需要对您的 React 代码做一点调整。删除徽标并调整您的<code class="fe lu lv lw lx b">App.js</code>,如下所示:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="5f5f" class="mg ks in lx b gy mh mi l mj mk">import React from 'react';<br/>import Todo from './components/Todo';<br/>import './App.css';</span><span id="b2ad" class="mg ks in lx b gy ml mi l mj mk">const App = () =&gt; {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Todo /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="2d4e" class="mg ks in lx b gy ml mi l mj mk">export default App;</span></pre><p id="ddac" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后将下面的代码粘贴到<code class="fe lu lv lw lx b">App.css</code>中:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="4eeb" class="mg ks in lx b gy mh mi l mj mk">.App {<br/>  text-align: center;<br/>  font-size: calc(10px + 2vmin);<br/>  width: 60%;<br/>  margin-left: auto;<br/>  margin-right: auto;<br/>}</span><span id="d882" class="mg ks in lx b gy ml mi l mj mk">input {<br/>  height: 40px;<br/>  width: 50%;<br/>  border: none;<br/>  border-bottom: 2px #101113 solid;<br/>  background: none;<br/>  font-size: 1.5rem;<br/>  color: #787a80;<br/>}</span><span id="6aa2" class="mg ks in lx b gy ml mi l mj mk">input:focus {<br/>  outline: none;<br/>}</span><span id="67b8" class="mg ks in lx b gy ml mi l mj mk">button {<br/>  width: 25%;<br/>  height: 45px;<br/>  border: none;<br/>  margin-left: 10px;<br/>  font-size: 25px;<br/>  background: #101113;<br/>  border-radius: 5px;<br/>  color: #787a80;<br/>  cursor: pointer;<br/>}</span><span id="6325" class="mg ks in lx b gy ml mi l mj mk">button:focus {<br/>  outline: none;<br/>}</span><span id="9933" class="mg ks in lx b gy ml mi l mj mk">ul {<br/>  list-style: none;<br/>  text-align: left;<br/>  padding: 15px;<br/>  background: #171a1f;<br/>  border-radius: 5px;<br/>}</span><span id="8a04" class="mg ks in lx b gy ml mi l mj mk">li {<br/>  padding: 15px;<br/>  font-size: 1.5rem;<br/>  margin-bottom: 15px;<br/>  background: #282c34;<br/>  border-radius: 5px;<br/>  overflow-wrap: break-word;<br/>  cursor: pointer;<br/>}</span><span id="cf64" class="mg ks in lx b gy ml mi l mj mk">@media only screen and (min-width: 300px) {<br/>  .App {<br/>    width: 80%;<br/>  }</span><span id="d497" class="mg ks in lx b gy ml mi l mj mk">  input {<br/>    width: 100%<br/>  }</span><span id="645e" class="mg ks in lx b gy ml mi l mj mk">  button {<br/>    width: 100%;<br/>    margin-top: 15px;<br/>    margin-left: 0;<br/>  }<br/>}</span><span id="0427" class="mg ks in lx b gy ml mi l mj mk">@media only screen and (min-width: 640px) {<br/>  .App {<br/>    width: 60%;<br/>  }</span><span id="737e" class="mg ks in lx b gy ml mi l mj mk">  input {<br/>    width: 50%;<br/>  }</span><span id="1922" class="mg ks in lx b gy ml mi l mj mk">  button {<br/>    width: 30%;<br/>    margin-left: 10px;<br/>    margin-top: 0;<br/>  }<br/>}</span></pre><p id="5717" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">还在<code class="fe lu lv lw lx b">index.css</code>中添加了以下规则:</p><pre class="ly lz ma mb gt mc lx md me aw mf bi"><span id="ce50" class="mg ks in lx b gy mh mi l mj mk">body {<br/>  margin: 0;<br/>  padding: 0;<br/>  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;<br/>  -webkit-font-smoothing: antialiased;<br/>  -moz-osx-font-smoothing: grayscale;<br/>  box-sizing: border-box;<br/>  background-color: #282c34;<br/>  color: #787a80;<br/>}</span><span id="1c86" class="mg ks in lx b gy ml mi l mj mk">code {<br/>  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New", monospace;<br/>}</span></pre><p id="844c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">假设在保存所有这些文件时没有错误，todo 应用程序将准备就绪，并具有前面讨论的功能:创建任务、删除任务和查看所有任务。</p><h1 id="f3ff" class="kr ks in bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">结论</h1><p id="14d8" class="pw-post-body-paragraph jr js in jt b ju lp jw jx jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko ig bi translated">在本教程中，您使用 MERN 堆栈创建了一个 todo 应用程序。您使用 React 编写了一个前端应用程序，它与使用 Express.js 编写的后端应用程序进行通信。</p></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><blockquote class="nh"><p id="eda0" class="ni nj in bd nk nl nm nn no np nq ko dk translated">感谢阅读，如果你觉得这篇文章有帮助，你可以为它鼓掌。我也希望有人能关注我😊</p></blockquote></div></div>    
</body>
</html>