<html>
<head>
<title>Understanding Closures in Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">理解 Javascript 中的闭包</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/understanding-closures-in-javascript-2d9d09f97b4b?source=collection_archive---------5-----------------------#2022-07-25">https://blog.devgenius.io/understanding-closures-in-javascript-2d9d09f97b4b?source=collection_archive---------5-----------------------#2022-07-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="3d46" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一个相当常见的 JS 面试问题，因为它无处不在。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/7eca99ae1bb1cb32618fb26ffd0f3a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ci-PuoMTJgkMMiFF"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">阿诺·弗朗西斯卡在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="7a9b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">闭包的概念是 Javascript 中的基本概念之一，因为它无处不在。根据 MDN web 文档(参考文献中给出了链接)，<strong class="jm io">闭包是一个函数与对其周围状态(词法环境/作用域)的引用捆绑在一起(封闭)的组合。</strong>换句话说<strong class="jm io">，</strong>闭包是函数和声明该函数的词法环境的组合。在 JavaScript 中，闭包是在每次创建函数时创建的。这里有几件事情需要解开，主要是词法范围。词汇范围的概念本身就是一个面试问题。这里有一篇全面的文章来理解一般的作用域和词法作用域。当我们看这个例子的时候，我们会深入了解什么是词法范围，以及它与闭包有什么关系。</p><div class="kz la gp gr lb lc"><a href="https://www.freecodecamp.org/news/javascript-lexical-scope-tutorial/" rel="noopener  ugc nofollow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd io gy z fp lh fr fs li fu fw im bi translated">JavaScript 中的词法范围——JS 中的范围到底是什么？</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">术语“词法范围”乍一看似乎很难理解。但是理解每个单词的意思是有帮助的…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">www.freecodecamp.org</p></div></div><div class="ll l"><div class="lm l ln lo lp ll lq ks lc"/></div></div></a></div><p id="4652" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">闭包的定义听起来比实际更复杂。<strong class="jm io"> </strong>简单来说，如果有两个函数，一个外部函数和一个内部函数，闭包基本上是让你从内部函数访问外部函数的作用域。因此，如果外部函数有某个变量，可以从内部函数中访问该变量。这可以用一个例子来更好的理解。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lr"><img src="../Images/ad505e9a08a220d8f6782bb1e9a79bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OQyGhdU5lphiQK4T7MX2Pw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">代码示例</figcaption></figure><p id="8c4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们来看看什么是词法范围。根据我上面链接的文章，<strong class="jm io">词法范围是表达式的定义区域。换句话说，一个项的词法范围是该项被创建的地方。</strong>以变量<code class="fe ls lt lu lv b">outerVariable</code> <em class="lw"> </em>为例。<code class="fe ls lt lu lv b">outerVariable</code> <em class="lw"> </em>的词法范围是它被创建的地方，也就是<code class="fe ls lt lu lv b">outerFunc</code>。所以<code class="fe ls lt lu lv b">outerVariable</code>的词法范围将是函数<code class="fe ls lt lu lv b">outerFunc</code>的范围。类似地，函数<code class="fe ls lt lu lv b">innerFunc</code>的词法范围也将是函数<code class="fe ls lt lu lv b">outerFunc</code>的范围。当<code class="fe ls lt lu lv b">innerFunc</code> <em class="lw"> </em>被创建时，一个闭包也随之创建，这使得<code class="fe ls lt lu lv b">innerFunc</code>可以访问其词法范围内的所有属性。由于<code class="fe ls lt lu lv b">outerVariable</code>在<code class="fe ls lt lu lv b">innerFunc</code>的词法范围内，所以可以在<code class="fe ls lt lu lv b">innerFunc</code>内部访问。</p><p id="316f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里要注意的另一件重要的事情是，即使在父函数关闭之后，子函数(内部函数)也可以访问父函数(外部函数)的属性。</p><p id="0e53" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">考虑稍有改动的同一个例子。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lx"><img src="../Images/bfb0c1dcc7a4d3fc1567f63610751e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Hy20JGgm_fMUcfHEr9UgQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">代码示例</figcaption></figure><p id="780e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，不是在<code class="fe ls lt lu lv b">outerFunc</code>内部调用<code class="fe ls lt lu lv b">innerFunc</code>，而是返回。现在，<code class="fe ls lt lu lv b">outerFunc</code>返回<code class="fe ls lt lu lv b">innerFunc</code>并且<code class="fe ls lt lu lv b">innerFunc</code>正在尝试访问<code class="fe ls lt lu lv b">outerVariable</code>，它存在于<code class="fe ls lt lu lv b">outerFunc</code>中。理论上，问题是我们已经不在里面了。所以我们应该无法访问<code class="fe ls lt lu lv b">outerVariable</code>。这就是闭包的魔力所在。<em class="lw"> func </em>保存对函数<code class="fe ls lt lu lv b">innerFunc</code>实例的引用，因为当<code class="fe ls lt lu lv b">outerFunc</code>被执行时<em class="lw"> </em> <code class="fe ls lt lu lv b">innerFunc</code>被返回(第 11 行)。这个<code class="fe ls lt lu lv b">innerFunc</code>实例维护了一个对其词法环境的引用，变量<code class="fe ls lt lu lv b">outerVariable</code>存在于该环境中。因此，当调用<code class="fe ls lt lu lv b">func</code>时(第 13 行)，变量<code class="fe ls lt lu lv b">outerVariable</code>仍然可用。</p></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><p id="13c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是理解闭包概念的一个简单例子。涉及到的所有术语可能会很棘手，但是当您查看代码示例时，事情会变得更清楚。</p></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><h2 id="ab67" class="mf mg in bd mh mi mj dn mk ml mm dp mn jv mo mp mq jz mr ms mt kd mu mv mw mx bi translated">参考</h2><div class="kz la gp gr lb lc"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures#lexical_scoping" rel="noopener  ugc nofollow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd io gy z fp lh fr fs li fu fw im bi translated">闭包- JavaScript | MDN</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">闭包是一个函数的组合，它被捆绑在一起(封闭),并引用其周围的状态(…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">developer.mozilla.org</p></div></div><div class="ll l"><div class="my l ln lo lp ll lq ks lc"/></div></div></a></div><div class="kz la gp gr lb lc"><a href="https://www.freecodecamp.org/news/javascript-lexical-scope-tutorial/" rel="noopener  ugc nofollow" target="_blank"><div class="ld ab fo"><div class="le ab lf cl cj lg"><h2 class="bd io gy z fp lh fr fs li fu fw im bi translated">JavaScript 中的词法范围——JS 中的范围到底是什么？</h2><div class="lj l"><h3 class="bd b gy z fp lh fr fs li fu fw dk translated">术语“词法范围”乍一看似乎很难理解。但是理解每个单词的意思是有帮助的…</h3></div><div class="lk l"><p class="bd b dl z fp lh fr fs li fu fw dk translated">www.freecodecamp.org</p></div></div><div class="ll l"><div class="mz l ln lo lp ll lq ks lc"/></div></div></a></div></div></div>    
</body>
</html>