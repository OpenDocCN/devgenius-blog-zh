<html>
<head>
<title>Elasticsearch and Kibana installation using Docker Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨ Docker Compose è¿›è¡Œ Elasticsearch å’Œ Kibana å®‰è£…</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/elasticsearch-and-kibana-installation-using-docker-compose-886c4823495e?source=collection_archive---------1-----------------------#2022-08-31">https://blog.devgenius.io/elasticsearch-and-kibana-installation-using-docker-compose-886c4823495e?source=collection_archive---------1-----------------------#2022-08-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/334604aa846eaf67e0642e621bb3e2a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IFDTmaXjQATOpmBIcv_yXQ.png"/></div></div></figure><p id="9a75" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨<a class="ae kt" href="https://medium.com/@mhdabdel151/run-elasticsearch-and-kibana-as-docker-containers-c5f5f5460afd" rel="noopener">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•å°† Elasticsearch å’Œ Kibana ä½œä¸º Docker å®¹å™¨è¿è¡Œã€‚è¿™ä¸ªæ–¹æ³•å½“ç„¶ä¸æ˜¯å¾ˆå¤æ‚ï¼Œä½†æ˜¯éœ€è¦å¾ˆå¤šå‘½ä»¤ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é‡ç‚¹å…³æ³¨<strong class="jx io">ç¼–æ’</strong>ï¼Œä»¥ä¾¿é€šè¿‡<strong class="jx io"> docker-compose </strong>å°†ä¸€åˆ‡é›†ä¸­åŒ–ã€‚</p><p id="ae1f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¯¹äºé‚£äº›ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆçš„äººæ¥è¯´ï¼Œ<strong class="jx io"> Docker Compose </strong>æ˜¯ä¸€ä¸ªç”¨ Python ç¼–å†™çš„å·¥å…·ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ª<em class="ku"> YAML </em>æ–‡ä»¶ä¸­æè¿°å‡ ä¸ªå®¹å™¨ä½œä¸ºä¸€ç»„æœåŠ¡ã€‚ç„¶åï¼Œå®ƒå°†å…è®¸æ‚¨ç¼–æ’æ‚¨çš„å®¹å™¨ï¼Œä»è€Œç®€åŒ–æ‚¨åœ¨ä¸åŒç¯å¢ƒä¸­çš„éƒ¨ç½²ã€‚</p><p id="b319" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Mac ç‰ˆ<em class="ku">Docker</em>æˆ– Windows ç‰ˆ<em class="ku">Docker</em>ï¼Œé‚£ä¹ˆæ‚¨çš„ç³»ç»Ÿä¸­å·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬çš„ Docker Composeã€‚åœ¨ Linux å·¥ä½œç«™ä¸Šï¼Œæ‚¨å¿…é¡»ä¸‹è½½å®ƒï¼Œç„¶åç”¨ä»¥ä¸‹å‘½ä»¤è¡Œå®‰è£…å®ƒ:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="5890" class="le lf in la b gy lg lh l li lj">sudo curl -L "https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/bin/docker-compose &amp;&amp; sudo chmod +x /usr/bin/docker-compose</span></pre><p id="3adf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å®‰è£…åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Docker Compose çš„ç‰ˆæœ¬:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="ebf6" class="le lf in la b gy lg lh l li lj">docker-compose --version</span></pre><p id="a6a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½ å¯ä»¥åœ¨è¿™é‡Œ äº†è§£æ›´å¤š docker-compose <a class="ae kt" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank"> <em class="ku">ã€‚</em></a></p><p id="0fe5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">é¦–å…ˆï¼Œåœ¨ä¸€ä¸ªç©ºç›®å½•ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<em class="ku">ã€‚env </em>æ–‡ä»¶æ¥é‡ç»„æˆ‘ä»¬çš„ç¯å¢ƒå˜é‡ã€‚è¯¥æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="ebb9" class="le lf in la b gy lg lh l li lj"># Version of Elastic products<br/>STACK_VERSION=8.4.0</span><span id="48bc" class="le lf in la b gy lk lh l li lj"># Port to expose Elasticsearch HTTP API to the host<br/>ES_PORT=9200</span><span id="b70d" class="le lf in la b gy lk lh l li lj"># Port to expose Kibana to the host<br/>KIBANA_PORT=5601</span></pre><p id="a289" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸€å®šè¦æåˆ°æˆ‘ä»¬è¦ä½¿ç”¨çš„å¼¹æ€§äº§å“çš„<em class="ku">ç‰ˆæœ¬</em>ï¼Œä»¥åŠ Elasticsearch å’Œ Kibana å°†è¦æš´éœ²çš„<em class="ku">ç«¯å£</em>ã€‚<br/>å› ä¸ºåœ¨ç¬¬ä¸€ä¸ªæ•™ç¨‹ä¸­<strong class="jx io">å®‰å…¨æ€§æ²¡æœ‰è¢«æ¿€æ´»</strong>ä¸ºäº†å°½å¯èƒ½ç®€åŒ–ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸ºæˆ‘ä»¬çš„å®¢æˆ·ç«¯æŒ‡å®šå¯†ç ã€‚</p><p id="a650" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç°åœ¨è®©æˆ‘ä»¬è½¬åˆ°<em class="ku"> docker-compose.yml </em>æ–‡ä»¶:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="f8cd" class="le lf in la b gy lg lh l li lj">version: '3.8'</span><span id="1278" class="le lf in la b gy lk lh l li lj">services:<br/>  elasticsearch:<br/>    image: docker.elastic.co/elasticsearch/elasticsearch:${STACK_VERSION}<br/>    container_name: elasticsearch<br/>    volumes:<br/>      - elasticsearch-data:/usr/share/elasticsearch/data<br/>    ports:<br/>      - ${ES_PORT}:9200<br/>    restart: always<br/>    environment:<br/>      - xpack.security.enabled=false<br/>      - discovery.type=single-node<br/>    ulimits:<br/>      memlock:<br/>        soft: -1<br/>        hard: -1</span><span id="5364" class="le lf in la b gy lk lh l li lj">  kibana:<br/>    depends_on:<br/>      - elasticsearch<br/>    image: docker.elastic.co/kibana/kibana:${STACK_VERSION}<br/>    container_name: kibana<br/>    volumes:<br/>      - kibana-data:/usr/share/kibana/data<br/>    ports:<br/>     - ${KIBANA_PORT}:5601<br/>    restart: always<br/>    environment:<br/>      - ELASTICSEARCH_HOSTS=http://elasticsearch:9200</span><span id="6358" class="le lf in la b gy lk lh l li lj">volumes:<br/>  elasticsearch-data:<br/>    driver: local<br/>  kibana-data:<br/>    driver: local</span></pre><p id="8663" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™é‡Œï¼Œæˆ‘ä»¬è¿è¡Œçš„æ˜¯ä¸€ä¸ª<em class="ku">å•èŠ‚ç‚¹</em> Elasticsearch ç‰ˆæœ¬<em class="ku"> 8.4.0 </em>é›†ç¾¤ï¼Œå®‰å…¨<em class="ku">è¢«ç¦ç”¨</em>ã€‚æˆ‘ä»¬çš„å®¹å™¨åä¸º<em class="ku"> elasticsearch </em>ï¼Œå¦‚æœå‡ºç°å´©æºƒæˆ–ä»»ä½•é—®é¢˜ï¼Œå®¹å™¨å°†<em class="ku">æ€»æ˜¯é‡å¯</em>ã€‚æˆ‘ä»¬è¿˜éœ€è¦æŒ‡å®šä¸€ä¸ªå·æ¥ä¿å­˜æ•°æ®(æ‚¨å¯ä»¥åœ¨<em class="ku">ä¸­ä¿®æ”¹ç«¯å£)ã€‚env </em>æ–‡ä»¶)ã€‚</p><p id="4a47" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¯¹äº kibana ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæˆ‘ä»¬ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°(<em class="ku"> kibana </em>)ï¼Œæˆ‘ä»¬å¡«å†™<em class="ku"> ELASTICSEARCH_HOSTS </em>ä½œä¸ºç¯å¢ƒå˜é‡ï¼Œä»¥ä¾¿å°† Kibana è¿æ¥åˆ° ELASTICSEARCHã€‚æŒ‡å®š<em class="ku"> depends_on </em>å±æ€§ä¹Ÿå¾ˆé‡è¦ï¼Œä»¥ä¾¿ä»…åœ¨å¯åŠ¨ Elasticsearch å®¹å™¨æ—¶å¯åŠ¨å®¹å™¨ã€‚</p><p id="66ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç°åœ¨ï¼Œé€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºå¹¶å¯åŠ¨ Kibana å®ä¾‹å’Œå•èŠ‚ç‚¹ Elasticsearch é›†ç¾¤:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="51f9" class="le lf in la b gy lg lh l li lj">docker-compose up -d</span></pre><p id="69b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç¬¬ä¸€æ¬¡è¿è¡Œè¿™ä¸ªå‘½ä»¤å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œè¿™å–å†³äºæ‚¨çš„äº’è”ç½‘è¿æ¥ï¼Œå› ä¸ºå®ƒå°†ä»<a class="ae kt" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> docker hub </a>ä¸‹è½½æˆ‘ä»¬æ–‡ä»¶ä¸­æŒ‡å®šçš„ Elasticsearch å’Œ Kibana å›¾åƒã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ‚¨çš„å®¹å™¨æ˜¯å¦å·²ç»åˆ›å»ºå¹¶æ­£åœ¨è¿è¡Œ:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="0991" class="le lf in la b gy lg lh l li lj">docker ps</span></pre><p id="2797" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å½“éƒ¨ç½²å¼€å§‹æ—¶ï¼Œæ‰“å¼€æµè§ˆå™¨å¹¶é€šè¿‡è®¿é—®<a class="ae kt" href="http://localhost:5601" rel="noopener ugc nofollow" target="_blank"> http://localhost:5601 </a>è®¿é—® Kibanaï¼Œåœ¨è¿™é‡Œæ‚¨å¯ä»¥åŠ è½½ã€æµ‹è¯•æ•°æ®å¹¶ä¸æ‚¨çš„é›†ç¾¤é€šä¿¡ã€‚</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/a16fd3321374e7ec5311fd5701dc5a6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Trd3tr1jdRevDs7sTfwHHA.png"/></div></div></figure><p id="e646" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¦åœæ­¢é›†ç¾¤ï¼Œå†ç®€å•ä¸è¿‡äº†ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="kv kw kx ky gt kz la lb lc aw ld bi"><span id="16c4" class="le lf in la b gy lg lh l li lj">docker-compose down</span></pre><p id="ef1c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¦åˆ é™¤å®¹å™¨å’Œå·ï¼Œæ‚¨åªéœ€å°†<em class="ku"> -v </em>æ·»åŠ åˆ°å‰é¢çš„å‘½ä»¤ä¸­ã€‚</p><p id="6748" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™é‡Œè¿˜æœ‰å¾ˆå¤šäº‹æƒ…æˆ‘ä»¬å¯ä»¥è®¨è®ºï¼Œæ¯”å¦‚å¦‚ä½•åœ¨å¯ç”¨äº†<em class="ku">å®‰å…¨æ€§çš„æƒ…å†µä¸‹é‡åšåŒæ ·çš„é…ç½®ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ä¸€ç¯‡æ–‡ç« ä¸­æ¶µç›–æ‰€æœ‰å†…å®¹ï¼Œä½†æ˜¯ä¸è¦æ‹…å¿ƒï¼Œå…¶ä»–æ–‡ç« æ­£åœ¨è·¯ä¸ŠğŸ˜ã€‚</em></p><p id="7b75" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä»Šå¤©åˆ°æ­¤ä¸ºæ­¢ï¼Œè¯·éšæ—¶æŸ¥çœ‹å…³äºè¯¥ä¸»é¢˜çš„<a class="ae kt" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html#docker-compose-file" rel="noopener ugc nofollow" target="_blank">å®˜æ–¹æ–‡æ¡£</a>ä»¥äº†è§£æ›´å¤šç»†èŠ‚å’Œé…ç½®ã€‚æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå¦‚æœæ‚¨å¯¹æœ¬æ–‡æœ‰ä»»ä½•é—®é¢˜æˆ–è¯„è®ºï¼Œè¯·åœ¨ä¸‹é¢ç•™ä¸‹æ‚¨çš„è¯„è®ºã€‚</p><p id="2f0a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬ä¸‹æ¬¡å†è§ï¼Œçœ‹æ›´å¤šçš„å¸–å­ğŸš€ã€‚</p><p id="d1b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">é˜¿åœæœå°”-å·´å‰</p></div></div>    
</body>
</html>