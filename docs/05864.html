<html>
<head>
<title>Adding pagination into Next.js blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Next.js 博客中添加分页</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/adding-pagination-into-next-js-blog-685d04dcb2c1?source=collection_archive---------0-----------------------#2021-11-11">https://blog.devgenius.io/adding-pagination-into-next-js-blog-685d04dcb2c1?source=collection_archive---------0-----------------------#2021-11-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/649127b603fb774046b7c41cace91479.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*EAkUVaa8EDD-t-SQ"/></div></figure><p id="18bf" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我最近用 Next.js 重新设计了我的博客。我使用了令人惊叹的 Next.js 教程，我对此非常满意。但是随着时间的推移，我写了越来越多的文章，很明显我需要添加分页。我不是 Next 方面的专家，事实证明添加分页并不容易。我对我的列表页面使用静态生成，生成所有页面不是一个选项。出于搜索引擎优化的原因，我决定切换到服务器端渲染，但我也想在飞行中切换页面。</p><h1 id="b818" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">添加 API</h1><p id="f136" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">首先，我需要添加一个 API 调用来提供分页信息和列表文章。我在一个根 api 文件夹中创建了一个 posts 目录，并在那里创建了一个[page]。js 文件。这个文件将是我的 api 处理程序。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="8446" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这是非常简单的代码。它正在对所有帖子的数组进行统计。注意，如果您部署到 Vercel，那么您的 api 调用将作为无服务器函数部署，您需要告诉 Vercel 将您的 markdown 文件添加到无服务器部署中。这是通过根 vercel.json 文件完成的。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="e700" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">根帖子目录是我存放所有降价文件的地方。</p><h1 id="f373" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">修改博客列表页面</h1><p id="4eab" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">我使用了 next.js 教程中的博客列表页面。我使用的是静态页面生成。所以我做的第一件事就是把它改成服务器端渲染。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="5017" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它获取我们的新 api 调用，并将其作为组件属性返回。对于 localhost 和 prod，服务器变量是不同的。我们需要指定完整的路径，因为这将从服务器调用。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="85dd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我使用 next/router 在页面间导航。为了让所有的事情更加用户友好，我添加了一个装载路线变化的动画。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="d35f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">为了呈现帖子或加载内容，我在这个样式中有一个 if。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="e463" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">对于实际的分页导航，我使用了令人敬畏的组件 react-paginate。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="1d33" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它引用了分页处理函数，该函数具有实际的导航逻辑。</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="6449" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">你可以在这个<a class="ae ly" href="https://gist.github.com/PavlikPolivka/a3125f354757a498f769ed28a2840991" rel="noopener ugc nofollow" target="_blank">要点</a>里看到整个博客页面。</p><p id="a0bc" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果你喜欢这篇文章，你可以在<a class="ae ly" href="https://twitter.com/pavel_polivka" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我。</p></div><div class="ab cl lz ma hr mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ig ih ii ij ik"><p id="7a23" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">【https://ppolivka.com】最初发表于<a class="ae ly" href="https://ppolivka.com/posts/nextjs-pagination" rel="noopener ugc nofollow" target="_blank"><em class="mg"/></a><em class="mg">。</em></p></div></div>    
</body>
</html>