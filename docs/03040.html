<html>
<head>
<title>Let’s Simplify React Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们简化React Redux</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/lets-simplify-react-redux-996fbb52c547?source=collection_archive---------0-----------------------#2020-09-23">https://blog.devgenius.io/lets-simplify-react-redux-996fbb52c547?source=collection_archive---------0-----------------------#2020-09-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/33588272e1658aa34c23dbc192f18a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cnAeZGWFBFzYaESBi9saoA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">react Redux-让我们简单点</figcaption></figure><p id="1cc4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">当今世界上的大多数前端工作，甚至是您的个人项目，总是需要一个健壮的UI状态管理器，因为随着应用程序扩展，数据传输、数据突变和控制会增加。</p><p id="fb63" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如你所知，这个问题的解决方案是Redux或Mobx-State-Tree(MST)。我喜欢函数式编程，尤其是在编写前端代码时，因此我选择深入学习Redux，而不是MST，后者更像是OOP(面向对象编程)风格。在这篇文章中，我将简化React Redux，尽管它看起来很复杂，只要保持冷静，边喝咖啡和吃饼干边读完。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kx"><img src="../Images/d9cbff48b8edbb150efa1c79568df2b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9kDgIX4pbXBS_350zYBzLw.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">尼日利亚购物中心</figcaption></figure><h1 id="7a05" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">概念和术语</h1><p id="8a0e" class="pw-post-body-paragraph jz ka in kb b kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw ig bi translated">想象一下你正在参观一个非常大的购物中心，就像上面显示的那样，你可以在这里买到任何你想要的东西--手机、食物、衣服等等。而不是在A区有电话市场，在B区有食品市场，在C区有服装市场，万岁！！！有了购物中心，你可以在一个地方拥有所有的市场类型。</p><p id="0497" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这同样适用于您的UI，而不是每个组件管理自己的状态，如下所示</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/410b21ea825c04fbcbed66a9ee7ceea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*v2WElOc9uFZS3uJTgAH9nw.jpeg"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">无状态功能组件— ReactJS</figcaption></figure><p id="2986" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们现在有一个名为REDUX STORE的商场或商店，其中保存了每个组件的所有状态(服装市场、食品市场和电话市场组件)或数据，可以随时随地进行检索或更新，太棒了！！！因此，组件A(手机市场)现在在商店或商场中，如果我需要一部手机，我只需开车去商场，不需要将道具传递给组件A(手机市场)来获得手机，这同样适用于所有其他组件。</p><p id="fb26" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这使得您的应用程序组件摆脱了逻辑，轻量级，因为它们只消耗数据，根本不管理状态，超级动态，因为它们只需要开车到商场或redux商店去获得他们需要的任何东西。</p><h2 id="c07e" class="mg ld in bd le mh mi dn li mj mk dp lm kk ml mm lq ko mn mo lu ks mp mq ly mr bi translated">还原剂</h2><p id="3fa3" class="pw-post-body-paragraph jz ka in kb b kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw ig bi translated">由于我们现在有一个大商场或redux商店，我们仍然需要销售人员来处理商场的每个部分。在Redux中，这些处理商场或商店各个部分的销售人员被称为REDUCERS，他们接受你的请求并给你一个答复，例如</p><p id="fdd1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我:我需要一部iPhone 5</p><p id="a8d2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">销售人员:你好，我是约翰，我经营iPhones，先生，你需要什么颜色的？</p><h2 id="8410" class="mg ld in bd le mh mi dn li mj mk dp lm kk ml mm lq ko mn mo lu ks mp mq ly mr bi translated">行为</h2><p id="f3bc" class="pw-post-body-paragraph jz ka in kb b kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw ig bi translated">去商场时，我会口头或书面要求购买我需要的物品。在Redux中，包含标题或类型以及简短描述的请求被称为动作或动作负载(这是一个普通的javascript对象)</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/ed6afe92dbc062de2edf4c7c89f4d7a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:418/format:webp/1*GGc6cRTnZySrxtXcCM7OMw.jpeg"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">重复操作</figcaption></figure><h2 id="9296" class="mg ld in bd le mh mi dn li mj mk dp lm kk ml mm lq ko mn mo lu ks mp mq ly mr bi translated">派遣</h2><p id="51ed" class="pw-post-body-paragraph jz ka in kb b kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw ig bi translated">Dispatchers或Dispatch只是我们将我们的动作或有效负载发送到商店的方式(一个方法或函数),一旦它到达商店，处理GET_PHONE动作类型的Reducer现在继续从商店获取电话的事务处理</p><h2 id="07b5" class="mg ld in bd le mh mi dn li mj mk dp lm kk ml mm lq ko mn mo lu ks mp mq ly mr bi translated">连接</h2><p id="8fdf" class="pw-post-body-paragraph jz ka in kb b kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw ig bi translated">CONNECT是另一个可以理解的简单术语，对于一个买家(一个需要数据的组件)来说，要想从商场得到一件商品，我必须把车开到商场。前往商场的汽车或驾驶过程在React-Redux中称为CONNECT。这只是从商店获取信息或向商店发送动作或有效负载的一种方式。因此，通过CONNECT，我可以从商店中获得一些东西，还可以分派一个操作。</p><h1 id="5822" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">让我们构建REACT REDUX鞋子销售应用程序</h1><p id="c92d" class="pw-post-body-paragraph jz ka in kb b kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw ig bi translated">对于这个应用程序，我们将使用一个react应用程序，所以打开你的cmd并创建一个</p><p id="ff00" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="mt"> npx创建-反应-应用程序shoesshop商店</em></p><p id="d7b6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在这里了解更多:<a class="ae mu" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"> react app </a></p><p id="ca24" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果您已经完成，请安装以下依赖项</p><p id="35e6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="mt"> npm安装redux react-redux redux-thunk redux-dev tools-extension或yarn add redux react-redux redux-thunk redux-dev tools-extension</em></p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mv"><img src="../Images/e75a85ba58e259e804532bede19690f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFDzXzsLluyij9mCfV1mog.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">您应该有一个类似的目录</figcaption></figure><p id="3204" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在src文件夹中创建以下文件夹:</p><ol class=""><li id="c806" class="mw mx in kb b kc kd kg kh kk my ko mz ks na kw nb nc nd ne bi translated">组件文件夹:这个文件夹包含了我们所有的组件。创建AddShoes.jsx、ViewShoes.jsx、EditShoes.jsx</li><li id="961f" class="mw mx in kb b kc nf kg ng kk nh ko ni ks nj kw nb nc nd ne bi translated">容器文件夹:这个文件夹包含了我们所有的容器。创建Ad.jsx、ViewShoesCont.js、EditShoesCont.js。</li></ol><p id="ba76" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">容器:</strong>想象一下一个孕妇，她做所有的进食、行走和药物治疗，而婴儿只是记录她的生命体征。在React Redux中，容器(孕妇)是组件的包装器，它们与存储交互，获取所有数据，甚至调度动作，然后将结果作为道具传递给组件。这种最佳实践有助于保持组件的轻量级和无逻辑。</p><p id="758f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3.行动文件夹:这个文件夹包含了我们所有的行动或行动创建者。</p><p id="18a2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">动作创建者:</strong>动作创建者是返回动作的普通javascript函数</p><p id="38f3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">4.Reducer文件夹:这个文件夹包含了我们所有的redux reducers。</p><p id="eb6a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> REDUCERS(技术定义):</strong>是Javascript函数，获取应用程序的前一个状态和动作，并返回新的或下一个状态。因此，它们是纯函数。</p><p id="6f4d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">5.页面文件夹:这个文件夹存放了我们所有的页面。在里面创建Home.jsx，Sales.jsx，dashboard.jsx文件。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi nk"><img src="../Images/2b0d6622adb17025f833f245bfbf1f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:472/format:webp/1*6PZb-f3anprkcX5drZixuQ.jpeg"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">我们的文件结构</figcaption></figure><h2 id="c9e3" class="mg ld in bd le mh mi dn li mj mk dp lm kk ml mm lq ko mn mo lu ks mp mq ly mr bi translated">将REDUX集成到REACT应用程序中</h2><p id="aeeb" class="pw-post-body-paragraph jz ka in kb b kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw ig bi translated">在Reducer文件夹中添加rootReducer.js和shoeReducer.js文件。</p><p id="f41a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们正在构建的应用程序只需要一个reducer(我们商场的销售人员)，她(shoeReducer)处理所有与鞋子有关的事务。</p><p id="27a0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，如果你正在构建一个有多个概念的应用程序，你将需要更多的reducers来处理每个概念。我希望在下一篇关于在React-Redux中处理异步/同步操作的文章中构建这样一个应用程序。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/f486ff34b6a74588b2331d834368a9f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*oXjYsvfWt6kieAQdZRJ7yA.jpeg"/></div></figure><p id="b3f7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在<em class="mt"> rootReducer.js中添加下面的代码</em></p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/776d1d59d498b0f4e4a68c390aa7b1fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/format:webp/1*RakSWyReUm--0nZ5foynEw.jpeg"/></div></figure><p id="3ffa" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，我们进口了我们的<em class="mt">鞋减速器</em>，然后我们从<em class="mt"> redux进口了<em class="mt">联合收割机减速器</em>。有了combine reducer</em>，我们可以用一种统一的方式保存我们所有的app reducers。它接受一个对象(键值对)，所以在mall(redux store)中，我们的<em class="mt"> shoeReducers </em>被标识为<em class="mt"> shoesStore </em>，如上图所示</p><p id="9e38" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在<em class="mt"> shoeReducer.js </em>中添加以下代码</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/a169d049d69739e3ccab2b1947f51457.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*1BsG_YpULita_q9N7Yujiw.jpeg"/></div></figure><p id="5200" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">记住，redux中的reducers是纯javascript函数。它的第一个参数是状态，另一个是动作对象。</p><p id="adb5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在redux中，状态必须是不可变的，所以你永远不会使用<em class="mt"> state.name，state[0].user.country，</em>你只会使用filter，map，spread syntax(…)等方法返回一个新的或下一个状态，这些方法不会篡改原始数组，而是返回一个新的数组。</p><p id="63b4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在根目录下的<em class="mt"> index.js </em>中导入以下模块</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/ad03934fb18e8c00fab5360927b8aaf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1080/format:webp/1*JkaKGzyETqleUIhahE67Bg.jpeg"/></div></figure><p id="1a6f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> <em class="mt"> redux: </em> </strong>我们导入<em class="mt"> createStore </em>，这使我们能够实际创建商店，所以在redux中将其视为土木工程师。applyMiddleware是一个包装器，它使我们能够使用redux进行API调用</p><p id="b653" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> <em class="mt"> rootReducer: </em> </strong>我们导入上面创建的rootReducer.js文件</p><p id="3021" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> <em class="mt"> thunk: </em> </strong> thunk帮助我们进行API调用，它只是一个使之成为可能的中间件</p><p id="2183" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"><em class="mt">provider:</em></strong>provider，就像React上下文API中一样，使应用程序中的每个组件都可以使用我们的存储中的数据</p><p id="0e16" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"><em class="mt">composewithdevtools:</em></strong>这有助于我们使用她的<a class="ae mu" href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en" rel="noopener ugc nofollow" target="_blank">浏览器扩展</a>在浏览器中可视化我们的redux商店</p><p id="dc92" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，我们使用导入的函数来实际创建商店，并用<strong class="kb io"> <em class="mt">提供者</em> </strong>包装我们的根组件(App.js)</p><p id="d48d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">添加以下代码:</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi np"><img src="../Images/349dca67bc766e3a86a62ecffd349836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/format:webp/1*RlaCk_nLNwdh9WRt7yzP5w.jpeg"/></div></figure><p id="0345" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">一个变量存储然后被分配给<em class="mt"> createStore </em>，首先接受我们的rootReducer和<em class="mt"> composewithdevtools </em>包装我们的<em class="mt"> thunk </em>中间件</p><h1 id="ba8b" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">结论</h1><p id="2ade" class="pw-post-body-paragraph jz ka in kb b kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks me ku kv kw ig bi translated">这并不是本教程的结束，而只是开始，Redux始终是一个庞大的主题，需要在一篇文章中从头开始深入探讨。在我的下一篇文章《在浏览器中可视化React-Redux商店》中，我将完成这个应用程序，并向您展示如何在浏览器中可视化商店。</p><p id="4c31" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">回购条款:<a class="ae mu" href="https://github.com/armstrong99/Simplifying-React-Redux" rel="noopener ugc nofollow" target="_blank">https://github.com/armstrong99/Simplifying-React-Redux</a></p><p id="bc9c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">非常感谢您的阅读。</p></div></div>    
</body>
</html>