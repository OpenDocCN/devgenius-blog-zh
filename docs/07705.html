<html>
<head>
<title>Initialization and Construction Special Methods: Python OOP Complete Course — Part 13</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初始化和构造特殊方法:Python OOP 完整教程—第 13 部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/initialization-and-construction-special-methods-python-oop-complete-course-part-13-78b62305101?source=collection_archive---------6-----------------------#2022-04-17">https://blog.devgenius.io/initialization-and-construction-special-methods-python-oop-complete-course-part-13-78b62305101?source=collection_archive---------6-----------------------#2022-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/cd2ab44ff77fb5d6af21cf4abc381399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zonby0FCLkiQh1hO9MUf3Q.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://pixabay.com/users/foundry-923783/" rel="noopener ugc nofollow" target="_blank">代工厂</a>在<a class="ae kc" href="https://pixabay.com/images/search/%20construction/" rel="noopener ugc nofollow" target="_blank"> Pixabay </a>拍摄的照片</figcaption></figure><p id="a53b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们开始之前，让我告诉你</p><ul class=""><li id="aeaf" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">这篇文章是 Python 面向对象编程完整课程的一部分，你可以在这里找到它。</li><li id="da72" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">所有资源都可以在下面的“资源”部分找到。</li><li id="e57d" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">这篇文章在 YouTube 上也有视频<a class="ae kc" href="https://youtu.be/syX5BiOwriY" rel="noopener ugc nofollow" target="_blank">点击这里</a>。</li></ul><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://youtu.be/syX5BiOwriY" rel="noopener ugc nofollow" target="_blank">https://youtu.be/syX5BiOwriY</a></figcaption></figure></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h2 id="5976" class="mc md iq bd me mf mg dn mh mi mj dp mk ko ml mm mn ks mo mp mq kw mr ms mt mu bi translated">介绍</h2><p id="7a62" class="pw-post-body-paragraph kd ke iq kf b kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la ij bi translated">假设你有一个<code class="fe na nb nc nd b">DummyClass</code>类，你想从这个类定义一个对象。你要做的是:</p><p id="b526" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe na nb nc nd b">obj = DummyClass()</code></p><p id="9298" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你知道场景之外发生了什么来创造这个物体吗？通常调用一组特殊的方法来创建这个对象。要了解更多，请继续阅读。</p><p id="21a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">目录</strong></p><ol class=""><li id="25e1" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la ne lh li lj bi translated"><a class="ae kc" href="#8233" rel="noopener ugc nofollow">什么是初始化和构造特殊方法？</a></li><li id="919d" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la ne lh li lj bi translated"><a class="ae kc" href="#927c" rel="noopener ugc nofollow">可用初始化和构造特殊方法</a></li><li id="a59d" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la ne lh li lj bi translated"><a class="ae kc" href="#feda" rel="noopener ugc nofollow">如何重写初始化和构造特殊方法？</a></li></ol></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h2 id="8233" class="mc md iq bd me mf mg dn mh mi mj dp mk ko ml mm mn ks mo mp mq kw mr ms mt mu bi translated">1.什么是初始化和构造特殊方法？</h2><p id="e37e" class="pw-post-body-paragraph kd ke iq kf b kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la ij bi translated"><strong class="kf ir">初始化和构造特殊方法</strong>是当你从你的类中实例化一个新对象或者当你想要删除那个对象时被调用的方法。</p><p id="42c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们的意思非常简单，这就是你所要知道的关于它们的定义。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h2 id="927c" class="mc md iq bd me mf mg dn mh mi mj dp mk ko ml mm mn ks mo mp mq kw mr ms mt mu bi translated">2.可用的初始化和构造特殊方法</h2><p id="6261" class="pw-post-body-paragraph kd ke iq kf b kg mv ki kj kk mw km kn ko mx kq kr ks my ku kv kw mz ky kz la ij bi translated">在 Python 中，有三种方法属于这种类型。为了理解这些方法，你必须想象在 Python 中创建一个对象是一个分两个阶段的过程，如下所示:</p><ul class=""><li id="15b6" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><strong class="kf ir">在第一阶段，</strong><code class="fe na nb nc nd b">__new__(cls, …)</code>方法被调用，一个新的对象将被创建，这个对象将没有任何属性。换句话说，<code class="fe na nb nc nd b">__new__()</code>负责创建 raw 对象。</li><li id="c82e" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><strong class="kf ir">在第二阶段，</strong>调用<code class="fe na nb nc nd b"><strong class="kf ir">_</strong>_init__(self, …)</code>方法。一旦创建了一个对象，这个对象将被传递给<code class="fe na nb nc nd b">__init__() </code>方法，这个方法被称为<strong class="kf ir">构造器方法</strong>。该方法负责将实例属性附加到对象上，并将初始值赋给这些实例属性。</li></ul><p id="7fa4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">简单地说，<code class="fe na nb nc nd b">__new__()</code>方法将创建并返回对象，而<code class="fe na nb nc nd b">__init__()</code>只是给实例属性赋予初始值。因此，它不返回任何内容。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><p id="4f14" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">前两种方法用于创建对象。对于删除对象，<code class="fe na nb nc nd b">__del__()</code> <strong class="kf ir"> </strong>方法被调用。这个方法被称为<strong class="kf ir">析构函数方法，</strong>，当一个对象被删除并且没有返回任何东西时，这个方法就会被调用。在这个方法中，您定义了当一个对象被删除时您想要做的行为。</p><p id="74ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通常，使用<code class="fe na nb nc nd b">del</code>命令手动删除一个对象，或者在当前进程结束时由垃圾收集器自动删除。</p><p id="2a16" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">注意</strong> : <code class="fe na nb nc nd b">__del__()</code>当你的对象与外部资源如数据库进行通信时，这个方法很有用。在这种情况下，当您想要删除该对象时，您必须在删除该对象之前清除所有资源/终止所有连接。</p><blockquote class="nf"><p id="9b72" class="ng nh iq bd ni nj nk nl nm nn no la dk translated">大多数情况下，你不会使用一个<strong class="ak"> __new__() </strong>方法，你会保留它而不覆盖它。</p></blockquote></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><h2 id="feda" class="mc md iq bd me mf mg dn mh mi mj dp mk ko ml mm mn ks mo mp mq kw mr ms mt mu bi translated">3.如何重写初始化和构造特殊方法？</h2><ul class=""><li id="a013" class="lb lc iq kf b kg mv kk mw ko np ks nq kw nr la lg lh li lj bi translated"><strong class="kf ir">覆盖</strong> <code class="fe na nb nc nd b">init<strong class="kf ir"> </strong></code> <strong class="kf ir">和</strong> <code class="fe na nb nc nd b">new<strong class="kf ir"> </strong></code> <strong class="kf ir">方法。</strong></li></ul><p id="9ef9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回到上一课已经定义的<code class="fe na nb nc nd b">Student class</code>，让我们覆盖这个类的<code class="fe na nb nc nd b">__init__()</code>方法和<code class="fe na nb nc nd b">__new__() </code>方法。然后从<code class="fe na nb nc nd b">Student class</code>中定义一个对象。</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="ns lu l"/></div></figure><p id="f874" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出:</p><pre class="lp lq lr ls gt nt nd nu nv aw nw bi"><span id="a206" class="mc md iq nd b gy nx ny l nz oa">Hi, I am NEW<br/>Hi, I am from the type :  &lt;class '__main__.Student'&gt;<br/>Hi I am init</span></pre><p id="e5b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以从这个输出中了解到在构造函数方法之前已经调用了<code class="fe na nb nc nd b">new</code>方法。该方法创建了一个 raw 对象，该对象被传递给附加了实例属性并初始化它们的<code class="fe na nb nc nd b">init</code>方法。</p><p id="cb7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">另外，您可以注意到,<code class="fe na nb nc nd b">new</code>方法可以访问您想要从中创建对象的类。所以写<code class="fe na nb nc nd b">print('Hi, I am from the type : ', cls)</code>就可以简单知道这个类的类型了</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><ul class=""><li id="098a" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><strong class="kf ir">覆盖 del 方法</strong></li></ul><p id="b90e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">假设您有一个用一些实例属性和方法包装文件的<code class="fe na nb nc nd b">FileResource</code>类。如果您想删除从该类创建的任何对象，您必须首先关闭该文件。为了实现这一点，您必须覆盖<code class="fe na nb nc nd b">__del__</code>方法。</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="ns lu l"/></div></figure><p id="0847" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们通过定义一个对象，向文件中写入一些东西，最后使用<code class="fe na nb nc nd b">del</code>关键字删除这个对象来尝试这个类。</p><pre class="lp lq lr ls gt nt nd nu nv aw nw bi"><span id="0d6b" class="mc md iq nd b gy nx ny l nz oa">fil = FileResource('dummy')<br/>fil.write()<br/>del fil</span></pre><p id="d7a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输出:</p><pre class="lp lq lr ls gt nt nd nu nv aw nw bi"><span id="5860" class="mc md iq nd b gy nx ny l nz oa">File has been deleted</span></pre><p id="d314" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以看到，当执行了<code class="fe na nb nc nd b">del</code>命令后，调用了<code class="fe na nb nc nd b">__del__</code>方法。因此，该文件在删除对象之前已经关闭。</p><p id="0363" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">酷吧？</strong></p><p id="6cde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，让我们总结一下你在这篇文章中学到了什么。</p></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/dfe3babda390356c9538b69c6f042deb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t6yn-tO25pzW0XWccuDG4A.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://www.pexels.com/@ann-h-45017/" rel="noopener ugc nofollow" target="_blank">安 H </a>在<a class="ae kc" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">像素</a>上拍摄</figcaption></figure><p id="89f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，您已经了解到:</p><ul class=""><li id="c4f6" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><strong class="kf ir">初始化和构造特殊方法</strong>是当你从你的类中实例化一个新对象或者当你删除那个对象时被调用的方法。</li><li id="a7fa" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">无论何时定义一个新对象，都会调用<code class="fe na nb nc nd b">__new__</code>来创建一个新的原始对象。</li><li id="1c3d" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">在<code class="fe na nb nc nd b">__new__</code>之后调用<code class="fe na nb nc nd b">__init__</code>来添加和初始化实例属性。</li><li id="295d" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><code class="fe na nb nc nd b">__del__</code>在手动或自动删除对象时调用。</li></ul></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><p id="51c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> <em class="oc">附言</em> </strong> <em class="oc">:万分感谢您花时间阅读我的故事。在你离开之前，让我快速地提两点</em></p><ul class=""><li id="06d5" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><em class="oc">首先，要想直接在你的收件箱里看到我的帖子，请在这里订阅</em><a class="ae kc" href="https://medium.com/@samersallam92/subscribe" rel="noopener"><strong class="kf ir"><em class="oc"/></strong></a><em class="oc">，你可以在这里关注我</em><a class="ae kc" href="https://medium.com/@samersallam92" rel="noopener"><strong class="kf ir"><em class="oc"/></strong></a><em class="oc">。</em></li><li id="b33e" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><em class="oc">第二，作家在媒介上制造了数以千计的</em><strong class="kf ir"><em class="oc">$</em></strong><em class="oc">。为了无限制地访问媒体故事并开始赚钱，</em> <a class="ae kc" href="https://medium.com/@samersallam92/membership" rel="noopener"> <strong class="kf ir"> <em class="oc">现在就注册成为媒体会员</em></strong></a><strong class="kf ir"><em class="oc"/></strong><em class="oc">其中</em> <strong class="kf ir"> <em class="oc"> </em> </strong> <em class="oc">每月只需花费 5 美元。通过此链接</em>   <em class="oc">报名</em> <a class="ae kc" href="https://medium.com/@samersallam92/membership" rel="noopener"> <strong class="kf ir"> <em class="oc">，可以直接支持我，不需要你额外付费。</em></strong></a></li></ul><div class="od oe gp gr of"><div role="button" tabindex="0" class="ab bv gv cb fp og oh bn oi jw ex"><div class="oj l"><div class="ab q"><div class="l di"><img alt="Samer Sallam" class="l de bw ok ol fe" src="../Images/7d756fa3da76843e747e5ecde71b84d0.png" width="20" height="20" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:40:40/1*4O9o5xxtyHdOvuDDgqPDiQ.jpeg"/><div class="fb bw l ok ol fc n aw fd"/></div><div class="hh l fo"><p class="bd b dl z fp fq fr fs ft fu fv fw dk translated">萨梅尔·萨拉姆</p></div></div><div class="oo op gw l"><h2 class="bd ir tt lb fp tu fr fs tv fu fw ip bi translated">Python 面向对象编程的完整教程</h2></div><div class="ab q"><div class="l fo"><a class="bd b be z bi tw au tx ty tz qi ua an eh ei ub uc ud el em eo de bk ep" href="https://medium.com/@samersallam92/list/the-complete-course-in-objectoriented-programming-in-python-7b54126a7f4e?source=post_page-----78b62305101--------------------------------" rel="noopener follow" target="_top">View list</a></div><div class="ue l fo"><span class="bd b dl z dk">24 stories</span></div></div></div><div class="pb dh pc fp ab pd fo di"><div class="di ot bv ou ov"><div class="dh l"><img alt="A magnifying glass with the Python logo and a set of objects and arrows connecting between them to indicate that everything in Python is an object" class="dh" src="../Images/ce97e46734c67f4f565df3877a88bd11.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*oEBVsGg3ZoemmQrO5XsEjg.png"/></div></div><div class="di ot bv ow ox oy"><div class="dh l"><img alt="A dummy image for better reading and navigation." class="dh" src="../Images/926249cc12e1f2c807e7711382599fb6.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*-3K07ESmZjOLyOJfQx79Og.jpeg"/></div></div><div class="di bv oz pa oy"><div class="dh l"><img alt="A dummy image for better reading and navigation." class="dh" src="../Images/2d5e5c2a38605b91a621b6b26d9ab546.png" width="194" height="194" loading="lazy" data-original-src="https://miro.medium.com/v2/resize:fill:388:388/1*v9F3xOiuKmEWZo37t0MuxQ.png"/></div></div></div></div></div></div><div class="ab cl lv lw hu lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ij ik il im in"><p id="498e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要回到上一篇文章，您可以使用以下链接:</p><p id="e2a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/introduction-to-special-methods-python-oop-complete-course-part-12-e5f8d5ebd79b">第 12 部分:特殊方法介绍</a></p><p id="ac77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要阅读下一篇文章，您可以使用以下链接:</p><p id="ca98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://levelup.gitconnected.com/operators-special-methods-python-oop-complete-course-part-14-b5acd58f1fdf" rel="noopener ugc nofollow" target="_blank">第 14 部分:操作员特殊方法</a></p><h2 id="2d4f" class="mc md iq bd me mf mg dn mh mi mj dp mk ko ml mm mn ks mo mp mq kw mr ms mt mu bi translated">资源:</h2><ul class=""><li id="c486" class="lb lc iq kf b kg mv kk mw ko np ks nq kw nr la lg lh li lj bi translated">GitHub <a class="ae kc" href="https://github.com/samersallam/The-Complete-Course-in-Object-Oriented-Programming-in-Python/tree/main/Initialization%20and%20Construction%20Special%20Methods" rel="noopener ugc nofollow" target="_blank">这里的<strong class="kf ir"/>这里的</a>。</li></ul></div></div>    
</body>
</html>