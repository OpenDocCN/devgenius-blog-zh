<html>
<head>
<title>Animate with the react-spring Library — useChain and Spring Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 react-spring 库制作动画——使用链和弹簧组件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/animate-with-the-react-spring-library-usechain-and-spring-component-df0dd6e44a47?source=collection_archive---------3-----------------------#2021-02-19">https://blog.devgenius.io/animate-with-the-react-spring-library-usechain-and-spring-component-df0dd6e44a47?source=collection_archive---------3-----------------------#2021-02-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/32dbeec22309ce78ffab624d64bfaa91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4Ue0rITuJLQ4v1Y_"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@mrstupachenko?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">斯拉夫·斯图帕琴科</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="b439" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了 react-spring 库，我们可以轻松地在 react 应用程序中渲染动画。</p><p id="dec8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何开始使用 react-spring。</p><h1 id="f931" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用链</h1><p id="4dc0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">钩子让我们一个接一个地渲染过渡。</p><p id="db9a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1ec7" class="mq lc iq mh b gy mr ms l mt mu">import React, { useRef, useState } from "react";<br/>import {<br/>  useTransition,<br/>  animated,<br/>  useChain,<br/>  useSpring,<br/>  useTrail<br/>} from "react-spring";</span><span id="0332" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [on, toggle] = useState(false);</span><span id="c71d" class="mq lc iq mh b gy mv ms l mt mu">  const springRef = useRef();<br/>  const spring = useSpring({<br/>    ref: springRef,<br/>    from: { opacity: 0.5 },<br/>    to: { opacity: on ? 1 : 0.5 },<br/>    config: { tension: 250 }<br/>  });</span><span id="1a1b" class="mq lc iq mh b gy mv ms l mt mu">  const trailRef = useRef();<br/>  const trail = useTrail(5, {<br/>    ref: trailRef,<br/>    from: { fontSize: "10px" },<br/>    to: { fontSize: on ? "35px" : "10px" }<br/>  });</span><span id="995e" class="mq lc iq mh b gy mv ms l mt mu">  useChain(on ? [springRef, trailRef] : [trailRef, springRef]);</span><span id="fd17" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div&gt;<br/>      {trail.map((animation, index) =&gt; (<br/>        &lt;animated.div style={{ ...animation, ...spring }} key={index}&gt;<br/>          Hello World<br/>        &lt;/animated.div&gt;<br/>      ))}</span><span id="0cc5" class="mq lc iq mh b gy mv ms l mt mu">      &lt;button onClick={() =&gt; toggle(!on)}&gt;toggle&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="727b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">动画切换“Hello World”文本的大小。</p><p id="dfe1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">toggle</code>函数创建<code class="fe me mf mg mh b">on</code>状态来切换<code class="fe me mf mg mh b">on</code>状态。</p><p id="c993" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">useRef</code>钩子创建一个 ref，用<code class="fe me mf mg mh b">useSpring</code>钩子创建一个过渡。</p><p id="1e26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">ref</code>属性设置为<code class="fe me mf mg mh b">springRef</code>，这样我们就可以在<code class="fe me mf mg mh b">useChain</code>钩子中使用它。</p><p id="3dfe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们使用<code class="fe me mf mg mh b">useTrail</code>来创建第二个过渡。</p><p id="e0cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们使用 th <code class="fe me mf mg mh b">useChain</code>钩子来创建两个结合在一起的动画。</p><p id="fb9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们的顺序取决于<code class="fe me mf mg mh b">on</code>状态的值。</p><p id="8441" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过调用<code class="fe me mf mg mh b">trail.map</code>方法来渲染 Hello World 文本，为动画的每个阶段应用样式。</p><p id="a5f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们单击“切换”时，我们会看到 Hello World 文本大小发生变化。</p><h1 id="7f8e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">渲染道具 API</h1><p id="e817" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">react-spring 库附带了一个渲染道具 API。</p><p id="9397" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使用它来创建动画，我们使用了<code class="fe me mf mg mh b">Spring</code>组件。</p><p id="5c11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d58a" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { Spring } from "react-spring/renderprops";</span><span id="8fdd" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Spring from={{ opacity: 0 }} to={{ opacity: 1 }}&gt;<br/>        {(props) =&gt; &lt;div style={props}&gt;hello&lt;/div&gt;}<br/>      &lt;/Spring&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="0d3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加<code class="fe me mf mg mh b">Spring</code>组件。</p><p id="dd93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们设置<code class="fe me mf mg mh b">from</code>道具来添加在动画开始时应用的样式。</p><p id="5c19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还添加了<code class="fe me mf mg mh b">to</code>道具来添加要在动画结尾应用的样式。</p><p id="f143" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在 render prop 中，我们传递一个函数，其中包含我们想要呈现的内容。</p><p id="9d73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">props</code>参数具有在动画的每个阶段应用的样式，所以我们将其传递给<code class="fe me mf mg mh b">style</code>道具来应用它们。</p><p id="3e65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过写下以下内容来激活数字:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e8ad" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { Spring } from "react-spring/renderprops";</span><span id="2294" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;Spring from={{ number: 0 }} to={{ number: 1 }}&gt;<br/>        {(props) =&gt; &lt;div&gt;{props.number}&lt;/div&gt;}<br/>      &lt;/Spring&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="5880" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">from</code>和<code class="fe me mf mg mh b">to</code>道具分别设置<code class="fe me mf mg mh b">number</code>在动画的开头和结尾显示。</p><p id="6d89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将数字从 0 到 1 动画化。</p><h1 id="3e11" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e566" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">useChain</code>钩子来链接动画。</p><p id="9a25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">Spring</code>组件来渲染动画。</p></div></div>    
</body>
</html>