<html>
<head>
<title>A Real time Example of JavaScript closure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript闭包的一个实时例子</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-real-time-example-of-javascript-closure-b10687d66e72?source=collection_archive---------8-----------------------#2020-07-12">https://blog.devgenius.io/a-real-time-example-of-javascript-closure-b10687d66e72?source=collection_archive---------8-----------------------#2020-07-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/e68f84b7f985e3177ba989ccf3dc18d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sjVMoxAWlAMQnI7R8JvEpQ@2x.jpeg"/></div></div></figure><p id="5ca3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">嘿！你过得怎么样？今天我要给大家讲一个结局故事。这很有趣，也很容易记住。我们都知道在JavaScript中，这是一个经常被问到的问题，什么是闭包？你能给出一个实时的例子吗？</strong></p><p id="7590" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上图中，你可以看到一位女士正在外面的手推车上买橘子。想象这是一个外部函数，橘子是一个变量。那位女士把那些橘子带回家。现在你认为她在内部功能。现在她想喝一杯橙汁。所以她切了几个橙子，把它压扁，然后倒进一个罐子里。在这个过程中，她返回了装在玻璃容器中的果汁。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kt"><img src="../Images/5a27aef58ae7b748edc538573a4cc365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ILa9DF9U0bJaZs6ciyV7tw@2x.jpeg"/></div></div></figure><blockquote class="ky kz la"><p id="ef28" class="jv jw lb jx b jy jz ka kb kc kd ke kf lc kh ki kj ld kl km kn le kp kq kr ks ig bi translated">永远记住闭包从词法范围捕获变量。</p></blockquote><p id="ce9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，如果我以编程方式编写整个过程，它会是什么样子？</p><p id="15a8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">函数buyOrange () {</p><p id="e502" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让水果=“橘子”；//词法范围</p><p id="8b50" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">函数prepareJuice() {</p><p id="6599" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">调试器</p><p id="771f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Console.log("来个壁球吧:"+水果+ "&amp;果汁好了")；//闭包</p><p id="c09d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi">}</p><p id="bdd6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">返回prepareJuice</p><p id="5fdc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi">}</p><p id="c036" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">const serveJuiceInAGlass = buy orange()；</p><p id="cef1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">serveJuiceInAGlass()；</p><p id="a840" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你在jsfiddle或codepen或其他任何地方运行这段代码，你可以在控制台上看到内部作用域闭包是buyOrange</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lf"><img src="../Images/af019b81bb8dfc9708252be164c8292c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rg2DYSR0t4jKEZZEJU7mOg@2x.jpeg"/></div></div></figure><blockquote class="ky kz la"><p id="606b" class="jv jw lb jx b jy jz ka kb kc kd ke kf lc kh ki kj ld kl km kn le kp kq kr ks ig bi translated">这不是很简单吗？</p></blockquote><p id="74b7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，如果有一个不同的场景，让我们看看它会如何表现。这一次，她的一个朋友突然出现，让她大吃一惊。她很高兴见到她的朋友。她礼貌地问她的朋友，你想喝点果汁吗？</p><p id="8550" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">她的朋友，当然！这次她想让她的朋友们为果汁选择一种口味。然后，她开始闲聊，几分钟后，她做了一个果汁，她的朋友选择，并为她服务。</p><p id="d4f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们创建函数。</p><p id="781a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">函数prepare juice(flavor){</p><p id="ef0d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">返回函数(){</p><p id="41a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">调试器</p><p id="5061" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">setTimeout(_ =&gt; console.log('做了一个$ { flavour }果汁！),1000)</p><p id="3b7e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi">}</p><p id="7e24" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi">}</p><p id="b412" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">const serveJuiceLater = prepare juice('西瓜')；</p><p id="6cf6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">serveJuiceLater()；</p><h2 id="211f" class="lg lh in bd li lj lk dn ll lm ln dp lo kg lp lq lr kk ls lt lu ko lv lw lx ly bi translated">此处关闭(准备果汁)</h2><blockquote class="ky kz la"><p id="e6fa" class="jv jw lb jx b jy jz ka kb kc kd ke kf lc kh ki kj ld kl km kn le kp kq kr ks ig bi translated">封闭优势</p></blockquote><ul class=""><li id="ab86" class="lz ma in jx b jy jz kc kd kg mb kk mc ko md ks me mf mg mh bi translated">范围不是在块级别，而是在函数级别</li><li id="e636" class="lz ma in jx b jy mi kc mj kg mk kk ml ko mm ks me mf mg mh bi translated">许多功能是事件驱动/异步的</li><li id="ab00" class="lz ma in jx b jy mi kc mj kg mk kk ml ko mm ks me mf mg mh bi translated">通过信息隐藏进行封装</li></ul><h2 id="5768" class="lg lh in bd li lj lk dn ll lm ln dp lo kg lp lq lr kk ls lt lu ko lv lw lx ly bi translated">要记住的事情</h2><p id="7110" class="pw-post-body-paragraph jv jw in jx b jy mn ka kb kc mo ke kf kg mp ki kj kk mq km kn ko mr kq kr ks ig bi translated">因为闭包可以访问外部函数中的变量，所以它们通常用于两件事:</p><ol class=""><li id="f9c4" class="lz ma in jx b jy jz kc kd kg mb kk mc ko md ks ms mf mg mh bi translated">来控制副作用</li><li id="9c13" class="lz ma in jx b jy mi kc mj kg mk kk ml ko mm ks ms mf mg mh bi translated">创建私有变量。</li></ol><p id="72e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您阅读我的文章。如果你喜欢这篇文章，请为它鼓掌。请随时过来问任何问题。为了结束，让我们干杯！</p></div></div>    
</body>
</html>