<html>
<head>
<title>jQuery Tips — Attribute Check, Break out of Each, and Form Submission</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">jQuery技巧——属性检查、分解和表单提交</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/jquery-tips-attribute-check-break-out-of-each-and-form-submission-7ff5132bbb68?source=collection_archive---------20-----------------------#2020-07-24">https://blog.devgenius.io/jquery-tips-attribute-check-break-out-of-each-and-form-submission-7ff5132bbb68?source=collection_archive---------20-----------------------#2020-07-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/55a8169289f7c1d8b9d95cf24916cf00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Qz0apJoMCz5XWyX"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@tdespins?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">程昕婷·德斯皮斯</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="68d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">尽管年代久远，jQuery仍然是操纵DOM的流行库。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些使用jQuery的技巧。</p><h1 id="e096" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">检查元素上是否有属性</h1><p id="8731" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用<code class="fe me mf mg mh b">attr</code>方法获得给定名称的属性来检查元素上是否有属性。</p><p id="c6c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7479" class="mq lc iq mh b gy mr ms l mt mu">const attr = $(this).attr('name');</span><span id="416e" class="mq lc iq mh b gy mv ms l mt mu">if (typeof attr !== 'undefined' &amp;&amp; attr !== false) {<br/>  // ...<br/>}</span></pre><p id="90c6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查在if语句中<code class="fe me mf mg mh b">attr</code>是否没有被定义，以及它是否不是<code class="fe me mf mg mh b">false</code>。</p><p id="3587" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">普通JavaScript也有<code class="fe me mf mg mh b">hasAttribute</code>方法。</p><p id="058b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f9eb" class="mq lc iq mh b gy mr ms l mt mu">this.hasAttribute("name")</span></pre><p id="eb7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中<code class="fe me mf mg mh b">this</code>是DOM元素对象。</p><h1 id="b93d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用jQuery预加载图像</h1><p id="8283" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了用jQuery预加载图像，我们可以创建图像元素，然后将<code class="fe me mf mg mh b">src</code>属性设置为图像的URL。</p><p id="e4a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="47b9" class="mq lc iq mh b gy mr ms l mt mu">const arrayOfImages = [<br/>  'http://placekitten.com/200/200',<br/>  'http://placekitten.com/201/201',<br/>  'http://placekitten.com/199/199'<br/>];</span><span id="f972" class="mq lc iq mh b gy mv ms l mt mu">$(arrayOfImages).forEach((a) =&gt; {<br/>  $('&lt;img/&gt;')[0].src = a;  <br/>});</span></pre><p id="2e0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们动态创建一个img元素，并将<code class="fe me mf mg mh b">src</code>属性设置为我们想要的URL。</p><p id="e71d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以使用<code class="fe me mf mg mh b">Image</code>构造函数来创建图像元素。</p><p id="1d4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="59fe" class="mq lc iq mh b gy mr ms l mt mu">const arrayOfImages = [<br/>  'http://placekitten.com/200/200',<br/>  'http://placekitten.com/201/201',<br/>  'http://placekitten.com/199/199'<br/>];<br/>$(arrayOfImages).each((a) =&gt; {<br/>  (new Image()).src = a;  <br/>});</span></pre><p id="7e8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回调中的<code class="fe me mf mg mh b">a</code>参数是URL。</p><h1 id="d118" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">用PHP实现jQuery Ajax POST请求</h1><p id="5d28" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将<code class="fe me mf mg mh b">ajax</code>方法用于我们想要发出请求的PHP脚本。</p><p id="4c22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5dc6" class="mq lc iq mh b gy mr ms l mt mu">const data = $('form').serialize();</span><span id="62f5" class="mq lc iq mh b gy mv ms l mt mu">$.ajax({<br/>  url: "test.php",<br/>  type: "post",<br/>  data,<br/>  success: (response) =&gt; {<br/>     //...<br/>  },<br/>  error: (jqXHR, textStatus, errorThrown) =&gt; {<br/>     console.log(textStatus, errorThrown);<br/>  }<br/>});</span></pre><p id="667d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们向<code class="fe me mf mg mh b">test.php</code>发出一个POST请求，首先用<code class="fe me mf mg mh b">serialize</code>方法序列化输入值，这样我们就可以发送这些值。</p><p id="9d27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以用一个对象调用<code class="fe me mf mg mh b">ajax</code>方法，该对象具有向其发出请求的URL。</p><p id="fc7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">type</code>是请求的类型。</p><p id="76ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">data</code>有数据。</p><p id="498f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">success</code>有请求成功处理程序。</p><p id="2167" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">error</code>有错误处理程序，当网络出错时调用。</p><p id="3bcc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想在submit上提交一个表单，我们可以在form元素上调用<code class="fe me mf mg mh b">submit</code>方法。</p><p id="7efa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在对<code class="fe me mf mg mh b">submit</code>的回调中，我们可以用同样的方式发出Ajax请求。</p><p id="ab2a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d666" class="mq lc iq mh b gy mr ms l mt mu">$("form").submit(function(event) {<br/>  event.preventDefault();<br/>  const data = $(this).serialize();</span><span id="0ca4" class="mq lc iq mh b gy mv ms l mt mu">  const ajaxRequest = $.ajax({<br/>    url: "test.php",<br/>    type: "post",<br/>    data<br/>  });<br/>  <br/>  ajaxRequest.done((response, textStatus, jqXHR) =&gt; {<br/>    alert('Submitted successfully');<br/>  });</span><span id="1336" class="mq lc iq mh b gy mv ms l mt mu">  ajaxRequest.fail(() =&gt; {<br/>    alert('There is error while submit');<br/>  });<br/>});</span></pre><p id="6d4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用回调来调用<code class="fe me mf mg mh b">submit</code>方法。</p><p id="f091" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回调代码从表单中获取值，然后发出Ajax请求。</p><p id="9fd1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们调用<code class="fe me mf mg mh b">event.preventDefault()</code>来阻止默认提交行为的数据提交。</p><p id="246e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过以下方式获得表单的值:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9e42" class="mq lc iq mh b gy mr ms l mt mu">const data = $(this).serialize();</span></pre><p id="6016" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">this</code>是表单元素。</p><p id="68b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们调用jQuery的<code class="fe me mf mg mh b">ajax</code>方法来请求提交表单值。</p><p id="272b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">url</code>、<code class="fe me mf mg mh b">type</code>和<code class="fe me mf mg mh b">data</code>属性相同。</p><p id="59fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用<code class="fe me mf mg mh b">done</code>方法监听结果，当它成功时得到响应。</p><p id="51d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用带有<code class="fe me mf mg mh b">responnse</code>参数的回调来获得响应。</p><p id="f599" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">textStatus</code>获取状态文本。</p><p id="2729" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">jqXHR</code>拥有XmlHttpRequest对象。</p><p id="fd1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有<code class="fe me mf mg mh b">fail</code>方法来监听任何故障。</p><p id="f6fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出现网络错误时会调用<code class="fe me mf mg mh b">fail</code>回调。</p><h1 id="4c24" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">如何跳出jQuery的每一个循环</h1><p id="2290" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过编写以下代码在回调中返回<code class="fe me mf mg mh b">false</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4ba3" class="mq lc iq mh b gy mr ms l mt mu">$.each(array, (index, value) =&gt; { <br/>  if(value === "bar") {<br/>    return false;<br/>  }<br/>});</span></pre><p id="b9df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">each</code>遍历一个数组。</p><p id="1a18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在回调中，我们获得了带有数组索引的<code class="fe me mf mg mh b">index</code>。</p><p id="9098" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">value</code>具有被迭代的条目的值。</p><p id="411b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们检查如果<code class="fe me mf mg mh b">value</code>是<code class="fe me mf mg mh b">'bar'</code>，那么我们返回<code class="fe me mf mg mh b">false</code>来结束循环。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/fc956442fd973c5c4a60a59ecfeabda6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*W1WbxazWtPSzUc8e"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">凯文·诺布尔在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="3216" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="823f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">attr</code>方法检查属性值。</p><p id="4abb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了预加载图像，我们可以创建图像元素并用图像URL设置它们的<code class="fe me mf mg mh b">src</code>属性。</p><p id="8799" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用Ajax通过序列化值来提交表单输入值，然后发出请求。</p><p id="14a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">return false</code>打破<code class="fe me mf mg mh b">each</code>循环。</p></div></div>    
</body>
</html>