<html>
<head>
<title>Ruby: Object Lifecycle (1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby:对象生命周期(1)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ruby-object-lifecycle-1-a29a62615b97?source=collection_archive---------2-----------------------#2020-12-17">https://blog.devgenius.io/ruby-object-lifecycle-1-a29a62615b97?source=collection_archive---------2-----------------------#2020-12-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/aa8287ad3895cf3db7100e0ba0d9c4ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Blz4Ut5_edy1u5ay"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@jasondeblooisphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰森·D</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="e8f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在通过 Skilled 进行了一次模拟技术面试后，我意识到我的基础编程知识中缺少了很多东西。我现在要开始把我目前知道的写出来，以后再回头看。首先是 Ruby 中的对象生命周期。开始时，我最大的困难之一是使用未定义变量的方法。这是可以解决的，一旦定义了，就可以供以后使用。</p><h1 id="d846" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">什么是课？</h1><p id="906b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在面向对象编程中，类本质上是一个带有数据的模板，数据包含信息和行为。在一个类中，我们可以实例化一个新的对象并赋予它属性。我们甚至可以用新的属性在一个类中实例化多个对象。</p><h1 id="d6ef" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">类别和对象</h1><p id="0d5b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Ruby 中的这几行代码允许我们创建一个新类:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="745c" class="mk kz in mg b gy ml mm l mn mo">class Videogame<br/>end </span></pre><p id="3e9f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在 Ruby 中创建一个新类实质上是为我们创建一个新的数据类型来添加属性。属性是我们为新类的给定示例提供的信息。这些属性可以写成这样:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="5b2b" class="mk kz in mg b gy ml mm l mn mo">class Videogame<br/> attr_accessor :name, :studio, :genre, :price<br/>end</span></pre><p id="253c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们可以看到视频游戏的属性包含名称、工作室、流派和平台。既然我们已经将这些信息告诉了 Ruby，那么我们就可以创建代表我们的视频游戏的单个实例的对象。我们想要创建一个新的视频游戏并存储该数据类型。我们已经定义了它将具有这些属性，所以现在我们可以为它创建一个新的对象。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="9370" class="mk kz in mg b gy ml mm l mn mo">class Videogame<br/>attr_accessor :name, :studio, :genre, :price<br/>end</span><span id="f45b" class="mk kz in mg b gy mp mm l mn mo">videogame1 = Videogame.new()<br/>videogame1.name = "Cyberpunk 2077"<br/>videogame1.studio = "CD Projekt Red"<br/>videogame1.genre = "RPG"<br/>videogame1.price = "$60"</span></pre><p id="d620" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个对象基本上是一个类的实例。所以现在 videogame1 对象在我们的程序中，我们可以通过给它信息来与之交互。如果您在控制台中输入对象及其属性，则可以看到以下信息。我们将在该类中创建一个具有新属性的附加对象，并接收我们输入的内容:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="fe87" class="mk kz in mg b gy ml mm l mn mo">class Videogame<br/>attr_accessor :name, :studio, :genre, :price<br/>end</span><span id="fd63" class="mk kz in mg b gy mp mm l mn mo">videogame1 = Videogame.new()<br/>videogame1.name = "Cyberpunk 2077"<br/>videogame1.studio = "CD Projekt Red"<br/>videogame1.genre = "RPG"<br/>videogame1.price = "$60"</span><span id="7828" class="mk kz in mg b gy mp mm l mn mo"># puts videogame1.name<br/># "Cyberpunk 2077"</span><span id="9741" class="mk kz in mg b gy mp mm l mn mo">videogame2 = Videogame.new()<br/>videogame2.name = "Sims 4"<br/>videogame2.studio = "Electronic Arts"<br/>videogame2.genre = "Sandbox"<br/>videogame1.price = "$60"</span><span id="1ad0" class="mk kz in mg b gy mp mm l mn mo"># puts videogame2.genre<br/># "Sandbox"</span></pre><p id="a79b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们可以使用 initialize 方法调用一个新对象。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="49eb" class="mk kz in mg b gy ml mm l mn mo">class Videogame<br/>attr_accessor :name, :studio, :genre, :price</span><span id="8aef" class="mk kz in mg b gy mp mm l mn mo"> def initialize(name, studio, genre)<br/>  @name = name<br/>  @studio = studio<br/>  @genre = genre<br/>  @platform = platform<br/> end</span><span id="c9c9" class="mk kz in mg b gy mp mm l mn mo">end </span><span id="a8cb" class="mk kz in mg b gy mp mm l mn mo">videogame1 = Videogame.new("Cyberpunk 2077", "CD Projekt Red", "RPG", "$60")</span></pre><p id="beff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这个例子中，我们告诉 Ruby 这些是用户将要传递参数的属性。属性可以是用户输入的任何东西，也可以在被调用时返回给我们。注意到与以前相比，videogame1 对象现在都在一行中了吗？</p><p id="7610" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们可以向我们的类添加一个新方法。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="7ddd" class="mk kz in mg b gy ml mm l mn mo">class Videogame<br/>attr_accessor :name, :studio, :genre</span><span id="b64f" class="mk kz in mg b gy mp mm l mn mo"> def initialize(name, studio, genre)<br/>  @name = name<br/>  @studio = studio<br/>  @genre = genre<br/> end</span><span id="6096" class="mk kz in mg b gy mp mm l mn mo"> def on_sale<br/>  # will return a boolean value<br/> end </span><span id="8072" class="mk kz in mg b gy mp mm l mn mo">end</span></pre><p id="413e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以定义什么将为我们的对象返回 true 或 false。比方说，如果一个视频游戏是一个 RPG，那么它将返回 true，如果不是，那么它就是 false。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="c8d9" class="mk kz in mg b gy ml mm l mn mo">class Videogame<br/>attr_accessor :name, :studio, :genre, :price</span><span id="9400" class="mk kz in mg b gy mp mm l mn mo"> def initialize(name, studio, genre, :price)<br/>  @name = name<br/>  @studio = studio<br/>  @genre = genre<br/>  @price = price<br/> end</span><span id="9726" class="mk kz in mg b gy mp mm l mn mo"> def rpg_game<br/>  if @genre == "rpg"<br/>    true <br/>  else <br/>    false <br/>  end <br/> end </span><span id="660c" class="mk kz in mg b gy mp mm l mn mo">end</span></pre><p id="fdf3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们在这里比较一个对象的属性，看看某个视频游戏是否是 RPG 类型。我们知道赛博朋克 2077 是一个 RPG，所以它将返回 true。然而，如果我们有另一个对象，比如 video game 3 . genre of“Sports ”,那么它将返回 false，因为它不是一个 RPG 游戏。</p><h1 id="dcf6" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">调试错误</h1><p id="bf44" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">让我们看看这个代码的例子，看看它有什么问题:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="60df" class="mk kz in mg b gy ml mm l mn mo">class Videogame<br/>attr_accessor :name, :studio, :genre, :price</span><span id="0f24" class="mk kz in mg b gy mp mm l mn mo"> def initialize(name, studio, genre, :price)<br/>  @name = name<br/>  @studio = studio<br/>  @genre = genre<br/>  @price = price<br/> end</span><span id="08f5" class="mk kz in mg b gy mp mm l mn mo"> def rpg_game<br/>  if @genre == "rpg"<br/>    true <br/>  else <br/>    false <br/>  end <br/> end</span><span id="102c" class="mk kz in mg b gy mp mm l mn mo"> def indie_game<br/>   if @studio == indie<br/>    true <br/>   else <br/>    false <br/>   end <br/> end </span><span id="91aa" class="mk kz in mg b gy mp mm l mn mo">end</span></pre><p id="d98d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们运行这段代码，它将返回一个错误，因为我们还没有定义一个方法，让 Ruby 能够理解一个工作室是独立的工作室还是公司运营的工作室。在过去，当制作这样的东西时，我会添加额外的属性来定义工作室是否独立运行。这样，如果我们使用“indie ”,那么它可以返回一个布尔值。否则，我们会遇到错误，因为它从未被定义过。</p><p id="f233" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我的下一篇文章中，我会写一些关于用 Ruby 进行面向对象编程的关键概念，以及一些避免像我这样的错误的方法。</p><p id="4319" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi">_____________________________________________________________</p><h1 id="ac34" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">社会联系</h1><p id="c89a" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated"><a class="ae jz" href="https://www.linkedin.com/in/shirlend" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a></p><p id="49ef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://www.github.com/Ro5hi" rel="noopener ugc nofollow" target="_blank"> GitHub </a></p><p id="4209" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://www.twitter.com/len_deta" rel="noopener ugc nofollow" target="_blank">推特</a></p><p id="fabd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://www.instagram.com/_sceptral_" rel="noopener ugc nofollow" target="_blank"> Instagram </a></p><p id="c9df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://www.youtube.com/channel/UC_0nik4oj1T1Q160XVr0ZlA?view_as=subscriber" rel="noopener ugc nofollow" target="_blank"> YouTube </a></p></div></div>    
</body>
</html>