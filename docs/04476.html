<html>
<head>
<title>Add Marker Icons onto Lines with the Visx Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Visx库将标记图标添加到线条上</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/add-markers-onto-lines-with-the-visx-library-25ac00e55191?source=collection_archive---------5-----------------------#2021-03-21">https://blog.devgenius.io/add-markers-onto-lines-with-the-visx-library-25ac00e55191?source=collection_archive---------5-----------------------#2021-03-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1d0226f2be01423d9ab62cefc734166c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hDfQzjfUTgJC4GIp"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@teo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Teo Zac </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="34cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Visx是一个库，让我们可以轻松地将图形添加到React应用程序中。</p><p id="ee07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用它在React应用程序中添加带有标记的线条。</p><h1 id="80db" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装所需的软件包</h1><p id="2968" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们必须安装一些模块。</p><p id="61e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="89df" class="mn lc iq mj b gy mo mp l mq mr">npm i @visx/curve @visx/glyph @visx/group @visx/mock-data @visx/responsive @visx/scale @visx/shape</span></pre><p id="8e2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装软件包。</p><h1 id="db97" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建带标记的线条</h1><p id="b2ff" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe ms mt mu mj b">@visx/glyph</code>模块添加标记来创建带有标记的线条。</p><p id="dfef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1185" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { Group } from "@visx/group";<br/>import {<br/>  Glyph as CustomGlyph,<br/>  GlyphCircle,<br/>  GlyphCross,<br/>  GlyphDiamond,<br/>  GlyphSquare,<br/>  GlyphStar,<br/>  GlyphTriangle,<br/>  GlyphWye<br/>} from "@visx/glyph";<br/>import { LinePath } from "@visx/shape";<br/>import genDateValue from "@visx/mock-data/lib/generators/genDateValue";<br/>import { scaleTime, scaleLinear } from "@visx/scale";<br/>import { curveMonotoneX, curveBasis } from "@visx/curve";</span><span id="1abc" class="mn lc iq mj b gy mv mp l mq mr">const defaultMargin = { top: 10, right: 10, bottom: 10, left: 10 };</span><span id="d45d" class="mn lc iq mj b gy mv mp l mq mr">export const primaryColor = "#8921e0";<br/>export const secondaryColor = "#00f2ff";<br/>const contrastColor = "#ffffff";</span><span id="785b" class="mn lc iq mj b gy mv mp l mq mr">const Glyphs = [<br/>  GlyphCircle,<br/>  GlyphCross,<br/>  GlyphDiamond,<br/>  GlyphStar,<br/>  GlyphTriangle,<br/>  GlyphSquare,<br/>  GlyphWye,<br/>  ({ left, top }) =&gt; (<br/>    &lt;CustomGlyph left={left} top={top}&gt;<br/>      &lt;circle r={12} fill={secondaryColor} /&gt;<br/>      &lt;text fontSize={16} textAnchor="middle" dy="0.5em"&gt;<br/>        {"💜"}<br/>      &lt;/text&gt;<br/>    &lt;/CustomGlyph&gt;<br/>  )<br/>];</span><span id="f4b5" class="mn lc iq mj b gy mv mp l mq mr">const data = genDateValue(Glyphs.length * 2);</span><span id="2dcc" class="mn lc iq mj b gy mv mp l mq mr">const date = (d) =&gt; d.date.valueOf();<br/>const value = (d) =&gt; d.value;</span><span id="0825" class="mn lc iq mj b gy mv mp l mq mr">const xScale = scaleTime({<br/>  domain: [Math.min(...data.map(date)), Math.max(...data.map(date))]<br/>});<br/>const yScale = scaleLinear({<br/>  domain: [0, Math.max(...data.map(value))]<br/>});</span><span id="eff8" class="mn lc iq mj b gy mv mp l mq mr">const getX = (d) =&gt; xScale(date(d)) ?? 0;<br/>const getY = (d) =&gt; yScale(value(d)) ?? 0;</span><span id="2634" class="mn lc iq mj b gy mv mp l mq mr">function Example({ width, height, margin = defaultMargin }) {<br/>  if (width &lt; 10) return null;<br/>  const innerWidth = width - margin.left - margin.right;<br/>  const innerHeight = height - margin.top - margin.bottom;<br/>  xScale.range([0, innerWidth]);<br/>  yScale.range([innerHeight, 0]);</span><span id="ed10" class="mn lc iq mj b gy mv mp l mq mr">return (<br/>    &lt;svg width={width} height={height}&gt;<br/>      &lt;rect<br/>        x={0}<br/>        y={0}<br/>        width={width}<br/>        height={height}<br/>        fill={secondaryColor}<br/>        rx={14}<br/>      /&gt;<br/>      &lt;Group left={margin.left} top={margin.top}&gt;<br/>        &lt;LinePath<br/>          data={data}<br/>          x={getX}<br/>          y={getY}<br/>          stroke={primaryColor}<br/>          strokeWidth={2}<br/>          strokeDasharray="2,2"<br/>          curve={curveBasis}<br/>        /&gt;<br/>        &lt;LinePath<br/>          data={data}<br/>          x={getX}<br/>          y={getY}<br/>          stroke={primaryColor}<br/>          strokeWidth={2}<br/>          curve={curveMonotoneX}<br/>        /&gt;<br/>        {data.map((d, i) =&gt; {<br/>          const CurrGlyph = Glyphs[i % Glyphs.length];<br/>          const left = getX(d);<br/>          const top = getY(d);<br/>          return (<br/>            &lt;g key={`line-glyph-${i}`}&gt;<br/>              &lt;CurrGlyph<br/>                left={left}<br/>                top={top}<br/>                size={110}<br/>                stroke={secondaryColor}<br/>                strokeWidth={10}<br/>              /&gt;<br/>              &lt;CurrGlyph<br/>                left={left}<br/>                top={top}<br/>                size={110}<br/>                fill={i % 2 === 0 ? primaryColor : contrastColor}<br/>                stroke={i % 2 === 0 ? contrastColor : primaryColor}<br/>                strokeWidth={2}<br/>              /&gt;<br/>            &lt;/g&gt;<br/>          );<br/>        })}<br/>      &lt;/Group&gt;<br/>    &lt;/svg&gt;<br/>  );<br/>}</span><span id="bba6" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Example width={500} height={300} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="260f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用变量<code class="fe ms mt mu mj b">defaultMargin</code>为图表添加边距。</p><p id="8a0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">primaryColor</code>、<code class="fe ms mt mu mj b">secondaryColor</code>有线条的颜色。</p><p id="d2cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">contrastColor</code>有背景色的标记。</p><p id="6633" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数组有图标和一个返回带有图标的自定义组件的函数。</p><p id="52d0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">CustomGlyph</code>使用<code class="fe ms mt mu mj b">left</code>和<code class="fe ms mt mu mj b">top</code>属性来设置它的位置。</p><p id="d053" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">data</code>有该行的数据。</p><p id="f2fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">date</code>和<code class="fe ms mt mu mj b">value</code>是返回给定条目的值的函数。</p><p id="a810" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">xScale</code>具有x轴的刻度。</p><p id="46f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe ms mt mu mj b">yScale</code>具有y轴的刻度。</p><p id="78ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Example</code>组件是我们将图表放在一起的地方。</p><p id="3c9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe ms mt mu mj b">innerWidth</code>和<code class="fe ms mt mu mj b">innerHeight</code>变量设置图表的宽度和高度。</p><p id="ed4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Group</code>组件环绕图表的各个部分。</p><p id="b559" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">LinePath</code>有线条为图形。</p><p id="f126" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传入<code class="fe ms mt mu mj b">getX</code>和<code class="fe ms mt mu mj b">getY</code>函数来将数据渲染为线条。</p><p id="3c23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个<code class="fe ms mt mu mj b">LinePath</code>渲染一条虚线。</p><p id="d6db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个渲染的是实线。</p><p id="c925" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe ms mt mu mj b">data.map</code>回调函数渲染标记。</p><p id="4b0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回<code class="fe ms mt mu mj b">CurrGlyph</code>组件来呈现我们的标记。</p><p id="8693" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们设置<code class="fe ms mt mu mj b">left</code>和<code class="fe ms mt mu mj b">top</code>道具来设定位置。</p><p id="ec3a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">CurrGlyph</code>是从<code class="fe ms mt mu mj b">Glyphs</code>数组中创建的，方法是让图标根据其索引进行渲染。</p><p id="5c59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们应该看到两条线，每一条都有标记。</p><h1 id="ee98" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="bb6f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Visx库在React应用程序中轻松创建带标记的线条。</p></div></div>    
</body>
</html>