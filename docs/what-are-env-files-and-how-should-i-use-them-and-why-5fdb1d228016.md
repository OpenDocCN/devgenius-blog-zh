# 什么是？env 文件以及我应该如何使用它们？为什么呢？

> 原文：<https://blog.devgenius.io/what-are-env-files-and-how-should-i-use-them-and-why-5fdb1d228016?source=collection_archive---------0----------------------->

在线部署 web 应用程序/项目时，您最不希望的就是泄露敏感信息，如一些身份验证令牌或 api 密钥等

这就引出了一个问题:**我如何保护我的程序需要的敏感数据？**

![](img/a0f344158bc685080ce4bbeedb0ae754.png)

现在要回答你的问题我们首先需要知道什么是 ***环境变量***

**环境变量**

像往常一样，我会引用维基百科的部分内容，然后告诉你你需要了解我们的背景

> 环境变量是一个动态命名的值，它可以影响计算机上正在运行的进程的行为方式

基本上，环境变量只是你的系统需要的一个常规变量，而不是一个程序……我会进一步解释

我们知道变量只是程序需要的一段数据，例如一个存储名字的变量，这样我们就可以用这个名字来称呼它，也就是说，程序本身只需要这个变量，不需要别的，只需要一个特定的程序

同时，顾名思义，环境变量是环境本身也就是你的操作系统所需要的！

你知道一个操作系统有一个巨大的 biggggg 库和它需要运行来维护系统的软件，这些程序经常需要一些关于系统本身的信息，它们肯定会改变某个系统程序的行为

**如何查看我的环境变量？(Linux)**

您知道可以在本地系统上查看当前的环境变量吗？举例来说，Linux 会跟踪一堆这样的文件，我们可以用命令`env`查看它们，要打印它们，我们只需使用`echo`后跟一个＄[ VARIABLE ],因此要打印当前的 shell，只需键入`echo $SHELL`

请注意命名约定，您需要使用大写字母作为环境变量

**如何添加自己的环境变量？**

所以你一定很想知道如何添加自己的环境变量，以防在你的 bash 脚本或任何东西中需要它们，这相当简单，你需要做的就是使用下面格式的`set`命令`export NAME=VALUE` ，例如`export MEOW=simba`

为了查看它们，我们像前面一样使用`echo`命令，请注意，您以这种方式设置的那些变量将只存在于当前用户会话中，换句话说，一旦您关闭终端并再次启动它，它们就会消失

**杰夫泄露了他的 API 密钥**😱

让我们假设 Jeff 刚刚使用 node.js 构建了一个最恶心的不和谐机器人来告诉天气，他很兴奋地在他的 github 上展示它

但是几个小时后……这个机器人没有返回它应该返回的当前天气，嗯，很奇怪，不是吗？Jeff 访问 api 提供商网站，查看他的控制面板，看他使用了多少每日配额……..它不见了，但这是怎么发生的呢

当 Jeff 将项目部署到他的 Github repo 时，他忘记隐藏他的天气 api 密钥，api 密钥用于验证用户并确保他们不会过多地使用资源，因此 Jeff 允许任何查看代码的人看到他的 api 密钥并在他们自己的应用程序中使用它，最终滥用密钥并使 Jeff 无法进行日常使用

我们怎样才能不像杰夫那样结束自己

相信我，你不想像 Jeff 一样，你必须保护你的 api 密钥或身份验证令牌或任何只应由你使用的身份验证信息，那么我们如何做到这一点？

在本例中，我们将假设我们正在构建某个 node.js 应用程序，因为您无法在前端真正隐藏您的凭据，只需检查网络选项卡，您就可以看到请求标头，然后你就完蛋了

创建一个名为`.env`的文件，是的，只是一个没有文件名的扩展名，我们将添加我们的超级密钥

```
API_KEY="SUPER SECRET API KEY"
CONSUMER_KEY="some other stuff here"
OTHER_VERY_SECRET_TOKEN="blah blah"
```

**我们如何访问这些变量**

好吧，我们的钥匙藏起来了，我们该怎么办？在 node 中，我们将安装一个名为`dotenv`的包，然后点击`npm i dotenv`，现在在你的脚本中，你可以像这样使用`process.env`来访问密钥

```
require('dotenv').config();let api_key = process.env.API_KWY;// OR YOU COULD ACCESS THEM AS AN ARRAYlet api_key = process.env['API_KEY']
```

就像这样，你可以在你的脚本中安全地使用你的凭证，但是在我们实际上可以在线共享它之前需要一个额外的安全层——例如，在 github 上作为一个完整的项目共享它的情况下

**。GITIGNORE 文件**

现在，当我们通常共享一个项目时，比如说一个 react 应用程序，我们需要让人们能够克隆回购并开始本地开发，对吗？正如我们上面提到的，环境变量对我们的程序至关重要，因为它们只是引用我们的数据的一种安全方式，所以现在你可能会问自己……如果我将整个项目共享给我的 Github，这难道不会暴露我的凭证吗，因为我实际上也在共享`.env`文件？

`.gitignore` file 是一个我们用来*忽略*文件和目录的文件，这些文件和目录被包含在我们的版本控制中，也就是被推送到我们在 Github 上的 repo 中，所以让我们创建一个文件来忽略我们的`.env`文件，并享受在 Github 上共享病态的 discord bot，而不损害我们的 api 密钥和东西

创建一个`.gitignore`文件，添加这一行`.env`，就这样🎉你现在已经成功保护了你的应用，你应该始终使用此工作流

**快速回顾一下**

*   环境变量是正常的变量，除非它们存在并被我们的系统使用
*   我们可以在程序中创建自己的环境变量，以避免硬编码敏感信息和损害我们的应用程序
*   文件用于存储这些变量，为了命名约定，它们应该全部大写，用下划线分隔
*   在安装了`dotnev` npm 包之后，我们通过`process.env`访问这些变量
*   当我们使用版本控制在 Github 上共享时，我们使用`.gitignore`文件来避免将我们的`.env`文件推到我们的回购协议中

**非常感谢您的阅读，请确保关注更多酷酷的博客，祝您在♥️度过愉快的一天/一夜**