<html>
<head>
<title>No Need Of Null Checks Anymore In Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Typescript中不再需要空检查</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/no-need-of-null-checks-anymore-in-typescript-226d1604eea6?source=collection_archive---------2-----------------------#2020-09-22">https://blog.devgenius.io/no-need-of-null-checks-anymore-in-typescript-226d1604eea6?source=collection_archive---------2-----------------------#2020-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1786031a92c6acf074be8fc960d1cee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YKTTODerwlj7pEQrQGgVxA.jpeg"/></div></div></figure><p id="5743" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在与Angular合作的某个时候，我们喜欢安全导航，也就是猫王操作员(？。)在角模板中。因为这有助于我们在使用对象时忘记额外的空检查，而只是使用那个操作符来为我们处理同样的事情。让我们看一个非常基本的代码片段，这个操作符是如何在角度模板中使用的。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="d2dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的例子中，只有当person对象不为null时，我们才使用带有person对象的操作符来检查名称是否存在。如果没有这个操作符，还需要检查person对象是否不为空。</p><p id="6f08" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这对于开发人员来说是一个令人兴奋的特性，因为它易于使用，并且有助于避免到处都有空检查。这个操作符已经成为许多新的流行语言的一部分，比如Kotlin。许多人要求同样的打字稿。</p><p id="ce4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">虽然你可以通过下面的代码来实现。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="0f58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">仍然感觉不太好，就像使用猫王运营商。并且在长时间的情况下，代码变得不太可读。</p><p id="0090" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因为typescript是JavaScript的超级集合，并且支持ECMAScript即将推出的特性。3.7版的Typescript附带了以下操作符，该操作符具有一个名为可选链接的特性。</p><p id="9850" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设您想将用户名分配给一个属性。早些时候，它可能是这样的:-</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="91a4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是在Typescript v3.7中，您可以像下面这样简单地使用它</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="a379" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上面的<strong class="ka ir"> validateUser </strong>方法现在可以修改如下。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="a955" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可能会发现自己在使用Elvis操作符来替换大量执行无效检查的代码。</p><p id="09ac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">同一个操作符现在可以用于元素访问和可选调用。让我们一个一个看他们的例子。</p><ol class=""><li id="8379" class="lc ld iq ka b kb kc kf kg kj le kn lf kr lg kv lh li lj lk bi translated"><strong class="ka ir">元素访问</strong></li></ol><p id="6bcd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设你想访问数组的任何索引，如果数组不是未定义的，那么你现在可以直接拥有它，如下所示。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="6b88" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.<strong class="ka ir">随意调用</strong></p><p id="fe0a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设您有一个接受回调函数作为参数的方法。但是这个参数是可选的，但是如果这个参数存在，那么我们想从我们的方法中调用回调函数。现在可以像下面这样做。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="ca6e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以现在callbackFunc只有在传递给getValue时才会被调用，我们甚至没有执行任何空值检查。</p><blockquote class="ll lm ln"><p id="417a" class="jy jz lo ka b kb kc kd ke kf kg kh ki lp kk kl km lq ko kp kq lr ks kt ku kv ij bi translated">但是这个操作符给了我们在访问属性或调用方法时不使用空检查的灵活性。需要正确决定在哪里不使用该运算符。</p></blockquote><p id="1d23" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在某些情况下使用它时，我们必须非常小心。例如，假设您正在执行加法，并且您有一个方法来添加两个用户的年龄。假设您有如下代码。</p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="f851" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">假设secondUser的值是未定义的，firstUser的年龄是24岁。elvis操作员将不会停止加法，并且输出将为<strong class="ka ir"> NaN </strong>，因为将有24和未定义的加法。</p><p id="9b11" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，当在表达式中使用时，我们需要小心避免意外的结果。但是在条件语句或属性/方法访问中，它确实有助于避免不必要的空检查。</p><p id="fd9c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">希望您喜欢这个新的操作符，并且拥有更健壮和空安全的代码，而不需要不必要的空检查。</p><p id="61c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">没有更多的错误值得称赞，如:-</p><blockquote class="ll lm ln"><p id="648e" class="jy jz lo ka b kb kc kd ke kf kg kh ki lp kk kl km lq ko kp kq lr ks kt ku kv ij bi translated">无法读取未定义的属性名</p></blockquote></div></div>    
</body>
</html>