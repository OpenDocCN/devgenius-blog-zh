<html>
<head>
<title>Write and Measure Efficient Functions in JavaScript: Saving You Time and Money</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript编写和测量高效函数:节省您的时间和金钱</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/write-and-measure-efficient-functions-in-javascript-saving-you-time-and-money-48c5a9666146?source=collection_archive---------9-----------------------#2020-06-05">https://blog.devgenius.io/write-and-measure-efficient-functions-in-javascript-saving-you-time-and-money-48c5a9666146?source=collection_archive---------9-----------------------#2020-06-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1d23c716f8e74f460524df0f654efc1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X3ZL1YjPMN82MYh6"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">卡尔·海尔达尔在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="aa2b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以一种可以工作的方式编写代码是一回事，但是让它以最有效的方式工作是另一回事。</p><p id="b649" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我的职业生涯中，最让我沮丧的一点是，组织的流程效率低下，并且缺乏工具来更好地完成工作。吸引我从事软件工程的一件事是构建可以自动化琐碎任务的东西，这样人们就可以专注于真正重要的工作<em class="ky"/>。</p><p id="ddfc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">今天，我决定仔细研究几个JavaScript函数，以及一个效率较低的函数如何与一个效率更高的方法进行比较。</p><h1 id="fd06" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">排序数组算法</h1><p id="bc52" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">无论是在图书馆整理书籍，在数据库中组织联系人，还是准备财务报告，我们都必须对事物进行排序，以便更容易找到、计算、查看和做出决策。</p><p id="2005" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你有一个这样的数组:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/9fa5e7813a979550ef735bcdd3bb21e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*zubuGZvrCKipr3lN7K0DNQ.png"/></div></div></figure><p id="7cd4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您需要对元素进行排序，如下所示:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/63bfd4fd9daa167363e12ff76702684c.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*lfcEKZSyk_uiTGg3bliMFA.png"/></div></figure><p id="387e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">忽略了我们可以使用<strong class="kc io">。sort() </strong>在这里，如果我们想写出一个函数来完成这个任务，我们可以考虑将这个函数写成一个<a class="ae jz" href="https://en.wikipedia.org/wiki/Selection_sort" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">选择排序</strong> </a>或<a class="ae jz" href="https://en.wikipedia.org/wiki/Insertion_sort" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">插入排序</strong> </a>。</p><p id="5a70" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请参见下面的gif，了解两种排序算法选项的可视化效果。</p><p id="790b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一个是我们所说的<strong class="kc io">选择排序</strong>。对于集合中的每一项，在数组的未排序部分找到最小的项，并将其与当前项交换。</p><p id="9bc1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二个是我们所说的<strong class="kc io">插入排序</strong>。对于集合中的每一项，我们检查前一项是否大于当前项。如果大于，则当前项不在原位:将其与前一项交换。然后重复这个过程，直到该项目在适当的位置。然后才移动到集合中的下一个项目。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/010e0eeff15a4f023c43befe0ac9af09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*h7oEzHw7g4NuB81dZaJA_g.gif"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来源:熨斗学校</figcaption></figure><p id="7128" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面是<strong class="kc io">插入排序</strong>函数的样子:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/0dc45e2c8839c33498daeb0fbd87075f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tyeZfSa-q7pAWCStuw1Seg.png"/></div></div></figure><p id="4e64" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是<strong class="kc io">选择排序</strong>函数的样子:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/351d3de841b696a43c8d9bb2a1bd1fa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*YeuM3YpFGp27QAIK5914eg.png"/></div></figure><p id="68e8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这两个函数可能看起来非常相似，但最终结果很重要——特别是对于较大的数据集、更复杂的算法以及重复数千或数百万次的情况。</p><p id="320c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">完成各自的排序算法后，结果如下:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/46bd0d4e4bac59b1e365270ad67fa897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wcl0CSiYzEFXUjIZGA73sA.png"/></div></div></figure><p id="274f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">把这些数字放大一点，我们可以看到选择排序多花了381步，比插入排序多了65%。然而，尽管插入排序的读取步骤要少得多，但它的写入步骤几乎是插入排序的四倍。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/9052e79f95646ca751656ec205d59528.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*Xq-KtPnxUNrfcPuFRoilzw.png"/></div></figure><p id="ed11" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们假设写和读花费相同的时间和精力，我们可以得出结论，插入排序在这里是更有效的选择。然而，如果写作实际上比阅读花费更多的时间，那么它可能是一个更接近的匹配。</p><p id="a1ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你一直看gif直到最后，你会看到插入排序确实首先结束，但是不是很多。</p><h1 id="2050" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">我们如何确认每个的执行时间？</h1><p id="971e" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">虽然有许多方法可以做到这一点，但我发现一种快速有效的方法是记录函数执行前后的时间，并使用这两个时间之间的差异来估计函数完成的速度。</p><p id="1f5f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">很简单，对吧？代码如下:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/8cc41b57dc46b8d8916a93ae3492790f.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*aPpLTSrf0Eq_Ndca5HaOcw.png"/></div></figure><p id="4ceb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我在Repl.it中运行了这两个函数，结果如下。同样，插入排序仍然更快，但只比T2快了几毫秒。</p><p id="833d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">乘以数千或数百万个运行周期，再考虑到更大的数据集，时间会越来越长。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/8d11b6bccea0285d7faaa11e628a91c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aw1r9plNA8Pqx4zNTO4_2Q.png"/></div></div></figure><h2 id="9069" class="mp la in bd lb mq mr dn lf ms mt dp lj kl mu mv ln kp mw mx lr kt my mz lv na bi translated"><strong class="ak">重要提示:</strong></h2><ul class=""><li id="5678" class="nb nc in kc b kd lx kh ly kl nd kp ne kt nf kx ng nh ni nj bi translated"><strong class="kc io">选择排序</strong>可能在较小的数据集上工作得更快，但是随着数据集变大，插入排序会更有效。</li><li id="8d74" class="nb nc in kc b kd nk kh nl kl nm kp nn kt no kx ng nh ni nj bi translated">这只是<strong class="kc io"> <em class="ky">的一个例子</em> </strong>你可以快速检查两个函数之间的执行次数。<strong class="kc io">每次运行的执行时间结果会有所不同。</strong>为了更准确地估计执行时间，您需要运行多次，然后取这些运行的平均值。</li></ul><h1 id="8345" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">为什么这很重要？</h1><ul class=""><li id="f211" class="nb nc in kc b kd lx kh ly kl nd kp ne kt nf kx ng nh ni nj bi translated">对于网站和移动应用程序，缓慢的加载时间会导致<strong class="kc io">客户流失</strong>、<strong class="kc io">注意力分散</strong>、以及<strong class="kc io">糟糕的用户体验</strong>。</li><li id="5bfb" class="nb nc in kc b kd nk kh nl kl nm kp nn kt no kx ng nh ni nj bi translated">对于雇主来说，低效的流程会导致<strong class="kc io">工资分配的浪费</strong>，<strong class="kc io">周转时间的缓慢</strong>，以及<strong class="kc io">注意力从更重要的任务上转移</strong></li><li id="4aef" class="nb nc in kc b kd nk kh nl kl nm kp nn kt no kx ng nh ni nj bi translated">对于产品制造商来说，缓慢的流程会导致<strong class="kc io">生产瓶颈</strong>和<strong class="kc io">更高的单位成本</strong></li></ul><h1 id="f5e1" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">你可以改进哪些职能或流程？</h1><p id="4710" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">这是分析一个非常简单的JavaScript函数的一个小例子。你认为还有哪些功能得到了改进？在职场上呢？有没有你希望自动化或更快完成的琐碎任务？</p></div></div>    
</body>
</html>