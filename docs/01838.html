<html>
<head>
<title>An Introduction to the ETCD Datastore in Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes中的ETCD数据存储简介</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/an-introduction-to-the-etcd-datastore-in-kubernetes-63507d284ff6?source=collection_archive---------45-----------------------#2020-07-12">https://blog.devgenius.io/an-introduction-to-the-etcd-datastore-in-kubernetes-63507d284ff6?source=collection_archive---------45-----------------------#2020-07-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="290b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章的结尾，你会看到:</p><ul class=""><li id="21b0" class="kl km iq jp b jq jr ju jv jy kn kc ko kg kp kk kq kr ks kt bi translated">了解库伯内特斯的ETCD服务。</li><li id="ec61" class="kl km iq jp b jq ku ju kv jy kw kc kx kg ky kk kq kr ks kt bi translated">安装了ETCD服务。</li></ul><p id="bb2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将从什么是键值存储以及它与传统数据库有何不同的基本介绍开始。稍后我们讨论如何快速上手ETCD以及如何使用客户端工具进行操作。</p><h1 id="cb13" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">那么……ETCD是什么？</h1><figure class="ly lz ma mb gt mc gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/7178494420210895143e1b83dd0f8045.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*cZ_vtMicZGrt1btGKvnY_w.jpeg"/></div></figure><p id="9802" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它是一个简单、安全、快速的分布式可靠的键值存储。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="9986" class="kz la iq bd lb lc mm le lf lg mn li lj lk mo lm ln lo mp lq lr ls mq lu lv lw bi translated">什么是键值存储？</h1><p id="3f35" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">传统上，数据库以表格格式表示。您一定听说过SQL或关系数据库。它们以行和列的形式存储数据。例如，这里有一个表，存储了一些个人的信息。行代表每个人，列代表存储的信息类型。</p><p id="4695" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个键都引用一个特定的值。在本例中，每个键都引用保存在数据库中的person对象中的一个字段。</p><p id="9792" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后使用这个键以快速的方式从数据库中检索数据。您不能有重复的密钥。因此，它不能替代常规的表格数据库。相反，它用于存储和检索小块数据，如需要快速读写的配置数据。</p><h1 id="d7df" class="kz la iq bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">安装ETCD</h1><p id="31f8" class="pw-post-body-paragraph jn jo iq jp b jq mr js jt ju ms jw jx jy mt ka kb kc mu ke kf kg mv ki kj kk ij bi translated">安装和开始使用ETCD很容易。</p><pre class="ly lz ma mb gt mw mx my mz aw na bi"><span id="9910" class="nb la iq mx b gy nc nd l ne nf">curl -L https://github.com/etcd-io/etcd/releases/download/${ETCD_VER}/etcd-${ETCD_VER}-darwin-amd64.zip -o /tmp/etcd-${ETCD_VER}-darwin-amd64.zip unzip /tmp/etcd-${ETCD_VER}-darwin-amd64.zip -d /tmp &amp;&amp; rm -f /tmp/etcd-${ETCD_VER}-darwin-amd64.zip mv /tmp/etcd-${ETCD_VER}-darwin-amd64/* /tmp/etcd-download-test &amp;&amp; rm -rf mv /tmp/etcd-${ETCD_VER}-darwin-amd64</span></pre><p id="6ab1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保替换下载url以及etcd版本:</p><pre class="ly lz ma mb gt mw mx my mz aw na bi"><span id="bae8" class="nb la iq mx b gy nc nd l ne nf">curl -L https://github.com/etcd-io/etcd/releases/download/v3.3.11/etcd-v3.3.11-darwin-amd64.zip -o /tmp/etcd-v3.3.11-darwin-amd64.zip unzip /tmp/etcd-v3.3.11-darwin-amd64.zip -d /tmp &amp;&amp; rm -f /tmp/etcd-v3.3.11-darwin-amd64.zip mv /tmp/etcd-v3.3.11-darwin-amd64/* /tmp/etcd-download-test &amp;&amp; rm -rf mv /tmp/etcd-v3.3.11-darwin-amd64</span><span id="d636" class="nb la iq mx b gy ng nd l ne nf">tar xzvf etcd-v3.3.11-linux-amd64.tar.gz</span></pre><p id="4266" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有关安装的更多信息，请访问<a class="ae nh" href="https://github.com/etcd-io/etcd/releases" rel="noopener ugc nofollow" target="_blank">完整的安装指南</a></p><p id="bf8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当您运行ETCD时，它会启动一个默认监听端口2379的服务。</p><p id="0d12" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，您可以将任何客户端连接到ETCD服务来存储和检索信息。默认情况下，ETCD附带的客户端是ETCD控制客户端，这是一个命令行客户端，您可以使用它来存储和检索键值对。</p><p id="3f52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要存储键值对，请运行:</p><pre class="ly lz ma mb gt mw mx my mz aw na bi"><span id="b564" class="nb la iq mx b gy nc nd l ne nf">./etcdctl set key1 value1</span></pre><p id="9788" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将在数据库中创建一个包含该信息的条目。</p><p id="dd14" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要检索存储的数据，请运行:</p><pre class="ly lz ma mb gt mw mx my mz aw na bi"><span id="91fa" class="nb la iq mx b gy nc nd l ne nf">./etcdctl get key1</span></pre><p id="5f63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要查看更多命令选项，请运行:</p><p id="9462" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是对ETCD的快速介绍。</p><p id="5100" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本系列的后面，我们将讨论更多关于在高可用性设置中配置ETCD客户的信息，以及相关的最佳实践。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="3121" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="ni">最初发表于</em><a class="ae nh" href="https://gist.github.com/luisalfonsopreciado/0ef45e3f632010627f96268485b6e055" rel="noopener ugc nofollow" target="_blank">T5【http://github.com】</a><em class="ni">。</em></p></div></div>    
</body>
</html>