<html>
<head>
<title>Vue Tips — DOM Elements, Vue Router, and Dynamic Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue 提示— DOM 元素、Vue 路由器和动态组件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vue-tips-dom-elements-vue-router-and-dynamic-components-7a3c0d76149f?source=collection_archive---------17-----------------------#2020-07-29">https://blog.devgenius.io/vue-tips-dom-elements-vue-router-and-dynamic-components-7a3c0d76149f?source=collection_archive---------17-----------------------#2020-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/881b9fe0458299cabafd12fc58dcc7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n-ytmyEURVjXBayc"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@bk010397?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">巴拉蒂·坎南</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="b69e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue.js 是一个用于创建前端 web 应用程序的流行框架。</p><p id="f2a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些编写更好的 Vue.js 应用程序的技巧。</p><h1 id="9daa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 Vue 路由器在新标签中打开链接</h1><p id="65e0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用 Vue 路由器在一个新标签中打开一个链接。</p><p id="f9a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6beb" class="mn lc iq mj b gy mo mp l mq mr">const routeData = this.$router.resolve({ name: 'foo', query: { data: "bar" }});<br/>window.open(routeData.href, '_blank');</span></pre><p id="ae33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe ms mt mu mj b">this.$router.resolve</code>方法来获取要打开的 URL。</p><p id="35fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe ms mt mu mj b">window.open</code>来打开给定的 URL。</p><p id="d131" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数是 URL。</p><p id="8a75" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">'_blank'</code>表示我们在新的标签页中打开网址。</p><h1 id="57ec" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 HTTPS 运行 Vue.js 开发服务器</h1><p id="f4a2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以更改 Vue dev 服务器的配置，通过 HTTPS 而不是 HTTP 来服务项目。</p><p id="4be9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们读取私钥和证书。</p><p id="fb2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们设置 URL 来服务这个项目。</p><p id="c3d4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="524c" class="mn lc iq mj b gy mo mp l mq mr">const fs = require('fs')</span><span id="766a" class="mn lc iq mj b gy mv mp l mq mr">module.exports = {<br/>  devServer: {<br/>    https: {<br/>      key: fs.readFileSync('./certs/key.pem'),<br/>      cert: fs.readFileSync('./certs/cert.pem'),<br/>    },<br/>    public: 'https://localhost:8888/'<br/>  }<br/>}</span></pre><p id="75d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们读入文件，并将它们设置为<code class="fe ms mt mu mj b">https</code>属性的属性。</p><p id="aff5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要制作证书，我们可以使用<code class="fe ms mt mu mj b">mkcert</code>程序来完成。</p><p id="4428" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以按照<a class="ae kc" href="https://github.com/FiloSottile/mkcert" rel="noopener ugc nofollow" target="_blank">https://github.com/FiloSottile/mkcert</a>上的说明在 Windows、Mac OS 或 Linux 上安装它。</p><p id="fabb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过运行以下命令来创建新的密钥和证书:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fc45" class="mn lc iq mj b gy mo mp l mq mr">mkcert -install</span></pre><p id="6b43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a1e3" class="mn lc iq mj b gy mo mp l mq mr">mkcert example.com "*.example.com" example.test localhost 127.0.0.1 ::1</span></pre><p id="390c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们创建了一个对本地主机有效的证书。</p><p id="c1f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需将文件复制到<code class="fe ms mt mu mj b">cert</code>文件夹中，并重命名它们，以匹配我们在配置中的内容。</p><p id="096b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们就可以运行<code class="fe ms mt mu mj b">npm run dev</code>，为项目服务了。</p><h1 id="e625" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">重新运行 Vue 组件装载()方法</h1><p id="a5ba" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了重新运行我们在<code class="fe ms mt mu mj b">mounted</code>方法中编写的代码，我们可以将代码移动到它自己的方法中。</p><p id="b698" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在<code class="fe ms mt mu mj b">mounted</code>或其他任何地方调用它。</p><p id="8264" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2579" class="mn lc iq mj b gy mo mp l mq mr">new Vue({<br/>  methods: {<br/>    init(){<br/>      //...<br/>    }<br/>  },<br/>  mounted(){<br/>    this.init();<br/>  }<br/>})</span></pre><p id="e965" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="98dc" class="mn lc iq mj b gy mo mp l mq mr">&lt;button @click="init"&gt;reset&lt;/button&gt;</span></pre><p id="1d9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe ms mt mu mj b">init</code>方法设置为点击处理程序，并在<code class="fe ms mt mu mj b">mounted</code>钩子中运行它。</p><p id="f220" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以随心所欲地重复使用它。</p><h1 id="4ac1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用 Vue 触发事件</h1><p id="6ef7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在元素上设置一个 ref，然后在元素上触发事件。</p><p id="658c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f92e" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;button type="button" @click="onClick" ref="aButton"&gt;<br/>    click me<br/>  &lt;/button&gt;<br/>&lt;/template&gt;</span><span id="16d4" class="mn lc iq mj b gy mv mp l mq mr">&lt;script&gt;<br/>export default {<br/>  methods: {<br/>    onClick($event) {<br/>      const elem = this.$refs.aButton.$el;<br/>      elem.click();<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="47a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个指定了引用的按钮。</p><p id="381d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在<code class="fe ms mt mu mj b">onClick</code>方法中得到按钮的 ref 元素。</p><p id="5686" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它返回按钮的 DOM 节点。</p><p id="aebe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe ms mt mu mj b">click</code>来触发按钮 DOM 节点上的点击。</p><h1 id="f407" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在 Vue 的组件之间共享一个方法</h1><p id="72ac" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了在 Vue 的组件之间共享一个方法，我们可以创建一个模块来导出这个方法。</p><p id="2e38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="bf44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">src/shared.js</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="71a0" class="mn lc iq mj b gy mo mp l mq mr">export default {<br/>  bar() { <br/>    alert("bar") <br/>  }<br/>}</span></pre><p id="090a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过编写以下代码在组件中使用它:</p><p id="8441" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">src/App.js</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="b788" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;...&lt;/template&gt;</span><span id="9f7b" class="mn lc iq mj b gy mv mp l mq mr">&lt;script&gt;<br/>import shared from './shared'</span><span id="0c8e" class="mn lc iq mj b gy mv mp l mq mr">export default {<br/>  created() { <br/>    shared.bar();<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="9c58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们导入了<code class="fe ms mt mu mj b">shared</code>模块，并在其中调用了<code class="fe ms mt mu mj b">bar</code>方法。</p><p id="d168" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者，我们可以创建一个 mixin，它是一段可以合并到我们的组件中的代码。</p><p id="2587" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f74c" class="mn lc iq mj b gy mo mp l mq mr">const cartMixin = {<br/>  methods: {<br/>    addToCart(product) {      <br/>      this.cart.push(product);<br/>    }<br/>  }<br/>};</span></pre><p id="78c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过编写以下代码在组件中使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="49e5" class="mn lc iq mj b gy mo mp l mq mr">const Store = Vue.extend({<br/>  template: '#app',<br/>  mixins: [cartMixin],<br/>  data(){<br/>    return {<br/>      cart: []<br/>    }<br/>  }<br/>})</span></pre><p id="230b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe ms mt mu mj b">Vue.extend</code>来创建<code class="fe ms mt mu mj b">Vue</code>构造函数的子类。</p><p id="323f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以创建一个新的<code class="fe ms mt mu mj b">Store</code>实例，并在我们的应用程序中进行渲染。</p><h1 id="d9bb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将组件作为道具传递，并在 Vue 的子组件中使用它</h1><p id="73fd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将组件的标签名传入到<code class="fe ms mt mu mj b">component</code>组件的<code class="fe ms mt mu mj b">is</code>属性中。</p><p id="9169" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e5f8" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;component :is="childComponent"&gt;foo bar&lt;/component&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="c889" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">childComponent</code>是带有组件标签名的字符串。</p><p id="66a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">标签之间的内容是填充到默认槽中的内容。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/8c9adf10e06cb6285b14811b96f0771e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wk826LdeRhbTtyAU"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@dominik_qn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">张秀坤·QN</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="8cc0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ebe0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建一个共享模块或 mixin 来在 Vue 中创建共享代码。</p><p id="6e77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以使用<code class="fe ms mt mu mj b">this.$router.resolve</code>来获得可以在其他地方使用的路径。</p><p id="4d05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">HTTPS 可以提供 Vue 项目。</p><p id="34d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用 refs 获取 HTML 元素的 DOM 对象。</p></div></div>    
</body>
</html>