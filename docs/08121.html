<html>
<head>
<title>How To Build A Stopwatch in JavaScript Using A Constructor Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用构造函数在 JavaScript 中构建秒表</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-build-a-stopwatch-in-javascript-using-a-constructor-function-765496bfb1ae?source=collection_archive---------3-----------------------#2022-05-18">https://blog.devgenius.io/how-to-build-a-stopwatch-in-javascript-using-a-constructor-function-765496bfb1ae?source=collection_archive---------3-----------------------#2022-05-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/98f6eddf4f294f729e7872549eec9a2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZYNi6LFlQWTZNnKhYWzog.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片来源:vecteezy.com</figcaption></figure><p id="66cd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在我今天的文章中，我将向您展示如何使用构造函数在 JavaScript 中构建一个简单的秒表。</p><p id="f6cb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">构造函数是用于创建对象的函数。</p><h1 id="4932" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">物品复习</h1><p id="cf60" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">对象是<strong class="kb io">键值</strong>对中无序的数据集合。一对这样的数据被称为该对象的属性。</p><p id="d1ee" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">以下是用 JavaScript 创建对象的一些方法；</p><ul class=""><li id="4358" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">使用对象文字语法<strong class="kb io"> { } </strong></li></ul><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><ul class=""><li id="cfb2" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">使用构造函数</li></ul><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><ul class=""><li id="6157" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">使用工厂函数</li></ul><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="5a3a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">理解了什么是对象，以及如何创建对象之后，我将向您展示如何使用构造函数来创建秒表。</p><h1 id="6669" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">我们开始吧</h1><p id="89ee" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">我们的构造函数将被命名为<strong class="kb io">秒表</strong>，它将有变量和方法<em class="mp">来启动我们的手表、停止我们的手表、重置我们的手表并显示持续时间</em>。</p><blockquote class="mq mr ms"><p id="ca4a" class="jz ka mp kb b kc kd ke kf kg kh ki kj mt kl km kn mu kp kq kr mv kt ku kv kw ig bi translated"><em class="in">方法是包含函数定义的对象属性。</em></p></blockquote><p id="1948" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们将在下面的构造函数中创建变量，这些变量只能被函数中的方法修改。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="bea3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">以下是我们的构造函数中的变量:</p><ul class=""><li id="b665" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated"><code class="fe mw mx my mz b"><strong class="kb io">isStart</strong></code></li></ul><p id="334f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这个变量将用于检查我们的手表是否启动。如果值为<strong class="kb io">真</strong>，则表示手表已启动；如果值为<strong class="kb io">假</strong>，则表示手表已<em class="mp">停止或未启动</em>。</p><ul class=""><li id="2cf9" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated"><code class="fe mw mx my mz b"><strong class="kb io">startCount</strong></code></li></ul><p id="4f77" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这个变量将存储我们的手表启动时的时间戳。</p><ul class=""><li id="2989" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated"><code class="fe mw mx my mz b"><strong class="kb io">stopCount</strong></code></li></ul><p id="6084" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这个变量将存储我们的手表停止时的时间戳。</p><ul class=""><li id="f655" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated"><code class="fe mw mx my mz b"><strong class="kb io">durationCount</strong></code></li></ul><p id="a033" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">该变量通过查找<code class="fe mw mx my mz b"><strong class="kb io">startCount</strong></code> &amp; <code class="fe mw mx my mz b"><strong class="kb io">stopCount</strong></code>之间的<strong class="kb io">差值</strong>来存储持续时间</p><ul class=""><li id="bcf4" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated"><code class="fe mw mx my mz b"><strong class="kb io">preDuration</strong></code></li></ul><p id="0fc2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">只要秒表未复位，此变量就会存储之前的持续时间。</p><h1 id="e284" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">开始方法</h1><p id="91d4" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">现在，我们将创建负责启动手表的第一个方法。</p><p id="3b20" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">该方法将检查:</p><ul class=""><li id="5042" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">如果手表已经启动，即<code class="fe mw mx my mz b"><strong class="kb io">isStart == true</strong></code></li></ul><p id="9cb5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果是，它将向控制台记录一条消息，通知用户<em class="mp">手表已经启动</em>。</p><p id="40ff" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果否，它将通过从日期对象中检索时间戳并将其存储到<code class="fe mw mx my mz b"><strong class="kb io">startCount</strong></code>来启动手表，然后将<code class="fe mw mx my mz b"><strong class="kb io">isStart</strong></code> <strong class="kb io"> </strong>的值更改为<strong class="kb io">真。</strong></p><ul class=""><li id="b101" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">如果<strong class="kb io">开始计数</strong>为零(0)。</li></ul><p id="db9f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这个变量保存我们的手表启动时的时间戳。如果值为零(0)，它将通过从日期对象中检索时间戳并将其存储到<code class="fe mw mx my mz b"><strong class="kb io">startCount</strong></code>来启动手表，然后将<code class="fe mw mx my mz b"><strong class="kb io">isStart</strong></code>的值更改为<strong class="kb io">真</strong>。然后它会通知用户<em class="mp">手表已经启动</em>。</p><ul class=""><li id="b2ee" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">如果以上都不是真的</li></ul><p id="a894" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">它将通过从日期对象中检索时间戳并将其存储到<code class="fe mw mx my mz b"><strong class="kb io">startCount</strong></code>来启动手表，然后将<code class="fe mw mx my mz b"><strong class="kb io">isStart</strong></code>的值更改为<strong class="kb io">真</strong>。然后它会通知用户<em class="mp">手表已经继续。ie 简历。</em></p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><h1 id="b25b" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">停止方法</h1><p id="0052" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">这个方法将负责停止我们的手表。</p><p id="01a0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">该方法将检查:</p><ul class=""><li id="e33c" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated">如果手表启动了。ie <code class="fe mw mx my mz b"><strong class="kb io">isStart == true</strong></code></li></ul><p id="badd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果没有，它会通知用户<em class="mp">手表还没有启动</em>。</p><p id="bbd7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果是，它将通过从日期对象中检索时间戳并将其存储到<code class="fe mw mx my mz b"><strong class="kb io">stopCount</strong></code>来停止观察，然后将<code class="fe mw mx my mz b"><strong class="kb io">isStart</strong></code>的值更改为<strong class="kb io"> false </strong>。</p><p id="314d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后它会通知用户<em class="mp">手表已经停止</em>。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><h1 id="4133" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">持续时间方法</h1><p id="b8d0" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">这个方法负责计算并返回我们的手表经过的时间，以秒为单位。</p><p id="8cfd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">需要注意的是，使用方法<strong class="kb io"> getTime() </strong>从 date 对象中检索时间戳，返回以<strong class="kb io">毫秒</strong>为单位的时间，我们需要用这个时间除以<strong class="kb io"> 1000 </strong>来得到以秒为单位的时间。</p><p id="79c7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后，我们将结果存储到先前的持续时间变量<code class="fe mw mx my mz b"><strong class="kb io">preDuration</strong></code>中，这样，只要手表没有复位，我们就会将它添加到新的持续时间中。</p><p id="e04e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您还会注意到，如果时间大于 60 ，我会将时间转换为分钟。这意味着您将看到 2 分钟而不是，而不是显示<em class="mp"> 120 秒。</em></p><p id="0583" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">大多数结果将以小数结束，因此有必要使用方法<strong class="kb io"> toFixed()将其近似到小数点后 1 位。</strong></p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><h1 id="9b55" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">重置方法</h1><p id="8f82" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">这是我们秒表的最后一种方法，用于将手表重置回初始状态。</p><p id="2548" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">它所做的只是将我们的构造函数中声明的变量重置为它们的初始状态。</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="6b44" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是完整的代码</p><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="907f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">为了测试我们的手表，您需要将上面的构造函数复制并粘贴到您的浏览器控制台中，创建一个对象实例，然后测试运行！</p><p id="2bc4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里有一个方法列表；</p><ul class=""><li id="bc82" class="ma mb in kb b kc kd kg kh kk mc ko md ks me kw mf mg mh mi bi translated"><strong class="kb io"> start() </strong>:这个方法启动手表或者恢复一个停止的手表。</li><li id="3a71" class="ma mb in kb b kc na kg nb kk nc ko nd ks ne kw mf mg mh mi bi translated"><strong class="kb io"> stop() </strong>:此方法停止手表。</li><li id="b893" class="ma mb in kb b kc na kg nb kk nc ko nd ks ne kw mf mg mh mi bi translated"><strong class="kb io"> duration() </strong>:这个方法计算并返回经过的时间。</li><li id="66cc" class="ma mb in kb b kc na kg nb kk nc ko nd ks ne kw mf mg mh mi bi translated"><strong class="kb io"> reset() </strong>:此方法将手表复位到初始状态</li></ul><figure class="mj mk ml mm gt jo"><div class="bz fp l di"><div class="mn mo l"/></div></figure><p id="e771" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是我的结果</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/ce9d0a28771af0eca3dcf6d16286b74d.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/0*Jy74zay8J5sL6_d6.png"/></div></figure><p id="df9a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">当我希望手表从它停止的地方继续时，我只需调用<strong class="kb io"> start() </strong>方法，而不必重置手表。</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/4033f044c72793dce6b90b7dc3456283.png" data-original-src="https://miro.medium.com/v2/resize:fit:554/format:webp/0*BIatDrGTN_UYEYZJ.png"/></div></figure><p id="d89c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果我们让秒表跑几分钟呢？</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/b819e39f30ded2b567744b51ec25310f.png" data-original-src="https://miro.medium.com/v2/resize:fit:550/format:webp/0*lsqVw_k7eOzkYLDA.png"/></div></figure><p id="8c0d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果您需要重置手表，只需在您的对象实例上调用 reset 方法<strong class="kb io"> reset() </strong>。</p></div><div class="ab cl ni nj hr nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ig ih ii ij ik"><p id="9bee" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">你可以用你新的<strong class="kb io">基于计算机的 JavaScript 秒表</strong>进行比赛，并通过计时你的开始&amp;停止，然后与你的<strong class="kb io">本地秒表</strong>进行比较来检查你的结果的一致性。谁知道呢？它们可能只是持续时间相同。</p><p id="b0b9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">谢谢你。</p><p id="5f54" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">你读过我写的关于如何使用 octaValidate 验证 HTML 表单的文章吗？如果没有，<a class="ae np" href="https://blog.bitsrc.io/client-side-form-validation-using-octavalidate-javascript-b150f2d14e99" rel="noopener ugc nofollow" target="_blank">请通过以下链接访问文章。</a></p></div></div>    
</body>
</html>