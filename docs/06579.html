<html>
<head>
<title>Create a Rails API with React Frontend using Hooks and TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用钩子和类型脚本创建带有 React 前端的 Rails API</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/create-a-rails-api-with-react-frontend-using-hooks-and-typescript-dcb4e84c3dbf?source=collection_archive---------1-----------------------#2022-01-18">https://blog.devgenius.io/create-a-rails-api-with-react-frontend-using-hooks-and-typescript-dcb4e84c3dbf?source=collection_archive---------1-----------------------#2022-01-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/970b21b6d10d5f8f7bd0efe649c7bc62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aTZkX7T0K8xR1jaK"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@jefflssantos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">杰弗逊·桑托斯</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="378a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本教程中，我将构建一个<a class="ae jz" href="https://guides.rubyonrails.org/api_app.html" rel="noopener ugc nofollow" target="_blank"> Rails API 专用应用程序</a>作为后端，React 应用程序作为前端。</p><p id="bad4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此外，为了做出反应，我将应用:</p><ul class=""><li id="bbaf" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated"><a class="ae jz" href="https://reactjs.org/docs/hooks-intro.html" rel="noopener ugc nofollow" target="_blank">钩子</a> —允许你使用状态和其他 React 特性，而不用写类。</li><li id="8583" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">T <a class="ae jz" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> ypeScript </a> —有助于通过类型系统及早发现错误，并使 JavaScript 开发更加高效。</li><li id="70aa" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated"><a class="ae jz" href="https://react-bootstrap.github.io/" rel="noopener ugc nofollow" target="_blank">反应自举</a> —为了不要太难过:)</li></ul><p id="a2ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">和</p><ul class=""><li id="d27d" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">Axios——一个轻量级的 HTTP 客户端</li><li id="9cf9" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated"><a class="ae jz" href="https://reactrouter.com/" rel="noopener ugc nofollow" target="_blank">React Router V6</a>—React JavaScript 库的全功能路由库。</li><li id="bb15" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated"><a class="ae jz" href="https://react-hook-form.com/" rel="noopener ugc nofollow" target="_blank">React Hook Form</a><strong class="kc io">—</strong>有助于创建带有易用验证的灵活表单。</li></ul><p id="770e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们开始吧！</p></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><h1 id="3ac2" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">第一步。创建 Rails API</h1><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="0a58" class="na lu in mw b gy nb nc l nd ne">rails new back-app --api <!-- -->-T<br/>cd back-app</span></pre><p id="292f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">标志<code class="fe nf ng nh mw b">--api</code>从<code class="fe nf ng nh mw b">ActionController::API</code>继承<code class="fe nf ng nh mw b">ApplicationController</code>而不是<code class="fe nf ng nh mw b">ActionController::Base</code>，提供浏览器应用程序使用的动作控制器模块，并跳过生成我们不需要的视图、助手和资产。</p><p id="d672" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将使用<em class="ni"> RSpec </em>而不是<em class="ni"> MiniTest </em>。命令<code class="fe nf ng nh mw b">-T</code>是跳过<code class="fe nf ng nh mw b">Minitest::Unit</code>文件和文件夹的生成。</p><h2 id="8210" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">设置 CORS</h2><p id="63bb" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated"><a class="ae jz" href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" rel="noopener ugc nofollow" target="_blank"> CORS </a>是一种基于 HTTP 头的安全机制，它定义了谁可以与你的 API 交互。在这篇文章中，为了简单起见，我将允许所有的起源。</p><p id="971c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将<code class="fe nf ng nh mw b">rack-cors</code>添加到 Gemfile。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="e914" class="na lu in mw b gy nb nc l nd ne">gem 'rack-cors'</span></pre><p id="a3fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后捆起来。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="4192" class="na lu in mw b gy nb nc l nd ne">bundle</span></pre><p id="4872" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更新<code class="fe nf ng nh mw b">config/initializers/cors.rb</code>以允许所有源(*)发出请求。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="733a" class="na lu in mw b gy nb nc l nd ne"><em class="ni">Rails</em>.application.config.middleware.insert_before 0, <em class="ni">Rack</em>::<em class="ni">Cors </em>do<br/>  allow do<br/>    origins '*'</span><span id="9163" class="na lu in mw b gy nz nc l nd ne"><em class="ni">resource </em>'*',<br/>      headers: :any,<br/>      methods: [:get, :post, :put, :patch, :delete, :options, :head]<br/>  end<br/>end</span></pre><h2 id="cb24" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">生成帖子的脚手架</h2><p id="11a5" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">为了获得更多的可见性，让我们生成一个框架，迁移数据库，并启动服务器。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="66fb" class="na lu in mw b gy nb nc l nd ne">rails g scaffold Post title:string content:text<br/>rails db:create db:migrate</span></pre><h2 id="980a" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">更改 REST API 版本</h2><p id="e5e2" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">我将使用<a class="ae jz" href="https://www.freecodecamp.org/news/how-to-version-a-rest-api/#:~:text=so%20let's%20recap%3A-,API%20versioning%20is%20the%20practice%20of%20transparently%20managing%20changes%20to,effective%20API%20change%20management%20principles." rel="noopener ugc nofollow" target="_blank"> REST API 版本控制</a>。版本控制<strong class="kc io">帮助我们在 API</strong>中识别出需要的变更时更快地迭代。</p><ul class=""><li id="95eb" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">将<code class="fe nf ng nh mw b">posts_controller.rb</code>移动到<code class="fe nf ng nh mw b">app/controllers/api/v1/posts_controller.rb</code>。</li><li id="35e8" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">将<code class="fe nf ng nh mw b">class PostsController &lt; ApplicationController</code>改为<code class="fe nf ng nh mw b">class Api::V1::PostsController &lt; ApplicationController</code>。</li><li id="e4aa" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">由此改变<code class="fe nf ng nh mw b">create</code>行动中的帖子位置</li></ul><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="81b0" class="na lu in mw b gy nb nc l nd ne">render json: @post, status: :created, location: @post</span></pre><p id="bf33" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对此</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="41ce" class="na lu in mw b gy nb nc l nd ne">render json: @post, status: :created, location: api_v1_post_path(@post)</span></pre><ul class=""><li id="24f9" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">并更新路线。</li></ul><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="3f14" class="na lu in mw b gy nb nc l nd ne">Rails.application.routes.draw do<br/>  namespace :api do<br/>    namespace :v1 do<br/>      resources :posts<br/>    end<br/>  end<br/>  # ...<br/>end</span></pre><p id="6ba0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要显示路线，输入命令<code class="fe nf ng nh mw b">rails routes --expanded</code>。</p><h2 id="53db" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">数据库播种</h2><p id="4bda" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">为了给帖子生成假数据，我将使用<em class="ni"> faker </em> gem。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="2b44" class="na lu in mw b gy nb nc l nd ne">gem 'faker'</span></pre><p id="187d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">捆起来。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="7b7d" class="na lu in mw b gy nb nc l nd ne">bundle</span></pre><p id="7f05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将一些伪造数据插入<code class="fe nf ng nh mw b">seeds.rb</code>。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="6322" class="na lu in mw b gy nb nc l nd ne">require 'faker'</span><span id="a32b" class="na lu in mw b gy nz nc l nd ne">10.times do<br/>  Post.create(<br/>    title: Faker::Lorem.sentence,<br/>    content: Faker::Lorem.paragraph)<br/>end</span></pre><p id="af3b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">运行命令。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="a38b" class="na lu in mw b gy nb nc l nd ne">rails db:seed</span></pre><p id="8ce8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">并启动服务器</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="9484" class="na lu in mw b gy nb nc l nd ne">rails s</span></pre></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><h1 id="8ebd" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">第二步。创建 React 应用程序</h1><p id="e76e" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">我将使用 TypeScript 模板<a class="ae jz" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank">创建 React 应用程序</a>。您可以在 Rails 应用程序的根目录或任何其他地方创建 React 应用程序。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="1245" class="na lu in mw b gy nb nc l nd ne">npx create-react-app front-app --template typescript<br/>cd front-app<br/>npm install</span></pre><p id="f676" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在项目的根目录下创建一个<code class="fe nf ng nh mw b">.env</code>文件，并在那里输入服务器端口。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="55da" class="na lu in mw b gy nb nc l nd ne">PORT=4000</span></pre><h2 id="a9e0" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated"><strong class="ak">安装 React 引导程序</strong></h2><p id="1d14" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">运行安装程序。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="f4c5" class="na lu in mw b gy nb nc l nd ne">npm i react-bootstrap bootstrap@5.1.3</span></pre><p id="5233" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">并在<code class="fe nf ng nh mw b">index.tsx</code>中添加导入库。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="2dc1" class="na lu in mw b gy nb nc l nd ne">import 'bootstrap/dist/css/bootstrap.min.css';</span></pre></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><h1 id="3fa0" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">第三步。<strong class="ak">配置路由</strong></h1><p id="2402" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">路由允许您导航到其他页面。</p><h2 id="2e98" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">页</h2><p id="733c" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">首先，在<code class="fe nf ng nh mw b">src/Pages/HomePage.tsx</code>中创建一个带有<code class="fe nf ng nh mw b">.tsx</code>扩展的<em class="ni"> Homapage </em>组件。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="aaf8" class="na lu in mw b gy nb nc l nd ne">export const HomePage = () =&gt; {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;h1&gt;Hello World!&lt;/h1&gt;<br/>    &lt;/&gt;<br/>  )<br/>}</span></pre><p id="052b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建一些附加页面<code class="fe nf ng nh mw b">src/Pages/NotFoundPage.tsx</code>。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="72ba" class="na lu in mw b gy nb nc l nd ne">export const NotFoundPage = () =&gt; (<br/>  &lt;&gt;<br/>    &lt;h1&gt;Not Found 404&lt;/h1&gt;<br/>  &lt;/&gt;<br/>)</span></pre><p id="edfa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">和<code class="fe nf ng nh mw b">src/Pages/AboutPage.tsx</code>。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="34a6" class="na lu in mw b gy nb nc l nd ne">export const AboutPage = () =&gt; (<br/>  &lt;&gt;<br/>    &lt;h1&gt;About me&lt;/h1&gt;<br/>    &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. &lt;/p&gt;<br/>  &lt;/&gt;<br/>)</span></pre><h2 id="259c" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">反应路由器</h2><p id="ef36" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">现在安装一个<em class="ni"> React 路由器</em>库。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="983e" class="na lu in mw b gy nb nc l nd ne">npm i react-router-dom</span></pre><p id="4492" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更新<code class="fe nf ng nh mw b">index.tsx</code>。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="2500" class="na lu in mw b gy nb nc l nd ne">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import { BrowserRouter } from 'react-router-dom'<br/>import './index.css';<br/>import 'bootstrap/dist/css/bootstrap.min.css';<br/>import App from './App';<br/>import reportWebVitals from './reportWebVitals';</span><span id="1aff" class="na lu in mw b gy nz nc l nd ne">ReactDOM.render(<br/>  &lt;React.StrictMode&gt;<br/>    &lt;BrowserRouter&gt;<br/>      &lt;App /&gt;<br/>    &lt;/BrowserRouter&gt;<br/>  &lt;/React.StrictMode&gt;,<br/>  document.getElementById('root')<br/>);</span><span id="79c1" class="na lu in mw b gy nz nc l nd ne">reportWebVitals();</span></pre><p id="9ab3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后更新<code class="fe nf ng nh mw b">App.tsx</code>。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="44ca" class="na lu in mw b gy nb nc l nd ne">import { Routes, Route, Link } from 'react-router-dom'<br/>import { HomePage } from './Pages/HomePage';<br/>import { AboutPage } from './Pages/AboutPage';<br/>import { NotFoundPage } from './Pages/NotFoundPage';<br/>import { Container, Navbar } from 'react-bootstrap';</span><span id="8e8b" class="na lu in mw b gy nz nc l nd ne">function App() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;Container&gt;<br/>        &lt;Navbar expand="lg" variant="light" bg="light"&gt;<br/>          &lt;Container&gt;<br/>            &lt;Link className="nav-link" to="/"&gt;Home&lt;/Link&gt;<br/>            &lt;Link className="nav-link" to="/about"&gt;About Me&lt;/Link&gt;<br/>          &lt;/Container&gt;<br/>        &lt;/Navbar&gt;&lt;br /&gt;<br/>      <br/>        &lt;Routes&gt;<br/>          &lt;Route path="/" element={&lt;HomePage /&gt;} /&gt;<br/>          &lt;Route path="/about" element={&lt;AboutPage /&gt;} /&gt;<br/>          &lt;Route path="*" element={&lt;NotFoundPage /&gt;} /&gt;<br/>        &lt;/Routes&gt;<br/>      &lt;/Container&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span><span id="7205" class="na lu in mw b gy nz nc l nd ne">export default App;</span></pre></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><h1 id="8b0b" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">第四步。创建组件</h1><p id="67e1" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">TypeScript 有助于使用接口实现更好的类型检查。</p><p id="0223" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接口是在我们的应用程序中充当契约的结构。它定义了类要遵循的语法，这意味着实现接口的类必然会实现它的所有成员。</p><h2 id="187b" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">发布接口</h2><p id="93b3" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">所以，首先我们需要在<code class="fe nf ng nh mw b">src/types/data.tsx</code>中创建一个<em class="ni"> Post </em>接口。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="357b" class="na lu in mw b gy nb nc l nd ne">export interface IPost {<br/>  id?: number;<br/>  title: string;<br/>  content: string;<br/>}</span></pre><h2 id="9204" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated"><strong class="ak">岗位组件</strong></h2><p id="5cab" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">在<code class="fe nf ng nh mw b">src/Posts/Post.tsx</code>中创建<em class="ni"> Post </em>组件。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="262f" class="na lu in mw b gy nb nc l nd ne">import { IPost } from '../types/data';</span><span id="1622" class="na lu in mw b gy nz nc l nd ne">export const Post = (props: IPost) =&gt; (<br/>  &lt;&gt;<br/>    &lt;h2&gt;{props.title}&lt;/h2&gt;<br/>    &lt;p&gt;{props.content}&lt;/p&gt;<br/>  &lt;/&gt;<br/>)</span></pre><h2 id="4213" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated"><strong class="ak">后列表组件</strong></h2><p id="8b3d" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">为了从服务器输出帖子，我将使用<em class="ni"> PostList </em>组件，该组件将在每次迭代中调用<em class="ni"> Post </em>组件。</p><p id="7c30" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了向服务器发出请求，我使用了 Axios 库。让我们安装它。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="6cd5" class="na lu in mw b gy nb nc l nd ne">npm i axios</span></pre><p id="a2ee" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe nf ng nh mw b">src/Posts/PostList.tsx</code>中创建<em class="ni">后列表</em>组件。</p><figure class="mr ms mt mu gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="9352" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我应用<a class="ae jz" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank"> <em class="ni"> useState </em> </a>来跟踪满足<em class="ni"> IPost </em> <a class="ae jz" href="https://www.typescriptlang.org/docs/handbook/interfaces.html" rel="noopener ugc nofollow" target="_blank">接口</a>的帖子的状态，应用<a class="ae jz" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank"> <em class="ni"> useEffect </em> </a>使用 async <em class="ni"> </em> arrow 函数<em class="ni"> getPosts 从服务器获取帖子。</em></p><p id="8e44" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">函数<em class="ni"> updatePostList </em>用于更新包含新帖子的帖子列表。</p><p id="d276" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ni">后置格式</em>是我将在下面创建的一个组件。</p><p id="23cd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后我迭代 Post，用 props 调用子<em class="ni"> Post </em>组件。</p><h2 id="a9c4" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">更新主页</h2><p id="cfd3" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">将<code class="fe nf ng nh mw b">Homepage.tsx</code>改为输出岗位。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="4cc0" class="na lu in mw b gy nb nc l nd ne">import {PostList} from '../Posts/PostList'</span><span id="fa0b" class="na lu in mw b gy nz nc l nd ne">export const HomePage = () =&gt; (<br/>  &lt;&gt;<br/>    &lt;PostList /&gt;<br/>  &lt;/&gt;<br/>)</span></pre><h2 id="db0c" class="na lu in bd lv nj nk dn lz nl nm dp md kl nn no mh kp np nq ml kt nr ns mp nt bi translated">后置成分</h2><p id="c277" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">为了便于验证，我将使用<em class="ni"> React 钩子形式</em>。</p><p id="8ec0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，安装它。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="925b" class="na lu in mw b gy nb nc l nd ne">npm i react-hook-form</span></pre><p id="b047" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建<code class="fe nf ng nh mw b">src/posts/PostForm.tsx</code>。</p><figure class="mr ms mt mu gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="d9f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里我应用 useState 来保存文章数据:<em class="ni">标题</em>和<em class="ni">内容。</em>接下来，我从 React 钩子表单中应用一个<em class="ni"> useForm </em>钩子来验证标题和内容表单。然后我创建一个带有输入字段的表单，如果提交后有任何错误，错误将输出到屏幕上。</p></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><h1 id="f920" class="lt lu in bd lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq bi translated">第五步。测试</h1><p id="95b6" class="pw-post-body-paragraph ka kb in kc b kd nu kf kg kh nv kj kk kl nw kn ko kp nx kr ks kt ny kv kw kx ig bi translated">让我们启动服务器。</p><pre class="mr ms mt mu gt mv mw mx my aw mz bi"><span id="238e" class="na lu in mw b gy nb nc l nd ne">npm start</span></pre><p id="0813" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">提交表单后，帖子列表将如下所示。</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oc"><img src="../Images/96625b9d81be96938ae4f330adb5c77f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o04vMvgJcnSQG9W2V-LCDw.png"/></div></div></figure><p id="8c7f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">其他页面。</p><div class="mr ms mt mu gt ab cb"><figure class="od jo oe of og oh oi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/61806f3c2171dce68007a26b34bf0a00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*FPUuN2VoXxPU7kdvqTOcHQ.png"/></div></figure><figure class="od jo oj of og oh oi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/27530d865510a22685f944d74819f7ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*YwQs61amXzOa0-dfQu0uzQ.png"/></div></figure></div></div><div class="ab cl lm ln hr lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ig ih ii ij ik"><p id="a415" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">恭喜你。🎉可以通过添加<a class="ae jz" href="https://react-redux.js.org/" rel="noopener ugc nofollow" target="_blank"><em class="ni">【Redux】</em></a>、更新和删除操作、<a class="ae jz" href="https://enlear.academy/how-to-create-a-rails-6-api-with-devise-jwt-46fa35085e85" rel="noopener ugc nofollow" target="_blank"> <em class="ni">与 JWT </em> </a>的认证等等来修改该应用程序。希望对你理解这些技术有一点帮助。</p></div></div>    
</body>
</html>