<html>
<head>
<title>Whatâ€™s new in Swift 5.7?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift 5.7 æœ‰ä»€ä¹ˆæ–°åŠŸèƒ½ï¼Ÿ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/whats-new-in-swift-5-7-8e3f06e93e30?source=collection_archive---------1-----------------------#2022-10-26">https://blog.devgenius.io/whats-new-in-swift-5-7-8e3f06e93e30?source=collection_archive---------1-----------------------#2022-10-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7de7" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">æ–°åŠŸèƒ½ã€å¢å¼ºå’Œæ”¹è¿›</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c42c6e7e24e8f7e6330e74d314911155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FrMBxl67GKpKleWez188eA.png"/></div></div></figure><p id="54c6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Swift 5.7 æä¾›äº†è¯­è¨€å’Œæ ‡å‡†åº“å¢å¼ºåŠŸèƒ½ã€å¯ç”¨æ€§æ”¹è¿›ï¼Œå¹¶å®æ–½äº†ä¸€ç§æ–°çš„é€šç”¨æŠ€æœ¯ï¼Œå¯æå‡æ€§èƒ½å¹¶æ¶ˆé™¤é•¿æœŸå­˜åœ¨çš„ç¼ºé™·ã€‚è¿™ä¸€å¢å¼ºåŒ…æ‹¬æ ‡å‡†æ ·æ¿ä»£ç çš„ä¸€ç§æ–°çš„é€Ÿè®°è¯­æ³•ï¼ŒåŒ…æ‹¬<strong class="kq io"> if let </strong>è¯­å¥å’Œå¤šè¯­å¥ã€é—­åŒ…ç±»å‹çš„æ³¨é‡Šã€‚</p><p id="9290" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Swift 5.7 æ–°çš„ generics å®ç°ä¿®å¤äº†è®¸å¤š bugï¼Œæ¯”å¦‚å¤„ç†å¤æ‚çš„åŒç±»å‹éœ€æ±‚ï¼Œæ¯”å¦‚é›†åˆå­åºåˆ—å…³è”ç±»å‹ï¼Œä»¥åŠä½¿ç”¨ CaseIterable åè®®çš„ä»£ç ï¼Œè¯¥åè®®å®šä¹‰äº†æ¡ä»¶ Selfã€‚å…ƒç´ ==è‡ªèº«ã€‚<br/> <br/>ä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡åŠ¨æ‰‹çš„ä¾‹å­çœ‹åˆ°ä¸€äº›å˜åŒ–ã€‚</p><p id="899b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 1ã€‚Swift åŒ…ç®¡ç†å™¨æ”¹è¿›<br/> </strong> <a class="ae lk" href="https://www.swift.org/package-manager/" rel="noopener ugc nofollow" target="_blank"> Swift åŒ…ç®¡ç†å™¨</a>æ˜¯ Swift é¡¹ç›®çš„ä¾èµ–ç®¡ç†å™¨ï¼ŒåŒ…æ‹¬å¯ä»¥ä¸º macOS å’Œ Linux æ„å»ºçš„æ„å»ºç³»ç»Ÿã€‚Swift 5.7ï¼ŒSwift åŒ…ç®¡ç†å™¨è·å¾—äº†ä»¤äººå…´å¥‹çš„æ”¹è¿›ï¼Œè¿™å°†å¸®åŠ©æˆ‘ä»¬é¿å…åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å¤šä¸ªåŒååŒ…çš„é—®é¢˜ã€‚å®ƒç°åœ¨å…è®¸æˆ‘ä»¬ä»å®šä¹‰æ¨¡å—çš„åŒ…å¤–éƒ¨å‘½åæ¨¡å—ï¼Œå¹¶æ·»åŠ æ¨¡å—åˆ«åã€‚</p><p id="2dbd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 2ã€‚ä»£ç å®Œæˆ<br/> </strong>å‡½æ•°è°ƒç”¨å‚æ•°ã€å˜é‡å’Œå…¨å±€å‡½æ•°çš„ä»£ç å®Œæˆç°å·²ç´§å¯†é›†æˆåˆ° Swift çš„ç±»å‹æ£€æŸ¥å™¨ä¸­ã€‚è¿™å…è®¸ä»£ç å®Œæˆåœ¨ä¸æ˜ç¡®çš„ä»£ç æˆ–æœ‰é”™è¯¯çš„ä»£ç ä¸­æä¾›æ›´å‡†ç¡®çš„ç»“æœã€‚</p><p id="35b9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">å¦‚æœåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­çš„<code class="fe ll lm ln lo b">+</code>ä¹‹åå®Œæˆï¼Œä»£ç å®Œæˆç°åœ¨æŠ¥å‘Š<strong class="kq io"> int </strong>å’Œ<strong class="kq io"> string </strong>åŒ¹é…å‘¨å›´çš„ä¸Šä¸‹æ–‡ï¼Œå…è®¸ç¼–è¾‘å™¨å°†è¿™äº›ç»“æœæ’åœ¨æ¯”<strong class="kq io">æ•°ç»„</strong>æ›´é«˜çš„ä½ç½®ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="ee70" class="lt lu in lo b gy lv lw l lx ly">func makeIntOrString() <strong class="lo io">-&gt;</strong> Int {}<br/>func makeIntOrString() <strong class="lo io">-&gt;</strong> String {}<br/><br/>let array <strong class="lo io">=</strong> [4, 2]<br/>let int <strong class="lo io">=</strong> 42<br/>let string <strong class="lo io">=</strong> "Hello World!"<br/>makeIntOrString() <strong class="lo io">+</strong></span></pre><p id="9053" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">å¦‚æœåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­å®Œæˆç¼ºå°‘çš„å‚æ•°ï¼Œä»£ç å®Œæˆç°åœ¨åªå»ºè®® secondInt å‚æ•°æ ‡ç­¾å¹¶çœç•¥ secondStringã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="5903" class="lt lu in lo b gy lv lw l lx ly">func add(_ firstInt: Int, secondInt: Int) {}<br/>func add(_ firstString: String, secondString: String) {}<br/>add(1, )</span></pre><p id="a29f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 3ã€‚å±•å¼€å¯é€‰é€‰é¡¹çš„ç®€å†™</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0345-if-let-shorthand.md" rel="noopener ugc nofollow" target="_blank">SE-0345</a>)<strong class="kq io"/><br/>Swift 5.7 å¼•å…¥äº†æ–°çš„ç®€å†™è¯­æ³•ï¼Œä½¿ç”¨<strong class="kq io"> if let </strong>å’Œ<strong class="kq io"> guard let å°†å¯é€‰é€‰é¡¹å±•å¼€åˆ°åŒåçš„éšè—å˜é‡ä¸­ã€‚</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="ea22" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">è¿™ç§å˜åŒ–ä¸ä¼šæ‰©å±•åˆ°å¯¹è±¡å†…éƒ¨çš„å±æ€§ï¼Œè¿™æ„å‘³ç€è¿™æ ·çš„ä»£ç å°†æ— æ³•å·¥ä½œã€‚</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="ddd7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 4ã€‚ä»é»˜è®¤è¡¨è¾¾å¼è¿›è¡Œç±»å‹æ¨æ–­</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0347-type-inference-from-default-exprs.md" rel="noopener ugc nofollow" target="_blank">SE-0347</a>)<strong class="kq io"><br/></strong>Swift æ‰©å±•äº†ä½¿ç”¨å¸¦æœ‰é€šç”¨å‚æ•°ç±»å‹çš„é»˜è®¤å€¼çš„èƒ½åŠ›ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªé€šç”¨ç±»å‹æˆ–å‡½æ•°ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä¸ºé»˜è®¤è¡¨è¾¾å¼æä¾›ä¸€ä¸ªå…·ä½“ç±»å‹ï¼Œè€Œåœ¨ä»¥å‰ Swift ä¼šæŠ›å‡ºä¸€ä¸ªç¼–è¯‘å™¨é”™è¯¯ã€‚</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="7966" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—è°ƒç”¨è¯¥å‡½æ•°ï¼Œæˆ–è€…ä½¿ç”¨é»˜è®¤åºåˆ—ã€‚</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="7b18" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 5ã€‚å¤šè¯­å¥é—­åŒ…ç±»å‹æ¨ç†</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0326-extending-multi-statement-closure-inference.md" rel="noopener ugc nofollow" target="_blank">SE-0326</a>)<strong class="kq io"><br/></strong>Swift é€šè¿‡å¯ç”¨æ¥è‡ªé—­åŒ…ä½“çš„å‚æ•°å’Œç»“æœç±»å‹æ¨ç†ï¼Œæ”¹è¿›äº†å¤šè¯­å¥é—­åŒ…çš„æ¨ç†è¡Œä¸ºã€‚è¿™å°†ä½¿ç±»å‹æ¨æ–­å¯¹å¼€å‘äººå‘˜æ¥è¯´ä¸é‚£ä¹ˆä»¤äººæƒŠè®¶ï¼Œå¹¶æ¶ˆé™¤äº†ç°æœ‰çš„è¡Œä¸ºæ‚¬å´–ï¼Œå³åœ¨é—­åŒ…ä¸­å†æ·»åŠ ä¸€ä¸ªè¡¨è¾¾å¼æˆ–è¯­å¥å¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="de2e" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">let</strong> scores = [100, 80, 85]<br/><br/><strong class="lo io">let</strong> results = scores.map { score <strong class="lo io">in</strong><br/>    <strong class="lo io">if</strong> score &gt;= 85 {<br/>        <strong class="lo io">return</strong> "Student score is \(score)%: Pass"<br/>    } <strong class="lo io">else</strong> {<br/>        <strong class="lo io">return</strong> "Student score is \(score)%: Fail"<br/>    }<br/>}</span></pre><p id="4853" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">åœ¨ Swift 5.7 ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®æŒ‡å®šè¿”å›ç±»å‹:</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="d8be" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">// </strong>Prior to Swift 5.7<strong class="lo io"><br/>let</strong> results = scores.map { score -&gt; String <strong class="lo io">in</strong><br/>    <strong class="lo io">if</strong> score &gt;= 85 {<br/>        <strong class="lo io">return</strong> "Student score is \(score)%: Pass"<br/>    } <strong class="lo io">else</strong> {<br/>        <strong class="lo io">return</strong> "Student score is \(score)%: Fail"<br/>    }</span></pre><p id="cfb8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 6ã€‚è§£é”æ‰€æœ‰åè®®çš„å­˜åœ¨æ€§</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0309-unlock-existential-types-for-all-protocols.md" rel="noopener ugc nofollow" target="_blank">SE-0309</a>)<strong class="kq io"><br/></strong>Swift 5.7 å¤§å¹…æ”¾å®½äº†å½“åè®®æœ‰å…³è”çš„ç±»å‹éœ€æ±‚æ—¶å°†åè®®ä½œä¸ºç±»å‹ä½¿ç”¨çš„ç¦ä»¤ã€‚ç®€å•æ¥è¯´ï¼Œè¿™æ„å‘³ç€ä¸‹é¢çš„ä»£ç ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="ba9b" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">let</strong> firstName: any Equatable = "iOS"<br/><strong class="lo io">let</strong> lastName: any Equatable = 16</span></pre><p id="2f85" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Equatable æ˜¯ä¸€ä¸ªå¸¦æœ‰<strong class="kq io"> Self </strong>çš„åè®®ï¼Œå®ƒæä¾›äº†å¼•ç”¨é‡‡ç”¨å®ƒçš„ç‰¹å®šç±»å‹çš„åŠŸèƒ½ã€‚<strong class="kq io">ç­‰ä»·</strong>åè®®æœ‰ä¸€ä¸ªè¦æ±‚æ˜¯è¿™æ ·çš„:<strong class="kq io"> func ==(lhs: Selfï¼Œrhs: Self) - &gt; Bool </strong>ã€‚è¿™æ„å‘³ç€å®ƒå°†èƒ½å¤Ÿæ¥å—ç›¸åŒç±»å‹çš„ä¸¤ä¸ªå®ä¾‹ï¼Œå¹¶å‘Šè¯‰æˆ‘ä»¬å®ƒä»¬æ˜¯å¦ç›¸åŒã€‚å®ä¾‹å¯èƒ½æ˜¯ä¸¤ä¸ªæ•´æ•°ã€ä¸¤ä¸ªå­—ç¬¦ä¸²ã€ä¸¤ä¸ªå¸ƒå°”å€¼ï¼Œæˆ–è€…ä¸¤ä¸ªç¬¦åˆ<strong class="kq io">ç­‰ä»·</strong>çš„ä»»ä½•å…¶ä»–ç±»å‹ã€‚</p><p id="a5ad" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">åœ¨ Swift 5.7 ä¹‹å‰ï¼Œç¼–è¯‘å™¨ä¸å…è®¸æˆ‘ä»¬åœ¨è¿™æ ·çš„ä»£ç ä¸­ä½¿ç”¨å®ƒã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="a2f6" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">let</strong> <!-- -->spaceflight<!-- -->: [any Equatable] = ["<!-- -->Apollo<!-- -->", 11]</span></pre><p id="38b1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ä» Swift 5.7 å¼€å§‹ï¼Œè¿™ä¸ªä»£ç <em class="mb">æ˜¯å…è®¸çš„</em>ï¼Œæˆ‘ä»¬å·²ç»è·å¾—äº†å¯¹æˆ‘ä»¬çš„æ•°æ®è¿›è¡Œè¿è¡Œæ—¶æ£€æŸ¥çš„èƒ½åŠ›ï¼Œä»¥å‡†ç¡®è¯†åˆ«æˆ‘ä»¬æ­£åœ¨å¤„ç†çš„å†…å®¹ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="b173" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">for</strong> item <strong class="lo io">in</strong> <!-- -->spaceflight<!-- --> {<br/>    <strong class="lo io">if</strong> <strong class="lo io">let</strong> item = item <strong class="lo io">as</strong>? String {<br/>        print("Found string: \(item)")<br/>    } <strong class="lo io">else</strong> <strong class="lo io">if</strong> <strong class="lo io">let</strong> item = item <strong class="lo io">as</strong>? Int {<br/>        print("Found integer: \(item)")<br/>    }<br/>}</span></pre><p id="4651" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 7ã€‚ç»“æ„ä¸é€æ˜çš„ç»“æœç±»å‹</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0328-structural-opaque-result-types.md" rel="noopener ugc nofollow" target="_blank">SE-0328</a>)<strong class="kq io"><br/></strong>ä¸é€æ˜çš„è¿”å›ç±»å‹æ„å‘³ç€ï¼Œè°ƒç”¨è€…ä¸éœ€è¦æŒ‡å®šåº•å±‚çš„è¿”å›ç±»å‹æˆ–å‚æ•°ç±»å‹ï¼Œè°ƒç”¨è€…å¿…é¡»ç¡®å®šå¾—åˆ°ä¸€ä¸ªå…·ä½“çš„ç±»å‹ã€‚</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lz ma l"/></div></figure><p id="8440" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">SwiftUI ä¸­çš„ HStackã€ZStackã€Group å’Œ List åŒ…å«äº†åˆ›å»ºå¤æ‚ç±»å‹ç»“æ„çš„å…¶ä»–è§†å›¾ã€‚ä¸é€æ˜çš„ç»“æœç±»å‹å¯¹è°ƒç”¨è€…éå¸¸æœ‰å¸®åŠ©ï¼Œè°ƒç”¨è€…åªçŸ¥é“è¿™ä¸ªç»“æ„æ˜¯<strong class="kq io">ä¸€äº›è§†å›¾</strong>ã€‚ä¸é€æ˜çš„ç»“æœç±»å‹ä½¿ä»£ç åœ¨è¿è¡Œæ—¶æ›´å…·æ€§èƒ½ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="824e" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">func</strong> makeFooterView(isIpad: Bool) -&gt; <strong class="lo io">some</strong> View {<br/>    <strong class="lo io">return</strong> VStack { <br/>      <strong class="lo io">if</strong> isIpad { <br/>         Text("Hi It is iPad device!") <br/>      } <strong class="lo io">else</strong> { <br/>        Text("Hi It is not iPad device?") <br/>        Button("Check device details", action: {})<br/>    }<br/>  }<br/>}</span></pre><p id="e39f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ç°åœ¨æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸€æ¬¡è¿”å›å¤šä¸ªä¸é€æ˜ç±»å‹</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="133c" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">func</strong> makeHeaderView() -&gt; (<strong class="lo io">some</strong> Equatable, <strong class="lo io">some</strong> Equatable)  {<br/>     (Text("Title Text"), Text("Text"))<br/>}</span></pre><p id="24fd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 8ã€‚ä¸é€æ˜çš„å‚æ•°å£°æ˜</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0341-opaque-parameters.md" rel="noopener ugc nofollow" target="_blank">SE-0341</a>)<strong class="kq io"><br/></strong>ä¸é€æ˜çš„ç»“æœç±»å‹<code class="fe ll lm ln lo b">some P</code>è¡¨ç¤ºä¸€ä¸ªæœªå‘½åçš„ç±»å‹ï¼Œåªæœ‰é€šè¿‡å®ƒçš„çº¦æŸæ‰èƒ½çŸ¥é“:å®ƒç¬¦åˆåè®®<code class="fe ll lm ln lo b">P</code>ã€‚å½“å‚æ•°ç±»å‹ä¸­å‡ºç°ä¸é€æ˜ç±»å‹æ—¶ï¼Œå®ƒä¼šè¢«(æœªå‘½åçš„)æ³›å‹å‚æ•°æ›¿æ¢ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="0ae1" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">func</strong> isSorted(array: [<strong class="lo io">some</strong> Comparable]) -&gt; Bool {<br/>    array == array.sorted()<br/>}</span></pre><p id="9ff3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe ll lm ln lo b"><strong class="kq io">[some Comparable]</strong></code>å‚æ•°ç±»å‹æ„å‘³ç€è¯¥å‡½æ•°ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«ä¸€ç§ç¬¦åˆ<code class="fe ll lm ln lo b"><strong class="kq io">Comparable</strong></code>åè®®çš„ç±»å‹çš„å…ƒç´ ï¼Œè¿™ç›¸å½“äºä¸‹é¢çš„é€šç”¨ä»£ç :</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="d272" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">func</strong> isSorted&lt;T: Comparable&gt;(array: [T]) -&gt; Bool {<br/>    array == array.sorted()<br/>}</span></pre><p id="87ce" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 9ã€‚æ‰©å±•ç»‘å®šæ³›å‹ç±»å‹</strong><a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0361-bound-generic-extensions.md" rel="noopener ugc nofollow" target="_blank"><strong class="kq io">SE-0361</strong></a><strong class="kq io"><br/></strong>æ‰©å±•ç»‘å®šæ³›å‹ç±»å‹ä½¿ç”¨å°–æ‹¬å·ä½œä¸ºç»‘å®šç±»å‹å‚æ•°ï¼Œæˆ–è€…ä½¿ç”¨åŠ ç³–ç±»å‹ï¼Œå¦‚ã€å­—ç¬¦ä¸²ã€‘å’Œ<code class="fe ll lm ln lo b">Int?</code>ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="5cb8" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">extension</strong> Array where Element == String { â€¦ } <br/><strong class="lo io">extension</strong> Array&lt;String&gt; { â€¦ } <br/><strong class="lo io">extension</strong> [String] { â€¦ }</span></pre><p id="68bb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Swift 5.7 ä¹‹å‰çš„ç¼–è¯‘å™¨äº§ç”Ÿå¦‚ä¸‹é”™è¯¯ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="3fce" class="lt lu in lo b gy lv lw l lx ly">extension Array&lt;String&gt; { ... } <strong class="lo io">// error: Constrained extension must be declared on the unspecialized generic type 'Array' with constraints specified by a 'where' clause</strong></span></pre><p id="8a62" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 10ã€‚Swift ä¸­éšå¼æ‰“å¼€çš„å­˜åœ¨æ€§</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0352-implicit-open-existentials.md" rel="noopener ugc nofollow" target="_blank">SE-0352</a>)<strong class="kq io"><br/></strong>å­˜åœ¨æ€§ç±»å‹å…è®¸å­˜å‚¨ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼çš„å…·ä½“ç±»å‹æœªçŸ¥ï¼Œå¹¶ä¸”å¯èƒ½åœ¨è¿è¡Œæ—¶æ”¹å˜ã€‚é‚£ä¸ªå­˜å‚¨å€¼çš„åŠ¨æ€ç±»å‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå­˜åœ¨çš„åº•å±‚ç±»å‹ï¼Œåªæœ‰å®ƒæ‰€ç¬¦åˆçš„åè®®é›†ä»¥åŠå®ƒçš„è¶…ç±»æ‰çŸ¥é“ã€‚è™½ç„¶å­˜åœ¨ç±»å‹å¯¹äºè¡¨è¾¾åŠ¨æ€ç±»å‹çš„å€¼æ˜¯æœ‰ç”¨çš„ï¼Œä½†æ˜¯ç”±äºå®ƒä»¬çš„åŠ¨æ€æ€§è´¨ï¼Œå®ƒä»¬å¿…ç„¶å—åˆ°é™åˆ¶ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="e50b" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">func</strong> square&lt;T: Numeric&gt;(<strong class="lo io">_</strong> number: T) -&gt; T {<br/>    number * number<br/>}</span></pre><p id="d280" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">å½“æˆ‘ä»¬çš„æ•°æ®ç¬¦åˆåè®®æ—¶ï¼Œéšå¼å¼€æ”¾çš„å­˜åœ¨å…è®¸å‡½æ•°å¯è°ƒç”¨ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="205c" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">let</strong> firstItem = 5<br/><strong class="lo io">let</strong> secondItem = 7.0<br/><br/><strong class="lo io">let</strong> numbers: [any Numeric] = [firstItem, secondItem]<br/><br/><strong class="lo io">for</strong> number <strong class="lo io">in</strong> numbers {<br/>    print(double(number))<br/>}</span></pre><p id="c2ac" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">è‹¥è¦æ‰“å¼€å­˜åœ¨ï¼Œå®å‚å¿…é¡»æ˜¯å­˜åœ¨ç±»å‹<code class="fe ll lm ln lo b">any P</code>æˆ–å­˜åœ¨å…ƒç±»å‹<code class="fe ll lm ln lo b"><strong class="kq io">any P.Type</strong></code>ï¼Œå¹¶ä¸”å¿…é¡»æä¾›ç»™ä¸€ä¸ªç±»å‹ä¸ºæ³›å‹å½¢å‚çš„å½¢å‚ï¼Œè¯¥å½¢å‚å¯ä»¥ç›´æ¥ç»‘å®šåˆ°å­˜åœ¨çš„åŸºç¡€ç±»å‹ã€‚</p><p id="f0b7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 11ã€‚æ­£åˆ™è¡¨è¾¾å¼æ–‡å­—</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0354-regex-literals.md" rel="noopener ugc nofollow" target="_blank">SE-0354</a>)<strong class="kq io"><br/></strong>æ­£åˆ™è¡¨è¾¾å¼æ–‡å­—å¯ä»¥ä½¿ç”¨<code class="fe ll lm ln lo b">/.../</code>åˆ†éš”ç¬¦æ¥ç¼–å†™ã€‚ç¼–è¯‘å™¨å°†è§£æ regex æ–‡æœ¬çš„å†…å®¹ï¼Œåœ¨ç¼–è¯‘æ—¶è¯Šæ–­ä»»ä½•é”™è¯¯ã€‚æ•è·ç±»å‹å’Œæ ‡ç­¾æ˜¯æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ä¸­å­˜åœ¨çš„æ•è·ç»„è‡ªåŠ¨æ¨æ–­å‡ºæ¥çš„ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="27b4" class="lt lu in lo b gy lv lw l lx ly">func matchHexAssignment(_ input: String) -&gt; (String, Int)? {<br/>  let regex = /(?&lt;identifier&gt;[[:alpha:]]\w*) = (?&lt;hex&gt;[0-9A-F]+)/<br/>  // regex: Regex&lt;(Substring, identifier: Substring, hex: Substring)&gt;<br/>  <br/>  guard let match = input.wholeMatch(of: regex), <br/>        let hex = Int(match.hex, radix: 16) <br/>  else { return nil }<br/>  <br/>  return (String(match.identifier), hex)<br/>}</span></pre><p id="e763" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 12ã€‚regex builder</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0351-regex-builder.md" rel="noopener ugc nofollow" target="_blank">SE-0351</a>)<br/>Swift 5.7 å¯¹å­—ç¬¦ä¸²å¤„ç†è¿›è¡Œäº†é‡å¤§æ›´æ–°ï¼Œå¼•å…¥äº† regex æ–‡å­—å’Œ<a class="ae lk" href="https://developer.apple.com/documentation/RegexBuilder" rel="noopener ugc nofollow" target="_blank"> RegexBuilder </a>åº“ï¼Œå¹¶é…æœ‰åŒ¹é…æ–¹æ³•å’Œå¼ºç±»å‹æ•è·ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="d3f5" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">let</strong> text = "I like Swift and SwiftUI"<br/><strong class="lo io">let</strong> regex = /I like (?&lt;text1&gt;.+?) and (?&lt;text2&gt;.+?)/<br/><strong class="lo io">if</strong> <strong class="lo io">let</strong> likes = <strong class="lo io">try</strong>? regex.wholeMatch(<strong class="lo io">in</strong>: text) {<br/>    print("Your first choice is \(likes.text1)")<br/>    print("Your second choice is \(likes.text2)")<br/>}</span></pre><p id="df4c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ä½¿ç”¨ RegexBuilderï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ SwiftUI é£æ ¼çš„è¯­è¨€æ„å»ºæˆ‘ä»¬çš„ regex æœç´¢ï¼Œè¿™å¯ä»¥ä½¿å®ƒæ›´å…·å¯è¯»æ€§ï¼Œå¹¶é‡Šæ”¾æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="20ca" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">import</strong> RegexBuilder</span><span id="61f8" class="lt lu in lo b gy mc lw l lx ly"><strong class="lo io">let</strong> text = "I like Swift and SwiftUI"<br/><strong class="lo io">let</strong> word = OneOrMore(.word)<br/><strong class="lo io">let</strong> regex = Regex {<br/>    "I like "<br/>    Capture { word }<br/>    " and "<br/>    Capture { word }<br/>}</span><span id="1796" class="lt lu in lo b gy mc lw l lx ly"><strong class="lo io">if</strong> <strong class="lo io">let</strong> votes = <strong class="lo io">try</strong>? regex.wholeMatch(<strong class="lo io">in</strong>: text) {<br/>  <strong class="lo io">let</strong> (_, bird1, bird2) = votes.output<br/>  print("Your first choice is \(bird1)") <br/>  print("Your second choice is \(bird2)")<br/>}</span></pre><p id="d1ed" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 13ã€‚é¡¶å±‚ä»£ç ä¸­çš„å¹¶å‘</strong>(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0343-top-level-concurrency.md" rel="noopener ugc nofollow" target="_blank">SE-0343</a>)<strong class="kq io"><br/></strong>åœ¨ä¸€ä¸ª macOS å‘½ä»¤è¡Œå·¥å…·é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥å°†ä¸‹é¢çš„ä»£ç ç›´æ¥å†™å…¥ main.swift æ–‡ä»¶ä¸­ã€‚ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„<strong class="kq io"> @main </strong>ç»“æ„ï¼Œå®ƒæœ‰ä¸€ä¸ªå¼‚æ­¥çš„<strong class="kq io"> main() </strong>æ–¹æ³•ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="fd71" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">import</strong> Foundation</span><span id="d5db" class="lt lu in lo b gy mc lw l lx ly"><strong class="lo io">let</strong> url = URL(string: "<a class="ae lk" href="https://api.chucknorris.io/jokes/random" rel="noopener ugc nofollow" target="_blank">https://api.chucknorris.io/jokes/random</a>")!<br/><strong class="lo io">let</strong> (data, <strong class="lo io">_</strong>) = <strong class="lo io">try</strong> <strong class="lo io">await</strong> URLSession.shared.data(from: url)<br/><strong class="lo io">let</strong> jokes= <strong class="lo io">try</strong> JSONDecoder().decode(Jokes.<strong class="lo io">self</strong>, from: data)<br/>print("Found random jokes")</span></pre><p id="2e93" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">14ã€‚ä»å¼‚æ­¥å±æ€§(<a class="ae lk" href="https://github.com/apple/swift-evolution/blob/main/proposals/0340-swift-noasync.md" rel="noopener ugc nofollow" target="_blank">SE-0340</a>)<strong class="kq io"><br/></strong>ä¸å¯ç”¨ Swift å¹¶å‘æ¨¡å‹å…è®¸ä»»åŠ¡åœ¨ä¸åŒçº¿ç¨‹ä¸Šæš‚åœå’Œæ¢å¤ã€‚è™½ç„¶è¿™ç§è¡Œä¸ºå…è®¸æ›´é«˜çš„è®¡ç®—èµ„æºåˆ©ç”¨ç‡ï¼Œä½†æ˜¯å¯¹äºæ¯«æ— é˜²å¤‡çš„ç¨‹åºå‘˜æ¥è¯´ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›ä»¤äººè®¨åŒçš„é™·é˜±ã€‚</p><p id="f212" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">æ‰©å±•<strong class="kq io"> @available </strong>æ¥æ¥å—ä¸€ä¸ª<strong class="kq io"> noasync </strong>å¯ç”¨æ€§ç§ç±»ã€‚<strong class="kq io"> noasync </strong>å¯ç”¨æ€§ç±»å‹é€‚ç”¨äºå¤§å¤šæ•°å£°æ˜ï¼Œä½†ä¸å…è®¸åœ¨ææ„å‡½æ•°ä¸Šä½¿ç”¨ï¼Œå› ä¸ºè¿™äº›ææ„å‡½æ•°æ²¡æœ‰è¢«æ˜¾å¼è°ƒç”¨ï¼Œå¿…é¡»å¯ä»¥ä»ä»»ä½•åœ°æ–¹è°ƒç”¨ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="2e41" class="lt lu in lo b gy lv lw l lx ly"><strong class="lo io">@available(</strong>*<strong class="lo io">, noasync)</strong><br/>func doSomethingNefariousWithNoOtherOptions() { }<br/><br/><strong class="lo io">@available(*, noasync, message</strong>: "use our other shnazzy API instead!"<strong class="lo io">)</strong><br/>func doSomethingNefariousWithLocks() { }<br/><br/><strong class="lo io">func</strong> asyncFun() <strong class="lo io">async</strong> {<br/>  // Error: doSomethingNefariousWithNoOtherOptions is unavailable from<br/>  //        asynchronous contexts<br/>  doSomethingNefariousWithNoOtherOptions()<br/><br/>  // Error: doSomethingNefariousWithLocks is unavailable from asynchronous<br/>  //        contexts; use our other shanzzy API instead!<br/>  doSomethingNefariousWithLocks()<br/>}</span></pre><p id="92fb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe ll lm ln lo b">noasync</code>å¯ç”¨æ€§å±æ€§ä»…é˜»æ­¢ API åœ¨å³æ—¶å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼›åœ¨åŒæ­¥ä¸Šä¸‹æ–‡ä¸­åŒ…è£…å¯¹ä¸å¯ç”¨ API çš„è°ƒç”¨å¹¶è°ƒç”¨åŒ…è£…å™¨ä¸ä¼šå‘å‡ºé”™è¯¯ã€‚è¿™å…è®¸åœ¨å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­ä»¥ç‰¹å®šçš„æ–¹å¼å®‰å…¨åœ°ä½¿ç”¨ APIã€‚</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><p id="afa4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">æ„Ÿè°¢é˜…è¯»ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•æ„è§ã€é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·åœ¨ä¸‹é¢çš„è¯„è®ºåŒºå‘è¡¨ï¼ğŸ‘‡è¯·<strong class="kq io">åˆ†äº«</strong>å¹¶ç»™äºˆ<strong class="kq io">æŒå£°</strong>ğŸ‘ğŸ‘å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ã€‚</p></div></div>    
</body>
</html>