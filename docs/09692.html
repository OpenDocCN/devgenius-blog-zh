<html>
<head>
<title>Redis Geospatial App with Geocoding API, Streamlit and Folium</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redis 地理空间应用程序，带有地理编码 API、Streamlit 和 Folium</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/redis-geospatial-app-with-geocoding-api-streamlit-and-folium-3937029b5420?source=collection_archive---------14-----------------------#2022-09-05">https://blog.devgenius.io/redis-geospatial-app-with-geocoding-api-streamlit-and-folium-3937029b5420?source=collection_archive---------14-----------------------#2022-09-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="9a60" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Redis(远程字典服务器)是最受欢迎的 NoSQL 数据库之一，当谈到快速，内存，缓存，流媒体引擎。</p><p id="ea54" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然而，在本文中，我想谈谈 redis 的另一个特性——地理空间数据结构。</p><p id="1fe0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 Redis 地理空间数据结构，我们可以实时、快速地存储地理空间数据并进行分析。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/3434036fdc1a1ed477df70781ae9057e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-mLsVk8TLRUSsxd7oQrQBA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">Redis 地理空间应用程序</figcaption></figure><p id="807a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这篇文章主要讲 3 件事。</p><ol class=""><li id="4c4f" class="ky kz in jm b jn jo jr js jv la jz lb kd lc kh ld le lf lg bi translated"><strong class="jm io"> Redis GEO 命令<br/> 2。地理编码 API(如何创建 API 键和如何发送请求)<br/> 3。叶(地图库)</strong></li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lh li l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">地理空间应用程序演示</figcaption></figure><h1 id="7513" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak"> 1。Redis GEO 命令</strong></h1><p id="4c44" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">那么，让我们从 Redis GEO 命令开始。在本文中，我打算讨论以下命令。</p><blockquote class="mm mn mo"><p id="990d" class="jk jl mp jm b jn jo jp jq jr js jt ju mq jw jx jy mr ka kb kc ms ke kf kg kh ig bi translated"><strong class="jm io">geo add<br/>geo pos<br/>geo ist<br/>geo search<br/>GEOSEARCHSTORE</strong></p></blockquote><p id="1149" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此，我将演示在 redis-cli 和 python 中使用 Redis GEO 命令。</p><h2 id="7797" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated"><strong class="ak">地理添加</strong></h2><p id="607e" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">让我们开始第一个 GEO 命令。</p><p id="f1f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 GEOADD，我们可以通过指定一个键来存储一个位置的经纬度信息。它还可以用于更新地理空间信息。数据作为一个排序集存储在键中。</p><p id="d4e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">目前我用的是 Redis 7.0.4 版本。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf li l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">GEOADD</figcaption></figure><h2 id="c858" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated"><strong class="ak"> GEOPOS </strong></h2><p id="8109" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">在前面的 before 命令(geoadd)中，我们看到了如何向 Redis 添加位置。</p><p id="2589" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">而是我们如何到达增加的位置。</p><p id="752e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 GEOPOS 命令，我们可以根据一个键访问纬度和经度信息。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf li l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">GEOPOS</figcaption></figure><h2 id="9b83" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated"><strong class="ak">地理学家</strong></h2><p id="4d36" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">GEODIST 命令，指示相对于指定键的两个成员和单位的距离。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf li l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">地理学家</figcaption></figure><h2 id="dcf3" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated">地理研究</h2><p id="8b73" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">GEOSEARCH 是最有用、最强大、最常用的命令之一。</p><p id="7e77" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">基本上，选择的键根据纬度、经度和半径信息给出最近成员的名称、坐标和距离。</p><p id="01fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用按半径有两种类型的选项来查看最近的成员。</p><p id="b324" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ng nh ni nj b"><strong class="jm io">BYRADIUS</strong></code> <strong class="jm io"> : </strong>根据给定的<code class="fe ng nh ni nj b"><strong class="jm io"><em class="mp">&lt;radius&gt;</em></strong></code>在圆形区域内搜索。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/6816485988ad32f1051e1bbb844f5d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PLmmjny_QM7Gq9zVWt4orA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">用叶子进行地理研究</figcaption></figure><p id="5acc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ng nh ni nj b"><strong class="jm io">BYBOX</strong></code> <strong class="jm io"> : </strong>在轴对齐的矩形内搜索，由<code class="fe ng nh ni nj b"><strong class="jm io"><em class="mp">&lt;height&gt;</em></strong></code>和<code class="fe ng nh ni nj b"><strong class="jm io"><em class="mp">&lt;width&gt;</em></strong></code>决定。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/d24a7a3aed877acf919d28a1e265aa10.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*hsBD779lFGyrmhoZ6iEbAg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">BYBOX [ <a class="ae nm" href="https://github.com/redis-developer/introducing-the-geosearch-command" rel="noopener ugc nofollow" target="_blank">介绍地理搜索命令</a></figcaption></figure><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf li l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">地理研究</figcaption></figure><h2 id="d2dd" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated">地理搜索商店</h2><p id="18b7" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">GEOSEARCHSTORE 命令类似于 GEOSEARCH，但将结果存储在 destination key 中。什么是目的密钥？。让我们看一个例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf li l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">地理搜索商店</figcaption></figure><h1 id="9714" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated"><strong class="ak"> 2。地理编码 API(如何创建 API 密钥以及如何发送请求)</strong></h1><p id="fd30" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated"><strong class="jm io">地理编码 API </strong>，它将地址转换为地理坐标(地理编码)，我们可以用它来放置标记或定位地图，这是一个我们将在整个项目中用来检索经度和纬度信息的 API。</p><p id="7c36" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以在这里看到文档。[ <a class="ae nm" href="https://developers.google.com/maps/documentation/geocoding/requests-geocoding" rel="noopener ugc nofollow" target="_blank">地理编码 API </a> ]</p><p id="853c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们需要创建私有 API 密钥。为此，请遵循以下步骤。</p><h2 id="2f6a" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated">启用 API 服务</h2><p id="92b3" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">GCP &gt; API 和服务&gt;库&gt;搜索(地理编码 API)&gt;选择&gt;地理编码 API &gt;单击启用</p><h2 id="5178" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated">创建 API 密钥</h2><p id="bba5" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">谷歌地图平台&gt;凭证</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/7e60f91249831cca3b6c649325fe6e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fuUyMdLchmAp6M1WHh0A9w.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">正在创建 API 密钥</figcaption></figure><p id="aa8d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">到目前为止，一切都很好，然后让我们发送请求到 api。提醒一下，地理编码 API 响应包含<strong class="jm io">近似位置信息</strong>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf li l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">创建请求</figcaption></figure><p id="5410" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们看到了如何简单地向 API 发送请求。但是在使用地理编码 API 时，这种用法不合适。让我们更改它，将结果保存到 redis。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf li l"/></div></figure><h2 id="6ee0" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated"><strong class="ak"> 3。叶子(地图库)</strong></h2><p id="8044" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated"><strong class="jm io"><em class="mp">leave</em></strong>建立在 Python 生态系统的数据争论优势和 Leaflet.js 库的映射优势之上。</p><p id="1726" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"><em class="mp"/></strong>叶是处理交互式地图时最好的库之一。对于这个项目范围，我们将使用<strong class="jm io"><em class="mp"/></strong>来可视化位置(经度、纬度)。</p><p id="4b74" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">是时候将 redis GEO 命令与 leav 库合并了。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nf li l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">含 Redis 的叶子</figcaption></figure><p id="f640" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看起来很迷人。✨🌟⚡</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/2ceb03690a051c00e30527c9b11235d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sUMxUEqleXWoKgrxByjmaA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">代码的结果</figcaption></figure><h2 id="fab6" class="mt lk in bd ll mu mv dn lp mw mx dp lt jv my mz lx jz na nb mb kd nc nd mf ne bi translated"><strong class="ak">结论</strong></h2><p id="a31f" class="pw-post-body-paragraph jk jl in jm b jn mh jp jq jr mi jt ju jv mj jx jy jz mk kb kc kd ml kf kg kh ig bi translated">在本文中，我们通过示例展示了 Redis 如何用于存储地理空间数据，如何与其他 Geocommand 协同工作，以及如何与 folium 交互使用。作为一项额外的工作，可以尝试使用 follow 库在 geosearch 命令中运行 BYBOX 参数。</p><p id="fddb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望在阅读这篇文章的时候，你能有所收获。再见，直到我的下一个帖子。你可以在我的 github 链接下面看到所有的项目细节。祝你今天开心！玩的开心！</p><div class="np nq gp gr nr ns"><a href="https://github.com/TugrulGokce/Redis_Geospatial_App" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd io gy z fp nx fr fs ny fu fw im bi translated">GitHub-tugrugokce/Redis _ Geospatial _ App</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og ks ns"/></div></div></a></div></div></div>    
</body>
</html>