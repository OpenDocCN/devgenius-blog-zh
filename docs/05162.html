<html>
<head>
<title>Effective Java: Know and Use the Libraries</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有效的 Java:了解并使用库</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/effective-java-know-and-use-the-libraries-bbdbee3ded57?source=collection_archive---------7-----------------------#2021-06-25">https://blog.devgenius.io/effective-java-know-and-use-the-libraries-bbdbee3ded57?source=collection_archive---------7-----------------------#2021-06-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/22f3508582d1cf751e47ad7abac90a00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JLndCppzZfN08WxW"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@alfonsmc10?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">阿尔方斯·莫拉莱斯</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="fb17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这一章深入探讨了一个问题，许多开发人员会发现自己不时会陷入这个问题，那就是重新发明轮子。作为开发人员，我们经常想了解一些事情的细节，而不是学习如何使用别人的代码。也就是说，采取这种立场，我们经常给自己带来伤害。</p><p id="884c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们看一个例子。让我们考虑下面的代码。这段代码的工作是在给定的限制内选择一个随机数:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="0d42" class="lk ll iq lg b gy lm ln l lo lp">static Random rnd = new Random();</span><span id="f267" class="lk ll iq lg b gy lq ln l lo lp">static int random(int upperLimit) {<br/>  return Math.abs(rnd.nextInt()) % n;<br/>}</span></pre><p id="5826" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">乍一看，这段代码可能看起来合理，它似乎以简洁的方式完成了工作。即使经过一些快速测试，它似乎做的工作。目前还不明显的是，这段代码有许多问题:</p><ul class=""><li id="a28b" class="lr ls iq kf b kg kh kk kl ko lt ks lu kw lv la lw lx ly lz bi translated">价值的分配是不平等的。这显示的方式将取决于<code class="fe ma mb mc lg b">n</code>是否是 2 的幂，但是由于二进制算术和数论，分布将不相等。</li><li id="5db5" class="lr ls iq kf b kg md kk me ko mf ks mg kw mh la lw lx ly lz bi translated">在极少数情况下(当<code class="fe ma mb mc lg b">rnd.nextInt()</code>返回<code class="fe ma mb mc lg b">Integer.MIN_VALUE</code>时)，代码会通过调用<code class="fe ma mb mc lg b">Math.abs</code>试图使值为正，在这种特殊情况下，T3 仍将返回<code class="fe ma mb mc lg b">Integer.MIN_VALUE</code>。这可能会导致返回一个负数，这可能是代码没有准备好的。这也将是极其难以测试的。</li></ul><p id="b592" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们如何解决这些问题呢？我们干脆用:<code class="fe ma mb mc lg b">Random.nextInt(int)</code>怎么样？虽然这可能不是你想要的有趣的答案，但事实几乎总是如此。Java 中的内置库函数是由专家编写的，在无数的应用程序中使用过，并且被仔细检查过。这并不是对你的编码技能的侮辱，而仅仅是在每种情况下开发的软件类型的事实。你会从中获得一些好处。</p><ul class=""><li id="2ded" class="lr ls iq kf b kg kh kk kl ko lt ks lu kw lv la lw lx ly lz bi translated">您甚至不需要考虑如何完成任务，只需调用函数并继续前进。</li><li id="f1ea" class="lr ls iq kf b kg md kk me ko mf ks mg kw mh la lw lx ly lz bi translated">很可能这些功能的性能会优于你自己的。虽然您可以为您的特定用例编写一个更高性能的函数，但是您能够找到一个比其经过实战检验的版本更快的通用解决方案的可能性很低。</li><li id="c5ad" class="lr ls iq kf b kg md kk me ko mf ks mg kw mh la lw lx ly lz bi translated">当您升级时，您还将从免费改进中受益。即使你什么都不做，你也能看到这些好处。</li></ul><p id="4473" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么为什么没有人使用这些内置函数呢？我认为最常见的原因可能是缺乏熟悉。毫无疑问，Java 的 API 服务是相当庞大的。认为任何人都可以在大脑中有效地容纳所有的 API 空间是愚蠢的。也就是说，有几个过程可以帮助你:</p><ul class=""><li id="63cb" class="lr ls iq kf b kg kh kk kl ko lt ks lu kw lv la lw lx ly lz bi translated">熟悉几个核心包:<code class="fe ma mb mc lg b">java.lang</code>、<code class="fe ma mb mc lg b">java.util</code>、<code class="fe ma mb mc lg b">java.io</code>、<code class="fe ma mb mc lg b">java.streams</code>等。</li><li id="3260" class="lr ls iq kf b kg md kk me ko mf ks mg kw mh la lw lx ly lz bi translated">花点时间阅读每个 Java 版本的发行说明。有了 Java 新的更快的发布周期，这些发行说明可以更容易使用。</li><li id="d821" class="lr ls iq kf b kg md kk me ko mf ks mg kw mh la lw lx ly lz bi translated">希望不用说，但是在发明你自己的版本之前，也在互联网上搜索你的问题的解决方案。这通常足以让您熟悉内置函数。</li></ul><p id="b8ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">即使 Java 语言中有大量的内置函数，仍然会有一些东西不能在核心语言中实现。尽管如此，还是有一些很棒的通用库，你仍然可以利用它们来解决你的问题。像:<code class="fe ma mb mc lg b">Guava</code>、<code class="fe ma mb mc lg b">Apache Commons</code>等库。虽然您不会完全获得内置函数的所有好处，但您会在较小的程度上获得一些好处。</p><p id="023b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然从头实现一个解决方案很有趣，但它很少是正确的解决方案。在实现感觉不独特的功能之前，考虑在核心库中查找，并通过快速互联网搜索来找到现有的、经过审查的解决方案。</p></div></div>    
</body>
</html>