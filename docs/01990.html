<html>
<head>
<title>Tmux — An awesome terminal multiplexer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">tmux——出色的终端多路复用器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/tmux-an-awesome-terminal-multiplexer-62609c6916bb?source=collection_archive---------1-----------------------#2020-07-16">https://blog.devgenius.io/tmux-an-awesome-terminal-multiplexer-62609c6916bb?source=collection_archive---------1-----------------------#2020-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/921486b5ce384b759b564a3c7b47c50f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jyqLVfI7NixWVhVH9pRNew.png"/></div></div></figure><p id="fc6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="#87d3" rel="noopener ugc nofollow">我为什么需要它？</a> <br/> <a class="ae kw" href="#7756" rel="noopener ugc nofollow">什么事？</a> <br/> ∘ <a class="ae kw" href="#d9f6" rel="noopener ugc nofollow"> Tmux 安装</a> <br/> ∘ <a class="ae kw" href="#0176" rel="noopener ugc nofollow"> Tmux 配置</a> <br/> ∘ <a class="ae kw" href="#a715" rel="noopener ugc nofollow"> Tmux 版本、帮助和前缀</a> <br/> ∘ <a class="ae kw" href="#d744" rel="noopener ugc nofollow"> Tmux 服务器</a> <br/> ∘ <a class="ae kw" href="#349e" rel="noopener ugc nofollow"> Tmux 会话</a> <br/> ∘ <a class="ae kw" href="#70e1" rel="noopener ugc nofollow"> Tmux 窗口(标签)</a> <br/> ∘ <a class="ae kw" href="#d1f8" rel="noopener ugc nofollow"> Tmux 窗格</a> <br/> ∘ <a class="ae kw" href="#6f42" rel="noopener ugc nofollow">复制</a></p><h1 id="87d3" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">我为什么需要它？</h1><p id="ea03" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">不用跟踪许多窗口，使用<code class="fe ma mb mc md b">tmux</code>来创建、组织和导航它们。</p><p id="1530" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在远程服务器上使用<code class="fe ma mb mc md b">tmux</code>的一个最大好处是，如果你的互联网连接由于任何原因中断了，<code class="fe ma mb mc md b">tmux</code>会话会保留在服务器上，你可以再次连接。</p><p id="14c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一个很大的好处是，<code class="fe ma mb mc md b">tmux</code>允许您分离和重新连接会话，这样您就可以让您的终端会话在后台运行，以后再恢复它们。</p><h1 id="7756" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">这是什么？</h1><p id="a4a4" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">它是一个软件应用程序，可用于多路复用几个虚拟控制台，允许用户在单个终端窗口或远程终端会话中访问多个独立的终端会话。对于从命令行界面处理多个程序，以及将程序从启动程序的 Unix shell 中分离出来，这是非常有用的。</p><h2 id="d9f6" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 安装</h2><p id="a496" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">安装 tmux(在 OSX): </em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="60cc" class="me ky iq md b gy mz na l nb nc">brew install tmux</span></pre><p id="da74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是，你需要最新版本，以便在 tmux 中更流畅地滚动。</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="042e" class="me ky iq md b gy mz na l nb nc">brew remove tmux<br/>brew install tmux --HEAD</span></pre><p id="0875" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">安装 tmux(在 Ubuntu 中):</em> </strong></p><p id="8ceb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你使用默认回购(<code class="fe ma mb mc md b">sudo apt-get install tmux</code>)安装，你很可能会得到非常旧的版本(如 2018 年 2 月 Ubuntu 14.04 上的 1.8 版本)，它有<code class="fe ma mb mc md b">CTRL-b + [</code>滚动等问题。</p><p id="55ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">因此，使用源代码安装(在 Ubuntu 14.04、16.04 上):</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="dc22" class="me ky iq md b gy mz na l nb nc">sudo apt-get -y remove tmux</span><span id="b8d2" class="me ky iq md b gy nd na l nb nc">sudo apt-get install wget tar libevent-dev libncurses-dev</span><span id="dde4" class="me ky iq md b gy nd na l nb nc">VERSION=2.6 &amp;&amp; mkdir ~/tmux-src &amp;&amp; wget -qO- https://github.com/tmux/tmux/releases/download/${VERSION}/tmux-${VERSION}.tar.gz | tar xvz -C ~/tmux-src &amp;&amp; cd ~/tmux-src/tmux*</span><span id="6626" class="me ky iq md b gy nd na l nb nc">./configure &amp;&amp; make -j"$(nproc)" &amp;&amp; sudo make install</span><span id="c78c" class="me ky iq md b gy nd na l nb nc">cd &amp;&amp; rm -rf ~/tmux-src</span></pre><p id="332c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">重新启动以使更改生效:</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="1b32" class="me ky iq md b gy mz na l nb nc">tmux -V</span></pre><p id="0a58" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">参考:<a class="ae kw" href="https://blog.natetodd.com/compiling-tmux-2-6-on-ubuntu-16-04/" rel="noopener ugc nofollow" target="_blank">https://blog . Nate Todd . com/compilating-tmux-2-6-on-Ubuntu-16-04/</a></p><p id="2140" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可能会遇到这样的情况:您需要在一台您没有 root 访问权限的机器上拥有<code class="fe ma mb mc md b">tmux</code>(比如在远程服务器上)。在这种情况下，下面的脚本可以派上用场:</p><figure class="mr ms mt mu gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="0176" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 配置</h2><p id="df5b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">设置 tmux 加载~/。bash _ 简介:</em> </strong></p><p id="a1ea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">似乎在每个会话中 tmux 都运行<code class="fe ma mb mc md b">~/.bashrc</code>。但是在 OSX，<code class="fe ma mb mc md b">~/.bashrc</code>没有多大意义。因此，错过了会话配置和<code class="fe ma mb mc md b">$PATH</code>设置。作为一种变通方法，我们可以创建<code class="fe ma mb mc md b">~/.bashrc</code>并将设置插入其中，然后将<code class="fe ma mb mc md b">source ~/.bashrc</code>插入<code class="fe ma mb mc md b">~/.bash_profile</code>。</p><p id="6406" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">但是万一你用的是<code class="fe ma mb mc md b">zsh</code>，那么你就可以轻松获得 Mac 和 Ubuntu 之间的一致性。</p><h2 id="a715" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 版本、帮助和前缀</h2><p id="5e81" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir"><em class="mq">tmux 前缀:</em> </strong></p><p id="c74e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于我们的程序(如<code class="fe ma mb mc md b">vim</code>或<code class="fe ma mb mc md b">top</code>)是在<code class="fe ma mb mc md b">tmux</code>中运行的，我们需要一种方法来告诉 tmux 我们输入的命令是针对<code class="fe ma mb mc md b">tmux</code>的，而不是针对底层应用程序的。<code class="fe ma mb mc md b">CTRL-b</code>组合就是这么做的。我们必须在每个 tmux 命令前面加上这个组合键，需要注意的是，我们不会同时按住所有这些键，而是首先同时按下<code class="fe ma mb mc md b">CTRL-b</code>，释放这些键，然后立即按下我们要发送到 tmux 的命令的键。<em class="mq">所以</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX</em></strong></code> <em class="mq">就是</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">CTRL-b</em></strong></code>的意思。</p><p id="0c01" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您也可以将前缀密钥发送到<em class="mq">嵌套的 tmux 会话</em>。例如，如果您在 tmux 客户机或本地机器中，并且在您的一个窗格中 SSH 到远程机器，在 remove machine 上，您可以像平常一样通过<code class="fe ma mb mc md b">tmux attach</code>连接客户机。要将前缀密钥发送到机器的 tmux 客户端，而不是您的本地客户端，<em class="mq">再次点击前缀</em>。</p><p id="9f7b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">列出预定义的按键:</em> </strong></p><p id="d58b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ma mb mc md b">PREFIX ?</code></p><p id="891d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq"/><code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX ?</em></strong></code><em class="mq">，获取所有预定义的</em> <code class="fe ma mb mc md b"><em class="mq">tmux</em></code> <em class="mq">键绑定以及这些触发的相关命令的列表。</em></p><p id="223a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">检查版本:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="b514" class="me ky iq md b gy mz na l nb nc">tmux -V</span></pre><p id="2c91" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:在旧版本(如 1.8)中，滚动有问题。</p><p id="e3d0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">T24】Tmux 帮助:T26】</strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="36c4" class="me ky iq md b gy mz na l nb nc">man tmux<br/>tmux list-commands</span></pre><p id="4857" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">您可以通过</em><code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX</em></strong></code><strong class="ka ir"><em class="mq">+</em></strong><code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">:</em></strong></code><em class="mq">提示符(例如</em><code class="fe ma mb mc md b"><em class="mq">PREFIX</em></code><em class="mq">+</em><code class="fe ma mb mc md b"><em class="mq">:</em></code><em class="mq">-&gt;</em><code class="fe ma mb mc md b"><em class="mq">list-sessions</em></code><em class="mq">)从 tmux 会话内作为 tmux 内部命令运行</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">tmux list-commands</em></strong></code> <em class="mq">中列出的任何命令(例如</em> <code class="fe ma mb mc md b"><em class="mq">tmux list-sessions</em></code> <em class="mq">)。</em></p><h2 id="d744" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 服务器</h2><p id="0edc" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><em class="mq">一个</em> <strong class="ka ir"> <em class="mq">服务器</em> </strong> <em class="mq">持有多个会话。一个</em> <strong class="ka ir"> <em class="mq">会话</em> </strong> <em class="mq">是一个容纳 windows 的容器。一个</em> <strong class="ka ir"> <em class="mq">窗口</em> </strong> <em class="mq">就是 tmux 在你面前打开时你看到的。</em> <strong class="ka ir"> <em class="mq">窗格中的</em> </strong> <em class="mq">都是端子中的端子。</em></p><p id="49d6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当<code class="fe ma mb mc md b">tmux</code>启动时，您通过<a class="ae kw" href="http://0.0.0.0:8000/concepts_linux_and_networking.html#socket-statistics-ss" rel="noopener ugc nofollow" target="_blank">插座</a>连接到服务器。您在 shell 中看到的只是一个客户端连接。</p><p id="7925" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ma mb mc md b">tmux</code>用作<em class="mq">客户端-服务器模式</em>，但是<em class="mq">服务器为你分叉到后台</em>。当您正常使用<code class="fe ma mb mc md b">tmux</code>时，服务器启动并通过客户端连接。</p><p id="6798" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">tmux 的服务器部分是您的会话保持活动的方式，即使当您的客户机分离时也是如此。您可以从 SSH 服务器分离 tmux 会话，稍后重新连接。您可以分离 tmux 会话，在 Linux/BSD 中停止您的 X 服务器，并在 TTY 或新的 X 服务器中重新连接您的 tmux 会话。<em class="mq"/><code class="fe ma mb mc md b"><em class="mq">tmux</em></code><em class="mq">服务器不会离开，直到所有会话都关闭。</em></p><p id="12e6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">服务器默认名称为</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">default</em></strong></code> <em class="mq">，作为</em> <a class="ae kw" href="http://0.0.0.0:8000/concepts_linux_and_networking.html#socket-statistics-ss" rel="noopener ugc nofollow" target="_blank"> <em class="mq">套接字</em> </a> <em class="mq">存储在</em> <code class="fe ma mb mc md b"><em class="mq">/tmp</em></code> <em class="mq">中。</em>通过设置<code class="fe ma mb mc md b">TMUX_TMPDIR</code>环境变量，可以覆盖存储该文件的默认目录。</p><p id="7c1b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">我们可以通过</em>检索活动客户端连接列表</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="53aa" class="me ky iq md b gy mz na l nb nc">tmux list-clients</span></pre><h2 id="349e" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 会话</h2><p id="ebe0" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">会话是驻留在服务器实例中的最高级别的实体。服务器实例在启动新实例时被分支到后台，并在重新附加会话时重新连接到。您与 tmux 的交互将至少运行一个会话。</p><p id="f9ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个会话包含一个或多个窗口。活动窗口旁边会有一个<code class="fe ma mb mc md b">*</code>符号。</p><p id="f2d1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">创建未命名会话:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="4e0f" class="me ky iq md b gy mz na l nb nc">tmux new-session</span><span id="66af" class="me ky iq md b gy nd na l nb nc"># or</span><span id="87d2" class="me ky iq md b gy nd na l nb nc">tmux new</span><span id="fb9a" class="me ky iq md b gy nd na l nb nc"># or</span><span id="0980" class="me ky iq md b gy nd na l nb nc">tmux</span></pre><p id="1dfb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">只需键入</em> <code class="fe ma mb mc md b"><em class="mq">tmux</em></code> <em class="mq">即可创建一个新的未命名(用某个数字自动命名)会话。</em></p><p id="7515" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">创建命名会话:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="2627" class="me ky iq md b gy mz na l nb nc">tmux new-session -s the_session_name</span><span id="9fe2" class="me ky iq md b gy nd na l nb nc"># or</span><span id="58a4" class="me ky iq md b gy nd na l nb nc">tmux new -s the_session_name</span></pre><p id="1b2e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">tmux new -s &lt;session_name&gt;</em></code><em class="mq">是首选方式。这里</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">s</em></strong></code> <em class="mq">的意思是“会话名”。</em></p><p id="a4f2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">重命名当前会话:</em> </strong></p><p id="453e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果不命名会话，就很难跟踪会话包含的内容。有时，您可能会忘记您已经打开了一个项目，尤其是如果您的机器已经运行了几天、几周或几个月。</p><p id="2d9b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX $</em></strong></code> <em class="mq">重命名一个会话，但用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX ,</em></strong></code> <em class="mq">重命名一个窗口(tab)。</em>状态栏将被暂时提示到文本字段中，以允许更改会话名称。</p><p id="b9c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">在后台创建新会话:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="f159" class="me ky iq md b gy mz na l nb nc">tmux new -s the_session_name -d</span></pre><p id="21fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">注意末尾的</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">-d</em></strong></code> <em class="mq">选项，该选项分离已创建的会话。</em></p><p id="a0ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">分离当前会话:</em> </strong></p><p id="bc22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ma mb mc md b">PREFIX d</code></p><p id="fb7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX d</em></strong></code> <em class="mq">分离现有会话。</em></p><p id="4866" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">列出已有的会话:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="2d25" class="me ky iq md b gy mz na l nb nc">tmux list-sessions</span><span id="60fc" class="me ky iq md b gy nd na l nb nc"># or</span><span id="b058" class="me ky iq md b gy nd na l nb nc">tmux ls</span></pre><p id="5677" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">要列出所有已有的会话，执行</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">tmux ls</em></strong></code> <em class="mq">。</em></p><p id="120c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">检查给定名称的会话是否存在:</em> </strong></p><p id="9f9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">如果你正在编写</em> <code class="fe ma mb mc md b"><em class="mq">tmux</em></code> <em class="mq">的脚本，你会想看看一个会话是否存在。</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">has-session</em></strong></code> <em class="mq">如果会话存在将返回一个</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">0</em></strong></code> <strong class="ka ir"> <em class="mq">退出代码</em> </strong> <em class="mq">，但是如果会话不存在将报告一个</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">1</em></strong></code> <strong class="ka ir"> <em class="mq">退出代码</em> </strong> <em class="mq">和</em> <strong class="ka ir"> <em class="mq">打印一个错误</em> </strong> <em class="mq">。</em></p><p id="a643" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">举个例子，</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="a1d7" class="me ky iq md b gy mz na l nb nc">tmux has-session -t MG; echo $?                  # 0<br/>tmux has-session -t does_not_exist; echo $?      # 1</span></pre><p id="dc46" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这里，<code class="fe ma mb mc md b">-t</code>代表目标会话。</p><p id="86c2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">附加命名会话:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="ace6" class="me ky iq md b gy mz na l nb nc">tmux attach -t the_session_name</span></pre><p id="1e74" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注:此处<code class="fe ma mb mc md b">t</code>表示“目标会话”。</p><p id="1a0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将我们置于“会话名称”tmux 会话中。</p><p id="fb1e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">附加到最后一个 tmux 会话:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="fbcf" class="me ky iq md b gy mz na l nb nc">tmux attach</span><span id="17dd" class="me ky iq md b gy nd na l nb nc"># or</span><span id="48d9" class="me ky iq md b gy nd na l nb nc">tmux a</span></pre><p id="4275" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">您可以使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">tmux a</em></strong></code> <em class="mq">连接到上一个 tmux 会话，然后使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX s</em></strong></code> <em class="mq">很容易从一个会话切换到另一个会话，您也可以使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX w</em></strong></code> <em class="mq">切换到该会话中的特定窗口(选项卡)。</em></p><p id="6aa5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">切换到另一个现有会话:</em> </strong></p><p id="076b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ma mb mc md b">PREFIX s</code></p><p id="73a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">您可以使用</em> <code class="fe ma mb mc md b"><em class="mq">PREFIX s</em></code> <em class="mq">交互式切换到一个会话。这里的</em> <code class="fe ma mb mc md b"><em class="mq">s</em></code> <em class="mq">是会话的意思。</em></p><p id="1c95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">它列出了可供选择会话列表。</p><p id="5fbb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:使用<code class="fe ma mb mc md b">s</code>切换会话，使用<code class="fe ma mb mc md b">w</code>切换标签。</p><p id="7b6b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以在 tmux 中切换会话:</p><ul class=""><li id="d128" class="ng nh iq ka b kb kc kf kg kj ni kn nj kr nk kv nl nm nn no bi translated"><code class="fe ma mb mc md b">PREFIX</code> + <code class="fe ma mb mc md b">(</code>:将连接的客户端切换到之前的会话</li><li id="4f42" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><code class="fe ma mb mc md b">PREFIX</code> + <code class="fe ma mb mc md b">)</code>:将连接的客户端切换到下一个会话</li><li id="2649" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><code class="fe ma mb mc md b">PREFIX</code> + <code class="fe ma mb mc md b">s</code>:从会话列表中为连接的客户端交互选择会话</li></ul><p id="4486" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">退出会话:</em> </strong></p><p id="cc68" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ma mb mc md b">exit</code>或<code class="fe ma mb mc md b">CTRL-d</code></p><p id="5cce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">关闭当前会话的所有标签页，使用</em> <code class="fe ma mb mc md b"><em class="mq">exit</em></code> <em class="mq">或</em> <code class="fe ma mb mc md b"><em class="mq">CTRL-d</em></code> <em class="mq">退出当前会话。</em></p><p id="d48a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">杀死会话:</em> </strong></p><p id="3d9d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以为一个会话中的所有窗口键入<code class="fe ma mb mc md b">exit</code>(不带引号)来销毁该会话，但是我们也可以使用<code class="fe ma mb mc md b">kill-session</code>命令终止会话。</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="e8f0" class="me ky iq md b gy mz na l nb nc">tmux kill-session -t the_session_name</span></pre><p id="7d5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这对于会话中的程序挂起的情况很有用。</p><h2 id="70e1" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 窗口(选项卡)</h2><p id="3da3" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">Windows 支持窗格。它们驻留在会话中。它们也有布局，可以是许多预设尺寸之一，也可以是通过调整窗格大小定制的尺寸。</p><p id="e232" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">所有会话开始时至少有一个窗口(标签)打开。在那里，你可以随意创建和删除窗口。</em></p><p id="43d9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">窗口索引是<code class="fe ma mb mc md b">tmux</code>用来确定排序的数字。第一个窗口的索引是<code class="fe ma mb mc md b">0</code>，除非您在配置中通过<code class="fe ma mb mc md b">base-index</code>设置它。</p><p id="9708" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">就像会话一样，窗口也可以有名称。给它们贴上标签有助于记录你在里面做了什么。</p><p id="b1ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:在 Tmux 中，窗口(选项卡)实际上是指窗口，但我们更愿意称它们为选项卡，以免与 Vim 混淆。</p><p id="1a2c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">创建和命名窗口:</em> </strong></p><p id="b78d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX c</em></strong></code> <em class="mq">(此处</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">c</em></strong></code> <em class="mq">意为“创建窗口(tab)”)从</em> <code class="fe ma mb mc md b"><em class="mq">tmux</em></code> <em class="mq">内创建一个新窗口。您可以使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX ,</em></strong></code> <em class="mq">快捷键来重命名窗口。注意我们用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX $</em></strong></code> <em class="mq">重命名一个会话，但是我们用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX ,</em></strong></code> <em class="mq">重命名一个窗口(tab)。</em></p><p id="df7a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">像这样创建一个窗口(选项卡)会自动使新窗口(选项卡)成为焦点。从这里，我们可以启动另一个应用程序。此窗口(选项卡)的名称会根据当前运行的应用程序而改变，因为我们在创建它时从未给它一个默认名称。让我们给这个窗口(选项卡)一个合适的名字。</p><p id="d3f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">切换窗口:</em> </strong></p><p id="2640" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">移动窗口有四种方式:</em></p><ul class=""><li id="849e" class="ng nh iq ka b kb kc kf kg kj ni kn nj kr nk kv nl nm nn no bi translated"><em class="mq">通过</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX p</em></strong></code> <em class="mq"> ( </em> <code class="fe ma mb mc md b"><em class="mq">p</em></code> <em class="mq">表示上一个)</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX n</em></strong></code> <em class="mq"> ( </em> <code class="fe ma mb mc md b"><em class="mq">n</em></code> <em class="mq">表示下一个)</em>进行迭代</li><li id="43d5" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq"/><code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFEX b</em></strong></code>之间切换<em class="mq"> ( </em> <code class="fe ma mb mc md b"><em class="mq">b</em></code> <em class="mq">表示后退)两个窗口之间</em></li><li id="e647" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">从</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX w</em></strong></code> <em class="mq">显示的列表中交互选择窗口(此处</em> <code class="fe ma mb mc md b"><em class="mq">w</em></code> <em class="mq">为窗口)。注意:使用</em> <code class="fe ma mb mc md b"><em class="mq">s</em></code> <em class="mq">切换会话，使用</em> <code class="fe ma mb mc md b"><em class="mq">w</em></code> <em class="mq">切换窗口(tab)。</em></li><li id="d7ab" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">通过窗口索引，如</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX 1</em></strong></code> <em class="mq">、</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX 2</em></strong></code> <em class="mq">，直接进入特定窗口。默认情况下，tmux 中的窗口(选项卡)都有一个编号，以</em> <code class="fe ma mb mc md b"><em class="mq">0</em></code> <em class="mq">开头。我们可以用</em> <code class="fe ma mb mc md b"><em class="mq">PREFIX 0</em></code> <em class="mq">快速跳转到第一个窗口(tab)。</em></li><li id="fe2a" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX '</em></strong></code>提示窗口索引(对大于 <code class="fe ma mb mc md b"><em class="mq">9</em></code> <em class="mq">的索引有用)</em></li><li id="046b" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX f</em></strong></code> <em class="mq"> ( </em> <code class="fe ma mb mc md b"><em class="mq">f</em></code> <em class="mq">表示查找)</em>通过名称查找，也可以切换到特定的窗口(选项卡)</li></ul><p id="cdae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">重新排序窗口:</em> </strong></p><p id="c1bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">窗口也可以通过<code class="fe ma mb mc md b"><strong class="ka ir">move-window</strong></code>及其相关快捷方式逐个重新排序。它的一般语法是:</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="7725" class="me ky iq md b gy mz na l nb nc">tmux move-window [-s window_moving_from] -t window_moving_to</span><span id="7286" class="me ky iq md b gy nd na l nb nc"># if source is not specified, then it is assumed to be current window<br/># the target window must not be already occupied</span></pre><p id="bc3b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用<code class="fe ma mb mc md b"><strong class="ka ir">movew</strong></code>作为<code class="fe ma mb mc md b">move-window</code>的快捷方式。</p><p id="fa50" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">举个例子，</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="30a1" class="me ky iq md b gy mz na l nb nc">tmux movew -t2         # move current window to number 2<br/>tmux movew -s2 -t1   # move window 2 to window 1</span></pre><p id="4f35" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">提示输入索引移动当前窗口的快捷方式是</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX .</em></strong></code> <em class="mq">(然后是</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">&lt;N&gt;</em></strong></code> <em class="mq">)。即先按下</em> <code class="fe ma mb mc md b"><em class="mq">PREFIX .</em></code> <em class="mq">然后提供新的窗口(tab)号(那个窗口(tab)号应该还没有)。</em></p><p id="fd5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在一个<code class="fe ma mb mc md b">tmux</code>会话中同时运行多个命令是可能的，也是非常常见的。我们可以用窗口(标签)来组织这些，这类似于图形终端模拟器或 web 浏览器中的窗口(标签)。</p><p id="ff11" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">使用命名的第一个窗口(选项卡)创建新会话:</em> </strong></p><p id="b3dd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ma mb mc md b"><strong class="ka ir">tmux new -s the_session_name -n the_window_name</strong></code></p><p id="307f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">这里，通过使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">-n</em></strong></code> <em class="mq">标志，我们告诉 tmux 给窗口(tab)命名，这样我们就可以很容易地识别它。</em></p><p id="e34d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注:此处<code class="fe ma mb mc md b"><strong class="ka ir">n</strong></code>表示“窗口名”。</p><p id="8a8a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意:我更喜欢在创建窗口(选项卡)后给它命名。</p><p id="cdac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">将当前窗格移动到新窗口(tab): </em> </strong></p><p id="693b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">方式一:<code class="fe ma mb mc md b">PREFIX !</code></p><p id="9af2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">方式二:先按:<code class="fe ma mb mc md b">PREFIX :</code>，再敲<code class="fe ma mb mc md b">break-pane</code>。</p><p id="d0a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">列表窗口(或标签页):</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="931a" class="me ky iq md b gy mz na l nb nc">tmux list-windows [-t target_session]</span></pre><p id="3e6e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">list-windows</em></code><em class="mq">列出给定目标会话的所有窗口(默认为当前会话)。</em></p><p id="3034" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">关闭或关闭一个窗口(tab): </em> </strong></p><p id="493b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">要关闭一个窗口(tab)，我们可以在窗口(tab)的提示中键入</em> <code class="fe ma mb mc md b"><em class="mq">exit</em></code> <em class="mq">或</em> <code class="fe ma mb mc md b"><em class="mq">CTRL-d</em></code> <em class="mq">。</em></p><p id="94bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者，我们可以使用<code class="fe ma mb mc md b">PREFIX &amp;</code>，在关闭窗口(tab)之前，它会在状态栏中给出一条确认消息。如果我们接受，我们的前一个窗口(选项卡)将成为焦点。要完全关闭 tmux 会话，我们必须关闭所有窗口(选项卡)。</p><p id="6fab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在当前窗口中使用命令行，您可以终止一个窗口，如下所示:</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="e578" class="me ky iq md b gy mz na l nb nc">tmux kill-window</span></pre><p id="6ede" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另一件事，当脚本或试图从外面杀死窗口，使用窗口索引的目标。举个例子，</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="c829" class="me ky iq md b gy mz na l nb nc">tmux kill-window -t2</span></pre><h2 id="d1f8" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 窗格</h2><p id="b969" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">窗格是封装外壳的<a class="ae kw" href="https://en.wikipedia.org/wiki/Pseudoterminal" rel="noopener ugc nofollow" target="_blank">伪终端</a>(例如 Bash、Zsh)。它们位于一个窗口内。</p><p id="f9f7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在 tmux 中，我们可以垂直或水平分割窗口(标签)。</p><p id="0d69" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">垂直分割:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="de96" class="me ky iq md b gy mz na l nb nc">PREFIX %</span><span id="e215" class="me ky iq md b gy nd na l nb nc">split-window -v</span></pre><p id="3b9f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">在 tmux 会话中，按</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX %</em></strong></code> <em class="mq">，标签页将从中间分开，并在新窗格中启动第二个会话。此外，焦点将移动到这个新窗格。</em></p><p id="65de" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">例如，</em></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="a9d7" class="me ky iq md b gy mz na l nb nc"># spitting window with id `0` of session named `session_name` vertically with<br/># 50% width and running `watch iostat` on newly created pane (that is, pane<br/># with id `1` if window was not split before<br/>tmux split-window -t session_name:0 -v -p 50 'watch iostat'<br/># bring focus back on pane 0 from pane 1</span><span id="3004" class="me ky iq md b gy nd na l nb nc">tmux select-pane -t session_name:0.0</span></pre><p id="215d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">用于选择窗格的格式</em> <code class="fe ma mb mc md b"><em class="mq">&lt;session_name&gt;:&lt;window_number&gt;.&lt;pane_number&gt;</em></code> <em class="mq">(带入给定的窗格焦点)。</em></p><p id="9add" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">注意:</em></p><ul class=""><li id="054e" class="ng nh iq ka b kb kc kf kg kj ni kn nj kr nk kv nl nm nn no bi translated"><em class="mq">对于目标窗口，拆分将发生在当前聚焦的窗格上</em></li><li id="0b8f" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">给定命令在新创建的面板上运行</em></li><li id="9b17" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">新创建的窗格自动获得焦点</em></li><li id="c925" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">要聚焦一个特定的窗格，使用</em> <code class="fe ma mb mc md b"><em class="mq">tmux select-pane</em></code> <em class="mq">命令</em></li><li id="3a27" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">命令与</em>命令一起传递<code class="fe ma mb mc md b"><em class="mq">split-window</em></code>命令不应该退出；如果它退出，相应的窗格将不复存在</li><li id="25d8" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">使用</em> <code class="fe ma mb mc md b"><a class="ae kw" href="http://0.0.0.0:8000/linux_regex_vim_tmux_git.html#the-send-keys" rel="noopener ugc nofollow" target="_blank"><em class="mq">tmux send-keys</em></a></code> <em class="mq">命令向 id 为</em>T5 的窗格发送密钥</li><li id="1ed6" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><em class="mq">一旦用初始命令启动，tmux 不提供向窗格添加额外进程的方法。由初始命令进程(通常是一个 shell)来为该终端提供作业控制。</em></li></ul><p id="66ff" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">参考文章</em> <a class="ae kw" href="https://davidtranscend.com/blog/tmux-script-percentage-issue/" rel="noopener ugc nofollow" target="_blank"> <em class="mq"> tmux 脚本百分比问题</em> </a> <em class="mq">。</em></p><p id="7e2f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">水平分割:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="c32a" class="me ky iq md b gy mz na l nb nc">PREFIX "</span><span id="1cbe" class="me ky iq md b gy nd na l nb nc">split-window -h</span></pre><p id="8ac2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">按下</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX "</em></strong></code> <em class="mq">(双引号)会将当前窗格水平分成两半。</em></p><p id="785b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">从一个窗格移动到另一个:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="e6b1" class="me ky iq md b gy mz na l nb nc"># move to another pane using arrow keys<br/>PREFIX up_arrow/down_arrow/left_arrow/right_arrow</span><span id="2656" class="me ky iq md b gy nd na l nb nc"># select next pane in the current window<br/>PREFIX o</span><span id="8085" class="me ky iq md b gy nd na l nb nc"># move to previously active pane<br/>PREFIX ;</span></pre><p id="c127" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">要循环浏览窗格，按</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX o</em></strong></code> <em class="mq">。我们也可以使用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX</em></strong></code> <em class="mq">，然后用上下左右键来移动窗格。</em></p><p id="acd2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你喜欢<code class="fe ma mb mc md b">Vi</code> (hjkl)，把这些添加到你的配置中:</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="00da" class="me ky iq md b gy mz na l nb nc"># hjkl pane traversal<br/>bind h select-pane -L<br/>bind j select-pane -D<br/>bind k select-pane -U<br/>bind l select-pane -R</span></pre><p id="779b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">放大一个窗格:</em> </strong></p><p id="b988" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">要放大一个窗格，导航至该窗格并执行</em> <code class="fe ma mb mc md b"><em class="mq">PREFIX z</em></code> <em class="mq">。再次按下</em> <code class="fe ma mb mc md b"><em class="mq">PREFIX z</em></code> <em class="mq">可以取消缩放。</em></p><p id="fd8e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">调整大小窗格:</em> </strong></p><p id="bdfd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">可通过窗口布局和</em> <code class="fe ma mb mc md b"><em class="mq">resize-pane</em></code> <em class="mq">在窗口内调整窗格尺寸。调整快捷键大小:</em></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="f350" class="me ky iq md b gy mz na l nb nc">Prefix M-Up             resize-pane -U 5<br/>Prefix M-Dow            resize-pane -D 5<br/>Prefix M-Lef            resize-pane -L 5<br/>Prefix M-Rig            resize-pane -R 5<br/>Prefix C-Up             resize-pane -U<br/>Prefix C-Dow            resize-pane -D<br/>Prefix C-Lef            resize-pane -L<br/>Prefix C-Rig            resize-pane -R</span></pre><p id="261e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">窗格布局:</em> </strong></p><p id="ec36" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用 tmux 的几种默认窗格布局:</p><ul class=""><li id="6874" class="ng nh iq ka b kb kc kf kg kj ni kn nj kr nk kv nl nm nn no bi translated"><code class="fe ma mb mc md b">even-horizontal</code>从左到右水平堆叠所有窗格</li><li id="923a" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated">从上到下垂直堆叠所有窗格</li><li id="9e7f" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><code class="fe ma mb mc md b">main-horizontal</code>在顶部创建一个较大的窗格，在下方创建较小的窗格</li><li id="a79c" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><code class="fe ma mb mc md b">main-vertical</code>在屏幕左侧创建一个大窗格，并在右侧垂直堆叠其余窗格</li><li id="1a61" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><code class="fe ma mb mc md b">titled</code>在屏幕上均匀排列所有窗格</li></ul><p id="6f96" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">快捷键<code class="fe ma mb mc md b"><strong class="ka ir">PREFIX &lt;SPACE&gt;</strong></code>切换窗口布局。这些是自动调整窗格比例的预设配置。特定的修饰可以通过调整窗格大小来完成。</p><p id="a684" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要重置布局的比例(如在分割或调整窗格大小后)，必须再次运行布局的<code class="fe ma mb mc md b"><strong class="ka ir">tmux select-layout</strong></code>。</p><p id="c174" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以通过按下<code class="fe ma mb mc md b">PREFIX spacebar</code>循环浏览这些布局。</p><p id="7f0d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">清单窗格:</em> </strong></p><p id="4158" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">可使用</em> <code class="fe ma mb mc md b"><em class="mq">list-panes</em></code> <em class="mq">命令列出给定目标窗口(默认为当前窗口)的窗格:</em></p><p id="ecf0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">目标窗口可以以</em> <code class="fe ma mb mc md b"><em class="mq">&lt;session_name&gt;:&lt;window_number&gt;</em></code> <em class="mq">(如果传递了会话名)或</em> <code class="fe ma mb mc md b"><em class="mq">%&lt;window_number&gt;</em></code> <em class="mq">(当前会话)的格式传递。</em></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="cd38" class="me ky iq md b gy mz na l nb nc">tmux list-panes [-t target_window]</span></pre><p id="bf5e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">举个例子，</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="6c51" class="me ky iq md b gy mz na l nb nc">tmux list-sessions<br/># 11: 1 windows (created Thu Jun 27 10:33:22 2019)<br/># 12: 1 windows (created Thu Jun 27 10:41:09 2019) (attached)<br/># 2: 1 windows (created Mon Jun 24 10:15:33 2019) (attached)<br/># MG: 8 windows (created Mon Jun 24 10:10:36 2019) (attached)</span><span id="6fd9" class="me ky iq md b gy nd na l nb nc">tmux list-windows -t MG<br/># 0: random (1 panes) [236x55] [layout c45d,236x55,0,0,0] @0<br/># 1: docs-vim- (1 panes) [236x55] [layout c45e,236x55,0,0,1] @1<br/># 2: docs-cmd* (1 panes) [236x55] [layout c45f,236x55,0,0,2] @2 (active)<br/># 3: script (1 panes) [236x55] [layout c460,236x55,0,0,3] @3<br/># 4: sys-status (4 panes) [236x55] [layout 9ffb,236x55,0,0[236x24,0,0,4,236x30,0,25{78x30,0,25,5,78x30,79,25,6,78x30,158,25,7}]] @4<br/># 5: pr-vim (2 panes) [236x55] [layout 73d2,236x55,0,0{118x55,0,0,8,117x55,119,0,19}] @5<br/># 6: pr-cmd-n-log (2 panes) [236x55] [layout 6f96,236x55,0,0{117x55,0,0,9,118x55,118,0,10}] @6<br/># 7: pr-files (2 panes) [236x55] [layout 1bf2,236x55,0,0{117x55,0,0,11,118x55,118,0,12}] @7</span><span id="4ad5" class="me ky iq md b gy nd na l nb nc">tmux list-panes -t MG:4<br/># 0: [236x24] [history 0/10000, 0 bytes] %4<br/># 1: [78x30] [history 9846/10000, 3708072 bytes] %5<br/># 2: [78x30] [history 6/10000, 1214 bytes] %6<br/># 3: [78x30] [history 0/10000, 0 bytes] %7 (active)</span></pre><p id="55a8" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">关闭窗格:</em> </strong></p><p id="b982" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以像退出终端会话或 tmux 标签一样关闭窗格:我们只需在窗格中输入<code class="fe ma mb mc md b">exit</code>。</p><p id="2843" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">也可以用<code class="fe ma mb mc md b">PREFIX x</code>干掉一个窗格。像这样杀死一个窗格对于窗格卡住或者你不能再与它交互的情况是非常好的。</p><p id="6d7e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">向所有窗格发送命令:</em> </strong></p><p id="0898" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">开始同步:</em></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="2d32" class="me ky iq md b gy mz na l nb nc">PREFIX :<br/># `setw` is alias for `set-window-option`<br/># `set` is alias for `set-option`<br/># `set` is used to set global options<br/>setw synchronize-panes on<br/>clear history</span></pre><p id="4ff9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">停止同步:</em></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="b6c9" class="me ky iq md b gy mz na l nb nc">PREFIX :<br/>setw synchronize-panes off</span></pre><h2 id="6f42" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 中的复制模式、滚动和搜索</h2><p id="2ca4" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">在 tmux 内滚动:</em> </strong></p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="d41b" class="me ky iq md b gy mz na l nb nc">PREFIX [</span></pre><p id="89a7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">按</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX-[</em></strong></code> <em class="mq">进入</em> <strong class="ka ir"> <em class="mq">复制模式</em> </strong> <em class="mq">然后你可以使用你常用的导航键(如向上箭头或 PgDn)左右滚动。按</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">q</em></strong></code> <em class="mq">或</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">ESC</em></strong></code> <em class="mq">退出滚动模式。</em></p><p id="3df7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">在 tmux 历史滚动屏幕中搜索:</em> </strong></p><p id="157d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要在<code class="fe ma mb mc md b">tmux</code>历史缓冲区中搜索当前窗口(tab)，按<code class="fe ma mb mc md b">PREFIX-[</code>进入<strong class="ka ir">复制模式</strong>。然后用<code class="fe ma mb mc md b"><strong class="ka ir">?</strong></code>向后搜索<strong class="ka ir">或用<code class="fe ma mb mc md b"><strong class="ka ir">/</strong></code>向前搜索<strong class="ka ir"/>。</strong></p><p id="4f1d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">偏好:我比较喜欢用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">PREFIX-[</em></strong></code> <em class="mq">再用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">/</em></strong></code> <em class="mq">，再用</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">N</em></strong></code> <em class="mq">向上滚动。</em></p><p id="8a82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">复制粘贴:</em> </strong></p><p id="2b6f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以输入<code class="fe ma mb mc md b">PREFIX-[</code>进入<strong class="ka ir">复制模式</strong>，然后按<code class="fe ma mb mc md b">SPACEBAR-KEY</code>触发选择模式，您可以使用箭头键调整选择。选择完成后，按<code class="fe ma mb mc md b">ENTER-KEY</code>复制所选文本。稍后可使用<code class="fe ma mb mc md b">PREFIX-]</code>粘贴复制的文本。</p><p id="59e5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于类似复制粘贴的<code class="fe ma mb mc md b">vi</code>,将以下内容添加到您的 tmux 配置文件中:</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="d819" class="me ky iq md b gy mz na l nb nc">set-window-option -g mode-keys vi<br/>bind-key -t vi-copy 'v' begin-selection<br/>bind-key -t vi-copy 'y' copy-selection</span></pre><h2 id="d648" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 插件管理器</h2><p id="52cb" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">参考:<a class="ae kw" href="https://github.com/tmux-plugins/tpm" rel="noopener ugc nofollow" target="_blank">https://github.com/tmux-plugins/tpm</a></p><p id="3776" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">插件:</em></strong><code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">tmux-better-mouse-mode</em></strong></code><strong class="ka ir"><em class="mq">:</em></strong></p><p id="9c19" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个插件的灵感来自于“David Verhasselt”在 tmux 中让滚动更好的工作。</p><p id="f542" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">参考:<a class="ae kw" href="https://github.com/NHDaly/tmux-better-mouse-mode" rel="noopener ugc nofollow" target="_blank">https://github.com/NHDaly/tmux-better-mouse-mode</a></p><p id="4c90" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">新增和安装新插件的步骤:</em> </strong></p><ol class=""><li id="031d" class="ng nh iq ka b kb kc kf kg kj ni kn nj kr nk kv nu nm nn no bi translated">用<code class="fe ma mb mc md b">set -g @plugin '...'</code>语句向<code class="fe ma mb mc md b">~/.tmux.conf</code>添加新插件。</li><li id="febf" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nu nm nn no bi translated">按下<code class="fe ma mb mc md b"><strong class="ka ir">PREFIX + I</strong></code>(大写<code class="fe ma mb mc md b">I</code>，如 Install)来获取插件。</li><li id="2691" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nu nm nn no bi translated">按<code class="fe ma mb mc md b"><strong class="ka ir">PREFIX + U</strong></code>(大写<code class="fe ma mb mc md b">U</code>)更新所有插件</li></ol><figure class="mr ms mt mu gt jr"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="ac49" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 命令模式</h2><p id="a83d" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">到目前为止，我们已经使用组合键创建了选项卡和窗格，但是那些键绑定实际上只是带有一些预设选项的 tmux 命令的快捷键。</p><p id="24bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们可以通过两种方式执行 tmux 命令:从终端本身或者从 tmux 状态栏中的“命令区”执行。</p><p id="7a43" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="mq">进入命令模式:</em> </strong></p><p id="3cf7" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe ma mb mc md b">PREFIX :</code></p><p id="fce5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要进入命令模式，请在运行的 tmux 会话中按下<code class="fe ma mb mc md b">PREFIX :</code>(冒号)。状态栏会改变颜色，我们会得到一个命令提示符，指示我们键入命令。</p><p id="483e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，您可以通过发出<code class="fe ma mb mc md b">source /path/to/config.conf</code>来重新加载 tmux 配置。或者，您可以通过命令行获得与<code class="fe ma mb mc md b">tmux source-file /path/to/config.conf</code>相同的结果。</p><h2 id="ddef" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 格式</h2><p id="482b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><code class="fe ma mb mc md b">tmux</code>提供了一个最小的模板语言和一组变量来访问关于<code class="fe ma mb mc md b">tmux</code>环境的信息。</p><p id="9070" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">格式通过</em> <code class="fe ma mb mc md b"><em class="mq">-F</em></code> <em class="mq">标志指定。替换变量包含在</em> <code class="fe ma mb mc md b"><em class="mq">#{</em></code> <em class="mq">和</em> <code class="fe ma mb mc md b"><em class="mq">}</em></code> <em class="mq">中，例如</em> <code class="fe ma mb mc md b"><em class="mq">'#{session_name}'</em></code> <em class="mq">。详情请查看</em> <code class="fe ma mb mc md b"><em class="mq">man tmux</em></code> <em class="mq">的</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">FORMATS</em></strong></code> <em class="mq">章节。</em></p><p id="f5da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">举个例子，</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="c71b" class="me ky iq md b gy mz na l nb nc">tmux list-windows -F "#{window_id} #{window_name}"</span><span id="66ee" class="me ky iq md b gy nd na l nb nc">tmux list-panes -F "#{pane_id} #{pane_current_command} #{pane_current_path} #{cursor_x},#{cursor_y}"</span><span id="b21b" class="me ky iq md b gy nd na l nb nc">tmux list-panes -F "pane: #{pane_id}, window: #{window_id}, session: #{session_id}, server: #{socket_path}"</span><span id="065d" class="me ky iq md b gy nd na l nb nc">tmux list-windows -F "window: #{window_id}, panes: #{window_panes} pane_id: #{pane_id}"</span></pre><h2 id="0b1c" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 样式</h2><p id="2b31" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">tmux</em></code><em class="mq">提供了各种选项来指定界面各方面的颜色和属性。例如，</em> <code class="fe ma mb mc md b"><em class="mq">status-style</em></code> <em class="mq">为状态行。另外，可以在格式选项中指定嵌入样式，如</em> <code class="fe ma mb mc md b"><em class="mq">status-left-format</em></code> <em class="mq">，将它们括在</em> <code class="fe ma mb mc md b"><em class="mq">#[</em></code> <em class="mq">和</em> <code class="fe ma mb mc md b"><em class="mq">]</em></code> <em class="mq">中。查看</em> <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">STYLES</em></strong></code> <em class="mq">段的</em> <code class="fe ma mb mc md b"><em class="mq">man tmux</em></code> <em class="mq">。</em></p><h2 id="4e99" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated"><code class="fe ma mb mc md b">send-keys</code></h2><p id="aa5e" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated"><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">tmux</em></code><em class="mq">允许发送按键，包括</em> <code class="fe ma mb mc md b"><em class="mq">Ctrl</em></code> <em class="mq">经</em> <code class="fe ma mb mc md b"><em class="mq">C-</em></code> <em class="mq">或</em> <code class="fe ma mb mc md b"><em class="mq">^</em></code> <em class="mq"> (alt (Meta))经</em> <code class="fe ma mb mc md b"><em class="mq">M-</em></code> <em class="mq">，以及特殊按键名称。这里有一个特殊键的列表:</em><code class="fe ma mb mc md b"><em class="mq">Up</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">Down</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">Left</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">Right</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">BSpace</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">BTab</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">DC</em></code><em class="mq">(删除)</em><code class="fe ma mb mc md b"><em class="mq">End</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">Enter</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">Escape</em></code><em class="mq"/><code class="fe ma mb mc md b"><em class="mq">F1</em></code></p><p id="6c66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">如果特殊键不匹配，定义的行为是将它作为字符串逐个字符地发送到窗格。</em></p><p id="bdac" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">如果一个窗口有多个窗格，那么传递的命令将被发送到第一个窗格(即 id 为</em>  <code class="fe ma mb mc md b"><strong class="ka ir"><em class="mq">0</em></strong></code> <em class="mq">的</em> <strong class="ka ir"> <em class="mq">窗格)。</em></strong></p><p id="7c54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="mq">关于</em> <code class="fe ma mb mc md b"><em class="mq">-t &lt;target_window&gt;</em></code> <em class="mq">检查、</em> <a class="ae kw" href="http://0.0.0.0:8000/linux_regex_vim_tmux_git.html#tmux-panes" rel="noopener ugc nofollow" target="_blank"> <em class="mq">列表窗格</em> </a> <em class="mq">部分的详细格式。</em></p><p id="9fb3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">举个例子，</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="c65f" class="me ky iq md b gy mz na l nb nc">tmux send-keys -t MG:3 'cal'           # send `cal` command (without hitting ENTER) to 3rd window of session named 'MG'</span><span id="4b6c" class="me ky iq md b gy nd na l nb nc">tmux send-keys -t MG:3 'C-c'           # cancel the command</span><span id="ec86" class="me ky iq md b gy nd na l nb nc">tmux send-keys -t MG:3 'cal' 'Enter'   # seind `cal` command and hit ENTER</span></pre><h2 id="32b6" class="me ky iq bd kz mf mg dn ld mh mi dp lh kj mj mk ll kn ml mm lp kr mn mo lt mp bi translated">Tmux 最佳实践</h2><p id="02d1" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">对一个项目/问题/任务相关的东西使用一个 tmux 会话。在该会话中，您可以有多个选项卡和面板。</p><p id="a80e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用<code class="fe ma mb mc md b">tmux a</code>连接到最近的会话，然后使用<code class="fe ma mb mc md b">PREFIX s</code>跳转到其他会话。</p><p id="5f1c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">可以使用类似于下面的命令来启动带有自定义选项卡的 tmux 会话:</p><pre class="mr ms mt mu gt mv md mw mx aw my bi"><span id="e502" class="me ky iq md b gy mz na l nb nc"># Creating a session on development server with 10 default windows and name `session_01`</span><span id="56d0" class="me ky iq md b gy nd na l nb nc">tmux new -n shell\; neww -n 01\; neww -n 02\; neww -n 03\; neww -n 04\; neww -n 05\; neww -n 06\; neww -n 07\; neww -n 08\; neww -n 09\; rename session_01</span><span id="4844" class="me ky iq md b gy nd na l nb nc">tmux new -n nvim\; neww -n nvim-default\; neww -n command\; neww -n console\; neww -n shell\; neww -n server-default\; neww\; neww\; neww\; neww -n logs-default\; rename session_zendesk_01</span><span id="9880" class="me ky iq md b gy nd na l nb nc">tmux new -n shell\; neww -n shell\; neww -n shell\; neww -n nvim-frontend\; neww -n nvim-mediator\; neww -n nvim-scribe\; neww -n nvim-lc\; neww -n nvim-web\; neww -n nvim-tasks\; neww -n logs-default\; neww\; neww\; rename session_zopim_01</span></pre><p id="2e5f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">这里有一些相关的有趣故事，你可能会觉得有帮助:</strong></p><ul class=""><li id="a671" class="ng nh iq ka b kb kc kf kg kj ni kn nj kr nk kv nl nm nn no bi translated"><a class="ae kw" href="https://medium.com/@goyalmunish/vim-neovim-silverlight-ctags-make-up-an-awesome-editor-49f3980b575d" rel="noopener">Vim/neo Vim+Silverlight+CTags——组成一个牛逼的编辑器</a></li><li id="1e12" class="ng nh iq ka b kb np kf nq kj nr kn ns kr nt kv nl nm nn no bi translated"><a class="ae kw" href="https://medium.com/@goyalmunish/regex-regular-expressions-demystified-e98fe98707e0" rel="noopener">正则表达式—备忘单</a></li></ul></div></div>    
</body>
</html>