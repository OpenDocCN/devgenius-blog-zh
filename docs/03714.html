<html>
<head>
<title>Vuelidate — Dynamic Validation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vuelidate —动态验证</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/vuelidate-dynamic-validation-ecafcbd6982a?source=collection_archive---------1-----------------------#2020-12-07">https://blog.devgenius.io/vuelidate-dynamic-validation-ecafcbd6982a?source=collection_archive---------1-----------------------#2020-12-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9760aa31a21451385bef1bae6a667908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z86Vzd-WCxDi69G-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@thezenoeffect?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">希亚姆</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="336e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认情况下，Vue.js 没有任何表单验证功能。</p><p id="2094" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们需要添加自己的表单验证库或自己的代码。</p><p id="6ce0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用 Vuelidate 动态验证表单。</p><h1 id="77bc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动态验证模式</h1><p id="afe2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用 Vuelidate 动态验证表单。</p><p id="d363" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ba03" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div&gt;<br/>      &lt;label&gt;Name&lt;/label&gt;<br/>      &lt;input v-model.trim="$v.name.$model"&gt;<br/>      &lt;div v-if="!$v.name.required"&gt;Name is required.&lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="05e9" class="mn lc iq mj b gy ms mp l mq mr">&lt;div v-if="hasDescription"&gt;<br/>      &lt;label&gt;Description&lt;/label&gt;<br/>      &lt;input v-model.trim="$v.description.$model"&gt;<br/>      &lt;div v-if="!$v.description.required"&gt;Description is required.&lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="7eaa" class="mn lc iq mj b gy ms mp l mq mr">&lt;div&gt;<br/>      &lt;label&gt;Has Description&lt;/label&gt;<br/>      &lt;input v-model="hasDescription" type="checkbox"&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { required } from "vuelidate/lib/validators";</span><span id="cb0d" class="mn lc iq mj b gy ms mp l mq mr">export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      hasDescription: false,<br/>      name: "",<br/>      description: ""<br/>    };<br/>  },<br/>  validations() {<br/>    if (!this.hasDescription) {<br/>      return {<br/>        name: {<br/>          required<br/>        }<br/>      };<br/>    } else {<br/>      return {<br/>        name: {<br/>          required<br/>        },<br/>        description: {<br/>          required<br/>        }<br/>      };<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="9a8d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用了<code class="fe mt mu mv mj b">validations</code>方法来返回一个对象，该对象包含要根据<code class="fe mt mu mv mj b">this.hasDescription</code>属性进行验证的字段。</p><p id="1ee8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们需要检查<code class="fe mt mu mv mj b">hasDescription</code>的值，并且只在<code class="fe mt mu mv mj b">hasDescription</code>为<code class="fe mt mu mv mj b">true</code>时渲染<code class="fe mt mu mv mj b">description</code>字段。</p><p id="47a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">hasDescription</code>的值由复选框控制。</p><h1 id="37c2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动态参数</h1><p id="22bc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们还可以动态设置字段的名称。</p><p id="4cc0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5479" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div&gt;<br/>      &lt;label&gt;Name&lt;/label&gt;<br/>      &lt;input v-model.trim="$v.name.$model"&gt;<br/>      &lt;div v-if="!$v.name[valName]"&gt;Name is invalid.&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { minLength } from "vuelidate/lib/validators";</span><span id="b5c6" class="mn lc iq mj b gy ms mp l mq mr">export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      name: "",<br/>      minLength: 3,<br/>      valName: "validatorName"<br/>    };<br/>  },<br/>  validations() {<br/>    return {<br/>      name: {<br/>        [this.valName]: minLength(this.minLength)<br/>      }<br/>    };<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="16f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们为<code class="fe mt mu mv mj b">name</code>字段的验证器取了一个动态名称。</p><p id="2400" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可以在模板中用来检查名称。</p><h1 id="9a70" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">内置验证器</h1><p id="e08f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Vuelidate 附带了各种类型的验证器。</p><p id="d419" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们包括:</p><ul class=""><li id="eb08" class="mw mx iq kf b kg kh kk kl ko my ks mz kw na la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">required</code> —检查字段是否为必填字段。</li><li id="3964" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">requiredIf </code> —如果谓词为<code class="fe mt mu mv mj b">true</code>，则需要一个字段</li><li id="d615" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">requiredUnless</code> —如果谓词为<code class="fe mt mu mv mj b">false</code>，则需要一个字段</li><li id="c8c3" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">minLength</code> —需要输入的最小长度</li><li id="cc01" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">maxLength</code> —所需输入的最大长度</li><li id="a24b" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">minValue</code> —最小数值</li><li id="1d15" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">maxValue</code> —最大数值</li><li id="c606" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">between</code> —数值范围</li><li id="4694" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">alpha</code> —字母字符</li><li id="639f" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">alphaNum</code> —字母数字字符</li><li id="b377" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">numeric</code> —数字</li><li id="7137" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">integer</code> —整数</li><li id="ec6e" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">decimal</code> —十进制数字</li><li id="e99d" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">email</code> —电子邮件地址</li><li id="7c8b" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">ipAddress</code> — IP 地址</li><li id="c2e3" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">macAddress</code> — MAC 地址</li><li id="bbdc" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">sameAs</code> —检查一个字段是否与另一个字段具有相同的值</li><li id="41fc" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">url</code> —网址</li><li id="e54d" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">or</code> —当至少一个验证器通过时通过</li><li id="0dfd" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">and</code> —当所有验证器通过时通过</li><li id="18fe" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">not</code> —当提供的验证器未通过时通过</li><li id="7fa8" class="mw mx iq kf b kg nf kk ng ko nh ks ni kw nj la nb nc nd ne bi translated"><code class="fe mt mu mv mj b">withParams</code> —用于创建自定义验证器的验证器修改器</li></ul><p id="6f05" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="561e" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div&gt;<br/>      &lt;label&gt;field&lt;/label&gt;<br/>      &lt;input v-model.trim="$v.field.$model"&gt;<br/>      &lt;div v-if="!$v.field.required"&gt;field is invalid.&lt;/div&gt;<br/>    &lt;/div&gt;</span><span id="55dc" class="mn lc iq mj b gy ms mp l mq mr">    &lt;div&gt;<br/>      &lt;label&gt;is optional&lt;/label&gt;<br/>      &lt;input v-model="isOptional" type="checkbox"&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import { requiredUnless } from "vuelidate/lib/validators";</span><span id="d468" class="mn lc iq mj b gy ms mp l mq mr">export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      field: "foo",<br/>      isOptional: true<br/>    };<br/>  },<br/>  validations: {<br/>    field: {<br/>      required: requiredUnless("isOptional")<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="621d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">isOptional</code>字段的<code class="fe mt mu mv mj b">required</code>属性设置为<code class="fe mt mu mv mj b">requiredUnless</code>验证器。</p><p id="947f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">requiredUnless(“isOptional”)</code>表示当<code class="fe mt mu mv mj b">isOptional</code>为<code class="fe mt mu mv mj b">true</code>时，该字段为必填项。</p><h1 id="078e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="60cb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用 Vuelidate 动态验证字段。</p><p id="9412" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还内置了许多验证器。</p></div></div>    
</body>
</html>