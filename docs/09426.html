<html>
<head>
<title>Django Chat App (Without Django Channels)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Django 聊天应用程序(无 Django 频道)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/build-a-django-chat-app-without-django-channels-ef31838de64a?source=collection_archive---------1-----------------------#2022-08-20">https://blog.devgenius.io/build-a-django-chat-app-without-django-channels-ef31838de64a?source=collection_archive---------1-----------------------#2022-08-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="ede3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有没有想过 Django 聊天应用程序会是什么样子，而不会看起来不和谐或松弛？不要再看了！这篇文章是关于将这种想法变成现实的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/83239d78cff32c09996b5b75db38c735.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MRxB2HJ_rnNkAD220IPaVA.png"/></div></div></figure><p id="affa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我假设您已经掌握了一些 python 和 python Django 的知识。如果你想修改模板，你可能需要一些顺风知识。</p><h1 id="bb71" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">创建您的项目</h1><p id="020d" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">创建一个名为<code class="fe lx ly lz ma b"><strong class="jm io">chat_django</strong></code> <strong class="jm io"> </strong>的文件夹，并导航到该文件夹。</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="bc4d" class="mf kv in ma b gy mg mh l mi mj">mkdir chat_django &amp;&amp; cd chat_django</span></pre><p id="abdc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于这个项目，我将使用虚拟环境。</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="9a51" class="mf kv in ma b gy mg mh l mi mj"># first<br/>python3 -m venv env<br/># second<br/>source env/bin/activate # macos/linux<br/>env/scripts/activate.bat # windows</span></pre><p id="03ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，安装 Django 和<a class="ae mk" href="https://github.com/django-crispy-forms/crispy-tailwind" rel="noopener ugc nofollow" target="_blank"> cripsy_tailwind </a>。Crispy _ tailwind 是 bootstrap 的 cripsy_form 的顺风版本，用于设计表单模板。</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="c088" class="mf kv in ma b gy mg mh l mi mj"># install django<br/>pip install Django<br/># install crispy tailwind<br/>pip install crispy-tailwind</span></pre><p id="4dea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们创建 Django 项目。</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="cea8" class="mf kv in ma b gy mg mh l mi mj">django-admin startproject django_chat &amp;&amp; cd django_chat</span></pre><p id="be6b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，创建一个名为<code class="fe lx ly lz ma b"><strong class="jm io">chat</strong></code> <strong class="jm io">的 app。</strong></p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="6191" class="mf kv in ma b gy mg mh l mi mj">python3 manage.py startapp chat</span></pre><h1 id="e392" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">设置您的项目</h1><p id="8eba" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">我们将对我们的项目<code class="fe lx ly lz ma b"><strong class="jm io">settings.py</strong></code>进行以下更改</p><p id="331d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe lx ly lz ma b"><strong class="jm io">settings.py</strong></code>的顶端加上<code class="fe lx ly lz ma b">import os</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/f3ac493090b4d9dff797ecf78de26550.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z4UJCVUfF-zNrxptxyZbEw.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">导入操作系统以避免后置错误并获取主题路径</figcaption></figure><p id="ced8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们的<code class="fe lx ly lz ma b"><strong class="jm io">INSTALLED_APPS = []</strong></code> <strong class="jm io"> </strong>中，我们将添加自定义应用程序(<code class="fe lx ly lz ma b">chat</code>)、crispy forms 和 crispy _ tailwind。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mq"><img src="../Images/ba12e3a62b1638e3d075ec272c9fdd18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WE9RUCoXkcRICZLvE3n2aA.png"/></div></div></figure><p id="90df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将把我们的静态文件/文件夹和模板存储在 Django 项目目录中一个名为<code class="fe lx ly lz ma b"><strong class="jm io">theme</strong></code> <strong class="jm io"> </strong>的文件夹中。</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="c53e" class="mf kv in ma b gy mg mh l mi mj">mkdir theme</span></pre><p id="1f45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您的项目文件夹应该是这样的。</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="2813" class="mf kv in ma b gy mg mh l mi mj">chat_django<br/>|_env<br/>|_django_chat<br/>  |_chat<br/>  |_django_chat<br/>  |_theme</span></pre><p id="1f5b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">转到你的主题目录并创建这三个目录:<strong class="jm io"> src </strong>、<strong class="jm io">模板</strong>和<strong class="jm io">静态</strong></p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="e9b0" class="mf kv in ma b gy mg mh l mi mj">cd theme &amp;&amp; mkdir src templates static</span></pre><p id="6bf4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使 Django 可以访问这些文件夹，因为它们不在 Django 的默认指定位置。</p><p id="5217" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在您的<code class="fe lx ly lz ma b"><strong class="jm io">settings.py</strong></code> <strong class="jm io"> </strong>中添加</p><pre class="kj kk kl km gt mb ma mc md aw me bi"><span id="42ad" class="mf kv in ma b gy mg mh l mi mj">(BASE_DIR / 'themes/templates')</span></pre><p id="d08b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对着<code class="fe lx ly lz ma b"><strong class="jm io">TEMPLATES = []</strong></code> <strong class="jm io"> </strong>像是这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mr"><img src="../Images/97b9d462c61514f29ee6ec714b08f62a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iiWoPuYceHReoC0NIGKYTA.png"/></div></div></figure><p id="16d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在您的<code class="fe lx ly lz ma b"><strong class="jm io">settings.py</strong></code> <strong class="jm io"> </strong>中添加一个<code class="fe lx ly lz ma b"><strong class="jm io">STATICFILES_DIRS = []</strong></code>，这将告诉 Django 从哪个目录读取静态文件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/b84bb5bea312c7e812606b266beb5ed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HxCuwzaOJeBTLfZEAvM7Mg.png"/></div></div></figure><p id="2450" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们现在应该完成<code class="fe lx ly lz ma b"><strong class="jm io">settings.py</strong></code>了。</p><h1 id="e220" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">聊天应用程序设置</h1><h2 id="442e" class="mf kv in bd kw mt mu dn la mv mw dp le jv mx my li jz mz na lm kd nb nc lq nd bi translated">模型</h2><p id="caad" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">在我们聊天 app 的<code class="fe lx ly lz ma b"><strong class="jm io">models.py</strong></code> <strong class="jm io"> </strong>中，我们要创建一个用户模型和一个消息模型。</p><ol class=""><li id="ffd0" class="ne nf in jm b jn jo jr js jv ng jz nh kd ni kh nj nk nl nm bi translated">用户模型:对于我们的用户模型，我们将从<code class="fe lx ly lz ma b"><strong class="jm io">django.contrib.auth.models</strong></code>扩展<code class="fe lx ly lz ma b"><strong class="jm io">AbstractUser</strong></code> <strong class="jm io"> </strong>。我们使用 AbstractUser 来获得 Django 默认用户模型的授权好处。我们的用户模型将有两个字段。用户名字段和电子邮件字段。两者都是独一无二的。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nn"><img src="../Images/0549e82e83aec6541533b60616b0f90c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ba-9KNtt0vwZHi7EpIEYIg.png"/></div></div></figure><p id="97a0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.消息模型:我们将使用 Django 的默认数据库模型作为消息模型。我们将为<code class="fe lx ly lz ma b">sender</code>和<code class="fe lx ly lz ma b">recipient</code>添加一个字段，这将是对<code class="fe lx ly lz ma b"><strong class="jm io">UserProfile</strong></code> <strong class="jm io"> </strong>模型的引用。我们还将添加一个<code class="fe lx ly lz ma b">date</code>字段来获取消息的日期时间，以及一个<code class="fe lx ly lz ma b">is_read</code>字段来标记已读消息</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/8564c4aacc3bc15ce503188d0516691c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SOQ8xqOi3wF5vetPGhVdSg.png"/></div></div></figure><p id="7255" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe lx ly lz ma b"><strong class="jm io">Message</strong></code>模型元类下面，我们将添加两个函数:</p><ol class=""><li id="0e54" class="ne nf in jm b jn jo jr js jv ng jz nh kd ni kh nj nk nl nm bi translated"><strong class="jm io"> get_all_messages(id_1，id_2): </strong>该函数获取你的主键和你正在打开的聊天收件箱的那个人的主键，获取你们两个之间的所有消息，并按日期排序。</li></ol><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/38802e3c27a8857e980c40b18708c084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PcHXmdrxp32_dSuDHOi91Q.png"/></div></div></figure><p id="4f68" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.<strong class="jm io"> get_message_list(u): </strong>获取您的主键，过滤所有以您的主键作为收件人或发件人的消息，按用户名和日期对它们进行排序，并在删除所有其他没有您的主键的消息的同时返回它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nq"><img src="../Images/019bd6a4d3a63e68c8e16da1749dc9aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9xWh2OrNrUX0JvCroDlqxA.png"/></div></div></figure><h2 id="d74a" class="mf kv in bd kw mt mu dn la mv mw dp le jv mx my li jz mz na lm kd nb nc lq nd bi translated">形式</h2><p id="a942" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">在您的<code class="fe lx ly lz ma b"><strong class="jm io">chat</strong></code>应用程序中创建一个<code class="fe lx ly lz ma b">forms.py</code>文件。由于我们希望用户注册该应用程序，我们将使用<code class="fe lx ly lz ma b"><strong class="jm io">django.contrib.auth.forms</strong></code> <strong class="jm io">中的<code class="fe lx ly lz ma b"><strong class="jm io">UserCreationForm</strong></code> <strong class="jm io"> </strong>创建一个自定义注册表单。因为我们使用的是简洁的表单，我们在注册表单中需要调用的唯一字段是用户名和电子邮件；剩下的就交给<code class="fe lx ly lz ma b"><strong class="jm io">UserCreationForm</strong></code>T29】了。</strong>该表单将添加密码字段，并创建一个没有管理员或员工权限的用户。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nr"><img src="../Images/f31519e69b7b8c27810e0b8433ee228e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AFTgctQnJQh_5fxcOpu0KQ.png"/></div></div></figure><h1 id="ce4f" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">视图</h1><p id="96c2" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">对于<code class="fe lx ly lz ma b"><strong class="jm io">views.py</strong></code> <strong class="jm io">，</strong>我们将创建四个视图:</p><ol class=""><li id="29a7" class="ne nf in jm b jn jo jr js jv ng jz nh kd ni kh nj nk nl nm bi translated"><strong class="jm io">注册视图</strong>:注册用户</li><li id="b565" class="ne nf in jm b jn ns jr nt jv nu jz nv kd nw kh nj nk nl nm bi translated"><strong class="jm io">消息列表视图</strong>:显示登录用户的所有消息</li><li id="4652" class="ne nf in jm b jn ns jr nt jv nu jz nv kd nw kh nj nk nl nm bi translated"><strong class="jm io">收件箱视图</strong>:您和其他用户之间的聊天视图</li><li id="dc04" class="ne nf in jm b jn ns jr nt jv nu jz nv kd nw kh nj nk nl nm bi translated"><strong class="jm io">用户列表视图</strong>:寻找聊天的新用户</li></ol><p id="f5db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们继续创建视图之前，在视图文件的顶部，您需要导入以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nx"><img src="../Images/6f35d6153541c8800abf5737e31e2568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XHGM52qP9wRpThYfcPqvyA.png"/></div></div></figure><p id="484e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在看风景:</p><blockquote class="ny nz oa"><p id="f369" class="jk jl ob jm b jn jo jp jq jr js jt ju oc jw jx jy od ka kb kc oe ke kf kg kh ig bi translated">注册视图</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi of"><img src="../Images/7fff3b07ad21d8d45ce02474a17ae4e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8AxmBsjNFpRH5oCcc5SgwQ.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">用户注册后登录的注册视图</figcaption></figure><blockquote class="ny nz oa"><p id="9e09" class="jk jl ob jm b jn jo jp jq jr js jt ju oc jw jx jy od ka kb kc oe ke kf kg kh ig bi translated">邮件列表视图</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi og"><img src="../Images/52a306512b8d3b7ea413a79bed30350d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ceQ09UXmH2y8XVrkCJTg_Q.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">该视图有一个 LoginRequiredMixin，因此经过身份验证的用户只能访问它。使用消息模型中的 get_message_list 函数</figcaption></figure><blockquote class="ny nz oa"><p id="b28a" class="jk jl ob jm b jn jo jp jq jr js jt ju oc jw jx jy od ka kb kc oe ke kf kg kh ig bi translated">收件箱视图</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/da3997253d4233d29c53b172a70c80a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EJjOK2hv9EmjMyT1umr6Hg.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">我们在 url 中使用用户名，而不是主键。上面的代码获取视图的用户名，并将用户名传递给 post 函数</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oi"><img src="../Images/00e202fd109d2586ad9ba981f9d57f34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HcByJ6M-ytGHQZmNvuIxPg.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">使用 get_all_messages 和 get_message_list 在模板的聊天和消息列表中显示消息</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oj"><img src="../Images/cac2a3b1e8fba9357a5cb892b8dc1d36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uBpTQMMmQWncJrq6LEdyLg.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">在聊天中调用这个函数来发送消息。</figcaption></figure><blockquote class="ny nz oa"><p id="bb6f" class="jk jl ob jm b jn jo jp jq jr js jt ju oc jw jx jy od ka kb kc oe ke kf kg kh ig bi translated">用户列表视图</p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/5552bde52b680eeed9916dc1d55d7b81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aLPOTOzd3lGEL8KOR2Xd9w.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk translated">显示所有用户，不包括已登录的用户</figcaption></figure><h2 id="cb99" class="mf kv in bd kw mt mu dn la mv mw dp le jv mx my li jz mz na lm kd nb nc lq nd bi translated">资源定位符</h2><p id="f89c" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">默认情况下，Django 应用程序不是使用<code class="fe lx ly lz ma b">urls.py</code>文件创建的，所以您需要像使用<code class="fe lx ly lz ma b">forms.py</code>一样创建它。我们不打算构建定制的注销和登录视图，所以我们将使用 Django 默认的来自<code class="fe lx ly lz ma b"><strong class="jm io">django.contrib.auth.views</strong></code>的<strong class="jm io"> LoginView </strong>和<strong class="jm io"> LogoutView </strong>视图。我们需要做的就是为默认的 auth 视图呈现一个模板或 url 重定向(用于 LogoutView)。</p><p id="b23e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe lx ly lz ma b">urls.py</code>中添加以下内容:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ok"><img src="../Images/4380a27dfd829be665976c37c1f344a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QsGYnPIDl7RabsxcrU83wA.png"/></div></div></figure><h1 id="4ab1" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">又是设置？</h1><p id="16a6" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">对于我们在<code class="fe lx ly lz ma b">settings.py</code>中的最后一个调整，我们将添加<code class="fe lx ly lz ma b"><strong class="jm io">AUTH_USER_MODEL</strong></code> <strong class="jm io"> </strong>来指定我们想要将哪个模型认证为用户模型，我们还将设置登录和注销视图的 URL 以及重定向 URL。</p><p id="49c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe lx ly lz ma b">STATICFILES_DIRS</code>下添加以下代码</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ol"><img src="../Images/3aa883cad95426629702f45a73de9783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pj-iKuW8-4H03DR4-NRafw.png"/></div></div></figure><h1 id="e2b1" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">主题/模板/静态</h1><p id="637b" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">要设置顺风、静态和模板，请查看本文:</p><div class="om on gp gr oo op"><a href="https://medium.com/@gr1nch3/django-tailwind-simplified-8befa0a281d4" rel="noopener follow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd io gy z fp ou fr fs ov fu fw im bi translated">Django +简化顺风</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">正如我们所知，Django 是一个强大的 web 框架，允许您处理后端和前端解决方案，今天我们…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">medium.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd ks op"/></div></div></a></div><h2 id="9dce" class="mf kv in bd kw mt mu dn la mv mw dp le jv mx my li jz mz na lm kd nb nc lq nd bi translated">脆皮 _ 顺风</h2><p id="09af" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">为了在我们的 crisp 表单中使用 crispy tailwind，我们需要在<code class="fe lx ly lz ma b">settings.py</code>中添加以下内容</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pe"><img src="../Images/c012368d51be7dc4ae63e7fd38ccfcd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0aW_Tu4O0J_huarx7TAXcA.png"/></div></div></figure><p id="c6ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">完成后，结果应该是:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi pf"><img src="../Images/8b351c44489a64c12e3dad645aba6d97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WlCmGSMDbJbe4ydQfeZJsQ.png"/></div></div></figure><p id="0230" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">git 项目:<a class="ae mk" href="https://github.com/gr1nch3/django_chat.git" rel="noopener ugc nofollow" target="_blank">https://github.com/gr1nch3/django_chat.git</a></p><p id="eb7f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢阅读！</p><h1 id="a0d9" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">临时演员</h1><p id="eee6" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">要继续该项目，您可以添加:</p><ol class=""><li id="3dd1" class="ne nf in jm b jn jo jr js jv ng jz nh kd ni kh nj nk nl nm bi translated">未读邮件计数</li><li id="6055" class="ne nf in jm b jn ns jr nt jv nu jz nv kd nw kh nj nk nl nm bi translated">群组聊天功能</li><li id="db1b" class="ne nf in jm b jn ns jr nt jv nu jz nv kd nw kh nj nk nl nm bi translated">也许比我做的更好的模板</li><li id="0fcd" class="ne nf in jm b jn ns jr nt jv nu jz nv kd nw kh nj nk nl nm bi translated">聊天中上传的图像或文件</li></ol></div></div>    
</body>
</html>