<html>
<head>
<title>Useful JavaScript Tips — Strings, Arrays, and Images</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">有用的 JavaScript 技巧——字符串、数组和图像</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/useful-javascript-tips-strings-arrays-and-images-7a774d9448d0?source=collection_archive---------31-----------------------#2020-06-26">https://blog.devgenius.io/useful-javascript-tips-strings-arrays-and-images-7a774d9448d0?source=collection_archive---------31-----------------------#2020-06-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d330f791674e83295954b4ae3532b16f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8b2PJaHH06PI2-ap"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">彼得·温特在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="ea6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，JavaScript 应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解一些应该遵循的技巧，以便更快更好地编写 JavaScript 代码。</p><h1 id="379b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">把一串剪成单词</h1><p id="590a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要将一个字符串分割成单词，我们可以使用<code class="fe me mf mg mh b">split</code>方法。</p><p id="bc77" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8af5" class="mq lc iq mh b gy mr ms l mt mu">const text = "hello james smith";<br/>const arr = text.split(" ");</span></pre><p id="d483" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">text</code>将会按照它们的空格被分割成一个字符串数组。</p><p id="a4ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe me mf mg mh b">arr</code>就是<code class="fe me mf mg mh b">[“hello”, “james”, “smith”]</code>。</p><h1 id="04a1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将图像载入画布</h1><p id="3195" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用画布上下文的<code class="fe me mf mg mh b">drawImage</code>方法将图像加载到画布中。</p><p id="6d10" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下画布:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1341" class="mq lc iq mh b gy mr ms l mt mu">&lt;canvas width="300" height="300"&gt;&lt;/canvas&gt;</span></pre><p id="8208" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和图像元素:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6fa7" class="mq lc iq mh b gy mr ms l mt mu">&lt;img id='cat' style='visibility: hidden' src='http://placekitten.com/200/200' /&gt;</span></pre><p id="0a76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4984" class="mq lc iq mh b gy mr ms l mt mu">const canvas = document.querySelector('canvas');<br/>const context = canvas.getContext('2d');<br/>const img = document.getElementById("cat");<br/>context.drawImage(img, 90, 90, 50, 60, 10, 10, 50, 60);</span></pre><p id="70ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">drawImage</code>的第一个参数是图像元素。</p><p id="3714" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是图像左上角的 x 坐标。</p><p id="42cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3 号是左上角的 y 坐标。</p><p id="8adb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第四个是源图像的子矩形的宽度。</p><p id="2e0d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第五个是源图像的子矩形的高度。</p><p id="c315" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第 6 个是放置源左上角的目标画布的 x 坐标。</p><p id="4fa0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第 7 个是左上角的 y 坐标。</p><p id="3eab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第 8 个是图像到目标画布的宽度。</p><p id="7e15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后一个是图像在目的地的高度。</p><h1 id="f7b4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">减慢循环速度</h1><p id="e12e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用承诺来减缓循环。</p><p id="c13d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们用<code class="fe me mf mg mh b">setTimeout</code>函数创建自己的<code class="fe me mf mg mh b">sleep</code>函数:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a462" class="mq lc iq mh b gy mr ms l mt mu">const sleep = (ms) =&gt; {<br/>  return new Promise(resolve =&gt; setTimeout(resolve, ms))<br/>}</span></pre><p id="350f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们返回一个运行<code class="fe me mf mg mh b">setTimeout</code>并调用<code class="fe me mf mg mh b">resolve</code>的承诺。<code class="fe me mf mg mh b">ms</code>是以毫秒为单位的延迟。</p><p id="6a02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过运行以下命令循环运行<code class="fe me mf mg mh b">sleep</code>函数:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b6fa" class="mq lc iq mh b gy mr ms l mt mu">const list = [1, 2, 3];<br/>(async () =&gt; {<br/>  for (const item of list) {<br/>    await sleep(1000);<br/>    console.log(item)<br/>  }<br/>})();</span></pre><p id="1e7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个数组<code class="fe me mf mg mh b">list</code>，在一个异步函数中循环。</p><p id="56cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在循环体中，我们用 1000 调用<code class="fe me mf mg mh b">sleep</code>来延迟循环 1 分钟。</p><p id="aba7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">console.log</code>记录该项目。</p><h1 id="dce4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">获取数组中的前 n 项</h1><p id="2512" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要获得数组中的第一个<code class="fe me mf mg mh b">n</code>项，我们可以使用<code class="fe me mf mg mh b">slice</code>方法。</p><p id="38b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1e78" class="mq lc iq mh b gy mr ms l mt mu">const arr = [1, 2, 3, 4, 5];<br/>const newArray = arr.slice(0, 2);</span></pre><p id="b975" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在新数组中返回来自<code class="fe me mf mg mh b">arr</code>的前 2 个数组条目。</p><p id="7e8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe me mf mg mh b">newArray</code>就是<code class="fe me mf mg mh b">[0, 1]</code>。</p><h1 id="fc2d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将数组转换为字符串</h1><p id="781f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以调用<code class="fe me mf mg mh b">toString</code>方法将数组转换成字符串。</p><p id="91eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b905" class="mq lc iq mh b gy mr ms l mt mu">const list = [1, 2, 3];<br/>const str = list.toString();</span></pre><p id="219b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到<code class="fe me mf mg mh b">“1,2,3”</code>作为<code class="fe me mf mg mh b">str</code>的值。</p><p id="97b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它不是很灵活，因为它转换它喜欢的方式。</p><p id="865b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了增加灵活性，我们可以使用<code class="fe me mf mg mh b">join</code>方法。</p><p id="449d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5551" class="mq lc iq mh b gy mr ms l mt mu">const list = [1, 2, 3];<br/>const str = list.join();</span></pre><p id="02fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将数组的条目连接成一个字符串。</p><p id="7acf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以传入一个分隔符来分隔条目。</p><p id="d805" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ee50" class="mq lc iq mh b gy mr ms l mt mu">const list = [1, 2, 3];<br/>const str = list.join(', ');</span></pre><p id="6ada" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用逗号作为分隔符。</p><h1 id="575d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">展平数组</h1><p id="93ce" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">flat</code>和<code class="fe me mf mg mh b">flatMap</code>来展平数组。</p><p id="2235" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a283" class="mq lc iq mh b gy mr ms l mt mu">const animals = ['dog', ['cat', 'wolf']];<br/>const flattened = animals.flat();</span></pre><p id="121d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用了<code class="fe me mf mg mh b">flat</code>，这是一个内置的数组方法。</p><p id="69e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们看到<code class="fe me mf mg mh b">flattened</code>就是<code class="fe me mf mg mh b">[“dog”, “cat”, “wolf”]</code>。</p><p id="1c8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">flat</code>可以展平任意级别的数组。</p><p id="f269" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们传入 2，那么它将平铺 2 个嵌套层次。</p><p id="a3be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们传入<code class="fe me mf mg mh b">Infinity</code>，那么展平是递归完成的。</p><p id="0a65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们打电话给:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3d8e" class="mq lc iq mh b gy mr ms l mt mu">const animals = ['dog', [['cat', 'wolf']]];<br/>const flattened = animals.flat(2);</span></pre><p id="0c80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到同样的结果。</p><p id="b95b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7f9f" class="mq lc iq mh b gy mr ms l mt mu">const animals = ['dog', [['cat', 'wolf']]];<br/>const flattened = animals.flat(Infinity);</span></pre><p id="8136" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了完全的展平，这也意味着同样的结果。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/5b44c877544ed2ae17d84bbee65ff32b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y9T7wglBWPTnSQU7"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@veechoy?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">弗吉尼亚·蔡</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><h1 id="d3e2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="df63" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">flat</code>轻松地展平数组。</p><p id="90d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以用<code class="fe me mf mg mh b">drawImage</code>将图像从 img 标签加载到画布中。</p><p id="0444" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了暂停 JavaScript 代码的执行，我们可以使用带有承诺的<code class="fe me mf mg mh b">setTimeout</code>。</p></div></div>    
</body>
</html>