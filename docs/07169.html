<html>
<head>
<title>Setting Up Pi-hole on Raspberry Pi Zero 2 W</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在树莓 Pi Zero 2 W 上设置 Pi 孔</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/setting-up-pi-hole-on-raspberry-pi-zero-2-w-893c1ee7bfcd?source=collection_archive---------3-----------------------#2022-03-03">https://blog.devgenius.io/setting-up-pi-hole-on-raspberry-pi-zero-2-w-893c1ee7bfcd?source=collection_archive---------3-----------------------#2022-03-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/fee892ab325324347ec01e0ebf4f83e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/0*7RBpclLFdUJdwNAK.png"/></div></figure><p id="4e6a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">什么是 Pi-hole </strong></p><p id="d756" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">你有没有被弹出的广告吓到，这些广告是你谈论过但从未搜索过的东西？Pi-hole 是防止这种情况再次发生的好办法。</p><p id="0215" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Pi-hole 是一个 Linux 网络级广告和互联网追踪器拦截应用程序，它充当 DNS sinkhole 和专用网络上的可选 DHCP 服务器。它可以安装在任何 Linux 机器上，比如 Raspberry Pi 或托管 Linux 的虚拟机。它有能力屏蔽网站广告以及智能电视和移动操作系统上的广告。</p><p id="53ae" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我将走过我是如何设置我的树莓皮零 2 W 的皮洞。</p><h2 id="32f0" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated"><strong class="ak">设置树莓派</strong></h2><p id="41e6" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">首先，我使用 Raspberry Pi Imager 将 Raspberry Pi 操作系统安装到 MicroSD 卡上。下载链接可以在<a class="ae ln" href="https://www.raspberrypi.com/software/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。对于 MicroSD 卡，建议使用 16GB，但我将使用 32GB，这将超过足够的内存。我在亚马逊<a class="ae ln" href="https://www.amazon.com/Silicon-Power-Speed-MicroSD-Adapter/dp/B07RSXSYJC/ref=sr_1_3?crid=2FD93HLTNXF8W&amp;keywords=silicon+power+3d+nand+32gb&amp;qid=1646279246&amp;sprefix=silicon+power+3d+nand+32%2Caps%2C76&amp;sr=8-3" rel="noopener ugc nofollow" target="_blank">上找到了 16.99 美元的 2 包 MicroSD 卡，对我来说效果很好。下载成像仪并打开程序。</a></p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/66f2c88f98e90630a37982bf1a31926c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*dIf53h9njH6aw4CYLswqDQ.png"/></div></figure><p id="19a1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">按 Ctrl + Shift + x 将调出高级设置进行配置。</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/5298fe51d28dd4ec75b0e58188f6ec82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*vCrsQBwcC3bngQbwGMkEGg.png"/></div></figure><p id="3b68" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我将<strong class="jt io">启用 SSH </strong>，这样我就可以在没有监视器的情况下访问我的机器。在这里您还可以<strong class="jt io">设置您的用户名和密码</strong>以及<strong class="jt io">配置 wifi </strong>。您还可以选择只允许公钥身份验证。如果您想走这条路，<a class="ae ln" href="https://www.ssh.com/academy/ssh/keygen" rel="noopener ugc nofollow" target="_blank">创建一个密钥对</a>，并将公钥的内容粘贴到 authorized_keys 字段中。接下来，选择要写入 MicroSD 卡的操作系统。为此，我使用了<strong class="jt io"> Raspberry Pi 操作系统(32 位)。</strong></p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lu"><img src="../Images/b2812f2be0645425fbaafa63be643575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fhbKsJEe9LfzR0RmUGxVHA.png"/></div></div></figure><p id="cb57" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">选择您想要写入的存储设备，在这种情况下是 MicroSD 卡。</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi lz"><img src="../Images/2c8766c843b7084c0707a0967c6800f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*40QtOYDxkWb77-HYK2_OyA.png"/></div></div></figure><p id="eb3d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">点击<strong class="jt io">写入</strong>开始向 SD 卡写入图像，但是在开始之前会看到如下提示。</p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi ma"><img src="../Images/061c9d583f6258d62518991cfd3ec343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RL9uXCh3gJc1tWgJ"/></div></div></figure><p id="33c7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">点击<strong class="jt io">是，</strong>，开始向卡中写入。这需要几分钟才能完成。完成后点击<strong class="jt io">继续。</strong></p><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mb"><img src="../Images/a988bdde0037c74c14f92fc1d84e8e68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZaELP98VxiBEXICo2DNTRg.png"/></div></div></figure><h2 id="b4fe" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated"><strong class="ak">准备墩孔安装</strong></h2><p id="e320" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">将 SD 卡放入 Raspberry Pi，并插入微型 USB 电缆以接通电源。绿灯应该在闪烁，这意味着它找到了一个好的操作系统映像并且正在启动。一旦绿灯保持稳定，你应该可以 SSH 了。我通过登录我的路由器并查看连接的设备，直到我找到 Raspberry Pi，从而获得了我的 IP 地址。</p><p id="831c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">一旦您有了 IP 地址，您就可以使用您在 Raspberry Pi 成像仪的高级选项中输入的用户名和密码进行 SSH 登录。如果您只设置了公钥认证，请在中使用您的私钥进行 SSH。</p><pre class="lp lq lr ls gt mc md me mf aw mg bi"><span id="180e" class="kp kq in md b gy mh mi l mj mk">ssh username@IP_Address</span></pre><p id="2089" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe ml mm mn md b">ssh -i "private_key" username@IP_Address</code></p><p id="9490" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">更新系统。</p><pre class="lp lq lr ls gt mc md me mf aw mg bi"><span id="a538" class="kp kq in md b gy mh mi l mj mk">sudo apt update<br/>sudo apt upgrade</span></pre><p id="fe7d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">分配一个静态 IP 地址。</p><pre class="lp lq lr ls gt mc md me mf aw mg bi"><span id="cb3a" class="kp kq in md b gy mh mi l mj mk">sudo vim /etc/dhcpcd.conf</span></pre><figure class="lp lq lr ls gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="gh gi mo"><img src="../Images/0497726df5216d8ad9bcefa8877220b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lI2z2lcV2namh75ECg7WeA.png"/></div></div></figure><p id="7b87" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">编辑以下内容:</p><ul class=""><li id="f575" class="mp mq in jt b ju jv jy jz kc mr kg ms kk mt ko mu mv mw mx bi translated">连接</li><li id="cb6c" class="mp mq in jt b ju my jy mz kc na kg nb kk nc ko mu mv mw mx bi translated">静态 ip 地址</li><li id="c892" class="mp mq in jt b ju my jy mz kc na kg nb kk nc ko mu mv mw mx bi translated">静态路由器</li><li id="9ee6" class="mp mq in jt b ju my jy mz kc na kg nb kk nc ko mu mv mw mx bi translated">静态域名服务器</li></ul><p id="f933" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果 DHCP 服务器更改 Raspberry Pi 的 IP 地址，这将避免问题。确定静态 IP 地址没有分配给网络上的任何其他设备。</p><p id="4ed6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">重启 Raspberry Pi 以确保更改生效。</p><p id="2056" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe ml mm mn md b">sudo reboot</code></p><p id="ac81" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">SSH 回到树莓派安装孔。</p><p id="ecea" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">安装墩孔</strong></p><p id="9118" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">github 库有一步自动安装。用于此目的的命令是:</p><pre class="lp lq lr ls gt mc md me mf aw mg bi"><span id="93c1" class="kp kq in md b gy mh mi l mj mk">curl -sSL <a class="ae ln" href="https://install.pi-hole.net" rel="noopener ugc nofollow" target="_blank">https://install.pi-hole.net</a> | bash</span></pre><p id="6bf9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">但是，有些人可能不希望运行它，因为它会阻止您阅读将要在您的系统上运行的代码。还有其他安装方法允许您在安装前检查代码。</p><p id="4f95" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">方法 1:克隆存储库并运行</p><pre class="lp lq lr ls gt mc md me mf aw mg bi"><span id="cf19" class="kp kq in md b gy mh mi l mj mk">git clone --depth 1 <a class="ae ln" href="https://github.com/pi-hole/pi-hole.git" rel="noopener ugc nofollow" target="_blank">https://github.com/pi-hole/pi-hole.git</a> Pi-hole<br/>cd "Pi-hole/automated install/"<br/>sudo bash basic-install.sh</span></pre><p id="02b2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">方法 2:手动下载安装程序并运行</p><pre class="lp lq lr ls gt mc md me mf aw mg bi"><span id="d1d9" class="kp kq in md b gy mh mi l mj mk">wget -O basic-install.sh <a class="ae ln" href="https://install.pi-hole.net" rel="noopener ugc nofollow" target="_blank">https://install.pi-hole.net</a><br/>sudo bash basic-install.sh</span></pre><p id="a045" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">方法 3:使用 Docker 部署 Pi-Hole</p><p id="a4c8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这里是<a class="ae ln" href="https://github.com/pi-hole/docker-pi-hole" rel="noopener ugc nofollow" target="_blank"> Pi-hole docker repo </a>使用官方 docker 图片。</p><h2 id="a29c" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated"><strong class="ak">利用 Pi-hole </strong></h2><p id="1a5d" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">现在 Pi-hole 已经安装好了，你必须<a class="ae ln" href="https://discourse.pi-hole.net/t/how-do-i-configure-my-devices-to-use-pi-hole-as-their-dns-server/245" rel="noopener ugc nofollow" target="_blank">配置你的路由器，让 DHCP 客户端使用 Pi-hole 作为他们的 DNS 服务器</a>。这样做将确保连接到您网络的任何设备都可以阻止内容，而无需执行任何其他操作。有些人可能不希望这样，因为当你看 GUI 界面时，你可以看到对网站的请求。</p><p id="2be3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果您的路由器不支持设置 DNS 服务器，另一个选择是使用<a class="ae ln" href="https://discourse.pi-hole.net/t/how-do-i-use-pi-holes-built-in-dhcp-server-and-why-would-i-want-to/3026" rel="noopener ugc nofollow" target="_blank">Pio-hole 的内置 DHCP 服务器</a>。但是，如果您想这样做，您的路由器上的 DHCP(如果可用)需要首先被禁用。</p><p id="894a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">最后，如果你只想在某些设备上使用它，你可以配置每个设备使用 Pi-hole 作为它的 DNS 服务器。</p><p id="31d9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Pi-hole 很棒，但并不完美。它将捕捉大多数但不是所有的广告。Pi-hole 带有一个仪表板，在这里你可以深入了解 Raspberry Pi 的状态、被阻止的查询和黑名单域。您可以通过进入网络浏览器并转到[您的 Raspberry Pi 的 IP 地址]/admin 来导航到仪表板。</p><p id="ab31" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在去享受你的劳动成果吧！</p></div></div>    
</body>
</html>