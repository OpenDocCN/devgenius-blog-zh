<html>
<head>
<title>MVVM Explained With a Simple iOS App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MVVM用一个简单的iOS应用解释道</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/mvvm-explained-with-a-simple-ios-app-abdb944bb18?source=collection_archive---------2-----------------------#2021-12-27">https://blog.devgenius.io/mvvm-explained-with-a-simple-ios-app-abdb944bb18?source=collection_archive---------2-----------------------#2021-12-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8485" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个简单的MVVM架构的例子，用于在UITableView中加载项目并处理信息</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ed6d669559fa2bc927f9f13d5a11c76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2yekvip0YxnrkVrr3b0eGQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由来自<a class="ae kv" href="https://www.pexels.com/photo/person-holding-smartphone-while-using-laptop-1181244/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">佩克斯</a>的<a class="ae kv" href="https://www.pexels.com/@divinetechygirl?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">克里斯蒂娜·莫里洛</a>拍摄</figcaption></figure><p id="fad8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我们将解释如何使用MVVM架构创建一个简单的应用程序。在我们的演示中，我们将创建一个应用程序，在UITableView中加载啤酒列表。</p><h2 id="ea59" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">什么是MVVM</h2><p id="728b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">MVVM代表模型视图-视图-模型，是一种使用这三种不同对象的简单逻辑架构:</p><ul class=""><li id="236e" class="mq mr iq ky b kz la lc ld lf ms lj mt ln mu lr mv mw mx my bi translated"><strong class="ky ir">视图控制器</strong>:应该对我们的UI执行唯一的操作。应该只获取和显示信息。</li><li id="0327" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated"><strong class="ky ir">视图模型</strong>:View controller会向视图模型发送信息。视图模型将处理它们，完成所有的业务逻辑，并将输出返回给视图控制器</li><li id="0f64" class="mq mr iq ky b kz mz lc na lf nb lj nc ln nd lr mv mw mx my bi translated">模型:这只是一个简单的模型，通常包含来自服务响应的解析数据。这将仅在视图模型中使用。</li></ul><h2 id="7899" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">设置项目</h2><p id="2d6e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在解释架构之前，我们需要设置我们的新项目。我们就叫它世界啤酒吧。您可以在此处找到该项目:</p><div class="ne nf gp gr ng nh"><a href="https://github.com/psima/worldBeers" rel="noopener  ugc nofollow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">GitHub-psima/世界啤酒公司</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">github.com</p></div></div><div class="nq l"><div class="nr l ns nt nu nq nv kp nh"/></div></div></a></div><p id="7ce6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看如何组织我们的文件夹。在我们的项目中，它看起来像这样:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/854f42cb41d27bb62ea08d4e54e002bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1096/format:webp/1*nRegeRX5QrbBi8y4aS9aig.png"/></div></figure><p id="c672" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们现在只关注三个文件夹。模型、视图控制器和视图模型。其他文件夹只是为了创建我们的Api管理器，我们需要调用服务来给我们啤酒(https://api.punkapi.com/v2/beers)的列表</p><p id="4380" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想了解如何调用http服务(api ),可以查看我的文章:</p><div class="ne nf gp gr ng nh"><a rel="noopener  ugc nofollow" target="_blank" href="/create-your-own-service-manager-without-using-alamofire-in-swift-1af5d5440461"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">无需使用Swift中的Alamofire即可创建自己的服务经理</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">调用swift-iOS项目中任何API的简单方法，无需使用第三方库</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">blog.devgenius.io</p></div></div><div class="nq l"><div class="nx l ns nt nu nq nv kp nh"/></div></div></a></div><p id="620f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们已经建立了我们的项目，让我们把重点放在我们需要的3个文件上。</p><h2 id="98df" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">模型</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="b518" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该模型应该是简单的东西，没有任何业务逻辑在里面。在这个例子中，这是我们需要的关于啤酒的信息。我们有名字，标语，形象ur，abv，ibu，这些都是啤酒的价值。</p><h2 id="9627" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">视图模型</h2><p id="a6c0" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这是我们建筑中最重要的部分。该文件应该可以访问模型，并包含所有的业务逻辑、字符串连接、数字运算等。让我们看看代码应该是什么样子:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="74e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您在这个模型中看到的，我们已经创建了需要调用beers api的函数和将响应返回给ViewController的块。如您所见，ViewModel存储了模型(ViewController不应该知道这一点)。除了api调用，我们还创建了viewController需要的两个函数。一个是啤酒的数量，另一个是检索啤酒信息。</p><p id="14a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你注意到我们这里没有任何UI操作。ViewController应该处理这个问题。在这个类中，你还可以添加你正在对模型进行的其他操作(例如，更改名称、标语等)。</p><p id="6d6e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在是时候查看ViewController并将所有元素连接在一起了:</p><h2 id="ad3c" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">视图控制器</h2><p id="2f0c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在视图控制器中，我们需要一个带有单元格的UITableView来显示图像、标题和啤酒的其他一些信息。视图控制器应该非常“愚蠢”，因为它不应该获取和显示信息。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="48b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，我们只需要访问ViewModel文件并执行UI操作。ViewController没有任何关于Api管理器和如何调用服务的知识，这就是为什么它只是“监听”ViewModel的beerLoaded块。</p><p id="9d58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">视图控制器没有访问模型的权限，所以如果您看到UITableViewDelegate函数，它会询问它需要从视图模型中得到什么。在这个项目中，我们需要啤酒的数量(这样我们就知道要显示多少个项目)和每行要显示的单个啤酒的信息。</p><h2 id="ea46" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">结果</h2><p id="c6f7" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">最后，让我们看看我们的应用程序会是什么样子:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oa"><img src="../Images/04399943d39813796e98a8a4b8ebbc84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zwWyHYIGw9Via4JoaZX0ew.png"/></div></div></figure><p id="ac77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你需要给你的UITableViewCell添加阴影和边角，你可以查看这篇文章:</p><div class="ne nf gp gr ng nh"><a href="https://simaspavlos.medium.com/round-corners-and-shadow-in-uitableviewcell-swift-5-8eb903bf38a1" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">Swift 5中带有圆角和阴影的UITableViewCell</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">这是一个使用swift 5在UITableViewCell中添加圆角和阴影的教程。</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">simaspavlos.medium.com</p></div></div><div class="nq l"><div class="ob l ns nt nu nq nv kp nh"/></div></div></a></div><p id="9b26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了支持我，如果你想加入medium，你可以通过我的推荐链接:</p><div class="ne nf gp gr ng nh"><a href="https://simaspavlos.medium.com/membership" rel="noopener follow" target="_blank"><div class="ni ab fo"><div class="nj ab nk cl cj nl"><h2 class="bd ir gy z fp nm fr fs nn fu fw ip bi translated">用我的推荐链接加入媒体</h2><div class="no l"><h3 class="bd b gy z fp nm fr fs nn fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="np l"><p class="bd b dl z fp nm fr fs nn fu fw dk translated">simaspavlos.medium.com</p></div></div><div class="nq l"><div class="oc l ns nt nu nq nv kp nh"/></div></div></a></div></div></div>    
</body>
</html>