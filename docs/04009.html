<html>
<head>
<title>REST API In Laravel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Laravel 中的 REST API</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/rest-api-in-laravel-354d755a553a?source=collection_archive---------1-----------------------#2021-01-15">https://blog.devgenius.io/rest-api-in-laravel-354d755a553a?source=collection_archive---------1-----------------------#2021-01-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f3bf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">朋友们好，</p><p id="2b6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天我将向大家介绍 REST API，REST API 是一个应用程序接口，它使用 HTTP 请求来获取、上传、发布和删除数据。</p><p id="380d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本教程中，我将使用 REST API 执行 CRUD 操作，您可以学习如何在 laravel 6/7 应用程序中使用 passport 创建带身份验证的 REST API。这里我们将从 API 获取数据。</p><p id="1691" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Laravel 提供了创建 API 的简单方法。如果您的应用程序中有身份验证，那么您可以使用 passport 轻松完成。Laravel Passport 提供了创建验证用户身份令牌的方法。如果你一步一步地遵循下面的例子，那么你一定会得到输出。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="3192" class="kr ks in kn b gy kt ku l kv kw">Step 1 : Install Laravel<br/>Step 2 : Install Passport<br/>Step 3 : Passport Configuration<br/>Step 4 : Add Table and Model<br/>Step 5 : Create API Routes<br/>Step 6 : Create Controller<br/>Step 7 : Create Eloquent API Resources</span></pre><blockquote class="kx ky kz"><p id="7583" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> <em class="in">第一步:安装 Laravel</em>T3】</strong></p></blockquote><p id="87d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在终端中键入以下命令创建新项目。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="4b4a" class="kr ks in kn b gy kt ku l kv kw">composer create-project --prefer-dist laravel/laravel REST_API</span></pre><blockquote class="kx ky kz"><p id="ebbd" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> <em class="in">第二步:安装护照</em> </strong></p></blockquote><p id="ecfd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们需要通过 Composer 软件包管理器安装 passport，所以在您的终端中运行以下命令:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="c327" class="kr ks in kn b gy kt ku l kv kw">composer require laravel/passport</span></pre><p id="01f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">安装软件包后，我们需要获得默认迁移，以便在我们的数据库中创建新的 passport 表。所以运行下面的命令。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="c14f" class="kr ks in kn b gy kt ku l kv kw">php artisan migrate</span></pre><p id="e739" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们将使用 passport:install 命令安装 passport，它将为安全性创建令牌密钥。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="3a45" class="kr ks in kn b gy kt ku l kv kw">php artisan passport:install</span></pre><blockquote class="kx ky kz"><p id="abd5" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> <em class="in">第三步:护照配置</em> </strong></p></blockquote><p id="7e59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们必须在三个地方配置模型、服务提供者和授权配置文件。</p><p id="18b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">1) <strong class="jm io">在<strong class="jm io">用户模型</strong>中增加了 Passport 的</strong>hasa pitokens 类，</p><p id="9622" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io"> app/User.php </strong>中添加以下代码</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="dbe5" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="9475" class="kr ks in kn b gy le ku l kv kw">namespace App;</span><span id="b5c6" class="kr ks in kn b gy le ku l kv kw">use Illuminate\Contracts\Auth\MustVerifyEmail;<br/>use Illuminate\Foundation\Auth\User as Authenticatable;<br/>use Illuminate\Notifications\Notifiable;<br/>use Laravel\Passport\HasApiTokens;</span><span id="b455" class="kr ks in kn b gy le ku l kv kw">class User extends Authenticatable implements MustVerifyEmail<br/>{<br/>    use Notifiable,HasApiTokens;</span><span id="2002" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * The attributes that are mass assignable.<br/>     *<br/>     * @var array<br/>     */<br/>    protected $fillable = [<br/>        'name', 'email', 'password',<br/>    ];</span><span id="ba51" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * The attributes that should be hidden for arrays.<br/>     *<br/>     * @var array<br/>     */<br/>    protected $hidden = [<br/>        'password', 'remember_token',<br/>    ];</span><span id="6554" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * The attributes that should be cast to native types.<br/>     *<br/>     * @var array<br/>     */<br/>    protected $casts = [<br/>        'email_verified_at' =&gt; 'datetime',<br/>    ];<br/>}</span></pre><p id="b5a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2)在<strong class="jm io"> AuthServiceProvider </strong>中，我们添加了“<strong class="jm io"> Passport::routes() </strong></p><p id="596f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在下面添加代码<strong class="jm io">app/Providers/authserviceprovider . PHP</strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="c169" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="5e61" class="kr ks in kn b gy le ku l kv kw">namespace App\Providers;</span><span id="af50" class="kr ks in kn b gy le ku l kv kw">use Illuminate\Foundation\Support\Providers\AuthServiceProvider as ServiceProvider;<br/>use Illuminate\Support\Facades\Gate;<br/>use Laravel\Passport\Passport;</span><span id="fa5d" class="kr ks in kn b gy le ku l kv kw">class AuthServiceProvider extends ServiceProvider<br/>{<br/>    /**<br/>     * The policy mappings for the application.<br/>     *<br/>     * @var array<br/>     */<br/>    protected $policies = [<br/>        'App\Model' =&gt; 'App\Policies\ModelPolicy',<br/>    ];</span><span id="9c64" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * Register any authentication / authorization services.<br/>     *<br/>     * @return void<br/>     */<br/>    public function boot()<br/>    {<br/>        $this-&gt;registerPolicies();</span><span id="4ad6" class="kr ks in kn b gy le ku l kv kw">        //<br/>    }<br/>}</span></pre><p id="ce6e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3)我们在<strong class="jm io">auth.php</strong>中增加了<strong class="jm io"> api auth </strong>配置。</p><p id="9ba8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io"> config/auth.php </strong>中添加下面的代码。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="8142" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="4a81" class="kr ks in kn b gy le ku l kv kw">return [</span><span id="c5de" class="kr ks in kn b gy le ku l kv kw">    'guards' =&gt; [<br/>        'web' =&gt; [<br/>            'driver' =&gt; 'session',<br/>            'provider' =&gt; 'users',<br/>        ],</span><span id="0d2b" class="kr ks in kn b gy le ku l kv kw">        'api' =&gt; [<br/>            'driver' =&gt; 'passport',<br/>            'provider' =&gt; 'users',            <br/>        ],<br/>    ],<br/>];</span></pre><blockquote class="kx ky kz"><p id="7035" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> <em class="in">第四步:添加表格和模型</em> </strong></p></blockquote><p id="0cf8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一步中，我们将使用 php artisan 命令创建<strong class="jm io">产品</strong>表的迁移，因此，在您的终端中运行以下命令:</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="9214" class="kr ks in kn b gy kt ku l kv kw">php artisan make:migration create_products_table</span></pre><p id="8a5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">运行上述命令后，您将在此路径中找到迁移<strong class="jm io">数据库/迁移</strong>。因此，在您的迁移文件中添加以下代码来创建 products 表。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="5957" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="796f" class="kr ks in kn b gy le ku l kv kw">use Illuminate\Database\Migrations\Migration;<br/>use Illuminate\Database\Schema\Blueprint;<br/>use Illuminate\Support\Facades\Schema;</span><span id="be8d" class="kr ks in kn b gy le ku l kv kw">class CreateProductsTable extends Migration<br/>{<br/>    /**<br/>     * Run the migrations.<br/>     *<br/>     * @return void<br/>     */<br/>    public function up()<br/>    {<br/>        Schema::create('products', function (Blueprint $table) {<br/>            $table-&gt;id();<br/>            $table-&gt;string('name');<br/>            $table-&gt;text('detail');<br/>            $table-&gt;timestamps();<br/>        });<br/>    }</span><span id="da65" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * Reverse the migrations.<br/>     *<br/>     * @return void<br/>     */<br/>    public function down()<br/>    {<br/>        Schema::dropIfExists('products');<br/>    }<br/>}</span></pre><p id="ddb0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，在终端中运行下面的代码来创建迁移。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="77bc" class="kr ks in kn b gy kt ku l kv kw">php artisan migrate</span></pre><p id="36d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">并在<strong class="jm io"> app/Product.php </strong>文件中添加以下代码</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="8727" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="1660" class="kr ks in kn b gy le ku l kv kw">namespace App;</span><span id="c32f" class="kr ks in kn b gy le ku l kv kw">use Illuminate\Database\Eloquent\Model;</span><span id="6be7" class="kr ks in kn b gy le ku l kv kw">class Product extends Model<br/>{<br/>    protected $fillable = [<br/>        'name', 'detail'<br/>    ];<br/>}</span></pre><blockquote class="kx ky kz"><p id="9a85" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> <em class="in">第五步:创建 API 路由</em> </strong></p></blockquote><p id="8307" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在步骤 5 中，我们将创建 api 路由。Laravel 为编写 web 服务路径提供了 api.php 文件。所以，让我们在<strong class="jm io"> routes/api.php 文件中添加 route。</strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="d29d" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="b247" class="kr ks in kn b gy le ku l kv kw">use Illuminate\Http\Request;<br/>use Illuminate\Support\Facades\Route;</span><span id="ae3c" class="kr ks in kn b gy le ku l kv kw">Route::middleware('auth:api')-&gt;get('/user', function (Request $request) {<br/>    return $request-&gt;user();<br/>});</span><span id="1f30" class="kr ks in kn b gy le ku l kv kw">Route::post('register', 'API\RegisterController@register');<br/>Route::post('login', 'API\RegisterController@login');<br/>   <br/>Route::middleware('auth:api')-&gt;group( function () {<br/>    Route::resource('products', 'API\ProductController');<br/>});</span></pre><blockquote class="kx ky kz"><p id="906d" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> <em class="in">第六步:创建控制器</em> </strong></p></blockquote><p id="9e34" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我已经在 api 文件夹中创建了<strong class="jm io"> BaseController、ProductController </strong>和<strong class="jm io"> RegisterController </strong>。</p><p id="eab7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">app/Http/Controllers/API/base controller . PHP</strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="7738" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="f22a" class="kr ks in kn b gy le ku l kv kw">namespace App\Http\Controllers\API;</span><span id="76e2" class="kr ks in kn b gy le ku l kv kw">use App\Http\Controllers\Controller;<br/>use Illuminate\Http\Request;</span><span id="1be4" class="kr ks in kn b gy le ku l kv kw">class BaseController extends Controller<br/>{<br/>    public function sendResponse($result, $message)<br/>    {<br/>    	$response = [<br/>            'success' =&gt; true,<br/>            'data'    =&gt; $result,<br/>            'message' =&gt; $message,<br/>        ];<br/>        return response()-&gt;json($response, 200);<br/>    }</span><span id="febb" class="kr ks in kn b gy le ku l kv kw">    public function sendError($error, $errorMessages = [], $code = 404)<br/>    {<br/>    	$response = [<br/>            'success' =&gt; false,<br/>            'message' =&gt; $error,<br/>        ];</span><span id="ec8f" class="kr ks in kn b gy le ku l kv kw">        if(!empty($errorMessages)){<br/>            $response['data'] = $errorMessages;<br/>        }<br/>        <br/>        return response()-&gt;json($response, $code);<br/>    }</span><span id="e612" class="kr ks in kn b gy le ku l kv kw">}</span></pre><p id="ea30" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">app/Http/Controllers/API/product controller . PHP</strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="498e" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="0985" class="kr ks in kn b gy le ku l kv kw">namespace App\Http\Controllers\API;</span><span id="2cc3" class="kr ks in kn b gy le ku l kv kw">use App\Http\Controllers\Controller;<br/>use Illuminate\Http\Request;<br/>use App\Product;<br/>use Validator;<br/>use App\Http\Controllers\API\BaseController as BaseController;<br/>use App\Http\Resources\Product as ProductResource;</span><span id="1e03" class="kr ks in kn b gy le ku l kv kw">class ProductController extends BaseController<br/>{<br/>    /**<br/>     * Display a listing of the resource.<br/>     *<br/>     * @return \Illuminate\Http\Response<br/>     */<br/>    public function index()<br/>    {<br/>        $products = Product::all();</span><span id="bc21" class="kr ks in kn b gy le ku l kv kw">        return $this-&gt;sendResponse(ProductResource::collection($products), 'Products Retrieved Successfully.');<br/>    }</span><span id="5a98" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * Show the form for creating a new resource.<br/>     *<br/>     * @return \Illuminate\Http\Response<br/>     */<br/>    public function create()<br/>    {<br/>        <br/>    }</span><span id="727e" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * Store a newly created resource in storage.<br/>     *<br/>     * @param  \Illuminate\Http\Request  $request<br/>     * @return \Illuminate\Http\Response<br/>     */<br/>    public function store(Request $request)<br/>    {<br/>        $input = $request-&gt;all();<br/>   <br/>        $validator = Validator::make($input, [<br/>            'name' =&gt; 'required',<br/>            'detail' =&gt; 'required'<br/>        ]);<br/>   <br/>        if($validator-&gt;fails()){<br/>            return $this-&gt;sendError('Validation Error.', $validator-&gt;errors());       <br/>        }<br/>   <br/>        $product = Product::create($input);<br/>   <br/>        return $this-&gt;sendResponse(new ProductResource($product), 'Product Created Successfully.');<br/>    }</span><span id="887c" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * Display the specified resource.<br/>     *<br/>     * @param  int  $id<br/>     * @return \Illuminate\Http\Response<br/>     */<br/>    public function show($id)<br/>    {<br/>        $product = Product::find($id);<br/>  <br/>        if (is_null($product)) {<br/>            return $this-&gt;sendError('Product not found.');<br/>        }<br/>   <br/>        return $this-&gt;sendResponse(new ProductResource($product), 'Product Retrieved Successfully.');<br/>    }</span><span id="d615" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * Show the form for editing the specified resource.<br/>     *<br/>     * @param  int  $id<br/>     * @return \Illuminate\Http\Response<br/>     */<br/>    public function edit($id)<br/>    {<br/>        //<br/>    }</span><span id="b4ed" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * Update the specified resource in storage.<br/>     *<br/>     * @param  \Illuminate\Http\Request  $request<br/>     * @param  int  $id<br/>     * @return \Illuminate\Http\Response<br/>     */<br/>    public function update(Request $request, $id)<br/>    {<br/>        $input = $request-&gt;all();<br/>   <br/>        $validator = Validator::make($input, [<br/>            'name' =&gt; 'required',<br/>            'detail' =&gt; 'required'<br/>        ]);<br/>   <br/>        if($validator-&gt;fails()){<br/>            return $this-&gt;sendError('Validation Error.', $validator-&gt;errors());       <br/>        }<br/>        $product = Product::find($id);   <br/>        $product-&gt;name = $input['name'];<br/>        $product-&gt;detail = $input['detail'];<br/>        $product-&gt;save();<br/>   <br/>        return $this-&gt;sendResponse(new ProductResource($product), 'Product Updated Successfully.');<br/>    }</span><span id="2578" class="kr ks in kn b gy le ku l kv kw">    /**<br/>     * Remove the specified resource from storage.<br/>     *<br/>     * @param  int  $id<br/>     * @return \Illuminate\Http\Response<br/>     */<br/>    public function destroy($id)<br/>    {<br/>        $product = Product::find($id);<br/>        $product-&gt;delete();<br/>   <br/>        return $this-&gt;sendResponse([], 'Product Deleted Successfully.');<br/>    }<br/>}</span></pre><p id="28ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">app/Http/Controllers/API/register controller . PHP</strong></p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="74fc" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="ee51" class="kr ks in kn b gy le ku l kv kw">namespace App\Http\Controllers\API;</span><span id="ff59" class="kr ks in kn b gy le ku l kv kw">use App\Http\Controllers\Controller;<br/>use Illuminate\Http\Request;<br/>use App\Http\Controllers\API\BaseController as BaseController;<br/>use App\User;<br/>use Illuminate\Support\Facades\Auth;<br/>use Validator;</span><span id="fd53" class="kr ks in kn b gy le ku l kv kw">class RegisterController extends BaseController<br/>{<br/>    public function register(Request $request)<br/>    {<br/>        $validator = Validator::make($request-&gt;all(), [<br/>            'name' =&gt; 'required',<br/>            'email' =&gt; 'required|email',<br/>            'password' =&gt; 'required',<br/>            'c_password' =&gt; 'required|same:password',<br/>        ]);<br/>   <br/>        if($validator-&gt;fails()){<br/>            return $this-&gt;sendError('Validation Error.', $validator-&gt;errors());       <br/>        }<br/>   <br/>        $input = $request-&gt;all();<br/>        $input['password'] = bcrypt($input['password']);<br/>        $user = User::create($input);<br/>        $success['token'] =  $user-&gt;createToken('MyApp')-&gt;accessToken;<br/>        $success['name'] =  $user-&gt;name;<br/>   <br/>        return $this-&gt;sendResponse($success, 'User register successfully.');<br/>    }</span><span id="9ef4" class="kr ks in kn b gy le ku l kv kw">    public function login(Request $request)<br/>    {<br/>        if(Auth::attempt(['email' =&gt; $request-&gt;email, 'password' =&gt; $request-&gt;password])){ <br/>            $user = Auth::user(); <br/>            $success['token'] =  $user-&gt;createToken('MyApp')-&gt;accessToken; <br/>            $success['name'] =  $user-&gt;name;<br/>            return $this-&gt;sendResponse($success, 'User login successfully.');<br/>        } <br/>        else{ <br/>            return $this-&gt;sendError('Unauthorised.', ['error'=&gt;'Unauthorised']);<br/>        } <br/>    }<br/>}</span></pre><blockquote class="kx ky kz"><p id="37e5" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> <em class="in">第七步:创建口才 API 资源</em> </strong></p></blockquote><p id="8a1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们必须创建 api 资源，Laravel 的资源类允许我们有表现力地轻松地将我们的模型和集合转换成 JSON。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="c292" class="kr ks in kn b gy kt ku l kv kw">php artisan make:resource Product</span></pre><p id="e97d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，在这个<strong class="jm io">app/Http/Resources/product . PHP</strong>路径上创建了新文件。</p><pre class="ki kj kk kl gt km kn ko kp aw kq bi"><span id="fdf0" class="kr ks in kn b gy kt ku l kv kw">&lt;?php</span><span id="2e65" class="kr ks in kn b gy le ku l kv kw">namespace App\Http\Resources;</span><span id="0867" class="kr ks in kn b gy le ku l kv kw">use Illuminate\Http\Resources\Json\JsonResource;</span><span id="7b69" class="kr ks in kn b gy le ku l kv kw">class Product extends JsonResource<br/>{<br/>    /**<br/>     * Transform the resource into an array.<br/>     *<br/>     * @param  \Illuminate\Http\Request  $request<br/>     * @return array<br/>     */<br/>    public function toArray($request)<br/>    {<br/>        return [<br/>            'id' =&gt; $this-&gt;id,<br/>            'name' =&gt; $this-&gt;name,<br/>            'detail' =&gt; $this-&gt;detail,<br/>            'created_at' =&gt; $this-&gt;created_at-&gt;format('d/m/Y'),<br/>            'updated_at' =&gt; $this-&gt;updated_at-&gt;format('d/m/Y'),<br/>        ];<br/>    }<br/>}</span></pre><p id="9fbd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">添加完所有代码后，我们就可以在 laravel 中运行完整的 restful api 了。</p><p id="2e92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我已经使用<strong class="jm io"> POSTMAN API </strong>进行测试，<strong class="jm io"> Postman </strong>是<strong class="jm io"> API </strong>开发的协作平台。<strong class="jm io"> Postman 的</strong>特性简化了构建<strong class="jm io"> API </strong>的每一步，并简化了协作，因此您可以更快地创建更好的<strong class="jm io">API</strong>。</p><p id="ea13" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了让你更好的理解，我在这里添加了一些描述邮递员的截图。</p><p id="0e5a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先我们需要在 postman 中<strong class="jm io">注册来检查我们的例子。</strong></p><blockquote class="kx ky kz"><p id="1b26" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> 1 —注册 API:动词:GET，URL:http://localhost:8000/API/Register</strong></p></blockquote><figure class="ki kj kk kl gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lf"><img src="../Images/ad20643112ff31019fbd285b041aeb02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SEbdwGSXD27gDuUL-LE4CA.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">Laravel REST APIs 寄存器</figcaption></figure><blockquote class="kx ky kz"><p id="1c67" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated">在 postman 中成功注册后，我们需要在标题中添加访问令牌。</p></blockquote><figure class="ki kj kk kl gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lr"><img src="../Images/3170563ed901dadc0afae9b23d6ff6ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CYtP2bzo_Vkx-RqshpWe3Q.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">在标题中添加授权</figcaption></figure><blockquote class="kx ky kz"><p id="51c7" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> 3 —登录 API:动词:GET，URL:http://localhost:8000/API/log in</strong></p></blockquote><figure class="ki kj kk kl gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi ls"><img src="../Images/e06483cec3473ba3d8d62d97a825a49e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J7c06HfTnKi4-BWYNb2fxw.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">Laravel REST APIs 登录</figcaption></figure><blockquote class="kx ky kz"><p id="84f9" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> 4 —创建产品 API:动词:GET，URL:http://localhost:8000/API/products</strong></p></blockquote><figure class="ki kj kk kl gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lt"><img src="../Images/52f8ddeda0397ba7fd77198d8c64ab22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_bJ2TW4n2qrqIc3jqlVyg.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">Laravel REST APIs 创建</figcaption></figure><blockquote class="kx ky kz"><p id="5f1b" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io"> 5 —产品更新 API:动词:PUT，URL:http://localhost:8000/API/products/{ id }</strong></p></blockquote><figure class="ki kj kk kl gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lu"><img src="../Images/14722b4d7b7238c6b35601043d83bbd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zn0EErtT9o41rfYKXKFdcA.png"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk translated">Laravel REST APIs 更新</figcaption></figure><blockquote class="kx ky kz"><p id="96fc" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io">从 GitHub 下载代码:</strong><a class="ae lv" href="https://github.com/websolutionstuff/Laravel-REST-API" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">Laravel-REST-API</strong></a></p></blockquote><p id="26a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我们完成了代码，现在是时候在项目中实现了。</p><blockquote class="kx ky kz"><p id="4c03" class="jk jl la jm b jn jo jp jq jr js jt ju lb jw jx jy lc ka kb kc ld ke kf kg kh ig bi translated"><strong class="jm io">阅读还:</strong> <a class="ae lv" href="https://websolutionstuff.com/post/how-to-integrate-paypal-payment-gateway-in-laravel" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">如何在 Laravel 中集成 Paypal 支付网关</strong> </a></p></blockquote><p id="88c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请不要忘记“<strong class="jm io">就像“</strong>”、“<strong class="jm io">分享“</strong>”和“<strong class="jm io">鼓掌”</strong>。</p><p id="6381" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢阅读！！</p></div></div>    
</body>
</html>