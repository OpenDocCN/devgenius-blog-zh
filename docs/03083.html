<html>
<head>
<title>Navigation &amp; Routing in Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">颤振中的导航和路由</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/navigation-routing-in-flutter-655f08183084?source=collection_archive---------1-----------------------#2020-09-28">https://blog.devgenius.io/navigation-routing-in-flutter-655f08183084?source=collection_archive---------1-----------------------#2020-09-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="b527" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">第 3 部分:通过你的应用程序找到你的路。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/57d579e2fc477fc7e616ab984a242580.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qglkYFYRx45ywoiI"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated"><a class="ae ks" href="https://unsplash.com/@dannayyyboi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">丹钟</a>在<a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><blockquote class="kt ku kv"><p id="9ed9" class="kw kx ky kz b la lb jo lc ld le jr lf lg lh li lj lk ll lm ln lo lp lq lr ls ig bi translated">PS:这是我给初学者的扑系列的第三部分。如果你想看看剩下的部分，链接在文章的末尾。</p></blockquote><p id="7640" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">我们每天从一个地方航行到另一个地方。无论是从家里去杂货店、健身房还是办公室，我们都要通过一条路径从一个源头到达我们想要的目的地。类似地，在 Flutter 中，我们有路径可以用来导航到想要的小部件。</p><p id="f9ac" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">如果你来自 Android，你会熟悉用于在活动和片段之间导航的<em class="ky">意图</em>的概念。如果你熟悉 iOS，那么等价的是使用连接器在视图间导航。来到 Flutter，有几种在屏幕间导航的方法。</p><h1 id="bfa4" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">第 1 部分:基本导航</h1><p id="fcd4" class="pw-post-body-paragraph kw kx in kz b la mo jo lc ld mp jr lf lt mq li lj lu mr lm ln lv ms lq lr ls ig bi translated">让我们看看最基本的导航形式，它使用了<strong class="kz io"><em class="ky">navigator . push()</em></strong>和<strong class="kz io"><em class="ky">navigator . pop()</em></strong>方法</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="e6aa" class="my lx in mu b gy mz na l nb nc"><em class="ky">class </em>FirstRoute <em class="ky">extends </em>StatelessWidget {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <em class="ky">return </em>Scaffold(<br/>      appBar: AppBar(<br/>        title: Text('First Route'),<br/>      ),<br/>      body: Center(<br/>        child: RaisedButton(<br/>          child: Text('Open route'),<br/>          onPressed: () {<br/>            <em class="ky">// Navigate to second route when tapped.<br/>            </em>Navigator.push(<br/>              context,<br/>              MaterialPageRoute(<br/>                builder: (context) =&gt; SecondRoute(),<br/>              ),<br/>            );<br/>          },<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}<br/><br/><em class="ky">class </em>SecondRoute <em class="ky">extends </em>StatelessWidget {<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    <em class="ky">return </em>Scaffold(<br/>      appBar: AppBar(<br/>        title: Text("Second Route"),<br/>      ),<br/>      body: Center(<br/>        child: RaisedButton(<br/>          onPressed: () {<br/>            <em class="ky">// Navigate back to first route when tapped.<br/>            </em>Navigator.pop(context);<br/>          },<br/>          child: Text('Go back!'),<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="a9ae" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">让我们来看看这是如何工作的:</p><p id="4565" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">如果仔细观察 FirstRoute 和 SecondRoute 中的<strong class="kz io"> <em class="ky"> onPressed() </em> </strong>函数，您会发现在小部件之间导航是多么容易。让我们来分析一下。</p><p id="25d5" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">Navigator.push()接受两个参数:</p><ol class=""><li id="dd20" class="nd ne in kz b la lb ld le lt nf lu ng lv nh ls ni nj nk nl bi translated">build context:build context 非常简单明了，它为导航器提供了必须导航的上下文。简单来说，你可以认为这是源头。</li><li id="26a5" class="nd ne in kz b la nm ld nn lt no lu np lv nq ls ni nj nk nl bi translated">route:可以使用 MaterialPageRoute 的实例，用新屏幕替换整个屏幕。MaterialPageRoute 需要一个构建器方法，您可以在该方法中指定要在应用程序中导航到的目的地。</li></ol><p id="167e" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">转到 SecondRoute，它利用 Navigator.pop()方法返回到 FirstRoute。基本上，这里发生的事情是，当你按下屏幕时，它们会被添加到堆栈中，当你想要移除它们时，它们会弹出。</p><h1 id="a91e" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">第 2 部分:命名路由</h1><p id="b0c5" class="pw-post-body-paragraph kw kx in kz b la mo jo lc ld mp jr lf lt mq li lj lu mr lm ln lv ms lq lr ls ig bi translated">现在我们已经了解了如何在两个屏幕之间导航，让我们来看看更复杂的东西。随着应用程序的发展，跟踪所有路线变得越来越困难。解决这个问题的一种方法是通过指定的路由进行抖动。</p><p id="daf7" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">您可以定义所有路线的地图，并在希望导航到不同路线时调用名称。让我们来看看它是如何工作的。我们将使用上面定义的两个小部件<strong class="kz io"><em class="ky"/></strong>和<strong class="kz io"> <em class="ky"> SecondRoute() </em> </strong>。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="32c9" class="my lx in mu b gy mz na l nb nc">MaterialApp(<br/>  initialRoute: '/',<br/>  routes: {<br/>    '/': (context) =&gt; <!-- -->FirstRoute<!-- -->(),<br/>    '/second': (context) =&gt; <!-- -->SecondRoute<!-- -->(),<br/>  },<br/>);</span></pre><p id="53ae" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">您在<strong class="kz io"> <em class="ky"> MaterialApp() </em> </strong>中定义您的路线，这是您的应用程序的根。如果您查看第 1 部分中的 starter 项目，您将看到默认情况下 MaterialApp 使用“home”参数。定义命名路由时，您可以在 home 或 initialRoute 之间进行选择，不要同时设置两者，否则会出错。为了在这个场景中导航，我们简单地用下面的代码替换 FirstRoute()中的<strong class="kz io"> <em class="ky"> onPressed() </em> </strong>的内容:</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="1d05" class="my lx in mu b gy mz na l nb nc">Navigator.pushNamed(context, '/second');</span></pre><p id="c940" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">就这么简单！</p><h1 id="590e" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">第 3 部分:生成的路线</h1><p id="25ea" class="pw-post-body-paragraph kw kx in kz b la mo jo lc ld mp jr lf lt mq li lj lu mr lm ln lv ms lq lr ls ig bi translated">现在我们已经知道了如何使用命名路线导航，让我们更进一步。假设您希望通过点击一个按钮从一个屏幕导航到另一个屏幕。但同时您希望执行网络调用或实现一些业务逻辑，例如在导航之前检查用户访问控制。生成的路线来救援。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="7c9a" class="my lx in mu b gy mz na l nb nc">class MyApp extends StatelessWidget {<br/>  // This widget is the root of your application.<br/>  @override<br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      title: 'Flutter Demo',<br/>      theme: ThemeData(<br/>        primarySwatch: Colors.<em class="ky">blue</em>,<br/>        visualDensity: VisualDensity.<em class="ky">adaptivePlatformDensity</em>,<br/>      ),<br/>      onGenerateRoute: _generatedRoutes,<br/>    );<br/>  }<br/><br/>  Route _generatedRoutes(RouteSettings settings) {<br/>    // implement business logic here</span><span id="7ca9" class="my lx in mu b gy nr na l nb nc">    switch (settings.name) {<br/>      case '/first':<br/>        return MaterialPageRoute(builder: (context) =&gt; FirstRoute());<br/>      case '/second':<br/>        return MaterialPageRoute(builder: (context) =&gt; SecondRoute());<br/>      default:<br/>        return ErrorPage();<br/>    }<br/>  }<br/>}</span></pre><p id="5dea" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">正如您所看到的，我们使用 onGenerateRoute 参数，该参数接受用户定义的函数(UDF ),您可以在导航之前在该函数中实现您的自定义业务逻辑。在这种情况下，路由使用命名路由。因此，为了导航，您可以使用<strong class="kz io"> pushNamed() </strong>以我们在上面看到的相同方式调用它。</p><h1 id="be4d" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">包裹</h1><p id="3547" class="pw-post-body-paragraph kw kx in kz b la mo jo lc ld mp jr lf lt mq li lj lu mr lm ln lv ms lq lr ls ig bi translated">总之，在本文中，我们已经学习了路由和导航的基础知识，并且了解了名为 routes，onGenerateRoutes 的导航器类。一定要让我知道你想让我写的主题，我会尽我所能写出来。在那之前，编码快乐！</p><p id="1f65" class="pw-post-body-paragraph kw kx in kz b la lb jo lc ld le jr lf lt lh li lj lu ll lm ln lv lp lq lr ls ig bi translated">PS。本文是系列文章的一部分。点击这里查看其他文章:</p><ol class=""><li id="751f" class="nd ne in kz b la lb ld le lt nf lu ng lv nh ls ni nj nk nl bi translated"><a class="ae ks" href="https://medium.com/dev-genius/flutter-for-beginners-c2fae3d4d540" rel="noopener">适合初学者的颤振</a></li><li id="074f" class="nd ne in kz b la nm ld nn lt no lu np lv nq ls ni nj nk nl bi translated"><a class="ae ks" href="https://medium.com/dev-genius/widgets-in-flutter-a53e3c671f13" rel="noopener">小部件在颤动</a></li><li id="ba71" class="nd ne in kz b la nm ld nn lt no lu np lv nq ls ni nj nk nl bi translated"><a class="ae ks" href="https://medium.com/dev-genius/navigation-routing-in-flutter-655f08183084" rel="noopener">导航&amp;颤振中的路由</a></li><li id="8d90" class="nd ne in kz b la nm ld nn lt no lu np lv nq ls ni nj nk nl bi translated"><a class="ae ks" href="https://medium.com/dev-genius/layouts-in-flutter-c65b0dc6b356" rel="noopener">颤振布局</a></li><li id="897c" class="nd ne in kz b la nm ld nn lt no lu np lv nq ls ni nj nk nl bi translated"><a class="ae ks" href="https://medium.com/dev-genius/listviews-in-flutter-12bab3dccadc" rel="noopener">颤振中的列表视图</a></li></ol></div></div>    
</body>
</html>