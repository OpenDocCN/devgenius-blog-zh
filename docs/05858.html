<html>
<head>
<title>You don’t need react-redux anymore</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你不再需要 react-redux 了</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/you-dont-need-react-redux-anymore-7e3e1bc8e370?source=collection_archive---------1-----------------------#2021-11-10">https://blog.devgenius.io/you-dont-need-react-redux-anymore-7e3e1bc8e370?source=collection_archive---------1-----------------------#2021-11-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c8f5dca2814ba7bae3619f9942e1a146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UhEFIg5rd_ue0uaNv_sdRQ.png"/></div></div></figure><p id="c735" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢这个内容，你可以支持我😊</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><a href="https://www.buymeacoffee.com/stasoz"><div class="gh gi kt"><img src="../Images/52b5e00159bd59964df11aa5614d99cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WCKVwAym46YQNhYk.png"/></div></a></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="2f1d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">大家好，今天我就来说说 react 的一个新替代品——redux，以及它为什么更好。</p><p id="e042" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将通过用两个不同的库(react-redux 和 react-toolkit)创建 Todo 应用程序来进行比较。</p><p id="8154" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我假设你已经熟悉 Redux 了。如果没有，可以在<a class="ae lf" href="https://react-redux.js.org" rel="noopener ugc nofollow" target="_blank">官网</a>上找到。</p><p id="494d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们构建一个简单的 todo 应用程序进行比较。</p><p id="c13f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，让我们创建项目:</p><pre class="ku kv kw kx gt lg lh li lj aw lk bi"><span id="8c35" class="ll lm in lh b gy ln lo l lp lq">npx create-react-app todo-app</span></pre><p id="5986" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">或者通过纱线</p><pre class="ku kv kw kx gt lg lh li lj aw lk bi"><span id="5c03" class="ll lm in lh b gy ln lo l lp lq">yarn create react-app todo-app</span></pre><p id="358f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后打开项目，去掉不必要的文件和依赖:<em class="lr"> reportWebVitals.js，App.js，App.css，App.test.js，setupTests.js，logo.svg </em>等等。</p><p id="d9e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以我的项目结构是这样的:</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/a0f323683ba31004b41bdd8738970cd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*-Ugri8CTQiFG10LhxY2Eiw.png"/></div><figcaption class="lt lu gj gh gi lv lw bd b be z dk translated">初始项目结构</figcaption></figure><p id="efeb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们在 src 中创建组件文件夹，在组件文件夹中创建下一个文件:<em class="lr"> Todo.js，TodoAdd.js，TodoContainer.js，TodoList.js </em></p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/c1b7ac6ebc208242a6ff854493a6a7dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:548/format:webp/1*GsMM5ZxVGuVPWqzNMoBnug.png"/></div></figure><p id="1080" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">仔细检查每个组件。</p><ol class=""><li id="a94a" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks md me mf mg bi translated"><em class="lr"> TodoContainer </em> —包含 TodoList 和 TodoAdd 组件的组件。</li></ol><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="3205" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.<em class="lr"> TodoAdd </em> —用于添加新待办事项的组件，它有一个用于存储和键入标题的输入字段和用于创建新待办事项的按钮。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="c7d8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">3.<em class="lr"> Todo </em> —表示简单 Todo 并显示标题和复选框以标记 Todo 已完成或未完成的组件。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="a4fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">4.最后一个是<em class="lr">待办事项</em> —代表待办事项列表:)</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="3516" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">是时候将我们的<em class="lr"> TodoContainer </em>添加到<em class="lr"> index.js </em>中了</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="6990" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并通过终端中的<code class="fe mj mk ml lh b">npm run start</code>启动我们的应用程序。瞧啊。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/b1214546174bf6ad2ddb94cfe6887966.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*cewHiZtt0VIXrQxH89J9uw.png"/></div></figure><p id="bd8b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是在我们的应用程序中没有逻辑。所以还是补充一下吧。首先，我们要建立一个 redux (store，actions，reducer，types)来存储应用程序的一般状态。</p><p id="bc5d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过下一个命令添加 redux</p><pre class="ku kv kw kx gt lg lh li lj aw lk bi"><span id="c1ba" class="ll lm in lh b gy ln lo l lp lq">npm install react-redux</span></pre><p id="8120" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">或者纱线</p><pre class="ku kv kw kx gt lg lh li lj aw lk bi"><span id="98bd" class="ll lm in lh b gy ln lo l lp lq">yarn add react-redux</span></pre><p id="e5fb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后在<em class="lr"> src - &gt; redux </em>中新建一个文件夹，添加到 redux 文件夹下一个文件夹和文件:</p><ol class=""><li id="bef6" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks md me mf mg bi translated"><em class="lr">redux-&gt;reducers-&gt;index . js</em></li><li id="8206" class="ly lz in jx b jy mn kc mo kg mp kk mq ko mr ks md me mf mg bi translated"><em class="lr">redux-&gt;reducers-&gt;todo:actions . js，actionsTypes.js，todore reducer . js</em></li><li id="c2b3" class="ly lz in jx b jy mn kc mo kg mp kk mq ko mr ks md me mf mg bi translated"><em class="lr"> redux - &gt; store.js </em></li></ol><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/599002ef575a85e33631eda878846f73.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*n7ACugcf4RGgbwz-5pz0XA.png"/></div></figure><p id="c21a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lr"> store.js </em> —这里我们有 redux 的<strong class="jx io"> createStore() </strong>函数，创建一个商店(我觉得不值得解释函数是做什么的，名字本身就说明了一切)。我们还在这里导入了一个名为<strong class="jx io"> rootReducer、</strong>的文件，我们还没有创建它，所以现在让我们开始吧。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="289a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lr">reducers-&gt;index . js-</em>主减速器，您可以在其中放置许多不同的减速器用于不同的操作，他会通过<strong class="jx io">combiner reducers()将它们组合成一个减速器。为什么我们只需要一个主减速器？因为<em class="lr"> store.js </em>中的<strong class="jx io"> createStore() </strong>只能带一个减速器。</strong></p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="6319" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">好，我们已经创造了主减速器，它进口到一个减速器，我们还没有它。</p><p id="cf65" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，让我们为 todoReducer 添加<strong class="jx io">动作类型</strong>。我不会实现所有的功能，只有添加和完成。</p><p id="1524" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lr">redux-&gt;todo-&gt;action types . js</em></p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="9aa6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，为 todo 创建<strong class="jx io">动作</strong>。</p><p id="d589" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lr">redux-&gt;todo-&gt;actions . js</em></p><p id="7a9b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，我们从<strong class="jx io">动作类型</strong> <em class="lr"> </em>导入常量，并在各自的动作中作为类型传递。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="771b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后我们可以创建 reducer:)</p><p id="969d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，我们将<em class="lr">开关盒</em>所需的动作类型导入到<strong class="jx io">to dore reducer()</strong>函数中。</p><p id="4804" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我们为这个缩减器声明一个名为<em class="lr"> initialState </em>的状态。</p><p id="b1d0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这之后，我们创建一个名为<em class="lr">的函数来减少</em>的变量，它有两个参数——状态<em class="lr">，动作</em>。<em class="lr">状态</em>取一个初始值<em class="lr"> initialState，动作</em>从<em class="lr"> actions.js </em>文件接收我们的动作创建者传递的数据<em class="lr"> ( </em>有效载荷<em class="lr"> ) </em>。</p><p id="8549" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<strong class="jx io"> todoReducer() </strong>内部，我们使用来自 JS 的<a class="ae lf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> switch-case </strong> </a>，在每个 case 内部，我们返回更新后的状态。我们使用<a class="ae lf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">扩展运算符(…) </strong> </a>将状态复制到我们的新对象中，然后在状态中添加我们想要更改的内容。</p><blockquote class="mt mu mv"><p id="a062" class="jv jw lr jx b jy jz ka kb kc kd ke kf mw kh ki kj mx kl km kn my kp kq kr ks ig bi translated">⚠️ <em class="in"> </em>永远记住<em class="in">:我们永远不会改变原来的状态！每次我们必须做出改变时，我们返回一个新的状态对象。</em></p></blockquote><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="56cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">设置 redux 的最后一步是连接到<em class="lr"> src - &gt; index.js </em></p><p id="d818" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，我们从 react-redux 导入<strong class="jx io">提供者</strong>来包装应用程序的所有组件，并将<strong class="jx io">存储</strong>传递给<strong class="jx io">提供者</strong>。因此，每个组件都可以访问该状态。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="fef3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，让我们添加在 store 中添加新 todo 的逻辑。修改<em class="lr">以加载</em>组件，如下所示。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="c7c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们从 Todo 操作中导入<strong class="jx io"> addTodo </strong>操作，并在<strong class="jx io">上添加逻辑 onAddBtnClick() </strong>。现在，当用户键入一些内容并点击添加按钮时，我们将把新的 todo 保存到我们的存储中。</p><p id="af9e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你不熟悉<strong class="jx io">使用 Dispatch </strong>，<strong class="jx io">使用 Selector </strong>挂钩，在这里阅读关于它们的挂钩<a class="ae lf" href="https://react-redux.js.org/api/hooks" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="2bab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在剩下的就是在屏幕上输出我们的待办事项了。让我们修改我们的 TodoList 并在那里添加一些代码。</p><p id="60da" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> useSelector() </strong>允许我们<em class="lr"> </em>访问我们的商店并获取数据，然后我们只需通过<a class="ae lf" href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> map() </strong> </a> <strong class="jx io"> </strong>输出我们的 todo，并通过 props 传递给每个 todo 必要的数据。没什么特别的。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="b9cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">只保留更改 Todo 组件。我们从 Todo 操作中导入<strong class="jx io"> completeTodo </strong>并在用户点击复选框和 todo 是否完成时调用它:)</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="8400" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，你可以启动 app，玩一点点。</p><pre class="ku kv kw kx gt lg lh li lj aw lk bi"><span id="55fd" class="ll lm in lh b gy ln lo l lp lq">npm run start</span></pre><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/7f6c133e57ee54b93ddb08983ba3ce3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*4RGDrZxvBaQ1hZQRIXoUzw.png"/></div></figure><p id="4ae5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以，我们用 redux store 构建了一个 todo 应用程序。但是告诉我，redux 中的代码看起来是冗余的还是复杂的？请在评论中写下你的观点。对我来说——是的，我们可以通过<a class="ae lf" href="https://redux-toolkit.js.org" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">redux-toolkit</strong></a><strong class="jx io">修复它。</strong></p><p id="a427" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Redux Toolkit 是一个软件包，它使得使用 Redux 变得很容易。它旨在解决三个主要问题:</p><ul class=""><li id="8c22" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks na me mf mg bi translated">商店设置太复杂</li><li id="6167" class="ly lz in jx b jy mn kc mo kg mp kk mq ko mr ks na me mf mg bi translated">为了让 Redux 做一些有用的事情，你必须使用额外的包。</li><li id="1ba9" class="ly lz in jx b jy mn kc mo kg mp kk mq ko mr ks na me mf mg bi translated">太多样板文件</li></ul><p id="6058" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Redux Toolkit 提供了配置存储和执行最常见操作的工具，以及简化代码的实用工具。</p><p id="45bc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过下一个命令安装</p><pre class="ku kv kw kx gt lg lh li lj aw lk bi"><span id="d207" class="ll lm in lh b gy ln lo l lp lq">npm i @reduxjs/toolkit</span></pre><p id="f41f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">或者纱线</p><pre class="ku kv kw kx gt lg lh li lj aw lk bi"><span id="2a40" class="ll lm in lh b gy ln lo l lp lq">yarn add @reduxjs/toolkit</span></pre><p id="aaaa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，在 src 中创建 redux-toolkit 文件夹，并在其中添加下一个文件夹/文件:</p><ol class=""><li id="14fc" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks md me mf mg bi translated"><em class="lr">redux-toolkit-&gt;store . js</em></li><li id="3ed4" class="ly lz in jx b jy mn kc mo kg mp kk mq ko mr ks md me mf mg bi translated"><em class="lr">redux-toolkit-&gt;todo-&gt;todo slice . js</em></li></ol><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/e2138db0775a6878bb1a7d520c6f8162.png" data-original-src="https://miro.medium.com/v2/resize:fit:540/format:webp/1*iJWoiE5p8mFqUBPTJZgvew.png"/></div></figure><p id="3d4d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">store . js——与 redux 中的 store 相同，但不同之处在于我们从@reduxjs/toolkit 导入了<strong class="jx io"> configureStore() </strong>。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="9ea0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，我们需要创造一个减毒器。</p><p id="5742" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lr"> todoSlice.js — </em>导入 redux-toolkit 的主要特性之一—<strong class="jx io"/><a class="ae lf" href="https://redux-toolkit.js.org/api/createslice" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">create slice</strong></a><strong class="jx io">()</strong>。<strong class="jx io"> createSlice() </strong>是一个高阶函数，它接受一个片名、一个初始状态和一个充满 reducer 函数的对象。它自动生成对应于减少器和状态的动作创建者和动作类型。</p><p id="504f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 Redux-Toolkit 中，createSlice 方法帮助我们创建 redux-store 的一部分。该函数旨在减少以规范方式向 redux 添加数据所需的样板文件。内部使用<a class="ae lf" href="https://redux-toolkit.js.org/api/createAction" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> createAction </strong> </a>和<a class="ae lf" href="https://redux-toolkit.js.org/api/createreducer" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> createReducer </strong> </a>。<br/>我推荐你使用<strong class="jx io"> createSlice </strong>而不是<strong class="jx io"> createAction </strong>和<strong class="jx io"> createReducer </strong>，因为这样更简单。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="323e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可能注意到我直接改变了状态，但是我上面说的是不正确的。是的，但不是用 redux-toolkit。</p><p id="56b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> createReducer </strong>和<strong class="jx io"> createSlice </strong>使用<a class="ae lf" href="https://immerjs.github.io/immer/" rel="noopener ugc nofollow" target="_blank"> Immer </a>在内部使用“变异”语法，让您编写更简单的不可变更新逻辑。这有助于简化大多数 reducer 实现，不是吗？</p><p id="8db0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们为应用程序添加新的商店。我只更改了存储路径。请记住，我们不需要改变任何 Todo 的组件逻辑，因为我们有相同的状态结构和动作名称。</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="6a1a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您可以启动应用程序，它的工作与以前的实施版本。</p><p id="a4c9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">总结一下:</p><ul class=""><li id="c4ca" class="ly lz in jx b jy jz kc kd kg ma kk mb ko mc ks na me mf mg bi translated">用<strong class="jx io"> react-redux </strong>我们创建了太多的文件，比如:动作类型、动作、还原器和用展开操作在还原器中写逻辑很无聊。</li><li id="87f2" class="ly lz in jx b jy mn kc mo kg mp kk mq ko mr ks na me mf mg bi translated">使用 redux-toolkit ,我们只创建了一个文件，它为我们生成所有的动作和动作类型，此外，我们可以使用“突变”语法更新逻辑。</li></ul><p id="f1ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些还不是 redux-toolkit 的全部好处。还可以了解:<a class="ae lf" href="https://redux-toolkit.js.org/rtk-query/overview" rel="noopener ugc nofollow" target="_blank"> RTK 查询</a>，<a class="ae lf" href="https://redux-toolkit.js.org/api/createAsyncThunk" rel="noopener ugc nofollow" target="_blank"> createThunkAsync </a>，<a class="ae lf" href="https://redux-toolkit.js.org/api/createSelector" rel="noopener ugc nofollow" target="_blank"> createSelector </a>。</p><p id="7f65" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了更好地理解差异，请尝试在上面的示例中添加删除和更新功能。你可以以我的项目为基础——<a class="ae lf" href="https://github.com/stasoz1/todo-redux-toolkit" rel="noopener ugc nofollow" target="_blank">https://github.com/stasoz1/todo-redux-toolkit</a>。</p><p id="f678" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读和快乐编码！</p><h1 id="dbbf" class="nc lm in bd nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny bi translated">学到了新东西？</h1><p id="3393" class="pw-post-body-paragraph jv jw in jx b jy nz ka kb kc oa ke kf kg ob ki kj kk oc km kn ko od kq kr ks ig bi translated">如果你喜欢这篇文章，可以<a class="ae lf" href="https://www.buymeacoffee.com/stasoz" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">给我买杯咖啡</strong> </a>我写下一篇文章的时候再喝:)</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><a href="https://www.buymeacoffee.com/stasoz"><div class="gh gi kt"><img src="../Images/cf79c871f5a738ec15a7f5802d80017f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lviQAsrtgJB0dMiercB9ig.png"/></div></a></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="3620" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lr">更多内容尽在</em><a class="ae lf" href="http://blog.devgenius.io" rel="noopener ugc nofollow" target="_blank"><em class="lr">blog . dev genius . io</em></a><em class="lr">。</em></p></div></div>    
</body>
</html>