<html>
<head>
<title>Create React App — What the Heck is a Service Worker?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建React应用程序——服务人员到底是什么？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/create-react-app-what-the-heck-is-a-service-worker-566dbd815b0d?source=collection_archive---------20-----------------------#2020-07-19">https://blog.devgenius.io/create-react-app-what-the-heck-is-a-service-worker-566dbd815b0d?source=collection_archive---------20-----------------------#2020-07-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="17fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你有没有想过什么是服务工作者，为什么他们会自动内置到<code class="fe ki kj kk kl b">create-react-app</code>应用程序中？</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/0f940c3b30144c1264d9c89266d27eb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BG1FuzUakrq3B690ph588w.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">照片由<a class="ae lc" href="https://unsplash.com/@solimonster?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> sol </a>在<a class="ae lc" href="https://unsplash.com/s/photos/worker?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="f20b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我构建React应用程序已经有一段时间了，我一直质疑为什么在我的应用程序中会自动调用一个默认的service worker类。老实说，这通常是我从应用程序中移除的第一件事，因为我从未使用过它们，也不太了解它们的用途。</p><p id="47dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是执行<code class="fe ki kj kk kl b">create-react-app</code>后<code class="fe ki kj kk kl b">index.js</code>文件的样子:</p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/1907736ddb18ebd45fa224c5b7fa0f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/format:webp/1*sIeRr9O8p0eM6AML0YvyVw.png"/></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">create-react-app后的index.js文件</figcaption></figure><p id="7659" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如您在底部看到的，有一个简短的描述和一个链接，可以了解更多有关如何使用服务人员的信息。默认情况下，会调用unregister()函数，并且需要将其更改为register()，以便使用服务工作器的功能。</p><p id="5b69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">除了index.js文件之外，您还可以查看一下在<code class="fe ki kj kk kl b">src/serviceWorker.js</code>文件中组成服务工作者的实际代码。如果没有<code class="fe ki kj kk kl b">create-react-app</code>为您生成的这个方便的文件，您将不得不自己手动编码所有的注册、安装、缓存和返回请求，以便实现这种类型的功能，这将会有点耗时。</p><h2 id="8c88" class="le lf in bd lg lh li dn lj lk ll dp lm jv ln lo lp jz lq lr ls kd lt lu lv lw bi translated">那是什么？</h2><p id="602e" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">基本上，服务人员使您的应用程序能够在后台离线运行您的客户端，并与网页分离，从而实现不需要用户交互或网页的特定功能。通过使用这些助手，您可以为web创建更快、更可靠的应用程序，为您的用户提供更具吸引力的移动体验。</p><p id="91b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于它们的异步特性，它们大量使用承诺，所以如果你还不知道承诺是什么，我会在尝试使用服务工作者之前从这里开始。如果你需要从某个地方开始学习承诺，你可以看看我的博客<a class="ae lc" href="https://medium.com/dev-genius/i-promise-there-is-more-data-728e2048449a" rel="noopener">这里</a>。</p><p id="e4c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">服务助手的常见用途是推送通知或后台同步。例如，每当你收到来自脸书或Instagram的通知，那都是因为一名服务人员在工作。</p><p id="7db6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于服务人员相对较新，他们确实有自己的缺点。首先，如果worker的实际安装失败，很难判断它是否没有出现在浏览器中。要真正检查这个问题，您必须打开Chrome DevTools，并在安装事件开始时放入一个调试器。由于一些默认设置，可能会出现其他问题，如获取请求没有凭据，或者如果您的应用程序不支持CORS，默认情况下也会失败。这些问题可以通过指定在获取请求中包含凭据并添加一个<code class="fe ki kj kk kl b">no-cors</code>选项来解决。</p><p id="c8c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于我们今天使用的应用程序，服务工作者是一个强大的工具，应该充分利用它们的潜力，希望随着它们越来越受欢迎，当前的错误将在不久的将来得到纠正。</p></div></div>    
</body>
</html>