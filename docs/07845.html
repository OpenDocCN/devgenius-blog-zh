<html>
<head>
<title>Scraping Reddit with PRAW (Python Reddit API Wrapper)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用 PRAW 抓取 Reddit(Python Reddit API 包装器)</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/scraping-reddit-with-praw-python-reddit-api-wrapper-eaa7d788d7b9?source=collection_archive---------2-----------------------#2022-04-27">https://blog.devgenius.io/scraping-reddit-with-praw-python-reddit-api-wrapper-eaa7d788d7b9?source=collection_archive---------2-----------------------#2022-04-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3856ff2f5e7111bb0f744d638795d10f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fFCyp3f3w344KlzuViKjig.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">显示 Reddit 徽标的海报</figcaption></figure><p id="4e2a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在本文中，我们将看到如何使用 Python 来抓取 Reddit。我们将使用 Python 的 PRAW (Python Reddit API Wrapper)来抓取数据。</p><h2 id="aeb7" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">为什么是 PRAW？</h2><p id="2d07" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">尽管有其他方法可以从 Reddit 上收集数据，但 PRAW 让它变得非常简单。它遵循 Reddit 的所有 API 规则，让您不必在代码中包含睡眠调用。在开始编码之前，我们需要设置身份验证。</p><h2 id="67df" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">证明</h2><p id="90e5" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">PRAW 要求认证。跟随这个<a class="ae lv" href="https://old.reddit.com/prefs/apps" rel="noopener ugc nofollow" target="_blank">链接</a>导航到 Reddit 的开发者账户。注册创建一个新帐户，如果您已经有一个帐户，请登录。</p><p id="f03e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">一旦你登录，确保你在应用程序选项卡上——你应该能在页面底部看到一个按钮，上面写着“你是开发人员吗？创建一个应用…”见下图:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lw"><img src="../Images/47c98dd427d85a5b25143765b21a3f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zn0rAc5ufGgBjEYdWoRjkA.png"/></div></div></figure><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mb"><img src="../Images/be6647ae96593ae86a57c352236d248a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnEywYj_aFe38uu7tjyJdQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">该图显示了来自 Reddit 应用程序网站的截图</figcaption></figure><p id="821b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">单击按钮后，应该会出现一个名为“创建应用程序”的表单。您需要填写表格并点击“创建应用程序”按钮。请参见下面的示例:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/403831c01c8f334dbbe95ee1b1eb163a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*70Ssy-iF-fScBvF0LF9ghw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">显示表单的图像</figcaption></figure><p id="86c9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，您应该看到您的新应用程序，其中包括您需要的所有信息，如下所示(出于安全原因，下图中显示的键被替换为文本):</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi md"><img src="../Images/f02bc40a962509202094862eb3b37810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pdT1OSqnrK5de1WpPHWZmw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">显示开发的应用程序信息的图像</figcaption></figure><p id="aa9e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在您已经设置了身份验证，我们可以开始编码了。</p><h2 id="3cde" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">让我们写一些代码</h2><p id="7aa7" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">正如我提到的，我们将使用一个叫做 PRAW 的 Python 包。它真的有很好的记录，你可以随时在他们的 slack 频道提问。</p><blockquote class="me mf mg"><p id="5f75" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">PRAW 文件:<a class="ae lv" href="https://praw.readthedocs.io/en/stable/" rel="noopener ugc nofollow" target="_blank"> PRAW 文件</a></p><p id="cae3" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">Python 3.6 以上版本支持 PRAW</p><p id="8789" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">PRAW 知识库:<a class="ae lv" href="https://github.com/praw-dev/praw" rel="noopener ugc nofollow" target="_blank"> PRAW </a></p><p id="02aa" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">PRAW 松弛频道:<a class="ae lv" href="https://join.slack.com/t/praw/shared_invite/zt-c4ggb0ap-7Q19mb2QEKbyvRLWDVZ5VA" rel="noopener ugc nofollow" target="_blank">松弛</a></p></blockquote><p id="054f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">本例的目标是在 CryptoCurrency subreddit 中抓取 50 篇关于比特币的帖子的标题、分数、评论数量、日期和 URL 链接，并最终生成一个. json 和。csv 文件。</p><p id="8204" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">打开终端并导航到您想要保存工作的目录。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="a9e9" class="kx ky in mm b gy mq mr l ms mt">cd &lt;workdirectoryname&gt;</span></pre><p id="e049" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，创建一个新目录，所有与 scraper 相关的文件都将存储在这个目录中。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="1d16" class="kx ky in mm b gy mq mr l ms mt">mkdir reddit-scrape</span></pre><p id="23d6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">cd 放入您的新目录。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="f49d" class="kx ky in mm b gy mq mr l ms mt">cd reddit-scrape</span></pre><p id="3af6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">创建一个. py 文件。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="343e" class="kx ky in mm b gy mq mr l ms mt">touch r_scrape.py</span></pre><p id="ba34" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">安装 PRAW。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="45b6" class="kx ky in mm b gy mq mr l ms mt">pip install praw</span></pre><p id="5dba" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">装熊猫。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="3469" class="kx ky in mm b gy mq mr l ms mt">pip install pandas</span></pre><blockquote class="me mf mg"><p id="7dcf" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">Pandas 是一个用于数据操作和分析的 Python 库。</p><p id="3a3e" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">熊猫文档:<a class="ae lv" href="https://pandas.pydata.org/docs/getting_started/index.html" rel="noopener ugc nofollow" target="_blank">熊猫文档</a></p><p id="8d5d" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">熊猫仓库:<a class="ae lv" href="https://github.com/pandas-dev/pandas" rel="noopener ugc nofollow" target="_blank">熊猫回购</a></p></blockquote><p id="61c7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">打开 r_scrape.py 文件。</p><p id="bc01" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，导入依赖项。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="3fad" class="kx ky in mm b gy mq mr l ms mt">import praw</span><span id="9b10" class="kx ky in mm b gy mu mr l ms mt">import pandas as pd</span><span id="30fc" class="kx ky in mm b gy mu mr l ms mt">import json</span></pre><blockquote class="me mf mg"><p id="e2b9" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">Python 原生支持 json。</p></blockquote><p id="5471" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">使用您开发的应用程序中的信息创建一个只读 Reddit 实例。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="0e36" class="kx ky in mm b gy mq mr l ms mt">r = praw.Reddit(client_id="&lt;YOUR_CLIENT_ID_HERE&gt;",</span><span id="e0da" class="kx ky in mm b gy mu mr l ms mt">client_secret="&lt;YOUR_CLIENT_SECRET_HERE&gt;",</span><span id="5b8a" class="kx ky in mm b gy mu mr l ms mt">user_agent="&lt;YOUR_USER_AGENT&gt;",</span><span id="4535" class="kx ky in mm b gy mu mr l ms mt">)</span></pre><blockquote class="me mf mg"><p id="ac8e" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">用实际信息替换助手标签。</p><p id="88cc" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated"><strong class="kb io">用户代理</strong>的推荐格式如下:<code class="fe mv mw mx mm b">&lt;platform&gt;:&lt;app ID&gt;:&lt;version string&gt; (by u/&lt;Reddit username&gt;)</code></p><p id="e3c9" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated"><strong class="kb io">来自 PRAW 的文档:</strong></p><p id="2b84" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated"><strong class="kb io">客户端 ID &amp;客户端密码</strong></p><p id="cea6" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">这两个值是作为<strong class="kb io">脚本</strong>应用程序访问 Reddit 的 API 所必需的(其他应用程序类型参见<a class="ae lv" href="https://praw.readthedocs.io/en/latest/getting_started/authentication.html#oauth" rel="noopener ugc nofollow" target="_blank">通过 OAuth 认证</a>)。如果您还没有客户端 ID 和客户端密码，请遵循 Reddit 的<a class="ae lv" href="https://github.com/reddit/reddit/wiki/OAuth2-Quick-Start-Example#first-steps" rel="noopener ugc nofollow" target="_blank">第一步指南</a>来创建它们。</p><p id="c3bc" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated"><strong class="kb io">用户代理</strong></p><p id="aa08" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">用户代理是帮助 Reddit 确定网络请求来源的唯一标识符。要使用 Reddit 的 API，您需要一个唯一的、描述性的用户代理。推荐格式为<code class="fe mv mw mx mm b">&lt;platform&gt;:&lt;app ID&gt;:&lt;version string&gt; (by u/&lt;Reddit username&gt;)</code>。例如，<code class="fe mv mw mx mm b">android:com.example.myredditapp:v1.2.3 (by u/kemitche)</code>。在 Reddit 的 API wiki 页面阅读更多关于用户代理的信息。</p></blockquote><p id="922d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">设置搜索参数。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="5522" class="kx ky in mm b gy mq mr l ms mt">q='bitcoin' #query</span><span id="c996" class="kx ky in mm b gy mu mr l ms mt">sub='CryptoCurrency' #subreddit</span><span id="70d3" class="kx ky in mm b gy mu mr l ms mt">sort = "top" </span><span id="b09b" class="kx ky in mm b gy mu mr l ms mt">limit = 50</span></pre><blockquote class="me mf mg"><p id="0742" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">多个子记录可以用 a +组合。</p><p id="e7b0" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">例如 sub= '加密货币+SatoshiStreetBets '</p></blockquote><p id="8318" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">创建对子编辑的搜索。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="9673" class="kx ky in mm b gy mq mr l ms mt">top_posts = r.subreddit(sub).search(q, sort=sort, limit=limit)</span></pre><p id="1b84" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">初始化一个空列表。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="a93a" class="kx ky in mm b gy mq mr l ms mt">total_posts = list()</span></pre><p id="a192" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">遍历 top_posts，为每个实例创建一个字典，将抓取的数据存储在一个有序的集合中。此外，对于每个实例，将新创建的字典追加到空列表中。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="ce30" class="kx ky in mm b gy mq mr l ms mt">for post in top_posts:</span><span id="4140" class="kx ky in mm b gy mu mr l ms mt"> # print(vars(post)) # print all properties</span><span id="347d" class="kx ky in mm b gy mu mr l ms mt"> Title=post.title,</span><span id="e653" class="kx ky in mm b gy mu mr l ms mt"> Score = post.score,</span><span id="7e0b" class="kx ky in mm b gy mu mr l ms mt"> Number_Of_Comments = post.num_comments,</span><span id="6a42" class="kx ky in mm b gy mu mr l ms mt"> Publish_Date = post.created,</span><span id="4836" class="kx ky in mm b gy mu mr l ms mt"> Link = post.permalink,</span><span id="0a51" class="kx ky in mm b gy mu mr l ms mt"> data_set = {"Title":Title[0],"Score":Score[0],   "Number_Of_Comments":Number_Of_Comments[0],"Publish_Date":Publish_Da te[0],"Link":'https://www.reddit.com'+Link[0]}</span><span id="8235" class="kx ky in mm b gy mu mr l ms mt">total_posts.append(data_set)</span></pre><blockquote class="me mf mg"><p id="c38a" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">您可以取消对 print(vars(post))的注释，以查看每个帖子中您可以访问的所有数据。</p><p id="cf8d" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">链接中添加了一个预设值，是因为我们从帖子中获取永久链接，通过在它前面添加“https://www.reddit.com ”,我们可以访问帖子的 url。</p></blockquote><p id="da94" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">创建一个 csv 文件。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="feed" class="kx ky in mm b gy mq mr l ms mt"># create csv file</span><span id="c18f" class="kx ky in mm b gy mu mr l ms mt">df = pd.DataFrame(total_posts)</span><span id="f2e9" class="kx ky in mm b gy mu mr l ms mt">df.to_csv('data.csv', sep=',', index=False)</span></pre><p id="5e4a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">创建一个 json 文件。</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="14c9" class="kx ky in mm b gy mq mr l ms mt">#create json file</span><span id="a27c" class="kx ky in mm b gy mu mr l ms mt">json_string = json.dumps(total_posts)</span><span id="6482" class="kx ky in mm b gy mu mr l ms mt">jsonFile = open("data.json", "w")</span><span id="2a72" class="kx ky in mm b gy mu mr l ms mt">jsonFile.write(json_string)</span><span id="6824" class="kx ky in mm b gy mu mr l ms mt">jsonFile.close()</span></pre><p id="8972" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">完整代码:</p><blockquote class="me mf mg"><p id="cede" class="jz ka mh kb b kc kd ke kf kg kh ki kj mi kl km kn mj kp kq kr mk kt ku kv kw ig bi translated">参见这段代码的资源库:<a class="ae lv" href="https://github.com/Julio-M/reddit-scrape" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> GitHub </strong> </a></p></blockquote><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="d83e" class="kx ky in mm b gy mq mr l ms mt">import praw</span><span id="c76c" class="kx ky in mm b gy mu mr l ms mt">import pandas as pd</span><span id="af18" class="kx ky in mm b gy mu mr l ms mt">import json<br/></span><span id="0086" class="kx ky in mm b gy mu mr l ms mt">r = praw.Reddit(client_id="&lt;YOUR_CLIENT_ID_HERE&gt;",</span><span id="78ed" class="kx ky in mm b gy mu mr l ms mt">client_secret="&lt;YOUR_CLIENT_SECRET_HERE&gt;",</span><span id="bd1c" class="kx ky in mm b gy mu mr l ms mt">user_agent="&lt;YOUR_USER_AGENT&gt;",</span><span id="c36b" class="kx ky in mm b gy mu mr l ms mt">)</span><span id="5ca8" class="kx ky in mm b gy mu mr l ms mt"># search parameters</span><span id="6d7d" class="kx ky in mm b gy mu mr l ms mt">q='bitcoin'</span><span id="0d3e" class="kx ky in mm b gy mu mr l ms mt">sub='CryptoCurrency'</span><span id="4970" class="kx ky in mm b gy mu mr l ms mt">sort = "top"</span><span id="b5da" class="kx ky in mm b gy mu mr l ms mt">limit = 50<br/></span><span id="f7b0" class="kx ky in mm b gy mu mr l ms mt">top_posts = r.subreddit(sub).search(q, sort=sort, limit=limit)<br/></span><span id="ae14" class="kx ky in mm b gy mu mr l ms mt">total_posts = list()<br/></span><span id="c1cf" class="kx ky in mm b gy mu mr l ms mt">for post in top_posts:</span><span id="7073" class="kx ky in mm b gy mu mr l ms mt"> # print(vars(post)) # print all properties</span><span id="614a" class="kx ky in mm b gy mu mr l ms mt"> Title=post.title,</span><span id="e9ba" class="kx ky in mm b gy mu mr l ms mt"> Score = post.score,</span><span id="a430" class="kx ky in mm b gy mu mr l ms mt"> Number_Of_Comments = post.num_comments,</span><span id="faa9" class="kx ky in mm b gy mu mr l ms mt"> Publish_Date = post.created,</span><span id="1d2b" class="kx ky in mm b gy mu mr l ms mt"> Link = post.permalink,</span><span id="d3cb" class="kx ky in mm b gy mu mr l ms mt"> data_set = {"Title":Title[0],"Score":Score[0], "Number_Of_Comments":Number_Of_Comments[0],"Publish_Date":Publish_Date[0],"Link":'https://www.reddit.com'+Link[0]}</span><span id="c0e9" class="kx ky in mm b gy mu mr l ms mt">total_posts.append(data_set)<br/></span><span id="836d" class="kx ky in mm b gy mu mr l ms mt"># create csv file</span><span id="df5d" class="kx ky in mm b gy mu mr l ms mt">df = pd.DataFrame(total_posts)</span><span id="51b2" class="kx ky in mm b gy mu mr l ms mt">df.to_csv('data.csv', sep=',', index=False)</span><span id="e6db" class="kx ky in mm b gy mu mr l ms mt">#create json file</span><span id="0c08" class="kx ky in mm b gy mu mr l ms mt">json_string = json.dumps(total_posts)</span><span id="a363" class="kx ky in mm b gy mu mr l ms mt">jsonFile = open("data.json", "w")</span><span id="f275" class="kx ky in mm b gy mu mr l ms mt">jsonFile.write(json_string)</span><span id="6e1c" class="kx ky in mm b gy mu mr l ms mt">jsonFile.close()</span></pre><p id="bd37" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以使用以下命令运行上面的代码:</p><pre class="lx ly lz ma gt ml mm mn mo aw mp bi"><span id="4a61" class="kx ky in mm b gy mq mr l ms mt">python r_scrape.py</span></pre><p id="31f2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">运行我们的代码后，将在我们的 reddit-scrape 目录中创建一个 data.csv 和 data.json 文件，在这些文件中，我们应该可以看到抓取的数据，如下例所示:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/f1ec725f974a43956f9a57af3c49435a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vGQZcYaeGH4NGxF7LUjsyw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">该图显示了 data.csv 中的数据片段</figcaption></figure><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/5f4f562ebad151a62bf47e4370cd5126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nERTGKEyTHpqAAHsJ3CWgA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">该图显示了 data.json 中的数据片段</figcaption></figure><p id="89d0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">希望你喜欢阅读这篇文章，它能帮助你理解使用 PRAW 的基本知识。这只是你使用 PRAW 所能做的一小部分。我强烈建议研究他们的文档，并开始自己尝试。下次见！</p></div></div>    
</body>
</html>