<html>
<head>
<title>Day 126 of Unity Dev: What is LINQ— Unity/C#?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity Dev 的第 126 天:什么是 LINQ——Unity/c#？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/day-126-of-unity-dev-what-is-linq-unity-c-d9a74d5bb21f?source=collection_archive---------9-----------------------#2022-11-16">https://blog.devgenius.io/day-126-of-unity-dev-what-is-linq-unity-c-d9a74d5bb21f?source=collection_archive---------9-----------------------#2022-11-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="6564" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">目标:</strong>回顾 LINQ 的基础知识，包括它是什么，以及我们如何在 C#/Unity 环境中使用它。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/be26dc75604660ea5715bce1481d5525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*pXtIwEyzGVEM9YE5a9nCgA.png"/></div></figure><p id="74b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意:如果你不熟悉 lambda 表达式，语法可能会令人困惑。如果你只是想要 LINQ 的高级信息，你可以忽略确切的语法，但是如果你想使用它，并且不确定 lambdas 是如何工作的，请查看我以前关于它们的文章或其他来源，因为我假设你知道如何在本文中使用它们。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kq"><img src="../Images/0224d6cbbab08ad29e0a6ba486d351b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCPaYvKj_39ax77K7eUcuA.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated"><a class="ae kz" href="https://www.techtarget.com/whatis/definition/LINQ-Language-Integrated-Query" rel="noopener ugc nofollow" target="_blank">演职员表</a></figcaption></figure><p id="8ccb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">LINQ 类似于 MySQL，它允许我们以更简单的方式过滤数据，特别是数组和列表。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi la"><img src="../Images/e32d179cbc6a46ef32bae127376f56f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ItADic9eqRLU1HRwBn2T8w.png"/></div></div></figure><p id="93ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一个名称数组和一个查找某个名称的 foreach 循环。这是可行的，但是使用 LINQ 可以减少到 1 行代码(在 LINQ 命名空间之外，这是<strong class="jm io">系统。Linq </strong></p><p id="fe85" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将移除 foreach 循环，并使用 LINQ 名称空间附带的 Any()方法来搜索我的名字。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lb"><img src="../Images/54e621481a1c3988d89ade2486bc4759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fACQQCKGLPw53WzXhfqyxw.png"/></div></div></figure><p id="8a64" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Any()返回一个布尔值，所以我们需要将返回值赋给一个变量。</p><p id="78ab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要使用 Any()方法，我们需要访问数组，调用该方法并使用 lambda 表达式，返回一个等于 Ethan 的参数。如果 Ethan 存在于数组中，它将返回 true。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lc"><img src="../Images/4cb54df94652a2bc8b0ad1a2151a2c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jersOHaaUe94zZyA9JQTaA.png"/></div></div></figure><p id="e4ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果我输入一个不存在的名字，甚至拼错了 Ethan，那么它将返回 false。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ld"><img src="../Images/8952edae85806aec69c87344f7d56b77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IR1NoqL44GkDq8rUKwWb3g.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi le"><img src="../Images/b9aec38892f12340ef036ca061135961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dCo2bizH_PgEhBVbRNSIPw.png"/></div></div></figure><p id="77c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们再来看看我们能为 LINQ 做些什么！</p><p id="791f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以使用 Contains()方法做上面同样的事情，但是更简单。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/3462b508a64649a2571fa610c21d1df6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*FO06afxyFXeIoBfePVKPoA.png"/></div></figure><p id="88a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">另一个有趣的方法是 Distinct()方法。例如，它基本上删除数组中的任何重复元素，只返回唯一的元素。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/a44c5cf893b209b765023173194fc1b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*bLlg37uF7L7bXxZgitlN8A.png"/></div></figure><p id="58ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里的返回类型是 IENumerable，它是一个集合，我们可以像数组或列表一样对其使用 forreach 循环。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lh"><img src="../Images/ea3da8ad23bff1c00180c03438dede3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lzBhX0KKyXI_gghKaaO6WA.png"/></div></div></figure><p id="24a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里我有一个包含一些重复元素的数组。然后，我调用数组上的 Distinct()方法，并将该值返回给一个名为 uniqueNames 的新变量。最后，我只将唯一的名称打印到控制台进行测试。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi li"><img src="../Images/2a7b63fbdb2cabdfcbd0a2e4d52b02bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D3ogxmvPBAsstF_mFIap3Q.png"/></div></div></figure><p id="692a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如你所看到的，每个名字只打印一次，因为重复的已经被删除了。</p><p id="6825" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">还有稍微复杂一点的 LINQ 方法，Where()方法。像 Distinct()方法一样，它允许我们创建数组或列表的新版本。但与 Distinct()不同，它允许我们在整理这个数组或列表时使用一些设定的条件。</p><p id="a7ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于这个例子，我将返回一个新的数组，其中只返回长度超过 5 个字符的名字。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/216db62ca7447e1bd5ae13661d34c649.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*ZKqlgwa_A-YMcAvgmExnbw.png"/></div></figure><p id="79d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我在里面放了几个额外的名字，只有超过 5 个字符的名字会被打印到控制台上。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lj"><img src="../Images/d06437c4c6717addcc01dd2108a5155c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_ER5igOv9uUfAtnjxvPFNA.png"/></div></div></figure><p id="0788" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">测试结果表明，它的工作。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi le"><img src="../Images/e6ce2b08c56b12aac43a169add43719f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aps3JyUMD4rSKRA3GaDS1g.png"/></div></div></figure><p id="3568" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们复习一下另一个有用的 LINQ 方法。首先，我将为这一个设置场景。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lk"><img src="../Images/8aac0780993f81ec9e705cf35f8901bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PeYatzOMdfVKpLB86Mtaog.png"/></div></div></figure><p id="cb7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我有一个包含不同学生考试成绩的 int 数组。</p><p id="7cfe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后使用 Where()方法，如果学生的分数高于 69，他们将被分配给 passingGrades 变量。</p><p id="d0b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我将每个及格分数打印到控制台，结果是这样的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ll"><img src="../Images/6d76cb674805697a9b9d293d9ca5e0b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M93YzigIrGH9hx2oFiXsng.png"/></div></div></figure><p id="f074" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果我想让这个新的及格分数数组按降序排列(从最高到最低)会怎样？</p><p id="5880" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我可以使用 OrderByDescending()方法。注意:还有一个 OrderBy()方法，您可以对它进行更多的定制。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lm"><img src="../Images/04a7bb64ca041c11a647da52720fa689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vedrYk8lnat4EM4iatZTJA.png"/></div></div></figure><p id="198a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 lambda 表达式中，我们不必检查条件，只需填充表达式即可。现在，当我在 Unity 编辑器中按下 play 时，这就是结果。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ln"><img src="../Images/75445823009bfa8d8ddb75373696667f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pUuc1AY3hN1OIsfGPix5pA.png"/></div></div></figure><p id="ae84" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果我想从最低到最高，我可以在最后加上 Reverse()方法。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lo"><img src="../Images/2e2d374e77bbc2fe15d67390c0aee55c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2y4BEuWhrYIHph25MXxiJQ.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lp"><img src="../Images/06f7fca0f19cecce434dedac8b2485d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WILScjR_roYgXcLhXsKxBg.png"/></div></div></figure><p id="cc2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">另一个很好使用的 LINQ 方法是 Average()方法，它将返回某些东西的平均值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lq"><img src="../Images/8eab101bbc4f39038318c1fff12608f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*riQJao2GP7XLQbW7ZF15_Q.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/a7702115aea2edc3db4b85b35caad269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*gOnecQX1N8ELu_pfKswXZw.png"/></div></figure><p id="aa84" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">需要注意的是，LINQ 有两种不同的语法，倾向于使用它。有我在这篇文章中使用的方法语法和查询语法。请记住，它们的功能稍有不同，你想用什么取决于你自己。我会说方法语法在我看来更干净，但是 LINQ 的大多数官方文档倾向于使用查询语法，这可能是因为它有额外的功能。相信我，一开始看起来很奇怪，但它们没什么不同。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/6fa487412f4756ac40f1c04666ef2f7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*MlUgYZ5vI8ZvhLuCqfB4sA.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">查询语法</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/d54cbe543ce9d1f063ca7f0a3b6d4e26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*0Gtkxeu7eCRCDrbYLwQDMg.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">查询语法到方法语法的转换</figcaption></figure><p id="413a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">微软有一些很好的信息，告诉你在两个不同的语法版本之间，什么会影响你的决定。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lu"><img src="../Images/b088012d55dcaed7548932c4e6e4fb68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aFSUHJKC8uZBxPgLaeI-JQ.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk translated">这里他们指的是 API 语法，它与本文通篇使用的方法语法相同。</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi lv"><img src="../Images/7c4b74dcbbf5c60a3422920bd58a6896.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UKL8FqFSTz28kDFyQFoyzw.png"/></div></div></figure><p id="7ed6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lw">希望这有助于你对 LINQ 的了解！如果你有任何问题或想法，请随意评论。</em>T5】</strong></p></div></div>    
</body>
</html>