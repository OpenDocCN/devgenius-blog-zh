<html>
<head>
<title>GGplot2 Crash Course: Boxplot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GGplot2 速成班:箱线图</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ggplot2-crash-course-boxplot-481d700058ca?source=collection_archive---------10-----------------------#2022-03-15">https://blog.devgenius.io/ggplot2-crash-course-boxplot-481d700058ca?source=collection_archive---------10-----------------------#2022-03-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/0e4a2324dbf0773b872870ee33c56f61.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/format:webp/1*tMHvRCV16BFoJbU2F-o3rw.png"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi jr"><img src="../Images/1430aaab083767345c0d06c520420e5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*Th07d9RR9timbkWAPN8lfA.jpeg"/></div></figure><h1 id="0f27" class="jw jx in bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">快速概述</h1><figure class="js jt ju jv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ku"><img src="../Images/17322e1b6aee362812e85e54b6633a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sopj3Q6m18OES1zbl9byVg.png"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated"><a class="ae ld" href="https://visualizationcheatsheets.github.io/pdfs/boxplot_anatomy.pdf" rel="noopener ugc nofollow" target="_blank">https://visualizationcheatsheets . github . io/pdf/box plot _ anatomy . pdf</a></figcaption></figure><p id="e259" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">箱线图展示了分布的第 25 百分位<strong class="lg io"><em class="mc"/></strong>、中值(第 50 百分位)和第 75 百分位<strong class="lg io"> <em class="mc">、Q3 </em> </strong>。胡须占据了大约 99%的分布。超出该范围的观察值将被表示为异常值。有一个很好的异常值检测公式，您只需通过执行 Q3- Q1 来计算<strong class="lg io"><em class="mc"/></strong>四分位间距(IQR)，高于上四分位 Q3 或低于下四分位 Q1 的 IQR 的 1.5 倍将被视为异常值(Q1- 1.5* IQR 或 Q3 + 1.5* IQR)</p><blockquote class="md me mf"><p id="3d35" class="le lf mc lg b lh li lj lk ll lm ln lo mg lq lr ls mh lu lv lw mi ly lz ma mb ig bi translated">哇，这是一个如此强大的五数总结技术！它可以告诉你分布是正态分布，还是左/右偏态分布。但是使用 boxplot 有什么注意事项吗？</p></blockquote><p id="68a9" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">尽管它在统计中捕捉五个数字的汇总是多么强大，但它有一个主要的弱点— <strong class="lg io"> boxplot 不能检测分布的凸起(模式)</strong>。所以一定要灵活运用你的可视化武器库！</p><h1 id="abf4" class="jw jx in bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">你好，方块图</h1><p id="e8c0" class="pw-post-body-paragraph le lf in lg b lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx mn lz ma mb ig bi translated">在本教程中，我们将使用包<code class="fe mo mp mq mr b">carData</code>中的数据集<code class="fe mo mp mq mr b">Salaries</code>。如果你没有安装它，只需运行这行代码<code class="fe mo mp mq mr b">install.packages("carData")</code>，你就可以跟着做了！</p><h2 id="9e9d" class="ms jx in bd jy mt mu dn kc mv mw dp kg lp mx my kk lt mz na ko lx nb nc ks nd bi translated">数据导入</h2><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/2d5a34a3fc0bbb2fcd1f306ee45096b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*jK82Jucmawvg2tV_UkpRQw.png"/></div></figure><p id="18c4" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">下面是数据的简要概述<code class="fe mo mp mq mr b">Salaries</code>描述:</p><blockquote class="md me mf"><p id="58b1" class="le lf mc lg b lh li lj lk ll lm ln lo mg lq lr ls mh lu lv lw mi ly lz ma mb ig bi translated">美国一所大学的助理教授、副教授和教授 2008 年至 2009 年为期 9 个月的学术工资。收集这些数据是该大学行政部门持续努力监测男女教职员工工资差异的一部分。— carData 包</p></blockquote><p id="b8b5" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">我们将使用带有<code class="fe mo mp mq mr b">rank</code>和<code class="fe mo mp mq mr b">salary</code>的箱线图来探索这个数据集。让我们来了解一下按排名的薪资分布吧！</p><h2 id="3e43" class="ms jx in bd jy mt mu dn kc mv mw dp kg lp mx my kk lt mz na ko lx nb nc ks nd bi translated">第一个简单箱线图</h2><p id="7aeb" class="pw-post-body-paragraph le lf in lg b lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx mn lz ma mb ig bi translated">首先，在<code class="fe mo mp mq mr b">ggplot</code>函数中传递数据集，在<code class="fe mo mp mq mr b">aes</code>层中，传递 x 轴的分类变量<code class="fe mo mp mq mr b">rank</code>和 y 轴的连续变量<code class="fe mo mp mq mr b">salary</code>。然后通过<code class="fe mo mp mq mr b">geom</code>层<code class="fe mo mp mq mr b">geom_boxplot()</code></p><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/2abe7e89763325a3343db55ee3d3b81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*J-qd6nhGGuRZFCUbiMYiCw.png"/></div></figure><blockquote class="md me mf"><p id="ff06" class="le lf mc lg b lh li lj lk ll lm ln lo mg lq lr ls mh lu lv lw mi ly lz ma mb ig bi translated">我可以横向制作剧情吗？</p></blockquote><p id="d909" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">你当然可以！你只需要增加一个管道层<code class="fe mo mp mq mr b">coord_flip()</code>。</p><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/e9154eb21ffc6888432c374041fb96b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*oFe61J_giB-KffGu7AyK2g.png"/></div></figure><blockquote class="md me mf"><p id="2e81" class="le lf mc lg b lh li lj lk ll lm ln lo mg lq lr ls mh lu lv lw mi ly lz ma mb ig bi translated">如果我想在箱线图上显示每个数据点，该怎么办？</p></blockquote><p id="5ea5" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">没问题！这里我想简单介绍一下抖动点的概念。它给每个点的位置增加了少量的随机变化。如果一个人的数据集足够大，这是操纵过度绘制的一种简单方法。</p><p id="d660" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">由于抖动点是随机分布的，我们需要锚定抖动位置，以保持图和层的一致性。我们将使用<code class="fe mo mp mq mr b">posn_j = position_jitter(0.3, seed = 123)</code>来实现这一点。</p><p id="ba92" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">同样在实践中，最好用<code class="fe mo mp mq mr b">outliers.shape = NA</code>移除盒图的异常值，因为抖动会再次将它们添加回去。</p><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/895ff41b19f652543c89230e90bf460b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*DnbtenHjHs5h1F_KQ80LHg.png"/></div></figure><h1 id="4e19" class="jw jx in bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">让它变得时尚！</h1><h2 id="2e68" class="ms jx in bd jy mt mu dn kc mv mw dp kg lp mx my kk lt mz na ko lx nb nc ks nd bi translated">主题和颜色</h2><p id="84d2" class="pw-post-body-paragraph le lf in lg b lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx mn lz ma mb ig bi translated">现在我们已经完成了第一个分组的箱线图，我们可以通过自定义填充颜色和主题来进一步美化它！(<a class="ae ld" href="https://www.datanovia.com/en/blog/ggplot-colors-best-tricks-you-will-love/" rel="noopener ugc nofollow" target="_blank">颜色</a>和<a class="ae ld" href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/" rel="noopener ugc nofollow" target="_blank">主题</a>选项)</p><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/82a8b856540af3f225dd3bf6ea4d992b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*cTOV87ldIaASZvrXsyzl5g.png"/></div></figure><blockquote class="md me mf"><p id="ca1f" class="le lf mc lg b lh li lj lk ll lm ln lo mg lq lr ls mh lu lv lw mi ly lz ma mb ig bi translated">看起来棒极了！但是在绘图中显示统计摘要、标题和轴标签会更好吗？</p></blockquote><p id="4407" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">好极了。这肯定有助于读者了解你想表达什么。</p><p id="826e" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">为了显示统计信息摘要，我们将创建一个函数来将统计信息映射到图表。技术细节我就省略了，下次你想复制，直接复制粘贴就行了。但是请确保相应地提供您的连续变量！</p><p id="2cad" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">一旦你准备好了函数，把它传递给<code class="fe mo mp mq mr b">stat_summary()</code>层。同样为了区分平均值和中值，我们也可以在<code class="fe mo mp mq mr b">stat_summary()</code>层中将平均值标记为红色。</p><p id="b5ce" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">对于标题和轴标签，你可以在<code class="fe mo mp mq mr b">labs()</code>层编辑它们。</p><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/05219312761cc5cea56a9fd94968be6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*UhPasjmg_pk1tO1h4g68rw.png"/></div></figure><h1 id="1722" class="jw jx in bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">最后，让我们装箱！</h1><p id="ef74" class="pw-post-body-paragraph le lf in lg b lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx mn lz ma mb ig bi translated">现在我们可以把目前所学的所有方面结合起来了！</p><figure class="js jt ju jv gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><figure class="js jt ju jv gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/e3f6fb1bb8c633a5760e891eff6f6913.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*OaN7c0MW2OLdZEjwsrQ6sw.png"/></div></figure><p id="43aa" class="pw-post-body-paragraph le lf in lg b lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">现在，将您学到的知识应用到您自己的数据集中！编码快乐！</p></div></div>    
</body>
</html>