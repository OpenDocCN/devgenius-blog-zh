<html>
<head>
<title>Rebasing Commits in Git</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Git 中重置提交</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/the-perfect-git-flow-50fbf9690f75?source=collection_archive---------2-----------------------#2020-08-22">https://blog.devgenius.io/the-perfect-git-flow-50fbf9690f75?source=collection_archive---------2-----------------------#2020-08-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6ae2f5743efcfbf9da2ed54edf24441d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DAWdOeAh1QCzfqZz.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">图片:git</figcaption></figure><p id="879e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">🍎这是您将要阅读的关于 git 流的百万篇文章之一。尽管如此，除非我告诉世界为什么我使用的 git 流比其他所有的都好，为什么每个人都应该使用它，否则我不会成为一名软件工程师。</p><p id="c852" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">🧑‍💻每个经验丰富的开发人员和新手都知道 git 及其用途。但是大多数人学习了 ABC，也就是提交、推动和拉动，并使用它。当合并冲突或重新定基问题出现时，他们疯狂地开始谷歌搜索，希望他们的本地更改不会丢失。我知道这是因为我开始用 git 的时候就是那个人。下面是分支工作流的功能解释，简单明了，便于团队在项目中协作。</p><h1 id="5de9" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">快速回顾:</strong></h1><p id="c55e" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">📁Git 是一个版本控制系统，允许用户随着时间的推移管理文档和文件系统的版本，使回滚、跟踪变更和协作变得更加容易。VSC 将使我们能够避免向队友发送代码文件夹，并将文件夹命名为“Final”、“FinalFinal”、“FinalFinalFinal”、“OKTHISISFINAL”、“OKTHISISFINAL1.1”</p><h1 id="b88b" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">复习 ABC 命令:</strong></h1><p id="40ed" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">💻让我们从您在本地机器上进行更改的第一步开始。现在我们想告诉 git 我们做了更改，它应该开始关心这些文件并跟踪它们。</p><h2 id="e6e7" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">第一步</h2><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/52f4827a63f98bd0d3caae142af3f7c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pTY_J00YikycCpyL"/></div></div></figure><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="62cb" class="ma ky in ms b gy mw mx l my mz">git add .</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/7cab6bd3f45f521391cf210a2711bdd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NCoZgJIEAyP8S8mU"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">局部变化</figcaption></figure><p id="1fb1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> git 将</strong> includes 文件添加到暂存区。尽管这不会将任何东西推送到原始存储库，但它会告诉 git 要跟踪哪些文件。我们可以使用.将所有更新的文件添加到临时区域，或者按名称添加单个文件。现在我们的更改在站立区域，但是我们仍然需要提交更改来记录它们。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h2 id="ac3b" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">第二步</h2><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/737331333857f22ddb1052b1af7a415e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-vr2c-9y5uUq6aaA"/></div></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/57644b0ef8c85d0b4162b230775602cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9u7F459-CEyBcjNR"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">中转区的变化</figcaption></figure><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="6553" class="ma ky in ms b gy mw mx l my mz">git commit -m “&lt;commit_message&gt;”</span></pre><p id="7357" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> git commit </strong>获取当前暂存区的快照并跟踪它。这几乎就像对所有的更改执行“ctrl-s”。在提交之后，git 不会跟踪该提交中的任何新更改。下一步是推动对原点的修改。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h2 id="9f1c" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">第三步</h2><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/8b9e90c624387945ff86cb95410206cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HlomATFtBumBFd92"/></div></div></figure><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="4287" class="ma ky in ms b gy mw mx l my mz">git push origin &lt;branch_name&gt;</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/0e6c8284175c35c325d5d0f4fde00421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qLJjG_iq6PGCUnAq"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">回购的变化</figcaption></figure><p id="242a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> git push </strong>将最终把变更上传到工作中的远程存储库的映射分支。这是将文件保存到云中的最后一步。运行 git push 命令后，更改将出现在您的 GitHub 存储库中。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="8cc3" class="kx ky in bd kz la nl lc ld le nm lg lh li nn lk ll lm no lo lp lq np ls lt lu bi translated"><strong class="ak">新功能？新分支</strong></h1><p id="6064" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">🌱特征分支工作流有一个中央报告。拥有一个特性分支工作流可以确保所有的特性开发都发生在一个专门的分支中，而不是在主或者开发分支中。这个工作流使得多个开发人员在不干扰其他环境或主分支的情况下处理多个特性变得容易。每个特性都有一个独特的分支，这使得进行拉请求(PR)成为可能，确保了代码审查和错误的代码不会被推送到主/开发分支。</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/dd0e55f4ca38517d93f2a66ad03d83a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UObdojZ2mDXEIxWE"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">从主分支切换到新的“新酷功能”分支</figcaption></figure><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="4a33" class="ma ky in ms b gy mw mx l my mz">git checkout -b &lt;branch-name&gt;</span></pre><p id="3a77" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">git checkout 让你从一个分支跳到另一个分支。切换到新分支后，文件会更新到本地分支的最新版本。<strong class="kb io"> -b </strong>标志创建并切换到新的分支。</p><h1 id="b20e" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">改写历史书</strong></h1><p id="9dff" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">📚现在您已经在您的分支上实现了非常酷的特性，是时候将这些更改合并到主分支中了。在推动最终的变更之前，最好从分支中挤压所有的提交。压缩提交意味着将两次或多次提交的更改压缩到一次提交中。如果您倾向于频繁推送，git 提交就会堆积起来，并且变化变得难以跟踪。挤压保证了工作分支的干净、简洁、可读，并且更容易跟踪变更，谁不喜欢干净的 git 日志呢。</p><h2 id="a35e" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">第一步</h2><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/2ed2a624f7d7178333b0b111606dd3ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fhhR0-NIXkBUMYe6"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">在此分支上进行的提交；命令:<strong class="bd kz"> git 日志</strong></figcaption></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/1b0327913fa0537fc06723bfd6735273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pbJVJz-UbzKPwWwMQNjPEQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">此阶段工作流的可视化表示</figcaption></figure><p id="a828" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这种类型的提交经常发生，所以我们将所有这些提交压缩成一个提交。这意味着所有提交中所做的所有更改都将出现在一次提交中。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h2 id="f9c4" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">第二步</h2><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nt"><img src="../Images/de846ee354f24e80f16fc1d69a7707f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Q9xgjBSuymxoSIhI"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">我们想要粉碎的承诺</figcaption></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nu"><img src="../Images/fde6c6ee7c5d16d9670b5a511072b614.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MMvdlLDvYdgU1bE0692yg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">我们想做的事情的视觉表现</figcaption></figure><p id="28a4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们将把白盒中的所有提交压缩成一个提交，理想地表示一个特性。</p><p id="1df4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要调整提交的基础，请使用以下命令:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="2377" class="ma ky in ms b gy mw mx l my mz">git rebase -i HEAD &lt;hash of the commit above which you want to squash&gt;</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nv"><img src="../Images/58d0ec2b436a59ff8945ba79399e97af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*la4wWGaj401MOkA4"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">根据上面的例子，我们将编写以下命令</figcaption></figure><p id="f46b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">— — — — — — — —或— — — — —</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="fbda" class="ma ky in ms b gy mw mx l my mz">git rebase -i HEAD~&lt;number of commits from the top&gt;</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/6cded2fb0379181fa09c12e4dfd113f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*guds56PuvqRmfonr"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">根据上面的例子，我们将编写以下命令</figcaption></figure><p id="c4a9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">🖥运行 rebase 命令将在终端中打开一个文本字段，您可以在其中压缩以前的提交。编辑文件并删除您想要压缩的提交。该列表与提交顺序相反，即最旧的提交将在列表的顶部，而最新的提交将在底部。退出它("；vim 的 wq "😇)，就大功告成了！</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/72367fd1ce6b1f34d4cdf0e834f11df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SGL1LeoJqmcMEqMF"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">第一步:提交在顶部是前一个，列表是相反的顺序</figcaption></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ny"><img src="../Images/1fc803ca676cae0b426415fbd504ae7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0-zcLf6XQLPWo25u"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">步骤 2:将所有提交压缩成一个提交</figcaption></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nz"><img src="../Images/d263df4a27c834e0296956fca764dce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NwnFLZX4m1DZG_MaveS1Og.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">此阶段工作流的可视化表示</figcaption></figure><h2 id="cd22" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated"><strong class="ak">推，推，推变化！！</strong></h2><p id="9d1a" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">🎊将变更推送到分支时，遵循标准程序，在末尾添加一个小的<strong class="kb io"> -f </strong>标志。继续工作，就像它是主分支一样。只需记住将更改推送到新的分支，而不是主分支。</p><p id="aff8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，要推动您的挤压提交，请使用以下命令:</p><pre class="mn mo mp mq gt mr ms mt mu aw mv bi"><span id="02d0" class="ma ky in ms b gy mw mx l my mz">git push origin &lt;branchName&gt; --force</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oa"><img src="../Images/79b323f9de0f66b1308cfb55ce8dcfb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pv50f2XrmLdJWyFqas7Srg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">此阶段工作流的可视化表示</figcaption></figure><p id="1218" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">🔎此时，变更是主分支的一部分。理想情况下，当推进到主分支时，您的团队应该总是有一个变更审查者。让第二只眼睛检查更改有助于捕捉您可能错过的错误或边缘情况。GitHub 允许你在将任何提交合并到 master 之前设置一个 reviewer。它确实降低了提交变更的平均速度，但是会减少潜在的错误。</p><p id="5680" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">🍎最后，阅读 git 流上的其他一百万(减一)篇文章，成为一个 git👑。</p></div></div>    
</body>
</html>