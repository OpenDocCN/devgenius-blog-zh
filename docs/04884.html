<html>
<head>
<title>Tricky JavaScript: Part-3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">棘手的 JavaScript:第 3 部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/tricky-javascript-part-3-f9b3fb380c3e?source=collection_archive---------6-----------------------#2021-05-15">https://blog.devgenius.io/tricky-javascript-part-3-f9b3fb380c3e?source=collection_archive---------6-----------------------#2021-05-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f75a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">到目前为止，我们已经看到了很多例子和解释，每个例子都向我们展示了 JavaScript 是多么令人困惑。</p><p id="1136" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天我们将会看到更多这样的例子。我知道，这些例子会给你带来困难，但是不要担心，这些解释会让你有一个清晰的理解。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/22c2b6818b2849f389e690a618239897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XNla4ZT5NoVHX0va"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">由<a class="ae ky" href="https://unsplash.com/@maxcodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">麦克斯韦·纳尔逊</a>在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="06e7" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">有趣的数学</h1><p id="cd33" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">你可能知道这些类型的数学运算</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="949a" class="mo lh in mk b gy mp mq l mr ms"> 3  - 1  // -&gt; 2<br/> 3  + 1  // -&gt; 4<br/>'3' - 1  // -&gt; 2<br/>'3' + 1  // -&gt; '31'</span></pre><p id="1b37" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是你了解这些手术吗..？？？？</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="559e" class="mo lh in mk b gy mp mq l mr ms">'' + '' // -&gt; ''<br/>[] + [] // -&gt; ''<br/>{} + [] // -&gt; 0<br/>[] + {} // -&gt; '[object Object]'<br/>{} + {} // -&gt; '[object Object][object Object]'<br/><br/>'222' - -'111' // -&gt; 333<br/><br/>[4] * [4]       // -&gt; 16<br/>[] * []         // -&gt; 0<br/>[4, 4] * [4, 4] // NaN</span></pre><p id="acb5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们来理解一下数字加法。这里有一个小表格，可以用来理解 JavaScript 中的加法:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="08fb" class="mo lh in mk b gy mp mq l mr ms">Number  + Number  -&gt; addition<br/>Boolean + Number  -&gt; addition<br/>Boolean + Boolean -&gt; addition<br/>Number  + String  -&gt; concatenation<br/>String  + Boolean -&gt; concatenation<br/>String  + String  -&gt; concatenation</span></pre><p id="2099" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是<code class="fe mt mu mv mk b">[]</code>和<code class="fe mt mu mv mk b">{}</code>呢。在添加之前，<code class="fe mt mu mv mk b">[]</code>和<code class="fe mt mu mv mk b">{}</code>的<code class="fe mt mu mv mk b">ToPrimitive</code>和<code class="fe mt mu mv mk b">ToString</code>方法被隐式调用。</p><p id="0c9e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">值得注意的是，<code class="fe mt mu mv mk b">{} + []</code>这里是个例外。之所以和<code class="fe mt mu mv mk b">[] + {}</code>不一样，是因为没有括号，先解释为代码块，再解释为一元+，把<code class="fe mt mu mv mk b">[]</code>转换为数字。它看到以下内容:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="3969" class="mo lh in mk b gy mp mq l mr ms">{<br/>  // a code block here<br/>}<br/>+[]; // -&gt; 0</span></pre><p id="ec1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了获得与<code class="fe mt mu mv mk b">[] + {}</code>相同的输出，我们可以用括号将其括起来。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="093a" class="mo lh in mk b gy mp mq l mr ms">({} + []); // -&gt; [object Object]</span></pre><p id="fe96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">非常令人困惑，对吗..？这有时会造成 JavaScript 的信任问题。</p><p id="6be5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要了解更多，请看看 ECMA 脚本标准。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="5f58" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">点和扩散</h1><p id="6681" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">众所周知，当一个对象或数组中的所有元素都需要包含在某种列表中时，可以使用 spread <code class="fe mt mu mv mk b">...</code>语法。</p><p id="9259" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">那么下面代码的输出是什么呢？？</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="239d" class="mo lh in mk b gy mp mq l mr ms">[...'...']</span><span id="ca65" class="mo lh in mk b gy mw mq l mr ms">Answer : </span><span id="1ef5" class="mo lh in mk b gy mw mq l mr ms">['.' , '.' , '.']     </span></pre><p id="cf44" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">答案很简单，spread 操作符将字符串<code class="fe mt mu mv mk b">'...'</code>扩展到字符<code class="fe mt mu mv mk b">'.'</code>的数组中。这是一个简单的例子。那么下面这个例子的输出是什么呢？</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="3bb0" class="mo lh in mk b gy mp mq l mr ms">[...[...[...[...'...']]]]   -&gt;  [".", ".", "."]</span></pre><p id="0695" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">是不是看起来不对？甚至经过很多传播运营商，答案都是一样的！！</p><p id="2a78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">先试试，再回来解释。</p><p id="c474" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们一步一步来解决吧。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="dda1" class="mo lh in mk b gy mp mq l mr ms">[...[...[...[...'...']]]]</span><span id="1119" class="mo lh in mk b gy mw mq l mr ms">Step 1 : </span><span id="cf47" class="mo lh in mk b gy mw mq l mr ms">[...'...'] <br/>We have already seen how it is solved. So we can direactly replace this with ['.' , '.' , '.'].</span><span id="8103" class="mo lh in mk b gy mw mq l mr ms">Output After Step 1:<br/>[...[...[...['.' , '.' , '.']]]]</span><span id="50ec" class="mo lh in mk b gy mw mq l mr ms">Step 2 :</span><span id="7a98" class="mo lh in mk b gy mw mq l mr ms">If we look at the [...['.' , '.' , '.']] again it is spead operator.<br/>Again we are going to replace with ['.' , '.' , '.'].</span><span id="8e69" class="mo lh in mk b gy mw mq l mr ms">Output After Step 1:<br/>[...[...['.' , '.' , '.']]]</span><span id="cd15" class="mo lh in mk b gy mw mq l mr ms">Now if we look closely next two steps are as same as step 2.</span><span id="e442" class="mo lh in mk b gy mw mq l mr ms">There for the answer is ['.' , '.' , '.'].</span></pre></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="c39d" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">狡猾的回报</h1><p id="ff21" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">考虑下面的例子:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="8e43" class="mo lh in mk b gy mp mq l mr ms">(function() {<br/>  return<br/>  {<br/>    b: 10;<br/>  }<br/>})(); </span><span id="364b" class="mo lh in mk b gy mw mq l mr ms">Answer : undefined</span></pre><p id="3054" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">答案是错的，不是吗？</p><p id="7051" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是因为<strong class="jm io">自动分号插入。</strong>这个 JavaScript 概念会自动添加一个分号。</p><p id="3de5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正因为如此，return 关键字后面直接加了一个分号。更正后的代码:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="18f7" class="mo lh in mk b gy mp mq l mr ms">(function() {<br/>  return {<br/>    b: 10<br/>  };<br/>})(); // -&gt; { b: 10 }</span></pre></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="b07e" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">巧妙的箭头功能</h1><p id="f2a6" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">请考虑以下情况:</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="061e" class="mo lh in mk b gy mp mq l mr ms">Example 1 :<br/>let f = () =&gt; 10;<br/>f(); // -&gt; 10</span><span id="602f" class="mo lh in mk b gy mw mq l mr ms">Example 2:<br/>let f = () =&gt; {};<br/>f(); // -&gt; undefined</span></pre><p id="79f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第一个示例返回正确的值 10，这意味着函数执行正确。</p><p id="c219" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在第二个例子中，我们期望函数返回一个空对象，但是它返回了<code class="fe mt mu mv mk b">undefined</code>。</p><p id="a450" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是因为<code class="fe mt mu mv mk b">{}</code>是箭头函数语法的一部分。为了避免这种情况，我们可以使用<code class="fe mt mu mv mk b">()</code>。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="714f" class="mo lh in mk b gy mp mq l mr ms">let f = () =&gt; ({});<br/>f(); // -&gt; {}</span></pre></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="c4b3" class="lg lh in bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">箭头函数不能是构造函数</h1><p id="d22e" class="pw-post-body-paragraph jk jl in jm b jn me jp jq jr mf jt ju jv mg jx jy jz mh kb kc kd mi kf kg kh ig bi translated">这是常规的函数声明。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="52df" class="mo lh in mk b gy mp mq l mr ms">let f = function() {<br/>  this.a = 1;<br/>};<br/>new f(); // -&gt; f { 'a': 1 }</span></pre><p id="4435" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是箭头函数声明。</p><pre class="kj kk kl km gt mj mk ml mm aw mn bi"><span id="6577" class="mo lh in mk b gy mp mq l mr ms">let f = () =&gt; {<br/>  this.a = 1;<br/>};<br/>new f(); // -&gt; TypeError: f is not a constructor</span></pre><p id="e5e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当你使用一个常规函数时，它可以访问<code class="fe mt mu mv mk b">this</code>。因此它们被用来创建构造函数。</p><p id="8e17" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是使用箭头功能，它不能访问<code class="fe mt mu mv mk b">this</code>。导致引发异常。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="b838" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">伙计们，这部分到此为止。如果您错过了第 1 部分和第 2 部分。链接在下面。</p><div class="mx my gp gr mz na"><a href="https://pratik-das.medium.com/tricky-javascript-part-1-bafb9694ec87" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">棘手的 JavaScript:第 1 部分</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">JavaScript 是一种非常流行的语言。它很容易学习和工作。大多数 web 开发人员的职业生涯始于…</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">pratik-das.medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no ks na"/></div></div></a></div><div class="mx my gp gr mz na"><a href="https://pratik-das.medium.com/tricky-javascript-part-2-82fad7adfbd9" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd io gy z fp nf fr fs ng fu fw im bi translated">棘手的 JavaScript:第 2 部分</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">嗨，伙计们，欢迎回到 Ticky JavaScript 的第二部分。如果您是新用户，请查看第 1 部分。下面的链接⏬</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">pratik-das.medium.com</p></div></div><div class="nj l"><div class="np l nl nm nn nj no ks na"/></div></div></a></div><p id="7ea1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请分享给你的朋友。让他们知道 JavaScript 如何欺骗你或欺骗你。让他们意识到。</p><p id="cf2e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你对 JavaScript 感兴趣，请订阅我，我会通知你新的博客。</p><p id="7d32" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在那之前，继续学习。</p></div></div>    
</body>
</html>