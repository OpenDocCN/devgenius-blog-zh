<html>
<head>
<title>Day 24 of Game Dev: Exploding the Enemies on Death!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第 24 天的游戏开发:爆炸死亡的敌人！</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/day-24-of-game-dev-exploding-the-enemies-on-death-d7c2629a30ad?source=collection_archive---------7-----------------------#2022-04-29">https://blog.devgenius.io/day-24-of-game-dev-exploding-the-enemies-on-death-d7c2629a30ad?source=collection_archive---------7-----------------------#2022-04-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="01b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">目标:给我的 2D 敌人添加一个爆炸动画，并清理任何可能随之而来的 bug。</p><p id="5286" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最终结果在文章底部如果你想看的话！</p><p id="2976" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我目前的设置是，每当敌人与玩家或玩家发射的激光发生碰撞时，敌人就会消失(通过代码被消灭)。</p><p id="36f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我想玩一个爆炸<strong class="jm io">动画</strong>，然后消灭敌人，而不是让敌人诡异地突然出现。我有一个敌人爆炸精灵表，我将通过点击敌人并打开<strong class="jm io">动画</strong>标签来制作一个<strong class="jm io">动画</strong>。将所有精灵拖放到<strong class="jm io">动画</strong>标签中。<strong class="jm io">动画</strong>看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/331131f8f1a8c814241e1f033a774c78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/1*V-AJMihjc7JwjOQ9ahRlYQ.gif"/></div></figure><p id="c058" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">动画制作完成并保存后，我只想确保取消<strong class="jm io">动画</strong>的循环参数，这样它就只播放一次。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kq"><img src="../Images/378be9a1f2b8b5917a6b40b369dec6a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/1*cESs5R8TaDq04t6d1JfE_g.gif"/></div></figure><p id="e3d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我也不希望在敌人第一次出现时默认调用<strong class="jm io">动画</strong>,而是只在敌人与玩家或玩家激光碰撞时调用。为此，我需要确保我已经选择了敌人，并进入<strong class="jm io">动画师</strong>选项卡。可以看到玩家动画的默认状态被设置为我制作的<strong class="jm io">爆炸</strong>T20】动画。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kr"><img src="../Images/12da4ebdc966c8a3b52f67abad034e58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*z6kWftXmFy9egkp_4KBp6g.png"/></div></figure><p id="6258" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我想让它默认不动，只在满足特定条件时动，但是因为爆炸是默认的<strong class="jm io">它总是动。即使我取消了循环设置，动画也会在敌人出现时调用 right，因为它设置为<strong class="jm io">默认动作</strong>。</strong></p><p id="e9ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了解决这个问题，我将首先创建一个空状态(意味着它没有动画)并使其成为默认状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ks"><img src="../Images/58a4be4727613b14d23994da7985316f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/1*CclDT_A8cPGo6Wx_JuyBAA.gif"/></div></figure><p id="304b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我将过渡到爆炸动画。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi kt"><img src="../Images/0753530f7d779f8c3a4f9e30d1c43950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yjltyLiRKNqxm44Lp8aQNQ.gif"/></div></div></figure><p id="909b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果我单击转换，那么我可以分配参数，这样默认状态<strong class="jm io">将仅在满足该条件时转换。这由<strong class="jm io">检查员</strong>完成。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ky"><img src="../Images/45778d8e075a0ce08eadfdd99ba9954b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hB7hU3zW8SodN2mTZRVZXA.gif"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk translated">在我的例子中，我已经创建了一个参数</figcaption></figure><p id="6c0a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">回到<strong class="jm io"> Animator </strong>选项卡，要制作一个参数，确保你已经打开了参数选项卡，然后点击加号。如你所见，我们有不同类型的参数。在这种情况下，我将使用一个<strong class="jm io">触发器</strong>。它与 T4 布尔有点不同。这里是它的<strong class="jm io"> </strong> <a class="ae ld" href="https://docs.unity3d.com/ScriptReference/Animator.SetTrigger.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> API </strong> </a>，如果你想的话，你可以看到不同之处。API 中有一个部分专门告诉你动画器中的<strong class="jm io">触发器</strong>和<strong class="jm io"> bool </strong>之间的区别。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi le"><img src="../Images/0d443c502fb833f18325daa54c47083e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/1*EAc9RJm9sNDLHnfQ7tBK4A.gif"/></div></figure><p id="f15b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我设置了<strong class="jm io">触发</strong>参数后，我将返回到转换并将其作为一个条件添加。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/80b0463966ffcde2c755e68335af234c.png" data-original-src="https://miro.medium.com/v2/resize:fit:628/1*qfOfaUsiEsKO6A0_KoQaIw.gif"/></div></figure><p id="072e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">确保您没有填写方框，因为这意味着您已经将<strong class="jm io">触发器</strong>设置为真。我们只希望敌人“死”的时候是真的。通过<strong class="jm io">默认</strong>确保其设置为假。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/3d5b0c3739b54b001ad89bd75fa0b770.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/1*XunI5ZyzOPRAFf3tpR6CDg.gif"/></div></figure><p id="b581" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后在我有摧毁敌人代码的脚本中，我将调用<strong class="jm io">触发器</strong>，这将<strong class="jm io">触发</strong>动画。</p><p id="6789" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我需要一个参考动画师。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/1311e714380b058432e309e93c54ec91.png" data-original-src="https://miro.medium.com/v2/resize:fit:390/format:webp/1*dwxN3gY0_PYY_pgUk0hVsA.png"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi li"><img src="../Images/587c41890b05b62c60961f2af21d07d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:712/format:webp/1*DVIwdAuziM9E3VHKZz-zfg.png"/></div></figure><p id="af00" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作为最佳实践，我还将在<strong class="jm io"> Start() </strong>中对其进行空检查。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/d8a0069b749a78421dd0b0a2280f2f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*4bjUPZKVP_A5hhuoaiHxaw.png"/></div></figure><p id="3f9c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我应该可以在代码中的任何地方调用<strong class="jm io">触发器</strong>。当我叫我的另一个敌人“死亡”代码时，我会叫它。基本上每当敌人与玩家或玩家的激光发生碰撞时。(对于本教程，我注释掉了您不需要担心的代码)</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/de2e1e0335e9bbe3bb9a0919d55a16b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/1*7dPJuFYv4bIS-xZFIxgcVA.png"/></div></figure><p id="0717" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我需要在代码中改变的一点是，在我调用了动画之后，我仍然在破坏游戏对象，这意味着动画<strong class="jm io">永远不会播放。我将在 Destroy()方法中添加第二个参数，让敌人在这么多秒后才进行破坏。我会用我感觉动画<strong class="jm io">应该开始的时间来计时。</strong></strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/e02f17e8f76d839123ad185af3f959a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/1*q4t6Pnbp-Byv-T0q23jfTQ.gif"/></div></figure><p id="c547" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在<strong class="jm io">动画</strong>实际播放，然后敌人被消灭！但是…我还有一些问题。</p><p id="d6b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在你可以多次击中敌人，因为他们被击中后需要 2.8 秒才能真正摧毁。同样，如果你杀死敌人，然后撞上他们，你仍然会被击中，直到他们被完全摧毁。我不喜欢爆炸和敌人死亡的感觉，当播放爆炸动画时，敌人仍然像受到攻击前一样快速移动。</p><p id="d08c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">让我们解决这些问题！</strong></p><p id="d3da" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了让你不能在敌人死后受到伤害，或者在他们“死亡”后多次击中他们，我们只需要在敌人的“死亡”代码被调用时禁用他们的碰撞器。那是因为<strong class="jm io"> OnTriggerEnter2D() </strong>方法就是调用伤害玩家的代码和调用敌人被击中时受到伤害的代码。</p><p id="4c51" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过获得对<strong class="jm io">碰撞器</strong>的引用(并对其进行无效检查以获得最佳实践),每当“死亡”代码被这样调用时，我就能够禁用碰撞器:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/5b45f30da6042641c79237525851bc53.png" data-original-src="https://miro.medium.com/v2/resize:fit:958/format:webp/1*DViUA68T1RIwde7D5MD84g.png"/></div></figure><p id="8e82" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">既然那些<strong class="jm io">的 bug</strong>已经修复，我将会让爆炸的敌人没有普通敌人移动的快(在我看来更好的游戏感觉)。每当“死亡”代码被调用时，我也想减慢敌人的速度。我最初让敌人的速度= 0，让他们在被击中时完全停止，但我认为这看起来也很奇怪。所以一旦它们被击中，它们就停在原地爆炸。相反，我把他们的速度设置为 1.5 秒，我真的很喜欢它的样子！</p><p id="7875" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每当“死亡”代码被这样调用时，我就简单地改变敌人的速度:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ln"><img src="../Images/9f54455170084e963982f28a8fdb1e59.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*aBnnhKBpDLWzzozzh4hdlw.png"/></div></div></figure><p id="6443" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是最终的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi lo"><img src="../Images/a841692bf5543eba853f43a26b902d86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2_8RemPob1Rg6BBD3Zz1wg.gif"/></div></div></figure><p id="bf9d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">牛逼！现在敌人死了感觉好多了，让玩家体验更好！如果你有任何问题，甚至建议，请随时让我知道！让我们做一些很棒的游戏吧！</strong></p></div></div>    
</body>
</html>