# æ­£ç¡®å­¦ä¹  SQL ç¬¬ 3 éƒ¨åˆ†:å…³ç³»

> åŸæ–‡ï¼š<https://blog.devgenius.io/learn-sql-the-right-way-part-3-relationships-c421eb2c6738?source=collection_archive---------14----------------------->

![](img/d2a03ed15777c8296d189fb5c4928ecf.png)

æ¥æº:[https://www . codesmithtools . com/lib/images/plinqo/user-role-many-to-many . png](https://www.codesmithtools.com/lib/images/plinqo/user-role-many-to-many.png)

# å­¦ä¹ æˆæœ

*   å…³ç³»çš„ç±»å‹
*   ER å›¾è¡¨
*   å‚ç…§å®Œæ•´æ€§

# ä»€ä¹ˆæ˜¯å…³ç³»ï¼Ÿ

å…³ç³»æ˜¯è¡¨ä¹‹é—´çš„å…³è”æ–¹å¼ï¼Œå¯ä»¥æ˜¯ä¸¤ä¸ªæˆ–æ›´å¤šçš„è¡¨ã€‚å…³ç³»åŸºäºä½¿ç”¨ä¸»é”®å’Œå¤–é”®ã€‚å¦‚æœä½ æ²¡æœ‰å¬è¯´è¿‡ä¸»é”®æˆ–å¤–é”®ï¼Œæˆ‘ä¼šé˜…è¯» [**ç¬¬äºŒéƒ¨åˆ†**](https://medium.com/dev-genius/learn-sql-the-right-way-part-2-key-types-52848fcca792) ã€‚

# å…³ç³»çš„ç±»å‹

# ä¸€å¯¹ä¸€çš„

å¯¹äºä¸»è¡¨ä¸­çš„æ¯ä¸ªå®ä½“ï¼Œåœ¨å¤–è¡¨ä¸­æœ‰ä¸”åªæœ‰ä¸€æ¡è®°å½•

![](img/431fee482b79814560a17e1515b92b02.png)

å­¦ç”Ÿæ¡Œ

![](img/cd7c55fb53f84e39f8bf04fee996b14a.png)

è”ç³»è¡¨

å­¦ç”Ÿå’Œè”ç³»è¡¨æœ‰ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œè¿™æ˜¯å› ä¸ºæ¯ä¸ªå­¦ç”Ÿåªæœ‰ä¸€ä¸ªè”ç³»å·ç ã€‚åœ¨æŠ€æœ¯æœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° 1 çš„ Id åœ¨ contact è¡¨ä¸­åªå‡ºç°ä¸€æ¬¡ï¼Œå› æ­¤è¿™ç¬¦åˆæˆ‘ä»¬ä¸Šé¢çš„å®šä¹‰ã€‚

# ä¸€å¯¹å¤š

å¯¹äºä¸»è¡¨ä¸­çš„æ¯ä¸ªå®ä½“ï¼Œåœ¨å¤–è¡¨ä¸­éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç›¸å…³è®°å½•ã€‚

![](img/0eb8958c21ffcdc2b5c5840fac9d492b.png)

å®¢æˆ·è¡¨

![](img/81dd87d289dfa029083ec80f62d933e8.png)

è®¢å•è¡¨

customers è¡¨å’Œ order è¡¨æ˜¯ä¸€å¯¹å¤šå…³ç³»ï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªå®¢æˆ·å¯ä»¥ä¸‹è®¸å¤šè®¢å•ã€‚è®°ä½ä¸Šé¢çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° ID 1 ä¸æ­¢å‡ºç°ä¸€æ¬¡ï¼ŒID 2 åªå‡ºç°ä¸€æ¬¡ï¼Œè¿™ç¬¦åˆæˆ‘ä»¬çš„å®šä¹‰ã€‚æ‚¨å¯èƒ½ä¼šè®¤ä¸ºå®šä¹‰ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçŠ¶æ€ï¼Œé‚£ä¹ˆç”±äº ID 3 ä¸åœ¨è¡¨ä¸­ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿå…³ç³»å¹¶ä¸æ€»æ˜¯é€šè¿‡æŸ¥çœ‹é”®æ¥å®šä¹‰çš„ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨è¿™ä¸ªè¡¨æœ‰ä»»ä½•å®ä½“ä¹‹å‰ï¼Œä¸€ä¸ªå®¢æˆ·å¯ä»¥ä¸‹å¤šä¸ªè®¢å•ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä¸€ä¸ªå®¢æˆ·å¿…é¡»ä¸‹ä¸€ä¸ªè®¢å•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™äº›å…³ç³»æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„ã€‚

# å¤šå¯¹å¤š

å¯¹äºä¸»è¡¨ä¸­çš„æ¯ä¸ªå®ä½“ï¼Œå¤–è¡¨ä¸­éƒ½æœ‰è®¸å¤šç›¸å…³è®°å½•ï¼Œå¯¹äºå¤–è¡¨ä¸­çš„æ¯ä¸ªå®ä½“ï¼Œä¸»è¡¨ä¸­ä¹Ÿæœ‰è®¸å¤šç›¸å…³è®°å½•ã€‚

![](img/001f82fc079b30db26870d331929d671.png)

å­¦ç”Ÿå’Œç­çº§æ˜¯å¤šå¯¹å¤šçš„

åœ¨æœ¬ä¾‹ä¸­ï¼Œå…³ç³»æ˜¯å¤šå¯¹å¤šçš„ï¼Œå­¦ç”Ÿå¯ä»¥ä¸Šè®¸å¤šè¯¾ï¼Œè€Œæ¯ä¸ªè¯¾å°†åŒ…å«è®¸å¤šå­¦ç”Ÿã€‚å¦‚æœæˆ‘ä»¬æŸ¥çœ‹æ³¨å†Œè¡¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­¦ç”Ÿ ID å’Œç­çº§ ID çš„è®¸å¤šå®ä¾‹ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆå¤šå¯¹å¤šå…³ç³»æœ‰ä¸‰ä¸ªè¡¨å‘¢ï¼Ÿè¿™æ˜¯ä¸ºäº†ä½¿æ•°æ®æ›´å…·å¯è¯»æ€§ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç­çº§è¡¨ä¸­æœ‰é‚£ä¸ªç­çº§çš„å­¦ç”Ÿï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸€ä¸ªé€»è¾‘å™©æ¢¦ã€‚

æˆ‘ä»¬å¯ä»¥è¿™æ ·åšçš„ä¸€ä¸ªæ–¹æ³•æ˜¯è®©æ›´å¤šçš„å±æ€§è¢«ç§°ä¸º student1ï¼Œstudent2ã€‚

åŒ…å«å­¦ç”Ÿ 1ã€å­¦ç”Ÿ 2ã€å­¦ç”Ÿ 3 å’Œå­¦ç”Ÿ 4 çš„ç­çº§è¡¨

è¿™æ ·åšçš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œå¦‚æœä¸€ä¸ªç­çº§æœ‰å››ä¸ªä»¥ä¸Šçš„å­¦ç”Ÿï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¡¨ä¸­å¢åŠ ä¸€ä¸ªé¢å¤–çš„å±æ€§ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯è®©å­¦ç”Ÿä¸€éåˆä¸€éåœ°é‡å¤åŒæ ·çš„è¯¾ç¨‹

![](img/da90951225e28628f41a45c7b3136548.png)

åŒ…å«é‡å¤å®ä½“å’Œå­¦ç”Ÿ ID åˆ—çš„ç±»åˆ«è¡¨

è¿™æ ·åšçš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦æ›´æ–°æ ‡é¢˜æˆ–æè¿°ï¼Œæˆ‘ä»¬å¿…é¡»å¯¹åŒ…å«æˆ‘ä»¬å¸Œæœ›æ›´æ–°çš„æ ‡é¢˜å’Œæè¿°çš„æ¯ä¸ªå®ä½“éƒ½è¿™æ ·åšã€‚

æ‚¨ä¼šæ³¨æ„åˆ°ï¼Œè®¸å¤š RDBMS å®é™…ä¸Šå¹¶ä¸æ”¯æŒå¤šå¯¹å¤šå…³ç³»ï¼Œæ‰€ä»¥æ ¹æ®ç»éªŒï¼Œå¤šå¯¹å¤šå…³ç³»è¢«æ‹†åˆ†åˆ°ä¸‰ä¸ªè¡¨ä¸­ï¼Œä½¿ç”¨ä¸€å¯¹å¤šå…³ç³»ã€‚éšç€ä½ ç»ƒä¹ å¾—è¶Šæ¥è¶Šå¤šï¼Œè¿™å°†å˜å¾—ç›¸å½“çç¢ã€‚

# ER å›¾è¡¨

# ä»€ä¹ˆæ˜¯ ER å›¾

ER å›¾æ˜¯ä¸€ä¸ªå®ä½“å…³ç³»å›¾ã€‚è¿™æ˜¯ä¸€ç§æµç¨‹å›¾ï¼Œç”¨äºç›´è§‚åœ°æ˜¾ç¤ºâ€œå®ä½“â€å¦‚äººã€ç‰©ä½“æˆ–æ¦‚å¿µå¦‚ä½•ç›¸äº’è”ç³»ã€‚ER å›¾æ˜¯ç”¨æ¥è§„åˆ’æ•°æ®åº“çš„ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ã€‚æˆ‘ä¸ä¼šè®²å¤ªå¤šçš„ç»†èŠ‚ï¼Œå› ä¸ºæˆ‘å¯ä»¥æ¶µç›–å¾ˆå¤šç¬¦å·ï¼Œä½†æˆ‘ä¼šå±•ç¤ºä¸€äº›ç®€å•çš„ä¾‹å­ã€‚æˆ‘æ¨èå» https://www.lucidchart.com/pages/er-diagrams äº†è§£æ›´å¤šå…³äº ER å›¾çš„çŸ¥è¯†ã€‚

![](img/117cacac0c0eac95f93cb268f867e83d.png)

ER å›¾å¸ƒå±€

# ä¸€å¯¹ä¸€çš„ä¾‹å­

![](img/1346038bde33acc8cf7d9449332b0f84.png)

å‘˜å·¥å’Œå›¢é˜Ÿä¸€å¯¹ä¸€çš„å…³ç³»

è¿™æ˜¯ä¸€ä¸ªä¸€å¯¹ä¸€å…³ç³»çš„ä¾‹å­ï¼›æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œçº¿ä»¥ä¸Šçš„æ•°å­—æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°è¡¨çš„å±æ€§ï¼Œè¿™å¾ˆå¥½ï¼Œå› ä¸ºåœ¨è®¡åˆ’çš„è¿™ä¸€ç‚¹ä¸Šï¼Œæ‚¨å°†å†³å®šæ‚¨æƒ³è¦ä»€ä¹ˆæ ·çš„è¡¨ã€‚ä¸­é—´çš„è±å½¢å‘Šè¯‰æˆ‘ä»¬å…³ç³»çš„æ€§è´¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ª**å‘˜å·¥** **ç®¡ç†**ä¸€ä¸ª**å›¢é˜Ÿã€‚è¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºæœ‰æ—¶è¿™ç§å…³ç³»å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆæ˜æ˜¾ã€‚**

# ä¸€å¯¹å¤šç¤ºä¾‹

![](img/f8ad3a2d47b78df8e86f5f379f7f4942.png)

å®¢æˆ·å’Œè®¢å•ä¸€å¯¹å¤šå…³ç³»

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Nï¼Œè€Œä¸æ˜¯æ•°å­— 1ï¼ŒN åŸºæœ¬ä¸Šæ„å‘³ç€å¾ˆå¤šã€‚æˆ‘ä»¬ä½¿ç”¨ N çš„åŸå› æ˜¯å› ä¸ºå®ƒå¯ä»¥æ˜¯ 1ï¼Œ100 ç”šè‡³ 1000ã€‚å®ƒéµå¾ªä¸ä¸Šé¢çš„ä¾‹å­ç›¸ä¼¼çš„å¸ƒå±€ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ª**å®¢æˆ·**å¯ä»¥**ä¸‹**è®¸å¤š**è®¢å•**ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒæ¢ä¸€ä¸‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå¤šå¯¹ä¸€ï¼Œå®ƒçš„è¡Œä¸ºå®Œå…¨ä¸€æ ·ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ã€‚

![](img/85221f22533b455f2d5869af961442aa.png)

å‘˜å·¥å’Œéƒ¨é—¨å¤šå¯¹ä¸€å…³ç³»

è¿™å‘æˆ‘ä»¬è¡¨æ˜ï¼Œè®¸å¤š****å‘˜å·¥** **å‘** **ä¸€ä¸ª** **éƒ¨é—¨æŠ¥å‘Šã€‚****

# **å¤šå¯¹å¤šç¤ºä¾‹**

**![](img/af4ec9df402da3bd9377abbe1a26ee1a.png)**

**å­¦ç”Ÿå’Œç­çº§å¤šå¯¹å¤šå…³ç³»**

**åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° M å’Œ Nï¼ŒåŸå› æ˜¯ç®€å•çš„ä»£æ•°è§„åˆ™ï¼Œå¦‚æœä¸¤è€…éƒ½ä½¿ç”¨å­—æ¯ Nï¼Œå®ƒä»¬å°†æ˜¯ç›¸åŒçš„æ•°å­—ï¼Œä½†æˆ‘ä»¬çŸ¥é“åœ¨å¤šå¯¹å¤šä¸­ï¼Œå®ƒå¯èƒ½æ˜¯ 2 åˆ° 5 æˆ– 2000 åˆ° 10000ã€‚å¦‚æœæ‚¨è¿˜è®°å¾—ï¼Œæˆ‘ä¹‹å‰æåˆ°è¿‡ï¼Œä½œä¸ºç»éªŒæ³•åˆ™ï¼Œå¤šå¯¹å¤šåº”è¯¥åˆ†å¸ƒåœ¨ä¸‰ä¸ªè¡¨ä¸­ã€‚è¯·è®°ä½ï¼Œè¿™ä»ç„¶æ˜¯è®¡åˆ’çš„æ—©æœŸé˜¶æ®µï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰æ·»åŠ é”®å’Œå±æ€§ï¼Œæ‰€ä»¥ç°åœ¨è¿˜å¯ä»¥ã€‚ä¸Šä¾‹æ˜¾ç¤º**å¤š** **å­¦ç”Ÿ**èƒ½**æŠ¥** **å¤š**ç­ã€‚**

# **å‚ç…§å®Œæ•´æ€§**

**è¿™æ˜¯ä¸€ä¸ªä½ å¯èƒ½ä¼šé‡åˆ°çš„å¸¸è§é”™è¯¯ï¼Œç®€å•ä»‹ç»ä¸€ä¸‹æ˜¯éå¸¸é‡è¦çš„ã€‚å½“æ‚¨è¯•å›¾ä»ä¸€ä¸ªè¡¨ä¸­åˆ é™¤ä¸€ä¸ªä¸»é”®ï¼Œè€Œè¯¥ä¸»é”®æ˜¯å¦ä¸€ä¸ªè¡¨ä¸­çš„å¤–é”®æ—¶ï¼Œå°±ä¼šå‡ºç°å‚ç…§å®Œæ•´æ€§ã€‚å¤§å¤šæ•°æ•°æ®åº“ä¸å…è®¸ä½ åœ¨æ²¡æœ‰åˆ é™¤æ‰€æœ‰å¤–é”®çš„æƒ…å†µä¸‹åˆ é™¤ä¸»é”®ã€‚**

**![](img/58fe5d6efaea90a6bfa78f51001f6312.png)**

**å¦‚æ‚¨æ‰€è§ï¼Œåˆ é™¤ customer å°†å¯¼è‡´å¼•ç”¨å®Œæ•´æ€§ï¼Œå› ä¸ºä¸»é”®åœ¨ orders è¡¨å’Œ cust_calls è¡¨ä¸­ã€‚å› æ­¤ï¼Œä¸ºäº†åˆ é™¤ä¸»é”®ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆåˆ é™¤æ‰€æœ‰çš„å¤–é”®ã€‚**

# **æ‘˜è¦**

*   **ä¸€å¯¹ä¸€-å¯¹äºä¸»è¡¨ä¸­çš„æ¯ä¸ªå®ä½“ï¼Œåœ¨å¤–éƒ¨è¡¨ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªè®°å½•**
*   **ä¸€å¯¹å¤š-å¯¹äºä¸»è¡¨ä¸­çš„æ¯ä¸ªå®ä½“ï¼Œåœ¨å¤–éƒ¨è¡¨ä¸­éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç›¸å…³è®°å½•ã€‚**
*   **å¤šå¯¹å¤š-å¯¹äºä¸»è¡¨ä¸­çš„æ¯ä¸ªå®ä½“ï¼Œå¤–è¡¨ä¸­éƒ½æœ‰è®¸å¤šç›¸å…³è®°å½•ï¼Œå¯¹äºå¤–è¡¨ä¸­çš„æ¯ä¸ªå®ä½“ï¼Œä¸»è¡¨ä¸­ä¹Ÿæœ‰è®¸å¤šç›¸å…³è®°å½•ã€‚**

> **æ³¨æ„:å¤šå¯¹å¤šçš„ç»éªŒæ³•åˆ™åˆ†ä¸ºä¸‰ä¸ªè¡¨**

*   **ER å›¾â€”â€”ä¸€ç§è¡¨ç¤ºæ•°æ®åº“çš„å¯è§†åŒ–æ–¹å¼**
*   **å‚ç…§å®Œæ•´æ€§â€”åœ¨åˆ é™¤ä¸»é”®ä¹‹å‰ï¼Œä¸è¦å¿˜è®°åˆ é™¤æ‰€æœ‰å¤–é”®**

**æš‚æ—¶å¤Ÿäº†ã€‚**

**åœ¨ç¬¬å››éƒ¨åˆ†ï¼Œæˆ‘å°†è®¨è®ºä¸€ä¸ªæ–°çš„è¯é¢˜ï¼Œå«åšè§„èŒƒåŒ–ã€‚**

**æ¥ä¸‹æ¥:ä»¥æ­£ç¡®çš„æ–¹å¼å­¦ä¹  SQL ç¬¬ 4 éƒ¨åˆ†:è§„èŒƒåŒ–**

***å¦‚æœä½ å–œæ¬¢è¿™ä¸ªï¼Œç‚¹å‡»*ğŸ‘*åœ¨ä¸‹é¢ï¼Œæ‰€ä»¥å…¶ä»–äººä¼šåœ¨ä»‹è´¨ä¸Šçœ‹åˆ°å®ƒã€‚æ¬¢è¿ä»»ä½•åé¦ˆæˆ–æ„è§ã€‚ç¥ä½ ä»Šå¤©å¼€å¿ƒï¼ç©çš„å¼€å¿ƒï¼***

# **æ¥æº**

**[https://www.lucidchart.com/pages/er-diagrams#section_0](https://www.lucidchart.com/pages/er-diagrams#section_0)**

**[https://docs . Microsoft . com/en-us/office/VBA/access/concepts/structured-query-language/define-relationships-between-tables-using-access-SQL](https://docs.microsoft.com/en-us/office/vba/access/concepts/structured-query-language/define-relationships-between-tables-using-access-sql)**