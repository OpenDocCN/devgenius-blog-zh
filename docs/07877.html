<html>
<head>
<title>Initial setup for a Rust web application using Web Components and native Javascript modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 web 组件和本地 Javascript 模块对 Rust web 应用程序进行初始设置</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/initial-setup-for-a-rust-web-application-using-web-components-and-native-javascript-modules-ee832c062e8a?source=collection_archive---------5-----------------------#2022-04-29">https://blog.devgenius.io/initial-setup-for-a-rust-web-application-using-web-components-and-native-javascript-modules-ee832c062e8a?source=collection_archive---------5-----------------------#2022-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3f6ebef9df09c1e739eda5cec945a508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qCSQdViXgJu15nYU"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">Gabriel Crismariu 在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="659e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">谈论 HTML5 Web 组件有点奇怪。web 开发行业现在都是关于框架的:Angular、React、Vue，当然还有它们无数的分支和变体。如今，当开始一个新项目时，问题总是你使用什么框架，没有人关心你是否需要一个框架。看起来你只需要使用一个 Javascript 框架，否则所有的神都会生你的气，用他们的愤怒打击你。</p><p id="841c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本系列文章中，我们将探索如何使用普通 Javascript 构建现代 web 应用程序。我们将解释什么是 HTML5 web 组件，如何使用它们，如何不使用它们，如何设计它们的样式以及如何处理可怕的状态。另外，应用程序将是静态的:由 Rust web 服务器提供的普通 HTML 页面，由 Rust API 提供支持。可以说是一种 Jamstack(仅 Javascript、API 和标记)。</p><p id="3a29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还将使用 Javascript 模块，这也是现代浏览器固有的支持。这再次意味着我们不需要 Webpack 或任何其他翻译工具。我们将简单地在所有更新的浏览器中使用已经存在一段时间的原生 Javascript 工具。代码可以在<a class="ae kc" href="https://github.com/raduzaharia-medium/html5-rss-reader-initial" rel="noopener ugc nofollow" target="_blank"> github </a>上获得，但是如果你想学得更好，你应该按照教程自己写代码。</p><p id="8d54" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该应用程序将是一个 HTML5 RSS 阅读器，该系列将是这样的(当我写文章时，这些点将更新到链接):</p><ol class=""><li id="7f10" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">应用程序的初始结构(本文)</li><li id="a09f" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/the-responsive-layout-for-our-rust-web-application-8fb46fe14c8f">模仿应用程序布局</a></li><li id="3817" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/html5-rss-reader-writing-the-first-web-components-949eec88dbf9">第一个 HTML5 web 组件</a></li><li id="43ed" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/html5-rss-reader-writing-specialized-web-components-8c8a972e681a">继承组件</a></li><li id="3246" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/html5-rss-reader-filtering-the-custom-list-component-c3ba366c08fd">向自定义列表添加过滤器</a></li><li id="0396" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/the-shadow-dom-of-an-html5-web-component-d99af7844192">关于暗影 DOM </a></li><li id="b964" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">正在读取 RSS 数据</li></ol><h2 id="343b" class="lp lq iq bd lr ls lt dn lu lv lw dp lx ko ly lz ma ks mb mc md kw me mf mg mh bi translated">发展先决条件</h2><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mi"><img src="../Images/571c2c29150b1106b0576ab9cd36ee92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oIfcPETmHBoD_Qmq"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">杰伊·黑克在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="5704" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本教程将使用 VSCode 和 Rust，因此您应该同时安装它们。我们将在 Fedora 35 机器上开发，所以我的设置代码将使用<code class="fe mn mo mp mq b">dnf</code>。让我们安装 VSCode:</p><pre class="mj mk ml mm gt mr mq ms mt aw mu bi"><span id="df7d" class="lp lq iq mq b gy mv mw l mx my">#sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc<br/>#sudo sh -c 'echo -e "[code]\nname=Visual Studio Code\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc" &gt; /etc/yum.repos.d/vscode.repo'</span><span id="dd01" class="lp lq iq mq b gy mz mw l mx my">#<!-- -->sudo dnf install code</span></pre><p id="9088" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来让我们安装 Rust:</p><pre class="mj mk ml mm gt mr mq ms mt aw mu bi"><span id="4e81" class="lp lq iq mq b gy mv mw l mx my">#sudo dnf install cargo rust rustfmt</span></pre><p id="92de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我通常添加两个 VSCode 扩展来帮助 Rust 开发:<code class="fe mn mo mp mq b">Better TOML</code>和<code class="fe mn mo mp mq b">rust-analyzer</code>。现在我们可以创建我们的<code class="fe mn mo mp mq b">html5-rss-reader</code>应用程序了，我将使用一个项目文件夹:</p><pre class="mj mk ml mm gt mr mq ms mt aw mu bi"><span id="9e36" class="lp lq iq mq b gy mv mw l mx my">#mkdir Projects<br/>#cd Projects<br/>#mkdir html5-rss-reader<br/>#cd html5-rss-reader<br/>#cargo init</span></pre><p id="85ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好了，我们可以启动 VSCode 并加载 html5-rss-reader 文件夹了:</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/0834d83b5d7931e73d3a6767ed3b24de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pA7t9kLJjOJ_Zsus1cGtIg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">空的 RSS 阅读器应用程序</figcaption></figure><p id="c0b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">就是这样。我们已经准备好开始开发我们的 HTML5 RSS 阅读器应用程序。</p><h2 id="7bf3" class="lp lq iq bd lr ls lt dn lu lv lw dp lx ko ly lz ma ks mb mc md kw me mf mg mh bi translated">web 和 API 服务器</h2><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/4d817522dc85aefd0adb4150df76302e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DdpRc_-DbjMP4EdT"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">达米安·扎列斯基在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="470b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们用 web 服务器所需的依赖项来更新<code class="fe mn mo mp mq b">Cargo.toml</code>文件。我们将使用<code class="fe mn mo mp mq b">Actix</code> web 框架，我们将准备异步工作的代码，因为将来我们将加载 RSS 数据，我们希望在不阻塞服务器线程的情况下这样做:</p><pre class="mj mk ml mm gt mr mq ms mt aw mu bi"><span id="97a6" class="lp lq iq mq b gy mv mw l mx my">[package]<br/>name = "html5-rss-reader"<br/>version = "0.1.0"<br/>edition = "2021"</span><span id="ed2d" class="lp lq iq mq b gy mz mw l mx my">[dependencies]<br/>actix-web = "*"<br/>actix-files = "*"<br/>actix-rt = "*"</span></pre><p id="c884" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们在 public 中添加一些文件夹:<code class="fe mn mo mp mq b">pages</code>和<code class="fe mn mo mp mq b">shared</code>，其中<code class="fe mn mo mp mq b">components</code>、<code class="fe mn mo mp mq b">scripts</code>和<code class="fe mn mo mp mq b">styles</code>为子文件夹:</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/5b49bceaa4bb4f767d8597df9584ad2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GXVG7Gxri8OYlDzRYQfD4A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">应用程序文件夹结构</figcaption></figure><p id="a151" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以在<code class="fe mn mo mp mq b">main.rs</code>中创建我们的 web 服务器了:</p><pre class="mj mk ml mm gt mr mq ms mt aw mu bi"><span id="0137" class="lp lq iq mq b gy mv mw l mx my">use actix_files::Files;<br/>use actix_web::{App, HttpServer};</span><span id="1cbb" class="lp lq iq mq b gy mz mw l mx my">#[actix_rt::main]<br/>async fn main() -&gt; std::io::Result&lt;()&gt; {<br/>  return HttpServer::new(|| {<br/>    App::new()<br/>     .service(Files::new("/shared/scripts", "./public/shared/scripts/"))<br/>     .service(Files::new("/shared/components", "./public/shared/components/"))<br/>     .service(Files::new("/shared/styles", "./public/shared/styles/"))<br/>     .service(Files::new("/", "./public/pages/").index_file("index.html"))<br/>  })<br/>  .bind("0.0.0.0:8001")?<br/>  .run()<br/>  .await;<br/>}</span></pre><p id="c7eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们正在准备 web 服务器，以便从我们创建的文件夹中提供静态内容:普通文件夹的<code class="fe mn mo mp mq b">shared</code>、<code class="fe mn mo mp mq b">components</code>和应用程序 HTML 的<code class="fe mn mo mp mq b">styles</code>、<code class="fe mn mo mp mq b">pages</code>。我们将默认的 HTML 文件配置为位于<code class="fe mn mo mp mq b">pages</code>文件夹中的<code class="fe mn mo mp mq b">index.html</code>。我们还配置服务器监听端口<code class="fe mn mo mp mq b">8001</code>。</p><p id="ba0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意声明<code class="fe mn mo mp mq b">main</code>的方式:is 通过声明<code class="fe mn mo mp mq b">actix_rt::main</code>属性来使用<code class="fe mn mo mp mq b">actix_rt</code>异步运行时。这允许我们通过允许<code class="fe mn mo mp mq b">main</code>本身异步来创建<code class="fe mn mo mp mq b">async</code>函数。</p><p id="44fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们在<code class="fe mn mo mp mq b">public</code>文件夹中添加一个几乎为空的<code class="fe mn mo mp mq b">index.html</code>文件:</p><pre class="mj mk ml mm gt mr mq ms mt aw mu bi"><span id="d4e8" class="lp lq iq mq b gy mv mw l mx my">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;RSS Reader&lt;/title&gt;</span><span id="617a" class="lp lq iq mq b gy mz mw l mx my">    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="1ae0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们已经准备好构建和运行我们的应用程序:</p><pre class="mj mk ml mm gt mr mq ms mt aw mu bi"><span id="7028" class="lp lq iq mq b gy mv mw l mx my">#cargo build<br/>#cargo run</span></pre><p id="cf5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以打开浏览器并转到 localhost:8001:</p><figure class="mj mk ml mm gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/76987574f25577a306aacc8e157c9fa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6vWYH7RY3LQJU4iN2Cw9uA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">我们的空应用程序</figcaption></figure></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><p id="fc4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">暂时就这样了。我们看到标题为 RSS 阅读器的空 HTML 页面。<a class="ae kc" rel="noopener ugc nofollow" target="_blank" href="/the-responsive-layout-for-our-rust-web-application-8fb46fe14c8f">下一次</a>我们将通过创建一个我们想要实现的小模拟来开始我们的应用程序。在那之前，如果你有任何问题，请随意使用评论，或者让我知道你是否有特别想在本教程中看到的东西。下次见！</p></div></div>    
</body>
</html>