<html>
<head>
<title>How to use ExpressJs with Typescript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将ExpressJs与Typescript一起使用</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-use-expressjs-with-typescript-2a0c30c73eb6?source=collection_archive---------1-----------------------#2021-03-25">https://blog.devgenius.io/how-to-use-expressjs-with-typescript-2a0c30c73eb6?source=collection_archive---------1-----------------------#2021-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9f82" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">看看如何将web框架expressJs与typescript结合使用</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/705fc5dfd4a41c5055d08e8fbdc687da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JoZxV51_Z827SAiN"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@cebbbinghaus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">克里斯托弗·罗宾·艾宾浩斯</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h2 id="57e1" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">概观</h2><p id="2dff" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">如果你在这里，我假设你已经知道什么是expressJs、javascript、node和typescript。我还假设您已经安装了node和npm。所以我不会深入讨论这个问题。</p><p id="2da6" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在本文中，我们将通过设置让您开始使用带有typescript的expressJs。我们还将详细介绍什么是控制器、中间件、服务、路由等。</p><p id="2732" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">我们开始吧！</p><h2 id="b956" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">启动新的NPM项目并安装依赖项</h2><ul class=""><li id="447a" class="mq mr iq lu b lv lw ly lz lf ms lj mt ln mu mk mv mw mx my bi translated">为您的项目创建一个新文件夹，打开您的终端，然后键入:</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="312d" class="kw kx iq na b gy ne nf l ng nh">npm init</span></pre><p id="f856" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">该命令将要求您输入一些内容。随意回答(与本指南无关)。</p><ul class=""><li id="38df" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">现在安装依赖项:</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="5bf9" class="kw kx iq na b gy ne nf l ng nh">npm i express express-winston winston debug cors — save</span></pre><ul class=""><li id="7a5d" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">安装开发依赖项</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="b069" class="kw kx iq na b gy ne nf l ng nh">npm i <a class="ae kv" href="http://twitter.com/types/cors" rel="noopener ugc nofollow" target="_blank">@types/cors</a> <a class="ae kv" href="http://twitter.com/types/debug" rel="noopener ugc nofollow" target="_blank">@types/debug</a> <a class="ae kv" href="http://twitter.com/types/express" rel="noopener ugc nofollow" target="_blank">@types/express</a> <a class="ae kv" href="http://twitter.com/types/node" rel="noopener ugc nofollow" target="_blank">@types/node</a> nodemon source-map-support tslint typescript --save-dev</span></pre><ul class=""><li id="3133" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">向package.json中添加一些脚本，如下所示</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="fb8f" class="kw kx iq na b gy ne nf l ng nh">{<br/>  "name": "medium",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "start": "tsc &amp;&amp; node ./dist/app.js",<br/>    "dev": "export DEBUG=* &amp;&amp; nodemon --ext ts --exec 'npm run start'",<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "author": "",<br/>  "license": "ISC",<br/>  "dependencies": {<br/>    "cors": "^2.8.5",<br/>    "debug": "^4.3.1",<br/>    "express": "^4.17.1",<br/>    "express-winston": "^4.1.0",<br/>    "winston": "^3.3.3"<br/>  },<br/>  "devDependencies": {<br/>    "<a class="ae kv" href="http://twitter.com/types/cors" rel="noopener ugc nofollow" target="_blank">@types/cors</a>": "^2.8.10",<br/>    "<a class="ae kv" href="http://twitter.com/types/debug" rel="noopener ugc nofollow" target="_blank">@types/debug</a>": "^4.1.5",<br/>    "<a class="ae kv" href="http://twitter.com/types/express" rel="noopener ugc nofollow" target="_blank">@types/express</a>": "^4.17.11",<br/>    "<a class="ae kv" href="http://twitter.com/types/node" rel="noopener ugc nofollow" target="_blank">@types/node</a>": "^14.14.35",<br/>    "nodemon": "^2.0.7",<br/>    "source-map-support": "^0.5.19",<br/>    "tslint": "^6.1.3",<br/>    "typescript": "^4.2.3"<br/>  }<br/>}</span></pre><ul class=""><li id="7833" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">tsconfig:在项目的根目录下创建一个名为<code class="fe nl nm nn na b">tsconfig.json</code>的文件，它应该包含:</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="5b21" class="kw kx iq na b gy ne nf l ng nh">{<br/>    "compilerOptions": {<br/>      "target": "es2016",<br/>      "lib": ["es6", "dom", "es2017", "esnext.asynciterable"],<br/>      "allowSyntheticDefaultImports": true,<br/>      "experimentalDecorators": true,<br/>      "emitDecoratorMetadata": true,<br/>      "moduleResolution": "node",<br/>      "module": "commonjs",<br/>      "sourceMap": true,<br/>      "outDir": "dist",<br/>      "rootDir": "./src",<br/>      "allowJs": true,<br/>      "baseUrl": ".",<br/>      "esModuleInterop": true,<br/>      "resolveJsonModule": true,<br/>    },<br/>    "include": ["./src/**/*", "./test/**/*"],<br/>    "exclude": ["node_modules"]<br/>}</span></pre><p id="6937" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">这个文件告诉typescript“编译器”应该如何输出我们的javascript</p><h2 id="94e9" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">为项目创建脚手架</h2><ul class=""><li id="7b91" class="mq mr iq lu b lv lw ly lz lf ms lj mt ln mu mk mv mw mx my bi translated">创建包含我们所有代码的主文件夹</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="9bec" class="kw kx iq na b gy ne nf l ng nh">mkdir src<br/>cd src</span></pre><ul class=""><li id="852f" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">创建包含按职责组织的代码的文件夹</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="8004" class="kw kx iq na b gy ne nf l ng nh">mkdir controllers services routes middlewares</span></pre><ul class=""><li id="7d78" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">最后，这创建了我们入口点文件</li></ul><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="817b" class="kw kx iq na b gy ne nf l ng nh">touch app.ts</span></pre><h2 id="378f" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">现在是开始编码的时候了</h2><ul class=""><li id="e580" class="mq mr iq lu b lv lw ly lz lf ms lj mt ln mu mk mv mw mx my bi translated">src/app.ts</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="e493" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">在我们的app.ts中，我们创建了服务器应用程序。是连接一切的切入点。我们从声明一些常量开始，这些常量定义了服务器的一些行为。之后，我们附加一些中间件，这些中间件会查看我们向服务器发出的每个HTTP请求。现在将我们的routes文件推送到routes数组，并启动服务器。</p><p id="b087" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">该文件要求我们现在创建路线和中间件:</p><ul class=""><li id="72c3" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">src/routes/baseRoutes.ts和src/routes/testRoutes.ts</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="ff52" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">BaseRoute.ts只是一个类，它将服务于所有路由文件的基础，并声明所有路由都必须实现的configureRoute方法。在testRoute文件中，我们将一个控制器方法附加到我们的路由上。</p><ul class=""><li id="99fd" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">src/中间件/logger.ts</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><ul class=""><li id="a694" class="mq mr iq lu b lv ml ly mm lf ni lj nj ln nk mk mv mw mx my bi translated">src/controllers/test controller . ts</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="no np l"/></div></figure><p id="b285" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">最后，我们创建了我们的控制器文件。这是我们逻辑的起点。将来，您还应该创建一个服务类来处理所有的业务逻辑，以及您应该在哪里调用存储库来与数据库进行交互。</p><h2 id="73ca" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">启动服务器</h2><p id="89f6" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">现在我们可以启动我们的服务器了。正如我们在上面看到的，在ou <code class="fe nl nm nn na b">package.json</code>中创建了两个脚本。一个用于在开发模式下启动我们的服务器，另一个用于生产模式。</p><p id="26fa" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">开发时，您可以使用:</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="ff35" class="kw kx iq na b gy ne nf l ng nh">npm run dev</span></pre><p id="3d6b" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">生产中:</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="f654" class="kw kx iq na b gy ne nf l ng nh">npm run start</span></pre><p id="aad0" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">这两个脚本都负责编译typescript代码，并从新创建的dist文件夹中分发它。dev模式有一个详细的日志来记录正在发生的事情，使调试变得更加容易。</p><h2 id="e751" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">下一步是什么</h2><p id="e066" class="pw-post-body-paragraph ls lt iq lu b lv lw jr lx ly lz ju ma lf mb mc md lj me mf mg ln mh mi mj mk ij bi translated">下一篇文章应该是关于使用我们在这里构建的基础来构建一个完整的功能性rest API。也许使用数据库和ORM来抽象数据库。</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="2a6b" class="pw-post-body-paragraph ls lt iq lu b lv ml jr lx ly mm ju ma lf mn mc md lj mo mf mg ln mp mi mj mk ij bi translated">请在评论中告诉我，你希望我在下一篇文章中发表什么观点！</p><div class="nx ny gp gr nz oa"><a href="https://bargainzon.site" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">亚马逊产品列表| BargainZon</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">2022年11月11日【广泛兼容性】USB-C转USB-A适配器连接USB C设备(USB C线/记忆棒/…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">bargainzon.site</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kp oa"/></div></div></a></div></div></div>    
</body>
</html>