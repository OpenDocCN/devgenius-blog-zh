<html>
<head>
<title>Dynamic Form Using React Hooks: The boss of the senior bosses</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 React 钩子的动态表单:高级老板的老板</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/dynamic-form-using-react-hooks-the-boss-of-the-senior-bosses-24cecc3da4a7?source=collection_archive---------12-----------------------#2022-10-07">https://blog.devgenius.io/dynamic-form-using-react-hooks-the-boss-of-the-senior-bosses-24cecc3da4a7?source=collection_archive---------12-----------------------#2022-10-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/042068b5a4e8a157530a7533d9969a59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M_pdSWXKT97Z0dz_"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae jz" href="https://unsplash.com/@javaistan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Afif Ramdhasuma </a>拍摄</figcaption></figure><h1 id="cd9f" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">介绍</h1><p id="4eb3" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">对数字意识的兴趣急剧增加，web 应用程序是构建和设计软件应用程序来解决人类挑战的最佳方式之一。收集用户数据是一个不容忽视的发展领域。</p><p id="e9a1" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">您是一名初级/高级软件工程师吗？您想使用表单字段收集大量数据，并使用 react hooks 关注个别变化吗？那么这篇文章就送给你了。</p><h1 id="7ff6" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">要学习的东西</h1><p id="3e91" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">在本文中，我将向您展示我是如何处理以下问题的:</p><ul class=""><li id="a97d" class="mb mc in la b lb lw lf lx lj md ln me lr mf lv mg mh mi mj bi translated">呈现动态表单</li><li id="a014" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">处理各种形式的变化</li><li id="646a" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">使用按钮添加更多表单</li><li id="a8e4" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">使用按钮删除表单</li><li id="ca17" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">使用样式组件</li><li id="cae2" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">最佳代码实践</li></ul><h1 id="664d" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">先决条件</h1><ul class=""><li id="3be7" class="mb mc in la b lb lc lf lg lj mp ln mq lr mr lv mg mh mi mj bi translated">了解 Javascript</li><li id="5d1c" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">了解反应</li><li id="c531" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">安装 Npm/节点</li></ul><h1 id="2da1" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">设置环境</h1><p id="227a" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">创建一个新的 react 项目，使用下面的<a class="ae jz" href="https://create-react-app.dev/docs/getting-started/" rel="noopener ugc nofollow" target="_blank"> <strong class="la io"> <em class="ms">链接</em> </strong> </a>，并将其命名为 dynamic-forms。在您的终端中，导航到桌面文件夹并安装 styled-components，如下所示:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="c286" class="nc kb in my b gy nd ne l nf ng">cd desktop</span><span id="4a3a" class="nc kb in my b gy nh ne l nf ng">cd dynamic-forms</span><span id="5244" class="nc kb in my b gy nh ne l nf ng">npm i styled-components ––save</span><span id="3f79" class="nc kb in my b gy nh ne l nf ng">Code .</span></pre><p id="ad40" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在上面的代码片段中，我导航到 desktop 文件夹，进入我创建的 dynamic-forms，react 项目，并安装了样式化组件，以便为应用程序提供灵活的样式。</p><h1 id="4936" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">文件夹结构</h1><p id="5164" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">让我们转到终端，运行下面的代码片段:</p><pre class="mt mu mv mw gt mx my mz na aw nb bi"><span id="118e" class="nc kb in my b gy nd ne l nf ng">cd src</span><span id="9107" class="nc kb in my b gy nh ne l nf ng">mkdir View</span><span id="bf88" class="nc kb in my b gy nh ne l nf ng">cd View</span><span id="1093" class="nc kb in my b gy nh ne l nf ng">mkdir Styles Util</span><span id="8b66" class="nc kb in my b gy nh ne l nf ng">cd Styles</span><span id="a6d7" class="nc kb in my b gy nh ne l nf ng">touch ViewStyles.js</span><span id="d81b" class="nc kb in my b gy nh ne l nf ng">cd ..</span><span id="4877" class="nc kb in my b gy nh ne l nf ng">cd Util</span><span id="760b" class="nc kb in my b gy nh ne l nf ng">touch handlers.js</span><span id="2ef1" class="nc kb in my b gy nh ne l nf ng">cd ..</span><span id="9980" class="nc kb in my b gy nh ne l nf ng">touch Main.js</span><span id="01ff" class="nc kb in my b gy nh ne l nf ng">cd ..</span></pre><p id="76eb" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">我在 src 文件夹中导航，并创建了一个名为 View 的文件夹，在 View 文件夹中，我创建了两个名为 Styles、Util 的文件夹和一个名为 Main.js 的组件。</p><p id="a49e" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">让我们进入 app.js 并删除返回的 jsx，只留下带有 app 类的 div 元素。</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/54023628b6fcf079d1e578469a8eafe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/0*ZBfDP2A8Omwr8zu8"/></div></figure><p id="0ca9" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">让我们进入 app.css，移除所有样式属性，并添加默认样式，如下所示:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/4b2d2805a866293f17b553cc711466e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/0*0wQCv8Vy2wZWIhzC"/></div></figure><h1 id="43c7" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">呈现动态表单</h1><p id="b1d3" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">在上面创建的主组件中，我们添加以下代码片段:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/e9e70940df9d283ba9855319cca64c59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*otyTvmfJvCz__ZSq"/></div></div></figure><p id="8210" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在上面的代码片段中，我呈现了一个标题和一个包含输入字段的表单。formField 是一个处理所有表单字段的状态，目前只呈现一个字段。</p><p id="1224" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">请注意，标记是使用样式化组件生成的，如下所示:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/4fda0a6c42f3c2c60e2a2bdf43c58466.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/0*IJtArOHtgIeKfvih"/></div></figure><p id="3d1c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">早些时候，我提到我将有一个按钮，用于添加/删除任何指定的表单。让我们添加按钮，如下所示:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/643a5c7c0d72707d74bb3e618b5a7104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GYDzlDRBZ68zBiZq"/></div></div></figure><p id="a333" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">因为 React 返回时只接受一个子元素，所以我创建了一个包装器来包装字段和按钮。对于每个循环，它包装一个保存字段和按钮的元素。</p><h1 id="9da9" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">集成字体图标</h1><p id="44fc" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">按钮图标是使用字体 awesome icon-v5.15.4 添加的，我使用了链接到 index.html 内部的 CDN，如下所示:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/caaca095db56392eb7945084ca3ce884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RtjQ-aRSyh-PKiev"/></div></div></figure><p id="e9c6" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">上面的代码片段允许我使用 className 属性添加图标，如前面的代码片段所示。</p><h1 id="116c" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">点击按钮时添加更多表单</h1><p id="d31b" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">让我们进入我在上面创建的 handlers.js 文件，并向其中添加以下代码片段:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/7d11963e04ef85961e2749084c395ca2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SoL4grlnEL4l_4M5"/></div></div></figure><p id="ac07" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">我声明/导出了 handleAddForms 函数，该函数包含两个参数，即事件和一个设置表单字段状态的方法。我使用事件的 preventDefault 方法来防止表单返回 void，并扩展 prev 状态，向该状态添加一个空字符串。</p><p id="51b2" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">setFormField 在主组件中声明，如下所示:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div class="gh gi np"><img src="../Images/d22725c6f592b63ee33b6204c2c3abd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/0*HKUopeDAzSU04IY2"/></div></figure><p id="3519" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">handleAddForms 被导入到主组件中，并在 span 元素的 onClick 方法中传递，然后设置参数，如下所示:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/9eb4a8caeab8627a6f8bc46836e653e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dvVRjTDUwkjZ6atX"/></div></div></figure><h1 id="d215" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">单击按钮时移除表单</h1><p id="15e4" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">让我们进入 handlers.js 文件，并向其中添加以下代码片段:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/8c43381392cc44bd735fdf1c98c2316e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pjt9WL3G3u_qglV9"/></div></div></figure><p id="3b7f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在上面的代码片段中，我声明/导出了 removeForm 处理程序，我向它传递了四(4)个参数，触发的事件，指定字段的索引，当前字段和设置状态的方法。</p><p id="ee6c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">我阻止了表单返回 void，我设置了标准来监视字段何时只剩下一个字段，并在该条件之后停止执行剩余的代码。</p><p id="41d9" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">我循环遍历 formField 以获取使用索引指定的字段，并返回指定字段之外的字段，最后将状态设置为当前可用的字段。</p><p id="c80c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">removeForm 方法也被导入到主组件中，并被传递给 remove 按钮 onClick，如下所示:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/39c456d280f66308c6b392bb2d9a64c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dCFJurJISFiQTlWi"/></div></div></figure><h1 id="7a3a" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">处理形式变化</h1><p id="6c10" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">让我们进入 handler.js 文件，并向其中添加以下代码片段:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/defb58ec16c0a7b21a5bf3a1469779a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MLujz7ylousiQz2F"/></div></div></figure><p id="52ac" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在上面的代码片段中，指定的索引用于获取要更新的确切字段，并最终将新的更新字段返回到状态。参数是在调用函数的主组件中设置的。</p><p id="bb13" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">让我们进入主组件，在 onChange 方法中传递函数的字段，并将值设置为每个字段的值，如下所示:</p><figure class="mt mu mv mw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nt"><img src="../Images/c2ae543be2b4faae2c25ac1ad69cd4cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zAqTC6LnPDvrw2-U"/></div></div></figure><h1 id="6b76" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">演示</h1><p id="310b" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">现在我已经添加了以上所有内容，让我们使用下面的链接来访问<a class="ae jz" href="https://res.cloudinary.com/hobbyluv07/video/upload/v1663142264/dynamic_forms_-_Google_Chrome_2022-09-14_08-50-50_pghjpd.mp4" rel="noopener ugc nofollow" target="_blank">演示</a></p><h1 id="e66e" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="69a2" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">到目前为止，我想您一定已经看过演示了，并且看到了与表单交互是多么的灵活和容易。我猜你的电子商务网站和其他需要动态表单的 UI 设计将不再是一个挑战。</p><p id="51ac" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">如果这篇文章对你有帮助，请在<a class="ae jz" href="https://www.linkedin.com/in/chime-princewill-3a2b1b192/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>和<a class="ae jz" href="https://princewillchime43.medium.com/" rel="noopener"> Medium </a>上赞、评论并关注我，以查看我的更多文章。点击下面的链接进入来源<a class="ae jz" href="https://github.com/chibuike07/dynamic-form-react" rel="noopener ugc nofollow" target="_blank"> <strong class="la io"> <em class="ms">代码</em> </strong> </a>。</p></div></div>    
</body>
</html>