<html>
<head>
<title>Deploying a Spring Boot app to Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将 Spring Boot 应用程序部署到 Kubernetes</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploying-a-spring-boot-app-to-kubernetes-d4aadc0bca20?source=collection_archive---------0-----------------------#2021-08-06">https://blog.devgenius.io/deploying-a-spring-boot-app-to-kubernetes-d4aadc0bca20?source=collection_archive---------0-----------------------#2021-08-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/45037e5b2ebf42ee6a72e6e121dd2642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZwixfJf5HaaGjH68J8R0ZA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">来源:shutterstock.com</figcaption></figure><h1 id="3286" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">概观</h1><p id="cf8f" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">让我们面对现实吧，为了做出令人惊叹的软件产品，开发人员总是倾向于新的工具和技术，这些工具和技术可以节省时间，并在开发周期结束时提供最佳的输出。在软件开发领域，您一定听说过 Kubernetes。今天，越来越多的开发人员正在使用它，原因很明显。Kubernetes 已经成为开发人员的首选，因为它是强大的部署平台之一。</p><p id="11fc" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在这里，我们将通过分解步骤来讨论和浏览将 spring boot 应用程序部署到 Kubernetes 的整个过程。在文章的最后，你会了解到，</p><ul class=""><li id="21c4" class="mb mc in la b lb lw lf lx lj md ln me lr mf lv mg mh mi mj bi translated">Kubernetes 和 Spring boot 概述</li><li id="a8d1" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">正在初始化 spring boot 应用程序设置</li><li id="21fb" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">创建 docker 图像</li><li id="da5f" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">在本地安装 Kubernetes(你也可以称之为 Minikube)</li><li id="75df" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">最后，在 Kubernetes 上部署 spring boot 应用程序</li></ul><p id="e65f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">现在，在进入本文有趣的部分之前，最好先理解一下库伯内特和 Spring Boot 的定义。</p><h1 id="0de5" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">什么是 Spring Boot？</h1><p id="7ee4" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">简单来说，<a class="ae jz" href="https://spring.io/guides/gs/spring-boot/" rel="noopener ugc nofollow" target="_blank"> Spring boot </a>是一个开源的基于 Java 的框架。它提供了一种用 Java 编写和构建应用程序的快速方法。基于 Spring 框架构建的应用程序可以在所有平台上运行，受到了行业专家的强烈推荐。尽管进入 spring 框架并不容易，但是您必须经历一些配置挑战。但是一旦你通过了所有的挑战，你就可以用最少的投入创造出令人惊叹的应用程序。此外，你还将利用下面的优势。</p><ul class=""><li id="ed62" class="mb mc in la b lb lw lf lx lj md ln me lr mf lv mg mh mi mj bi translated">XML 和 JavaBeans 的灵活配置</li><li id="9ac2" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">无需人工干预的自动配置</li><li id="5916" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">创建基于注释的 spring 应用程序</li><li id="e47f" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">减少对第三方库的依赖</li><li id="c96a" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">使 web 应用程序测试变得容易，因为它带有像 Jetty 和 Tomcat 这样的嵌入式 HTTP 服务器</li></ul><p id="2b19" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">总的来说，Spring Boot 让你用更少的开发工作来构建和开发应用程序，同时也确保了更高的生产率。</p><h1 id="2646" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">什么是 Kubernetes</h1><p id="043c" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">简而言之，Kubernetes 是一个可移植的、开源的容器编排平台，使应用程序的部署、伸缩和管理自动化。最初由 Google 发起，但现在由 Cloud-Native Computing Foundation 管理，并得到 Google、AWS、IBM、Intel、Red Hat 和 Cisco 等主要行业参与者的支持。使用 Kubernetes，您可以在微服务架构中部署和操作应用程序。</p><p id="b36d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">如今，越来越多的组织转向云结构架构师，他们一直在寻找一个强大的平台，Kubernetes 拯救了他们，并提供了几个优势，如</p><ul class=""><li id="145f" class="mb mc in la b lb lw lf lx lj md ln me lr mf lv mg mh mi mj bi translated">动作快点</li><li id="f267" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">经济高效的解决方案</li><li id="7018" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">Kubernetes 是云不可知的</li></ul><p id="9bf3" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">这些都是吸引开发者注意力的原因。如果你想了解更多关于 Kubernetes 的信息，你应该花些时间查看他们的官方文档。</p><p id="12ef" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">现在进入本文的主要部分，在 Kubernetes 上部署 spring boot 应用程序，让我们看看您需要什么。</p><h1 id="634d" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">先决条件</h1><p id="f821" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">首先，<a class="ae jz" href="https://github.com/sbrosinski/spring-boot-on-k8s" rel="noopener ugc nofollow" target="_blank">访问此 repo </a>并确保您已准备好以下工具:</p><ul class=""><li id="4cd5" class="mb mc in la b lb lw lf lx lj md ln me lr mf lv mg mh mi mj bi translated">Docker:用于 docker 映像和部署</li><li id="fd62" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">Minikube:当地的 Kubernetes 环境</li><li id="6fdd" class="mb mc in la b lb mk lf ml lj mm ln mn lr mo lv mg mh mi mj bi translated">kubectl:如果你有 mac OS，安装 Kubernetes-cli</li></ul><p id="3677" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">您应该对 Java 编程语言及其工具足够熟悉。</p><h1 id="cf97" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">将 Spring Boot 应用程序部署到 Kubernetes 的步骤</h1><p id="e05f" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">让我们详细分解每个步骤。在这里，我们将部署一个 spring boot 应用程序，最终得到一个可伸缩的、高效的<a class="ae jz" href="https://kubernetes.io/docs/tasks/run-application/" rel="noopener ugc nofollow" target="_blank"> Kubernetes 应用程序</a>。</p><h1 id="c592" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤 1:初始化 Spring Boot 应用程序设置</h1><p id="2599" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">第一步是建立一个 Spring Boot 应用程序。开始使用<a class="ae jz" href="https://start.spring.io/" rel="noopener ugc nofollow" target="_blank"> Spring Initializr </a> web 应用程序并执行以下步骤。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/9b0a7e596ea560a446c096cdd110a0ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4Hb7LVH3HhTBoWpG"/></div></div></figure><p id="90c8" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">来源:<a class="ae jz" href="https://spring.io/quickstart" rel="noopener ugc nofollow" target="_blank">弹簧</a></p><p id="b32d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">单击“生成项目”按钮，几分钟后，它将下载新项目及其依赖项。在这里，您可以看到“添加依赖项”选项，这意味着选择 Spring Web，以便您可以直接开始编写 Hello World REST API。</p><p id="dd9f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">让我们编写 Hello World REST API</p><p id="1886" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">现在您已经有了 Spring Boot 安装程序，用您的 IDE 打开项目文件夹并创建另一个名为 Application 的文件夹。kt 并添加以下代码:</p><p id="3163" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">包 com . bael dung . demosprinboot . controller</p><p id="5314" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">导入 org . spring framework . web . bind . annotation . get mapping</p><p id="fec5" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">导入 org . spring framework . web . bind . annotation . rest controller</p><p id="4a98" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">@RestController</p><p id="6066" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">类别应用程序{</p><p id="d23f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">@GetMapping("/")</p><p id="60ae" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">fun home(): String {</p><p id="ebeb" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">返回“Hello World”；</p><p id="03ab" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi">}</p><p id="0668" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi">}</p><p id="aca9" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io"> 1.2 构建并运行应用</strong></p><p id="b4b5" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">现在你必须有一个内嵌 Gradle 的 zip 文件，为了构建和运行应用程序，确保你在正确的路径上，写下下面的代码，</p><p id="08c7" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">~/code/demos/demo-spring-boot master &gt;。/gradlew 版本</p><p id="521b" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">启动一个 Gradle 守护进程(后续构建会更快)</p><p id="1172" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">&gt;任务:测试</p><p id="fa2c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">2020–11–29 20:44:55.227 INFO 43582—[extShutdownHook]o . s . s . concurrent . threadpooltasktexecutor:正在关闭 ExecutorService ' applicationtasktexecutor '</p><p id="dcf6" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">8s 内构建成功</p><p id="f58c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">7 项可行任务:3 项已执行，4 项最新</p><p id="caaa" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">之后，您将在 build/libs 下得到一个 jar 文件。您可以使用 java-jar build/libs/ <your-app>来运行它。您的设置将显示 Spring 横幅和以下消息:</your-app></p><p id="1062" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">demosborimpootapplicationkt:在 1.492 秒内启动了 demosborimpootapplicationkt(JVM 运行时间为 1.852)</p><p id="03d1" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">现在去 localhost:8080 看“Hello World”。</p><h1 id="77d2" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤 2:创建 Docker 图像</h1><p id="a1e4" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">Kubernetes 只处理 Docker 图像。这意味着您需要首先对图像进行 Docker 化，以便将它们推送到 Docker 注册表中。您可以在应用程序中创建 Docker 图像，并要求 Kubernetes 启动您已经创建的图像的一个或多个实例。首先，从 Spring Boot 服务中创建一个图像。运行以下命令获取 Docker 映像:</p><p id="24df" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">-“依赖性”:</p><p id="0843" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">- "BOOT-INF/lib/dependency1.jar "</p><p id="4bb5" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">- "BOOT-INF/lib/dependency2.jar "</p><p id="48ca" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">-“弹簧靴加载器”:</p><p id="a03c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">- "org/"</p><p id="bdaa" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">-“快照依赖性”:</p><p id="d4fa" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">-" BOOT-INF/lib/dependency 3-snapshot . jar "</p><p id="3eb3" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">-" BOOT-INF/lib/dependency 4-snapshot . jar "</p><p id="6b21" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">-“应用”:</p><p id="638e" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">- "BOOT-INF/classes/"</p><p id="94ce" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">- "META-INF/"</p><p id="8d2d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">您还可以构建一个 Docker 映像，并借助 Spotify 开发的 Maven 插件将其推送到 Docker 注册表，因为它简单且易于实现。如果你想用 Maven 插件对图片进行分类，你必须通过下面的命令。</p><p id="3d89" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><project/></p><p id="a92b" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><build/></p><p id="b668" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><plugins/></p><p id="fcc0" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><plugin/></p><p id="ddbd" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><groupId> org.springframework.boot </groupId></p><p id="ef3d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><artifactId> spring-boot-maven-plugin </artifactId></p><p id="a0ee" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><version> {gradle-project-version} </version></p><p id="537d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><configuration/></p><p id="895d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><layers/></p><p id="3446" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><enabled>真</enabled></p><p id="8bc6" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"/><p id="f3aa" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"/><p id="c1ab" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"/><p id="63dd" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"/><p id="577d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"/><p id="9509" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"/><p id="fe1a" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">安装完成后，在匿名浏览器中打开 localhost: 8080 并检查以下消息:</p><p id="f220" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">你好，来自库伯内特的世界！</p><p id="37a4" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">现在，最后一步是通过运行以下命令将 Docker 映像推送到 repo:</p><p id="4ee8" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io"> $ docker 推送 myrepo/bi-admin </strong></p><p id="7a55" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">现在我们有了 Docker 映像，可以直接创建一个 Kubernetes 环境来实现这些映像。</p><h1 id="413e" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">第三步:在本地安装 Kubernetes(你也可以称之为 Minikube)</h1><p id="8f10" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">根据<a class="ae jz" href="https://kubernetes.io/docs/setup/minikube/" rel="noopener ugc nofollow" target="_blank"> Kubernetes 官网</a>，</p><p id="2893" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">Minikube 是一个强大的工具，让您可以轻松地在本地运行 Kubernetes。如果你想了解更多关于 Minikube 的信息，可以访问它在 GitHub 上的项目页面。在这里，您还将了解如何在 Windows、Linux 或 macOS 上安装和设置 Kubernetes。这里还需要 Kubectl，这是一个命令行工具，可以帮助您在 Kubernetes 上快速部署应用程序。键入以下命令开始使用 Kubernetes，</p><p id="3a63" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated"><strong class="la io"> Minikube 启动</strong></p><p id="4ab6" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在这之后，你也可以使用 Kubernetes 仪表板，你会看到下面的图像</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/a9ba61489e50c02cdc010ed499ae4f92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g9KS1riLriUYr-sy"/></div></div></figure><p id="d167" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">来源:<a class="ae jz" href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a></p><h1 id="361a" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤 4:将应用程序部署到 Kubernetes</h1><p id="9f46" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">这是要执行的最后一步。所有的 Kubernetes 配置通常以 YAML 格式编写，这样所有的 Kubernetes 配置都可以被人类阅读。大多数开发人员使用 YAML 而不是 JSON。现在我们有了 docker 映像，已经在本地环境中设置了 Kubernetes。现在是时候在 Kubernetes 集群上部署应用程序了。为此，创建部署配置文件，该文件包括关于应用程序应该如何执行的配置。</p><p id="0f69" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">有了文件夹后，运行下面的命令，</p><p id="6c3b" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">apiVersion: apps/v1</p><p id="55b4" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">种类:部署</p><p id="ed5f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">元数据:</p><p id="7fcd" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">名称:kubernetesdemo</p><p id="61c2" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">标签:</p><p id="6e7f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">应用程序:kubernetesdemo</p><p id="2e6b" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">规格:</p><p id="077b" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">副本:1</p><p id="000d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">选择器:</p><p id="0ab8" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">匹配标签:</p><p id="1cae" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">应用程序:kubernetesdemo</p><p id="e468" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">规格:</p><p id="0bee" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">容器:</p><p id="5fe7" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">-名称:kubernetesdemo</p><p id="c29d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">图片:yolanv/kubernetsdemo</p><p id="6703" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">端口:</p><p id="1d3f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">-集装箱港口:8080</p><p id="bba0" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在部署应用程序时，您将面临许多问题。让我们分解每一行代码，以便您可以正确理解它。前两行代码都是关于您正在使用的 API 版本以及正在使用的 Kubernetes 对象的种类。然后，3-6 行代码告诉元数据标签，这样程序员就可以很容易地知道他们正在开发哪个应用程序。</p><p id="b030" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">其余的代码行解释了容器是如何制作的，以及可以运行哪些图像。这里的图像是指我们在步骤 2 中创建的 docker 图像。最后一部分是告诉集装箱应该遵循的端口，在本例中是 8080。</p><p id="280f" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">这里你的工作还没有完成。您已经部署了该应用，但无法在群集外访问它。因此，您需要创建一个“桥梁”，使外部访问成为可能。那么如何做到这一点。别担心，我们有 Kubernetes 服务。</p><p id="b0a7" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">在这里，您需要创建服务，以便最终用户可以访问应用程序。按照下面的命令创建服务</p><p id="07a9" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">sudo ku bectl expose deployment/mykubernetes-spring boot-type = " node port "-端口 8080</p><p id="820d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">上述命令背后的公式是，我们希望外界通过 NodePort 访问该应用程序。一旦你执行了上面的命令，你的屏幕上会出现一条消息“service ' mykubernetes-spring boot ' exposed”，这意味着这个应用程序现在可以被任何人使用。</p><p id="cd74" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">现在是时候访问您的应用程序了。请记住，该应用程序位于一个 Pod 中，我们已经创建了一个允许我们从集群外部使用该应用程序的服务。现在访问您的浏览器，键入带有 Hello 的 IP，您将看到应用程序被顺利部署，并且可以从集群外部访问。</p><p id="682d" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">恭喜你！这里，您已经在 Kubernetes 中部署了一个简单的 spring root 应用程序。</p><h1 id="ad8e" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="e35f" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">我们希望本指南能够帮助您将 Spring Boot 应用程序部署到 Kubernetes。在这里，我们讨论了 Spring boot 应用程序和 Kubernetes 的概述，如何创建 docker 映像以及如何部署 Kubernetes 服务。那么，你还在等什么？立即开始部署您的应用程序。</p><p id="862c" class="pw-post-body-paragraph ky kz in la b lb lw ld le lf lx lh li lj ly ll lm ln lz lp lq lr ma lt lu lv ig bi translated">这篇深入的文章由 Brijesh Vadukia 撰写和分享，他是 Elluminatiinc.com 的营销官，喜欢帮助品牌在全球数字世界中推广他们的业务。</p></div></div>    
</body>
</html>