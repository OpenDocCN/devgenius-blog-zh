<html>
<head>
<title>Writing a wrapper for console.log for better control in Angular, Part II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä¸º console.log ç¼–å†™åŒ…è£…å™¨ä»¥æ›´å¥½åœ°æ§åˆ¶ Angularï¼Œç¬¬äºŒéƒ¨åˆ†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/writing-a-wrapper-for-console-log-for-better-control-in-angular-part-ii-5b09b65af2c5?source=collection_archive---------7-----------------------#2022-05-12">https://blog.devgenius.io/writing-a-wrapper-for-console-log-for-better-control-in-angular-part-ii-5b09b65af2c5?source=collection_archive---------7-----------------------#2022-05-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7456" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">é©¯æœæ§åˆ¶å°</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/2f0c0fd072b0229e5c1ab8d11b7ee739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6XGoHoszM7tI_jO3YnDCXw.png"/></div></div></figure><p id="2f60" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">æ¥ç€æ˜¯æˆ‘ä»¬çš„<a class="ae lk" href="https://garage.sekrab.com/posts/writing-a-wrapper-for-console-log-for-better-control-in-javascript-part-i" rel="noopener ugc nofollow" target="_blank">æ§åˆ¶å°åŒ…è£…å™¨</a>ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä¸“é—¨åœ¨ Angular åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚è¯¥è®°å½•åœ¨<code class="fe ll lm ln lo b">RxJS</code>ç®¡é“å’Œé”™è¯¯è®°å½•ä¸­å¾ˆæœ‰ç”¨ã€‚</p><p id="f27f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬å°†è„šæœ¬æ·»åŠ åˆ°<strong class="kq io">èµ„äº§</strong>ä¸­ï¼Œå¹¶åœ¨<code class="fe ll lm ln lo b">typings.d.ts</code>ä¸­å£°æ˜å®ƒ(å¦‚å‰æ–‡ä¸­æ‰€è¿°)ã€‚</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="2f0b" class="lt lu in lo b gy lv lw l lx ly">{<br/> "projects": {<br/>   "main": {<br/>     "architect": {<br/>       "build": {<br/>         "options": {<br/>           "scripts": [<br/>             // add the script however you wish<br/>              {<br/>                "input": "src/assets/js/console.js",<br/>                "bundleName": "script"<br/>              }<br/>            ]<br/>         }<br/>       }<br/>     }<br/>   }<br/> }<br/>}</span></pre><p id="991a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">è¿™åœ¨ SSR è¿è¡Œæ—¶ï¼Œä¼šåœ¨æœåŠ¡å™¨ç«¯å‡ºé”™ï¼Œæˆ‘ä»¬ç¨åä¼šä¿®å¤å®ƒã€‚</p><blockquote class="lz ma mb"><p id="1450" class="ko kp mc kq b kr ks jo kt ku kv jr kw md ky kz la me lc ld le mf lg lh li lj ig bi translated"><em class="in">æœ€ç»ˆé¡¹ç›®åœ¨</em><a class="ae lk" href="https://stackblitz.com/edit/angular-console-wrapper?file=src/app/core/rxjsops.ts" rel="noopener ugc nofollow" target="_blank"><em class="in">stack blitz</em></a>ä¸Š</p></blockquote><h1 id="0383" class="mg lu in bd mh mi mj mk ml mm mn mo mp jt mq ju mr jw ms jx mt jz mu ka mv mw bi translated">è§’åº¦è¯¯å·®å¤„ç†</h1><p id="44a7" class="pw-post-body-paragraph ko kp in kq b kr mx jo kt ku my jr kw kx mz kz la lb na ld le lf nb lh li lj ig bi translated">Angular ä¸­çš„é»˜è®¤é”™è¯¯å¤„ç†ç¨‹åºè®°å½•æœªå¤„ç†çš„é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è‡ªå·±çš„<a class="ae lk" href="https://angular.io/api/core/ErrorHandler" rel="noopener ugc nofollow" target="_blank">é”™è¯¯å¤„ç†ç¨‹åº</a>(åœ¨æ ¹åº”ç”¨ç¨‹åºæ¨¡å—ä¸­æä¾›)è¦†ç›–å®ƒ:</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="6c73" class="lt lu in lo b gy lv lw l lx ly">@Injectable()<br/>export class OurErrorHandler implements ErrorHandler {<br/>    handleError(error: any) {<br/>      _debug(error, 'Unhandled Error', 'e');<br/>    }<br/>}</span></pre><h1 id="af48" class="mg lu in bd mh mi mj mk ml mm mn mo mp jt mq ju mr jw ms jx mt jz mu ka mv mw bi translated">ä¸ RxJS ä¸€èµ·ä½¿ç”¨</h1><p id="e179" class="pw-post-body-paragraph ko kp in kq b kr mx jo kt ku my jr kw kx mz kz la lb na ld le lf nb lh li lj ig bi translated">æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª<a class="ae lk" href="https://medium.com/javascript-everyday/rxjs-custom-operators-f8b9aeab9631" rel="noopener">è‡ªå®šä¹‰æ“ä½œç¬¦</a>,åœ¨ç®¡é“ä¸­è¾“å‡ºæ¶ˆæ¯:</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="870f" class="lt lu in lo b gy lv lw l lx ly">export const debug = (message: string, type?: string): MonoTypeOperatorFunction&lt;any&gt;  =&gt; {<br/>  return pipe(<br/>    tap(nextValue =&gt; {<br/>       _debug(nextValue, message, type);<br/>    })<br/>  );<br/>};</span><span id="5a74" class="lt lu in lo b gy nc lw l lx ly">// this is used with observables like this<br/>obs$.pipe(<br/>  debug('obs value')<br/>);</span></pre><p id="1229" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">åœ¨ä¹‹å‰ä¸€ç¯‡å…³äº Angular ä¸­åŸºäº<a class="ae lk" href="https://garage.sekrab.com/posts/rxjs-based-angular-state-management" rel="noopener ugc nofollow" target="_blank"> RxJS çš„çŠ¶æ€ç®¡ç†çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª state çš„åŸºç±»ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ debug è¯­å¥æ¥æ›´æ–°å®ƒï¼Œä»¥è®°å½•æ‰€æœ‰çš„çŠ¶æ€è¿›åº¦ã€‚åœ¨<code class="fe ll lm ln lo b">StateService</code>:</a></p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="6a2b" class="lt lu in lo b gy lv lw l lx ly">export class StateService&lt;T&gt;  {<br/> protected stateList: BehaviorSubject&lt;T[]&gt; = new BehaviorSubject([]);<br/> stateList$: Observable&lt;T[]&gt; = this.stateList<br/>    .asObservable()<br/>    // pipe to debug the constructor used, like ParamState, or TransactionState<br/>    .pipe(debug(this.constructor.name));<br/>}</span></pre><p id="2f53" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ç°åœ¨ï¼Œä»»ä½•çŠ¶æ€æ›´æ–°éƒ½å°†è®°å½•åœ¨æ§åˆ¶å°ä¸­ã€‚</p><h1 id="3980" class="mg lu in bd mh mi mj mk ml mm mn mo mp jt mq ju mr jw ms jx mt jz mu ka mv mw bi translated">Http æ‹¦æˆªå™¨</h1><p id="8cf4" class="pw-post-body-paragraph ko kp in kq b kr mx jo kt ku my jr kw kx mz kz la lb na ld le lf nb lh li lj ig bi translated">åœ¨ devTools è°ƒè¯•ä¸­ï¼Œä¼šè®°å½•ç½‘ç»œå¤±è´¥çš„å°è¯•ï¼Œæ˜¾ç¤ºå®Œæ•´çš„ URLï¼Œä½†ä¸ä¼šè®°å½•æˆåŠŸçš„å°è¯•ã€‚è®©æˆ‘ä»¬å°†è°ƒè¯•æ“ä½œç¬¦æ·»åŠ åˆ°<code class="fe ll lm ln lo b">HttpInterceptor</code>ä¸­ï¼Œä»¥æˆ‘ä»¬å–œæ¬¢çš„æ–¹å¼è®°å½•æ‰€æœ‰æ•°æ®ï¼Œ<em class="mc">è¿™æ˜¯å¿…é¡»çš„æ–¹å¼</em>ğŸ˜‰</p><blockquote class="lz ma mb"><p id="c755" class="ko kp mc kq b kr ks jo kt ku kv jr kw md ky kz la me lc ld le mf lg lh li lj ig bi translated"><strong class="kq io"> <em class="in">ã€æ–¹æ³•ã€‘ã€ç½‘å€ã€‘ã€å“åº”æ­£æ–‡ã€‘</em> </strong></p></blockquote><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="e78b" class="lt lu in lo b gy lv lw l lx ly">@Injectable()<br/>export class OurInterceptor implements HttpInterceptor {<br/>  intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {</span><span id="d7f7" class="lt lu in lo b gy nc lw l lx ly">    // adjust req if needed<br/>    return next<br/>      .handle(req)<br/>      .pipe(<br/>        // pipe with req information, method, and url with params<br/>        debug(`${req.method} ${req.urlWithParams}`, 'p')<br/>      )<br/>    }<br/>}</span></pre><p id="0487" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">è®©æˆ‘ä»¬é‡å†™è°ƒè¯•æ“ä½œç¬¦æ¥å¤„ç†ä»¥ä¸‹å†…å®¹:</p><ul class=""><li id="76b4" class="nd ne in kq b kr ks ku kv kx nf lb ng lf nh lj ni nj nk nl bi translated">å¦‚æœ<code class="fe ll lm ln lo b">nextValue</code>æ˜¯<code class="fe ll lm ln lo b">HttpResponse</code>ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦è®°å½•<strong class="kq io">ä¸»ä½“</strong>ã€‚</li><li id="6ada" class="nd ne in kq b kr nm ku nn kx no lb np lf nq lj ni nj nk nl bi translated">æˆ‘ä»¬è¿˜éœ€è¦è¿‡æ»¤æ‰<code class="fe ll lm ln lo b">Sent</code>ç±»å‹çš„æ— ç”¨å€¼ã€‚é‚£æ˜¯ä¸€ä¸ªåœ¨æ¯ä¸ª http å“åº”ä¹‹å‰è®¾ç½®çš„äº‹ä»¶ï¼Œæ²¡æœ‰ä»€ä¹ˆä»·å€¼ï¼Œåœ¨å…¶ä»–å¯è§‚å¯Ÿåˆ°çš„åœ°æ–¹æ˜¯<code class="fe ll lm ln lo b">undefined</code>ã€‚</li></ul><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="5a39" class="lt lu in lo b gy lv lw l lx ly">export const debug = (message: string, type?: string): MonoTypeOperatorFunction&lt;any&gt;  =&gt; {<br/>     return pipe(<br/>        tap(nextValue =&gt; {<br/>            let value = nextValue;</span><span id="0680" class="lt lu in lo b gy nc lw l lx ly">            if (nextValue instanceof HttpResponse) {<br/>                // value is the body<br/>                value = nextValue.body;<br/>            }<br/>            // just filter out the sent event<br/>            if (nextValue &amp;&amp; &lt;any&gt;nextValue.type !== HttpEventType.Sent){<br/>                _debug(value, message, type);<br/>            }</span><span id="3dff" class="lt lu in lo b gy nc lw l lx ly">        })<br/>    );<br/>};</span></pre><p id="2a2e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ç°åœ¨æˆ‘çš„æ—¥å¿—çœ‹èµ·æ¥åƒè¿™æ ·</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nr"><img src="../Images/c432620d0b3376623d0e97af4e9dc8c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VrlKmt9iJUiGNiw8.png"/></div></div></figure><p id="634d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">åœ¨å‘ç”Ÿ<code class="fe ll lm ln lo b">PUT</code>æˆ–<code class="fe ll lm ln lo b">POST</code>äº‹ä»¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ Http æ‹¦æˆªå™¨ä¸­è®°å½•è¯·æ±‚<code class="fe ll lm ln lo b">body</code>:</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="b8ba" class="lt lu in lo b gy lv lw l lx ly">@Injectable()<br/>export class OurInterceptor implements HttpInterceptor {<br/>  intercept(<br/>    req: HttpRequest&lt;any&gt;,<br/>    next: HttpHandler<br/>  ): Observable&lt;HttpEvent&lt;any&gt;&gt; {</span><span id="9883" class="lt lu in lo b gy nc lw l lx ly">    // log request body, prefix to distinguish or create a new console type<br/>    if (req.body) {<br/>      _debug(req.body, `Request: ${req.method} ${req.urlWithParams}`, 'p');<br/>    }</span><span id="8dfe" class="lt lu in lo b gy nc lw l lx ly">    return next.handle(adjustedReq).pipe(<br/>     //...<br/>    );<br/>  }<br/>}</span></pre><p id="ad18" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">æ—¥å¿—çœ‹èµ·æ¥åƒè¿™æ ·</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ns"><img src="../Images/2e9317a933cdc1393ab0db3ee3a4e32a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2x5yMHdVZKu1lZqr.png"/></div></div></figure><p id="adf4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">è®©æˆ‘ä»¬æ›´ä¸Šä¸€å±‚æ¥¼ã€‚è®©æˆ‘ä½¿ç”¨<code class="fe ll lm ln lo b">tap</code>æ‰©å±•å›è°ƒæ¥è®°å½• Http é”™è¯¯ï¼Œå°±åƒè¿™æ ·:</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="7e18" class="lt lu in lo b gy lv lw l lx ly">export const debug = (message: string, type?: string): MonoTypeOperatorFunction&lt;any&gt; =&gt; {<br/>  return pipe(<br/>    tap({<br/>      next: (nextValue) =&gt; {<br/>        let value = nextValue;</span><span id="e31c" class="lt lu in lo b gy nc lw l lx ly">        if (nextValue instanceof HttpResponse) {<br/>          // value is the body<br/>          value = nextValue.body;<br/>        }<br/>        // just filter out the sent event<br/>        if (nextValue &amp;&amp; &lt;any&gt;nextValue.type !== HttpEventType.Sent) {<br/>          _debug(value, message, type);<br/>        }<br/>      },<br/>      error: (error) =&gt; {<br/>        // in error, log erros, check for pecific type of http response errors<br/>        let value = error;<br/>        if (error instanceof HttpErrorResponse) {<br/>          value = `${error.status} ${error.message}`;<br/>        }<br/>        _debug(value, message, 'e');<br/>      },<br/>    })<br/>  );<br/>};</span></pre><p id="6d8b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">åœ¨å‘æ‚¨å±•ç¤ºæ—¥å¿—ä¹‹å‰ï¼Œæˆ‘å›åˆ°äº†æˆ‘ä»¬ä¸Šå‘¨æ„å»ºçš„<a class="ae lk" href="https://garage.sekrab.com/posts/gtm-tracking-service-in-angular" rel="noopener ugc nofollow" target="_blank"> GTM è§’åº¦æœåŠ¡</a>ï¼Œå¹¶ä¸”æ·»åŠ äº†ä¸€ä¸ª<code class="fe ll lm ln lo b">_debug</code>è¯­å¥:</p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="1c4c" class="lt lu in lo b gy lv lw l lx ly">// GTM service updated from a previous post<br/>export class GtmTracking {<br/>  // ...<br/>  public static RegisterEvent(track: IGtmTrack, extra?: any): void {<br/>    let data = {<br/>      event: track.event, gr_track: {<br/>        source: track.source,<br/>        ...extra<br/>      }<br/>    };<br/>    // add a special type of log here<br/>    _debug(data, 'register event', 'gtm');<br/>    this.Push(data)<br/>  }</span><span id="b0ed" class="lt lu in lo b gy nc lw l lx ly">  public static SetValues(values: any): void {<br/>    let data = {<br/>      gr_values: { ...values }<br/>    };<br/>    // and here:<br/>    _debug(data, 'Set GA value', 'gtm');<br/>    this.Push(data);<br/>  }<br/>}</span></pre><p id="3520" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">åœ¨<code class="fe ll lm ln lo b">ErrorService</code>ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†<strong class="kq io"> GTM æ³¨å†Œäº‹ä»¶</strong>ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªçœ‹èµ·æ¥ä¸é”™çš„æ§åˆ¶å°æ—¥å¿—:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/58a7c10ba81c6ad0f092bd9d66015c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LFAwxda2fHDNnpaK.png"/></div></div></figure><p id="b947" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">é”™è¯¯å¯¹è±¡å¯ä»¥è¿›ä¸€æ­¥å¢å¼ºï¼Œä½†é‚£æ˜¯ä¸åŒçš„ä¸»é¢˜ï¼Œä¸åŒçš„æ–‡ç« ã€‚</p><h1 id="9f58" class="mg lu in bd mh mi mj mk ml mm mn mo mp jt mq ju mr jw ms jx mt jz mu ka mv mw bi translated">æ§åˆ¶å°è¿‡æ»¤è§†å›¾</h1><p id="5021" class="pw-post-body-paragraph ko kp in kq b kr mx jo kt ku my jr kw kx mz kz la lb na ld le lf nb lh li lj ig bi translated">æˆ‘çš„<code class="fe ll lm ln lo b">console.log</code>é”™è¯¯è€Œä¸æ˜¯<code class="fe ll lm ln lo b">console.error</code>é”™è¯¯æ˜¯æœ‰åŸå› çš„ï¼Œé‚£å°±æ˜¯ï¼›æŠŠæ§åˆ¶å°è¿‡æ»¤æˆ<strong class="kq io"> info </strong>æ¶ˆæ¯ï¼Œ<strong class="kq io">å¿˜è®°åˆ‡æ¢å›æ‰€æœ‰æ¶ˆæ¯çš„åä¹ æƒ¯ã€‚</strong>æ³¨æ„åŠ›æŒç»­æ—¶é—´ä¸æ–­ç¼©çŸ­ã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šé”™è¿‡é”™è¯¯ï¼Œé€€ä¼‘åæˆ‘ä»¬ä¹Ÿèƒ½äº«å—ä¸€äº›ç†æ™ºã€‚</p><p id="aecb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe ll lm ln lo b">_attn</code>æ˜¯ä¸ºäº†<strong class="kq io">å–ä»£é€šå¸¸çš„ console.log </strong>è€Œç‰¹æ„åˆ›å»ºçš„ï¼Œè°ƒç”¨<code class="fe ll lm ln lo b">_attn</code>çš„è¾“å‡ºæ˜¾ç¤ºåœ¨æ§åˆ¶å°<strong class="kq io">è¯¦ç»†æ—¥å¿—</strong>ä¸‹ï¼Œå®ƒä»¬çœ‹èµ·æ¥å¾ˆäº®ï¼Œäº®åˆ°è¶³ä»¥è®©æˆ‘ä»¬è®°å¾—åœ¨æ„å»ºä¹‹å‰åˆ é™¤å®ƒä»¬ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æœªèƒ½åˆ é™¤å®ƒä»¬ï¼Œæ²¡å…³ç³»ï¼Œå®ƒä»¬æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šåœ¨ç”Ÿäº§ä¸­æ˜¾ç¤ºã€‚</p><p id="237d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">è¿™ä¼šå½±å“æ€§èƒ½å—ï¼Ÿä¸æ˜¯åœ¨ 99%çš„åº”ç”¨ä¸­(99%å°±åƒæ˜¯è¯´ä¸–ç•Œçš„ä¸€åŠï¼Œä¸æ˜¯ä¸€ä¸ªçœŸå®çš„ç»Ÿè®¡æ•°æ®)ã€‚</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/6cf907d45c12c2137e1cfbb5ca3b902b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GtwDY0rd0fXCJbNy.png"/></div></div></figure><h1 id="b66c" class="mg lu in bd mh mi mj mk ml mm mn mo mp jt mq ju mr jw ms jx mt jz mu ka mv mw bi translated">æœåŠ¡å™¨å¹³å°æ—¥å¿—</h1><p id="c489" class="pw-post-body-paragraph ko kp in kq b kr mx jo kt ku my jr kw kx mz kz la lb na ld le lf nb lh li lj ig bi translated">ä½¿ç”¨çš„è„šæœ¬æ˜¯æ·»åŠ åˆ° build ä¸­çš„ JavaScriptï¼Œå¹¶åœ¨<code class="fe ll lm ln lo b">index.html</code>ä¸­æ³¨å…¥ã€‚è¿™æ˜¯æ•…æ„çš„ï¼Œå› ä¸ºæˆ‘ä¸å¸Œæœ›æ¯æ¬¡ä½¿ç”¨æ—¶éƒ½ä½¿ç”¨<strong class="kq io"/><code class="fe ll lm ln lo b"><strong class="kq io">import</strong></code><strong class="kq io">ã€‚è¿™ç§æ–¹æ³•è¿˜æœ‰å¦å¤–ä¸€ä¸ªå¥½å¤„ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¿®å¤æœåŠ¡å™¨å¹³å°ä¸è¿è¡Œçš„é—®é¢˜ï¼Œå› ä¸ºé‚£äº›æ–¹æ³•åœ¨<strong class="kq io"> NodeJS </strong>ä¸­ä¸å­˜åœ¨ã€‚è¿™æ˜¯é€šè¿‡åœ¨ NodeJS <code class="fe ll lm ln lo b">global</code>å¯¹è±¡ä¸­å®šä¹‰è¿™äº›å‡½æ•°æ¥å®ç°çš„ã€‚NodeJS <strong class="kq io"> express æœåŠ¡å™¨</strong>åº”è¯¥åŒ…å«ä»¥ä¸‹å†…å®¹</strong></p><pre class="kd ke kf kg gt lp lo lq lr aw ls bi"><span id="8b58" class="lt lu in lo b gy lv lw l lx ly">// fix NodeJs server running SSR<br/>global._debug = function (o, message, type) {<br/>  if(process.env.NODE_ENV !== 'production') {<br/>    console.log(message, o);<br/>  }<br/>};<br/>global._attn = function (o, message) {<br/> if(process.env.NODE_ENV !== 'production') {<br/>    console.log(message, o);<br/>  }<br/>}</span></pre><p id="08a3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ„å»ºä¹‹åã€éƒ¨ç½²ä¹‹å‰åœ¨æœåŠ¡å™¨ä¸Šæ˜¾ç¤ºæ¶ˆæ¯ã€‚<strong class="kq io">æ‰“å¼€æˆ–å…³é—­ï¼Œæ— éœ€é‡å»º</strong>ã€‚è¯­å¢ƒä¸ºç‹ï¼Œåˆ†ç¦»æ˜¯æ–°å¥³ç‹ã€‚</p><p id="c95a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">è°¢è°¢ä½ è¯»åˆ°è¿™é‡Œã€‚å¦‚æœæˆ‘ç©é”™äº†ç‰Œï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚</p><h1 id="6965" class="mg lu in bd mh mi mj mk ml mm mn mo mp jt mq ju mr jw ms jx mt jz mu ka mv mw bi translated">èµ„æº</h1><ul class=""><li id="abfc" class="nd ne in kq b kr mx ku my kx nv lb nw lf nx lj ni nj nk nl bi translated"><a class="ae lk" href="https://angular.io/guide/http#intercepting-requests-and-responses" rel="noopener ugc nofollow" target="_blank">è§’åº¦ Http æŒ‡å—</a></li><li id="6bff" class="nd ne in kq b kr nm ku nn kx no lb np lf nq lj ni nj nk nl bi translated"><a class="ae lk" href="https://angular-console-wrapper.stackblitz.io/" rel="noopener ugc nofollow" target="_blank"> StackBlitz åº”ç”¨ç¨‹åº(æŸ¥çœ‹å¼€å‘å·¥å…·æ§åˆ¶å°)</a></li></ul><p id="5289" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">ä¹Ÿå‘è¡¨åœ¨<a class="ae lk" href="https://garage.sekrab.com/posts/writing-a-wrapper-for-console-log-for-better-control-in-angular-part-ii" rel="noopener ugc nofollow" target="_blank"> Sekrab è½¦åº“</a></p><h2 id="8a63" class="lt lu in bd mh ny nz dn ml oa ob dp mp kx oc od mr lb oe of mt lf og oh mv oi bi translated">æ§åˆ¶å°ç³»åˆ—</h2><ul class=""><li id="c5f3" class="nd ne in kq b kr mx ku my kx nv lb nw lf nx lj ni nj nk nl bi translated"><a class="ae lk" href="https://medium.com/@aayyash/writing-a-wrapper-for-console-log-for-better-control-in-javascript-part-i-9bbd238fb9ad" rel="noopener">ä¸º console.log ç¼–å†™ä¸€ä¸ªåŒ…è£…å™¨ä»¥æ›´å¥½åœ°æ§åˆ¶ JavaScriptï¼Œç¬¬ä¸€éƒ¨åˆ†</a></li><li id="a72b" class="nd ne in kq b kr nm ku nn kx no lb np lf nq lj ni nj nk nl bi translated"><a class="ae lk" rel="noopener ugc nofollow" target="_blank" href="/writing-a-wrapper-for-console-log-for-better-control-in-angular-part-ii-5b09b65af2c5">ä¸º console.log ç¼–å†™ä¸€ä¸ªåŒ…è£…å™¨ä»¥æ›´å¥½åœ°æ§åˆ¶ Angularï¼Œç¬¬äºŒéƒ¨åˆ†</a></li><li id="c9e8" class="nd ne in kq b kr nm ku nn kx no lb np lf nq lj ni nj nk nl bi translated"><a class="ae lk" href="https://medium.com/@aayyash/catching-and-handling-errors-in-angular-3ac6b95853ba" rel="noopener">æ•æ‰å’Œå¤„ç†è§’åº¦è¯¯å·®</a></li><li id="eb11" class="nd ne in kq b kr nm ku nn kx no lb np lf nq lj ni nj nk nl bi translated"><a class="ae lk" rel="noopener ugc nofollow" target="_blank" href="/catching-and-displaying-ui-errors-with-toast-messages-in-angular-db06f2605a6d">ç”¨ toast æ¶ˆæ¯æ•è·å¹¶æ˜¾ç¤º UI é”™è¯¯</a></li><li id="34be" class="nd ne in kq b kr nm ku nn kx no lb np lf nq lj ni nj nk nl bi translated"><a class="ae lk" href="https://medium.com/@aayyash/auto-hiding-a-toast-message-in-angular-54f886ad6129" rel="noopener">è‡ªåŠ¨éšè—æœ‰è§’åº¦çš„ç¥é…’è¾</a></li></ul></div></div>    
</body>
</html>