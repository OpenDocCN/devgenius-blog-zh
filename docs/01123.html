<html>
<head>
<title>JavaScript Tips — Converting Byte Sizes, Removing Blank Attributes, and More</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript技巧—转换字节大小、删除空白属性等等</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-tips-converting-byte-sizes-removing-blank-attributes-and-more-83c9ffd1c64d?source=collection_archive---------34-----------------------#2020-06-24">https://blog.devgenius.io/javascript-tips-converting-byte-sizes-removing-blank-attributes-and-more-83c9ffd1c64d?source=collection_archive---------34-----------------------#2020-06-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f886311c84d6e3b381b4f747d9995a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wWEqfhgGctlcFYB-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">谢尔盖·阿库利奇在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="6f5e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，当我们编写JavaScript应用程序时，有一些困难的问题需要解决。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究一些常见JavaScript问题的解决方案。</p><h1 id="ea49" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">DOMContentLoaded和Load事件之间的区别</h1><p id="6d6a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">DOMContentLoaded和load事件是有区别的。</p><p id="9906" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">DOMContentLoaded事件在文档加载和解析时被触发，无需等待样式表、图像和子框架等资源完成加载。</p><p id="5525" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">load事件等待所有内容完成加载。</p><h1 id="105f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">变量前的加号</h1><p id="f931" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">+</code>操作符将非数字变量转换成数字。</p><p id="6ea8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d871" class="mq lc iq mh b gy mr ms l mt mu">const str = '123';<br/>const num = +str;</span></pre><p id="6f2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">num</code>就是123。</p><h1 id="2110" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">确定字符串是否在JavaScript的数组中</h1><p id="3ad4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">indexOf</code>方法来检查一个字符串是否在数组中。</p><p id="28b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="45cd" class="mq lc iq mh b gy mr ms l mt mu">['foo', 'bar', 'baz'].indexOf(str) &gt; -1</span></pre><p id="7480" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以调用<code class="fe me mf mg mh b">indexOf</code>来检查<code class="fe me mf mg mh b">str</code>是否包含在<code class="fe me mf mg mh b">['foo', 'bar', 'baz']</code>数组中。</p><p id="e75d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果不在数组中，返回-1，如果在数组中，返回索引。</p><p id="05bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们可以使用<code class="fe me mf mg mh b">includes</code>方法来做同样的事情:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a0f4" class="mq lc iq mh b gy mr ms l mt mu">['foo', 'bar', 'baz'].includes(str)</span></pre><p id="9a25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果包含，则返回<code class="fe me mf mg mh b">true</code>，如果不包含，则返回<code class="fe me mf mg mh b">false</code>。</p><h1 id="e2ab" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将字节大小转换为KB、MB、GB等。在JavaScript中</h1><p id="2c8b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们把字节的大小转换成KB，MB等。用字节数的1024次方除以我们要转换的单位的次方。</p><p id="a62b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b01d" class="mq lc iq mh b gy mr ms l mt mu">const formatBytes = (bytes, decimals) =&gt; {<br/>  if (bytes == 0) {<br/>    return "0 Byte";<br/>  }<br/>  const k = 1024;<br/>  const sizes = ["Bytes", "KB", "MB", "GB", "TB", "PB"];<br/>  const i = Math.floor(Math.log(bytes) / Math.log(k));<br/>  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(decimals))} ${sizes[i]}`;<br/>}</span></pre><p id="2fd1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们返回的<code class="fe me mf mg mh b">'0 bytes'</code>是<code class="fe me mf mg mh b">bytes</code>是0。</p><p id="ad92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要将<code class="fe me mf mg mh b">bytes</code>转换为给定的单位，我们可以将它除以1024的幂。</p><p id="d43b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">i</code>是我们想要得到的<code class="fe me mf mg mh b">sizes</code>数组的索引，也是我们想要1024的指数。</p><p id="7ad7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们除以<code class="fe me mf mg mh b">1024</code>，我们得到以KB为单位的大小。</p><p id="b384" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们除以<code class="fe me mf mg mh b">1024 ** 2</code>，我们会得到以MB为单位的大小，以此类推。</p><p id="4f12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们得到了尺寸和相应的单位。</p><h1 id="41c5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">将JS文件包含在另一个JS文件中</h1><p id="aace" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过动态创建脚本标签将一个JS文件包含在另一个JS文件中。</p><p id="3c41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6214" class="mq lc iq mh b gy mr ms l mt mu">const script = document.createElement('script');<br/>script.src = '/path/to/script';<br/>document.head.appendChild(script);</span></pre><p id="8e38" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建脚本标签。</p><p id="358c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将它附加到<code class="fe me mf mg mh b">head</code>元素来加载脚本。</p><h1 id="76f0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在Javascript中移除对象的空白属性</h1><p id="5e4e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在JavaScript中，我们可以通过使用<code class="fe me mf mg mh b">Object.keys</code>方法获取键来删除对象的空白属性。</p><p id="51d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe me mf mg mh b">delete</code>删除值为空的键。</p><p id="2aa1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7d20" class="mq lc iq mh b gy mr ms l mt mu">for (const key of Object.keys(obj)) {<br/>  if (obj[key] === null || typeof obj[key] === 'undefined') {<br/>    delete obj[key];<br/>  }<br/>}</span></pre><p id="d476" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用for-of循环遍历这些键。</p><p id="5221" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在循环体中，我们检查<code class="fe me mf mg mh b">null</code>和<code class="fe me mf mg mh b">undefined</code>。</p><p id="99ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们使用<code class="fe me mf mg mh b">delete</code>删除值为<code class="fe me mf mg mh b">null</code>或<code class="fe me mf mg mh b">undefined</code>的属性。</p><h1 id="0e3a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">按带有日期值的单键对对象数组进行排序</h1><p id="b3f7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有一个属性是日期字符串的对象数组，我们可以使用<code class="fe me mf mg mh b">sort</code>方法按照日期字符串属性对数组进行排序。</p><p id="a160" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下数组:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="72e5" class="mq lc iq mh b gy mr ms l mt mu">const arr = [{<br/>    updatedAt: "2012-01-01T06:25:24Z",<br/>    foo: "bar"<br/>  },<br/>  {<br/>    updatedAt: "2012-01-09T11:25:13Z",<br/>    foo: "bar"<br/>  },<br/>  {<br/>    updatedAt: "2012-01-05T04:13:24Z",<br/>    foo: "bar"<br/>  }<br/>]</span></pre><p id="3e3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b3af" class="mq lc iq mh b gy mr ms l mt mu">const sorted = arr.sort((a, b) =&gt; {<br/>  const updatedAtA = new Date(a.updatedAt);<br/>  const updatedAtB = new Date(b.updatedAt);<br/>  return updatedAtA - updatedAtB;<br/>});</span></pre><p id="6c0b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个回调，减去<code class="fe me mf mg mh b">updatedAtA</code>和<code class="fe me mf mg mh b">updatedAtB</code>。</p><p id="c558" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是可行的，因为在它们被减去之前，它们首先被转换成它们的时间戳值。</p><p id="130b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们可以进行排序，因为将返回一个数字。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/c5913adc28f1432bf479c2dfb302cf27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3YzUKmOG8K4J_q3T"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@azganmjeshtri?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> AZGAN MjESHTRI </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="3333" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="fdeb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">DOMContentLoaded和load是不同的事件。</p><p id="88bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以直接对日期进行排序。</p><p id="9a7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">+</code>运算符可用于转换成数字。</p><p id="de90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过做一些除法把字节转换成不同的单位。</p></div></div>    
</body>
</html>