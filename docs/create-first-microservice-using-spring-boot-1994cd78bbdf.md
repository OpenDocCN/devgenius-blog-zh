# ä½¿ç”¨ Spring Boot åˆ›å»ºé¦–ä¸ªå¾®æœåŠ¡

> åŸæ–‡ï¼š<https://blog.devgenius.io/create-first-microservice-using-spring-boot-1994cd78bbdf?source=collection_archive---------4----------------------->

![](img/25816a2c6adfb5143597e5cc09df4ffe.png)

[åŸºå…°Â·ä¼å¾·](https://unsplash.com/@kieran_wood?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)åœ¨ [Unsplash](https://unsplash.com/s/photos/puzzle?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

è¯»å®Œæ ‡é¢˜åï¼Œä½ å¯èƒ½æƒ³çŸ¥é“ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Œä»¥åŠå®ƒä¸æ•´ä½“ Java ç¨‹åºçš„ä¸åŒä¹‹å¤„ã€‚å¦‚æœæˆ‘ä»¬ç ”ç©¶å¾®æœåŠ¡çš„å®šä¹‰ã€‚åŸºæœ¬ä¸Šï¼Œå¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„ã€‚

![](img/74c2a0f15315ac87d226a1fd90042206.png)

> **å¾®æœåŠ¡(æˆ–å¾®æœåŠ¡æ¶æ„)æ˜¯ä¸€ç§äº‘åŸç”Ÿæ¶æ„æ–¹æ³•ï¼Œå…¶ä¸­å•ä¸ªåº”ç”¨ç”±è®¸å¤šæ¾æ•£è€¦åˆä¸”å¯ç‹¬ç«‹éƒ¨ç½²çš„è¾ƒå°ç»„ä»¶æˆ–æœåŠ¡ç»„æˆ**

é‚£ä¹ˆä¸ºä»€ä¹ˆæ˜¯å¾®æœåŠ¡è€Œä¸æ˜¯ä½¿ç”¨ monolith ç¨‹åºå‘¢ï¼Ÿ

*   ***æ›´å®¹æ˜“æ„å»ºå’Œç»´æŠ¤åº”ç”¨*** â€”å¾®æœåŠ¡çš„å…³é”®åŸåˆ™æ˜¯ç®€å•ã€‚å½“åº”ç”¨ç¨‹åºè¢«åˆ†å‰²æˆä¸€ç»„æ›´å°çš„ã€å¯ç»„åˆçš„ç‰‡æ®µæ—¶ï¼Œå®ƒä»¬å˜å¾—æ›´å®¹æ˜“æ„å»ºå’Œç»´æŠ¤ã€‚ç®¡ç†ä»£ç ä¹Ÿå˜å¾—ä¸é‚£ä¹ˆç—›è‹¦ï¼Œå› ä¸ºæ¯ä¸ªå¾®æœåŠ¡å®é™…ä¸Šæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä»£ç å—ã€‚æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ã€æ•°æ®åº“å’Œè½¯ä»¶ç¯å¢ƒæ¥å®ç°ã€‚è¿™å…è®¸ç‹¬ç«‹åœ°éƒ¨ç½²ã€é‡å»ºã€é‡æ–°éƒ¨ç½²å’Œç®¡ç†æ¯ä¸ªæœåŠ¡ã€‚
*   ***æé«˜ç”Ÿäº§åŠ›å’Œé€Ÿåº¦â€”*** å› ä¸ºæœ‰äº†å¾®æœåŠ¡ï¼Œæ¯ä¸ªå¼€å‘å›¢é˜Ÿå¯ä»¥åªçœ‹è‡ªå·±æ­£åœ¨æ„å»ºçš„å…·ä½“æœåŠ¡ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ•´ä¸ªæºä»£ç ã€‚è¿™å°†éšç€äº¤ä»˜é€Ÿåº¦æé«˜å›¢é˜Ÿçš„ç”Ÿäº§åŠ›ã€‚
*   ***å¾®æœåŠ¡å¯ç‹¬ç«‹æ‰©å±•â€”*** éšç€åº”ç”¨éœ€æ±‚çš„å¢åŠ ï¼Œä½¿ç”¨å¾®æœåŠ¡æ›´å®¹æ˜“æ‰©å±•ã€‚æ‚¨å¯ä»¥å°†èµ„æºå¢åŠ åˆ°æœ€éœ€è¦çš„å¾®æœåŠ¡ï¼Œè€Œä¸æ˜¯æ‰©å±•æ•´ä¸ªåº”ç”¨ã€‚è¿™ä¹Ÿæ„å‘³ç€æ‰©å±•é€Ÿåº¦æ›´å¿«ï¼Œé€šå¸¸ä¹Ÿæ›´å…·æˆæœ¬æ•ˆç›Šã€‚
*   ***å¾®æœåŠ¡é€šè¿‡æ•…éšœéš”ç¦»å‡å°‘åœæœºæ—¶é—´â€”*** å¦‚æœæŸä¸ªç‰¹å®šçš„å¾®æœåŠ¡å‡ºç°æ•…éšœï¼Œæ‚¨å¯ä»¥å°†æ•…éšœéš”ç¦»åˆ°å•ä¸ªæœåŠ¡ï¼Œå¹¶é˜²æ­¢ä¼šå¯¼è‡´åº”ç”¨å´©æºƒçš„çº§è”æ•…éšœã€‚è¿™ç§æ•…éšœéš”ç¦»æ„å‘³ç€ï¼Œå³ä½¿å…¶ä¸­ä¸€ä¸ªæ¨¡å—å‡ºç°æ•…éšœï¼Œæ‚¨çš„å…³é”®åº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥ç»§ç»­è¿è¡Œã€‚

æ‰€ä»¥ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ä¸ºä»€ä¹ˆé€šå¸¸æ‰€æœ‰çš„å¤§ç»„ç»‡æ›´å–œæ¬¢å¾®æœåŠ¡ï¼Œè€Œä¸æ˜¯ç»´æŠ¤ä¸€ä¸ªå¤§çš„ç»„åˆæºä»£ç ã€‚è®©æˆ‘ä»¬å°è¯•ä½¿ç”¨ Spring Boot å¼€å‘ä¸€ä¸ªå¾®æœåŠ¡ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ Java æ¡†æ¶ï¼Œç”¨äºå¼€å‘ä¼ä¸šåº”ç”¨ç¨‹åºã€‚

## é¡¹ç›®æè¿°

æˆ‘ä»¬è¦å¼€å‘çš„æ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œä¸ºåŠ å·çš„æ—…æ¸¸åº”ç”¨ç¨‹åºåˆ›å»º RESTful APIsğŸ—»ã€‚æˆ‘ä»¬å¼€å§‹å§ï¼Œ

## åˆ›å»ºé¡¹ç›®

åœ¨ Spring ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œä½ å¯ä»¥æ‰¾åˆ°å¾ˆå¤šä¾èµ–å…³ç³»ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¾èµ–äº

*   Webï¼Œå…¶ä¸­åŒ…æ‹¬ Tomcat å’Œ Spring MVC
*   Rest å­˜å‚¨åº“é€šè¿‡ REST APIs å…¬å¼€ Spring æ•°æ®å­˜å‚¨åº“
*   Java æŒä¹…æ€§ API
*   H2 å†…å­˜æ•°æ®åº“

ä½¿ç”¨[***Spring Initializer***](https://start.spring.io/)***å¯ä»¥è½»æ¾åˆ›å»ºä¸€ä¸ª Spring é¡¹ç›®ã€‚*** è¿›å…¥ spring initializer ç½‘é¡µï¼Œé€‰æ‹© project ä½œä¸º Maven é¡¹ç›®ï¼Œå¯¹äºè¯­è¨€é€‰æ‹© Javaï¼Œå¡«å……é¡¹ç›®å…ƒæ•°æ®ï¼Œé€‰æ‹© packaging as JARï¼Œé€‰æ‹©ä½ æ­£åœ¨å¼€å‘çš„ Java ç‰ˆæœ¬ã€‚ç„¶åæ·»åŠ ä¾èµ–é¡¹ï¼Œ

*   Spring MVC
*   REST å­˜å‚¨åº“
*   æ˜¥å­£æ•°æ® JPA
*   H2 æ•°æ®åº“

æœ€åï¼Œå•å‡» generateï¼Œå®ƒå°†ä¸‹è½½ä¸€ä¸ª zip æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä½¿ç”¨æ‚¨çš„`pom.xml`æ–‡ä»¶ä¸­æŒ‡å‘çš„ä¾èµ–é¡¹åˆ›å»ºäº†æ‚¨çš„é¡¹ç›®ç»“æ„ã€‚

![](img/f55147f982ccbb555fab836f3b7970e5.png)

Spring initializer é¡¹ç›®ç¤ºä¾‹è¯¦ç»†ä¿¡æ¯

## é¡¹ç›®ç»“æ„

![](img/b63d115e51208f2384f038dfed928e19.png)

æ­£å¦‚ä½ åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­çœ‹åˆ°çš„ï¼Œæœ‰å‡ ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬æ£€æŸ¥`pom.xml`æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨ Spring åˆå§‹åŒ–å™¨ä¸­æ·»åŠ çš„ä¾èµ–é¡¹ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹`CaliforniaApplication.java`çš„æ–‡ä»¶ã€‚

è¿™ä¸ª`CaliforniaApplication.java`æ–‡ä»¶æœ‰ä¸€ä¸ª`main`æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ª`@SpringBootApplication`æ³¨é‡Šã€‚æ·»åŠ è¿™ä¸ªæ³¨é‡Šæ„å‘³ç€æˆ‘ä»¬å‘Šè¯‰ JVM è¿™æ˜¯å¾®æœåŠ¡å¯åŠ¨çš„åœ°æ–¹ï¼Œæ–¹æ³•å°±åœ¨é‚£é‡Œï¼Œæ‰€ä»¥å®ƒä¸åƒæ‰“åŒ…çš„ war æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®é™…æ§åˆ¶ web åº”ç”¨ç¨‹åºçš„å¯åŠ¨å’Œåœæ­¢ã€‚

> `@SpringBootApplication`æ³¨é‡Šç”¨äºæ ‡è®°å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ª`@Bean`æ–¹æ³•çš„é…ç½®ç±»ï¼ŒåŒæ—¶è§¦å‘`auto-configuration`å’Œç»„ä»¶æ‰«æã€‚è¿™å’Œç”¨`@Configuration, @EnableAutoConfiguration and @ComponentScan`æ³¨é‡Šå£°æ˜ä¸€ä¸ªç±»æ˜¯ä¸€æ ·çš„ã€‚

## æ­£åœ¨å¯åŠ¨ Spring Boot æœåŠ¡å™¨

å½“æ‚¨è¿è¡Œ main æ–¹æ³•æ—¶ï¼Œæ‚¨å¯ä»¥çœ‹åˆ° Spring åº”ç”¨ç¨‹åºæ­£åœ¨å¯åŠ¨ã€‚è¦æ›´æ”¹æœåŠ¡å™¨æ­£åœ¨å¯åŠ¨çš„ç«¯å£ï¼Œæ‚¨å¯ä»¥è½¬åˆ°`application.properties`æ–‡ä»¶å¹¶æ·»åŠ ä¸€ä¸ªæ–°å±æ€§`server.port=8081`

![](img/035f12c9955311909cae2c5710d154bd.png)

è¦æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å·¥ä½œï¼Œè¯·è½¬åˆ°[http://localhost:8081/profile](http://localhost:8081/profile)ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹:

![](img/5fd4eab5e2d436685761d9e51441c06c.png)

## **å¼€å‘é¡¹ç›®**

ç°åœ¨æˆ‘ä»¬å‡†å¤‡å¼€å‘ Tour California restful web æœåŠ¡ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ£€æŸ¥å°†è¦æ„å»ºçš„ restful web æœåŠ¡çš„ç±»å›¾

![](img/8431e422ef6026e6e31688c7426b6c94.png)

## ***1ã€‚åˆ›å»ºæ¨¡å‹***

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…å¹¶å°†å…¶å‘½åä¸º*æ¨¡å‹*ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºè¿™äº›ä¸šåŠ¡å¯¹è±¡

Tour.java

TourPackage.java

Difficulty.java-æšä¸¾ç±»

Region.java-æšä¸¾ç±»

æ­£å¦‚ä½ åœ¨`Tour.java`å’Œ`TourPackage.java`æ–‡ä»¶ä¸­çœ‹åˆ°çš„ï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸€äº›æ³¨é‡Šã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬çš„æ„æ€ã€‚è¿™äº›æ³¨é‡Šåœ¨ Java æŒä¹… API ä¸­ä½¿ç”¨ã€‚ä½œä¸ºä¸€ç§è§„èŒƒï¼Œ

> Java Persistence API ä¸æŒä¹…æ€§æœ‰å…³ï¼ŒæŒä¹…æ€§æ³›æŒ‡ Java å¯¹è±¡æ¯”åˆ›å»ºå®ƒä»¬çš„åº”ç”¨ç¨‹åºè¿›ç¨‹æ›´é•¿å¯¿çš„ä»»ä½•æœºåˆ¶ã€‚

*   ***@Entity â€”*** ç”¨@Entity æ ‡æ³¨ä½ æ‰€æœ‰çš„å®ä½“ beansã€‚
*   ***@Column*** â€”ä½¿ç”¨@Column æ³¨é‡ŠæŒ‡å®šåˆ—æ˜ å°„ã€‚
*   ***@Id*** â€”ä½¿ç”¨@Id æ ‡æ³¨ Id åˆ—ã€‚
*   ***@ generated value***â€”è®©æ•°æ®åº“ç”Ÿæˆ(è‡ªåŠ¨é€’å¢)id åˆ—ã€‚
*   ***@OneToOne â€”*** å¯¹äºå…±äº«åŒä¸€ä¸ªä¸»é”®çš„å®ä½“ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨@OneToOne å°†å®ƒä»¬å…³è”èµ·æ¥ã€‚
*   ***@ManyToOne â€”*** å¯¹äºä¸ä¸€ä¸ªå®ä½“æœ‰å¤šç§å…³ç³»çš„å®ä½“ï¼Œä¾‹å¦‚åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œä¸€ä¸ª TourPacakge ç”±å¤šä¸ª tour ç»„æˆã€‚
*   ***@ Enumerated***â€”é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡ç¤º JPA æä¾›è€…å°†æšä¸¾è½¬æ¢ä¸ºå®ƒçš„åºå·æˆ–å­—ç¬¦ä¸²å€¼ã€‚

## ***2ã€‚åˆ›å»ºèµ„æºåº“***

åˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…å*å­˜å‚¨åº“*å¹¶åˆ›å»ºé¡¹ç›®æ‰€éœ€çš„å­˜å‚¨åº“

TourRepository.java

TourPackageRepository.java

> æˆ‘ä»¬æ­£åœ¨ä¸ºæˆ‘ä»¬æ‹¥æœ‰çš„ä¸¤ä¸ªå®ä½“åˆ›å»ºå­˜å‚¨åº“ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜æ‰©å±•äº†`CrudRepository`æ¥å£ï¼Œè¿™æ˜¯ä¸€ä¸ª Spring æ•°æ®æ¥å£ï¼Œç”¨äºå¯¹ç‰¹å®šç±»å‹çš„å­˜å‚¨åº“è¿›è¡Œé€šç”¨ CRUD æ“ä½œã€‚å®ƒæä¾›äº†å‡ ç§ç°æˆçš„ä¸æ•°æ®åº“äº¤äº’çš„æ–¹æ³•ã€‚æ‰©å±•`CrudRepository<T, ID>`æ—¶éœ€è¦å®šä¹‰`*T-entity, ID-the type of your ID column in Entity*` *ã€‚*

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨äº†ä¸€äº›æ³¨é‡Šã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Œ

*   ***@ RepositoryRestResourceâ€”***ç”¨äºè®¾ç½®å…¬å…±å­˜å‚¨åº“æ¥å£ä¸Šçš„é€‰é¡¹â€”å®ƒå°†æ ¹æ®æ­£åœ¨æ‰©å±•çš„å­˜å‚¨åº“ç±»å‹(crud Repository/PagingAndSortingRepository/etc)è‡ªåŠ¨åˆ›å»ºé€‚å½“çš„ç«¯ç‚¹
*   ***@ Repositoryâ€”****@ Component*æ³¨é‡Šçš„ä¸“é—¨åŒ–ï¼Œç”¨äºè¡¨ç¤ºè¯¥ç±»æä¾›äº†å¯¹å¯¹è±¡è¿›è¡Œå­˜å‚¨ã€æ£€ç´¢ã€æ›´æ–°ã€åˆ é™¤å’Œæœç´¢æ“ä½œçš„æœºåˆ¶ã€‚

## 3.åˆ›å»ºæœåŠ¡

åˆ›å»ºä¸€ä¸ªåä¸º *service* çš„æ–°åŒ…ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºé¡¹ç›®æ‰€éœ€çš„æœåŠ¡ã€‚

TourService.java

TourPackageService.java

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨äº†ä¸€äº›æ³¨é‡Šã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Œ

*   ***@Service*** â€”è¿™æ˜¯**ç”¨äºæä¾›ä¸€äº›ä¸šåŠ¡åŠŸèƒ½**çš„ç±»ã€‚å½“ä½¿ç”¨åŸºäºæ³¨é‡Šçš„é…ç½®å’Œç±»è·¯å¾„æ‰«ææ—¶ï¼ŒSpring context å°†è‡ªåŠ¨æ£€æµ‹è¿™äº›ç±»ã€‚
*   ***@Autowired*** â€”è¯¥æ³¨é‡Šæä¾›äº†å¯¹åœ¨ä½•å¤„ä»¥åŠå¦‚ä½•å®Œæˆè‡ªåŠ¨è¿çº¿çš„æ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚å°±åƒ *@Required* æ³¨é‡Šã€æ„é€ å‡½æ•°ã€å…·æœ‰ä»»æ„åç§°å’Œ/æˆ–å¤šä¸ªå‚æ•°çš„å±æ€§æˆ–æ–¹æ³•ä¸€æ ·ï¼Œ *@Autowired* æ³¨é‡Šå¯ç”¨äºåœ¨ setter æ–¹æ³•ä¸Šè‡ªåŠ¨è¿æ¥ beanã€‚

æ­£å¦‚ä½ åœ¨ä¸Šé¢çš„ä»£ç ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„å­˜å‚¨åº“æ¥å£æ¥ä½¿ç”¨å·²ç»åœ¨`CrudRepository`ä¸­å¼€å‘çš„æ–¹æ³•ï¼Œæ¯”å¦‚`findById(),findAll()`ã€‚åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨æœåŠ¡å‘å¤–éƒ¨å±è”½å­˜å‚¨åº“ï¼Œå¹¶åœ¨*ä¸šåŠ¡å±‚*ä¸­ä½¿ç”¨æˆ‘ä»¬æƒ³è¦çš„é€»è¾‘ã€‚

## 4.æ•°æ®åº“è®¾ç½®

åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œä¸ºäº†çœ‹åˆ° API æ­£åœ¨å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ•°æ®åº“ä¸­æœ‰ä¸€äº›æ•°æ®ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ h2 å†…å­˜æ•°æ®åº“ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬é¦–å…ˆå‘`application.properties`æ·»åŠ ä¸€äº›é…ç½®ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥è®¿é—®å†…å­˜æ•°æ®åº“ã€‚

```
spring.h2.console.enabled=true
spring.datasource.url=jdbc:h2:mem:tourcalifornia
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=admin
spring.datasource.password=admin
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

spring.jpa.hibernate.ddl-auto=create-drop
```

ç°åœ¨ä»ä¸»æ–¹æ³•æ‰€åœ¨çš„`CaliforniaApplication.java`å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ¥å£`CommandLineRunner`ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ Spring Boot æ¥å£ï¼Œå¸¦æœ‰ä¸€ä¸ªè¿è¡Œæ–¹æ³•ã€‚åŠ è½½åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡åï¼ŒSpring Boot å°†è‡ªåŠ¨è°ƒç”¨å®ç°è¯¥æ¥å£çš„æ‰€æœ‰ bean çš„ run æ–¹æ³•ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å‘æˆ‘ä»¬çš„`application.properties`æ–‡ä»¶æ·»åŠ ä¸€ä¸ªå±æ€§æ¥è¯»å–`ExploreCalifornia.json`æ–‡ä»¶

```
ec.importfile=ExploreCalifornia.json
```

ç„¶åæˆ‘ä»¬æ·»åŠ ä¸€äº›ä»£ç æ¥è¯»å– JSON æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ•°æ®åº“çš„`CaliforniaApplication.java` æ–‡ä»¶ä¸­ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ spring ä¸­ä½¿ç”¨@value æ¥å¯¼å…¥æ–‡ä»¶åã€‚

*   ***@Value*** â€”è¯¥æ³¨é‡Šæä¾›äº†ä¸€ç§å°†å±æ€§å€¼æ³¨å…¥ç»„ä»¶çš„ä¾¿æ·æ–¹å¼ã€‚å¯¹äºå±æ€§å¯èƒ½ä¸å­˜åœ¨çš„æƒ…å†µï¼Œæä¾›åˆç†çš„ç¼ºçœå€¼ä¹Ÿéå¸¸æœ‰ç”¨

CaliforniaApplication.java

æˆ‘ä»¬éœ€è¦ä¸º`TourPackageRepository.java`æ–‡ä»¶æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†

```
TourPackage tourPackage = tourPackageRepository.findByName(tourPackageName).orElseThrow(() ->
        new RuntimeException("Tour package does not exist: " + tourPackageName));
```

å› æ­¤ï¼Œè®©æˆ‘ä»¬å°†`Optional<TourPackage> findByName(String name);`æ·»åŠ åˆ°`TourPackageRepository.java`æ–‡ä»¶ä¸­ã€‚

æ›´æ–°çš„ TourRepository.java

è®©æˆ‘ä»¬é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œå¹¶è½¬åˆ° h2 æ•°æ®åº“æ§åˆ¶å°æ‰€åœ¨çš„[http://localhost:8081/H2-console/](http://localhost:8081/h2-console/)URLã€‚

![](img/fe6ee6899f5494cca9ed749678139f32.png)

h2 ç™»å½•æ§åˆ¶å°

ç„¶åæ·»åŠ æ‚¨åœ¨`application.properties`ä¸­é…ç½®çš„ç”¨æˆ·åã€å¯†ç ã€JDBC ç½‘å€ï¼Œç™»å½• h2 æ§åˆ¶å°ã€‚çœ‹åˆ°å¡«å……åˆ°è¡¨æ ¼ä¸­çš„æ•°æ®å¯ä»¥è¿è¡Œä¸€ä¸ªç®€å•çš„æŸ¥è¯¢ï¼Œå¦‚`SELECT * from TOUR;`

![](img/4b175fc893e080573f16b7112de4f31b.png)

æˆ–è€…æˆ‘ä»¬å®é™…ä¸Šå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®[http://localhost:8081/tours/](http://localhost:8081/tours/)å¹¶æŸ¥çœ‹æ•°æ®(å› ä¸ºæˆ‘ä»¬åœ¨å­˜å‚¨åº“ä¸­æ·»åŠ äº†*@ RepositoryRestResource*ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å­˜å‚¨åº“ä¸­è¿è¡Œ GET/POST/PUT/DELETE å‘½ä»¤)ã€‚

![](img/effafbe3b6e0eb8505ea715cfb131765.png)

å¦‚æœæ‚¨ä¸å¸Œæœ›æ•°æ®åƒè¿™æ ·æš´éœ²ï¼Œæ‚¨éœ€è¦åœ¨æ‚¨çš„å­˜å‚¨åº“ä¸­æ·»åŠ `@RepositoryRestResource(exported = false)`ã€‚

## 5.åˆ›å»ºæ§åˆ¶å™¨

åˆ›å»ºä¸€ä¸ªåä¸º*æ§åˆ¶å™¨*çš„æ–°åŒ…ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºé¡¹ç›®æ‰€éœ€çš„æ§åˆ¶å™¨ã€‚

TourController.java

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨äº†ä¸€äº›æ³¨é‡Šã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Œ

*   ***@ rest Controller***â€”*@ rest Controller*ç»“åˆäº† *@Controller* å’Œ *@ResponseBody*
*   ***@ request mapping***â€”è¯¥æ³¨é‡Šæ ‡è®°äº† *@Controller* ç±»ä¸­çš„è¯·æ±‚å¤„ç†ç¨‹åºæ–¹æ³•ï¼›å¯ä»¥ä½¿ç”¨
    - path æˆ–å…¶åˆ«åã€åç§°å’Œå€¼è¿›è¡Œé…ç½®:è¯¥æ–¹æ³•æ˜ å°„åˆ°å“ªä¸ª URL
    -method:å…¼å®¹çš„ HTTP æ–¹æ³•
    - params:æ ¹æ® HTTP å‚æ•°çš„å­˜åœ¨ã€ä¸å­˜åœ¨æˆ–å€¼è¿‡æ»¤è¯·æ±‚
    - headers:æ ¹æ® HTTP å¤´çš„å­˜åœ¨ã€ä¸å­˜åœ¨æˆ–å€¼è¿‡æ»¤è¯·æ±‚
    - consumes:è¯¥æ–¹æ³•å¯ä»¥åœ¨ HTTP è¯·æ±‚æ­£æ–‡ä¸­ä½¿ç”¨å“ªäº›åª’ä½“ç±»å‹
    - produces:è¯¥æ–¹æ³•å¯ä»¥åœ¨ HTTP å“åº”æ­£æ–‡ä¸­äº§ç”Ÿå“ªäº›åª’ä½“ç±»å‹
*   ***@ request bodyâ€”***å°† HTTP è¯·æ±‚çš„ä¸»ä½“æ˜ å°„åˆ°ä¸€ä¸ªå¯¹è±¡ã€‚
*   ***@ path variableâ€”***è¿™ä¸ªæ³¨é‡Šè¡¨ç¤ºä¸€ä¸ªæ–¹æ³•å‚æ•°è¢«ç»‘å®šåˆ°ä¸€ä¸ª URI æ¨¡æ¿å˜é‡ã€‚
*   ***ã€@ request paramâ€”***è¯¥æ³¨é‡Šç”¨äºè®¿é—® HTTP è¯·æ±‚å‚æ•°
*   ***@ POST mapping***â€”*@ Controller*æ³¨é‡Šç±»ä¸­çš„ *@PostMapping* æ³¨é‡Šæ–¹æ³•å¤„ç†ä¸ç»™å®š URI è¡¨è¾¾å¼åŒ¹é…çš„ HTTP POST è¯·æ±‚
*   ***@ GET mapping***â€”*@ Controller*æ³¨é‡Šç±»ä¸­çš„ *@GetMapping* æ³¨é‡Šæ–¹æ³•å¤„ç†ä¸ç»™å®š URI è¡¨è¾¾å¼åŒ¹é…çš„ HTTP GET è¯·æ±‚
*   @Controller æ³¨é‡Šç±»ä¸­çš„***@ PUT mappingâ€”****@ PUT mapping*æ³¨é‡Šæ–¹æ³•å¤„ç†ä¸ç»™å®š URI è¡¨è¾¾å¼åŒ¹é…çš„ HTTP PUT è¯·æ±‚
*   ***@ DELETE mappingâ€”****@ Controller*æ³¨é‡Šç±»ä¸­çš„ *@DeleteMapping* æ³¨é‡Šæ–¹æ³•å¤„ç†ä¸ç»™å®š URI è¡¨è¾¾å¼åŒ¹é…çš„ HTTP åˆ é™¤è¯·æ±‚
*   ***@ PATCH mappingâ€”****@ Controller*æ³¨é‡Šç±»ä¸­çš„ *@PatchMapping* æ³¨é‡Šæ–¹æ³•å¤„ç†ä¸ç»™å®š URI è¡¨è¾¾å¼åŒ¹é…çš„ HTTP è¡¥ä¸è¯·æ±‚
*   ***@ exception handler***â€”ä½¿ç”¨è¿™ä¸ªæ³¨é‡Šæˆ‘ä»¬å¯ä»¥å£°æ˜ä¸€ä¸ªå®šåˆ¶çš„é”™è¯¯å¤„ç†æ–¹æ³•ã€‚å½“è¯·æ±‚å¤„ç†ç¨‹åºæ–¹æ³•æŠ›å‡ºä»»ä½•æŒ‡å®šçš„å¼‚å¸¸æ—¶ï¼ŒSpring è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚
*   ***@ ResponseStatus***â€”å¦‚æœæˆ‘ä»¬ç”¨è¿™ä¸ªæ³¨é‡Šæ¥æ³¨é‡Šä¸€ä¸ªè¯·æ±‚å¤„ç†ç¨‹åºæ–¹æ³•ï¼Œä½¿ç”¨è¿™ä¸ªæ³¨é‡Šæˆ‘ä»¬å¯ä»¥æŒ‡å®šæœŸæœ›çš„å“åº”çš„ HTTP çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ code å‚æ•°å£°æ˜çŠ¶æ€ä»£ç ï¼Œæˆ–è€…å®ƒæ˜¯ä¸€ä¸ªåˆ«åï¼Œvalue å‚æ•°

## **6ã€‚æµ‹è¯• API**

ä¸ºäº†æµ‹è¯• APIï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [Postman](https://www.postman.com/) ã€‚ä½ å¯ä»¥ä»[è¿™é‡Œ](https://www.getpostman.com/collections/dfc841f2e6a5663e6038)è·å¾—é‚®å·®é›†é”¦ã€‚

![](img/e03fe61b0c9a87f42992d118035fcbd0.png)

åœ¨é‚®é€’å‘˜ä¸­é€šè¿‡ id æµ‹è¯•è·å¾—æ—…æ¸¸

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å®Œæ•´çš„ä»£ç ã€‚

[](https://github.com/maneeshaindrachapa/Tour-California-SpringBoot-Sample-Application) [## GitHub-maneeshaindrachapa/Tour-California-spring boot-Sample-Application:è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹â€¦

### æ­¤æ—¶æ‚¨ä¸èƒ½æ‰§è¡Œè¯¥æ“ä½œã€‚æ‚¨å·²ä½¿ç”¨å¦ä¸€ä¸ªæ ‡ç­¾é¡µæˆ–çª—å£ç™»å½•ã€‚æ‚¨å·²åœ¨å¦ä¸€ä¸ªé€‰é¡¹å¡ä¸­æ³¨é”€ï¼Œæˆ–è€…â€¦

github.com](https://github.com/maneeshaindrachapa/Tour-California-SpringBoot-Sample-Application) 

è¿™å°±æ˜¯äº†ã€‚è¿™å°±æ˜¯ä½ å¦‚ä½•ä½¿ç”¨ Spring Boot å¼€å‘å¾®æœåŠ¡ã€‚è¿™åªæ˜¯æ˜¥å¤©ç”Ÿæ€ç³»ç»Ÿçš„ä¸€å°éƒ¨åˆ†ã€‚åœ¨å¦ä¸€ç¯‡åšæ–‡ä¸­ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä¿æŠ¤ APIï¼Œä»¥åŠæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å¯¹ springs åšäº›ä»€ä¹ˆã€‚å¦‚æœä½ å–œæ¬¢è¿™ä¸ªï¼Œè¯·ç»™æˆ‘ä¹°ä¸€æ¯[â˜•ï¸](https://ko-fi.com/maneeshaindrachapa)å’–å•¡

## å‚è€ƒ

 [## CrudRepository (Spring æ•°æ®æ ¸å¿ƒ 2.6.2 API)

### é’ˆå¯¹ç‰¹å®šç±»å‹çš„å­˜å‚¨åº“çš„é€šç”¨ CRUD æ“ä½œçš„æ¥å£ã€‚

docs.spring.io](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html)  [## 2.JPA å­˜å‚¨åº“

### Spring Data çš„ JPA æ¨¡å—åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰åç§°ç©ºé—´ï¼Œå…è®¸å®šä¹‰å­˜å‚¨åº“ beansã€‚å®ƒè¿˜åŒ…å«â€¦

docs.spring.io](https://docs.spring.io/spring-data/jpa/docs/1.5.0.RELEASE/reference/html/jpa.repositories.html) [](https://spring.io/quickstart) [## Spring å¿«é€Ÿå…¥é—¨æŒ‡å—

### ä½¿ç”¨ start.spring.io åˆ›å»ºä¸€ä¸ªâ€œwebâ€é¡¹ç›®ã€‚åœ¨â€œä¾èµ–é¡¹â€å¯¹è¯æ¡†ä¸­ï¼Œæœç´¢å¹¶æ·»åŠ â€œwebâ€ä¾èµ–é¡¹ä½œä¸ºâ€¦

spring.io](https://spring.io/quickstart) [](https://solace.com/blog/microservices-advantages-and-disadvantages/) [## å¾®æœåŠ¡çš„ä¼˜ç‚¹å’Œç¼ºç‚¹:ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡

### å¯¹äºé‚£äº›ç ”ç©¶å¾®æœåŠ¡ä»¥åŠä»–ä»¬å¦‚ä½•å¸®åŠ©ä»–ä»¬çš„ç»„ç»‡çš„äººæ¥è¯´ï¼Œå¹¶ä¸ç¼ºå°‘å¾ˆå¥½çš„èµ„æºâ€¦

solace.com](https://solace.com/blog/microservices-advantages-and-disadvantages/) 

[https://skelia . com/articles/5-major-benefits-microservice-architecture/](https://skelia.com/articles/5-major-benefits-microservice-architecture/)

https://www.baeldung.com/spring-bean-annotations

ã€https://www.baeldung.com/spring-boot-h2-database 