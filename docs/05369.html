<html>
<head>
<title>How to get Thread dump from Heap dump</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从堆转储中获取线程转储</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-get-thread-dump-from-heap-dump-6ed185d1965d?source=collection_archive---------4-----------------------#2021-07-28">https://blog.devgenius.io/how-to-get-thread-dump-from-heap-dump-6ed185d1965d?source=collection_archive---------4-----------------------#2021-07-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/7c296279b8e476815b862b146de2df96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*ECS5ELkAp9zsLqE_.jpg"/></div></figure><p id="3f44" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">最近我在调试一些讨厌的死锁，在这种情况下，我需要查看线程转储。对我来说不幸的是，我唯一拥有的就是堆转储。不要误会，堆转储包含更多的信息，包括所需的线程信息。但是堆转储也非常大(可能是千兆字节)，所以如果你想与同事分享它们或者将它们上传到在线分析工具，如<a class="ae kp" href="https://fastthread.io/" rel="noopener ugc nofollow" target="_blank"> FastThread </a>，它们就不太实用。我想要的只是一个带有线程转储的简单文本文件。</p><p id="d086" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我开始用谷歌搜索，令我惊讶的是，我找不到可以做到这一点的简单易用的工具。大多数堆转储分析工具可以显示线程数据，但是不能以与线程转储相关的格式导出。我接受了我的信仰并继续下去。直到我注意到 VisualVM 中这个漂亮的按钮，它做的正是我想要的。</p><h1 id="568b" class="kq kr in bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">逐步地</h1><h2 id="713f" class="lo kr in bd ks lp lq dn kw lr ls dp la kc lt lu le kg lv lw li kk lx ly lm lz bi translated">打开 VisualVM</h2><p id="0fbc" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko ig bi translated"><a class="ae kp" href="https://visualvm.github.io/" rel="noopener ugc nofollow" target="_blank"> VisualVM </a>是一个 JVM 故障排除工具，它与 JDK 6、7、8 捆绑在一起，是一个独立的免费工具。它可以帮助您进行 JMX、分析、内存监控、获取和显示线程和堆转储等等。如果您的本地计算机上没有它，请下载并学习如何使用它。我一定会提高你的故障排除能力。</p><h2 id="69fa" class="lo kr in bd ks lp lq dn kw lr ls dp la kc lt lu le kg lv lw li kk lx ly lm lz bi translated">在 VisualVM 中打开您的堆转储</h2><p id="e8ec" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko ig bi translated">很直白。通过 Load Snapshot 按钮打开堆转储(hprof 文件)。</p><h2 id="f6bf" class="lo kr in bd ks lp lq dn kw lr ls dp la kc lt lu le kg lv lw li kk lx ly lm lz bi translated">切换到线程视图</h2><p id="b48b" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko ig bi translated">加载堆转储后，选项卡的左上角是一个下拉列表。切换到线程。</p><h2 id="1a2f" class="lo kr in bd ks lp lq dn kw lr ls dp la kc lt lu le kg lv lw li kk lx ly lm lz bi translated">将线程视图切换到 HTML 移动</h2><p id="d460" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko ig bi translated">这个名字很容易让人混淆，但是它确实能满足你的需要。</p><p id="a1b0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">下拉列表旁边是几个按钮，用于切换线程视图的显示方式。第一个是漂亮的 UI，第二个(名字容易混淆的 HTML)将线程信息转换成线程转储文本格式。此操作将花费一些时间，因为 VisualVM 正在将线程信息转换为格式。</p><h2 id="f809" class="lo kr in bd ks lp lq dn kw lr ls dp la kc lt lu le kg lv lw li kk lx ly lm lz bi translated">复制并粘贴</h2><p id="5b66" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko ig bi translated">现在您可以复制文本并享受您的线程转储。</p><h2 id="f4c7" class="lo kr in bd ks lp lq dn kw lr ls dp la kc lt lu le kg lv lw li kk lx ly lm lz bi translated">一张图片代替 1000 字</h2><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="gh gi mf"><img src="../Images/f4e8a119fc1ef47b97c08641ee8af741.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Cf33ZZ0pq_PEs_DG.png"/></div></div></figure></div><div class="ab cl mo mp hr mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ig ih ii ij ik"><p id="74f7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">更多类似的建议，你可以在<a class="ae kp" href="https://twitter.com/pavel_polivka" rel="noopener ugc nofollow" target="_blank">推特</a>上关注我。</p></div><div class="ab cl mo mp hr mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ig ih ii ij ik"><p id="f896" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="mv">原载于</em><a class="ae kp" href="https://ppolivka.com/posts/getting-thread-dump-from-heap-dump" rel="noopener ugc nofollow" target="_blank"><em class="mv">https://ppolivka.com</em></a><em class="mv">。</em></p></div></div>    
</body>
</html>