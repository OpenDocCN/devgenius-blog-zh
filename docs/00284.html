<html>
<head>
<title>On the power of Hooks: Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">钩子的力量:第二部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/on-the-power-of-hooks-part-2-8de86630648c?source=collection_archive---------14-----------------------#2020-05-29">https://blog.devgenius.io/on-the-power-of-hooks-part-2-8de86630648c?source=collection_archive---------14-----------------------#2020-05-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/49cc23203acab9cd757537800dd531b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DqUigNRUKg6LQOD9IKUadw.jpeg"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">由<a class="ae ja" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的<a class="ae ja" href="https://unsplash.com/@chuttersnap?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> chuttersnap </a>拍照</figcaption></figure><div class=""/><p id="1f8e" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae ja" href="https://medium.com/@accounts_32070/on-the-power-of-react-hooks-49094e76709c" rel="noopener">在前一章中，</a>我们已经学习了如何利用React钩子的能力来方便地增强带有音频回放的组件。今天，我们将继续探索钩子如何帮助我们的组件知道当前时间。好奇？让我们开始吧。</p><h1 id="a36a" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">先生…你知道现在几点了吗？</h1><p id="d9a2" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">为了让我们的组件能够回答这样一个看似简单的问题，我们需要一些要素:</p><ul class=""><li id="c4e4" class="mb mc jd kc b kd ke kh ki kl md kp me kt mf kx mg mh mi mj bi translated">一个可靠的API来访问当前时间。</li><li id="6b37" class="mb mc jd kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">我们组件的时钟。</li><li id="2728" class="mb mc jd kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated">成为时间主人的坚定信念。</li></ul><p id="e846" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设给出了第三个要求，社区使我们能够完成前两个要求的简短工作。为了访问当前时间，我们将使用<a class="ae ja" href="https://momentjs.com/" rel="noopener ugc nofollow" target="_blank"> Moment.js </a>，它提供了一种方便的方式来访问和显示现成的时间。为了构建我们的“时钟”，我们将利用<a class="ae ja" href="https://overreacted.io/making-setinterval-declarative-with-react-hooks/" rel="noopener ugc nofollow" target="_blank">丹·阿布拉莫夫的工作</a>并使用他的<code class="fe mp mq mr ms b">useInterval</code>钩子来创建一个内部时钟。</p><figure class="mt mu mv mw gt ip"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">丹·阿布拉莫夫提供</figcaption></figure><p id="a563" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在有了我们需要的一切，可以开始拼凑我们的钩子了。</p><h1 id="d4be" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">时间是一种幻觉</h1><p id="a114" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">首先，让我们编写一个钩子，在调用时返回当前时间。</p><figure class="mt mu mv mw gt ip"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">我们现在可以问时间了。</figcaption></figure><p id="3bbf" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们将利用<code class="fe mp mq mr ms b">useInterval</code>在每个<code class="fe mp mq mr ms b">1000ms</code>更新当前时间。注意，我们使用<code class="fe mp mq mr ms b">useState</code>而不是<code class="fe mp mq mr ms b">useRef</code>，因为我们希望主机组件在每次时间更新时再次呈现。如果出于某种原因你不想要这种行为，<code class="fe mp mq mr ms b">useRef</code>是你的朋友。</p><figure class="mt mu mv mw gt ip"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">我们现在将被告知每秒钟的时间。</figcaption></figure><p id="ff39" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">快到了。由于我们坚定不移地相信自己是时间的主人，等待整整一秒钟才知道当前时间似乎有点奇怪。因此，我们将提取这个幻数作为参数，瞧，时间成了我们的仆人。</p><figure class="mt mu mv mw gt ip"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">现在时间掌握在我们手中…</figcaption></figure><h1 id="f570" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">包扎</h1><p id="f27f" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">我们现在有一个方便的钩子来通知我们的组件当前时间。让我们好好利用它吧！</p><figure class="mt mu mv mw gt ip"><div class="bz fp l di"><div class="mx my l"/></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk translated">我们可爱的小钟</figcaption></figure></div><div class="ab cl mz na hr nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ig ih ii ij ik"><p id="02a9" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我穿越React Hooks之旅的第二部分。你可以在这里找到第一部分的，在那里找到第三部分的<a class="ae ja" href="https://medium.com/@accounts_32070/on-the-power-of-hooks-part-3-78d79cc2a110" rel="noopener">。</a></p></div></div>    
</body>
</html>