<html>
<head>
<title>Next.js with Mapbox GL JS map</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js ä¸ Mapbox GL JS åœ°å›¾</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/next-js-with-mapbox-gl-js-map-707fed31beea?source=collection_archive---------1-----------------------#2022-05-12">https://blog.devgenius.io/next-js-with-mapbox-gl-js-map-707fed31beea?source=collection_archive---------1-----------------------#2022-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/f28afddb9914a66de614af4a1209e1a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIA8BQNJwOXUUIZCJ3_7ig.png"/></div></div></figure><div class=""/><p id="dd60" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘ä¸€ç›´æ˜¯åœ°å›¾çš„è¶…çº§ç²‰ä¸ï¼Œå–œæ¬¢åœ¨ç½‘é¡µä¸Šä¸åœ°å›¾äº’åŠ¨ã€‚Mapbox GL JS æ˜¯æˆ‘ä»Šå¤©åœ¨æ¼”ç¤ºä¸­ä½¿ç”¨çš„åº“ã€‚é¦–å…ˆï¼Œæ‚¨éœ€è¦è·å¾—ä¸€ä¸ªåœ°å›¾æ¡†<a class="ae kw" href="https://docs.mapbox.com/help/getting-started/access-tokens/" rel="noopener ugc nofollow" target="_blank">è®¿é—®ä»¤ç‰Œ</a>ã€‚æˆ‘ç›®å‰åœ¨ä»–ä»¬çš„<a class="ae kw" href="https://www.mapbox.com/pricing/" rel="noopener ugc nofollow" target="_blank">å…è´¹å±‚ï¼Œ</a>ï¼Œä½†æ˜¯éšç€æ›´å¤šçš„ API è¯·æ±‚ï¼Œå¦‚æœéœ€è¦å®æ–½æ”¯æŒï¼Œå°±ä¼šæœ‰åˆ†çº§å®šä»·è®¡åˆ’ã€‚ä¸€æ—¦ä½ æœ‰äº†è®¿é—®ä»¤ç‰Œï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç¼–ç äº†ï¼</p><h1 id="7d2c" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">è®¾ç½®å’Œå®‰è£…</h1><p id="ebb0" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">è¦åœ¨æ‚¨çš„é¡¹ç›®ä¸­ä½¿ç”¨ Mapbox GL JSï¼Œæ‚¨éœ€è¦<a class="ae kw" href="https://docs.mapbox.com/mapbox-gl-js/guides/install/" rel="noopener ugc nofollow" target="_blank">å®‰è£…</a>NPM åŒ…å¹¶å°†<code class="fe ma mb mc md b">mapboxgl</code>å¯¼å…¥åˆ°æ‚¨çš„<code class="fe ma mb mc md b">.jsx/.tsx</code>æ–‡ä»¶ä¸­ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="c5c8" class="mm ky jb md b gy mn mo l mp mq">npm install --save mapbox-gl</span><span id="f127" class="mm ky jb md b gy mr mo l mp mq">yarn add mapbox-gl</span><span id="7f7b" class="mm ky jb md b gy mr mo l mp mq">--- JS file ---</span><span id="4c12" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">import</em> mapboxgl <em class="ms">from</em> 'mapbox-gl';</span></pre><p id="0a4f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ–è€…ä½ å¯ä»¥åœ¨ä½ çš„æ–‡ä»¶çš„<code class="fe ma mb mc md b">&lt;head&gt;</code>ä¸­ä½¿ç”¨ä»–ä»¬çš„ CDN è„šæœ¬ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="ec2c" class="mm ky jb md b gy mn mo l mp mq">&lt;head&gt;<br/>  &lt;script src='<a class="ae kw" href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js'" rel="noopener ugc nofollow" target="_blank">https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js'</a> /&gt;<br/>&lt;/head&gt;</span></pre><p id="8e94" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å¯¹äºæ ·å¼ï¼Œå¦‚æœä½ ä½¿ç”¨ CSS åŠ è½½å™¨ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ JS æ–‡ä»¶ä¸­å¯¼å…¥æ ·å¼ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="1326" class="mm ky jb md b gy mn mo l mp mq">import 'mapbox-gl/dist/mapbox-gl.css';</span></pre><p id="450e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ–è€…åœ¨æ–‡ä»¶çš„<code class="fe ma mb mc md b">&lt;head&gt;</code>ä¸­ä½¿ç”¨ä¸€ä¸ª<code class="fe ma mb mc md b">&lt;link&gt;</code>æ ‡ç­¾ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="e88b" class="mm ky jb md b gy mn mo l mp mq">&lt;head&gt;<br/>  &lt;link href='<a class="ae kw" href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css'" rel="noopener ugc nofollow" target="_blank">https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css'</a> rel='stylesheet' /&gt;<br/>&lt;/head&gt;</span></pre><p id="8434" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘çš„<code class="fe ma mb mc md b">import mapboxgl from 'mapbox-gl'</code>å‡ºç°äº†ä¸€ä¸ªæ‰“å­—é”™è¯¯ã€‚è¦ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼Œæ‚¨éœ€è¦å®‰è£…<code class="fe ma mb mc md b">@types/mapbox-gl</code>ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="6c6f" class="mm ky jb md b gy mn mo l mp mq">npm install --save @types/mapbox-gl</span><span id="dd24" class="mm ky jb md b gy mr mo l mp mq">yarn add @types/mapbox-gl</span></pre><h1 id="c41c" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">åœ°å›¾æ¸²æŸ“</h1><p id="0b44" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œåœ¨ä½ çš„ä»£ç ç¼–è¾‘å™¨ä¸­å¯èƒ½æ²¡æœ‰å¤ªå¤šçš„æ–‡ä»¶ï¼Œä½†æ˜¯å®ƒåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ã€‚åœ¨è¿™ä¸ªæ¼”ç¤ºä¸­ï¼Œæˆ‘ä½¿ç”¨äº† TypeScriptï¼Œæ‰€ä»¥ä½ ä¼šçœ‹åˆ°åŒ…å«çš„ç±»å‹ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="3eb7" class="mm ky jb md b gy mn mo l mp mq"><em class="ms">import</em> <em class="ms">type</em> { NextPage } <em class="ms">from</em> 'next';<br/><em class="ms">import</em> mapboxgl <em class="ms">from</em> 'mapbox-gl';<br/><em class="ms">import</em> 'mapbox-gl/dist/mapbox-gl.css';</span><span id="c077" class="mm ky jb md b gy mr mo l mp mq">const<em class="ms"> Map</em>:<em class="ms"> NextPage </em>=<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{<br/>  return (<br/>    &lt;main&gt;{/*<em class="ms"> MAP </em>*/}&lt;/main&gt;<br/>  );<br/>};</span><span id="3452" class="mm ky jb md b gy mr mo l mp mq">export default Map;</span></pre><p id="a57a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸ºäº†åœ¨é¡µé¢ä¸Šå‘ˆç°åœ°å›¾ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å…ƒç´ ä¸Šåˆ›å»ºä¸€ä¸ª<code class="fe ma mb mc md b">ref</code>ã€‚è¿™ä¸ª<code class="fe ma mb mc md b">ref</code>å°†æŒ‡å®šåŒ…å«åœ°å›¾çš„ DOM å…ƒç´ ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="86b4" class="mm ky jb md b gy mn mo l mp mq">const<em class="ms"> mapContainer </em>=<em class="ms"> useRef</em>(<em class="ms">null</em>);</span></pre><p id="2db7" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä½¿ç”¨ TypeScript æ—¶ï¼Œå½“æˆ‘è¯•å›¾é€šè¿‡<code class="fe ma mb mc md b">const mapContainer = useRef&lt;string | HTMLElement&gt;(null);</code>å°†ç±»å‹æ·»åŠ åˆ°è¿™ä¸ª<code class="fe ma mb mc md b">ref</code>æ—¶ï¼Œæˆ‘æ”¶åˆ°äº†ä¸€ä¸ªé”™è¯¯ã€‚è¿™é‡Œæœ‰ä¸€äº›æœ‰ç”¨çš„<a class="ae kw" href="https://stackoverflow.com/questions/66271302/reactjs-mapbox-gl-invalid-type-container-must-be-a-string-or-htmlelement" rel="noopener ugc nofollow" target="_blank">æ–‡æ¡£</a>ï¼Œæˆ‘æ›¾é‡åˆ°è¿‡è¿™äº›æ–‡æ¡£æ¥è¿›è¡Œæ•…éšœè¯Šæ–­ï¼Œä½†æœ€ç»ˆæˆ‘å°†ç±»å‹è®¾ç½®ä¸º<code class="fe ma mb mc md b">any</code>ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="6c51" class="mm ky jb md b gy mn mo l mp mq">const mapContainer = useRef&lt;any&gt;(null);</span></pre><p id="6ef9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨ï¼Œåœ¨æ‚¨çš„<code class="fe ma mb mc md b">return</code>è¯­å¥ä¸­ï¼Œæ‚¨éœ€è¦å°†è¿™ä¸ª<code class="fe ma mb mc md b">ref</code>æ·»åŠ åˆ°æ‚¨å¸Œæœ›åŒ…å«åœ°å›¾çš„ DOM å…ƒç´ ä¸­ã€‚åœ¨ä½ çš„æ ·å¼ä¸­ï¼Œä½ éœ€è¦æ·»åŠ ä¸€ä¸ª<code class="fe ma mb mc md b">height</code>å’Œ<code class="fe ma mb mc md b">width</code>åˆ°è¿™ä¸ªå®¹å™¨ä¸­ï¼Œè¿™æ ·åœ°å›¾å°±ä¼šå‡ºç°ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="7f39" class="mm ky jb md b gy mn mo l mp mq">const<em class="ms"> Map</em>:<em class="ms"> NextPage </em>=<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{<br/>  return (<br/>    &lt;main&gt;<br/>      &lt;div className="map-container" ref={mapContainer} /&gt;<br/>    &lt;/main&gt;<br/>  );<br/>};</span></pre><p id="1abe" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ä¸‹ä¸€éƒ¨åˆ†å°†æ¶‰åŠåˆ°æ‚¨çš„ Mapbox GL è®¿é—®ä»¤ç‰Œã€‚ä¸ºäº†ä¸å…¬å¼€æš´éœ²æˆ‘çš„ä»¤ç‰Œï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª<code class="fe ma mb mc md b">.env.local</code>æ–‡ä»¶æ¥åŒ…å«æˆ‘çš„ç¯å¢ƒå˜é‡ã€‚æ‚¨éœ€è¦è®°ä½å°†æ‚¨çš„ env å˜é‡æ·»åŠ åˆ°æ‚¨çš„äº§å“æ„å»ºçš„æœåŠ¡ä¸­ã€‚å¦‚æœä½ ä½¿ç”¨<a class="ae kw" href="https://vercel.com/docs/concepts/projects/environment-variables" rel="noopener ugc nofollow" target="_blank"> Vercel </a>ä½œä¸ºä½ çš„å¹³å°ï¼Œä½ å°†éœ€è¦<a class="ae kw" href="https://nextjs.org/docs/basic-features/environment-variables" rel="noopener ugc nofollow" target="_blank">åœ¨ä½ çš„å˜é‡å</a>å‰åŠ ä¸Š<code class="fe ma mb mc md b">NEXT_PUBLIC</code>ä»¥å…è®¸ä½ çš„æµè§ˆå™¨è®¿é—®å®ƒã€‚(å‚è§<strong class="ka jc"> Vercel éƒ¨ç½²</strong>éƒ¨åˆ†ï¼Œäº†è§£å¦‚ä½•åœ¨ Vercel å¹³å°ä¸­è®¾ç½® env å˜é‡)</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="3555" class="mm ky jb md b gy mn mo l mp mq">NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN=...</span></pre><p id="cb16" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åŒæ ·åœ¨ä½ çš„<code class="fe ma mb mc md b">next.config.js</code>æ–‡ä»¶ä¸­ï¼Œä½ éœ€è¦æ·»åŠ ä½ çš„ env å˜é‡ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="44ff" class="mm ky jb md b gy mn mo l mp mq">module<em class="ms">.</em>exports = {<br/>  env: {<br/>    NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN: <em class="ms">process.env.</em>NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN,<br/>  },<br/>};</span></pre><p id="f00b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç°åœ¨å›åˆ°æ‚¨çš„<code class="fe ma mb mc md b">Map</code>ç»„ä»¶ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨é‚£ä¸ªè®¿é—®ä»¤ç‰Œã€‚ä½ ä¼šæƒ³ç”¨ä¸€ä¸ª<code class="fe ma mb mc md b">useEffect</code>æ¥æ¸²æŸ“ä½ çš„åœ°å›¾ï¼Œå¹¶æä¾›æ•°æ®ã€‚å¦å¤–ï¼Œå¦‚æœä½¿ç”¨ TypeScriptï¼Œå½“æˆ‘è®¾ç½® Mapbox è®¿é—®ä»¤ç‰Œæ—¶ï¼Œæˆ‘å¾—åˆ°äº†ä¸€ä¸ªç±»å‹é”™è¯¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯è¿™ä¸ª<code class="fe ma mb mc md b">mapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN ?? ''</code>ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="0fbb" class="mm ky jb md b gy mn mo l mp mq">useEffect(() =&gt; {<br/>  const<em class="ms"> mapContainer </em>=<em class="ms"> useRef</em>&lt;<em class="ms">any</em>&gt;(<em class="ms">null</em>);<br/>  const<em class="ms"> map </em>=<em class="ms"> useRef</em>&lt;<em class="ms">mapboxgl.Map </em>|<em class="ms"> any</em>&gt;(<em class="ms">null</em>);</span><span id="ea5e" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">  mapboxgl.accessToken </em>=<em class="ms"> process.env.NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN ?? '';</em></span><span id="9ef7" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">  map.current </em>=<em class="ms"> </em>new<em class="ms"> mapboxgl.Map</em>({<br/>    <em class="ms">container</em>:<em class="ms"> mapContainer.current</em>,<br/>    <em class="ms">style</em>:<em class="ms"> </em>'mapbox://styles/mapbox/light-v10',<br/>    <em class="ms">center</em>:<em class="ms"> </em>[15.4542,<em class="ms"> </em>18.7322],<em class="ms"> </em>//<em class="ms"> center map on Chad<br/>    zoom</em>:<em class="ms"> </em>1.8<br/>}, []);</span></pre><p id="da57" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ç§ï¼Œä½ åº”è¯¥æœ‰ä¸€å¼ åœ°å›¾ï¼æˆ‘ä½¿ç”¨çš„æ˜¯<code class="fe ma mb mc md b">light</code>é£æ ¼ä¸»é¢˜ï¼Œä½†æ˜¯è¿˜æœ‰å…¶ä»–å¤šç§<a class="ae kw" href="https://docs.mapbox.com/api/maps/styles/" rel="noopener ugc nofollow" target="_blank">é£æ ¼</a>å¯ä¾›é€‰æ‹©ã€‚</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/6d026c2eefc938ae7d95657eb9b1e5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r0KitUGb4JkQCZAwVCAy_w.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">åœ°å›¾æ¡†æ€»å¸åœ°å›¾</figcaption></figure><p id="2dd8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">è®©æˆ‘ä»¬åœ¨è¿™å¼ åœ°å›¾ä¸Šè·å¾—æ›´å¤šçš„ä¹è¶£ï¼Œå¹¶æ·»åŠ <a class="ae kw" href="https://docs.mapbox.com/help/tutorials/custom-markers-gl-js/" rel="noopener ugc nofollow" target="_blank">è‡ªå®šä¹‰ä½ç½®æ ‡è®°</a>ã€‚æˆ‘åˆ›å»ºäº†ä¸€äº›åä¸º<code class="fe ma mb mc md b">markers</code>çš„æ¨¡æ‹Ÿæ•°æ®ï¼Œå…¶ä¸­è®¾ç½®äº†ä½ç½®çš„çº¬åº¦å’Œç»åº¦åæ ‡ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="e6e0" class="mm ky jb md b gy mn mo l mp mq"><em class="ms">export </em>const<em class="ms"> markers</em>:<em class="ms"> Marker</em>[]<em class="ms"> </em>=<em class="ms"> </em>[<br/>  {<br/>    <em class="ms">city</em>:<em class="ms"> </em>'Sydney',<br/>    <em class="ms">country</em>:<em class="ms"> </em>'Australia',<br/>    <em class="ms">latCoord</em>:<em class="ms"> </em>-33.8688,<br/>    <em class="ms">longCoord</em>:<em class="ms"> </em>151.2093,<br/>  },<br/>  {<br/>    <em class="ms">city</em>:<em class="ms"> </em>'Amsterdam',<br/>    <em class="ms">country</em>:<em class="ms"> </em>'Netherlands',<br/>    <em class="ms">latCoord</em>:<em class="ms"> </em>52.3676,<br/>    <em class="ms">longCoord</em>:<em class="ms"> </em>4.9041,<br/>  },<br/>  {<br/>    <em class="ms">city</em>:<em class="ms"> </em>'Seoul',<br/>    <em class="ms">country</em>:<em class="ms"> </em>'South Korea',<br/>    <em class="ms">latCoord</em>:<em class="ms"> </em>37.5665,<br/>    <em class="ms">longCoord</em>:<em class="ms"> </em>126.9780,<br/>  },<br/>]</span></pre><p id="f9bf" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æ‚¨å°†ä½¿ç”¨<code class="fe ma mb mc md b">geojson</code>åœ¨åœ°å›¾ä¸Šç”Ÿæˆæ ‡è®°ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="4753" class="mm ky jb md b gy mn mo l mp mq">const<em class="ms"> geojson </em>=<em class="ms"> </em>{<br/>  <em class="ms">type</em>:<em class="ms"> </em>'Feature',<br/>  <em class="ms">features</em>:<em class="ms"> markers.map</em>((<em class="ms">marker</em>)<em class="ms"> </em>=&gt;<em class="ms"> </em>({<br/>    <em class="ms">geometry</em>:<em class="ms"> </em>{<br/>      <em class="ms">type</em>:<em class="ms"> </em>'Point',<br/>      <em class="ms">coordinates</em>:<em class="ms"> </em>{<br/>        <em class="ms">lat</em>:<em class="ms"> marker.latCoord</em>,<br/>        <em class="ms">lng</em>:<em class="ms"> marker.longCoord<br/>      </em>}<br/>    }<br/>  }))<br/>};</span><span id="9ef9" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">map.current.on</em>('load',<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{<br/>  <em class="ms">geojson.features.forEach</em>((<em class="ms">marker</em>)<em class="ms"> </em>=&gt;<em class="ms"> </em>{</span><span id="8d6f" class="mm ky jb md b gy mr mo l mp mq">  //<em class="ms"> create a DOM element for the marker<br/>  </em>const<em class="ms"> markerIcon </em>=<em class="ms"> document.createElement</em>('div');<br/>  <em class="ms">markerIcon.className </em>=<em class="ms"> </em>'location-marker';<br/>  <em class="ms">markerIcon.style.backgroundImage </em>=<em class="ms"> </em>'url(/location-marker.png)';<br/>  <em class="ms">markerIcon.style.width </em>=<em class="ms"> marker.properties.iconSize</em>[0]<em class="ms"> </em>+<em class="ms"> </em>'px';<br/>  <em class="ms">markerIcon.style.height </em>=<em class="ms"> marker.properties.iconSize</em>[1]<em class="ms"> </em>+<em class="ms"> </em>'px';<br/>  <br/>  new<em class="ms"> mapboxgl.Marker</em>(<em class="ms">markerIcon</em>)<br/>    <em class="ms">.setLngLat</em>(<em class="ms">marker.geometry.coordinates</em>)<em class="ms"><br/>    .addTo</em>(<em class="ms">map.current</em>);<br/>  });<br/>});</span></pre><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi my"><img src="../Images/093a8ea87b5a4b804ee71083e13f99d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sw9sIJDTpq2QstXZwnKsuw.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">å¸¦æœ‰ä½ç½®æ ‡è®°çš„åœ°å›¾</figcaption></figure><p id="adde" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æœ€åï¼Œè®©æˆ‘ä»¬åœ¨è¿™äº›ä½ç½®æ ‡è®°ä¸Šæ·»åŠ ä¸€ä¸ªå¼¹å‡ºçª—å£ï¼Œæ˜¾ç¤ºæ ‡è®°æ‰€åœ¨çš„åŸå¸‚å’Œå›½å®¶ã€‚</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="7b67" class="mm ky jb md b gy mn mo l mp mq">const<em class="ms"> geojson </em>=<em class="ms"> </em>{<br/>  <em class="ms">type</em>:<em class="ms"> </em>'Feature',<br/>  <em class="ms">features</em>:<em class="ms"> markers.map</em>((<em class="ms">marker</em>)<em class="ms"> </em>=&gt;<em class="ms"> </em>({<br/>    <em class="ms">properties</em>:<em class="ms"> </em>{<br/>      <em class="ms">city</em>:<em class="ms"> marker.city</em>,<br/>      <em class="ms">country</em>:<em class="ms"> marker.country</em>,<br/>      <em class="ms">iconSize</em>:<em class="ms"> </em>[30,<em class="ms"> </em>42],<br/>    },<br/>    <em class="ms">geometry</em>:<em class="ms"> </em>{<br/>      <em class="ms">type</em>:<em class="ms"> </em>'Point',<br/>      <em class="ms">coordinates</em>:<em class="ms"> </em>{<br/>        <em class="ms">lat</em>:<em class="ms"> marker.latCoord</em>,<br/>        <em class="ms">lng</em>:<em class="ms"> marker.longCoord<br/>      </em>}<br/>    }<br/>  }))<br/>};</span><span id="f26a" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">map.current.on</em>('load',<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{<br/>  <em class="ms">geojson.features.forEach</em>((<em class="ms">marker</em>)<em class="ms"> </em>=&gt;<em class="ms"> </em>{</span><span id="35b0" class="mm ky jb md b gy mr mo l mp mq">  //<em class="ms"> create a DOM element for the marker<br/>  </em>const<em class="ms"> markerIcon </em>=<em class="ms"> document.createElement</em>('div');<br/>  <em class="ms">markerIcon.className </em>=<em class="ms"> </em>'location-marker';<br/>  <em class="ms">markerIcon.style.backgroundImage </em>=<em class="ms"> </em>'url(/location-marker.png)';<br/>  <em class="ms">markerIcon.style.width </em>=<em class="ms"> marker.properties.iconSize</em>[0]<em class="ms"> </em>+<em class="ms"> </em>'px';<br/>  <em class="ms">markerIcon.style.height </em>=<em class="ms"> marker.properties.iconSize</em>[1]<em class="ms"> </em>+<em class="ms"> </em>'px';<br/>  <br/>  new<em class="ms"> mapboxgl.Marker</em>(<em class="ms">markerIcon</em>)<br/>    <em class="ms">.setLngLat</em>(<em class="ms">marker.geometry.coordinates</em>)<em class="ms"> </em>//<em class="ms"> add marker to map<br/>    .setPopup</em>(<em class="ms"> </em>//<em class="ms"> add pop out to map<br/>      </em>new<em class="ms"> mapboxgl.Popup</em>({<em class="ms"> offset</em>:<em class="ms"> </em>25<em class="ms"> </em>})<em class="ms">.setHTML</em>(<br/>        `<em class="ms">&lt;p&gt;</em>${<em class="ms">marker.properties.city</em>}<em class="ms">, </em>${<em class="ms">marker.properties.country</em>}<em class="ms">&lt;/p&gt;</em>`<br/>      )<br/>    )<br/>    <em class="ms">.addTo</em>(<em class="ms">map.current</em>);<br/>  });<br/>});</span></pre><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/80696930c7dca3ee85d04e6b4ea5c403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1cQhOeHtvo0ijHIGjNX8gw.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">å¸¦æœ‰å¼¹å‡ºæ ‡è®°çš„åœ°å›¾</figcaption></figure><h1 id="5455" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Vercel éƒ¨ç½²</h1><p id="7ca4" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">éƒ¨ç½²åˆ° Vercel éå¸¸ç®€å•ï¼Œæˆ‘å¾ˆå¿«å°±æœ‰äº†ä¸€ä¸ª<a class="ae kw" href="https://joy-of-travel.vercel.app/" rel="noopener ugc nofollow" target="_blank">ç°åœºæ¼”ç¤º</a>ï¼è¦éƒ¨ç½²åˆ° Vercelï¼Œæ‚¨å¯ä»¥<a class="ae kw" href="https://vercel.com/docs/concepts/git" rel="noopener ugc nofollow" target="_blank">åœ¨ Vercel çš„å¹³å°ä¸Šè¿æ¥æ‚¨çš„ Git å­˜å‚¨åº“</a>æˆ–è€…ä½¿ç”¨ Vercel CLIã€‚å¦‚æœæ‚¨ä½¿ç”¨ Gitï¼Œå®ƒä¼šåœ¨æ¯æ¬¡åˆ†æ”¯æ¨é€æ—¶è‡ªåŠ¨éƒ¨ç½²ã€‚ä½†æ˜¯ï¼Œåªæœ‰åœ¨æ‚¨çš„<code class="fe ma mb mc md b">main</code>åˆ†æ”¯ä¸Šæ‰§è¡Œæ‹‰/åˆå¹¶æ—¶ï¼Œå®ƒæ‰ä¼šè¿›è¡Œç”Ÿäº§éƒ¨ç½²ã€‚</p><p id="db5b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">æˆ‘é€‰æ‹©ä½¿ç”¨ V <a class="ae kw" href="https://vercel.com/docs/concepts/deployments/overview#vercel-cli" rel="noopener ugc nofollow" target="_blank"> ercel CLI </a>ï¼Œè¿™æ ·æˆ‘å¯ä»¥å¯¹æˆ‘çš„éƒ¨ç½²æœ‰æ›´å¤šçš„æ§åˆ¶ã€‚åœ¨æ‚¨çš„ç»ˆç«¯ä¸­ï¼Œä½¿ç”¨å‘½ä»¤<code class="fe ma mb mc md b">vercel</code>è¿›è¡Œé¢„è§ˆéƒ¨ç½²ï¼Œä½¿ç”¨å‘½ä»¤<code class="fe ma mb mc md b">vercel --prod</code>è¿›è¡Œç”Ÿäº§éƒ¨ç½²ã€‚å°±è¿™ä¹ˆç®€å•ï¼</p><p id="174e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">åˆ«å¿˜äº†ï¼Œæ‚¨éœ€è¦åœ¨<strong class="ka jc">è®¾ç½®</strong>é€‰é¡¹å¡ä¸­æ·»åŠ æ‚¨çš„ Mapbox GL è®¿é—®ä»¤ç‰Œä½œä¸º<a class="ae kw" href="https://vercel.com/docs/concepts/projects/environment-variables" rel="noopener ugc nofollow" target="_blank">ç¯å¢ƒå˜é‡ã€‚ä¸€æ—¦ä½ è¿›å…¥<strong class="ka jc">è®¾ç½®</strong>é€‰é¡¹å¡ï¼Œç‚¹å‡»<strong class="ka jc">ç¯å¢ƒå˜é‡</strong>å¹¶æ·»åŠ ä½ çš„é”®å€¼å¯¹ã€‚ç„¶åä½ éœ€è¦</a><a class="ae kw" href="https://vercel.com/docs/concepts/deployments/redeploying" rel="noopener ugc nofollow" target="_blank">å°†</a>é‡æ–°éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­ã€‚</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/25a726948503373f4649adfcb7da3f4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0USdIgrillamUbZEaOfJQ.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">Vercel é¡¹ç›®è®¾ç½®</figcaption></figure><p id="bb77" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">å»åˆ¶ä½œä½ è‡ªå·±çš„åœ°å›¾å§ï¼æˆ‘åˆ›å»ºäº†ä¸€ä¸ªåœ°å›¾é¡¹ç›®æ¥è®°å½•æˆ‘æ‰€æœ‰çš„<a class="ae kw" href="https://joy-of-travel.vercel.app/" rel="noopener ugc nofollow" target="_blank">æ—…è¡Œå†’é™©è€…</a>ï¼ğŸŒ</p></div></div>    
</body>
</html>