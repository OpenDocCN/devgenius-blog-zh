<html>
<head>
<title>Next.js with Mapbox GL JS map</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js 与 Mapbox GL JS 地图</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/next-js-with-mapbox-gl-js-map-707fed31beea?source=collection_archive---------1-----------------------#2022-05-12">https://blog.devgenius.io/next-js-with-mapbox-gl-js-map-707fed31beea?source=collection_archive---------1-----------------------#2022-05-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/f28afddb9914a66de614af4a1209e1a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oIA8BQNJwOXUUIZCJ3_7ig.png"/></div></div></figure><div class=""/><p id="dd60" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我一直是地图的超级粉丝，喜欢在网页上与地图互动。Mapbox GL JS 是我今天在演示中使用的库。首先，您需要获得一个地图框<a class="ae kw" href="https://docs.mapbox.com/help/getting-started/access-tokens/" rel="noopener ugc nofollow" target="_blank">访问令牌</a>。我目前在他们的<a class="ae kw" href="https://www.mapbox.com/pricing/" rel="noopener ugc nofollow" target="_blank">免费层，</a>，但是随着更多的 API 请求，如果需要实施支持，就会有分级定价计划。一旦你有了访问令牌，我们就可以开始编码了！</p><h1 id="7d2c" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">设置和安装</h1><p id="ebb0" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">要在您的项目中使用 Mapbox GL JS，您需要<a class="ae kw" href="https://docs.mapbox.com/mapbox-gl-js/guides/install/" rel="noopener ugc nofollow" target="_blank">安装</a>NPM 包并将<code class="fe ma mb mc md b">mapboxgl</code>导入到您的<code class="fe ma mb mc md b">.jsx/.tsx</code>文件中。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="c5c8" class="mm ky jb md b gy mn mo l mp mq">npm install --save mapbox-gl</span><span id="f127" class="mm ky jb md b gy mr mo l mp mq">yarn add mapbox-gl</span><span id="7f7b" class="mm ky jb md b gy mr mo l mp mq">--- JS file ---</span><span id="4c12" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">import</em> mapboxgl <em class="ms">from</em> 'mapbox-gl';</span></pre><p id="0a4f" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者你可以在你的文件的<code class="fe ma mb mc md b">&lt;head&gt;</code>中使用他们的 CDN 脚本。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="ec2c" class="mm ky jb md b gy mn mo l mp mq">&lt;head&gt;<br/>  &lt;script src='<a class="ae kw" href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js'" rel="noopener ugc nofollow" target="_blank">https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js'</a> /&gt;<br/>&lt;/head&gt;</span></pre><p id="8e94" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于样式，如果你使用 CSS 加载器，你可以在你的 JS 文件中导入样式。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="1326" class="mm ky jb md b gy mn mo l mp mq">import 'mapbox-gl/dist/mapbox-gl.css';</span></pre><p id="450e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者在文件的<code class="fe ma mb mc md b">&lt;head&gt;</code>中使用一个<code class="fe ma mb mc md b">&lt;link&gt;</code>标签。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="e88b" class="mm ky jb md b gy mn mo l mp mq">&lt;head&gt;<br/>  &lt;link href='<a class="ae kw" href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css'" rel="noopener ugc nofollow" target="_blank">https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css'</a> rel='stylesheet' /&gt;<br/>&lt;/head&gt;</span></pre><p id="8434" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的<code class="fe ma mb mc md b">import mapboxgl from 'mapbox-gl'</code>出现了一个打字错误。要修复这个错误，您需要安装<code class="fe ma mb mc md b">@types/mapbox-gl</code>。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="6c6f" class="mm ky jb md b gy mn mo l mp mq">npm install --save @types/mapbox-gl</span><span id="dd24" class="mm ky jb md b gy mr mo l mp mq">yarn add @types/mapbox-gl</span></pre><h1 id="c41c" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">地图渲染</h1><p id="0b44" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在这一点上，在你的代码编辑器中可能没有太多的文件，但是它应该看起来像这样。在这个演示中，我使用了 TypeScript，所以你会看到包含的类型。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="3eb7" class="mm ky jb md b gy mn mo l mp mq"><em class="ms">import</em> <em class="ms">type</em> { NextPage } <em class="ms">from</em> 'next';<br/><em class="ms">import</em> mapboxgl <em class="ms">from</em> 'mapbox-gl';<br/><em class="ms">import</em> 'mapbox-gl/dist/mapbox-gl.css';</span><span id="c077" class="mm ky jb md b gy mr mo l mp mq">const<em class="ms"> Map</em>:<em class="ms"> NextPage </em>=<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{<br/>  return (<br/>    &lt;main&gt;{/*<em class="ms"> MAP </em>*/}&lt;/main&gt;<br/>  );<br/>};</span><span id="3452" class="mm ky jb md b gy mr mo l mp mq">export default Map;</span></pre><p id="a57a" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了在页面上呈现地图，我们需要在元素上创建一个<code class="fe ma mb mc md b">ref</code>。这个<code class="fe ma mb mc md b">ref</code>将指定包含地图的 DOM 元素。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="86b4" class="mm ky jb md b gy mn mo l mp mq">const<em class="ms"> mapContainer </em>=<em class="ms"> useRef</em>(<em class="ms">null</em>);</span></pre><p id="2db7" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用 TypeScript 时，当我试图通过<code class="fe ma mb mc md b">const mapContainer = useRef&lt;string | HTMLElement&gt;(null);</code>将类型添加到这个<code class="fe ma mb mc md b">ref</code>时，我收到了一个错误。这里有一些有用的<a class="ae kw" href="https://stackoverflow.com/questions/66271302/reactjs-mapbox-gl-invalid-type-container-must-be-a-string-or-htmlelement" rel="noopener ugc nofollow" target="_blank">文档</a>，我曾遇到过这些文档来进行故障诊断，但最终我将类型设置为<code class="fe ma mb mc md b">any</code>。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="6c51" class="mm ky jb md b gy mn mo l mp mq">const mapContainer = useRef&lt;any&gt;(null);</span></pre><p id="6ef9" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，在您的<code class="fe ma mb mc md b">return</code>语句中，您需要将这个<code class="fe ma mb mc md b">ref</code>添加到您希望包含地图的 DOM 元素中。在你的样式中，你需要添加一个<code class="fe ma mb mc md b">height</code>和<code class="fe ma mb mc md b">width</code>到这个容器中，这样地图就会出现。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="7f39" class="mm ky jb md b gy mn mo l mp mq">const<em class="ms"> Map</em>:<em class="ms"> NextPage </em>=<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{<br/>  return (<br/>    &lt;main&gt;<br/>      &lt;div className="map-container" ref={mapContainer} /&gt;<br/>    &lt;/main&gt;<br/>  );<br/>};</span></pre><p id="1abe" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下一部分将涉及到您的 Mapbox GL 访问令牌。为了不公开暴露我的令牌，我创建了一个<code class="fe ma mb mc md b">.env.local</code>文件来包含我的环境变量。您需要记住将您的 env 变量添加到您的产品构建的服务中。如果你使用<a class="ae kw" href="https://vercel.com/docs/concepts/projects/environment-variables" rel="noopener ugc nofollow" target="_blank"> Vercel </a>作为你的平台，你将需要<a class="ae kw" href="https://nextjs.org/docs/basic-features/environment-variables" rel="noopener ugc nofollow" target="_blank">在你的变量名</a>前加上<code class="fe ma mb mc md b">NEXT_PUBLIC</code>以允许你的浏览器访问它。(参见<strong class="ka jc"> Vercel 部署</strong>部分，了解如何在 Vercel 平台中设置 env 变量)</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="3555" class="mm ky jb md b gy mn mo l mp mq">NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN=...</span></pre><p id="cb16" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">同样在你的<code class="fe ma mb mc md b">next.config.js</code>文件中，你需要添加你的 env 变量。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="44ff" class="mm ky jb md b gy mn mo l mp mq">module<em class="ms">.</em>exports = {<br/>  env: {<br/>    NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN: <em class="ms">process.env.</em>NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN,<br/>  },<br/>};</span></pre><p id="f00b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在回到您的<code class="fe ma mb mc md b">Map</code>组件中，您将使用那个访问令牌。你会想用一个<code class="fe ma mb mc md b">useEffect</code>来渲染你的地图，并提供数据。另外，如果使用 TypeScript，当我设置 Mapbox 访问令牌时，我得到了一个类型错误，解决方案是这个<code class="fe ma mb mc md b">mapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN ?? ''</code>。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="0fbb" class="mm ky jb md b gy mn mo l mp mq">useEffect(() =&gt; {<br/>  const<em class="ms"> mapContainer </em>=<em class="ms"> useRef</em>&lt;<em class="ms">any</em>&gt;(<em class="ms">null</em>);<br/>  const<em class="ms"> map </em>=<em class="ms"> useRef</em>&lt;<em class="ms">mapboxgl.Map </em>|<em class="ms"> any</em>&gt;(<em class="ms">null</em>);</span><span id="ea5e" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">  mapboxgl.accessToken </em>=<em class="ms"> process.env.NEXT_PUBLIC_MAPBOX_GL_ACCESS_TOKEN ?? '';</em></span><span id="9ef7" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">  map.current </em>=<em class="ms"> </em>new<em class="ms"> mapboxgl.Map</em>({<br/>    <em class="ms">container</em>:<em class="ms"> mapContainer.current</em>,<br/>    <em class="ms">style</em>:<em class="ms"> </em>'mapbox://styles/mapbox/light-v10',<br/>    <em class="ms">center</em>:<em class="ms"> </em>[15.4542,<em class="ms"> </em>18.7322],<em class="ms"> </em>//<em class="ms"> center map on Chad<br/>    zoom</em>:<em class="ms"> </em>1.8<br/>}, []);</span></pre><p id="da57" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">瞧，你应该有一张地图！我使用的是<code class="fe ma mb mc md b">light</code>风格主题，但是还有其他多种<a class="ae kw" href="https://docs.mapbox.com/api/maps/styles/" rel="noopener ugc nofollow" target="_blank">风格</a>可供选择。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mt"><img src="../Images/6d026c2eefc938ae7d95657eb9b1e5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r0KitUGb4JkQCZAwVCAy_w.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">地图框总帐地图</figcaption></figure><p id="2dd8" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们在这张地图上获得更多的乐趣，并添加<a class="ae kw" href="https://docs.mapbox.com/help/tutorials/custom-markers-gl-js/" rel="noopener ugc nofollow" target="_blank">自定义位置标记</a>。我创建了一些名为<code class="fe ma mb mc md b">markers</code>的模拟数据，其中设置了位置的纬度和经度坐标。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="e6e0" class="mm ky jb md b gy mn mo l mp mq"><em class="ms">export </em>const<em class="ms"> markers</em>:<em class="ms"> Marker</em>[]<em class="ms"> </em>=<em class="ms"> </em>[<br/>  {<br/>    <em class="ms">city</em>:<em class="ms"> </em>'Sydney',<br/>    <em class="ms">country</em>:<em class="ms"> </em>'Australia',<br/>    <em class="ms">latCoord</em>:<em class="ms"> </em>-33.8688,<br/>    <em class="ms">longCoord</em>:<em class="ms"> </em>151.2093,<br/>  },<br/>  {<br/>    <em class="ms">city</em>:<em class="ms"> </em>'Amsterdam',<br/>    <em class="ms">country</em>:<em class="ms"> </em>'Netherlands',<br/>    <em class="ms">latCoord</em>:<em class="ms"> </em>52.3676,<br/>    <em class="ms">longCoord</em>:<em class="ms"> </em>4.9041,<br/>  },<br/>  {<br/>    <em class="ms">city</em>:<em class="ms"> </em>'Seoul',<br/>    <em class="ms">country</em>:<em class="ms"> </em>'South Korea',<br/>    <em class="ms">latCoord</em>:<em class="ms"> </em>37.5665,<br/>    <em class="ms">longCoord</em>:<em class="ms"> </em>126.9780,<br/>  },<br/>]</span></pre><p id="f9bf" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您将使用<code class="fe ma mb mc md b">geojson</code>在地图上生成标记。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="4753" class="mm ky jb md b gy mn mo l mp mq">const<em class="ms"> geojson </em>=<em class="ms"> </em>{<br/>  <em class="ms">type</em>:<em class="ms"> </em>'Feature',<br/>  <em class="ms">features</em>:<em class="ms"> markers.map</em>((<em class="ms">marker</em>)<em class="ms"> </em>=&gt;<em class="ms"> </em>({<br/>    <em class="ms">geometry</em>:<em class="ms"> </em>{<br/>      <em class="ms">type</em>:<em class="ms"> </em>'Point',<br/>      <em class="ms">coordinates</em>:<em class="ms"> </em>{<br/>        <em class="ms">lat</em>:<em class="ms"> marker.latCoord</em>,<br/>        <em class="ms">lng</em>:<em class="ms"> marker.longCoord<br/>      </em>}<br/>    }<br/>  }))<br/>};</span><span id="9ef9" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">map.current.on</em>('load',<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{<br/>  <em class="ms">geojson.features.forEach</em>((<em class="ms">marker</em>)<em class="ms"> </em>=&gt;<em class="ms"> </em>{</span><span id="8d6f" class="mm ky jb md b gy mr mo l mp mq">  //<em class="ms"> create a DOM element for the marker<br/>  </em>const<em class="ms"> markerIcon </em>=<em class="ms"> document.createElement</em>('div');<br/>  <em class="ms">markerIcon.className </em>=<em class="ms"> </em>'location-marker';<br/>  <em class="ms">markerIcon.style.backgroundImage </em>=<em class="ms"> </em>'url(/location-marker.png)';<br/>  <em class="ms">markerIcon.style.width </em>=<em class="ms"> marker.properties.iconSize</em>[0]<em class="ms"> </em>+<em class="ms"> </em>'px';<br/>  <em class="ms">markerIcon.style.height </em>=<em class="ms"> marker.properties.iconSize</em>[1]<em class="ms"> </em>+<em class="ms"> </em>'px';<br/>  <br/>  new<em class="ms"> mapboxgl.Marker</em>(<em class="ms">markerIcon</em>)<br/>    <em class="ms">.setLngLat</em>(<em class="ms">marker.geometry.coordinates</em>)<em class="ms"><br/>    .addTo</em>(<em class="ms">map.current</em>);<br/>  });<br/>});</span></pre><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi my"><img src="../Images/093a8ea87b5a4b804ee71083e13f99d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sw9sIJDTpq2QstXZwnKsuw.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">带有位置标记的地图</figcaption></figure><p id="adde" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">最后，让我们在这些位置标记上添加一个弹出窗口，显示标记所在的城市和国家。</p><pre class="me mf mg mh gt mi md mj mk aw ml bi"><span id="7b67" class="mm ky jb md b gy mn mo l mp mq">const<em class="ms"> geojson </em>=<em class="ms"> </em>{<br/>  <em class="ms">type</em>:<em class="ms"> </em>'Feature',<br/>  <em class="ms">features</em>:<em class="ms"> markers.map</em>((<em class="ms">marker</em>)<em class="ms"> </em>=&gt;<em class="ms"> </em>({<br/>    <em class="ms">properties</em>:<em class="ms"> </em>{<br/>      <em class="ms">city</em>:<em class="ms"> marker.city</em>,<br/>      <em class="ms">country</em>:<em class="ms"> marker.country</em>,<br/>      <em class="ms">iconSize</em>:<em class="ms"> </em>[30,<em class="ms"> </em>42],<br/>    },<br/>    <em class="ms">geometry</em>:<em class="ms"> </em>{<br/>      <em class="ms">type</em>:<em class="ms"> </em>'Point',<br/>      <em class="ms">coordinates</em>:<em class="ms"> </em>{<br/>        <em class="ms">lat</em>:<em class="ms"> marker.latCoord</em>,<br/>        <em class="ms">lng</em>:<em class="ms"> marker.longCoord<br/>      </em>}<br/>    }<br/>  }))<br/>};</span><span id="f26a" class="mm ky jb md b gy mr mo l mp mq"><em class="ms">map.current.on</em>('load',<em class="ms"> </em>()<em class="ms"> </em>=&gt;<em class="ms"> </em>{<br/>  <em class="ms">geojson.features.forEach</em>((<em class="ms">marker</em>)<em class="ms"> </em>=&gt;<em class="ms"> </em>{</span><span id="35b0" class="mm ky jb md b gy mr mo l mp mq">  //<em class="ms"> create a DOM element for the marker<br/>  </em>const<em class="ms"> markerIcon </em>=<em class="ms"> document.createElement</em>('div');<br/>  <em class="ms">markerIcon.className </em>=<em class="ms"> </em>'location-marker';<br/>  <em class="ms">markerIcon.style.backgroundImage </em>=<em class="ms"> </em>'url(/location-marker.png)';<br/>  <em class="ms">markerIcon.style.width </em>=<em class="ms"> marker.properties.iconSize</em>[0]<em class="ms"> </em>+<em class="ms"> </em>'px';<br/>  <em class="ms">markerIcon.style.height </em>=<em class="ms"> marker.properties.iconSize</em>[1]<em class="ms"> </em>+<em class="ms"> </em>'px';<br/>  <br/>  new<em class="ms"> mapboxgl.Marker</em>(<em class="ms">markerIcon</em>)<br/>    <em class="ms">.setLngLat</em>(<em class="ms">marker.geometry.coordinates</em>)<em class="ms"> </em>//<em class="ms"> add marker to map<br/>    .setPopup</em>(<em class="ms"> </em>//<em class="ms"> add pop out to map<br/>      </em>new<em class="ms"> mapboxgl.Popup</em>({<em class="ms"> offset</em>:<em class="ms"> </em>25<em class="ms"> </em>})<em class="ms">.setHTML</em>(<br/>        `<em class="ms">&lt;p&gt;</em>${<em class="ms">marker.properties.city</em>}<em class="ms">, </em>${<em class="ms">marker.properties.country</em>}<em class="ms">&lt;/p&gt;</em>`<br/>      )<br/>    )<br/>    <em class="ms">.addTo</em>(<em class="ms">map.current</em>);<br/>  });<br/>});</span></pre><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi mz"><img src="../Images/80696930c7dca3ee85d04e6b4ea5c403.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1cQhOeHtvo0ijHIGjNX8gw.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">带有弹出标记的地图</figcaption></figure><h1 id="5455" class="kx ky jb bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">Vercel 部署</h1><p id="7ca4" class="pw-post-body-paragraph jy jz jb ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">部署到 Vercel 非常简单，我很快就有了一个<a class="ae kw" href="https://joy-of-travel.vercel.app/" rel="noopener ugc nofollow" target="_blank">现场演示</a>！要部署到 Vercel，您可以<a class="ae kw" href="https://vercel.com/docs/concepts/git" rel="noopener ugc nofollow" target="_blank">在 Vercel 的平台上连接您的 Git 存储库</a>或者使用 Vercel CLI。如果您使用 Git，它会在每次分支推送时自动部署。但是，只有在您的<code class="fe ma mb mc md b">main</code>分支上执行拉/合并时，它才会进行生产部署。</p><p id="db5b" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我选择使用 V <a class="ae kw" href="https://vercel.com/docs/concepts/deployments/overview#vercel-cli" rel="noopener ugc nofollow" target="_blank"> ercel CLI </a>，这样我可以对我的部署有更多的控制。在您的终端中，使用命令<code class="fe ma mb mc md b">vercel</code>进行预览部署，使用命令<code class="fe ma mb mc md b">vercel --prod</code>进行生产部署。就这么简单！</p><p id="174e" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">别忘了，您需要在<strong class="ka jc">设置</strong>选项卡中添加您的 Mapbox GL 访问令牌作为<a class="ae kw" href="https://vercel.com/docs/concepts/projects/environment-variables" rel="noopener ugc nofollow" target="_blank">环境变量。一旦你进入<strong class="ka jc">设置</strong>选项卡，点击<strong class="ka jc">环境变量</strong>并添加你的键值对。然后你需要</a><a class="ae kw" href="https://vercel.com/docs/concepts/deployments/redeploying" rel="noopener ugc nofollow" target="_blank">将</a>重新部署到生产中。</p><figure class="me mf mg mh gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi na"><img src="../Images/25a726948503373f4649adfcb7da3f4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q0USdIgrillamUbZEaOfJQ.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk translated">Vercel 项目设置</figcaption></figure><p id="bb77" class="pw-post-body-paragraph jy jz jb ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">去制作你自己的地图吧！我创建了一个地图项目来记录我所有的<a class="ae kw" href="https://joy-of-travel.vercel.app/" rel="noopener ugc nofollow" target="_blank">旅行冒险者</a>！🌎</p></div></div>    
</body>
</html>