<html>
<head>
<title>Make your redux actions type-safe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使您的redux操作类型安全</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/make-your-redux-actions-type-safe-c2e99d4b0dbe?source=collection_archive---------8-----------------------#2020-07-04">https://blog.devgenius.io/make-your-redux-actions-type-safe-c2e99d4b0dbe?source=collection_archive---------8-----------------------#2020-07-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><h2 id="357f" class="il im in bd b dl io ip iq ir is it dk iu translated" aria-label="kicker paragraph">应用设计模式</h2><div class=""/><div class=""><h2 id="6203" class="pw-subtitle-paragraph jt iw in bd b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk dk translated">使用TypeScript键入您的redux存储以避免错误</h2></div><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f73078e15b07bf54ee285ee7ddfb1887.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0Io5RiU84z-jKsLr"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated"><a class="ae lb" href="https://unsplash.com/@uxstore?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> UX店</a>在<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="95ce" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">因此，您在开发React应用程序时已经使用了TypeScript一段时间，并且希望了解如何使您的整个redux store类型安全，那么这篇文章就是为您准备的。</p><p id="4883" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">我自己使用TypeScript已经有几年了，我必须承认，我已经从一个铁杆“纯JS”开发人员一跃成为永不回头的开发人员。TypeScript无疑改变了我做web开发的方式——它要么是前端，要么是后端。</p><p id="9b48" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">对于那些还不知道什么是<a class="ae lb" href="https://www.typescriptlang.org" rel="noopener ugc nofollow" target="_blank"><em class="ly">TypeScript</em></a><em class="ly">的人来说，它是一个“编译成普通JavaScript的JavaScript的类型化超集”。这意味着我们可以向JavaScript添加类型、接口、泛型等等。</em></p><h2 id="8ecc" class="lz ma in bd mb mc md dn me mf mg dp mh ll mi mj mk lp ml mm mn lt mo mp mq it bi translated">好吧，给我看看代码</h2><p id="86d1" class="pw-post-body-paragraph lc ld in le b lf mr jx lh li ms ka lk ll mt ln lo lp mu lr ls lt mv lv lw lx ig bi translated">但在我这么做之前，你需要理解背后的逻辑。因此，为了分解它，为了让我们有完整的类型安全，我们需要:</p><ol class=""><li id="2a23" class="mw mx in le b lf lg li lj ll my lp mz lt na lx nb nc nd ne bi translated">定义什么是动作</li><li id="c881" class="mw mx in le b lf nf li ng ll nh lp ni lt nj lx nb nc nd ne bi translated">定义我们可以执行的操作</li><li id="2a20" class="mw mx in le b lf nf li ng ll nh lp ni lt nj lx nb nc nd ne bi translated">根据这些行动采取行动</li></ol><h2 id="f7da" class="lz ma in bd mb mc md dn me mf mg dp mh ll mi mj mk lp ml mm mn lt mo mp mq it bi translated"><strong class="ak">定义动作类型</strong></h2><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/a5ec48e2f8799b5d606785ba8147a737.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPJ9Mqp_wigBk3ZiSwD8yg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">活动类型和通用活动创建者</figcaption></figure><p id="c7f2" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">动作是一个带有一个<code class="fe nl nm nn no b">type</code>和一个<code class="fe nl nm nn no b">payload</code>的简单对象。我们保持这些通用的，因为动作将是不同的类型并且包含不同的有效载荷。</p><h2 id="f76f" class="lz ma in bd mb mc md dn me mf mg dp mh ll mi mj mk lp ml mm mn lt mo mp mq it bi translated">定义可能的行动</h2><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi np"><img src="../Images/347dbe604f1fb34a0f803d150565f175.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jckiTabYRXfSnZwVGPiafA.png"/></div></div></figure><p id="c69e" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">请花点时间理解这段代码。在第5–9行，我们定义了我们的模型，<strong class="le ix"> </strong> todo。在第12–14行，我们定义了我们国家的结构。我们保持简单，只存储一个待办事项列表。在第17–20行，我们声明了动作类型，这将是我们决定用户分派什么动作的关键。然后在第23行和第24行，我们使用之前定义的<code class="fe nl nm nn no b">Action</code>类型定义了可以执行的实际操作。有了这些，我们就可以导出<code class="fe nl nm nn no b">TodoAction</code>，它可以是我们已经声明的任何动作。</p><h2 id="bec3" class="lz ma in bd mb mc md dn me mf mg dp mh ll mi mj mk lp ml mm mn lt mo mp mq it bi translated">好了，现在我已经添加了很多代码，我该如何使用它呢？</h2><p id="3b87" class="pw-post-body-paragraph lc ld in le b lf mr jx lh li ms ka lk ll mt ln lo lp mu lr ls lt mv lv lw lx ig bi translated">简单，就像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/605893cd371150550ff5f29169da2626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QoyWDoXAuvUlGBZmlU_E-Q.png"/></div></div></figure><p id="5b84" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">您创建您的操作，当您在组件中调度时将调用的函数。他们所要做的就是接受所需的输入，并返回一个<code class="fe nl nm nn no b">TodoAction</code>给我们的减速器来处理。</p><p id="3e52" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">它看起来会像这样:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/f76a15a22529fd9dd9f71df3f7a80d18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_zTrBmhSbKXBnQ8z88s4YA.png"/></div></div></figure><p id="e327" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">当我们输入了动作后，我们就在我们的reducer中获得了完全的类型安全。这意味着我们编辑器中的自动完成特性/智能感知将自动知道不同动作中的<code class="fe nl nm nn no b">payload</code>的类型。</p><p id="6a71" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">这将使你免于在你的<code class="fe nl nm nn no b">actions.ts</code>和你的<code class="fe nl nm nn no b">types.ts</code>之间来回跑来跑去，看看有效载荷到底是什么样子。不要告诉我你从来没有用类似<code class="fe nl nm nn no b">completeTodo({ id: 1 })</code>的东西调用过一个动作，你应该用<code class="fe nl nm nn no b">completeTodo(1)</code>来调用它。很容易犯这个错误，所以如果你预先定义了你的动作，你就不会再认为一个动作是错误的，你的reducer将总是有类型安全来正确地执行它。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/f6ef5a86bb16b9713f7682583b40a099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*R2H_dykS9HNOBQjitRpl_Q.png"/></div></figure><p id="4359" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">Jakob Gaard Andersen 是一家发展最快的银行的软件工程师，他在React中开发面向客户的应用程序。在担任目前的职位之前，他来自四大咨询公司之一，在那里他还在Novo Nordisk、rsted、丹麦劳动力市场和招聘机构以及SKAT的多个项目中发挥了他的技能。</p><p id="8e48" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated"><em class="ly">连接上</em> <a class="ae lb" href="https://www.linkedin.com/in/jakob-gaard-andersen/" rel="noopener ugc nofollow" target="_blank"> <em class="ly"> LinkedIn </em> </a></p><h2 id="ef9d" class="lz ma in bd mb mc md dn me mf mg dp mh ll mi mj mk lp ml mm mn lt mo mp mq it bi translated">雅各布·加德·安德森的其他文章，你可能会感兴趣。</h2><div class="nr ns gp gr nt nu"><a href="https://medium.com/dev-genius/handling-loading-and-error-states-the-right-way-a9bbefd0d7cc" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ix gy z fp nz fr fs oa fu fw iw bi translated">正确处理加载和错误状态</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">使用状态对象</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kv nu"/></div></div></a></div></div></div>    
</body>
</html>