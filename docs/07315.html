<html>
<head>
<title>Cypress: What is new in v9.5.0 &amp; v9.5.1?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">cypress:v 9 . 5 . 0 &amp; v 9 . 5 . 1 有什么新功能？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/what-is-new-in-cypress-v9-5-0-v9-5-1-28890906f0c8?source=collection_archive---------11-----------------------#2022-03-14">https://blog.devgenius.io/what-is-new-in-cypress-v9-5-0-v9-5-1-28890906f0c8?source=collection_archive---------11-----------------------#2022-03-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ef526f9f392eda770e2107c7715313ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k7gmVMRQINzXirHfvfgF0w.png"/></div></div></figure><p id="f227" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是 Cypress.io 上的更新，发生在去年二月。这些是您可以在 cypress.io 变更日志文档中找到的变更日志。</p><h1 id="f7b0" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">v9.5.1</h1><p id="c65a" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated"><em class="lw">2022 年 2 月 28 日发布</em></p><p id="6f5b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">错误修复:</p><ul class=""><li id="a9d8" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">在插件流程中添加了一个<code class="fe mg mh mi mj b">ready</code>事件，以确保在加载配置和测试开始之前，所有插件都已成功启动。固定在<a class="ae mk" href="https://github.com/cypress-io/cypress/issues/19792" rel="noopener ugc nofollow" target="_blank"> #19792 </a>中。</li><li id="5d47" class="lx ly in jx b jy ml kc mm kg mn kk mo ko mp ks mc md me mf bi translated">这修正了一个问题，插件永远不会被执行，使 Cypress 停留在初始化阶段，用户只能看到加载微调器。</li><li id="8084" class="lx ly in jx b jy ml kc mm kg mn kk mo ko mp ks mc md me mf bi translated">这使得能够支持插件节点的实验性<code class="fe mg mh mi mj b">--loader</code>标志。</li><li id="25e9" class="lx ly in jx b jy ml kc mm kg mn kk mo ko mp ks mc md me mf bi translated">对 DNS 查找进行了更改，以提高利用 VMWare CBCloud SaaS 解决方案的 macOS 计算机上的测试性能和可靠性。在此更改之前，观察到了随机测试失败，以及挂起测试和最初挂起的 HTTP 和 HTTPS 响应。固定在<a class="ae mk" href="https://github.com/cypress-io/cypress/issues/20062" rel="noopener ugc nofollow" target="_blank"> #20062 </a>中。</li><li id="4671" class="lx ly in jx b jy ml kc mm kg mn kk mo ko mp ks mc md me mf bi translated">修复了<a class="ae mk" href="https://docs.cypress.io/guides/references/changelog#9-5-0" rel="noopener ugc nofollow" target="_blank"> 9.5.0 </a>中的回归，其中 ANSI 颜色未从<code class="fe mg mh mi mj b">cy.fixtures()</code>错误代码帧中移除。修复了<a class="ae mk" href="https://github.com/cypress-io/cypress/issues/20208" rel="noopener ugc nofollow" target="_blank"> #20208 </a>。</li><li id="0bb0" class="lx ly in jx b jy ml kc mm kg mn kk mo ko mp ks mc md me mf bi translated">修复了<a class="ae mk" href="https://docs.cypress.io/guides/references/changelog#9-5-0" rel="noopener ugc nofollow" target="_blank"> 9.5.0 </a>中的回归，其中测试配置覆盖错误的格式不正确。修复了<a class="ae mk" href="https://github.com/cypress-io/cypress/issues/20208" rel="noopener ugc nofollow" target="_blank"> #20208 </a>。</li><li id="3900" class="lx ly in jx b jy ml kc mm kg mn kk mo ko mp ks mc md me mf bi translated">修复了 Cypress 在用布尔值或数字报告或包装错误时会抛出错误的问题。修正了<a class="ae mk" href="https://github.com/cypress-io/cypress/issues/19561" rel="noopener ugc nofollow" target="_blank"> #19561 </a>。</li></ul><p id="2d5e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">依赖关系更新:</p><ul class=""><li id="9705" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">将<code class="fe mg mh mi mj b">url-parse</code>依赖从<code class="fe mg mh mi mj b">1.5.2</code>升级到<code class="fe mg mh mi mj b">1.5.6</code>，以避免通过用户控制的密钥绕过授权，从而解决这个<a class="ae mk" href="https://nvd.nist.gov/vuln/detail/CVE-2022-0512" rel="noopener ugc nofollow" target="_blank"> NVD 安全漏洞</a>。此问题已在<a class="ae mk" href="https://github.com/cypress-io/cypress/issues/20270" rel="noopener ugc nofollow" target="_blank"> #20270 </a>中解决。</li></ul><h1 id="75ab" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">v9.5.0</h1><p id="b929" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated"><em class="lw">2022 年 2 月 15 日发布</em></p><p id="59fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">特点:</p><ul class=""><li id="85c6" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">对运行模式和打开模式中的错误体验进行了增强，以提高可读性并提供有意义的堆栈跟踪。已在#20124 中解决。</li></ul><p id="14eb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">A.当涉及到用户代码时，许多错误被错误地构造，这使得堆栈跟踪变得模糊不清</p><p id="2020" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">B.大多数较新的错误具有不一致且任意的样式和格式</p><p id="40cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">C.在桌面 GUI 中传播的错误呈现不正确</p><p id="5c52" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">D.ANSI 样式并不总是从堆栈中删除</p><p id="3023" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">E.许多堆栈跟踪是完全错误的</p><p id="1067" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">F.呈现了多个堆栈跟踪(来自原始错误和内部处理的 cypress 错误)</p><p id="4225" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">G.错误在<code class="fe mg mh mi mj b">stdout</code>中被勾回，用于 markdown，而不是 ANSI 样式</p><p id="a706" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">H.源自桌面 GUI 中用户代码的错误隐藏了最重要的细节(堆栈跟踪),需要“打开”错误细节——而<code class="fe mg mh mi mj b">Stack Trace</code>细节按钮重复了相同的包装错误，没有提供任何好处</p><ul class=""><li id="808c" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">更新了<code class="fe mg mh mi mj b">cy.request()</code>日志消息，当它匹配浏览器来源时隐藏来源，以使调试更容易。这减少了日志消息的长度，如果请求长 URL，日志消息可能会被部分隐藏。已在#20009 中解决。</li></ul><p id="76ee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当我使用<code class="fe mg mh mi mj b">cy.request</code>时，它在日志中显示为一个完整的 URL，包含方案、域等。我觉得还是用和<code class="fe mg mh mi mj b">fetch</code>一样的方式，只用路径名来展示比较好。</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/430485a739596c2d64afeab20bf3e787.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fvl8IQZfCsgxbhqo.png"/></div></div></figure><p id="81bc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">为什么需要这样做？</strong></p><p id="e956" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当我试图通过查看截图来调查问题时，使用<code class="fe mg mh mi mj b">cy.request</code>总是很痛苦。你必须进入测试，以匹配步骤的顺序，并理解这些请求是什么。</p><ul class=""><li id="d607" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">进行了更新，将<code class="fe mg mh mi mj b">ShadowRoot</code>和<code class="fe mg mh mi mj b">Document</code>元素记录为 HTML 元素。以前，这些将被记录为枚举对象，很难评估。已在#20049 中解决。</li></ul><p id="4634" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在旧版本中，当 ShadowRoot 渲染到命令日志时，它会将其视为 Javascript 对象，并枚举其属性，如下所示:</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/f50dbdaf600a279eb14c0b3fc1b42590.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/0*vSUQ5qKKDzPWZF9G.png"/></div></figure><p id="2e29" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">更改后，它被视为 HTML 元素，导致在命令日志中显示以下内容:</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/aa1c857d7da47987323767ad25b93190.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/0*bMAJqxdmqvRRdU46.png"/></div></figure><p id="2499" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一个<code class="fe mg mh mi mj b">Document</code>也是如此。它们现在将内部 HTML 呈现到命令日志中，而不是详细列举它们的属性(包括 inner HTML)。</p><ul class=""><li id="612e" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">更新了在 Cypress 运行模式下生成的终端输出，以降低运行标题中的<code class="fe mg mh mi mj b">node</code>路径的重要性。已在#20120 中解决。</li></ul><p id="8d7a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">系统节点路径都是白色的，它本身没有什么价值。它应该像浏览器上的<code class="fe mg mh mi mj b">headless</code>一样静音。</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/cf4f18ec112326226d69719934c9be30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mlrL6FJx5A41J9y1.png"/></div></div></figure><p id="0bf5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">错误修复:</p><ul class=""><li id="320a" class="lx ly in jx b jy jz kc kd kg lz kk ma ko mb ks mc md me mf bi translated">修正了附加的文件<code class="fe mg mh mi mj b">.selectFile()</code>可能有错误的<code class="fe mg mh mi mj b">File</code>原型的问题。修复了<a class="ae mk" href="https://github.com/cypress-io/cypress/issues/20003" rel="noopener ugc nofollow" target="_blank"> #20003 </a>。</li><li id="b308" class="lx ly in jx b jy ml kc mm kg mn kk mo ko mp ks mc md me mf bi translated">更新了<code class="fe mg mh mi mj b">.select()</code>,只在所选选项不是当前所选选项时调度<code class="fe mg mh mi mj b">change</code>和<code class="fe mg mh mi mj b">input</code>事件。这一变化使<code class="fe mg mh mi mj b">.select()</code>与浏览器保持一致。修复了<a class="ae mk" href="https://github.com/cypress-io/cypress/issues/19494" rel="noopener ugc nofollow" target="_blank"> #19494 </a>。</li><li id="be3c" class="lx ly in jx b jy ml kc mm kg mn kk mo ko mp ks mc md me mf bi translated">更新了<code class="fe mg mh mi mj b">.type(' ')</code>以符合 W3C 标准，当按下空格键且当前焦点位于类型为<code class="fe mg mh mi mj b">button</code>、<code class="fe mg mh mi mj b">image</code>、<code class="fe mg mh mi mj b">submit</code>或<code class="fe mg mh mi mj b">reset</code>的状态改变元素上时，应调度 click 事件。修复了<a class="ae mk" href="https://github.com/cypress-io/cypress/pull/20067" rel="noopener ugc nofollow" target="_blank"> #20067 </a>。</li></ul></div><div class="ab cl my mz hr na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ig ih ii ij ik"><div class="mr ms mt mu gt nf"><a href="https://husseinbaashen.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="ng ab fo"><div class="nh ab ni cl cj nj"><h2 class="bd io gy z fp nk fr fs nl fu fw im bi translated">每当侯赛因·巴申发表文章时，就收到一封电子邮件。</h2><div class="nm l"><h3 class="bd b gy z fp nk fr fs nl fu fw dk translated">每当侯赛因·巴申发表文章时，就收到一封电子邮件。通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="nn l"><p class="bd b dl z fp nk fr fs nl fu fw dk translated">husseinbaashen.medium.com</p></div></div><div class="no l"><div class="np l nq nr ns no nt jt nf"/></div></div></a></div></div></div>    
</body>
</html>