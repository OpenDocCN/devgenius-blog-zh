# ä¸€ä¸ªåŸºäº ReactJS å’Œ NodeJS çš„ Web åº”ç”¨ç¨‹åºï¼Œç”¨äºå°†å›¾åƒä¸Šä¼ åˆ° Firebase

> åŸæ–‡ï¼š<https://blog.devgenius.io/a-reactjs-and-nodejs-based-web-app-for-uploading-images-to-firebase-fe3d4a91c496?source=collection_archive---------3----------------------->

![](img/83e960d515a19bc429d759560a29c073.png)

# ä»‹ç»

å—¨ä¼™è®¡ä»¬ï¼æ„Ÿè°¢æ‚¨å¯¹æœ¬æ–‡çš„å…³æ³¨ã€‚å®ƒå°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªå…³äºå¦‚ä½•å°†æ˜ åƒä» ReactJS æ„å»ºçš„å‰ç«¯ä¸Šä¼ åˆ°å¸¦æœ‰åŸºäº NodeJS çš„åç«¯çš„ Firebase å­˜å‚¨çš„ç¤ºä¾‹ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨ç”µå­å•†åŠ¡ç½‘ç«™å’Œç¤¾äº¤åª’ä½“ä¸­éå¸¸å¸¸è§å’ŒåŸºæœ¬ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯è§‰å¾—ç»™æˆ‘è¿™æ ·çš„æ–°æ‰‹å†™ä¸ªæ•™ç¨‹æŒºæœ‰æ„æ€çš„ã€‚

# ç‡ƒæ–™åº“

é¦–å…ˆï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ª Firebase é¡¹ç›®ã€‚ä½¿ç”¨æ‚¨çš„ Google å¸æˆ·è¿›å…¥ firebase æ§åˆ¶å°ã€‚æŒ‰ç…§è¯´æ˜æ“ä½œï¼Œæ‰€æœ‰é»˜è®¤è®¾ç½®éƒ½æ²¡é—®é¢˜ã€‚

![](img/89d35f62af2e1f5b494521350fc2c6bb.png)

ç„¶åå‘è¯¥é¡¹ç›®æ·»åŠ ä¸€ä¸ª web åº”ç”¨ç¨‹åºã€‚ä¸ºæ­¤ web åº”ç”¨é€‰æ‹©ä½ç½®å’Œåç§°ã€‚ä¸è¿‡ï¼Œæ‰€æœ‰é»˜è®¤è®¾ç½®éƒ½æ²¡é—®é¢˜ã€‚

![](img/b1aa76d971c9a30ce582d30f38184c08.png)

æ¥ä¸‹æ¥ï¼Œè¿›å…¥ä¾§è¾¹æ çš„â€œå­˜å‚¨â€ï¼Œç‚¹å‡»â€œå¼€å§‹â€ã€‚

![](img/b30191be01d7bcf7d66446b4023972eb.png)

æ‚¨å¯ä»¥é€‰æ‹©å¼€å‘çš„æµ‹è¯•æ¨¡å¼ã€‚å¦‚æœæ‚¨ä¸æƒ³åœ¨ä»¥åæ”¶åˆ°è¿‡æœŸæ—¶é—´çš„è­¦å‘Šï¼Œæ‚¨å¯ä»¥æ›´æ”¹è§„åˆ™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¯¥è§„åˆ™å…è®¸æ¯ä¸ªäººè¯»å†™æ‚¨çš„æ•°æ®ã€‚å½“ç„¶æ˜¯**ä¸å®‰å…¨**ã€‚ä½ å¯ä»¥é€šè¿‡æ£€æŸ¥è®¤è¯ç­‰æ–¹å¼è®©å®ƒæ›´å®‰å…¨ã€‚ä½†æ˜¯å®‰å…¨è§„åˆ™ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨[è¿™é‡Œ](https://firebase.google.com/docs/rules)æ‰¾åˆ°ã€‚

![](img/123ed7fd9ca8958f19cc26aff54cc797.png)

æˆåŠŸè®¾ç½®å­˜å‚¨åï¼Œæ‚¨å¯ä»¥è½¬åˆ°é¡¹ç›®è®¾ç½®ï¼Œå¹¶åœ¨ general tap ä¸­å¤åˆ¶é…ç½®ã€‚ç¡®ä¿é…ç½®ä¿¡æ¯ä¸­æœ‰ä¸€ä¸ªâ€œå­˜å‚¨åŒ…â€ã€‚åç«¯å°†ä½¿ç”¨å®ƒæ¥è¿æ¥ Firebaseã€‚

![](img/e6277ce7ad011ca4924c85a268dba823.png)![](img/c7c3457bffe96d1239674304fefd94b0.png)

å¥½äº†ï¼Œç‡ƒçƒ§åŸºåœ°éƒ¨åˆ†å®Œæˆäº†ã€‚å¾ˆç®€å•ï¼Œå¯¹å§ï¼ŸğŸ˜‰

# è®¡ç®—æœºç½‘ç»œæœåŠ¡å™¨

## åˆå§‹åŒ–

æˆ‘ä»¬å¯ä»¥é¦–å…ˆåœ¨åç«¯è®¾ç½®å’Œ API ä¸Šå·¥ä½œã€‚ä¸ºè¿™ä¸ªé¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºâ€œæœåŠ¡å™¨â€çš„æ–‡ä»¶å¤¹ï¼Œæˆ–è€…ä½ å–œæ¬¢çš„ä»»ä½•æ–‡ä»¶å¤¹ã€‚å®Œæ•´çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹æ‰€ç¤º:

![](img/a2e3d6e04c44054feea2ecf0c895dc51.png)

ç›´æ¥åˆ°è¿™ä¸ªæœåŠ¡å™¨æ–‡ä»¶å¤¹å¹¶è¿è¡Œ`npm init -y`ï¼Œå®ƒç”¨é»˜è®¤è®¾ç½®åˆå§‹åŒ– npm åŒ…ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®‰è£…ä¸€äº›è½¯ä»¶åŒ…ã€‚æˆ‘ä»¬å°†ç”¨ express ç¼–å†™è¿™ä¸ª NodeJSã€‚è¦è€ƒè™‘è·¨åŸŸé—®é¢˜ï¼Œæ‰€ä»¥ cors åº“æ˜¯å¿…è¦çš„ã€‚æ­¤å¤–ï¼Œæˆ‘å°†ä½¿ç”¨ Postman æ¥æµ‹è¯• APIï¼Œå› æ­¤ä½¿ç”¨ multer åº“ã€‚åœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œ`npm i express cors multer`ã€‚

ç°åœ¨ï¼Œåœ¨æœåŠ¡å™¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª firebase.js æ–‡ä»¶ï¼Œå¹¶å°† firebase é¡¹ç›®è®¾ç½®ä¸­çš„é…ç½®ä¿¡æ¯ç²˜è´´åˆ°å…¶ä¸­ã€‚åƒè¿™æ ·å†™å®ƒ

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª server.js æ–‡ä»¶ã€‚ä» firebase.js å¯¼å…¥å¿…è¦çš„åº“å’Œå­˜å‚¨ã€‚" Multer æ˜¯ä¸€ä¸ªå¤„ç†`multipart/form-data`çš„ node.js ä¸­é—´ä»¶ï¼Œä¸»è¦ç”¨äºä¸Šä¼ æ–‡ä»¶."[1]æ­¤å¤–ï¼Œæˆ‘ä½¿ç”¨`multer.memeryStorage()`æ¥å­˜å‚¨æ–‡ä»¶ï¼Œå› ä¸ºæ–‡ä»¶å°†ä»¥è¿™ç§æ–¹å¼å­˜å‚¨ä¸ºç¼“å†²åŒºå¯¹è±¡[2]ã€‚`uploadBytes()`æä¾›äº†å‚¨å­˜ç«åŸºçš„æ–¹æ³•ã€‚`uploadBytes()`é€šè¿‡ JavaScript [File](https://developer.mozilla.org/en-US/docs/Web/API/File) å’Œ[Blob](https://developer.mozilla.org/en-US/docs/Web/API/Blob)API è·å–æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°äº‘å­˜å‚¨ã€3ã€‘ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†`file.buffer`ä½œä¸ºå‚æ•°ä¼ é€’ç»™`uploadBytes()`ã€‚

NodeJS æœåŠ¡å™¨æ­£åœ¨æœ¬åœ°ç›‘å¬ 5000 ç«¯å£ã€‚é€šè¿‡`nodemon server.js`è¿è¡Œ NodeJS æœåŠ¡å™¨ã€‚å¦‚æœæ²¡æœ‰å®‰è£… [nodemon](https://www.npmjs.com/package/nodemon) ï¼Œå¯ä»¥é€šè¿‡`node server.js`è¿è¡Œã€‚å¦‚æœå¯åŠ¨æˆåŠŸï¼Œæ‚¨çš„ç»ˆç«¯åº”è¯¥è¾“å‡ºâ€œæœåŠ¡å™¨å·²ç»åœ¨ç«¯å£ 5000 ä¸Šå¯åŠ¨â€ã€‚ç¨åï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸Šä¼ å›¾åƒã€ä» Firebase å­˜å‚¨ä¸­è·å–æ‰€æœ‰å›¾åƒä»¥åŠåˆ é™¤å›¾åƒçš„è·¯å¾„ã€‚

## ä¸Šä¼ å›¾åƒ

æˆ‘ä»¬ä¸ºä¸Šä¼ è®¾ç½®äº†ä¸€ä¸ªè·¯å¾„â€œ/addPictureâ€ã€‚ç”±äºåç«¯è¿æ¥ Firebase ä¼ è¾“æ•°æ®ï¼Œ`async/await`ç”¨äºå¼‚æ­¥åŠŸèƒ½ã€‚`upload.single(â€œpicâ€)`è¡¨ç¤º multer éœ€è¦ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶â€œpicâ€ã€‚å¦‚æœè¦ä¸Šä¼ å‡ ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨`upload.array()`ã€‚æˆ‘ä»¬ä¸ºè¦ç”±`ref(storage, file.originalname)`ä¸Šä¼ çš„å›¾åƒåˆ›å»ºä¸€ä¸ªå‚è€ƒã€‚è¿™é‡Œæˆ‘åªä½¿ç”¨æ–‡ä»¶çš„åŸå§‹åç§°ã€‚åœ¨çœŸå®åœºæ™¯ä¸­è¿™ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚æ‚¨å¯ä»¥é€šè¿‡å°†éšæœºç”Ÿæˆçš„ id ä¸å…¶åŸå§‹åç§°ç›¸ç»“åˆæ¥åˆ›å»ºæ–°åç§°ã€‚ç„¶åï¼Œæˆ‘ä»¬ä¸ºè¯¥å›¾åƒåˆ†é…`metatype` ã€‚

ä¸Šä¼ å®Œ APIï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ Postman æµ‹è¯•äº†ã€‚è¿è¡Œä½ çš„æœåŠ¡å™¨ï¼Œè®¾ç½®é‚®é€’å‘˜å¦‚ä¸‹ã€‚æˆ‘ä»¬å°†å‘é€å¸¦æœ‰è¡¨å•æ•°æ®çš„è¯·æ±‚ã€‚æ³¨æ„æ–‡ä»¶çš„å…³é”®å­—è®¾ç½®ä¸ºâ€œpicâ€ï¼Œè¿™ä¸`upload.single(â€œpicâ€)`ä¸€è‡´ã€‚å¦‚æœæˆåŠŸï¼Œå®ƒå°†è¾“å‡ºâ€œä¸Šä¼ ï¼â€ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ Firebase å­˜å‚¨ä¸­æ£€æŸ¥å›¾åƒã€‚

![](img/02559a58df26cee2d1a7868a08f6469a.png)

## è·å–æ‰€æœ‰å›¾åƒ

è¦è·å– Firebase ä¸­å­˜å‚¨çš„æ‰€æœ‰å›¾åƒï¼Œéœ€è¦ä½¿ç”¨`listAll()`ã€‚ç”±äºæˆ‘ä»¬åªæ˜¯å°†æ‰€æœ‰çš„å›¾ç‰‡å­˜å‚¨åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€å•åœ°åˆ›å»ºä¸€ä¸ªå¼•ç”¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†é€šè¿‡`ref(storage)`è·å–æ•°æ®ã€‚å› ä¸ºæˆ‘ä»¬å¸Œæœ›åœ¨å‰ç«¯æ˜¾ç¤ºæ‰€æœ‰çš„å›¾åƒï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å›¾åƒçš„å…¬å…± URL åˆ†é…ç»™ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å°†å…¶ä½œä¸ºå“åº”å‘é€å›å»ã€‚ä¸ºäº†è·å¾—æ¯å¼ å›¾ç‰‡çš„ urlï¼Œæˆ‘ä»¬æ˜ å°„äº†ç”±`listAll()`è¿”å›çš„å›¾ç‰‡ã€‚`productPictures` çš„æ¯ä¸ªå…ƒç´ å°†æ˜¯ä¸€ä¸ªç”± url å’Œåç§°ç»„æˆçš„å¯¹è±¡ã€‚è¯€çªåœ¨äºå…¬å…± url çš„æ ¼å¼æ˜¯â€œ`https://firebasestorage.googleapis.com/v0/b/${YOUR_BUCKET_NAME}/o/${FILE_NAME}?alt=media`â€ã€‚ä½ å¯ä»¥é€šè¿‡`console.log(item)`çš„å›¾ç‰‡æ¥ç†è§£æˆ‘ä¸ºä»€ä¹ˆåœ¨è¿™é‡Œå†™ä¸‹`item._location.bucket`å’Œ`item._location.path_` ã€‚

å¦‚æœæˆ‘ä»¬åœ¨é‚®é€’å‘˜èº«ä¸Šæµ‹è¯•ï¼ŒæˆåŠŸçš„ç»“æœä¼šæ˜¯è¿™æ ·çš„ã€‚

![](img/972d4f74df163e5c53ea60d8f8e3be9d.png)

## åˆ é™¤å›¾åƒ

åˆ é™¤å›¾åƒæ›´ç®€å•ã€‚æˆ‘ä»¬åœ¨è¯·æ±‚ä½“ä¸­è·å–è¦åˆ é™¤çš„å›¾åƒï¼Œå¹¶ä¸ºå®ƒåˆ›å»ºä¸€ä¸ª refã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨`deleteObject()`å°†å…¶ä» Firebase å­˜å‚¨ä¸­åˆ é™¤ã€‚ç¨åæˆ‘ä¼šè§£é‡Š`req.body.name`ã€‚

ç°åœ¨ï¼Œåœ¨ Postman ä¸­æµ‹è¯•å®ƒã€‚åœ¨è¯·æ±‚ä½“ä¸­ï¼Œæˆ‘ä»¬å†™`{â€œnameâ€: â€œgrey.pngâ€}`ï¼Œå®ƒå¯¹åº”äºæˆ‘ä»¬å¦‚ä½•è·å¾—å›¾ç‰‡åç§°ï¼Œå³é€šè¿‡`req.body.name`ã€‚å¦‚æœå›¾ç‰‡åˆ é™¤æˆåŠŸï¼Œä¼šå‘é€â€œå·²åˆ é™¤â€å“åº”ã€‚ä½ å¯ä»¥åŒæ—¶æ£€æŸ¥å­˜å‚¨ã€‚

![](img/321689193b7b22c16582f5ba33a7ebb8.png)

å“‡ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†åç«¯ä»£ç å’Œæµ‹è¯•ã€‚å¹²æ¯ï¼ğŸˆ

# å®¢æˆ·

## åˆå§‹åŒ–

è®©æˆ‘ä»¬å›åˆ°é¡¹ç›®æ–‡ä»¶å¤¹å¹¶è¿è¡Œ`npx create-react-app client`ã€‚ç„¶åä¼šä¸ºæ‚¨åˆ›å»ºä¸€ä¸ªåä¸º client çš„æ–‡ä»¶å¤¹ã€‚é€šè¿‡`cd client`é‡å®šå‘è‡³å®¢æˆ·ç«¯æ–‡ä»¶å¤¹ã€‚æ‚¨å¯ä»¥é¦–å…ˆåˆ é™¤ä¸€äº›ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¸åœ¨é¡¹ç›®ç»“æ„å›¾ä¸­ã€‚

React æœ€è¿‘å¥½åƒæœ‰ä¸€äº›æ›´æ–°ã€‚å³ä½¿ä½ åªæ˜¯åˆ›å»ºå®ƒï¼Œå½“ä½ ç”¨`npm start`è¿è¡Œå‰ç«¯æ—¶ï¼Œå®ƒä¹Ÿä¼šç»™å‡ºâ€œè­¦å‘Š:React 18 ä¸­ä¸å†æ”¯æŒ ReactDOM.renderã€‚è¯·æ”¹ç”¨ createRootã€‚åœ¨ä½ åˆ‡æ¢åˆ°æ–°çš„ API ä¹‹å‰ï¼Œä½ çš„åº”ç”¨ä¼šè¡¨ç°å¾—åƒè¿è¡Œ React 17 ä¸€æ ·ã€‚äº†è§£æ›´å¤š:[https://reactjs.org/link/switch-to-createroot](https://reactjs.org/link/switch-to-createroot)â€ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨ä¸æƒ³çœ‹åˆ°æ­¤è­¦å‘Šï¼Œè¯·å°† index.js æ–‡ä»¶æ›´æ”¹ä¸º

è®°å¾—é€šè¿‡è¿è¡Œ`npm i axios`æ¥å®‰è£… axiosã€‚æˆ‘ä»¬å°†ä½¿ç”¨å®ƒä¸åç«¯è¿›è¡Œé€šä¿¡ã€‚

## App.js

æˆ‘ä»¬å°†æœ‰ä¸€ä¸ªè¡¨å•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶ç±»å‹çš„è¾“å…¥æ ‡ç­¾æ¥é€‰æ‹©æ–‡ä»¶å’Œä¸€ä¸ªæŒ‰é’®æ¥æäº¤ä¸Šä¼ è¯·æ±‚ã€‚åœ¨è¡¨å•ä¸‹é¢ï¼Œæ˜¾ç¤ºäº†å­˜å‚¨åœ¨ Firebase å­˜å‚¨å™¨ä¸­çš„æ‰€æœ‰å›¾ç‰‡ã€‚å¦‚æœæ²¡æœ‰å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯`allPics` ä¸ºç©ºï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå‡ºç°ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å†™`{allPics && â€¦}`çš„åŸå› ã€‚

æˆ‘ä»¬åº”ç”¨ useState()æ¥å­˜å‚¨è¦ä¸Šä¼ çš„å›¾ç‰‡çš„çŠ¶æ€(`pic`)å’Œå­˜å‚¨åœ¨ Firebase å­˜å‚¨å™¨ä¸­çš„å›¾ç‰‡çš„çŠ¶æ€(`allPics`)ã€‚`useEffect()`å°†åœ¨ react é¡¹ç›®å¯åŠ¨æ—¶è¿è¡Œä¸€æ¬¡ã€‚`getAllPics()`åŠŸèƒ½å°†è¢«å–æ¶ˆã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªä¾èµ–é¡¹`allPics`ã€‚å¦‚æœæˆ‘ä»¬ä¸Šä¼ ä¸€å¼ å›¾ç‰‡æˆ–è€…åˆ é™¤ä¸€å¼ å›¾ç‰‡ï¼Œæ˜¾ç¤ºçš„å›¾ç‰‡ä¹Ÿè¦ç›¸åº”çš„å˜åŒ–ã€‚å¦‚æœ`allPics` å‘ç”Ÿå˜åŒ–ï¼Œ`getAllPics()`å°†è¢«ä½œä¸ºä¾èµ–é¡¹å†æ¬¡æ’¤é”€ã€‚

`getAllPics()`æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå› ä¸ºå®ƒå°†ä¸åç«¯äº¤äº’ã€‚æˆ‘ä»¬ä½¿ç”¨ axios å‘é€è¯·æ±‚ã€‚ç”±äºæˆ‘ä»¬æ˜¯æœ¬åœ°å¼€å‘ï¼Œæ‰€ä»¥åŸºç¡€ api æ˜¯â€œhttp://localhost:5000â€ã€‚è¿˜è®°å¾—æˆ‘ä»¬å†™åç«¯ API çš„æ—¶å€™åº”è¯¥è¿”å›ä»€ä¹ˆå—ï¼Ÿæ˜¯çš„ï¼Œä¸€ä¸ªç”±å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªâ€œurlâ€å’Œâ€œnameâ€ã€‚è·å¾—å“åº”åï¼Œæˆ‘ä»¬å°†å…¶åˆ†é…ç»™`allPics`ã€‚

å¦‚æœ¬æ–‡å°é¢å›¾ç‰‡æ‰€ç¤ºï¼Œæ¯å¼ å›¾ç‰‡æ­£ä¸‹æ–¹éƒ½æœ‰ä¸€ä¸ªåˆ é™¤æŒ‰é’®ã€‚`handleDelete()`å‡½æ•°å°†å›¾ç‰‡åç§°ä½œä¸ºå‚æ•°ã€‚æˆ‘ä»¬é€šè¿‡`axios.delete(â€œhttp://localhost:5000/delete", {data: { name: name },})`å‘é€åˆ é™¤è¯·æ±‚ã€‚å›¾ç‰‡åç§°å­˜å‚¨åœ¨è¯·æ±‚ä½“`{data: { name: name }}`ä¸­ï¼Œå¯¹åº”åç«¯åˆ é™¤è·¯å¾„çš„`req.body.name`ã€‚åˆ é™¤åï¼Œç°åœ¨å†æ¬¡è·å–å­˜å‚¨å™¨ä¸­çš„æ‰€æœ‰å›¾ç‰‡ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹è¡¨å•æ ‡ç­¾ã€‚å®šä¹‰äº†ä¸€ä¸ª`handleChange()`å‡½æ•°æ¥è·å–é€‰å®šçš„æ–‡ä»¶å¹¶å°†å…¶åˆ†é…ç»™`pic`ã€‚æˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸€ä¸ª`handleSubmit()` å‡½æ•°ï¼Œå½“ç‚¹å‡»æŒ‰é’®æäº¤æ—¶ï¼Œè¯¥å‡½æ•°å°†è¢«æ’¤é”€ã€‚`handleSubmit()`é˜»æ­¢é¡µé¢åˆ·æ–°ã€‚ä¸€ä¸ª FormData å¯¹è±¡ã€‚æˆ‘ä»¬é€šè¿‡`formData.append(â€œpicâ€, pic)`ç»™å®ƒåŠ ä¸Š`pic`ã€‚æ³¨æ„åç«¯çš„`upload.single(â€œpicâ€)`å¯¹åº”çš„`â€œpicâ€`ã€‚å‘å¸ƒè¯·æ±‚ç”±`axios.post(â€œhttp://localhost:5000/addPicture", formData)`å‘é€ã€‚ä¸Šä¼ æˆåŠŸåï¼Œæˆ‘ä»¬å†æ¬¡è¿è¡Œ`getAllPics()`é‡æ–°æ¸²æŸ“å‰ç«¯ã€‚

å‰ç«¯éƒ¨åˆ†å°±è¿™äº›äº†ã€‚ğŸˆä¸‹é¢æ˜¯å‰ç«¯çš„ CSS æ–‡ä»¶ã€‚

> æ„Ÿè°¢é˜…è¯»ï¼å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚

# å‚è€ƒ

[1][https://www.npmjs.com/package/multer](https://www.npmjs.com/package/multer)

[2][http://expressjs.com/en/resources/middleware/multer.html](http://expressjs.com/en/resources/middleware/multer.html)

[3][https://firebase . Google . com/docs/storage/web/upload-files # web-version-9 _ 1](https://firebase.google.com/docs/storage/web/upload-files#web-version-9_1)