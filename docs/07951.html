<html>
<head>
<title>Powerful Strategies to Minimize Risk When Releasing New Features</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发布新功能时，将风险降至最低的强大策略</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/strategies-companies-use-to-minimize-risk-when-releasing-new-features-e49e1e0a5ef4?source=collection_archive---------12-----------------------#2022-05-05">https://blog.devgenius.io/strategies-companies-use-to-minimize-risk-when-releasing-new-features-e49e1e0a5ef4?source=collection_archive---------12-----------------------#2022-05-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4aaf" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">探索黑暗发射、特征标志和 A/B 实验</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/d7323d9e538e58561548f6c36adac1ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q-D8dW7B75VFgyphLe8nVg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk translated">图片由作者使用<a class="ae ks" href="https://labs.openai.com/" rel="noopener ugc nofollow" target="_blank"> Dall-E </a>创建</figcaption></figure><p id="fa1b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">传统上，软件产品是在计划好的阶段开发和发布的。想想你在电脑或智能手机上安装的应用程序；通常它会告诉你什么时候你必须升级到新版本，你必须采取手动步骤这样做。该公司将决定新版本中会有什么(无论是补丁、小版本还是大版本)，并剪切一个发布版本进行分发。</p><p id="c765" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">尽管这仍然适用于桌面和移动应用程序，但如今许多 web 产品都是使用持续集成(T4)来部署的。也就是说，当开发人员将他们的代码推到主分支时，它在 CI 工具中构建并经历自动化测试。一旦测试通过，它将自动部署到生产环境中。这种方法通常没有特定的版本，因为变更是即时和增量的。</p><p id="7043" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">虽然这缩短了开发周期并鼓励迭代，但这有时是有风险的。也许你没有覆盖自动化测试中的每一个边缘情况，或者也许你的新特性将被证明是不可扩展的，并在所有用户的压力下崩溃。</p><p id="59f2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你最不希望的事情就是你的新特性引起大量的错误和支持票。那么，怎样做才能降低发布新特性的风险，同时享受更短、更自动化的开发周期的好处呢？</p><h1 id="e4b4" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">黑暗发射</h1><p id="48fd" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">最小化风险的一个方法是只将一个特性部署到用户的一个子集，而不是整个用户群。这叫<em class="mm">暗发射</em>。</p><p id="9c09" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您正在用全新的代码进行重构或开发一个特性，这可能会特别有帮助，因为它在新旧代码之间创建了一个非常清晰的界限。</p><p id="7cb1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">例如，假设您重新设计并重新构建了一个个人资料页面。您可能无法完全确定它是否适用于所有情况，因为个人资料页面包含大量用户生成的内容。因此，您决定暗启动新页面，用新代码替换旧代码，提供给一部分用户。</p><p id="ac54" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">通常，这包括添加一个 url 参数来搜索:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="ecc8" class="ms lq in mo b gy mt mu l mv mw">/[username]?new-profile-page=true</span></pre><p id="be38" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您想快速测试，这是一个很好的例子，但是您必须确保 param 总是在您需要的时候设置。</p><p id="7f86" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">或者，你可以像<code class="fe mx my mz mo b">localStorage</code>一样，依靠当地的商店来设置它，然后忘记它。在本例中，您必须通过开发控制台随机或手动设置该项:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="8564" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请注意，如果黑暗启动特性影响多个页面或流，那么您必须在每一步中都传递该参数。</p><p id="f49b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，您选择运行黑暗启动的时间长度。在此期间，监控是必不可少的，因为您必须确保新代码不会抛出错误，并且在您向 bucket 添加更多用户时是可伸缩的。</p><p id="2c52" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这段时间之后，如果一切看起来都很好，你可以通过删除任何分支逻辑来清理你的代码，并启动你的特性，为所有用户打开它。</p><blockquote class="nc nd ne"><p id="3676" class="kt ku mm kv b kw kx jo ky kz la jr lb nf ld le lf ng lh li lj nh ll lm ln lo ig bi translated"><em class="in">💡</em>您可以使用黑暗启动作为创建测试程序的一种方式！</p></blockquote><h2 id="94ca" class="ms lq in bd lr ni nj dn lv nk nl dp lz lc nm nn mb lg no np md lk nq nr mf ns bi translated">使用“功能标志”实现</h2><p id="7c21" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">一些黑暗启动会自动随机选择一个子集，或者只有在 url 参数存在时才会显示。然而，想象一下如果你想要更多的控制；也许你想让非常特定的用户能够使用你的新功能。进入<em class="mm">功能标志。</em></p><p id="a4e3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一个特性标志只是一个二元开关，决定用户是否应该看到这个特性。要实现特性标志，通常需要创建一个服务或 UI，允许管理员选择哪些用户应该看到新特性，而不必部署任何新代码。</p><p id="451c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这需要在代码中使用大量 if-else 语句来判断特性标志是开还是关:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="c420" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如何设置特征标志可以通过几种方式实现。</p><p id="a8f3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可以创建一个 UI，让您查找用户并将其分配给他们。或者，您可以将功能标志应用于您通过过滤器选择的用户子集。例如，也许您的新个人资料页面举例说明了关注者数量，并且您希望仅向拥有 10，000+关注者的用户显示它。</p><blockquote class="nc nd ne"><p id="cbc8" class="kt ku mm kv b kw kx jo ky kz la jr lb nf ld le lf ng lh li lj nh ll lm ln lo ig bi translated"><em class="in">💡</em>你可以使用像<a class="ae ks" href="https://launchdarkly.com/" rel="noopener ugc nofollow" target="_blank">launch darky</a>这样的产品来简化你的功能标志工作！</p></blockquote><h2 id="ea53" class="ms lq in bd lr ni nj dn lv nk nl dp lz lc nm nn mb lg no np md lk nq nr mf ns bi translated">下降趋势</h2><p id="f741" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">暗启动有两个主要缺点:</p><p id="eb00" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，它会让后续流程变得更加困难。例如，如果您必须更改新特性的 URL(比方说，您使用<code class="fe mx my mz mo b">/[username]</code>作为旧配置文件页面的路径，现在使用<code class="fe mx my mz mo b">/profile/[username]</code>作为新配置文件页面的路径)，您必须确保每个指向配置文件的链接都基于用户所在的组。</p><p id="89d8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其次，您可能必须维护该特性的两个版本。如果您正在重新设计或重构一个页面或功能，如果发现了一个影响两者的 bug，您将不得不在完全推出新代码之前修复它两次。</p><h1 id="3268" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">A/B 实验</h1><p id="e260" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">公司用来测试新功能的另一种方法是<a class="ae ks" href="https://vwo.com/ab-testing/" rel="noopener ugc nofollow" target="_blank"> <em class="mm"> A/B 实验</em> </a> <em class="mm"> </em>(也称为<em class="mm"> A/B 测试</em>)。</p><p id="58ae" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你还记得上过科学课，了解到一个好的实验有一个<a class="ae ks" href="https://en.wikipedia.org/wiki/Scientific_control" rel="noopener ugc nofollow" target="_blank">科学控制</a>，以最小化<a class="ae ks" href="https://support.minitab.com/en-us/minitab-express/1/help-and-how-to/modeling-statistics/regression/supporting-topics/regression-models/what-is-a-lurking-variable" rel="noopener ugc nofollow" target="_blank">那些混淆你的结论的潜在变量</a>，以及检验那个控制的假设吗？</p><p id="93bd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">恭喜你，你已经理解 A/B 实验一半了！</p><p id="3401" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在 A/B 实验中，你正在测试一个特性、页面或流程的几个<em class="mm">变体</em>，看看哪个执行得更好。不要让名字欺骗了你；它不一定只是一个控制和一个变体，你可以有几个针对控制的变体。我们可以很容易地称之为 A/B/C/D/E/…实验。</p><p id="fd1c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">A/B 实验从一个你想要改进的期望指标和一个如何实现的假设开始。也许你想知道"<a class="ae ks" href="https://medium.com/yammer-product/testing-yammers-signup-flow-13eeb6435a73" rel="noopener">我们如何改善注册流程，让更多用户成功创建新帐户？</a>“在这种情况下，理想的指标是新创建账户的数量，假设改变注册流程将有助于改善该指标。</p><p id="7464" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然而，注册流程中的<em class="mm">什么</em>应该被改变可能并不明显。也许不需要个人资料照片会加快进度？也许要求用户跟随群体会让他们困惑，而不是吸引他们？也许现在的流量其实是最好的？</p><p id="4c45" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，您构建了一个实验来确定推动该度量向前发展的最佳方式。你保持你的控制，也就是保持当前的流动不变。然后你创建<em class="mm"> N </em>个变量。</p><p id="b82b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">A/B 实验需要创建<em class="mm"> N+1 </em>个用户子集来测试变量并进行控制。通常一个团队有一个 UI，他们可以通过这个 UI 声明他们的存储桶，并为特定的用户打开一个变体。</p><p id="baa4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然后，就像黑暗发射一样，你选择一段时间来运行你的实验。在此期间，您需要持续监控您选择的指标的变化；在这种情况下，记录每个变体创建的新帐户。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="bf6e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，您比较每个变体和对照的性能，哪个做得更好将被完全实现到产品中，并为每个人打开。就像黑暗启动一样，需要一个清理阶段来删除分支逻辑和任何其他对所选变体不必要的分散代码。</p><h2 id="4321" class="ms lq in bd lr ni nj dn lv nk nl dp lz lc nm nn mb lg no np md lk nq nr mf ns bi translated">下降趋势</h2><p id="7e95" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在我看来 A/B 实验最大的缺点是开发成本。不仅要构建每个变体，还要构建分支逻辑、监控和确定哪些用户进入哪些存储桶。这工作量很大，会占用其他重要项目的时间。</p><p id="1e90" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">其次，A/B 测试是基于单一指标的定量测试。如果你想测量的是非常具体的东西，这可能是好的，但是经常地，让我们自己与他人协调是很重要的</p></div><div class="ab cl nt nu hr nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ig ih ii ij ik"><p id="75ac" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这些策略是任何计划从事产品或数据工程的人必须知道的。我们没有人能够准确地预测一个新特性会出什么问题，或者实现一个特性或流程的最佳方式是什么。<a class="ae ks" href="https://www.nngroup.com/articles/false-consensus/" rel="noopener ugc nofollow" target="_blank">我们毕竟不是我们的用户</a>！</p><div class="oa ob gp gr oc od"><a href="https://www.buymeacoffee.com/karomancer" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd io gy z fp oi fr fs oj fu fw im bi translated">喜欢这篇文章？考虑给我买杯茶吧！</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">我过去常常把我的文章放在中等收费的墙后面，但当谈到教育时，我完全关注可访问性，所以现在它们都是免费的。如果你觉得你从这篇文章中得到了一些东西，并且有一些闲钱，请考虑给我买杯茶来表示你的支持！🫖</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">www.buymeacoffee.com</p></div></div><div class="om l"><div class="on l oo op oq om or km od"/></div></div></a></div></div></div>    
</body>
</html>