<html>
<head>
<title>Visualizing Boxen or Letter Value Plots in Seaborn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Seaborn 中可视化 Boxen 或 Letter 值图</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/visualizing-boxen-or-letter-value-plots-in-seaborn-410397d7eee2?source=collection_archive---------5-----------------------#2022-09-27">https://blog.devgenius.io/visualizing-boxen-or-letter-value-plots-in-seaborn-410397d7eee2?source=collection_archive---------5-----------------------#2022-09-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/36f9efca97f51fcf948e1dd604ada44a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hBy0Kd9Ay_fF2UdZGZ6a2g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">博兴图示例(图片由作者提供)</figcaption></figure><p id="6fbd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们讨论在 Seaborn 中创建 boxen 图的不同可视化技术。</p><p id="331e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">boxen 图，也称为字母值图，与我们在前面的文章中讨论的 box 图非常相似。</p><p id="990b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这两个图的主要区别在于图表上数据的显示方式。</p><p id="da1f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">箱形图适用于较小的数据集，尤其是少于 500–1000 个数据点的数据集。当我们为一个较小的数据集绘制异常值时，我们发现图上标记的点更少，更容易分析。</p><p id="1071" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">假设我们有一个包含 5 万、10 万或更多条目的数据集。当我们考虑绘制异常值时，它可以立即填充绘图区域。这种输出会迷惑我们，而不是帮助我们分析数据。</p><p id="f3f1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们考虑一个例子来更好地理解这一点。我们将考虑来自 UCI 机器学习知识库的<a class="ae kx" href="https://archive.ics.uci.edu/ml/datasets/Secondary+Mushroom+Dataset" rel="noopener ugc nofollow" target="_blank">二级蘑菇数据集</a>，它有大约 61000 个条目。</p><p id="feba" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，第一步是在我们的环境中加载数据集。</p><p id="39e9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">按照上面提供的超链接，从网站下载数据。</p><p id="e4ff" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，使用 pandas 的 read_csv 方法读取文件，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="4a84" class="lh li in ld b gy lj lk l ll lm">df = pd.read_csv('MushroomDataset/secondary_data.csv', sep=';')</span></pre><p id="03a8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以看到，除了文件名，我们还在 separator 参数中提供了一个分号。我们这样做是因为如果我们打开文件，我们将会看到所有的点都用分号而不是默认的分隔符(即逗号)来区分。</p><p id="584a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在已经加载了数据，让我们使用 head 方法查看前五行，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="ad7b" class="lh li in ld b gy lj lk l ll lm">df.head()</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ln"><img src="../Images/8534c8853fa933f5ca986adb56323d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IdQKPctlKRvZhWIw8WlICg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="f353" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们现在将比较箱线图和 boxen 图，并尝试理解为什么需要创建另一个类似于箱线图的可视化。</p><p id="ac17" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们为蘑菇帽直径创建一个简单的盒状图。</p><p id="2345" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以实现以下目标:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="9fcf" class="lh li in ld b gy lj lk l ll lm">sns.boxplot(x=df['cap-diameter'])</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lo"><img src="../Images/761431e1aba107b73583e625b5f21508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hYsJ3bcf5vSku1jDJcmlvg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="417f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以看到，有许多数据点被标记为异常值。正如在箱线图文章中所讨论的，seaborn 将“Q3 + 1.5 * IQR”标记为图表上的须。</p><p id="df9a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">从上面这一点来看，我们观察到许多数据点，我们没有分析它们的分布，这是箱线图的主要缺点。</p><p id="7deb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">数学上，当我们考虑一个分布遵循正态分布的数据集时。我们知道四分位距(IQR)占数据的 50 %,盒须图覆盖了约 99.3%的数据。</p><p id="2d73" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上面直接暗示了盒图中异常值的百分比总是 0.7%，不管我们正在分析的数据集大小如何。</p><p id="def3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">例如，如果我们有一个包含 500，000 个点的数据集，我们将有 3500 个数据点作为异常值。当在箱线图上绘制时，我们可以想象如果 3500 个数据点混杂在一条线上，图表看起来会有多混乱。</p><p id="fb0f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">与上面显示的样本盒图相比，它看起来更加拥挤。</p><p id="7542" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">boxen 图的出现是为了解决盒图在分析大型数据集时出现的问题。</p><p id="80e6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们创建一个简单的 boxen 图，看看实际情况。我们将采用与箱线图相同的数据点，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b215" class="lh li in ld b gy lj lk l ll lm">sns.boxenplot(x=df['cap-diameter']);</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ln"><img src="../Images/8269c887c6957328e17612d7e8165921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zytSLeby9KLQZC47gfCptA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="bc22" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">为了更详细地查看图表，让我们使用 matplotlib 来增加 boxen 和 box 图的图形大小。</p><p id="a849" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以使用以下命令来实现这一点:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="d9ce" class="lh li in ld b gy lj lk l ll lm">fig, ax = plt.subplots(figsize = (12, 8))  <br/>fig = sns.boxenplot(x=df['cap-diameter'])<br/>plt.show()</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lp"><img src="../Images/e5cf11b82ced4a9ca028474b538fc086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XiOOjd3Bd_IBU1IlYBPaqA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b6e2" class="lh li in ld b gy lj lk l ll lm">fig, ax = plt.subplots(figsize = (12, 8))  <br/>fig = sns.boxplot(x=df['cap-diameter'])<br/>plt.show()</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lq"><img src="../Images/2aabb0e264130a73ba7e2bd57fcc4170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6dzlM82WfCT7wWYChaQiLw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="9eba" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以看到，boxen 图不那么杂乱，给了我们更详细的信息。</p><p id="652b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在我们来试着理解一下博森剧情到底想传达什么。</p><p id="7b47" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">boxen 图也称为字母值图，因为每个方框代表字母表中的一个字母。最里面的方框就是我们在方框图中看到的方框。额外的框遵循将中值除以 2 的逻辑。</p><p id="a2bd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们举个例子来理解这一点:</p><p id="cbd3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">假设我们有以下数字:</p><p id="e471" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi">3, 3, 6, 7, 7, 10, 10, 10, 11, 13, 30.</p><p id="a163" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">第一步是检查值是否按升序排列。</p><p id="f0f2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在我们的例子中，上面的数字已经按顺序排列了。</p><p id="e966" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下一步是计算数据的中位数。</p><p id="e832" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们知道中位数是数据集的中间点。</p><p id="6131" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在我们的例子中，我们有 11 个数字，所以我们需要取数据集的中间数字 10。</p><p id="2d98" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3，3，6，7，7，<strong class="kb io"> 10 </strong>，10，10，11，13，30。</p><p id="d07e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们还可以使用以下公式找到与中位数相关的一批数字的深度:</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/ed5a71068ad000f3756910f30c587595.png" data-original-src="https://miro.medium.com/v2/resize:fit:248/format:webp/1*sSlDhZ6pGmmjIdZmrPX0iw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="9dc0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里，depth_m 代表中值深度，可以使用上面的等式来计算。</p><p id="4c41" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里 n 是所考虑的数据中值的数量。</p><p id="0cd9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，将该公式应用于我们的数据，我们得到(11 + 1)/2，即 6。</p><p id="7446" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以中位数的深度是第 6 个数字，即 10。从另一个角度来看，整个数据的中值具有最高的深度，即 6。最小和最大数字在数据中的最低深度为 1。</p><p id="5030" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，我们需要计算什么是众所周知的中位数的铰链。计算类似于我们在盒图文章中看到的。</p><p id="2c90" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们将在中间值的两侧创建两半，并计算每一半的中点。</p><p id="363d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在我们的例子中，我们有:</p><p id="7195" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">左半部分:</p><p id="7270" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">三，三，<strong class="kb io">六</strong>，七，七。</p><p id="57c4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">右半部分:</p><p id="be3b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">10 日，<strong class="kb io"> 11 日，</strong> 13 日，30 日。</p><p id="b39d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">两半的中点被认为是中线的铰链。计算铰链的另一种方法是通过以下公式:</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/d308357433f85da072a5085346e8b656.png" data-original-src="https://miro.medium.com/v2/resize:fit:242/0*Xt9D8rwJiYetNpNS"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="64f8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里，depth_h 代表铰链深度，可以使用上面的等式计算。<br/> d(M)代表中央分隔带的深度。<br/>因此，将公式应用于我们的数据，我们得到 6/2，即 3，第三个数字是铰链，即上面显示的 6 和 11。</p><p id="4a54" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">铰链的计算类似于四分位数的计算，如果数据点的数量不同，我们会使用上面所示的公式得到稍微不同的铰链结果。</p><p id="8d82" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">与上面的计算类似，如果我们在未来的步骤中继续上面计算深度并划分它的过程，我们将开始获得它旁边的盒子的值。</p><p id="dbcb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们计算一下八分之一的深度。我们称之为八分之一，因为我们将把外面的四分之一除以 2。</p><p id="7016" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">公式如下:</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/98c34a7a4302accbf3c0fe7807780f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/0*Yig_9NboeToN-pQD"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="1e0e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里 depth_e 代表深度的八分之一，d(H)是上一步计算的铰链深度。</p><p id="e459" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">应用我们得到的值(3 + 1)/2，即 2</p><p id="fe72" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以这些数字取自之前计算的两半。</p><p id="68fd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">左半部分:</p><p id="9bc7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">3，3，<strong class="kb io"> 6 </strong>，7，7。</p><p id="d31b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">右半部分:</p><p id="f989" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">十日，<strong class="kb io">十日，</strong>十一日，三十日。</p><p id="a701" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以在我们的例子中，八分之一的深度是 3 和 10。</p><p id="3dcf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们继续这样做，直到我们用尽所有的数字，我们达到 1 的深度。</p><p id="ec13" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">字母的分配方式是:</p><ol class=""><li id="1ca8" class="lu lv in kb b kc kd kg kh kk lw ko lx ks ly kw lz ma mb mc bi translated">中间值被指定为字母“M”。</li><li id="fdb8" class="lu lv in kb b kc md kg me kk mf ko mg ks mh kw lz ma mb mc bi translated">接下来，我们以相反的顺序从 F 开始，所以 F 被指定为四度，E 是八度，D 是十六度，依此类推。</li></ol><p id="8d8e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下表显示了前 20 个字母值(摘自 2011 年 12 月 2 日发表的关于字母值图的研究论文):</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mi"><img src="../Images/4654aef54e67ff7e42cee7748085ab01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5CRXQgxJdEU0eRG8jvOeDQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">https://vita.had.co.nz/papers/letter-value-plot.pdf<a class="ae kx" href="https://vita.had.co.nz/papers/letter-value-plot.pdf" rel="noopener ugc nofollow" target="_blank">第 9 页</a></figcaption></figure><p id="b451" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">对于任何有兴趣阅读该研究论文的人，您可以在 boxen plots 的<a class="ae kx" href="https://seaborn.pydata.org/generated/seaborn.boxenplot.html" rel="noopener ugc nofollow" target="_blank"> seaborn 文档页面上找到它。我也将在下面的参考部分链接相同的内容。</a></p><p id="cbfe" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在我们已经了解了 boxen 图的工作原理，让我们把注意力转移到学习如何用 python 编写字母值图。</p><p id="92b1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在上面的讨论中，我们已经学习了如何创建一个简单的 boxen 图。<br/>现在让我们创建一个更复杂的博森情节。</p><p id="82f6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们来分析一下不同生境条件下蘑菇的菌盖直径。</p><p id="7420" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以这样做:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="4982" class="lh li in ld b gy lj lk l ll lm">fig, ax = plt.subplots(figsize = (10, 5))  <br/>fig = sns.boxenplot(x='habitat',y='cap-diameter', data=df)<br/>plt.show()</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/333d7b60d6a45b465cbe4fe3ddca6e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CBHZRzv-g9aQI5giMH72sQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="4df8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，我们来讨论一下博森剧情最热门的参数。</p><p id="1ef7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">第一行是色调参数，用于根据特定的列给图着色。<br/>我们将利用蘑菇上的圆环来改变图的颜色，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="1f0d" class="lh li in ld b gy lj lk l ll lm">fig, ax = plt.subplots(figsize = (10, 5))  <br/>fig = sns.boxenplot(x='habitat',y='cap-diameter', data=df, <br/>hue='has-ring')<br/>plt.show()</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/521dae752a09d2a9e75491ef00d926ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*omIFruHG2Dnz56g9Qe_ERA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="4ab8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">从图中我们可以看出，有蘑菇不发育年轮的栖息地。</p><p id="6ed1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，我们有 order 参数，它允许我们改变图中分类变量的顺序。</p><p id="79e9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">例如，我们将颠倒图表中栖息地的顺序，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="443b" class="lh li in ld b gy lj lk l ll lm">fig, ax = plt.subplots(figsize = (10, 5))  <br/>fig = sns.boxenplot(x='habitat',y='cap-diameter', data=df, <br/>hue='has-ring', order=sorted(df['habitat'].unique(),reverse=True))<br/>plt.show()</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/9c1319feea408359986cfa86829f9113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oKVnpsj7ggD_hizVZHWKOg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="bd83" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们分解一下上面的代码:</p><p id="3aeb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">步骤 1 </strong>:我们已经使用 matplotlib 将图形大小固定为 10 乘 5</p><p id="fc5c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第二步</strong>:在 order 参数中，我们使用了带有 reverse 参数的 sorted 函数为真，并以相反的顺序得到栖息地值。</p><p id="f06f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">第三步</strong>:使用 matplotlib 的 show 函数，得到生成的图表。</p><p id="a5b5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，我们有色调顺序，它可以改变色调中变量的顺序，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="7ca3" class="lh li in ld b gy lj lk l ll lm">fig, ax = plt.subplots(figsize = (10, 5))  <br/>fig = sns.boxenplot(x='habitat',y='cap-diameter', data=df, <br/>hue='has-ring',                   order=sorted(df['habitat'].unique(),reverse=True), <br/>hue_order=['f','t'])<br/>plt.show()</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/6c4447de59e47b93420ef660ff714695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WJEappIxi-vUIR6trRH5hg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="a372" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">与之前的图相比，这里我们颠倒了色调顺序。</p><p id="56ac" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，我们使用调色板参数来改变创建的图表的颜色模式。</p><p id="18e8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们已经在以前的文章中广泛讨论了 palette 参数，所以我将在下面展示一个使用它的例子:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="c058" class="lh li in ld b gy lj lk l ll lm">fig, ax = plt.subplots(figsize = (10, 5))  <br/>fig = sns.boxenplot(x='habitat',y='cap-diameter', data=df, <br/>hue='has-ring',                 order=sorted(df['habitat'].unique(),reverse=True), palette='coolwarm')<br/>plt.show()</span></pre><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/15823fb2316e133fb3dc208fd8102d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eOX-2WpdFD-MxIZsrE5m7A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="e23f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">感谢优秀的 Seaborn 团队将研究论文放入文档中！！！</p><p id="fb5c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">参考文献:</strong></p><ol class=""><li id="90f4" class="lu lv in kb b kc kd kg kh kk lw ko lx ks ly kw lz ma mb mc bi translated">【https://seaborn.pydata.org/generated/seaborn.boxenplot.html】T5<a class="ae kx" href="https://seaborn.pydata.org/generated/seaborn.boxenplot.html" rel="noopener ugc nofollow" target="_blank">T6</a></li><li id="1c39" class="lu lv in kb b kc md kg me kk mf ko mg ks mh kw lz ma mb mc bi translated"><a class="ae kx" href="https://vita.had.co.nz/papers/letter-value-plot.pdf" rel="noopener ugc nofollow" target="_blank"><em class="mo">https://vita.had.co.nz/papers/letter-value-plot.pdf</em></a></li><li id="0374" class="lu lv in kb b kc md kg me kk mf ko mg ks mh kw lz ma mb mc bi translated"><a class="ae kx" href="https://archive.ics.uci.edu/ml/datasets/Secondary+Mushroom+Dataset" rel="noopener ugc nofollow" target="_blank"> <em class="mo"> UCI 机器学习知识库</em> </a></li></ol><p id="dec2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下次见！</p></div></div>    
</body>
</html>