<html>
<head>
<title>Deploy a NodeJS Application on Digital Ocean Droplet in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 5 分钟内在数字海洋水滴上部署 NodeJS 应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploy-a-nodejs-application-on-digital-ocean-droplet-in-5-minutes-936b4835c440?source=collection_archive---------7-----------------------#2022-03-05">https://blog.devgenius.io/deploy-a-nodejs-application-on-digital-ocean-droplet-in-5-minutes-936b4835c440?source=collection_archive---------7-----------------------#2022-03-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ec5f697cf5651230d0ec9d656349f781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nu1R-pOYBPPZYpVqb4MWIQ.png"/></div></div></figure><p id="3f95" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了将我们的应用程序托管到数字海洋水滴中，我们将使用</p><ol class=""><li id="de10" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">Nginx，它是一个 web 服务器(如果你以前没用过也不用担心)</li><li id="2c9b" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">一个基本的 NodeJS 应用程序(您可以在您的应用程序中尝试一下)</li><li id="aed8" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">docker——这不是必须的，但是它使部署变得更加容易</li></ol><p id="2a3a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以从创建一个基本的 NodeJS 应用程序开始，如果你现在还没有，你可以从<a class="ae lh" href="https://github.com/Guneetsinghtuli/basic-node.git" rel="noopener ugc nofollow" target="_blank">这里</a>克隆它。现在我们在同一个页面上，我们可以开始编辑 Dockerfile 文件。</p><figure class="lj lk ll lm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi li"><img src="../Images/bab6368f10684a0575b95e7b751c0e99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LpyD68oVt9Iyp1gqpFhwGw.png"/></div></div></figure><p id="9ae5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以复制上图中的命令，要了解每个命令的更多信息，你可以阅读<a class="ae lh" href="https://guneetsinghtuli.medium.com/dockerize-your-nodejs-application-in-5-minutes-ad0ee052b75e" rel="noopener">这里</a>。确保安装 Docker 桌面来运行和测试 Docker 文件。</p><p id="2b58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了通过创建容器来测试 Dockerfile，您可以运行以下命令。首先，您需要使用命令创建一个映像</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="70d5" class="ls lt in lo b gy lu lv l lw lx">docker build --tag node-app .</span></pre><p id="99b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，您可以使用命令从映像<strong class="jx io"> node-app </strong>创建一个容器。成功创建容器后，您可以尝试在<strong class="jx io">"</strong><a class="ae lh" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">http://localhost:3000/</strong></a><strong class="jx io">"上进行操作，这将返回您“嘿，你好！”</strong>。</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="d935" class="ls lt in lo b gy lu lv l lw lx">docker run -p 3000:3000 -d --name node-app-container node-app</span></pre><p id="5d56" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你已经成功地达到了这里，你会很棒，如果你发现任何问题，请确保你评论出来，以便我们可以帮助你。</p></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><p id="1d6b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们已经完成了设置应用程序的第一件事，现在是配置 Nginx 服务器的时候了，为此我们必须创建另一个运行 Ngnix 的容器。</p><p id="52f3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由于处理许多容器变得很麻烦，我会使用<strong class="jx io"> docker-compose </strong>来处理。让我们从<strong class="jx io">创建一个名为“docker-compose . yml”</strong>的文件开始。docker-compose 文件将包含我们可以在一个命令中启动和停止的所有服务(容器)</p><figure class="lj lk ll lm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mf"><img src="../Images/794aeb823bd4bfa85c0ec01deda98580.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Wm7RaRJMqjCGqZJ7jeWjg.png"/></div></div></figure><p id="757f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">确保复制代码，因为它与上面的缩进相同，因为在 yaml 文件中缩进非常重要。如果你写的一切都很完美，我们可以创建一个 nginx 文件夹，在这个文件夹中我们将拥有 nginx 的所有配置。</strong></p><p id="3c76" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 nginx 文件夹中创建一个“default.conf”文件。</p><figure class="lj lk ll lm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mg"><img src="../Images/e153a1c6dec505873046cbd94f4edad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*95u-Cd2BsnfqRoma5urAsw.png"/></div></div></figure><p id="8453" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成 nginx 和 docker-compose 的配置后，可以使用下面的命令测试一切是否顺利</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="2a19" class="ls lt in lo b gy lu lv l lw lx">docker-compose up -d</span></pre><p id="931b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果一切顺利，你会看到“嘿，你好！”在“<a class="ae lh" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>上”。</p><p id="77a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">祝贺您，因为您已经成功解决了部署过程中最困难的问题，所以让我们来完成所有其他步骤吧。</p><p id="b1aa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">是时候在数字海洋上创建一个水滴了，我会选择一个 Ubuntu 5$机器，因为我只需要学习。在您的 droplet 准备好之后，您可以使用</p><figure class="lj lk ll lm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mh"><img src="../Images/dde21b0b8d5cf32d5338bea3350f6fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fr1WFVXG5q7eVB8m70m4jQ.png"/></div></div></figure><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="c007" class="ls lt in lo b gy lu lv l lw lx">ssh root@&lt;your-ip-address&gt;</span></pre><p id="31c8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们需要将 Docker 安装到这个服务器或 droplet 中。你可以本本<a class="ae lh" href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-20-04" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"/></a><strong class="jx io">来了解一下如何安装它。</strong></p><p id="e78e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要确认 docker 是否成功下载，您可以使用以下命令。其中显示了当前安装的 docker 版本。默认情况下，您可能最终没有安装 docker-compose，但是可以使用下面提到的命令来安装它</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="ac18" class="ls lt in lo b gy lu lv l lw lx">docker -v<br/>sudo apt install docker-compose</span></pre><p id="8fb3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当你在服务器上安装完所有的东西后，是时候把源代码放到服务器上了，你可以把所有的代码提交到你自己的 github 库，然后在服务器上下载。</p><p id="d6c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这会将您的源代码克隆到服务器上。这不是部署应用程序的完美方式，但是因为您是第一次这样做，所以这不会是一个问题。</p><p id="5e98" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">我很快会写另一篇关于最佳部署方式的文章，所以请务必订阅，现在您可以使用</strong>来克隆存储库了</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="28ce" class="ls lt in lo b gy lu lv l lw lx">git clone &lt;code-repo&gt;<br/>cd &lt;repo&gt;</span></pre><p id="f37e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在只需使用</p><pre class="lj lk ll lm gt ln lo lp lq aw lr bi"><span id="caa3" class="ls lt in lo b gy lu lv l lw lx">docker-compose up -d</span></pre><p id="bb82" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">尝试点击 IP，检查是否一切正常，确保运行 hhtp 连接，而不是 https，否则你什么也看不到。如果一切都做得很成功，你会唱“嘿，你好！”</p><blockquote class="mi mj mk"><p id="7b51" class="jv jw ml jx b jy jz ka kb kc kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ks ig bi translated"><strong class="jx io">我希望你喜欢它，并从这个故事中学到很多，如果你不想错过我发布另一个故事的任何时间，请确保关注我并订阅以获得电子邮件更新。</strong></p></blockquote><p id="5d5d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ml">你可以关注我的</em><a class="ae lh" href="https://twitter.com/Guneetsingh02" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ml">Twitter</em></strong></a><em class="ml">和</em><a class="ae lh" href="https://www.linkedin.com/in/guneetsinghtuli/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ml">Linkedin</em></strong></a><em class="ml">在我分享更多信息的地方。</em></p></div></div>    
</body>
</html>