<html>
<head>
<title>Form Validation in a Vue 3 App with Vee-Validate 4 — Yup Schemas, Radio Buttons, and Checkboxes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vee-Validate 4在Vue 3应用程序中进行表单验证——包括模式、单选按钮和复选框</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/form-validation-in-a-vue-3-app-with-vee-validate-4-yup-schemas-radio-buttons-and-checkboxes-c0068d151ae2?source=collection_archive---------3-----------------------#2021-03-06">https://blog.devgenius.io/form-validation-in-a-vue-3-app-with-vee-validate-4-yup-schemas-radio-buttons-and-checkboxes-c0068d151ae2?source=collection_archive---------3-----------------------#2021-03-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ff702b55257f93ce7e9bca341553c25d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yVHGLU-rK0VXS0hb"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@shs521?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">苏珊·霍尔特·辛普森</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="bd9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">表单验证是任何应用程序的重要组成部分。</p><p id="620f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何在我们的Vue 3应用程序中使用Vee-Validate 4进行表单验证。</p><h1 id="1bbc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">是数据中的模式</h1><p id="0504" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">让我们的验证模式反应是一个不必要的开销，我们可以消除它。</p><p id="39cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要做到这一点，我们可以用<code class="fe me mf mg mh b">setUp</code>方法添加模式，或者用我们的模式调用<code class="fe me mf mg mh b">markRaw</code>,使其成为非反应性的。</p><p id="3821" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f301" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;Form v-slot="{ errors }" :validation-schema="schema"&gt;<br/>    &lt;Field as="input" name="email" /&gt;<br/>    &lt;span&gt;{{ errors.email }}&lt;/span&gt;<br/>    &lt;br /&gt;</span><span id="b5d6" class="mq lc iq mh b gy mv ms l mt mu">    &lt;Field as="input" name="password" type="password" /&gt;<br/>    &lt;span&gt;{{ errors.password }}&lt;/span&gt;<br/>    &lt;br /&gt;</span><span id="f3ab" class="mq lc iq mh b gy mv ms l mt mu">    &lt;button&gt;Submit&lt;/button&gt;<br/>  &lt;/Form&gt;<br/>&lt;/template&gt;</span><span id="65e8" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import { Form, Field } from "vee-validate";<br/>import * as yup from "yup";</span><span id="92c2" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  components: {<br/>    Form,<br/>    Field,<br/>  },<br/>  setup() {<br/>    const schema = yup.object().shape({<br/>      email: yup.string().required().email(),<br/>      password: yup.string().required().min(8),<br/>    });</span><span id="6360" class="mq lc iq mh b gy mv ms l mt mu">    return {<br/>      schema,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="a591" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">setUp</code>方法中创建我们的模式。</p><p id="0d84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只返回由Yup返回的对象，因此<code class="fe me mf mg mh b">schema</code>属性不会是被动的。</p><p id="e42b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了给<code class="fe me mf mg mh b">markRaw</code>打电话，我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fa23" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;Form v-slot="{ errors }" :validation-schema="schema"&gt;<br/>    &lt;Field as="input" name="email" /&gt;<br/>    &lt;span&gt;{{ errors.email }}&lt;/span&gt;<br/>    &lt;br /&gt;</span><span id="aa1f" class="mq lc iq mh b gy mv ms l mt mu">    &lt;Field as="input" name="password" type="password" /&gt;<br/>    &lt;span&gt;{{ errors.password }}&lt;/span&gt;<br/>    &lt;br /&gt;</span><span id="9389" class="mq lc iq mh b gy mv ms l mt mu">    &lt;button&gt;Submit&lt;/button&gt;<br/>  &lt;/Form&gt;<br/>&lt;/template&gt;</span><span id="4e6f" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import { markRaw } from "vue";<br/>import { Form, Field } from "vee-validate";<br/>import * as yup from "yup";</span><span id="80d4" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  components: {<br/>    Form,<br/>    Field,<br/>  },<br/>  data() {<br/>    const schema = markRaw(<br/>      yup.object().shape({<br/>        email: yup.string().required().email(),<br/>        password: yup.string().required().min(8),<br/>      })<br/>    );</span><span id="cca0" class="mq lc iq mh b gy mv ms l mt mu">    return {<br/>      schema,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="faeb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用我们的Yup模式调用<code class="fe me mf mg mh b">markRaw</code>,使其成为非反应性的。</p><h1 id="4de9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">单选按钮</h1><p id="06fb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Vee-Validate 4来验证单选按钮。</p><p id="1149" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e3cd" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;Form :validation-schema="schema" @submit="onSubmit"&gt;<br/>    &lt;Field name="drink" type="radio" value=""&gt;&lt;/Field&gt; None<br/>    &lt;Field name="drink" type="radio" value="Tea"&gt;&lt;/Field&gt; Tea<br/>    &lt;Field name="drink" type="radio" value="Coffee"&gt;&lt;/Field&gt; Coffee<br/>    &lt;ErrorMessage name="drink" /&gt;<br/>  &lt;/Form&gt;<br/>&lt;/template&gt;</span><span id="51fb" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import { Form, Field, ErrorMessage } from "vee-validate";</span><span id="fe2c" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  components: {<br/>    Form,<br/>    Field,<br/>    ErrorMessage,<br/>  },<br/>  data() {<br/>    return {<br/>      schema: {<br/>        drink: (value) =&gt; {<br/>          if (value) {<br/>            return true;<br/>          }</span><span id="efa4" class="mq lc iq mh b gy mv ms l mt mu">          return "You must choose a drink";<br/>        },<br/>      },<br/>    };<br/>  },<br/>  methods: {<br/>    onSubmit(values) {<br/>      alert(JSON.stringify(values, null, 2));<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="247b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">type</code>设置为<code class="fe me mf mg mh b">radio</code>的<code class="fe me mf mg mh b">Field</code>组件用于创建单选按钮。</p><p id="2b58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">data</code>方法中，我们用<code class="fe me mf mg mh b">drink</code>方法返回<code class="fe me mf mg mh b">schema</code>反应属性来验证我们的单选按钮。</p><p id="9c49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">value</code>具有由<code class="fe me mf mg mh b">value</code>属性指定的检查值。</p><p id="f53c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果选择有效，我们返回<code class="fe me mf mg mh b">true</code>，否则返回错误消息。</p><p id="8dc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们显示<code class="fe me mf mg mh b">ErrorMessage</code>组件来显示错误消息。</p><h1 id="709c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">复选框</h1><p id="4bad" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Vee-Validate 4添加复选框验证。</p><p id="b050" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7618" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;Form :validation-schema="schema" @submit="onSubmit"&gt;<br/>    &lt;Field name="drink" type="checkbox" value="Milk"&gt;&lt;/Field&gt; Milk<br/>    &lt;Field name="drink" type="checkbox" value="Tea"&gt;&lt;/Field&gt; Tea<br/>    &lt;Field name="drink" type="checkbox" value="Coffee"&gt;&lt;/Field&gt; Coffee<br/>    &lt;ErrorMessage name="drink" /&gt;<br/>  &lt;/Form&gt;<br/>&lt;/template&gt;</span><span id="ec56" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import { Form, Field, ErrorMessage } from "vee-validate";</span><span id="c57a" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  components: {<br/>    Form,<br/>    Field,<br/>    ErrorMessage,<br/>  },<br/>  data() {<br/>    return {<br/>      schema: {<br/>        drink: (value) =&gt; {<br/>          if (Array.isArray(value) &amp;&amp; value.length) {<br/>            return true;<br/>          }<br/>          return "You must choose a drink";<br/>        },<br/>      },<br/>    };<br/>  },<br/>  methods: {<br/>    onSubmit(values) {<br/>      alert(JSON.stringify(values, null, 2));<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="238d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为复选框添加验证。我们将<code class="fe me mf mg mh b">type</code>属性设置为<code class="fe me mf mg mh b">checkbox</code>来呈现一个复选框。</p><p id="16a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果选中了任何复选框，<code class="fe me mf mg mh b">drink</code>方法将所有选中的值放在一个数组中。</p><p id="a7ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果选择有效，我们返回<code class="fe me mf mg mh b">true</code>，否则返回错误消息。</p><p id="903b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们显示<code class="fe me mf mg mh b">ErrorMessage</code>组件来显示错误消息。</p><h1 id="daba" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="bd55" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在Vue 3应用程序中使用Vee-Validate 4将Yup模式设置为非反应模式，以减少开销并验证单选按钮和复选框。</p></div></div>    
</body>
</html>