<html>
<head>
<title>Express.js Server for Angular Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular 项目的 Express.js 服务器</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/express-js-server-for-angular-project-2ab62f85a82c?source=collection_archive---------0-----------------------#2022-03-29">https://blog.devgenius.io/express-js-server-for-angular-project-2ab62f85a82c?source=collection_archive---------0-----------------------#2022-03-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="410d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Express.js 是 Node.js web 应用程序的轻量级框架。它创建了托管和管理 web/移动应用程序的服务器，具有快速和强大的性能。</p><p id="396b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它可用作 NPM 模块。这使得 Node.js 的安装成为使用 Express.js 的先决条件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/ac1814a16cc7430332ed63fbcc8c03f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-LpyzaoGsKV2M_zt"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">马修·施瓦茨在<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="6ef8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要安装 express.js，请导航到 angular 项目目录(此处为'<em class="kz">演示应用程序【T5])，并通过 CLI 键入以下命令:</em></p><pre class="kj kk kl km gt la lb lc ld aw le bi"><span id="fa32" class="lf lg in lb b gy lh li l lj lk">npm install express</span></pre><p id="f6ea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的代码行将在当前项目中安装 express (js)模块。使用<em class="kz"> -g </em> ( <em class="kz"> -global </em>)标志全局安装模块。</p></div><div class="ab cl ll lm hr ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ig ih ii ij ik"><p id="249d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建一个<em class="kz"> server.js </em>脚本文件，导入 express 模块。指定一个端口并调用 express app 变量上的<em class="kz"> listen() </em>来激活您的服务器。</p><pre class="kj kk kl km gt la lb lc ld aw le bi"><span id="883c" class="lf lg in lb b gy lh li l lj lk">const express = require('express');<br/>const app = express();<br/>const port = 3000;</span><span id="cbc5" class="lf lg in lb b gy ls li l lj lk"><br/>......//server logic</span><span id="3103" class="lf lg in lb b gy ls li l lj lk"><br/>app.listen(port, () =&gt; {<br/>    console.log(`My Demo App listening on ${port} port`<br/>});</span></pre></div><div class="ab cl ll lm hr ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ig ih ii ij ik"><p id="5226" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">服务器监听请求和响应。这些请求是 HTTP 请求。我们可以为所有 HTTP 请求创建回调。每个 HTTP 请求主要有三个参数供开发人员使用:</p><ul class=""><li id="8739" class="lt lu in jm b jn jo jr js jv lv jz lw kd lx kh ly lz ma mb bi translated">统一资源定位器</li><li id="f72c" class="lt lu in jm b jn mc jr md jv me jz mf kd mg kh ly lz ma mb bi translated">请求变量</li><li id="d6f9" class="lt lu in jm b jn mc jr md jv me jz mf kd mg kh ly lz ma mb bi translated">响应变量</li></ul><pre class="kj kk kl km gt la lb lc ld aw le bi"><span id="fae9" class="lf lg in lb b gy lh li l lj lk">app.get('/demo-url1', (req, res) =&gt; {<br/>  res.send('Get Request')<br/>});</span><span id="d610" class="lf lg in lb b gy ls li l lj lk">app.post('/demo-url2', (req, res) =&gt; {<br/>  res.send('Post Request')<br/>});</span></pre><p id="1a47" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于所有与任何 URL 都不匹配的请求，express 返回一个<strong class="jm io"> 404 Not Found </strong>错误。</p><p id="b94e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">服务器是完整的，可以通过运行服务器文件来使用。</p><pre class="kj kk kl km gt la lb lc ld aw le bi"><span id="7385" class="lf lg in lb b gy lh li l lj lk">node server.js</span></pre><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure></div><div class="ab cl ll lm hr ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ig ih ii ij ik"><p id="cebd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 Angular 中，当我们创建一个项目时，会创建一个名为'<em class="kz"> demo-app </em>'的父目录。它包含了<em class="kz"> src </em>子目录，其中包含了我们应用程序的实际程序文件。在构建应用程序时，会在父目录中创建另一个子目录<em class="kz"> dist </em>。<em class="kz"> dist </em>目录是生产模式文件的容器。使用<em class="kz"> ng build </em>构建 angular 项目。</p><pre class="kj kk kl km gt la lb lc ld aw le bi"><span id="57a3" class="lf lg in lb b gy lh li l lj lk">ng build</span></pre><p id="2b70" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的 angular 项目的单页应用程序可在<em class="kz">demo-app/dist/demo-app/index . html</em>获得。这是需要通过 HTTP 请求返回给客户端的网页。</p><p id="0036" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于 URL 路由由 angular 应用负责，express 服务器可以跳过这一步，将所有请求返回给 index.html 页面。“<em class="kz"> * </em>”用作“<em class="kz">任何 URL </em>”的通配符。</p><p id="19d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">响应参数变量有一个<em class="kz"> sendFile() </em>方法，可用于在 HTTP 请求中返回文件。<em class="kz"> path </em>模块导入解析响应中要发送的文件路径。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="b5a2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的<em class="kz"> server.js </em>文件中，<em class="kz"> app.get </em>监听所有 get 请求(这里'<em class="kz"> * </em>代表'<em class="kz">任意 URL </em>')，并将<em class="kz"> dist/demo-app/index.html </em>文件返回给它们所有人。进一步由角度逻辑来处理不同的 URL。</p><p id="56c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意:将<em class="kz"> server.js </em>文件放在项目的父目录中。</p><p id="e130" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在浏览器中打开<em class="kz"> localhost:3000 </em>运行中的服务器。</p></div><div class="ab cl ll lm hr ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ig ih ii ij ik"><h1 id="6531" class="mj lg in bd mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf bi translated"><strong class="ak">托管静态文件</strong></h1><p id="16e3" class="pw-post-body-paragraph jk jl in jm b jn ng jp jq jr nh jt ju jv ni jx jy jz nj kb kc kd nk kf kg kh ig bi translated">Angular 将所有静态文件存储在一个子目录中，项目名称创建在<em class="kz"> dist </em>子目录下(即在'<em class="kz"> dist/demo-app </em>'内)。和资产(图像、字体、图标、视频、音频等。)在<em class="kz">资产</em>文件夹下(即'<em class="kz"> dist/demo-app/assets </em>'里面)。</p><p id="c1b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，当我们需要访问一个图像文件时，我们必须通过这样的路径:“dist/demo-app/assets/image.png”。所以可以通过使用<em class="kz"> express.static </em>中间件来减少这个长路径，提高安全性。因为虚拟路径是为我们的资源创建的，所以实际路径对公众是隐藏的。</p><pre class="kj kk kl km gt la lb lc ld aw le bi"><span id="51a4" class="lf lg in lb b gy lh li l lj lk">app.use(express.static('dist/demo-app/'));</span></pre><p id="9db3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kz">完成 server.js </em></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="a447" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要了解更多信息，请浏览 express.js 文档。</p></div></div>    
</body>
</html>