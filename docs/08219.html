<html>
<head>
<title>How to set up a form with reusable fields and automatic tests on push in Github branch simply.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何简单地在 Github 分支中设置一个带有可重用字段的表单和自动测试 push？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-set-up-a-form-with-reusable-fields-and-automatic-tests-on-push-in-github-branch-simply-fe4576b05c93?source=collection_archive---------3-----------------------#2022-05-27">https://blog.devgenius.io/how-to-set-up-a-form-with-reusable-fields-and-automatic-tests-on-push-in-github-branch-simply-fe4576b05c93?source=collection_archive---------3-----------------------#2022-05-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0a0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本教程的灵感来自 Laith Academy 的视频“React Testing Library 速成班”(没有定制钩子或可重用组件)。</p><p id="7d42" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了让教程尽可能贴近现实，我做了这个练习，但是把它放在一个真实的专业背景下。因此，适应→可重用输入(真实世界的用例)和关注点分离的定制钩子。</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="2710" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我们创建一个 React 应用程序:npx create-React-app automation-testing-React</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/aebfe605dc6576ac892487c57fc4addb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p4zrU2Lz112xuqz0jpobVg.png"/></div></div></figure><p id="8c1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在你有了一个新创建的 react 应用，让我们开始编码吧…</p><p id="4980" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我创建了一个组件“CardContainer ”,简单地赋予表单一些样式。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lb"><img src="../Images/2da932253d1b950012894bfd50311246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LhdrF5_cCKeWQua4FIAeXQ.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">这个组件有两个参数，children(这将是包含在两个标记之间的代码。)和背景，以便根据所关注的卡放置不同的背景。</figcaption></figure><p id="0c5a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我创建一个这样的表单组件。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lb"><img src="../Images/d5a8c0f02f206e1f8bd3d73be641a907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LdaHXYeGfF71ukd84cr30w.png"/></div></div></figure><p id="d2ae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我添加一些 css 来给我的应用添加一些风格。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lg"><img src="../Images/ac175743f3113aca7e090ea4df4a4d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pvmnWKpqUThOlxT0BtZ3ng.png"/></div></div></figure><p id="4751" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我是这样导入和使用 App.js 中的组件的。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lh"><img src="../Images/8e8af2ff24de96adfd483a63eca5bc7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nDwEWafeYNAHAAxQo_17Ow.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">你有一张标题卡&amp;一张表格卡。</figcaption></figure><p id="f166" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个阶段，你有这个…</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi li"><img src="../Images/b99bab44d3e709177edd324ab10eba06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BqHfJP80V00d1vd8WO1DZg.png"/></div></div></figure><p id="61fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我像这样创建可重用组件“输入”…</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lj"><img src="../Images/37199d6d00d75b79f2b7febea0e56b31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EdYBpTC1Q8E9PtewSfi69A.png"/></div></div></figure><p id="165d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><p id="3620" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个组件中，有几个参数作为道具，例如:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lk"><img src="../Images/6c9e6164441a62700d4cd6e52ddf3b83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s2XY9SXVzquRh25U2JuauQ.png"/></div></div></figure><p id="2c3f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">-nameLabel:将是字段的名称，<br/> -type:将是字段的类型，<br/>占位符:将是字段中的默认文本，<br/> keyState:将是字段所关注的状态，<br/> setter:顾名思义，这是更改每个输入的状态的 setter，<br/>和 defaultValues:是初始或当前状态</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="ba0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">handleChange 函数:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/425d0e1f6a42ef372b765ea06812fe6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*6HL7toaUKlW7PqMi0x2qYQ.png"/></div></figure><p id="1b98" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">handleChange 函数是动态的，它传播当前状态并将输入的名称和值添加到我们将在表单组件中创建的对象中。</p><p id="8f96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们修改表单组件！</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lm"><img src="../Images/49ad015425431e4f6e9c1ee9954b5a38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*563IcdHVuQp8ikpBZ68kOw.png"/></div></figure><p id="44cc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/2e699515687860df482808cdadcd27bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*k3Rtcwnqj-mF9SZEdi579w.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">我创建了一个状态，用 email、password 和 password2 作为键，并用一个空字符串来初始化每个字段的状态</figcaption></figure><p id="558f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我像这样创建第一个输入</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lo"><img src="../Images/ea16c6218d7aab77dcfe7f0540119eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*y_5t94eOzCrLrE1FthKzVQ.png"/></div></figure><p id="c859" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这一阶段的结果如下所示</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lp"><img src="../Images/eb7198840f71d5e2e5de165cb09c43bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kj9w4uWObM9zLDpCHcI4Qw.png"/></div></div></figure><p id="2ead" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们添加所有必需的字段和按钮:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/453c28aaefd0422756847a8931ee0e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*ifHBClrdxd9rO9uHhtvF5w.png"/></div></figure><p id="bedb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于样式，我使用在本练习中声明为 style 的变量。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/959599c194682247e3d3c1a9189cc65d.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*8z6Y5SqIILVZgUYIFylBIQ.png"/></div></figure><p id="744e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这一步的结果是:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lh"><img src="../Images/63002a8720416ad1e167fd7ecc21733a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MCKyqWlYeduzurpWB2Ztog.png"/></div></div></figure><p id="0f77" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建我们价值观的控制台日志</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/b19c6bd6d2e09806979beef020a5de2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*zxGdZ-RFUUUIvyzyOajJOA.png"/></div></figure><p id="b60d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果…一切都很好！</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi li"><img src="../Images/1ec8526e2ed2be6b1c8ec2c9c710195f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PdImDCV9SzuyZa14QgvHsA.png"/></div></div></figure></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="7077" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好了，让我们开始实现一些错误消息</p><p id="5694" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在此之前，我们将使用关注点分离… <br/>我创建了一个自定义钩子，我将其命名为 useForm.js</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lt"><img src="../Images/24f22f48836f3169abf33953876e9943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*nY2weBK8Tt0Nz9eF8kj5pw.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">首先，我将我的状态移动到自定义钩子中，就像这样……小心地将状态和 setter 导出到一个对象中。</figcaption></figure><p id="bc5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我用从自定义钩子导入的对象(state &amp; setter)替换我的本地状态。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lu"><img src="../Images/860100e73405dd02bceb0cd308037291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*8Z3lyBv1OEKQ87nK_lDL4A.png"/></div></figure><p id="2927" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一切正常，不会改变结果，除了您的州不再是本地的，而是变成了全球的(多亏了自定义钩子)</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lv"><img src="../Images/aca2620723888f9d8a75076953227eac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hmYYu0J20MGLHtYfYMmL9A.png"/></div></div></figure><p id="1553" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们在我的自定义钩子中添加一些简单情况下的错误消息。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lw"><img src="../Images/63e4052458c21f809abd541328fc7ca5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ThsGVSiYw1_uI-9cKt3Pg.png"/></div></div></figure><p id="4af7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/507def002c44f4fb960b96c04a2bf5c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*HyyNJJ7_pFWjBc_BAZTFZw.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">第一步，我为每种类型的消息(电子邮件和密码)创建一个状态</figcaption></figure><p id="a643" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我用 preventDefault 创建了 handleClick 函数，以便不触发链接到按钮所在表单的事件。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ly"><img src="../Images/9b4fb0cba7b56fd42778570615341957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1226/format:webp/1*hPNBlqApSRcyU22hUKjpyQ.png"/></div></figure><p id="f9a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我为 email 字段添加了两个简单的条件:<br/>1——如果字段为空，以及<br/>2——如果地址不包含@符号。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/fafede92dc274f874f2a6bb6edc644a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*Jm6E7N9wm87eYpWaf8_dlA.png"/></div></figure><p id="f8b3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后在 handleClick 函数中:<br/>我这次为密码字段创建了另外两个条件，<br/> 1 —如果密码或密码 2 字段为空，以及<br/> 2 —如果两个密码不匹配。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ma"><img src="../Images/058052330cfd70ae64f81fb45e03b4a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*SEXNCBHoGM-Va3DRLLr9sA.png"/></div></figure><p id="1425" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所有这些条件对于本练习来说都是非常简单的情况。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/9fb0cd377b0a40871272d51b4aaa2fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:362/format:webp/1*vB-PLT8YITGfXZL-HpXP8w.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">不要忘记返回新值和 handleClick 函数，以便在需要它的组件中可以访问它。</figcaption></figure><p id="c115" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后转到表单文件，然后更改您的自定义钩子导入。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/b8de37ce0938b839c952608be6eed20c.png" data-original-src="https://miro.medium.com/v2/resize:fit:422/format:webp/1*fjUCuSxy0Mq7Leba1AdV-w.png"/></div></figure><p id="460c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">添加代码，使消息如下所示…</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi md"><img src="../Images/00b036437fa93469d15a4d6b8c3d7de8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*7TkOqU8e9VAZ0j7RjzEHHQ.png"/></div></figure><p id="8424" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi me"><img src="../Images/1118f779d56f76d84537f96e42012d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*ifkckY1_CZ13or6l-o9KIQ.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">如果关于 email 字段的错误消息不是空字符串，那么给我一个包含消息的段落(在自定义钩子中出现的条件中的那个)</figcaption></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/a91d8db54beab1fe57491c69161a5334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*ZIBsqDQK6kjaQth6mddgnQ.png"/></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">密码字段也是如此</figcaption></figure><p id="becd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，像这样给按钮添加 handleClick 函数。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/8f873dd6f4ac0c8676ef4a0bb0914b56.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/1*xx9qITO09d2nnbSCzDD7zA.png"/></div></figure><p id="9350" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现阶段的结果是…</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mh"><img src="../Images/5742d8587ff3fb38c8ae8f698b3aa33a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nJ1DGjXi3lEuAsZ12UV9vA.png"/></div></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mi"><img src="../Images/8aa37bac4e1e35a26768016259e67c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aCr6q-_SuHvfr8lE8PiPhg.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">如果我点击提交按钮时该字段为空</figcaption></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mj"><img src="../Images/41b4d43472f8977a6e28d150748f1aab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eW4NJJNUSFgcwlt3iuKX6A.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">如果我点击提交按钮时密码字段为空</figcaption></figure><p id="825f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于其他情况…</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mk"><img src="../Images/67632a29ea4c9773dcb1a8e791f71e0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RCXrMu1ieo0ZEXMGVDkaoQ.png"/></div></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi ml"><img src="../Images/ef90c3676fa7b5c4a76fa34c6f47bbb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ks896ouybs7jQYQSsiR2-A.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">如果电子邮件不包含@符号</figcaption></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi mm"><img src="../Images/23b3628a28d2e2acb847bf780e651b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*23ROpONr5NBNysOpP6g55g.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">如果密码不一样。</figcaption></figure><p id="402f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好的，一切都如预期的那样工作</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="3852" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们实施第一批测试…</p><p id="d83c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您不知道 react 测试库如何工作，请参见 React 测试库文档以了解更多信息:<br/><a class="ae mn" href="https://testing-library.com/docs/react-testing-library/intro/" rel="noopener ugc nofollow" target="_blank">https://testing-library . com/docs/React-testing-library/intro/</a></p><p id="be92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">转到 App.test.js 文件<br/>默认情况下你有这个内容:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/b126237fbf851c9a05fa19211749a562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1194/format:webp/1*EsueeKY3s56MVJ5vQV2KjA.png"/></div></figure><p id="f222" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将内容替换为以下内容:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/c4e68302ae7969ba463727acfba5d68b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*pqbFx6vzAmfRRj-LUTEd6w.png"/></div></figure><p id="0413" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><p id="d3c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所有的测试都以相同的方式实现:<br/>一个“test”函数，它有两个参数，一个描述测试的字符串，后跟一个回调。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/19bd9596394025bcdebe62794852da03.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*IvUZJdpNnxhQGw0wQ_3-Fg.png"/></div></figure><p id="0a5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个回调函数中，您有 render 方法，在这里您可以选择想要测试的组件。</p><ul class=""><li id="7958" class="mr ms in jm b jn jo jr js jv mt jz mu kd mv kh mw mx my mz bi translated">在这个测试中，我们将测试 App 组件。</li></ul><p id="10e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我确保表单组件由应用程序简单地呈现。</p><p id="eee3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我定义了一个函数“FormComponent ”,并通过它的 testid 请求它，</p><p id="3a67" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">testid 以这样的组件形式实现(这个值对于测试识别相关组件是必需的):然后 expect 方法接受我的变量，我对它应用 toBeInTheDocument()方法。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi na"><img src="../Images/8b5674c127363549f249ed553bee40eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*jv31FfEfEv5oH0N_bsOZnw.png"/></div></figure><p id="3a24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第一个测试的结果是通过:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nb"><img src="../Images/9ed8842b6444c53efe6269747256f8fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S14ctdoM7nwmIK_Z-GhxJw.png"/></div></div></figure><p id="763e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们创建第二个测试套件。</p><p id="c1ae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您会注意到，一旦创建并保存了文件，测试就会再次实时运行，这将在测试期间生成一个错误，因为它尚未实施。</p><p id="4731" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建名为 input.test.js 的文件</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/c4a9b391bbafb7a42887369d71623159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1130/format:webp/1*D7Wxtc5QTPoqNDgq299FSw.png"/></div></figure><p id="96f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><p id="f579" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于此测试，测试的是输入组件。<br/>我创建了变量 inputElements，我选择通过 getByRole 的角色定位元素，所有输入字段的角色都是“textbox”。然后 expect 方法获取字段的值，我用一个空字符串应用 toBe 方法，因为所有输入在呈现时都必须为空。</p><p id="7ad3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果，2 项测试通过:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nd"><img src="../Images/1c8456efa9e92d9bc50991b3366c146f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1B1arz4pop9FQNcGP5-Gdg.png"/></div></div></figure><p id="dc94" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好了，接下来的测试…</p><p id="bcf1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建 form.test.js 文件</p><p id="4546" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一系列测试中，我将从模拟电子邮件字段的操作开始……<br/>测试是否应该能够键入电子邮件:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/853ae4cf36c2aee9266b98bb2be904e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*7qYiH3PDUkHfxFmwfFSCsA.png"/></div></figure><p id="a42c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码解释:</p><p id="fe69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于这个测试，测试的是表单组件。<br/>我创建了变量 emailComponent，我选择通过带有标签字段名称的 getByLabelText 标签来定位元素，然后我确保它存在并且字段为空。</p><p id="0100" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我使用 userEvent.type 在字段中输入电子邮件地址，然后确保该值就是输入的值。</p><p id="0872" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第三个测试的结果是:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nf"><img src="../Images/b3dba249b38130b8ba1c9e52326bb93b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6kQnY49fhwwugXR4-MHeQA.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">所有测试都通过了，太好了！</figcaption></figure><p id="d48d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，我在字段 password 和 password2 上创建了另外两个测试</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/d1047f0ae41e340adbf4501e964bda8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*38grWsTKfyq3x2e5pX_hiQ.png"/></div></figure><p id="e113" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果是:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nh"><img src="../Images/78a02e36447f2b83f4e249cbe964f62f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N5mSeKA1fQrkjXsE4fYxDA.png"/></div></div></figure><p id="1fe3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3 个测试套件通过(每个文件是一个套件)<br/> 5 个测试通过(所有测试分为 3 个文件)</p><p id="89fc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将在这里停止测试(如果你好奇的话，回购协议中还有其他更复杂的测试)，我们将通过 github action 继续自动化，因为这篇文章有点长…</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="23d6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">转到您的 github 存储库，为该应用程序创建一个 repo。</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lh"><img src="../Images/9d78c20b74692840c93bd9c835924150.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ioSUMDfY1swt18UwdIajFQ.png"/></div></div></figure><p id="a8fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">点击回购上的行动按钮:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/330c86a2002744196fbda3c241667713.png" data-original-src="https://miro.medium.com/v2/resize:fit:262/format:webp/1*pZvwdn-nEfHv_Mbng99EGg.png"/></div></figure><p id="24a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">选择节点</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/de063062b48182e267e6b10e75059d6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*l4kxW6b324KdHYiU2-lhug.png"/></div></figure><p id="a75e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用自动生成的内容创建文件(对于这个例子，我将保留默认内容)</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nk"><img src="../Images/ff7c264ab639fbb6c2637e5ff3947e66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*St6r53sOcX2JAb2i91K7Zw.png"/></div></div></figure><p id="5754" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">开始提交:</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/42e4ef8d865cd55b39a3884ae4c2d2e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*SWgZlwOGGNUO84wWk0fZwA.png"/></div></figure><p id="99ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让 git 拉你的本地应用</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nm"><img src="../Images/5023fc0fea1a220f6be8fc8996f9d390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m6As9Kazz8WPHhOdNHmlOA.png"/></div></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nn"><img src="../Images/c1742ad0a088952b30140866bd51dfa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vj6HeCBLT74LLDU8iExJjg.png"/></div></div></figure><p id="5444" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我做了一点修改(添加了标题教程)</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi no"><img src="../Images/7cc23c42498a19462dca3a09fd6d6246.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*63JuU8tp_ZNJvT75K_hXNw.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">所有测试在本地都正常</figcaption></figure><p id="0c75" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 repo 上推送您的代码后，github 工作流开始…</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi np"><img src="../Images/2efd09580de9ff1b9178d3b412e0befd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qRUQNc06qOkszdxe-z_wJg.png"/></div></div></figure><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi nq"><img src="../Images/80dddfce00adfa07187dab2442566da5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IgoGZvVRqCG8MM0vmz8oTQ.png"/></div></div><figcaption class="lc ld gj gh gi le lf bd b be z dk translated">所有的步骤都很顺利。</figcaption></figure><p id="209e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该应用程序已使用 node 12、14 和 16 自动构建和测试，并将使用您的每次推送进行测试… <br/>不同的测试套件都已成功通过。</p><p id="5e0a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就这样，这是这篇文章的结尾，如果你更喜欢它，我会写第二篇文章，介绍如何进行更复杂的测试，以及如何在你的应用程序中组织你的测试文件。</p><p id="3a01" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">包含本文代码的存储库:</p><p id="319f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae mn" href="https://github.com/rodolphe37/auto-test-react" rel="noopener ugc nofollow" target="_blank">https://github.com/rodolphe37/auto-test-react</a></p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="fb9c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">包含代码的存储库(加上一些额外的测试)。</p><div class="nr ns gp gr nt nu"><a href="https://github.com/rodolphe37/automation-testing-react" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd io gy z fp nz fr fs oa fu fw im bi translated">GitHub-rodolphe 37/自动化-测试-反应</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">如何测试你的可重用输入组件的小例子(测试每个输入是否为空，电子邮件和密码错误…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">github.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kz nu"/></div></div></a></div><p id="9cf9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢你阅读这篇文章。</p></div></div>    
</body>
</html>