<html>
<head>
<title>A Dummies Guide to using S3 Storage classes to reduce storage costs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用S3存储类降低存储成本的傻瓜指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-dummies-guide-to-using-s3-storage-classes-to-reduce-storage-costs-80d9f4978934?source=collection_archive---------2-----------------------#2021-03-10">https://blog.devgenius.io/a-dummies-guide-to-using-s3-storage-classes-to-reduce-storage-costs-80d9f4978934?source=collection_archive---------2-----------------------#2021-03-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/54a45a2517dc1ab57925da53d35b5d7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*1Tea-zJ_T8vRJo-KKh1wQQ.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk translated">AWS S3</figcaption></figure><p id="3615" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本文是我的CloudForDummies系列的一部分。如果您对我在云上讨论的其他主题感兴趣，请查看我的其他文章。</p><p id="9fe8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">作为本文的一部分，我们将探索各种存储类别，并就如何使用生命周期策略在不同类别之间迁移对象进行快速实践培训。</p><p id="d7ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我假设你对S3有一些基本的概念。如果你没有，我建议你看看下面这篇文章，这篇文章简要介绍了S3是什么</p><div class="kt ku gp gr kv kw"><a href="https://rajesh-r6r.medium.com/hosting-a-free-website-on-aws-s3-with-freenom-domains-for-dummies-a363aac39b1e" rel="noopener follow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">在AWS S3上托管一个免费网站，为傻瓜提供免费域名</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">这是我的傻瓜指南系列教程的一部分。</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">rajesh-r6r.medium.com</p></div></div><div class="lf l"><div class="lg l lh li lj lf lk jp kw"/></div></div></a></div><p id="ba5d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然而，让我们快速回顾一下S3。</p><p id="a522" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">S3是一项AWS对象存储服务，它允许你以极具竞争力的<a class="ae ll" href="https://aws.amazon.com/s3/pricing/" rel="noopener ugc nofollow" target="_blank">价格</a>在AWS云上存储任何东西。</p><p id="d372" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你仔细观察价格，你会发现如果你迁移到提供较低SLA的班级，价格会减半。自然对吗？</p><p id="8dae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们简单解释一下每个存储类。</p><p id="44fd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> S3标准:</strong></p><p id="8aff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">任何对象的默认存储类。主要特性包括高可用性(因此延迟低)，使用生命周期策略将对象自动迁移到更便宜的存储类别。</p><p id="26b2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> S3智能分层:</strong></p><p id="c0bd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">AWS提供的一种混合类型，它根据访问趋势对对象的存储类进行更改。简而言之，AWS监控你的所有对象，并自动将它们中的一些移动到冰川，其他的移动到不经常访问的位置，如果需要，将相同的对象提升回S3标准。主要功能包括少量监控/自动分层费用和相同级别的S3服务级别协议。</p><p id="ced9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> S3不常访问:</strong></p><p id="75be" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">低可用性SLA为99%，而S3标准为99.9%。如果你能接受，那很好。关键特征包括转到班级的费用。当您将1 GB的数据从S3标准迁移到S3非频繁类时，除了存储本身之外，还会产生一些费用。再次非常微不足道相比，它提供的竞争价格对S3标准。</p><p id="4275" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> S3 OneZone非频繁访问:</strong></p><p id="45f2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这有点危险，应该只用于可能永远不会用到的数据，直到出现后世界末日的情况。因为顾名思义，这个类只在一个可用性区域中存储数据。假设您将数据存储在美国西部的OneZone IA中，one zone IA的数据中心位于洛杉矶，鉴于好莱坞的事实，即洛杉矶是第一个受到天启、海洋生物、外星人攻击的城市，您可以放心地假设您的数据已经丢失。</p><p id="819f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">除非数据绝对不重要，否则不得使用。</strong></p><p id="7db2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> S3冰川:</strong></p><p id="011f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">与其他产品相比非常便宜。主要特征包括低可用性和从几分钟到几小时的可配置检索时间。适用于存储数据以满足法定/合规性要求</p><p id="cd52" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> S3冰川深处档案:</strong></p><p id="f57e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最便宜的选择。至少需要12个小时的检索时间。这意味着，为了检索存储在该类中的对象，您必须在发出请求后等待12个小时，以便在控制台或CLI中检索它。</p><p id="737b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">了解S3存储类及其SLA的绝佳表格。</strong></p><div class="kt ku gp gr kv kw"><a href="https://aws.amazon.com/s3/storage-classes/#Performance_across_the_S3_Storage_Classes" rel="noopener  ugc nofollow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">对象存储类-亚马逊S3</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">亚马逊S3提供了一系列针对不同用例设计的存储类别。这些包括S3标准…</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">aws.amazon.com</p></div></div><div class="lf l"><div class="lm l lh li lj lf lk jp kw"/></div></div></a></div><p id="bf9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在的问题是，为什么您会满足于较低的SLA？。</p><p id="501f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一些原因:</p><ol class=""><li id="b4ad" class="ln lo in jx b jy jz kc kd kg lp kk lq ko lr ks ls lt lu lv bi translated">频繁访问可能不需要所讨论的数据。因此，您可以将它移到收费较低的不常用存储类别。</li><li id="e3be" class="ln lo in jx b jy lw kc lx kg ly kk lz ko ma ks ls lt lu lv bi translated">可能是有问题的数据，如果需要，交付的交付周期可长达8-12小时。你可以将数据转移到冰川/深冰川档案中。</li><li id="382b" class="ln lo in jx b jy lw kc lx kg ly kk lz ko ma ks ls lt lu lv bi translated">如果发生灾难，您可能不需要这些数据，但在其他情况下，您需要这些数据。您可以将它存储在一个不经常访问的区域中。</li></ol><p id="a535" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最终，您的数据性质、访问频率、数据可用性和冗余要求是您决定正确存储类别的驱动因素。</p><p id="81da" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">选择S3类的快速决策过程:</strong></p><p id="e60b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请注意，由于实施的性质，我在此决策过程中没有使用OneZoneIA智能分层。</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mb"><img src="../Images/3bf94df3897d6e2bfdd46a429e3e25f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kn2aelqbIpVG3SeXAhkNgA.png"/></div></div></figure><p id="b046" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该是动手的时候了。</p><p id="9c43" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第一步:</strong></p><p id="5b09" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为存储桶中的所有对象创建生命周期策略。我正在使用我在2020年收集Covid19统计数据时使用的样本桶。如果你对我是如何做到的感兴趣，可以看看这篇文章。</p><div class="kt ku gp gr kv kw"><a href="https://medium.com/dev-genius/covid-19-stats-collection-with-aws-a-serverless-recipe-that-costs-0-00-df0af9b8229c" rel="noopener follow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">新冠肺炎统计收集与AWS一个无服务器的食谱，成本为0.00美元</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">新冠肺炎疫情无疑破坏了经济、正常生活等等。但是有些事情是…</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">medium.com</p></div></div><div class="lf l"><div class="mk l lh li lj lf lk jp kw"/></div></div></a></div><p id="6133" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">生命周期策略的快速介绍:</p><p id="a7e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">简单的自动化使我们能够指定在不同存储类别之间移动对象的规则。<strong class="jx io">自动迁移对象由AWS在预先安排的时间触发，并且不能更改</strong>。</p><p id="6fac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择“管理”选项卡并点击“创建生命周期规则”按钮。</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ml"><img src="../Images/4b523db363eca946d3343a53aef942d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*07z5_lm8jHfQ2OKL7dWaiQ.png"/></div></div></figure><p id="84c1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这里，您可以通过应用简单的规则来过滤需要移动到特定类的对象。漂亮吧？</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mm"><img src="../Images/0c75ec26f72c75a3e82bab678cbdd686.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LX8k3BhwoDkpk7-N9LPUlg.png"/></div></div></figure><p id="15bb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择适当的操作。在我们的练习中，选择“过渡对象的当前版本”</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mn"><img src="../Images/56163a749852b20dcd536acbd41591c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*27lWJ7iNQI_SK8rPg2aiKw.png"/></div></div></figure><p id="e766" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当你点击这个你会看到下面的选项。让我们选择Standard-IA，并将对象创建后的天数设置为30天。实际上，我们现在已经设置了一个规则，将所有对象在第一次存储在桶中30天后移动到一个不经常访问的类中。</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mn"><img src="../Images/30f75a1ca5253948916e4d799be4681c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OpKx8TL7n7NfI7Vn7I8UFw.png"/></div></div></figure><p id="b27a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">生命周期过渡策略规则:</strong></p><p id="8c6b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">设置生命周期策略时，它不会立即触发。根据AWS文档，生命周期规则在世界协调时(UTC)每天午夜运行一次。因此，不要期望您已经使用了30天的对象会在您设置后立即移入新的存储类。</p><div class="kt ku gp gr kv kw"><a href="https://aws.amazon.com/premiumsupport/knowledge-center/s3-lifecycle-rule-intelligent-tiering/" rel="noopener  ugc nofollow" target="_blank"><div class="kx ab fo"><div class="ky ab kz cl cj la"><h2 class="bd io gy z fp lb fr fs lc fu fw im bi translated">解决S3生命周期规则无法将对象转移到智能分层的问题…</h2><div class="ld l"><h3 class="bd b gy z fp lb fr fs lc fu fw dk translated">我在我的亚马逊简单存储服务(亚马逊S3)桶上设置了一个生命周期配置规则</h3></div><div class="le l"><p class="bd b dl z fp lb fr fs lc fu fw dk translated">aws.amazon.com</p></div></div><div class="lf l"><div class="mo l lh li lj lf lk jp kw"/></div></div></a></div><p id="c3ec" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">我能立即看到转变吗？</strong>。</p><p id="830a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以通过手动将一些对象移动到不同的存储类。</p><p id="76e0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">第二步:</strong></p><p id="8966" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们学习如何将一些对象迁移到不同的存储类。对于这个例子，让我们再次使用我拥有的同一个例子桶。正如您在此图中看到的，所有这些文件都在标准类中，我希望将其中一些移动到OneZone-IA(我知道)</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mp"><img src="../Images/7d9597acd791e1ca43643f33e5e3b561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o22W8HdhV3FNDnV-M0nM6Q.png"/></div></div></figure><p id="4ad7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择要迁移的对象，并点击操作下拉菜单</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mq"><img src="../Images/6766c7d2d1550568207a9b05f7b3aa81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vKzqRQSLhuxcfLN6IkZuwg.png"/></div></div></figure><p id="4086" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您将获得以下选项。选择OneZone-IA。不要错过点击页面底部的“保存更改”按钮。</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi mr"><img src="../Images/1dad9b60110942110a84f653cb39a155.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbWSoqgLqB3Q4MLYGe3Uog.png"/></div></div></figure><p id="8676" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成后，您可以看到这些对象的存储类立即发生了变化。</p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="gh gi ms"><img src="../Images/c5dfd8bbeb3f64bb169640865edc2a9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MbUyBL1js5rR7zNodtoobQ.png"/></div></div></figure><p id="c2cb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">暂时就这样了。敬请关注。</p><p id="ae2d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以滑动订阅我的新闻信。</p><figure class="mc md me mf gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure></div></div>    
</body>
</html>