# Node.js 最佳实践—安全性和设置

> 原文：<https://blog.devgenius.io/node-js-best-practices-security-and-setup-56630d995409?source=collection_archive---------8----------------------->

![](img/b0b77e651afe7f9d4ea37b6309233560.png)

照片由[娜塔莉·索恩利](https://unsplash.com/@natthornley?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄

像任何类型的应用程序一样，JavaScript 应用程序也必须写得很好。

否则，我们以后会遇到各种各样的问题。

在本文中，我们将看看在编写节点应用程序时应该遵循的一些最佳实践。

# 为 NPM 或纱线配置 2FA

我们应该为我们的包存储库启用双因素认证，这样攻击者就不能轻易得到它们。

开启它将使攻击者没有机会访问我们的回购。

# 修改会话中间件设置

应该修改会话中间件设置，以避免暴露任何有助于攻击者的东西。

例如，应移除`X-Powered-By`标题。

这样，攻击者就无法识别我们使用的是什么框架。

Cookies 也应该通过安全连接发送。

那么攻击者就无法接入我们的连接来获取他们想要的信息。

# 通过明确设置进程崩溃的时间来避免 DOS 攻击

如果我们的流程过载，那么它们应该会崩溃，这样我们就可以通过捕捉这些错误来优雅地处理这些情况。

这意味着攻击者无法继续他们的 DOS 攻击，延长我们服务的停机时间。

此外，当这些事件发生时，我们应该警惕自己。

# 防止不安全的重定向

我们不应该让攻击者将用户重定向到他们想去的任何地方。

为了防止这种情况，我们制作自己的 URL，以便重定向总是重定向到我们想要的地方，而不是攻击者想要的地方。

# 避免向 NPM 登记处泄露机密

NPM 登记处不是用来存储秘密的。

因此，我们应该避免在那里公布任何秘密。

为此，我们可以将不想发布的内容添加到`.npmignore`文件中。

这样，我们就不会将 API 密钥、密码和其他秘密暴露给公众。

# 不要阻塞事件循环

我们的代码不应该阻塞事件循环。

这是因为节点应用程序是单线程的。

这意味着我们应该对长期运行的流程使用异步代码。

需要长时间运行的同步代码会阻止我们应用程序的其余部分运行。

使用异步代码，用户不会看到延迟。

# 比起 Lodash 等第三方工具，更喜欢本地 JS 方法

如果有本地 JavaScript 方法可用，那么我们应该使用它们而不是第三方库。

需要的依赖越少，我们的应用就会越快越小。

例如，代替 Lodash 数组方法，我们应该用本地 JavaScript 数组方法。

# 用 npm init 启动每个新项目

我们应该用`npm init`开始每个新项目，这样我们的项目就有了一个`package.json`。

同样，我们可以添加`--yes`来用默认值设置所有选项。

例如，我们可以写:

```
$ mkdir my-app
$ cd my-app
$ npm init --yes
```

然后我们用默认选项创建带有`package.json`的`my-app`项目文件夹。

# 使用 ES6+

是时候使用最新的 JavaScript 特性了。

它们比旧的语法好得多。

最新版本的 Node 支持它。

所以我们应该使用像箭头功能，传播和休息等功能。

![](img/496a0db67dbed695caafc20a35515e94.png)

乔尔·内维斯在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 拍摄的照片

# 结论

我们应该坚持一些好的实践，比如使用现代特性、异步代码等等。