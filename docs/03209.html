<html>
<head>
<title>Serverless Framework — Develop Your First Function As A Service</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">无服务器框架—开发您的第一个功能即服务</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/serverless-framework-develop-your-first-function-as-a-service-2339050f7e5b?source=collection_archive---------8-----------------------#2020-10-12">https://blog.devgenius.io/serverless-framework-develop-your-first-function-as-a-service-2339050f7e5b?source=collection_archive---------8-----------------------#2020-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cf93" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">FaaS的开发和自动化部署</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0075aa78d9a29e3625c1bb94c0bc7c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bV_PYJA2QNtI9-TF"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">照片由<a class="ae kv" href="https://unsplash.com/@jamesponddotco?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">詹姆斯·庞德</a>在<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄</figcaption></figure><p id="e740" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">管理服务器和提供计算资源不可避免地是软件开发的一部分，因为应用程序逻辑需要服务器来运行。“无服务器”带来了革命性的变化，它不仅节省了基础设施管理的大量工作，而且大大提高了开发团队的速度。</p><blockquote class="ls lt lu"><p id="bf47" class="kw kx lv ky b kz la jr lb lc ld ju le lw lg lh li lx lk ll lm ly lo lp lq lr ij bi translated">无服务器是关于开发者将他们的努力集中在为他们的用户提供价值上(而不是在其他事情上浪费时间)——无服务器宣言(【serverless.com】T4)</p></blockquote><p id="1c84" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“按使用付费”的收费模式是另一个绝妙的特色。只为计算资源的实际消耗付费，而闲置资源是免费的，这大大降低了托管成本。在本文中，您将熟悉无服务器应用程序的开发。我将阐述这些概念，并向您展示如何使用AWS cloud上的无服务器框架提供的工具构建一个应用程序。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h2 id="c9b7" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">什么是无服务器？</h2><p id="ec2e" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">无服务器是一个运行应用程序功能的云计算平台，从开发人员的角度来看，没有服务器或操作系统的概念，因为该平台抽象出了底层基础架构组件的复杂性。因此，开发人员可以全心全意地专注于业务功能编码。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="d756" class="ne mh iq bd mi nf ng nh ml ni nj nk mo jw nl jx mr jz nm ka mu kc nn kd mx no bi translated">用例与架构设计</h1><h2 id="5db8" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">用例</h2><p id="7dc4" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">首先，通过实例学习是获取新知识和技能的有效方法，所以我制作了这个示例应用程序——产品推广系统。它每天运行批处理过程，分析产品销售并制定产品促销方案。另一方面，它向客户端公开API以获取可用促销的列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi np"><img src="../Images/af28f959f70f9f59e9b379137638ecf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*b2161QUZE60kt_9iO6mdoA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">用例</figcaption></figure><h2 id="f3a7" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">无服务器架构设计</h2><p id="b069" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">将用例转化为技术解决方案，下面的架构设计图由以下模式组成。</p><ul class=""><li id="d510" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated"><strong class="ky ir"> Web服务API </strong> — API网关，公开Web服务，用于促销记录检索。</li><li id="633b" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><strong class="ky ir">调度作业</strong> —调度程序触发lambda函数，分析产品销售。</li><li id="e336" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><strong class="ky ir">异步作业— </strong>产品销售分析结果驱动的促销券生成。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/117b46f109dc9bcbd682fda78c62578f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*bSSMK7PgoKuaT-xEHUZzOA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">无服务器架构设计</figcaption></figure><h1 id="c3a6" class="ne mh iq bd mi nf of nh ml ni og nk mo jw oh jx mr jz oi ka mu kc oj kd mx no bi translated">基本概念</h1><p id="e1bf" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">让我们踏上发展之旅。我们将首先准备好开发工具和库，然后是组件定义设置。</p><h2 id="3bf2" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">关于无服务器框架</h2><p id="30c2" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">没有有效工具的开发，不管想法有多好，都是杂乱无章的。无服务器框架提供了一套有用的工具，大大简化了无服务器解决方案的部署和供应。当您将源代码文件和资源定义输入到工具中时，它通过利用AWS云结构使功能更好地组织并自动化部署。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ok"><img src="../Images/f229b6e910c358e2f1dec2d77f0f493d.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*WR0MmiiuQ8S4L9ubXjcHaQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">无服务器框架—部署流程</figcaption></figure><h2 id="7c2e" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">让事情开始</h2><p id="254f" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">当然，你可以用你最喜欢的语言来实现lambda，比如Java、Go、Python等等。在本例中，函数是使用Node JS编写的，因此下面列出了需要在开发机器上安装的工具:</p><ul class=""><li id="32a5" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated">节点JS</li><li id="e595" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">包装经理(NPM)</li><li id="321c" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">Visual Studio代码</li></ul><p id="742f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于无服务器框架CLI利用AWS云形成来供应无服务器架构，因此您需要在本地计算机中设置AWS凭证文件，以便您可以从本地计算机通过命令行供应云资源。以下是安装程序，供您参考。</p><div class="ol om gp gr on oo"><a href="https://www.serverless.com/framework/docs/providers/aws/guide/credentials/" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">无服务器框架- AWS Lambda指南-凭据</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">无服务器框架需要访问您的云提供商帐户，以便能够在您的上创建和管理资源…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">www.serverless.com</p></div></div><div class="ox l"><div class="oy l oz pa pb ox pc kp oo"/></div></div></a></div><p id="102f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">无服务器框架是一个节点JS包，您可以使用下面的NPM命令行简单地将它安装在您的开发机器上:</p><pre class="kg kh ki kj gt pd pe pf pg aw ph bi"><span id="b164" class="mg mh iq pe b gy pi pj l pk pl">npm install -g serverless</span></pre><p id="558e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，从这个git repo克隆示例应用程序。我将演练配置，并演示如何基于这个示例应用程序构建无服务器架构。</p><pre class="kg kh ki kj gt pd pe pf pg aw ph bi"><span id="624f" class="mg mh iq pe b gy pi pj l pk pl"><a class="ae kv" href="https://github.com/gavinklfong/serverless-demo-app" rel="noopener ugc nofollow" target="_blank">https://github.com/gavinklfong/serverless-demo-app</a></span></pre><h2 id="c49e" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">核心配置的自主性</h2><p id="369c" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">首先，熟悉<strong class="ky ir"> <em class="lv"> serverless.yml </em> </strong>是至关重要的，因为它是你的无服务器应用的心脏和灵魂，它包含所有应用资源的定义，并将lambda函数粘合在一起形成一个功能服务。无服务器框架命令行依赖于配置云本地服务和部署lambda功能</p><p id="d57d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">配置文件由3部分组成:</p><ul class=""><li id="d64d" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated"><strong class="ky ir">提供商</strong> —通用设置，如日志记录和云提供商特定参数，如数据中心区域。</li><li id="c35c" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><strong class="ky ir"> Resources </strong> —基本上是一组云形成定义，用于创建云资源和服务，例如队列和数据存储。</li><li id="dbb7" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated"><strong class="ky ir">函数</strong> —源代码路径、内存需求、触发事件等函数定义。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pm"><img src="../Images/10695088e4a0b90ba5b3dc37f2c93b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*meoQJ5XcnAE534N7Kr1Yyg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">无服务器框架— serverless.yml</figcaption></figure><p id="68a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个示例配置文件显示了provider部分。在函数部分，有一个函数配置了SQS事件，在资源部分也定义了SQS资源。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pn"><img src="../Images/0df6d382a7adbcc3a56fb2d823eac809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BMHcy8LRvpgKzChrE7n6OQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">无服务器框架—示例配置</figcaption></figure><h2 id="74db" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">文件夹结构</h2><p id="9c9e" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">整个应用程序由各个文件夹中的功能组成，其中<strong class="ky ir"><em class="lv">server less . yml</em></strong>位于根文件夹中。下面的文件夹结构列出了每个节点JS包的3个子文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi po"><img src="../Images/b66cab414f9c93605ba7da2063925603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IXOk_rsH0BDhx6g9Xl9fzw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">文件夹结构</figcaption></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="b84b" class="ne mh iq bd mi nf ng nh ml ni nj nk mo jw nl jx mr jz nm ka mu kc nn kd mx no bi translated">函数定义演练</h1><h2 id="8dbd" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">计划作业</h2><p id="b747" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">后端进程由计划作业启动。比方说，系统每天晚上10点运行分析。下面的函数监听由cron作业调度发出的事件。除了事件之外，该定义还支持为函数注入环境变量，以指向目标SQS队列。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pp"><img src="../Images/ffe79607a087ef393be1b10e4694a204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eIQJ84IEif-FffKzrhAC6A.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">Lambda —调度作业驱动</figcaption></figure><h2 id="e442" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">异步作业</h2><p id="1e33" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">对于批处理来说，异步作业是一种常见和流行的设计模式，它运行一系列函数，中间使用队列系统进行消息集成。这种设计通过最小化功能之间的依赖性并允许每个独立功能的可伸缩性，极大地增强了可维护性。</p><p id="3574" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">产品推广与SQS挂钩，每当目标SQS中有10个或更多的消息等待处理时，就会调用它。同样，目标DynamoDB表名是通过定义中指定的环境配置的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pq"><img src="../Images/4d6a434e2e51c82f38239c502c4ffa66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lPvXsWi-dvGq8aBLozwCGg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">λ—SQS消息驱动</figcaption></figure><h2 id="842d" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">Web服务API</h2><p id="f464" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">要将函数公开为RESTful API，只需在函数定义中用URI路径和http方法定义http事件即可。无服务器框架CLI自动为API express提供API网关。<strong class="ky ir"> <em class="lv"> serverless.yml </em> </strong>支持额外的配置，如果你对微调API网关设置感兴趣，比如节流和使用计划。</p><p id="73f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">部署后，将为下面的示例函数定义生成API端点</p><pre class="kg kh ki kj gt pd pe pf pg aw ph bi"><span id="f7ef" class="mg mh iq pe b gy pi pj l pk pl">https://&lt;API gateway domain&gt;/product-promotion</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pr"><img src="../Images/bd556e245aa759f529ca2b9f27de740c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lueOOkl1fzRHPvf8fSeh1Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">λ—HTTP请求驱动</figcaption></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="7758" class="ne mh iq bd mi nf ng nh ml ni nj nk mo jw nl jx mr jz nm ka mu kc nn kd mx no bi translated">把所有东西放在一起</h1><h2 id="7f65" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">部署</h2><p id="a9f1" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">只需运行此命令来部署应用程序堆栈，它将根据<strong class="ky ir"> <em class="lv"> serverless.yml </em> </strong>中的定义安装功能和配置资源</p><pre class="kg kh ki kj gt pd pe pf pg aw ph bi"><span id="63ea" class="mg mh iq pe b gy pi pj l pk pl">sls deploy</span></pre><p id="2753" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您将看到这个控制台输出，它指示执行进度和结果中新创建的资源列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ps"><img src="../Images/85ce26105eca66c8fc8bf2be1729c74c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nDoydfl9Y5LkfwBJiWM8uQ.png"/></div></div></figure><p id="f16d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，无服务器应用程序已经启动并运行。您还可以在AWS控制台中观察到<strong class="ky ir"><em class="lv">Lambda&gt;Application&gt;server less-demo-app-dev</em></strong>类别下的组件列表</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pt"><img src="../Images/e1442685eba33263dd34daa2bc3f50ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PDjnaAJWV1GnqGaCsZAL6g.png"/></div></div></figure><h2 id="2dd3" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">运行应用程序</h2><p id="baa0" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">为了验证应用程序部署，您可以通过在AWS控制台上使用空的模拟事件数据运行test来模拟一个调度作业，然后将生成新的记录并插入到DynamoDB中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pu"><img src="../Images/e46711f5e03c618cfd56fd5f56bd4884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_bGvJA8z9oNT2u8uKY1og.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">无服务器应用验证</figcaption></figure><p id="1b9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，调用API获取促销记录。你会得到一个促销记录列表的响应。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pv"><img src="../Images/9ac5042d93db10b120f9e024915f9ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v4eBWtokTvtFUqOxdKnwMw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk translated">无服务器应用验证结果</figcaption></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h2 id="5801" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">功能测试</h2><p id="1a0f" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">函数只不过是一个事件驱动的函数。如果函数运行不正常，或者您希望在部署之前运行单元测试，那么您可以运行此命令来测试特定的函数:</p><pre class="kg kh ki kj gt pd pe pf pg aw ph bi"><span id="cf97" class="mg mh iq pe b gy pi pj l pk pl">sls invoke local -f &lt;lambda function id&gt; -p &lt;event input file&gt; -e &lt;env variable&gt;=&lt;value&gt;</span></pre><p id="8c9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">事件输入文件是JSON格式，它模拟事件触发。您可以从CloudWatch捕获事件数据并编辑数据，以便运行各种测试场景。</p><h2 id="f68d" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">部署故障排除</h2><p id="ebdf" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">部署过程可能会由于各种原因而失败，控制台错误消息会提示您如何解决这些问题。当我日日夜夜与各种部署问题作斗争时，我整理了一份清单。如果您在部署过程中遇到任何问题，我希望它可以节省您的时间:</p><ul class=""><li id="70f1" class="nq nr iq ky b kz la lc ld lf ns lj nt ln nu lr nv nw nx ny bi translated">再次重新运行部署命令。</li><li id="89f9" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">您是否在正确的目录下运行命令行？</li><li id="da0a" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">serverless.yml的格式是否正确缩进？</li><li id="7326" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">serverless.yml有错别字吗？</li><li id="1f01" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">您的AWS配置文件有足够的权限进行资源调配吗？错误消息将告诉您缺少哪种权限。</li><li id="3b6f" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">如果您不知道导致错误的原因，那么尝试从serverlesss.yml中删除那些新添加的组件，以便识别和隔离有问题的部分。</li><li id="93f2" class="nq nr iq ky b kz nz lc oa lf ob lj oc ln od lr nv nw nx ny bi translated">检查生成的云形成脚本，你通常不需要它。</li></ul></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="b593" class="ne mh iq bd mi nf ng nh ml ni nj nk mo jw nl jx mr jz nm ka mu kc nn kd mx no bi translated">下一步是什么？</h1><p id="a6c2" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">无服务器框架是一个强大的工具，使得实现无服务器应用程序更加容易。然而，许多实现仅仅关注AWS。为了避免供应商锁定的风险，许多企业要求采用对云提供商不可知的解决方案。策略是采用多云部署，也就是说将同一个应用程序部署到多个云提供商，比如AWS和Azure。</p><p id="9501" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好消息！无服务器框架支持多种云。与此同时，其他云提供商，如Azure，正在积极地为框架做出贡献，如插件开发，以支持无缝集成。让我们在我的下一次分享中探索更多和深入这个话题。</p><div class="ol om gp gr on oo"><a href="https://docs.microsoft.com/en-us/azure/architecture/example-scenario/serverless/serverless-multicloud" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">采用无服务器框架的多云解决方案——Azure示例场景</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">这篇文章描述了微软商业软件工程(CSE)团队如何与一家全球零售商合作…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">docs.microsoft.com</p></div></div><div class="ox l"><div class="pw l oz pa pb ox pc kp oo"/></div></div></a></div><p id="1cec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> Git回购</strong></p><p id="0d06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请随意克隆这个示例应用程序，并尝试无服务器应用程序部署。</p><pre class="kg kh ki kj gt pd pe pf pg aw ph bi"><span id="4e15" class="mg mh iq pe b gy pi pj l pk pl">https://github.com/gavinklfong/serverless-demo-app</span></pre></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h2 id="8d73" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">参考</h2><div class="ol om gp gr on oo"><a href="https://dashbird.io/blog/complete-guide-lambda-triggers-design-patterns-part-1/" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">Lambda触发器和设计模式完全指南(第1部分)</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">不久前，我们讨论了Lambda支持的调用(触发器)方法以及与…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">dashbird.io</p></div></div><div class="ox l"><div class="px l oz pa pb ox pc kp oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://medium.com/@eduardoromero/serverless-architectural-patterns-261d8743020" rel="noopener follow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">无服务器架构模式</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">构建在AWS无服务器堆栈之上的云架构模式。</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">medium.com</p></div></div><div class="ox l"><div class="py l oz pa pb ox pc kp oo"/></div></div></a></div><div class="ol om gp gr on oo"><a href="https://martinfowler.com/articles/serverless.html" rel="noopener  ugc nofollow" target="_blank"><div class="op ab fo"><div class="oq ab or cl cj os"><h2 class="bd ir gy z fp ot fr fs ou fu fw ip bi translated">无服务器架构</h2><div class="ov l"><h3 class="bd b gy z fp ot fr fs ou fu fw dk translated">Mike Roberts Mike Roberts是Symphonia的合伙人和联合创始人，Symphonia是一家专门研究云架构的咨询公司…</h3></div><div class="ow l"><p class="bd b dl z fp ot fr fs ou fu fw dk translated">martinfowler.com</p></div></div><div class="ox l"><div class="pz l oz pa pb ox pc kp oo"/></div></div></a></div></div></div>    
</body>
</html>