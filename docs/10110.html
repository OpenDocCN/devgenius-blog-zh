<html>
<head>
<title>Containerize a Python Application using Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Docker 封装 Python 应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/containerize-a-python-application-using-docker-f8cea56568dd?source=collection_archive---------0-----------------------#2022-10-08">https://blog.devgenius.io/containerize-a-python-application-using-docker-f8cea56568dd?source=collection_archive---------0-----------------------#2022-10-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/859df4623da756fb24daa1b110527be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:894/format:webp/1*q1MaWVQbiBL50QcFyN3GTw.png"/></div></figure><p id="bf68" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">本文旨在概述 docker 的基础知识，并学习如何构建一个在容器中运行 Python 应用程序的映像。</p><h2 id="38ca" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated"><strong class="ak">什么是 Docker？</strong></h2><p id="9adb" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">它是一个开发、发布和运行应用程序的平台。简单地说，您可以构建您的应用程序，将它们和它们的依赖项一起打包到一个容器中，然后这些容器可以被运送到其他机器上运行。</p><h2 id="e604" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated"><strong class="ak">关键</strong>术语</h2><ul class=""><li id="07eb" class="ln lo in jt b ju li jy lj kc lp kg lq kk lr ko ls lt lu lv bi translated"><strong class="jt io"> <em class="lw"> Dockerfile </em> </strong> -由指令和参数组成的文本文件。它通知 Docker 应该如何构建图像。</li><li id="2863" class="ln lo in jt b ju lx jy ly kc lz kg ma kk mb ko ls lt lu lv bi translated"><strong class="jt io"> <em class="lw"> Image- </em> </strong>它是一个只读模板，带有创建容器的说明。docker 文件中的每条指令都会在映像中创建一个层。</li><li id="edba" class="ln lo in jt b ju lx jy ly kc lz kg ma kk mb ko ls lt lu lv bi translated"><strong class="jt io"> <em class="lw">容器- </em> </strong>它是一个图像的运行实例。它由其映像以及提供给它的任何配置选项(创建或启动)很好地定义。</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/29bcc2cc181320fa228bb1831d1885df.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*9Sr6pbs5yr8i0PvATJGEzA.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">同一图像(模板)的多个运行实例(容器)</figcaption></figure><p id="29e9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">上图显示了使用 docker 文件创建或构建的同一个图像(模板)的多个运行实例(容器)。</p><h2 id="2836" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">Dockerfile 指令</h2><p id="e4f4" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">Dockerfile 文件由一组指令和参数组成。一般语法是</p><pre class="md me mf mg gt ml mm mn mo aw mp bi"><span id="8aea" class="kp kq in mm b gy mq mr l ms mt">INSTRUCTION arguments</span></pre><p id="fa9c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">最常用的 Dockerfile 指令是:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/690c7b71c1dd37be5b9687ac10cde7cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*jfgZoX_jF8GQi2SkXxkaww.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">常用的 Dockerfile 文件指令</figcaption></figure><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">样本文档</figcaption></figure><h2 id="aaea" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">Docker 命令</h2><p id="54c3" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">最常用的 docker 命令是:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/a5fc7e8a7d1c0156ce5005520a816ac1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*o-vPlHRcm6DbIeskGd4RUA.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">常用的 docker 命令</figcaption></figure><h2 id="37dd" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">入门指南</h2><p id="442b" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">我们将通过以下步骤创建一个简单的项目来封装 Python 应用程序:</p><ul class=""><li id="ff4e" class="ln lo in jt b ju jv jy jz kc my kg mz kk na ko ls lt lu lv bi translated">使用<a class="ae nb" rel="noopener ugc nofollow" target="_blank" href="/getting-started-with-flask-python-cbdeca3dcfe"> flask </a>创建一个简单的静态 web 应用程序</li><li id="e66c" class="ln lo in jt b ju lx jy ly kc lz kg ma kk mb ko ls lt lu lv bi translated">创建 Dockerfile 文件</li><li id="6832" class="ln lo in jt b ju lx jy ly kc lz kg ma kk mb ko ls lt lu lv bi translated">从 Dockerfile 文件构建图像</li><li id="a9ef" class="ln lo in jt b ju lx jy ly kc lz kg ma kk mb ko ls lt lu lv bi translated">运行容器中的图像</li></ul><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/7cbbe78012d58128e8bd5454df794cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*pM4cEw53D76o1g-U86ZNQQ.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">项目结构</figcaption></figure><h2 id="b56d" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">1.装置</h2><ul class=""><li id="370a" class="ln lo in jt b ju li jy lj kc lp kg lq kk lr ko ls lt lu lv bi translated">下载<a class="ae nb" href="https://docs.docker.com/get-docker/" rel="noopener ugc nofollow" target="_blank"> Docker </a></li><li id="b26b" class="ln lo in jt b ju lx jy ly kc lz kg ma kk mb ko ls lt lu lv bi translated">安装库<a class="ae nb" href="https://flask.palletsprojects.com/en/2.1.x/installation/" rel="noopener ugc nofollow" target="_blank">烧瓶</a></li></ul><h2 id="3803" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">2.密码</h2><ul class=""><li id="f282" class="ln lo in jt b ju li jy lj kc lp kg lq kk lr ko ls lt lu lv bi translated">app.py</li></ul><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">app.py</figcaption></figure><ul class=""><li id="ba2b" class="ln lo in jt b ju jv jy jz kc my kg mz kk na ko ls lt lu lv bi translated">home.html</li></ul><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">home.html</figcaption></figure><ul class=""><li id="f934" class="ln lo in jt b ju jv jy jz kc my kg mz kk na ko ls lt lu lv bi translated">requirements.txt</li></ul><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">requirements.txt</figcaption></figure><ul class=""><li id="4b92" class="ln lo in jt b ju jv jy jz kc my kg mz kk na ko ls lt lu lv bi translated">Dockerfile 文件</li></ul><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">Dockerfile 文件</figcaption></figure><h2 id="d272" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">3.奔跑</h2><p id="4b26" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">打开“终端”并导航到项目。</p><ul class=""><li id="1eb9" class="ln lo in jt b ju jv jy jz kc my kg mz kk na ko ls lt lu lv bi translated">通过运行下面的命令，从 Dockerfile 构建一个映像。传入<code class="fe nd ne nf mm b">-t</code>参数来命名图像。</li></ul><pre class="md me mf mg gt ml mm mn mo aw mp bi"><span id="7933" class="kp kq in mm b gy mq mr l ms mt">docker build -t sample .</span></pre><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi ng"><img src="../Images/9c079bc0b176e46d004170bff5890311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cTYp-RB6OZ6H4viMB3N4Yg.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">码头工人建造</figcaption></figure><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/b01d02ba84c6fd5228904dd427f39cac.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*YxRABpG8DUfMxZWDiyX1-g.png"/></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">成功构建</figcaption></figure><ul class=""><li id="b97e" class="ln lo in jt b ju jv jy jz kc my kg mz kk na ko ls lt lu lv bi translated">要验证构建的映像，请使用以下命令</li></ul><pre class="md me mf mg gt ml mm mn mo aw mp bi"><span id="5f4a" class="kp kq in mm b gy mq mr l ms mt">docker images</span></pre><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi nm"><img src="../Images/811f5574141c831230ed2d3972b6e6d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xjB949jgwGfG736XXLt_og.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">docker 图像</figcaption></figure><ul class=""><li id="ebbf" class="ln lo in jt b ju jv jy jz kc my kg mz kk na ko ls lt lu lv bi translated">运行 docker 容器。<code class="fe nd ne nf mm b">-p</code>标志将容器内部运行的端口映射到您的主机。--name 用于为容器命名，sample 是之前构建的图像名称。</li></ul><pre class="md me mf mg gt ml mm mn mo aw mp bi"><span id="2077" class="kp kq in mm b gy mq mr l ms mt">docker run --name flask_app  -p 8000:5000 sample</span></pre><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi nn"><img src="../Images/3614c5bf1d2a9ce97244b17aa4528229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n1RI59ZZrJ3qxnF4O0x5Dg.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">码头运行</figcaption></figure><ul class=""><li id="d521" class="ln lo in jt b ju jv jy jz kc my kg mz kk na ko ls lt lu lv bi translated">打开浏览器并键入</li></ul><pre class="md me mf mg gt ml mm mn mo aw mp bi"><span id="2ca5" class="kp kq in mm b gy mq mr l ms mt"><a class="ae nb" href="http://127.0.0.1:5000" rel="noopener ugc nofollow" target="_blank">http:://127.0.0.1:8000/</a></span></pre><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nh ni di nj bf nk"><div class="gh gi no"><img src="../Images/c1d55fed443e3cbe1298c9380c258824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0EEedSlk0bGP6RGtsPf1A.png"/></div></div><figcaption class="mh mi gj gh gi mj mk bd b be z dk translated">烧瓶应用</figcaption></figure><h2 id="4d3c" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">结论</h2><p id="7945" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">在这个故事中，我们已经了解了 docker 的基础知识，并学习了如何通过简单的步骤使用 docker 封装 Python 应用程序。希望你已经了解了 docker 的基础知识。</p><p id="6277" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">感谢阅读！</p><p id="11d6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><a class="ae nb" href="https://github.com/ashish-mj/Docker" rel="noopener ugc nofollow" target="_blank"> Github </a> <a class="ae nb" href="https://ashishmj.vercel.app/" rel="noopener ugc nofollow" target="_blank">网站</a> <a class="ae nb" href="https://www.linkedin.com/in/ashish-mj/" rel="noopener ugc nofollow" target="_blank">领英</a></p></div></div>    
</body>
</html>