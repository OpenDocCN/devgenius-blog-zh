<html>
<head>
<title>Saving slice data as file on Local Disk using Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Go 将切片数据保存为本地磁盘上的文件</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/saving-slice-data-as-file-on-local-disk-using-go-19360574d2d5?source=collection_archive---------14-----------------------#2022-08-18">https://blog.devgenius.io/saving-slice-data-as-file-on-local-disk-using-go-19360574d2d5?source=collection_archive---------14-----------------------#2022-08-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8d7e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">我们将使用操作系统包的 WriteFile()将数据保存为本地磁盘上的文件</h2></div><p id="6f1b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">文章范围:</strong></p><ul class=""><li id="b644" class="ky kz in ke b kf kg ki kj kl la kp lb kt lc kx ld le lf lg bi translated">操作系统包的 WriteFile()将切片数据保存在本地磁盘上</li><li id="a1b8" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">可以扩展到所有数据类型的切片的通用算法</li></ul><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lm"><img src="../Images/792e9fee57c04f5ccb0fb56e5df79c7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jCVt19YA7PcffHASSw_h-Q.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">图来自 unsplash</figcaption></figure><p id="89de" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">简介:</strong></p><p id="c76f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Slice 是一种类似可变长度数组的轻量级数据结构，用于存储一系列相似类型的数据元素。我们将使用操作系统包将数据保存在本地磁盘的切片中。</p><p id="73b4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">概念:</strong></p><p id="b399" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">软件包 os 支持操作系统功能的独立于平台的接口。WriteFile 函数将数据写入一个命名文件。必要时，WriteFile 会创建命名文件，并向其中写入数据。但是，WriteFile 需要字节片格式的数据。</p><p id="9720" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，如果数据是字符串切片形式，我们将连接存储到字符串切片的字符串，然后将连接的字符串转换为字节切片。最后，我们将把这个字节片数据发送给 WriteFile 函数。</p><p id="2a7d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您有一个其他数据类型的切片，比如 int64 silce 或 float32 切片，我们可以使用 for 循环将该数据转换为 string 切片，并从那里插入上面讨论的算法。</p><p id="2070" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mc">算法:</em></p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div class="gh gi md"><img src="../Images/fc38f61cd339687ea9b6f03d38f3e4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*WZ--nhsroEu8jOGiWkoNWg.png"/></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk translated">图:使用操作系统包应遵循的步骤(使用 apps.diagram.net 制作的图片)</figcaption></figure><p id="4512" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">代码:</strong></p><p id="b729" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该算法已编码如下</p><pre class="ln lo lp lq gt me mf mg mh aw mi bi"><span id="089f" class="mj mk in mf b gy ml mm l mn mo">package main</span><span id="9c8e" class="mj mk in mf b gy mp mm l mn mo">import (<br/> "fmt"<br/> "os"<br/> "strings"<br/>)</span><span id="43e4" class="mj mk in mf b gy mp mm l mn mo">func main() {</span><span id="2593" class="mj mk in mf b gy mp mm l mn mo">     quotes_data := []string{"Spread love everywhere you go. Let no  one ever come to you without leaving happier. -Mother Teresa ", "Tell me and I forget. Teach me and I remember. Involve me and I learn. -Benjamin Franklin", "You must be the change you wish to see in the world. -Mahatma Gandhi", "The opposite of love is not hate; it’s indifference. -Elie Wiesel"}</span><span id="091f" class="mj mk in mf b gy mp mm l mn mo">     combined_string := strings.Join([]string(quotes_data), "; \n")<br/>     bs1 := []byte(combined_string)<br/>     err := os.WriteFile("quotes_repo.txt", bs1, 0666)<br/>     if err != nil {<br/>         fmt.Println("Error : ", err)<br/>     }</span><span id="4a0e" class="mj mk in mf b gy mp mm l mn mo">     bs2, err := os.ReadFile("quotes_repo.txt")<br/>     if err != nil {<br/>         fmt.Println("Error : ", err)<br/>     }<br/>     file_datas := strings.Split(string(bs2), ";")<br/>     fmt.Println(file_datas)<br/>}</span></pre><p id="a745" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mc">输出:</em></p><pre class="ln lo lp lq gt me mf mg mh aw mi bi"><span id="65d5" class="mj mk in mf b gy ml mm l mn mo">[Spread love everywhere you go. Let no one ever come to you without leaving happier. -Mother Teresa</span><span id="280e" class="mj mk in mf b gy mp mm l mn mo">Tell me and I forget. Teach me and I remember. Involve me and I learn. -Benjamin Franklin</span><span id="2759" class="mj mk in mf b gy mp mm l mn mo">You must be the change you wish to see in the world. -Mahatma Gandhi</span><span id="b01b" class="mj mk in mf b gy mp mm l mn mo">The opposite of love is not hate  it’s indifference. -Elie Wiesel]</span></pre><p id="bf46" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mc">理解代码和输出:</em></p><p id="50e9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">输出与输入匹配，输出格式良好，因为当我们连接字符串时，我们添加了“\n”新行命令，以提高存储在本地磁盘上的文件的可读性。</p><p id="c713" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">读者部分</strong></p><p id="f935" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请在评论区给出你的想法，告诉我们如何将这个概念变成一个项目。</p></div></div>    
</body>
</html>