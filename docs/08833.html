<html>
<head>
<title>Virtual Machine disk performance testing on Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">基于云的虚拟机磁盘性能测试</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/virtual-machine-disk-performance-testing-on-cloud-b7a7c2e62a6f?source=collection_archive---------6-----------------------#2022-07-13">https://blog.devgenius.io/virtual-machine-disk-performance-testing-on-cloud-b7a7c2e62a6f?source=collection_archive---------6-----------------------#2022-07-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="89be" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如今，主要的云提供商提供许多托管服务，甚至是无服务器计算，让您不必担心管理基础架构和关心底层硬件(CPU、内存、磁盘、网络)。然而，仍然有许多传统工作负载假设有一台服务器。在这种情况下，当将 onprem 工作负载迁移到云时，您必须使用 IaaS 和 lift-and-shift，这意味着您自己需要关心服务器性能。</p><h1 id="47a5" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">语境</h1><p id="f1d1" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">本文讨论了测量服务器磁盘性能的基本概念和工具。工作负载是一个定制的数据库软件。通常，数据库性能取决于 CPU、内存，但最重要的是磁盘性能(因为通常数据库有很多读/写活动。如果您的磁盘很慢，并且您进行了大量的磁盘读/写操作，那么总体性能将是次优的。因此，我们希望选择提供最佳性能的磁盘。</p><h1 id="06f1" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">Azure 上的磁盘类型</h1><p id="1d77" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">非托管磁盘:它是 Azure 上最老的产品。一般你需要创建 Azure blob 存储和<a class="ae ll" href="https://azure.microsoft.com/en-us/pricing/details/storage/page-blobs/" rel="noopener ugc nofollow" target="_blank">页面 blob </a>，你得自己管理。</p><p id="470b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">托管盘:后来 Azure 提供了<a class="ae ll" href="https://docs.microsoft.com/en-us/azure/virtual-machines/disks-types" rel="noopener ugc nofollow" target="_blank">托管盘</a>。呈现给你的是一个“磁盘”，而不需要关心“页面 blob”。不同的层提供不同的性能级别。我认为它是由 Azure 存储支持的。你可以看看这篇<a class="ae ll" href="https://docs.microsoft.com/en-us/azure/virtual-machines/disks-types" rel="noopener ugc nofollow" target="_blank">文章</a>。</p><p id="1126" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本地 NVMe SSD:这是最新的产品，磁盘是虚拟机的“本地”磁盘。它是由这个<a class="ae ll" href="https://docs.microsoft.com/en-us/azure/virtual-machines/lsv2-series" rel="noopener ugc nofollow" target="_blank"> Azure VM SKU </a>提供的。据微软称，磁盘 IOPS 和吞吐量是这一类别中最好的。</p><h1 id="c349" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">磁盘测试概念</h1><p id="a9e1" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">通常，当您比较磁盘性能时，有 3 个最重要的指标是您需要的，即 IOPS、吞吐量和延迟。以下两篇文章是很好的参考。</p><div class="lm ln gp gr lo lp"><a href="https://www.sqlshack.com/using-diskspd-to-test-sql-server-storage-subsystems/" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">使用 Diskspd 测试 SQL Server 存储子系统</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">2020 年 7 月 28 日在本文中，我们将了解如何使用 Diskspd 测试我们的存储子系统性能。的…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">www.sqlshack.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://www.sqlshack.com/how-to-analyze-storage-subsystem-performance-in-sql-server/" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">如何分析 SQL Server 中存储子系统的性能</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">2017 年 2 月 23 日为了提高性能，数据库管理员通常会在除分析存储之外的各个方面进行搜索…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">www.sqlshack.com</p></div></div><div class="ly l"><div class="mf l ma mb mc ly md me lp"/></div></div></a></div><p id="0797" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">其他概念是 I/O(输入/输出):</p><p id="b934" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ll" href="https://medium.com/@duhroach/the-impact-of-blocksize-on-persistent-disk-performance-7e50a85b2647" rel="noopener">块大小</a>:I/O 操作时的数据单位。你可以想一想管道的直径，越高，在同样的单位时间内，可以通过的数据越多。</p><p id="6d0c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">随机 I/O 与顺序 I/O:这些是数据访问模式。出自<a class="ae ll" href="https://www.tech21century.com/sequential-vs-random-access-drives/" rel="noopener ugc nofollow" target="_blank">本文</a>、<a class="ae ll" href="https://condusiv.com/sequential-io-always-outperforms-random-io-on-hard-disk-drives-or-ssds/" rel="noopener ugc nofollow" target="_blank"> 2 </a>顺序访问一个数据文件是指计算机系统顺序地读取或写入信息到文件，从文件的开头开始，一步一步地进行。另一方面，对文件的随机存取意味着计算机系统可以在数据文件的任何地方读取或写入信息。由于磁盘是一个物理设备，并使用磁盘头来访问信息，要进行随机访问，它需要将磁盘头移动到准确的位置，因此通常随机 I/O 比顺序 I/O 慢得多。然而，对于数据库，一般读/写是随机的，但对于备份，它是顺序的。</p><p id="8e44" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ll" href="https://louwrentius.com/understanding-storage-performance-iops-and-latency.html" rel="noopener ugc nofollow" target="_blank">未完成的 I/O </a>:存储子系统通常为 I/O 请求维护一个队列。高队列深度可能表示存储子系统无法处理工作负载</p><p id="17fc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">磁盘测试实用程序具有这些选项的标志，以模拟不同的工作负载。理解这些标志对于了解您要测试什么是很重要的。</p><h1 id="ad99" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">使用本地 NVMe SSD 和托管磁盘调配 Azure 虚拟机</h1><p id="a6a3" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">我们想比较本地 NVMe SSD 和托管磁盘的性能。以下是我们用来为虚拟机提供托管磁盘的示例(我们使用<a class="ae ll" href="https://azure.microsoft.com/en-us/services/azure-bastion/" rel="noopener ugc nofollow" target="_blank"> bastion 主机</a>来访问虚拟机，因为客户端环境不允许虚拟机上的公共 IP，我们使用 Ubuntu 操作系统)</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="9d45" class="mp kj in ml b gy mq mr l ms mt">provider “azurerm” {<br/> # The “feature” block is required for AzureRM provider 2.x.<br/> # If you are using version 1.x, the “features” block is not allowed.<br/> version = “~&gt;2.0”<br/> features {}<br/>}<br/> <br/>locals {<br/> myterraformgroup = “rg1 “<br/>}<br/><br/>resource “azurerm_virtual_network” “myterraformnetwork” {<br/> name = “myVnet”<br/> address_space = [“10.0.0.0/16”]<br/> location = “eastus”<br/> resource_group_name = local.myterraformgroup<br/> <br/> tags = {<br/> environment = “Terraform Demo”<br/> }<br/>}<br/> <br/># Bastion subnet<br/>resource “azurerm_subnet” “bastionsubnet” {<br/> name = “AzureBastionSubnet”<br/> resource_group_name = local.myterraformgroup<br/> virtual_network_name = azurerm_virtual_network.myterraformnetwork.name<br/> address_prefixes = [“10.0.200.0/27”]<br/>}<br/> <br/>resource “azurerm_public_ip” “bastionip” {<br/> name = “bastionip”<br/> location = azurerm_virtual_network.myterraformnetwork.location<br/> resource_group_name = local.myterraformgroup<br/> allocation_method = “Static”<br/> sku = “Standard”<br/>}<br/> <br/>resource “azurerm_bastion_host” “bastionhost” {<br/> name = “myvmbastion”<br/> location = azurerm_virtual_network.myterraformnetwork.location<br/> resource_group_name = local.myterraformgroup<br/> <br/> ip_configuration {<br/> name = “configuration”<br/> subnet_id = azurerm_subnet.bastionsubnet.id<br/> public_ip_address_id = azurerm_public_ip.bastionip.id<br/> }<br/>}<br/> <br/># Create worker subnet<br/>resource “azurerm_subnet” “myterraformsubnet” {<br/> name = “mySubnet”<br/> resource_group_name = local.myterraformgroup<br/> virtual_network_name = azurerm_virtual_network.myterraformnetwork.name<br/> address_prefixes = [“10.0.1.0/24”]<br/>}<br/> <br/># Create Network Security Group and rule<br/>resource “azurerm_network_security_group” “myterraformnsg” {<br/> name = “myNetworkSecurityGroup”<br/> location = “eastus”<br/> resource_group_name = local.myterraformgroup<br/> <br/> security_rule {<br/> name = “SSH”<br/> priority = 1001<br/> direction = “Inbound”<br/> access = “Allow”<br/> protocol = “Tcp”<br/> source_port_range = “*”<br/> destination_port_range = “22”<br/> source_address_prefix = “*”<br/> destination_address_prefix = “*”<br/> }<br/> <br/> tags = {<br/> environment = “Terraform Demo”<br/> }<br/>}<br/> <br/># Create network interface<br/>resource “azurerm_network_interface” “myterraformnic” {<br/> name = “myNIC”<br/> location = “eastus”<br/> resource_group_name = local.myterraformgroup<br/> <br/> ip_configuration {<br/> name = “myNicConfiguration”<br/> subnet_id = azurerm_subnet.myterraformsubnet.id<br/> private_ip_address_allocation = “Dynamic”<br/> }<br/> <br/> tags = {<br/> environment = “Terraform Demo”<br/> }<br/>}<br/> <br/># Connect the security group to the network interface<br/>resource “azurerm_network_interface_security_group_association” “example” {<br/> network_interface_id = azurerm_network_interface.myterraformnic.id<br/> network_security_group_id = azurerm_network_security_group.myterraformnsg.id<br/>}<br/> <br/># Generate random text for a unique storage account name<br/>resource “random_id” “randomId” {<br/> keepers = {<br/> # Generate a new ID only when a new resource group is defined<br/> resource_group = local.myterraformgroup<br/> }<br/> <br/> byte_length = 8<br/>}<br/> <br/># Create storage account for boot diagnostics<br/>resource “azurerm_storage_account” “mystorageaccount” {<br/> name = “diag${random_id.randomId.hex}”<br/> resource_group_name = local.myterraformgroup<br/> location = “eastus”<br/> account_tier = “Standard”<br/> account_replication_type = “LRS”<br/> <br/> tags = {<br/> environment = “Terraform Demo”<br/> }<br/>}<br/> <br/># Create (and display) an SSH key<br/>resource “tls_private_key” “example_ssh” {<br/> algorithm = “RSA”<br/> rsa_bits = 4096<br/>}<br/>output “tls_private_key” { <br/> value = nonsensitive(tls_private_key.example_ssh.private_key_pem)<br/>}<br/> <br/># Create virtual machine<br/>resource “azurerm_linux_virtual_machine” “myterraformvm” {<br/> name = “myVM”<br/> location = “eastus”<br/> resource_group_name = local.myterraformgroup<br/> network_interface_ids = [azurerm_network_interface.myterraformnic.id]<br/> size = “&lt;SKU&gt;”<br/> <br/> os_disk {<br/> name = “myOsDisk”<br/> caching = “ReadWrite”<br/> storage_account_type = “Premium_LRS”<br/> }<br/> <br/> source_image_reference {<br/> publisher = “Canonical”<br/> offer = “UbuntuServer”<br/> sku = “18.04-LTS”<br/> version = “latest”<br/> }<br/> <br/> computer_name = “myvm”<br/> admin_username = “azureuser”<br/> disable_password_authentication = true<br/> <br/> admin_ssh_key {<br/> username = “azureuser”<br/> public_key = tls_private_key.example_ssh.public_key_openssh<br/> }<br/> <br/> boot_diagnostics {<br/> storage_account_uri = azurerm_storage_account.mystorageaccount.primary_blob_endpoint<br/> }<br/> <br/> tags = {<br/> environment = “Terraform Demo”<br/> }<br/>}<br/> <br/>resource “azurerm_managed_disk” “example” {<br/> name = “myVM-disk1”<br/> location = “eastus”<br/> resource_group_name = local.myterraformgroup<br/> storage_account_type = “Premium_LRS”<br/> create_option = “Empty”<br/> disk_size_gb = 2048<br/>}<br/> <br/>resource “azurerm_virtual_machine_data_disk_attachment” “example” {<br/> managed_disk_id = azurerm_managed_disk.example.id<br/> virtual_machine_id = azurerm_linux_virtual_machine.myterraformvm.id<br/> lun = “10”<br/> caching = “ReadWrite”<br/>}</span></pre><p id="1ec5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于普通优质 SSD，我们使用“Standard _ d 16 ads _ V5”；NVMe 固态硬盘<br/>标配 _L8s_v3。</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="2f6e" class="mp kj in ml b gy mq mr l ms mt">terraform init<br/>terraform plan<br/>terraform apply</span></pre><h1 id="89b5" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">磁盘测试预设置</h1><h2 id="0bd4" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">挂载磁盘</h2><p id="955b" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">下面是 NVMe 磁盘的输出</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="3123" class="mp kj in ml b gy mq mr l ms mt"># check NVMe disk<br/>lsblk<br/>NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT<br/>sda 8:0 0 30G 0 disk <br/>├─sda1 8:1 0 29.9G 0 part /<br/>├─sda14 8:14 0 4M 0 part <br/>└─sda15 8:15 0 106M 0 part /boot/efi<br/>sdb 8:16 0 80G 0 disk <br/>└─sdb1 8:17 0 80G 0 part /mnt<br/>sdc 8:32 0 2T 0 disk <br/>sr0 11:0 1 628K 0 rom <br/>nvme0n1 259:0 0 1.8T 0 disk</span></pre><p id="1147" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">装载被管理的磁盘</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="94e3" class="mp kj in ml b gy mq mr l ms mt"># mount managed disk<br/>sudo parted /dev/sdc — script mklabel gpt mkpart xfspart xfs 0% 100%<br/>sudo mkfs.xfs /dev/sdc1<br/>sudo partprobe /dev/sdc1<br/>sudo mkdir /datadrive<br/>sudo mount /dev/sdc1 /datadrive</span></pre><p id="de4a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">NVMe 山固态硬盘</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="4711" class="mp kj in ml b gy mq mr l ms mt"># mount local nvme SSD disk<br/>sudo parted /dev/nvme0n1 — script mklabel gpt mkpart xfspart xfs 0% 100%<br/>sudo mkfs.xfs /dev/nvme0n1p1<br/>sudo partprobe /dev/nvme0n1p1<br/>sudo mkdir /datadrive_nvme<br/>sudo mount /dev/nvme0n1p1 /datadrive_nvme</span></pre><h2 id="4217" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">检查磁盘分区</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="5e0d" class="mp kj in ml b gy mq mr l ms mt">df -h<br/>Filesystem Size Used Avail Use% Mounted on<br/>udev 32G 0 32G 0% /dev<br/>tmpfs 6.3G 736K 6.3G 1% /run<br/>/dev/sda1 29G 1.5G 28G 5% /<br/>tmpfs 32G 0 32G 0% /dev/shm<br/>tmpfs 5.0M 0 5.0M 0% /run/lock<br/>tmpfs 32G 0 32G 0% /sys/fs/cgroup<br/>/dev/sda15 105M 4.4M 100M 5% /boot/efi<br/>/dev/sdb1 79G 57M 75G 1% /mnt<br/>tmpfs 6.3G 0 6.3G 0% /run/user/1000<br/>/dev/sdc1 2.0T 2.1G 2.0T 1% /datadrive<br/>/dev/nvme0n1p1 1.8T 1.9G 1.8T 1% /datadrive_nvme</span></pre><h2 id="d394" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">安装磁盘测试工具</h2><p id="36c3" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">我们使用的磁盘测试工具是 diskspd。也可以用<a class="ae ll" href="https://docs.microsoft.com/en-us/azure/virtual-machines/disks-benchmarks" rel="noopener ugc nofollow" target="_blank"> FIO </a>。</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="842b" class="mp kj in ml b gy mq mr l ms mt"># install build tool<br/>sudo apt update -y<br/>sudo apt install build-essential -y<br/>sudo apt install libaio1 -y<br/>sudo apt install libaio-dev -y<br/> <br/># download diskspd tool<br/>git clone <a class="ae ll" href="https://github.com/microsoft/diskspd-for-linux.git" rel="noopener ugc nofollow" target="_blank">https://github.com/microsoft/diskspd-for-linux.git</a><br/>cd diskspd-for-linux<br/> <br/># compile<br/>make<br/> <br/>sudo make install<br/> <br/># create folder for test<br/>sudo mkdir -p /datadrive/diskspdtest<br/>sudo chmod -R 777 /datadrive/diskspdtest<br/> <br/>sudo mkdir -p /datadrive_nvme/diskspdtest<br/>sudo chmod -R 777 /datadrive_nvme/diskspdtest</span></pre><h1 id="6028" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">圆盘试验</h1><h2 id="5d66" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">托管磁盘随机 100%写入 8K 块大小</h2><p id="41eb" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">示例命令</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="6753" class="mp kj in ml b gy mq mr l ms mt">echo “random 100% write 8K test” &gt;&gt; mdisk.log<br/>diskspd -c50G -w100 -b8K -F4 -r -o128 -W30 -d30 -Sh /datadrive/diskspdtest/testfile.dat &gt;&gt; mdisk.log<br/>random 100% write 8K test</span></pre><p id="5b96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="6482" class="mp kj in ml b gy mq mr l ms mt">Command Line: diskspd -c50G -w100 -b8K -F4 -r -o128 -W30 -d30 -Sh /datadrive/diskspdtest/testfile.dat</span><span id="dd29" class="mp kj in ml b gy nf mr l ms mt">System info:<br/>processor count: 16<br/>caching options: fua=0</span><span id="0eed" class="mp kj in ml b gy nf mr l ms mt">Input parameters:</span><span id="0e76" class="mp kj in ml b gy nf mr l ms mt">job: 1<br/>________<br/>duration: 30s<br/>warm up time: 30s<br/>random seed: 0<br/>total threads: 4<br/>path: ‘/datadrive/diskspdtest/testfile.dat’<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 0/100)<br/>block size: 8192<br/>using random I/O (alignment: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: sdc<br/>device scheduler: none</span><span id="7c42" class="mp kj in ml b gy nf mr l ms mt">Results for job 1:<br/>test time: 30s<br/>*****************************************************</span><span id="d467" class="mp kj in ml b gy nf mr l ms mt">CPU | Usage | User | Kernel | IO Wait | Idle <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 3.26% | 1.50% | 1.76% | 0.00% | 96.74% <br/> 1 | 3.22% | 1.59% | 1.63% | 0.00% | 96.78% <br/> 2 | 3.25% | 1.79% | 1.46% | 0.00% | 96.75% <br/> 3 | 3.48% | 1.66% | 1.82% | 0.00% | 96.52% <br/> 4 | 1.28% | 0.00% | 1.28% | 41.71% | 57.01% <br/> 5 | 0.03% | 0.03% | 0.00% | 0.00% | 99.97% <br/> 6 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 8 | 1.35% | 0.00% | 1.35% | 44.66% | 53.99% <br/> 9 | 1.19% | 0.00% | 1.19% | 44.92% | 53.90% <br/> 10 | 1.11% | 0.00% | 1.11% | 41.65% | 57.23% <br/> 11 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 12 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 13 | 0.07% | 0.00% | 0.07% | 0.00% | 99.93% <br/> 14 | 0.10% | 0.07% | 0.03% | 0.00% | 99.90% <br/> 15 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/>avg: 1.15% | 0.42% | 0.73% | 10.81% | 88.04%</span><span id="1f4c" class="mp kj in ml b gy nf mr l ms mt">Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 535412736 | 65358 | 17.02 | 2178.60 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 532193280 | 64965 | 16.92 | 2165.50 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 536616960 | 65505 | 17.06 | 2183.50 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 536518656 | 65493 | 17.06 | 2183.10 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 2140741632 | 261321 | 68.05 | 8710.70</em></span><span id="68b0" class="mp kj in ml b gy nf mr l ms mt">Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span><span id="24fd" class="mp kj in ml b gy nf mr l ms mt">Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 535412736 | 65358 | 17.02 | 2178.60 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 532193280 | 64965 | 16.92 | 2165.50 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 536616960 | 65505 | 17.06 | 2183.50 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 536518656 | 65493 | 17.06 | 2183.10 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 2140741632 | 261321 | 68.05 | 8710.70</em></span></pre><p id="55f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以看到吞吐量(MB/s)和 IOPS(I/O/s)有“总计”、“读取”、“写入”部分。最重要的指标用斜体表示。</p><h2 id="d8d3" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">托管磁盘随机 100%写入 64K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="6e07" class="mp kj in ml b gy mq mr l ms mt">echo “random 100% write 64K test” &gt;&gt; mdisk.log<br/>diskspd -c50G -w100 -b64K -F4 -r -o128 -W30 -d30 -Sh /datadrive/diskspdtest/testfile.dat &gt;&gt; mdisk.log</span></pre><p id="ce66" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="e834" class="mp kj in ml b gy mq mr l ms mt">Command Line: diskspd -c50G -w100 -b64K -F4 -r -o128 -W30 -d30 -Sh /datadrive/diskspdtest/testfile.dat</span><span id="06d2" class="mp kj in ml b gy nf mr l ms mt">System info:<br/>processor count: 16<br/>caching options: fua=0</span><span id="a848" class="mp kj in ml b gy nf mr l ms mt">Input parameters:</span><span id="e9a1" class="mp kj in ml b gy nf mr l ms mt">job: 1<br/>________<br/>duration: 30s<br/>warm up time: 30s<br/>random seed: 0<br/>total threads: 4<br/>path: ‘/datadrive/diskspdtest/testfile.dat’<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 0/100)<br/>block size: 65536<br/>using random I/O (alignment: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: sdc<br/>device scheduler: none</span><span id="1d64" class="mp kj in ml b gy nf mr l ms mt">Results for job 1:<br/>test time: 30s<br/>*****************************************************</span><span id="29bc" class="mp kj in ml b gy nf mr l ms mt">CPU | Usage | User | Kernel | IO Wait | Idle <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 2.69% | 0.96% | 1.73% | 0.00% | 97.31% <br/> 1 | 2.56% | 1.03% | 1.53% | 0.00% | 97.44% <br/> 2 | 2.43% | 0.90% | 1.53% | 0.00% | 97.57% <br/> 3 | 2.63% | 1.00% | 1.63% | 0.00% | 97.37% <br/> 4 | 0.97% | 0.00% | 0.97% | 24.79% | 74.24% <br/> 5 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 6 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 8 | 1.14% | 0.00% | 1.14% | 28.22% | 70.64% <br/> 9 | 1.14% | 0.00% | 1.14% | 26.29% | 72.57% <br/> 10 | 0.94% | 0.00% | 0.94% | 23.22% | 75.84% <br/> 11 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 12 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 13 | 0.03% | 0.00% | 0.03% | 0.00% | 99.97% <br/> 14 | 0.10% | 0.03% | 0.07% | 0.00% | 99.90% <br/> 15 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/>avg: 0.92% | 0.25% | 0.67% | 6.41% | 92.68%</span><span id="21ac" class="mp kj in ml b gy nf mr l ms mt">Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 2681143296 | 40911 | 85.23 | 1363.70 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 2682388480 | 40930 | 85.27 | 1364.33 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 2681470976 | 40916 | 85.24 | 1363.87 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 2681077760 | 40910 | 85.23 | 1363.67 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 10726080512 | 163667 | 340.97 | 5455.57</em></span><span id="2754" class="mp kj in ml b gy nf mr l ms mt">Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span><span id="b729" class="mp kj in ml b gy nf mr l ms mt">Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 2681143296 | 40911 | 85.23 | 1363.70 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 2682388480 | 40930 | 85.27 | 1364.33 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 2681470976 | 40916 | 85.24 | 1363.87 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 2681077760 | 40910 | 85.23 | 1363.67 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 10726080512 | 163667 | 340.97 | 5455.57</em></span></pre><h2 id="62a6" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">托管磁盘随机 100%读取 4K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="2585" class="mp kj in ml b gy mq mr l ms mt">echo “random 100% read 4K test” &gt;&gt; mdisk.log<br/>diskspd -c50G -b4K -F4 -r -o128 -W60 -d30 -Sh /datadrive/diskspdtest/testfile.dat &gt;&gt; mdisk.log</span></pre><p id="8a55" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="40d8" class="mp kj in ml b gy mq mr l ms mt">random 100% read 4K test</span><span id="6daf" class="mp kj in ml b gy nf mr l ms mt">Command Line: diskspd -c50G -b4K -F4 -r -o128 -W60 -d30 -Sh /datadrive/diskspdtest/testfile.dat</span><span id="91cc" class="mp kj in ml b gy nf mr l ms mt">System info:<br/>processor count: 16<br/>caching options: fua=0</span><span id="67dd" class="mp kj in ml b gy nf mr l ms mt">Input parameters:</span><span id="5eaa" class="mp kj in ml b gy nf mr l ms mt">job: 1<br/>________<br/>duration: 30s<br/>warm up time: 60s<br/>random seed: 0<br/>total threads: 4<br/>path: ‘/datadrive/diskspdtest/testfile.dat’<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 100/0)<br/>block size: 4096<br/>using random I/O (alignment: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: sdc<br/>device scheduler: none</span><span id="7937" class="mp kj in ml b gy nf mr l ms mt">Results for job 1:<br/>test time: 30s<br/>*****************************************************</span><span id="9206" class="mp kj in ml b gy nf mr l ms mt">CPU | Usage | User | Kernel | IO Wait | Idle <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 19.85% | 9.69% | 10.16% | 0.00% | 80.15% <br/> 1 | 20.08% | 10.46% | 9.62% | 0.00% | 79.92% <br/> 2 | 20.26% | 10.43% | 9.82% | 0.00% | 79.74% <br/> 3 | 20.18% | 10.82% | 9.36% | 0.00% | 79.82% <br/> 4 | 0.07% | 0.03% | 0.03% | 0.00% | 99.93% <br/> 5 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 6 | 0.10% | 0.00% | 0.10% | 0.00% | 99.90% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 8 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 9 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 10 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 11 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 12 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 13 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 14 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 15 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/>avg: 5.03% | 2.59% | 2.44% | 0.00% | 94.97%</span><span id="7447" class="mp kj in ml b gy nf mr l ms mt">Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 2350694400 | 573900 | 74.73 | 19130.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 2350731264 | 573909 | 74.73 | 19130.30 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 2349465600 | 573600 | 74.69 | 19120.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 2351009792 | 573977 | 74.74 | 19132.57 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 9401901056 | 2295386 | 298.88 | 76512.87</em></span><span id="cbba" class="mp kj in ml b gy nf mr l ms mt">Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 2350694400 | 573900 | 74.73 | 19130.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 2350731264 | 573909 | 74.73 | 19130.30 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 2349465600 | 573600 | 74.69 | 19120.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 2351009792 | 573977 | 74.74 | 19132.57 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 9401901056 | 2295386 | 298.88 | 76512.87</em></span><span id="52bc" class="mp kj in ml b gy nf mr l ms mt">Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span></pre><h2 id="d994" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">托管磁盘随机 100%读取 64K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="8076" class="mp kj in ml b gy mq mr l ms mt">echo "random 100% read 64K test" &gt;&gt; mdisk.log<br/>diskspd -c50G -b64K -F4 -r -o128 -W60 -d30 -Sh /datadrive/diskspdtest/testfile.dat &gt;&gt; mdisk.log</span></pre><p id="1575" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="3099" class="mp kj in ml b gy mq mr l ms mt">random 100% read 64K test<br/>Command Line: diskspd -c50G -b64K -F4 -r -o128 -W60 -d30 -Sh /datadrive/diskspdtest/testfile.dat<br/>System info:<br/>processor count: 16<br/>caching options: fua=0<br/>Input parameters:<br/>job: 1<br/>________<br/>duration: 30s<br/>warm up time: 60s<br/>random seed: 0<br/>total threads: 4<br/>path: '/datadrive/diskspdtest/testfile.dat'<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 100/0)<br/>block size: 65536<br/>using random I/O (alignment: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: sdc<br/>device scheduler: none<br/>Results for job 1:<br/>test time: 30s<br/>*****************************************************<br/>CPU | Usage | User | Kernel | IO Wait | Idle <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 7.99% | 3.11% | 4.88% | 0.00% | 92.01% <br/> 1 | 7.87% | 3.35% | 4.52% | 0.00% | 92.13% <br/> 2 | 8.21% | 3.47% | 4.74% | 0.00% | 91.79% <br/> 3 | 7.99% | 3.37% | 4.61% | 0.00% | 92.01% <br/> 4 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 5 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 6 | 0.13% | 0.03% | 0.10% | 0.00% | 99.87% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 8 | 0.00% | 0.00% | 0.00% | 0.03% | 99.97% <br/> 9 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 10 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 11 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 12 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 13 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 14 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 15 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>avg: 2.01% | 0.83% | 1.18% | 0.00% | 97.99%<br/>Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 12241797120 | 186795 | 389.16 | 6226.50 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 12239372288 | 186758 | 389.08 | 6225.27 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 12239044608 | 186753 | 389.07 | 6225.10 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 12239765504 | 186764 | 389.09 | 6225.47 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 48959979520 | 747070 | 1556.40 | 24902.33</em><br/>Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 12241797120 | 186795 | 389.16 | 6226.50 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 12239372288 | 186758 | 389.08 | 6225.27 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 12239044608 | 186753 | 389.07 | 6225.10 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 12239765504 | 186764 | 389.09 | 6225.47 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 48959979520 | 747070 | 1556.40 | 24902.33</em><br/>Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span></pre><h2 id="95d3" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">NVMe 磁盘随机 100%写入 8K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="e17d" class="mp kj in ml b gy mq mr l ms mt">echo “random 100% write 8K test” &gt;&gt; nvmessd.log<br/>diskspd -c50G -w100 -b8K -F4 -r -o128 -W30 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat &gt;&gt; nvmessd.log</span></pre><p id="cdcd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="262c" class="mp kj in ml b gy mq mr l ms mt">random 100% write 8K test</span><span id="077e" class="mp kj in ml b gy nf mr l ms mt">Command Line: diskspd -c50G -w100 -b8K -F4 -r -o128 -W30 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat</span><span id="95f6" class="mp kj in ml b gy nf mr l ms mt">System info:</span><span id="237b" class="mp kj in ml b gy nf mr l ms mt">processor count: 8</span><span id="049f" class="mp kj in ml b gy nf mr l ms mt">caching options: fua=0</span><span id="7a5d" class="mp kj in ml b gy nf mr l ms mt">Input parameters:</span><span id="8b73" class="mp kj in ml b gy nf mr l ms mt">job: 1</span><span id="9569" class="mp kj in ml b gy nf mr l ms mt">________</span><span id="8484" class="mp kj in ml b gy nf mr l ms mt">duration: 30s</span><span id="cdb6" class="mp kj in ml b gy nf mr l ms mt">warm up time: 30s</span><span id="730f" class="mp kj in ml b gy nf mr l ms mt">random seed: 0</span><span id="da40" class="mp kj in ml b gy nf mr l ms mt">total threads: 4</span><span id="4450" class="mp kj in ml b gy nf mr l ms mt">path: ‘/datadrive_nvme/diskspdtest/testfile.dat’</span><span id="b002" class="mp kj in ml b gy nf mr l ms mt">size: 53687091200B</span><span id="06e4" class="mp kj in ml b gy nf mr l ms mt">using O_DIRECT</span><span id="6bd7" class="mp kj in ml b gy nf mr l ms mt">using O_SYNC</span><span id="7ee3" class="mp kj in ml b gy nf mr l ms mt">performing mix test (read/write ratio: 0/100)</span><span id="51dc" class="mp kj in ml b gy nf mr l ms mt">block size: 8192</span><span id="3a4a" class="mp kj in ml b gy nf mr l ms mt">using random I/O (alignment: 65536)</span><span id="a925" class="mp kj in ml b gy nf mr l ms mt">number of outstanding I/O operations: 128)</span><span id="8e31" class="mp kj in ml b gy nf mr l ms mt">thread stride size: 0</span><span id="9c46" class="mp kj in ml b gy nf mr l ms mt">block device: nvme0n1</span><span id="2850" class="mp kj in ml b gy nf mr l ms mt">device scheduler: none</span><span id="dfd8" class="mp kj in ml b gy nf mr l ms mt">Results for job 1:</span><span id="bd34" class="mp kj in ml b gy nf mr l ms mt">test time: 30s</span><span id="35f8" class="mp kj in ml b gy nf mr l ms mt">*****************************************************</span><span id="1752" class="mp kj in ml b gy nf mr l ms mt">CPU | Usage | User | Kernel | IO Wait | Idle</span><span id="0e26" class="mp kj in ml b gy nf mr l ms mt">— — — — — — — — — — — — — — — — — — — — — — — — — — — -</span><span id="f506" class="mp kj in ml b gy nf mr l ms mt">0 | 83.38% | 29.97% | 53.40% | 0.00% | 16.62%</span><span id="f2d0" class="mp kj in ml b gy nf mr l ms mt">1 | 83.32% | 31.08% | 52.24% | 0.00% | 16.68%</span><span id="d0c7" class="mp kj in ml b gy nf mr l ms mt">2 | 83.27% | 29.84% | 53.44% | 0.00% | 16.73%</span><span id="d27e" class="mp kj in ml b gy nf mr l ms mt">3 | 83.40% | 29.43% | 53.97% | 0.00% | 16.60%</span><span id="7852" class="mp kj in ml b gy nf mr l ms mt">4 | 0.10% | 0.00% | 0.10% | 0.00% | 99.90%</span><span id="40de" class="mp kj in ml b gy nf mr l ms mt">5 | 0.03% | 0.00% | 0.03% | 0.00% | 99.97%</span><span id="f7f7" class="mp kj in ml b gy nf mr l ms mt">6 | 0.07% | 0.03% | 0.03% | 0.00% | 99.93%</span><span id="4acb" class="mp kj in ml b gy nf mr l ms mt">7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00%</span><span id="d885" class="mp kj in ml b gy nf mr l ms mt">— — — — — — — — — — — — — — — — — — — — — — — — — — — -</span><span id="c0c3" class="mp kj in ml b gy nf mr l ms mt">avg: 41.70% | 15.04% | 26.65% | 0.00% | 58.30%</span><span id="a601" class="mp kj in ml b gy nf mr l ms mt">Total IO</span><span id="fc72" class="mp kj in ml b gy nf mr l ms mt">thread | bytes | I/Os | MB/s | I/O per s | file</span><span id="21cb" class="mp kj in ml b gy nf mr l ms mt">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</span><span id="a148" class="mp kj in ml b gy nf mr l ms mt">0 | 13626580992 | 1663401 | 433.18 | 55446.70 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="98cf" class="mp kj in ml b gy nf mr l ms mt">1 | 13626392576 | 1663378 | 433.17 | 55445.93 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="0b83" class="mp kj in ml b gy nf mr l ms mt">2 | 13626064896 | 1663338 | 433.16 | 55444.60 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="bb0c" class="mp kj in ml b gy nf mr l ms mt">3 | 13626548224 | 1663397 | 433.18 | 55446.57 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="95f4" class="mp kj in ml b gy nf mr l ms mt">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</span><span id="5903" class="mp kj in ml b gy nf mr l ms mt"><em class="ng">total: 54505586688 | 6653514 | 1732.69 | 221783.80</em></span><span id="7b04" class="mp kj in ml b gy nf mr l ms mt">Read IO</span><span id="3fa3" class="mp kj in ml b gy nf mr l ms mt">thread | bytes | I/Os | MB/s | I/O per s | file</span><span id="b138" class="mp kj in ml b gy nf mr l ms mt">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</span><span id="ccfe" class="mp kj in ml b gy nf mr l ms mt">0 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="5a96" class="mp kj in ml b gy nf mr l ms mt">1 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="0a39" class="mp kj in ml b gy nf mr l ms mt">2 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="5e26" class="mp kj in ml b gy nf mr l ms mt">3 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="9635" class="mp kj in ml b gy nf mr l ms mt">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</span><span id="6382" class="mp kj in ml b gy nf mr l ms mt"><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span><span id="3c29" class="mp kj in ml b gy nf mr l ms mt">Write IO</span><span id="9e7a" class="mp kj in ml b gy nf mr l ms mt">thread | bytes | I/Os | MB/s | I/O per s | file</span><span id="5d7c" class="mp kj in ml b gy nf mr l ms mt">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</span><span id="1aa2" class="mp kj in ml b gy nf mr l ms mt">0 | 13626580992 | 1663401 | 433.18 | 55446.70 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="39fa" class="mp kj in ml b gy nf mr l ms mt">1 | 13626392576 | 1663378 | 433.17 | 55445.93 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="6eeb" class="mp kj in ml b gy nf mr l ms mt">2 | 13626064896 | 1663338 | 433.16 | 55444.60 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="cbf0" class="mp kj in ml b gy nf mr l ms mt">3 | 13626548224 | 1663397 | 433.18 | 55446.57 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)</span><span id="8847" class="mp kj in ml b gy nf mr l ms mt">— — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -</span><span id="d04c" class="mp kj in ml b gy nf mr l ms mt"><em class="ng">total: 54505586688 | 6653514 | 1732.69 | 221783.80</em></span></pre><h2 id="a55d" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">NVMe 磁盘随机 100%写入 64K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="8188" class="mp kj in ml b gy mq mr l ms mt">echo “random 100% write 64K test” &gt;&gt; nvmessd.log<br/>diskspd -c50G -w100 -b64K -F4 -r -o128 -W30 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat &gt;&gt; nvmessd.log</span></pre><p id="e860" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="8400" class="mp kj in ml b gy mq mr l ms mt">random 100% write 64K test</span><span id="6aa0" class="mp kj in ml b gy nf mr l ms mt">Command Line: diskspd -c50G -w100 -b64K -F4 -r -o128 -W30 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat</span><span id="57a6" class="mp kj in ml b gy nf mr l ms mt">System info:<br/>processor count: 8<br/>caching options: fua=0</span><span id="6bf2" class="mp kj in ml b gy nf mr l ms mt">Input parameters:</span><span id="8555" class="mp kj in ml b gy nf mr l ms mt">job: 1<br/>________<br/>duration: 30s<br/>warm up time: 30s<br/>random seed: 0<br/>total threads: 4<br/>path: ‘/datadrive_nvme/diskspdtest/testfile.dat’<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 0/100)<br/>block size: 65536<br/>using random I/O (alignment: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: nvme0n1<br/>device scheduler: none</span><span id="c500" class="mp kj in ml b gy nf mr l ms mt">Results for job 1:<br/>test time: 30s<br/>*****************************************************</span><span id="32cb" class="mp kj in ml b gy nf mr l ms mt">CPU | Usage | User | Kernel | IO Wait | Idle <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 40.97% | 2.35% | 38.61% | 0.00% | 59.03% <br/> 1 | 38.87% | 2.49% | 36.38% | 0.00% | 61.13% <br/> 2 | 48.30% | 2.59% | 45.72% | 0.00% | 51.70% <br/> 3 | 42.05% | 2.43% | 39.62% | 0.00% | 57.95% <br/> 4 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 5 | 0.13% | 0.00% | 0.13% | 0.00% | 99.87% <br/> 6 | 0.17% | 0.00% | 0.17% | 0.00% | 99.83% <br/> 7 | 0.07% | 0.00% | 0.07% | 0.00% | 99.93% <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/>avg: 21.32% | 1.23% | 20.09% | 0.00% | 78.68%</span><span id="a56e" class="mp kj in ml b gy nf mr l ms mt">Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 9235267584 | 140919 | 293.58 | 4697.30 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 9235333120 | 140920 | 293.58 | 4697.33 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 9235267584 | 140919 | 293.58 | 4697.30 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 9235267584 | 140919 | 293.58 | 4697.30 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 36941135872 | 563677 | 1174.33 | 18789.23</em></span><span id="ef20" class="mp kj in ml b gy nf mr l ms mt">Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span><span id="2257" class="mp kj in ml b gy nf mr l ms mt">Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 9235267584 | 140919 | 293.58 | 4697.30 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 9235333120 | 140920 | 293.58 | 4697.33 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 9235267584 | 140919 | 293.58 | 4697.30 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 9235267584 | 140919 | 293.58 | 4697.30 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 36941135872 | 563677 | 1174.33 | 18789.23</em></span></pre><h2 id="2079" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">NVMe 磁盘随机 100%读取 4K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="2dab" class="mp kj in ml b gy mq mr l ms mt">echo “random 100% read 4K test” &gt;&gt; nvmessd.log<br/>diskspd -c50G -b4K -F4 -r -o128 -W60 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat &gt;&gt; nvmessd.log</span></pre><p id="f82d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="ac47" class="mp kj in ml b gy mq mr l ms mt">random 100% read 4K test<br/>Command Line: diskspd -c50G -b4K -F4 -r -o128 -W60 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat<br/>System info:<br/>processor count: 8<br/>caching options: fua=0<br/>Input parameters:<br/>job: 1<br/>________<br/>duration: 30s<br/>warm up time: 60s<br/>random seed: 0<br/>total threads: 4<br/>path: '/datadrive_nvme/diskspdtest/testfile.dat'<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 100/0)<br/>block size: 4096<br/>using random I/O (alignment: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: nvme0n1<br/>device scheduler: none<br/>Results for job 1:<br/>test time: 30s<br/>*****************************************************<br/>CPU | Usage | User | Kernel | IO Wait | Idle <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 90.78% | 48.60% | 42.18% | 0.00% | 9.22% <br/> 1 | 90.89% | 49.49% | 41.40% | 0.00% | 9.11% <br/> 2 | 90.95% | 48.30% | 42.64% | 0.00% | 9.05% <br/> 3 | 91.58% | 48.15% | 43.43% | 0.00% | 8.42% <br/> 4 | 0.03% | 0.00% | 0.03% | 0.00% | 99.97% <br/> 5 | 0.03% | 0.00% | 0.03% | 0.00% | 99.97% <br/> 6 | 0.03% | 0.03% | 0.00% | 0.00% | 99.97% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>avg: 45.54% | 24.32% | 21.22% | 0.00% | 54.46%<br/>Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 10434953216 | 2547596 | 331.72 | 84919.87 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 10434940928 | 2547593 | 331.72 | 84919.77 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 10361815040 | 2529740 | 329.39 | 84324.67 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 10145116160 | 2476835 | 322.50 | 82561.17 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>total: 41376825344 | 10101764 | 1315.33 | 336725.47<br/>Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 10434953216 | 2547596 | 331.72 | 84919.87 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 10434940928 | 2547593 | 331.72 | 84919.77 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 10361815040 | 2529740 | 329.39 | 84324.67 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 10145116160 | 2476835 | 322.50 | 82561.17 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>total: 41376825344 | 10101764 | 1315.33 | 336725.47<br/>Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>total: 0 | 0 | 0.00 | 0.00</span></pre><h2 id="c013" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">NVMe 磁盘随机 100%读取 64K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="af0a" class="mp kj in ml b gy mq mr l ms mt">echo “random 100% read 64K test” &gt;&gt; nvmessd.log<br/>diskspd -c50G -b64K -F4 -r -o128 -W60 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat &gt;&gt; nvmessd.log</span></pre><p id="bb74" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="54ed" class="mp kj in ml b gy mq mr l ms mt">random 100% read 64K test</span><span id="4038" class="mp kj in ml b gy nf mr l ms mt">Command Line: diskspd -c50G -b64K -F4 -r -o128 -W60 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat</span><span id="7b88" class="mp kj in ml b gy nf mr l ms mt">System info:<br/>processor count: 8<br/>caching options: fua=0</span><span id="3818" class="mp kj in ml b gy nf mr l ms mt">Input parameters:</span><span id="098a" class="mp kj in ml b gy nf mr l ms mt">job: 1<br/>________<br/>duration: 30s<br/>warm up time: 60s<br/>random seed: 0<br/>total threads: 4<br/>path: ‘/datadrive_nvme/diskspdtest/testfile.dat’<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 100/0)<br/>block size: 65536<br/>using random I/O (alignment: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: nvme0n1<br/>device scheduler: none</span><span id="b06c" class="mp kj in ml b gy nf mr l ms mt">Results for job 1:<br/>test time: 30s<br/>*****************************************************</span><span id="7c3d" class="mp kj in ml b gy nf mr l ms mt">CPU | Usage | User | Kernel | IO Wait | Idle <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 13.18% | 5.07% | 8.11% | 0.00% | 86.82% <br/> 1 | 12.35% | 5.00% | 7.35% | 0.00% | 87.65% <br/> 2 | 12.97% | 5.16% | 7.81% | 0.00% | 87.03% <br/> 3 | 12.89% | 5.10% | 7.79% | 0.00% | 87.11% <br/> 4 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 5 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 6 | 0.10% | 0.03% | 0.07% | 0.00% | 99.90% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/>avg: 6.44% | 2.54% | 3.89% | 0.00% | 93.56%</span><span id="7fb7" class="mp kj in ml b gy nf mr l ms mt">Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 23954391040 | 365515 | 761.49 | 12183.83 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 23954194432 | 365512 | 761.48 | 12183.73 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 23952687104 | 365489 | 761.44 | 12182.97 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 23950458880 | 365455 | 761.36 | 12181.83 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 95811731456 | 1461971 | 3045.77 | 48732.37</em></span><span id="3ad0" class="mp kj in ml b gy nf mr l ms mt">Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 23954391040 | 365515 | 761.49 | 12183.83 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 23954194432 | 365512 | 761.48 | 12183.73 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 23952687104 | 365489 | 761.44 | 12182.97 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 23950458880 | 365455 | 761.36 | 12181.83 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 95811731456 | 1461971 | 3045.77 | 48732.37</em></span><span id="ec01" class="mp kj in ml b gy nf mr l ms mt">Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span></pre><h2 id="cd09" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">托管磁盘随机 80%读取 64K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="a2f4" class="mp kj in ml b gy mq mr l ms mt">echo “random 80% read 64K test” &gt;&gt; mdisk.log<br/>diskspd -c50G -w20 -b64K -F4 -r -o128 -W60 -d30 -Sh /datadrive/diskspdtest/testfile.dat &gt;&gt; mdisk.log</span></pre><p id="8a2d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="1e14" class="mp kj in ml b gy mq mr l ms mt">random 80% read 64K test</span><span id="6162" class="mp kj in ml b gy nf mr l ms mt">Command Line: diskspd -c50G -w20 -b64K -F4 -r -o128 -W60 -d30 -Sh /datadrive/diskspdtest/testfile.dat</span><span id="acea" class="mp kj in ml b gy nf mr l ms mt">System info:<br/>processor count: 16<br/>caching options: fua=0</span><span id="988e" class="mp kj in ml b gy nf mr l ms mt">Input parameters:</span><span id="deab" class="mp kj in ml b gy nf mr l ms mt">job: 1<br/>________<br/>duration: 30s<br/>warm up time: 60s<br/>random seed: 0<br/>total threads: 4<br/>path: ‘/datadrive/diskspdtest/testfile.dat’<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 80/20)<br/>block size: 65536<br/>using random I/O (alignment: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: sdc<br/>device scheduler: none</span><span id="f208" class="mp kj in ml b gy nf mr l ms mt">Results for job 1:<br/>test time: 30s<br/>*****************************************************</span><span id="51b2" class="mp kj in ml b gy nf mr l ms mt">CPU | Usage | User | Kernel | IO Wait | Idle <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 7.18% | 3.00% | 4.17% | 0.00% | 92.82% <br/> 1 | 7.35% | 3.22% | 4.13% | 0.00% | 92.65% <br/> 2 | 7.23% | 3.13% | 4.10% | 0.00% | 92.77% <br/> 3 | 7.08% | 3.13% | 3.95% | 0.00% | 92.92% <br/> 4 | 0.71% | 0.00% | 0.71% | 32.01% | 67.28% <br/> 5 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 6 | 0.20% | 0.00% | 0.20% | 0.00% | 99.80% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 8 | 0.84% | 0.00% | 0.84% | 36.11% | 63.04% <br/> 9 | 0.74% | 0.00% | 0.74% | 38.40% | 60.85% <br/> 10 | 0.77% | 0.00% | 0.77% | 29.41% | 69.82% <br/> 11 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 12 | 0.07% | 0.07% | 0.00% | 0.00% | 99.93% <br/> 13 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 14 | 0.13% | 0.00% | 0.13% | 0.03% | 99.83% <br/> 15 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/>avg: 2.02% | 0.78% | 1.24% | 8.50% | 89.48%</span><span id="dc36" class="mp kj in ml b gy nf mr l ms mt">Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 7128023040 | 108765 | 226.59 | 3625.50 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 7128416256 | 108771 | 226.61 | 3625.70 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 7128416256 | 108771 | 226.61 | 3625.70 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 7129661440 | 108790 | 226.65 | 3626.33 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 28514516992 | 435097 | 906.45 | 14503.23</em></span><span id="ed7d" class="mp kj in ml b gy nf mr l ms mt">Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 5694423040 | 86890 | 181.02 | 2896.33 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 5709955072 | 87127 | 181.51 | 2904.23 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 5703073792 | 87022 | 181.30 | 2900.73 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 5685903360 | 86760 | 180.75 | 2892.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 22793355264 | 347799 | 724.58 | 11593.30</em></span><span id="67fa" class="mp kj in ml b gy nf mr l ms mt">Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/> 0 | 1433600000 | 21875 | 45.57 | 729.17 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 1418461184 | 21644 | 45.09 | 721.47 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 1425342464 | 21749 | 45.31 | 724.97 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 1443758080 | 22030 | 45.90 | 734.33 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — — -<br/><em class="ng">total: 5721161728 | 87298 | 181.87 | 2909.93</em></span></pre><h2 id="3770" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">托管磁盘顺序 100%写入 64K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="923e" class="mp kj in ml b gy mq mr l ms mt">echo “sequential 100% write 64K test” &gt;&gt; mdisk.log<br/>diskspd -c50G -w100 -b64K -F4 -o128 -W30 -d30 -Sh /datadrive/diskspdtest/testfile.dat &gt;&gt; mdisk.log</span></pre><p id="cc59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="5fd5" class="mp kj in ml b gy mq mr l ms mt">sequential 100% write 64K test<br/>Command Line: diskspd -c50G -w100 -b64K -F4 -o128 -W30 -d30 -Sh /datadrive/diskspdtest/testfile.dat<br/>System info:<br/>processor count: 16<br/>caching options: fua=0<br/>Input parameters:<br/>job: 1<br/>________<br/>duration: 30s<br/>warm up time: 30s<br/>random seed: 0<br/>total threads: 4<br/>path: '/datadrive/diskspdtest/testfile.dat'<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 0/100)<br/>block size: 65536<br/>using sequential I/O (stride: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: sdc<br/>device scheduler: none<br/>Results for job 1:<br/>test time: 30s<br/>*****************************************************<br/>CPU | Usage | User | Kernel | IO Wait | Idle <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 1.66% | 0.60% | 1.06% | 0.00% | 98.34% <br/> 1 | 1.40% | 0.57% | 0.83% | 0.00% | 98.60% <br/> 2 | 1.83% | 0.43% | 1.40% | 0.00% | 98.17% <br/> 3 | 1.53% | 0.50% | 1.03% | 0.00% | 98.47% <br/> 4 | 0.50% | 0.00% | 0.50% | 5.16% | 94.33% <br/> 5 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 6 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 8 | 0.57% | 0.00% | 0.57% | 5.53% | 93.90% <br/> 9 | 0.70% | 0.00% | 0.70% | 5.64% | 93.66% <br/> 10 | 0.44% | 0.00% | 0.44% | 4.63% | 94.93% <br/> 11 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 12 | 0.07% | 0.07% | 0.00% | 0.00% | 99.93% <br/> 13 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 14 | 0.20% | 0.00% | 0.20% | 0.03% | 99.77% <br/> 15 | 0.03% | 0.00% | 0.03% | 0.00% | 99.97% <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>avg: 0.56% | 0.14% | 0.42% | 1.31% | 98.13%<br/>Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 985006080 | 15030 | 31.31 | 501.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 983302144 | 15004 | 31.26 | 500.13 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 981729280 | 14980 | 31.21 | 499.33 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 1001521152 | 15282 | 31.84 | 509.40 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 3951558656 | 60296 | 125.62 | 2009.87</em><br/>Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em><br/>Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 985006080 | 15030 | 31.31 | 501.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 983302144 | 15004 | 31.26 | 500.13 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 981729280 | 14980 | 31.21 | 499.33 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 1001521152 | 15282 | 31.84 | 509.40 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 3951558656 | 60296 | 125.62 | 2009.87</em></span></pre><h2 id="31fd" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">NVMe 磁盘顺序 100%写入 64K 数据块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="5a56" class="mp kj in ml b gy mq mr l ms mt">echo “sequential 100% write 64K test” &gt;&gt; nvmessd.log<br/>diskspd -c50G -w100 -b64K -F4 -o128 -W30 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat &gt;&gt; nvmessd.log</span></pre><p id="db3e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="ddeb" class="mp kj in ml b gy mq mr l ms mt">sequential 100% write 64K test<br/>Command Line: diskspd -c50G -w100 -b64K -F4 -o128 -W30 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat<br/>System info:<br/>processor count: 8<br/>caching options: fua=0<br/>Input parameters:<br/>job: 1<br/>________<br/>duration: 30s<br/>warm up time: 30s<br/>random seed: 0<br/>total threads: 4<br/>path: '/datadrive_nvme/diskspdtest/testfile.dat'<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 0/100)<br/>block size: 65536<br/>using sequential I/O (stride: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: nvme0n1<br/>device scheduler: none<br/>Results for job 1:<br/>test time: 30s<br/>*****************************************************<br/>CPU | Usage | User | Kernel | IO Wait | Idle <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 37.69% | 4.12% | 33.57% | 0.00% | 62.31% <br/> 1 | 35.70% | 4.06% | 31.64% | 0.00% | 64.30% <br/> 2 | 36.92% | 3.91% | 33.01% | 0.00% | 63.08% <br/> 3 | 40.50% | 3.89% | 36.61% | 0.00% | 59.50% <br/> 4 | 0.00% | 0.00% | 0.00% | 0.03% | 99.97% <br/> 5 | 0.50% | 0.00% | 0.50% | 0.00% | 99.50% <br/> 6 | 0.20% | 0.03% | 0.17% | 0.00% | 99.80% <br/> 7 | 0.13% | 0.00% | 0.13% | 0.00% | 99.87% <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>avg: 18.95% | 2.00% | 16.95% | 0.00% | 81.04%<br/>Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 13722976256 | 209396 | 436.24 | 6979.87 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 13709606912 | 209192 | 435.82 | 6973.07 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 13735755776 | 209591 | 436.65 | 6986.37 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 13788119040 | 210390 | 438.31 | 7013.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 54956457984 | 838569 | 1747.02 | 27952.30</em><br/>Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em><br/>Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 13722976256 | 209396 | 436.24 | 6979.87 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 13709606912 | 209192 | 435.82 | 6973.07 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 13735755776 | 209591 | 436.65 | 6986.37 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 13788119040 | 210390 | 438.31 | 7013.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 54956457984 | 838569 | 1747.02 | 27952.30</em></span></pre><h2 id="6b3b" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">托管磁盘顺序 100%读取 64K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="f492" class="mp kj in ml b gy mq mr l ms mt">echo “sequential 100% read 64K test” &gt;&gt; mdisk.log<br/>diskspd -c50G -b64K -F4 -o128 -W60 -d30 -Sh /datadrive/diskspdtest/testfile.dat &gt;&gt; mdisk.log</span></pre><p id="1542" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="cca1" class="mp kj in ml b gy mq mr l ms mt">sequential 100% read 64K test<br/>Command Line: diskspd -c50G -b64K -F4 -o128 -W60 -d30 -Sh /datadrive/diskspdtest/testfile.dat<br/>System info:<br/>processor count: 16<br/>caching options: fua=0<br/>Input parameters:<br/>job: 1<br/>________<br/>duration: 30s<br/>warm up time: 60s<br/>random seed: 0<br/>total threads: 4<br/>path: '/datadrive/diskspdtest/testfile.dat'<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 100/0)<br/>block size: 65536<br/>using sequential I/O (stride: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: sdc<br/>device scheduler: none<br/>Results for job 1:<br/>test time: 30s<br/>*****************************************************<br/>CPU | Usage | User | Kernel | IO Wait | Idle <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 6.91% | 3.26% | 3.66% | 0.00% | 93.09% <br/> 1 | 7.20% | 3.25% | 3.95% | 0.00% | 92.80% <br/> 2 | 7.17% | 3.48% | 3.69% | 0.00% | 92.83% <br/> 3 | 7.18% | 3.05% | 4.12% | 0.00% | 92.82% <br/> 4 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 5 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 6 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 8 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 9 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 10 | 0.03% | 0.00% | 0.03% | 0.00% | 99.97% <br/> 11 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 12 | 0.03% | 0.03% | 0.00% | 0.00% | 99.97% <br/> 13 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 14 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 15 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>avg: 1.78% | 0.82% | 0.97% | 0.00% | 98.22%<br/>Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 12344950784 | 188369 | 392.44 | 6278.97 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 12290490368 | 187538 | 390.70 | 6251.27 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 12082872320 | 184370 | 384.10 | 6145.67 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 12160073728 | 185548 | 386.56 | 6184.93 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 48878387200 | 745825 | 1553.80 | 24860.83</em><br/>Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 12344950784 | 188369 | 392.44 | 6278.97 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 12290490368 | 187538 | 390.70 | 6251.27 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 12082872320 | 184370 | 384.10 | 6145.67 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 12160073728 | 185548 | 386.56 | 6184.93 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 48878387200 | 745825 | 1553.80 | 24860.83</em><br/>Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span></pre><h2 id="e3ee" class="mp kj in bd kk mu mv dn ko mw mx dp ks jv my mz kw jz na nb la kd nc nd le ne bi translated">NVMe 磁盘顺序 100%读取 64K 块大小</h2><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="1e53" class="mp kj in ml b gy mq mr l ms mt">echo “sequential 100% read 64K test” &gt;&gt; nvmessd.log<br/>diskspd -c50G -b64K -F4 -o128 -W60 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat &gt;&gt; nvmessd.log</span></pre><p id="a37d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">结果</p><pre class="mg mh mi mj gt mk ml mm mn aw mo bi"><span id="18eb" class="mp kj in ml b gy mq mr l ms mt">sequential 100% read 64K test<br/>Command Line: diskspd -c50G -b64K -F4 -o128 -W60 -d30 -Sh /datadrive_nvme/diskspdtest/testfile.dat<br/>System info:<br/>processor count: 8<br/>caching options: fua=0<br/>Input parameters:<br/>job: 1<br/>________<br/>duration: 30s<br/>warm up time: 60s<br/>random seed: 0<br/>total threads: 4<br/>path: '/datadrive_nvme/diskspdtest/testfile.dat'<br/>size: 53687091200B<br/>using O_DIRECT<br/>using O_SYNC<br/>performing mix test (read/write ratio: 100/0)<br/>block size: 65536<br/>using sequential I/O (stride: 65536)<br/>number of outstanding I/O operations: 128)<br/>thread stride size: 0<br/>block device: nvme0n1<br/>device scheduler: none<br/>Results for job 1:<br/>test time: 30s<br/>*****************************************************<br/>CPU | Usage | User | Kernel | IO Wait | Idle <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 11.80% | 5.22% | 6.58% | 0.00% | 88.20% <br/> 1 | 11.26% | 5.26% | 6.00% | 0.00% | 88.74% <br/> 2 | 12.37% | 5.40% | 6.97% | 0.00% | 87.63% <br/> 3 | 12.18% | 4.86% | 7.31% | 0.00% | 87.82% <br/> 4 | 0.03% | 0.03% | 0.00% | 0.00% | 99.97% <br/> 5 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> 6 | 0.03% | 0.03% | 0.00% | 0.00% | 99.97% <br/> 7 | 0.00% | 0.00% | 0.00% | 0.00% | 100.00% <br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>avg: 5.96% | 2.60% | 3.36% | 0.00% | 94.04%<br/>Total IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 24843911168 | 379088 | 789.77 | 12636.27 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 24843976704 | 379089 | 789.77 | 12636.30 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 24843780096 | 379086 | 789.76 | 12636.20 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 24844042240 | 379090 | 789.77 | 12636.33 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 99375710208 | 1516353 | 3159.07 | 50545.10</em><br/>Read IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 24843911168 | 379088 | 789.77 | 12636.27 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 24843976704 | 379089 | 789.77 | 12636.30 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 24843780096 | 379086 | 789.76 | 12636.20 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 24844042240 | 379090 | 789.77 | 12636.33 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 99375710208 | 1516353 | 3159.07 | 50545.10</em><br/>Write IO<br/>thread | bytes | I/Os | MB/s | I/O per s | file<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/> 0 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 1 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 2 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> 3 | 0 | 0 | 0.00 | 0.00 | /datadrive_nvme/diskspdtest/testfile.dat (53687091200B)<br/> - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/><em class="ng">total: 0 | 0 | 0.00 | 0.00</em></span></pre><h1 id="e1fa" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">吞吐量比较</h1><figure class="mg mh mi mj gt ni gh gi paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="gh gi nh"><img src="../Images/db94fb780c61c0a6eb48aff22543d9db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ulqJCS9Uh8R8-40cQcMUXQ.png"/></div></div></figure><p id="4418" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">观察</p><ol class=""><li id="4b9c" class="no np in jm b jn jo jr js jv nq jz nr kd ns kh nt nu nv nw bi translated">在所有情况下，NVMe 始终优于 2TB 管理的磁盘，并与 ms 文档保持一致</li><li id="9468" class="no np in jm b jn nx jr ny jv nz jz oa kd ob kh nt nu nv nw bi translated">无论是随机还是顺序，读取性能通常都高于写入性能</li><li id="3996" class="no np in jm b jn nx jr ny jv nz jz oa kd ob kh nt nu nv nw bi translated">NVMe 随机写入比托管磁盘好得多，而读取差异较小</li><li id="c450" class="no np in jm b jn nx jr ny jv nz jz oa kd ob kh nt nu nv nw bi translated">在大多数情况下，较小数据块大小(4K)的吞吐量小于较大数据块的吞吐量。如果可能的话，取 64KB、256KB、1MB、4MB 的块大小比 4KB 好。</li></ol><h1 id="a6ed" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">数据库工作负载的存储性能测试文章</h1><div class="lm ln gp gr lo lp"><a href="https://github.com/Microsoft/diskspd/wiki/Command-line-and-parameters" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">命令行和参数 microsoft/diskspd Wiki</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">github.com</p></div></div><div class="ly l"><div class="oc l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://www.sqlservercentral.com/blogs/sql-server-storage-best-practices" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">SQL Server 存储最佳实践- SQLServerCentral</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">服务器存储是 SQL Server 性能最重要的因素之一。利用大量内存的机会...</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">www.sqlservercentral.com</p></div></div><div class="ly l"><div class="od l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://blog.purestorage.com/purely-technical/what-is-sql-servers-io-block-size/" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">SQL Server 的 IO 块大小是多少？</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">请访问这篇纯存储帖子，了解更多有关 SQL Server IO 块大小以及备份和恢复的信息…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">blog.purestorage.com</p></div></div><div class="ly l"><div class="oe l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/disks-types#premium-ssds" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">为 Azure IaaS 虚拟机选择磁盘类型-托管磁盘- Azure 虚拟机</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">适用于:✔️ Linux 虚拟机✔️ Windows 虚拟机✔️灵活规模集✔️统一规模集 Azure 托管磁盘当前…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">docs.microsoft.com</p></div></div><div class="ly l"><div class="of l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://storagereviews.net/what-is-the-average-read-write-speed-of-an-ssd-hard-drive/" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">SSD 硬盘的平均读写速度是多少？-存储审查</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">作者 Paul |最近更新时间:2022 年 7 月 5 日众所周知，固态硬盘在为您提供……</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">storagereviews.net</p></div></div><div class="ly l"><div class="og l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://www.partitionwizard.com/partitionmanager/nvme-vs-ssd.html" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">NVMe VS SSD:有什么区别，如何升级到 SSD？</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">什么是 NVMe 固态硬盘？NVMe 和 SSD 有什么区别？不重装 OS 怎么升级到 SSD？很多…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">www.partitionwizard.com</p></div></div><div class="ly l"><div class="oh l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://www.enterprisestorageforum.com/hardware/how-fast-are-nvme-speeds/" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">NVMe 的速度有多快？企业存储论坛</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">NVMe 速度令人印象深刻并不奇怪:一个由存储和服务器供应商组成的蓝带财团开发了 NVMe…</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">www.enterprisestorageforum.com</p></div></div><div class="ly l"><div class="oi l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://storageioblog.com/server-storage-io-benchmarking-tools-microsoft-diskspd-part/" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">服务器存储 I/O 基准测试工具:Microsoft Diskspd(第一部分)</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">Microsoft Diskspd 是一个合成的工作负载生成(例如基准测试)工具，它可以作为一个工具在各种 Windows 系统上运行</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">storageioblog.com</p></div></div><div class="ly l"><div class="oj l ma mb mc ly md me lp"/></div></div></a></div><div class="lm ln gp gr lo lp"><a href="https://github.com/microsoft/diskspd/issues/131" rel="noopener  ugc nofollow" target="_blank"><div class="lq ab fo"><div class="lr ab ls cl cj lt"><h2 class="bd io gy z fp lu fr fs lv fu fw im bi translated">在随机读取测试中，IOPS 比其他工具高得多</h2><div class="lw l"><h3 class="bd b gy z fp lu fr fs lv fu fw dk translated">我用这些命令运行了 diskspd，以测试不同存储系统的存储系统性能(4KB 随机读取，QD16x16T)</h3></div><div class="lx l"><p class="bd b dl z fp lu fr fs lv fu fw dk translated">github.com</p></div></div><div class="ly l"><div class="ok l ma mb mc ly md me lp"/></div></div></a></div></div></div>    
</body>
</html>