<html>
<head>
<title>A guide to branching and code review for a software developer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">软件开发人员的分支和代码评审指南</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/a-guide-to-branching-and-code-review-for-a-software-developer-429ab1d59039?source=collection_archive---------3-----------------------#2021-11-12">https://blog.devgenius.io/a-guide-to-branching-and-code-review-for-a-software-developer-429ab1d59039?source=collection_archive---------3-----------------------#2021-11-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><blockquote class="jk jl jm"><p id="1caa" class="jn jo jp jq b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl ig bi translated">这是一个权威性的指南，遵循软件开发人员创建分支、添加提交、代码审查和合并的一些最佳实践，以实现软件的协作和可维护性。</p></blockquote><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/0cce3c3d19354b10f67903909c6ab560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0uEY_UXDcIU2ouLzXy7C3A.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated">简·坎迪在<a class="ae lc" href="https://unsplash.com/s/photos/branching?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><p id="e217" class="pw-post-body-paragraph jn jo in jq b jr js jt ju jv jw jx jy ld ka kb kc le ke kf kg lf ki kj kk kl ig bi translated">作为一名软件开发人员，我每天都在使用任何代码版本控制工具，这些工具可以让我与不同地理位置的人进行协作。当我们处理属于不同地区的人共享的一段代码时，他们肯定会带来他们自己的代码编写风格，这在他们向提交添加注释甚至创建分支命名约定时是显而易见的。在这种情况下，几乎必须遵循一个明确的指导方针，一些预定义的规则来创建和维护代码的分支，并在合并代码并为其提供单一的真实来源之前审查代码。</p><p id="978b" class="pw-post-body-paragraph jn jo in jq b jr js jt ju jv jw jx jy ld ka kb kc le ke kf kg lf ki kj kk kl ig bi translated">多年来，在作为软件开发人员编写代码和交付代码的过程中，我学到了一些创建新分支的最佳实践，向分支添加新的提交，然后进行代码审查和合并。每当我们试图给一个现有的软件添加一个新的特性时，这些都是典型的步骤。以下是我在作为软件开发人员的职业生涯中学到并实施的一些指导方针，我试图遵守其中的大部分来保持软件的健全性。</p><p id="e74b" class="pw-post-body-paragraph jn jo in jq b jr js jt ju jv jw jx jy ld ka kb kc le ke kf kg lf ki kj kk kl ig bi translated"><strong class="jq io"> <em class="jp">分支指南- </em> </strong></p><ol class=""><li id="1cc3" class="lg lh in jq b jr js jv jw ld li le lj lf lk kl ll lm ln lo bi translated">应该只有一个<strong class="jq io">主/主要</strong>分支作为一个软件的单一事实来源。</li><li id="4149" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">保持主分支在任何时候都是最新的，没有管道故障，这应该是团队的集体责任。</li><li id="c25d" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">任何时候都应该有 3 个主要分支，以避免在上述第 2 点在某个点出现故障的情况下，<strong class="jq io">主</strong>分支出现单点故障，即<strong class="jq io">开发、QA、主</strong></li><li id="a1cb" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">这些支持分支，比如开发和 QA 分支，应该经常从 MASTER 中重新创建，通常是在一个新的 sprint 开始的时候，或者在 sprint 目标达到的时候，在 sprint 接近尾声的时候。</li><li id="2613" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated"><strong class="jq io"> DEV 分支</strong>:这个分支将充当一个地方，在将一个 sprint 转移到下一个级别之前，整合所有团队成员的代码变更。这个分支充当了开发人员测试一些他们不能在本地测试的特性的平台。开发人员通常有一个操场服务器来犯错误，重新运行，调试和尝试在这个分支上玩他们的测试用例。</li><li id="fd5e" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">QA 分支:在最终转移到主分支之前，这个分支将作为在测试服务器上运行代码更改的地方，并测试新的更改是否在接近实时的环境中按预期工作。</li><li id="78f5" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">在更改被审阅并合并到主分支后，删除特征分支。</li></ol><p id="ca6a" class="pw-post-body-paragraph jn jo in jq b jr js jt ju jv jw jx jy ld ka kb kc le ke kf kg lf ki kj kk kl ig bi translated"><strong class="jq io"> <em class="jp">添加提交准则:- </em> </strong></p><ol class=""><li id="c098" class="lg lh in jq b jr js jv jw ld li le lj lf lk kl ll lm ln lo bi translated">总是从主分支创建一个新的分支，这样您的分支中就有了最新的代码。</li><li id="96ee" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">对于任何新的功能请求，创建一个带有前缀的功能分支:<strong class="jq io">功能/短标签描述，</strong>例如功能分支名称类似于<strong class="jq io">:功能/添加的新功能</strong></li><li id="d913" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">对于任何 bug 修复，以下面的格式前缀创建一个新的分支:<strong class="jq io">bug fix/short-ticket-description</strong>，例如，bug 修复分支名称可能是:“<strong class="jq io">bug fix/Fixed-important-bug”</strong></li><li id="1a15" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">在将提交添加到特性分支时，确保遵循以下模式:"<strong class="jq io">关于该提交的小注释</strong>"，例如，这种格式的注释可能是，<strong class="jq io"> "updated-the-feature" </strong></li><li id="56f3" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">如果使用 JIRA 作为票证，则在提交中添加 JIRA#将自动更新相应 JIRA 票证的活动选项卡下的<strong class="jq io">注释部分，这是跟踪和维护工作历史的好方法，无需手动添加注释。</strong></li></ol><p id="80a4" class="pw-post-body-paragraph jn jo in jq b jr js jt ju jv jw jx jy ld ka kb kc le ke kf kg lf ki kj kk kl ig bi translated"><strong class="jq io"> <em class="jp">代码审查&amp;合并指南:- </em> </strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi lu"><img src="../Images/5d28f92dc6c71e4d80442f597708e33c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1hKDrKentt_7yhretgXtkA.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk translated"><a class="ae lc" href="https://unsplash.com/@arielbesagar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Ariel </a>在<a class="ae lc" href="https://unsplash.com/s/photos/code-review?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><ol class=""><li id="1ea3" class="lg lh in jq b jr js jv jw ld li le lj lf lk kl ll lm ln lo bi translated">在特性/错误修复分支中完成代码更改后，为开发分支提出一个新的合并请求。</li><li id="cab5" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">与团队共享合并请求 URL，以便在合并之前获得至少两个审核的机会。</li><li id="532d" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">最常见的情况是，软件开发人员在缺乏时间的情况下将配置值硬编码到代码中，这些代码可以根据不同的执行运行时而改变。如果是使用 helm/kubernetes 的云部署，最好将这些值保存在应用程序属性文件或 values.yaml 文件中。</li><li id="d8ca" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">SonarQube 是一个寻找代码优化和增强技巧的好地方，并尝试使用它们来最小化代码味道并降低认知和循环类型的代码复杂性。</li><li id="c603" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">最好在代码中使用最少数量的嵌套 IF-ELSE 语句和嵌套 FOR 循环等语句，以降低整体复杂性。</li><li id="56b0" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">一旦评审意见得到处理和解决，将代码合并到开发分支中。</li><li id="78d9" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">在合并到 dev 分支之后，创建 MR 的开发人员的唯一责任是将其合并到 QA 分支，以保持它与 DEV 同步，并提供给 QA 对开发的代码进行进一步测试。</li><li id="a6f7" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">在这一点上，如果 QA 提出了一个 bug，那么应该从 QA 分支创建一个新的 bugfix 分支，bug fix 应该应用到这个分支上，进行测试，再次检查，并合并到 QA 中，直到它得到解决，可以继续进行。</li><li id="4ddc" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">因此，在每个 sprint 之后，应该有一个从 QA 分支到 MASTER 分支的 MR 请求，由团队中的一个人提出，最好是 QA 在签署代码之后，合并到 MASTER 分支之前。此步骤将确保主分支上的零管道故障。</li><li id="b1eb" class="lg lh in jq b jr lp jv lq ld lr le ls lf lt kl ll lm ln lo bi translated">此时，当特性分支被合并到主分支中时，开发分支可以从主分支中重新创建，循环继续，一个冲刺接一个冲刺。</li></ol></div><div class="ab cl lv lw hr lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ig ih ii ij ik"><p id="8838" class="pw-post-body-paragraph jn jo in jq b jr js jt ju jv jw jx jy ld ka kb kc le ke kf kg lf ki kj kk kl ig bi translated"><strong class="jq io">结论</strong>:纵观上述所有步骤，最重要的是始终保持主分支无错误，这可以通过为所有新请求创建单独的功能分支并使用开发/QA 分支进行所有级别的测试来确保。另一个必不可少的步骤是制定适当的代码审查和合并指南，以抓住编写软件的人遗漏的任何可能的错误，并努力保持主分支中的最终代码没有 bug。</p></div></div>    
</body>
</html>