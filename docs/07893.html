<html>
<head>
<title>ESLint + Prettier + Typescript and React in 2022</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2022 年 ESLint+beauty+Typescript 和 React</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/eslint-prettier-typescript-and-react-in-2022-e5021ebca2b1?source=collection_archive---------0-----------------------#2022-05-01">https://blog.devgenius.io/eslint-prettier-typescript-and-react-in-2022-e5021ebca2b1?source=collection_archive---------0-----------------------#2022-05-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/03b7ade3b1a985ee696c19ee9dd1d822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5KXeutR1kNrePfptCWP8nA.png"/></div></div></figure><p id="cd4d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让一个新项目为开发做好准备可能有点难，特别是如果你使用 React、Typescript、ESLint 和 pretty，但是今天我将帮助你以一种简单的方式正确地设置 React 项目。</p><p id="8643" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通常，问题是每次你必须设置 ESLint 和 Prettier 时，你都要去网络上搜索一篇文章，而这篇文章很可能没有更新。通常，他们使用大量的插件和非默认配置。</p><p id="e29c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们打算用 ESLint 和 Prettier 的基本配置，少一些头疼。</p><p id="5964" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建 react 应用:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="46e6" class="lc ld in ky b gy le lf l lg lh">➜ yarn create react-app boilerplate-react-typescript --template typescript<br/>or <br/>➜ npx create-react-app boilerplate-react-typescript --template typescript <br/>➜ cd boilerplate-react-typescript</span></pre><p id="4349" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe li lj lk ky b">--template typescript</code>:用于创建 ReactJS 类型脚本项目，而不是 JavaScript。</p><h2 id="904e" class="lc ld in bd ll lm ln dn lo lp lq dp lr kg ls lt lu kk lv lw lx ko ly lz ma mb bi translated">什么是 ESLint？</h2><p id="5abb" class="pw-post-body-paragraph jv jw in jx b jy mc ka kb kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks ig bi translated">ESLint 是一个 JavaScript 林挺开源项目，用于发现代码中的问题和语法问题，它将帮助我们找到只有在运行时才能发现的错误逻辑。</p><p id="aa49" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要安装 ESLint:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="842d" class="lc ld in ky b gy le lf l lg lh">➜ yarn add -D eslint<br/>or <br/>➜ npm install eslint --save-dev</span></pre><p id="7744" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装 ESLint 后，我们必须初始化配置文件:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="e095" class="lc ld in ky b gy le lf l lg lh">➜ npx eslint --init</span></pre><p id="078e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这里，我们将回答一些关于我们项目的问题:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="8996" class="lc ld in ky b gy le lf l lg lh">? How would you like to use ESLint? … <br/>  To check syntax only<br/>▸ To check syntax and find problems<br/>  To check syntax, find problems, and enforce code style</span></pre><p id="f7c8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择“检查语法和发现问题”,因为稍后我们将使用更漂亮的代码来加强代码风格。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="5f7e" class="lc ld in ky b gy le lf l lg lh">? What type of modules does your project use? … <br/>▸ JavaScript modules (import/export)<br/>  CommonJS (require/exports)<br/>  None of these</span></pre><p id="0a06" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择 JavaScript 模块主要是因为 ReactJS 用到了。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="4be7" class="lc ld in ky b gy le lf l lg lh">? Which framework does your project use? … <br/>▸ React<br/>  Vue.js<br/>  None of these</span></pre><p id="56e6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择“反应”作为我们的框架。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="6b3c" class="lc ld in ky b gy le lf l lg lh">? Does your project use TypeScript? ‣ No / Yes</span></pre><p id="cc5c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为 TypeScript 选择“是”。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="c3f6" class="lc ld in ky b gy le lf l lg lh">? Where does your code run? …  (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)<br/>✔ Browser<br/>✔ Node</span></pre><p id="0c8c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择“浏览器”,因为 ReactJS 在浏览器上运行。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="3552" class="lc ld in ky b gy le lf l lg lh">? What format do you want your config file to be in? … <br/>  JavaScript<br/>  YAML<br/>▸ JSON</span></pre><p id="b6a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这里，您可以自由选择任何选项，但是我将使用 JSON 作为我的格式。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="5176" class="lc ld in ky b gy le lf l lg lh">The config that you've selected requires the following dependencies:</span><span id="564b" class="lc ld in ky b gy mh lf l lg lh">eslint-plugin-react@latest @typescript-eslint/eslint-plugin@latest @typescript-eslint/parser@latest<br/>? Would you like to install them now with npm? ‣ No / Yes</span></pre><p id="3148" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您使用的是 NPM，请选择“是”，如果不是，请选择“否”，然后复制软件包并:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="c06a" class="lc ld in ky b gy le lf l lg lh">➜ yarn add -D eslint-plugin-react@latest @typescript-eslint/eslint-plugin@latest @typescript-eslint/parser@latest</span></pre><p id="09b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，ESLint 包用您选择的格式创建了一个. eslintrc 文件:</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/676cc8efc70e5ace7074a2c38497b8c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/format:webp/1*dZUsfDf24pWIEFRrRKFhwQ.png"/></div></figure><p id="1d38" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在继续之前，我们必须安装与 ESLint 相关的 TypeScript 插件，为此:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="2bc3" class="lc ld in ky b gy le lf l lg lh">➜ yarn add -D eslint-plugin-import @typescript-eslint/parser eslint-import-resolver-typescript</span></pre><p id="5c76" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果一切顺利，您的 eslintrc 文件应该如下所示:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="1e9c" class="lc ld in ky b gy le lf l lg lh">{<br/>    "env": {<br/>        "browser": true,<br/>        "es2021": true<br/>    },<br/>    "extends": [<br/>        "eslint:recommended",<br/>        "plugin:react/recommended",<br/>        "plugin:@typescript-eslint/recommended"<br/>    ],<br/>    "parser": "@typescript-eslint/parser",<br/>    "parserOptions": {<br/>        "ecmaFeatures": {<br/>            "jsx": true<br/>        },<br/>        "ecmaVersion": "latest",<br/>        "sourceType": "module"<br/>    },<br/>    "plugins": [<br/>        "react",<br/>        "@typescript-eslint"<br/>    ],<br/>    "rules": {<br/>    }<br/>}</span></pre><p id="adda" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们安装更漂亮的，然后编辑 eslint 和更漂亮的配置文件。</p><p id="1759" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，什么更漂亮？</p><p id="2b99" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">漂亮是一个代码样式格式化器，不同于 ESLint，漂亮只是格式化代码样式，并不寻找语法问题。</p><p id="cb40" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">像<code class="fe li lj lk ky b">max-len, no-mixed-spaces-and-tabs, keyword-spacing, comma-style</code>这样的规则是 Prettier 中一些流行的格式规则。</p><p id="59d8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">像<code class="fe li lj lk ky b">no-unused-vars, no-extra-bind, no-implicit-globals, prefer-promise-reject-errors</code>这样的规则在 ESLint 是很常见的。</p><p id="76d7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这种情况下，我更喜欢 ESLint 来搜索问题和语法错误，让代码看起来更漂亮。</p><p id="a872" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要安装得更漂亮:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="9507" class="lc ld in ky b gy le lf l lg lh">➜ yarn add -D prettier eslint-config-prettier eslint-plugin-prettier <!-- -->eslint-plugin-react-hooks</span></pre><p id="5e62" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装后，您必须创建 prettierc 文件:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="8c1c" class="lc ld in ky b gy le lf l lg lh">➜ touch .prettierrc</span></pre><p id="5f64" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此时你有一个空白。prettierrc 文件和一个默认的 eslintrc 文件，所以下一步是配置 eslintrc 文件。</p><p id="27cb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">打开您的 eslintrc 文件。</p><p id="4de4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您打算在项目中使用 Jest，请在“env”中添加以下几行:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="2113" class="lc ld in ky b gy le lf l lg lh">{<br/>    "env": {<br/>        "browser": true,<br/>        "es2021": true,<br/>	"jest": true // Add this line!<br/>    },<br/>	...<br/>}</span></pre><p id="4916" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要将更漂亮与 eslint 一起使用，您需要更改扩展对象:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="cc1c" class="lc ld in ky b gy le lf l lg lh">{<br/>	...<br/>	"extends": [<br/>	  "eslint:recommended",<br/>	  "plugin:react/recommended",<br/>	  "plugin:@typescript-eslint/recommended",<br/>	  "prettier" // Add this line!<br/>	],<br/>	...<br/>}</span></pre><p id="0cf7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ESLint 的主要部分是规则对象。在这里你可以放任何你认为对你的项目和团队有益的规则。</p><p id="3b78" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我的基本配置如下:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="d5f4" class="lc ld in ky b gy le lf l lg lh">{<br/>	...<br/>	"rules": {<br/>        "react/react-in-jsx-scope": "off",<br/>        "camelcase": "error",<br/>        "spaced-comment": "error",<br/>        "quotes": ["error", "single"],<br/>        "no-duplicate-imports": "error"<br/>  },<br/>	...<br/>}</span></pre><p id="8f57" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你想了解更多关于 ESLint 规则，你可以查看<a class="ae mj" href="https://eslint.org/docs/rules/" rel="noopener ugc nofollow" target="_blank">规则</a>页面。</p><p id="9597" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要使用我们安装的插件，请更新 eslintrc 文件中的插件对象:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="db5c" class="lc ld in ky b gy le lf l lg lh">"plugins": ["react", "react-hooks", "@typescript-eslint", "prettier"],</span></pre><p id="caa8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在 ESLint 中最后要设置的是 ESLint-import-resolver-typescript。只需在 eslint 配置文件中添加设置键。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="8744" class="lc ld in ky b gy le lf l lg lh">{<br/>	...<br/>	"settings": {<br/>    "import/resolver": {<br/>      "typescript": {}<br/>    }<br/>  }<br/>}</span></pre><p id="e434" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们将设置。在文章的乞求下创建的 prettierrc 文件。</p><p id="90e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我对 prettierrc 文件的基本配置是:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="e3a8" class="lc ld in ky b gy le lf l lg lh">{<br/>  "semi": false,<br/>  "tabWidth": 2,<br/>  "printWidth": 100,<br/>  "singleQuote": true,<br/>  "trailingComma": "all",<br/>  "jsxSingleQuote": true,<br/>  "bracketSpacing": true<br/>}</span></pre><p id="1658" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是如果你想了解更多，请查看<a class="ae mj" href="https://prettier.io/docs/en/options.html" rel="noopener ugc nofollow" target="_blank">选项</a>页面。</p><p id="2da3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们必须在 package.json 中添加脚本:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="86ef" class="lc ld in ky b gy le lf l lg lh">{<br/>	...<br/>	"scripts": {<br/>	  ...<br/>	  "lint": "eslint src/**/*.{js,jsx,ts,tsx,json}",<br/>          "lint:fix": "eslint --fix 'src/**/*.{js,jsx,ts,tsx,json}'",<br/>          "format": "prettier --write 'src/**/*.{js,jsx,ts,tsx,css,md,json}' --config ./.prettierrc"<br/>        },<br/>...<br/>}</span></pre><p id="27f9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">基本上:</p><ul class=""><li id="a01b" class="mk ml in jx b jy jz kc kd kg mm kk mn ko mo ks mp mq mr ms bi translated">lint:将搜索问题，但不会修复</li><li id="78e8" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated">lint fix:将搜索并尝试修复问题。</li><li id="6877" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated">format:将调用更漂亮的来修复代码样式。</li></ul><p id="be65" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这一点上，你可能已经和林挺有了一个完整的 ReactJS 项目。如果你遇到一些错误或问题，不要犹豫，在下面评论。</p><p id="a13a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你想要一篇关于别的东西的文章吗？别等了，在下面留下评论，我会努力的。</p><p id="f44c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢关于 Git、Linux、生产力技巧、Typescript 和 Python 的内容，请在 Medium <a class="ae mj" href="https://medium.com/u/d708e403f9f9?source=post_page-----4829a118eb2-----------------------------------" rel="noopener">上关注我。</a></p><p id="1e3b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你觉得这篇文章很有用，请与你的朋友分享，保存起来以备后用，并给出一个👏。</p><p id="2bf5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">回头见。</p><div class="my mz gp gr na nb"><a href="https://github.com/itsbetma/boilerplate-react-typescript" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd io gy z fp ng fr fs nh fu fw im bi translated">GitHub-its betma/boilerplate-react-typescript</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">这个项目是用 Create React App 引导的。在项目目录中，您可以运行:在…中运行应用程序</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">github.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np jt nb"/></div></div></a></div><p id="7cf7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi">…</p><p id="280d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要了解更多信息:</p><ul class=""><li id="c94a" class="mk ml in jx b jy jz kc kd kg mm kk mn ko mo ks mp mq mr ms bi translated"><a class="ae mj" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">https://prettier.io/</a></li><li id="cebd" class="mk ml in jx b jy mt kc mu kg mv kk mw ko mx ks mp mq mr ms bi translated"><a class="ae mj" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank">https://eslint.org/</a></li></ul></div></div>    
</body>
</html>