<html>
<head>
<title>Priority Queues — 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">优先级队列— 101</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/priority-queues-101-40eb4f6f5ee9?source=collection_archive---------7-----------------------#2022-05-15">https://blog.devgenius.io/priority-queues-101-40eb4f6f5ee9?source=collection_archive---------7-----------------------#2022-05-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="a247" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这篇博客是我们从零开始讨论 101 个<strong class="jm io"> </strong>概念的系列文章的一部分，读者的入门知识有限。本文属于<strong class="jm io"> <em class="ki">中级</em> </strong>系列，因为它涉及到理解<strong class="jm io">优先级队列</strong>——主要用于处理基于租户/业务用例的不同优先级的异步消息。</p><p id="5b5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">101 系列中的一些早期博客如下:</p><p id="95bd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/api-101-773ec501b485"><strong class="jm io">API 101</strong></a><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/async-communication-101-b04d5c95333a"><strong class="jm io"><br/>异步通信 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/database-101-13d593ec4078"><strong class="jm io">数据库 101</strong></a><strong class="jm io"><br/></strong><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/database-design-101-7c019d69b97f"><strong class="jm io">数据库设计 101</strong></a><strong class="jm io"><br/><a class="ae kj" rel="noopener ugc nofollow" target="_blank" href="/deployment-strategies-101-ee2badd60799"><strong class="jm io">部署策略 101 </strong> </a> <strong class="jm io"> <br/> </strong></strong></p><h1 id="56ef" class="kk kl in bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">什么是优先级队列？</h1><p id="cc62" class="pw-post-body-paragraph jk jl in jm b jn li jp jq jr lj jt ju jv lk jx jy jz ll kb kc kd lm kf kg kh ig bi translated">优先级队列是默认<a class="ae kj" href="https://www.programiz.com/dsa/queue" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">队列</strong> </a>数据结构的扩展，通过利用与发布消息相关的被称为<strong class="jm io"> <em class="ki">优先级</em> </strong>的附加属性。与<a class="ae kj" href="https://www.geeksforgeeks.org/fifo-first-in-first-out-approach-in-programming/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> FIFO(先入先出)</strong> </a>出列语义不同，这种抽象队列数据结构使用高优先级覆盖来消费来自指定队列的消息。对于单个消息传递代理平台需要根据分布式架构需求的 on board<strong class="jm io"><em class="ki">客户机/租户</em> </strong>的优先级来满足多个 SLA 的用例，该模式非常有用。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/7927b0195a1a1e4f48ee1c31202b273a.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*gskTjfwW5Nn4ezKtjY3dYg.jpeg"/></div></figure><h1 id="ae14" class="kk kl in bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">履行</h1><p id="8cd2" class="pw-post-body-paragraph jk jl in jm b jn li jp jq jr lj jt ju jv lk jx jy jz ll kb kc kd lm kf kg kh ig bi translated">诸如<a class="ae kj" href="https://activemq.apache.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> ActiveMQ </strong> </a>之类的消息平台支持优先级队列作为生产者端的一个特性。然而，同时也有消息代理基础设施，如<a class="ae kj" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> Kafka </strong> </a>，其中这种支持并不添加在生产者端，因此基于优先级的多个队列被设置用于发布和消费设置优先级的事件。</p><h2 id="3563" class="lv kl in bd km lw lx dn kq ly lz dp ku jv ma mb ky jz mc md lc kd me mf lg mg bi translated">单队列</h2><p id="157b" class="pw-post-body-paragraph jk jl in jm b jn li jp jq jr lj jt ju jv lk jx jy jz ll kb kc kd lm kf kg kh ig bi translated">在多个租户使用<strong class="jm io">单优先级队列</strong>的情况下，生产者在交付时设置优先级，消息队列根据优先级基数重新排列这些消息。基于优化的总体<strong class="jm io"> <em class="ki">运营</em> </strong>成本，单队列方法有其优点。然而，<strong class="jm io"> <em class="ki">性能</em> </strong>和<strong class="jm io"> <em class="ki">可伸缩性</em> </strong>可能成为瓶颈，以防较低优先级的消息为较高优先级的消息造成容量瓶颈。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/46fe69d01532f0c50209ce6576bc3748.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3p4BYIUUJvOs4Fm-Mft_jg.jpeg"/></div></div></figure><h2 id="54f6" class="lv kl in bd km lw lx dn kq ly lz dp ku jv ma mb ky jz mc md lc kd me mf lg mg bi translated">多个队列</h2><p id="1ef5" class="pw-post-body-paragraph jk jl in jm b jn li jp jq jr lj jt ju jv lk jx jy jz ll kb kc kd lm kf kg kh ig bi translated">在这种情况下，每个队列用于发布和消费一个<strong class="jm io"> <em class="ki">单租户/给定优先级</em> </strong>的事件，不需要额外的特定消息属性。由于队列是基于优先级进行隔离的，因此这种方法优化了<strong class="jm io"><em class="ki"/></strong>和<strong class="jm io"> <em class="ki">的性能和</em> </strong>的可扩展性，但是在<strong class="jm io"> <em class="ki">的运营</em> </strong>和云成本上却很高。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mm"><img src="../Images/55f9f404bde7360976fd734e0a87154f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xd0ry9W-jDQpOH3nmuAxEQ.jpeg"/></div></div></figure><h1 id="a442" class="kk kl in bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">用例</h1><ul class=""><li id="17f3" class="mn mo in jm b jn li jr lj jv mp jz mq kd mr kh ms mt mu mv bi translated"><strong class="jm io">租户内- </strong>如果给定租户内有多个具有不同业务优先级的任务，则优先级队列优先。</li><li id="71a2" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated"><strong class="jm io"> Inter Tenant — </strong>如果有业务需求/基数竞争的业务租户，优先级队列是一个很好的选择。</li></ul><h1 id="3658" class="kk kl in bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">优势</h1><ul class=""><li id="4d5d" class="mn mo in jm b jn li jr lj jv mp jz mq kd mr kh ms mt mu mv bi translated">使用通用平台层(<strong class="jm io"> <em class="ki">后端服务+基础设施</em> </strong>)帮助交付多种业务<strong class="jm io">SLA</strong>。因此将可重用性提升为核心设计原则。</li><li id="a6d4" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">使用单队列方法最大限度地降低运营成本，并动态扩展消费者，以增加竞争基础架构组件的灵活性。</li><li id="9cde" class="mn mo in jm b jn mw jr mx jv my jz mz kd na kh ms mt mu mv bi translated">多队列方法有助于优化性能和可伸缩性需求。</li></ul><h1 id="c0fb" class="kk kl in bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">摘要</h1><p id="9d6e" class="pw-post-body-paragraph jk jl in jm b jn li jp jq jr lj jt ju jv lk jx jy jz ll kb kc kd lm kf kg kh ig bi translated">我们讨论了优先级队列的基础知识，这是基于异步消息的分布式应用程序的流行设计模式。使用不同的消息总线技术，如 AWS SQS、Azure 服务总线、Apache Kafka 等，可以根据特定的应用需求进一步定制模式。我们将在未来的高级博客中讨论客户端(生产者/消费者)的低级设计。</p><p id="0acf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">如需反馈，请留言至</em><strong class="jm io"><em class="ki">Amit[dot]894【at】Gmail[dot]com</em></strong><em class="ki">或联系</em><a class="ae kj" href="https://about.me/amit_raj" rel="noopener ugc nofollow" target="_blank"><em class="ki">【https://about.me/amit_raj】</em></a><em class="ki">的任何链接。</em></p></div></div>    
</body>
</html>