<html>
<head>
<title>How To Create a ToDo application with Flask</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用 Flask 创建 ToDo 应用程序</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-create-a-todo-application-with-flask-21b71651c7dc?source=collection_archive---------1-----------------------#2022-05-04">https://blog.devgenius.io/how-to-create-a-todo-application-with-flask-21b71651c7dc?source=collection_archive---------1-----------------------#2022-05-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="638d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 Flask 构建 Todo 应用程序的分步教程</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9c9d4bed7eafe962744a532a72179701.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mTnow_Se4rJv3GmDRz2ZYA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">照片由宝琳娜·科瓦列娃拍摄:<a class="ae ky" href="https://www.pexels.com/photo/white-notebook-in-close-up-photography-5717421/" rel="noopener ugc nofollow" target="_blank">https://www . pexels . com/photo/white-notebook-in-特写-摄影-5717421/ </a></figcaption></figure><p id="b5ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Todo 应用程序是每个开发人员都应该拥有的项目。待办事项应用程序涵盖了所有标准功能，让你可以练习技能并取得成功。</p><p id="1be3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本教程中，您将构建一个功能完整的待办事项应用程序，用户将能够:</p><ul class=""><li id="facc" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">注册、登录和注销</li><li id="b224" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">添加待办事项</li><li id="4f96" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">编辑待办事项</li><li id="3a10" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">删除待办事项</li><li id="995a" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">查看所有待办事项</li></ul><h2 id="64db" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">目标</h2><p id="c030" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">本教程结束时，您将能够:</p><ul class=""><li id="9b11" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">使用蓝图创建并运行 flask 应用程序</li><li id="4988" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">将 flask 应用程序配置为使用 SQLite 数据库</li><li id="9345" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">创建数据库表之间的关系</li><li id="be59" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">创建用户管理系统</li><li id="ea1d" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">使用 WTF 表单创建表单</li><li id="900a" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">使用表单获取用户输入的数据并将数据添加到数据库中</li><li id="d8d6" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">从数据库中检索数据</li></ul><h2 id="6f98" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">项目设置</h2><p id="e6c5" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">因此，首先创建一个项目文件夹，您的项目将存放在其中。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="afd1" class="ln lo in mm b gy mq mr l ms mt">mkdir flask_app</span></pre><p id="9864" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，创建一个虚拟环境。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="c332" class="ln lo in mm b gy mq mr l ms mt">python3 -m venv env</span></pre><p id="005d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">激活虚拟环境。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="8e5f" class="ln lo in mm b gy mq mr l ms mt">source env/bin/activate</span></pre><p id="6971" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">安装所需的依赖项</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="b2e5" class="ln lo in mm b gy mq mr l ms mt">pip install flask flask_sqlachemy flask_login</span></pre><p id="315a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe mu mv mw mm b">flask_app</code>目录中，创建如下所示的项目目录结构。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/918e7b6b36c816693929780b8b0db79f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0K3tsnofcma2G8PBfy0GrA.png"/></div></div></figure><p id="e9ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，打开根文件<code class="fe mu mv mw mm b">___init__py</code>并添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="7929" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的代码中，我们创建了一个应用程序实例，初始化数据库并将应用程序绑定到数据库，<code class="fe mu mv mw mm b">db.create__all() </code>将根据模型创建数据库，如果有的话。我们还创建了一个返回简单文本的简单端点。打开 run.py 并添加以下代码。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="4d0e" class="ln lo in mm b gy mq mr l ms mt">from my_app import app</span><span id="e0e5" class="ln lo in mm b gy na mr l ms mt">app.run(debug=True)</span></pre><p id="964a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要运行服务器，发出以下命令</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="7ba1" class="ln lo in mm b gy mq mr l ms mt">python3 run.py</span></pre><p id="34f1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">导航到 http://127.0.0.1:5000/index ，您应该会看到以下页面</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/8496ebbb909efcbae1ab5824f9397013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*29lkY9c2UaiYQhhQMQ_MRw.png"/></div></div></figure><h2 id="2c6b" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">烧瓶登录</h2><p id="b336" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">用户管理是任何应用程序的支柱；幸运的是，flask 提供了 Flask-Login 扩展，它负责管理用户所需的所有功能</p><ul class=""><li id="f9b0" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">登录和注销用户</li><li id="227a" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">存储用户 id</li><li id="a021" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">将受保护的内容限制于登录用户</li><li id="7bac" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">处理“记住我”功能</li><li id="6ed0" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">保护用户会话免受黑客攻击</li></ul><p id="e584" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">既然您已经安装了 flask login，那么让我们来看看它的功能。Flask login 使用 Login Manager 类，您需要定义一个 Login Manager 对象。打开 __init__。py 并添加以下代码。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="4933" class="ln lo in mm b gy mq mr l ms mt"><strong class="mm io">from</strong> flask_login <strong class="mm io">import</strong> LoginManager<br/>login_manager = LoginManager<strong class="mm io">()</strong></span></pre><p id="097b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建登录管理器对象后，将其绑定到应用程序，在本例中是 flask 应用程序实例</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="1d55" class="ln lo in mm b gy mq mr l ms mt">login_manager.init_app(app)</span></pre><p id="3f2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，定义一个生成当前用户 id 的 userloader 回调。打开<code class="fe mu mv mw mm b">__init__.py</code>并添加以下代码</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="a0a3" class="ln lo in mm b gy mq mr l ms mt">from my_app.api.models import User</span><span id="6679" class="ln lo in mm b gy na mr l ms mt">@login_manager.user_loader</span><span id="2e5a" class="ln lo in mm b gy na mr l ms mt">def load_user(user_id):</span><span id="25b2" class="ln lo in mm b gy na mr l ms mt">    return User.query.get(int(user_id))</span></pre><p id="727e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为我们还没有定义用户模型类，所以您应该会看到一个错误</p><p id="0d88" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mu mv mw mm b">User is not defined</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/e3613e5284fdabe1408436c6304647bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*jKzta7KZpqUV3-dN6bV0bg.png"/></div></figure><h2 id="3113" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">用户模型</h2><p id="460b" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">用户模型需要实现这些属性和方法:</p><ul class=""><li id="889b" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated">是活动的</li><li id="8a8d" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">已经过身份验证</li><li id="0939" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated">get_id()</li></ul><p id="b2ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">默认情况下，您将从实现这些方法的<code class="fe mu mv mw mm b"><a class="ae ky" href="https://flask-login.readthedocs.io/en/latest/#flask_login.UserMixin" rel="noopener ugc nofollow" target="_blank">UserMixin</a> </code>类继承，而不是实现所有这些方法。打开 models.py 并添加用户模型</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><h2 id="3f7e" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">任务模型</h2><p id="5101" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">接下来，您将创建任务模型，每个用户可以有许多待办事项，因此您将在用户和任务模型之间创建一对多的关系</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="8056" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">向用户模型添加一个 backref。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="eb06" class="ln lo in mm b gy mq mr l ms mt">todos = db.relationship('TodoItem', backref='owner')</span></pre><h2 id="647e" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">烧瓶设计图</h2><p id="2fe1" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">根据文件:</p><blockquote class="nc nd ne"><p id="6c73" class="jk jl nf jm b jn jo jp jq jr js jt ju ng jw jx jy nh ka kb kc ni ke kf kg kh ig bi translated">Flask 使用<em class="in">蓝图</em>的概念来制作应用程序组件，并支持应用程序内或跨应用程序的通用模式。蓝图可以极大地简化大型应用程序的工作方式，并为 Flask extensions 提供一种在应用程序上注册操作的中央方法。一个<code class="fe mu mv mw mm b"><a class="ae ky" href="https://flask.palletsprojects.com/en/2.1.x/api/#flask.Blueprint" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="in">Blueprint</em></strong></a></code>对象的工作方式类似于一个<code class="fe mu mv mw mm b"><a class="ae ky" href="https://flask.palletsprojects.com/en/2.1.x/api/#flask.Flask" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="in">Flask</em></strong></a></code>应用程序对象，但它实际上不是一个应用程序。相反，它是如何构建或扩展应用程序的蓝图。</p></blockquote></div><div class="ab cl nj nk hr nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ig ih ii ij ik"><p id="8768" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更简单地说，蓝图提供了一种将代码分解到其他目录的方法，而不是将所有代码都写在一个文件中，每个蓝图都注册在主文件中。例如，在我们的应用程序中，打开 views.py 并创建一个名为 tasks 的新蓝图和一个返回字符串的简单视图。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="3291" class="ln lo in mm b gy mq mr l ms mt">from flask import Blueprint<br/>tasks = Blueprint('tasks', __name__)</span><span id="ad35" class="ln lo in mm b gy na mr l ms mt">@tasks.route('/home')</span><span id="c7c3" class="ln lo in mm b gy na mr l ms mt">def home():</span><span id="ef61" class="ln lo in mm b gy na mr l ms mt">    return "Welcome Home."</span></pre><p id="941f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">去<code class="fe mu mv mw mm b"> __init__.py </code>备案登记蓝图。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="4f8d" class="ln lo in mm b gy mq mr l ms mt">from my_app.api.views import tasks</span><span id="cea6" class="ln lo in mm b gy na mr l ms mt">app.register_blueprint(tasks)</span></pre><p id="4b03" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在你将使用<code class="fe mu mv mw mm b">tasks.route()</code>而不是<code class="fe mu mv mw mm b">app.route()</code>来为你的观点服务</p><p id="cfe4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过导航到<a class="ae ky" href="http://127.0.0.1:5000/home" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/home</a>来测试视图是否工作</p><h1 id="857b" class="nq lo in bd lp nr ns nt ls nu nv nw lv nx ny nz ly oa ob oc mb od oe of me og bi translated">烧瓶 WTF</h1><p id="9b21" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">Flask WTF 提供了<a class="ae ky" href="https://www.palletsprojects.com/p/flask" rel="noopener ugc nofollow" target="_blank"> Flask </a>和<a class="ae ky" href="https://wtforms.readthedocs.io/" rel="noopener ugc nofollow" target="_blank"> WTForms </a>的简单集成。WTForms 是一个在 Python 中提供表单呈现和验证的库。烧瓶 WTf 还负责形状保护机制。要开始安装，请按如下方式安装 pip。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="55cc" class="ln lo in mm b gy mq mr l ms mt">pip install pip install -U Flask-WTF</span></pre><h2 id="72fc" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">用户注册表单</h2><p id="b988" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">您将从创建用户注册表单开始。打开 forms.py 并添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="7b88" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的代码中，首先导入字段类型，每个字段代表一个数据类型。您通常会创建这些字段，以便它们与用户模型相匹配。WTForms <br/>还提供了验证器，确保输入符合某些标准；例如，<code class="fe mu mv mw mm b">DataRequired</code>验证器将确保输入不为空。</p><p id="b32b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，将表单添加到<code class="fe mu mv mw mm b">register.html</code>模板中。打开<code class="fe mu mv mw mm b">register.html</code>，添加下面的代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="4bbe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所有模板都继承自 base.html 模板，如下所示:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><h2 id="2d25" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">注册视图</h2><p id="a965" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">注册过程的最后一步是编写呈现和从注册表单获取数据的逻辑。打开 views.py 并添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="51d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果是上面代码中的 GET 请求，Flask 将呈现 register.html 模板。对于 POST 请求，您获取用户详细信息并将它们保存到数据库中。然后用户被重定向到登录页面，这个页面我们还没有创建。因为密码不应该以纯文本的形式存储，所以我们使用 generate_password_hash 来散列密码。</p><p id="5a95" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该表单现在看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/2f9fe495f5846a98bb77a8e7c23807f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*97k_XXUx_YBvSh9-iVygKA.png"/></div></div></figure><h2 id="0755" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">用户登录表单</h2><p id="3dca" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">打开 forms.py 并创建一个表单以登录用户。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="0c03" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，打开 login.html 并添加表单</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><h2 id="208a" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">登录视图</h2><p id="e1f1" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">我们获取为登录视图提交的电子邮件和密码数据，然后使用 flask_login 中的<code class="fe mu mv mw mm b">login_user()</code>函数验证用户。用户登录后，他们将被重定向到我们稍后将创建的 todos 页面。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="c4a8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">登录页面现在看起来像这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/36ddc4d5c07a653c8d149cd7289c2a9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcnRs1CFjBi2RgKeIHDATA.png"/></div></div></figure><h2 id="2057" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">用户注销</h2><p id="71c4" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">使用 flask_login logout_user()函数注销用户，然后将用户重定向到主页。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="2ad8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更新 base.html 文件，以便在用户登录时显示注销链接。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><h2 id="e0af" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">添加新任务表单</h2><p id="e55d" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">用户现在可以注册、登录和注销，但不能添加任务。我们来处理一下。打开 form.py 并创建用于添加新任务的表单。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="f3e9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，在模板中呈现表单。打开<code class="fe mu mv mw mm b">add_todo.html</code>，添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><h2 id="2557" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">添加任务视图</h2><p id="927e" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">最后一步是编写呈现和从表单获取数据的逻辑。打开 views.py 并添加以下代码。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="e960" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用于编辑任务的页面现在如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi oh"><img src="../Images/a855f4b912ecd538464576b3a93edff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qzr-dXAmwOfsUk5w1P5THQ.png"/></div></div></figure><h2 id="8cff" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">显示所有任务</h2><p id="c811" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">为了显示用户的所有任务，我们查询属于当前用户(当前登录的用户)的所有任务，并将数据传递给模板。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="b871" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在打开<code class="fe mu mv mw mm b"> todos.html</code>渲染数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="9f6e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">显示任务的页面现在看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/7322d6468aa8294223f1ff9a367e2b07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nIZSOyyqdIEVMAzdfkk6Cw.png"/></div></div></figure><h2 id="c270" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">编辑和删除任务</h2><p id="1bd0" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">用户可以添加新任务并查看他们的所有任务。接下来，实现编辑和删除特定任务的能力</p><h2 id="10e8" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">编辑任务表单</h2><p id="519d" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">用户将能够编辑特定任务的所有细节。打开 forms.py 并创建 EditTaskForm</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><h2 id="4156" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">编辑表单视图</h2><p id="5fb2" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">打开 views.py 并添加视图以呈现和获取表单中的数据。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="a725" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的代码中，函数将任务的 id 作为参数；如果 tas 存在，您可以将数据作为 GET 方法中的输入进行传递。您获得为 POST 方法提交的数据，并将其保存到数据库中。比如你要编辑一个 id =1 的任务，那么网址就会是<a class="ae ky" href="http://127.0.0.1:5000/edit_task/1" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/edit _ task/1</a></p><p id="6f84" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，在模板中呈现表单。打开<code class="fe mu mv mw mm b">edit_todo.html</code>并添加以下代码</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="dcfc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">编辑表单现在看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/b62e36eb449f310e947fd46f312cdd21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F3tYOWG5BjFb_7Jb0G9njg.png"/></div></div></figure><h2 id="83ea" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">删除任务视图</h2><p id="02a7" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">要删除一个任务，您将传递该任务的 id 并将其从数据库中删除。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="388e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">模板看起来像这样</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="219d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要删除特定任务，例如 id =2 的任务，导航到<a class="ae ky" href="http://127.0.0.1:5000/delete_task/2" rel="noopener ugc nofollow" target="_blank">http://127 . 0 . 0 . 1:5000/delete _ task/2</a></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mx"><img src="../Images/266af6e4b305bd1bf6502ae4fa1d4ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i2nBtYjvq_sjkLRNuwBLAQ.png"/></div></div></figure><p id="3726" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该项目的源代码可以在这个<a class="ae ky" href="https://github.com/essykings/flask_todo_application/tree/main" rel="noopener ugc nofollow" target="_blank"> repo </a>中找到。</p><h2 id="84b3" class="ln lo in bd lp lq lr dn ls lt lu dp lv jv lw lx ly jz lz ma mb kd mc md me mf bi translated">结论</h2><p id="0a54" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">本教程涵盖了用 Flask 创建一个全功能的 Todo 应用程序所需的所有概念。为了使您的应用程序更好，捕捉代码中的异常是非常重要的。</p><div class="oi oj gp gr ok ol"><a href="https://betterprogramming.pub/how-to-handle-exceptions-in-flask-b1d9c151875b" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd io gy z fp oq fr fs or fu fw im bi translated">如何处理 Flask 中的异常</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">更好的警报处理有助于更好的编程</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">better 编程. pub</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz ks ol"/></div></div></a></div><p id="7922" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你喜欢读这篇文章，你可能会喜欢？</p><div class="oi oj gp gr ok ol"><a href="https://betterprogramming.pub/how-to-build-a-todo-application-with-django-ac675811d77b" rel="noopener  ugc nofollow" target="_blank"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd io gy z fp oq fr fs or fu fw im bi translated">如何用 Django 构建 Todo 应用程序</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">了解如何构建 CRUD web 应用程序</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">better 编程. pub</p></div></div><div class="ou l"><div class="pa l ow ox oy ou oz ks ol"/></div></div></a></div></div></div>    
</body>
</html>