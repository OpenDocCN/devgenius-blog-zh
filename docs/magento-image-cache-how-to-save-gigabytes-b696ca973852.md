# Magento 图像缓存:如何节省千兆字节

> 原文：<https://blog.devgenius.io/magento-image-cache-how-to-save-gigabytes-b696ca973852?source=collection_archive---------5----------------------->

![](img/86a435e455545948a9ffd6ffe704b652.png)

# 问题解决方案

你应该统一图像的尺寸。查看 view.xml 文件，了解可以组合的大小示例。

甚至不需要编写任何代码，也不需要修改= $productImage->init($product，' related _ products _ list ')-> getUrl()？可以在 view.xml 级别解决该问题。只需查看文件，并确定在您的情况下可以使用的图像大小。从较大的尺寸移动到较小的尺寸，而不是相反。保持平均尺寸。例如，如果您有一个 100 像素、200 像素、300 像素、350 像素大小的列表，您需要保留 300 像素，甚至用 250 像素来替换它。这将是一个完美的尺寸，图像在 100 像素和 350 像素都很好看。不要保持太小的尺寸，因为大尺寸的图片看起来很糟糕。

如果你正在使用 CDN，这很好，但如果你没有，你一定要实现它。这会花一些钱，但现在你会明白为什么它是值得的。

CDN 服务缓存文件，尤其是图像。因此，您不需要在驱动器上存储更改或缓存的图像！换句话说，您需要生成正确大小的图像，它们将直接发送到 CDN，而不保存在您的驱动器上。

如果你的 Magento 网络商店使用 CDN，那么将更改的图像保存到驱动器的操作(Magento 将更改的图像保存到一个特殊的文件夹/pub/media/catalog/product/cache/)是不必要的，你只是在赔钱，因为 CDN 服务存储图像，它们不会从你的服务器加载。这是此类服务的主要宣传口号之一:“我们缓存流量，为您省钱”。所以让我们真的节省你的钱吧！

解决方案是禁止在驱动器上保存/缓存已更改的图像，并尽可能延长 CDN 中的缓存存储期。我们将它设置为 365 天，因为，举例来说，我们非常确定一张桌子看起来是一样的，全年都有 4 条腿。如果我们确实需要更新某个产品的缓存，我们可以针对某个特定的 URL 更新它，或者完全删除它——针对整个网站。

*原载于【https://soft-loft.com】[](https://soft-loft.com/magento-image-cache-how-to-save-gigabytes/)**。***