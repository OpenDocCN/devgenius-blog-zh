<html>
<head>
<title>Spotify Data Analysis and Visualisation with Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Python 实现 Spotify 数据分析和可视化</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/spotify-data-analysis-with-python-a727542beaa7?source=collection_archive---------0-----------------------#2022-03-22">https://blog.devgenius.io/spotify-data-analysis-with-python-a727542beaa7?source=collection_archive---------0-----------------------#2022-03-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/04c1ca27117d830f97b486a669f97793.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*U7evn3VGDWL0pvhx.png"/></div></div></figure><h1 id="5d22" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">介绍</h1><p id="985d" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">事实证明，Spotify 有一个出色的 API，可以将你连接到其无处不在的歌曲数据库及其功能。例如，您可以从喜爱的歌曲中获得视觉体验，或者将回放功能集成到您的 web 应用程序中。还有一个强大的歌曲搜索引擎和一个推荐系统，可以帮助你听更多你喜欢的东西。</p><h1 id="a125" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">先决条件</h1><p id="5495" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">让我们从零成本、不费吹灰之力地在 Spotify 官方<a class="ae lu" href="https://www.spotify.com/uk/signup" rel="noopener ugc nofollow" target="_blank">网站</a>注册开始。</p><p id="b367" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">接下来，打开你的<a class="ae lu" href="https://developer.spotify.com/dashboard/applications" rel="noopener ugc nofollow" target="_blank">应用仪表板</a>，点击“创建应用”按钮。输入必要的细节，准备探索。</p><p id="6cb1" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">获取您的客户端 ID 和客户端密码，并启动您最喜欢的 Python IDE。是时候编码了。</p><p id="841d" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">我们将围绕 Spotify API 使用一个名为 SpotiPy 的包装实用程序来发出一行长的请求，而不是显式地到达端点。让我们安装它。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="3c08" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">然后我们初始化 spotipy。Spotify 对象，包含 Spotify 开发人员的凭据，存储在变量 CLIENT_ID 和 CLIENT_SECRET 中。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><h1 id="289a" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">获取曲目和艺术家</h1><p id="b253" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">下一步是数据查询。请注意，我们一次只能获取大约 50 个或更少轨道的信息。sp.search()方法中的<em class="mg"> q </em>参数是您可以搜索特定项目的地方。这里的参考是<a class="ae lu" href="https://developer.spotify.com/documentation/web-api/reference/#/operations/search" rel="noopener ugc nofollow" target="_blank">这里是</a>。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="67f6" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">将查询的数据放入 Pandas 数据框架。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mh"><img src="../Images/e3bded317dbc23d5b273f2eb99be5c0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M4SEcLixAsl7IvSsRm1fBw.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">前一个单元格的输出示例</figcaption></figure><p id="53c2" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">让我们添加表演 1000 首曲目的艺术家的信息。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="3b6e" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">现在将其添加到 track_df 数据框中。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mm"><img src="../Images/f8877b735f0ffbc257d3f748918122c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3L3tF6WKpl0XHmFvxtwSLQ.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">单个数据框中的曲目和艺术家</figcaption></figure><h1 id="9536" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">提取轨迹的数字特征</h1><p id="3731" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们现在要对我们的歌曲进行数字研究，但首先，我们需要获取一些数据。幸运的是，Spotify 为我们提供了关于 8200 万首歌曲的透彻见解，这正好符合我们的目的。</p><p id="f0a9" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">首先，在 Spotify API <a class="ae lu" href="https://developer.spotify.com/documentation/web-api/reference/#/operations/get-audio-features" rel="noopener ugc nofollow" target="_blank">参考页面</a>发现哪些功能有助于音轨的简介。</p><p id="3850" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">其次，提取轨迹的要素并将其添加到数据框中。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="ee03" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">轨道的要素数据框如下所示:</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/271f38ec08d78584d6829566a74b62a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AtdY9gD6ouaroAjVlEwxcw.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk translated">我们将在以下单元格中删除一些冗余列</figcaption></figure><p id="fba7" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">让我们删除一些无用的列，并检查数据框的结构:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/83b6ae7ad539081866377e2980592e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*FK1-3OX-sVR3UZ0W3YR72Q.png"/></div></figure><p id="1ff8" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">数据探索和可视化之前的最后一步是列类型的推断。这是手动完成的:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="8e1d" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">生成的数据帧具有以下结构:</p><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/cd759a26a65b8ec11d473350ecc200fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*g1kboLL9Hsiw8EiCiHSU4g.png"/></div></figure><p id="6281" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">无聊的东西在后面。让我们更好地了解我们的数据。</p><h1 id="6e31" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">探索 2021 年的趋势</h1><p id="970f" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">寻找 2021 年最受欢迎的曲目？给你:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/ae03d2877bdda5f6c58bc20ebb33fd29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*Aj_DVvhw9BYf7hjprZE3hA.png"/></div></figure><p id="d9af" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">谁被关注的最多？</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mq"><img src="../Images/0ccf2f24e6ea461957ef97e249e26e0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OT9kss_2lCCSiVgKiuDGKg.png"/></div></div></figure><p id="bc71" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">让我们看看 track_df 数据帧中有多少个流派:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/d9a0b86b4d5b2a24050cfabe4e83938f.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*yaTyr3YzU83awTU3a7QPLw.png"/></div></figure><p id="8f32" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">想象上面的结果:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/b8703be742907c2c2c1f016fe244c943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OwvCsXdvEWt13SjHNSM36A.png"/></div></div></figure><p id="8ac2" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">查找前 20 名艺术家，按前 10 个流派的粉丝数量排序:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/3f1b417542e2243359b56959d881b275.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*WtWXlYfZTO7PmqZrO8VCmQ.png"/></div></figure><p id="a3a5" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">查找前 10 个流派中按流行程度排序的前 20 首歌曲:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mu"><img src="../Images/383f915daef38bd22a535491722e9a7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wjuMy04gWCpnPWrYkuQdXA.png"/></div></div></figure><h1 id="a5d4" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">可视化轨道的特征</h1><p id="b911" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">这是轨迹特征的相关矩阵:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/bfd11f2c3a4af907d9fdeff8cf221ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jop6eor6O0bKfZcJy1iCBw.png"/></div></div></figure><p id="a0e7" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">您还可以为特定的一对变量绘制二元 KDE:</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/188c0c116f6a84f396b00a16228a0878.png" data-original-src="https://miro.medium.com/v2/resize:fit:864/format:webp/1*slTNGkOKhvWAFvf8uhx4Rg.png"/></div></figure><p id="3c5a" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">最受欢迎的曲目与数据集中的所有曲目有何不同？给定所选特征的平均值，让我们通过绘制相应集合的特征肖像来找出答案。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/50446e7d605e13fc889cca751714de3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*9uanhcRMCxwFsqePW9nJmQ.png"/></div></figure><p id="dd54" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated">看起来最受欢迎的歌曲更适合跳舞，也更有特点。他们也没有工具性和活力。</p><h1 id="2031" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">获取推荐</h1><p id="8b9a" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">我们分析的最后一步是获得给定艺术家 id、流派和曲目 id 的曲目推荐。输出是随机的，所以 Spotify 永远不会缺少内容建议。</p><figure class="ma mb mc md gt jr"><div class="bz fp l di"><div class="me mf l"/></div></figure><figure class="ma mb mc md gt jr gh gi paragraph-image"><div class="gh gi my"><img src="../Images/4029c9a7257f4a4f0a48f2d00e6467d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*bSmhuyX8B4LBHJpjSFpDcA.png"/></div></figure><h1 id="d196" class="jy jz iq bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论</h1><p id="4b4c" class="pw-post-body-paragraph kw kx iq ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">本文简要概述了 Spotify Web API 的方法，并展示了如何分析和绘制提取的数据。</p><p id="24fe" class="pw-post-body-paragraph kw kx iq ky b kz lv lb lc ld lw lf lg lh lx lj lk ll ly ln lo lp lz lr ls lt ij bi translated"><em class="mg">本文代码笔记本</em> <a class="ae lu" href="https://github.com/Vice10/ds_notebooks/blob/main/spotify_analysis.ipynb" rel="noopener ugc nofollow" target="_blank"> <em class="mg">此处</em> </a> <em class="mg">。</em></p></div></div>    
</body>
</html>