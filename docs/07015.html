<html>
<head>
<title>Cypress: How to validate your tests?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Cypress:如何验证你的测试？</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-validate-using-cypress-io-77c419a4b361?source=collection_archive---------7-----------------------#2022-02-19">https://blog.devgenius.io/how-to-validate-using-cypress-io-77c419a4b361?source=collection_archive---------7-----------------------#2022-02-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/380ee642eb2e8d2ed3238f368d00814e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kn9SGg_vWIQ9aIF_3LW50Q.png"/></div></div></figure><p id="525a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您真的应该尝试使用 cypress 进行 web 自动化测试。令人惊讶的是它是如此的流畅，代码是如此的容易编写。</p><p id="a211" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">今天，我将稍微谈一下验证和断言。</p><p id="9198" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当您试图测试和验证某个字段，或者断言某个文本可见并且格式正确时，您就知道了。</p><p id="9cc1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，让我们举一些例子，并从那里开始…</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="4463" class="lc ld in ky b gy le lf l lg lh">// assert the element's text content is exactly the given text<br/>cy.get('#text-field').should('have.text', 'Hello there')</span></pre><p id="5e94" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这样，您应该能够断言或确认在您设置元素中有一个文本“Hello there”。</p><p id="7fb8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你知道<strong class="jx io">柏树</strong>使用<strong class="jx io">柴</strong>断言库吗？</p><p id="2029" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">与<strong class="jx io">柴</strong>库一样，对 Sinon &amp; jQuery 也使用了多个扩展。</p><p id="6800" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于<strong class="jx io">柴</strong>库，可以通过下面的链接查看其 Github</p><div class="li lj gp gr lk ll"><a href="https://github.com/chaijs/chai" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd io gy z fp lq fr fs lr fu fw im bi translated">GitHub-chai js/chai:node . js 的 BDD / TDD 断言框架和可以配对的浏览器…</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">node.js 的 BDD / TDD 断言框架和可以与任何测试框架配对的浏览器。- GitHub …</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">github.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz jt ll"/></div></div></a></div><p id="c179" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们有两种类型的断言:</p><h2 id="eebe" class="lc ld in bd ma mb mc dn md me mf dp mg kg mh mi mj kk mk ml mm ko mn mo mp mq bi translated"><strong class="ak"> 1。BDD </strong>断言</h2><p id="81d9" class="pw-post-body-paragraph jv jw in jx b jy mr ka kb kc ms ke kf kg mt ki kj kk mu km kn ko mv kq kr ks ig bi translated">这些链接器可用于<strong class="jx io"> <em class="mw"> BDD </em> </strong>断言(expect/should)。列出的别名可以与其原始链接器互换使用。您可以看到可用的<strong class="jx io"> <em class="mw"> BDD </em> </strong>柴断言的完整列表。</p><div class="li lj gp gr lk ll"><a href="https://www.chaijs.com/api/bdd/" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd io gy z fp lq fr fs lr fu fw im bi translated">期望/应该-柴</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">BDD 样式是和。两者都使用相同的可链接语言来构造断言，但是它们在方式上有所不同</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">www.chaijs.com</p></div></div></div></a></div><h2 id="9444" class="lc ld in bd ma mb mc dn md me mf dp mg kg mh mi mj kk mk ml mm ko mn mo mp mq bi translated"><strong class="ak"> 2。TDD </strong>断言</h2><p id="4a38" class="pw-post-body-paragraph jv jw in jx b jy mr ka kb kc ms ke kf kg mt ki kj kk mu km kn ko mv kq kr ks ig bi translated">这些断言可用于<strong class="jx io">T21TDD</strong>断言(assert)。您可以看到可用的 Chai 断言的完整列表。</p><div class="li lj gp gr lk ll"><a href="https://www.chaijs.com/api/assert/" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd io gy z fp lq fr fs lr fu fw im bi translated">维护</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">Chai 是一个用于[node](http://nodejs.org)和浏览器的 BDD / TDD 断言库，可以愉快地配对…</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">www.chaijs.com</p></div></div></div></a></div><p id="677e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你知道，当你做验证或断言时，你会做多个公共元素断言，尤其是当你做标准字段断言时。</p><p id="fbf0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请注意如何使用下面列出的这些断言。应该():</p><h2 id="28ae" class="lc ld in bd ma mb mc dn md me mf dp mg kg mh mi mj kk mk ml mm ko mn mo mp mq bi translated">长度</h2><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="83ee" class="lc ld in ky b gy le lf l lg lh">// retry until we find 3 matching &lt;li.selected&gt;<br/>cy.get('li.selected').should('have.length', 3)</span></pre><h2 id="a1b4" class="lc ld in bd ma mb mc dn md me mf dp mg kg mh mi mj kk mk ml mm ko mn mo mp mq bi translated">班级</h2><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="1e0d" class="lc ld in ky b gy le lf l lg lh">// retry until this input does not have class disabled<br/>cy.get('form').find('input').should('not.have.class', 'disabled')</span></pre><h2 id="58e7" class="lc ld in bd ma mb mc dn md me mf dp mg kg mh mi mj kk mk ml mm ko mn mo mp mq bi translated">价值</h2><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="db42" class="lc ld in ky b gy le lf l lg lh">// retry until this textarea has the correct value<br/>cy.get('textarea').should('have.value', 'foo bar baz')</span></pre><h2 id="302d" class="lc ld in bd ma mb mc dn md me mf dp mg kg mh mi mj kk mk ml mm ko mn mo mp mq bi translated">文本内容</h2><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="890b" class="lc ld in ky b gy le lf l lg lh">// assert the element's text content is exactly the given text<br/>cy.get('#user-name').should('have.text', 'Joe Smith')</span><span id="7dbd" class="lc ld in ky b gy mx lf l lg lh">// assert the element's text includes the given substring<br/>cy.get('#address').should('include.text', 'Atlanta')</span><span id="5ae0" class="lc ld in ky b gy mx lf l lg lh">// retry until this span does not contain 'click me'<br/>cy.get('a').parent('span.help').should('not.contain', 'click me')</span><span id="a068" class="lc ld in ky b gy mx lf l lg lh">// the element's text should start with "Hello"<br/>cy.get('#greeting')<br/>  .invoke('text')<br/>  .should('match', /^Hello/)</span><span id="c753" class="lc ld in ky b gy mx lf l lg lh">// tip: use cy.contains to find element with its text<br/>// matching the given regular expression<br/>cy.contains('#a-greeting', /^Hello/)</span></pre><p id="6f4d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">断言有两种方式，一种是肯定的断言，另一种是否定的断言，了解两者之间的区别有助于使用 cypress 实现更好的测试质量。</p><h2 id="bfdf" class="lc ld in bd ma mb mc dn md me mf dp mg kg mh mi mj kk mk ml mm ko mn mo mp mq bi translated">积极的主张</h2><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="fb54" class="lc ld in ky b gy le lf l lg lh">cy.get('li.todo').should('have.length', 2)<br/>cy.get('input#new-todo').type('Write tests{enter}')<br/><br/>// using a positive assertion to check the exact number of items<br/>cy.get('li.todo').should('have.length', 3)</span></pre><p id="fe30" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果应用程序的行为出乎意料，比如添加一个空白的 Todo，而不是添加带有文本“Write tests”的新 Todo，下面的测试仍然可能错误地通过。</p><h2 id="4156" class="lc ld in bd ma mb mc dn md me mf dp mg kg mh mi mj kk mk ml mm ko mn mo mp mq bi translated">否定断言</h2><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="2ef2" class="lc ld in ky b gy le lf l lg lh">cy.get('li.todo').should('have.length', 2)<br/>cy.get('input#new-todo').type('Write tests{enter}')<br/><br/>// using negative assertion to check it's not a number of items<br/>cy.get('li.todo').should('not.have.length', 2)</span></pre><p id="e379" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是在下面的测试中使用否定断言时，当应用程序以多种意想不到的方式运行时，测试可能会错误地通过:</p><ul class=""><li id="98c2" class="my mz in jx b jy jz kc kd kg na kk nb ko nc ks nd ne nf ng bi translated">应用程序会删除整个待办事项列表，而不是插入第三个待办事项</li><li id="3a3f" class="my mz in jx b jy nh kc ni kg nj kk nk ko nl ks nd ne nf ng bi translated">应用程序会删除待办事项，而不是添加新的待办事项</li><li id="6f7b" class="my mz in jx b jy nh kc ni kg nj kk nk ko nl ks nd ne nf ng bi translated">应用程序会添加一个空白待办事项</li><li id="761f" class="my mz in jx b jy nh kc ni kg nj kk nk ko nl ks nd ne nf ng bi translated">各种各样可能的应用错误</li></ul><p id="523c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有时，你想为一些字段做多个断言，如何做很简单，如下所示…</p><p id="03a4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以下是我实地考察时展示的元素</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="31f0" class="lc ld in ky b gy le lf l lg lh">&lt;a class="assertions-link active" href="https://on.cypress.io" target="_blank"<br/>  &gt;Cypress Docs&lt;/a</span></pre><p id="a683" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里是你如何做多重断言</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="3453" class="lc ld in ky b gy le lf l lg lh">cy.get('.assertions-link')<br/>  .should('have.class', 'active')<br/>  .and('have.attr', 'href')<br/>  .and('include', 'cypress.io')</span></pre><p id="8fb5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您首先要学习如何定位您的元素，利用这里提供的知识，您还可以通过 Chai 使用断言库进行验证。接下来，我将尝试给你一些方法，让你更容易地使用 Cypress.io 中的记录和播放功能找到元素，以及如何生成随机数据。</p><p id="7592" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我将把这些信息留给你，这里是一个附加的</p><div class="li lj gp gr lk ll"><a href="https://docs.cypress.io/guides/references/assertions#Chai" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd io gy z fp lq fr fs lr fu fw im bi translated">断言| Cypress 文档</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">Cypress 捆绑了流行的 Chai 断言库，以及对 Sinon 和 jQuery 有用的扩展，为您带来…</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">docs.cypress.io</p></div></div><div class="lu l"><div class="nm l lw lx ly lu lz jt ll"/></div></div></a></div><p id="4fb6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以在上面的链接中，你将会了解断言&amp;应该如何工作，配置，以及 Cypress 中的所有东西，让你从端到端的自动化测试中获得乐趣。</p><blockquote class="nn"><p id="0e41" class="no np in bd nq nr ns nt nu nv nw ks dk translated">设计测试的行为是已知的最好的错误预防措施之一，而不仅仅是测试的行为。创建一个有用的测试所必须进行的思考可以在错误被编码之前发现并消除它们——事实上，测试设计思考可以在软件创建的每个阶段发现并消除错误，从概念到规范，到设计、编码等等。”—鲍里斯·贝泽尔</p></blockquote><p id="11f2" class="pw-post-body-paragraph jv jw in jx b jy ny ka kb kc nz ke kf kg oa ki kj kk ob km kn ko oc kq kr ks ig bi translated">本系列的下一个故事将是我在 Cypress 实践中做自动化测试时学到的一些东西，也是关于如何编写某些代码和验证的</p></div><div class="ab cl od oe hr of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="ig ih ii ij ik"><div class="kt ku kv kw gt ll"><a href="https://husseinbaashen.medium.com/membership" rel="noopener follow" target="_blank"><div class="lm ab fo"><div class="ln ab lo cl cj lp"><h2 class="bd io gy z fp lq fr fs lr fu fw im bi translated">通过我的推荐链接加入媒体-侯赛因巴申</h2><div class="ls l"><h3 class="bd b gy z fp lq fr fs lr fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="lt l"><p class="bd b dl z fp lq fr fs lr fu fw dk translated">husseinbaashen.medium.com</p></div></div><div class="lu l"><div class="ok l lw lx ly lu lz jt ll"/></div></div></a></div></div></div>    
</body>
</html>