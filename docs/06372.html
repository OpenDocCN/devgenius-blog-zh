<html>
<head>
<title>AWS Config- IAM Compliance</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS配置- IAM合规性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/aws-config-iam-compliance-85220763bee5?source=collection_archive---------13-----------------------#2022-01-03">https://blog.devgenius.io/aws-config-iam-compliance-85220763bee5?source=collection_archive---------13-----------------------#2022-01-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/81bb6414871a7505615aaa94af88393c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VS94ICBOtLflNJyWoFVPTA.png"/></div></div></figure><p id="fc31" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这篇博客是我们从零开始讨论<strong class="jx io"> DevOps </strong>概念的系列文章的一部分，面向的是入门知识有限的读者。这篇文章属于<em class="kt">专家级</em>系列，因为它涉及到理解<a class="ae ku" href="https://aws.amazon.com/config/#:~:text=AWS%20Config%20is%20a%20service,recorded%20configurations%20against%20desired%20configurations." rel="noopener ugc nofollow" target="_blank">A<strong class="jx io">WS Config</strong>T7】云服务的工作原理，以确保安全合规</a><a class="ae ku" href="https://aws.amazon.com/iam/#:~:text=AWS%20Identity%20and%20Access%20Management%20(IAM)%20provides%20fine%2Dgrained,control%20across%20all%20of%20AWS.&amp;text=IAM%20is%20a%20feature%20of,to%20the%20AWS%20Management%20Console." rel="noopener ugc nofollow" target="_blank">T9】AWS IAMT11】。</a></p><p id="83c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">云系列中的一些早期博客如下。</p><p id="a39f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae ku" href="https://awstip.com/aws-lambda-simple-tweetbot-2f2f83fbe161" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">tweet Bot</strong></a><strong class="jx io"><br/></strong><a class="ae ku" href="https://towardsdev.com/deploying-on-azure-functions-github-actions-a8f2a98acc0f" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">Azure功能-GitHub动作</strong></a><strong class="jx io"><br/></strong><a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/incident-bot-on-azure-functions-ed20da8af478"><strong class="jx io">事件Bot </strong> </a></p><h2 id="3b8a" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated">什么是AWS IAM？</h2><p id="5061" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">IAM代表身份和访问管理服务，它是使用一组正确的<em class="kt">角色、身份、组和策略</em>访问AWS帐户的基础。这些身份是多种多样的——控制台/cli的人工访问，通过<a class="ae ku" href="https://aws.amazon.com/tools/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> AWS SDK </strong> </a>用于自动化的服务帐户，附加到AWS服务的角色，用于访问业务用例的其他AWS服务。鉴于暴露密码风险的性质，应用一揽子访问策略——围绕AWS IAM的安全自动化对于小型初创公司和跨国公司都非常关键。</p><h2 id="c7a3" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated">什么是AWS配置？</h2><p id="bec6" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">AWS配置用于通过一些预定义的(<strong class="jx io"> AWS提供的)</strong>或自定义策略(<strong class="jx io"> AWS Lambda执行</strong>)来审计、访问和配置给定AWS帐户中的选定资源。除了审计之外，还可以使用手动/自动管道来定义资源补救规则。Config减少了手动监视的需要，并且相同的规则可以跨多个AWS服务/帐户/业务域扩展。</p><h2 id="b9a0" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated">IAM合规性使用案例</h2><p id="aa29" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">在这篇博客中，我们将使用Terraform自动化一些最常见的IAM合规性用例</p><p id="44d2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">i) <strong class="jx io">根用户密钥检查- </strong>该策略检查是否为<strong class="jx io">根用户生成了任何访问密钥。</strong>根用户是AWS帐户上的<strong class="jx io"> </strong>超级管理员，对帐户中的所有服务拥有管理权限，易受攻击的风险最高。</p><p id="ac11" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ii) <strong class="jx io">启用MFA的帐户- </strong>此策略检查AWS帐户中的所有用户是否通过辅助设备进行多因素身份验证，而不是在其帐户上启用密码。</p><p id="f94b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">iii) <strong class="jx io">为策略3的控制台- </strong>子集启用MFA，仅适用于启用了控制台密码的用户。</p><p id="ee24" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">iv) <strong class="jx io">未使用的IAM凭证- </strong>此策略检查是否有在策略中定义的X天(默认为90天)内未使用的访问密钥</p><h2 id="a96f" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated">AWS配置自动化概述</h2><figure class="lu lv lw lx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/a2b247569161ad3c179fea1c68e2c641.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s1OnYtGBskOT14d-E5FUIA.png"/></div></div></figure><h2 id="4d05" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated"><strong class="ak">图例</strong></h2><p id="8602" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated"><strong class="jx io">1–2</strong>通过<strong class="jx io"><em class="kt">AWS _ providers</em></strong><em class="kt"/>在<a class="ae ku" href="https://www.hashicorp.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">hashi corp</em></strong></a><strong class="jx io"/>社区使用Terraform模块设置AWS配置策略。<br/><strong class="jx io">2–3</strong>每小时定期触发一次，检查IAM资源上的配置更改。<br/><strong class="jx io">3–4</strong>从<strong class="jx io"> <em class="kt"> AWS S3桶</em> </strong>中的执行历史中捕获日志、快照。<br/><strong class="jx io">3–5</strong>符合上述政策的AWS IAM资源标记为合规。<br/><strong class="jx io">3–6</strong>符合上述策略的AWS IAM资源被标记为不合规。<br/><strong class="jx io">6–7</strong>标记为<strong class="jx io"> <em class="kt">手动修复</em> </strong>的不符合资源。<strong class="jx io"><br/>6–8</strong>标记为<strong class="jx io"> <em class="kt">自动修复</em>的不符合资源。</strong></p><p id="2901" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意</strong> —由于使用其他自动化工具对Terraform的一些限制，我们将在另一篇博客中讨论6–8</p><h2 id="f267" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated">AWS配置平台自动化</h2><h2 id="1f0c" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated"><strong class="ak">安装地形</strong></h2><p id="e473" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">使用给定博客中的步骤—<a class="ae ku" rel="noopener ugc nofollow" target="_blank" href="/public-cloud-first-static-website-7d6f7c6f794">https://blog . dev genius . io/public-cloud-first-static-website-7 d6f 7 c6f 794</a></p><h2 id="db2b" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated"><strong class="ak">创建模块</strong></h2><p id="3ac2" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">使用下面的<strong class="jx io"> <em class="kt"> main.tf </em> </strong>配置</p><figure class="lu lv lw lx gt jo"><div class="bz fp l di"><div class="ly lz l"/></div></figure><h2 id="1677" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated"><strong class="ak">运行模块</strong></h2><pre class="lu lv lw lx gt ma mb mc md aw me bi"><span id="46b6" class="kv kw in mb b gy mf mg l mh mi"><strong class="mb io">Initialising Modules</strong></span><span id="0322" class="kv kw in mb b gy mj mg l mh mi">terraform init</span><span id="3759" class="kv kw in mb b gy mj mg l mh mi"><strong class="mb io">Planning Modules</strong></span><span id="dc0d" class="kv kw in mb b gy mj mg l mh mi">terraform plan</span><span id="b8bd" class="kv kw in mb b gy mj mg l mh mi"><strong class="mb io">Applying Modules</strong></span><span id="f22f" class="kv kw in mb b gy mj mg l mh mi">terraform apply</span></pre><h2 id="9836" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated"><strong class="ak">配置规则的验证</strong></h2><p id="fb98" class="pw-post-body-paragraph jv jw in jx b jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ls kq kr ks ig bi translated">登录AWS控制台以验证以下内容</p><p id="7c64" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> AWS配置规则设置</strong></p><figure class="lu lv lw lx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/9c9187ba86a5fcacfad1aa22ed0986ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KU9BDKr7DRMt9ZW0kLX8MQ.png"/></div></div></figure><p id="3768" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> AWS S3交付渠道设置</strong></p><figure class="lu lv lw lx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/9c9187ba86a5fcacfad1aa22ed0986ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KU9BDKr7DRMt9ZW0kLX8MQ.png"/></div></div></figure><h2 id="6b54" class="kv kw in bd kx ky kz dn la lb lc dp ld kg le lf lg kk lh li lj ko lk ll lm ln bi translated">额外资源</h2><div class="ml mm gp gr mn mo"><a href="https://github.com/amit894/aws-config-terraform" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd io gy z fp mt fr fs mu fu fw im bi translated">GitHub-Amit 894/aws-Config-terraform:用于保护AWS资源的AWS配置</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">github.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc jt mo"/></div></div></a></div><p id="2028" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">如需反馈，请留言至</em><strong class="jx io"><em class="kt">Amit[dot]894【at】Gmail[dot]com</em></strong><em class="kt">或联系</em><a class="ae ku" href="https://about.me/amit_raj" rel="noopener ugc nofollow" target="_blank"><em class="kt">【https://about.me/amit_raj】</em></a><em class="kt">的任何链接。</em></p></div></div>    
</body>
</html>