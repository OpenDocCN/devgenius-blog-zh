<html>
<head>
<title>Microservice And Other Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微服务和其他架构</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/microservice-and-other-architecture-f23b5dd69edd?source=collection_archive---------2-----------------------#2020-05-31">https://blog.devgenius.io/microservice-and-other-architecture-f23b5dd69edd?source=collection_archive---------2-----------------------#2020-05-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c3dcc7cefb4ad70aa34e1bd826e511ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1F46zQS-HtuUsebBGhDt2w.jpeg"/></div></div></figure><p id="1a36" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">微服务架构有一套提高速度和规模的实践，并且与技术无关。微服务是建立在小型服务(微服务)的组件之上的，这些小型服务支持有限的上下文。</p><p id="9330" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">服务是可独立部署的组件，通过基于消息的通信支持互操作性。</p><blockquote class="kt"><p id="97f1" class="ku kv in bd kw kx ky kz la lb lc ks dk translated">“微服务是协同工作小型自治服务”——萨姆·纽曼</p></blockquote><p id="b84b" class="pw-post-body-paragraph jv jw in jx b jy ld ka kb kc le ke kf kg lf ki kj kk lg km kn ko lh kq kr ks ig bi translated">微服务应用程序的独立级别、有限范围和分解将创建高度内聚和松散耦合的服务。</p><h1 id="ba21" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">整体建筑。</h1><p id="04ec" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">这是构建应用程序的默认状态，通常更普遍。这是一个由一个代码库紧密耦合管理的单一统一应用程序。应用程序的每个部分都按照我们的预期运行，否则系统会失败。</p><p id="d058" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">好处</strong></p><ol class=""><li id="3d46" class="ml mm in jx b jy jz kc kd kg mn kk mo ko mp ks mq mr ms mt bi translated">易于开发</li><li id="35be" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">易于扩展(负载平衡器)</li><li id="d041" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">易于测试</li></ol><p id="e1ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">挑战</strong></p><ol class=""><li id="4837" class="ml mm in jx b jy jz kc kd kg mn kk mo ko mp ks mq mr ms mt bi translated">致力于单一堆栈技术</li><li id="d4ce" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">难以融入新的团队成员</li><li id="5ded" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">大型单片有一个大的代码库</li><li id="86a1" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">大型数据库给管理带来了问题</li></ol><figure class="na nb nc nd gt jo gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/5c5474c676ecaf97469422ea56dcf069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/format:webp/1*gkfM0CSPiIDlaD0DVt0Nzw.png"/></div></figure><h1 id="e020" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">分层架构(也称为“n层”)</h1><p id="0279" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">分层体系结构是一种具有独立进程的客户端-服务器体系结构。主要的是客户/表示层、业务层和数据库层。这些层可以部署在不同的机器或服务器上。各层之间的通信是通过网络完成的。这将创建一个“关注点分离”,其中每一层只允许使用其下一层进行通信。</p><p id="f348" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">三层架构的主要部分:</p><p id="ea38" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">表示层/用户界面</strong></p><p id="540d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是应用程序的入口点。这是用户与程序交互的地方。</p><p id="b2e0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">业务层</strong></p><p id="95d3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该层协调应用程序进程和命令，此外，它还做出逻辑决策、评估和执行计算。在两个周围层之间移动数据。</p><p id="95bf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">数据库层</strong></p><p id="6c09" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是应用程序的基础。这是数据存储和持久化的地方，通常是数据库。</p><p id="f1f9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可能会遇到其他术语。</p><ol class=""><li id="e346" class="ml mm in jx b jy jz kc kd kg mn kk mo ko mp ks mq mr ms mt bi translated">表示层</li><li id="f857" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">应用层</li><li id="507b" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">畴层</li><li id="48bd" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">持久层</li></ol><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/b93f9fef1851fdbbc0f93d1d98ba62e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eBgUVGMYKt03UXJr17fHBw.png"/></div></div></figure><h1 id="5f6f" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">面向服务的架构</strong></h1><p id="1634" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">这是计算机软件设计中的一种架构模式，其中组件通过通信协议共享服务。每个组件都是一个服务，每个服务都是松散耦合的。与monolithic不同，每个服务都可以通过介质直接与任何其他服务通信。</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/c9284fa675237073b794391c313dfdd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fxgyez1ocV1oWeXi1dNxDg.png"/></div></div></figure><h1 id="912a" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">深度微服务</h1><p id="2012" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">我们可以把一个整体分成模块或子域。每个子域将负责特定的服务。<br/>有了好的领域驱动设计，我们可以复制每个模块的依赖关系，以归档绑定上下文。</p><p id="2490" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了深入了解微服务，我们可以看看它如何处理3个主要部分。即<strong class="jx io">表示层</strong>、<strong class="jx io">业务层、数据库层。</strong></p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/e46d3aebde64f947ead01950b11cbd94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3H1UTuPDCt7M4M3sU0s2IA.png"/></div></div></figure><h2 id="23b7" class="ng lj in bd lk nh ni dn lo nj nk dp ls kg nl nm lw kk nn no ma ko np nq me nr bi translated">用户界面/ <strong class="ak">表示层</strong></h2><p id="2476" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">每个团队都是孤立发展的。这意味着一个团队可以设计和开发用户界面，并为案例提供最好的UX。但是这可能不容易维持。最好的方法是实现一个UI组合。</p><p id="d880" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">UI构图会带来两种设计模式。</p><ol class=""><li id="8ae6" class="ml mm in jx b jy jz kc kd kg mn kk mo ko mp ks mq mr ms mt bi translated"><strong class="jx io">服务器端页面组合</strong> —通过组合每个团队开发的Html片段，帮助在服务器上构建网页</li><li id="e629" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated"><strong class="jx io">客户端组合/SPA- </strong>通过浏览器上呈现的UI片段。</li></ol><h2 id="6328" class="ng lj in bd lk nh ni dn lo nj nk dp ls kg nl nm lw kk nn no ma ko np nq me nr bi translated">业务层(域)/ <strong class="ak">业务层</strong></h2><p id="b888" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">每个模块都是独立打包和部署的。每个去耦模块将能够通过以下方式相互通信</p><p id="7530" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"><em class="ns">API(应用程序用户界面)</em> </strong>。—他们会有一个沟通协议和风格。这包含两个通信族。</p><p id="0c38" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="ns">【远程过程调用/远程方法调用(RPC/RMI)</em></strong>——基于请求/回复原理工作。一个服务将请求和回复。这些调用可以是同步的，也可以是异步的。</p><p id="c9ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="ns">消息传递</em> </strong> —这是指微服务通过代理或渠道交换消息或事件。一个服务将向代理发布一条消息，如果感兴趣，其他微服务将订阅代理。</p><h2 id="0881" class="ng lj in bd lk nh ni dn lo nj nk dp ls kg nl nm lw kk nn no ma ko np nq me nr bi translated"><strong class="ak">数据库层</strong>/数据访问</h2><p id="5fa9" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">不像单片集成电路那样将整个数据存储在一个数据库中。每个模块都应该有独立的数据库来保存数据。每个数据库基于其微服务可以有不同的存储要求。一个服务可以依赖于事务，另一个依赖于只读，其他服务可能有只写条款。</p><p id="18a8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">数据同步可能是一个问题，比如没有分布式事务或即时一致性。在这种情况下，将使用最终一致性来捕获数据更改。</p><p id="e0b4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有几种方法可以使用工具来发布事件，如<strong class="jx io"> AKKA </strong>、<strong class="jx io">卡夫卡</strong>或<strong class="jx io">兔子</strong> MQ Debizuim。</p><p id="ad48" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">微服务的优势</strong></p><ol class=""><li id="b895" class="ml mm in jx b jy jz kc kd kg mn kk mo ko mp ks mq mr ms mt bi translated">采用新工具—允许您选择最适合特定功能的技术</li><li id="e319" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">每项服务都是独立部署的</li><li id="8ef8" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">易于扩展</li><li id="0f6c" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">独立团队协作</li><li id="d851" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">弹性/灵活性—一项服务中的故障不会影响其他服务。如果您在一个服务/模块中有单一或庞大的服务错误，它会影响其他模块/功能。</li><li id="7433" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">故障隔离</li></ol><p id="e425" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">挑战</strong></p><ol class=""><li id="54e5" class="ml mm in jx b jy jz kc kd kg mn kk mo ko mp ks mq mr ms mt bi translated">监视</li><li id="2185" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">生产力</li><li id="474f" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">测试挑战</li><li id="7fab" class="ml mm in jx b jy mu kc mv kg mw kk mx ko my ks mq mr ms mt bi translated">更复杂，尤其是大规模的</li></ol><p id="7bf8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">结论</strong></p><p id="857d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些是一些主要的架构模式。还有一些更复杂的模式，如区块链使用的对等体系结构、基于空间的体系结构等，不在此范围内</p></div></div>    
</body>
</html>