<html>
<head>
<title>Introduction to Kubernetes-1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kubernetes-1 简介</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/introduction-to-kubernetes-1-3da06660ab5?source=collection_archive---------16-----------------------#2022-12-19">https://blog.devgenius.io/introduction-to-kubernetes-1-3da06660ab5?source=collection_archive---------16-----------------------#2022-12-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/afa39129bd7dc358dca4c1da0d946a61.png" data-original-src="https://miro.medium.com/v2/resize:fit:654/format:webp/0*3TYomXzyzvbac9mT.png"/></div></figure><p id="dddb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">你知道吗？Kubernetes 标志的七根辐条指的是该项目的原名<em class="kp">“九个项目中的第七个”</em>。</p><p id="5d3c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">为了更好地理解所使用的术语，我们先来看看术语。</p><p id="0541" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">术语</strong></p><p id="623a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">1-POD:它是 Kubernetes 中最小的执行单元。pod 封装了一个或多个应用程序。pod 本质上是临时的，如果一个 pod(或它正在处理的节点)出现故障，Kubernetes 可以自动创建该 pod 的新副本来恢复操作。pod 包含一个或多个容器(如 Docker 容器)。</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kq"><img src="../Images/15a840a2d118a01075f950763945479c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*apz1vUUL4dlFLv7j.png"/></div></div></figure><p id="1b1d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">2-NODE:在 Kubernetes 中，节点是一个工作机，可以是虚拟机，也可以是物理机，这取决于集群。每个节点都由控制平面管理。一个节点可以有多个 pod，Kubernetes 控制平面自动处理集群中节点之间的 pod 调度。</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kz"><img src="../Images/adfddd7109f4a70d95faf19542a99088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dIwZGbJLw0keS0qL.jpg"/></div></div></figure><p id="1dae" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">3-CLUSTER:Kubernetes 集群是一组运行容器化应用程序的节点。容器化应用程序将一个应用程序与其依赖项和一些必要的服务打包在一起。它们比虚拟机更加轻量级和灵活。通过这种方式，Kubernetes 集群允许更容易地开发、移动和管理应用程序</p><p id="bc2d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">4-副本集:如果我们希望有 n 个荚果，当数量减少时，它是一个荚果死亡时创建一个新荚果的单位。</p><p id="d5ba" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">5-DEPLOYMENT:DEPLOYMENT 是管理复制应用程序的对象，确保自动替换任何失败或无响应的实例。</p><p id="f23b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">部署有助于确保应用程序的一个(或多个)实例可用于服务用户请求。</p><p id="2699" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">6-服务:Kubernetes 服务帮助我们将应用程序与其他应用程序和用户连接起来</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi la"><img src="../Images/38f832cadb819e905888c0cb980d0c36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BuKMpYjmC6cvsMqK.png"/></div></div></figure><p id="ddaa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Kubernetes 服务可以有 4 种不同的类型:ClusterIP、NodePort、LoadBalacer 和 ExternalName。</p><p id="ee53" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">7-名称空间:Kubernetes 可以在一个真实集群上托管几个虚拟集群，每个虚拟集群称为一个名称空间。</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kq"><img src="../Images/d67eda11bc25a8d18af52f43e8aae158.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QDJr1QPHr7eNh4j9.png"/></div></div></figure><p id="7d2f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">库伯内特建筑</strong></p><p id="1328" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Kubernetes 的目标是以容器的形式自动托管应用程序。因此，它可以被倍增和分布，并且容易地与不同的服务通信。</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi lb"><img src="../Images/2c607043f405933bfddc75ab1ba63ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WCWhHTRvIo2Paz0mbQiDLQ.png"/></div></div></figure><p id="c926" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">主节点和组件</strong></p><p id="e235" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">主服务器上的组件实际上是执行集群所有控制功能的单元。除了管理功能之外，这也是做出运营决策的单位。</p><p id="f3ea" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">主节点的基本任务；</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div class="gh gi lc"><img src="../Images/31aa59fddcc6292f570a4c4cc3ebe9b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*u2ZwY9dC85ePCI6F18VVdQ.png"/></div></figure><p id="2860" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">组件；</p><p id="c35c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">1-ETCD 集群</p><p id="ab35" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">ETCD 是一个简单、安全、快速的分布式可靠的键值存储</p><p id="5679" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">什么是键值存储？</p><figure class="kr ks kt ku gt jo gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/817d891f7dfa4716b7c70ab7ecc9a5c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:978/format:webp/1*QVsRlVO5CJl_clj-gZJ1eg.png"/></div></figure><p id="bfc0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">双 KUBE 调度程序</p><p id="334d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Kube 调度器只负责决定哪个 pod 去哪个节点。实际上，它并不把 pod 放在节点中，那是 kubelet 的工作。</p><p id="aac4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">为什么需要它？因为有多个节点和 pod。kube-scheduler 查看每个 pod，并尝试为其找到最佳节点。</p><p id="cd64" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">3-KUBE-控制器管理器</p><ul class=""><li id="5e86" class="le lf in jt b ju jv jy jz kc lg kg lh kk li ko lj lk ll lm bi translated">观察状态</li><li id="1b20" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko lj lk ll lm bi translated">补救情况</li><li id="2978" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko lj lk ll lm bi translated">节点监控周期= 5 秒</li><li id="c664" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko lj lk ll lm bi translated">节点监视器宽限期= 40 秒</li><li id="c5e6" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko lj lk ll lm bi translated">Pod 驱逐超时= 5 分钟</li></ul><p id="6db3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">节点控制器负责监控其节点的状态，并执行必要的操作来保持应用程序的运行。这是通过 kube-api 服务器来实现的。</p><p id="2248" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">节点控制器每 5 秒记录一次其节点的状态。但是它会等待 40 秒，然后将其标记为不可到达。在将其标记为不可达后，它会在 5 分钟内返回，如果在 5 分钟内没有返回，它会将分配给该节点的 pod 移动到健康的节点。</p><p id="9fae" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果 pod 是副本集的一部分，则下一个控制器是复制控制器。复制控制器，负责监控副本集的状态，并确保副本集中所需数量的单元始终可用。</p><p id="ff24" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">4-KUBE API 服务器</p><p id="0b70" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它是集群的大脑。每次运行 kubectl 命令时，都会对 API 服务器进行 REST 调用。</p><ol class=""><li id="b335" class="le lf in jt b ju jv jy jz kc lg kg lh kk li ko ls lk ll lm bi translated">验证用户</li><li id="3477" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko ls lk ll lm bi translated">验证请求</li><li id="7ea3" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko ls lk ll lm bi translated">检索数据</li><li id="53fe" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko ls lk ll lm bi translated">更新 ETCD</li><li id="3e78" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko ls lk ll lm bi translated">调度程序</li><li id="24c8" class="le lf in jt b ju ln jy lo kc lp kg lq kk lr ko ls lk ll lm bi translated">库伯莱</li></ol><p id="d8a6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">工作节点和组件</p><p id="533e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">节点组件可以在任何节点上运行，保护正在运行的 pods，并提供 Kubernetes 运行时环境。</p><p id="1ece" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">1-库伯莱</p><p id="9561" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它是运行在每个 kubernetes 节点上的代理。首先，将它所在的节点注册到 API 服务器作为节点资源，并使它对 Kubernetes 可见。在这个过程之后，它不断地监听 API 服务器，并检查是否有任何 Pods 被调度到它所在的节点。如果有计划的 Pod，它将在其所在的节点上运行 Pod 中定义的容器。</p><p id="46c6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">此外，它通过不断检查运行在节点上的容器是否启动来确保它们是可访问的。</p><p id="e445" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">2-KUBE 代理</p><p id="885c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">Kube 代理是在 kubernetes 集群中的每个节点上运行的进程。</p><p id="8ce5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它的工作是搜索新服务，每次创建新服务时，它都会在每个节点上创建适当的规则，以便将该服务的流量转发到后端 pod。</p><p id="2db1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">3 容器运行时</p><p id="715d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">指定用于引导容器的容器运行时。支持 Kubernetes 码头，集装箱…</p></div></div>    
</body>
</html>