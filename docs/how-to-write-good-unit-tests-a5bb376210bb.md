# 如何写出好的单元测试？

> 原文：<https://blog.devgenius.io/how-to-write-good-unit-tests-a5bb376210bb?source=collection_archive---------4----------------------->

## 编写良好的单元测试的十个标志

![](img/171d6836f4af2b181d7fdeeaea44d593.png)

费伦茨·阿尔马西在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上的照片

欢迎来到现代和负责任的编程世界。在这个世界里，单元测试是应用程序的基础。

*单元测试*防止代码重构期间的回归。它们允许您通过模拟各种场景来验证代码的正确性。

*单元测试*是**必不可少的**。你不会是碰巧写的吧？你必须开始，相信我。随着时间的推移，你会体会到他们给项目带来的价值。

> 不要混淆“单元测试”和“端到端”测试。单元测试中没有浏览器模拟，即$browser->visit()

虽然编写好的测试是一门艺术。这并不容易，通常需要牺牲，即维护额外的代码。

在许多项目中，通常不可能正确地测试代码，因为当项目足够大时，许多编程问题很难克服。技术债务对于重构代码来说可能代价太高。

如何识别写得好的单元测试？这里有一个简单的清单来回答这个问题:

1.  他们将真实的对象(存根)作为依赖注入到被测试的类中，而不是模仿(即 *InMemoryRepository* 来拯救)
2.  他们在**测试下独立地**测试类，并且不需要外部服务(框架、容器等)。)
3.  它们非常快，只需要几毫秒就能运行
4.  它们**与时间无关**，也就是说，不会在几天或几小时内中断
5.  它们**独立**和**不与其他测试**耦合，即改变测试顺序不会使测试变红
6.  重构被测试类的内部细节不应该让测试变红
7.  它们**不测试不必要的“逻辑”**，即设置器、精确日志消息等。
8.  他们**专注于测试被测类的行为**，而**不是实现**
9.  它们是可重复的、确定的，每次都会产生相同的结果
10.  它们易于维护和理解，具有描述性的方法名称，作为测试代码的原因的名称

如果您在单元测试中遇到上面列表中的任何问题，这是测试质量可能很差的明显迹象。脆弱的测试是一种负担。有价值的测试带给你信心和每个编程项目需要的质量。

您可能有兴趣阅读以下出版物:

[](https://medium.com/@dotcom.software/unit-testing-closures-the-right-way-b982fc833bfa) [## 单元测试闭包“正确的方法”

### 关于如何在 PHP 中对闭包进行单元测试的反向出版物

medium.com](https://medium.com/@dotcom.software/unit-testing-closures-the-right-way-b982fc833bfa)