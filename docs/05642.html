<html>
<head>
<title>How to force push a Git tag to a remote repository</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Git标签强制推送到远程存储库</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-force-push-a-git-tag-to-a-remote-repository-and-replace-an-existing-one-fbc6df89cd2?source=collection_archive---------1-----------------------#2021-09-24">https://blog.devgenius.io/how-to-force-push-a-git-tag-to-a-remote-repository-and-replace-an-existing-one-fbc6df89cd2?source=collection_archive---------1-----------------------#2021-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3d68923c42aafd3af8f94db4632445d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XFCwsnZrduTApq2P"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@yancymin" rel="noopener ugc nofollow" target="_blank"> Yancy Min </a>在<a class="ae kc" href="https://unsplash.com/photos/842ofHC6MaI" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照</figcaption></figure><p id="e3a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这有点具体，但是假设您想要将Git标签强制推送到远程存储库。</p><p id="c5cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这可能是因为您遇到了这样的情况:一个标签已经远程存在，但是您想要更新它而不删除它。</p><p id="ce39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">没错:替换远程标记的一种方法是实际删除远程(和现有的)标记，然后将您的标记推送到远程存储库。您可能有各种各样的原因不想这样做(例如，当您删除标签和推送新标签之间的时间是标签根本不存在的时间，这在某些情况下可能会有问题)。</p><p id="7b0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇文章不会讨论你是否应该这样做，而是简单地讨论你应该如何做。当在Git中使用任何类型的force命令时(老实说，一般来说)，您应该非常自信地知道自己在做什么并承担风险。</p><p id="6767" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">说到这里，假设标签<code class="fe lb lc ld le b">1.0.0</code>存在于Git中。</p><p id="3e49" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当您运行<code class="fe lb lc ld le b">git tag</code>(您可以选择使用<code class="fe lb lc ld le b">-l</code>或<code class="fe lb lc ld le b">--list</code>)时，您会看到它的输出:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="0c5d" class="ln lo iq le b gy lp lq l lr ls">$ git tag<br/>1.0.0</span></pre><p id="5ad8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果存在其他标签，您也可以看到它们。</p><p id="bf87" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您想用已存在的相同标记<code class="fe lb lc ld le b">1.0.0</code>来标记本地提交，您将无法:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="1dfa" class="ln lo iq le b gy lp lq l lr ls">$ git tag 1.0.0<br/>To git@provider.com:username/repo-name.git<br/> ! [rejected]        1.0.0 -&gt; 1.0.0(already exists)<br/>error: failed to push some refs to 'git@provider.com:username/repo-name.git'<br/>hint: Updates were rejected because the tag already exists in the remote.</span></pre><p id="761f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，为了解决这个问题，您将使用<code class="fe lb lc ld le b">-f</code>或<code class="fe lb lc ld le b">--force</code>标志。它们是可以互换的。如果你想要短一点的，就选<code class="fe lb lc ld le b">-f</code>；如果你想要一些对新手来说更加清晰易读的东西，使用<code class="fe lb lc ld le b">-force</code>。</p><p id="7690" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，您将强制标记现有的标记:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="24b2" class="ln lo iq le b gy lp lq l lr ls">$ git tag -f 1.0.0</span></pre><p id="d13a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，您会想要将标签推送到远程存储库，但是为了避免由于标签存在于那里而产生的任何问题，您将在推的时候使用相同的标志:</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="9f02" class="ln lo iq le b gy lp lq l lr ls">$ git push -f origin 1.0.0</span></pre><p id="ff7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，您应该会收到一条确认消息，表明强制推送已完成。一个好的下一步是验证您想要标记的提交散列实际上被正确地推送并替换了旧的散列。</p><p id="ac5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在你知道了！希望这是直截了当的，并愉快地负责任地使用那面<code class="fe lb lc ld le b">-f</code>旗。</p><div class="lt lu gp gr lv lw"><a href="https://tremaineeto.medium.com/membership" rel="noopener follow" target="_blank"><div class="lx ab fo"><div class="ly ab lz cl cj ma"><h2 class="bd ir gy z fp mb fr fs mc fu fw ip bi translated">通过我的推荐链接加入媒体</h2><div class="md l"><h3 class="bd b gy z fp mb fr fs mc fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="me l"><p class="bd b dl z fp mb fr fs mc fu fw dk translated">tremaineeto.medium.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk jw lw"/></div></div></a></div></div></div>    
</body>
</html>