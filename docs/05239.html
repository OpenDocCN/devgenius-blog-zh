<html>
<head>
<title>Unity New Input System Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity 新输入系统第 2 部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/unity-new-input-system-part-2-7cd53e04951d?source=collection_archive---------0-----------------------#2021-07-07">https://blog.devgenius.io/unity-new-input-system-part-2-7cd53e04951d?source=collection_archive---------0-----------------------#2021-07-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c008" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">C#事件，响应 Unity 动作，改变动作地图上的动作</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7eab8c1498a5b9d7f35b091fb4b30c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CPYE4ZBy-7qdlvKzJ-tLtQ.gif"/></div></div></figure><h1 id="93ae" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">使用 C#事件</h1><p id="00c7" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">在播放器的播放器输入组件上，我将行为更改为 C 锐事件。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/1300ddc5a4477ffbb9a483a631ac25cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/1*u6qrhPHPsLCXo3aXDPHodQ.gif"/></div></figure><p id="74b5" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">接下来，我添加了几个变量来跟踪玩家的输入。在 Start 方法中，我缓存了播放器输入组件。在 On Disabled 事件中，我确保取消订阅输入事件。我创建了 Init 播放器输入法并订阅了输入事件。在更新的方法中，如果玩家输入没有被初始化，我就初始化它。</p><p id="b909" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">请注意，我订阅了 Fire 操作的所有三个阶段，因为我的代码设置为处理 Unity 事件的所有三个阶段。还要注意，我对所有 3 个阶段都使用了相同的方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/dbebeee565076657475f5c08e6e1740b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*JKbgnHxxTsYXs3vq4SyY2g.gif"/></div></div></figure><p id="a0f1" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">最初，我试图在启用状态下订阅输入事件，但这给了我一些错误，经过一些研究并阅读了<a class="ae mj" href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/api/UnityEngine.InputSystem.PlayerInput.html" rel="noopener ugc nofollow" target="_blank"> <strong class="li io">播放器输入文档</strong> </a>后，我发现播放器输入本身在启用状态下执行一些初始化工作，这就是为什么我最终以上面的方式完成了它</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/4b392dc0222bc6fbca9797f6e061b5f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1398/format:webp/1*CigtERc1a42CEkmLm-b3_A.png"/></div></figure><h1 id="7c81" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">响应统一行动</h1><div class="ml mm gp gr mn mo"><a href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/manual/Actions.html#responding-to-actions" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd io gy z fp mt fr fs mu fu fw im bi translated">行动</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">相关页面:输入动作被设计成将输入的逻辑意义与物理输入方式分开…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">docs.unity3d.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc km mo"/></div></div></a></div><p id="bc7a" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">我可以检查动作，而不是响应移动输入事件。为了做到这一点，我缓存了我想要的动作，然后我使用<code class="fe nd ne nf ng b"><a class="ae mj" href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/api/UnityEngine.InputSystem.InputAction.html#UnityEngine_InputSystem_InputAction_ReadValue__1" rel="noopener ugc nofollow" target="_blank">InputAction.ReadValue&lt;&gt;()</a></code> o 来表示值类型动作或<code class="fe nd ne nf ng b"><a class="ae mj" href="https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/api/UnityEngine.InputSystem.InputAction.html#UnityEngine_InputSystem_InputAction_triggered" rel="noopener ugc nofollow" target="_blank">InputAction.triggered</a></code>按钮类型动作。对于移动操作，这将是一个向量 2 类型，所以我将使用读取值。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nh"><img src="../Images/aa118c29aed441cedffab73bcc93d404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rqO5BOnQBpVoCyMm8ZfbAg.gif"/></div></div></figure><p id="caf6" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">我的游戏还是老样子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/85c6aeba0d59ca4bd86bee30e48f1ab7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*LspJGBPRP3YM5Cqy6uw25g.gif"/></div></div></figure><h1 id="5731" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">更改动作地图上的动作</h1><p id="b70c" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">我将我的播放器切换到 Unity Events，只是为了观察输入动作的检测是如何工作的。然后我编辑了我的输入动作，删除了“看”动作，创建了一个跳跃动作。我可以通过添加另一个绑定为不同的控制器类型添加输入。我把绑定的路径编辑成我想要的控件。我可以有多个相同类型的控制，像游戏垫，并设置他们为特定的按钮，如果他们是一个特定的类型，即 Xbox 控制器或 PS4 控制器。完成更改后，我会保存输入资产，并检查附加到播放器的播放器输入中的事件。外观事件已消失，跳跃事件显示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7eab8c1498a5b9d7f35b091fb4b30c79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*CPYE4ZBy-7qdlvKzJ-tLtQ.gif"/></div></div></figure><h1 id="77f9" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">结论</h1><p id="cac2" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">新的输入系统加载了许多功能，并且易于实现。与传统输入系统相比，使用它需要做更多的工作，但是这些额外的工作用额外的特性来回报，这些特性使得做其他事情更容易，例如交互。除了使用玩家输入之外，还有其他方法可以访问动作和动作地图，也就是说，它们可以直接在您自己的脚本中设置。输入系统还附带了利用其他功能的其他行为/组件，即适用于多人游戏的玩家管理器和适用于触摸控制图形用户界面的两个屏幕(屏幕按钮和屏幕棒)。我建议查看一下示例，看看是如何实现的，因为它们有很多示例展示了输入系统的特定于案例的特性，即可视化和重新绑定 UI。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nj"><img src="../Images/1f85fa04d9c8e30c530fc9c02a628a28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*C2R4Gcd-DDdoFAe4bLlGnQ.gif"/></div></div></figure></div></div>    
</body>
</html>