# WebRTC vs WebSockets 教程— Web 实时通信

> 原文：<https://blog.devgenius.io/webrtc-vs-websockets-tutorial-web-real-time-communication-c1e2d46957af?source=collection_archive---------6----------------------->

实时对等信令和媒体交换是大多数交互式 web 应用程序的重要功能。直接交换技术的使用案例从简单的文本聊天到交互式解决方案。我们请该领域的专家来帮助我们分析 WebRTC 和 WebSocket 之间的主要区别，它们的优缺点和基本工作原理。

# WebRTC 与 WebSockets —有什么区别？

让我们从 WebRTC 定义开始。它是一种实时直接媒体交换技术，最初是一个开源项目。它的主要目标是为浏览器和移动应用程序提供连接手段。通过信号指示和同步建立连接—整个过程本质上称为信令。

要在两个设备之间建立 WebRTC 连接，需要一个信令服务器。它是一个中介，除了建立连接的主要功能之外，还将有价值的信息和机密数据泄露的风险降至最低。

WebRTC 规范并没有规定到底用什么来传输信令数据: [WebSocket](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket_API) 、 [XMLHttpRequest](https://developer.mozilla.org/ru/docs/Web/API/XMLHttpRequest) ，或者另一个虚拟传输。

什么是 WebSocket？WebRTC 和 WebSocket 都是针对通信能力的技术。两者有什么区别？WebSocket 是一种支持通信和数据交换的计算机通信协议。借助这种 web 通信解决方案和 WebRTC 技术的结合，现代 web 应用程序允许您与大量用户实时交换音频和视频内容。

WebSockets 最显著的优势和特性是在一个 TCP 连接上有两种通信方法。

# WebRTC 与 WebSockets —主要区别

既然我们已经知道不应该混淆这些技术概念，那么让我们来考虑一下它们之间的主要区别。

虽然 WebSockets 的“核心”是丰富的 web 应用程序，但 WebRTC 的重点是快速简单的点对点连接。

1.  WebSockets 的环境是 Java、JMS、c++；对于 WebRTC — Java 和 HTML
2.  WebRTC 更安全；
3.  目前，WebRTC 仅被某些浏览器支持，而 WebSockets 兼容几乎所有现有的浏览器；
4.  就可伸缩性而言，WebSockets 使用每会话一个服务器的方法，而 WebRTC 是对等的。

[我们自己的专家](https://requestum.com/about-us)经常使用 WebSockets 作为最有益的连接协议，它拥有:

*   实时数据传输；
*   互动性；
*   高性能；
*   端到端软件对话。

然而，该解决方案的许多方面可能与 WebRTC 的功能重叠，这就是为什么很容易混淆它们的原因。

Web Sockets 与 WebRTC 操作的区别。Web 套接字的标准模式

来源: [Easythings](https://www.easythings.xyz/facts-about-p2p-in-webrtc.html/)

# WebRTC 与 web sockets——利弊

# WebRTC 的优点

*   不需要安装软件；
*   使用现代音频(Opus)和视频编解码器(VP8、H.264)的高质量数据传输；
*   视频或音频质量在连接期间根据数字环境进行调整，抑制回声和噪音；
*   数据的可靠性和安全性——服务器通过 [TLS](https://www.webopedia.com/TERM/T/TLS.html) 和 [SRTP](https://www.techopedia.com/definition/16483/secure-real-time-protocol-secure-rtp-or-srtp) 协议加密连接来保护连接；
*   基于 HTML5 和 JavaScript 的无限控制界面的实现是可用的；
*   有一个选项是通过 WebSockets 实现与各种后端系统的接口；
*   开源软件允许您将 WebRTC 嵌入 web 应用程序和服务。

如果浏览器支持 WebRTC，则基于 WebRTC 的应用程序的工作效率会有所不同，与操作系统和版本(桌面或移动)无关。这可以让你节省大量的软件开发费用。

# WebRTC 的缺点

这项突破性的网络技术也有它的缺点:

*   需要视频会议服务器(混合视频和声音),用于群组中的音频和视频会议，因为浏览器不能同步两个或更多输入流；
*   WebRTC 解决方案之间缺乏兼容性:不能调用其他开发者的 WebRTC 应用；
*   您必须购买套餐才能在群组中混合会议。

# WebSockets 的优点

WebSockets API 和协议由 IETF 和 W3C 标准化。他们已经在我们公司的专家中证明了自己是 web、桌面和移动应用程序中的一项功能性技术。这种通信协议的主要优点包括:

1.  交叉通信(跨来源通信)—它会产生一定的安全风险，但对于广泛的功能来说是必需的；
2.  跨平台兼容性(web、计算机、移动设备)；
3.  在与服务器一起工作的 web 应用程序或移动应用程序中，从后端到前端的持续连接；
4.  短时间缺乏联系并不中断联系；
5.  异步工作的可能性，而不是传统的请求-响应格式的工作。

WebSockets 的想法源于基于 HTTP 的技术的局限性。它是一种对等协议，从服务器发送到客户端的数据必须首先被请求。反过来，WebSockets 允许您基于类似 UDP 的 WebSockets 消息发送数据，但具有更高的 TCP 可靠性。

WebSocket 使用 HTTP 作为初始传输机制，但在接收到 HTTP 响应后会保持 TCP 连接，以便以后在服务器和客户端之间发送消息时使用。

# WebSockets 的缺点

交互反应慢。向 WebSocket 发送数据的结果在超时 75 秒后才知道。协议没有直接宣布结果。这就是为什么开发人员经常被迫运行特殊的 pings 来获得快速响应。

在移动网络中，移动设备经常在外部 IP、NAT 和默认网络之间切换。而这并不取决于运营商。出现这种情况的原因:如果客户端在重新连接到另一个网络时没有关闭连接，服务器不会获得有关您的地址更改的信息。服务器继续向您不再使用的旧 IP 发送私有数据。这个 IP 地址被另一个用户使用，信息被泄露。

WebSockets 中的其他安全问题:

*   处理否认；
*   可能的私人数据泄露；
*   客户端-服务器加密等。

为了加强安全性并允许多个用户使用同一个 IP 地址，路由器会隐藏您的 IP 地址并用另一个替换。

# WebRTC 架构

最初，WebRTC 是作为一种对等技术开发的。因此，开发的重要部分集中在客户端设备上。

今天，我们可以定义三种主要的 WebRTC 架构:对等、多点会议单元和选择性转发单元。它们中的每一种都有自己的特点、优点和使用中的缺点。

# Websocket 替代方案 2020

当涉及到使用实时数据的 web 应用程序的开发时，公司面临着这样的问题:如何将数据从服务器传送到客户机？标准的方法是通过 WebSockets。有什么像样的替代品吗？是的，事实上有。

首先，确定您计划使用的提交机制很重要。有两种选择:客户端拉取(浏览器中的网站向服务器请求信息)和服务器推送(服务器向网站发送相关数据)。在 2020 年，以下方法用于此目的:

1.  WebSockets(服务器推送)；
2.  长/短轮询(客户端拉)；
3.  服务器发送的事件(服务器推送)。

让我们来看看后两者。

# 客户拉动

客户端向服务器发出数据请求。如果不执行此操作，服务器将在一段时间内保持不活动状态，或者:

*   如果注册了更改，它发送接收到的结果并关闭请求；
*   如果它们不存在，或者服务器长时间处于非活动状态，则客户端会收到关于数据不存在的通知。

AJAX 请求通过 HTTP 协议运行:默认情况下，对同一个域的请求是多路复用的。这种机制有许多问题:

# 服务器推送

与前一个选项的主要区别在于，您获得了一个连接，并保留了通过它的事件流。长轮询为每个请求创建一个新连接。

SSE 与 WebSockets 协议只有一个相似之处——它实时运行。然而，主要的数据流来自服务器到客户端。该协议是单向的，即客户端不能通过它向服务器发送消息。当在移动设备上加载时，这个特性会引起轻微的延迟(长达一秒钟)。

服务器推送(SSE)的细节:

1.  对于连续连接，不使用任何特殊的协议—该过程通过标准的 HTTP 请求进行。复用是通过 HTTP/2 协议实现的；
2.  如果连接中断，EventSource 将自动尝试恢复连接；
3.  在连接中断的情况下，客户端发送他所知道的最后一个唯一标识符。这允许服务器确定客户机错过了多少消息，并在下一次连接时传递错过的消息。

# 摘要

WebRTC 是为高性能媒体传输而设计的。WebRTC web 应用程序通过服务或传输运行，它们通过服务或传输交换网络和媒体数据。相比之下，WebSocket 用于客户端和服务器之间的通信。

*最初发表于*[*【https://requestum.com】*](https://requestum.com/webrtc-vs-websockets)*。*