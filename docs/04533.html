<html>
<head>
<title>Script Communication in Unity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Unity中编写通信脚本</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/script-communication-in-unity-using-scriptable-objects-ad2ef0d99c59?source=collection_archive---------2-----------------------#2021-03-30">https://blog.devgenius.io/script-communication-in-unity-using-scriptable-objects-ad2ef0d99c59?source=collection_archive---------2-----------------------#2021-03-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="d48d" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用脚本化对象</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/057383cde7e700ea59a23e2d09bd15a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/1*IOLXRGbrXeGm6s9z6QgDoA.gif"/></div></figure><p id="699e" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">可脚本化的对象使得在游戏对象之间传递数据变得容易，这对于游戏中使用的全局变量尤其有用，并且有助于保持游戏系统的模块化。例如，你有一个产卵系统，只有当玩家活着的时候才会产卵。你的用户界面系统显示分数，球员的生活和其他数据。没有玩家就不能使用产卵系统或者UI系统。</p><p id="fe8b" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这是受两个Unite talks<a class="ae lg" href="https://www.youtube.com/watch?v=raQ3iHhE_Kk" rel="noopener ugc nofollow" target="_blank">Unite Austin 2017——带有可脚本化对象的游戏架构</a>和<a class="ae lg" href="https://www.youtube.com/watch?v=6vmRwLYWNRo" rel="noopener ugc nofollow" target="_blank">Unite 2016——在光荣的可脚本化对象革命中推翻MonoBehaviour暴政</a>的启发。要阅读更多关于可脚本化对象的内容，请参阅<a class="ae lg" href="https://docs.unity3d.com/Manual/class-ScriptableObject.html" rel="noopener ugc nofollow" target="_blank"> Unity手册</a>和<a class="ae lg" href="https://docs.unity3d.com/ScriptReference/ScriptableObject.html" rel="noopener ugc nofollow" target="_blank">脚本参考</a>。</p><p id="3dd8" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">我使用来自https://github.com/roboryantron/Unite2017的代码作为我的变量和游戏事件的基础。我为常见的变量类型string、int、float、bool、Vector2、Vector3创建了变量和变量引用。我从一个抽象的变量基泛型、一个接受变量基的变量引用泛型和一个静态变量引用属性抽屉(使它看起来像是内置到Unity中的)开始。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lh"><img src="../Images/7f38cee41cfa3a34da5bc86664d42bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bl9Hl3n5kE9r_IcU7OTqkA.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lm"><img src="../Images/058d5c5fabff2b13a800b6dbe1635394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wU_6VAKFaViVRBoMd6bg9A.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lh"><img src="../Images/0501e7986c3f23de896074469c1feb51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*grxWD0JABFy0gvp30KICbw.png"/></div></div></figure><p id="9fbb" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">int类型是如何设置的，其他类型也是如此。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ln"><img src="../Images/c90b6040101da5d6da4c48c7910bdf34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DDt7UmFrEfVpIuWR8_MrjQ.png"/></div></div></figure><p id="abf9" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">注意，唯一需要的代码是Add方法</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lo"><img src="../Images/94e53cd11a69b5f9e3bf29883a8e06f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JY2haFM8h7RBN6H1Wg2e8g.png"/></div></div></figure><p id="d4ad" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">请注意，除了类定义之外，这里没有任何代码。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lp"><img src="../Images/5418813166a626a54395d1949ae53c54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3G7QsMkdseQX9Pp_FfoGsA.png"/></div></div></figure><p id="c889" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">对于属性抽屉，这是我必须做的，以使属性抽屉为每种类型工作。注意，它只是调用Gui方法上的变量引用属性Drawer。</p><h1 id="30c6" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">初始设置</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lh"><img src="../Images/252e39834d091ddb0aa979c78c3aa194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ftVnGukTpiRN9cRNxa1MTw.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lh"><img src="../Images/9a3f67f95868d62dee8fe7ff4fcd493b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EwODgfyynYZXYrVuwUzksA.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lp"><img src="../Images/923d6ae7b0e3b9f5f196028bc2179924.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ts94pUw2eKRjKzlcNjFXHg.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mi"><img src="../Images/f0f453e6ca43b384e31b633664fa18f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3a-v3QuyIZN8NJUywEqXrA.png"/></div></div></figure><p id="a168" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">为了显示玩家拥有的生命，我们需要找到玩家的游戏对象，并得到它的可损坏组件，以获得它拥有的生命数。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/bd1122ded1850de35bfbf8f43fdfa257.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*b1GU_XId1SVHZXzOHeSAkw.png"/></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/04034dbc5714b8b7e5ca49d34be8104b.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*YvNLmooGBlEoN3zryaUHtg.png"/></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/a30a220249353e9f43fae0a4201b1a9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:606/format:webp/1*QKaqMDUZsjwiEyJptuTy1g.png"/></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ml"><img src="../Images/74009c450be43da927940cb2d671a637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fuQFW0wPznM0zEYLilu88Q.gif"/></div></div></figure><h1 id="face" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">使用可编写脚本的对象初始化变量</h1><p id="3521" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt mo kv kw kx mp kz la lb mq ld le lf ig bi translated">UI系统不关心它显示的值来自哪里，只要它有它需要的信息。让事情变得更简单，我们的游戏性能和使用一个可脚本化的对象Int变量。</p><h2 id="a5e6" class="mr lr in bd ls ms mt dn lw mu mv dp ma kt mw mx mc kx my mz me lb na nb mg nc bi translated">更新生命更新程序脚本</h2><p id="b18d" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt mo kv kw kx mp kz la lb mq ld le lf ig bi translated">我将在这里使用Int引用类型，以防游戏中没有这个变量，我们只是使用UI，我们可以在检查器中调整这个值来测试我们的UI是否工作。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nd"><img src="../Images/e96b1ca97a07ad6085f076cd669b8ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Hl-MmZrC-FPMUu1-EtPJA.png"/></div></div></figure><p id="c452" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">更容易得到我们想要的信息。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ml"><img src="../Images/74009c450be43da927940cb2d671a637.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fuQFW0wPznM0zEYLilu88Q.gif"/></div></div></figure><h2 id="7613" class="mr lr in bd ls ms mt dn lw mu mv dp ma kt mw mx mc kx my mz me lb na nb mg nc bi translated">更新易损坏的脚本</h2><p id="de65" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt mo kv kw kx mp kz la lb mq ld le lf ig bi translated">我们在这里使用Int引用类型，所以我们不必为游戏中的每个游戏对象都设置一个可脚本化的对象变量。玩家的生命是我们唯一需要的。我们将允许游戏设计师决定他们需要哪些变量。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ne"><img src="../Images/6da1f381eae027810945f65cb2efeca6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yVQyTMyepCTAKhHF9XqnCg.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nf"><img src="../Images/e1b09e196ddb22732f530072878b4960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*g5du1KegVxSrkt8xvwMaCg.gif"/></div></div></figure><h2 id="b1c1" class="mr lr in bd ls ms mt dn lw mu mv dp ma kt mw mx mc kx my mz me lb na nb mg nc bi translated">使用可编写脚本的对象变量</h2><p id="a396" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt mo kv kw kx mp kz la lb mq ld le lf ig bi translated">创建变量。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/057383cde7e700ea59a23e2d09bd15a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/1*IOLXRGbrXeGm6s9z6QgDoA.gif"/></div></figure><p id="c818" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在游戏中使用变量。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/7e1d60423cfcdcda28d6502da8a13bde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/1*2Dsc2c6YopW43JQDtPPNvA.gif"/></div></figure><p id="c9d5" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">属性抽屉的目的是在检查器窗口中绘制漂亮的界面。您确切地知道组件使用什么作为它的数据。如果没有属性抽屉脚本，常量值和变量值都将显示在检查器中，这可能会引起混淆。</p><p id="9110" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">使用脚本化对象Int变量的游戏</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nh"><img src="../Images/6347ec20a41c57e5b135f481cae39a53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ac0VrSkrg0VnwQEB3tLulQ.gif"/></div></div></figure><h1 id="75a7" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">对运动方向使用矢量3可脚本化的对象变量</h1><p id="ec32" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt mo kv kw kx mp kz la lb mq ld le lf ig bi translated">更新播放器和可移动代码以使用力矩方向。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nd"><img src="../Images/9b15b6731453c287ea778e3765eb7f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yE0PjgjgqEFBVfjGrdHi6g.png"/></div></div><figcaption class="ni nj gj gh gi nk nl bd b be z dk translated">玩家现在使用向量3变量</figcaption></figure><p id="0eb0" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">请注意，我使用的是变量，而不是变量引用。我只是展示了在代码中使用两种不同类型的区别。</p><p id="f9c5" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">对于变量类型，您必须使用SetValue或Add方法来更改它。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nm"><img src="../Images/92a67a2560b6e03b8ed2ab6bb8d88113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dsvzLaUzhJl3SfXEJmnBeg.png"/></div></div><figcaption class="ni nj gj gh gi nk nl bd b be z dk translated">现在可使用Vector3参考移动</figcaption></figure><p id="1e29" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">创建玩家移动方向变量，并设置移动方向来使用这个变量。因为我们改变了类型，所以我们必须去游戏中的每个游戏对象，并确保移动方向有正确的值。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/d78c3526bdc4ae544fde24bc176fba18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/1*yK5QO-mTqP9fXPWsl7E35w.gif"/></div></figure><h1 id="0726" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">游戏也一样。</h1><p id="7d71" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt mo kv kw kx mp kz la lb mq ld le lf ig bi translated">请注意，当我移动并受到伤害时，你可以看到数值实时更新。这些值会在播放模式中更改，离开播放模式后，它们不会像在播放模式中更改的其他变量一样重置。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi no"><img src="../Images/c8283bb14e28e94fa9d6547f4f38d7e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*58rLsQZYJFjHpirQrGKbkg.gif"/></div></div></figure></div></div>    
</body>
</html>