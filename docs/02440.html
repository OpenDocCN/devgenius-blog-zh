<html>
<head>
<title>Creating Network Services with Combine</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Combine 创建网络服务</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/creating-network-services-with-combine-ed34f63eb60b?source=collection_archive---------5-----------------------#2020-08-04">https://blog.devgenius.io/creating-network-services-with-combine-ed34f63eb60b?source=collection_archive---------5-----------------------#2020-08-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4fe167b6fd860ccdb4cb97961342802c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vAi08ei4nVdX55qa"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com/@bracht?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">法比奥·布拉克特</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="339d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://developer.apple.com/documentation/combine" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">组合框架</strong> </a> <strong class="kc io"> </strong>可以用来在一个 iOS 应用中构建健壮的、可重用的网络服务。在这篇文章中，我将演示如何用<strong class="kc io">结合</strong>和<a class="ae jz" href="https://github.com/Alamofire/Alamofire" rel="noopener ugc nofollow" target="_blank">创建一个网络服务。</a></p><p id="aa85" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先让我们将<strong class="kc io"> Alamofire </strong>添加到<strong class="kc io"> Podfile </strong>中。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="d22e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们检查一下核心服务结构。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="c0cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">请求</strong>方法将符合<strong class="kc io">可编码</strong> ( <strong class="kc io">可编码</strong>或<strong class="kc io">可解码</strong>协议)的类型<strong class="kc io"> T </strong>和符合<strong class="kc io">错误</strong>协议的类型<strong class="kc io"> E </strong>定义为类型参数。它返回一个<a class="ae jz" href="https://developer.apple.com/documentation/combine/future" rel="noopener ugc nofollow" target="_blank"><strong class="kc io">Future</strong></a><strong class="kc io"/>，它将类型<strong class="kc io"> T </strong>作为<strong class="kc io">输出</strong>，类型<strong class="kc io"> E </strong>作为<strong class="kc io">失败。</strong></p><p id="a196" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面是<strong class="kc io">示例服务</strong>结构。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="7e92" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> ExampleService </strong>定义了一个<strong class="kc io"> getData </strong>方法，该方法将<strong class="kc io">参数</strong>字典作为其参数，并返回一个<strong class="kc io"> Future &lt; EditionResponse，Error &gt; </strong>。它调用<strong class="kc io"> CoreService.request </strong>传递<strong class="kc io"> HTTPMethod.get </strong>，这使得该请求成为<strong class="kc io"> HTTP GET </strong>请求。</p><h1 id="afb8" class="le lf in bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">使用</h1><p id="9379" class="pw-post-body-paragraph ka kb in kc b kd mc kf kg kh md kj kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">下面是<strong class="kc io">示例</strong>结构。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="lc ld l"/></div></figure><p id="2c31" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> getData </strong>方法<strong class="kc io"> </strong>取参数字典传递给<strong class="kc io"> EditionService.getData </strong>。<strong class="kc io"> subscribe </strong>方法被指定使用全局队列，该队列使用后台线程。<strong class="kc io"> receive </strong>方法被指定使用使用主线程的主队列。<strong class="kc io">接收器</strong>被<strong class="kc io"> </strong>调用，以观察从<strong class="kc io">发布器</strong>接收的值。<strong class="kc io">接收完成</strong>观察完成时执行关闭。在这里检查完成是错误还是成功。<strong class="kc io">接收值</strong>当从<strong class="kc io">发布者</strong>处接收到一个值时，闭包执行。最后<strong class="kc io">存储</strong>方法来保存由<strong class="kc io">接收器</strong>方法返回的<strong class="kc io"> AnyCancellable </strong>。</p><p id="fecc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> getData: Example()的示例调用。getData(["format" : "audio "，" type" : "versebyverse"]) </strong></p><p id="1ab8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你喜欢这个帖子，请给一些掌声。感谢您的阅读。</p></div></div>    
</body>
</html>