<html>
<head>
<title>Algorithmic Trading-Optimizing strategies in python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">python中的算法交易优化策略</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/optimizing-trading-strategies-using-python-ff419f1f3ffb?source=collection_archive---------0-----------------------#2022-01-09">https://blog.devgenius.io/optimizing-trading-strategies-using-python-ff419f1f3ffb?source=collection_archive---------0-----------------------#2022-01-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/025657a15b444edffdbe5fad832e7522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wyxEiu-99l7PYsJT"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@executium?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">行政长官</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">广场</a>拍照</figcaption></figure><p id="8c90" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我将描述如何用python回溯测试交易策略的代码片段。这是我的<a class="ae jz" rel="noopener ugc nofollow" target="_blank" href="/algorithmic-trading-backtesting-a-strategy-in-python-3a136be16ece">上一篇关于用python </a>回溯测试策略的文章的后续文章，我高度评价你阅读这篇文章以理解这篇文章。本文背后的动机是展示如何将一个策略应用于不同时间段(开始和结束日期)的各种股票符号，以及封装了绘图和优化技术的代码。</p><p id="7212" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">本文特别涵盖了两个主题。</p><ol class=""><li id="8021" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">以面向对象的方式组织代码</li><li id="282c" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">优化策略参数以实现回报最大化</li></ol><p id="186c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了简单起见，我将把代码片段基于基于技术指标的策略(布林线)</p><h2 id="d063" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">以下是步骤…</h2><ol class=""><li id="985d" class="ky kz in kc b kd mf kh mg kl mh kp mi kt mj kx ld le lf lg bi translated">下载所有必要的库</li><li id="0874" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">创建财务数据类</li><li id="8929" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">策略类(基于布林线的策略)</li><li id="788f" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">创建类对象并进行回溯测试</li><li id="d206" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">用pyfolio创建一个撕页</li></ol><h2 id="d47a" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">第一步。下载所有必要的库</h2><p id="3095" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">在此步骤中，将导入所有必需的库</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="a2fd" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">第二步。金融数据类</h2><p id="47e4" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">在这个代码片段中，创建了一个财务数据类。类对象接受一个符号、结束日期和需要下载每日数据的天数。</p><p id="f073" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将是一个基类，可由任何其他策略类继承，以封装所有基本功能，如下载数据、绘制数据、准备数据和创建样张。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="a188" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">第三步。策略类(基于布林线的策略)</h2><p id="fded" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">在此步骤中，将创建一个包含以下功能的策略类</p><ul class=""><li id="aa92" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx mt le lf lg bi translated">准备指标—请参考这篇关于如何用python创建示例策略的文章</li><li id="923d" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mt le lf lg bi translated">回溯测试策略，包括创建信号、头寸和策略回报</li><li id="aa89" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mt le lf lg bi translated">Optimizer —此函数迭代一个或多个具有一系列值的参数，并选择具有最高回报的参数。这可以进一步修改，以便结合高Sharpe比率对返回值进行排序。</li><li id="8eb7" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mt le lf lg bi translated">画出优化策略的回报。</li></ul><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="56e8" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">第四步。创建类对象并进行回溯测试</h2><p id="169d" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">在这一步中，创建了特定策略类的对象。strategy类中的optimizer函数重用strategy函数来遍历布林线策略中所需的移动平均线的各种窗口值，并绘制具有最高回报的策略参数。</p><figure class="mn mo mp mq gt jo"><div class="bz fp l di"><div class="mr ms l"/></div></figure><pre class="mn mo mp mq gt mu mv mw mx aw my bi"><span id="b565" class="lm ln in mv b gy mz na l nb nc">[*********************100%***********************]  1 of 1 completed<br/>   Window  bnh returns  strategy returns<br/>0      41     0.041484          0.216779<br/>1      40     0.041484          0.205460<br/>2      39     0.041484          0.205460<br/>3      27     0.041484          0.183269<br/>4      28     0.041484          0.183269<br/>Window: 41</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="ab gu cl nd"><img src="../Images/e4aa1b3cf80c24d46f41bf39d8f616cf.png" data-original-src="https://miro.medium.com/v2/format:webp/1*iLzPOIp9unm2CsxNucZBig.png"/></div></figure><h2 id="b2f7" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">5.用pyfolio创建一个撕页</h2><pre class="mn mo mp mq gt mu mv mw mx aw my bi"><span id="0d9f" class="lm ln in mv b gy mz na l nb nc">Bollinger.create_simple_tear_sheet()</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/a23bff7220ed354180701eebae5c96e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhGGuwrggxPRP5rPWLv2pg.png"/></div></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div class="ab gu cl nd"><img src="../Images/85cbaae9d157b3c3a304a410a212d7d9.png" data-original-src="https://miro.medium.com/v2/format:webp/1*a2VNQ3VFsX8FgtKOx71X0A.png"/></div></figure><h2 id="f5e1" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">结论</h2><p id="65e3" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">以上代码片段可以在:<a class="ae jz" href="https://github.com/karthikramx/Algorithmic-Trading-optimize-back-test" rel="noopener ugc nofollow" target="_blank">https://github . com/karthikramx/algorithm-Trading-optimize-back-test</a>找到</p></div></div>    
</body>
</html>