<html>
<head>
<title>Sentiment Analysis of any Twitter Profile using R</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 R 对任何 Twitter 个人资料进行情感分析</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/sentiment-analysis-of-any-twitter-profile-using-r-90f0af5bc8?source=collection_archive---------2-----------------------#2020-11-07">https://blog.devgenius.io/sentiment-analysis-of-any-twitter-profile-using-r-90f0af5bc8?source=collection_archive---------2-----------------------#2020-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c9bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我通常用 Python 语言写我所有的教程，因为我觉得这很容易。但是很少有数据爱好者知道 R 语言的重要性。因此，我想在 r 中做一个项目。对于文本分析中最常见的主题，也就是情感分析，启动一个简单的项目再好不过了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/8ca439e8f7e788c6dfbe5d2b63ca7e89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AuPrTobLoGeYyyX2vp6mgg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">图片来源:Dhaval</figcaption></figure><p id="751f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于这是投票季节，我想到分析名人发的推文的情绪。因此，我用简单的格式保存了这篇教程。首先，我将讲述什么是情感分析&amp;然后我们将继续编码部分。</p><h1 id="828a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak">什么是情感分析？</strong></h1><p id="3496" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">情感分析是指使用自然语言处理、文本分析、计算语言学和生物统计学来系统地识别、提取、量化和研究情感状态和主观信息。通俗地说，<em class="me">情感分析就是判断一篇文章是正面的、负面的、还是中性的</em> <strong class="jp ir">的过程。</strong></p><h2 id="604e" class="mf lc iq bd ld mg mh dn lh mi mj dp ll jy mk ml lp kc mm mn lt kg mo mp lx mq bi translated">情感分析的业务用例是什么？</h2><p id="7205" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">情绪分析有助于大型企业中的数据分析师评估公众意见，进行细致入微的市场研究，监控品牌和产品声誉，以及了解客户体验。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/ecf65deee4f49aea3b6fa5d85e2379f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WYkxNhLjhk_vpns6uOV2Pg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">图片来源:Dhaval</figcaption></figure><p id="9938" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将使用 RStudio 作为我的主要 IDE 来编写我的项目。除了安装在你的系统中的 R 编程语言，我还会使用 3 个额外的 R 包，这样我们就可以进一步进入编码部分了。</p><p id="b961" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">使用的软件包:</strong></p><ol class=""><li id="9434" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">雪球 c</li><li id="3bca" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">铥</li><li id="b0ac" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">推特</li><li id="1c87" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">修哲特</li></ol><p id="1278" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">安装软件包</strong></p><p id="b499" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您在终端上，请在脚本中一次或逐行运行以下命令。</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="5ba8" class="mf lc iq ng b gy nk nl l nm nn">install.packages("SnowballC")<br/>install.packages("tm")<br/>install.packages("twitteR")<br/>install.packages("syuzhet")</span></pre><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi no"><img src="../Images/d7713b0f8f07df2edcd56a52711f5a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*If7K071SisP6L4A81Ve7-A.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk translated">图片来源:Dhaval</figcaption></figure><p id="716d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们已经在系统中安装了所需的包，让我们开始编码部分</p><p id="cb00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">导入包</strong></p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="29bb" class="mf lc iq ng b gy nk nl l nm nn">library("SnowballC")<br/>library("tm")<br/>library("twitteR")<br/>library("syuzhet")</span></pre><p id="1bc1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，接下来要做的重要事情是从 Twitter API 获取访问令牌和消费者密钥，可以从<a class="ae np" href="https://developer.twitter.com/en/docs/authentication/oauth-1-0a/obtaining-user-access-tokens" rel="noopener ugc nofollow" target="_blank">这里的</a>获取。</p><p id="eb1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">获取访问令牌和消费者密钥</strong></p><p id="5f40" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，一旦您获得了访问令牌和消费者密钥，请将它们存储在变量中，即<strong class="jp ir">消费者密钥、消费者秘密、访问秘密</strong> &amp; <strong class="jp ir">访问令牌</strong></p><p id="9b82" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码:</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="b219" class="mf lc iq ng b gy nk nl l nm nn">consumer_key &lt;- 'used the key provided by Twitter '<br/>consumer_secret &lt;- 'used the key provided by Twitter '<br/>access_token &lt;- 'used the key provided by Twitter '<br/>access_secret &lt;- 'used the key provided by Twitter'<br/>setup_twitter_oauth(consumer_key, consumer_secret, access_token, access_secret)</span></pre><p id="c2b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用预定义的函数 setup_twitter_oauth，并将其参数作为所有键。</p><p id="b6b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">获取推特简介</strong></p><p id="902e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们使用我们的密钥和令牌进行了身份验证，我们就必须检索用户的 tweets 档案，以便分析其情感。</p><p id="2d84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将使用 userTimeline 函数从 TwitteR 库中检索推文。</p><p id="a91c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个例子中，我将从 donaldtrump 获取推文，我将分析的推文数量将是 200(我在参数 n =200 中提到过)</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="b246" class="mf lc iq ng b gy nk nl l nm nn">tweets &lt;- userTimeline("donaldtrump", n=200)<br/>n.tweet &lt;- length(tweets)<br/>tweets.df &lt;- twListToDF(tweets)<br/>head(tweets.df)</span></pre><p id="31af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我使用了 length 函数来获取 tweet 的长度，并最终将 tweet 转换为数据帧。</p><p id="456d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">清理推文语料库</strong></p><p id="bb9f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们看到任何 twitter 用户的推文，那个人会使用任何特殊字符，如标签、@等。为了分析推文，我们必须使我们的推文语料库摆脱这些特殊字符。</p><p id="e01d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码:</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="f796" class="mf lc iq ng b gy nk nl l nm nn">tweets.df2 &lt;- gsub("http.*","",tweets.df$text)<br/>tweets.df2 &lt;- gsub("https.*","",tweets.df2)<br/>tweets.df2 &lt;- gsub("#.*","",tweets.df2)<br/>tweets.df2 &lt;- gsub("@.*","",tweets.df2)</span></pre><p id="c650" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，在运行以上几行之后，我们将所有特殊字符或任何超链接替换为" "(意味着从语料库中删除相应的特殊字符)</p><p id="c9dc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">获得情绪定义词</strong></p><p id="59fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们将把 tweets 数据帧转换成一个向量，并将情感存储在情感数据帧中。</p><p id="84ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码:</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="dc39" class="mf lc iq ng b gy nk nl l nm nn">word.df &lt;- as.vector(tweets.df2)<br/>emotion.df &lt;- get_nrc_sentiment(word.df)<br/>emotion.df2 &lt;- cbind(tweets.df2, emotion.df) </span></pre><p id="7337" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">提取情感分数</strong></p><p id="100d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在每个单词都有一个特定的分数，这个分数可以将它归类为积极或消极的情绪。</p><p id="f9cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">提取正面情感得分</strong></p><p id="c853" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将使用 get _ perspective 函数，并将我们的 word 数据框作为参数来获取情感得分。此外，在下面的代码中，我保存了从单词中获得的最大值，并将其存储在另一个变量中。</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="6717" class="mf lc iq ng b gy nk nl l nm nn">sent.value &lt;- get_sentiment(word.df)<br/>most.positive &lt;- word.df[sent.value == max(sent.value)]</span></pre><p id="9b4b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类似地，我们也会提取负面情绪的分数。</p><p id="be1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">提取负面情绪得分</strong></p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="dbec" class="mf lc iq ng b gy nk nl l nm nn">most.negative &lt;- word.df[sent.value &lt;= min(sent.value)]</span></pre><h1 id="070a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">提取情感推文</h1><p id="aabe" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated"><strong class="jp ir">提取正面情绪推文</strong></p><p id="f3b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们计算出分数，就该提取代表特定情绪的实际推文了。</p><p id="2194" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我们是如何做到的？</strong></p><p id="3c1f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还记得我们在上一节中计算的情感分数吗？我们将过滤掉值大于 0 的分数。</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="6a48" class="mf lc iq ng b gy nk nl l nm nn">positive.tweets &lt;- word.df[sent.value &gt; 0]</span></pre><p id="50b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">提取负面情绪推文</strong></p><p id="147d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了提取负面情绪的推文，我们将过滤具有负面得分的推文。</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="e9fd" class="mf lc iq ng b gy nk nl l nm nn">negative.tweets &lt;- word.df[sent.value&lt;0]</span></pre><p id="0a74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">附加:让我们提取中性情绪的推文！</strong></p><p id="c485" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我说中性情绪时，我指的是那些得分正好为零的推文。因此，代码将非常类似于上面的代码。</p><pre class="km kn ko kp gt nf ng nh ni aw nj bi"><span id="fdd4" class="mf lc iq ng b gy nk nl l nm nn">neutral.tweets &lt;- word.df[sent.value ==0]</span></pre><p id="1b48" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样！</p><p id="7e6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我已经在我的 Github Repo 上传了这段代码，你可以在这里找到！如果您对代码有任何疑问或建议，请在下面发表评论</p><p id="9afd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">参考文献</strong></p><p id="8892" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">[1]<a class="ae np" href="https://en.wikipedia.org/wiki/Sentiment_analysis" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Sentiment_analysis</a></p></div></div>    
</body>
</html>