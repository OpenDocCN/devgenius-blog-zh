<html>
<head>
<title>Visualizing Heatmaps in Seaborn</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在 Seaborn 可视化热图</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/visualizing-heatmaps-in-seaborn-cc323748af69?source=collection_archive---------6-----------------------#2022-09-24">https://blog.devgenius.io/visualizing-heatmaps-in-seaborn-cc323748af69?source=collection_archive---------6-----------------------#2022-09-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/f14e94e4f35892fede3bad0749190e15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N1GIUQqnxYQYXsgx"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><a class="ae jz" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">粘土银行</a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><p id="a7b7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们讨论在 Seaborn 中创建热图的不同可视化技术。</p><p id="4bc0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">热图是底层数据的二维颜色表示。</p><p id="2d87" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">颜色强度随其对应的数据值而变化，即值越高，颜色越强烈，反之亦然。</p><p id="55aa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在数据科学和机器学习中，热图使我们能够在探索性数据分析(EDA)中分析相关矩阵。它允许我们观察变量之间关系的可视化表示，并在数据清理步骤中采取适当的行动。</p><p id="8283" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们学习如何为关联矩阵创建热图之前，让我们先讨论一下术语关联和关联矩阵的含义。</p><p id="f0d1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">相关性</em> <strong class="kc io"> <em class="ky"> </em> </strong>决定了两个变量<strong class="kc io"> <em class="ky">之间的<em class="ky">线性关系</em>。</em> </strong>它不仅为我们提供了关系的<em class="ky">强度</em>，还为我们提供了关系的<em class="ky">方向</em>，即变量是直接相关还是反向相关。</p><p id="d2d8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">相关性的<em class="ky">量化</em>是一个叫做<em class="ky">‘相关系数’</em>的统计量，其值总是在-1 和 1 之间。</p><p id="a591" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">-1 代表<em class="ky">完全负相关</em>，一个变量增加，另一个变量以精确的比例减少。</p><p id="3fd4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">+1 代表完全相反的情况，即当一个变量增加时，另一个变量以相同的比例增加。</p><p id="cb4b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">零值表示考虑中的两个变量之间没有线性关系。</p><p id="7142" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">-1 到 1 之间的任何其他值表示:</p><ol class=""><li id="9094" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">低相关性或高相关性。</li><li id="bf62" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">正相关或负相关。</li></ol><p id="0abf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以上将取决于符号以及值与 1 的接近程度。</p><p id="4c88" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">既然我们已经理解了相关性。让我们把焦点切换到文章开头提到的相关矩阵。</p><p id="9e26" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">相关矩阵是一种表示，其中我们可以一次看到所有的相关系数。</p><p id="56bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们举一个例子来看看这一点。我们将使用 mpg 数据集作为例子。</p><p id="4b5f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一项任务是将数据集加载到名为 df 的数据框中。</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="0710" class="lw lx in ls b gy ly lz l ma mb">df = sns.load_dataset('mpg')</span></pre><p id="4c42" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，让我们通过查看前五个条目来了解这些信息。</p><p id="9137" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">实现这一点的命令是:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="416d" class="lw lx in ls b gy ly lz l ma mb">df.head()</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/46d7d9978ab6ca75614504564a3b6169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RSPy2TP3zelUytGa-aydwA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="617b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，让我们计算手头数据的相关系数。<br/>在熊猫数据帧中，我们有一个名为‘corr()’的简洁函数，它是相关性的简称。</p><p id="0f3b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要计算相关系数，我们可以运行以下命令:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="6f5b" class="lw lx in ls b gy ly lz l ma mb">df.corr()</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi md"><img src="../Images/e0e4225ca006913f441fb24901baee9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dqNI8ekDutGgOelg6cFC5Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="66e5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">检查上述命令的输出，我们观察到 Seaborn 只使用数字列来生成相关矩阵。</p><p id="d098" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对角线上的值都是 1。我们将该列与其自身进行比较，导致相关系数等于 1，因为所选列将与其自身百分之百匹配。</p><p id="1eab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们将相关矩阵保存在一个变量中，以便于回忆。<br/>我们将这个变量称为‘my _ corr _ mat ’,如下所示:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="99e6" class="lw lx in ls b gy ly lz l ma mb">my_corr_mat = df.corr()</span></pre><p id="0486" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，让我们根据上面的关联矩阵创建一个简单的热图。</p><p id="1c71" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以通过运行以下命令来实现这一点:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="286e" class="lw lx in ls b gy ly lz l ma mb">sns.heatmap(my_corr_mat)</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi me"><img src="../Images/df0bc3579d48e0f8f00c123f4fc63087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4EHaGtNeNA0gB_tJcKnWBA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="80ff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以看到 Seaborn 根据相关矩阵的值给出了一种颜色。</p><p id="a388" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，让我们检查一下热图函数中可用的各种参数。了解参数有助于我们在需要时创建自定义图。</p><p id="89a7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以使用折线图文章中显示的相同技巧来获得可供使用的彩色地图列表。</p><p id="5ba8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们首先给' cmap '参数一个随机字符串，并尝试运行代码，如下所示:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="d635" class="lw lx in ls b gy ly lz l ma mb">sns.heatmap(my_corr_mat, cmap='abc')</span></pre><p id="ec9a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们向下滚动查看错误消息时，我们注意到 Seaborn 为我们提供了一个可用于“cmap”参数的选项列表，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mf"><img src="../Images/49b8da74a43cbd0536dab3a4ff5af944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rxxWjthv9uEGz2uqzar9cw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="dcf8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在可以从不同的选项中选择并重新运行代码。例如，我使用等离子选项，如下所示:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="55dd" class="lw lx in ls b gy ly lz l ma mb">sns.heatmap(my_corr_mat, cmap='plasma')</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mg"><img src="../Images/fc661ad6a68f0d249bdadf8e371e640f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bZXk5mdGrJsO3qL2ujnHMA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="9960" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有时生成的热图比输出中预期的要小。这可能是由于各种原因，最常见的是数据中的大量数字列迫使 seaborn 将所有列放在同一个空间中。<br/>为了改变这种情况，我们可以使用 matplotlib 在更大的表面上绘制热图，如下所示:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="8cf6" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, cmap='plasma')</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mh"><img src="../Images/97f47cf8196c80f22a948c18b457b836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pFkztXvCakQgvfClb6U1Lg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="a303" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一些分析师希望看到没有说明内存位置的图表。</p><p id="b8e5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要达到以上目的，我们有两种方法:</p><ol class=""><li id="ca0b" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">我们可以在热图函数后使用分号。</li><li id="9c1e" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">我们可以使用 matplotlib 的 show 函数。</li></ol><p id="a93f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第一种方法的输出如下:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="9b1a" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, cmap='plasma');</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mi"><img src="../Images/6b33f43440991049957ba900820a724a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LGWPTim_YH5P2-GShtW8Pw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="38f5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">同样，第二种方法的输出如下:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="fa18" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, cmap='plasma')<br/>plt.show()</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/d5ff8e97d3ea68f8b6e1686d24dcac9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rV9tMsojl3Zu1Xx66R3lmw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="919d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们有“vmin”和“vmax”参数，它们是图中显示的最小值和最大值。这些有时被称为锚。</p><p id="75fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设我们要查看 0.8 到 1 范围内的单元格。我们可以将这些值设置为如下所示的参数:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="bdb5" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, cmap='plasma', vmin=0.8, vmax=1);</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/6b757c3e9f5dbd9bfe17642ad65f1ccc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OssLsr2Hedn9WyZJN8Wt9A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="12bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们观察到 Seaborn 只对满足上述参数的细胞着色。</p><p id="d781" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，让我们讨论中心参数。</p><p id="1780" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们观察生成的热图，我们会注意到 Seaborn 已经根据提供的值自动选择了图例。</p><p id="3962" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当绘制不同的数据时，我们希望根据我们选择的特定值将彩色地图居中，我们使用 centre 参数。</p><p id="f067" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们看看这是怎么回事，取前面的图，取中心为 0.8:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="6236" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, cmap='plasma', center=0.8, vmin=0.8, vmax=1);</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/9b01c439ef067ea5faaf947a515f8af1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8To9Ajh1uh8hbP1EdjvGg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="4e02" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们有' annot '参数，它是 annotation 的缩写。</p><p id="106e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们想要查看热图上的颜色和数量时，需要' annot '参数。</p><p id="726a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们使用最初绘制的简单热图，并对其应用注释。</p><p id="0302" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以通过以下方式实现这一点:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="1198" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, annot=True);</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/4d6b8feff53cd2b7ee61eddadd2e469a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3n8FaK8u1bBxQmbXyOgvRw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="4e3d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在可以立即查看我们有兴趣分析的任何特定值。</p><p id="4580" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们有“fmt”参数，这是格式化的缩写。</p><p id="319c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有时我们希望在注释中看到一定数量的小数。为此，我们需要格式化参数。</p><p id="9697" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将把小数位数格式化为 3，而不是 2。我们通过以下方式实现这一目标:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="7e6b" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, annot=True, fmt='.3f');</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/7ccedea9c76c0b33dbf4f1fd93ccf421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yks7tQjMZR1ghjR_Evh9ow.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="9239" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以使用. 3f 值作为格式参数，我们告诉 Seaborn 为我们提供三位小数。</p><p id="03ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们有线条宽度和线条颜色参数。</p><p id="1b99" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">线条宽度和颜色定义了热图中值之间的线条。</p><p id="8ed1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，假设我们希望线条宽度为三个单位，颜色为红色，而颜色贴图为岩浆色。</p><p id="c291" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该设置为我们提供了如下图:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="7b6b" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, annot=True, linewidths=3, linecolor='red', cmap='magma');</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/e50f33f5e7158390c940338c7d52a170.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WngW0R1tHsBmyBtWtpVO8w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="fb2f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们有用于显示热图图例的 cbar 参数。默认情况下，它为 true，但可以更改为 false 以从绘图中丢弃图例。</p><p id="9c14" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以下示例向我们展示了一个没有图例的热图:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="f5eb" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, annot=True, cbar=False);</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/6c98b7b72e27aae0935fed2eb079d86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nowkTbxITce4PQ2wBaG20w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="98a5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们有 square 参数，它以正方形格式给出了热图。</p><p id="44eb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面的例子说明了这一点:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="fc98" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, annot=True, square=True);</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/54de2ef449008197b409255cebde97e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lQfC1_g5kChMvO2nnTW0OA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="50a1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我们有一个掩膜参数，用于覆盖或掩膜热图的上半部分。</p><p id="e7a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们观察热图，我们会发现我们可以把它分成对角线两边的两个三角形。</p><p id="e004" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以在相关矩阵上使用 NumPy 的“triu”方法来实现这一点。</p><p id="1dd1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以下示例说明了这一点:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="3b1d" class="lw lx in ls b gy ly lz l ma mb">plt.figure(figsize=(12,6))<br/>sns.heatmap(my_corr_mat, annot=True, mask=np.triu(my_corr_mat));</span></pre><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/6899d632f5f85f37d003b6b59f26bd20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wIL_Ku3YiK4sB1EPLIbJXQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">作者图片</figcaption></figure><p id="e8ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下次见！</p></div></div>    
</body>
</html>