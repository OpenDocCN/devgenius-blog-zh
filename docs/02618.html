<html>
<head>
<title>How to Setup a Multistore in Magento 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Magento 2中设置多商店</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-to-setup-a-multistore-in-magento-2-1393a6fcae88?source=collection_archive---------4-----------------------#2020-08-16">https://blog.devgenius.io/how-to-setup-a-multistore-in-magento-2-1393a6fcae88?source=collection_archive---------4-----------------------#2020-08-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/795525eed5989a621013656c7ccef6ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uu_GUMuNIeJnsSvyzBRMow.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated"><em class="jz">照片由</em> <a class="ae ka" href="https://unsplash.com/@morningbrew?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <em class="jz">晨沏</em> </a> <em class="jz">上</em> <a class="ae ka" href="https://unsplash.com/s/photos/storefronts?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> <em class="jz">下</em> </a></figcaption></figure><p id="be61" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">在Magento中可以配置多个实例。</p><p id="e08a" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">每个实例可以包含不同的属性，包括语言、域名、类别、产品、货币等等。</p><p id="90b2" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">Magento安装可以有多个网站，这些网站有多个商店或商店视图。</p><h1 id="d7de" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Magento 2多商店层级</h1><p id="bcb7" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated"><strong class="kd io">全局:</strong>在层次结构的顶端。这是你安装Magento后得到的结果。这包括所有默认配置。</p><p id="a6c7" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io">网站:</strong> Magento安装从一个网站开始，默认情况下，这个网站称为主网站。您也可以为一次安装设置多个网站，每个网站都有自己的IP地址和域。</p><p id="1bbd" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io">商店:</strong>一个网站可以有多个商店，每个商店都有自己的主菜单。商店共享相同的产品目录，但可以选择不同的产品和设计。同一网站下的所有商店共享相同的管理和结帐。</p><p id="f281" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><strong class="kd io">商店视图:</strong>每个可供顾客使用的商店都是根据特定的视图呈现的。最初，商店只有一个默认视图。可以添加额外的商店视图来支持不同的语言，或者用于其他目的。客户可以使用标题中的语言选择器来更改商店视图</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/17eaea6abb9f4266b97c0cd4f8d2442c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PBbjfvAOBKCDa20pQ_RLyw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Magento 2多商店图</figcaption></figure><h1 id="fd25" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">步骤1:如何创建多商店</h1><p id="9ddf" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">在我们建立了Magento商店之后，我们可以以管理员的身份登录我们的商店。如果您还没有管理员帐户，您可以创建一个，如下所示:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="86a2" class="mm la in mi b gy mn mo l mp mq">bin/magento admin:user:create</span></pre><p id="8e56" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">举个例子，我们来看一个卖运动饮料的网站，如上图所示。</p><p id="6e43" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">进入商店-&gt;设置-&gt;所有商店。</p><h2 id="2c19" class="mm la in bd lb mr ms dn lf mt mu dp lj km mv mw ln kq mx my lr ku mz na lv nb bi translated">创建新网站</h2><p id="9b97" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">点击创建网站并输入以下内容:</p><ol class=""><li id="e497" class="nc nd in kd b ke kf ki kj km ne kq nf ku ng ky nh ni nj nk bi translated">您网站的名称</li><li id="4774" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">您商店的唯一代码</li><li id="1d1c" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">排序是可选的，默认为0，现在让我们看看它是怎样的。</li></ol><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/bb7fca39ec38ae747d632af232da0a07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3U5PNC9REadH6GZ1JAXZdQ.png"/></div></div></figure><h2 id="4bc3" class="mm la in bd lb mr ms dn lf mt mu dp lj km mv mw ln kq mx my lr ku mz na lv nb bi translated">创建新商店</h2><p id="8c8e" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">单击“创建商店”并输入以下信息:</p><ol class=""><li id="5817" class="nc nd in kd b ke kf ki kj km ne kq nf ku ng ky nh ni nj nk bi translated">选择网站</li><li id="9028" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">你的商店名称</li><li id="c61d" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">您商店的唯一代码</li><li id="c7aa" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">根类别，默认为默认</li></ol><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/3c715a3523d19593f2e72126c095a320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-TjSkoYfpZXfzNjKTYSu7w.png"/></div></div></figure><h2 id="f9a6" class="mm la in bd lb mr ms dn lf mt mu dp lj km mv mw ln kq mx my lr ku mz na lv nb bi translated">创建新的商店视图</h2><p id="673a" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">单击“创建商店”并输入以下信息:</p><ol class=""><li id="6516" class="nc nd in kd b ke kf ki kj km ne kq nf ku ng ky nh ni nj nk bi translated">选择商店</li><li id="d35f" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">您的商店视图的名称</li><li id="6037" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">您商店的唯一代码</li><li id="f0c5" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">状态已启用(不言自明)</li><li id="9e3c" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">排序是可选的，默认为0，现在让我们看看它是怎样的。</li></ol><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/4e2bad32a064065556d21f80c3b3f4ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSSlTAZzNa_m_Pt503mAow.png"/></div></div></figure><p id="1817" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">这是我们的结果</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/71aa506252f9e761fa764ff2e3226a9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qWjXVoONwBPI4djlRxl-sg.png"/></div></div></figure><h1 id="7dfd" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">方法1:从管理员配置基本URL</h1><p id="d349" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">接下来，我们需要在商店&gt;设置&gt;配置&gt;常规&gt;网络中设置我们的基本url。</p><ol class=""><li id="d940" class="nc nd in kd b ke kf ki kj km ne kq nf ku ng ky nh ni nj nk bi translated">在页面顶部选择要设置基本url的商店视图。</li><li id="6549" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">完成以下字段</li><li id="6d2e" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">基本url:商店视图的基本URL。</li><li id="25fe" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">基本链接url:链接url的基本URL，通常与base url相同。</li><li id="c8c5" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">静态视图文件的基本URL(默认值):让我们默认</li><li id="3fc7" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">用户媒体文件的基本URL(默认值):输入媒体文件的URL。这通常是后面带有/ media /的baseurl。如果您使用的是CDN，url指向您的CDN。</li></ol><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nt"><img src="../Images/6568406ac2f545f8db66b746a98f8d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F7yiN64pgOqtvqN6ASHmKQ.png"/></div></div></figure><h1 id="6c1d" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">方法2:使用SSH配置基本URL</h1><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="8cf2" class="mm la in mi b gy mn mo l mp mq">bin/magento config:set web/unsecure/base_url "http://app.sportnutrition.test/" <strong class="mi io">\<br/></strong>    --scope=website <strong class="mi io">\<br/></strong>    --scope-code=sportnutrition <strong class="mi io">\<br/></strong>    -le<br/><br/>bin/magento config:set web/secure/base_url "https://app.sportdrinks-nl.test/" <strong class="mi io">\<br/></strong>    --scope=store <strong class="mi io">\<br/></strong>    --scope-code=sportdrinks_nl <strong class="mi io">\<br/></strong>    -le</span></pre><h1 id="611c" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">配置服务器以加载店面</h1><p id="96df" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">现在我们已经为Magento创建了一个新网站，我们需要将它添加到我们的项目中。确保您处于开发人员模式。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="63be" class="mm la in mi b gy mn mo l mp mq">bin/magento deploy:mode:set developer</span></pre><p id="369c" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">有几种方法可以做到这一点。</p><ul class=""><li id="5a56" class="nc nd in kd b ke kf ki kj km ne kq nf ku ng ky nu ni nj nk bi translated">将商店代码添加到您的基本URL，您不需要为此访问您的服务器。</li><li id="696a" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nu ni nj nk bi translated">用. htaccess和index.php创建一个子文件夹。</li><li id="136e" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nu ni nj nk bi translated">使用符号链接</li></ul><h1 id="204e" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">方法1:将商店代码添加到基本URL中。</h1><p id="5cfd" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">转到系统-&gt;设置-&gt;配置-&gt;常规-&gt; Web</p><ol class=""><li id="ea9f" class="nc nd in kd b ke kf ki kj km ne kq nf ku ng ky nh ni nj nk bi translated">打开URL选项部分:</li><li id="4389" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nh ni nj nk bi translated">根据需要，在添加商店代码中选择是。</li></ol><p id="deec" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">带商店代码的URL:</p><p id="c8ec" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated"><a class="ae ka" href="https://example.com/store-view/index.php/" rel="noopener ugc nofollow" target="_blank">https://example.com/store-view/index.php/</a></p><p id="a104" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">没有商店代码的URL:</p><p id="70a7" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">https://example.com/index.php/<a class="ae ka" href="https://example.com/index.php/" rel="noopener ugc nofollow" target="_blank"/></p><h1 id="9669" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">方法2:使用子文件夹创建多商店</h1><p id="c048" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">在项目的根目录下创建一个新文件夹，并复制粘贴。htaccess到您的新文件夹。</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="ce84" class="mm la in mi b gy mn mo l mp mq">mkdir -p &lt;new_site&gt; &amp;&amp; cp .htaccess &lt;new_site&gt;</span></pre><p id="b65e" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">然后创建一个index.php:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="512d" class="mm la in mi b gy mn mo l mp mq">&lt;?php<br/> <br/><strong class="mi io">require</strong> realpath(<strong class="mi io">__DIR__</strong>) . '/../app/bootstrap.php';<br/>$params = $_SERVER;</span><span id="6d1e" class="mm la in mi b gy nv mo l mp mq">$params[\Magento\Store\Model\StoreManager::PARAM_RUN_CODE] = '&lt;code&gt;';<br/>$params[\Magento\Store\Model\StoreManager::PARAM_RUN_TYPE] = '&lt;type&gt;';<br/>$bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $params);</span><span id="b95a" class="mm la in mi b gy nv mo l mp mq">$app = $bootstrap-&gt;createApplication('Magento\Framework\App\Http');<br/>$bootstrap-&gt;run($app);</span></pre><h1 id="1099" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">方法3:创建带符号链接的多商店</h1><p id="5be1" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">使用<em class="nw">ln-s&lt;target _ dir&gt;T5】创建一个符号链接。</em></p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="6cbb" class="mm la in mi b gy mn mo l mp mq">ln -s &lt;path_to_projet_root&gt;/app/ &lt;your_new_site&gt;app<br/>ln -s &lt;path_to_projet_root&gt;/lib/ &lt;your_new_site&gt;lib<br/>ln -s &lt;path_to_projet_root&gt;/pub/ &lt;your_new_site&gt;pub<br/>ln -s &lt;path_to_projet_root&gt;/var/ &lt;your_new_site&gt;var</span></pre><p id="6f3a" class="pw-post-body-paragraph kb kc in kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky ig bi translated">这些是在Magento 2中设置多商店的步骤，在我的下一篇博客中，我将解释如何用Docker和Warden在本地配置多商店。</p><h1 id="b073" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">觉得这个帖子有用吗？请点击👏下面的按钮！:)</h1><p id="26fb" class="pw-post-body-paragraph kb kc in kd b ke lx kg kh ki ly kk kl km lz ko kp kq ma ks kt ku mb kw kx ky ig bi translated">来源:</p><ul class=""><li id="8134" class="nc nd in kd b ke kf ki kj km ne kq nf ku ng ky nu ni nj nk bi translated"><a class="ae ka" href="https://docs.magento.com/user-guide/stores/websites-stores-views.html" rel="noopener ugc nofollow" target="_blank">网站、商店和视图</a></li><li id="7c73" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nu ni nj nk bi translated"><a class="ae ka" href="https://www.mageplaza.com/kb/how-to-configure-store-urls-magento-2.html" rel="noopener ugc nofollow" target="_blank">如何在Magento 2中配置商店网址</a></li><li id="f852" class="nc nd in kd b ke nl ki nm km nn kq no ku np ky nu ni nj nk bi translated"><a class="ae ka" href="https://magento.stackexchange.com/questions/107450/multi-store-with-multi-domain-and-sub-directory-setup-symlinks" rel="noopener ugc nofollow" target="_blank">具有多域和子目录设置的多商店—符号链接</a></li></ul></div></div>    
</body>
</html>