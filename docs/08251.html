<html>
<head>
<title>Learn to Dockerize Your Laravel and React.JS Application in Your Macbook Pro M1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学会整理你的文章并做出反应。JS 应用程序在你的 Macbook Pro M1</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/learn-to-dockerize-your-laravel-and-react-js-application-in-your-macbook-pro-m1-b70a1b3cca55?source=collection_archive---------4-----------------------#2022-05-30">https://blog.devgenius.io/learn-to-dockerize-your-laravel-and-react-js-application-in-your-macbook-pro-m1-b70a1b3cca55?source=collection_archive---------4-----------------------#2022-05-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3409aa95e122d5c2cb7218639ca504e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hhRa27UOhQ5pMotO"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">采用 M1 Pro 芯片的新款 Macbook Pro。<a class="ae jz" href="https://unsplash.com/@dlxmedia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> dlxmedia.hu </a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍照。</figcaption></figure><p id="63c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi ky translated">苹果公司最近几年发布了一项新技术，让许多人感到惊讶。在我看来，被称为 M1 的新集成芯片成功地以最佳的成本效益比提供了惊人的性能。但是一项新技术要达到成熟还需要一段时间。事情很简单:在这种环境下，没有多少应用程序是本地运行的。耶！，这个好消息也伴随着坏消息。但是苹果并没有放过我们，他们给了我们一个叫做<a class="ae jz" href="https://support.apple.com/en-us/HT211861" rel="noopener ugc nofollow" target="_blank"> Rosetta </a>的‘临时’解决方案。</p><h1 id="c165" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">用例架构</h1><p id="22db" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">我们将有两个应用程序，<a class="ae jz" href="https://medium.com/@uniqcode87/exploration-dashboard-application-using-metronic-react-highcharts-81c2bfdf5527" rel="noopener">一个后端用 laravel，一个前端用 React。Js </a>。后端 laravel 应用程序将访问 MySQL 数据库，该数据库也运行在 Docker 容器中。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mk"><img src="../Images/77afcec91963d3f64d3d1c14650458f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I2LYkHsgjhiLpNuYINJlcw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">用例架构图。</figcaption></figure><h1 id="2e7b" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">Docker 桌面安装</h1><p id="3d16" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">首先，让我们下载并安装苹果芯片 Docker dek stop<a class="ae jz" href="https://docs.docker.com/desktop/mac/install" rel="noopener ugc nofollow" target="_blank">。安装完成后，你可以在菜单栏中看到 Docker 桌面的新图标。</a></p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/ad6630f681c290234c291f72402fe4f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWxsGIzNltv_SSpaw5SeCw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">菜单栏中的 Docker 桌面图标。</figcaption></figure><h1 id="fcee" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">使用 Docker 设置您的 Laravel 应用程序</h1><p id="3cfd" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">在项目中创建两个文件，即 Dockerfile 和 docker-compose.yml。</p><figure class="ml mm mn mo gt jo"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Dockerfile。</figcaption></figure><ol class=""><li id="1d92" class="ms mt in kc b kd ke kh ki kl mu kp mv kt mw kx mx my mz na bi translated">我使用的图像是 php:7.2-apache。可以根据自己的要求进行调整。这里我使用 PHP 7.2 只是因为我想适应生产环境的配置。</li><li id="d02d" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">这个形象还是很基础的。我需要几个 PHP 扩展(库)，比如 MySQL 驱动。我需要的最后一件事是 Url 重写模块，以确保 Laravel 正常工作。</li></ol><figure class="ml mm mn mo gt jo"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">docker-compose.yml。</figcaption></figure><ol class=""><li id="dcad" class="ms mt in kc b kd ke kh ki kl mu kp mv kt mw kx mx my mz na bi translated">使用的图像已经在 Dockerfile 文件中提到。我们只确保这一行存在于我们的配置中:<code class="fe ng nh ni nj b">build: .</code>。</li><li id="ebbc" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">我给容器命名为<code class="fe ng nh ni nj b">web-dashboard-api </code>，并用端口<code class="fe ng nh ni nj b">82</code>发布 web。</li><li id="eba1" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">容器中的公共文件夹位于 html 文件夹中。所以我们需要将 public 文件夹映射到 html: <code class="fe ng nh ni nj b">‘./public:/var/www/html’</code>。它还需要另一部分，即位于超级文件夹中的源代码和库。所以我们需要映射当前文件夹:<code class="fe ng nh ni nj b">‘./:/var/www/’</code>。</li><li id="f2c2" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">最后，因为 MySQL 数据库也在容器中运行，所以我们需要在容器之间建立一个网桥。请注意这个部分的名称:<code class="fe ng nh ni nj b">ptpn-database_default</code>。</li></ol><p id="db0f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">安装依赖项并组合</strong></p><ol class=""><li id="19bf" class="ms mt in kc b kd ke kh ki kl mu kp mv kt mw kx mx my mz na bi translated">运行项目文件夹中的命令<code class="fe ng nh ni nj b">composer install</code>。</li><li id="3928" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">运行 docker compose: <code class="fe ng nh ni nj b">docker compose -f “docker-compose.yml” up -d --build</code>，然后在 docker 桌面的容器部分检查您的应用程序。</li></ol><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/5157caef840f8886f67cc215e3540b11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Y5FsQ_IIk65NnssmQhl9w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Docker 桌面的容器部分。</figcaption></figure><h1 id="c9df" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">设置您的反应。使用 Docker 的 JS 应用程序</h1><p id="c655" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">在项目中创建两个文件，即 Dockerfile 和 docker-compose.yml。</p><figure class="ml mm mn mo gt jo"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Dockerfile 文件</figcaption></figure><ol class=""><li id="7ccd" class="ms mt in kc b kd ke kh ki kl mu kp mv kt mw kx mx my mz na bi translated">我使用的图像是 node:16.5。我推荐你使用 LTS 版本的 node。我收到一堆最新版本的错误。</li><li id="6bb1" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">如果发现与 python 相关的错误，用<code class="fe ng nh ni nj b">apt-get</code>取消第二行和第三行的注释。</li><li id="536e" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">接下来，我们需要将所有文件复制到容器中并运行应用程序。</li></ol><figure class="ml mm mn mo gt jo"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">docker-compose.yml。</figcaption></figure><ol class=""><li id="d3d4" class="ms mt in kc b kd ke kh ki kl mu kp mv kt mw kx mx my mz na bi translated">使用的图像已经在 Dockerfile 文件中提到。我们只确保这一行存在于我们的配置中:<code class="fe ng nh ni nj b">build: .</code>。</li><li id="735e" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">我给容器命名为<code class="fe ng nh ni nj b">web-dashboard-reactjs </code>，并用端口<code class="fe ng nh ni nj b">3000</code>发布 web。</li></ol><p id="25fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">安装依赖项并组合</strong></p><ol class=""><li id="86dd" class="ms mt in kc b kd ke kh ki kl mu kp mv kt mw kx mx my mz na bi translated">我没有使用 Rosetta，也不打算使用它。我因此得到了很多错误，比如:<code class="fe ng nh ni nj b"><a class="ae jz" href="https://github.com/sass/node-sass/issues/3033" rel="noopener ugc nofollow" target="_blank">Error: Node Sass does not yet support your current environment: OS X Unsupported architecture (arm64) with Unsupported runtime (88) For more information on which environments are supported please see.</a></code></li><li id="d591" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">变通解决方法:(a)在本地，确保您使用的是 LTS 版本的 node(b)运行该命令<code class="fe ng nh ni nj b">npm install node-sass@npm:sass</code>。</li><li id="a155" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">在项目文件夹中运行这些命令<code class="fe ng nh ni nj b">rm -R node_modules</code>和<code class="fe ng nh ni nj b">composer install</code>。</li><li id="79b3" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">运行 docker compose: <code class="fe ng nh ni nj b">docker compose -f “docker-compose.yml” up -d --build</code>，然后在 docker 桌面的 containers 部分检查您的应用程序。</li></ol><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/b9dd5e4661320d9748c8a37d9e3a7b19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tVyuXa2HBOvdcSQcfJJKww.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">Docker 桌面的容器部分。</figcaption></figure><h1 id="1a30" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">结论</h1><ol class=""><li id="3765" class="ms mt in kc b kd mf kh mg kl nl kp nm kt nn kx mx my mz na bi translated">使用 Docker 构建应用程序使许多事情变得简单，我们可以设置 Laravel 和 React。用 Docker 桌面轻松 JS。</li><li id="73cb" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">我们可以部署反应部队。JS 应用程序到 Macbook Pro M1 的一个容器中，而不使用 Rosetta。</li><li id="b5aa" class="ms mt in kc b kd nb kh nc kl nd kp ne kt nf kx mx my mz na bi translated">苹果的硅芯片速度很快，但也有一些缺点。作为一名程序员，确保我们在购买这台漂亮的电脑之前考虑一切。</li></ol></div></div>    
</body>
</html>