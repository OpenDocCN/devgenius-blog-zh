<html>
<head>
<title>Understand Lucene To Understand ElasticSearch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Lucene了解ElasticSearch</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/understand-lucene-to-understand-elasticsearch-85037d5b7577?source=collection_archive---------0-----------------------#2020-06-19">https://blog.devgenius.io/understand-lucene-to-understand-elasticsearch-85037d5b7577?source=collection_archive---------0-----------------------#2020-06-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1981" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们看看Elasticsearch的核心</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/75eaa6aa816fa13f57bd26145cc67602.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ghfdYSUCsNdWSHpLEHu1oQ.jpeg"/></div></div></figure><p id="0a2a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文的目的是促进对ElasticSearch内部工作方式的更好理解。如果你正在阅读这篇文章，你可能已经知道ElasticSearch是如何工作的，如果不是这样，你可以通过阅读下面的文章了解更多:</p><div class="ln lo gp gr lp lq"><a href="https://medium.com/@antunesleo/what-is-elasticsearch-and-why-you-should-try-it-f23585eaced8" rel="noopener follow" target="_blank"><div class="lr ab fo"><div class="ls ab lt cl cj lu"><h2 class="bd ir gy z fp lv fr fs lw fu fw ip bi translated">什么是弹性搜索，为什么你应该尝试它</h2><div class="lx l"><h3 class="bd b gy z fp lv fr fs lw fu fw dk translated">这篇文章的想法是根据我的个人经历带来一个弹性研究的愿景。</h3></div><div class="ly l"><p class="bd b dl z fp lv fr fs lw fu fw dk translated">medium.com</p></div></div><div class="lz l"><div class="ma l mb mc md lz me kp lq"/></div></div></a></div><p id="dfe0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> Lucene。</strong></p><p id="96ab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Lucene是ElasticSearch的基础，但你不会直接与他互动，就像你开车一样，但你不会直接要求你的引擎启动。但是如果你的车坏了怎么办，你不认为了解你的发动机是如何工作的是个好主意吗？</p><blockquote class="mf mg mh"><p id="a790" class="kr ks mi kt b ku kv jr kw kx ky ju kz mj lb lc ld mk lf lg lh ml lj lk ll lm ij bi translated"><strong class="kt ir"> Lucene索引</strong></p></blockquote><p id="683e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你有大量的文件，你需要找到一个特定的文件，其中包含某个单词，如何快速做到这一点？如何做到可扩展？这就是索引的用武之地:要快速搜索大量文本，首先必须对文本进行索引，并将其转换成可以快速搜索的格式。这个转换过程称为索引，其输出称为索引。</p><blockquote class="mf mg mh"><p id="7bb8" class="kr ks mi kt b ku kv jr kw kx ky ju kz mj lb lc ld mk lf lg lh ml lj lk ll lm ij bi translated"><strong class="kt ir"> Lucene指数。</strong></p></blockquote><p id="49cc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">索引由一个或多个段组成，每个段又由几个索引组成，混淆了吧？当它被创建时，它被分成更小的片段，或者你可以把它看作子索引，其中每个索引不是完全独立的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/abda33eab8ec6de6ffcd00748c46bcfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*skPS_L2Vq4dUIiip1yemKA.jpeg"/></div></figure><blockquote class="mf mg mh"><p id="7f96" class="kr ks mi kt b ku kv jr kw kx ky ju kz mj lb lc ld mk lf lg lh ml lj lk ll lm ij bi translated"><strong class="kt ir"> Lucene段。</strong></p></blockquote><p id="36ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">段是不可变的。每个片段包含一个或多个Lucene文档<br/>在您的ES之旅中的某个时刻，您可能会遇到不得不删除文档的情况。显然这没有问题，但是幕后发生了什么？<br/>当您删除一个文档时，它仅被“标记”为已删除，并且该文档的一个新版本被添加到该段。它的真正执行只是在更大的段“连接”发生时才不时地进行。<br/>与此同时，文档继续占用磁盘空间。</p><blockquote class="mf mg mh"><p id="cb10" class="kr ks mi kt b ku kv jr kw kx ky ju kz mj lb lc ld mk lf lg lh ml lj lk ll lm ij bi translated"><strong class="kt ir"> Lucene合并。</strong></p></blockquote><p id="c027" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">随着时间的推移，索引将累积许多段。周期性地，段被合并成单个新段，并移除旧段。</p><p id="5807" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，等等，合并我的细分市场有什么好处？</p><p id="66e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">基本上，因为两件重要的事情，丢弃旧的文件，结果减少了我们在磁盘上的索引空间，第二件是旧的片段被删除，一个新的更大的片段被创建，增加了你的搜索速度。</p><h1 id="8529" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">结论</h1><p id="17e6" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated">理解Lucene对于理解Elasticsearch是必不可少的，当然它们之间有所不同，但是概念和工作原理是相同的。这种概念在ElasticSearch文档中很难找到，因为它们为你抽象了所有这些工作。我希望我能解释一些关于Lucene核心的东西，来展示ElasticSearch是如何真正工作的。</p><h1 id="e5e4" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">参考和启发:</h1><p id="252d" class="pw-post-body-paragraph kr ks iq kt b ku nf jr kw kx ng ju kz la nh lc ld le ni lg lh li nj lk ll lm ij bi translated"><a class="ae nk" href="https://www.manning.com/books/lucene-in-action-second-edition" rel="noopener ugc nofollow" target="_blank">https://www . manning . com/books/Lucene-in-action-second-edition</a></p></div></div>    
</body>
</html>