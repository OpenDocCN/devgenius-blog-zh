<html>
<head>
<title>Make Form Handling Easy in React Apps with Formik — Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Formik-Hooks在React应用程序中轻松处理表单</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/make-form-handling-easy-in-react-apps-with-formik-hooks-544980da0cea?source=collection_archive---------2-----------------------#2021-04-21">https://blog.devgenius.io/make-form-handling-easy-in-react-apps-with-formik-hooks-544980da0cea?source=collection_archive---------2-----------------------#2021-04-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f4eff82253458071407010e097ea70e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uFpSGADRSj_NkQQQ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated"><a class="ae kc" href="https://unsplash.com/@hunterjamesphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">猎人詹姆斯</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="7884" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Formik是一个使React应用程序中的表单处理变得简单的库。</p><p id="6bcb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Formik处理表单输入</p><h1 id="e6f1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用字段</h1><p id="dc66" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">useField</code>钩子来创建自己的文本字段，用于Formik。</p><p id="d580" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3c48" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useField, Form, Formik } from "formik";</span><span id="10bb" class="mq lc iq mh b gy mv ms l mt mu">const MyTextField = ({ label, ...props }) =&gt; {<br/>  const [field, meta] = useField(props);<br/>  return (<br/>    &lt;&gt;<br/>      &lt;label&gt;<br/>        {label}<br/>        &lt;input {...field} {...props} /&gt;<br/>      &lt;/label&gt;<br/>      {meta.touched &amp;&amp; meta.error ? (<br/>        &lt;div className="error"&gt;{meta.error}&lt;/div&gt;<br/>      ) : null}<br/>    &lt;/&gt;<br/>  );<br/>};</span><span id="7997" class="mq lc iq mh b gy mv ms l mt mu">export const FormExample = () =&gt; (<br/>  &lt;div&gt;<br/>    &lt;Formik<br/>      initialValues={{<br/>        email: ""<br/>      }}<br/>      onSubmit={(values, actions) =&gt; {<br/>        setTimeout(() =&gt; {<br/>          alert(JSON.stringify(values, null, 2));<br/>          actions.setSubmitting(false);<br/>        }, 1000);<br/>      }}<br/>    &gt;<br/>      {(props) =&gt; (<br/>        &lt;Form&gt;<br/>          &lt;MyTextField name="email" type="email" label="Email" /&gt;<br/>          &lt;button type="submit"&gt;Submit&lt;/button&gt;<br/>        &lt;/Form&gt;<br/>      )}<br/>    &lt;/Formik&gt;<br/>  &lt;/div&gt;<br/>);<br/>export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;FormExample /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="7c98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">useField</code>钩子创建了<code class="fe me mf mg mh b">MyTextField</code>组件。</p><p id="ad3b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将道具和<code class="fe me mf mg mh b">field</code>对象作为道具传入输入，让Formik绑定到状态，并设置类似<code class="fe me mf mg mh b">touched</code>和<code class="fe me mf mg mh b">error</code>的输入状态。</p><p id="cb34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">FormExample</code>中，我们像往常一样用<code class="fe me mf mg mh b">Formik</code>和<code class="fe me mf mg mh b">Form</code>组件创建表单。</p><p id="4cfd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是我们使用<code class="fe me mf mg mh b">MyTextField</code>组件将输入字段添加到表单中。</p><h1 id="eda7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Formik</h1><p id="85f8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">useFormik</code>钩子来创建Formik表单。</p><p id="1a62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0ec6" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { useFormik } from "formik";</span><span id="3675" class="mq lc iq mh b gy mv ms l mt mu">export const FormExample = () =&gt; {<br/>  const formik = useFormik({<br/>    initialValues: {<br/>      firstName: "",<br/>      lastName: "",<br/>      email: ""<br/>    },<br/>    onSubmit: (values) =&gt; {<br/>      alert(JSON.stringify(values, null, 2));<br/>    }<br/>  });<br/>  return (<br/>    &lt;form onSubmit={formik.handleSubmit}&gt;<br/>      &lt;label htmlFor="firstName"&gt;First Name&lt;/label&gt;<br/>      &lt;input<br/>        id="firstName"<br/>        name="firstName"<br/>        type="text"<br/>        onChange={formik.handleChange}<br/>        value={formik.values.firstName}<br/>      /&gt;<br/>      &lt;label htmlFor="lastName"&gt;Last Name&lt;/label&gt;<br/>      &lt;input<br/>        id="lastName"<br/>        name="lastName"<br/>        type="text"<br/>        onChange={formik.handleChange}<br/>        value={formik.values.lastName}<br/>      /&gt;<br/>      &lt;label htmlFor="email"&gt;Email Address&lt;/label&gt;<br/>      &lt;input<br/>        id="email"<br/>        name="email"<br/>        type="email"<br/>        onChange={formik.handleChange}<br/>        value={formik.values.email}<br/>      /&gt;<br/>      &lt;button type="submit"&gt;Submit&lt;/button&gt;<br/>    &lt;/form&gt;<br/>  );<br/>};</span><span id="b78d" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;FormExample /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="3b62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">useFormik</code>添加到<code class="fe me mf mg mh b">FormExample</code>中，让我们用Formik创建一个表单。</p><p id="5abe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过里面的<code class="fe me mf mg mh b">initialValues</code>来设置初始值。</p><p id="4c00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">onSubmit</code>有表单的提交处理程序。</p><p id="5998" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以从<code class="fe me mf mg mh b">formik</code>对象中获取属性。</p><p id="eb9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这包括设置为<code class="fe me mf mg mh b">formik.handleSubmit</code>的<code class="fe me mf mg mh b">onSubmit</code>回调。</p><p id="34ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">formik.handleChange</code>是表单字段的变更处理程序。</p><p id="060f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">form.values</code>具有表单值。</p><h1 id="96b2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">useFormikContext</h1><p id="2935" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">useFormikContext</code>钩子让我们从表单内部的组件访问表单。</p><p id="1b84" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="47ad" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { Field, Form, Formik, useFormikContext } from "formik";</span><span id="4729" class="mq lc iq mh b gy mv ms l mt mu">const AutoSubmitToken = () =&gt; {<br/>  const { values, submitForm } = useFormikContext();<br/>  React.useEffect(() =&gt; {<br/>    if (values.token.length === 6) {<br/>      submitForm();<br/>    }<br/>  }, [values, submitForm]);<br/>  return null;<br/>};</span><span id="2ac9" class="mq lc iq mh b gy mv ms l mt mu">export const FormExample = () =&gt; {<br/>  return (<br/>    &lt;Formik<br/>      initialValues={{ token: "" }}<br/>      validate={(values) =&gt; {<br/>        const errors = {};<br/>        if (values.token.length &lt; 5) {<br/>          errors.token = "Invalid code. Too short.";<br/>        }<br/>        return errors;<br/>      }}<br/>      onSubmit={(values, actions) =&gt; {<br/>        setTimeout(() =&gt; {<br/>          alert(JSON.stringify(values, null, 2));<br/>          actions.setSubmitting(false);<br/>        }, 1000);<br/>      }}<br/>    &gt;<br/>      &lt;Form&gt;<br/>        &lt;Field name="token" type="tel" /&gt;<br/>        &lt;AutoSubmitToken /&gt;<br/>      &lt;/Form&gt;<br/>    &lt;/Formik&gt;<br/>  );<br/>};</span><span id="3669" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;FormExample /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="6eb6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有带有表单值的属性<code class="fe me mf mg mh b">values</code>的<code class="fe me mf mg mh b">AutoSubmitToken</code>组件。</p><p id="75fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">submitForm</code>具有表单提交功能。</p><p id="e939" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">返回具有所有这些属性的对象。</p><p id="e1b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">FormExample</code>有创建表单的常用道具和组件，自动提交表单的<code class="fe me mf mg mh b">AutoSubmitToken</code>组件<code class="fe me mf mg mh b">values.token.length</code>大于或等于6。</p><h1 id="d0e4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="b825" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Formik自带的钩子来创建表单。</p></div></div>    
</body>
</html>