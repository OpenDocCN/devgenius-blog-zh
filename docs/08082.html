<html>
<head>
<title>Deploy a React App to Amazon S3 using Github Actions And Bitbucket Pipelines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用 Github 操作和 Bitbucket 管道将 React 应用程序部署到亚马逊 S3</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/deploy-a-react-app-to-amazon-s3-using-github-actions-and-bitbucket-pipelines-74791ae10a7c?source=collection_archive---------2-----------------------#2022-05-16">https://blog.devgenius.io/deploy-a-react-app-to-amazon-s3-using-github-actions-and-bitbucket-pipelines-74791ae10a7c?source=collection_archive---------2-----------------------#2022-05-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1980" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">本演练是一个简单的分步指南，介绍如何使用 Github 操作或 Bitbucket 管道将 React Web 应用程序部署到亚马逊 S3</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/469cdf054b9c4d86c5b9212b4512726e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fkjBaBgK2ubwCh-RK47WaA.png"/></div></div></figure><h1 id="da69" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">亚马逊简单存储服务(S3)？</h1><p id="006b" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">亚马逊简单存储服务(S3)是亚马逊网络服务(AWS)提供的众多服务之一，AWS 是一个按需云计算平台。亚马逊 S3 通过一个 web 服务接口提供可伸缩的对象存储，该接口用于在任何时间从 web 上的任何地方存储和检索任何数量的数据。</p><h1 id="4ac2" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">Github Actions？</h1><p id="41e8" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">当使用 Github 时，GitHub Actions 可以轻松地自动化您的工作流，如构建、测试和部署，GitHub 是一个使用 Git 为软件开发版本控制提供托管的平台。</p><p id="cb9c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇文章中，我们将介绍:</p><ol class=""><li id="ba9c" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh mc md me mf bi translated">如何创建一个亚马逊 S3 桶？</li><li id="c90c" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">如何建立一个虚拟主机 S3 桶？</li><li id="5bb2" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">如何配置我们的 Github 动作来自动将变更部署到 S3 存储桶。最后部署一个 React App 来直播。</li></ol><p id="ca48" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们开始之前，您需要:</p><ol class=""><li id="de4b" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh mc md me mf bi translated">Github 帐户</li><li id="4fb9" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">比特桶帐户</li><li id="1881" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">AWS 帐户</li></ol><h1 id="5e74" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">创建亚马逊 S3 桶</h1><p id="84f6" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">首先，登录您的 AWS 帐户。在 AWS 管理控制台上，从<code class="fe ml mm mn mo b">Storage</code>部分下的服务列表中单击<code class="fe ml mm mn mo b">S3</code>或使用搜索栏。</p><p id="b5ef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<code class="fe ml mm mn mo b">Amazon S3</code>页面上，点击<code class="fe ml mm mn mo b">Create Bucket</code></p><p id="d87d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要创建一个桶，提供一个<code class="fe ml mm mn mo b">Bucket Name</code>。在亚马逊 S3 的所有桶中，桶名必须是唯一的。另外，记下您正在创建的 bucket 所在的<code class="fe ml mm mn mo b">Region</code>。对于这篇文章，我们使用的是<code class="fe ml mm mn mo b">Asai Pacific(Tokyo)</code>，也就是<code class="fe ml mm mn mo b">ap-northeast-1</code></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/d74c05cedad3bd15f23d2f932f06584d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g8Dhfh790CKhsR06ZtQHSQ.png"/></div></div></figure><p id="c8a2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">取消勾选<code class="fe ml mm mn mo b">Block all public access</code>的复选框。之后，点击<code class="fe ml mm mn mo b">Create bucket</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/19910973b56af4193a9d040f5dc3ac54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3YXvOiz9YErUgG3RWP3Z0w.png"/></div></div></figure><h2 id="7063" class="mq kv in bd kw mr ms dn la mt mu dp le jv mv mw li jz mx my lm kd mz na lq nb bi translated">添加存储桶策略</h2><p id="7da6" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">这使得您的存储桶的内容可以公开。当使用<code class="fe ml mm mn mo b">S3</code>铲斗时，不建议采取此动作，但对于我们的目的来说，这是可以的。</p><p id="3653" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 Buckets 下，选择您的 bucket 的名称<code class="fe ml mm mn mo b">(react-deploy-ci-cd)</code> &gt;选择<code class="fe ml mm mn mo b">Permissions</code> &gt;选择<code class="fe ml mm mn mo b">Bucket Policy</code>。</p><p id="4206" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">复制以下存储桶策略，并将其粘贴到编辑器中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="e1af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更新代码片段以包含您的存储桶名称。在存储桶策略中，<code class="fe ml mm mn mo b">&lt;bucket-name&gt;</code>您必须更新此名称以匹配您的存储桶名称。<br/>然后，点击<code class="fe ml mm mn mo b">Save changes</code></p><h2 id="3968" class="mq kv in bd kw mr ms dn la mt mu dp le jv mv mw li jz mx my lm kd mz na lq nb bi translated">启用静态网站托管</h2><p id="d3c4" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">选择<code class="fe ml mm mn mo b">Properties</code> &gt;选择<code class="fe ml mm mn mo b">Static website hosting</code>。点击编辑并启用静态网站托管。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/8dbbfdfa0cc4ad60bb7fe1e7f4ad0a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iUYkwP73WahTUjPl_80CGg.png"/></div></div></figure><p id="b9e9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在静态网站托管中选择启用并在<code class="fe ml mm mn mo b">Index document</code>字段中输入<code class="fe ml mm mn mo b">index.html</code>和<code class="fe ml mm mn mo b">Save changes</code>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/295fe6f831dba00223173aef09280a81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cbwy6FF6MCs81HFt1TeqQw.png"/></div></div></figure><p id="e123" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注意:记下端点 URL，我们的网站将可在使用此 URL 的浏览器中访问。</strong></p><h2 id="fda8" class="mq kv in bd kw mr ms dn la mt mu dp le jv mv mw li jz mx my lm kd mz na lq nb bi translated">创建 React 应用并将其推送到 GitHub 和 Bitbucket</h2><p id="5dab" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">现在我们有了我们的 S3 桶，是时候创建并把我们的 React 应用程序推送到 GitHub 了。</p><ul class=""><li id="8102" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh ne md me mf bi translated">在 GitHub 上创建一个<code class="fe ml mm mn mo b">New Repository</code>。</li><li id="7687" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated">在 Bitbucket 上创建一个<code class="fe ml mm mn mo b">New Repository</code>。</li></ul><p id="6c8b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建存储库后，您可以:</p><ul class=""><li id="b4e1" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh ne md me mf bi translated">使用<a class="ae nf" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank"> Create React App </a>创建一个 React 应用程序，并确保在<code class="fe ml mm mn mo b">package.json</code>文件中有一个构建脚本将输出到<code class="fe ml mm mn mo b">dist</code>文件夹。<strong class="jm io">或</strong>克隆我们将在这篇文章中使用的样本 React 应用库<code class="fe ml mm mn mo b">S3-Github Actions React App</code>，并添加您的库的<code class="fe ml mm mn mo b">remote</code> URL。<a class="ae nf" href="https://github.com/kananinirav/react-pipeline" rel="noopener ugc nofollow" target="_blank"> GitHub 回购- S3-Github 行动反应 App </a></li></ul><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="9e59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了设置我们的工作流，我们需要在 other 中提供<code class="fe ml mm mn mo b">S3</code>桶的<code class="fe ml mm mn mo b">AWS_ACCESS_KEY_ID</code>和<code class="fe ml mm mn mo b">AWS_SECRET_ACCESS_KEY</code>和<code class="fe ml mm mn mo b">AWS_REGION</code>，以便成功连接到亚马逊 S3。</p><h2 id="3f79" class="mq kv in bd kw mr ms dn la mt mu dp le jv mv mw li jz mx my lm kd mz na lq nb bi translated">获得 AWS 授权</h2><p id="89b5" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">在 AWS 控制台上:</p><ol class=""><li id="3280" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh mc md me mf bi translated">点击<code class="fe ml mm mn mo b">IAM</code></li><li id="a723" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">点击<code class="fe ml mm mn mo b">Users</code>并选择您的首选用户。</li><li id="b5eb" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">在<code class="fe ml mm mn mo b">Security Credentials</code>下，点击<code class="fe ml mm mn mo b">Create Access Key</code>。这将创建一个<code class="fe ml mm mn mo b">AWS_ACCESS_KEY_ID</code>和<code class="fe ml mm mn mo b">AWS_SECRET_ACCESS_KEY</code>，复制这些值。您还可以通过删除或停用密钥来管理密钥访问。</li></ol><p id="a68c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">永远不要共享您的访问密钥。</p><p id="bc7b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是为什么我们会在 GitHub 上传递一些非常重要的值作为<code class="fe ml mm mn mo b">Secrets</code>，然后在工作流文件中使用表达式语法访问它们。<code class="fe ml mm mn mo b">${{ &lt;expression&gt; }}</code></p><h2 id="521e" class="mq kv in bd kw mr ms dn la mt mu dp le jv mv mw li jz mx my lm kd mz na lq nb bi translated">回到 Github</h2><p id="bdc5" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">点击<code class="fe ml mm mn mo b">Settings</code>标签，在左侧菜单中选择<code class="fe ml mm mn mo b">Secret</code>，然后点击<code class="fe ml mm mn mo b">New Secret</code>添加一个提供<code class="fe ml mm mn mo b">Name</code>和<code class="fe ml mm mn mo b">Value</code>的秘密。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/359c2a7508f4b2e003146bcebf3a45f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N2HogVvBkBGlhprBy9ivuw.png"/></div></div></figure><h1 id="d3c2" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">设置 Github 操作</h1><p id="53b2" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">现在，我们已经设置了<code class="fe ml mm mn mo b">S3</code> bucket 并部署了一个 React 应用程序。</p><p id="0071" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 GitHub 存储库上，点击<code class="fe ml mm mn mo b">Actions</code>选项卡打开 Github actions 页面。在<code class="fe ml mm mn mo b">Actions</code>页面上，点击<code class="fe ml mm mn mo b">set up a workflow yourself -&gt;</code>按钮，这将重定向到一个包含一些代码的 web 编辑器的新页面。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/dc63edf15393a6ad510a15cbfa1bed43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1HqrGdlecigmGsk7M7otw.png"/></div></div></figure><p id="90a3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我们命名工作流文件。您可以将文件名保留为<code class="fe ml mm mn mo b">main.yml</code>，但最好给它一个描述性的名称。将代码片段复制并粘贴到编辑器中。复制粘贴，一个开发者的超能力。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="5441" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们分解上面的代码片段。</p><ul class=""><li id="f54d" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh ne md me mf bi translated"><code class="fe ml mm mn mo b">name</code>:我们定义这个动作的名字。这将用于在您可能拥有的其他操作中识别操作。</li><li id="6311" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated"><code class="fe ml mm mn mo b">on</code>:我们用<code class="fe ml mm mn mo b">on</code> : <code class="fe ml mm mn mo b">push</code>定义触发器，也是分支。这个工作流将在您向<code class="fe ml mm mn mo b">master</code>分支<code class="fe ml mm mn mo b">push</code>编码的任何时候运行。</li><li id="c311" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated"><code class="fe ml mm mn mo b">jobs</code>:工作流运行由一个或多个作业组成，默认情况下它们并行运行。</li><li id="f65e" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated"><code class="fe ml mm mn mo b">steps</code>:作业包含一系列称为步骤的任务。步骤可以在您的存储库中运行命令、运行设置任务或运行操作，并且每个步骤都以<code class="fe ml mm mn mo b">uses:</code>或<code class="fe ml mm mn mo b">name:</code>开始。</li><li id="f23c" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated"><strong class="jm io"> actions/checkout@v3 </strong>:这个操作签出您的存储库，这样您的工作流就可以访问它。</li><li id="52e7" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated"><strong class="jm io">aws-Actions/configure-AWS-credentials @ v1</strong>:配置 AWS 凭证和区域环境变量，供其他 GitHub 操作使用。</li><li id="e1c1" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated"><strong class="jm io"> Build React App </strong>:这个步骤块安装节点包，运行<code class="fe ml mm mn mo b">package.json</code>文件中的<code class="fe ml mm mn mo b">build</code>，在根目录下创建一个<code class="fe ml mm mn mo b">build</code>文件夹。</li><li id="efde" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated"><strong class="jm io">将应用构建部署到 S3 存储桶</strong>:这将新创建的构建部署到<code class="fe ml mm mn mo b">S3</code>存储桶<code class="fe ml mm mn mo b">&lt;bucket-name&gt;</code>(用您的<code class="fe ml mm mn mo b">S3</code>存储桶的名称替换<code class="fe ml mm mn mo b">&lt;bucket-name&gt;</code>)。我的是<code class="fe ml mm mn mo b">react-deploy-ci-cd</code>)。</li></ul><p id="dc84" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要保存，点击<code class="fe ml mm mn mo b">Start Commit</code>，然后点击<code class="fe ml mm mn mo b">Commit New File</code>。这份遗嘱，</p><ul class=""><li id="756e" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh ne md me mf bi translated">保存动作，创建一个<code class="fe ml mm mn mo b">.github</code>目录，其中有一个<code class="fe ml mm mn mo b">workflows</code>目录，包含新文件<code class="fe ml mm mn mo b">main</code>(您之前使用的文件名)</li><li id="51fb" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh ne md me mf bi translated">触发动作。</li></ul><p id="8a69" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要检查进度，请点击<code class="fe ml mm mn mo b">Actions</code>选项卡。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/2baa2c1fe19fb67d80cb3937dfd3bfc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sal09_B4ob1lnE0WerTglA.png"/></div></div></figure><h1 id="87dd" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">设置位桶管道</h1><p id="7eb2" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">为您的存储库设置部署变量。</p><p id="b32a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 Bitbucket 存储库上，打开<strong class="jm io">存储库设置</strong>页面，单击<strong class="jm io">部署</strong>，根据您的环境创建变量，我们将在此处为生产环境创建变量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/f1fc374d80d78cd347083c471e4fd0aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7546dXlERCaU3gxYvlUwFg.png"/></div></div></figure><p id="8d4d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之后，对于 bitbucket 管道，添加名为 bitbucket-pipelines.yml 的新文件，并将代码片段复制并粘贴到文件中。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="3ac6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果使用 aws-cloudfront，那么取消对 yml 文件中最后一个管道的注释，并<strong class="jm io">删除 ACL: public-read </strong>。它将触发分发失效来刷新 CDN 缓存。</p><p id="045e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，两个操作都成功运行。耶！！🎊</p><p id="0e59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您现在可以检查您的<code class="fe ml mm mn mo b">S3</code> bucket，您会看到构建文件已经上传到其中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/7807c3a3c1e5f95354ccc3739394ded4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ySQmG_O60ZdH3CgaqtyNZA.png"/></div></div></figure><p id="15d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的网站现已上线！！！在浏览器上，转到我们在启用<code class="fe ml mm mn mo b">Static Website Hosting</code>时遇到的<code class="fe ml mm mn mo b">Endpoint</code> URL <code class="fe ml mm mn mo b">(http://&lt;s3-bucket&gt;.s3-website-&lt;s3-region&gt;.amazonaws.com)</code>。现在，您对 react 应用程序所做的任何更改都将构建并上传到您的<code class="fe ml mm mn mo b">S3</code> bucket，它将实时更新。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mp"><img src="../Images/0d5eebdcbac87049557ae3e70a1e1282.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mIkqK3yVP9gNYGIE3d9X0Q.png"/></div></div></figure><p id="6a4c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以继续使用 Github 或 Bitbucket 操作，方法是在<code class="fe ml mm mn mo b">Pull Request</code>上触发一个操作，该操作可能会运行一些 CI 测试，并在部署到您的<code class="fe ml mm mn mo b">S3.</code>之前执行几个步骤</p><p id="be5a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">如果本指南对您和您的团队有所帮助，请与他人分享！</strong></p><h2 id="4010" class="mq kv in bd kw mr ms dn la mt mu dp le jv mv mw li jz mx my lm kd mz na lq nb bi translated">关注我，了解我最新最有趣的文章。</h2></div></div>    
</body>
</html>