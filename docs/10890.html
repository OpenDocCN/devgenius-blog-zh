<html>
<head>
<title>Integrate Kubernetes Models into KCL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å°† Kubernetes æ¨¡å‹é›†æˆåˆ° KCL ä¸­</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.devgenius.io/integrate-kubernetes-models-into-kcl-bb2d562ad81a?source=collection_archive---------21-----------------------#2022-12-05">https://blog.devgenius.io/integrate-kubernetes-models-into-kcl-bb2d562ad81a?source=collection_archive---------21-----------------------#2022-12-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="0a79" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated"><strong class="ak">ä»€ä¹ˆæ˜¯ KCL </strong></h1><p id="b5de" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><a class="ae lg" href="https://github.com/KusionStack/KCLVM" rel="noopener ugc nofollow" target="_blank"> KCL (Kusion é…ç½®è¯­è¨€)</a>æ˜¯ä¸€ç§å¼€æºçš„åŸºäºçº¦æŸçš„è®°å½•å’Œå‡½æ•°è¯­è¨€ã€‚KCL é€šè¿‡æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€æŠ€æœ¯å’Œå®è·µï¼Œæ”¹è¿›å¤§é‡å¤æ‚é…ç½®çš„ç¼–å†™ï¼Œè‡´åŠ›äºå›´ç»•é…ç½®æ„å»ºæ›´å¥½çš„æ¨¡å—åŒ–ã€å¯æ‰©å±•æ€§å’Œç¨³å®šæ€§ï¼Œé€»è¾‘ç¼–å†™æ›´ç®€å•ï¼Œè‡ªåŠ¨åŒ–é€Ÿåº¦å¿«ï¼Œç”Ÿæ€æ‰©å±•æ€§å¥½ã€‚</p><p id="e4bb" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">æ›´å¤šå…³äº KCL çš„æ–‡ä»¶åœ¨ https://medium.com/p/f03ee820c7a4 çš„æœ€åä¸€ä¸ªåšå®¢<a class="ae lg" href="https://medium.com/p/f03ee820c7a4" rel="noopener">å’Œ KCL ç½‘ç«™</a><a class="ae lg" href="https://github.com/KusionStack/KCLVM" rel="noopener ugc nofollow" target="_blank">https://github.com/KusionStack/KCLVM</a></p><h1 id="6583" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">æ¥è‡ª Kubernetes</h1><h1 id="d65f" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">1.Kubernetes OpenAPI è§„èŒƒ<a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#1-kubernetes-openapi-spec" rel="noopener ugc nofollow" target="_blank"> </a></h1><p id="c97b" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">ä» Kubernetes 1.4 å¼€å§‹ï¼Œå¼•å…¥äº†å¯¹ OpenAPI è§„èŒƒçš„ alpha æ”¯æŒ(åœ¨æèµ ç»™ OpenAPI è®¡åˆ’ä¹‹å‰ç§°ä¸º Swagger 2.0)ï¼ŒAPI æè¿°éµå¾ª<a class="ae lg" href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md" rel="noopener ugc nofollow" target="_blank"> OpenAPI è§„èŒƒ 2.0 </a>ã€‚è€Œä¸”ä» Kubernetes 1.5 å¼€å§‹ï¼ŒKubernetes æ”¯æŒ<a class="ae lg" href="https://github.com/kubernetes/kube-openapi" rel="noopener ugc nofollow" target="_blank">ç›´æ¥ä»æºä»£ç ä¸­æå–æ¨¡å‹ï¼Œç„¶åç”Ÿæˆ OpenAPI è§„èŒƒæ–‡ä»¶</a>ï¼Œè‡ªåŠ¨ä¿æŒè§„èŒƒå’Œæ–‡æ¡£ä¸æ“ä½œå’Œæ¨¡å‹ä¿æŒæœ€æ–°ã€‚</p><p id="a27f" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">æ­¤å¤–ï¼ŒKubernetes CRD ä½¿ç”¨[open API v 3.0 validation](<a class="ae lg" href="https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/#validation" rel="noopener ugc nofollow" target="_blank">https://Kubernetes . io/docs/tasks/extend-Kubernetes/custom-resources/custom-resource-definitions/# validation</a>)æ¥æè¿°è‡ªå®šä¹‰æ¨¡å¼(é™¤äº†å†…ç½®å±æ€§ apiVersionã€Kind å’Œ metadata ä¹‹å¤–)ï¼ŒAPIServer ä½¿ç”¨è¯¥æ¨¡å¼åœ¨èµ„æºåˆ›å»ºå’Œæ›´æ–°é˜¶æ®µéªŒè¯ CRã€‚</p><h1 id="1ee0" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">2.KCL OpenAPI æ”¯æŒ<a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#2-kcl-openapi-support" rel="noopener ugc nofollow" target="_blank"> </a></h1><p id="5df3" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><code class="fe lm ln lo lp b">kcl-openapi</code>å·¥å…·æ”¯æŒä» Kubernetes OpenAPI/CRD ä¸­æå–å’Œç”Ÿæˆ KCL æ¨¡å¼ã€‚<a class="ae lg" href="https://kcl-lang.github.io/docs/tools/cli/openapi/spec" rel="noopener ugc nofollow" target="_blank"> KCL OpenAPI è§„èŒƒ</a>å®šä¹‰äº† OpenAPI è§„èŒƒå’Œ KCL è¯­è¨€ç‰¹æ€§ä¹‹é—´çš„æ˜ å°„ã€‚æœ‰å…³è¯¥å·¥å…·çš„å¿«é€Ÿå…¥é—¨ï¼Œè¯·å‚è§<a class="ae lg" href="https://kcl-lang.github.io/docs/tools/cli/openapi/" rel="noopener ugc nofollow" target="_blank"> KCL OpenAPI å·¥å…·</a></p><h1 id="da08" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">3.ä» Kubernetes è¿ç§»åˆ° KCL <a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#3-migrate-from-kubernetes-to-kcl" rel="noopener ugc nofollow" target="_blank"> </a></h1><p id="af02" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">Kubernetes å†…ç½®æ¨¡å‹çš„å®Œæ•´ OpenAPI å®šä¹‰å­˜å‚¨åœ¨<a class="ae lg" href="https://github.com/kubernetes/kubernetes/blob/master/api/openapi-spec/swagger.json" rel="noopener ugc nofollow" target="_blank"> Kubernetes OpenAPI-Spec æ–‡ä»¶</a>ä¸­ã€‚ä»¥è¿™ä¸ªæ–‡ä»¶ä½œä¸ºè¾“å…¥ï¼ŒKCL OpenAPI å·¥å…·å¯ä»¥ç”Ÿæˆç›¸åº”ç‰ˆæœ¬çš„æ‰€æœ‰æ¨¡å‹æ¨¡å¼ã€‚åœ¨æ¥ä¸‹æ¥çš„å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥ä¸€ä¸ªéƒ¨ç½²å‘å¸ƒåœºæ™¯ä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•ä» Kubernetes è¿ç§»åˆ° KCLã€‚å‡è®¾æ‚¨çš„é¡¹ç›®ä½¿ç”¨[Kubernetes Deployment](<a class="ae lg" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" rel="noopener ugc nofollow" target="_blank">https://Kubernetes . io/docs/concepts/workloads/controllers/Deployment/</a>)æ¥å®šä¹‰éƒ¨ç½²é…ç½®ï¼Œè¿ç§»åˆ° KCL åªéœ€è¦ä»¥ä¸‹æ­¥éª¤:</p><h1 id="e6f9" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">3.1 æ ¹æ®å‹å·<a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#31-write-config-based-on-the-models" rel="noopener ugc nofollow" target="_blank"> </a>ç¼–å†™é…ç½®</h1><p id="b8f3" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">æˆ‘ä»¬æä¾›å¼€ç®±å³ç”¨çš„<code class="fe lm ln lo lp b">kusion_models</code>åŒ…ä¾›æ‚¨å¿«é€Ÿå¯åŠ¨ã€‚å®ƒåŒ…å«ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å‰ç«¯æ¨¡å‹ï¼Œåä¸º<code class="fe lm ln lo lp b"><a class="ae lg" href="https://github.com/KusionStack/konfig/blob/main/base/pkg/kusion_models/kube/frontend/server.k" rel="noopener ugc nofollow" target="_blank">Server schema</a></code>ã€‚æ‚¨å¯ä»¥é€šè¿‡åˆå§‹åŒ–<code class="fe lm ln lo lp b">Server schema</code>æ¥å£°æ˜å®ƒä»¬çš„é…ç½®ã€‚å…³äºæ¨¡å¼åŠå…¶å±æ€§çš„æè¿°å’Œç”¨æ³•ï¼Œè¯·å‚è€ƒ<a class="ae lg" href="https://kusionstack.io/docs/reference/model/kusion_models/kube/frontend/doc_server" rel="noopener ugc nofollow" target="_blank">æœåŠ¡å™¨æ¨¡å¼æ–‡æ¡£</a>ã€‚</p><h1 id="988c" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">3.2 æ„å»ºæ‚¨çš„è‡ªå®šä¹‰å‰ç«¯æ¨¡å‹<a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#32-build-your-custom-frontend-models" rel="noopener ugc nofollow" target="_blank"> </a></h1><p id="47cc" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">ç°æœ‰çš„ KCL æ¨¡å‹å¯èƒ½æ— æ³•æ»¡è¶³æ‚¨çš„ç‰¹å®šä¸šåŠ¡éœ€æ±‚ï¼Œé‚£ä¹ˆæ‚¨ä¹Ÿå¯ä»¥è®¾è®¡è‡ªå·±çš„å®šåˆ¶å‰ç«¯æ¨¡å‹åŒ…ã€‚åœ¨<code class="fe lm ln lo lp b">kusion_kubernetes</code>ç›®å½•ä¸­(<a class="ae lg" href="https://github.com/KusionStack/konfig/tree/main/base/pkg/kusion_kubernetes" rel="noopener ugc nofollow" target="_blank">https://github . com/KusionStack/konfig/tree/main/base/pkg/ku sion _ Kubernetes</a>)ï¼Œæœ‰ä¸€ä»½ç”Ÿæˆçš„ Kubernetes 1.22 æ¨¡å‹çš„å‰¯æœ¬ï¼Œä½ å¯ä»¥åŸºäºå®ƒè®¾è®¡ä½ çš„å®šåˆ¶æ¨¡å‹ã€‚æ‚¨è¿˜å¯ä»¥å¼€å‘æ‚¨çš„å®šåˆ¶è„šæœ¬æ¥è¿ç§»æ‚¨çš„é…ç½®æ•°æ®ï¼Œå°±åƒ<code class="fe lm ln lo lp b">kube2kcl</code>å·¥å…·æ‰€åšçš„é‚£æ ·ã€‚</p><h2 id="4098" class="lq jl in bd jm lr ls dn jq lt lu dp ju kt lv lw jy kx lx ly kc lb lz ma kg mb bi translated">3.2.1 å°† Kubernetes éƒ¨ç½²è½¬æ¢æˆ KCL æ¨¡å¼<a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#321-convert-kubernetes-deployment-into-kcl-schema" rel="noopener ugc nofollow" target="_blank"> </a></h2><p id="e3cf" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">åœ¨ Konfig å­˜å‚¨åº“ä¸­çš„<code class="fe lm ln lo lp b">base/pkg/kusion_kubernetes</code>ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ª<a class="ae lg" href="https://github.com/kcl-lang/konfig/blob/main/base/pkg/kusion_kubernetes/api/apps/v1/deployment.k" rel="noopener ugc nofollow" target="_blank">ç”Ÿæˆçš„ Kubernetes 1.22 æ¨¡å‹</a>çš„å‰¯æœ¬ã€‚æ‚¨å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œä½¿ç”¨ç°æœ‰çš„æ¨¡å‹ï¼Œæˆ–è€…å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ç”Ÿæˆå…¶ä»–ç‰ˆæœ¬çš„æ¨¡å‹ã€‚</p><p id="3c97" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">ç°åœ¨è®©æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ª 1.23 ç‰ˆæœ¬çš„ Kubernetes æ¨¡å‹ã€‚ä»<a class="ae lg" href="https://github.com/kubernetes/kubernetes/blob/release-1.23/api/openapi-spec/swagger.json" rel="noopener ugc nofollow" target="_blank">Kubernetes v 1.23 open API Spec</a>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°<code class="fe lm ln lo lp b">apps/v1.Deployment</code>æ¨¡å‹çš„å®šä¹‰ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†æ‘˜å½•:</p><pre class="mc md me mf gt mg lp mh bn mi mj bi"><span id="7cc4" class="mk jl in lp b be ml mm l mn mo">{<br/>    "definitions": {<br/>        "io.k8s.api.apps.v1.Deployment": {<br/>            "description": "Deployment enables declarative updates for Pods and ReplicaSets.",<br/>            "properties": {<br/>                "apiVersion": {<br/>                    "description": "APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",<br/>                    "type": "string"<br/>                },<br/>                "kind": {<br/>                    "description": "Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",<br/>                    "type": "string"<br/>                },<br/>                "metadata": {<br/>                    "$ref": "#/definitions/io.k8s.apimachinery.pkg.apis.meta.v1.ObjectMeta",<br/>                    "description": "Standard object's metadata. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata"<br/>                },<br/>                "spec": {<br/>                    "$ref": "#/definitions/io.k8s.api.apps.v1.DeploymentSpec",<br/>                    "description": "Specification of the desired behavior of the Deployment."<br/>                },<br/>                "status": {<br/>                    "$ref": "#/definitions/io.k8s.api.apps.v1.DeploymentStatus",<br/>                    "description": "Most recently observed status of the Deployment."<br/>                }<br/>            },<br/>            "type": "object",<br/>            "x-kubernetes-group-version-kind": [<br/>                {<br/>                    "group": "apps",<br/>                    "kind": "Deployment",<br/>                    "version": "v1"<br/>                }<br/>            ]<br/>        }<br/>    },<br/>    "info": {<br/>        "title": "Kubernetes",<br/>        "version": "unversioned"<br/>    },<br/>    "paths": {},<br/>    "swagger": "2.0"<br/>}</span></pre><p id="3b4b" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">æ‚¨å¯ä»¥å°†ä¸Šé¢çš„è§„èŒƒä¿å­˜ä¸º<code class="fe lm ln lo lp b">deployment.json</code>å¹¶è¿è¡Œ<code class="fe lm ln lo lp b">kcl-openapi generate model -f deployment.json</code>ï¼ŒKCL æ¨¡å¼å°†ä¼šç”Ÿæˆå¹¶è¾“å‡ºåˆ°æ‚¨å½“å‰çš„å·¥ä½œåŒºã€‚å…¶ä»– Kubernetes æ¨¡å‹ä¹Ÿå¯ä»¥ä¿å­˜åœ¨è¿™ä¸ª spec æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å¯ä»¥ç±»ä¼¼åœ°ç”Ÿæˆã€‚</p><h2 id="50c1" class="lq jl in bd jm lr ls dn jq lt lu dp ju kt lv lw jy kx lx ly kc lb lz ma kg mb bi translated">3.2.2 è®¾è®¡å®šåˆ¶å‰ç«¯å‹å·<a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#322-design-custom-frontend-models" rel="noopener ugc nofollow" target="_blank"> </a></h2><p id="a7f3" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">ç”±äº Kubernetes å†…ç½®æ¨¡å‹æ˜¯åŸå­æ€§çš„ï¼Œå¯¹åˆå­¦è€…æ¥è¯´æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘ä»¬å»ºè®®å°† Kubernetes çš„æœ¬æœºæ¨¡å‹ä½œä¸ºåç«¯è¾“å‡ºæ¨¡å‹ï¼Œå¹¶è®¾è®¡ä¸€æ‰¹å‰ç«¯æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹å¯ä»¥æˆä¸ºæ›´æŠ½è±¡ã€æ›´å‹å¥½å’Œæ›´ç®€å•çš„ç”¨æˆ·ç•Œé¢ã€‚å¯ä»¥å‚è€ƒ<code class="fe lm ln lo lp b"><a class="ae lg" href="https://github.com/kcl-lang/konfig/blob/main/base/pkg/kusion_models/kube/frontend/server.k" rel="noopener ugc nofollow" target="_blank">Server Schema in the Konfig repo</a></code>ä¸­çš„è®¾è®¡æ¨¡å¼ã€‚</p><h2 id="fe2b" class="lq jl in bd jm lr ls dn jq lt lu dp ju kt lv lw jy kx lx ly kc lb lz ma kg mb bi translated">3.2.3 è¿ç§»é…ç½®æ•°æ®<a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#323-migrate-the-configuration-data" rel="noopener ugc nofollow" target="_blank"> </a></h2><p id="db17" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">æ‚¨å¯ä»¥å¼€å‘è‡ªå®šä¹‰è„šæœ¬æ¥è‡ªåŠ¨è¿ç§»é…ç½®æ•°æ®ã€‚KCL ç¨åå°†ä¸ºè¿™ä¸ªè„šæœ¬æä¾›ç¼–å†™æ¡†æ¶å’Œç¼–å†™æŒ‡å—ã€‚</p><h1 id="77d2" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">4.ä»åº“ä¼¯å†…æ–¯è¿ç§»åˆ° CRD <a class="ae lg" href="https://kcl-lang.github.io/docs/user_docs/guides/working-with-k8s/from_kubernetes#4-migrate-from-kubernetes-crd" rel="noopener ugc nofollow" target="_blank"> </a></h1><p id="482e" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">å¦‚æœæ‚¨å¼€å‘äº† CRDsï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ç”Ÿæˆ CRD æ¨¡å¼çš„ KCL ç‰ˆæœ¬ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå£°æ˜ CRsã€‚</p><ul class=""><li id="e9d6" class="mp mq in kk b kl lh kp li kt mr kx ms lb mt lf mu mv mw mx bi translated">ä» CRD ç”Ÿæˆ KCL æ¨¡å¼</li></ul><pre class="mc md me mf gt mg lp mh bn mi mj bi"><span id="c76a" class="mk jl in lp b be ml mm l mn mo">kcl-openapi generate model --crd --skip-validation -f &lt;your_crd.yaml&gt;</span></pre><h1 id="9004" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">5.CRD è‡³ KCL ç¤ºä¾‹</h1><ul class=""><li id="9296" class="mp mq in kk b kl km kp kq kt my kx mz lb na lf mu mv mw mx bi translated">å‘½ä»¤</li></ul><pre class="mc md me mf gt mg lp mh bn mi mj bi"><span id="2bbc" class="mk jl in lp b be ml mm l mn mo">kcl-openapi generate model --crd -f ${your_CRD.yaml} -t ${the_kcl_files_output_di} --skip-validation</span></pre><ul class=""><li id="377e" class="mp mq in kk b kl lh kp li kt mr kx ms lb mt lf mu mv mw mx bi translated">test_crontab_CRD.yaml:</li></ul><pre class="mc md me mf gt mg lp mh bn mi mj bi"><span id="aa69" class="mk jl in lp b be ml mm l mn mo"># Deprecated in v1.16 in favor of apiextensions.k8s.io/v1<br/>apiVersion: apiextensions.k8s.io/v1beta1<br/>kind: CustomResourceDefinition<br/>metadata:<br/>  # name must match the spec fields below, and be in the form: &lt;plural&gt;.&lt;group&gt;<br/>  name: crontabs.stable.example.com<br/>spec:<br/>  # group name to use for REST API: /apis/&lt;group&gt;/&lt;version&gt;<br/>  group: stable.example.com<br/>  # list of versions supported by this CustomResourceDefinition<br/>  versions:<br/>    - name: v1<br/>      # Each version can be enabled/disabled by Served flag.<br/>      served: true<br/>      # One and only one version must be marked as the storage version.<br/>      storage: true<br/>  # either Namespaced or Cluster<br/>  scope: Namespaced<br/>  names:<br/>    # plural name to be used in the URL: /apis/&lt;group&gt;/&lt;version&gt;/&lt;plural&gt;<br/>    plural: crontabs<br/>    # singular name to be used as an alias on the CLI and for display<br/>    singular: crontab<br/>    # kind is normally the CamelCased singular type. Your resource manifests use this.<br/>    kind: CronTab<br/>    # shortNames allow shorter string to match your resource on the CLI<br/>    shortNames:<br/>      - ct<br/>  preserveUnknownFields: false<br/>  validation:<br/>    openAPIV3Schema:<br/>      type: object<br/>      properties:<br/>        spec:<br/>          type: object<br/>          properties:<br/>            cronSpec:<br/>              type: string<br/>            image:<br/>              type: string<br/>            replicas:<br/>              type: integer</span></pre><ul class=""><li id="9ef2" class="mp mq in kk b kl lh kp li kt mr kx ms lb mt lf mu mv mw mx bi translated">å‘½ä»¤</li></ul><pre class="mc md me mf gt mg lp mh bn mi mj bi"><span id="7410" class="mk jl in lp b be ml mm l mn mo">kcl-openapi generate model -f test_crontab_CRD.yaml -t ~/ --skip-validation --crd</span></pre><ul class=""><li id="f955" class="mp mq in kk b kl lh kp li kt mr kx ms lb mt lf mu mv mw mx bi translated">output ` ~/models/stable _ example _ com _ v1 _ cron _ tab . k '</li></ul><pre class="mc md me mf gt mg lp mh bn mi mj bi"><span id="f23a" class="mk jl in lp b be ml mm l mn mo">"""<br/>This file was generated by the KCL auto-gen tool. DO NOT EDIT.<br/>Editing this file might prove futile when you re-run the KCL auto-gen generate command.<br/>"""<br/>import kusion_kubernetes.apimachinery.apis<br/><br/>schema CronTab:<br/>    """stable example com v1 cron tab<br/>    Attributes<br/>    ----------<br/>    __settings__ : {str:str}, default is {"output_type": "STANDALONE"}, optional<br/>         existence of this attribute indicates that the model will be treated standalone by KCLVM.<br/>    apiVersion : str, default is "stable.example.com/v1", required<br/>         APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources<br/>    kind : str, default is "CronTab", required<br/>         Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds<br/>    metadata : apis.ObjectMeta, default is Undefined, optional<br/>        metadata<br/>    spec : StableExampleComV1CronTabSpec, default is Undefined, optional<br/>        spec<br/>    """<br/><br/>    apiVersion: "stable.example.com/v1" = "stable.example.com/v1"<br/>    kind: "CronTab" = "CronTab"<br/>    metadata?: apis.ObjectMeta<br/>    spec?: StableExampleComV1CronTabSpec<br/><br/>schema StableExampleComV1CronTabSpec:<br/>    """stable example com v1 cron tab spec<br/>    Attributes<br/>    ----------<br/>    cronSpec : str, default is Undefined, optional<br/>        cron spec<br/>    image : str, default is Undefined, optional<br/>        image<br/>    replicas : int, default is Undefined, optional<br/>        replicas<br/>    """<br/><br/>    cronSpec?: str<br/>    image?: str<br/>    replicas?: int</span></pre><h1 id="77db" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">ç„¶å</h1><p id="bf8c" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®(å¦‚æœä½ å–œæ¬¢ï¼Œä½ å¯ä»¥å¼€å§‹ï¼Œè°¢è°¢ğŸ˜Š):</p><ul class=""><li id="7b2a" class="mp mq in kk b kl lh kp li kt mr kx ms lb mt lf mu mv mw mx bi translated">KCL:ã€https://github.com/KusionStack/KCLVM T4ã€‘</li><li id="c801" class="mp mq in kk b kl nb kp nc kt nd kx ne lb nf lf mu mv mw mx bi translated">åº“è¾›:<a class="ae lg" href="https://github.com/KusionStack/kusion" rel="noopener ugc nofollow" target="_blank">https://github.com/KusionStack/kusion</a></li><li id="1dfb" class="mp mq in kk b kl nb kp nc kt nd kx ne lb nf lf mu mv mw mx bi translated">konfig:<a class="ae lg" href="https://github.com/KusionStack/Konfig" rel="noopener ugc nofollow" target="_blank">https://github.com/KusionStack/Konfig</a></li></ul><p id="1775" class="pw-post-body-paragraph ki kj in kk b kl lh kn ko kp li kr ks kt lj kv kw kx lk kz la lb ll ld le lf ig bi translated">æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„äº¤æµç¤¾åŒº:</p><ul class=""><li id="9401" class="mp mq in kk b kl lh kp li kt mr kx ms lb mt lf mu mv mw mx bi translated"><a class="ae lg" href="https://github.com/KusionStack/community" rel="noopener ugc nofollow" target="_blank">https://github.com/KusionStack/community</a></li></ul></div></div>    
</body>
</html>