<html>
<head>
<title>Integrating Rust With Android Development — Final Part</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将 Rust 集成到 Android 开发中——最终部分</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/integrating-rust-with-android-development-final-part-7c752a7cab1d?source=collection_archive---------3-----------------------#2022-08-25">https://blog.devgenius.io/integrating-rust-with-android-development-final-part-7c752a7cab1d?source=collection_archive---------3-----------------------#2022-08-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/ea9eea56cc894629de2be4022296655a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XwjoQAiQpHHvNpWE-_fRKQ.jpeg"/></div></div></figure><div class=""/><p id="ff6f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是本系列的第二部分，也是最后一部分，它解释了如何将<strong class="jx iz"> Rust </strong>代码添加到您的 android 项目中，而无需在您的项目中学习或使用 JNI 或 C。在<a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/integrating-rust-with-android-development-ef341c2f9cca"> <strong class="jx iz">系列的第一部分</strong> </a>中，我们创建了一个简单的 Android Studio 项目和一个用 Rust 编写的简单库来记录信息。在第二部分，也是最后一部分，我们将通过一个实际的例子来应用 Rust 函数。</p><p id="2fb4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本演练中，我们将创建一个简单的计算器应用程序，它在用户按下“等于”按钮时计算结果。应用程序将接受 2 个输入，然后对输入执行 3 个操作:加、减和乘。这一简单的知识在现实生活中会很有用，在现实生活中，您可能需要在 Android 上执行耗时或低级的操作。没有进一步的工作，让我们创建我们的应用程序的后端(您可以最初设计 U.I，但是对于这个演练，我觉得首先编写 Rust 后端更方便)</p><h2 id="cdf8" class="ku kv iy bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">设计后端⚙️</h2><p id="682e" class="pw-post-body-paragraph jv jw iy jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">如前所述，我们将创建一个保存 2 个值的<code class="fe ls lt lu lv b">struct</code>,并创建返回相应的加法、减法和乘法的函数。我们会把这个<code class="fe ls lt lu lv b">struct</code>加到<code class="fe ls lt lu lv b">lib.rs</code>上。</p><figure class="lw lx ly lz gt ip"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="3b7d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">方法参数中的<code class="fe ls lt lu lv b">Self</code>是方法接收类型的<em class="mc">语法糖</em>，也就是该方法所在的<code class="fe ls lt lu lv b">impl</code>的类型，在本例中，UIit 是<code class="fe ls lt lu lv b">Inputs</code>。您可以用<code class="fe ls lt lu lv b">Inputs</code>替换 Self，代码会运行良好。</p><p id="6188" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">记住<code class="fe ls lt lu lv b">#[generate_interface]</code>来源于<code class="fe ls lt lu lv b"><a class="ae kt" href="https://crates.io/crates/rifgen" rel="noopener ugc nofollow" target="_blank"><strong class="jx iz">rifgen</strong></a></code> <strong class="jx iz"> </strong>机箱，如系列第一部分<a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/integrating-rust-with-android-development-ef341c2f9cca">所述。</a></p><p id="c9c8" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们实施 U.I</p><h2 id="f210" class="ku kv iy bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">设计 U.I📱</h2><p id="d49a" class="pw-post-body-paragraph jv jw iy jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">如前所述，U.I .将有 2 个输入文本字段和 3 个输出文本字段。这是一个简单的布局来说明:</p><figure class="lw lx ly lz gt ip"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="8508" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就是这样！这就是<a class="ae kt" href="https://github.com/Kofituo/RustApplication/blob/main/app/src/main/java/com/example/rustapplication/Illustration.jpg" rel="noopener ugc nofollow" target="_blank"><strong class="jx iz"/></a>应用应该有的样子。这是上面的 gif 图</p><figure class="lw lx ly lz gt ip"><div class="bz fp l di"><div class="md mb l"/></div></figure><p id="4b8f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">每当用户点击“等于”按钮时，来自文本框的数字被传递给写在<code class="fe ls lt lu lv b">Rust</code>中的结构。然后计算这些值，结果显示在文本框中。请随意修改代码，并尝试其他方式向您的 android 项目添加一些<code class="fe ls lt lu lv b">Rust</code>变化。</p><h2 id="34c1" class="ku kv iy bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">后续步骤👣</h2><p id="3092" class="pw-post-body-paragraph jv jw iy jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated"><strong class="jx iz">如果你在尝试这个演练时遇到了任何问题或者有任何疑问，请随时通过</strong> <a class="ae kt" href="https://www.upwork.com/freelancers/~0196d30a485de56f48" rel="noopener ugc nofollow" target="_blank"> <strong class="jx iz"> Upwork 联系我。如果你正在做自己的项目，你需要帮助，你可以通过 Upwork </strong> </a>联系我！</p><h2 id="be42" class="ku kv iy bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated"><a class="ae kt" href="https://www.upwork.com/freelancers/~0196d30a485de56f48" rel="noopener ugc nofollow" target="_blank">我还编辑图像(修图、合成、图像增强等。)所以随时联系我！</a>😄😄</h2><h2 id="3b92" class="ku kv iy bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">进一步阅读📖</h2><p id="78b7" class="pw-post-body-paragraph jv jw iy jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">了解有关本演练中使用的依赖项的更多信息:</p><ul class=""><li id="ab26" class="me mf iy jx b jy jz kc kd kg mg kk mh ko mi ks mj mk ml mm bi translated"><a class="ae kt" href="https://github.com/Dushistov/flapigen-rs" rel="noopener ugc nofollow" target="_blank"> <strong class="jx iz"> Dushistov/flapigen-rs:用 Rust 编写的程序或库与其他语言连接的工具</strong> </a></li><li id="a9a9" class="me mf iy jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated">Kofituo/rifgen:把用 Rust 编写的库翻译成接口文件的程序。它与 flapigen 和一起工作</li><li id="973f" class="me mf iy jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated"><a class="ae kt" href="https://github.com/sfackler/rust-jni-sys" rel="noopener ugc nofollow" target="_blank">T19】sfackler/rust-JNI-sysT21】</a></li></ul><h2 id="d4d6" class="ku kv iy bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated"><a class="ae kt" href="https://github.com/Kofituo/RustApplication" rel="noopener ugc nofollow" target="_blank">储存库</a></h2></div></div>    
</body>
</html>