<html>
<head>
<title>3 Easy Ways to import a shapefile into a PostgreSQL database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将 shapefile 导入 PostgreSQL 数据库的 3 种简单方法</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/3-easy-ways-to-import-a-shapefile-into-a-postgresql-database-c1a4c78104af?source=collection_archive---------0-----------------------#2022-03-31">https://blog.devgenius.io/3-easy-ways-to-import-a-shapefile-into-a-postgresql-database-c1a4c78104af?source=collection_archive---------0-----------------------#2022-03-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/3d2375dc53ba30bdde7e0116508d6d41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lzATKjXvZ9IE5Jq3UknSig.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">安妮·斯普拉特在<a class="ae kc" href="https://unsplash.com/s/photos/map?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="88df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">在我们开始</strong>之前，您必须安装一个带有 PostGIS 扩展的 PostgreSQL 实例。PGAdmin 是一个很好的数据库管理软件，可以和 PostgreSQL 一起安装。</p><ul class=""><li id="069d" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">下载 PostgreSQL—<a class="ae kc" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank">https://www.postgresql.org/</a></li><li id="300d" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">安装 PostGIS—<a class="ae kc" href="https://postgis.net/install/" rel="noopener ugc nofollow" target="_blank">https://postgis.net/install/</a></li></ul><p id="f869" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">我们还需要数据集</strong>。在本文中，我们将使用里士满大学的制图不等式数据集，这是一个追踪美国红线区的面坐标集合。</p><ul class=""><li id="7b9a" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">红线 GIS 数据集—<a class="ae kc" href="https://dsl.richmond.edu/panorama/redlining/#loc=5/39.1/-94.58&amp;text=downloads" rel="noopener ugc nofollow" target="_blank">https://DSL . Richmond . edu/panorama/红线/# loc = 5/39.1/-94.58&amp;text = downloads</a></li></ul><h1 id="7b26" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">1.使用 shp2pgsql 命令行工具创建表并导入文件</h1><p id="86a5" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">首先，在 PostgreSQL 中创建一个数据库并启用 PostGIS。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="7327" class="nb lq iq mx b gy nc nd l ne nf">CREATE DATABASE "gis_db"<br/>    WITH <br/>    OWNER = &lt;dbuser&gt;<br/>    ENCODING = 'UTF8'<br/>    CONNECTION LIMIT = -1;</span><span id="3a29" class="nb lq iq mx b gy ng nd l ne nf">CREATE EXTENSION postgis;</span></pre><p id="5db1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，从包含 holc_ad_data.shp 文件的目录中的命令行(以及。项目和。dbf 文件)，运行以下命令:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="fbf4" class="nb lq iq mx b gy nc nd l ne nf">shp2pgsql -s 4326 -I holc_ad_data.shp redlining  \<br/>| psql  -d gis_db -U &lt;dbuser&gt;</span></pre><p id="2311" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将创建一个名为“红线”的新表，并从 holc_ad_data.shp 导入数据。</p><h1 id="1961" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">2.Python 使用 Geopandas 和 SQLAlchemy 推送数据</h1><p id="5c13" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">这是一个简单的代码解决方案，可以很容易地在管道中实现自动化。</p><figure class="ms mt mu mv gt jr"><div class="bz fp l di"><div class="nh ni l"/></div></figure><h1 id="71fb" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">3.从 QGIS 应用程序推送数据</h1><p id="cd3e" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">最后但同样重要的是，GUI 选项。首先，在本地机器上下载并安装 QGIS。</p><div class="nj nk gp gr nl nm"><a href="https://qgis.org/en/site/forusers/download.html" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd ir gy z fp nr fr fs ns fu fw ip bi translated">下载 QGIS</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">适用于 macOS High Sierra (10.13)和更新版本的官方一体式签名安装程序 Mac 安装程序包。QGIS 尚未…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">qgis.org</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa jw nm"/></div></div></a></div><p id="9c99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装 QGIS 后，启动应用程序。您应该会看到一个空白的白色画布。<strong class="kf ir">将您的 shapefile 拖到 QGIS 中</strong>。红线数据显示为用颜色填充的点的多边形，隐约呈美国的形状。这里我放大了洛杉矶。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ob"><img src="../Images/c846b37726adca9016f3e12d1c4e0502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wmHBE5Wwqtgv6QH1MUdPcw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</figcaption></figure><p id="7d7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">将 QGIS 连接到 gis_db 数据库。</strong>在浏览器中右击 Postgis 并选择新建连接。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/a39b64ef3d2b1343005291d8bb7709af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*WhmvBJrMTxalpVq8R-jgoA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">作者图片</figcaption></figure><p id="a964" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">填写您的连接信息，然后单击测试连接。如果成功，单击确定，您将看到它作为一个连接列在 PostGIS 下。</p><p id="f115" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">点击数据库并打开数据库管理器。单击导入/图层文件(这是违反直觉的，因为您是从 QGIS 导出并导入到 Postgis)。</p><figure class="ms mt mu mv gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/238e60d2882248e314d4a3f04665c457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j-FqiwCwpLBjaeb8CxFdSA.png"/></div></div></figure></div></div>    
</body>
</html>