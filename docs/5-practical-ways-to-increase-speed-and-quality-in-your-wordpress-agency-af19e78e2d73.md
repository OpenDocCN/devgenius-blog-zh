# 提高 WordPress 代理速度和质量的 5 个实用方法

> 原文：<https://blog.devgenius.io/5-practical-ways-to-increase-speed-and-quality-in-your-wordpress-agency-af19e78e2d73?source=collection_archive---------10----------------------->

## 提高代码质量和客户的满意度应该携手并进。

![](img/fea2327ef6ba24371235b68b8a93cdae.png)

[KOBU 机构](https://unsplash.com/@kobuagency?utm_source=medium&utm_medium=referral)在 [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) 上拍摄的照片

“时间就是金钱”这句话并不比做代理工作更真实。根据你如何组织你的合同，你要么按小时付费，要么按项目付费。

以我的经验来看，通常是两者的某种结合。我最常看到的是初始发布合同的项目费，然后是发布后支持合同的计费小时数，最高可达每月。

这听起来对吗？我想是的。

我提到合同只是为了说明它们的共同点:两者都鼓励你尽快完成尽可能多的工作。如果你不够快，你要么被困在你不能收费的工作时间里，要么让你的客户在下一个周期之前完成工作。

两者都不是好的选择，但是你能做什么呢？两种选择都让你付出了代价。第一个选择花费你的劳动时间，第二个选择可能花费你一个客户。

第一种选择是你在早期采取的，当你是投入时间的人时。当你不用开支票的时候，很容易忽略人工成本。但是，如果你这样做，你会让自己养成一个致命的习惯。

还有第三种选择，很少有人选择，但这是我今天要讲的。

做事情 ***更好*** 。

# 更好是什么意思？

把事情做得更好，我的意思是改进你自己的过程。认真地、批判性地审视自己。你在尽可能高效地工作吗？你有一个可靠的流程吗？你经常被什么绊倒？你如何改善这种情况？

我没有所有的答案，但是我有 5 个实用的方法来提高你的 WordPress 代理的工作速度和质量。这些步骤预示着基础知识，使用你可能已经在使用的工具，但是以你可能没有考虑过的方式。

首先，我想说的是，其中大多数不会在一夜之间实现。效率是需要时间来培养的。这些都是广泛的建议，很大程度上依赖于你为你自己的机构填补空白。

我可以领导一个机构提高效率，但我不能让它把工作投入进去。

那是谚语，对吗？

继续前进…

# 客户几乎永远不会是对的

我的第一个建议是认识到不仅客户不总是对的，而且事实上客户几乎从不正确。

正确不是他们的工作。保持正确是你的工作。

当我们允许迎合客户妨碍我们的工作时，我们不仅伤害了自己，也伤害了客户。

说具体的吧。

## 客户端不应该拥有对生产的更新访问权限

我把这个放在第一位，因为它是我期望得到最多支持的一个。他们为代码付费，所以他们应该可以更新产品，对吗？

不对。

任何人都不能更新产品，*尤其是客户端。他们雇用你是因为你的专长。其中一部分是训练它们在*不*碰东西的时候。*

生产是一个热炉子，你的客户是孩子。

## 如果客户希望获得产品更新，合同应该规定没有后续支持

当然，只有当你的合同包括网站发布后的维护时，这才是真正重要的。如果不是这样，你可以建立一个构建管道，但是你不能做太多来保护网站。

只有我们一直在那里，我们才能保护客户免受伤害。

如果他们坚持要更新产品，你就不应该拿你的声誉冒险。但这并不总是可行的，尤其是对于大客户，我明白这一点。

## 如果客户坚持，那么应该要求客户遵循与代理商相同的开发流程

如果所有其他方法都失败了，并且您找不到阻止客户端获得更新访问的方法，并且出于财务原因您必须保留该合同，至少加强您的构建管道。

客户可能会反驳这一点，但这不是一个不合理的要求。你可以找到任何你想卖给他们的东西，但是更新产品是一个糟糕的计划。我们稍后将讨论如何真正设置您的管道，但现在理解您应该强制使用该管道。这是你上线前的最后一道防线。

# 为常见任务开发定制的内部插件套件

我强烈支持只签订最终有长期支持协议的合同。这些不仅使您受益，因为它们增加了项目的利润，而且您还可以密切地了解这个存储库。

你是为你的客户提供支持的最佳人选，因为你了解他们的网站，并且可以比新来的人更快地完成任务。

然而，当你有 30 个客户都在找人替他们管理网站时，问题就出现了。我们应该如何熟悉 30 个网站？40 个站点呢？50?100?

进入:您的内部定制套件。

你不需要从一个定制的插件套件开始，这是你需要逐渐开发的。然而，你应该做的是做大量的笔记。写下你的客户提出的每一个要求。你想出的每一个解决方案。

比较不同客户的记录。找出常见的任务，并找出如何自动化这些解决方案。

客户总是想要谷歌分析？好吧，我们会加入一个第三方插件。但是，如果 10 个客户想要谷歌分析，自己处理不是更好吗？

放弃潜在的充满广告的第三方插件，加入你自己的定制插件，只做需要做的事情。你会知道你的插件，你可以自己更新。

这只是一项任务。您在多个客户端上执行的任何常见任务都可以添加到您的插件中，并且是自动化的。比如:

*   分析学
*   备份
*   审计日志
*   调试日志
*   技术性能分析

所有这些，以及更多，都可以添加到一个定制的工具套件中，您可以在每个客户端 WordPress 安装中安装。

## 奖金

随着您的成长，以及您的内部套件的成长，您可能会发现它已经成为一个强大的工具包。一旦这种情况发生，你可以决定提供你的内部工具包在高级插件市场上出售。

这将在客户工作之外为您的机构创造一个新的收入流，这总是好的——但不是必需的。

# 策划一个标准化插件套件

不过，在您花时间创建自定义插件套件之前，您可能需要找到第三方插件供您的客户端使用。

老实说，大多数人都是自己得出这个结论的，所以我知道，仅仅是列出一个插件的使用清单对你来说并不是什么突破性的奇迹。但是有些人忘记了*插件能够创建自己的钩子。*

管理插件时，比较执行类似任务的插件，找到创建自己钩子的插件。在所有条件相同的情况下，创建钩子的插件会随着边缘情况的出现而变得有用，你需要决定是分叉插件还是找到一个新的插件。钩子提供了第三个潜在的选择，即以一种在更新后仍能自我维持的方式连接插件。

不管是什么情况，有一个在特定需求出现时，你总能找到的精选插件列表将会让你掌握这些插件的用法，在出现问题时增加你的信心，并让你验证你的套件是否能一起工作。

为什么这是有益的？因为你几乎永远不会处于一种你不需要使用一个不在你计划范围内的插件的情况。如果你总是使用同样的工具，突然你的网站有了一个独特的插件，并且出现了一个错误，我们可以很自然地认为这个错误是围绕着这个新插件的。

这加快了调试速度，并允许我们缩小关注点。无需浪费数小时来追踪冲突。

# 创建标准化的父主题

所有的网站都有一些相同的东西。每个都有一个 HTML 部分，一个 HEAD 部分，一个 BODY 部分。根据您的机构，您可能有一个网站的标准模板:例如，2 列，带滑块。

创建一个标准化的父主题允许您删除通常必须构建到每个新主题中的所有样板设置。用自定义钩子扩展你的主题，你就有了一个可以完全自定义的主题，既可以自定义子主题，也可以自定义插件套件。

此外，如果你发现你的主题的安全性或大小有所改进，你可以修改你的父主题，并同时将这些修改发布给你的所有客户端。这允许您以低风险进行批量更新。

## 奖金

就像定制插件套件一样，当您固化您的定制父主题时，您可能会决定将其作为一个高级入门模板出售。这可以创造另一个收入来源，让你越来越远离对客户工作的依赖。

# 对一切实施持续集成

上面所有的建议都很棒，它们都直接导致了最后一个建议。通过创建一个你控制的自定义插件套件，并维护一个你控制的插件列表，以及一个你控制的标准化子主题，你已经为自己提供了你所需要的一切，以确保你的基础是稳固的。

到目前为止，我们忽略了提及我们网站中最大的大象。

WordPress。

WordPress 核心更新在任何情况下都是有压力的，但是当你有 50 个客户端网站在更新前都必须独立测试，你很快就会发现几乎不可能扩展。

但是如果我们不仅可以利用 WordPress 的核心代码，还可以利用他们的开发团队，那会怎么样呢？

以下是我的建议…

## Fork WordPress 开发

WordPress 有一个广泛的测试套件，可以验证核心工作的各个方面。问题是，当你添加一个插件时，你正在改变核心的工作方式。这意味着这些测试中的一些或全部可能会失败。

不过没关系。

第一次。

首先，我们分叉 WordPress 开发库，并创建当前工作版本的一个分支。例如，如果我们在客户端站点使用 WordPress 5.6，我们会从 branch 5.6 中分离出来。

接下来，我们应该设置我们的环境，并验证我们的开发 wordpress 是否按预期工作。一旦我们完成了，我们一次添加一个插件和主题，一边运行我们的测试。当测试失败时，我们通过将这些测试更新到期望值来修复它们。

注意，您应该做的一件事是将您的每个定制测试添加到 PHPUnit 测试套件中。这样，当你运行你的测试时，你可以从运行你的定制测试套件开始，这样，如果那些被破坏了，你会很早知道，而不需要等待整个项目被测试。

一旦我们完成了，我们的测试将处于与核心运行时相同的状态，所有插件都已安装并激活，自定义父主题也已安装并激活。

就是这样。

## 如何测试插件更新

假设你的一个第三方插件更新了。测试的方法是从您的 CI 分支创建一个分支，安装新版本的插件来代替现有版本，然后运行您的测试。

有失败的吗？

如果没有失败，那么你就可以走了。插件按预期工作，我们可以继续我们的生活。

但是如果某件事*失败了呢？这就是我们需要问一些问题的地方。什么失败了？这是一个灾难性的失败吗？失败是因为新功能简单地修改了 WordPress 核心，破坏了现有的测试吗？如果是这种情况，请更新测试。如果没有，那么我们可能还不能使用这个更新。你能连接到插件来纠正故障吗？*

如果你绝对需要更新插件——比如安全更新——我们已经在做持续集成了。也许可以简单地修改插件代码，并创建一个补丁，如果需要的话，你可以应用到下一次更新。只要补丁不破坏功能，为什么不把它发给插件开发者呢？

谁知道呢。他们可能只是合并它。

## 如何测试核心更新

很明显，核心更新有点难以测试。这些步骤可能需要一些时间:

1.  从您的配置项分支创建一个分支
2.  将新版本分支合并到您的新分支中
3.  修复任何合并冲突

运行您的定制测试套件。如果这些工作，运行整个测试套件。接下来的问题就是弄清楚是否有什么东西坏了，如果有，为什么坏了。然后想想你能不能修好它。

## 利益

这些好处对我来说似乎不言自明，但我会详细说明。减缓我们开发速度的通常不是 bug。让我们慢下来的是*对我们的代码*缺乏信心。

bug 会发生，我们知道它们会发生，但是对我们的代码没有任何信心意味着当 bug*发生*时，我们花费所有的时间检查我们库中的每一行代码，试图追踪 bug。

当我们对代码有信心时，我们就能够自然地确定代码中最有可能出现 bug 的位置，并直接导航到那里。测试有助于这个过程，它自然地为我们提供了断点，引导我们走向正确的方向。

# 结论

想要取悦你的客户是很自然的，在早期，这可能会表现为花费你的私人时间，下班后，解决他们所有的问题。然而，这是不可持续的，你需要实施节省时间的过程来阻止这种情况发生。

创建自定义插件和主题套件，利用相同的第三方插件，严重依赖 CI 构建渠道——甚至强迫那些自认为是开发人员的客户——都是掌控你的工作生活的方式，而不是让你所在机构的工作掌控你。

有你掌舵，每个人都会更好。毕竟，这是你创立这个机构的原因，不是吗？