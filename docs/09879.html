<html>
<head>
<title>Ruby Operator Precedence</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby 运算符优先级</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/ruby-operator-precedence-1cb9f9c31835?source=collection_archive---------13-----------------------#2022-09-19">https://blog.devgenius.io/ruby-operator-precedence-1cb9f9c31835?source=collection_archive---------13-----------------------#2022-09-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/62390b20b4eb94910a96afb010672958.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PxQYlh1G0zKPlVEp"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk translated">照片由<a class="ae jz" href="https://unsplash.com/@gmalhotra?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Gayatri Malhotra </a>在<a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="4801" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在 Ruby 中，表达式的结果由运算符优先级决定。这是一组规则，控制 Ruby 如何决定每个操作符接受哪些操作数。操作数只是运算符使用的值。它们是表达式求值的结果。</p><blockquote class="ky"><p id="5b0e" class="kz la in bd lb lc ld le lf lg lh kx dk translated">“先看，后想，然后测试。但总是先看到。否则，你只会看到你所期待的。”</p><p id="3bd4" class="kz la in bd lb lc ld le lf lg lh kx dk translated">—道格拉斯·亚当斯</p></blockquote></div><div class="ab cl li lj hr lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ig ih ii ij ik"><h1 id="e5d1" class="lp lq in bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">Ruby 优先级示例</h1><p id="51f3" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">当人类评估表达式时，他们通常从左边开始，然后向右移动(这在数学上不正确，但这是大多数人本能的做法)。例如，从左到右，以下表达式得出的结果为 300:</p><p id="21f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi">10 + 20 * 10 = 300</p><p id="c83e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是因为当我们把 10 加到 20 时，我们得到 30，然后乘以 10 得到 300。当您让 Ruby 执行同样的计算时，您会得到非常不同的结果:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="f2c2" class="nb lq in mx b gy nc nd l ne nf">irb(main):003:0&gt; 10 + 20 * 10<br/>=&gt; 210</span></pre><p id="1731" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是因为运算符优先级。Ruby 有一套规则，告诉它如何计算表达式中的运算符。很明显，Ruby 赋予乘法运算符(*)比加法运算符(+)更高的优先级。</p><h1 id="060e" class="lp lq in bd lr ls ng lu lv lw nh ly lz ma ni mc md me nj mg mh mi nk mk ml mm bi translated">覆盖优先级</h1><p id="adc1" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">Ruby 的内置优先级可以通过将表达式的低优先级部分括在括号中来覆盖。举个例子:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="2d91" class="nb lq in mx b gy nc nd l ne nf">(10 + 20) * 10<br/>=&gt; 300</span></pre><p id="4907" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在前面的示例中，括号中的表达式片段在高优先级乘法之前进行计算。类似于手工做数学时总是先计算括号。</p><h1 id="fa14" class="lp lq in bd lr ls ng lu lv lw nh ly lz ma ni mc md me nj mg mh mi nk mk ml mm bi translated">先后顺序表</h1><p id="9d2b" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">当您需要知道 Ruby 使用的操作符优先级时，请查阅下表。该表按优先级升序列出了所有运算符:</p><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/0045173372335c935e12ab0e6cf57eef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZZ-mVO3Ibwpzb8P8M36yYw.png"/></div></div></figure><p id="ca31" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">“方法”列中带有“是”的运算符是可以被覆盖的方法。</p><h1 id="3e47" class="lp lq in bd lr ls ng lu lv lw nh ly lz ma ni mc md me nj mg mh mi nk mk ml mm bi translated">评估顺序</h1><p id="86cb" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">您可能在某处听说或读到过优先级决定表达式求值的顺序。然而，评估过程比简单地决定先评估什么要复杂得多。实际上，优先级只是 Ruby 中的一部分；其他部分是从左到右求值、从右到左求值、短路和三元表达式。其中的每一个都独特地改变了操作的顺序。对确切区别的讨论超出了本文的范围，但是我鼓励您自己去试验这些区别。</p><p id="b78d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个有趣的消息是，尽管像<code class="fe nm nn no mx b">do...end</code>和<code class="fe nm nn no mx b">{}</code>这样的块具有最低的优先级，但它们并不等同。<code class="fe nm nn no mx b">{}</code>的优先级略高于<code class="fe nm nn no mx b">do...end</code>，因此，根据您使用的块类型，您可能会得到不同的结果。</p><h1 id="3369" class="lp lq in bd lr ls ng lu lv lw nh ly lz ma ni mc md me nj mg mh mi nk mk ml mm bi translated">结论</h1><p id="4048" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">理解运算符优先级是编写行为符合预期的代码的关键。如果有疑问，请始终使用括号来覆盖默认优先级。</p></div></div>    
</body>
</html>