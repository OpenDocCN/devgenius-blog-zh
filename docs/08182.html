<html>
<head>
<title>PHP — P50: Destructors</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PHP — P50:析构函数</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/php-p50-destructors-da52a94cbb0?source=collection_archive---------10-----------------------#2022-05-23">https://blog.devgenius.io/php-p50-destructors-da52a94cbb0?source=collection_archive---------10-----------------------#2022-05-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/51d1e675dced8eba50b7a448cd72350f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FU3FrZUAY7qdwcCQLNCZFQ.jpeg"/></div></div></figure><p id="e0e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">析构函数是构造函数的反义词……想想吧。析构函数方法在对象不再被引用后被调用。在 PHP 中，首先调用构造函数，然后调用用户访问的任何内部方法，最后调用析构函数方法进行清理。</p><p id="f57c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果使用 PHP 的<strong class="ka ir"> exit() </strong>函数退出 PHP 脚本，甚至会调用析构函数。</p><div class="kw kx gp gr ky kz"><a rel="noopener  ugc nofollow" target="_blank" href="/php-p49-constructors-5956272de3bc"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">PHP — P49:构造函数</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">如果你习惯于其他面向对象的编程语言，你可能对构造函数很熟悉。你可以…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">blog.devgenius.io</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jw kz"/></div></div></a></div><p id="ff32" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了创建析构函数方法，我们将遵循与构造函数方法相似的命名约定。你以两个下划线开始，然后是关键字 destruct: <em class="lo"> __destruct()。</em></p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="85ab" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">尽管您可能会尝试使用 destruct 方法来清理资源，但通常最好是在使用完资源后立即清理。</p><p id="ae19" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们看看我们最喜欢的例子:德国牧羊人和汽车类。</p><p id="3744" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">析构函数方法通常被放在类中的最后一个方法，这样阅读你的代码的人会更容易理解它。简单回顾一下:我们通常首先列出常数，然后是属性、构造方法、所有其他方法，最后是析构方法。</p><p id="3d29" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的析构函数中列出什么是好的例子？在我们的 GermanShepherd 类中，属性将在对象的整个生命周期中被修改。如果我们想看看这些属性最后是什么样子，就在对象被销毁之前，我们可以利用析构函数。我们的析构方法将只是变量转储对象的属性。</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="5e16" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在上面的例子中，我们创建了一个新的 GermanShepherd 对象，并调用了<strong class="ka ir"> bark() </strong>方法。因为我们现在有了一个<strong class="ka ir"> __destruct() </strong>方法，输出将会很有趣。</p><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/6a622856a4110704c067b867e9810882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMAOKHIuUNAG4yHzDQDToA.png"/></div></div></figure><p id="2820" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">很明显，一旦执行完成，就调用了 destruct 方法。我们先把<strong class="ka ir"> bark() </strong>方法叫做。PHP 执行了这个脚本，并说，“我不需要执行额外的方法。存在 __destruct()方法吗？是的。让我也执行它。”我们显式调用了<strong class="ka ir"> bark() </strong>方法，PHP 隐式调用了<strong class="ka ir"> __destruct() </strong>方法。</p><p id="eae0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对于汽车类，我将向您展示一些我在开发人员中经常看到的东西。程序员倾向于在<strong class="ka ir"> __destruct() </strong>方法中关闭他们与数据库的连接。当您使用完数据库连接时，您会想要立即终止它，但是如果您在构造函数中注入或初始化数据库连接，这将会特别有用。</p><p id="9a99" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将在后面全面介绍数据库，所以现在我们只回显一条声明，“连接成功关闭。”我们甚至可以在构造函数中添加“连接成功建立”来查看工作中的完整执行范围。</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="1def" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">代码输出“连接成功建立”字符串，然后是车辆的品牌和型号，最后如预期的那样显示“连接成功关闭”字符串。PHP 依次调用构造函数，调用方法，最后调用析构函数。</p><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lw lu l"/></div></figure></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><div class="lp lq lr ls gt kz"><a href="https://github.com/dinocajic/php-7-youtube-tutorials" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">dinocajic/PHP-7-YouTube-教程</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">PHP 7.x YouTube 教程的代码。</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">github.com</p></div></div><div class="li l"><div class="me l lk ll lm li ln jw kz"/></div></div></a></div></div><div class="ab cl lx ly hu lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ij ik il im in"><figure class="lp lq lr ls gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ce6c50237ea1b7fe311d094ac7e4e98f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1vu90M5U2nl6Jn4Q.jpeg"/></div></div></figure><p id="b5c9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">迪诺·卡伊奇目前是<a class="ae mf" href="https://www.lsbio.com/" rel="noopener ugc nofollow" target="_blank"> LSBio(生命周期生物科学公司)</a>、<a class="ae mf" href="https://absoluteantibody.com/" rel="noopener ugc nofollow" target="_blank">绝对抗体</a>、<a class="ae mf" href="https://www.kerafast.com/" rel="noopener ugc nofollow" target="_blank"> Kerafast </a>、<a class="ae mf" href="https://everestbiotech.com/" rel="noopener ugc nofollow" target="_blank">珠穆朗玛生物</a>、<a class="ae mf" href="https://www.nordicmubio.com/" rel="noopener ugc nofollow" target="_blank">北欧 MUbio </a>和<a class="ae mf" href="https://www.exalpha.com/" rel="noopener ugc nofollow" target="_blank"> Exalpha </a>的 IT 主管。他还担任我的自动系统的首席执行官。他有十多年的软件工程经验。他拥有计算机科学学士学位，辅修生物学。他的背景包括创建企业级电子商务应用程序、执行基于研究的软件开发，以及通过写作促进知识的传播。</p><p id="44bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你可以在<a class="ae mf" href="https://www.linkedin.com/in/dinocajic/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系他，在<a class="ae mf" href="https://instagram.com/think.dino" rel="noopener ugc nofollow" target="_blank"> Instagram </a>上关注他，或者<a class="ae mf" href="https://dinocajic.medium.com/subscribe" rel="noopener">订阅他的媒体出版物</a>。</p><p id="84db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae mf" href="https://dinocajic.medium.com/membership" rel="noopener"> <em class="lo">阅读迪诺·卡吉克(以及媒体上成千上万其他作家)的每一个故事。你的会员费直接支持迪诺·卡吉克和你阅读的其他作家。你也可以在媒体上看到所有的故事。</em> </a></p></div></div>    
</body>
</html>