<html>
<head>
<title>When to use Swift For-in and ForEach</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">何时使用 Swift For-in 和 ForEach</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/when-to-use-swift-for-in-and-for-each-361d55d6cc45?source=collection_archive---------2-----------------------#2022-11-01">https://blog.devgenius.io/when-to-use-swift-for-in-and-for-each-361d55d6cc45?source=collection_archive---------2-----------------------#2022-11-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="33be" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Swift For-in 和 For-each 的区别</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/bab802b3374fff58c828a5516b158a52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QfFKhuK9Ju7xlNXf7GrVtQ.jpeg"/></div></div></figure><p id="cbca" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">For-in 和 for each 是 Swift 中控制流语句的示例。它们是 Swift 中 for 循环的不同变体，用于迭代数组、字典、范围、字符串和其他序列。虽然大多数看起来相似，但也有一些不同。</p><h1 id="b83d" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated"><strong class="ak"> 1。用于输入</strong></h1><p id="55e2" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">for-in 循环用于将代码块运行一定的次数。它用于迭代序列，如数组、范围、字符串等。</p><p id="3a47" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> a)带数组的 for-in 循环</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="4269" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用字典进行 for-in 循环<br/> 你也可以遍历字典来访问它的键值对。当字典迭代时，字典中的每一项都作为一个<code class="fe mj mk ml mm b">(key, value)</code>元组返回，并且您可以将<code class="fe mj mk ml mm b">(key, value)</code>元组的成员分解为显式命名的常量，以便在<strong class="kq io"> for-in </strong>循环的主体中使用。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="ff9e" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">let</strong> numberOfLegs = ["spider": 8, "ant": 6, "cat": 4]<br/><strong class="mm io">for</strong> (animalName, legCount) <strong class="mm io">in</strong> numberOfLegs {<br/>    print("\(animalName)s have \(legCount) legs")<br/>}</span></pre><p id="d08a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> c)带有 where 子句的 for-in 循环<br/> </strong>有些情况下，我们希望将序列限制为仅匹配特定条件的元素，为此，我们可以添加一个带有<strong class="kq io"> for-in </strong>循环的<strong class="kq io"> where </strong>子句，以在循环中实现过滤器。也就是说，如果<strong class="kq io">中的条件</strong>子句返回<em class="mw">真</em>，则执行循环。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="1043" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">let</strong> languages = ["Swift", "Java", "Objective-C", "Pyhton"]<br/><strong class="mm io">for</strong> language <strong class="mm io">in</strong> languages where <!-- -->language == "<!-- -->Swift<!-- -->"<!-- -->  {<br/>   print(language)<br/>}</span><span id="b1cf" class="mr ll in mm b gy mx mt l mu mv"><strong class="mm io">Output:- </strong><em class="mw">Swift</em></span></pre><p id="8564" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> d) for-in 循环用 enumerated() <br/> </strong>同时访问元素的各个索引，我们可以使用实例方法<strong class="kq io"> enumerated() </strong>。它返回一系列包含索引和元素值的对。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="7517" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">let</strong> continents = ["Asia", "Africa", "North America", "South America", "Antarctica", "Europe", "Australia"]</span><span id="e30c" class="mr ll in mm b gy mx mt l mu mv"><strong class="mm io">for</strong> (index, value) <strong class="mm io">in</strong> continents.enumerated()  {<br/>    print("Continent \(index+1):", value)<br/>}</span></pre><p id="8272" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> e)带步幅功能的 for-in 循环</strong></p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="0e59" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">for</strong>(i = 0; i &lt; n; i++) {  <br/>   statements<br/>}</span></pre><p id="8718" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">swift 不支持上述 C 风格的 for 循环，我们可以使用 Stride 来存档 counter 变量的增量/减量。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="132d" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">for</strong> i <strong class="mm io">in</strong> stride(from: 0, to: 10, by: 2) {<br/>    print(i)<br/>}</span><span id="6f71" class="mr ll in mm b gy mx mt l mu mv"><strong class="mm io">for</strong> i <strong class="mm io">in</strong> stride(from: 0, through: 10, by: 2) {<br/>    print(i)<br/>}</span></pre><p id="0e73" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> f)带范围的 for-in 循环<br/> </strong>范围是两个数值区间之间的一系列数值。我们可以使用一个<strong class="kq io"> for-in </strong>循环来遍历一个范围。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="b025" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">for</strong> i <strong class="mm io">in</strong> 1...3 {<br/>    print(i)<br/>}</span><span id="9cb2" class="mr ll in mm b gy mx mt l mu mv"><strong class="mm io">for</strong> index <strong class="mm io">in</strong> (0...3).reversed() {     <br/>   print("\(index)..") <br/>}</span></pre><p id="560c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要了解更多关于<strong class="kq io"> </strong> Swift range 运算符，请阅读帖子<a class="ae my" href="https://medium.com/p/91a9e8dd188b" rel="noopener"> <strong class="kq io"> Swift Range 表达式</strong> </a> <strong class="kq io">。</strong></p><div class="mz na gp gr nb nc"><a href="https://medium.com/@ashokrawat086/swift-range-expressions-91a9e8dd188b" rel="noopener follow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">快速范围表达式</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">不同类型的范围运算符</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">medium.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq km nc"/></div></div></a></div><p id="c724" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> g)具有可选模式的 for-in 循环<br/> </strong>如果序列包含可选值，我们可以对 case let 使用<strong class="kq io">来过滤零值，仅对非零元素执行循环。</strong></p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="8ec2" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">struct</strong> User {<br/>  <strong class="mm io">let</strong> name: String<br/>  <strong class="mm io">let</strong> isAuthenticate: Bool?<br/>}</span><span id="c391" class="mr ll in mm b gy mx mt l mu mv"><strong class="mm io">let</strong> users: [User?] = [User(name: "XYZ", isAuthenticate: <strong class="mm io">false</strong>), User(name: "ABC", isAuthenticate: <strong class="mm io">nil</strong>)]</span><span id="d1a6" class="mr ll in mm b gy mx mt l mu mv"><strong class="mm io">for</strong> <strong class="mm io">case</strong> <strong class="mm io">let</strong> user? <strong class="mm io">in</strong> users <strong class="mm io">where</strong> user.isAuthenticate == <strong class="mm io">false</strong> {<br/>    print(user)<br/>}</span></pre><h1 id="3dd1" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">2.对于每个人</h1><p id="4f8c" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated"><strong class="kq io"> forEach </strong>是一个方法，它接受一个闭包，使用一个 for 循环来遍历列表中的所有元素，并以每个元素作为参数来调用闭包。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="8998" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">@inlinable public </strong>func forEach(_ body: (Element) <strong class="mm io">throws</strong> -&gt; Void) <strong class="mm io">rethrows</strong> {   <br/>  <strong class="mm io">for</strong> element <strong class="mm io">in</strong> self {     <br/>      <strong class="mm io">try</strong> body(element)   <br/>   } <br/>}</span></pre><p id="4083" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> forEach </strong>按照与<strong class="kq io"> for-in </strong>循环相同的顺序调用序列中每个元素的给定闭包。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="2e0f" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">let</strong> numbers = [1, 2, 3, 4, 5]<br/>numbers.<strong class="mm io">forEach</strong> { num <strong class="mm io">in</strong><br/>    print(num)<br/>}</span><span id="0add" class="mr ll in mm b gy mx mt l mu mv"><strong class="mm io">let</strong> currencyCodes = ["United States": "USD", "India": "INR", "United Kingdom": "GBP", "South Korea": "KRW"] <br/>currencyCodes.forEach { country, currencyCode in     <br/>   print("\(country) currency code is \(currencyCode)") <br/>}</span></pre><h2 id="a2a7" class="mr ll in bd lm nr ns dn lq nt nu dp lu kx nv nw lw lb nx ny ly lf nz oa ma ob bi translated">For-in 和 forEach 的区别</h2><p id="9b68" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">使用<strong class="kq io"> forEach </strong>方法与使用<strong class="kq io"> for-in </strong>循环有以下重要区别:</p><p id="0b74" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 1。For-in </strong>是一个运算符，而 for-each 是一个函数。</p><p id="2f00" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 2。</strong>不能使用<strong class="kq io"> break </strong>或<strong class="kq io"> continue </strong>语句退出主体闭包的当前调用或跳过后续调用。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mh mi l"/></div></figure><blockquote class="oc od oe"><p id="ba60" class="ko kp mw kq b kr ks jo kt ku kv jr kw of ky kz la og lc ld le oh lg lh li lj ig bi translated">Break 和 continue 是 for 循环的基本语法，用于中断循环迭代或继续下一个元素。由于<strong class="kq io"> for-each </strong>是一个函数，试图在 for-each 迭代中使用 break 和 continue 会导致编译时错误。</p></blockquote><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oi"><img src="../Images/14b630eb0905146f26f2387cf350e72e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lB3gUkVTY8BqkFk3hhujkg.png"/></div></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oj"><img src="../Images/6dba28529d1115951b440c5815210d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rIjWxSz726ojvPw2CJBMSA.png"/></div></div></figure><p id="d31f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 3。</strong>在 body 闭包中使用<strong class="kq io"> return </strong>语句只会从当前对 body 的调用中退出，不会从任何外部作用域退出，也不会跳过后续调用。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ok"><img src="../Images/8570eee63ff5006646268a4c9b10cf62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GfZnngqzHBAZ6M1MfUvQDw.png"/></div></div></figure><blockquote class="oc od oe"><p id="70b9" class="ko kp mw kq b kr ks jo kt ku kv jr kw of ky kz la og lc ld le oh lg lh li lj ig bi translated">在 for-in 循环中，从 for 循环的范围返回是不可能的。如果在函数内部，我们可以在 for-in 循环中使用 return，但是它将从函数返回，而不是从 for-loop 作用域返回。</p></blockquote><p id="813b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> 4。</strong> For-each 可以与 Swift 的闭包或一级函数一起使用，而不能与 for-in 循环一起使用。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="03cf" class="mr ll in mm b gy ms mt l mu mv"><strong class="mm io">func</strong> printEvenNumber(for number : Int) {<br/>   <strong class="mm io">guard</strong> number % 2 == 0 <strong class="mm io">else</strong> {<br/>     <strong class="mm io">return<br/>   </strong>}<br/>  print(number)<br/>}</span><span id="05f0" class="mr ll in mm b gy mx mt l mu mv">(0...10).forEach(printEvenNumber)</span></pre><h2 id="0c02" class="mr ll in bd lm nr ns dn lq nt nu dp lu kx nv nw lw lb nx ny ly lf nz oa ma ob bi translated">结论</h2><p id="9bbe" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">使用<code class="fe mj mk ml mm b">for</code>循环给了我们对迭代更大程度的控制，而使用<strong class="kq io"> forEach </strong>使我们能够利用闭包和一流函数的强大功能，即使迭代一旦开始就无法停止</p></div><div class="ab cl ol om hr on" role="separator"><span class="oo bw bk op oq or"/><span class="oo bw bk op oq or"/><span class="oo bw bk op oq"/></div><div class="ig ih ii ij ik"><p id="022f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">感谢阅读。如果您有任何意见、问题或建议，请在下面的评论区发表！👇请<strong class="kq io">分享</strong>并给予<strong class="kq io">掌声</strong>👏👏如果你喜欢这个帖子。</p></div></div>    
</body>
</html>