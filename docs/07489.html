<html>
<head>
<title>How the Pros Fetch Data | React Mastery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">专业人士如何获取数据|反应精通</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/how-the-pros-fetch-data-react-mastery-63b14e6795df?source=collection_archive---------1-----------------------#2022-03-30">https://blog.devgenius.io/how-the-pros-fetch-data-react-mastery-63b14e6795df?source=collection_archive---------1-----------------------#2022-03-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="139c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">答案是，用 React 钩子。简单，时尚，一个伟大的整体技能添加到您的反应武器库。在本指南中，我们将构建一个 React 挂钩来获取一些我们希望向用户显示的数据。</p><p id="cc72" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我们考虑一下数据获取调用的基本构件。首先，我们显然需要数据。很好。其次，由于数据获取是一个异步过程，我们将需要某种形式的加载状态。最后，一些错误处理将是惊人的，以防硬件中的任何错误。这可能会导致类似如下的挂钩调用:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/2f464d1c215fde1c8a6ab812c9a55191.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mHGLFXR2GEFx3yQQEdCqcA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">在组件中使用我们的自定义钩子。</figcaption></figure><h1 id="2a2d" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">设计挂钩</h1><p id="2ea3" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">首先，让我们了解一下 React 钩子应该如何工作。对于我们的数据获取示例，我们将调用一个 API，这是一个异步的过程；也许我们希望有条件地在页面上呈现结果。我们的获取将使用 Axios NPM 库来处理。为了处理这个过程，我们将在源文件夹中名为“hooks”的子目录中创建一个名为“fetchData.js”的文件。</p><p id="b5b5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">fetchData 函数接收一个 url 作为参数，函数中的 useEffect 监听 url 中的更改。当 url 改变时，它在 useEffect 中运行一个异步函数，更新并返回数据，将错误状态加载到负责调用的组件中。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mb"><img src="../Images/3479555fbfb562622ee703d280e44e71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q0_FPuO_THUhYQu_nFkb6Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">。/hooks/fetchData.js</figcaption></figure><h1 id="487e" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">最终实施</h1><p id="9548" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">现在，我们可以将函数导入到组件中:</p><pre class="kj kk kl km gt mc md me mf aw mg bi"><span id="9aaa" class="mh kz in md b gy mi mj l mk ml">import { fetchData } from './hooks/fetchData.js'</span></pre><p id="8a8b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的成品可能看起来有点像下面这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mb"><img src="../Images/f60289832b35b36b6dceb48dd2dc1164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IKk_o0KQH14fh-EwcHBaYw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">数据呼叫最佳实践！</figcaption></figure><p id="ce42" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">或者如果我们想要一个更简单的实现:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mm"><img src="../Images/3526f77ffebf56f9edf357103bd5a068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U2beSLyDx0Kr1cWed5xLRQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk translated">速记数据提取。</figcaption></figure><h1 id="9271" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="5d45" class="pw-post-body-paragraph jk jl in jm b jn lw jp jq jr lx jt ju jv ly jx jy jz lz kb kc kd ma kf kg kh ig bi translated">就这样，您创建了自己的自定义 React 钩子，它非常灵活地获取数据并提供加载和错误处理。</p></div></div>    
</body>
</html>