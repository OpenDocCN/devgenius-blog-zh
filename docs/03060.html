<html>
<head>
<title>Maintainable JavaScript — CSS and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">可维护的 JavaScript — CSS 和 JavaScript</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/maintainable-javascript-css-and-javascript-f42b0a54d691?source=collection_archive---------12-----------------------#2020-09-24">https://blog.devgenius.io/maintainable-javascript-css-and-javascript-f42b0a54d691?source=collection_archive---------12-----------------------#2020-09-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6afb7f9c5b9a600cd896221ecee82b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PZrHmhCvWZMTXtxQ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">詹姆斯·贝瑟在 Unsplash<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">上拍摄的照片</a></figcaption></figure><p id="36b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果想继续使用代码，创建可维护的 JavaScript 代码很重要。</p><p id="9221" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将通过研究松散耦合来了解创建可维护的 JavaScript 代码的基础。</p><h1 id="3385" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">让 JavaScript 远离 CSS</h1><p id="7920" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">IE8 允许我们在 CSS 代码中运行 JavaScript 表达式。</p><p id="99bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这肯定是不好的，因为我们不希望 CSS 和 JavaScript 之间紧密耦合。</p><p id="8e92" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以这样写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dc1c" class="mn lc iq mj b gy mo mp l mq mr">.box {<br/>  backgroundColor: expression(document.body.backgroundColor);<br/>}</span></pre><p id="9386" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是 IE8 特有的，它引入了紧耦合，因此不应使用。</p><p id="6517" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CSS 经常被重新评估，所以 JavaScript 会频繁运行，所以我们不应该把 JavaScript 代码放在 CSS 中。</p><p id="01f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也很难调试，因为 JavaScript 代码在 CSS 文件中，所以没有办法在任何浏览器中跟踪它们。</p><h1 id="df00" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">让 CSS 远离 JavaScript</h1><p id="ab48" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在任何浏览器中用 JavaScript 设置 CSS 样式。</p><p id="71ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们合作得很好。</p><p id="c738" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，在 JavaScript 中改变样式意味着必须运行 JavaScript 代码。</p><p id="6baf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以如果我们有这样的代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9b09" class="mn lc iq mj b gy mo mp l mq mr">element.style.color = "green";</span></pre><p id="6026" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d5de" class="mn lc iq mj b gy mo mp l mq mr">element.style.color = "red";<br/>element.style.left = "10px";<br/>element.style.top = "200px";<br/>element.style.visibility = "visible";</span></pre><p id="c116" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们必须运行一个或多个操作来改变一个元素的样式。</p><p id="17f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也是一个问题，因为如果我们有风格问题，我们不能只是摆弄 CSS 来解决它。</p><p id="ca5e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须一步一步地检查 JavaScript 代码，找到问题并修复代码。</p><p id="f3eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这肯定比仅仅打开和关闭 CSS 并改变值要慢。</p><p id="c9da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">改变 CSS 的另一个不好的方法是改变元素的<code class="fe ms mt mu mj b">cssText</code>属性。</p><p id="8a60" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，有些人可能会写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="626b" class="mn lc iq mj b gy mo mp l mq mr">element.style.cssText = "color: green; left: 10px; top: 100px; visibility: hidden";</span></pre><p id="eb76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这也不好，因为样式都在一个字符串中。</p><p id="4a97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们不能只打开和关闭它们，改变它们的值而不改变代码和刷新。</p><p id="196b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将 CSS 放在 JavaScript 之外意味着所有的样式信息都在 CSS 中。</p><p id="56dc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们写了这样的东西:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8758" class="mn lc iq mj b gy mo mp l mq mr">.box {<br/>  color: red;<br/>  left: 10px;<br/>  top: 100px;<br/>  visibility: visible;<br/>}</span></pre><p id="e0e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的 CSS 文件中。</p><p id="76ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们可以在浏览器开发控制台中摆弄它们，而不是更改代码和刷新。</p><p id="8ce4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，由于 CSS 是自包含的，所以耦合更松散。</p><p id="6700" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的 JavaScript 代码中，我们可以通过编写以下代码来打开该类:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0a71" class="mn lc iq mj b gy mo mp l mq mr">element.className += " box";</span></pre><p id="08b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="11a9" class="mn lc iq mj b gy mo mp l mq mr">element.classList.add("box");</span></pre><p id="bbb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过以下方式删除它们:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9ee3" class="mn lc iq mj b gy mo mp l mq mr">element.classList.remove("box");</span></pre><p id="636a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CSS 类名是 CSS 和 JavaScript 之间的通信机制。</p><p id="06e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript 用于在页面的整个生命周期中添加和删除元素的类名。</p><p id="9aa0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">样式由 CSS 代码中的类应用。</p><p id="05a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们只需要改变 CSS，而不是直接改变操作风格。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/636b9a6d4f009bd6332bf30280b92416.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NLD62D3CKOK3J1pJ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@cassidyjames?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">卡西迪·詹姆斯·布拉德</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><h1 id="66bd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="4e80" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该让 JavaScript 远离 CSS，让 CSS 远离 JavaScript。</p><p id="07e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们就不会有杂乱的代码与难以调试的代码紧密耦合。</p></div></div>    
</body>
</html>