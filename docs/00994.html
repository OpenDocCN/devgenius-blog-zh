<html>
<head>
<title>React Best Practices — Hooks and Accessibility</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应最佳实践—挂钩和可访问性</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/react-best-practices-hooks-and-accessibility-7c5053471318?source=collection_archive---------26-----------------------#2020-06-21">https://blog.devgenius.io/react-best-practices-hooks-and-accessibility-7c5053471318?source=collection_archive---------26-----------------------#2020-06-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d8c42591882df2e943fc7b33380fbfc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kJwDWw_lphLgsbKX"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">照片由<a class="ae kc" href="https://unsplash.com/@maartendeckers?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">马腾·德克斯</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄</figcaption></figure><p id="4cf6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">像任何类型的应用程序一样，React 应用程序也必须写得很好。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="d58a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看在编写 React 应用程序时的一些最佳实践。</p><h1 id="a654" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JSX 左括号和右括号周围的空格</h1><p id="5c12" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在我们的 JSX 代码中，我们应该在左括号和右括号之间保持一致的间距。</p><p id="cec5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，以下内容没有合适的间距:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="103f" class="mn lc iq mj b gy mo mp l mq mr">&lt;App/ &gt;<br/>&lt;input/<br/>&gt;<br/>&lt;Foo&gt;&lt; /Foo&gt;</span></pre><p id="808d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">斜线前没有空格，斜线后有一个空格，不是八。</p><p id="7dec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，<code class="fe ms mt mu mj b">input</code>在斜杠前没有空格，在斜杠后有换行符。</p><p id="e9f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Foo</code>在结束标签的斜杠前有一个空格字符，这也不好。</p><p id="49d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="483c" class="mn lc iq mj b gy mo mp l mq mr">&lt;Hello /&gt;<br/>&lt;Hello firstName="james" /&gt;</span></pre><h1 id="5d6f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">只有当我们有 JSX 代码时，引用才会起作用</h1><p id="2dd5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们的文件中没有任何 React 组件，那么我们不需要导入 React。</p><p id="7e50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们不应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a41f" class="mn lc iq mj b gy mo mp l mq mr">const React = require('react');<br/><br/>// nothing to do with React</span></pre><p id="c515" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">相反，我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8d72" class="mn lc iq mj b gy mo mp l mq mr">const React = require('react');<br/><br/>const Hello = &lt;div&gt;Hello {this.props.name}&lt;/div&gt;;</span></pre><h1 id="2862" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用导入的组件</h1><p id="b2ea" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该使用我们进口的部件。</p><p id="76b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5a18" class="mn lc iq mj b gy mo mp l mq mr">const Hello = require('./Hello');<br/><br/>&lt;Hello name="james" /&gt;;</span></pre><h1 id="5d10" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JSX 表达式缺少括号</h1><p id="870a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们有多行 JSX 表达式，我们应该用括号把它括起来。</p><p id="6b90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="a63d" class="mn lc iq mj b gy mo mp l mq mr">return (<br/>  &lt;div&gt;<br/>    &lt;p&gt;Hello {name}&lt;/p&gt;<br/>  &lt;/div&gt;<br/>);</span></pre><p id="c1e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们返回 JSX 表达式，并得到我们期望的结果。</p><h1 id="3416" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">向 React 组件添加显示名称</h1><p id="39c5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了使调试更容易，我们应该添加<code class="fe ms mt mu mj b">displayName</code>道具，这样我们就可以用 React dev 工具更容易地调试我们的应用程序。</p><p id="a64e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5b13" class="mn lc iq mj b gy mo mp l mq mr">export default function Hello({ name }) {<br/>  return &lt;div&gt;Hello {name}&lt;/div&gt;;<br/>}<br/>Hello.displayName = 'Hello';</span></pre><p id="f3e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以在 React dev 工具中看到<code class="fe ms mt mu mj b">'Hello'</code>这个名字。</p><h1 id="636c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">丢失关键道具</h1><p id="2e98" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们要呈现一个列表，那么我们应该给列表项添加一个<code class="fe ms mt mu mj b">key</code>道具。</p><p id="861a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该值应该是唯一的 ID，以便 React 可以跟踪它。</p><p id="188c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数组索引不好，因为它们可能会随着列表的改变而改变。</p><p id="26da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1ea2" class="mn lc iq mj b gy mo mp l mq mr">data.map((x) =&gt; &lt;Hello key={x.id}&gt;{x.name}&lt;/Hello&gt;);</span></pre><h1 id="807d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">文本节点中没有注释</h1><p id="cfb1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们想写注释，我们应该用花括号把它们括起来。</p><p id="cdc1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，它们将被呈现为文本。</p><p id="969f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="9b6b" class="mn lc iq mj b gy mo mp l mq mr">&lt;div&gt;{/* empty div */}&lt;/div&gt;;</span></pre><h1 id="6287" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在 JSX 没有重复的房产</h1><p id="f389" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们在 JSX 不应该有重复的道具。</p><p id="f366" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为如果我们拥有它们，我们会得到意想不到的结果。</p><p id="be01" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们应该写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e76d" class="mn lc iq mj b gy mo mp l mq mr">&lt;Hello firstname="james" lastname="smith" /&gt;;</span></pre><p id="9a70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而不是:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5650" class="mn lc iq mj b gy mo mp l mq mr">&lt;Hello name="james" name="smith" /&gt;;</span></pre><h1 id="ab15" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">只调用顶层的钩子</h1><p id="6106" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该只调用顶层的钩子。</p><p id="a144" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们不能在循环或其他块中使用。</p><p id="5c98" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样做是为了保持钩子调用的顺序。</p><h1 id="defa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">仅从 React 函数调用挂钩</h1><p id="7d79" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">钩子不应该从普通的 JavaScript 函数中调用。</p><p id="2f51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它们应该只能从 React 函数组件和其他自定义挂钩中调用。</p><h1 id="0d26" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">无障碍表情符号</h1><p id="09fc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该使用易理解的表情符号。</p><p id="debe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样屏幕阅读器可以阅读它们。</p><p id="40bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使它们易于访问，首先，我们将它们包装在一个 span 元素中。</p><p id="199b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使表情符号易于理解，我们应该使用<code class="fe ms mt mu mj b">aria-label</code>属性来解释我们使用了什么表情符号。</p><p id="db7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们应该给它<code class="fe ms mt mu mj b">role='img'</code>，这样屏幕阅读器就可以把它读给用户听。</p><h1 id="f716" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">替代文本</h1><p id="2e13" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该在我们的 img 元素中有替代文本。</p><p id="8716" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样大家就知道是什么了。</p><p id="dafb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，对于区域和对象标签，我们也应该有同样的东西。</p><p id="9b46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们用类型 image 输入，我们应该添加一个 alt 属性。</p><h1 id="e611" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">主播要有内容</h1><p id="3e63" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们使用<code class="fe ms mt mu mj b">a</code>元素，我们应该有内容在里面。</p><p id="e8a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们都可以使用锚元素。</p><p id="a045" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="c589" class="mn lc iq mj b gy mo mp l mq mr">&lt;a&gt;Content&lt;/a&gt;</span></pre><p id="10b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="339e" class="mn lc iq mj b gy mo mp l mq mr">&lt;a&gt;&lt;TextWrapper /&gt;&lt;a&gt;</span></pre><h1 id="4121" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">添加 aria-activedescendant 和 tabindex 属性</h1><p id="08f9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe ms mt mu mj b">aria-activedescendant</code>属性保留活动文档焦点。</p><p id="286e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它通过将元素的 ID 分配给<code class="fe ms mt mu mj b">aria-activedescendant</code>的值来指示哪个子元素具有次要焦点。</p><p id="066e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">带有<code class="fe ms mt mu mj b">aria-activedescendant</code>的元素必须是可制表的，因此<code class="fe ms mt mu mj b">tabIndex</code>也必须包含在内。</p><p id="8627" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="784c" class="mn lc iq mj b gy mo mp l mq mr">&lt;div aria-activedescendant={id} tabIndex={0} /&gt;<br/>&lt;div aria-activedescendant={id} tabIndex="0" /&gt;<br/>&lt;div aria-activedescendant={id} tabIndex={1} /&gt;</span></pre><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mv"><img src="../Images/9bbfafcf8c306a5dda9c476dd22d776a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lnawWrwEaVR2f82k"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@olia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Olia Gozha </a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上拍摄的照片</figcaption></figure><h1 id="6c16" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6630" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了正确使用钩子，我们应该遵循一些规则。</p><p id="a2d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，为了使我们的应用程序易于访问，我们需要在组件中添加一些额外的属性。</p></div></div>    
</body>
</html>