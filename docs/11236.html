<html>
<head>
<title>Time Series Analysis in R: Moving Averages and Exponential Smoothing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">R 中的时间序列分析:移动平均和指数平滑</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/time-series-analysis-in-r-moving-averages-and-exponential-smoothing-986f2b1a273?source=collection_archive---------1-----------------------#2022-12-27">https://blog.devgenius.io/time-series-analysis-in-r-moving-averages-and-exponential-smoothing-986f2b1a273?source=collection_archive---------1-----------------------#2022-12-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c0a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我深入时间序列之前，我想花点时间把这篇文章中使用的代码归功于波格丹一世·阿纳斯塔西。他有一门 Udemy 课程，叫做 R 中的时间序列预测:一种脚踏实地的方法，在那里我学到了这段代码。他已经允许我使用这个密码。我强烈推荐他的时间序列课程:</p><p id="0afb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">阿纳斯塔西耶，b .(未注明)。<em class="ki">R 中的时间序列预测:一种脚踏实地的方法</em>。乌德米。检索于 2022 年 12 月 16 日，来自<a class="ae kj" href="https://www.udemy.com/course/time-series-forecasting-in-r-a-down-to-earth-approach/" rel="noopener ugc nofollow" target="_blank">https://www . udemy . com/course/time-series-forecasting-in-r-a-脚踏实地的方法/ </a></p><p id="d37e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，我推荐下面这本书，我会在这篇文章中参考:</p><p id="e41f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">克里斯平河(2019)。<em class="ki">用 R 动手做时间序列分析:用 R </em>进行时间序列分析和预测。打包。</p><h1 id="7e15" class="kk kl in bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">移动平均线</h1><p id="9ee7" class="pw-post-body-paragraph jk jl in jm b jn li jp jq jr lj jt ju jv lk jx jy jz ll kb kc kd lm kf kg kh ig bi translated">移动平均是一个平滑函数，按时间顺序对过去和未来的观察值进行平均(Krispin，2019)。</p><p id="f9c2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">居中移动平均数取一个选定的奇数移动平均数，并使用相邻值计算平均值。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ln"><img src="../Images/700b6a7d36aab5b2f0abbf5c547de32f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uiwMKShT-IvlBs4qkusXew.png"/></div></div></figure><p id="774b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这项分析中，我将使用 1959 年加州每天的女性出生总数。</p><p id="1a24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#居中移动平均值<br/> dfb &lt; - read.csv("每日-总-女性-分娩数-CA.csv "，header = T)</p><p id="f89c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">quartz() <br/> ggplot(dfb，aes(date，births，group=1)) + geom_line()</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi lz"><img src="../Images/0307a9af8d1773a8f6f79cf8a107ada7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhhXZKRFXKhtPd1J9zOwDw.png"/></div></div></figure><p id="e020" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此数据中没有趋势或季节性，因此适用于中心移动平均计算。</p><p id="c1b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">计算大小为 5、15 和 25 的移动平均值:</p><p id="a538" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">DFB $ ma5DFB $ ma15&lt;-roll mean(DFB $ births，15，align = "center "，fill = NA)<br/>DFB $ ma25&lt;-roll mean(DFB $ births，25，align = "center "，fill = NA)</p><p id="a069" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">quartz()<br/>gg plot(DFB)+<br/>geom _ line(AES(date，births，group = 1))+<br/>geom _ line(AES(date，ma5，group = 1)，color = "red "，size=1)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ma"><img src="../Images/6bbd1719e27740b7531a45180af3f59a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*klSY0q7hEhr3zfEDk9yDLQ.png"/></div></div></figure><p id="fdc2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">quartz()<br/>gg plot(DFB)+<br/>geom _ line(AES(date，births，group = 1))+<br/>geom _ line(AES(date，ma15，group = 1)，color = "red "，size=1)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mb"><img src="../Images/01997f8773b6b4e6dcba7ba39db2ba97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*18RRWVv3GVBvralCABhkYw.png"/></div></div></figure><p id="a3ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">quartz()<br/>gg plot(DFB)+<br/>geom _ line(AES(date，births，group = 1))+<br/>geom _ line(AES(date，ma25，group = 1)，color = "red "，size=1)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mc"><img src="../Images/8ff010b56546c2a79135c0f5185af59c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Am7OxizN4NIRKpONE4lhQ.png"/></div></div></figure><p id="83a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以放大数据的一部分。这里是 75 天，移动平均线为 5:</p><p id="703e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ggplot(dfb[25:100，]) + <br/> geom_line(aes(date，births，group = 1))+<br/>geom _ line(AES(date，ma5，group = 1)，color = "red "，size=1)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi md"><img src="../Images/cfd6ef4d1d3e1c1162b39c2bd0fbab11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wYdOlwD8o0WXJLRvCCNRbA.png"/></div></div></figure><p id="b594" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用相同的数据，我现在想使用移动平均线预测每日出生人数，移动平均线位于窗口的末端。移动平均线可用于预测。最后计算的值成为未来的预测值。</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi me"><img src="../Images/719de5d1922b297ff62a24208941dd6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_kQ9ApcKgTYUSCypJ1WO8Q.png"/></div></div></figure><p id="2da0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用移动平均数预测每日出生人数:</p><p id="1256" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">摘要(DFB)<br/>#数据的长度是 365，我将对数据进行 80/20 分割，以创建训练和测试集</p><p id="7887" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi">365/100 = 3.65 * 80 = 292</p><p id="be58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">DFB _ trainDFB _ test&lt;-DFB[293:365，] #.2</p><p id="8468" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">总结(DFB _ test)#长度 73</p><p id="48b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#使用窗口大小 3、5、7 和 10<br/>ma3 _ train&lt;-roll mean(DFB _ train $ births，3，align = "right "，fill = NA)<br/>ma5 _ train&lt;-roll mean(DFB _ train $ births，5，align = "right "，fill = NA)<br/>ma7 _ train&lt;-roll mean(DFB _ train $ births，7，align = "right "，fill= NA) <br/> ma1</p><p id="bf1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#测试集中的预测等于最后的平均值<br/>#建立预测值的向量，使用参数 1，提取最后的值 73 次，因为测试集有 73 天<br/>ma3 _ test&lt;-rep(tail(ma3 _ train，1)，73)<br/>ma5 _ test&lt;-rep(tail(ma5 _ train，1)，73) <br/>ma7 _ test&lt;-rep(tail(ma7 _ train，1)，73)【T8</p><p id="eea9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ma3 _ 测试# 45.66667<br/>ma5 _ 测试# 46<br/>ma7 _ 测试# 47.14286<br/>ma10 _ 测试#46.1</p><p id="dbbf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#使用原始数据集中的估计出生数创建变量，这将包含训练集和测试集中的估计值<br/> dfb$ma3 &lt; - c(ma3_train，ma3 _ test)<br/>DFB $ ma5&lt;-c(ma5 _ train，ma5 _ test)<br/>DFB $ ma7&lt;-c(ma7 _ train，ma5 _ test)<br/>DFB $ ma10&lt;-c(ma10 _ train，ma10</p><p id="342b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#在同一个图表上绘制所有平滑后的序列<br/>quartz()<br/>gg plot(DFB)+<br/>geom _ line(AES(date，births，group = 1))+<br/>geom _ line(AES(date，ma3，group = 1)，color = "cornflowerblue "，size = 1)+<br/>geom _ line(AES(date，ma5，group = 1)，color = "coral2 "，size = 1)+<br/>geom _ line(AES(AES</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mf"><img src="../Images/71fa007d3f5ea49d4bd424ee0e2ff540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMW_v3W8d0Z04I7JhsbUCg.png"/></div></div></figure><p id="7972" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#计算预测准确性的自定义函数</p><p id="0e95" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">平均绝对值是测试集中观测值的预测误差绝对值的平均值。</p><p id="c4f8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#平均绝对值<br/>compute _ Mae&lt;-function(OBS，pred){<br/>ABS diff&lt;-sum(ABS(OBS—pred))<br/>Mae&lt;-ABS diff/length(pred)<br/>return(Mae)}</p><p id="5fc8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">测试集中的# compute MAE<br/>#第一个参数是观察值的向量<br/>#第二个参数是预测值的向量<br/>compute _ MAE(DFB＄births，ma3 _ test)# 33.09589<br/>compute _ MAE(DFB＄births，ma5 _ test)# 33.84932<br/>compute _ MAE(DFB＄births，ma7 _ test)# 36.98434<br/>compute _ MAE(DFB＄births</p><p id="1e20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#平均误差<br/>#创建平均误差函数<br/>compute _ avg err&lt;-function(OBS，pred){<br/>diff&lt;-sum(OBS—pred)<br/>avg err&lt;-diff/length(pred)<br/>return(avg err)<br/>}</p><p id="76e3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#计算测试集中的平均误差<br/>compute _ avg err(DFB＄births，ma3 _ test)#-18.42922<br/>compute _ avg err(DFB＄births，ma5 _ test)#-20.09589<br/>compute _ avg err(DFB＄births，ma7 _ test)#-25.81018<br/>compute _ avg err(DFB＄births，ma10 _ test)#-20.5989</p><p id="63d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">均方根误差根据预测值和观测值计算平均距离。</p><p id="45c2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#创建函数并计算 RMSE<br/>compute _ RMSE&lt;-function(OBS，pred){<br/>sq diff&lt;-sum((OBS-pred))<br/>RMSE&lt;-(sq diff/length(pred))⁰.5<br/>return(RMSE)<br/>}</p><p id="996b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">compute _ rmse(DFB＄births，ma3 _ test)# 18.36224<br/>compute _ RMSE(DFB＄births，ma5 _ test)# 18.70865<br/>compute _ RMSE(DFB＄births，ma7 _ test)# 20.06185<br/>compute _ RMSE(DFB＄births，ma10 _ test)# 18.81709<br/>#同样，最小的 RMSE 是三阶移动平均值</p><p id="1d58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">平均绝对百分比误差衡量预测的准确性。<br/>准确率指标:<br/> &lt; 10%非常准确预测<br/> 10%-20%准确预测<br/> 20%-50%合理预测<br/> &gt; 50%不准确预测</p><p id="a806" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#平均绝对百分比误差<br/>#为平均绝对百分比误差创建函数，然后计算<br/>compute _ mape&lt;-function(OBS，pred){<br/>percs&lt;-sum(ABS((OBS—pred)/OBS))* 100<br/>mape&lt;-percs/length(pred)<br/>return(mape)<br/>}</p><p id="663d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">compute_mape(dfb$births，ma3 _ test)# 87.75139<br/>compute _ mape(DFB $ births，ma5 _ test)# 90.04174<br/>compute _ mape(DFB $ births，ma7 _ test)# 99.09173<br/>compute _ mape(DFB $ births，ma10 _ test)# 90.82414<br/>#最低的是 ma3，但你可以看到预测非常</p><p id="2fc6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">平均绝对标准误差也衡量预测的准确性。预测值的平均绝对误差除以原始预测的平均绝对误差。如果这些值小于 1，则预测优于简单的预测。</p><p id="77f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#平均绝对标准误差<br/>#创建并计算平均绝对标准误差<br/>compute _ mase&lt;-function(OBS _ test，pred_test，OBS _ train){<br/>ABS diff _ test&lt;-sum(ABS(OBS _ test—pred _ test))<br/>Mae _ test&lt;-ABS diff _ test/length(pred _ test)<br/>vect _ ABS diff _ train&lt;-NULL<br/>for(I in 2</p><p id="a366" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">compute_mase(dfb_test$births，ma3_test，DFB _ train $ births)# 0.7546234<br/>compute _ mase(DFB _ test $ births，ma5_test，DFB _ train $ births)# 0.7685531<br/>compute _ mase(DFB _ test $ births，ma7_test，DFB _ train $ births)# 0.834481<br/>compute _ mase(DFB _ test $ births，ma5)</p><h1 id="d302" class="kk kl in bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">指数平滑法</h1><p id="8bf6" class="pw-post-body-paragraph jk jl in jm b jn li jp jq jr lj jt ju jv lk jx jy jz ll kb kc kd lm kf kg kh ig bi translated">简单指数平滑通过使用加权平均值来预测未来值，其中最近的观测值权重更大(Krispin，2019)。例如，当 alpha 级别为 0.8 时，第二个最近的观察值将乘以权重 0.16，即 0.8*0.2。下一个最老的观察值将被乘以权重 0.032，即 0.8*0.2，并且这种趋势继续到最老的观察值。较大的 alpha 值将赋予最近值更大的权重，而较小的 alpha 值将赋予旧值更大的权重。为了计算估计值，选择一个时间段(例如 3 个时间段),将值乘以它们的权重，然后将这些值相加得到估计值。简单指数平滑适用于没有趋势或季节成分的数据。</p><p id="ab5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#简单指数平滑<br/>要求(ggplot2) <br/>要求(预测)</p><p id="a758" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ggplot(dfb，aes(date，births，group = 1))+ <br/> geom_line()</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mg"><img src="../Images/7c9ac41aa34c4331c05d4aef0a738969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ctl_X1eE1VZpXyXop7LBLg.png"/></div></div></figure><p id="df0d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#在测试集中创建训练和测试集<br/> dfb_train &lt; - dfb[1:292，]# . 8<br/>DFB _ test&lt;-DFB[293:365，]# . 2<br/>ntest&lt;-nrow(DFB _ test)<br/>ntest # 73 天</p><p id="67e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#无趋势或季节性的加性误差<br/>？ets()#模型详细解释</p><p id="e356" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">模型<br/>#预测值<br/>模型$拟合</p><p id="ed92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#在测试集中进行预测，将置信水平设置为 0，点预测<br/>预测&lt; -预测(模型，h=ntest，水平= 0) <br/> #ntest 是 73 天，测试集中的时段<br/>预测#45.99809</p><p id="38c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#制作预测值的向量，并将其作为变量添加到我们的数据中<br/> pred_ses &lt; - c(模型$拟合，pred $均值)<br/>pred _ ses<br/>DFB $ pred _ ses&lt;-pred _ ses<br/>DFB $ pred _ ses</p><p id="04b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">quartz()<br/>gg plot(DFB)+<br/>geom _ line(AES(date，births，group=1))+<br/>geom _ line(AES(date，pred_ses，group = 1)，color="darkorange2 "，size = 1)+<br/>geom _ vline(AES(xintercept = 292)，color="red "，size=0.8)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mh"><img src="../Images/6e93fcb6ca0c944a3510284ea79d69b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6AmYR5d-6c7JErwqqrZgw.png"/></div></div></figure><p id="96ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#计算准确性指标<br/>准确性(pred，dfb_test$births)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mi"><img src="../Images/3842bbcf7dc1a99faf35791e6cb3f179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6h3vrOfada48HCzigqKoog.png"/></div></div></figure><p id="07e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#改变 alpha 等级并重新测试，只为对比不同的结果<br/>模型&lt; - ets(dfb_train$births，model = "ANN "，alpha = 0.7)</p><p id="4428" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#预测值<br/>模型$拟合</p><p id="f160" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#在测试集中进行预测，将置信水平设置为 0，点预测<br/>预测&lt; -预测(模型，h=ntest，水平= 0) <br/> #ntest 是 73 天，测试集中的时段<br/>预测#43.94793</p><p id="c6c2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#制作预测值的向量，并将其作为变量添加到我们的数据中<br/> pred_ses &lt; - c(模型$拟合，pred $均值)<br/>pred _ ses<br/>DFB $ pred _ ses&lt;-pred _ ses<br/>DFB $ pred _ ses</p><p id="36f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">quartz()<br/>gg plot(DFB)+<br/>geom _ line(AES(date，births，group=1))+<br/>geom _ line(AES(date，pred_ses，group = 1)，color="darkorange2 "，size = 1)+<br/>geom _ vline(AES(xintercept = 292)，color="red "，size=0.8)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mj"><img src="../Images/bf4e2976e1c3fd36bc4d797b4a9dab1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8-OB98yIPOAScOfkt0w7A.png"/></div></div></figure><p id="dd1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#计算精确度指标<br/>精确度(pred，dfb_test$births)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mk"><img src="../Images/edc7f175c63957979d9cba3c7b135b57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oDwZWt9JqRJItJyu96w8dA.png"/></div></div></figure><p id="57d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">添加一个置信度。<br/>模型&lt; - ets(dfb_train$births，model = "ANN "，alpha = 0.2)</p><p id="a96a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#在测试集中进行预测，将置信度设置为 0.95<br/>pred&lt;-forecast(model，h=ntest，level = c(0.95))<br/>pred # 45.99809</p><p id="3e36" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">绘图(预测)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ml"><img src="../Images/c5c2a788f6630773ba93b715dba9d949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qFoUtpP7070Wz4uOoYnbSg.png"/></div></div></figure><p id="0097" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">强的松</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mm"><img src="../Images/5763b272762d6acf21aeb38d24bdc0ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Wk8R4XMpSmLHgy4-makSQ.png"/></div></div></figure><p id="0870" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">霍尔特方法使用加权平均值，并且“基于使用两个平滑参数α和β估计最近的水平和趋势”(Krispin，2019 年，第 312 页)。水平由 alpha 计算，而趋势由 beta 计算。霍尔特方法适用于有趋势的数据。</p><p id="0711" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#高级指数平滑</p><p id="ea13" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#霍尔特法<br/>库(TSstudio) <br/>库(fpp2) <br/>？ausair <br/>“年度航空乘客总数(百万)，包括在澳大利亚注册的航空公司的国内和国际乘客。1970–2016."</p><p id="96aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">情节(澳大利亚)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mn"><img src="../Images/3695e581e0d1407722b9424a36991a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*budPu4UAYlykgJJ0QCXD3A.png"/></div></div></figure><p id="4ef4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#拆分数据但留出 10 年，创建训练和测试集<br/>ausair _ split&lt;-ts _ split(ausair，sample . out = 10)<br/>ausair _ train&lt;-ausair _ split $ train<br/>ausair _ test&lt;-ausair _ split $ test</p><p id="e79d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">？holt() <br/> #Initial:用于选择初始状态值的方法。<br/>#如果是最优的，使用 ets 优化初始值和平滑参数。<br/>#如果简单，初始值被设置为通过对最初几个观察值进行简单计算获得的值。</p><p id="b02e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ausair_model </p><p id="a0b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ausair_model$model</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mo"><img src="../Images/9f3d77a634e6e2a787dfce3ff6039f1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wz9ECvUQQr0qlFBE4SS9bA.png"/></div></div></figure><p id="1bf1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">accuracy(ausair_model, ausair_test)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mp"><img src="../Images/c798431d79f2d60609fb1ec25221389f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LNIxwLlt9GkYHdQrda2k8A.png"/></div></div></figure><p id="494d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">test_forecast(ausair, forecast.obj = ausair_model, test = ausair_test)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mq"><img src="../Images/47feec05ac9422ec3c6b66429c75448a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZxuZvDVZuzh4TRs2ieLkuA.png"/></div></div></figure><p id="82f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">autoplot(ausair_model)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mr"><img src="../Images/238455616aaa1760b8436b4d21c84bb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CFwm8Qc7X2zqScNhsefXrA.png"/></div></div></figure><p id="9676" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#Holt method, second example</p><p id="dbae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">require(ggplot2)<br/>要求(预测)<br/>要求(润滑)<br/>库(fpp) <br/>数据(ausair)</p><p id="a5c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#将 ausair 转换为数据帧<br/>ausair _ df&lt;-data . frame(ausair)<br/>dim(ausair _ df)</p><p id="629b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">绘图(ausair_df)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ms"><img src="../Images/30fb72b473613567ff23c187d1f46e96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwbnwX8wWco5NBaB_N84iQ.png"/></div></div></figure><p id="59b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#分割训练和测试数据<br/>ausair _ train&lt;-ausair _ df[1:30，]<br/>ausair _ test&lt;-ausair _ df[31:40，] <br/> ausair_test</p><p id="3a03" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#使用“ZZZ”时自动选择最优模型，可以选择自己的 alpha 和 beta 值<br/>model _ ZZZ&lt;-ets(ausair _ train，model = "ZZZ "，alpha = 0.999，beta = 0.0886)</p><p id="cfa8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">plot(model _ zzz)<br/>#分解采用 ETS(M，A，N)方法</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mt"><img src="../Images/94e1efd1aee33f529d2b2132807d3e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*doQaWHhyf885Fuy4mN-Zkw.png"/></div></div></figure><p id="55d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">型号 _ zzz $已安装</p><p id="db85" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#测试集预测<br/>预测 _zzz &lt; -预测(模型 _zzz，h=10，级别= 0) <br/>预测 _zzz <br/>图(预测 _zzz)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mu"><img src="../Images/79bddc8da5a4af42f3ec4052630370c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L6fYwwOmvFmM0-8mWKnX3g.png"/></div></div></figure><p id="d122" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#您可以更改预测区间<br/>pred _ zzz&lt;-forecast(model _ zzz，h=10，level = c(80，95))<br/>pred _ zzz<br/>plot(pred _ zzz)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ms"><img src="../Images/bc26fcaa9b7790c965384ea2acc97357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*16LfjLMkkcWDP5uW3hiKPg.png"/></div></div></figure><p id="f9a0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">精度(pred_zzz，ausair_test)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mv"><img src="../Images/dfae2e1908bf33a9638f54353c5c4102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7IrZbH-ZfggC049xTnwMQw.png"/></div></div></figure><p id="5bf6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#尝试加性误差，加性趋势，无季节性<br/>model _ aan&lt;-ets(ausair _ train，model = "AAN "，alpha = 0.999，beta = 0.0886)<br/>plot(model _ aan)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mu"><img src="../Images/69b9575e65bb9c062fd6a387f6d54ecc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bsLC-ENxdNRLFMNpAhrqSw.png"/></div></div></figure><p id="4f41" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">安装的型号</p><p id="abc1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#测试集的预测<br/> pred_aan &lt; -预测(模型 _aan，h=10，级别= 0) <br/> pred_aan <br/>图(pred_aan)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mt"><img src="../Images/7a8730239f5b33d60620f23072180728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a3kDE8I85uV8H-j7XGa3oA.png"/></div></div></figure><p id="70f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">精度(pred_aan，ausair_test)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mc"><img src="../Images/c5dbf47baa440a2d30f2aeec53bfa7a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hE_EP_oCyq6NsxBHgsbxQA.png"/></div></div></figure><p id="b18f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">霍尔特-温特斯法可用于既有趋势性又有季节性的数据。</p><p id="cd81" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#Holt Winters 方法、趋势和季节性<br/>需求(预测)<br/>需求(lubridate) <br/>库(fpp) <br/>库(TSstudio)</p><p id="c147" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#austourists，1999-2010 年国际游客在澳大利亚的季度游客夜。<br/>数据(澳大利亚游客)</p><p id="0d5a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">情节(澳大利亚游客)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mw"><img src="../Images/4e2d6f3e73f5c2af7880f96ba86c595f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwvHP0UtUuo4i-ackk_jkA.png"/></div></div></figure><p id="f750" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">austourists_decom 剧情(austourists_decom)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mx"><img src="../Images/267aeb9a812c49932aadb273ac4b6e70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GPoteLocraxXNvQSDcKTuw.png"/></div></div></figure><p id="98a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#创建训练和测试数据集<br/>aus tourists _ split&lt;-ts _ split(aus tourists，sample . out = 12)<br/>aus tourists _ split $ train<br/>aus tourists _ split $ test</p><p id="6ea7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#为训练集<br/>创建季节性时间序列 aus tourism _ train _ ts&lt;-ts(aus tourism _ split $ train，freq = 4，start = 1999)<br/>#数据是每季度一次的，因此频率设置为 4</p><p id="cb03" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#zzz 模型所以为我选择最优模型<br/>model _ HW&lt;-ets(aus tourist _ train _ ts，model = " ZZZ ")<br/>summary(model _ HW)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi my"><img src="../Images/4bc6e2f00660a85498d6c47037a79d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KNM5fPNNosbp04yMD0KElA.png"/></div></div></figure><p id="f2b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">预测预测</p><p id="684e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">准确性(pred，austourists_split$test)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mz"><img src="../Images/647d1f0f5d09757bf287b60b08a83abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iMx7vZPniuxoOWc_KBpfPA.png"/></div></div></figure><p id="5ca9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#预测国际游客未来每季度的游客住宿天数<br/> pred_f &lt; -预测(model_hw，h=12+12，level=0) <br/> tail(pred_f$mean，12)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi na"><img src="../Images/453b3e81c23041fc0f57a803c5723fd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aaq691mJFHmRHusalKBCkQ.png"/></div></div></figure><p id="0961" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">plot(tail(pred_f$mean，12))</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nb"><img src="../Images/799f4c6704e570cd814ac62e3639b1a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*poBHBJkU1pnxcFg4RnmKyA.png"/></div></div></figure><p id="e8ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当数据是多季节的时，可以使用函数 msts()。电力生产数据显示了年度和月度趋势。</p><p id="5628" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#多季节时间序列的扩展指数平滑法</p><p id="cbff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ggplot(ep，aes(mdy(DATE)，Value，group=1))+ <br/> geom_line()</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nc"><img src="../Images/b577421f09e4aad5a6823eec12577ede.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AIxpJBNuexTEEmrrMebDLg.png"/></div></div></figure><p id="3823" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ggplot(ep[1:24，]，aes(mdy(DATE)，Value，group=1))+ <br/> geom_line()</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nc"><img src="../Images/04c9de5fb06ba7f8cd5b6a042a3f32a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jAsaax89rdDv2u2PlqTUTA.png"/></div></div></figure><p id="1002" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">计数毫秒#月度和年度<br/>计数毫秒</p><p id="37e9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#建立模型<br/>模型 _tbats &lt; - tbats(cnt_ms)</p><p id="ab6f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">model _ tbats $ fitted.values #模型中的估计值</p><p id="c7f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">型号 _tbats</p><p id="a246" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">精度(model_tbats$fitted.values，model_tbats$y) <br/> #y 为实际值</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mt"><img src="../Images/b3875fc65ea2e63d21f55511ed397523.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*USzipdo1kfBuKllisZgrAg.png"/></div></div></figure><p id="6268" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#使用拟合值创建一个新变量<br/>EP $ pred&lt;-model _ tbats $ fitted . values<br/>head(EP)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/56ec445273d73d60e1a19ffd265ba066.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*__JXIiKH0twCBRuztKn8FQ.png"/></div></figure><p id="34eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#plot 系列<br/>库(gg plot 2)<br/>gg plot()+<br/>geom _ line(data = EP，aes(mdy(DATE)，Value，group = 1))+<br/>geom _ line(data = EP，aes(mdy(DATE)，pred)，<br/> color="dodgerblue4 "，size = 1)+<br/>xlab(" DATE ")+<br/>ylab(" Electricity ")</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ne"><img src="../Images/059103b7c1c03d290fcee4dab6642aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N5J-D5RaXBkuJ-Hnpy8Mbw.png"/></div></div></figure><p id="16b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#未来两年的月度预测<br/> pred_tbats &lt; -预测(model_tbats，h=24，level = 0)<br/>pred _ tbats＄平均值</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nf"><img src="../Images/32254d7eb50b05c4909ebcb1df18c834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jcT21wDnRuoknlpgVIiN7A.png"/></div></div></figure><p id="9e35" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#将预测添加到绘图中，使用预测创建第二个数据集</p><p id="ac6a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#创建日期向量<br/>fdates&lt;-seq(mdy(" 2–01–2018 ")，mdy(" 1–01–2020 ")，30) <br/> fdates</p><p id="550b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#使用预测<br/>未来&lt;-as . data . frame(cbind(date = f dates，pred_f=pred_tbats$mean)) <br/>未来创建数据集</p><p id="e3dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#date 不是日期格式，使用 as_date 函数<br/>future $ date&lt;-as _ date(future $ date)<br/>future</p><p id="6bf8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"># plot<br/>gg plot()+<br/>geom _ line(data = EP，aes(mdy(DATE)，Value，group = 1))+<br/>geom _ line(data = EP，aes(mdy(DATE)，pred)，<br/> color="dodgerblue4 "，size = 1)+<br/>geom _ line(data = future，aes(date，pred_f)，<br/> color="darkorange2 "，size=1)+ <br/> xlab("Date ")</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ng"><img src="../Images/3aec9d427a6bae4cd941e15e55f0718b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0qIbTrOUNPzAbi-k4eVBPg.png"/></div></div></figure><p id="c4e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">也可以使用黄土的季节和趋势分解。使用 STLM，可以控制季节性和趋势性组件。</p><p id="a88d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">#STLM 模式</p><p id="0845" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">绘图(mstl(cnt_ms))</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi mb"><img src="../Images/17c13ffa9438ade91e3c9cc4837a529f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c1O1xXz0Ix3gynEv-4o3zg.png"/></div></div></figure><p id="4553" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">model_stlm  <br/>精度(model _ stlm $拟合，ep $值)</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi nh"><img src="../Images/77baabd8f0062cda7f08163acbb30675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbP-ihsKWeP2V8-YXHD4fg.png"/></div></div></figure><p id="f561" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">EP＄pred </p><p id="02f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"># plot<br/>gg plot()+<br/>geom _ line(data = EP，aes(mdy(DATE)，Value，group = 1))+<br/>geom _ line(data = EP，aes(mdy(DATE)，pred)，<br/> color="dodgerblue4 "，size = 1)+<br/>xlab(" DATE ")+<br/>ylab(" Value ")</p><figure class="lo lp lq lr gt ls gh gi paragraph-image"><div role="button" tabindex="0" class="lt lu di lv bf lw"><div class="gh gi ni"><img src="../Images/71ef8c71b23c49b66c0b9409e8a0b94b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LRr05YYWjfMeYwhHKF50Eg.png"/></div></div></figure></div></div>    
</body>
</html>