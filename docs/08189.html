<html>
<head>
<title>React router V5:</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应路由器 V5:</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/react-router-v5-c3f3075c6af6?source=collection_archive---------5-----------------------#2022-05-24">https://blog.devgenius.io/react-router-v5-c3f3075c6af6?source=collection_archive---------5-----------------------#2022-05-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="90a0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">大家好，在这篇文章中，我们将讨论 react-router 和 react-router-dom v5。</p><h2 id="547c" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">一些基本组件:</h2><h2 id="ac74" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">1.浏览器路由器:</h2><p id="7681" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">浏览器路由器使用<strong class="jm io"> HTML5 历史 API </strong>来保持 UI 与 URL 同步。要使用它，我们必须将整个应用程序包装在<strong class="jm io">浏览器路由器</strong>组件中。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/97c277a0c539cd9e123482d7ad7d6f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nhKBNjA7SA2V4IHbAIzvfA.png"/></div></div></figure><p id="5053" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">BrowserRouter 为整个<code class="fe ls lt lu lv b">&lt;App&gt;</code>组件创建一个历史实例。该实例提供了对一些非常有用的 API 的访问，如<em class="lw"> history.location、history.push、history.replace、history.goBack 等。</em></p><h2 id="08d6" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">2.路线:</h2><p id="d7e2" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">一旦我们的应用程序被包装，历史实例跟踪我们的会话，我们必须定义一些路线。这意味着我们必须告诉 react 应用程序应该为某个 URL 呈现哪个组件。我们可以在应用程序中定义多条路线。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lx"><img src="../Images/a8f9c2c3057de473e96a78dea6fa1f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hiSI8nyfLGfCi9eGKNvkVg.png"/></div></div></figure><p id="d1c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">像这里我们定义了四条路线。但是我们还没有完成路线。让我首先向您展示我们在使用这段代码时会遇到的问题。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ly"><img src="../Images/890e48adee59345ca8270f96e49a46aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pmHse3zYSVrNcSEsrFgHSA.png"/></div></div></figure><p id="470a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们在应用程序的<em class="lw"> '/' </em>路线上时，home 组件正在被渲染，这看起来是正确的。但是，当我们转向其他路线，如<em class="lw">“关于”或“关于公司”</em>时，会发生什么呢</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lz"><img src="../Images/08a18119807b5647c6bbc37fa9f0b072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vzPHGrVt-9dWBDS600hx8A.png"/></div></div></figure><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ly"><img src="../Images/21f05f19e1064aefc9dcd6c761e31515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zPQfPg0GGTbuqmjHTNd2Cw.png"/></div></div></figure><p id="da02" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">哎呀！这似乎是个问题。</p><p id="3f7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我告诉你为什么会这样。我们当前的 URL 即<a class="ae ma" href="http://localhost:3000/about" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/about</a>包含“/”和“about”。React router 按照我们在代码中定义的那样从上到下比较路径，然后呈现相关的组件。但是这里我们不希望用户在导航到 about 页面时看到我们的主页。所以<strong class="jm io">确切的</strong>关键词出现在剧中。exact 关键字的作用是将路由的确切路径与 URL 进行比较，然后只呈现相关的组件。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mb"><img src="../Images/fa42d031e2a7653d0a36297b6081f8c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8MZZZ7mbaDXcOlF5Ry_aIw.png"/></div></div></figure><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ly"><img src="../Images/c4d837bf646dd665af2181bb3249c810.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4NjUlZjQf3AIWqCuQML3PQ.png"/></div></div></figure><h2 id="b962" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">3.开关:</h2><p id="b512" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">为了解释<strong class="jm io">开关</strong>组件，我将首先介绍它所解决的问题。</p><p id="681f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在 react 中，我们也可以使用动态 URL，我们可以从 URL 中提取一些内容，并在我们的组件中使用它来从 API 中获取一些数据，或者我们可以在我们的组件中显示这些内容。</p><p id="8125" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是我们如何定义这样的路线。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mc"><img src="../Images/31db26eec5ebf93ad7112ecb76c4a70b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bRsIczL8-P-hPsSOD8-L6w.png"/></div></div></figure><p id="5dce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">只需添加一个冒号(':')，然后添加一个有意义的名称，供用户稍后在组件中从 URL 访问数据时使用。现在，我们将保持它的简单，并将在组件中显示从 URL 获取的 id。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi md"><img src="../Images/353141d50d90bb5990348447660e1d4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L3HemFOZ4Zrr27F6JSCvXw.png"/></div></div></figure><p id="2563" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里 react-router 将为我们完成这项工作，我们可以通过引用<em class="lw"> props.match.params. </em>来简单地使用这些数据</p><p id="b716" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是现在如果我们发现我们的代码有很大的问题。假设用户导航到<em class="lw">about</em>about 组件将呈现的路线，对。让我们来看看…</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi ly"><img src="../Images/9dbac0ec94a78cd0b7a4bb869e7f5815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vArRS3MVc2sHUnCkcUSYCw.png"/></div></div></figure><p id="e443" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个好像不太对。这里的问题是，当 react-router 开始按照我们在代码中编写的顺序从上到下比较路由时，它首先与<em class="lw"> '/about' </em>路径匹配，并呈现正确的 about 组件，但随后它进一步与我们的动态路由匹配，并将<em class="lw"> about </em>视为 id，并呈现 IdComp。<br/>在这种情况下，开关组件开始发挥作用。</p><p id="3b62" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要使用它，我们只需将我们的路由包装在交换机组件中。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi me"><img src="../Images/0bd9bd7fd20e611db6929ab8309cf4e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDCH3eOoT6JpQuIF_TF_8A.png"/></div></div></figure><p id="713d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">交换机所做的是，当从上到下比较路径时，它只呈现与当前路由匹配的第一个组件。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mf"><img src="../Images/14d1cfdb5fc98fd0ba9f0aedcd87e421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IycgUApnygIpLq6T1dkUZw.png"/></div></div></figure><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mf"><img src="../Images/b6d6ac62580f81c33ba140a74f0e8d93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCBsIc3w73gFVwqAbfAuMA.png"/></div></div></figure><p id="0a55" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，这很好，现在我们只需要注意我们的路线总是与我们的 id 不同，否则可能会导致大问题。但这是一件我们可以轻松搞定的事情。</p><p id="9bf5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4。链接:</strong></p><p id="4a03" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，在完成所有这些设置之后，我们需要一些用户可以用来在组件之间导航的东西，比如导航条。但现在问题来了，我们如何在 react app 中添加链接。如果我们使用像普通 HTML5 这样的超链接，那么每次我们点击那个链接，我们的整个页面都会刷新，这不是我们在 react 应用中想要的。这里我们可以使用 react-router-dom 提供的链接组件。</p><p id="00fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是我们如何使用链接组件</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mg"><img src="../Images/447512081e4f3f93c344ee895a1b3911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uhdatoX7D88W7GpNfNIJAw.png"/></div></div></figure><p id="ea04" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里的“to”属性用于定义链接将用户重定向到的路由。</p><p id="6066" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 5。导航链接:</strong></p><p id="ddac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">react-router-dom 还提供了一个 NavLink 组件，可以方便地创建交互式 UI。它为我们提供了一个名为 activeClassName 的道具。</p><p id="8666" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们可以将类名添加到链接中来设置它们的样式，然后当链接处于活动状态时，我们可以使用 activeClassName 来设置链接的样式。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mh"><img src="../Images/f0423468df76782c1ad152e28a497343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tzExpz2bg-HnhEmiLyvO2w.png"/></div></div></figure><p id="0c2f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用 activeClassName，我们可能会再次遇到之前在路由中遇到的相同问题。例如，如果我们有两条路由，如<em class="lw"> '/'和'/about' </em>，其中<em class="lw"> </em>两条路由都可以重叠，则活动类将影响两条链路</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mi"><img src="../Images/b639adf7d61ba4a6820f1eaa83f9c385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iwVJjDTswZFe85YjH1BWEQ.png"/></div></div></figure><p id="e444" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了防止这种情况，我们可以在 NavLink 组件中再次使用 exact 关键字</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mj"><img src="../Images/d6f43fd60379e86134dfc1297afce920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RN2dQ4ADxTuu2T_LH1NrpA.png"/></div></div></figure><p id="7782" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将解决问题…..</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi mi"><img src="../Images/96ab0355f57d0eaa1ffbd37fd27252d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G23cBQtgfyhzYEGGWkloHw.png"/></div></div></figure><h2 id="d72c" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated"><strong class="ak">包装:</strong></h2><p id="87e5" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">这就是我们开始使用 react-router V5 所需要知道的全部内容。它还提供了其他一些特性，我们可以稍后再探讨。</p><p id="132c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">谢谢你的时间😊….</p></div></div>    
</body>
</html>