<html>
<head>
<title>JavaScript Unit Test Best Practices — Concerns</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript单元测试最佳实践—关注点</h1>
<blockquote>原文：<a href="https://blog.devgenius.io/javascript-unit-test-best-practices-concerns-85bbc0e48fb3?source=collection_archive---------10-----------------------#2020-08-24">https://blog.devgenius.io/javascript-unit-test-best-practices-concerns-85bbc0e48fb3?source=collection_archive---------10-----------------------#2020-08-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9bfe65a441da85d904663a47c02943a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X6-r5P-3Kf8vGv5J"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">穆斯塔法·梅拉吉在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>上的照片</figcaption></figure><p id="1319" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单元测试对于检查我们的应用程序如何工作非常有用。</p><p id="9a1d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们以后会遇到各种各样的问题。</p><p id="96a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看在编写JavaScript单元测试时应该遵循的一些最佳实践。</p><h1 id="910f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">不要在同一测试中测试多个关注点</h1><p id="4505" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了简单起见，我们应该在每次测试中只测试一个东西。</p><p id="ee40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们发现问题，它将帮助我们更容易地定位任何问题。</p><p id="1f41" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不要写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1512" class="mn lc iq mj b gy mo mp l mq mr">it('should save profile data and update the view with profile data', () =&gt; {<br/>  // expect(...)to(...);<br/>  // expect(...)to(...);<br/>});</span></pre><p id="6b73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="e745" class="mn lc iq mj b gy mo mp l mq mr">it('should save profile data', () =&gt; {<br/>  // expect(...)to(...);<br/>});</span><span id="4514" class="mn lc iq mj b gy ms mp l mq mr">it('should update the view with profile data', () =&gt; {<br/>  // expect(...)to(...);<br/>});</span></pre><p id="8e67" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在测试描述中写‘and’或‘or’意味着我们应该把它们分成多个测试。</p><h1 id="2ad2" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">涵盖一般情况和边缘情况</h1><p id="235d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们要报道边缘案件，这样我们就不会错过任何东西。</p><p id="e13e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们很容易被忽略，但人们会注意到他们。</p><p id="c6c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:“</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f516" class="mn lc iq mj b gy mo mp l mq mr">it('should properly calculate arithmetic expression', () =&gt; {<br/>  const result = calculate('(5 + 10) / 2');<br/>  expect(result).toBe(7.5);<br/>});</span></pre><p id="8e90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="54e4" class="mn lc iq mj b gy mo mp l mq mr">describe('The arithmetic expression calculator', () =&gt; {<br/>  it('should return null when the expression is an empty string', () =&gt; {<br/>    const result = calculator('');<br/>    expect(result).toBeNull();<br/>  });</span><span id="4c75" class="mn lc iq mj b gy ms mp l mq mr">  it('should return value if expression is the value', () =&gt; {<br/>    const result = calculator('12');<br/>    expect(result).toBe(12);<br/>  });</span><span id="c8c8" class="mn lc iq mj b gy ms mp l mq mr">  it('should properly calculate arithmetic expression', () =&gt; {<br/>    const result = calculate('(5 + 10) / 2');<br/>    expect(result).toBe(7.5);<br/>  });</span><span id="9a24" class="mn lc iq mj b gy ms mp l mq mr">  it('should throw an error whenever an invalid expression is passed', () =&gt; {<br/>    const calc = () =&gt; calculator('1 + 1 -');<br/>    expect(calc).toThrow();<br/>  });<br/>});</span></pre><h1 id="a7d9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">总是从用TDD编写最简单的失败测试开始</h1><p id="1830" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该总是先用TDD写一个失败的测试。</p><p id="bfd3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以构建我们的功能来让它通过。</p><h1 id="a291" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在每个测试优先的周期中，总是要迈出一小步</h1><p id="346e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在每个测试的第一个周期中迈出一小步会让我们从失败到通过测试。</p><p id="ac4e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，不写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="43e3" class="mn lc iq mj b gy mo mp l mq mr">it('should properly calculate arithmetic expression', () =&gt; {<br/>  const result = calculate('((5 + 10) / 2)  + 10');<br/>  expect(result).toBe(17.5);<br/>});</span></pre><p id="aec7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了测试一切，我们分别测试小案例，并使每个案例都通过:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6fdf" class="mn lc iq mj b gy mo mp l mq mr">describe('arithmetic expression calculator', () =&gt; {<br/>  it('should return null when the expression is an empty string', () =&gt; {<br/>    const result = calculator('');<br/>    expect(result).toBeNull();<br/>  });</span><span id="cf05" class="mn lc iq mj b gy ms mp l mq mr">  it('should return value if the expression only has one value', () =&gt; {<br/>    const result = calculator('12');<br/>    expect(result).toBe(12);<br/>  });</span><span id="6c85" class="mn lc iq mj b gy ms mp l mq mr">  describe('addition', () =&gt; {<br/>    it('should properly calculate a simple addition', () =&gt; {<br/>      const result = calculator('10 + 1');<br/>      expect(result).toBe(11);<br/>    });</span><span id="4494" class="mn lc iq mj b gy ms mp l mq mr">    it('should properly calculate a complex addition', () =&gt; {<br/>      const result = calculator('1 + 2 + 3');<br/>      expect(result).toBe(6);<br/>    });<br/>  });</span><span id="4c42" class="mn lc iq mj b gy ms mp l mq mr">  // ...</span><span id="41b9" class="mn lc iq mj b gy ms mp l mq mr">  describe('complex expressions', () =&gt; {<br/>    it('should properly calculate an expression containing all operators', () =&gt; {<br/>      const result = RPN('5 + (10 / 2) * 2 - 1'));<br/>      expect(result).toBe(14);<br/>    });<br/>  });<br/>});</span></pre><p id="1e46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的测试从最简单的情况到最复杂的情况。</p><p id="24e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，我们知道我们不会错过太多东西。</p><figure class="me mf mg mh gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c1af9e34fe39d9c8348cec4da29c926e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2C0lTMW86aFMtXu6"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk translated">由<a class="ae kc" href="https://unsplash.com/@mostafa_meraji?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">莫斯塔法·梅拉吉</a>在<a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>拍摄的照片</figcaption></figure><h1 id="55fa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="66dc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们应该在每次测试中测试一个东西。</p><p id="71bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们应该有一个测试来测试从最简单到最复杂的情况。</p></div></div>    
</body>
</html>